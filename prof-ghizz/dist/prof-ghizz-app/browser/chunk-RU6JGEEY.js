import{A as td,E as Ke,F as yu,G as xn,H as nd,M as vu,N as am,O as eC,P as tC,Q as nC,R as Eu,S as rd,U as Et,a as qT,b as Jl,c as zT,d as GT,e as WT,g as nm,h as KT,i as rm,j as im,k as QT,l as YT,m as ZT,n as mu,rb as um,s as om,t as sm,u as ed,x as XT,y as JT}from"./chunk-KD7LYDAI.js";import{a as B,b as Ee,f as tm,g as M}from"./chunk-WTI2L5DI.js";var cm;function id(){return cm}function Pn(n){let e=cm;return cm=n,e}var rC=Symbol("NotFound");function ts(n){return n===rC||n?.name==="\u0275NotFound"}var _t=null,od=!1,lm=1,xk=null,It=Symbol("SIGNAL");function ce(n){let e=_t;return _t=n,e}function cd(){return _t}var ns={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function rs(n){if(od)throw new Error("");if(_t===null)return;_t.consumerOnSignalRead(n);let e=_t.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=_t.recomputing;if(r&&(t=e!==void 0?e.nextProducer:_t.producers,t!==void 0&&t.producer===n)){_t.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===_t&&(!r||kk(i,_t)))return;let o=os(_t),s={producer:n,consumer:_t,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};_t.producersTail=s,e!==void 0?e.nextProducer=s:_t.producers=s,o&&aC(n,s)}function iC(){lm++}function ld(n){if(!(os(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===lm)){if(!n.producerMustRecompute(n)&&!wu(n)){ud(n);return}n.producerRecomputeValue(n),ud(n)}}function dm(n){if(n.consumers===void 0)return;let e=od;od=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Pk(r)}}finally{od=e}}function fm(){return _t?.consumerAllowSignalWrites!==!1}function Pk(n){n.dirty=!0,dm(n),n.consumerMarkedDirty?.(n)}function ud(n){n.dirty=!1,n.lastCleanEpoch=lm}function is(n){return n&&oC(n),ce(n)}function oC(n){n.producersTail=void 0,n.recomputing=!0}function Iu(n,e){ce(e),n&&sC(n)}function sC(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(os(n))do t=hm(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function wu(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(ld(t),r!==t.version))return!0}return!1}function Du(n){if(os(n)){let e=n.producers;for(;e!==void 0;)e=hm(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function aC(n,e){let t=n.consumersTail,r=os(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)aC(i.producer,i)}function hm(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!os(e)){let o=e.producers;for(;o!==void 0;)o=hm(o)}return t}function os(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function dd(n){xk?.(n)}function kk(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function fd(n,e){return Object.is(n,e)}function hd(n,e){let t=Object.create(Ok);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(ld(t),rs(t),t.value===_u)throw t.error;return t.value};return r[It]=t,dd(t),r}var sd=Symbol("UNSET"),ad=Symbol("COMPUTING"),_u=Symbol("ERRORED"),Ok=Ee(B({},ns),{value:sd,dirty:!0,error:null,equal:fd,kind:"computed",producerMustRecompute(n){return n.value===sd||n.value===ad},producerRecomputeValue(n){if(n.value===ad)throw new Error("");let e=n.value;n.value=ad;let t=is(n),r,i=!1;try{r=n.computation(),ce(null),i=e!==sd&&e!==_u&&r!==_u&&n.equal(e,r)}catch(o){r=_u,n.error=o}finally{Iu(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Fk(){throw new Error}var uC=Fk;function cC(n){uC(n)}function pm(n){uC=n}var Lk=null;function gm(n,e){let t=Object.create(pd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>lC(t);return r[It]=t,dd(t),[r,s=>ss(t,s),s=>mm(t,s)]}function lC(n){return rs(n),n.value}function ss(n,e){fm()||cC(n),n.equal(n.value,e)||(n.value=e,Vk(n))}function mm(n,e){fm()||cC(n),ss(n,e(n.value))}var pd=Ee(B({},ns),{equal:fd,value:void 0,kind:"signal"});function Vk(n){n.version++,iC(),dm(n),Lk?.(n)}function J(n){return typeof n=="function"}function as(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var gd=as(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Qi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(o){e=o instanceof gd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{dC(o)}catch(s){e=e??[],s instanceof gd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)dC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Qi(t,e)}remove(e){let{_finalizers:t}=this;t&&Qi(t,e),e instanceof n&&e._removeParent(this)}};je.EMPTY=(()=>{let n=new je;return n.closed=!0,n})();var ym=je.EMPTY;function md(n){return n instanceof je||n&&"closed"in n&&J(n.remove)&&J(n.add)&&J(n.unsubscribe)}function dC(n){J(n)?n():n.unsubscribe()}var dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var us={setTimeout(n,e,...t){let{delegate:r}=us;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=us;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function yd(n){us.setTimeout(()=>{let{onUnhandledError:e}=dn;if(e)e(n);else throw n})}function Yi(){}var fC=vm("C",void 0,void 0);function hC(n){return vm("E",void 0,n)}function pC(n){return vm("N",n,void 0)}function vm(n,e,t){return{kind:n,value:e,error:t}}var Zi=null;function cs(n){if(dn.useDeprecatedSynchronousErrorHandling){let e=!Zi;if(e&&(Zi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Zi;if(Zi=null,t)throw r}}else n()}function gC(n){dn.useDeprecatedSynchronousErrorHandling&&Zi&&(Zi.errorThrown=!0,Zi.error=n)}var Xi=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,md(e)&&e.add(this)):this.destination=Uk}static create(e,t,r){return new fn(e,t,r)}next(e){this.isStopped?_m(pC(e),this):this._next(e)}error(e){this.isStopped?_m(hC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_m(fC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jk=Function.prototype.bind;function Em(n,e){return jk.call(n,e)}var Im=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vd(r)}else vd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vd(t)}}},fn=class extends Xi{constructor(e,t,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&dn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Em(e.next,o),error:e.error&&Em(e.error,o),complete:e.complete&&Em(e.complete,o)}):i=e}this.destination=new Im(i)}};function vd(n){dn.useDeprecatedSynchronousErrorHandling?gC(n):yd(n)}function Bk(n){throw n}function _m(n,e){let{onStoppedNotification:t}=dn;t&&us.setTimeout(()=>t(n,e))}var Uk={closed:!0,next:Yi,error:Bk,complete:Yi};var ls=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Mt(n){return n}function Ed(...n){return wm(n)}function wm(n){return n.length===0?Mt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var te=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Hk(t)?t:new fn(t,r,i);return cs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=mC(r),new r((i,o)=>{let s=new fn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ls](){return this}pipe(...t){return wm(t)(this)}toPromise(t){return t=mC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function mC(n){var e;return(e=n??dn.Promise)!==null&&e!==void 0?e:Promise}function $k(n){return n&&J(n.next)&&J(n.error)&&J(n.complete)}function Hk(n){return n&&n instanceof Xi||$k(n)&&md(n)}function Dm(n){return J(n?.lift)}function ie(n){return e=>{if(Dm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(n,e,t,r,i){return new Tm(n,e,t,r,i)}var Tm=class extends Xi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ds(){return ie((n,e)=>{let t=null;n._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var fs=class extends te{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Dm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let t=this.getSubject();e.add(this.source.subscribe(oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return ds()(this)}};var yC=as(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fe=(()=>{class n extends te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new _d(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new yC}next(t){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ym:(this.currentObservers=null,o.push(t),new je(()=>{this.currentObservers=null,Qi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new te;return t.source=this,t}}return n.create=(e,t)=>new _d(e,t),n})(),_d=class extends Fe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ym}};var ft=class extends Fe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Tu={now(){return(Tu.delegate||Date).now()},delegate:void 0};var Cu=class extends Fe{constructor(e=1/0,t=1/0,r=Tu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Id=class extends je{constructor(e,t){super()}schedule(e,t=0){return this}};var bu={setInterval(n,e,...t){let{delegate:r}=bu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=bu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var hs=class extends Id{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return bu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&bu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Qi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ps=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ps.now=Tu.now;var gs=class extends ps{constructor(e,t=ps.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Su=new gs(hs);var wd=class extends hs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Dd=class extends gs{};var Cm=new Dd(wd);var wt=new te(n=>n.complete());function vC(n){return n&&J(n.schedule)}function bm(n){return n[n.length-1]}function Td(n){return J(bm(n))?n.pop():void 0}function kn(n){return vC(bm(n))?n.pop():void 0}function EC(n,e){return typeof bm(n)=="number"?n.pop():e}var Cd=n=>n&&typeof n.length=="number"&&typeof n!="function";function bd(n){return J(n?.then)}function Sd(n){return J(n[ls])}function Ad(n){return Symbol.asyncIterator&&J(n?.[Symbol.asyncIterator])}function Rd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Nd=qk();function Md(n){return J(n?.[Nd])}function xd(n){return zT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Jl(t.read());if(i)return yield Jl(void 0);yield yield Jl(r)}}finally{t.releaseLock()}})}function Pd(n){return J(n?.getReader)}function Re(n){if(n instanceof te)return n;if(n!=null){if(Sd(n))return zk(n);if(Cd(n))return Gk(n);if(bd(n))return Wk(n);if(Ad(n))return _C(n);if(Md(n))return Kk(n);if(Pd(n))return Qk(n)}throw Rd(n)}function zk(n){return new te(e=>{let t=n[ls]();if(J(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gk(n){return new te(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Wk(n){return new te(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,yd)})}function Kk(n){return new te(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function _C(n){return new te(e=>{Yk(n,e).catch(t=>e.error(t))})}function Qk(n){return _C(xd(n))}function Yk(n,e){var t,r,i,o;return qT(this,void 0,void 0,function*(){try{for(t=GT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function jt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Kr(n,e=0){return ie((t,r)=>{t.subscribe(oe(r,i=>jt(r,n,()=>r.next(i),e),()=>jt(r,n,()=>r.complete(),e),i=>jt(r,n,()=>r.error(i),e)))})}function Qr(n,e=0){return ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function IC(n,e){return Re(n).pipe(Qr(e),Kr(e))}function wC(n,e){return Re(n).pipe(Qr(e),Kr(e))}function DC(n,e){return new te(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function TC(n,e){return new te(t=>{let r;return jt(t,e,()=>{r=n[Nd](),jt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function kd(n,e){if(!n)throw new Error("Iterable cannot be null");return new te(t=>{jt(t,e,()=>{let r=n[Symbol.asyncIterator]();jt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function CC(n,e){return kd(xd(n),e)}function bC(n,e){if(n!=null){if(Sd(n))return IC(n,e);if(Cd(n))return DC(n,e);if(bd(n))return wC(n,e);if(Ad(n))return kd(n,e);if(Md(n))return TC(n,e);if(Pd(n))return CC(n,e)}throw Rd(n)}function be(n,e){return e?bC(n,e):Re(n)}function Y(...n){let e=kn(n);return be(n,e)}function ms(n,e){let t=J(n)?n:()=>n,r=i=>i.error(t());return new te(e?i=>e.schedule(r,0,i):r)}function Sm(n){return!!n&&(n instanceof te||J(n.lift)&&J(n.subscribe))}var hn=as(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Zk(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new fn({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new hn)}});n.subscribe(o)})}function le(n,e){return ie((t,r)=>{let i=0;t.subscribe(oe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Xk}=Array;function Jk(n,e){return Xk(e)?n(...e):n(e)}function Od(n){return le(e=>Jk(n,e))}var{isArray:eO}=Array,{getPrototypeOf:tO,prototype:nO,keys:rO}=Object;function Fd(n){if(n.length===1){let e=n[0];if(eO(e))return{args:e,keys:null};if(iO(e)){let t=rO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function iO(n){return n&&typeof n=="object"&&tO(n)===nO}function Ld(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Au(...n){let e=kn(n),t=Td(n),{args:r,keys:i}=Fd(n);if(r.length===0)return be([],e);let o=new te(oO(r,e,i?s=>Ld(i,s):Mt));return t?o.pipe(Od(t)):o}function oO(n,e,t=Mt){return r=>{SC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)SC(e,()=>{let l=be(n[u],e),d=!1;l.subscribe(oe(r,h=>{o[u]=h,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function SC(n,e,t){n?jt(t,n,e):e()}function AC(n,e,t,r,i,o,s,a){let u=[],l=0,d=0,h=!1,g=()=>{h&&!u.length&&!l&&e.complete()},y=R=>l<r?D(R):u.push(R),D=R=>{o&&e.next(R),l++;let x=!1;Re(t(R,d++)).subscribe(oe(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){let F=u.shift();s?jt(e,s,()=>D(F)):D(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(oe(e,y,()=>{h=!0,g()})),()=>{a?.()}}function $e(n,e,t=1/0){return J(e)?$e((r,i)=>le((o,s)=>e(r,o,i,s))(Re(n(r,i))),t):(typeof e=="number"&&(t=e),ie((r,i)=>AC(r,i,n,t)))}function On(n=1/0){return $e(Mt,n)}function RC(){return On(1)}function ys(...n){return RC()(be(n,kn(n)))}function Ru(n){return new te(e=>{Re(n()).subscribe(e)})}function sO(...n){let e=Td(n),{args:t,keys:r}=Fd(n),i=new te(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let h=!1;Re(t[d]).subscribe(oe(o,g=>{h||(h=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!h)&&(l||o.next(r?Ld(r,a):a),o.complete())}))}});return e?i.pipe(Od(e)):i}function aO(...n){let e=kn(n),t=EC(n,1/0),r=n;return r.length?r.length===1?Re(r[0]):On(t)(be(r,e)):wt}var uO=new te(Yi);function xt(n,e){return ie((t,r)=>{let i=0;t.subscribe(oe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function dr(n){return ie((e,t)=>{let r=null,i=!1,o;r=e.subscribe(oe(t,void 0,void 0,s=>{o=Re(n(s,dr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function NC(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(oe(s,d=>{let h=l++;u=a?n(u,d,h):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Yr(n,e){return J(e)?$e(n,e,1):$e(n,1)}function cO(n,e=Su){return ie((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}t.subscribe(oe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Zr(n){return ie((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function fr(n){return n<=0?()=>wt:ie((e,t)=>{let r=0;e.subscribe(oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function MC(n,e=Mt){return n=n??lO,ie((t,r)=>{let i,o=!0;t.subscribe(oe(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function lO(n,e){return n===e}function Vd(n=dO){return ie((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function dO(){return new hn}function Nu(n){return ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function hr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?xt((i,o)=>n(i,o,r)):Mt,fr(1),t?Zr(e):Vd(()=>new hn))}function vs(n){return n<=0?()=>wt:ie((e,t)=>{let r=[];e.subscribe(oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Am(n,e){let t=arguments.length>=2;return r=>r.pipe(n?xt((i,o)=>n(i,o,r)):Mt,vs(1),t?Zr(e):Vd(()=>new hn))}function xC(){return ie((n,e)=>{let t,r=!1;n.subscribe(oe(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function jd(n,e){return ie(NC(n,e,arguments.length>=2,!0))}function PC(n={}){let{connector:e=()=>new Fe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,d=!1,h=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,d=h=!1},D=()=>{let R=s;y(),R?.unsubscribe()};return ie((R,x)=>{l++,!h&&!d&&g();let F=u=u??e();x.add(()=>{l--,l===0&&!h&&!d&&(a=Rm(D,i))}),F.subscribe(x),!s&&l>0&&(s=new fn({next:W=>F.next(W),error:W=>{h=!0,g(),a=Rm(y,t,W),F.error(W)},complete:()=>{d=!0,g(),a=Rm(y,r),F.complete()}}),Re(R).subscribe(s))})(o)}}function Rm(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new fn({next:()=>{r.unsubscribe(),n()}});return Re(e(...t)).subscribe(r)}function fO(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,PC({connector:()=>new Cu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Bd(...n){let e=kn(n);return ie((t,r)=>{(e?ys(n,t,e):ys(n,t)).subscribe(r)})}function ut(n,e){return ie((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,d=o++;Re(n(u,d)).subscribe(i=oe(r,h=>r.next(e?e(u,h,d,l++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function hO(n,e){return J(e)?ut(()=>n,e):ut(()=>n)}function Ud(n){return ie((e,t)=>{Re(n).subscribe(oe(t,()=>t.complete(),Yi)),!t.closed&&e.subscribe(t)})}function ct(n,e,t){let r=J(n)||e||t?{next:n,error:e,complete:t}:n;return r?ie((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Mt}function kC(n){let e=ce(null);try{return n()}finally{ce(e)}}var Xr=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},$m=new Xr("20.3.15");var zd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",U=class extends Error{code;constructor(e,t){super(yr(e,t)),this.code=e}};function pO(n){return`NG0${Math.abs(n)}`}function yr(n,e){return`${pO(n)}${e?": "+e:""}`}var Dt=globalThis;function _e(n){for(let e in n)if(n[e]===_e)return e;throw Error("")}function LC(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function gr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(gr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Gd(n,e){return n?e?`${n} ${e}`:n:e||""}var gO=_e({__forward_ref__:_e});function Wd(n){return n.__forward_ref__=Wd,n.toString=function(){return gr(this())},n}function ht(n){return Hm(n)?n():n}function Hm(n){return typeof n=="function"&&n.hasOwnProperty(gO)&&n.__forward_ref__===Wd}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Fn(n){return{providers:n.providers||[],imports:n.imports||[]}}function ku(n){return mO(n,Kd)}function qm(n){return ku(n)!==null}function mO(n,e){return n.hasOwnProperty(e)&&n[e]||null}function yO(n){let e=n?.[Kd]??null;return e||null}function Mm(n){return n&&n.hasOwnProperty(Hd)?n[Hd]:null}var Kd=_e({\u0275prov:_e}),Hd=_e({\u0275inj:_e}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zm(n){return n&&!!n.\u0275providers}var Gm=_e({\u0275cmp:_e}),Wm=_e({\u0275dir:_e}),Km=_e({\u0275pipe:_e}),Qm=_e({\u0275mod:_e}),xu=_e({\u0275fac:_e}),ro=_e({__NG_ELEMENT_ID__:_e}),OC=_e({__NG_ENV_ID__:_e});function ti(n){return typeof n=="string"?n:n==null?"":String(n)}function VC(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ti(n)}var jC=_e({ngErrorCode:_e}),vO=_e({ngErrorMessage:_e}),EO=_e({ngTokenPath:_e});function Ym(n,e){return BC("",-200,e)}function Qd(n,e){throw new U(-201,!1)}function BC(n,e,t){let r=new U(e,n);return r[jC]=e,r[vO]=n,t&&(r[EO]=t),r}function _O(n){return n[jC]}var xm;function UC(){return xm}function Pt(n){let e=xm;return xm=n,e}function Zm(n,e,t){let r=ku(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Qd(n,"Injector")}var IO={},Ji=IO,Pm="__NG_DI_FLAG__",km=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=eo(t)||0;try{return this.injector.get(e,r&8?null:Ji,r)}catch(i){if(ts(i))return i;throw i}}};function wO(n,e=0){let t=id();if(t===void 0)throw new U(-203,!1);if(t===null)return Zm(n,void 0,e);{let r=DO(e),i=t.retrieve(n,r);if(ts(i)){if(r.optional)return null;throw i}return i}}function Q(n,e=0){return(UC()||wO)(ht(n),e)}function P(n,e){return Q(n,eo(e))}function eo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function DO(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Om(n){let e=[];for(let t=0;t<n.length;t++){let r=ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=TO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(Q(i,o))}else e.push(Q(r))}return e}function $C(n,e){return n[Pm]=e,n.prototype[Pm]=e,n}function TO(n){return n[Pm]}function Jr(n,e){let t=n.hasOwnProperty(xu);return t?n[xu]:null}function HC(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function qC(n){return n.flat(Number.POSITIVE_INFINITY)}function Yd(n,e){n.forEach(t=>Array.isArray(t)?Yd(t,e):e(t))}function Xm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ou(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function zC(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Zd(n,e,t){let r=_s(n,e);return r>=0?n[r|1]=t:(r=~r,zC(n,r,e,t)),r}function Xd(n,e){let t=_s(n,e);if(t>=0)return n[t|1]}function _s(n,e){return CO(n,e,1)}function CO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ni={},kt=[],vr=new z(""),Jm=new z("",-1),ey=new z(""),Pu=class{get(e,t=Ji){if(t===Ji){let i=BC("",-201);throw i.name="\u0275NotFound",i}return t}};function ty(n){return n[Qm]||null}function Er(n){return n[Gm]||null}function ny(n){return n[Wm]||null}function GC(n){return n[Km]||null}function gn(n){return{\u0275providers:n}}function WC(...n){return{\u0275providers:ry(!0,n),\u0275fromNgModule:!0}}function ry(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Yd(e,s=>{let a=s;qd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&KC(i,o),t}function KC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];iy(i,o=>{e(o,r)})}}function qd(n,e,t,r){if(n=ht(n),!n)return!1;let i=null,o=Mm(n),s=!o&&Er(n);if(!o&&!s){let u=n.ngModule;if(o=Mm(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)qd(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Yd(o.imports,d=>{qd(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&KC(l,e)}if(!a){let l=Jr(i)||(()=>new i);e({provide:i,useFactory:l,deps:kt},i),e({provide:ey,useValue:i,multi:!0},i),e({provide:vr,useValue:()=>Q(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;iy(u,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function iy(n,e){for(let t of n)zm(t)&&(t=t.\u0275providers),Array.isArray(t)?iy(t,e):e(t)}var bO=_e({provide:String,useValue:_e});function QC(n){return n!==null&&typeof n=="object"&&bO in n}function SO(n){return!!(n&&n.useExisting)}function AO(n){return!!(n&&n.useFactory)}function to(n){return typeof n=="function"}function YC(n){return!!n.useClass}var Fu=new z(""),$d={},FC={},Nm;function Lu(){return Nm===void 0&&(Nm=new Pu),Nm}var He=class{},no=class extends He{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Lm(e,s=>this.processProvider(s)),this.records.set(Jm,Es(void 0,this)),i.has("environment")&&this.records.set(He,Es(void 0,this));let o=this.records.get(Fu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ey,kt,{self:!0}))}retrieve(e,t){let r=eo(t)||0;try{return this.get(e,Ji,r)}catch(i){if(ts(i))return i;throw i}}destroy(){Mu(this),this._destroyed=!0;let e=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return Mu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Mu(this);let t=Pn(this),r=Pt(void 0),i;try{return e()}finally{Pn(t),Pt(r)}}get(e,t=Ji,r){if(Mu(this),e.hasOwnProperty(OC))return e[OC](this);let i=eo(r),o,s=Pn(this),a=Pt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let d=PO(e)&&ku(e);d&&this.injectableDefInScope(d)?l=Es(Fm(e),$d):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Lu():this.parent;return t=i&8&&t===Ji?null:t,u.get(e,t)}catch(u){let l=_O(u);throw l===-200||l===-201?new U(l,null):u}finally{Pt(a),Pn(s)}}resolveInjectorInitializers(){let e=ce(null),t=Pn(this),r=Pt(void 0),i;try{let o=this.get(vr,kt,{self:!0});for(let s of o)s()}finally{Pn(t),Pt(r),ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(gr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ht(e);let t=to(e)?e:ht(e&&e.provide),r=NO(e);if(!to(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Es(void 0,$d,!0),i.factory=()=>Om(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ce(null);try{if(t.value===FC)throw Ym(gr(e));return t.value===$d&&(t.value=FC,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&xO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ce(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Fm(n){let e=ku(n),t=e!==null?e.factory:Jr(n);if(t!==null)return t;if(n instanceof z)throw new U(204,!1);if(n instanceof Function)return RO(n);throw new U(204,!1)}function RO(n){if(n.length>0)throw new U(204,!1);let t=yO(n);return t!==null?()=>t.factory(n):()=>new n}function NO(n){if(QC(n))return Es(void 0,n.useValue);{let e=oy(n);return Es(e,$d)}}function oy(n,e,t){let r;if(to(n)){let i=ht(n);return Jr(i)||Fm(i)}else if(QC(n))r=()=>ht(n.useValue);else if(AO(n))r=()=>n.useFactory(...Om(n.deps||[]));else if(SO(n))r=(i,o)=>Q(ht(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ht(n&&(n.useClass||n.provide));if(MO(n))r=()=>new i(...Om(n.deps));else return Jr(i)||Fm(i)}return r}function Mu(n){if(n.destroyed)throw new U(205,!1)}function Es(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function MO(n){return!!n.deps}function xO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function PO(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Lm(n,e){for(let t of n)Array.isArray(t)?Lm(t,e):t&&zm(t)?Lm(t.\u0275providers,e):e(t)}function Qe(n,e){let t;n instanceof no?(Mu(n),t=n):t=new km(n);let r,i=Pn(t),o=Pt(void 0);try{return e()}finally{Pn(i),Pt(o)}}function sy(){return UC()!==void 0||id()!=null}var mn=0,Z=1,ee=2,lt=3,en=4,tn=5,Vu=6,Is=7,Tt=8,ri=9,Ln=10,Se=11,ws=12,ay=13,io=14,nn=15,ii=16,oo=17,Vn=18,ju=19,uy=20,pr=21,Jd=22,Bu=23,Gt=24,so=25,Uu=26,nt=27,ZC=1;var oi=7,$u=8,ao=9,Ot=10;function jn(n){return Array.isArray(n)&&typeof n[ZC]=="object"}function yn(n){return Array.isArray(n)&&n[ZC]===!0}function cy(n){return(n.flags&4)!==0}function _r(n){return n.componentOffset>-1}function Ds(n){return(n.flags&1)===1}function Bn(n){return!!n.template}function Ts(n){return(n[ee]&512)!==0}function uo(n){return(n[ee]&256)===256}var ly="svg",XC="math";function rn(n){for(;Array.isArray(n);)n=n[mn];return n}function dy(n,e){return rn(e[n])}function on(n,e){return rn(e[n.index])}function ef(n,e){return n.data[e]}function fy(n,e){return n[e]}function hy(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function sn(n,e){let t=e[n];return jn(t)?t:t[mn]}function JC(n){return(n[ee]&4)===4}function tf(n){return(n[ee]&128)===128}function eb(n){return yn(n[lt])}function Ir(n,e){return e==null?null:n[e]}function py(n){n[oo]=0}function gy(n){n[ee]&1024||(n[ee]|=1024,tf(n)&&Cs(n))}function tb(n,e){for(;n>0;)e=e[io],n--;return e}function Hu(n){return!!(n[ee]&9216||n[Gt]?.dirty)}function nf(n){n[Ln].changeDetectionScheduler?.notify(8),n[ee]&64&&(n[ee]|=1024),Hu(n)&&Cs(n)}function Cs(n){n[Ln].changeDetectionScheduler?.notify(0);let e=ei(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!tf(e)));)e=ei(e)}function my(n,e){if(uo(n))throw new U(911,!1);n[pr]===null&&(n[pr]=[]),n[pr].push(e)}function nb(n,e){if(n[pr]===null)return;let t=n[pr].indexOf(e);t!==-1&&n[pr].splice(t,1)}function ei(n){let e=n[lt];return yn(e)?e[lt]:e}function yy(n){return n[Is]??=[]}function vy(n){return n.cleanup??=[]}function rb(n,e,t,r){let i=yy(e);i.push(t),n.firstCreatePass&&vy(n).push(r,i.length-1)}var se={lFrame:Eb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Vm=!1;function ib(){return se.lFrame.elementDepthCount}function ob(){se.lFrame.elementDepthCount++}function Ey(){se.lFrame.elementDepthCount--}function rf(){return se.bindingsEnabled}function sb(){return se.skipHydrationRootTNode!==null}function _y(n){return se.skipHydrationRootTNode===n}function Iy(){se.skipHydrationRootTNode=null}function ne(){return se.lFrame.lView}function Be(){return se.lFrame.tView}function ab(n){return se.lFrame.contextLView=n,n[Tt]}function ub(n){return se.lFrame.contextLView=null,n}function rt(){let n=wy();for(;n!==null&&n.type===64;)n=n.parent;return n}function wy(){return se.lFrame.currentTNode}function cb(){let n=se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function bs(n,e){let t=se.lFrame;t.currentTNode=n,t.isParent=e}function Dy(){return se.lFrame.isParent}function lb(){se.lFrame.isParent=!1}function db(){return se.lFrame.contextLView}function Ty(){return Vm}function Cy(n){let e=Vm;return Vm=n,e}function of(){let n=se.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function fb(){return se.lFrame.bindingIndex}function hb(n){return se.lFrame.bindingIndex=n}function si(){return se.lFrame.bindingIndex++}function sf(n){let e=se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function pb(){return se.lFrame.inI18n}function gb(n,e){let t=se.lFrame;t.bindingIndex=t.bindingRootIndex=n,af(e)}function mb(){return se.lFrame.currentDirectiveIndex}function af(n){se.lFrame.currentDirectiveIndex=n}function yb(n){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function by(){return se.lFrame.currentQueryIndex}function uf(n){se.lFrame.currentQueryIndex=n}function kO(n){let e=n[Z];return e.type===2?e.declTNode:e.type===1?n[tn]:null}function Sy(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=kO(o),i===null||(o=o[io],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=se.lFrame=vb();return r.currentTNode=e,r.lView=n,!0}function cf(n){let e=vb(),t=n[Z];se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vb(){let n=se.lFrame,e=n===null?null:n.child;return e===null?Eb(n):e}function Eb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _b(){let n=se.lFrame;return se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ay=_b;function lf(){let n=_b();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ib(n){return(se.lFrame.contextLView=tb(n,se.lFrame.contextLView))[Tt]}function wr(){return se.lFrame.selectedIndex}function ai(n){se.lFrame.selectedIndex=n}function Ss(){let n=se.lFrame;return ef(n.tView,n.selectedIndex)}function wb(){se.lFrame.currentNamespace=ly}function Db(){OO()}function OO(){se.lFrame.currentNamespace=null}function Tb(){return se.lFrame.currentNamespace}var Cb=!0;function df(){return Cb}function qu(n){Cb=n}function jm(n,e=null,t=null,r){let i=Ry(n,e,t,r);return i.resolveInjectorInitializers(),i}function Ry(n,e=null,t=null,r,i=new Set){let o=[t||kt,WC(n)];return r=r||(typeof n=="object"?void 0:gr(n)),new no(o,e||Lu(),r||null,i)}var Me=class n{static THROW_IF_NOT_FOUND=Ji;static NULL=new Pu;static create(e,t){if(Array.isArray(e))return jm({name:""},t,e,"");{let r=e.name??"";return jm({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>Q(Jm)});static __NG_ELEMENT_ID__=-1},qe=new z(""),Un=(()=>{class n{static __NG_ELEMENT_ID__=FO;static __NG_ENV_ID__=t=>t}return n})(),Bm=class extends Un{_lView;constructor(e){super(),this._lView=e}get destroyed(){return uo(this._lView)}onDestroy(e){let t=this._lView;return my(t,e),()=>nb(t,e)}};function FO(){return new Bm(ne())}var pn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Bt=new z("",{providedIn:"root",factory:()=>{let n=P(He),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(pn),e.handleError(t))}}}),bb={provide:vr,useValue:()=>void P(pn),multi:!0};function Ny(n){return typeof n=="function"&&n[It]!==void 0}function co(n,e){let[t,r,i]=gm(n,e?.equal),o=t,s=o[It];return o.set=r,o.update=i,o.asReadonly=Sb.bind(o),o}function Sb(){let n=this[It];if(n.readonlyFn===void 0){let e=()=>this();e[It]=n,n.readonlyFn=e}return n.readonlyFn}function My(n){return Ny(n)&&typeof n.set=="function"}var ff=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=LO}return n})();function LO(){return new ff(ne(),rt())}var mr=class{},zu=new z("",{providedIn:"root",factory:()=>!1});var xy=new z(""),Py=new z(""),$n=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ft(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new te(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),As=(()=>{class n{internalPendingTasks=P($n);scheduler=P(mr);errorHandler=P(Bt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})();function Gu(...n){}var ky=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Um})}return n})(),Um=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Os(n){return{toString:n}.toString()}var hf="__parameters__";function HO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function qO(n,e,t){return Os(()=>{let r=HO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let h=u.hasOwnProperty(hf)?u[hf]:Object.defineProperty(u,hf,{value:[]})[hf];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ut=$C(qO("Optional"),8);function aS(n){let e=Dt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function zO(n){return typeof n=="function"}var Df=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function uS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var yo=(()=>{let n=()=>cS;return n.ngInherit=!0,n})();function cS(n){return n.type.prototype.ngOnChanges&&(n.setInput=WO),GO}function GO(){let n=dS(this),e=n?.current;if(e){let t=n.previous;if(t===ni)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function WO(n,e,t,r,i){let o=this.declaredInputs[r],s=dS(n)||KO(n,{previous:ni,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Df(l&&l.currentValue,t,u===ni),uS(n,e,i,t)}var lS="__ngSimpleChanges__";function dS(n){return n[lS]||null}function KO(n,e){return n[lS]=e}var Ab=[];var Ce=function(n,e=null,t){for(let r=0;r<Ab.length;r++){let i=Ab[r];i(n,e,t)}};function QO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=cS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function fS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Ef(n,e,t){hS(n,e,3,t)}function _f(n,e,t,r){(n[ee]&3)===t&&hS(n,e,t,r)}function Oy(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function hS(n,e,t,r){let i=r!==void 0?n[oo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[oo]+=65536),(a<o||o==-1)&&(YO(n,t,e,u),n[oo]=(n[oo]&4294901760)+u+2),u++}function Rb(n,e){Ce(4,n,e);let t=ce(null);try{e.call(n)}finally{ce(t),Ce(5,n,e)}}function YO(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ee]>>14<n[oo]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,Rb(a,o)):Rb(a,o)}var Ns=-1,fo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function ZO(n){return(n.flags&8)!==0}function XO(n){return(n.flags&16)!==0}function JO(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];e1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function pS(n){return n===3||n===4||n===6}function e1(n){return n.charCodeAt(0)===64}function Ms(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Nb(n,t,i,null,e[++r]):Nb(n,t,i,null,null))}}return n}function Nb(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function gS(n){return n!==Ns}function Tf(n){return n&32767}function t1(n){return n>>16}function Cf(n,e){let t=t1(n),r=e;for(;t>0;)r=r[io],t--;return r}var zy=!0;function bf(n){let e=zy;return zy=n,e}var n1=256,mS=n1-1,yS=5,r1=0,Hn={};function i1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ro)&&(r=t[ro]),r==null&&(r=t[ro]=r1++);let i=r&mS,o=1<<i;e.data[n+(i>>yS)]|=o}function Sf(n,e){let t=vS(n,e);if(t!==-1)return t;let r=e[Z];r.firstCreatePass&&(n.injectorIndex=e.length,Fy(r.data,n),Fy(e,null),Fy(r.blueprint,null));let i=Tv(n,e),o=n.injectorIndex;if(gS(i)){let s=Tf(i),a=Cf(i,e),u=a[Z].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Fy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Tv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=DS(i),r===null)return Ns;if(t++,i=i[io],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ns}function Gy(n,e,t){i1(n,e,t)}function o1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(pS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function ES(n,e,t){if(t&8||n!==void 0)return n;Qd(e,"NodeInjector")}function _S(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ri],o=Pt(void 0);try{return i?i.get(e,r,t&8):Zm(e,r,t&8)}finally{Pt(o)}}return ES(r,e,t)}function IS(n,e,t,r=0,i){if(n!==null){if(e[ee]&2048&&!(r&2)){let s=c1(n,e,t,r,Hn);if(s!==Hn)return s}let o=wS(n,e,t,r,Hn);if(o!==Hn)return o}return _S(e,t,r,i)}function wS(n,e,t,r,i){let o=a1(t);if(typeof o=="function"){if(!Sy(e,n,r))return r&1?ES(i,t,r):_S(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Qd(t);else return s}finally{Ay()}}else if(typeof o=="number"){let s=null,a=vS(n,e),u=Ns,l=r&1?e[nn][tn]:null;for((a===-1||r&4)&&(u=a===-1?Tv(n,e):e[a+8],u===Ns||!xb(r,!1)?a=-1:(s=e[Z],a=Tf(u),e=Cf(u,e)));a!==-1;){let d=e[Z];if(Mb(o,a,d.data)){let h=s1(a,e,t,s,r,l);if(h!==Hn)return h}u=e[a+8],u!==Ns&&xb(r,e[Z].data[a+8]===l)&&Mb(o,a,e)?(s=d,a=Tf(u),e=Cf(u,e)):a=-1}}return i}function s1(n,e,t,r,i,o){let s=e[Z],a=s.data[n+8],u=r==null?_r(a)&&zy:r!=s&&(a.type&3)!==0,l=i&1&&o===a,d=If(a,s,t,u,l);return d!==null?Qu(e,s,d,a,i):Hn}function If(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,d=o>>20,h=r?a:a+d,g=i?a+d:l;for(let y=h;y<g;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&Bn(y)&&y.type===t)return u}return null}function Qu(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof fo){let a=o;if(a.resolving){let y=VC(s[t]);throw Ym(y)}let u=bf(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],d,h=a.injectImpl?Pt(a.injectImpl):null,g=Sy(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&QO(t,s[t],e)}finally{h!==null&&Pt(h),bf(u),a.resolving=!1,Ay()}}return o}function a1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ro)?n[ro]:void 0;return typeof e=="number"?e>=0?e&mS:u1:e}function Mb(n,e,t){let r=1<<n;return!!(t[e+(n>>yS)]&r)}function xb(n,e){return!(n&2)&&!(n&1&&e)}var lo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return IS(this._tNode,this._lView,e,eo(r),t)}};function u1(){return new lo(rt(),ne())}function Bf(n){return Os(()=>{let e=n.prototype.constructor,t=e[xu]||Wy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[xu]||Wy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Wy(n){return Hm(n)?()=>{let e=Wy(ht(n));return e&&e()}:Jr(n)}function c1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!Ts(s);){let a=wS(o,s,t,r|2,Hn);if(a!==Hn)return a;let u=o.parent;if(!u){let l=s[uy];if(l){let d=l.get(t,Hn,r);if(d!==Hn)return d}u=DS(s),s=s[io]}o=u}return i}function DS(n){let e=n[Z],t=e.type;return t===2?e.declTNode:t===1?n[tn]:null}function tc(n){return o1(rt(),n)}function l1(){return Fs(rt(),ne())}function Fs(n,e){return new _n(on(n,e))}var _n=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=l1}return n})();function d1(n){return n instanceof _n?n.nativeElement:n}function f1(){return this._results[Symbol.iterator]()}var Af=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Fe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=qC(e);(this._changesDetected=!HC(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=f1};function TS(n){return(n.flags&128)===128}var Cv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Cv||{}),CS=new Map,h1=0;function p1(){return h1++}function g1(n){CS.set(n[ju],n)}function Ky(n){CS.delete(n[ju])}var Pb="__ngContext__";function xs(n,e){jn(e)?(n[Pb]=e[ju],g1(e)):n[Pb]=e}function bS(n){return AS(n[ws])}function SS(n){return AS(n[en])}function AS(n){for(;n!==null&&!yn(n);)n=n[en];return n}var Qy;function bv(n){Qy=n}function RS(){if(Qy!==void 0)return Qy;if(typeof document<"u")return document;throw new U(210,!1)}var Uf=new z("",{providedIn:"root",factory:()=>m1}),m1="ng",$f=new z(""),vo=new z("",{providedIn:"platform",factory:()=>"unknown"});var Hf=new z("",{providedIn:"root",factory:()=>RS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var y1="h",v1="b";var NS=!1,MS=new z("",{providedIn:"root",factory:()=>NS});var qf=new z("");var E1=(n,e,t,r)=>{};function _1(n,e,t,r){E1(n,e,t,r)}function Sv(n){return(n.flags&32)===32}var I1=()=>null;function xS(n,e,t=!1){return I1(n,e,t)}function PS(n,e){let t=n.contentQueries;if(t!==null){let r=ce(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];uf(o),a.contentQueries(2,e[s],s)}}}finally{ce(r)}}}function Yy(n,e,t){uf(0);let r=ce(null);try{e(n,t)}finally{ce(r)}}function Av(n,e,t){if(cy(e)){let r=ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ce(r)}}}var Dr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Dr||{});var pf;function w1(){if(pf===void 0&&(pf=null,Dt.trustedTypes))try{pf=Dt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return pf}function zf(n){return w1()?.createHTML(n)||n}var gf;function D1(){if(gf===void 0&&(gf=null,Dt.trustedTypes))try{gf=Dt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gf}function kb(n){return D1()?.createScriptURL(n)||n}var Tr=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zd})`}},Zy=class extends Tr{getTypeName(){return"HTML"}},Xy=class extends Tr{getTypeName(){return"Style"}},Jy=class extends Tr{getTypeName(){return"Script"}},ev=class extends Tr{getTypeName(){return"URL"}},tv=class extends Tr{getTypeName(){return"ResourceURL"}};function an(n){return n instanceof Tr?n.changingThisBreaksApplicationSecurity:n}function Cr(n,e){let t=kS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${zd})`)}return t===e}function kS(n){return n instanceof Tr&&n.getTypeName()||null}function Rv(n){return new Zy(n)}function Nv(n){return new Xy(n)}function Mv(n){return new Jy(n)}function xv(n){return new ev(n)}function Pv(n){return new tv(n)}function T1(n){let e=new rv(n);return C1()?new nv(e):e}var nv=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(zf(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},rv=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=zf(e),t}};function C1(){try{return!!new window.DOMParser().parseFromString(zf(""),"text/html")}catch{return!1}}var b1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nc(n){return n=String(n),n.match(b1)?n:"unsafe:"+n}function br(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function rc(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var OS=br("area,br,col,hr,img,wbr"),FS=br("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),LS=br("rp,rt"),S1=rc(LS,FS),A1=rc(FS,br("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),R1=rc(LS,br("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ob=rc(OS,A1,R1,S1),VS=br("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),N1=br("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),M1=br("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),x1=rc(VS,N1,M1),P1=br("script,style,template"),iv=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=F1(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=O1(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=Fb(e).toLowerCase();if(!Ob.hasOwnProperty(t))return this.sanitizedSomething=!0,!P1.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!x1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;VS[a]&&(u=nc(u)),this.buf.push(" ",s,'="',Lb(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=Fb(e).toLowerCase();Ob.hasOwnProperty(t)&&!OS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Lb(e))}};function k1(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function O1(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw jS(e);return e}function F1(n){let e=n.firstChild;if(e&&k1(n,e))throw jS(e);return e}function Fb(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function jS(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var L1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,V1=/([^\#-~ |!])/g;function Lb(n){return n.replace(/&/g,"&amp;").replace(L1,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(V1,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var mf;function kv(n,e){let t=null;try{mf=mf||T1(n);let r=e?String(e):"";t=mf.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=mf.getInertBodyElement(r)}while(r!==o);let a=new iv().sanitizeChildren(Vb(t)||t);return zf(a)}finally{if(t){let r=Vb(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function Vb(n){return"content"in n&&j1(n)?n.content:null}function j1(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var B1=/^>|^->|<!--|-->|--!>|<!-$/g,U1=/(<|>)/g,$1="\u200B$1\u200B";function H1(n){return n.replace(B1,e=>e.replace(U1,$1))}function q1(n,e){return n.createText(e)}function z1(n,e,t){n.setValue(e,t)}function G1(n,e){return n.createComment(H1(e))}function BS(n,e,t){return n.createElement(e,t)}function Rf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function US(n,e,t){n.appendChild(e,t)}function jb(n,e,t,r,i){r!==null?Rf(n,e,t,r,i):US(n,e,t)}function W1(n,e,t,r){n.removeChild(null,e,t,r)}function K1(n,e,t){n.setAttribute(e,"style",t)}function Q1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function $S(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&JO(n,e,r),i!==null&&Q1(n,e,i),o!==null&&K1(n,e,o)}var In=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(In||{});function HS(n){let e=zS();return e?e.sanitize(In.URL,n)||"":Cr(n,"URL")?an(n):nc(ti(n))}function qS(n){let e=zS();if(e)return kb(e.sanitize(In.RESOURCE_URL,n)||"");if(Cr(n,"ResourceURL"))return kb(an(n));throw new U(904,!1)}function Y1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?qS:HS}function Ov(n,e,t){return Y1(e,t)(n)}function zS(){let n=ne();return n&&n[Ln].sanitizer}function GS(n){return n instanceof Function?n():n}function Z1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var WS="ng-template";function X1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Z1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Fv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Fv(n){return n.type===4&&n.value!==WS}function J1(n,e,t){let r=n.type===4&&!t?WS:n.value;return e===r}function eF(n,e,t){let r=4,i=n.attrs,o=i!==null?rF(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!vn(r)&&!vn(u))return!1;if(s&&vn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!J1(n,u,t)||u===""&&e.length===1){if(vn(r))return!1;s=!0}}else if(r&8){if(i===null||!X1(n,i,u,t)){if(vn(r))return!1;s=!0}}else{let l=e[++a],d=tF(u,i,Fv(n),t);if(d===-1){if(vn(r))return!1;s=!0;continue}if(l!==""){let h;if(d>o?h="":h=i[d+1].toLowerCase(),r&2&&l!==h){if(vn(r))return!1;s=!0}}}}return vn(r)||s}function vn(n){return(n&1)===0}function tF(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return iF(e,n)}function nF(n,e,t=!1){for(let r=0;r<e.length;r++)if(eF(n,e[r],t))return!0;return!1}function rF(n){for(let e=0;e<n.length;e++){let t=n[e];if(pS(t))return e}return n.length}function iF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Bb(n,e){return n?":not("+e.trim()+")":e}function oF(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!vn(s)&&(e+=Bb(o,i),i=""),r=s,o=o||!vn(r);t++}return i!==""&&(e+=Bb(o,i)),e}function sF(n){return n.map(oF).join(",")}function aF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!vn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var $t={};function Lv(n,e,t,r,i,o,s,a,u,l,d){let h=nt+r,g=h+i,y=uF(h,g),D=typeof l=="function"?l():l;return y[Z]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:d}}function uF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:$t);return t}function cF(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Lv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Vv(n,e,t,r,i,o,s,a,u,l,d){let h=e.blueprint.slice();return h[mn]=i,h[ee]=r|4|128|8|64|1024,(l!==null||n&&n[ee]&2048)&&(h[ee]|=2048),py(h),h[lt]=h[io]=n,h[Tt]=t,h[Ln]=s||n&&n[Ln],h[Se]=a||n&&n[Se],h[ri]=u||n&&n[ri]||null,h[tn]=o,h[ju]=p1(),h[Vu]=d,h[uy]=l,h[nn]=e.type==2?n[nn]:h,h}function lF(n,e,t){let r=on(e,n),i=cF(t),o=n[Ln].rendererFactory,s=jv(n,Vv(n,i,null,KS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function KS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function QS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function jv(n,e){return n[ws]?n[ay][en]=e:n[ws]=e,n[ay]=e,e}function dF(n=1){YS(Be(),ne(),wr()+n,!1)}function YS(n,e,t,r){if(!r)if((e[ee]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ef(e,o,t)}else{let o=n.preOrderHooks;o!==null&&_f(e,o,0,t)}ai(t)}var Gf=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Gf||{});function ov(n,e,t,r){let i=ce(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Gf.SignalBased)!==0&&(u=e[o][It]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):uS(e,u,o,r)}finally{ce(i)}}var qn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(qn||{}),fF;function Bv(n,e){return fF(n,e)}var Ps=new Set,Wf=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Wf||{}),Eo=new z(""),Ub=new Set;function Ls(n){Ub.has(n)||(Ub.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ZS=!1,sv=class extends Fe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,sy()&&(this.destroyRef=P(Un,{optional:!0})??void 0,this.pendingTasks=P($n,{optional:!0})??void 0)}emit(e){let t=ce(null);try{super.next(e)}finally{ce(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ct=sv;function XS(n){let e,t;function r(){n=Gu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function $b(n){return queueMicrotask(()=>n()),()=>{n=Gu}}var Uv="isAngularZone",Nf=Uv+"_ID",hF=0,de=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ct(!1);onMicrotaskEmpty=new Ct(!1);onStable=new Ct(!1);onError=new Ct(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ZS}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,mF(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Uv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,pF,Gu,Gu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},pF={};function $v(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gF(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){XS(()=>{n.callbackScheduled=!1,av(n),n.isCheckStableRunning=!0,$v(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),av(n)}function mF(n){let e=()=>{gF(n)},t=hF++;n._inner=n._inner.fork({name:"angular",properties:{[Uv]:!0,[Nf]:t,[Nf+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(yF(u))return r.invokeTask(o,s,a,u);try{return Hb(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),qb(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Hb(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!vF(u)&&e(),qb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,av(n),$v(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function av(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Hb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function qb(n){n._nesting--,$v(n)}var Yu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ct;onMicrotaskEmpty=new Ct;onStable=new Ct;onError=new Ct;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function yF(n){return JS(n,"__ignore_ng_zone__")}function vF(n){return JS(n,"__scheduler_tick__")}function JS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function eA(n="zone.js",e){return n==="noop"?new Yu:n==="zone.js"?new de(e):n}var Hv=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),tA=[0,1,2,3],nA=(()=>{class n{ngZone=P(de);scheduler=P(mr);errorHandler=P(pn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){P(Eo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ce(16),this.executing=!0;for(let r of tA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ce(17)}register(t){let{view:r}=t;r!==void 0?((r[so]??=[]).push(t),Cs(r),r[ee]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Wf.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Mf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[so];e&&(this.view[so]=e.filter(t=>t!==this))}};function qv(n,e){let t=e?.injector??P(Me);return Ls("NgAfterNextRender"),_F(n,t,e,!0)}function EF(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function _F(n,e,t,r){let i=e.get(Hv);i.impl??=e.get(nA);let o=e.get(Eo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Un):null,a=e.get(ff,null,{optional:!0}),u=new Mf(i.impl,EF(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var IF=new z("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function rA(n,e,t){let r=n.get(IF);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function wF(n,e){for(let[t,r]of e)rA(n,r.animateFns)}function zb(n,e,t,r){let i=n?.[Uu]?.enter;e!==null&&i&&i.has(t.index)&&wF(r,i)}function Rs(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;yn(i)?u=i:jn(i)&&(l=!0,i=i[mn]);let d=rn(i);n===0&&r!==null?(zb(a,r,o,t),s==null?US(e,r,d):Rf(e,r,d,s||null,!0)):n===1&&r!==null?(zb(a,r,o,t),Rf(e,r,d,s||null,!0)):n===2?Gb(a,o,t,h=>{W1(e,d,l,h)}):n===3&&Gb(a,o,t,()=>{e.destroyNode(d)}),u!=null&&OF(e,n,t,u,o,r,s)}}function DF(n,e){iA(n,e),e[mn]=null,e[tn]=null}function TF(n,e,t,r,i,o){r[mn]=i,r[tn]=e,Kf(n,r,t,1,i,o)}function iA(n,e){e[Ln].changeDetectionScheduler?.notify(9),Kf(n,e,e[Se],2,null,null)}function CF(n){let e=n[ws];if(!e)return Ly(n[Z],n);for(;e;){let t=null;if(jn(e))t=e[ws];else{let r=e[Ot];r&&(t=r)}if(!t){for(;e&&!e[en]&&e!==n;)jn(e)&&Ly(e[Z],e),e=e[lt];e===null&&(e=n),jn(e)&&Ly(e[Z],e),t=e&&e[en]}e=t}}function zv(n,e){let t=n[ao],r=t.indexOf(e);t.splice(r,1)}function oA(n,e){if(uo(e))return;let t=e[Se];t.destroyNode&&Kf(n,e,t,3,null,null),CF(e)}function Ly(n,e){if(uo(e))return;let t=ce(null);try{e[ee]&=-129,e[ee]|=256,e[Gt]&&Du(e[Gt]),AF(n,e),SF(n,e),e[Z].type===1&&e[Se].destroy();let r=e[ii];if(r!==null&&yn(e[lt])){r!==e[lt]&&zv(r,e);let i=e[Vn];i!==null&&i.detachView(n)}Ky(e)}finally{ce(t)}}function Gb(n,e,t,r){let i=n?.[Uu];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Ps.add(n),rA(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:d}=l();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),bF(n,r)}else n&&Ps.delete(n),r(!1)},i)}function bF(n,e){let t=n[Uu]?.running;if(t){t.then(()=>{n[Uu].running=void 0,Ps.delete(n),e(!0)});return}e(!1)}function SF(n,e){let t=n.cleanup,r=e[Is];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Is]=null);let i=e[pr];if(i!==null){e[pr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Bu];if(o!==null){e[Bu]=null;for(let s of o)s.destroy()}}function AF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof fo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ce(4,a,u);try{u.call(a)}finally{Ce(5,a,u)}}else{Ce(4,i,o);try{o.call(i)}finally{Ce(5,i,o)}}}}}function RF(n,e,t){return NF(n,e.parent,t)}function NF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[mn];if(_r(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Dr.None||i===Dr.Emulated)return null}return on(r,t)}function MF(n,e,t){return PF(n,e,t)}function xF(n,e,t){return n.type&40?on(n,t):null}var PF=xF,Wb;function Gv(n,e,t,r){let i=RF(n,r,e),o=e[Se],s=r.parent||e[tn],a=MF(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)jb(o,i,t[u],a,!1);else jb(o,i,t,a,!1);Wb!==void 0&&Wb(o,r,e,t,i)}function Wu(n,e){if(e!==null){let t=e.type;if(t&3)return on(e,n);if(t&4)return uv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Wu(n,r);{let i=n[e.index];return yn(i)?uv(-1,i):rn(i)}}else{if(t&128)return Wu(n,e.next);if(t&32)return Bv(e,n)()||rn(n[e.index]);{let r=sA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ei(n[nn]);return Wu(i,r)}else return Wu(n,e.next)}}}return null}function sA(n,e){if(e!==null){let r=n[nn][tn],i=e.projection;return r.projection[i]}return null}function uv(n,e){let t=Ot+n+1;if(t<e.length){let r=e[t],i=r[Z].firstChild;if(i!==null)return Wu(r,i)}return e[oi]}function Wv(n,e,t,r,i,o,s){for(;t!=null;){let a=r[ri];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&xs(rn(u),r),t.flags|=2),!Sv(t))if(l&8)Wv(n,e,t.child,r,i,o,!1),Rs(e,n,a,i,u,t,o,r);else if(l&32){let d=Bv(t,r),h;for(;h=d();)Rs(e,n,a,i,h,t,o,r);Rs(e,n,a,i,u,t,o,r)}else l&16?kF(n,e,r,t,i,o):Rs(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Kf(n,e,t,r,i,o){Wv(t,r,n.firstChild,e,i,o,!1)}function kF(n,e,t,r,i,o){let s=t[nn],u=s[tn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];Rs(e,n,t[ri],i,d,r,o,t)}else{let l=u,d=s[lt];TS(r)&&(l.flags|=128),Wv(n,e,l,d,i,o,!0)}}function OF(n,e,t,r,i,o,s){let a=r[oi],u=rn(r);a!==u&&Rs(e,n,t,o,a,i,s);for(let l=Ot;l<r.length;l++){let d=r[l];Kf(d[Z],d,n,e,o,a)}}function FF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:qn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=qn.Important),n.setStyle(t,r,i,o))}}function aA(n,e,t,r,i){let o=wr(),s=r&2;try{ai(-1),s&&e.length>nt&&YS(n,e,nt,!1),Ce(s?2:0,i,t),t(r,i)}finally{ai(o),Ce(s?3:1,i,t)}}function Qf(n,e,t){UF(n,e,t),(t.flags&64)===64&&$F(n,e,t)}function ic(n,e,t=on){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function LF(n,e,t,r){let o=r.get(MS,NS)||t===Dr.ShadowDom,s=n.selectRootElement(e,o);return VF(s),s}function VF(n){jF(n)}var jF=()=>null;function BF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function uA(n,e,t,r,i,o){let s=e[Z];if(Yf(n,s,e,t,r)){_r(n)&&lA(e,n.index);return}n.type&3&&(t=BF(t)),cA(n,e,t,r,i,o)}function cA(n,e,t,r,i,o){if(n.type&3){let s=on(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function lA(n,e){let t=sn(e,n);t[ee]&16||(t[ee]|=64)}function UF(n,e,t){let r=t.directiveStart,i=t.directiveEnd;_r(t)&&lF(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Sf(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Qu(e,n,s,t);if(xs(u,e),o!==null&&zF(e,s-r,u,a,t,o),Bn(a)){let l=sn(t.index,e);l[Tt]=Qu(e,n,s,t)}}}function $F(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=mb();try{ai(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];af(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&HF(u,l)}}finally{ai(-1),af(s)}}function HF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Kv(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];nF(e,o.selectors,!1)&&(r??=[],Bn(o)?r.unshift(o):r.push(o))}return r}function qF(n,e,t,r,i,o){let s=on(n,e);dA(e[Se],s,o,n.value,t,r,i)}function dA(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?ti(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function zF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];ov(r,t,u,l)}}function Qv(n,e,t,r,i){let o=nt+t,s=e[Z],a=i(s,e,n,r,t);e[o]=a,bs(n,!0);let u=n.type===2;return u?($S(e[Se],a,n),(ib()===0||Ds(n))&&xs(a,e),ob()):xs(a,e),df()&&(!u||!Sv(n))&&Gv(s,e,a,n),n}function Yv(n){let e=n;return Dy()?lb():(e=e.parent,bs(e,!1)),e}function GF(n,e){let t=n[ri];if(!t)return;let r;try{r=t.get(Bt,null)}catch{r=null}r?.(e)}function Yf(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],d=s[u+1],h=e.data[l];ov(h,t[l],d,i),a=!0}if(o)for(let u of o){let l=t[u],d=e.data[u];ov(d,l,r,i),a=!0}return a}function WF(n,e){let t=sn(e,n),r=t[Z];KF(r,t);let i=t[mn];i!==null&&t[Vu]===null&&(t[Vu]=xS(i,t[ri])),Ce(18),Zv(r,t,t[Tt]),Ce(19,t[Tt])}function KF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Zv(n,e,t){cf(e);try{let r=n.viewQuery;r!==null&&Yy(1,r,t);let i=n.template;i!==null&&aA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Vn]?.finishViewCreation(n),n.staticContentQueries&&PS(n,e),n.staticViewQueries&&Yy(2,n.viewQuery,t);let o=n.components;o!==null&&QF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,lf()}}function QF(n,e){for(let t=0;t<e.length;t++)WF(n,e[t])}function YF(n,e,t,r){let i=ce(null);try{let o=e.tView,a=n[ee]&4096?4096:16,u=Vv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[ii]=l;let d=n[Vn];return d!==null&&(u[Vn]=d.createEmbeddedView(o)),Zv(o,u,t),u}finally{ce(i)}}function Kb(n,e){return!e||e.firstChild===null||TS(n)}function Zu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(rn(o)),yn(o)&&fA(o,r);let s=t.type;if(s&8)Zu(n,e,t.child,r);else if(s&32){let a=Bv(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=sA(e,t);if(Array.isArray(a))r.push(...a);else{let u=ei(e[nn]);Zu(u[Z],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function fA(n,e){for(let t=Ot;t<n.length;t++){let r=n[t],i=r[Z].firstChild;i!==null&&Zu(r[Z],r,i,e)}n[oi]!==n[mn]&&e.push(n[oi])}function hA(n){if(n[so]!==null){for(let e of n[so])e.impl.addSequence(e);n[so].length=0}}var pA=[];function ZF(n){return n[Gt]??XF(n)}function XF(n){let e=pA.pop()??Object.create(eL);return e.lView=n,e}function JF(n){n.lView[Gt]!==n&&(n.lView=null,pA.push(n))}var eL=Ee(B({},ns),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Cs(n.lView)},consumerOnSignalRead(){this.lView[Gt]=this}});function tL(n){let e=n[Gt]??Object.create(nL);return e.lView=n,e}var nL=Ee(B({},ns),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ei(n.lView);for(;e&&!gA(e[Z]);)e=ei(e);e&&gy(e)},consumerOnSignalRead(){this.lView[Gt]=this}});function gA(n){return n.type!==2}function mA(n){if(n[Bu]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Bu])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ee]&8192)}}var rL=100;function yA(n,e=0){let r=n[Ln].rendererFactory,i=!1;i||r.begin?.();try{iL(n,e)}finally{i||r.end?.()}}function iL(n,e){let t=Ty();try{Cy(!0),cv(n,e);let r=0;for(;Hu(n);){if(r===rL)throw new U(103,!1);r++,cv(n,1)}}finally{Cy(t)}}function oL(n,e,t,r){if(uo(e))return;let i=e[ee],o=!1,s=!1;cf(e);let a=!0,u=null,l=null;o||(gA(n)?(l=ZF(e),u=is(l)):cd()===null?(a=!1,l=tL(e),u=is(l)):e[Gt]&&(Du(e[Gt]),e[Gt]=null));try{py(e),hb(n.bindingStartIndex),t!==null&&aA(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let y=n.preOrderCheckHooks;y!==null&&Ef(e,y,null)}else{let y=n.preOrderHooks;y!==null&&_f(e,y,0,null),Oy(e,0)}if(s||sL(e),mA(e),vA(e,0),n.contentQueries!==null&&PS(n,e),!o)if(d){let y=n.contentCheckHooks;y!==null&&Ef(e,y)}else{let y=n.contentHooks;y!==null&&_f(e,y,1),Oy(e,1)}uL(n,e);let h=n.components;h!==null&&_A(e,h,0);let g=n.viewQuery;if(g!==null&&Yy(2,g,r),!o)if(d){let y=n.viewCheckHooks;y!==null&&Ef(e,y)}else{let y=n.viewHooks;y!==null&&_f(e,y,2),Oy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Jd]){for(let y of e[Jd])y();e[Jd]=null}o||(hA(e),e[ee]&=-73)}catch(d){throw o||Cs(e),d}finally{l!==null&&(Iu(l,u),a&&JF(l)),lf()}}function vA(n,e){for(let t=bS(n);t!==null;t=SS(t))for(let r=Ot;r<t.length;r++){let i=t[r];EA(i,e)}}function sL(n){for(let e=bS(n);e!==null;e=SS(e)){if(!(e[ee]&2))continue;let t=e[ao];for(let r=0;r<t.length;r++){let i=t[r];gy(i)}}}function aL(n,e,t){Ce(18);let r=sn(e,n);EA(r,t),Ce(19,r[Tt])}function EA(n,e){tf(n)&&cv(n,e)}function cv(n,e){let r=n[Z],i=n[ee],o=n[Gt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&wu(o)),s||=!1,o&&(o.dirty=!1),n[ee]&=-9217,s)oL(r,n,r.template,n[Tt]);else if(i&8192){let a=ce(null);try{mA(n),vA(n,1);let u=r.components;u!==null&&_A(n,u,1),hA(n)}finally{ce(a)}}}function _A(n,e,t){for(let r=0;r<e.length;r++)aL(n,e[r],t)}function uL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ai(~i);else{let o=i,s=t[++r],a=t[++r];gb(s,o);let u=e[o];Ce(24,u),a(2,u),Ce(25,u)}}}finally{ai(-1)}}function Xv(n,e){let t=Ty()?64:1088;for(n[Ln].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=ei(n);if(Ts(n)&&!r)return n;n=r}return null}function IA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function cL(n,e,t,r=!0){let i=e[Z];if(lL(i,e,n,t),r){let s=uv(t,n),a=e[Se],u=a.parentNode(n[oi]);u!==null&&TF(i,n[tn],a,e,u,s)}let o=e[Vu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function lv(n,e){if(n.length<=Ot)return;let t=Ot+e,r=n[t];if(r){let i=r[ii];i!==null&&i!==n&&zv(i,r),e>0&&(n[t-1][en]=r[en]);let o=Ou(n,Ot+e);DF(r[Z],r);let s=o[Vn];s!==null&&s.detachView(o[Z]),r[lt]=null,r[en]=null,r[ee]&=-129}return r}function lL(n,e,t,r){let i=Ot+r,o=t.length;r>0&&(t[i-1][en]=e),r<o-Ot?(e[en]=t[i],Xm(t,Ot+r,e)):(t.push(e),e[en]=null),e[lt]=t;let s=e[ii];s!==null&&t!==s&&wA(s,e);let a=e[Vn];a!==null&&a.insertView(n),nf(e),e[ee]|=128}function wA(n,e){let t=n[ao],r=e[lt];if(jn(r))n[ee]|=2;else{let i=r[lt][nn];e[nn]!==i&&(n[ee]|=2)}t===null?n[ao]=[e]:t.push(e)}var ui=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Z];return Zu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Tt]}set context(e){this._lView[Tt]=e}get destroyed(){return uo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[lt];if(yn(e)){let t=e[$u],r=t?t.indexOf(this):-1;r>-1&&(lv(e,r),Ou(t,r))}this._attachedToViewContainer=!1}oA(this._lView[Z],this._lView)}onDestroy(e){my(this._lView,e)}markForCheck(){Xv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){nf(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,yA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ts(this._lView),t=this._lView[ii];t!==null&&!e&&zv(t,this._lView),iA(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let t=Ts(this._lView),r=this._lView[ii];r!==null&&!t&&wA(r,this._lView),nf(this._lView)}};var ci=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=dL;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=YF(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ui(o)}}return n})();function dL(){return Zf(rt(),ne())}function Zf(n,e){return n.type&4?new ci(e,n,Fs(n,e)):null}function oc(n,e,t,r,i){let o=n.data[e];if(o===null)o=fL(n,e,t,r,i),pb()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=cb();o.injectorIndex=s===null?-1:s.injectorIndex}return bs(o,!0),o}function fL(n,e,t,r,i){let o=wy(),s=Dy(),a=s?o:o&&o.parent,u=n.data[e]=pL(n,a,t,e,r,i);return hL(n,u,o,s),u}function hL(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function pL(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return sb()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var l7=new RegExp(`^(\\d+)*(${v1}|${y1})*(.*)`);var gL=()=>null;function Qb(n,e){return gL(n,e)}var DA=class{},Xf=class{},dv=class{resolveComponentFactory(e){throw new U(917,!1)}},sc=class{static NULL=new dv},ho=class{},_o=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>mL()}return n})();function mL(){let n=ne(),e=rt(),t=sn(e.index,n);return(jn(t)?t:n)[Se]}var TA=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var wf={},fv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,wf,r);return i!==wf||t===wf?i:this.parentInjector.get(e,t,r)}};function xf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Gd(i,a);else if(o==2){let u=a,l=e[++s];r=Gd(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function xe(n,e=0){let t=ne();if(t===null)return Q(n,e);let r=rt();return IS(r,t,ht(n),e)}function Jv(){let n="invalid";throw new Error(n)}function CA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,u,l]=d.resolveHostDirectives(s);break}EL(n,e,t,a,o,u,l)}o!==null&&r!==null&&yL(t,r,o)}function yL(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}function vL(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function EL(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&Bn(y)&&(u=!0,vL(n,t,g)),Gy(Sf(t,e),n,y.type)}CL(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,d=!1,h=QS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=Ms(t.mergedAttrs,y.hostAttrs),IL(n,t,e,h,y),TL(h,y,i),s!==null&&s.has(y)){let[R,x]=s.get(y);t.directiveToIndex.set(y.type,[h,R+t.directiveStart,x+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,h);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let D=y.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!d&&(D.ngOnChanges||D.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),h++}_L(n,t,o)}function _L(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Yb(0,e,i,r),Yb(1,e,i,r),Xb(e,r,!1);else{let o=t.get(i);Zb(0,e,o,r),Zb(1,e,o,r),Xb(e,r,!0)}}}function Yb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),bA(e,o)}}function Zb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),bA(e,s)}}function bA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Xb(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Fv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let d of l)if(d===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let d=0;d<l.length;d+=2)if(l[d]===e){s??=[],s.push(l[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function IL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Jr(i.type,!0)),s=new fo(o,Bn(i),xe,null);n.blueprint[r]=s,t[r]=s,wL(n,e,r,QS(n,t,i.hostVars,$t),i)}function wL(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;DL(s)!=a&&s.push(a),s.push(t,r,o)}}function DL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function TL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Bn(e)&&(t[""]=n)}}function CL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function eE(n,e,t,r,i,o,s,a){let u=e[Z],l=u.consts,d=Ir(l,s),h=oc(u,n,t,r,d);return o&&CA(u,e,h,Ir(l,a),i),h.mergedAttrs=Ms(h.mergedAttrs,h.attrs),h.attrs!==null&&xf(h,h.attrs,!1),h.mergedAttrs!==null&&xf(h,h.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,h),h}function tE(n,e){fS(n,e),cy(e)&&n.queries.elementEnd(e)}function bL(n,e,t,r,i,o){let s=e.consts,a=Ir(s,i),u=oc(e,n,t,r,a);if(u.mergedAttrs=Ms(u.mergedAttrs,u.attrs),o!=null){let l=Ir(s,o);u.localNames=[];for(let d=0;d<l.length;d+=2)u.localNames.push(l[d],-1)}return u.attrs!==null&&xf(u,u.attrs,!1),u.mergedAttrs!==null&&xf(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function nE(n){return AA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function SA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function AA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function rE(n,e,t){return n[e]=t}function Wt(n,e,t){if(t===$t)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function iE(n,e,t,r){let i=Wt(n,e,t);return Wt(n,e+1,r)||i}function SL(n,e,t,r,i){let o=iE(n,e,t,r);return Wt(n,e+2,i)||o}function Vy(n,e,t){return function r(i){let o=_r(n)?sn(n.index,e):e;Xv(o,5);let s=e[Tt],a=Jb(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=Jb(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function Jb(n,e,t,r){let i=ce(null);try{return Ce(6,e,t),t(r)!==!1}catch(o){return GF(n,o),!1}finally{Ce(7,e,t),ce(i)}}function AL(n,e,t,r,i,o,s,a){let u=Ds(n),l=!1,d=null;if(!r&&u&&(d=NL(e,t,o,n.index)),d!==null){let h=d.__ngLastListenerFn__||d;h.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,l=!0}else{let h=on(n,t),g=r?r(h):h;_1(t,g,o,a);let y=i.listen(g,o,a);if(!RL(o)){let D=r?R=>r(rn(R[n.index])):n.index;RA(D,e,t,o,a,y,!1)}}return l}function RL(n){return n.startsWith("animation")||n.startsWith("transition")}function NL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Is],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function RA(n,e,t,r,i,o,s){let a=e.firstCreatePass?vy(e):null,u=yy(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function eS(n,e,t,r,i,o){let s=e[t],a=e[Z],l=a.data[t].outputs[r],h=s[l].subscribe(o);RA(n.index,a,e,i,o,h,!0)}var hv=Symbol("BINDING");var Pf=class extends sc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Er(e);return new po(t,this.ngModule)}};function ML(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Gf.SignalBased)!==0};return i&&(o.transform=i),o})}function xL(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function PL(n,e,t){let r=e instanceof He?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new fv(t,r):t}function kL(n){let e=n.get(ho,null);if(e===null)throw new U(407,!1);let t=n.get(TA,null),r=n.get(mr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function OL(n,e){let t=NA(n);return BS(e,t,t==="svg"?ly:t==="math"?XC:null)}function NA(n){return(n.selectors[0][0]||"div").toLowerCase()}var po=class extends Xf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=ML(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=xL(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=sF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ce(22);let a=ce(null);try{let u=this.componentDef,l=FL(r,u,s,o),d=PL(u,i||this.ngModule,e),h=kL(d),g=h.rendererFactory.createRenderer(null,u),y=r?LF(g,r,u.encapsulation,d):OL(u,g),D=s?.some(tS)||o?.some(F=>typeof F!="function"&&F.bindings.some(tS)),R=Vv(null,l,null,512|KS(u),null,null,h,g,d,null,xS(y,d,!0));R[nt]=y,cf(R);let x=null;try{let F=eE(nt,R,2,"#host",()=>l.directiveRegistry,!0,0);$S(g,y,F),xs(y,R),Qf(l,R,F),Av(l,F,R),tE(l,F),t!==void 0&&VL(F,this.ngContentSelectors,t),x=sn(F.index,R),R[Tt]=x[Tt],Zv(l,R,null)}catch(F){throw x!==null&&Ky(x),Ky(R),F}finally{Ce(23),lf()}return new kf(this.componentType,R,!!D)}finally{ce(a)}}};function FL(n,e,t,r){let i=n?["ng-version","20.3.15"]:aF(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[hv].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let h=r[d];if(typeof h!="function")for(let g of h.bindings){a+=g[hv].requiredVars;let y=d+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let d of r){let h=typeof d=="function"?d:d.type,g=ny(h);u.push(g)}return Lv(0,null,LL(o,s),1,a,u,null,null,null,[i],null)}function LL(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function tS(n){let e=n[hv].kind;return e==="input"||e==="twoWay"}var kf=class extends DA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=ef(t[Z],nt),this.location=Fs(this._tNode,t),this.instance=sn(this._tNode.index,t)[Tt],this.hostView=this.changeDetectorRef=new ui(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Yf(r,i[Z],i,e,t);this.previousInputValues.set(e,t);let s=sn(r.index,i);Xv(s,1)}get injector(){return new lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function VL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Sr=(()=>{class n{static __NG_ELEMENT_ID__=jL}return n})();function jL(){let n=rt();return xA(n,ne())}var BL=Sr,MA=class extends BL{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fs(this._hostTNode,this._hostLView)}get injector(){return new lo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Tv(this._hostTNode,this._hostLView);if(gS(e)){let t=Cf(e,this._hostLView),r=Tf(e),i=t[Z].data[r+8];return new lo(i,t)}else return new lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=nS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ot}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Qb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Kb(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!zO(e),l;if(u)l=t;else{let x=t||{};l=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef,s=x.directives,a=x.bindings}let d=u?e:new po(Er(e)),h=r||this.parentInjector;if(!o&&d.ngModule==null){let F=(u?h:this.parentInjector).get(He,null);F&&(o=F)}let g=Er(d.componentType??{}),y=Qb(this._lContainer,g?.id??null),D=y?.firstChild??null,R=d.create(h,i,D,o,s,a);return this.insertImpl(R.hostView,l,Kb(this._hostTNode,y)),R}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(eb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[lt],l=new MA(u,u[tn],u[lt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return cL(s,i,o,r),e.attachToViewContainerRef(),Xm(jy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=nS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=lv(this._lContainer,t);r&&(Ou(jy(this._lContainer),t),oA(r[Z],r))}detach(e){let t=this._adjustIndex(e,-1),r=lv(this._lContainer,t);return r&&Ou(jy(this._lContainer),t)!=null?new ui(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function nS(n){return n[$u]}function jy(n){return n[$u]||(n[$u]=[])}function xA(n,e){let t,r=e[n.index];return yn(r)?t=r:(t=IA(r,e,null,n),e[n.index]=t,jv(e,t)),$L(t,e,n,r),new MA(t,n,e)}function UL(n,e){let t=n[Se],r=t.createComment(""),i=on(e,n),o=t.parentNode(i);return Rf(t,o,r,t.nextSibling(i),!1),r}var $L=zL,HL=()=>!1;function qL(n,e,t){return HL(n,e,t)}function zL(n,e,t,r){if(n[oi])return;let i;t.type&8?i=rn(r):i=UL(e,t),n[oi]=i}var pv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},gv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)oE(e,t).matches!==null&&this.queries[t].setDirty()}},Of=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=JL(e):this.predicate=e}},mv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},yv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,GL(t,o)),this.matchTNodeWithReadOption(e,t,If(t,e,o,!1,!1))}else r===ci?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,If(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===_n||i===Sr||i===ci&&t.type&4)this.addMatch(t.index,-2);else{let o=If(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function GL(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function WL(n,e){return n.type&11?Fs(n,e):n.type&4?Zf(n,e):null}function KL(n,e,t,r){return t===-1?WL(e,n):t===-2?QL(n,e,r):Qu(n,n[Z],t,e)}function QL(n,e,t){if(t===_n)return Fs(e,n);if(t===ci)return Zf(e,n);if(t===Sr)return xA(e,n)}function PA(n,e,t,r){let i=e[Vn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let d=o[l];a.push(KL(e,d,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function vv(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=PA(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-u];for(let h=Ot;h<d.length;h++){let g=d[h];g[ii]===g[lt]&&vv(g[Z],g,l,r)}if(d[ao]!==null){let h=d[ao];for(let g=0;g<h.length;g++){let y=h[g];vv(y[Z],y,l,r)}}}}}return r}function YL(n,e){return n[Vn].queries[e].queryList}function kA(n,e,t){let r=new Af((t&4)===4);return rb(n,e,r,r.destroy),(e[Vn]??=new gv).queries.push(new pv(r))-1}function ZL(n,e,t){let r=Be();return r.firstCreatePass&&(OA(r,new Of(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),kA(r,ne(),e)}function XL(n,e,t,r){let i=Be();if(i.firstCreatePass){let o=rt();OA(i,new Of(e,t,r),o.index),eV(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return kA(i,ne(),t)}function JL(n){return n.split(",").map(e=>e.trim())}function OA(n,e,t){n.queries===null&&(n.queries=new mv),n.queries.track(new yv(e,t))}function eV(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function oE(n,e){return n.queries.getByIndex(e)}function tV(n,e){let t=n[Z],r=oE(t,e);return r.crossesNgTemplate?vv(t,n,e,[]):PA(t,n,r,e)}function FA(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(a=>rV(i,a)))}return o}return Ff.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((h,g)=>{a.push(""),s.push(r(h).then(y=>{a[l+g]=y,d.splice(d.indexOf(h),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>iV(o));e.push(u)}),LA(),Promise.all(e).then(()=>{})}var Ff=new Map,nV=new Set;function LA(){let n=Ff;return Ff=new Map,n}function VA(){return Ff.size===0}function rV(n,e){return typeof e=="string"?e:e.status!==void 0&&e.status!==200?Promise.reject(new U(918,!1)):e.text()}function iV(n){nV.delete(n)}var go=class{},Jf=class{};var Xu=class extends go{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Pf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=ty(e);this._bootstrapComponents=GS(o.bootstrap),this._r3Injector=Ry(e,t,[{provide:go,useValue:this},{provide:sc,useValue:this.componentFactoryResolver},...r],gr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ju=class extends Jf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Xu(this.moduleType,e,[])}};function jA(n,e,t){return new Xu(n,e,t,!1)}var Lf=class extends go{injector;componentFactoryResolver=new Pf(this);instance=null;constructor(e){super();let t=new no([...e.providers,{provide:go,useValue:this},{provide:sc,useValue:this.componentFactoryResolver}],e.parent||Lu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Vs(n,e,t=null){return new Lf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var oV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ry(!1,t.type),i=r.length>0?Vs([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(Q(He))})}return n})();function sE(n){return Os(()=>{let e=BA(n),t=Ee(B({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Cv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(oV).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Dr.Emulated,styles:n.styles||kt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ls("NgStandalone"),UA(t);let r=n.dependencies;return t.directiveDefs=rS(r,sV),t.pipeDefs=rS(r,GC),t.id=cV(t),t})}function sV(n){return Er(n)||ny(n)}function Ar(n){return Os(()=>({type:n.type,bootstrap:n.bootstrap||kt,declarations:n.declarations||kt,imports:n.imports||kt,exports:n.exports||kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function aV(n,e){if(n==null)return ni;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Gf.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function uV(n){if(n==null)return ni;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function zn(n){return Os(()=>{let e=BA(n);return UA(e),e})}function aE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function BA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ni,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||kt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:aV(n.inputs,e),outputs:uV(n.outputs),debugInfo:null}}function UA(n){n.features?.forEach(e=>e(n))}function rS(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function cV(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function lV(n){return Object.getPrototypeOf(n.prototype).constructor}function $A(n){let e=lV(n.type),t=!0,r=[n];for(;e;){let i;if(Bn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=By(n.inputs),s.declaredInputs=By(n.declaredInputs),s.outputs=By(n.outputs);let a=i.hostBindings;a&&gV(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&hV(n,u),l&&pV(n,l),dV(n,i),LC(n.outputs,i.outputs),Bn(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===$A&&(t=!1)}}e=Object.getPrototypeOf(e)}fV(r)}function dV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function fV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ms(i.hostAttrs,t=Ms(t,i.hostAttrs))}}function By(n){return n===ni?{}:n===kt?[]:n}function hV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function pV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function gV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function HA(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Ms(n.mergedAttrs,n.attrs);let d=n.tView=Lv(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),bs(n,!1);let u=vV(t,e,n,r);df()&&Gv(t,e,u,n),xs(u,e);let l=IA(u,e,u,n);e[r+nt]=l,jv(e,l),qL(l,n,e)}function mV(n,e,t,r,i,o,s,a,u,l,d){let h=t+nt,g;return e.firstCreatePass?(g=oc(e,h,4,s||null,a||null),rf()&&CA(e,n,g,Ir(e.consts,l),Kv),fS(e,g)):g=e.data[h],HA(g,n,e,t,r,i,o,u),Ds(g)&&Qf(e,n,g),l!=null&&ic(n,g,d),g}function yV(n,e,t,r,i,o,s,a,u,l,d){let h=t+nt,g;if(e.firstCreatePass){if(g=oc(e,h,4,s||null,a||null),l!=null){let y=Ir(e.consts,l);g.localNames=[];for(let D=0;D<y.length;D+=2)g.localNames.push(y[D],-1)}}else g=e.data[h];return HA(g,n,e,t,r,i,o,u),l!=null&&ic(n,g,d),g}function qA(n,e,t,r,i,o,s,a){let u=ne(),l=Be(),d=Ir(l.consts,o);return mV(u,l,n,e,t,r,i,d,void 0,s,a),qA}function zA(n,e,t,r,i,o,s,a){let u=ne(),l=Be(),d=Ir(l.consts,o);return yV(u,l,n,e,t,r,i,d,void 0,s,a),zA}var vV=EV;function EV(n,e,t,r){return qu(!0),e[Se].createComment("")}var eh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var th=new z(""),js=new z(""),ac=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,sy()&&(this._destroyRef=P(Un,{optional:!0})??void 0),uE||(GA(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(Q(de),Q(uc),Q(js))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),uc=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return uE?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function GA(n){uE=n}var uE;function Bs(n){return!!n&&typeof n.then=="function"}function cE(n){return!!n&&typeof n.subscribe=="function"}var lE=new z("");function nh(n){return gn([{provide:lE,multi:!0,useValue:n}])}var dE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=P(lE,{optional:!0})??[];injector=P(Me);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Qe(this.injector,i);if(Bs(o))t.push(o);else if(cE(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rh=new z("");function WA(){pm(()=>{let n="";throw new U(600,n)})}function KA(n){return n.isBoundToModule}var _V=10;function fE(n,e){return Array.isArray(e)?e.reduce(fE,n):B(B({},n),e)}var Gn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(Bt);afterRenderManager=P(Hv);zonelessEnabled=P(zu);rootEffectScheduler=P(ky);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Fe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P($n);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(le(t=>!t))}constructor(){P(Eo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=P(He);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Me.NULL){return this._injector.get(de).run(()=>{Ce(10);let s=t instanceof Xf;if(!this._injector.get(dE).done){let D="";throw new U(405,D)}let u;s?u=t:u=this._injector.get(sc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=KA(u)?void 0:this._injector.get(go),d=r||u.selector,h=u.create(i,[],d,l),g=h.location.nativeElement,y=h.injector.get(th,null);return y?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),Ku(this.components,h),y?.unregisterApplication(g)}),this._loadComponent(h),Ce(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ce(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Wf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);let t=ce(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ce(t),this.afterTick.next(),Ce(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ho,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<_V;)Ce(14),this.synchronizeOnce(),Ce(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Hu(i))continue;let o=r&&!this.zonelessEnabled?0:1;yA(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Hu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ku(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(rh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ku(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ku(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function QA(n,e){let t=ne(),r=si();if(Wt(t,r,e)){let i=Be(),o=Ss();if(Yf(o,i,t,n,e))_r(o)&&lA(t,o.index);else{let a=on(o,t);dA(t[Se],a,null,o.value,n,e,null)}}return QA}function ih(n,e,t,r){let i=ne(),o=si();if(Wt(i,o,e)){let s=Be(),a=Ss();qF(a,i,n,e,t,r)}return ih}var y7=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function YA(n,e,t){let r=ne(),i=si();if(Wt(r,i,e)){let o=Be(),s=Ss();uA(s,r,n,e,r[Se],t)}return YA}function Ev(n,e,t,r,i){Yf(e,n,t,i?"class":"style",r)}function hE(n,e,t,r){let i=ne(),o=i[Z],s=n+nt,a=o.firstCreatePass?eE(s,i,2,e,Kv,rf(),t,r):o.data[s];if(Qv(a,i,n,e,XA),Ds(a)){let u=i[Z];Qf(u,i,a),Av(u,a,i)}return r!=null&&ic(i,a),hE}function pE(){let n=Be(),e=rt(),t=Yv(e);return n.firstCreatePass&&tE(n,t),_y(t)&&Iy(),Ey(),t.classesWithoutHost!=null&&ZO(t)&&Ev(n,t,ne(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&XO(t)&&Ev(n,t,ne(),t.stylesWithoutHost,!1),pE}function oh(n,e,t,r){return hE(n,e,t,r),pE(),oh}function gE(n,e,t,r){let i=ne(),o=i[Z],s=n+nt,a=o.firstCreatePass?bL(s,o,2,e,t,r):o.data[s];return Qv(a,i,n,e,XA),r!=null&&ic(i,a),gE}function mE(){let n=rt(),e=Yv(n);return _y(e)&&Iy(),Ey(),mE}function ZA(n,e,t,r){return gE(n,e,t,r),mE(),ZA}var XA=(n,e,t,r,i)=>(qu(!0),BS(e[Se],r,Tb()));function JA(n,e,t){let r=ne(),i=r[Z],o=n+nt,s=i.firstCreatePass?eE(o,r,8,"ng-container",Kv,rf(),e,t):i.data[o];if(Qv(s,r,n,"ng-container",IV),Ds(s)){let a=r[Z];Qf(a,r,s),Av(a,s,r)}return t!=null&&ic(r,s),JA}function e0(){let n=Be(),e=rt(),t=Yv(e);return n.firstCreatePass&&tE(n,t),e0}var IV=(n,e,t,r,i)=>(qu(!0),G1(e[Se],""));function wV(){return ne()}function t0(n,e,t){let r=ne(),i=si();if(Wt(r,i,e)){let o=Be(),s=Ss();cA(s,r,n,e,r[Se],t)}return t0}var cc="en-US";var DV=cc;function n0(n){typeof n=="string"&&(DV=n.toLowerCase().replace(/_/g,"-"))}function sh(n,e,t){let r=ne(),i=Be(),o=rt();return r0(i,r,r[Se],o,n,e,t),sh}function r0(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Vy(r,e,o),AL(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){let g=d[h],y=d[h+1];u??=Vy(r,e,o),eS(r,e,g,y,i,u)}if(l&&l.length)for(let h of l)u??=Vy(r,e,o),eS(r,e,h,i,i,u)}}function TV(n=1){return Ib(n)}function yE(n,e,t,r){XL(n,e,t,r)}function CV(n,e,t){ZL(n,e,t)}function vE(n){let e=ne(),t=Be(),r=by();uf(r+1);let i=oE(t,r);if(n.dirty&&JC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=tV(e,r);n.reset(o,d1),n.notifyOnChanges()}return!0}return!1}function EE(){return YL(ne(),by())}function bV(n){let e=db();return fy(e,nt+n)}function yf(n,e){return n<<17|e<<2}function mo(n){return n>>17&32767}function SV(n){return(n&2)==2}function AV(n,e){return n&131071|e<<17}function _v(n){return n|2}function ks(n){return(n&131068)>>2}function Uy(n,e){return n&-131069|e<<2}function RV(n){return(n&1)===1}function Iv(n){return n|1}function NV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=mo(s),u=ks(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||_s(h,d)>0)&&(l=!0)}else d=t;if(i)if(u!==0){let g=mo(n[a+1]);n[r+1]=yf(g,a),g!==0&&(n[g+1]=Uy(n[g+1],r)),n[a+1]=AV(n[a+1],r)}else n[r+1]=yf(a,0),a!==0&&(n[a+1]=Uy(n[a+1],r)),a=r;else n[r+1]=yf(u,0),a===0?a=r:n[u+1]=Uy(n[u+1],r),u=r;l&&(n[r+1]=_v(n[r+1])),iS(n,d,r,!0),iS(n,d,r,!1),MV(e,d,n,r,o),s=yf(a,u),o?e.classBindings=s:e.styleBindings=s}function MV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&_s(o,e)>=0&&(t[r+1]=Iv(t[r+1]))}function iS(n,e,t,r){let i=n[t+1],o=e===null,s=r?mo(i):ks(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];xV(u,e)&&(a=!0,n[s+1]=r?Iv(l):_v(l)),s=r?mo(l):ks(l)}a&&(n[t+1]=r?_v(i):Iv(i))}function xV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?_s(n,e)>=0:!1}var En={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function PV(n){return n.substring(En.key,En.keyEnd)}function kV(n){return OV(n),i0(n,o0(n,0,En.textEnd))}function i0(n,e){let t=En.textEnd;return t===e?-1:(e=En.keyEnd=FV(n,En.key=e,t),o0(n,e,t))}function OV(n){En.key=0,En.keyEnd=0,En.value=0,En.valueEnd=0,En.textEnd=n.length}function o0(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function FV(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function s0(n,e){return jV(n,e,null,!0),s0}function LV(n){BV(GV,VV,n,!0)}function VV(n,e){for(let t=kV(e);t>=0;t=i0(e,t))Zd(n,PV(e),!0)}function jV(n,e,t,r){let i=ne(),o=Be(),s=sf(2);if(o.firstUpdatePass&&u0(o,n,s,r),e!==$t&&Wt(i,s,e)){let a=o.data[wr()];c0(o,a,i,i[Se],n,i[s+1]=KV(e,t),r,s)}}function BV(n,e,t,r){let i=Be(),o=sf(2);i.firstUpdatePass&&u0(i,null,o,r);let s=ne();if(t!==$t&&Wt(s,o,t)){let a=i.data[wr()];if(l0(a,r)&&!a0(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Gd(u,t||"")),Ev(i,a,s,t,r)}else WV(i,a,s,s[Se],s[o+1],s[o+1]=zV(n,e,t),r,o)}}function a0(n,e){return e>=n.expandoStartIndex}function u0(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[wr()],s=a0(n,t);l0(o,r)&&e===null&&!s&&(e=!1),e=UV(i,o,e,r),NV(i,o,e,t,s,r)}}function UV(n,e,t,r){let i=yb(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=$y(null,n,e,t,r),t=ec(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=$y(i,n,e,t,r),o===null){let u=$V(n,e,r);u!==void 0&&Array.isArray(u)&&(u=$y(null,n,e,u[1],r),u=ec(u,e.attrs,r),HV(n,e,r,u))}else o=qV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function $V(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ks(r)!==0)return n[mo(r)]}function HV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[mo(i)]=r}function qV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ec(r,s,t)}return ec(r,e.attrs,t)}function $y(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ec(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ec(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Zd(n,s,t?!0:e[++o]))}return n===void 0?null:n}function zV(n,e,t){if(t==null||t==="")return kt;let r=[],i=an(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function GV(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Zd(n,r,t)}function WV(n,e,t,r,i,o,s,a){i===$t&&(i=kt);let u=0,l=0,d=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;d!==null||h!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,D=null,R;d===h?(u+=2,l+=2,g!==y&&(D=h,R=y)):h===null||d!==null&&d<h?(u+=2,D=d):(l+=2,D=h,R=y),D!==null&&c0(n,e,t,r,D,R,s,a),d=u<i.length?i[u]:null,h=l<o.length?o[l]:null}}function c0(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],d=RV(l)?oS(u,e,t,i,ks(l),s):void 0;if(!Vf(d)){Vf(o)||SV(l)&&(o=oS(u,null,t,i,a,s));let h=dy(wr(),t);FF(r,s,h,i,o)}}function oS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),d=l?u[1]:u,h=d===null,g=t[i+1];g===$t&&(g=h?kt:void 0);let y=h?Xd(g,r):d===r?g:void 0;if(l&&!Vf(y)&&(y=Xd(u,r)),Vf(y)&&(a=y,s))return a;let D=n[i+1];i=s?mo(D):ks(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Xd(u,r))}return a}function Vf(n){return n!==void 0}function KV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=gr(an(n)))),n}function l0(n,e){return(n.flags&(e?8:16))!==0}function QV(n,e=""){let t=ne(),r=Be(),i=n+nt,o=r.firstCreatePass?oc(r,i,1,e,null):r.data[i],s=YV(r,t,o,e,n);t[i]=s,df()&&Gv(r,t,s,o),bs(o,!1)}var YV=(n,e,t,r,i)=>(qu(!0),q1(e[Se],r));function d0(n,e,t,r=""){return Wt(n,si(),t)?e+ti(t)+r:$t}function ZV(n,e,t,r,i,o=""){let s=fb(),a=iE(n,s,t,i);return sf(2),a?e+ti(t)+r+ti(i)+o:$t}function f0(n){return _E("",n),f0}function _E(n,e,t){let r=ne(),i=d0(r,n,e,t);return i!==$t&&p0(r,wr(),i),_E}function h0(n,e,t,r,i){let o=ne(),s=ZV(o,n,e,t,r,i);return s!==$t&&p0(o,wr(),s),h0}function p0(n,e,t){let r=dy(e,n);z1(n[Se],r,t)}function g0(n,e,t){My(e)&&(e=e());let r=ne(),i=si();if(Wt(r,i,e)){let o=Be(),s=Ss();uA(s,r,n,e,r[Se],t)}return g0}function XV(n,e){let t=My(n);return t&&n.set(e),t}function m0(n,e){let t=ne(),r=Be(),i=rt();return r0(r,t,t[Se],i,n,e),m0}function JV(n){return Wt(ne(),si(),n)?ti(n):$t}function ej(n,e,t=""){return d0(ne(),n,e,t)}function tj(n,e,t){let r=Be();if(r.firstCreatePass){let i=Bn(n);wv(t,r.data,r.blueprint,i,!0),wv(e,r.data,r.blueprint,i,!1)}}function wv(n,e,t,r,i){if(n=ht(n),Array.isArray(n))for(let o=0;o<n.length;o++)wv(n[o],e,t,r,i);else{let o=Be(),s=ne(),a=rt(),u=to(n)?n:ht(n.provide),l=oy(n),d=a.providerIndexes&1048575,h=a.directiveStart,g=a.providerIndexes>>20;if(to(n)||!n.multi){let y=new fo(l,i,xe,null),D=qy(u,e,i?d:d+g,h);D===-1?(Gy(Sf(a,s),o,u),Hy(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=qy(u,e,d+g,h),D=qy(u,e,d,d+g),R=y>=0&&t[y],x=D>=0&&t[D];if(i&&!x||!i&&!R){Gy(Sf(a,s),o,u);let F=ij(i?rj:nj,t.length,i,r,l,n);!i&&x&&(t[D].providerFactory=F),Hy(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=y0(t[i?D:y],l,!i&&r);Hy(o,n,y>-1?y:D,F)}!i&&r&&x&&t[D].componentProviders++}}}function Hy(n,e,t,r){let i=to(e),o=YC(e);if(i||o){let u=(o?ht(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,u]):l[d+1].push(r,u)}else l.push(t,u)}}}function y0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function qy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function nj(n,e,t,r,i){return Dv(this.multi,[])}function rj(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Qu(r,r[Z],this.providerFactory.index,i);s=u.slice(0,a),Dv(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Dv(o,s);return s}function Dv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function ij(n,e,t,r,i,o){let s=new fo(n,t,xe,null);return s.multi=[],s.index=e,s.componentProviders=0,y0(s,i,r&&!t),s}function oj(n,e=[]){return t=>{t.providersResolver=(r,i)=>tj(r,i?i(n):n,e)}}function sj(n,e,t,r){return uj(ne(),of(),n,e,t,r)}function aj(n,e,t,r,i){return cj(ne(),of(),n,e,t,r,i)}function IE(n,e){let t=n[e];return t===$t?void 0:t}function uj(n,e,t,r,i,o){let s=e+t;return Wt(n,s,i)?rE(n,s+1,o?r.call(o,i):r(i)):IE(n,s+1)}function cj(n,e,t,r,i,o,s){let a=e+t;return iE(n,a,i,o)?rE(n,a+2,s?r.call(s,i,o):r(i,o)):IE(n,a+2)}function lj(n,e,t,r,i,o,s,a){let u=e+t;return SL(n,u,i,o,s)?rE(n,u+3,a?r.call(a,i,o,s):r(i,o,s)):IE(n,u+3)}function dj(n,e){let t=Be(),r,i=n+nt;t.firstCreatePass?(r=fj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Jr(r.type,!0)),s,a=Pt(xe);try{let u=bf(!1),l=o();return bf(u),hy(t,ne(),i,l),l}finally{Pt(a)}}function fj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function hj(n,e,t,r,i){let o=n+nt,s=ne(),a=fy(s,o);return pj(s,o)?lj(s,of(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function pj(n,e){return n[Z].data[e].pure}function gj(n,e){return Zf(n,e)}var vf=null;function v0(n){vf!==null&&(n.defaultEncapsulation!==vf.defaultEncapsulation||n.preserveWhitespaces!==vf.preserveWhitespaces)||(vf=n)}var jf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},wE=(()=>{class n{compileModuleSync(t){return new Ju(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ty(t),o=GS(i.declarations).reduce((s,a)=>{let u=Er(a);return u&&s.push(new po(u)),s},[]);return new jf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E0=new z("");var mj=(()=>{class n{zone=P(de);changeDetectionScheduler=P(mr);applicationRef=P(Gn);applicationErrorHandler=P(Bt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new de(Ee(B({},DE()),{scheduleInRootZone:t})),[{provide:de,useFactory:n},{provide:vr,multi:!0,useFactory:()=>{let r=P(mj,{optional:!0});return()=>r.initialize()}},{provide:vr,multi:!0,useFactory:()=>{let r=P(yj);return()=>{r.initialize()}}},e===!0?{provide:xy,useValue:!0}:[],{provide:Py,useValue:t??ZS},{provide:Bt,useFactory:()=>{let r=P(de),i=P(He),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(pn),o.handleError(s))})}}}]}function DE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var yj=(()=>{class n{subscription=new je;initialized=!1;zone=P(de);pendingTasks=P($n);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{de.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var I0=(()=>{class n{applicationErrorHandler=P(Bt);appRef=P(Gn);taskService=P($n);ngZone=P(de);zonelessEnabled=P(zu);tracing=P(Eo,{optional:!0});disableScheduling=P(xy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Py,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Yu||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?$b:XS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,$b(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vj(){return typeof $localize<"u"&&$localize.locale||cc}var ah=new z("",{providedIn:"root",factory:()=>P(ah,{optional:!0,skipSelf:!0})||vj()});function Wn(n){return kC(n)}function Ej(n,e){return hd(n,e?.equal)}var w0=class{[It];constructor(e){this[It]=e}destroy(){this[It].destroy()}};var R0=Symbol("InputSignalNode#UNSET"),Nj=Ee(B({},pd),{transformFn:void 0,applyValueToInputSignal(n,e){ss(n,e)}});function N0(n,e){let t=Object.create(Nj);t.value=n,t.transformFn=e?.transform;function r(){if(rs(t),t.value===R0){let i=null;throw new U(-950,i)}return t.value}return r[It]=t,r}var uh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>tc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Mj=new z("");Mj.__NG_ELEMENT_ID__=n=>{let e=rt();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new U(204,!1)};function D0(n,e){return N0(n,e)}function xj(n){return N0(R0,n)}var M0=(D0.required=xj,D0);function Pj(n,e,t){let r=new Ju(t);return Promise.resolve(r)}function T0(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var ch=new z(""),kj=new z("");function lc(n){return!n.moduleRef}function Oj(n){let e=lc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(de);return t.run(()=>{lc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Bt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),lc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ch);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ch);s.add(o),n.moduleRef.onDestroy(()=>{Ku(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Lj(r,t,()=>{let o=e.get($n),s=o.add(),a=e.get(dE);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(ah,cc);if(n0(u||cc),!e.get(kj,!0))return lc(n)?e.get(Gn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(lc(n)){let d=e.get(Gn);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return x0?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var x0;function C0(){x0=Fj}function Fj(n,e){let t=n.injector.get(Gn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new U(-403,!1);e.push(n)}function Lj(n,e,t){try{let r=t();return Bs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var P0=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>eA(r?.ngZone,Ee(B({},DE({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[_0({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:mr,useExisting:I0},bb],u=jA(t.moduleType,this.injector,a);return C0(),Oj({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=fE({},r);return C0(),Pj(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new U(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(ch,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(Q(Me))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),AE=null;function Vj(n){if(NE())throw new U(400,!1);WA(),AE=n;let e=n.get(P0);return Uj(n),e}function RE(n,e,t=[]){let r=`Platform: ${e}`,i=new z(r);return(o=[])=>{let s=NE();if(!s){let a=[...t,...o,{provide:i,useValue:!0}];s=n?.(a)??Vj(jj(a,r))}return Bj(i)}}function jj(n=[],e){return Me.create({name:e,providers:[{provide:Fu,useValue:"platform"},{provide:ch,useValue:new Set([()=>AE=null])},...n]})}function Bj(n){let e=NE();if(!e)throw new U(-401,!1);return e}function NE(){return AE?.get(P0)??null}function Uj(n){let e=n.get($f,null);Qe(n,()=>{e?.forEach(t=>t())})}function ME(){return!1}var Us=(()=>{class n{static __NG_ELEMENT_ID__=$j}return n})();function $j(n){return Hj(rt(),ne(),(n&16)===16)}function Hj(n,e,t){if(_r(n)&&!t){let r=sn(n.index,e);return new ui(r,r)}else if(n.type&175){let r=e[nn];return new ui(r,e)}return null}var TE=class{constructor(){}supports(e){return nE(e)}create(e){return new CE(e)}},qj=(n,e)=>e,CE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||qj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<b0(r,i,o)?t:r,a=b0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,D=y+g;d<=D&&D<l&&(o[g]=y+1)}let h=s.previousIndex;o[h]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!nE(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,SA(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new bE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new lh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new lh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},bE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},SE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},lh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new SE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function b0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function S0(){return new xE([new TE])}var xE=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:S0});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=P(n,{optional:!0,skipSelf:!0});return n.create(t,r||S0())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new U(901,!1)}}return n})();var k0=RE(null,"core",[]),O0=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(Q(Gn))};static \u0275mod=Ar({type:n});static \u0275inj=Fn({})}return n})();function dc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function F0(n){let e=Er(n);if(!e)return null;let t=new po(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var j0=null;function Kn(){return j0}function PE(n){j0??=n}var fc=class{},hc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>P(B0),providedIn:"platform"})}return n})(),kE=new z(""),B0=(()=>{class n extends hc{_location;_history;_doc=P(qe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kn().getBaseHref(this._doc)}onPopState(t){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function dh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function L0(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function wn(n){return n&&n[0]!=="?"?`?${n}`:n}var Dn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>P(hh),providedIn:"root"})}return n})(),fh=new z(""),hh=(()=>{class n extends Dn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return dh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+wn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Q(hc),Q(fh,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),di=(()=>{class n{_subject=new Fe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Wj(L0(V0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+wn(r))}normalize(t){return n.stripTrailingSlash(Gj(this._basePath,V0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=wn;static joinWithSlash=dh;static stripTrailingSlash=L0;static \u0275fac=function(r){return new(r||n)(Q(Dn))};static \u0275prov=H({token:n,factory:()=>zj(),providedIn:"root"})}return n})();function zj(){return new di(Q(Dn))}function Gj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function V0(n){return n.replace(/\/index.html$/,"")}function Wj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var FE=(()=>{class n extends Dn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=dh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Q(hc),Q(fh,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var OE=/\s+/,U0=[],Kj=(()=>{class n{_ngEl;_renderer;initialClasses=U0;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(OE):U0}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(OE):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(OE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(xe(_n),xe(_o))};static \u0275dir=zn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var ph=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},q0=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ph(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),$0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);$0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(xe(Sr),xe(ci),xe(xE))};static \u0275dir=zn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function $0(n,e){n.context.$implicit=e.item}var Qj=(()=>{class n{_viewContainer;_context=new gh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){H0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){H0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(xe(Sr),xe(ci))};static \u0275dir=zn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),gh=class{$implicit=null;ngIf=null};function H0(n,e){if(n&&!n.createEmbeddedView)throw new U(2020,!1)}function Yj(n,e){return new U(2100,!1)}var Zj=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw Yj(n,t);return t.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=aE({name:"slice",type:n,pure:!1})}return n})();var LE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=Fn({})}return n})();function VE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var pc=class{};var BE="browser",Xj="server";function Kee(n){return n===BE}function Qee(n){return n===Xj}var z0=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new jE(P(qe),window)})}return n})(),jE=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Ee(B({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=Jj(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(yr(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Ee(B({},t),{left:i-s[0],top:o-s[1]}))}};function Jj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var gc=class{_doc;constructor(e){this._doc=e}manager},mh=(()=>{class n extends gc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Q(qe))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),vh=new z(""),zE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof mh));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof mh);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Q(vh),Q(de))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),UE="ng-app-id";function G0(n){for(let e of n)e.remove()}function W0(n,e){let t=e.createElement("style");return t.textContent=n,t}function t2(n,e,t,r){let i=n.head?.querySelectorAll(`style[${UE}="${e}"],link[${UE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(UE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function HE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var GE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,t2(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,W0);r?.forEach(i=>this.addUsage(i,this.external,HE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(G0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])G0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,W0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,HE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Q(qe),Q(Uf),Q(Hf,8),Q(vo))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),$E={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},WE=/%COMP%/g;var Q0="%COMP%",n2=`_nghost-${Q0}`,r2=`_ngcontent-${Q0}`,i2=!0,o2=new z("",{providedIn:"root",factory:()=>i2});function s2(n){return r2.replace(WE,n)}function a2(n){return n2.replace(WE,n)}function Y0(n,e){return e.map(t=>t.replace(WE,n))}var KE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new mc(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof yh?i.applyToHost(t):i instanceof yc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Dr.Emulated:o=new yh(u,l,r,this.appId,d,s,a,h,g);break;case Dr.ShadowDom:return new qE(u,l,t,r,s,a,this.nonce,h,g);default:o=new yc(u,l,r,d,s,a,h,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Q(zE),Q(GE),Q(Uf),Q(o2),Q(qe),Q(de),Q(Hf),Q(Eo,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),mc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS($E[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(K0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(K0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=$E[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=$E[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(qn.DashCase|qn.Important)?e.style.setProperty(t,r,i&qn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&qn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Kn().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function K0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var qE=class extends mc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=Y0(i.id,d);for(let g of d){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let h=i.getExternalStyles?.();if(h)for(let g of h){let y=HE(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yc=class extends mc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=l?Y0(l,d):d,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ps.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},yh=class extends yc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let d=i+"-"+r.id;super(e,t,r,o,s,a,u,l,d),this.contentAttr=s2(d),this.hostAttr=a2(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Eh=class n extends fc{supportsDOMEvents=!0;static makeCurrent(){PE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=u2();return t==null?null:c2(t)}resetBaseElement(){vc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return VE(document.cookie,e)}},vc=null;function u2(){return vc=vc||document.head.querySelector("base"),vc?vc.getAttribute("href"):null}function c2(n){return new URL(n,document.baseURI).pathname}var _h=class{addToWindow(e){Dt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new U(5103,!1);return o},Dt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Dt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Dt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Dt.frameworkStabilizers||(Dt.frameworkStabilizers=[]),Dt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Kn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},l2=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Z0=["alt","control","meta","shift"],d2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},f2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},X0=(()=>{class n extends gc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Z0.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=d2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Z0.forEach(s=>{if(s!==i){let a=f2[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Q(qe))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function h2(){Eh.makeCurrent()}function p2(){return new pn}function g2(){return bv(document),document}var m2=[{provide:vo,useValue:BE},{provide:$f,useValue:h2,multi:!0},{provide:qe,useFactory:g2}],y2=RE(k0,"browser",m2);var v2=[{provide:js,useClass:_h},{provide:th,useClass:ac,deps:[de,uc,js]},{provide:ac,useClass:ac,deps:[de,uc,js]}],E2=[{provide:Fu,useValue:"root"},{provide:pn,useFactory:p2},{provide:vh,useClass:mh,multi:!0,deps:[qe]},{provide:vh,useClass:X0,multi:!0,deps:[qe]},KE,GE,zE,{provide:ho,useExisting:KE},{provide:pc,useClass:l2},[]],_2=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=Fn({providers:[...E2,...v2],imports:[LE,O0]})}return n})();var J0=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Q(qe))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var I2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=Q(w2),i},providedIn:"root"})}return n})(),w2=(()=>{class n extends I2{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case In.NONE:return r;case In.HTML:return Cr(r,"HTML")?an(r):kv(this._doc,String(r)).toString();case In.STYLE:return Cr(r,"Style")?an(r):r;case In.SCRIPT:if(Cr(r,"Script"))return an(r);throw new U(5200,!1);case In.URL:return Cr(r,"URL")?an(r):nc(String(r));case In.RESOURCE_URL:if(Cr(r,"ResourceURL"))return an(r);throw new U(5201,!1);default:throw new U(5202,!1)}}bypassSecurityTrustHtml(t){return Rv(t)}bypassSecurityTrustStyle(t){return Nv(t)}bypassSecurityTrustScript(t){return Mv(t)}bypassSecurityTrustUrl(t){return xv(t)}bypassSecurityTrustResourceUrl(t){return Pv(t)}static \u0275fac=function(r){return new(r||n)(Q(qe))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",Mc=Symbol("RouteTitle"),JE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Do(n){return new JE(n)}function aR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function T2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qn(n[t],e[t]))return!1;return!0}function Qn(n,e){let t=n?e_(n):void 0,r=e?e_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!uR(n[i],e[i]))return!1;return!0}function e_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function uR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function cR(n){return n.length>0?n[n.length-1]:null}function Nr(n){return Sm(n)?n:Bs(n)?be(Promise.resolve(n)):Y(n)}var C2={exact:dR,subset:fR},lR={exact:b2,subset:S2,ignored:()=>!0};function eR(n,e,t){return C2[t.paths](n.root,e.root,t.matrixParams)&&lR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function b2(n,e){return Qn(n,e)}function dR(n,e,t){if(!Io(n.segments,e.segments)||!Dh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!dR(n.children[r],e.children[r],t))return!1;return!0}function S2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uR(n[t],e[t]))}function fR(n,e,t){return hR(n,e,e.segments,t)}function hR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Io(i,t)||e.hasChildren()||!Dh(i,t,r))}else if(n.segments.length===t.length){if(!Io(n.segments,t)||!Dh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!fR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Io(n.segments,i)||!Dh(n.segments,i,r)||!n.children[re]?!1:hR(n.children[re],e,o,r)}}function Dh(n,e,t){return e.every((r,i)=>lR[t](n[i].parameters,r.parameters))}var Zn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ye([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Do(this.queryParams),this._queryParamMap}toString(){return N2.serialize(this)}},ye=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Th(this)}},fi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Do(this.parameters),this._parameterMap}toString(){return gR(this)}};function A2(n,e){return Io(n,e)&&n.every((t,r)=>Qn(t.parameters,e[r].parameters))}function Io(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function R2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var To=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new hi,providedIn:"root"})}return n})(),hi=class{parse(e){let t=new n_(e);return new Zn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ec(e.root,!0)}`,r=P2(e.queryParams),i=typeof e.fragment=="string"?`#${M2(e.fragment)}`:"";return`${t}${r}${i}`}},N2=new hi;function Th(n){return n.segments.map(e=>gR(e)).join("/")}function Ec(n,e){if(!n.hasChildren())return Th(n);if(e){let t=n.children[re]?Ec(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${Ec(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=R2(n,(r,i)=>i===re?[Ec(n.children[re],!1)]:[`${i}:${Ec(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Th(n)}/${t[0]}`:`${Th(n)}/(${t.join("//")})`}}function pR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ih(n){return pR(n).replace(/%3B/gi,";")}function M2(n){return encodeURI(n)}function t_(n){return pR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ch(n){return decodeURIComponent(n)}function tR(n){return Ch(n.replace(/\+/g,"%20"))}function gR(n){return`${t_(n.path)}${x2(n.parameters)}`}function x2(n){return Object.entries(n).map(([e,t])=>`;${t_(e)}=${t_(t)}`).join("")}function P2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ih(t)}=${Ih(i)}`).join("&"):`${Ih(t)}=${Ih(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var k2=/^[^\/()?;#]+/;function QE(n){let e=n.match(k2);return e?e[0]:""}var O2=/^[^\/()?;=#]+/;function F2(n){let e=n.match(O2);return e?e[0]:""}var L2=/^[^=?&#]+/;function V2(n){let e=n.match(L2);return e?e[0]:""}var j2=/^[^&#]+/;function B2(n){let e=n.match(j2);return e?e[0]:""}var n_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new ye(e,t)),r}parseSegment(){let e=QE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new fi(Ch(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=F2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=QE(this.remaining);i&&(r=i,this.capture(r))}e[Ch(t)]=Ch(r)}parseQueryParam(e){let t=V2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=B2(this.remaining);s&&(r=s,this.capture(r))}let i=tR(t),o=tR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=QE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o??re]=Object.keys(s).length===1&&s[re]?s[re]:new ye([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function mR(n){return n.segments.length>0?new ye([],{[re]:n}):n}function yR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=yR(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ye(n.segments,e);return U2(t)}function U2(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new ye(n.segments.concat(e.segments),e.children)}return n}function pi(n){return n instanceof Zn}function vR(n,e,t=null,r=null){let i=ER(n);return _R(i,e,t,r)}function ER(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new ye(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=mR(r);return e??i}function _R(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return YE(i,i,i,t,r);let o=$2(e);if(o.toRoot())return YE(i,i,new ye([],{}),t,r);let s=H2(o,i,n),a=s.processChildren?Ic(s.segmentGroup,s.index,o.commands):wR(s.segmentGroup,s.index,o.commands);return YE(i,s.segmentGroup,a,t,r)}function bh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Dc(n){return typeof n=="object"&&n!=null&&n.outlets}function YE(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=IR(n,e,t);let a=mR(yR(s));return new Zn(a,o,i)}function IR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=IR(o,e,t)}),new ye(n.segments,r)}var Sh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&bh(r[0]))throw new U(4003,!1);let i=r.find(Dc);if(i&&i!==cR(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Sh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Sh(t,e,r)}var qs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function H2(n,e,t){if(n.isAbsolute)return new qs(e,!0,0);if(!t)return new qs(e,!1,NaN);if(t.parent===null)return new qs(t,!0,0);let r=bh(n.commands[0])?0:1,i=t.segments.length-1+r;return q2(t,i,n.numberOfDoubleDots)}function q2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new qs(r,!1,i-o)}function z2(n){return Dc(n[0])?n[0].outlets:{[re]:n}}function wR(n,e,t){if(n??=new ye([],{}),n.segments.length===0&&n.hasChildren())return Ic(n,e,t);let r=G2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ye(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new ye(n.segments.slice(r.pathIndex),n.children),Ic(o,0,i)}else return r.match&&i.length===0?new ye(n.segments,{}):r.match&&!n.hasChildren()?r_(n,e,t):r.match?Ic(n,0,i):r_(n,e,t)}function Ic(n,e,t){if(t.length===0)return new ye(n.segments,{});{let r=z2(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=Ic(n.children[re],e,t);return new ye(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=wR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ye(n.segments,i)}}function G2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Dc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!rR(u,l,s))return o;r+=2}else{if(!rR(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function r_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Dc(o)){let u=W2(o.outlets);return new ye(r,u)}if(i===0&&bh(t[0])){let u=n.segments[e];r.push(new fi(u.path,nR(t[0]))),i++;continue}let s=Dc(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&bh(a)?(r.push(new fi(s,nR(a))),i+=2):(r.push(new fi(s,{})),i++)}return new ye(r,{})}function W2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=r_(new ye([],{}),0,r))}),e}function nR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function rR(n,e,t){return n==t.path&&Qn(e,t.parameters)}var zs="imperative",it=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(it||{}),Qt=class{id;url;constructor(e,t){this.id=e,this.url=t}},gi=class extends Qt{type=it.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Yt=class extends Qt{urlAfterRedirects;type=it.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ft=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Ft||{}),Ws=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ws||{}),Yn=class extends Qt{reason;code;type=it.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xn=class extends Qt{reason;code;type=it.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ks=class extends Qt{error;target;type=it.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Tc=class extends Qt{urlAfterRedirects;state;type=it.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ah=class extends Qt{urlAfterRedirects;state;type=it.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rh=class extends Qt{urlAfterRedirects;state;shouldActivate;type=it.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Nh=class extends Qt{urlAfterRedirects;state;type=it.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mh=class extends Qt{urlAfterRedirects;state;type=it.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xh=class{route;type=it.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ph=class{route;type=it.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},kh=class{snapshot;type=it.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oh=class{snapshot;type=it.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fh=class{snapshot;type=it.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lh=class{snapshot;type=it.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qs=class{routerEvent;position;anchor;type=it.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Cc=class{},Ys=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function K2(n){return!(n instanceof Cc)&&!(n instanceof Ys)}function Q2(n,e){return n.providers&&!n._injector&&(n._injector=Vs(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Tn(n){return n.outlet||re}function Y2(n,e){let t=n.filter(r=>Tn(r)===e);return t.push(...n.filter(r=>Tn(r)!==e)),t}function Js(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Vh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Js(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Co(this.rootInjector)}},Co=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Vh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Q(He))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=i_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=i_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=o_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return o_(e,this._root).map(t=>t.value)}};function i_(n,e){if(n===e.value)return e;for(let t of e.children){let r=i_(n,t);if(r)return r}return null}function o_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=o_(n,t);if(r.length)return r.unshift(e),r}return[]}var Kt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Hs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var bc=class extends jh{snapshot;constructor(e,t){super(e),this.snapshot=t,h_(this,e)}toString(){return this.snapshot.toString()}};function DR(n){let e=Z2(n),t=new ft([new fi("",{})]),r=new ft({}),i=new ft({}),o=new ft({}),s=new ft(""),a=new Rr(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new bc(new Kt(a,[]),e)}function Z2(n){let e={},t={},r={},o=new wo([],e,r,"",t,re,n,null,{});return new Sc("",new Kt(o,[]))}var Rr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(le(l=>l[Mc]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Do(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Do(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&CR(i)&&(r.resolve[Mc]=i.title),r}var wo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Mc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Do(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Do(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Sc=class extends jh{url;constructor(e,t){super(t),this.url=e,h_(this,t)}toString(){return TR(this._root)}};function h_(n,e){e.value._routerState=n,e.children.forEach(t=>h_(n,t))}function TR(n){let e=n.children.length>0?` { ${n.children.map(TR).join(", ")} } `:"";return`${n.value}${e}`}function ZE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Qn(e.params,t.params)||n.paramsSubject.next(t.params),T2(e.url,t.url)||n.urlSubject.next(t.url),Qn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function s_(n,e){let t=Qn(n.params,e.params)&&A2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||s_(n.parent,e.parent))}function CR(n){return typeof n.title=="string"||n.title===null}var bR=new z(""),p_=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Ct;deactivateEvents=new Ct;attachEvents=new Ct;detachEvents=new Ct;routerOutletData=M0();parentContexts=P(Co);location=P(Sr);changeDetector=P(Us);inputBinder=P(xc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new a_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=zn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[yo]})}return n})(),a_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Rr?this.route:e===Co?this.childContexts:e===bR?this.outletData:this.parent.get(e,t)}},xc=new z(""),g_=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Au([r.queryParams,r.params,r.data]).pipe(ut(([o,s,a],u)=>(a=B(B(B({},o),s),a),u===0?Y(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=F0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),m_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=sE({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&oh(0,"router-outlet")},dependencies:[p_],encapsulation:2})}return n})();function y_(n){let e=n.children&&n.children.map(y_),t=e?Ee(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=m_),t}function X2(n,e,t){let r=Ac(n,e._root,t?t._root:void 0);return new bc(r,e)}function Ac(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=J2(n,e,t);return new Kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ac(n,a)),s}}let r=eB(e.value),i=e.children.map(o=>Ac(n,o));return new Kt(r,i)}}function J2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ac(n,r,i);return Ac(n,r)})}function eB(n){return new Rr(new ft(n.url),new ft(n.params),new ft(n.queryParams),new ft(n.fragment),new ft(n.data),n.outlet,n.component,n)}var Zs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},SR="ngNavigationCancelingError";function Uh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=pi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=AR(!1,Ft.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function AR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[SR]=!0,t.cancellationCode=e,t}function tB(n){return RR(n)&&pi(n.url)}function RR(n){return!!n&&n[SR]}var nB=(n,e,t,r)=>le(i=>(new u_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),u_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ZE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Hs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Hs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Hs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Hs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Lh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Oh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(ZE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ZE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},$h=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Gs=class{component;route;constructor(e,t){this.component=e,this.route=t}};function rB(n,e,t){let r=n._root,i=e?e._root:null;return _c(r,i,t,[r.value])}function iB(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ea(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!qm(n)?n:e.get(n):r}function _c(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Hs(e);return n.children.forEach(s=>{oB(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>wc(a,t.getContext(s),i)),i}function oB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=sB(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new $h(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?_c(n,e,a?a.children:null,r,i):_c(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Gs(a.outlet.component,s))}else s&&wc(e,a,i),i.canActivateChecks.push(new $h(r)),o.component?_c(n,null,a?a.children:null,r,i):_c(n,null,t,r,i);return i}function sB(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Io(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Io(n.url,e.url)||!Qn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!s_(n,e)||!Qn(n.queryParams,e.queryParams);case"paramsChange":default:return!s_(n,e)}}function wc(n,e,t){let r=Hs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?wc(s,e.children.getContext(o),t):wc(s,null,t):wc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Gs(e.outlet.component,i)):t.canDeactivateChecks.push(new Gs(null,i)):t.canDeactivateChecks.push(new Gs(null,i))}function Pc(n){return typeof n=="function"}function aB(n){return typeof n=="boolean"}function uB(n){return n&&Pc(n.canLoad)}function cB(n){return n&&Pc(n.canActivate)}function lB(n){return n&&Pc(n.canActivateChild)}function dB(n){return n&&Pc(n.canDeactivate)}function fB(n){return n&&Pc(n.canMatch)}function NR(n){return n instanceof hn||n?.name==="EmptyError"}var wh=Symbol("INITIAL_VALUE");function Xs(){return ut(n=>Au(n.map(e=>e.pipe(fr(1),Bd(wh)))).pipe(le(e=>{for(let t of e)if(t!==!0){if(t===wh)return wh;if(t===!1||hB(t))return t}return!0}),xt(e=>e!==wh),fr(1)))}function hB(n){return pi(n)||n instanceof Zs}function pB(n,e){return $e(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Y(Ee(B({},t),{guardsResult:!0})):gB(s,r,i,n).pipe($e(a=>a&&aB(a)?mB(r,o,n,e):Y(a)),le(a=>Ee(B({},t),{guardsResult:a})))})}function gB(n,e,t,r){return be(n).pipe($e(i=>IB(i.component,i.route,t,e,r)),hr(i=>i!==!0,!0))}function mB(n,e,t,r){return be(e).pipe(Yr(i=>ys(vB(i.route.parent,r),yB(i.route,r),_B(n,i.path,t),EB(n,i.route,t))),hr(i=>i!==!0,!0))}function yB(n,e){return n!==null&&e&&e(new Fh(n)),Y(!0)}function vB(n,e){return n!==null&&e&&e(new kh(n)),Y(!0)}function EB(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>Ru(()=>{let s=Js(e)??t,a=ea(o,s),u=cB(a)?a.canActivate(e,n):Qe(s,()=>a(e,n));return Nr(u).pipe(hr())}));return Y(i).pipe(Xs())}function _B(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>iB(s)).filter(s=>s!==null).map(s=>Ru(()=>{let a=s.guards.map(u=>{let l=Js(s.node)??t,d=ea(u,l),h=lB(d)?d.canActivateChild(r,n):Qe(l,()=>d(r,n));return Nr(h).pipe(hr())});return Y(a).pipe(Xs())}));return Y(o).pipe(Xs())}function IB(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=Js(e)??i,l=ea(a,u),d=dB(l)?l.canDeactivate(n,e,t,r):Qe(u,()=>l(n,e,t,r));return Nr(d).pipe(hr())});return Y(s).pipe(Xs())}function wB(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=ea(s,n),u=uB(a)?a.canLoad(e,t):Qe(n,()=>a(e,t));return Nr(u)});return Y(o).pipe(Xs(),MR(r))}function MR(n){return Ed(ct(e=>{if(typeof e!="boolean")throw Uh(n,e)}),le(e=>e===!0))}function DB(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=ea(s,n),u=fB(a)?a.canMatch(e,t):Qe(n,()=>a(e,t));return Nr(u)});return Y(o).pipe(Xs(),MR(r))}var Rc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Nc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function $s(n){return ms(new Rc(n))}function TB(n){return ms(new U(4e3,!1))}function CB(n){return ms(AR(!1,Ft.GuardRejected))}var c_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[re])return TB(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,o){return bB(t,i,o).pipe(le(s=>{if(s instanceof Zn)throw new Nc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Nc(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Zn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ye(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function bB(n,e,t){if(typeof n=="string")return Y(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:d,title:h}=e;return Nr(Qe(t,()=>r({params:l,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:h})))}var l_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SB(n,e,t,r,i){let o=xR(n,e,t);return o.matched?(r=Q2(e,r),DB(r,e,t,i).pipe(le(s=>s===!0?o:B({},l_)))):Y(o)}function xR(n,e,t){if(e.path==="**")return AB(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},l_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||aR)(t,n,e);if(!i)return B({},l_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?B(B({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function AB(n){return{matched:!0,parameters:n.length>0?cR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function iR(n,e,t,r){return t.length>0&&MB(n,t,r)?{segmentGroup:new ye(e,NB(r,new ye(t,n.children))),slicedSegments:[]}:t.length===0&&xB(n,t,r)?{segmentGroup:new ye(n.segments,RB(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ye(n.segments,n.children),slicedSegments:t}}function RB(n,e,t,r){let i={};for(let o of t)if(qh(n,e,o)&&!r[Tn(o)]){let s=new ye([],{});i[Tn(o)]=s}return B(B({},r),i)}function NB(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&Tn(r)!==re){let i=new ye([],{});t[Tn(r)]=i}return t}function MB(n,e,t){return t.some(r=>qh(n,e,r)&&Tn(r)!==re)}function xB(n,e,t){return t.some(r=>qh(n,e,r))}function qh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function PB(n,e,t){return e.length===0&&!n.children[t]}var d_=class{};function kB(n,e,t,r,i,o,s="emptyOnly"){return new f_(n,e,t,r,i,s,o).recognize()}var OB=31,f_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new c_(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=iR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(({children:t,rootSnapshot:r})=>{let i=new Kt(r,t),o=new Sc("",i),s=vR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new wo([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(le(r=>({children:r,rootSnapshot:t})),dr(r=>{if(r instanceof Nc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Rc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(le(s=>s instanceof Kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return be(o).pipe(Yr(s=>{let a=r.children[s],u=Y2(t,s);return this.processSegmentGroup(e,u,a,s,i)}),jd((s,a)=>(s.push(...a),s)),Zr(null),Am(),$e(s=>{if(s===null)return $s(r);let a=PR(s);return FB(a),Y(a)}))}processSegment(e,t,r,i,o,s,a){return be(t).pipe(Yr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(dr(l=>{if(l instanceof Rc)return Y(null);throw l}))),hr(u=>!!u),dr(u=>{if(NR(u))return PB(r,i,o)?Y(new d_):$s(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Tn(r)!==s&&(s===re||!qh(i,o,r))?$s(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):$s(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:d,positionalParamSegments:h,remainingSegments:g}=xR(t,i,o);if(!u)return $s(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>OB&&(this.allowRedirects=!1));let y=new wo(o,l,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,oR(i),Tn(i),i.component??i._loadedComponent??null,i,sR(i)),D=Bh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(D.params),y.data=Object.freeze(D.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,y,e).pipe(ut(x=>this.applyRedirects.lineralizeSegments(i,x)),$e(x=>this.processSegment(e,r,t,x.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=SB(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(ut(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ut(({routes:l})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:g,remainingSegments:y}=u,D=new wo(g,h,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,oR(r),Tn(r),r.component??r._loadedComponent??null,r,sR(r)),R=Bh(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(R.params),D.data=Object.freeze(R.data);let{segmentGroup:x,slicedSegments:F}=iR(t,g,y,l);if(F.length===0&&x.hasChildren())return this.processChildren(d,l,x,D).pipe(le(G=>new Kt(D,G)));if(l.length===0&&F.length===0)return Y(new Kt(D,[]));let W=Tn(r)===o;return this.processSegment(d,l,x,F,W?re:o,!0,D).pipe(le(G=>new Kt(D,G instanceof Kt?[G]:[])))}))):$s(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):wB(e,t,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,t).pipe(ct(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):CB(t))):Y({routes:[],injector:e})}};function FB(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function LB(n){let e=n.value.routeConfig;return e&&e.path===""}function PR(n){let e=[],t=new Set;for(let r of n){if(!LB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=PR(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!t.has(r))}function oR(n){return n.data||{}}function sR(n){return n.resolve||{}}function VB(n,e,t,r,i,o){return $e(s=>kB(n,e,t,r,s.extractedUrl,i,o).pipe(le(({state:a,tree:u})=>Ee(B({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function jB(n,e){return $e(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of kR(u))s.add(l);let a=0;return be(s).pipe(Yr(u=>o.has(u)?BB(u,r,n,e):(u.data=Bh(u,u.parent,n).resolve,Y(void 0))),ct(()=>a++),vs(1),$e(u=>a===s.size?Y(t):wt))})}function kR(n){let e=n.children.map(t=>kR(t)).flat();return[n,...e]}function BB(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!CR(i)&&(o[Mc]=i.title),Ru(()=>(n.data=Bh(n,n.parent,t).resolve,UB(o,n,e,r).pipe(le(s=>(n._resolvedData=s,n.data=B(B({},n.data),s),null)))))}function UB(n,e,t,r){let i=e_(n);if(i.length===0)return Y({});let o={};return be(i).pipe($e(s=>$B(n[s],e,t,r).pipe(hr(),ct(a=>{if(a instanceof Zs)throw Uh(new hi,a);o[s]=a}))),vs(1),le(()=>o),dr(s=>NR(s)?wt:ms(s)))}function $B(n,e,t,r){let i=Js(e)??r,o=ea(n,i),s=o.resolve?o.resolve(e,t):Qe(i,()=>o(e,t));return Nr(s)}function XE(n){return ut(e=>{let t=n(e);return t?be(t).pipe(le(()=>e)):Y(e)})}var v_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[Mc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>P(OR),providedIn:"root"})}return n})(),OR=(()=>{class n extends v_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Q(J0))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mi=new z("",{providedIn:"root",factory:()=>({})}),ta=new z(""),zh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(wE);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Nr(Qe(t,()=>r.loadComponent())).pipe(le(LR),ut(VR),ct(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Nu(()=>{this.componentLoaders.delete(r)})),o=new fs(i,()=>new Fe).pipe(ds());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=FR(r,this.compiler,t,this.onLoadEndListener).pipe(Nu(()=>{this.childrenLoaders.delete(r)})),s=new fs(o,()=>new Fe).pipe(ds());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FR(n,e,t,r){return Nr(Qe(t,()=>n.loadChildren())).pipe(le(LR),ut(VR),$e(i=>i instanceof Jf||Array.isArray(i)?Y(i):be(e.compileModuleAsync(i))),le(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ta,[],{optional:!0,self:!0}).flat()),{routes:s.map(y_),injector:o}}))}function HB(n){return n&&typeof n=="object"&&"default"in n}function LR(n){return HB(n)?n.default:n}function VR(n){return Y(n)}var Gh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>P(qB),providedIn:"root"})}return n})(),qB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E_=new z(""),__=new z("");function jR(n,e,t){let r=n.get(__),i=n.get(qe);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),zB(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&Qe(n,()=>u({transition:a,from:e,to:t})),s}function zB(n){return new Promise(e=>{qv({read:()=>setTimeout(e)},{injector:n})})}var I_=new z(""),Wh=(()=>{class n{currentNavigation=co(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Fe;transitionAbortWithErrorSubject=new Fe;configLoader=P(zh);environmentInjector=P(He);destroyRef=P(Un);urlSerializer=P(To);rootContexts=P(Co);location=P(di);inputBindingEnabled=P(xc,{optional:!0})!==null;titleStrategy=P(v_);options=P(mi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(Gh);createViewTransition=P(E_,{optional:!0});navigationErrorHandler=P(I_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new xh(i)),r=i=>this.events.next(new Ph(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Wn(()=>{this.transitions?.next(Ee(B({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new ft(null),this.transitions.pipe(xt(r=>r!==null),ut(r=>{let i=!1;return Y(r).pipe(ut(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ft.SupersededByNewNavigation),wt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ws.IgnoredSameUrlNavigation)),o.resolve(!1),wt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Y(o).pipe(ut(u=>(this.events.next(new gi(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?wt:Promise.resolve(u))),VB(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ct(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=u.urlAfterRedirects,d));let l=new Tc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:d,restoredState:h,extras:g}=o,y=new gi(u,this.urlSerializer.serialize(l),d,h);this.events.next(y);let D=DR(this.rootComponentType).snapshot;return this.currentTransition=r=Ee(B({},o),{targetSnapshot:D,urlAfterRedirects:l,extras:Ee(B({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(R=>(R.finalUrl=l,R)),Y(r)}else return this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ws.IgnoredByUrlHandlingStrategy)),o.resolve(!1),wt}),ct(o=>{let s=new Ah(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),le(o=>(this.currentTransition=r=Ee(B({},o),{guards:rB(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),pB(this.environmentInjector,o=>this.events.next(o)),ct(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Uh(this.urlSerializer,o.guardsResult);let s=new Rh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),xt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ft.GuardRejected),!1)),XE(o=>{if(o.guards.canActivateChecks.length!==0)return Y(o).pipe(ct(s=>{let a=new Nh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ut(s=>{let a=!1;return Y(s).pipe(jB(this.paramsInheritanceStrategy,this.environmentInjector),ct({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Ft.NoDataFromResolver)}}))}),ct(s=>{let a=new Mh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),XE(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Js(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(ct(d=>{a.component=d}),le(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Au(s(o.targetSnapshot.root)).pipe(Zr(null),fr(1))}),XE(()=>this.afterPreactivation()),ut(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?be(a).pipe(le(()=>r)):Y(r)}),le(o=>{let s=X2(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Ee(B({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),ct(()=>{this.events.next(new Cc)}),nB(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),fr(1),Ud(new te(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(xt(()=>!i&&!r.targetRouterState),ct(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Ft.Aborted)}))),ct({next:o=>{i=!0,this.lastSuccessfulNavigation=Wn(this.currentNavigation),this.events.next(new Yt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ud(this.transitionAbortWithErrorSubject.pipe(ct(o=>{throw o}))),Nu(()=>{i||this.cancelNavigationTransition(r,"",Ft.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),dr(o=>{if(this.destroyed)return r.resolve(!1),wt;if(i=!0,RR(o))this.events.next(new Yn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),tB(o)?this.events.next(new Ys(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ks(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Qe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Zs){let{message:u,cancellationCode:l}=Uh(this.urlSerializer,a);this.events.next(new Yn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Ys(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return wt}))}))}cancelNavigationTransition(t,r,i){let o=new Yn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Wn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GB(n){return n!==zs}var BR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>P(WB),providedIn:"root"})}return n})(),Hh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},WB=(()=>{class n extends Hh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Bf(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UR=(()=>{class n{urlSerializer=P(To);options=P(mi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(di);urlHandlingStrategy=P(Gh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Zn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=DR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>P(KB),providedIn:"root"})}return n})(),KB=(()=>{class n extends UR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof gi?this.updateStateMemento():t instanceof Xn?this.commitTransition(r):t instanceof Tc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Cc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Yn&&t.code!==Ft.SupersededByNewNavigation&&t.code!==Ft.Redirect?this.restoreHistory(r):t instanceof Ks?this.restoreHistory(r,!0):t instanceof Yt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=B(B({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=B(B({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Bf(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kh(n,e){n.events.pipe(xt(t=>t instanceof Yt||t instanceof Yn||t instanceof Ks||t instanceof Xn),le(t=>t instanceof Yt||t instanceof Xn?0:(t instanceof Yn?t.code===Ft.Redirect||t.code===Ft.SupersededByNewNavigation:!1)?2:1),xt(t=>t!==2),fr(1)).subscribe(()=>{e()})}var QB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Jn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(eh);stateManager=P(UR);options=P(mi,{optional:!0})||{};pendingTasks=P($n);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(Wh);urlSerializer=P(To);location=P(di);urlHandlingStrategy=P(Gh);injector=P(He);_events=new Fe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(BR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(ta,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(xc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new je;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Wn(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Yn&&r.code!==Ft.Redirect&&r.code!==Ft.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Yt)this.navigated=!0;else if(r instanceof Ys){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||GB(i.source)},s);this.scheduleNavigation(a,zs,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}K2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=B({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Bt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Wn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(y_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=B(B({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let g=i?i.snapshot:this.routerState.snapshot.root;h=ER(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return _R(h,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=pi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,zs,null,r)}navigate(t,r={skipLocationChange:!1}){return ZB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(yr(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},QB):r===!1?i=B({},YB):i=r,pi(t))return eR(this.currentUrlTree,t,i);let o=this.parseUrl(t);return eR(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((h,g)=>{a=h,u=g});let d=this.pendingTasks.add();return Kh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new U(4008,!1)}var Qh=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=co(null);get href(){return Wn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Fe;applicationErrorHandler=P(Bt);options=P(mi,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(P(new uh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Yt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(pi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:pi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(xe(Jn),xe(Rr),tc("tabindex"),xe(_o),xe(_n),xe(Dn))};static \u0275dir=zn({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&sh("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ih("href",i.reactiveHref(),Ov)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",dc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",dc],replaceUrl:[2,"replaceUrl","replaceUrl",dc],routerLink:"routerLink"},features:[yo]})}return n})(),XB=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ct;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Yt&&this.update()})}ngAfterContentInit(){Y(this.links.changes,Y(null)).pipe(On()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=be(t).pipe(On()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=JB(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(xe(Jn),xe(_n),xe(_o),xe(Us),xe(Qh,8))};static \u0275dir=zn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&yE(o,Qh,5),r&2){let s;vE(s=EE())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[yo]})}return n})();function JB(n){return!!n.paths}var kc=class{};var $R=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(xt(t=>t instanceof Yt),Yr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Vs(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return be(i).pipe(On())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Y(null);let o=i.pipe($e(s=>s===null?Y(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return be([o,s]).pipe(On())}else return o})}static \u0275fac=function(r){return new(r||n)(Q(Jn),Q(He),Q(kc),Q(zh))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HR=new z(""),eU=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=zs;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Yt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Xn&&t.code===Ws.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Qs))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>M(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Qs(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Jv()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function tU(n){return n.routerState.root}function Oc(n,e){return{\u0275kind:n,\u0275providers:e}}function nU(){let n=P(Me);return e=>{let t=n.get(Gn);if(e!==t.components[0])return;let r=n.get(Jn),i=n.get(qR);n.get(D_)===1&&r.initialNavigation(),n.get(WR,null,{optional:!0})?.setUpPreloading(),n.get(HR,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var qR=new z("",{factory:()=>new Fe}),D_=new z("",{providedIn:"root",factory:()=>1});function zR(){let n=[{provide:qf,useValue:!0},{provide:D_,useValue:0},nh(()=>{let e=P(Me);return e.get(kE,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Jn),o=e.get(qR);Kh(i,()=>{r(!0)}),e.get(Wh).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))})];return Oc(2,n)}function GR(){let n=[nh(()=>{P(Jn).setUpLocationChangeListener()}),{provide:D_,useValue:2}];return Oc(3,n)}var WR=new z("");function KR(n){return Oc(0,[{provide:WR,useExisting:$R},{provide:kc,useExisting:n}])}function QR(){return Oc(8,[g_,{provide:xc,useExisting:g_}])}function YR(n){Ls("NgRouterViewTransitions");let e=[{provide:E_,useValue:jR},{provide:__,useValue:B({skipNextTransition:!!n?.skipInitialTransition},n)}];return Oc(9,e)}var ZR=[di,{provide:To,useClass:hi},Jn,Co,{provide:Rr,useFactory:tU,deps:[Jn]},zh,[]],rU=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[ZR,[],{provide:ta,multi:!0,useValue:t},[],r?.errorHandler?{provide:I_,useValue:r.errorHandler}:[],{provide:mi,useValue:r||{}},r?.useHash?oU():sU(),iU(),r?.preloadingStrategy?KR(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?aU(r):[],r?.bindToComponentInputs?QR().\u0275providers:[],r?.enableViewTransitions?YR().\u0275providers:[],uU()]}}static forChild(t){return{ngModule:n,providers:[{provide:ta,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=Fn({})}return n})();function iU(){return{provide:HR,useFactory:()=>{let n=P(z0),e=P(de),t=P(mi),r=P(Wh),i=P(To);return t.scrollOffset&&n.setOffset(t.scrollOffset),new eU(i,r,n,e,t)}}}function oU(){return{provide:Dn,useClass:FE}}function sU(){return{provide:Dn,useClass:hh}}function aU(n){return[n.initialNavigation==="disabled"?GR().\u0275providers:[],n.initialNavigation==="enabledBlocking"?zR().\u0275providers:[]]}var w_=new z("");function uU(){return[{provide:w_,useFactory:nU},{provide:rh,multi:!0,useExisting:w_}]}var cU="firebase",lU="11.10.0";Et(cU,lU,"app");function XR(n){n===void 0&&(n=P(Me));let e=n.get(As);return t=>new te(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var yi=new Xr("ANGULARFIRE2_VERSION");function Fc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ra=(n,e)=>{let t=e?[e]:rd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},na=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(na||{}),JR=ME()&&typeof Zone<"u"?na.WARN:na.SILENT;var Yh=class{zone;delegate;constructor(e,t=Cm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},vi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=P(de);this.outsideAngular=t.runOutsideAngular(()=>new Yh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Yh(typeof Zone>"u"?void 0:Zone.current,Su))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eN=!1;function dU(n,e){!eN&&(JR>na.SILENT||ME())&&(eN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),JR>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function fU(n){let e=P(de,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function bo(n){let e=P(de,{optional:!0});return e?e.run(()=>n()):n()}var hU=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Qe(t,()=>bo(()=>n.apply(void 0,r)))),Ye=(n,e,t)=>(t||=e?na.WARN:na.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=P(vi),s=P(As),a=P(He)}catch{return dU(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=bo(()=>s.add())),i[l]=hU(i[l],r,a));let u=fU(()=>n.apply(this,i));return e?u instanceof te?u.pipe(Qr(o.outsideAngular),Kr(o.insideAngular),XR(a)):u instanceof Promise?bo(()=>{let l=s.add();return new Promise((d,h)=>{u.then(g=>Qe(a,()=>bo(()=>d(g))),g=>Qe(a,()=>bo(()=>h(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:bo(()=>u):u instanceof te?u.pipe(Qr(o.outsideAngular),Kr(o.insideAngular)):bo(()=>u)});var Mr=class{constructor(e){return e}},So=class{constructor(){return rd()}};function pU(n){return n&&n.length===1?n[0]:new Mr(Eu())}var T_=new z("angularfire2._apps"),gU={provide:Mr,useFactory:pU,deps:[[new Ut,T_]]},mU={provide:So,deps:[[new Ut,T_]]};function yU(n){return(e,t)=>{let r=t.get(vo);Et("angularfire",yi.full,"core"),Et("angularfire",yi.full,"app"),Et("angular",$m.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Mr(i)}}function Qne(n,...e){return gn([gU,mU,{provide:T_,useFactory:yU(n),multi:!0,deps:[de,Me,vi,...e]}])}var Yne=Ye(nC,!0);var vU=new Map,EU={activated:!1,tokenObservers:[]},_U={initialized:!1,enabled:!1};function Cn(n){return vU.get(n)||Object.assign({},EU)}function iN(){return _U}var IU="https://content-firebaseappcheck.googleapis.com/v1";var wU="exchangeDebugToken",tN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},ore=1440*60*1e3;var S_=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return M(this,null,function*(){this.stop();try{this.pending=new rm,this.pending.promise.catch(t=>{}),yield DU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new rm,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function DU(n){return new Promise(e=>{setTimeout(e,n)})}var TU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ei=new JT("appCheck","AppCheck",TU);function oN(n){if(!Cn(n).activated)throw Ei.create("use-before-activation",{appName:n.name})}function sN(r,i){return M(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Ei.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Ei.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Ei.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ei.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+h,issuedAtTimeMillis:g}})}function aN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${IU}/projects/${t}/apps/${r}:${wU}?key=${i}`,body:{debug_token:e}}}var CU="firebase-app-check-database",bU=1,A_="firebase-app-check-store";var Zh=null;function SU(){return Zh||(Zh=new Promise((n,e)=>{try{let t=indexedDB.open(CU,bU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ei.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(A_,{keyPath:"compositeKey"})}}}catch(t){e(Ei.create("storage-open",{originalErrorMessage:t?.message}))}}),Zh)}function AU(n,e){return RU(NU(n),e)}function RU(n,e){return M(this,null,function*(){let r=(yield SU()).transaction(A_,"readwrite"),o=r.objectStore(A_).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Ei.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function NU(n){return`${n.options.appId}-${n.name}`}var Lc=new nd("@firebase/app-check");function C_(n,e){return ed()?AU(n,e).catch(t=>{Lc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function uN(){return iN().enabled}function cN(){return M(this,null,function*(){let n=iN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var MU={error:"UNKNOWN_ERROR"};function xU(n){return WT.encodeString(JSON.stringify(n),!1)}function R_(n,e=!1,t=!1){return M(this,null,function*(){let r=n.app;oN(r);let i=Cn(r),o=i.token,s;if(o&&!Vc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Vc(l)?o=l:yield C_(r,void 0))}if(!e&&o&&Vc(o))return{token:o.token};let a=!1;if(uN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=sN(aN(r,yield cN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield C_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Lc.warn(l.message):t&&Lc.error(l),b_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Cn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Lc.warn(l.message):t&&Lc.error(l),s=l}let u;return o?s?Vc(o)?u={token:o.token,internalError:s}:u=b_(s):(u={token:o.token},i.token=o,yield C_(r,o)):u=b_(s),a&&FU(r,u),u})}function PU(n){return M(this,null,function*(){let e=n.app;oN(e);let{provider:t}=Cn(e);if(uN()){let r=yield cN(),{token:i}=yield sN(aN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function kU(n,e,t,r){let{app:i}=n,o=Cn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Vc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),nN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>nN(n))}function lN(n,e){let t=Cn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function nN(n){let{app:e}=n,t=Cn(e),r=t.tokenRefresher;r||(r=OU(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function OU(n){let{app:e}=n;return new S_(()=>M(null,null,function*(){let t=Cn(e),r;if(t.token?r=yield R_(n,!0):r=yield R_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Cn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},tN.RETRIAL_MIN_WAIT,tN.RETRIAL_MAX_WAIT)}function FU(n,e){let t=Cn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Vc(n){return n.expireTimeMillis-Date.now()>0}function b_(n){return{token:xU(MU),error:n}}var N_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Cn(this.app);for(let t of e)lN(this.app,t.next);return Promise.resolve()}};function LU(n,e){return new N_(n,e)}function VU(n){return{getToken:e=>R_(n,e),getLimitedUseToken:()=>PU(n),addTokenListener:e=>kU(n,"INTERNAL",e),removeTokenListener:e=>lN(n.app,e)}}var jU="@firebase/app-check",BU="0.10.1";var UU="app-check",rN="app-check-internal";function $U(){vu(new yu(UU,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return LU(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rN).initialize()})),vu(new yu(rN,n=>{let e=n.getProvider("app-check").getImmediate();return VU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Et(jU,BU)}$U();var HU="app-check";var ia=class{constructor(){return ra(HU)}};var qU=["localhost","0.0.0.0","127.0.0.1"],vre=typeof window<"u"&&qU.includes(window.location.hostname);var dN="auth",jc=class{constructor(e){return e}},Bc=class{constructor(){return ra(dN)}};var M_=new z("angularfire2.auth-instances");function H$(n,e){let t=Fc(dN,n,e);return t&&new jc(t)}function q$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new jc(r)}}var z$={provide:Bc,deps:[[new Ut,M_]]},G$={provide:jc,useFactory:H$,deps:[[new Ut,M_],Mr]};function pie(n,...e){return Et("angularfire",yi.full,"auth"),gn([G$,z$,{provide:M_,useFactory:q$(n),multi:!0,deps:[de,Me,vi,So,[new Ut,ia],...e]}])}var gie=Ye(um,!0);var fN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hN={};var xr,x_;(function(){var n;function e(I,v){function _(){}_.prototype=v.prototype,I.D=v.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(w,T,b){for(var E=Array(arguments.length-2),ur=2;ur<arguments.length;ur++)E[ur-2]=arguments[ur];return v.prototype[T].apply(w,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,_){_||(_=0);var w=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)w[T]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(T=0;16>T;++T)w[T]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=I.g[0],_=I.g[1],T=I.g[2];var b=I.g[3],E=v+(b^_&(T^b))+w[0]+3614090360&4294967295;v=_+(E<<7&4294967295|E>>>25),E=b+(T^v&(_^T))+w[1]+3905402710&4294967295,b=v+(E<<12&4294967295|E>>>20),E=T+(_^b&(v^_))+w[2]+606105819&4294967295,T=b+(E<<17&4294967295|E>>>15),E=_+(v^T&(b^v))+w[3]+3250441966&4294967295,_=T+(E<<22&4294967295|E>>>10),E=v+(b^_&(T^b))+w[4]+4118548399&4294967295,v=_+(E<<7&4294967295|E>>>25),E=b+(T^v&(_^T))+w[5]+1200080426&4294967295,b=v+(E<<12&4294967295|E>>>20),E=T+(_^b&(v^_))+w[6]+2821735955&4294967295,T=b+(E<<17&4294967295|E>>>15),E=_+(v^T&(b^v))+w[7]+4249261313&4294967295,_=T+(E<<22&4294967295|E>>>10),E=v+(b^_&(T^b))+w[8]+1770035416&4294967295,v=_+(E<<7&4294967295|E>>>25),E=b+(T^v&(_^T))+w[9]+2336552879&4294967295,b=v+(E<<12&4294967295|E>>>20),E=T+(_^b&(v^_))+w[10]+4294925233&4294967295,T=b+(E<<17&4294967295|E>>>15),E=_+(v^T&(b^v))+w[11]+2304563134&4294967295,_=T+(E<<22&4294967295|E>>>10),E=v+(b^_&(T^b))+w[12]+1804603682&4294967295,v=_+(E<<7&4294967295|E>>>25),E=b+(T^v&(_^T))+w[13]+4254626195&4294967295,b=v+(E<<12&4294967295|E>>>20),E=T+(_^b&(v^_))+w[14]+2792965006&4294967295,T=b+(E<<17&4294967295|E>>>15),E=_+(v^T&(b^v))+w[15]+1236535329&4294967295,_=T+(E<<22&4294967295|E>>>10),E=v+(T^b&(_^T))+w[1]+4129170786&4294967295,v=_+(E<<5&4294967295|E>>>27),E=b+(_^T&(v^_))+w[6]+3225465664&4294967295,b=v+(E<<9&4294967295|E>>>23),E=T+(v^_&(b^v))+w[11]+643717713&4294967295,T=b+(E<<14&4294967295|E>>>18),E=_+(b^v&(T^b))+w[0]+3921069994&4294967295,_=T+(E<<20&4294967295|E>>>12),E=v+(T^b&(_^T))+w[5]+3593408605&4294967295,v=_+(E<<5&4294967295|E>>>27),E=b+(_^T&(v^_))+w[10]+38016083&4294967295,b=v+(E<<9&4294967295|E>>>23),E=T+(v^_&(b^v))+w[15]+3634488961&4294967295,T=b+(E<<14&4294967295|E>>>18),E=_+(b^v&(T^b))+w[4]+3889429448&4294967295,_=T+(E<<20&4294967295|E>>>12),E=v+(T^b&(_^T))+w[9]+568446438&4294967295,v=_+(E<<5&4294967295|E>>>27),E=b+(_^T&(v^_))+w[14]+3275163606&4294967295,b=v+(E<<9&4294967295|E>>>23),E=T+(v^_&(b^v))+w[3]+4107603335&4294967295,T=b+(E<<14&4294967295|E>>>18),E=_+(b^v&(T^b))+w[8]+1163531501&4294967295,_=T+(E<<20&4294967295|E>>>12),E=v+(T^b&(_^T))+w[13]+2850285829&4294967295,v=_+(E<<5&4294967295|E>>>27),E=b+(_^T&(v^_))+w[2]+4243563512&4294967295,b=v+(E<<9&4294967295|E>>>23),E=T+(v^_&(b^v))+w[7]+1735328473&4294967295,T=b+(E<<14&4294967295|E>>>18),E=_+(b^v&(T^b))+w[12]+2368359562&4294967295,_=T+(E<<20&4294967295|E>>>12),E=v+(_^T^b)+w[5]+4294588738&4294967295,v=_+(E<<4&4294967295|E>>>28),E=b+(v^_^T)+w[8]+2272392833&4294967295,b=v+(E<<11&4294967295|E>>>21),E=T+(b^v^_)+w[11]+1839030562&4294967295,T=b+(E<<16&4294967295|E>>>16),E=_+(T^b^v)+w[14]+4259657740&4294967295,_=T+(E<<23&4294967295|E>>>9),E=v+(_^T^b)+w[1]+2763975236&4294967295,v=_+(E<<4&4294967295|E>>>28),E=b+(v^_^T)+w[4]+1272893353&4294967295,b=v+(E<<11&4294967295|E>>>21),E=T+(b^v^_)+w[7]+4139469664&4294967295,T=b+(E<<16&4294967295|E>>>16),E=_+(T^b^v)+w[10]+3200236656&4294967295,_=T+(E<<23&4294967295|E>>>9),E=v+(_^T^b)+w[13]+681279174&4294967295,v=_+(E<<4&4294967295|E>>>28),E=b+(v^_^T)+w[0]+3936430074&4294967295,b=v+(E<<11&4294967295|E>>>21),E=T+(b^v^_)+w[3]+3572445317&4294967295,T=b+(E<<16&4294967295|E>>>16),E=_+(T^b^v)+w[6]+76029189&4294967295,_=T+(E<<23&4294967295|E>>>9),E=v+(_^T^b)+w[9]+3654602809&4294967295,v=_+(E<<4&4294967295|E>>>28),E=b+(v^_^T)+w[12]+3873151461&4294967295,b=v+(E<<11&4294967295|E>>>21),E=T+(b^v^_)+w[15]+530742520&4294967295,T=b+(E<<16&4294967295|E>>>16),E=_+(T^b^v)+w[2]+3299628645&4294967295,_=T+(E<<23&4294967295|E>>>9),E=v+(T^(_|~b))+w[0]+4096336452&4294967295,v=_+(E<<6&4294967295|E>>>26),E=b+(_^(v|~T))+w[7]+1126891415&4294967295,b=v+(E<<10&4294967295|E>>>22),E=T+(v^(b|~_))+w[14]+2878612391&4294967295,T=b+(E<<15&4294967295|E>>>17),E=_+(b^(T|~v))+w[5]+4237533241&4294967295,_=T+(E<<21&4294967295|E>>>11),E=v+(T^(_|~b))+w[12]+1700485571&4294967295,v=_+(E<<6&4294967295|E>>>26),E=b+(_^(v|~T))+w[3]+2399980690&4294967295,b=v+(E<<10&4294967295|E>>>22),E=T+(v^(b|~_))+w[10]+4293915773&4294967295,T=b+(E<<15&4294967295|E>>>17),E=_+(b^(T|~v))+w[1]+2240044497&4294967295,_=T+(E<<21&4294967295|E>>>11),E=v+(T^(_|~b))+w[8]+1873313359&4294967295,v=_+(E<<6&4294967295|E>>>26),E=b+(_^(v|~T))+w[15]+4264355552&4294967295,b=v+(E<<10&4294967295|E>>>22),E=T+(v^(b|~_))+w[6]+2734768916&4294967295,T=b+(E<<15&4294967295|E>>>17),E=_+(b^(T|~v))+w[13]+1309151649&4294967295,_=T+(E<<21&4294967295|E>>>11),E=v+(T^(_|~b))+w[4]+4149444226&4294967295,v=_+(E<<6&4294967295|E>>>26),E=b+(_^(v|~T))+w[11]+3174756917&4294967295,b=v+(E<<10&4294967295|E>>>22),E=T+(v^(b|~_))+w[2]+718787259&4294967295,T=b+(E<<15&4294967295|E>>>17),E=_+(b^(T|~v))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var _=v-this.blockSize,w=this.B,T=this.h,b=0;b<v;){if(T==0)for(;b<=_;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<v;)if(w[T++]=I.charCodeAt(b++),T==this.blockSize){i(this,w),T=0;break}}else for(;b<v;)if(w[T++]=I[b++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var _=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.u(I),I=Array(16),v=_=0;4>v;++v)for(var w=0;32>w;w+=8)I[_++]=this.g[v]>>>w&255;return I};function o(I,v){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=v(I)}function s(I,v){this.h=v;for(var _=[],w=!0,T=I.length-1;0<=T;T--){var b=I[T]|0;w&&b==v||(_[T]=b,w=!1)}this.g=_}var a={};function u(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return x(l(-I));for(var v=[],_=1,w=0;I>=_;w++)v[w]=I/_|0,_*=4294967296;return new s(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return x(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),w=h,T=0;T<I.length;T+=8){var b=Math.min(8,I.length-T),E=parseInt(I.substring(T,T+b),v);8>b?(b=l(Math.pow(v,b)),w=w.j(b).add(l(E))):(w=w.j(_),w=w.add(l(E)))}return w}var h=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-x(this).m();for(var I=0,v=1,_=0;_<this.g.length;_++){var w=this.i(_);I+=(0<=w?w:4294967296+w)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(R(this))return"-"+x(this).toString(I);for(var v=l(Math.pow(I,6)),_=this,w="";;){var T=he(_,v).g;_=F(_,T.j(v));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=T,D(_))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function R(I){return I.h==-1}n.l=function(I){return I=F(this,I),R(I)?-1:D(I)?0:1};function x(I){for(var v=I.g.length,_=[],w=0;w<v;w++)_[w]=~I.g[w];return new s(_,~I.h).add(g)}n.abs=function(){return R(this)?x(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],w=0,T=0;T<=v;T++){var b=w+(this.i(T)&65535)+(I.i(T)&65535),E=(b>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);w=E>>>16,b&=65535,E&=65535,_[T]=E<<16|b}return new s(_,_[_.length-1]&-2147483648?-1:0)};function F(I,v){return I.add(x(v))}n.j=function(I){if(D(this)||D(I))return h;if(R(this))return R(I)?x(this).j(x(I)):x(x(this).j(I));if(R(I))return x(this.j(x(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,_=[],w=0;w<2*v;w++)_[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<I.g.length;T++){var b=this.i(w)>>>16,E=this.i(w)&65535,ur=I.i(T)>>>16,Za=I.i(T)&65535;_[2*w+2*T]+=E*Za,W(_,2*w+2*T),_[2*w+2*T+1]+=b*Za,W(_,2*w+2*T+1),_[2*w+2*T+1]+=E*ur,W(_,2*w+2*T+1),_[2*w+2*T+2]+=b*ur,W(_,2*w+2*T+2)}for(w=0;w<v;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=v;w<2*v;w++)_[w]=0;return new s(_,0)};function W(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function G(I,v){this.g=I,this.h=v}function he(I,v){if(D(v))throw Error("division by zero");if(D(I))return new G(h,h);if(R(I))return v=he(x(I),v),new G(x(v.g),x(v.h));if(R(v))return v=he(I,x(v)),new G(x(v.g),v.h);if(30<I.g.length){if(R(I)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,w=v;0>=w.l(I);)_=Ie(_),w=Ie(w);var T=ue(_,1),b=ue(w,1);for(w=ue(w,2),_=ue(_,2);!D(w);){var E=b.add(w);0>=E.l(I)&&(T=T.add(_),b=E),w=ue(w,1),_=ue(_,1)}return v=F(I,T.j(v)),new G(T,v)}for(T=h;0<=I.l(v);){for(_=Math.max(1,Math.floor(I.m()/v.m())),w=Math.ceil(Math.log(_)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=l(_),E=b.j(v);R(E)||0<E.l(I);)_-=w,b=l(_),E=b.j(v);D(b)&&(b=g),T=T.add(b),I=F(I,E)}return new G(T,I)}n.A=function(I){return he(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],w=0;w<v;w++)_[w]=this.i(w)&I.i(w);return new s(_,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],w=0;w<v;w++)_[w]=this.i(w)|I.i(w);return new s(_,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],w=0;w<v;w++)_[w]=this.i(w)^I.i(w);return new s(_,this.h^I.h)};function Ie(I){for(var v=I.g.length+1,_=[],w=0;w<v;w++)_[w]=I.i(w)<<1|I.i(w-1)>>>31;return new s(_,I.h)}function ue(I,v){var _=v>>5;v%=32;for(var w=I.g.length-_,T=[],b=0;b<w;b++)T[b]=0<v?I.i(b+_)>>>v|I.i(b+_+1)<<32-v:I.i(b+_);return new s(T,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,x_=hN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,xr=hN.Integer=s}).apply(typeof fN<"u"?fN:typeof self<"u"?self:typeof window<"u"?window:{});var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pr={};var P_,W$,oa,k_,Uc,Jh,O_,F_,L_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,p){return c==Array.prototype||c==Object.prototype||(c[f]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xh=="object"&&Xh];for(var f=0;f<c.length;++f){var p=c[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,f){if(f)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in p))break e;p=p[C]}c=c[c.length-1],m=p[c],f=f(m),f!=m&&f!=null&&e(p,c,{configurable:!0,writable:!0,value:f})}}function o(c,f){c instanceof String&&(c+="");var p=0,m=!1,C={next:function(){if(!m&&p<c.length){var N=p++;return{value:f(N,c[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(f,p){return p})}});var s=s||{},a=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function l(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function d(c,f,p){return c.call.apply(c.bind,arguments)}function h(c,f,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(f,C)}}return function(){return c.apply(f,arguments)}}function g(c,f,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,g.apply(null,arguments)}function y(c,f){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function D(c,f){function p(){}p.prototype=f.prototype,c.aa=f.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,C,N){for(var L=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)L[Te-2]=arguments[Te];return f.prototype[C].apply(m,L)}}function R(c){let f=c.length;if(0<f){let p=Array(f);for(let m=0;m<f;m++)p[m]=c[m];return p}return[]}function x(c,f){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let C=c.length||0,N=m.length||0;c.length=C+N;for(let L=0;L<N;L++)c[C+L]=m[L]}else c.push(m)}}class F{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function W(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var Ie=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ue(c,f,p){for(let m in c)f.call(p,c[m],m,c)}function I(c,f){for(let p in c)f.call(void 0,c[p],p,c)}function v(c){let f={};for(let p in c)f[p]=c[p];return f}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,f){let p,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(p in m)c[p]=m[p];for(let N=0;N<_.length;N++)p=_[N],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function T(c){var f=1;c=c.split(":");let p=[];for(;0<f&&c.length;)p.push(c.shift()),f--;return c.length&&p.push(c.join(":")),p}function b(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Ng;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class ur{constructor(){this.h=this.g=null}add(f,p){let m=Za.get();m.set(f,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Za=new F(()=>new XP,c=>c.reset());class XP{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Xa,Ja=!1,Ng=new ur,HD=()=>{let c=a.Promise.resolve(void 0);Xa=()=>{c.then(JP)}};var JP=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(p){b(p)}var f=Za;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}Ja=!1};function qr(){this.s=this.s,this.C=this.C}qr.prototype.s=!1,qr.prototype.ma=function(){this.s||(this.s=!0,this.N())},qr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function gt(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}gt.prototype.h=function(){this.defaultPrevented=!0};var ek=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,f),a.removeEventListener("test",p,f)}catch{}return c})();function eu(c,f){if(gt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(Ie){e:{try{he(f.nodeName);var C=!0;break e}catch{}C=!1}C||(f=null)}}else p=="mouseover"?f=c.fromElement:p=="mouseout"&&(f=c.toElement);this.relatedTarget=f,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:tk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&eu.aa.h.call(this)}}D(eu,gt);var tk={2:"touch",3:"pen",4:"mouse"};eu.prototype.h=function(){eu.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var tu="closure_listenable_"+(1e6*Math.random()|0),nk=0;function rk(c,f,p,m,C){this.listener=c,this.proxy=null,this.src=f,this.type=p,this.capture=!!m,this.ha=C,this.key=++nk,this.da=this.fa=!1}function Fl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ll(c){this.src=c,this.g={},this.h=0}Ll.prototype.add=function(c,f,p,m,C){var N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);var L=xg(c,f,m,C);return-1<L?(f=c[L],p||(f.fa=!1)):(f=new rk(f,this.src,N,!!m,C),f.fa=p,c.push(f)),f};function Mg(c,f){var p=f.type;if(p in c.g){var m=c.g[p],C=Array.prototype.indexOf.call(m,f,void 0),N;(N=0<=C)&&Array.prototype.splice.call(m,C,1),N&&(Fl(f),c.g[p].length==0&&(delete c.g[p],c.h--))}}function xg(c,f,p,m){for(var C=0;C<c.length;++C){var N=c[C];if(!N.da&&N.listener==f&&N.capture==!!p&&N.ha==m)return C}return-1}var Pg="closure_lm_"+(1e6*Math.random()|0),kg={};function qD(c,f,p,m,C){if(m&&m.once)return GD(c,f,p,m,C);if(Array.isArray(f)){for(var N=0;N<f.length;N++)qD(c,f[N],p,m,C);return null}return p=Vg(p),c&&c[tu]?c.K(f,p,l(m)?!!m.capture:!!m,C):zD(c,f,p,!1,m,C)}function zD(c,f,p,m,C,N){if(!f)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Te=Fg(c);if(Te||(c[Pg]=Te=new Ll(c)),p=Te.add(f,p,m,L,N),p.proxy)return p;if(m=ik(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)ek||(C=L),C===void 0&&(C=!1),c.addEventListener(f.toString(),m,C);else if(c.attachEvent)c.attachEvent(KD(f.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ik(){function c(p){return f.call(c.src,c.listener,p)}let f=ok;return c}function GD(c,f,p,m,C){if(Array.isArray(f)){for(var N=0;N<f.length;N++)GD(c,f[N],p,m,C);return null}return p=Vg(p),c&&c[tu]?c.L(f,p,l(m)?!!m.capture:!!m,C):zD(c,f,p,!0,m,C)}function WD(c,f,p,m,C){if(Array.isArray(f))for(var N=0;N<f.length;N++)WD(c,f[N],p,m,C);else m=l(m)?!!m.capture:!!m,p=Vg(p),c&&c[tu]?(c=c.i,f=String(f).toString(),f in c.g&&(N=c.g[f],p=xg(N,p,m,C),-1<p&&(Fl(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete c.g[f],c.h--)))):c&&(c=Fg(c))&&(f=c.g[f.toString()],c=-1,f&&(c=xg(f,p,m,C)),(p=-1<c?f[c]:null)&&Og(p))}function Og(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[tu])Mg(f.i,c);else{var p=c.type,m=c.proxy;f.removeEventListener?f.removeEventListener(p,m,c.capture):f.detachEvent?f.detachEvent(KD(p),m):f.addListener&&f.removeListener&&f.removeListener(m),(p=Fg(f))?(Mg(p,c),p.h==0&&(p.src=null,f[Pg]=null)):Fl(c)}}}function KD(c){return c in kg?kg[c]:kg[c]="on"+c}function ok(c,f){if(c.da)c=!0;else{f=new eu(f,this);var p=c.listener,m=c.ha||c.src;c.fa&&Og(c),c=p.call(m,f)}return c}function Fg(c){return c=c[Pg],c instanceof Ll?c:null}var Lg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vg(c){return typeof c=="function"?c:(c[Lg]||(c[Lg]=function(f){return c.handleEvent(f)}),c[Lg])}function mt(){qr.call(this),this.i=new Ll(this),this.M=this,this.F=null}D(mt,qr),mt.prototype[tu]=!0,mt.prototype.removeEventListener=function(c,f,p,m){WD(this,c,f,p,m)};function Rt(c,f){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=f.type||f,typeof f=="string")f=new gt(f,c);else if(f instanceof gt)f.target=f.target||c;else{var C=f;f=new gt(m,c),w(f,C)}if(C=!0,p)for(var N=p.length-1;0<=N;N--){var L=f.g=p[N];C=Vl(L,m,!0,f)&&C}if(L=f.g=c,C=Vl(L,m,!0,f)&&C,C=Vl(L,m,!1,f)&&C,p)for(N=0;N<p.length;N++)L=f.g=p[N],C=Vl(L,m,!1,f)&&C}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var p=c.g[f],m=0;m<p.length;m++)Fl(p[m]);delete c.g[f],c.h--}}this.F=null},mt.prototype.K=function(c,f,p,m){return this.i.add(String(c),f,!1,p,m)},mt.prototype.L=function(c,f,p,m){return this.i.add(String(c),f,!0,p,m)};function Vl(c,f,p,m){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var C=!0,N=0;N<f.length;++N){var L=f[N];if(L&&!L.da&&L.capture==p){var Te=L.listener,dt=L.ha||L.src;L.fa&&Mg(c.i,L),C=Te.call(dt,m)!==!1&&C}}return C&&!m.defaultPrevented}function QD(c,f,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function YD(c){c.g=QD(()=>{c.g=null,c.i&&(c.i=!1,YD(c))},c.l);let f=c.h;c.h=null,c.m.apply(null,f)}class sk extends qr{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:YD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nu(c){qr.call(this),this.h=c,this.g={}}D(nu,qr);var ZD=[];function XD(c){ue(c.g,function(f,p){this.g.hasOwnProperty(p)&&Og(f)},c),c.g={}}nu.prototype.N=function(){nu.aa.N.call(this),XD(this)},nu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jg=a.JSON.stringify,ak=a.JSON.parse,uk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Bg(){}Bg.prototype.h=null;function JD(c){return c.h||(c.h=c.i())}function eT(){}var ru={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ug(){gt.call(this,"d")}D(Ug,gt);function $g(){gt.call(this,"c")}D($g,gt);var zi={},tT=null;function jl(){return tT=tT||new mt}zi.La="serverreachability";function nT(c){gt.call(this,zi.La,c)}D(nT,gt);function iu(c){let f=jl();Rt(f,new nT(f))}zi.STAT_EVENT="statevent";function rT(c,f){gt.call(this,zi.STAT_EVENT,c),this.stat=f}D(rT,gt);function Nt(c){let f=jl();Rt(f,new rT(f,c))}zi.Ma="timingevent";function iT(c,f){gt.call(this,zi.Ma,c),this.size=f}D(iT,gt);function ou(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function su(){this.g=!0}su.prototype.xa=function(){this.g=!1};function ck(c,f,p,m,C,N){c.info(function(){if(c.g)if(N)for(var L="",Te=N.split("&"),dt=0;dt<Te.length;dt++){var me=Te[dt].split("=");if(1<me.length){var yt=me[0];me=me[1];var vt=yt.split("_");L=2<=vt.length&&vt[1]=="type"?L+(yt+"="+me+"&"):L+(yt+"=redacted&")}}else L=null;else L=N;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+f+`
`+p+`
`+L})}function lk(c,f,p,m,C,N,L){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+f+`
`+p+`
`+N+" "+L})}function Zo(c,f,p,m){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+fk(c,p)+(m?" "+m:"")})}function dk(c,f){c.info(function(){return"TIMEOUT: "+f})}su.prototype.info=function(){};function fk(c,f){if(!c.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var N=C[0];if(N!="noop"&&N!="stop"&&N!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return jg(p)}catch{return f}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hg;function Ul(){}D(Ul,Bg),Ul.prototype.g=function(){return new XMLHttpRequest},Ul.prototype.i=function(){return{}},Hg=new Ul;function zr(c,f,p,m){this.j=c,this.i=f,this.l=p,this.R=m||1,this.U=new nu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sT}function sT(){this.i=null,this.g="",this.h=!1}var aT={},qg={};function zg(c,f,p){c.L=1,c.v=zl(cr(f)),c.m=p,c.P=!0,uT(c,null)}function uT(c,f){c.F=Date.now(),$l(c),c.A=cr(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),wT(p.i,"t",m),c.C=0,p=c.j.J,c.h=new sT,c.g=BT(c.j,p?f:null,!c.m),0<c.O&&(c.M=new sk(g(c.Y,c,c.g),c.O)),f=c.U,p=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(ZD[0]=C.toString()),C=ZD);for(var N=0;N<C.length;N++){var L=qD(p,C[N],m||f.handleEvent,!1,f.h||f);if(!L)break;f.g[L.key]=L}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),iu(),ck(c.i,c.u,c.A,c.l,c.R,c.m)}zr.prototype.ca=function(c){c=c.target;let f=this.M;f&&lr(c)==3?f.j():this.Y(c)},zr.prototype.Y=function(c){try{if(c==this.g)e:{let vt=lr(this.g);var f=this.g.Ba();let es=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||RT(this.g)))){this.J||vt!=4||f==7||(f==8||0>=es?iu(3):iu(2)),Gg(this);var p=this.g.Z();this.X=p;t:if(cT(this)){var m=RT(this.g);c="";var C=m.length,N=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gi(this),au(this);var L="";break t}this.h.i=new a.TextDecoder}for(f=0;f<C;f++)this.h.h=!0,c+=this.h.i.decode(m[f],{stream:!(N&&f==C-1)});m.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=p==200,lk(this.i,this.u,this.A,this.l,this.R,vt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,dt=this.g;if((Te=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Te)){var me=Te;break t}}me=null}if(p=me)Zo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wg(this,p);else{this.o=!1,this.s=3,Nt(12),Gi(this),au(this);break e}}if(this.P){p=!0;let ln;for(;!this.J&&this.C<L.length;)if(ln=hk(this,L),ln==qg){vt==4&&(this.s=4,Nt(14),p=!1),Zo(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==aT){this.s=4,Nt(15),Zo(this.i,this.l,L,"[Invalid Chunk]"),p=!1;break}else Zo(this.i,this.l,ln,null),Wg(this,ln);if(cT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||L.length!=0||this.h.h||(this.s=1,Nt(16),p=!1),this.o=this.o&&p,!p)Zo(this.i,this.l,L,"[Invalid Chunked Response]"),Gi(this),au(this);else if(0<L.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Jg(yt),yt.M=!0,Nt(11))}}else Zo(this.i,this.l,L,null),Wg(this,L);vt==4&&Gi(this),this.o&&!this.J&&(vt==4?FT(this.j,this):(this.o=!1,$l(this)))}else Nk(this.g),p==400&&0<L.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),Gi(this),au(this)}}}catch{}finally{}};function cT(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function hk(c,f){var p=c.C,m=f.indexOf(`
`,p);return m==-1?qg:(p=Number(f.substring(p,m)),isNaN(p)?aT:(m+=1,m+p>f.length?qg:(f=f.slice(m,m+p),c.C=m+p,f)))}zr.prototype.cancel=function(){this.J=!0,Gi(this)};function $l(c){c.S=Date.now()+c.I,lT(c,c.I)}function lT(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ou(g(c.ba,c),f)}function Gg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}zr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(dk(this.i,this.A),this.L!=2&&(iu(),Nt(17)),Gi(this),this.s=2,au(this)):lT(this,this.S-c)};function au(c){c.j.G==0||c.J||FT(c.j,c)}function Gi(c){Gg(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,XD(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Wg(c,f){try{var p=c.j;if(p.G!=0&&(p.g==c||Kg(p.h,c))){if(!c.K&&Kg(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(f)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Yl(p),Kl(p);else break e;Xg(p),Nt(18)}}else p.za=C[1],0<p.za-p.T&&37500>C[2]&&p.F&&p.v==0&&!p.C&&(p.C=ou(g(p.Za,p),6e3));if(1>=hT(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ki(p,11)}else if((c.K||p.g==c)&&Yl(p),!W(f))for(C=p.Da.g.parse(f),f=0;f<C.length;f++){let me=C[f];if(p.T=me[0],me=me[1],p.G==2)if(me[0]=="c"){p.K=me[1],p.ia=me[2];let yt=me[3];yt!=null&&(p.la=yt,p.j.info("VER="+p.la));let vt=me[4];vt!=null&&(p.Aa=vt,p.j.info("SVER="+p.Aa));let es=me[5];es!=null&&typeof es=="number"&&0<es&&(m=1.5*es,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let ln=c.g;if(ln){let Xl=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xl){var N=m.h;N.g||Xl.indexOf("spdy")==-1&&Xl.indexOf("quic")==-1&&Xl.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Qg(N,N.h),N.h=null))}if(m.D){let em=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;em&&(m.ya=em,Ae(m.I,m.D,em))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var L=c;if(m.qa=jT(m,m.J?m.ia:null,m.W),L.K){pT(m.h,L);var Te=L,dt=m.L;dt&&(Te.I=dt),Te.B&&(Gg(Te),$l(Te)),m.g=L}else kT(m);0<p.i.length&&Ql(p)}else me[0]!="stop"&&me[0]!="close"||Ki(p,7);else p.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Ki(p,7):Zg(p):me[0]!="noop"&&p.l&&p.l.ta(me),p.v=0)}}iu(4)}catch{}}var pk=class{constructor(c,f){this.g=c,this.map=f}};function dT(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fT(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function hT(c){return c.h?1:c.g?c.g.size:0}function Kg(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Qg(c,f){c.g?c.g.add(f):c.h=f}function pT(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}dT.prototype.cancel=function(){if(this.i=gT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function gT(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(let p of c.g.values())f=f.concat(p.D);return f}return R(c.i)}function gk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],p=c.length,m=0;m<p;m++)f.push(c[m]);return f}f=[],p=0;for(m in c)f[p++]=c[m];return f}function mk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var p=0;p<c;p++)f.push(p);return f}f=[],p=0;for(let m in c)f[p++]=m;return f}}}function mT(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var p=mk(c),m=gk(c),C=m.length,N=0;N<C;N++)f.call(void 0,m[N],p&&p[N],c)}var yT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yk(c,f){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),C=null;if(0<=m){var N=c[p].substring(0,m);C=c[p].substring(m+1)}else N=c[p];f(N,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Wi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Wi){this.h=c.h,Hl(this,c.j),this.o=c.o,this.g=c.g,ql(this,c.s),this.l=c.l;var f=c.i,p=new lu;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),vT(this,p),this.m=c.m}else c&&(f=String(c).match(yT))?(this.h=!1,Hl(this,f[1]||"",!0),this.o=uu(f[2]||""),this.g=uu(f[3]||"",!0),ql(this,f[4]),this.l=uu(f[5]||"",!0),vT(this,f[6]||"",!0),this.m=uu(f[7]||"")):(this.h=!1,this.i=new lu(null,this.h))}Wi.prototype.toString=function(){var c=[],f=this.j;f&&c.push(cu(f,ET,!0),":");var p=this.g;return(p||f=="file")&&(c.push("//"),(f=this.o)&&c.push(cu(f,ET,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(cu(p,p.charAt(0)=="/"?_k:Ek,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",cu(p,wk)),c.join("")};function cr(c){return new Wi(c)}function Hl(c,f,p){c.j=p?uu(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function ql(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function vT(c,f,p){f instanceof lu?(c.i=f,Dk(c.i,c.h)):(p||(f=cu(f,Ik)),c.i=new lu(f,c.h))}function Ae(c,f,p){c.i.set(f,p)}function zl(c){return Ae(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function uu(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function cu(c,f,p){return typeof c=="string"?(c=encodeURI(c).replace(f,vk),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function vk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ET=/[#\/\?@]/g,Ek=/[#\?:]/g,_k=/[#\?]/g,Ik=/[#\?@]/g,wk=/#/g;function lu(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Gr(c){c.g||(c.g=new Map,c.h=0,c.i&&yk(c.i,function(f,p){c.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}n=lu.prototype,n.add=function(c,f){Gr(this),this.i=null,c=Xo(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(f),this.h+=1,this};function _T(c,f){Gr(c),f=Xo(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function IT(c,f){return Gr(c),f=Xo(c,f),c.g.has(f)}n.forEach=function(c,f){Gr(this),this.g.forEach(function(p,m){p.forEach(function(C){c.call(f,C,m,this)},this)},this)},n.na=function(){Gr(this);let c=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let m=0;m<f.length;m++){let C=c[m];for(let N=0;N<C.length;N++)p.push(f[m])}return p},n.V=function(c){Gr(this);let f=[];if(typeof c=="string")IT(this,c)&&(f=f.concat(this.g.get(Xo(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)f=f.concat(c[p])}return f},n.set=function(c,f){return Gr(this),this.i=null,c=Xo(this,c),IT(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},n.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function wT(c,f,p){_T(c,f),0<p.length&&(c.i=null,c.g.set(Xo(c,f),R(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var m=f[p];let N=encodeURIComponent(String(m)),L=this.V(m);for(m=0;m<L.length;m++){var C=N;L[m]!==""&&(C+="="+encodeURIComponent(String(L[m]))),c.push(C)}}return this.i=c.join("&")};function Xo(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Dk(c,f){f&&!c.j&&(Gr(c),c.i=null,c.g.forEach(function(p,m){var C=m.toLowerCase();m!=C&&(_T(this,m),wT(this,C,p))},c)),c.j=f}function Tk(c,f){let p=new su;if(a.Image){let m=new Image;m.onload=y(Wr,p,"TestLoadImage: loaded",!0,f,m),m.onerror=y(Wr,p,"TestLoadImage: error",!1,f,m),m.onabort=y(Wr,p,"TestLoadImage: abort",!1,f,m),m.ontimeout=y(Wr,p,"TestLoadImage: timeout",!1,f,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else f(!1)}function Ck(c,f){let p=new su,m=new AbortController,C=setTimeout(()=>{m.abort(),Wr(p,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:m.signal}).then(N=>{clearTimeout(C),N.ok?Wr(p,"TestPingServer: ok",!0,f):Wr(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(C),Wr(p,"TestPingServer: error",!1,f)})}function Wr(c,f,p,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(p)}catch{}}function bk(){this.g=new uk}function Sk(c,f,p){let m=p||"";try{mT(c,function(C,N){let L=C;l(C)&&(L=jg(C)),f.push(m+N+"="+encodeURIComponent(L))})}catch(C){throw f.push(m+"type="+encodeURIComponent("_badmap")),C}}function du(c){this.l=c.Ub||null,this.j=c.eb||!1}D(du,Bg),du.prototype.g=function(){return new Gl(this.l,this.j)},du.prototype.i=(function(c){return function(){return c}})({});function Gl(c,f){mt.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Gl,mt),n=Gl.prototype,n.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,hu(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fu(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,hu(this)),this.g&&(this.readyState=3,hu(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;DT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function DT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?fu(this):hu(this),this.readyState==3&&DT(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,fu(this))},n.Qa=function(c){this.g&&(this.response=c,fu(this))},n.ga=function(){this.g&&fu(this)};function fu(c){c.readyState=4,c.l=null,c.j=null,c.v=null,hu(c)}n.setRequestHeader=function(c,f){this.u.append(c,f)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=f.next();return c.join(`\r
`)};function hu(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function TT(c){let f="";return ue(c,function(p,m){f+=m,f+=":",f+=p,f+=`\r
`}),f}function Yg(c,f,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=TT(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Ae(c,f,p))}function Ve(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ve,mt);var Ak=/^https?$/i,Rk=["POST","PUT"];n=Ve.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,f,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hg.g(),this.v=this.o?JD(this.o):JD(Hg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(N){CT(this,N);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)p.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())p.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Rk,f,void 0))||m||C||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,L]of p)this.g.setRequestHeader(N,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{AT(this),this.u=!0,this.g.send(c),this.u=!1}catch(N){CT(this,N)}};function CT(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,bT(c),Wl(c)}function bT(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rt(this,"complete"),Rt(this,"abort"),Wl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wl(this,!0)),Ve.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ST(this):this.bb())},n.bb=function(){ST(this)};function ST(c){if(c.h&&typeof s<"u"&&(!c.v[1]||lr(c)!=4||c.Z()!=2)){if(c.u&&lr(c)==4)QD(c.Ea,0,c);else if(Rt(c,"readystatechange"),lr(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var m;if(m=L===0){var C=String(c.D).match(yT)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!Ak.test(C?C.toLowerCase():"")}p=m}if(p)Rt(c,"complete"),Rt(c,"success");else{c.m=6;try{var N=2<lr(c)?c.g.statusText:""}catch{N=""}c.l=N+" ["+c.Z()+"]",bT(c)}}finally{Wl(c)}}}}function Wl(c,f){if(c.g){AT(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||Rt(c,"ready");try{p.onreadystatechange=m}catch{}}}function AT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function lr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),ak(f)}};function RT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Nk(c){let f={};c=(c.g&&2<=lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(W(c[m]))continue;var p=T(c[m]);let C=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=f[C]||[];f[C]=N,N.push(p)}I(f,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pu(c,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||f}function NT(c){this.Aa=0,this.i=[],this.j=new su,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pu("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pu("baseRetryDelayMs",5e3,c),this.cb=pu("retryDelaySeedMs",1e4,c),this.Wa=pu("forwardChannelMaxRetries",2,c),this.wa=pu("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new dT(c&&c.concurrentRequestLimit),this.Da=new bk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=NT.prototype,n.la=8,n.G=1,n.connect=function(c,f,p,m){Nt(0),this.W=c,this.H=f||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=jT(this,null,this.W),Ql(this)};function Zg(c){if(MT(c),c.G==3){var f=c.U++,p=cr(c.I);if(Ae(p,"SID",c.K),Ae(p,"RID",f),Ae(p,"TYPE","terminate"),gu(c,p),f=new zr(c,c.j,f),f.L=2,f.v=zl(cr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=f.v,p=!0),p||(f.g=BT(f.j,null),f.g.ea(f.v)),f.F=Date.now(),$l(f)}VT(c)}function Kl(c){c.g&&(Jg(c),c.g.cancel(),c.g=null)}function MT(c){Kl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Yl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ql(c){if(!fT(c.h)&&!c.s){c.s=!0;var f=c.Ga;Xa||HD(),Ja||(Xa(),Ja=!0),Ng.add(f,c),c.B=0}}function Mk(c,f){return hT(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ou(g(c.Ga,c,f),LT(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new zr(this,this.j,c),N=this.o;if(this.S&&(N?(N=v(N),w(N,this.S)):N=this.S),this.m!==null||this.O||(C.H=N,N=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(f+=m,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=PT(this,C,f),p=cr(this.I),Ae(p,"RID",c),Ae(p,"CVER",22),this.D&&Ae(p,"X-HTTP-Session-Id",this.D),gu(this,p),N&&(this.O?f="headers="+encodeURIComponent(String(TT(N)))+"&"+f:this.m&&Yg(p,this.m,N)),Qg(this.h,C),this.Ua&&Ae(p,"TYPE","init"),this.P?(Ae(p,"$req",f),Ae(p,"SID","null"),C.T=!0,zg(C,p,null)):zg(C,p,f),this.G=2}}else this.G==3&&(c?xT(this,c):this.i.length==0||fT(this.h)||xT(this))};function xT(c,f){var p;f?p=f.l:p=c.U++;let m=cr(c.I);Ae(m,"SID",c.K),Ae(m,"RID",p),Ae(m,"AID",c.T),gu(c,m),c.m&&c.o&&Yg(m,c.m,c.o),p=new zr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),f&&(c.i=f.D.concat(c.i)),f=PT(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Qg(c.h,p),zg(p,m,f)}function gu(c,f){c.H&&ue(c.H,function(p,m){Ae(f,m,p)}),c.l&&mT({},function(p,m){Ae(f,m,p)})}function PT(c,f,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let N=-1;for(;;){let L=["count="+p];N==-1?0<p?(N=C[0].g,L.push("ofs="+N)):N=0:L.push("ofs="+N);let Te=!0;for(let dt=0;dt<p;dt++){let me=C[dt].g,yt=C[dt].map;if(me-=N,0>me)N=Math.max(0,C[dt].g-100),Te=!1;else try{Sk(yt,L,"req"+me+"_")}catch{m&&m(yt)}}if(Te){m=L.join("&");break e}}}return c=c.i.splice(0,p),f.D=c,m}function kT(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;Xa||HD(),Ja||(Xa(),Ja=!0),Ng.add(f,c),c.v=0}}function Xg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ou(g(c.Fa,c),LT(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,OT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ou(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),Kl(this),OT(this))};function Jg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function OT(c){c.g=new zr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=cr(c.qa);Ae(f,"RID","rpc"),Ae(f,"SID",c.K),Ae(f,"AID",c.T),Ae(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ae(f,"TO",c.ja),Ae(f,"TYPE","xmlhttp"),gu(c,f),c.m&&c.o&&Yg(f,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=zl(cr(f)),p.m=null,p.P=!0,uT(p,c)}n.Za=function(){this.C!=null&&(this.C=null,Kl(this),Xg(this),Nt(19))};function Yl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function FT(c,f){var p=null;if(c.g==f){Yl(c),Jg(c),c.g=null;var m=2}else if(Kg(c.h,f))p=f.D,pT(c.h,f),m=1;else return;if(c.G!=0){if(f.o)if(m==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var C=c.B;m=jl(),Rt(m,new iT(m,p)),Ql(c)}else kT(c);else if(C=f.s,C==3||C==0&&0<f.X||!(m==1&&Mk(c,f)||m==2&&Xg(c)))switch(p&&0<p.length&&(f=c.h,f.i=f.i.concat(p)),C){case 1:Ki(c,5);break;case 4:Ki(c,10);break;case 3:Ki(c,6);break;default:Ki(c,2)}}}function LT(c,f){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*f}function Ki(c,f){if(c.j.info("Error code "+f),f==2){var p=g(c.fb,c),m=c.Xa;let C=!m;m=new Wi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hl(m,"https"),zl(m),C?Tk(m.toString(),p):Ck(m.toString(),p)}else Nt(2);c.G=0,c.l&&c.l.sa(f),VT(c),MT(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function VT(c){if(c.G=0,c.ka=[],c.l){let f=gT(c.h);(f.length!=0||c.i.length!=0)&&(x(c.ka,f),x(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function jT(c,f,p){var m=p instanceof Wi?cr(p):new Wi(p);if(m.g!="")f&&(m.g=f+"."+m.g),ql(m,m.s);else{var C=a.location;m=C.protocol,f=f?f+"."+C.hostname:C.hostname,C=+C.port;var N=new Wi(null);m&&Hl(N,m),f&&(N.g=f),C&&ql(N,C),p&&(N.l=p),m=N}return p=c.D,f=c.ya,p&&f&&Ae(m,p,f),Ae(m,"VER",c.la),gu(c,m),m}function BT(c,f,p){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Ve(new du({eb:p})):new Ve(c.pa),f.Ha(c.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function UT(){}n=UT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Zl(){}Zl.prototype.g=function(c,f){return new zt(c,f)};function zt(c,f){mt.call(this),this.g=new NT(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!W(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!W(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Jo(this)}D(zt,mt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Zg(this.g)},zt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=jg(c),c=p);f.i.push(new pk(f.Ya++,c)),f.G==3&&Ql(f)},zt.prototype.N=function(){this.g.l=null,delete this.j,Zg(this.g),delete this.g,zt.aa.N.call(this)};function $T(c){Ug.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(let p in f){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}D($T,Ug);function HT(){$g.call(this),this.status=1}D(HT,$g);function Jo(c){this.g=c}D(Jo,UT),Jo.prototype.ua=function(){Rt(this.g,"a")},Jo.prototype.ta=function(c){Rt(this.g,new $T(c))},Jo.prototype.sa=function(c){Rt(this.g,new HT)},Jo.prototype.ra=function(){Rt(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,L_=Pr.createWebChannelTransport=function(){return new Zl},F_=Pr.getStatEventTarget=function(){return jl()},O_=Pr.Event=zi,Jh=Pr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,Uc=Pr.ErrorCode=Bl,oT.COMPLETE="complete",k_=Pr.EventType=oT,eT.EventType=ru,ru.OPEN="a",ru.CLOSE="b",ru.ERROR="c",ru.MESSAGE="d",mt.prototype.listen=mt.prototype.K,oa=Pr.WebChannel=eT,W$=Pr.FetchXmlHttpFactory=du,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,P_=Pr.XhrIo=Ve}).apply(typeof Xh<"u"?Xh:typeof self<"u"?self:typeof window<"u"?window:{});var pN="@firebase/firestore",gN="4.8.0";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var za="11.10.0";var Ri=new nd("@firebase/firestore");function fa(){return Ri.logLevel}function K$(n){Ri.setLogLevel(n)}function O(n,...e){if(Ri.logLevel<=xn.DEBUG){let t=e.map(Yw);Ri.debug(`Firestore (${za}): ${n}`,...t)}}function ze(n,...e){if(Ri.logLevel<=xn.ERROR){let t=e.map(Yw);Ri.error(`Firestore (${za}): ${n}`,...t)}}function un(n,...e){if(Ri.logLevel<=xn.WARN){let t=e.map(Yw);Ri.warn(`Firestore (${za}): ${n}`,...t)}}function Yw(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function $(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,MM(n,r,t)}function MM(n,e,t){let r=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ze(r),new Error(r)}function q(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||MM(e,i,r)}function Rie(n,e){n||$(57014,e)}function j(n,e){return n}var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends XT{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ot=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var hp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},z_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Je.UNAUTHENTICATED))}shutdown(){}},G_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},W_=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){q(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ot;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ot,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>M(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ot)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(q(typeof r.accessToken=="string",31837,{l:r}),new hp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return q(e===null||typeof e=="string",2055,{h:e}),new Je(e)}},K_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Q_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new K_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},pp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Y_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eC(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){q(this.o===void 0,3512);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(q(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new pp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Q$(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Zw(){return new TextEncoder}var nl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Q$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function X(n,e){return n<e?-1:n>e?1:0}function Z_(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return X(r,i);{let o=Zw(),s=Y$(o.encode(mN(n,t)),o.encode(mN(e,t)));return s!==0?s:X(r,i)}}t+=r>65535?2:1}return X(n.length,e.length)}function mN(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Y$(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return X(n[t],e[t]);return X(n.length,e.length)}function wa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function xM(n){return n+"\0"}var yN="__name__",gp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&$(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&$(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return X(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Z_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xr.fromString(e.substring(4,e.length-2))}},pe=class n extends gp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Z$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class n extends gp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Z$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yN}static keyField(){return new n([yN])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var V=class n{constructor(e){this.path=e}static fromPath(e){return new n(pe.fromString(e))}static fromName(e){return new n(pe.fromString(e).popFirst(5))}static empty(){return new n(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new pe(e.slice()))}};function Xw(n,e,t){if(!t)throw new k(A.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function X$(n,e,t,r){if(e===!0&&r===!0)throw new k(A.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vN(n){if(!V.isDocumentKey(n))throw new k(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EN(n){if(V.isDocumentKey(n))throw new k(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function PM(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function gg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$(12329,{type:typeof n})}function ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=gg(n);throw new k(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kM(n,e){if(e<=0)throw new k(A.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function et(n,e){let t={typeString:n};return e&&(t.value=e),t}function Sl(n,e){if(!PM(n))throw new k(A.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new k(A.INVALID_ARGUMENT,t);return!0}var _N=-62135596800,IN=1e6,ke=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*IN);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_N)throw new k(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IN}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-_N;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:et("string",ke._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};var K=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ke(0,0))}static max(){return new n(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Da=-1,Ta=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function X_(n){return n.fields.find(e=>e.kind===2)}function Ro(n){return n.fields.filter(e=>e.kind!==2)}Ta.UNKNOWN_ID=-1;var va=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var rl=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,cn.min())}};function OM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new ke(t+1,0):new ke(t,r));return new cn(i,V.empty(),e)}function FM(n){return new cn(n.readTime,n.key,Da)}var cn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(K.min(),V.empty(),Da)}static max(){return new n(K.max(),V.empty(),Da)}};function Jw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=V.comparator(n.documentKey,e.documentKey),t!==0?t:X(n.largestBatchId,e.largestBatchId))}var LM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",mp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Bi(n){return M(this,null,function*(){if(n.code!==A.FAILED_PRECONDITION||n.message!==LM)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Zt="SimpleDb",yp=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Lo(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ot,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Lo(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=eD(r.target.error);this.S.reject(new Lo(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(O(Zt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new eI(t)}},Ni=class n{static delete(e){return O(Zt,"Removing database:",e),Mo(nm().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!ed())return!1;if(n.F())return!0;let e=mu(),t=n.M(e),r=0<t&&t<10,i=VM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(mu())===12.2&&ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return M(this,null,function*(){return this.db||(O(Zt,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Lo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(A.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Lo(e,s))},i.onupgradeneeded=o=>{O(Zt,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{O(Zt,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(un('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,i){return M(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=yp.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.D,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O(Zt,"Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function VM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var J_=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return Mo(this.$.delete())}},Lo=class extends k{constructor(e,t){super(A.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ui(n){return n.name==="IndexedDbTransactionError"}var eI=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O(Zt,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(O(Zt,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mo(r)}add(e){return O(Zt,"ADD",this.store.name,e,e),Mo(this.store.add(e))}get(e){return Mo(this.store.get(e)).next(t=>(t===void 0&&(t=null),O(Zt,"GET",this.store.name,e,t),t))}delete(e){return O(Zt,"DELETE",this.store.name,e),Mo(this.store.delete(e))}count(){return O(Zt,"COUNT",this.store.name),Mo(this.store.count())}j(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,u)=>{s.push(u)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,t){O(Zt,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Z=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}ee(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=eD(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new J_(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let d=l.catch(h=>(u.done(),S.reject(h)));r.push(d)}u.isDone?i():u.W===null?a.continue():a.continue(u.W)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Mo(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=eD(r.target.error);t(i)}})}var wN=!1;function eD(n){let e=Ni.M(mu());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wN||(wN=!0,setTimeout(()=>{throw r},0)),r}}return n}var Kc="IndexBackfiller",tI=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){O(Kc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>M(this,null,function*(){this.task=null;try{let t=yield this.te.re();O(Kc,`Documents written: ${t}`)}catch(t){Ui(t)?O(Kc,"Ignoring IndexedDB error during index backfill: ",t):yield Bi(t)}yield this.ne(6e4)}))}},nI=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return M(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O(Kc,`Processing collection: ${s}`),this.se(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(a=>(O(Kc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}oe(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=FM(o);Jw(s,r)>0&&(r=s)}),new cn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Xt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),bi=-1;function Al(n){return n==null}function il(n){return n===0&&1/n==-1/0}function jM(n){return typeof n=="number"&&Number.isInteger(n)&&!il(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var vp="";function At(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DN(e)),e=J$(n.get(t),e);return DN(e)}function J$(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case vp:t+="";break;default:t+=o}}return t}function DN(n){return n+vp+""}function tr(n){let e=n.length;if(q(e>=2,64408,{path:n}),e===2)return q(n.charAt(0)===vp&&n.charAt(1)==="",56145,{path:n}),pe.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(vp,o);switch((s<0||s>t)&&$(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:$(61167,{path:n})}o=s+2}return new pe(r)}var No="remoteDocuments",Rl="owner",sa="owner",ol="mutationQueues",eH="userId",bn="mutations",TN="batchId",Oo="userMutationsIndex",CN=["userId","batchId"];function op(n,e){return[n,At(e)]}function BM(n,e,t){return[n,At(e),t]}var tH={},Ca="documentMutations",Ep="remoteDocumentsV14",nH=["prefixPath","collectionGroup","readTime","documentId"],sp="documentKeyIndex",rH=["prefixPath","collectionGroup","documentId"],UM="collectionGroupIndex",iH=["collectionGroup","readTime","prefixPath","documentId"],sl="remoteDocumentGlobal",rI="remoteDocumentGlobalKey",ba="targets",$M="queryTargetsIndex",oH=["canonicalId","targetId"],Sa="targetDocuments",sH=["targetId","path"],tD="documentTargetsIndex",aH=["path","targetId"],_p="targetGlobalKey",Vo="targetGlobal",al="collectionParents",uH=["collectionId","parent"],Aa="clientMetadata",cH="clientId",mg="bundles",lH="bundleId",yg="namedQueries",dH="name",nD="indexConfiguration",fH="indexId",iI="collectionGroupIndex",hH="collectionGroup",Qc="indexState",pH=["indexId","uid"],HM="sequenceNumberIndex",gH=["uid","sequenceNumber"],Yc="indexEntries",mH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qM="documentKeyIndex",yH=["indexId","uid","orderedDocumentKey"],vg="documentOverlays",vH=["userId","collectionPath","documentId"],oI="collectionPathOverlayIndex",EH=["userId","collectionPath","largestBatchId"],zM="collectionGroupOverlayIndex",_H=["userId","collectionGroup","largestBatchId"],rD="globals",IH="name",GM=[ol,bn,Ca,No,ba,Rl,Vo,Sa,Aa,sl,al,mg,yg],wH=[...GM,vg],WM=[ol,bn,Ca,Ep,ba,Rl,Vo,Sa,Aa,sl,al,mg,yg,vg],KM=WM,iD=[...KM,nD,Qc,Yc],DH=iD,QM=[...iD,rD],TH=QM;var ul=class extends mp{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function at(n,e){let t=j(n);return Ni.N(t.ce,e)}function bN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $i(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||rr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ya(this.root,e,this.comparator,!0)}},ya=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}};rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var De=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ip(this.data.getIterator())}getIteratorFrom(e){return new Ip(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ip=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function aa(n){return n.hasNext()?n.getNext():void 0}var Jt=class n{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new n([])}unionWith(e){let t=new De(st.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var wp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Mie(){return typeof atob<"u"}var We=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new wp("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};We.EMPTY_BYTE_STRING=new We("");var CH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(n){if(q(!!n,39018),typeof n=="string"){let e=0,t=CH.exec(n);if(q(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(n.seconds),nanos:Pe(n.nanos)}}function Pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vr(n){return typeof n=="string"?We.fromBase64String(n):We.fromUint8Array(n)}var ZM="server_timestamp",XM="__type__",JM="__previous_value__",ex="__local_write_time__";function Eg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[XM])===null||t===void 0?void 0:t.stringValue)===ZM}function _g(n){let e=n.mapValue.fields[JM];return Eg(e)?_g(e):e}function cl(n){let e=Lr(n.mapValue.fields[ex].timestampValue);return new ke(e.seconds,e.nanos)}var sI=class{constructor(e,t,r,i,o,s,a,u,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=d}},Dp="(default)",Ra=class n{constructor(e,t){this.projectId=e,this.database=t||Dp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Dp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var oD="__type__",tx="__max__",Ti={mapValue:{fields:{__type__:{stringValue:tx}}}},sD="__vector__",Na="value",ap={nullValue:"NULL_VALUE"};function Mi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Eg(n)?4:nx(n)?9007199254740991:Ig(n)?10:11:$(28295,{value:n})}function sr(n,e){if(n===e)return!0;let t=Mi(n);if(t!==Mi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cl(n).isEqual(cl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Lr(i.timestampValue),a=Lr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Vr(i.bytesValue).isEqual(Vr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Pe(i.geoPointValue.latitude)===Pe(o.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Pe(i.integerValue)===Pe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Pe(i.doubleValue),a=Pe(o.doubleValue);return s===a?il(s)===il(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return wa(n.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(bN(s)!==bN(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!sr(s[u],a[u])))return!1;return!0})(n,e);default:return $(52216,{left:n})}}function ll(n,e){return(n.values||[]).find(t=>sr(t,e))!==void 0}function xi(n,e){if(n===e)return 0;let t=Mi(n),r=Mi(e);if(t!==r)return X(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return X(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Pe(o.integerValue||o.doubleValue),u=Pe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return SN(n.timestampValue,e.timestampValue);case 4:return SN(cl(n),cl(e));case 5:return Z_(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Vr(o),u=Vr(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=X(a[l],u[l]);if(d!==0)return d}return X(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=X(Pe(o.latitude),Pe(s.latitude));return a!==0?a:X(Pe(o.longitude),Pe(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return AN(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,d;let h=o.fields||{},g=s.fields||{},y=(a=h[Na])===null||a===void 0?void 0:a.arrayValue,D=(u=g[Na])===null||u===void 0?void 0:u.arrayValue,R=X(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=D?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:AN(y,D)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Ti.mapValue&&s===Ti.mapValue)return 0;if(o===Ti.mapValue)return 1;if(s===Ti.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){let g=Z_(u[h],d[h]);if(g!==0)return g;let y=xi(a[u[h]],l[d[h]]);if(y!==0)return y}return X(u.length,d.length)})(n.mapValue,e.mapValue);default:throw $(23264,{le:t})}}function SN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return X(n,e);let t=Lr(n),r=Lr(e),i=X(t.seconds,r.seconds);return i!==0?i:X(t.nanos,r.nanos)}function AN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=xi(t[i],r[i]);if(o)return o}return X(t.length,r.length)}function Ma(n){return aI(n)}function aI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Lr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Vr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return V.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=aI(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${aI(t.fields[s])}`;return i+"}"})(n.mapValue):$(61005,{value:n})}function up(n){switch(Mi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=_g(n);return e?16+up(e):16;case 5:return 2*n.stringValue.length;case 6:return Vr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+up(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return $i(r.fields,(o,s)=>{i+=o.length+up(s)}),i})(n.mapValue);default:throw $(13486,{value:n})}}function jo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uI(n){return!!n&&"integerValue"in n}function dl(n){return!!n&&"arrayValue"in n}function RN(n){return!!n&&"nullValue"in n}function NN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cp(n){return!!n&&"mapValue"in n}function Ig(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[oD])===null||t===void 0?void 0:t.stringValue)===sD}function Zc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return $i(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tx}var rx={mapValue:{fields:{[oD]:{stringValue:sD},[Na]:{arrayValue:{}}}}};function bH(n){return"nullValue"in n?ap:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?jo(Ra.empty(),V.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ig(n)?rx:{mapValue:{}}:$(35942,{value:n})}function SH(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?jo(Ra.empty(),V.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?rx:"mapValue"in n?Ig(n)?{mapValue:{}}:Ti:$(61959,{value:n})}function MN(n,e){let t=xi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xN(n,e){let t=xi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var St=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!cp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zc(t)}setAll(e){let t=st.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Zc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());cp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];cp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$i(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Zc(this.value))}};function ix(n){let e=[];return $i(n.fields,(t,r)=>{let i=new st([t]);if(cp(r)){let o=ix(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}var tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,K.min(),K.min(),K.min(),St.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,K.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,K.min(),K.min(),St.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,K.min(),K.min(),St.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ar=class{constructor(e,t){this.position=e,this.inclusive=t}};function PN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=V.comparator(V.fromName(s.referenceValue),t.key):r=xi(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function kN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sr(n.position[t],e.position[t]))return!1;return!0}var Bo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function AH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Tp=class{},fe=class n extends Tp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new dI(e,t,r):t==="array-contains"?new pI(e,r):t==="in"?new Cp(e,r):t==="not-in"?new gI(e,r):t==="array-contains-any"?new mI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fI(e,r):new hI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xi(t,this.value)):t!==null&&Mi(this.value)===Mi(t)&&this.matchesComparison(xi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},we=class n extends Tp{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return xa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function xa(n){return n.op==="and"}function cI(n){return n.op==="or"}function aD(n){return ox(n)&&xa(n)}function ox(n){for(let e of n.filters)if(e instanceof we)return!1;return!0}function lI(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+Ma(n.value);if(aD(n))return n.filters.map(e=>lI(e)).join(",");{let e=n.filters.map(t=>lI(t)).join(",");return`${n.op}(${e})`}}function sx(n,e){return n instanceof fe?(function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&sr(r.value,i.value)})(n,e):n instanceof we?(function(r,i){return i instanceof we&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&sx(s,i.filters[a]),!0):!1})(n,e):void $(19439)}function ax(n,e){let t=n.filters.concat(e);return we.create(t,n.op)}function ux(n){return n instanceof fe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ma(t.value)}`})(n):n instanceof we?(function(t){return t.op.toString()+" {"+t.getFilters().map(ux).join(" ,")+"}"})(n):"Filter"}var dI=class extends fe{constructor(e,t,r){super(e,t,r),this.key=V.fromName(r.referenceValue)}matches(e){let t=V.comparator(e.key,this.key);return this.matchesComparison(t)}},fI=class extends fe{constructor(e,t){super(e,"in",t),this.keys=cx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},hI=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=cx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function cx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>V.fromName(r.referenceValue))}var pI=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return dl(t)&&ll(t.arrayValue,this.value)}},Cp=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ll(this.value.arrayValue,t)}},gI=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ll(this.value.arrayValue,t)}},mI=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!dl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ll(this.value.arrayValue,r))}};var yI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function vI(n,e=null,t=[],r=[],i=null,o=null,s=null){return new yI(n,e,t,r,i,o,s)}function Uo(n){let e=j(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>lI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Al(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ma(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ma(r)).join(",")),e.Pe=t}return e.Pe}function Nl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kN(n.startAt,e.startAt)&&kN(n.endAt,e.endAt)}function bp(n){return V.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Sp(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function ON(n,e,t){let r=ap,i=!0;for(let o of Sp(n,e)){let s=ap,a=!0;switch(o.op){case"<":case"<=":s=bH(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ap}MN({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];MN({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function FN(n,e,t){let r=Ti,i=!0;for(let o of Sp(n,e)){let s=Ti,a=!0;switch(o.op){case">=":case">":s=SH(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ti}xN({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];xN({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Rn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function lx(n,e,t,r,i,o,s,a){return new Rn(n,e,t,r,i,o,s,a)}function Ga(n){return new Rn(n)}function LN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uD(n){return n.collectionGroup!==null}function Ea(n){let e=j(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new De(st.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Bo(o,r))}),t.has(st.keyField().canonicalString())||e.Te.push(new Bo(st.keyField(),r))}return e.Te}function Lt(n){let e=j(n);return e.Ie||(e.Ie=RH(e,Ea(n))),e.Ie}function RH(n,e){if(n.limitType==="F")return vI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Bo(i.field,o)});let t=n.endAt?new ar(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ar(n.startAt.position,n.startAt.inclusive):null;return vI(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function EI(n,e){let t=n.filters.concat([e]);return new Rn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ap(n,e,t){return new Rn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ml(n,e){return Nl(Lt(n),Lt(e))&&n.limitType===e.limitType}function dx(n){return`${Uo(Lt(n))}|lt:${n.limitType}`}function ha(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ux(i)).join(", ")}]`),Al(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ma(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ma(i)).join(",")),`Target(${r})`})(Lt(n))}; limitType=${n.limitType})`}function xl(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):V.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Ea(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=PN(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Ea(r),i)||r.endAt&&!(function(s,a,u){let l=PN(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Ea(r),i))})(n,e)}function fx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hx(n){return(e,t)=>{let r=!1;for(let i of Ea(n)){let o=NH(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function NH(n,e,t){let r=n.field.isKeyField()?V.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?xi(u,l):$(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:n.dir})}}var Nn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$i(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return YM(this.inner)}size(){return this.innerSize}};var MH=new Ne(V.comparator);function qt(){return MH}var px=new Ne(V.comparator);function Gc(...n){let e=px;for(let t of n)e=e.insert(t.key,t);return e}function gx(n){let e=px;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nr(){return Xc()}function mx(){return Xc()}function Xc(){return new Nn(n=>n.toString(),(n,e)=>n.isEqual(e))}var xH=new Ne(V.comparator),PH=new De(V.comparator);function ae(...n){let e=PH;for(let t of n)e=e.add(t);return e}var kH=new De(X);function cD(){return kH}function lD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:il(e)?"-0":e}}function yx(n){return{integerValue:""+n}}function vx(n,e){return jM(e)?yx(e):lD(n,e)}var Pa=class{constructor(){this._=void 0}};function OH(n,e,t){return n instanceof Pi?(function(i,o){let s={fields:{[XM]:{stringValue:ZM},[ex]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Eg(o)&&(o=_g(o)),o&&(s.fields[JM]=o),{mapValue:s}})(t,e):n instanceof jr?_x(n,e):n instanceof Br?Ix(n,e):(function(i,o){let s=Ex(i,o),a=VN(s)+VN(i.Ee);return uI(s)&&uI(i.Ee)?yx(a):lD(i.serializer,a)})(n,e)}function FH(n,e,t){return n instanceof jr?_x(n,e):n instanceof Br?Ix(n,e):t}function Ex(n,e){return n instanceof ki?(function(r){return uI(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Pi=class extends Pa{},jr=class extends Pa{constructor(e){super(),this.elements=e}};function _x(n,e){let t=wx(e);for(let r of n.elements)t.some(i=>sr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Br=class extends Pa{constructor(e){super(),this.elements=e}};function Ix(n,e){let t=wx(e);for(let r of n.elements)t=t.filter(i=>!sr(i,r));return{arrayValue:{values:t}}}var ki=class extends Pa{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function VN(n){return Pe(n.integerValue||n.doubleValue)}function wx(n){return dl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var $o=class{constructor(e,t){this.field=e,this.transform=t}};function LH(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof jr&&i instanceof jr||r instanceof Br&&i instanceof Br?wa(r.elements,i.elements,sr):r instanceof ki&&i instanceof ki?sr(r.Ee,i.Ee):r instanceof Pi&&i instanceof Pi})(n.transform,e.transform)}var _I=class{constructor(e,t){this.version=e,this.transformResults=t}},Ue=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function lp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ka=class{};function Dx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fi(n.key,Ue.none()):new Oi(n.key,n.data,Ue.none());{let t=n.data,r=St.empty(),i=new De(st.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Mn(n.key,r,new Jt(i.toArray()),Ue.none())}}function VH(n,e,t){n instanceof Oi?(function(i,o,s){let a=i.value.clone(),u=BN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Mn?(function(i,o,s){if(!lp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=BN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Tx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Jc(n,e,t,r){return n instanceof Oi?(function(o,s,a,u){if(!lp(o.precondition,s))return a;let l=o.value.clone(),d=UN(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Mn?(function(o,s,a,u){if(!lp(o.precondition,s))return a;let l=UN(o.fieldTransforms,u,s),d=s.data;return d.setAll(Tx(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))})(n,e,t,r):(function(o,s,a){return lp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function jH(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Ex(r.transform,i||null);o!=null&&(t===null&&(t=St.empty()),t.set(r.field,o))}return t||null}function jN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wa(r,i,(o,s)=>LH(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Oi=class extends ka{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Mn=class extends ka{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Tx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function BN(n,e,t){let r=new Map;q(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,FH(s,a,t[i]))}return r}function UN(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,OH(o,s,e))}return r}var Fi=class extends ka{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fl=class extends ka{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var hl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&VH(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Jc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Jc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=mx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=Dx(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ae())}isEqual(e){return this.batchId===e.batchId&&wa(this.mutations,e.mutations,(t,r)=>jN(t,r))&&wa(this.baseMutations,e.baseMutations,(t,r)=>jN(t,r))}},II=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){q(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return xH})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var pl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var wI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ze,ge;function Cx(n){switch(n){case A.OK:return $(64938);case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return $(15467,{code:n})}}function bx(n){if(n===void 0)return ze("GRPC error has no .code"),A.UNKNOWN;switch(n){case Ze.OK:return A.OK;case Ze.CANCELLED:return A.CANCELLED;case Ze.UNKNOWN:return A.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return A.INTERNAL;case Ze.UNAVAILABLE:return A.UNAVAILABLE;case Ze.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Ze.NOT_FOUND:return A.NOT_FOUND;case Ze.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Ze.ABORTED:return A.ABORTED;case Ze.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Ze.DATA_LOSS:return A.DATA_LOSS;default:return $(39323,{code:n})}}(ge=Ze||(Ze={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var $N=null;var BH=new xr([4294967295,4294967295],0);function HN(n){let e=Zw().encode(n),t=new x_;return t.update(e),new Uint8Array(t.digest())}function qN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xr([t,r],0),new xr([i,o],0)]}var DI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fo(`Invalid padding: ${t}`);if(r<0)throw new Fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Fo(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=xr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(xr.fromNumber(r)));return i.compare(BH)===1&&(i=new xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=HN(e),[r,i]=qN(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=HN(e),[r,i]=qN(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Fo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gl=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ml.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(K.min(),i,new Ne(X),qt(),ae())}},ml=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ae(),ae(),ae())}};var _a=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Rp=class{constructor(e,t){this.targetId=e,this.De=t}},Np=class{constructor(e,t,r=We.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Mp=class{constructor(){this.ve=0,this.Ce=zN(),this.Fe=We.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ae(),t=ae(),r=ae();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:o})}}),new ml(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=zN()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,q(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},TI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=qt(),this.je=ep(),this.Je=ep(),this.He=new Ne(X)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(bp(o))if(r===0){let s=new V(o.path);this.Xe(t,s,tt.newNoDocument(s,K.min()))}else q(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}$N?.ct((function(d,h,g,y,D){var R,x,F,W,G,he;let Ie={localCacheCount:d,existenceFilterCount:h.count,databaseId:g.database,projectId:g.projectId},ue=h.unchangedNames;return ue&&(Ie.bloomFilter={applied:D===0,hashCount:(R=ue?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(W=(F=(x=ue?.bits)===null||x===void 0?void 0:x.bitmap)===null||F===void 0?void 0:F.length)!==null&&W!==void 0?W:0,padding:(he=(G=ue?.bits)===null||G===void 0?void 0:G.padding)!==null&&he!==void 0?he:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),Ie})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Vr(r).toUint8Array()}catch(u){if(u instanceof wp)return un("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new DI(s,i,o)}catch(u){return un(u instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&bp(a.target)){let u=new V(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,tt.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=ae();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new gl(e,t,this.He,this.ze,r);return this.ze=qt(),this.je=ep(),this.Je=ep(),this.He=new Ne(X),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Mp,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new De(X),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new De(X),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Mp),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function ep(){return new Ne(V.comparator)}function zN(){return new Ne(V.comparator)}var UH={asc:"ASCENDING",desc:"DESCENDING"},$H={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HH={and:"AND",or:"OR"},CI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function bI(n,e){return n.useProto3Json||Al(e)?e:{value:e}}function Oa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qH(n,e){return Oa(n,e.toTimestamp())}function Ge(n){return q(!!n,49232),K.fromTimestamp((function(t){let r=Lr(t);return new ke(r.seconds,r.nanos)})(n))}function dD(n,e){return SI(n,e).canonicalString()}function SI(n,e){let t=(function(i){return new pe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Ax(n){let e=pe.fromString(n);return q(Vx(e),10190,{key:e.toString()}),e}function yl(n,e){return dD(n.databaseId,e.path)}function ir(n,e){let t=Ax(e);if(t.get(1)!==n.databaseId.projectId)throw new k(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new V(Mx(t))}function Rx(n,e){return dD(n.databaseId,e)}function Nx(n){let e=Ax(n);return e.length===4?pe.emptyPath():Mx(e)}function AI(n){return new pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Mx(n){return q(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function GN(n,e,t){return{name:yl(n,e),fields:t.value.mapValue.fields}}function xx(n,e,t){let r=ir(n,e.name),i=Ge(e.updateTime),o=e.createTime?Ge(e.createTime):K.min(),s=new St({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function zH(n,e){return"found"in e?(function(r,i){q(!!i.found,43571),i.found.name,i.found.updateTime;let o=ir(r,i.found.name),s=Ge(i.found.updateTime),a=i.found.createTime?Ge(i.found.createTime):K.min(),u=new St({mapValue:{fields:i.found.fields}});return tt.newFoundDocument(o,s,a,u)})(n,e):"missing"in e?(function(r,i){q(!!i.missing,3894),q(!!i.readTime,22933);let o=ir(r,i.missing),s=Ge(i.readTime);return tt.newNoDocument(o,s)})(n,e):$(7234,{result:e})}function GH(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,d){return l.useProto3Json?(q(d===void 0||typeof d=="string",58123),We.fromBase64String(d||"")):(q(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),We.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let d=l.code===void 0?A.UNKNOWN:bx(l.code);return new k(d,l.message||"")})(s);t=new Np(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ir(n,r.document.name),o=Ge(r.document.updateTime),s=r.document.createTime?Ge(r.document.createTime):K.min(),a=new St({mapValue:{fields:r.document.fields}}),u=tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new _a(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ir(n,r.document),o=r.readTime?Ge(r.readTime):K.min(),s=tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new _a([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ir(n,r.document),o=r.removedTargetIds||[];t=new _a([],o,i,null)}else{if(!("filter"in e))return $(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new wI(i,o),a=r.targetId;t=new Rp(a,s)}}return t}function vl(n,e){let t;if(e instanceof Oi)t={update:GN(n,e.key,e.value)};else if(e instanceof Fi)t={delete:yl(n,e.key)};else if(e instanceof Mn)t={update:GN(n,e.key,e.data),updateMask:XH(e.fieldMask)};else{if(!(e instanceof fl))return $(16599,{Rt:e.type});t={verify:yl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Pi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Br)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ki)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw $(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:qH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$(27497)})(n,e.precondition)),t}function RI(n,e){let t=e.currentDocument?(function(o){return o.updateTime!==void 0?Ue.updateTime(Ge(o.updateTime)):o.exists!==void 0?Ue.exists(o.exists):Ue.none()})(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(i=>(function(s,a){let u=null;if("setToServerValue"in a)q(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),u=new Pi;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new jr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new Br(d)}else"increment"in a?u=new ki(s,a.increment):$(16584,{proto:a});let l=st.fromServerFormat(a.fieldPath);return new $o(l,u)})(n,i)):[];if(e.update){e.update.name;let i=ir(n,e.update.name),o=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=(function(u){let l=u.fieldPaths||[];return new Jt(l.map(d=>st.fromServerFormat(d)))})(e.updateMask);return new Mn(i,o,s,t,r)}return new Oi(i,o,t,r)}if(e.delete){let i=ir(n,e.delete);return new Fi(i,t)}if(e.verify){let i=ir(n,e.verify);return new fl(i,t)}return $(1463,{proto:e})}function WH(n,e){return n&&n.length>0?(q(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Ge(i.updateTime):Ge(o);return s.isEqual(K.min())&&(s=Ge(o)),new _I(s,i.transformResults||[])})(t,e))):[]}function Px(n,e){return{documents:[Rx(n,e.path)]}}function kx(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Rx(n,i);let o=(function(l){if(l.length!==0)return Lx(we.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(d=>(function(g){return{field:pa(g.field),direction:QH(g.dir)}})(d))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=bI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function Ox(n){let e=Nx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){q(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=(function(h){let g=Fx(h);return g instanceof we&&aD(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(h){return h.map(g=>(function(D){return new Bo(ga(D.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(h){let g;return g=typeof h=="object"?h.value:h,Al(g)?null:g})(t.limit));let u=null;t.startAt&&(u=(function(h){let g=!!h.before,y=h.values||[];return new ar(y,g)})(t.startAt));let l=null;return t.endAt&&(l=(function(h){let g=!h.before,y=h.values||[];return new ar(y,g)})(t.endAt)),lx(e,i,s,o,a,"F",u,l)}function KH(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Fx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ga(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ga(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ga(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ga(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}})(n):n.fieldFilter!==void 0?(function(t){return fe.create(ga(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return we.create(t.compositeFilter.filters.map(r=>Fx(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}})(t.compositeFilter.op))})(n):$(30097,{filter:n})}function QH(n){return UH[n]}function YH(n){return $H[n]}function ZH(n){return HH[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ga(n){return st.fromServerFormat(n.fieldPath)}function Lx(n){return n instanceof fe?(function(t){if(t.op==="=="){if(NN(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(RN(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NN(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(RN(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:YH(t.op),value:t.value}}})(n):n instanceof we?(function(t){let r=t.getFilters().map(i=>Lx(i));return r.length===1?r[0]:{compositeFilter:{op:ZH(t.op),filters:r}}})(n):$(54877,{filter:n})}function XH(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Vx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Fa=class n{constructor(e,t,r,i,o=K.min(),s=K.min(),a=We.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xp=class{constructor(e){this.gt=e}};function JH(n,e){let t;if(e.document)t=xx(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=V.fromSegments(e.noDocument.path),i=qo(e.noDocument.readTime);t=tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $(56709);{let r=V.fromSegments(e.unknownDocument.path),i=qo(e.unknownDocument.version);t=tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){let o=new ke(i[0],i[1]);return K.fromTimestamp(o)})(e.readTime)),t}function WN(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:yl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Oa(o,s.version.toTimestamp()),createTime:Oa(o,s.createTime.toTimestamp())}})(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ho(e.version)};else{if(!e.isUnknownDocument())return $(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ho(e.version)}}return r}function Pp(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ho(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qo(n){let e=new ke(n.seconds,n.nanoseconds);return K.fromTimestamp(e)}function xo(n,e){let t=(e.baseMutations||[]).map(o=>RI(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>RI(n.gt,o)),i=ke.fromMillis(e.localWriteTimeMs);return new hl(e.batchId,i,t,r)}function Wc(n){let e=qo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?qo(n.lastLimboFreeSnapshotVersion):K.min(),r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){let s=o.documents.length;return q(s===1,1966,{count:s}),Lt(Ga(Nx(o.documents[0])))})(n.query):(function(o){return Lt(Ox(o))})(n.query),new Fa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,We.fromBase64String(n.resumeToken))}function jx(n,e){let t=Ho(e.snapshotVersion),r=Ho(e.lastLimboFreeSnapshotVersion),i;i=bp(e.target)?Px(n.gt,e.target):kx(n.gt,e.target).Vt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fD(n){let e=Ox({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ap(e,e.limit,"L"):e}function V_(n,e){return new pl(e.largestBatchId,RI(n.gt,e.overlayMutation))}function KN(n,e){let t=e.path.lastSegment();return[n,At(e.path.popLast()),t]}function QN(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ho(r.readTime),documentKey:At(r.documentKey.path),largestBatchId:r.largestBatchId}}var NI=class{getBundleMetadata(e,t){return YN(e).get(t).next(r=>{if(r)return(function(o){return{id:o.bundleId,createTime:qo(o.createTime),version:o.version}})(r)})}saveBundleMetadata(e,t){return YN(e).put((function(i){return{bundleId:i.id,createTime:Ho(Ge(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return ZN(e).get(t).next(r=>{if(r)return(function(o){return{name:o.name,query:fD(o.bundledQuery),readTime:qo(o.readTime)}})(r)})}saveNamedQuery(e,t){return ZN(e).put((function(i){return{name:i.name,readTime:Ho(Ge(i.readTime)),bundledQuery:i.bundledQuery}})(t))}};function YN(n){return at(n,mg)}function ZN(n){return at(n,yg)}var kp=class n{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return $c(e).get(KN(this.userId,t)).next(r=>r?V_(this.serializer,r):null)}getOverlays(e,t){let r=nr();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new pl(t,s);i.push(this.wt(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(At(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push($c(e).Y(oI,a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=nr(),o=At(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return $c(e).j(oI,s).next(a=>{for(let u of a){let l=V_(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=nr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $c(e).X({index:zM,range:a},(u,l,d)=>{let h=V_(this.serializer,l);o.size()<i||h.largestBatchId===s?(o.set(h.getKey(),h),s=h.largestBatchId):d.done()}).next(()=>o)}wt(e,t){return $c(e).put((function(i,o,s){let[a,u,l]=KN(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:vl(i.gt,s.mutation)}})(this.serializer,this.userId,t))}};function $c(n){return at(n,vg)}var MI=class{St(e){return at(e,rD)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?We.fromUint8Array(r):We.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var kr=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Pe(e.integerValue));else if("doubleValue"in e){let r=Pe(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),il(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Lr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Vr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?nx(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Ig(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):$(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Na,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Pe(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),V.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};kr.Ut=new kr;var ua=255;function eq(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function XN(n){let e=64-(function(r){let i=0;for(let o=0;o<8;++o){let s=eq(255&r[o]);if(i+=s,s!==8)break}return i})(n);return Math.ceil(e/8)}var xI=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{let i=t.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{let i=t.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){let t=this.Xt(e),r=XN(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}tn(e){let t=this.Xt(e),r=XN(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}nn(){this.rn(ua),this.rn(255)}sn(){this._n(ua),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=(function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===ua?(this.rn(ua),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===ua?(this._n(ua),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},PI=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},kI=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},Po=class{constructor(){this.un=new xI,this.cn=new PI(this.un),this.ln=new kI(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var ko=class n{constructor(e,t,r,i){this.Pn=e,this.Tn=t,this.In=r,this.dn=i}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:dp(this.In),directionalValue:dp(this.dn),orderedDocumentKey:dp(t),documentKey:r.path.toArray()}}Rn(e,t,r){let i=this.An(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function _i(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=JN(n.In,e.In),t!==0?t:(t=JN(n.dn,e.dn),t!==0?t:V.comparator(n.Tn,e.Tn)))}function JN(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function dp(n){return sm()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function eM(n){return typeof n!="string"?n:(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}var Op=class{constructor(e){this.Vn=new De((t,r)=>st.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(q(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=X_(e);if(t!==void 0&&!this.yn(t))return!1;let r=Ro(e),i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.wn(a,u)||!this.Sn(this.mn[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new De(st.comparator),t=[];for(let r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new va(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new va(r.field,0))}for(let r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new va(r.field,r.dir==="asc"?0:1)));return new Ta(Ta.UNKNOWN_ID,this.collectionId,t,rl.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Bx(n){var e,t;if(q(n instanceof fe||n instanceof we,20012),n instanceof fe){if(n instanceof Cp){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return we.create(i,"or")}return n}let r=n.filters.map(i=>Bx(i));return we.create(r,n.op)}function tq(n){if(n.getFilters().length===0)return[];let e=LI(Bx(n));return q(Ux(e),7391),OI(e)||FI(e)?[e]:e.getFilters()}function OI(n){return n instanceof fe}function FI(n){return n instanceof we&&aD(n)}function Ux(n){return OI(n)||FI(n)||(function(t){if(t instanceof we&&cI(t)){for(let r of t.getFilters())if(!OI(r)&&!FI(r))return!1;return!0}return!1})(n)}function LI(n){if(q(n instanceof fe||n instanceof we,34018),n instanceof fe)return n;if(n.filters.length===1)return LI(n.filters[0]);let e=n.filters.map(r=>LI(r)),t=we.create(e,n.op);return t=Fp(t),Ux(t)?t:(q(t instanceof we,64498),q(xa(t),40251),q(t.filters.length>1,57927),t.filters.reduce((r,i)=>hD(r,i)))}function hD(n,e){let t;return q(n instanceof fe||n instanceof we,38388),q(e instanceof fe||e instanceof we,25473),t=n instanceof fe?e instanceof fe?(function(i,o){return we.create([i,o],"and")})(n,e):tM(n,e):e instanceof fe?tM(e,n):(function(i,o){if(q(i.filters.length>0&&o.filters.length>0,48005),xa(i)&&xa(o))return ax(i,o.getFilters());let s=cI(i)?i:o,a=cI(i)?o:i,u=s.filters.map(l=>hD(l,a));return we.create(u,"or")})(n,e),Fp(t)}function tM(n,e){if(xa(e))return ax(e,n.getFilters());{let t=e.filters.map(r=>hD(n,r));return we.create(t,"or")}}function Fp(n){if(q(n instanceof fe||n instanceof we,11850),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return Fp(e[0]);if(ox(n))return n;let t=e.map(i=>Fp(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof we&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:we.create(r,n.op)}var VI=class{constructor(){this.Dn=new El}addToCollectionParentIndex(e,t){return this.Dn.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(cn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(cn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},El=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new De(pe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new De(pe.comparator)).toArray()}};var nM="IndexedDbIndexManager",tp=new Uint8Array(0),jI=class{constructor(e,t){this.databaseId=t,this.vn=new El,this.Cn=new Nn(r=>Uo(r),(r,i)=>Nl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:At(i)};return rM(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[xM(t),""],!1,!0);return rM(e).j(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(tr(s.parent))}return r})}addFieldIndex(e,t){let r=Hc(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}})(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=la(e);return o.next(a=>{s.put(QN(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Hc(e),i=la(e),o=ca(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Hc(e),r=ca(e),i=la(e);return t.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,t){return S.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Op(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=ca(e),i=!0,o=new Map;return S.forEach(this.Fn(t),s=>this.Mn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ae(),a=[];return S.forEach(o,(u,l)=>{O(nM,`Using index ${(function(G){return`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map(he=>`${he.fieldPath}:${he.kind}`).join(",")}`})(u)} to execute ${Uo(t)}`);let d=(function(G,he){let Ie=X_(he);if(Ie===void 0)return null;for(let ue of Sp(G,Ie.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null})(l,u),h=(function(G,he){let Ie=new Map;for(let ue of Ro(he))for(let I of Sp(G,ue.fieldPath))switch(I.op){case"==":case"in":Ie.set(ue.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Ie.set(ue.fieldPath.canonicalString(),I.value),Array.from(Ie.values())}return null})(l,u),g=(function(G,he){let Ie=[],ue=!0;for(let I of Ro(he)){let v=I.kind===0?ON(G,I.fieldPath,G.startAt):FN(G,I.fieldPath,G.startAt);Ie.push(v.value),ue&&(ue=v.inclusive)}return new ar(Ie,ue)})(l,u),y=(function(G,he){let Ie=[],ue=!0;for(let I of Ro(he)){let v=I.kind===0?FN(G,I.fieldPath,G.endAt):ON(G,I.fieldPath,G.endAt);Ie.push(v.value),ue&&(ue=v.inclusive)}return new ar(Ie,ue)})(l,u),D=this.xn(u,l,g),R=this.xn(u,l,y),x=this.On(u,l,h),F=this.Nn(u.indexId,d,D,g.inclusive,R,y.inclusive,x);return S.forEach(F,W=>r.H(W,t.limit).next(G=>{G.forEach(he=>{let Ie=V.fromSegments(he.documentKey);s.has(Ie)||(s=s.add(Ie),a.push(Ie))})}))}).next(()=>a)}return S.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=tq(we.create(e.filters,"and")).map(r=>vI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),d=[];for(let h=0;h<u;++h){let g=t?this.Bn(t[h/l]):tp,y=this.Ln(e,g,r[h%l],i),D=this.kn(e,g,o[h%l],s),R=a.map(x=>this.Ln(e,g,x,!0));d.push(...this.createRange(y,D,R))}return d}Ln(e,t,r,i){let o=new ko(e,V.empty(),t,r);return i?o:o.En()}kn(e,t,r,i){let o=new ko(e,V.empty(),t,r);return i?o.En():o}Mn(e,t){let r=new Op(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.pn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Fn(t);return S.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<(function(u){let l=new De(st.comparator),d=!1;for(let h of u.filters)for(let g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let h of u.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(d?1:0)})(o)&&(r=1):r=0})).next(()=>(function(s){return s.limit!==null})(t)&&i.length>1&&r===2?1:r)}qn(e,t){let r=new Po;for(let i of Ro(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.hn(i.kind);kr.Ut.bt(o,s)}return r.an()}Bn(e){let t=new Po;return kr.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let r=new Po;return kr.Ut.bt(jo(this.databaseId,t),r.hn((function(o){let s=Ro(o);return s.length===0?0:s[s.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let i=[];i.push(new Po);let o=0;for(let s of Ro(e)){let a=r[o++];for(let u of i)if(this.$n(t,s.fieldPath)&&dl(a))i=this.Un(i,s,a);else{let l=u.hn(s.kind);kr.Ut.bt(a,l)}}return this.Kn(i)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Po;u.seed(a.an()),kr.Ut.bt(s,u.hn(t.kind)),o.push(u)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Hc(e),i=la(e);return(t?r.j(iI,IDBKeyRange.bound(t,t)):r.j()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push((function(d,h){let g=h?new rl(h.sequenceNumber,new cn(qo(h.readTime),new V(tr(h.documentKey)),h.largestBatchId)):rl.empty(),y=d.fields.map(([D,R])=>new va(st.fromServerFormat(D),R));return new Ta(d.indexId,d.collectionGroup,y,g)})(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:X(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Hc(e),o=la(e);return this.Wn(e).next(s=>i.j(iI,IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(QN(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.Gn(e,i,u).next(l=>{let d=this.zn(o,u);return l.isEqual(d)?S.resolve():this.jn(e,o,u,l,d)}))))})}Jn(e,t,r,i){return ca(e).put(i.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,i){return ca(e).delete(i.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){let i=ca(e),o=new De(_i);return i.X({index:qM,range:IDBKeyRange.only([r.indexId,this.uid,dp(this.Qn(r,t))])},(s,a)=>{o=o.add(new ko(r.indexId,t,eM(a.arrayValue),eM(a.directionalValue)))}).next(()=>o)}zn(e,t){let r=new De(_i),i=this.qn(t,e);if(i==null)return r;let o=X_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(dl(s))for(let a of s.arrayValue.values||[])r=r.add(new ko(t.indexId,e.key,this.Bn(a),i))}else r=r.add(new ko(t.indexId,e.key,tp,i));return r}jn(e,t,r,i,o){O(nM,"Updating index entries for document '%s'",t.key);let s=[];return(function(u,l,d,h,g){let y=u.getIterator(),D=l.getIterator(),R=aa(y),x=aa(D);for(;R||x;){let F=!1,W=!1;if(R&&x){let G=d(R,x);G<0?W=!0:G>0&&(F=!0)}else R!=null?W=!0:F=!0;F?(h(x),x=aa(D)):W?(g(R),R=aa(y)):(R=aa(y),x=aa(D))}})(i,o,_i,a=>{s.push(this.Jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),S.waitFor(s)}Wn(e){let t=1;return la(e).X({index:HM,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>_i(s,a)).filter((s,a,u)=>!a||_i(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=_i(s,e),u=_i(s,t);if(a===0)i[0]=e.En();else if(a>0&&u<0)i.push(s),i.push(s.En());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];let a=i[s].Rn(this.uid,tp,V.empty()),u=i[s+1].Rn(this.uid,tp,V.empty());o.push(IDBKeyRange.bound(a,u))}return o}Yn(e,t){return _i(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(iM)}getMinOffset(e,t){return S.mapArray(this.Fn(t),r=>this.Mn(e,r).next(i=>i||$(44426))).next(iM)}};function rM(n){return at(n,al)}function ca(n){return at(n,Yc)}function Hc(n){return at(n,nD)}function la(n){return at(n,Qc)}function iM(n){q(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Jw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new cn(e.readTime,e.documentKey,t)}var oM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$x=41943040,Ht=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function Hx(n,e,t){let r=n.store(bn),i=n.store(Ca),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.X({range:s},(d,h,g)=>(a++,g.delete()));o.push(u.next(()=>{q(a===1,47070,{batchId:t.batchId})}));let l=[];for(let d of t.mutations){let h=BM(e,d.key.path,t.batchId);o.push(i.delete(h)),l.push(d.key)}return S.waitFor(o).next(()=>l)}function Lp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $(14731);e=n.noDocument}return JSON.stringify(e).length}Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht($x,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);var Vp=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,t,r,i){q(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).X({index:Oo,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=ma(e),s=Ii(e);return s.add({}).next(a=>{q(typeof a=="number",49019);let u=new hl(a,t,r,i),l=(function(y,D,R){let x=R.baseMutations.map(W=>vl(y.gt,W)),F=R.mutations.map(W=>vl(y.gt,W));return{userId:D,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:x,mutations:F}})(this.serializer,this.userId,u),d=[],h=new De((g,y)=>X(g.canonicalString(),y.canonicalString()));for(let g of i){let y=BM(this.userId,g.key.path,a);h=h.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,tH))}return h.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Zn[a]=u.keys()}),S.waitFor(d).next(()=>u)})}lookupMutationBatch(e,t){return Ii(e).get(t).next(r=>r?(q(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),xo(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?S.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ii(e).X({index:Oo,range:i},(s,a,u)=>{a.userId===this.userId&&(q(a.batchId>=r,47524,{er:r}),o=xo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=bi;return Ii(e).X({index:Oo,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,bi],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).j(Oo,t).next(r=>r.map(i=>xo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=op(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ma(e).X({range:i},(s,a,u)=>{let[l,d,h]=s,g=tr(d);if(l===this.userId&&t.path.isEqual(g))return Ii(e).get(h).next(y=>{if(!y)throw $(61480,{tr:s,batchId:h});q(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:h}),o.push(xo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new De(X),i=[];return t.forEach(o=>{let s=op(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=ma(e).X({range:a},(l,d,h)=>{let[g,y,D]=l,R=tr(y);g===this.userId&&o.path.isEqual(R)?r=r.add(D):h.done()});i.push(u)}),S.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=op(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new De(X);return ma(e).X({range:s},(u,l,d)=>{let[h,g,y]=u,D=tr(g);h===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):d.done()}).next(()=>this.nr(e,a))}nr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Ii(e).get(o).next(s=>{if(s===null)throw $(35274,{batchId:o});q(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(xo(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Hx(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return ma(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=tr(o[1]);i.push(u)}else a.done()}).next(()=>{q(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return qx(e,this.userId,t)}sr(e){return zx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:bi,lastStreamToken:""})}};function qx(n,e,t){let r=op(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ma(n).X({range:o,Z:!0},(a,u,l)=>{let[d,h,g]=a;d===e&&h===i&&(s=!0),l.done()}).next(()=>s)}function Ii(n){return at(n,bn)}function ma(n){return at(n,Ca)}function zx(n){return at(n,ol)}var La=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var BI=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let r=new La(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>K.fromTimestamp(new ke(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.lr(e,i)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>da(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(q(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return da(e).X((s,a)=>{let u=Wc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return da(e).X((r,i)=>{let o=Wc(i);t(o)})}cr(e){return sM(e).get(_p).next(t=>(q(t!==null,2888),t))}lr(e,t){return sM(e).put(_p,t)}hr(e,t){return da(e).put(jx(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Uo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return da(e).X({range:i,index:$M},(s,a,u)=>{let l=Wc(a);Nl(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Di(e);return t.forEach(s=>{let a=At(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Di(e);return S.forEach(t,o=>{let s=At(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Di(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Di(e),o=ae();return i.X({range:r,Z:!0},(s,a,u)=>{let l=tr(s[1]),d=new V(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=At(t.path),i=IDBKeyRange.bound([r],[xM(r)],!1,!0),o=0;return Di(e).X({index:tD,Z:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Et(e,t){return da(e).get(t).next(r=>r?Wc(r):null)}};function da(n){return at(n,ba)}function sM(n){return at(n,Vo)}function Di(n){return at(n,Sa)}var aM="LruGarbageCollector",nq=1048576;function uM([n,e],[t,r]){let i=X(n,t);return i===0?X(e,r):i}var UI=class{constructor(e){this.Tr=e,this.buffer=new De(uM),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();uM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},jp=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){O(aM,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ui(t)?O(aM,"Ignoring IndexedDB error during garbage collection: ",t):yield Bi(t)}yield this.Rr(3e5)}))}},$I=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Xt.ue);let r=new UI(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(oM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oM):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(o=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),fa()<=xn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function Gx(n,e){return new $I(n,e)}var HI=class{constructor(e,t){this.db=e,this.garbageCollector=Gx(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,i)=>t(i))}addReference(e,t,r){return np(e,r)}removeReference(e,t,r){return np(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return np(e,t)}Sr(e,t){return(function(i,o){let s=!1;return zx(i).ee(a=>qx(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)})(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.wr(e,(s,a)=>{if(a<=t){let u=this.Sr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,K.min()),Di(e).delete((function(h){return[0,At(h.path)]})(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return np(e,t)}wr(e,t){let r=Di(e),i,o=Xt.ue;return r.X({index:tD},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Xt.ue&&t(new V(tr(i)),o),o=l,i=u):o=Xt.ue}).next(()=>{o!==Xt.ue&&t(new V(tr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function np(n,e){return Di(n).put((function(r,i){return{targetId:0,path:At(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}var Bp=class{constructor(){this.changes=new Nn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qI=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ao(e).put(r)}removeEntry(e,t,r){return Ao(e).delete((function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Pp(s),a[a.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=tt.newInvalidDocument(t);return Ao(e).X({index:sp,range:IDBKeyRange.only(qc(t))},(i,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:tt.newInvalidDocument(t)};return Ao(e).X({index:sp,range:IDBKeyRange.only(qc(t))},(i,o)=>{r={document:this.Dr(t,o),size:Lp(o)}}).next(()=>r)}getEntries(e,t){let r=qt();return this.Cr(e,t,(i,o)=>{let s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,t){let r=qt(),i=new Ne(V.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Dr(o,s);r=r.insert(o,a),i=i.insert(o,Lp(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,t,r){if(t.isEmpty())return S.resolve();let i=new De(dM);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(qc(i.first()),qc(i.last())),s=i.getIterator(),a=s.getNext();return Ao(e).X({index:sp,range:o},(u,l,d)=>{let h=V.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&dM(a,h)<0;)r(a,null),a=s.getNext();a&&a.isEqual(h)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.G(qc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Pp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ao(e).j(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=qt();for(let h of l){let g=this.Dr(V.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(xl(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=qt(),s=lM(t,r),a=lM(t,cn.max());return Ao(e).X({index:UM,range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let h=this.Dr(V.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(h.key,h),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new zI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return cM(e).get(rI).next(t=>(q(!!t,20021),t))}br(e,t){return cM(e).put(rI,t)}Dr(e,t){if(t){let r=JH(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(K.min())))return r}return tt.newInvalidDocument(e)}};function Wx(n){return new qI(n)}var zI=class extends Bp{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Nn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new De((o,s)=>X(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=WN(this.Or.serializer,s);i=i.add(o.path.popLast());let l=Lp(u);r+=l-a.size,t.push(this.Or.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=WN(this.Or.serializer,s.convertToNoDocument(K.min()));t.push(this.Or.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function cM(n){return at(n,sl)}function Ao(n){return at(n,Ep)}function qc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function lM(n,e){let t=e.documentKey.path.toArray();return[n,Pp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function dM(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=X(t[o],r[o]),i)return i;return i=X(t.length,r.length),i||(i=X(t[t.length-2],r[r.length-2]),i||X(t[t.length-1],r[r.length-1]))}var GI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Up=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Jc(r.mutation,i,Jt.empty(),ke.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ae()){let i=nr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Gc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=nr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ae()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=qt(),s=Xc(),a=(function(){return Xc()})();return t.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Mn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Jc(d.mutation,l,d.mutation.getFieldMask(),ke.now())):s.set(l.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var h;return a.set(l,new GI(d,(h=s.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Xc(),i=new Ne((s,a)=>s-a),o=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let d=r.get(u)||Jt.empty();d=a.applyToLocalView(l,d),r.set(u,d);let h=(i.get(a.batchId)||ae()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,h=mx();d.forEach(g=>{if(!o.has(g)){let y=Dx(t.get(g),r.get(g));y!==null&&h.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return V.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(nr()),a=Da,u=o;return s.next(l=>S.forEach(l,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?S.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ae())).next(d=>({batchId:a,changes:gx(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new V(t)).next(r=>{let i=Gc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Gc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=(function(h,g){return new Rn(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((h,g)=>{s=s.insert(h,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,tt.newInvalidDocument(d)))});let a=Gc();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&Jc(d.mutation,l,Jt.empty(),ke.now()),xl(t,l)&&(a=a.insert(u,l))}),a})}};var WI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return S.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ge(i.createTime)}})(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:fD(i.bundledQuery),readTime:Ge(i.readTime)}})(t)),S.resolve()}};var KI=class{constructor(){this.overlays=new Ne(V.comparator),this.kr=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=nr();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=nr(),o=t.length+1,s=new V(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=nr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=nr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return S.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new pl(t,r));let o=this.kr.get(t);o===void 0&&(o=ae(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var QI=class{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var _l=class{constructor(){this.qr=new De(Xe.Qr),this.$r=new De(Xe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Xe(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new V(new pe([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new V(new pe([])),r=new Xe(t,e),i=new Xe(t,e+1),o=ae();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return V.comparator(e.key,t.key)||X(e.Hr,t.Hr)}static Ur(e,t){return X(e.Hr,t.Hr)||V.comparator(e.key,t.key)}};var YI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new De(Xe.Qr)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new hl(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?bi:this.er-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new De(X);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),S.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;V.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new V(o),0),a=new De(X);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),S.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){q(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return S.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Xe(t,0),i=this.Yr.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ZI=class{constructor(e){this.ni=e,this.docs=(function(){return new Ne(V.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(e,t){let r=qt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=qt(),s=t.path,a=new V(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Jw(FM(d),r)<=0||(i.has(d.key)||xl(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){$(9500)}ri(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XI(this)}getSize(e){return S.resolve(this.size)}},XI=class extends Bp{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var JI=class{constructor(e){this.persistence=e,this.ii=new Nn(t=>Uo(t),Nl),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.si=0,this.oi=new _l,this.targetCount=0,this._i=La.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),S.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new La(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.hr(t),S.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.oi.containsKey(t))}};var Il=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Xt(0),this.ci=!1,this.ci=!0,this.li=new QI,this.referenceDelegate=e(this),this.hi=new JI(this),this.indexManager=new VI,this.remoteDocumentCache=(function(i){return new ZI(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new xp(t),this.Ti=new WI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new YI(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new ew(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return S.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},ew=class extends mp{constructor(e){super(),this.currentSequenceNumber=e}},$p=class n{constructor(e){this.persistence=e,this.Ai=new _l,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw $(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),S.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.mi,r=>{let i=V.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,K.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return S.or([()=>S.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Hp=class n{constructor(e,t){this.persistence=e,this.gi=new Nn(r=>At(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Gx(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return S.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return S.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?S.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,K.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),S.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),S.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),S.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),S.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=up(e.data.value)),t}Sr(e,t,r){return S.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return S.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var tw=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new yp("createOrUpgrade",t);r<1&&i>=1&&((function(u){u.createObjectStore(Rl)})(e),(function(u){u.createObjectStore(ol,{keyPath:eH}),u.createObjectStore(bn,{keyPath:TN,autoIncrement:!0}).createIndex(Oo,CN,{unique:!0}),u.createObjectStore(Ca)})(e),fM(e),(function(u){u.createObjectStore(No)})(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&((function(u){u.deleteObjectStore(Sa),u.deleteObjectStore(ba),u.deleteObjectStore(Vo)})(e),fM(e)),s=s.next(()=>(function(u){let l=u.store(Vo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:K.min().toTimestamp(),targetCount:0};return l.put(_p,d)})(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>(function(u,l){return l.store(bn).j().next(h=>{u.deleteObjectStore(bn),u.createObjectStore(bn,{keyPath:TN,autoIncrement:!0}).createIndex(Oo,CN,{unique:!0});let g=l.store(bn),y=h.map(D=>g.put(D));return S.waitFor(y)})})(e,o))),s=s.next(()=>{(function(u){u.createObjectStore(Aa,{keyPath:cH})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>((function(u){u.createObjectStore(sl)})(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore(mg,{keyPath:lH})})(e),(function(u){u.createObjectStore(yg,{keyPath:dH})})(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore(vg,{keyPath:vH});l.createIndex(oI,EH,{unique:!1}),l.createIndex(zM,_H,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>(function(u){let l=u.createObjectStore(Ep,{keyPath:nH});l.createIndex(sp,rH),l.createIndex(UM,iH)})(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(No))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>(function(u){u.createObjectStore(nD,{keyPath:fH,autoIncrement:!0}).createIndex(iI,hH,{unique:!1}),u.createObjectStore(Qc,{keyPath:pH}).createIndex(HM,gH,{unique:!1}),u.createObjectStore(Yc,{keyPath:mH}).createIndex(qM,yH,{unique:!1})})(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(Qc).clear()}).next(()=>{t.objectStore(Yc).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore(rD,{keyPath:IH})})(e)})),r<18&&i>=18&&sm()&&(s=s.next(()=>{t.objectStore(Qc).clear()}).next(()=>{t.objectStore(Yc).clear()})),s}yi(e){let t=0;return e.store(No).X((r,i)=>{t+=Lp(i)}).next(()=>{let r={byteSize:t};return e.store(sl).put(rI,r)})}pi(e){let t=e.store(ol),r=e.store(bn);return t.j().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,bi],[o.userId,o.lastAcknowledgedBatchId]);return r.j(Oo,s).next(a=>S.forEach(a,u=>{q(u.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});let l=xo(this.serializer,u);return Hx(e,o.userId,l).next(()=>{})}))}))}wi(e){let t=e.store(Sa),r=e.store(No);return e.store(Vo).get(_p).next(i=>{let o=[];return r.X((s,a)=>{let u=new pe(s),l=(function(h){return[0,At(h)]})(u);o.push(t.get(l).next(d=>d?S.resolve():(h=>t.put({targetId:0,path:At(h),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}Si(e,t){e.createObjectStore(al,{keyPath:uH});let r=t.store(al),i=new El,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:At(u)})}};return t.store(No).X({Z:!0},(s,a)=>{let u=new pe(s);return o(u.popLast())}).next(()=>t.store(Ca).X({Z:!0},([s,a,u],l)=>{let d=tr(a);return o(d.popLast())}))}bi(e){let t=e.store(ba);return t.X((r,i)=>{let o=Wc(i),s=jx(this.serializer,o);return t.put(s)})}Di(e,t){let r=t.store(No),i=[];return r.X((o,s)=>{let a=t.store(Ep),u=(function(h){return h.document?new V(pe.fromString(h.document.name).popFirst(5)):h.noDocument?V.fromSegments(h.noDocument.path):h.unknownDocument?V.fromSegments(h.unknownDocument.path):$(36783)})(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}Ci(e,t){let r=t.store(bn),i=Wx(this.serializer),o=new Il($p.Vi,this.serializer.gt);return r.j().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:ae();xo(this.serializer,u).keys().forEach(h=>d=d.add(h)),a.set(u.userId,d)}),S.forEach(a,(u,l)=>{let d=new Je(l),h=kp.yt(this.serializer,d),g=o.getIndexManager(d),y=Vp.yt(d,this.serializer,g,o.referenceDelegate);return new Up(i,y,h,g).recalculateAndSaveOverlaysForDocumentKeys(new ul(t,Xt.ue),u).next()})})}};function fM(n){n.createObjectStore(Sa,{keyPath:sH}).createIndex(tD,aH,{unique:!0}),n.createObjectStore(ba,{keyPath:"targetId"}).createIndex($M,oH,{unique:!0}),n.createObjectStore(Vo)}var wi="IndexedDbPersistence",j_=18e5,B_=5e3,U_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Kx="main",nw=class n{constructor(e,t,r,i,o,s,a,u,l,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=s,this.document=a,this.Mi=l,this.xi=d,this.Oi=h,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=g=>Promise.resolve(),!n.C())throw new k(A.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HI(this,i),this.Qi=t+Kx,this.serializer=new xp(u),this.$i=new Ni(this.Qi,this.Oi,new tw(this.serializer)),this.li=new MI,this.hi=new BI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wx(this.serializer),this.Ti=new NI,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,d===!1&&ze(wi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(A.FAILED_PRECONDITION,U_);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new Xt(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>M(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>M(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(Ui(e))return O(wi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O(wi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return zc(e).get(sa).next(t=>S.resolve(this.Xi(t)))}es(e){return rp(e).delete(this.clientId)}ts(){return M(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,j_)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=at(t,Aa);return r.j().next(i=>{let o=this.rs(i,j_),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?S.resolve(!0):zc(e).get(sa).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,B_)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new k(A.FAILED_PRECONDITION,U_);return!1}}return!(!this.networkEnabled||!this.inForeground)||rp(e).j().next(r=>this.rs(r,B_).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O(wi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return M(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[Rl,Aa],e=>{let t=new ul(e,Xt.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>rp(e).j().next(t=>this.rs(t,j_).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return Vp.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jI(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return kp.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){O(wi,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=(function(u){return u===18?TH:u===17?QM:u===16?DH:u===15?iD:u===14?KM:u===13?WM:u===12?wH:u===11?GM:void $(60245)})(this.Oi),s;return this.$i.runTransaction(e,i,o,a=>(s=new ul(a,this.ui?this.ui.next():Xt.ue),t==="readwrite-primary"?this.Ji(s).next(u=>!!u||this.Hi(s)).next(u=>{if(!u)throw ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new k(A.FAILED_PRECONDITION,LM);return r(s)}).next(u=>this.Zi(s).next(()=>u)):this.Ts(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ts(e){return zc(e).get(sa).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,B_)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(A.FAILED_PRECONDITION,U_)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zc(e).put(sa,t)}static C(){return Ni.C()}Yi(e){let t=zc(e);return t.get(sa).next(r=>this.Xi(r)?(O(wi,"Releasing primary lease."),t.delete(sa)):S.resolve())}ns(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;om()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return O(wi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ze(wi,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){ze("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function zc(n){return at(n,Rl)}function rp(n){return at(n,Aa)}function pD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var rw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ae(),i=ae();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var iw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var qp=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return om()?8:VM(mu())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new iw;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(fa()<=xn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),S.resolve()):(fa()<=xn.DEBUG&&O("QueryEngine","Query:",ha(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(fa()<=xn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lt(t))):S.resolve())}ps(e,t){if(LN(t))return S.resolve(null);let r=Lt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ap(t,null,"F"),r=Lt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ae(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,Ap(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return LN(t)||i.isEqual(K.min())?S.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?S.resolve(null):(fa()<=xn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ha(t)),this.vs(e,s,t,OM(i,Da)).next(a=>a))})}bs(e,t){let r=new De(hx(e));return t.forEach((i,o)=>{xl(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return fa()<=xn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",ha(t)),this.gs.getDocumentsMatchingQuery(e,t,cn.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var gD="LocalStore",rq=3e8,ow=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ne(X),this.Ms=new Nn(o=>Uo(o),Nl),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Up(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Qx(n,e,t,r){return new ow(n,e,t,r)}function Yx(n,e){return M(this,null,function*(){let t=j(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ae();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function iq(n,e){let t=j(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,d){let h=l.batch,g=h.keys(),y=S.resolve();return g.forEach(D=>{y=y.next(()=>d.getEntry(u,D)).next(R=>{let x=l.docVersions.get(D);q(x!==null,48541),R.version.compareTo(x)<0&&(h.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,h))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Zx(n){let e=j(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function oq(n,e){let t=j(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,h)=>{let g=i.get(h);if(!g)return;a.push(t.hi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>t.hi.addMatchingKeys(o,d.addedDocuments,h)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(We.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),(function(R,x,F){return R.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=rq?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(g,y,d)&&a.push(t.hi.updateTargetData(o,y))});let u=qt(),l=ae();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(Xx(o,s,e.documentUpdates).next(d=>{u=d.Ls,l=d.ks})),!r.isEqual(K.min())){let d=t.hi.getLastRemoteSnapshotVersion(o).next(h=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function Xx(n,e,t){let r=ae(),i=ae();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=qt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(K.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O(gD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function sq(n,e){let t=j(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bi),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Va(n,e){let t=j(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Fa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function ja(n,e,t){return M(this,null,function*(){let r=j(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ui(s))throw s;O(gD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function zp(n,e,t){let r=j(n),i=K.min(),o=ae();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,d){let h=j(u),g=h.Ms.get(d);return g!==void 0?S.resolve(h.Fs.get(g)):h.hi.getTargetData(l,d)})(r,s,Lt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:K.min(),t?o:ae())).next(a=>(tP(r,fx(e),a),{documents:a,qs:o})))}function Jx(n,e){let t=j(n),r=j(t.hi),i=t.Fs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function eP(n,e){let t=j(n),r=t.xs.get(e)||K.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Os.getAllFromCollectionGroup(i,e,OM(r,Da),Number.MAX_SAFE_INTEGER)).then(i=>(tP(t,e,i),i))}function tP(n,e,t){let r=n.xs.get(e)||K.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}function aq(n,e,t,r){return M(this,null,function*(){let i=j(n),o=ae(),s=qt();for(let l of t){let d=e.Qs(l.metadata.name);l.document&&(o=o.add(d));let h=e.$s(l);h.setReadTime(e.Us(l.metadata.readTime)),s=s.insert(d,h)}let a=i.Os.newChangeBuffer({trackRemovals:!0}),u=yield Va(i,(function(d){return Lt(Ga(pe.fromString(`__bundle__/docs/${d}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Xx(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.hi.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.hi.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ls,d.ks)).next(()=>d.Ls)))})}function uq(r,i){return M(this,arguments,function*(n,e,t=ae()){let o=yield Va(n,Lt(fD(e.bundledQuery))),s=j(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ge(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Ti.saveNamedQuery(a,e);let l=o.withResumeToken(We.EMPTY_BYTE_STRING,u);return s.Fs=s.Fs.insert(l.targetId,l),s.hi.updateTargetData(a,l).next(()=>s.hi.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.hi.addMatchingKeys(a,t,o.targetId)).next(()=>s.Ti.saveNamedQuery(a,e))})})}var nP="firestore_clients";function hM(n,e){return`${nP}_${n}_${e}`}var rP="firestore_mutations";function pM(n,e,t){let r=`${rP}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var iP="firestore_targets";function $_(n,e){return`${iP}_${n}_${e}`}var er="SharedClientState",Gp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ks(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ze(er,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},el=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(ze(er,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Wp=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=cD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=jM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ze(er,`Failed to parse client data for instance '${e}': ${t}`),null)}},sw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ze(er,`Failed to parse online state: ${e}`),null)}},wl=class{constructor(){this.activeTargetIds=cD()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},tl=class{constructor(e,t,r,i,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new Ne(X),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=hM(this.persistenceKey,this.js),this.eo=(function(u){return`firestore_sequence_number_${u}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new wl),this.no=new RegExp(`^${nP}_${s}_([^_]*)$`),this.ro=new RegExp(`^${rP}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${iP}_${s}_(\\d+)$`),this.so=(function(u){return`firestore_online_state_${u}`})(this.persistenceKey),this.oo=(function(u){return`firestore_bundle_loaded_v2_${u}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return M(this,null,function*(){let e=yield this.syncEngine.Ps();for(let r of e){if(r===this.js)continue;let i=this.getItem(hM(this.persistenceKey,r));if(i){let o=Wp.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();let t=this.storage.getItem(this.so);if(t){let r=this.ao(t);r&&this.uo(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem($_(this.persistenceKey,e));if(i){let o=el.Ks(e,i);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($_(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O(er,"READ",e,t),t}setItem(e,t){O(er,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){O(er,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if(O(er,"EVENT",t.key,t.newValue),t.key===this.Xs)return void ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>M(this,null,function*(){if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){let r=this.Ao(t.key);return this.Ro(r,null)}{let r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){let r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){let r=(function(o){let s=Xt.ue;if(o!=null)try{let a=JSON.parse(o);q(typeof a=="number",30636,{wo:o}),s=a}catch(a){ze(er,"Failed to read sequence number from WebStorage",a)}return s})(t.newValue);r!==Xt.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){let r=this.So(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){let i=new Gp(this.currentUser,e,t,r),o=pM(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){let t=pM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){let t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){let i=$_(this.persistenceKey,e),o=new el(e,t,r);this.setItem(i,o.Ws())}Eo(e){let t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){let t=this.no.exec(e);return t?t[1]:null}Vo(e,t){let r=this.Ao(e);return Wp.Ks(r,t)}mo(e,t){let r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Gp.Ks(new Je(o),i,t)}po(e,t){let r=this.io.exec(e),i=Number(r[1]);return el.Ks(i,t)}ao(e){return sw.Ks(e)}So(e){return JSON.parse(e)}fo(e){return M(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);O(er,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Ys.insert(e,t):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Co(s,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=cD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Kp=class{constructor(){this.Fo=new wl,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new wl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var aw=class{xo(e){}shutdown(){}};var gM="ConnectivityMonitor",Qp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){O(gM,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){O(gM,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ip=null;function uw(){return ip===null?ip=(function(){return 268435456+Math.round(2147483648*Math.random())})():ip++,"0x"+ip.toString(16)}var H_="RestConnection",cq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},cw=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Dp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=uw(),a=this.Go(e,t.toUriEncodedString());O(H_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),d=im(l);return this.jo(e,a,u,r,d).then(h=>(O(H_,`Received RPC '${e}' ${s}: `,h),h),h=>{throw un(H_,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+za})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=cq[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var lw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var bt="WebChannelConnection",dw=class extends cw{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=uw();return new Promise((a,u)=>{let l=new P_;l.setWithCredentials(!0),l.listenOnce(k_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Uc.NO_ERROR:let h=l.getResponseJson();O(bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case Uc.TIMEOUT:O(bt,`RPC '${e}' ${s} timed out`),u(new k(A.DEADLINE_EXCEEDED,"Request time out"));break;case Uc.HTTP_ERROR:let g=l.getStatus();if(O(bt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let D=y?.error;if(D&&D.status&&D.message){let R=(function(F){let W=F.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(W)>=0?W:A.UNKNOWN})(D.status);u(new k(R,D.message))}else u(new k(A.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new k(A.UNAVAILABLE,"Connection failed."));break;default:$(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{O(bt,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);O(bt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",d,r,15)})}P_(e,t,r){let i=uw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=L_(),a=F_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let d=o.join("");O(bt,`Creating RPC '${e}' stream ${i}: ${d}`,u);let h=s.createWebChannel(d,u);this.T_(h);let g=!1,y=!1,D=new lw({Ho:x=>{y?O(bt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(g||(O(bt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),O(bt,`RPC '${e}' stream ${i} sending:`,x),h.send(x))},Yo:()=>h.close()}),R=(x,F,W)=>{x.listen(F,G=>{try{W(G)}catch(he){setTimeout(()=>{throw he},0)}})};return R(h,oa.EventType.OPEN,()=>{y||(O(bt,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),R(h,oa.EventType.CLOSE,()=>{y||(y=!0,O(bt,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(h))}),R(h,oa.EventType.ERROR,x=>{y||(y=!0,un(bt,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),D.__(new k(A.UNAVAILABLE,"The operation could not be completed")))}),R(h,oa.EventType.MESSAGE,x=>{var F;if(!y){let W=x.data[0];q(!!W,16349);let G=W,he=G?.error||((F=G[0])===null||F===void 0?void 0:F.error);if(he){O(bt,`RPC '${e}' stream ${i} received error:`,he);let Ie=he.status,ue=(function(_){let w=Ze[_];if(w!==void 0)return bx(w)})(Ie),I=he.message;ue===void 0&&(ue=A.INTERNAL,I="Unknown error status: "+Ie+" with message "+he.message),y=!0,D.__(new k(ue,I)),h.close()}else O(bt,`RPC '${e}' stream ${i} received:`,W),D.a_(W)}}),R(a,O_.STAT_EVENT,x=>{x.stat===Jh.PROXY?O(bt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Jh.NOPROXY&&O(bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function oP(){return typeof window<"u"?window:null}function fp(){return typeof document<"u"?document:null}function Pl(n){return new CI(n,!0)}var Dl=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var mM="PersistentStream",Yp=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Dl(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return M(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return M(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return M(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===A.RESOURCE_EXHAUSTED?(ze(t.toString()),ze("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new k(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>M(this,null,function*(){this.state=0,this.start()}))}G_(e){return O(mM,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(O(mM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fw=class extends Yp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=GH(this.serializer,e),r=(function(o){if(!("targetChange"in o))return K.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?K.min():s.readTime?Ge(s.readTime):K.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=AI(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=bp(u)?{documents:Px(o,u)}:{query:kx(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Sx(o,s.resumeToken);let l=bI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(K.min())>0){a.readTime=Oa(o,s.snapshotVersion.toTimestamp());let l=bI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=KH(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=AI(this.serializer),t.removeTarget=e,this.k_(t)}},hw=class extends Yp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return q(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,q(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){q(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=WH(e.writeResults,e.commitTime),r=Ge(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=AI(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>vl(this.serializer,r))};this.k_(t)}};var pw=class{},gw=class extends pw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new k(A.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,SI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(A.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,SI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(A.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},mw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ze(t),this._a=!1):O("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var zo="RemoteStore",yw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>M(this,null,function*(){Hi(this)&&(O(zo,"Restarting streams for network reachability change."),yield(function(u){return M(this,null,function*(){let l=j(u);l.Ia.add(4),yield Wa(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield kl(l)})})(this))}))}),this.Aa=new mw(r,i)}};function kl(n){return M(this,null,function*(){if(Hi(n))for(let e of n.da)yield e(!0)})}function Wa(n){return M(this,null,function*(){for(let e of n.da)yield e(!1)})}function wg(n,e){let t=j(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),vD(t)?yD(t):Qa(t).x_()&&mD(t,e))}function Ba(n,e){let t=j(n),r=Qa(t);t.Ta.delete(e),r.x_()&&sP(t,e),t.Ta.size===0&&(r.x_()?r.B_():Hi(t)&&t.Aa.set("Unknown"))}function mD(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qa(n).H_(e)}function sP(n,e){n.Ra.$e(e),Qa(n).Y_(e)}function yD(n){n.Ra=new TI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Qa(n).start(),n.Aa.aa()}function vD(n){return Hi(n)&&!Qa(n).M_()&&n.Ta.size>0}function Hi(n){return j(n).Ia.size===0}function aP(n){n.Ra=void 0}function lq(n){return M(this,null,function*(){n.Aa.set("Online")})}function dq(n){return M(this,null,function*(){n.Ta.forEach((e,t)=>{mD(n,e)})})}function fq(n,e){return M(this,null,function*(){aP(n),vD(n)?(n.Aa.la(e),yD(n)):n.Aa.set("Unknown")})}function hq(n,e,t){return M(this,null,function*(){if(n.Aa.set("Online"),e instanceof Np&&e.state===2&&e.cause)try{yield(function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){O(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zp(n,r)}else if(e instanceof _a?n.Ra.Ye(e):e instanceof Rp?n.Ra.it(e):n.Ra.et(e),!t.isEqual(K.min()))try{let r=yield Zx(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.Ta.get(l);d&&o.Ta.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.Ta.get(u);if(!d)return;o.Ta.set(u,d.withResumeToken(We.EMPTY_BYTE_STRING,d.snapshotVersion)),sP(o,u);let h=new Fa(d.target,u,l,d.sequenceNumber);mD(o,h)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){O(zo,"Failed to raise snapshot:",r),yield Zp(n,r)}})}function Zp(n,e,t){return M(this,null,function*(){if(!Ui(e))throw e;n.Ia.add(1),yield Wa(n),n.Aa.set("Offline"),t||(t=()=>Zx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>M(null,null,function*(){O(zo,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield kl(n)}))})}function uP(n,e){return e().catch(t=>Zp(n,t,e))}function Ka(n){return M(this,null,function*(){let e=j(n),t=Li(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:bi;for(;pq(e);)try{let i=yield sq(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,gq(e,i)}catch(i){yield Zp(e,i)}cP(e)&&lP(e)})}function pq(n){return Hi(n)&&n.Pa.length<10}function gq(n,e){n.Pa.push(e);let t=Li(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function cP(n){return Hi(n)&&!Li(n).M_()&&n.Pa.length>0}function lP(n){Li(n).start()}function mq(n){return M(this,null,function*(){Li(n).na()})}function yq(n){return M(this,null,function*(){let e=Li(n);for(let t of n.Pa)e.X_(t.mutations)})}function vq(n,e,t){return M(this,null,function*(){let r=n.Pa.shift(),i=II.from(r,e,t);yield uP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ka(n)})}function Eq(n,e){return M(this,null,function*(){e&&Li(n).Z_&&(yield(function(r,i){return M(this,null,function*(){if((function(s){return Cx(s)&&s!==A.ABORTED})(i.code)){let o=r.Pa.shift();Li(r).N_(),yield uP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ka(r)}})})(n,e)),cP(n)&&lP(n)})}function yM(n,e){return M(this,null,function*(){let t=j(n);t.asyncQueue.verifyOperationInProgress(),O(zo,"RemoteStore received new credentials");let r=Hi(t);t.Ia.add(3),yield Wa(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield kl(t)})}function vw(n,e){return M(this,null,function*(){let t=j(n);e?(t.Ia.delete(2),yield kl(t)):e||(t.Ia.add(2),yield Wa(t),t.Aa.set("Unknown"))})}function Qa(n){return n.Va||(n.Va=(function(t,r,i){let o=j(t);return o.ia(),new fw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:lq.bind(null,n),e_:dq.bind(null,n),n_:fq.bind(null,n),J_:hq.bind(null,n)}),n.da.push(e=>M(null,null,function*(){e?(n.Va.N_(),vD(n)?yD(n):n.Aa.set("Unknown")):(yield n.Va.stop(),aP(n))}))),n.Va}function Li(n){return n.ma||(n.ma=(function(t,r,i){let o=j(t);return o.ia(),new hw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:mq.bind(null,n),n_:Eq.bind(null,n),ea:yq.bind(null,n),ta:vq.bind(null,n)}),n.da.push(e=>M(null,null,function*(){e?(n.ma.N_(),yield Ka(n)):(yield n.ma.stop(),n.Pa.length>0&&(O(zo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var Ew=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ot,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ya(n,e){if(ze("AsyncQueue",`${e}: ${n}`),Ui(n))return new k(A.UNAVAILABLE,`${e}: ${n}`);throw n}var Xp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||V.comparator(t.key,r.key):(t,r)=>V.comparator(t.key,r.key),this.keyedMap=Gc(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Jp=class{constructor(){this.fa=new Ne(V.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):$(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ua=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Xp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ml(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var _w=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Iw=class{constructor(){this.queries=vM(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=j(t),o=i.queries;i.queries=vM(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new k(A.ABORTED,"Firestore shutting down"))}};function vM(){return new Nn(n=>dx(n),Ml)}function ED(n,e){return M(this,null,function*(){let t=j(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new _w,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ya(s,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&ID(t)})}function _D(n,e){return M(this,null,function*(){let t=j(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function _q(n,e){let t=j(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&ID(t)}function Iq(n,e,t){let r=j(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function ID(n){n.Da.forEach(e=>{e.next()})}var ww,EM;(EM=ww||(ww={})).Fa="default",EM.Cache="cache";var Tl=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ww.Cache}};var Dw=class{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}};var eg=class{constructor(e){this.serializer=e}Qs(e){return ir(this.serializer,e)}$s(e){return e.metadata.exists?xx(this.serializer,e.document,!1):tt.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Ge(e)}},Tw=class{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=dP(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=pe.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){let t=new Map,r=new eg(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Qs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ae()).add(o);t.set(s,a)}}return t}za(e){return M(this,null,function*(){let t=yield aq(e,new eg(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(let i of this.Ua)yield uq(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}})}};function dP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var tg=class{constructor(e){this.key=e}},ng=class{constructor(e){this.key=e}},rg=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ae(),this.mutatedKeys=ae(),this.Xa=hx(e),this.eu=new Xp(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Jp,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let g=i.get(d),y=xl(this.query,h)?h:null,D=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),x=!1;g&&y?g.data.isEqual(y.data)?D!==R&&(r.track({type:3,doc:y}),x=!0):this.iu(g,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),x=!0):g&&!y&&(r.track({type:1,doc:g}),x=!0,(u||l)&&(a=!0)),x&&(y?(s=s.add(y),o=R?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((d,h)=>(function(y,D){let R=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{At:x})}};return R(y)-R(D)})(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ua(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Jp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ae(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new ng(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new tg(r))}),t}uu(e){this.Ha=e.qs,this.Za=ae();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ua.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},qi="SyncEngine",Cw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bw=class{constructor(e){this.key=e,this.lu=!1}},Sw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Nn(a=>dx(a),Ml),this.Tu=new Map,this.Iu=new Set,this.du=new Ne(V.comparator),this.Eu=new Map,this.Au=new _l,this.Ru={},this.Vu=new Map,this.mu=La.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function wq(n,e,t=!0){return M(this,null,function*(){let r=Dg(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield fP(r,e,t,!0),i})}function Dq(n,e){return M(this,null,function*(){let t=Dg(n);yield fP(t,e,!0,!1)})}function fP(n,e,t,r){return M(this,null,function*(){let i=yield Va(n.localStore,Lt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield wD(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&wg(n.remoteStore,i),a})}function wD(n,e,t,r,i){return M(this,null,function*(){n.gu=(h,g,y)=>(function(R,x,F,W){return M(this,null,function*(){let G=x.view.nu(F);G.Ds&&(G=yield zp(R.localStore,x.query,!1).then(({documents:I})=>x.view.nu(I,G)));let he=W&&W.targetChanges.get(x.targetId),Ie=W&&W.targetMismatches.get(x.targetId)!=null,ue=x.view.applyChanges(G,R.isPrimaryClient,he,Ie);return Aw(R,x.targetId,ue._u),ue.snapshot})})(n,h,g,y);let o=yield zp(n.localStore,e,!0),s=new rg(e,o.qs),a=s.nu(o.documents),u=ml.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Aw(n,t,l._u);let d=new Cw(e,t,s);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function Tq(n,e,t){return M(this,null,function*(){let r=j(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Ml(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ja(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ba(r.remoteStore,i.targetId),$a(r,i.targetId)}).catch(Bi))):($a(r,i.targetId),yield ja(r.localStore,i.targetId,!0))})}function Cq(n,e){return M(this,null,function*(){let t=j(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ba(t.remoteStore,r.targetId))})}function bq(n,e,t){return M(this,null,function*(){let r=bD(n);try{let i=yield(function(s,a){let u=j(s),l=ke.now(),d=a.reduce((y,D)=>y.add(D.key),ae()),h,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=qt(),R=ae();return u.Os.getEntries(y,d).next(x=>{D=x,D.forEach((F,W)=>{W.isValidDocument()||(R=R.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(x=>{h=x;let F=[];for(let W of a){let G=jH(W,h.get(W.key).overlayedDocument);G!=null&&F.push(new Mn(W.key,G,ix(G.value.mapValue),Ue.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(x=>{g=x;let F=x.applyToLocalDocumentSet(h,R);return u.documentOverlayCache.saveOverlays(y,x.batchId,F)})}).then(()=>({batchId:g.batchId,changes:gx(h)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ne(X)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Hr(r,i.changes),yield Ka(r.remoteStore)}catch(i){let o=Ya(i,"Failed to persist write");t.reject(o)}})}function hP(n,e){return M(this,null,function*(){let t=j(n);try{let r=yield oq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?q(s.lu,14607):i.removedDocuments.size>0&&(q(s.lu,42227),s.lu=!1))}),yield Hr(t,r,e)}catch(r){yield Bi(r)}})}function _M(n,e,t){let r=j(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=j(s);u.onlineState=a;let l=!1;u.queries.forEach((d,h)=>{for(let g of h.wa)g.va(a)&&(l=!0)}),l&&ID(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Sq(n,e,t){return M(this,null,function*(){let r=j(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ne(V.comparator);s=s.insert(o,tt.newNoDocument(o,K.min()));let a=ae().add(o),u=new gl(K.min(),new Map,new Ne(X),s,a);yield hP(r,u),r.du=r.du.remove(o),r.Eu.delete(e),CD(r)}else yield ja(r.localStore,e,!1).then(()=>$a(r,e,t)).catch(Bi)})}function Aq(n,e){return M(this,null,function*(){let t=j(n),r=e.batch.batchId;try{let i=yield iq(t.localStore,e);TD(t,r,null),DD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Hr(t,i)}catch(i){yield Bi(i)}})}function Rq(n,e,t){return M(this,null,function*(){let r=j(n);try{let i=yield(function(s,a){let u=j(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(h=>(q(h!==null,37113),d=h.keys(),u.mutationQueue.removeMutationBatch(l,h))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})})(r.localStore,e);TD(r,e,t),DD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Hr(r,i)}catch(i){yield Bi(i)}})}function Nq(n,e){return M(this,null,function*(){let t=j(n);Hi(t.remoteStore)||O(qi,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield(function(s){let a=j(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))})(t.localStore);if(r===bi)return void e.resolve();let i=t.Vu.get(r)||[];i.push(e),t.Vu.set(r,i)}catch(r){let i=Ya(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function DD(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function TD(n,e,t){let r=j(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function $a(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||pP(n,r)})}function pP(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Ba(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),CD(n))}function Aw(n,e,t){for(let r of t)r instanceof tg?(n.Au.addReference(r.key,e),Mq(n,r)):r instanceof ng?(O(qi,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||pP(n,r.key)):$(19791,{yu:r})}function Mq(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(O(qi,"New document in limbo: "+t),n.Iu.add(r),CD(n))}function CD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new V(pe.fromString(e)),r=n.mu.next();n.Eu.set(r,new bw(t)),n.du=n.du.insert(t,r),wg(n.remoteStore,new Fa(Lt(Ga(t.path)),r,"TargetPurposeLimboResolution",Xt.ue))}}function Hr(n,e,t){return M(this,null,function*(){let r=j(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:(d=t?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=rw.Es(u.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return M(this,null,function*(){let d=j(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>S.forEach(l,g=>S.forEach(g.Is,y=>d.persistence.referenceDelegate.addReference(h,g.targetId,y)).next(()=>S.forEach(g.ds,y=>d.persistence.referenceDelegate.removeReference(h,g.targetId,y)))))}catch(h){if(!Ui(h))throw h;O(gD,"Failed to update sequence numbers: "+h)}for(let h of l){let g=h.targetId;if(!h.fromCache){let y=d.Fs.get(g),D=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(D);d.Fs=d.Fs.insert(g,R)}}})})(r.localStore,o))})}function xq(n,e){return M(this,null,function*(){let t=j(n);if(!t.currentUser.isEqual(e)){O(qi,"User change. New user:",e.toKey());let r=yield Yx(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new k(A.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Hr(t,r.Bs)}})}function Pq(n,e){let t=j(n),r=t.Eu.get(e);if(r&&r.lu)return ae().add(r.key);{let i=ae(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function kq(n,e){return M(this,null,function*(){let t=j(n),r=yield zp(t.localStore,e.query,!0),i=e.view.uu(r);return t.isPrimaryClient&&Aw(t,e.targetId,i._u),i})}function Oq(n,e){return M(this,null,function*(){let t=j(n);return eP(t.localStore,e).then(r=>Hr(t,r))})}function Fq(n,e,t,r){return M(this,null,function*(){let i=j(n),o=yield(function(a,u){let l=j(a),d=j(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Xn(h,u).next(g=>g?l.localDocuments.getDocuments(h,g):S.resolve(null)))})(i.localStore,e);o!==null?(t==="pending"?yield Ka(i.remoteStore):t==="acknowledged"||t==="rejected"?(TD(i,e,r||null),DD(i,e),(function(a,u){j(j(a).mutationQueue).rr(u)})(i.localStore,e)):$(6720,"Unknown batchState",{wu:t}),yield Hr(i,o)):O(qi,"Cannot apply mutation batch with id: "+e)})}function Lq(n,e){return M(this,null,function*(){let t=j(n);if(Dg(t),bD(t),e===!0&&t.fu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield IM(t,r.toArray());t.fu=!0,yield vw(t.remoteStore,!0);for(let o of i)wg(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){let r=[],i=Promise.resolve();t.Tu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>($a(t,s),ja(t.localStore,s,!0))),Ba(t.remoteStore,s)}),yield i,yield IM(t,r),(function(s){let a=j(s);a.Eu.forEach((u,l)=>{Ba(a.remoteStore,l)}),a.Au.jr(),a.Eu=new Map,a.du=new Ne(V.comparator)})(t),t.fu=!1,yield vw(t.remoteStore,!1)}})}function IM(n,e,t){return M(this,null,function*(){let r=j(n),i=[],o=[];for(let s of e){let a,u=r.Tu.get(s);if(u&&u.length!==0){a=yield Va(r.localStore,Lt(u[0]));for(let l of u){let d=r.Pu.get(l),h=yield kq(r,d);h.snapshot&&o.push(h.snapshot)}}else{let l=yield Jx(r.localStore,s);a=yield Va(r.localStore,l),yield wD(r,gP(l),s,!1,a.resumeToken)}i.push(a)}return r.hu.J_(o),i})}function gP(n){return lx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Vq(n){return(function(t){return j(j(t).persistence).Ps()})(j(n).localStore)}function jq(n,e,t,r){return M(this,null,function*(){let i=j(n);if(i.fu)return void O(qi,"Ignoring unexpected query state notification.");let o=i.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield eP(i.localStore,fx(o[0])),a=gl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",We.EMPTY_BYTE_STRING);yield Hr(i,s,a);break}case"rejected":yield ja(i.localStore,e,!0),$a(i,e,r);break;default:$(64155,t)}})}function Bq(n,e,t){return M(this,null,function*(){let r=Dg(n);if(r.fu){for(let i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O(qi,"Adding an already active target "+i);continue}let o=yield Jx(r.localStore,i),s=yield Va(r.localStore,o);yield wD(r,gP(o),s.targetId,!1,s.resumeToken),wg(r.remoteStore,s)}for(let i of t)r.Tu.has(i)&&(yield ja(r.localStore,i,!1).then(()=>{Ba(r.remoteStore,i),$a(r,i)}).catch(Bi))}})}function Dg(n){let e=j(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sq.bind(null,e),e.hu.J_=_q.bind(null,e.eventManager),e.hu.pu=Iq.bind(null,e.eventManager),e}function bD(n){let e=j(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Aq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rq.bind(null,e),e}function Uq(n,e,t){let r=j(n);(function(o,s,a){return M(this,null,function*(){try{let u=yield s.getMetadata();if(yield(function(y,D){let R=j(y),x=Ge(D.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",F=>R.Ti.getBundleMetadata(F,D.id)).then(F=>!!F&&F.createTime.compareTo(x)>=0)})(o.localStore,u))return yield s.close(),a._completeWith((function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}})(u)),Promise.resolve(new Set);a._updateProgress(dP(u));let l=new Tw(u,s.serializer),d=yield s.Su();for(;d;){let g=yield l.Wa(d);g&&a._updateProgress(g),d=yield s.Su()}let h=yield l.za(o.localStore);return yield Hr(o,h.Ja,void 0),yield(function(y,D){let R=j(y);return R.persistence.runTransaction("Save bundle","readwrite",x=>R.Ti.saveBundleMetadata(x,D))})(o.localStore,u),a._completeWith(h.progress),Promise.resolve(h.ja)}catch(u){return un(qi,`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var SD=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return M(this,null,function*(){this.serializer=Pl(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return Qx(this.persistence,new qp,t.initialUser,this.serializer)}Du(t){return new Il($p.Vi,this.serializer)}bu(t){return new Kp}terminate(){return M(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Rw=class extends SD{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){q(this.persistence.referenceDelegate instanceof Hp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new jp(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new Il(r=>Hp.Vi(r,t),this.serializer)}},ig=class n extends SD{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return M(this,null,function*(){yield tm(n.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield bD(this.Mu.syncEngine),yield Ka(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return Qx(this.persistence,new qp,e.initialUser,this.serializer)}Cu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new jp(r,e.asyncQueue,t)}Fu(e,t){let r=new nI(t,this.persistence);return new tI(e.asyncQueue,r)}Du(e){let t=pD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new nw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oP(),fp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Kp}},Nw=class n extends ig{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return M(this,null,function*(){yield tm(n.prototype,this,"initialize").call(this,e);let t=this.Mu.syncEngine;this.sharedClientState instanceof tl&&(this.sharedClientState.syncEngine={Do:Fq.bind(null,t),vo:jq.bind(null,t),Co:Bq.bind(null,t),Ps:Vq.bind(null,t),bo:Oq.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.ji(r=>M(this,null,function*(){yield Lq(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}bu(e){let t=oP();if(!tl.C(t))throw new k(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=pD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tl(t,e.asyncQueue,r,e.clientId,e.initialUser)}},AD=(()=>{class n{initialize(t,r){return M(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_M(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xq.bind(null,this.syncEngine),yield vw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new Iw})()}createDatastore(t){let r=Pl(t.databaseInfo.databaseId),i=(function(s){return new dw(s)})(t.databaseInfo);return(function(s,a,u,l){return new gw(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new yw(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>_M(this.syncEngine,r,0),(function(){return Qp.C()?new Qp:new aw})())}createSyncEngine(t,r){return(function(o,s,a,u,l,d,h){let g=new Sw(o,s,a,u,l,d);return h&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){var t,r;yield(function(o){return M(this,null,function*(){let s=j(o);O(zo,"RemoteStore shutting down."),s.Ia.add(5),yield Wa(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function wM(n,e=10240){let t=0;return{read(){return M(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return M(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ha=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ze("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Mw=class{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new ot,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}getMetadata(){return M(this,null,function*(){return this.metadata.promise})}Su(){return M(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return M(this,null,function*(){let e=yield this.ku();if(e===null)return null;let t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);let i=yield this.Qu(r);return new Dw(JSON.parse(i),e.length+r)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return M(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Qu(e){return M(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");let t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return M(this,null,function*(){let e=yield this.Nu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var xw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(A.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield(function(i,o){return M(this,null,function*(){let s=j(i),a={documents:o.map(h=>yl(s.serializer,h))},u=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,pe.emptyPath(),a,o.length),l=new Map;u.forEach(h=>{let g=zH(s.serializer,h);l.set(g.key.toString(),g)});let d=[];return o.forEach(h=>{let g=l.get(h.toString());q(!!g,55234,{key:h}),d.push(g)}),d})})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=V.fromPath(r);this.mutations.push(new fl(i,this.precondition(i)))}),yield(function(r,i){return M(this,null,function*(){let o=j(r),s={writes:i.map(a=>vl(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,pe.emptyPath(),s)})})(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $(50498,{Wu:e.constructor.name});t=K.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(A.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(K.min())?Ue.exists(!1):Ue.updateTime(t):Ue.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(K.min()))throw new k(A.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(t)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Pw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new Dl(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>M(this,null,function*(){let e=new xw(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!Al(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Cx(t)}return!1}};var Vi="FirestoreClient",kw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=nl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){O(Vi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O(Vi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ot;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ya(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function q_(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O(Vi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>M(null,null,function*(){r.isEqual(i)||(yield Yx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{un("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{O("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{un("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function DM(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield RD(n);O(Vi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>yM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>yM(e.remoteStore,i)),n._onlineComponents=e})}function RD(n){return M(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O(Vi,"Using user provided OfflineComponentProvider");try{yield q_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===A.FAILED_PRECONDITION||i.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;un("Error using user provided cache. Falling back to memory cache: "+t),yield q_(n,new SD)}}else O(Vi,"Using default OfflineComponentProvider"),yield q_(n,new Rw(void 0));return n._offlineComponents})}function Tg(n){return M(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O(Vi,"Using user provided OnlineComponentProvider"),yield DM(n,n._uninitializedComponentsProvider._online)):(O(Vi,"Using default OnlineComponentProvider"),yield DM(n,new AD))),n._onlineComponents})}function mP(n){return RD(n).then(e=>e.persistence)}function ND(n){return RD(n).then(e=>e.localStore)}function yP(n){return Tg(n).then(e=>e.remoteStore)}function MD(n){return Tg(n).then(e=>e.syncEngine)}function $q(n){return Tg(n).then(e=>e.datastore)}function qa(n){return M(this,null,function*(){let e=yield Tg(n),t=e.eventManager;return t.onListen=wq.bind(null,e.syncEngine),t.onUnlisten=Tq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Dq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Cq.bind(null,e.syncEngine),t})}function Hq(n){return n.asyncQueue.enqueue(()=>M(null,null,function*(){let e=yield mP(n),t=yield yP(n);return e.setNetworkEnabled(!0),(function(i){let o=j(i);return o.Ia.delete(0),kl(o)})(t)}))}function qq(n){return n.asyncQueue.enqueue(()=>M(null,null,function*(){let e=yield mP(n),t=yield yP(n);return e.setNetworkEnabled(!1),(function(i){return M(this,null,function*(){let o=j(i);o.Ia.add(0),yield Wa(o),o.Aa.set("Offline")})})(t)}))}function zq(n,e){let t=new ot;return n.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return(function(i,o,s){return M(this,null,function*(){try{let a=yield(function(l,d){let h=j(l);return h.persistence.runTransaction("read document","readonly",g=>h.localDocuments.getDocument(g,d))})(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(A.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Ya(a,`Failed to get document '${o} from cache`);s.reject(u)}})})(yield ND(n),e,t)})),t.promise}function vP(n,e,t={}){let r=new ot;return n.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return(function(o,s,a,u,l){let d=new Ha({next:g=>{d.Ou(),s.enqueueAndForget(()=>_D(o,h));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(A.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new k(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),h=new Tl(Ga(a.path),d,{includeMetadataChanges:!0,ka:!0});return ED(o,h)})(yield qa(n),n.asyncQueue,e,t,r)})),r.promise}function Gq(n,e){let t=new ot;return n.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return(function(i,o,s){return M(this,null,function*(){try{let a=yield zp(i,o,!0),u=new rg(o,a.qs),l=u.nu(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=Ya(a,`Failed to execute query '${o} against cache`);s.reject(u)}})})(yield ND(n),e,t)})),t.promise}function EP(n,e,t={}){let r=new ot;return n.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return(function(o,s,a,u,l){let d=new Ha({next:g=>{d.Ou(),s.enqueueAndForget(()=>_D(o,h)),g.fromCache&&u.source==="server"?l.reject(new k(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),h=new Tl(a,d,{includeMetadataChanges:!0,ka:!0});return ED(o,h)})(yield qa(n),n.asyncQueue,e,t,r)})),r.promise}function Wq(n,e){let t=new Ha(e);return n.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return(function(i,o){j(i).Da.add(o),o.next()})(yield qa(n),t)})),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return(function(i,o){j(i).Da.delete(o)})(yield qa(n),t)}))}}function Kq(n,e,t,r){let i=(function(s,a){let u;return u=typeof s=="string"?Zw().encode(s):s,(function(d,h){return new Mw(d,h)})((function(d,h){if(d instanceof Uint8Array)return wM(d,h);if(d instanceof ArrayBuffer)return wM(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(u),a)})(t,Pl(e));n.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){Uq(yield MD(n),i,r)}))}function Qq(n,e){return n.asyncQueue.enqueue(()=>M(null,null,function*(){return(function(r,i){let o=j(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))})(yield ND(n),e)}))}function _P(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var TM=new Map;var IP="firestore.googleapis.com",CM=!0,og=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IP,this.ssl=CM}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:CM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$x;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nq)throw new k(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_P((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(A.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(A.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(A.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Go=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new og({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new og(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new z_;switch(r.type){case"firstParty":return new Q_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=TM.get(t);r&&(O("ComponentProvider","Removing Datastore"),TM.delete(t),r.terminate())})(this),Promise.resolve()}};function wP(n,e,t,r={}){var i;n=ve(n,Go);let o=im(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(QT(`https://${u}`),ZT("Firestore",!0)),s.host!==IP&&s.host!==u&&un("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!td(l,a)&&(n._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Je.MOCK_USER;else{d=YT(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new k(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Je(g)}n._authCredentials=new G_(new hp(d,h))}}var pt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Oe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Sl(t,n._jsonSchema))return new n(e,r||null,new V(pe.fromString(t.referencePath)))}};Oe._jsonSchemaVersion="firestore/documentReference/1.0",Oe._jsonSchema={type:et("string",Oe._jsonSchemaVersion),referencePath:et("string")};var or=class n extends pt{constructor(e,t,r){super(e,t,Ga(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new V(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function DP(n,e,...t){if(n=Ke(n),Xw("collection","path",e),n instanceof Go){let r=pe.fromString(e,...t);return EN(r),new or(n,null,r)}{if(!(n instanceof Oe||n instanceof or))throw new k(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return EN(r),new or(n.firestore,null,r)}}function Yq(n,e){if(n=ve(n,Go),Xw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(A.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new pt(n,null,(function(r){return new Rn(pe.emptyPath(),r)})(e))}function xD(n,e,...t){if(n=Ke(n),arguments.length===1&&(e=nl.newId()),Xw("doc","path",e),n instanceof Go){let r=pe.fromString(e,...t);return vN(r),new Oe(n,null,new V(r))}{if(!(n instanceof Oe||n instanceof or))throw new k(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return vN(r),new Oe(n.firestore,n instanceof or?n.converter:null,new V(r))}}function TP(n,e){return n=Ke(n),e=Ke(e),(n instanceof Oe||n instanceof or)&&(e instanceof Oe||e instanceof or)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function CP(n,e){return n=Ke(n),e=Ke(e),n instanceof pt&&e instanceof pt&&n.firestore===e.firestore&&Ml(n._query,e._query)&&n.converter===e.converter}var bM="AsyncQueue",sg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Dl(this,"async_queue_retry"),this.oc=()=>{let r=fp();r&&O(bM,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=fp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=fp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ot;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return M(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ui(e))throw e;O(bM,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ze("INTERNAL UNHANDLED ERROR: ",SM(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Ew.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&$(47125,{hc:SM(this.tc)})}verifyOperationInProgress(){}Pc(){return M(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function SM(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Ow(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Fw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ot,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var xie=-1,Le=class extends Go{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new sg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new sg(e),this._firestoreClient=void 0,yield e}})}};function bP(n,e){let t=typeof n=="object"?n:Eu(),r=typeof n=="string"?n:e||Dp,i=am(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=KT("firestore");o&&wP(i,...o)}return i}function Vt(n){if(n._terminated)throw new k(A.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||SP(n),n._firestoreClient}function SP(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,d){return new sI(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_P(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new kw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}function Zq(n,e){un("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return AP(n,AD.provider,{build:r=>new ig(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function Xq(n){return M(this,null,function*(){un("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();AP(n,AD.provider,{build:t=>new Nw(t,e.cacheSizeBytes)})})}function AP(n,e,t){if((n=ve(n,Le))._firestoreClient||n._terminated)throw new k(A.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(A.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},SP(n)}function Jq(n){if(n._initialized&&!n._terminated)throw new k(A.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ot;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>M(null,null,function*(){try{yield(function(r){return M(this,null,function*(){if(!Ni.C())return Promise.resolve();let i=r+Kx;yield Ni.delete(i)})})(pD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function ez(n){return(function(t){let r=new ot;return t.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return Nq(yield MD(t),r)})),r.promise})(Vt(n=ve(n,Le)))}function tz(n){return Hq(Vt(n=ve(n,Le)))}function nz(n){return qq(Vt(n=ve(n,Le)))}function rz(n,e){let t=Vt(n=ve(n,Le)),r=new Fw;return Kq(t,n._databaseId,e,r),r}function iz(n,e){return Qq(Vt(n=ve(n,Le)),e).then(t=>t?new pt(n,null,t.query):null)}var Fr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(We.fromBase64String(e))}catch(t){throw new k(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(We.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Fr._jsonSchemaVersion="firestore/bytes/1.0",Fr._jsonSchema={type:et("string",Fr._jsonSchemaVersion),bytes:et("string")};var ji=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ur=class{constructor(e){this._methodName=e}};var Si=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Sl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Si._jsonSchemaVersion="firestore/geoPoint/1.0",Si._jsonSchema={type:et("string",Si._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};var Ai=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new k(A.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:et("string",Ai._jsonSchemaVersion),vectorValues:et("object")};var oz=/^__.*__$/,Lw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oi(e,this.data,t,this.fieldTransforms)}},ag=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function RP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ec:n})}}var ug=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return cg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(RP(this.Ec)&&oz.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Vw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Pl(e)}Dc(e,t,r,i=!1){return new ug({Ec:e,methodName:t,bc:r,path:st.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Qo(n){let e=n._freezeSettings(),t=Pl(n._databaseId);return new Vw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cg(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);OD("Data must be an object, but it was:",s,r);let a=xP(r,s),u,l;if(o.merge)u=new Jt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let h of o.mergeFields){let g=Hw(e,h,t);if(!s.contains(g))throw new k(A.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);kP(d,g)||d.push(g)}u=new Jt(d),l=s.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,l=s.fieldTransforms;return new Lw(new St(a),u,l)}var Cl=class n extends Ur{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function NP(n,e,t){return new ug({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var jw=class n extends Ur{_toFieldTransform(e){return new $o(e.path,new Pi)}isEqual(e){return e instanceof n}},Bw=class n extends Ur{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=NP(this,e,!0),r=this.vc.map(o=>Yo(o,t)),i=new jr(r);return new $o(e.path,i)}isEqual(e){return e instanceof n&&td(this.vc,e.vc)}},Uw=class n extends Ur{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=NP(this,e,!0),r=this.vc.map(o=>Yo(o,t)),i=new Br(r);return new $o(e.path,i)}isEqual(e){return e instanceof n&&td(this.vc,e.vc)}},$w=class n extends Ur{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new ki(e.serializer,vx(e.serializer,this.Cc));return new $o(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function PD(n,e,t,r){let i=n.Dc(1,e,t);OD("Data must be an object, but it was:",i,r);let o=[],s=St.empty();$i(r,(u,l)=>{let d=FD(e,u,t);l=Ke(l);let h=i.gc(d);if(l instanceof Cl)o.push(d);else{let g=Yo(l,h);g!=null&&(o.push(d),s.set(d,g))}});let a=new Jt(o);return new ag(s,a,i.fieldTransforms)}function kD(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[Hw(e,r,t)],u=[i];if(o.length%2!=0)throw new k(A.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Hw(e,o[g])),u.push(o[g+1]);let l=[],d=St.empty();for(let g=a.length-1;g>=0;--g)if(!kP(l,a[g])){let y=a[g],D=u[g];D=Ke(D);let R=s.gc(y);if(D instanceof Cl)l.push(y);else{let x=Yo(D,R);x!=null&&(l.push(y),d.set(y,x))}}let h=new Jt(l);return new ag(d,h,s.fieldTransforms)}function MP(n,e,t,r=!1){return Yo(t,n.Dc(r?4:3,e))}function Yo(n,e){if(PP(n=Ke(n)))return OD("Unsupported field value:",e,n),xP(n,e);if(n instanceof Ur)return(function(r,i){if(!RP(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Yo(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ke.fromDate(r);return{timestampValue:Oa(i.serializer,o)}}if(r instanceof ke){let o=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oa(i.serializer,o)}}if(r instanceof Si)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fr)return{bytesValue:Sx(i.serializer,r._byteString)};if(r instanceof Oe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ai)return(function(s,a){return{mapValue:{fields:{[oD]:{stringValue:sD},[Na]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return lD(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${gg(r)}`)})(n,e)}function xP(n,e){let t={};return YM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$i(n,(r,i)=>{let o=Yo(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function PP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ke||n instanceof Si||n instanceof Fr||n instanceof Oe||n instanceof Ur||n instanceof Ai)}function OD(n,e,t){if(!PP(t)||!PM(t)){let r=gg(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Hw(n,e,t){if((e=Ke(e))instanceof ji)return e._internalPath;if(typeof e=="string")return FD(n,e);throw cg("Field path arguments must be of type string or ",n,!1,void 0,t)}var sz=new RegExp("[~\\*/\\[\\]]");function FD(n,e,t){if(e.search(sz)>=0)throw cg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ji(...e.split("."))._internalPath}catch{throw cg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(A.INVALID_ARGUMENT,a+n+u)}function kP(n,e){return n.some(t=>t.isEqual(e))}var Wo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(bg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qw=class extends Wo{data(){return super.data()}};function bg(n,e){return typeof e=="string"?FD(n,e):e instanceof ji?e._internalPath:e._delegate._internalPath}function OP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bl=class{},Ko=class extends bl{};function FP(n,e,...t){let r=[];e instanceof bl&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof zw).length,a=o.filter(u=>u instanceof lg).length;if(s>1||s>0&&a>0)throw new k(A.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var lg=class n extends Ko{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return BP(e._query,t),new pt(e.firestore,e.converter,EI(e._query,t))}_parse(e){let t=Qo(e.firestore);return(function(o,s,a,u,l,d,h){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(A.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){RM(h,d);let D=[];for(let R of h)D.push(AM(u,o,R));g={arrayValue:{values:D}}}else g=AM(u,o,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||RM(h,d),g=MP(a,s,h,d==="in"||d==="not-in");return fe.create(l,d,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function LP(n,e,t){let r=e,i=bg("where",n);return lg._create(i,r,t)}var zw=class n extends bl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:we.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)BP(s,u),s=EI(s,u)})(e._query,t),new pt(e.firestore,e.converter,EI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Gw=class n extends Ko{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new k(A.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(A.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bo(o,s)})(e._query,this._field,this._direction);return new pt(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Rn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function VP(n,e="asc"){let t=e,r=bg("orderBy",n);return Gw._create(r,t)}var dg=class n extends Ko{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new pt(e.firestore,e.converter,Ap(e._query,this._limit,this._limitType))}};function az(n){return kM("limit",n),dg._create("limit",n,"F")}function uz(n){return kM("limitToLast",n),dg._create("limitToLast",n,"L")}var fg=class n extends Ko{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=jP(e,this.type,this._docOrFields,this._inclusive);return new pt(e.firestore,e.converter,(function(i,o){return new Rn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function cz(...n){return fg._create("startAt",n,!0)}function lz(...n){return fg._create("startAfter",n,!1)}var hg=class n extends Ko{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=jP(e,this.type,this._docOrFields,this._inclusive);return new pt(e.firestore,e.converter,(function(i,o){return new Rn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,t))}};function dz(...n){return hg._create("endBefore",n,!1)}function fz(...n){return hg._create("endAt",n,!0)}function jP(n,e,t,r){if(t[0]=Ke(t[0]),t[0]instanceof Wo)return(function(o,s,a,u,l){if(!u)throw new k(A.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of Ea(o))if(h.field.isKeyField())d.push(jo(s,u.key));else{let g=u.data.field(h.field);if(Eg(g))throw new k(A.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=h.field.canonicalString();throw new k(A.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new ar(d,l)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Qo(n.firestore);return(function(s,a,u,l,d,h){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(A.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<d.length;D++){let R=d[D];if(g[D].field.isKeyField()){if(typeof R!="string")throw new k(A.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!uD(s)&&R.indexOf("/")!==-1)throw new k(A.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);let x=s.path.child(pe.fromString(R));if(!V.isDocumentKey(x))throw new k(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let F=new V(x);y.push(jo(a,F))}else{let x=MP(u,l,R);y.push(x)}}return new ar(y,h)})(n._query,n.firestore._databaseId,i,e,t,r)}}function AM(n,e,t){if(typeof(t=Ke(t))=="string"){if(t==="")throw new k(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uD(e)&&t.indexOf("/")!==-1)throw new k(A.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(pe.fromString(t));if(!V.isDocumentKey(r))throw new k(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jo(n,new V(r))}if(t instanceof Oe)return jo(n,t._key);throw new k(A.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gg(t)}.`)}function RM(n,e){if(!Array.isArray(n)||n.length===0)throw new k(A.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BP(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new k(A.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(A.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var pg=class{convertValue(e,t="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return $i(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Na].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Pe(s.doubleValue));return new Ai(o)}convertGeoPoint(e){return new Si(Pe(e.latitude),Pe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=_g(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cl(e));default:return null}}convertTimestamp(e){let t=Lr(e);return new ke(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=pe.fromString(e);q(Vx(r),9688,{name:e});let i=new Ra(r.get(1),r.get(3)),o=new V(r.popFirst(5));return i.isEqual(t)||ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Sg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ww=class extends pg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,t)}};var Or=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Sn=class n extends Wo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new k(A.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Sn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sn._jsonSchema={type:et("string",Sn._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};var Ia=class extends Sn{data(e={}){return super.data(e)}},An=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ia(this._firestore,this._userDataWriter,r.key,r,new Or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ia(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ia(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:hz(a.type),doc:u,oldIndex:l,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new k(A.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function hz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:n})}}function pz(n,e){return n instanceof Sn&&e instanceof Sn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof An&&e instanceof An&&n._firestore===e._firestore&&CP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function UP(n){n=ve(n,Oe);let e=ve(n.firestore,Le);return vP(Vt(e),n._key).then(t=>VD(e,n,t))}An._jsonSchemaVersion="firestore/querySnapshot/1.0",An._jsonSchema={type:et("string",An._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};var $r=class extends pg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,t)}};function gz(n){n=ve(n,Oe);let e=ve(n.firestore,Le),t=Vt(e),r=new $r(e);return zq(t,n._key).then(i=>new Sn(e,r,n._key,i,new Or(i!==null&&i.hasLocalMutations,!0),n.converter))}function mz(n){n=ve(n,Oe);let e=ve(n.firestore,Le);return vP(Vt(e),n._key,{source:"server"}).then(t=>VD(e,n,t))}function $P(n){n=ve(n,pt);let e=ve(n.firestore,Le),t=Vt(e),r=new $r(e);return OP(n._query),EP(t,n._query).then(i=>new An(e,r,n,i))}function yz(n){n=ve(n,pt);let e=ve(n.firestore,Le),t=Vt(e),r=new $r(e);return Gq(t,n._query).then(i=>new An(e,r,n,i))}function vz(n){n=ve(n,pt);let e=ve(n.firestore,Le),t=Vt(e),r=new $r(e);return EP(t,n._query,{source:"server"}).then(i=>new An(e,r,n,i))}function HP(n,e,t){n=ve(n,Oe);let r=ve(n.firestore,Le),i=Sg(n.converter,e,t);return Ag(r,[Cg(Qo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ue.none())])}function qP(n,e,t,...r){n=ve(n,Oe);let i=ve(n.firestore,Le),o=Qo(i),s;return s=typeof(e=Ke(e))=="string"||e instanceof ji?kD(o,"updateDoc",n._key,e,t,r):PD(o,"updateDoc",n._key,e),Ag(i,[s.toMutation(n._key,Ue.exists(!0))])}function zP(n){return Ag(ve(n.firestore,Le),[new Fi(n._key,Ue.none())])}function GP(n,e){let t=ve(n.firestore,Le),r=xD(n),i=Sg(n.converter,e);return Ag(t,[Cg(Qo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function LD(n,...e){var t,r,i;n=Ke(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Ow(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Ow(e[s])){let h=e[s];e[s]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,l,d;if(n instanceof Oe)l=ve(n.firestore,Le),d=Ga(n._key.path),u={next:h=>{e[s]&&e[s](VD(l,n,h))},error:e[s+1],complete:e[s+2]};else{let h=ve(n,pt);l=ve(h.firestore,Le),d=h._query;let g=new $r(l);u={next:y=>{e[s]&&e[s](new An(l,g,h,y))},error:e[s+1],complete:e[s+2]},OP(n._query)}return(function(g,y,D,R){let x=new Ha(R),F=new Tl(y,x,D);return g.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return ED(yield qa(g),F)})),()=>{x.Ou(),g.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return _D(yield qa(g),F)}))}})(Vt(l),d,a,u)}function Ez(n,e){return Wq(Vt(n=ve(n,Le)),Ow(e)?e:{next:e})}function Ag(n,e){return(function(r,i){let o=new ot;return r.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return bq(yield MD(r),i,o)})),o.promise})(Vt(n),e)}function VD(n,e,t){let r=t.docs.get(e._key),i=new $r(n);return new Sn(n,i,e._key,r,new Or(t.hasPendingWrites,t.fromCache),e.converter)}var _z={maxAttempts:5};var NM=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qo(e)}set(e,t,r){this._verifyNotCommitted();let i=Ci(e,this._firestore),o=Sg(i.converter,t,r),s=Cg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ue.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Ci(e,this._firestore),s;return s=typeof(t=Ke(t))=="string"||t instanceof ji?kD(this._dataReader,"WriteBatch.update",o._key,t,r,i):PD(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ci(e,this._firestore);return this._mutations=this._mutations.concat(new Fi(t._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(A.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ci(n,e){if((n=Ke(n)).firestore!==e)throw new k(A.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Kw=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qo(e)}get(e){let t=Ci(e,this._firestore),r=new Ww(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return $(24041);let o=i[0];if(o.isFoundDocument())return new Wo(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Wo(this._firestore,r,t._key,null,t.converter);throw $(18433,{doc:o})})}set(e,t,r){let i=Ci(e,this._firestore),o=Sg(i.converter,t,r),s=Cg(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Ci(e,this._firestore),s;return s=typeof(t=Ke(t))=="string"||t instanceof ji?kD(this._dataReader,"Transaction.update",o._key,t,r,i):PD(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Ci(e,this._firestore);return this._transaction.delete(t._key),this}};var Qw=class extends Kw{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ci(e,this._firestore),r=new $r(this._firestore);return super.get(e).then(i=>new Sn(this._firestore,r,t._key,i._document,new Or(!1,!1),t.converter))}};function Iz(n,e,t){n=ve(n,Le);let r=Object.assign(Object.assign({},_z),t);return(function(o){if(o.maxAttempts<1)throw new k(A.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let u=new ot;return o.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){let l=yield $q(o);new Pw(o.asyncQueue,l,a,s,u).zu()})),u.promise})(Vt(n),i=>e(new Qw(n,i)),r)}function wz(){return new Cl("deleteField")}function Pie(){return new jw("serverTimestamp")}function kie(...n){return new Bw("arrayUnion",n)}function Oie(...n){return new Uw("arrayRemove",n)}function Dz(n){return new $w("increment",n)}(function(e,t=!0){(function(i){za=i})(tC),vu(new yu("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Le(new W_(r.getProvider("auth-internal")),new Y_(s,r.getProvider("app-check-internal")),(function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(l.options.projectId,d)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Et(pN,gN,e),Et(pN,gN,"esm2017")})();var Rg=function(){return Rg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Rg.apply(this,arguments)};var Cz={includeMetadataChanges:!1};function jD(n,e){return e===void 0&&(e=Cz),new te(function(t){var r=LD(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function WP(n){return jD(n,{includeMetadataChanges:!0})}function KP(n,e){return e===void 0&&(e={}),WP(n).pipe(le(function(t){return BD(t,e)}))}function BD(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Rg(Rg({},r),(t={},t[e.idField]=n.id,t))}function QP(n){return jD(n,{includeMetadataChanges:!0}).pipe(le(function(e){return e.docs}))}function YP(n,e){return e===void 0&&(e={}),QP(n).pipe(le(function(t){return t.map(function(r){return BD(r,e)})}))}var Ol=class{constructor(e){return e}},ZP="firestore",UD=class{constructor(){return ra(ZP)}};var $D=new z("angularfire2.firestore-instances");function bz(n,e){let t=Fc(ZP,n,e);return t&&new Ol(t)}function Sz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ol(r)}}var Az={provide:UD,deps:[[new Ut,$D]]},Rz={provide:Ol,useFactory:bz,deps:[[new Ut,$D],Mr]};function _oe(n,...e){return Et("angularfire",yi.full,"fst"),gn([Rz,Az,{provide:$D,useFactory:Sz(n),multi:!0,deps:[de,Me,vi,So,[new Ut,Bc],[new Ut,ia],...e]}])}var Ioe=Ye(YP,!0);var woe=Ye(KP,!0);var Doe=Ye(GP,!0,2);var Toe=Ye(DP,!0,2);var Coe=Ye(zP,!0,2);var boe=Ye(xD,!0,2);var Soe=Ye(UP,!0);var Aoe=Ye($P,!0);var Roe=Ye(bP,!0);var Noe=Ye(VP,!0,2),Moe=Ye(FP,!0,2);var xoe=Ye(HP,!0,2);var Poe=Ye(qP,!0,2);var koe=Ye(LP,!0,2);export{te as a,Fe as b,Su as c,Kr as d,Qr as e,be as f,Y as g,Zk as h,le as i,sO as j,aO as k,uO as l,xt as m,cO as n,fr as o,MC as p,hr as q,xC as r,jd as s,fO as t,Bd as u,ut as v,hO as w,$m as x,U as y,yr as z,Wd as A,H as B,Fn as C,z as D,Q as E,P as F,gn as G,He as H,ab as I,ub as J,wb as K,Db as L,Me as M,Un as N,co as O,Ut as P,yo as Q,Bf as R,_n as S,vo as T,HS as U,qS as V,dF as W,Ct as X,de as Y,qv as Z,_o as _,xe as $,sE as aa,Ar as ba,zn as ca,$A as da,qA as ea,zA as fa,Bs as ga,nh as ha,Gn as ia,QA as ja,ih as ka,YA as la,hE as ma,pE as na,oh as oa,gE as pa,mE as qa,ZA as ra,JA as sa,e0 as ta,wV as ua,t0 as va,sh as wa,TV as xa,CV as ya,vE as za,EE as Aa,bV as Ba,s0 as Ca,LV as Da,QV as Ea,f0 as Fa,_E as Ga,h0 as Ha,g0 as Ia,XV as Ja,m0 as Ka,JV as La,ej as Ma,oj as Na,sj as Oa,aj as Pa,dj as Qa,hj as Ra,gj as Sa,Wn as Ta,Ej as Ua,ME as Va,Us as Wa,dc as Xa,Kn as Ya,Kj as Za,q0 as _a,Qj as $a,Zj as ab,LE as bb,Kee as cb,Qee as db,y2 as eb,_2 as fb,I2 as gb,Yt as hb,Rr as ib,p_ as jb,Jn as kb,Qh as lb,XB as mb,rU as nb,XR as ob,yi as pb,Fc as qb,ra as rb,vi as sb,Ye as tb,Mr as ub,So as vb,Qne as wb,Yne as xb,ia as yb,Bc as zb,pie as Ab,gie as Bb,K$ as Cb,un as Db,Rie as Eb,k as Fb,st as Gb,V as Hb,X$ as Ib,ve as Jb,ke as Kb,Mie as Lb,Ra as Mb,wP as Nb,Oe as Ob,DP as Pb,Yq as Qb,xD as Rb,TP as Sb,CP as Tb,xie as Ub,Vt as Vb,Zq as Wb,Xq as Xb,Jq as Yb,ez as Zb,tz as _b,nz as $b,rz as ac,iz as bc,Fr as cc,ji as dc,Si as ec,FP as fc,LP as gc,VP as hc,az as ic,uz as jc,cz as kc,lz as lc,dz as mc,fz as nc,pg as oc,Sn as pc,Ia as qc,An as rc,pz as sc,UP as tc,gz as uc,mz as vc,$P as wc,yz as xc,vz as yc,HP as zc,qP as Ac,zP as Bc,GP as Cc,LD as Dc,Ez as Ec,Ag as Fc,NM as Gc,Iz as Hc,wz as Ic,Pie as Jc,kie as Kc,Oie as Lc,Dz as Mc,Ol as Nc,_oe as Oc,Ioe as Pc,woe as Qc,Doe as Rc,Toe as Sc,Coe as Tc,boe as Uc,Soe as Vc,Aoe as Wc,Roe as Xc,Noe as Yc,Moe as Zc,xoe as _c,Poe as $c,koe as ad};
