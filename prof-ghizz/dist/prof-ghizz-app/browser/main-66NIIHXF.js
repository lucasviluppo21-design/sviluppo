import{A as up,B as MO,C as Bs,D as $a,E as u1,F as d1,G as NO,H as Pc,I as f1,J as Gn,K as Ti,L as zE,a as CO,b as i1,c as EO,d as IO,e as SO,f as VE,g as o1,h as jE,i as sp,j as s1,k as a1,l as c1,m as b0,n as AO,o as BE,p as UE,q as ap,r as TO,s as DO,t as Lu,u as cp,v as lp,w as l1,x as wn,y as Qi,z as Nc}from"./chunk-WLKSXRLX.js";import{a as Ve,b as Vt,c as tr,e as GH,f as FE,g as ee}from"./chunk-WTI2L5DI.js";var c$=tr((f4e,a$)=>{"use strict";a$.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Qd=tr(Gh=>{"use strict";var mR,epe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Gh.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Gh.getSymbolTotalCodewords=function(e){return epe[e]};Gh.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Gh.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');mR=e};Gh.isKanjiModeEnabled=function(){return typeof mR<"u"};Gh.toSJIS=function(e){return mR(e)}});var uE=tr(Ra=>{"use strict";Ra.L={bit:1};Ra.M={bit:0};Ra.Q={bit:3};Ra.H={bit:2};function tpe(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return Ra.L;case"m":case"medium":return Ra.M;case"q":case"quartile":return Ra.Q;case"h":case"high":return Ra.H;default:throw new Error("Unknown EC Level: "+n)}}Ra.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};Ra.from=function(e,t){if(Ra.isValid(e))return e;try{return tpe(e)}catch{return t}}});var d$=tr((g4e,u$)=>{"use strict";function l$(){this.buffer=[],this.length=0}l$.prototype={get:function(n){let e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};u$.exports=l$});var h$=tr((m4e,f$)=>{"use strict";function P_(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}P_.prototype.set=function(n,e,t,r){let i=n*this.size+e;this.data[i]=t,r&&(this.reservedBit[i]=!0)};P_.prototype.get=function(n,e){return this.data[n*this.size+e]};P_.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};P_.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};f$.exports=P_});var p$=tr(dE=>{"use strict";var npe=Qd().getSymbolSize;dE.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,r=npe(e),i=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let s=1;s<t-1;s++)o[s]=o[s-1]-i;return o.push(6),o.reverse()};dE.getPositions=function(e){let t=[],r=dE.getRowColCoords(e),i=r.length;for(let o=0;o<i;o++)for(let s=0;s<i;s++)o===0&&s===0||o===0&&s===i-1||o===i-1&&s===0||t.push([r[o],r[s]]);return t}});var v$=tr(m$=>{"use strict";var rpe=Qd().getSymbolSize,g$=7;m$.getPositions=function(e){let t=rpe(e);return[[0,0],[t-g$,0],[0,t-g$]]}});var y$=tr(mr=>{"use strict";mr.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Wh={N1:3,N2:3,N3:40,N4:10};mr.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};mr.from=function(e){return mr.isValid(e)?parseInt(e,10):void 0};mr.getPenaltyN1=function(e){let t=e.size,r=0,i=0,o=0,s=null,a=null;for(let c=0;c<t;c++){i=o=0,s=a=null;for(let l=0;l<t;l++){let u=e.get(c,l);u===s?i++:(i>=5&&(r+=Wh.N1+(i-5)),s=u,i=1),u=e.get(l,c),u===a?o++:(o>=5&&(r+=Wh.N1+(o-5)),a=u,o=1)}i>=5&&(r+=Wh.N1+(i-5)),o>=5&&(r+=Wh.N1+(o-5))}return r};mr.getPenaltyN2=function(e){let t=e.size,r=0;for(let i=0;i<t-1;i++)for(let o=0;o<t-1;o++){let s=e.get(i,o)+e.get(i,o+1)+e.get(i+1,o)+e.get(i+1,o+1);(s===4||s===0)&&r++}return r*Wh.N2};mr.getPenaltyN3=function(e){let t=e.size,r=0,i=0,o=0;for(let s=0;s<t;s++){i=o=0;for(let a=0;a<t;a++)i=i<<1&2047|e.get(s,a),a>=10&&(i===1488||i===93)&&r++,o=o<<1&2047|e.get(a,s),a>=10&&(o===1488||o===93)&&r++}return r*Wh.N3};mr.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let o=0;o<r;o++)t+=e.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*Wh.N4};function ipe(n,e,t){switch(n){case mr.Patterns.PATTERN000:return(e+t)%2===0;case mr.Patterns.PATTERN001:return e%2===0;case mr.Patterns.PATTERN010:return t%3===0;case mr.Patterns.PATTERN011:return(e+t)%3===0;case mr.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case mr.Patterns.PATTERN101:return e*t%2+e*t%3===0;case mr.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case mr.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}mr.applyMask=function(e,t){let r=t.size;for(let i=0;i<r;i++)for(let o=0;o<r;o++)t.isReserved(o,i)||t.xor(o,i,ipe(e,o,i))};mr.getBestMask=function(e,t){let r=Object.keys(mr.Patterns).length,i=0,o=1/0;for(let s=0;s<r;s++){t(s),mr.applyMask(s,e);let a=mr.getPenaltyN1(e)+mr.getPenaltyN2(e)+mr.getPenaltyN3(e)+mr.getPenaltyN4(e);mr.applyMask(s,e),a<o&&(o=a,i=s)}return i}});var yR=tr(vR=>{"use strict";var Zd=uE(),fE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],hE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];vR.getBlocksCount=function(e,t){switch(t){case Zd.L:return fE[(e-1)*4+0];case Zd.M:return fE[(e-1)*4+1];case Zd.Q:return fE[(e-1)*4+2];case Zd.H:return fE[(e-1)*4+3];default:return}};vR.getTotalCodewordsCount=function(e,t){switch(t){case Zd.L:return hE[(e-1)*4+0];case Zd.M:return hE[(e-1)*4+1];case Zd.Q:return hE[(e-1)*4+2];case Zd.H:return hE[(e-1)*4+3];default:return}}});var _$=tr(gE=>{"use strict";var k_=new Uint8Array(512),pE=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)k_[t]=e,pE[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)k_[t]=k_[t-255]})();gE.log=function(e){if(e<1)throw new Error("log("+e+")");return pE[e]};gE.exp=function(e){return k_[e]};gE.mul=function(e,t){return e===0||t===0?0:k_[pE[e]+pE[t]]}});var w$=tr(R_=>{"use strict";var _R=_$();R_.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++)r[i+o]^=_R.mul(e[i],t[o]);return r};R_.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let i=r[0];for(let s=0;s<t.length;s++)r[s]^=_R.mul(t[s],i);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};R_.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=R_.mul(t,new Uint8Array([1,_R.exp(r)]));return t}});var C$=tr((C4e,x$)=>{"use strict";var b$=w$();function wR(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}wR.prototype.initialize=function(e){this.degree=e,this.genPoly=b$.generateECPolynomial(this.degree)};wR.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=b$.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){let o=new Uint8Array(this.degree);return o.set(r,i),o}return r};x$.exports=wR});var bR=tr(E$=>{"use strict";E$.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var xR=tr(pu=>{"use strict";var I$="[0-9]+",ope="[A-Z $%*+\\-./:]+",O_="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";O_=O_.replace(/u/g,"\\u");var spe="(?:(?![A-Z0-9 $%*+\\-./:]|"+O_+`)(?:.|[\r
]))+`;pu.KANJI=new RegExp(O_,"g");pu.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");pu.BYTE=new RegExp(spe,"g");pu.NUMERIC=new RegExp(I$,"g");pu.ALPHANUMERIC=new RegExp(ope,"g");var ape=new RegExp("^"+O_+"$"),cpe=new RegExp("^"+I$+"$"),lpe=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");pu.testKanji=function(e){return ape.test(e)};pu.testNumeric=function(e){return cpe.test(e)};pu.testAlphanumeric=function(e){return lpe.test(e)}});var Xd=tr(bi=>{"use strict";var upe=bR(),CR=xR();bi.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};bi.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};bi.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};bi.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};bi.MIXED={bit:-1};bi.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!upe.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};bi.getBestModeForData=function(e){return CR.testNumeric(e)?bi.NUMERIC:CR.testAlphanumeric(e)?bi.ALPHANUMERIC:CR.testKanji(e)?bi.KANJI:bi.BYTE};bi.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};bi.isValid=function(e){return e&&e.bit&&e.ccBits};function dpe(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return bi.NUMERIC;case"alphanumeric":return bi.ALPHANUMERIC;case"kanji":return bi.KANJI;case"byte":return bi.BYTE;default:throw new Error("Unknown mode: "+n)}}bi.from=function(e,t){if(bi.isValid(e))return e;try{return dpe(e)}catch{return t}}});var M$=tr(Kh=>{"use strict";var mE=Qd(),fpe=yR(),S$=uE(),Jd=Xd(),ER=bR(),T$=7973,A$=mE.getBCHDigit(T$);function hpe(n,e,t){for(let r=1;r<=40;r++)if(e<=Kh.getCapacity(r,t,n))return r}function D$(n,e){return Jd.getCharCountIndicator(n,e)+4}function ppe(n,e){let t=0;return n.forEach(function(r){let i=D$(r.mode,e);t+=i+r.getBitsLength()}),t}function gpe(n,e){for(let t=1;t<=40;t++)if(ppe(n,t)<=Kh.getCapacity(t,e,Jd.MIXED))return t}Kh.from=function(e,t){return ER.isValid(e)?parseInt(e,10):t};Kh.getCapacity=function(e,t,r){if(!ER.isValid(e))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Jd.BYTE);let i=mE.getSymbolTotalCodewords(e),o=fpe.getTotalCodewordsCount(e,t),s=(i-o)*8;if(r===Jd.MIXED)return s;let a=s-D$(r,e);switch(r){case Jd.NUMERIC:return Math.floor(a/10*3);case Jd.ALPHANUMERIC:return Math.floor(a/11*2);case Jd.KANJI:return Math.floor(a/13);case Jd.BYTE:default:return Math.floor(a/8)}};Kh.getBestVersionForData=function(e,t){let r,i=S$.from(t,S$.M);if(Array.isArray(e)){if(e.length>1)return gpe(e,i);if(e.length===0)return 1;r=e[0]}else r=e;return hpe(r.mode,r.getLength(),i)};Kh.getEncodedBits=function(e){if(!ER.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;mE.getBCHDigit(t)-A$>=0;)t^=T$<<mE.getBCHDigit(t)-A$;return e<<12|t}});var R$=tr(k$=>{"use strict";var IR=Qd(),P$=1335,mpe=21522,N$=IR.getBCHDigit(P$);k$.getEncodedBits=function(e,t){let r=e.bit<<3|t,i=r<<10;for(;IR.getBCHDigit(i)-N$>=0;)i^=P$<<IR.getBCHDigit(i)-N$;return(r<<10|i)^mpe}});var L$=tr((D4e,O$)=>{"use strict";var vpe=Xd();function Qm(n){this.mode=vpe.NUMERIC,this.data=n.toString()}Qm.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Qm.prototype.getLength=function(){return this.data.length};Qm.prototype.getBitsLength=function(){return Qm.getBitsLength(this.data.length)};Qm.prototype.write=function(e){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),e.put(i,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),i=parseInt(r,10),e.put(i,o*3+1))};O$.exports=Qm});var V$=tr((M4e,F$)=>{"use strict";var ype=Xd(),SR=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Zm(n){this.mode=ype.ALPHANUMERIC,this.data=n}Zm.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Zm.prototype.getLength=function(){return this.data.length};Zm.prototype.getBitsLength=function(){return Zm.getBitsLength(this.data.length)};Zm.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=SR.indexOf(this.data[t])*45;r+=SR.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(SR.indexOf(this.data[t]),6)};F$.exports=Zm});var B$=tr((N4e,j$)=>{"use strict";var _pe=Xd();function Xm(n){this.mode=_pe.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}Xm.getBitsLength=function(e){return e*8};Xm.prototype.getLength=function(){return this.data.length};Xm.prototype.getBitsLength=function(){return Xm.getBitsLength(this.data.length)};Xm.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};j$.exports=Xm});var z$=tr((P4e,U$)=>{"use strict";var wpe=Xd(),bpe=Qd();function Jm(n){this.mode=wpe.KANJI,this.data=n}Jm.getBitsLength=function(e){return e*13};Jm.prototype.getLength=function(){return this.data.length};Jm.prototype.getBitsLength=function(){return Jm.getBitsLength(this.data.length)};Jm.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=bpe.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};U$.exports=Jm});var q$=tr((k4e,AR)=>{"use strict";var L_={single_source_shortest_paths:function(n,e,t){var r={},i={};i[e]=0;var o=L_.PriorityQueue.make();o.push(e,0);for(var s,a,c,l,u,p,m,g,x;!o.empty();){s=o.pop(),a=s.value,l=s.cost,u=n[a]||{};for(c in u)u.hasOwnProperty(c)&&(p=u[c],m=l+p,g=i[c],x=typeof i[c]>"u",(x||g>m)&&(i[c]=m,o.push(c,m),r[c]=a))}if(typeof t<"u"&&typeof i[t]>"u"){var E=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(E)}return r},extract_shortest_path_from_predecessor_list:function(n,e){for(var t=[],r=e,i;r;)t.push(r),i=n[r],r=n[r];return t.reverse(),t},find_path:function(n,e,t){var r=L_.single_source_shortest_paths(n,e,t);return L_.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(n){var e=L_.PriorityQueue,t={},r;n=n||{};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.queue=[],t.sorter=n.sorter||e.default_sorter,t},default_sorter:function(n,e){return n.cost-e.cost},push:function(n,e){var t={value:n,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof AR<"u"&&(AR.exports=L_)});var Z$=tr(e0=>{"use strict";var zn=Xd(),G$=L$(),W$=V$(),K$=B$(),Y$=z$(),F_=xR(),vE=Qd(),xpe=q$();function $$(n){return unescape(encodeURIComponent(n)).length}function V_(n,e,t){let r=[],i;for(;(i=n.exec(t))!==null;)r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function Q$(n){let e=V_(F_.NUMERIC,zn.NUMERIC,n),t=V_(F_.ALPHANUMERIC,zn.ALPHANUMERIC,n),r,i;return vE.isKanjiModeEnabled()?(r=V_(F_.BYTE,zn.BYTE,n),i=V_(F_.KANJI,zn.KANJI,n)):(r=V_(F_.BYTE_KANJI,zn.BYTE,n),i=[]),e.concat(t,r,i).sort(function(s,a){return s.index-a.index}).map(function(s){return{data:s.data,mode:s.mode,length:s.length}})}function TR(n,e){switch(e){case zn.NUMERIC:return G$.getBitsLength(n);case zn.ALPHANUMERIC:return W$.getBitsLength(n);case zn.KANJI:return Y$.getBitsLength(n);case zn.BYTE:return K$.getBitsLength(n)}}function Cpe(n){return n.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function Epe(n){let e=[];for(let t=0;t<n.length;t++){let r=n[t];switch(r.mode){case zn.NUMERIC:e.push([r,{data:r.data,mode:zn.ALPHANUMERIC,length:r.length},{data:r.data,mode:zn.BYTE,length:r.length}]);break;case zn.ALPHANUMERIC:e.push([r,{data:r.data,mode:zn.BYTE,length:r.length}]);break;case zn.KANJI:e.push([r,{data:r.data,mode:zn.BYTE,length:$$(r.data)}]);break;case zn.BYTE:e.push([{data:r.data,mode:zn.BYTE,length:$$(r.data)}])}}return e}function Ipe(n,e){let t={},r={start:{}},i=["start"];for(let o=0;o<n.length;o++){let s=n[o],a=[];for(let c=0;c<s.length;c++){let l=s[c],u=""+o+c;a.push(u),t[u]={node:l,lastCount:0},r[u]={};for(let p=0;p<i.length;p++){let m=i[p];t[m]&&t[m].node.mode===l.mode?(r[m][u]=TR(t[m].lastCount+l.length,l.mode)-TR(t[m].lastCount,l.mode),t[m].lastCount+=l.length):(t[m]&&(t[m].lastCount=l.length),r[m][u]=TR(l.length,l.mode)+4+zn.getCharCountIndicator(l.mode,e))}}i=a}for(let o=0;o<i.length;o++)r[i[o]].end=0;return{map:r,table:t}}function H$(n,e){let t,r=zn.getBestModeForData(n);if(t=zn.from(e,r),t!==zn.BYTE&&t.bit<r.bit)throw new Error('"'+n+'" cannot be encoded with mode '+zn.toString(t)+`.
 Suggested mode is: `+zn.toString(r));switch(t===zn.KANJI&&!vE.isKanjiModeEnabled()&&(t=zn.BYTE),t){case zn.NUMERIC:return new G$(n);case zn.ALPHANUMERIC:return new W$(n);case zn.KANJI:return new Y$(n);case zn.BYTE:return new K$(n)}}e0.fromArray=function(e){return e.reduce(function(t,r){return typeof r=="string"?t.push(H$(r,null)):r.data&&t.push(H$(r.data,r.mode)),t},[])};e0.fromString=function(e,t){let r=Q$(e,vE.isKanjiModeEnabled()),i=Epe(r),o=Ipe(i,t),s=xpe.find_path(o.map,"start","end"),a=[];for(let c=1;c<s.length-1;c++)a.push(o.table[s[c]].node);return e0.fromArray(Cpe(a))};e0.rawSplit=function(e){return e0.fromArray(Q$(e,vE.isKanjiModeEnabled()))}});var J$=tr(X$=>{"use strict";var _E=Qd(),DR=uE(),Spe=d$(),Ape=h$(),Tpe=p$(),Dpe=v$(),PR=y$(),kR=yR(),Mpe=C$(),yE=M$(),Npe=R$(),Ppe=Xd(),MR=Z$();function kpe(n,e){let t=n.size,r=Dpe.getPositions(e);for(let i=0;i<r.length;i++){let o=r[i][0],s=r[i][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||t<=o+a))for(let c=-1;c<=7;c++)s+c<=-1||t<=s+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?n.set(o+a,s+c,!0,!0):n.set(o+a,s+c,!1,!0))}}function Rpe(n){let e=n.size;for(let t=8;t<e-8;t++){let r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function Ope(n,e){let t=Tpe.getPositions(e);for(let r=0;r<t.length;r++){let i=t[r][0],o=t[r][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?n.set(i+s,o+a,!0,!0):n.set(i+s,o+a,!1,!0)}}function Lpe(n,e){let t=n.size,r=yE.getEncodedBits(e),i,o,s;for(let a=0;a<18;a++)i=Math.floor(a/3),o=a%3+t-8-3,s=(r>>a&1)===1,n.set(i,o,s,!0),n.set(o,i,s,!0)}function NR(n,e,t){let r=n.size,i=Npe.getEncodedBits(e,t),o,s;for(o=0;o<15;o++)s=(i>>o&1)===1,o<6?n.set(o,8,s,!0):o<8?n.set(o+1,8,s,!0):n.set(r-15+o,8,s,!0),o<8?n.set(8,r-o-1,s,!0):o<9?n.set(8,15-o-1+1,s,!0):n.set(8,15-o-1,s,!0);n.set(r-8,8,1,!0)}function Fpe(n,e){let t=n.size,r=-1,i=t-1,o=7,s=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!n.isReserved(i,a-c)){let l=!1;s<e.length&&(l=(e[s]>>>o&1)===1),n.set(i,a-c,l),o--,o===-1&&(s++,o=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function Vpe(n,e,t){let r=new Spe;t.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),Ppe.getCharCountIndicator(c.mode,n)),c.write(r)});let i=_E.getSymbolTotalCodewords(n),o=kR.getTotalCodewordsCount(n,e),s=(i-o)*8;for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let a=(s-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return jpe(r,n,e)}function jpe(n,e,t){let r=_E.getSymbolTotalCodewords(e),i=kR.getTotalCodewordsCount(e,t),o=r-i,s=kR.getBlocksCount(e,t),a=r%s,c=s-a,l=Math.floor(r/s),u=Math.floor(o/s),p=u+1,m=l-u,g=new Mpe(m),x=0,E=new Array(s),D=new Array(s),N=0,K=new Uint8Array(n.buffer);for(let z=0;z<s;z++){let M=z<c?u:p;E[z]=K.slice(x,x+M),D[z]=g.encode(E[z]),x+=M,N=Math.max(N,M)}let j=new Uint8Array(r),G=0,oe,fe;for(oe=0;oe<N;oe++)for(fe=0;fe<s;fe++)oe<E[fe].length&&(j[G++]=E[fe][oe]);for(oe=0;oe<m;oe++)for(fe=0;fe<s;fe++)j[G++]=D[fe][oe];return j}function Bpe(n,e,t,r){let i;if(Array.isArray(n))i=MR.fromArray(n);else if(typeof n=="string"){let l=e;if(!l){let u=MR.rawSplit(n);l=yE.getBestVersionForData(u,t)}i=MR.fromString(n,l||40)}else throw new Error("Invalid data");let o=yE.getBestVersionForData(i,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let s=Vpe(e,t,i),a=_E.getSymbolSize(e),c=new Ape(a);return kpe(c,e),Rpe(c),Ope(c,e),NR(c,t,0),e>=7&&Lpe(c,e),Fpe(c,s),isNaN(r)&&(r=PR.getBestMask(c,NR.bind(null,c,t))),PR.applyMask(r,c),NR(c,t,r),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:r,segments:i}}X$.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=DR.M,i,o;return typeof t<"u"&&(r=DR.from(t.errorCorrectionLevel,DR.M),i=yE.from(t.version),o=PR.from(t.maskPattern),t.toSJISFunc&&_E.setToSJISFunction(t.toSJISFunc)),Bpe(e,i,r,o)}});var RR=tr(Yh=>{"use strict";function eH(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let e=n.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+n);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}Yh.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:eH(e.color.dark||"#000000ff"),light:eH(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};Yh.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};Yh.getImageWidth=function(e,t){let r=Yh.getScale(e,t);return Math.floor((e+t.margin*2)*r)};Yh.qrToImageData=function(e,t,r){let i=t.modules.size,o=t.modules.data,s=Yh.getScale(i,r),a=Math.floor((i+r.margin*2)*s),c=r.margin*s,l=[r.color.light,r.color.dark];for(let u=0;u<a;u++)for(let p=0;p<a;p++){let m=(u*a+p)*4,g=r.color.light;if(u>=c&&p>=c&&u<a-c&&p<a-c){let x=Math.floor((u-c)/s),E=Math.floor((p-c)/s);g=l[o[x*i+E]?1:0]}e[m++]=g.r,e[m++]=g.g,e[m++]=g.b,e[m]=g.a}}});var tH=tr(wE=>{"use strict";var OR=RR();function Upe(n,e,t){n.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function zpe(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}wE.render=function(e,t,r){let i=r,o=t;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),t||(o=zpe()),i=OR.getOptions(i);let s=OR.getImageWidth(e.modules.size,i),a=o.getContext("2d"),c=a.createImageData(s,s);return OR.qrToImageData(c.data,e,i),Upe(a,o,s),a.putImageData(c,0,0),o};wE.renderToDataURL=function(e,t,r){let i=r;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),i||(i={});let o=wE.render(e,t,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}});var iH=tr(rH=>{"use strict";var qpe=RR();function nH(n,e){let t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function LR(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function $pe(n,e,t){let r="",i=0,o=!1,s=0;for(let a=0;a<n.length;a++){let c=Math.floor(a%e),l=Math.floor(a/e);!c&&!o&&(o=!0),n[a]?(s++,a>0&&c>0&&n[a-1]||(r+=o?LR("M",c+t,.5+l+t):LR("m",i,0),i=0,o=!1),c+1<e&&n[a+1]||(r+=LR("h",s),s=0)):i++}return r}rH.render=function(e,t,r){let i=qpe.getOptions(t),o=e.modules.size,s=e.modules.data,a=o+i.margin*2,c=i.color.light.a?"<path "+nH(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+nH(i.color.dark,"stroke")+' d="'+$pe(s,o,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,m),m}});var sH=tr(j_=>{"use strict";var Hpe=c$(),FR=J$(),oH=tH(),Gpe=iH();function VR(n,e,t,r,i){let o=[].slice.call(arguments,1),s=o.length,a=typeof o[s-1]=="function";if(!a&&!Hpe())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(i=t,t=e,e=r=void 0):s===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=e,e=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(t=e,e=r=void 0):s===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(c,l){try{let u=FR.create(t,r);c(n(u,e,r))}catch(u){l(u)}})}try{let c=FR.create(t,r);i(null,n(c,e,r))}catch(c){i(c)}}j_.create=FR.create;j_.toCanvas=VR.bind(null,oH.render);j_.toDataURL=VR.bind(null,oH.renderToDataURL);j_.toString=VR.bind(null,function(n,e,t){return Gpe.render(n,t)})});var qE;function h1(){return qE}function kc(n){let e=qE;return qE=n,e}var PO=Symbol("NotFound");function dp(n){return n===PO||n?.name==="\u0275NotFound"}var ho=null,p1=!1,$E=1,WH=null,po=Symbol("SIGNAL");function gn(n){let e=ho;return ho=n,e}function y1(){return ho}var fp={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function hp(n){if(p1)throw new Error("");if(ho===null)return;ho.consumerOnSignalRead(n);let e=ho.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=ho.recomputing;if(r&&(t=e!==void 0?e.nextProducer:ho.producers,t!==void 0&&t.producer===n)){ho.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===ho&&(!r||YH(i,ho)))return;let o=gp(ho),s={producer:n,consumer:ho,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};ho.producersTail=s,e!==void 0?e.nextProducer=s:ho.producers=s,o&&LO(n,s)}function kO(){$E++}function _1(n){if(!(gp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===$E)){if(!n.producerMustRecompute(n)&&!E0(n)){v1(n);return}n.producerRecomputeValue(n),v1(n)}}function HE(n){if(n.consumers===void 0)return;let e=p1;p1=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||KH(r)}}finally{p1=e}}function GE(){return ho?.consumerAllowSignalWrites!==!1}function KH(n){n.dirty=!0,HE(n),n.consumerMarkedDirty?.(n)}function v1(n){n.dirty=!1,n.lastCleanEpoch=$E}function pp(n){return n&&RO(n),gn(n)}function RO(n){n.producersTail=void 0,n.recomputing=!0}function C0(n,e){gn(e),n&&OO(n)}function OO(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(gp(n))do t=WE(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function E0(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(_1(t),r!==t.version))return!0}return!1}function I0(n){if(gp(n)){let e=n.producers;for(;e!==void 0;)e=WE(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function LO(n,e){let t=n.consumersTail,r=gp(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)LO(i.producer,i)}function WE(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!gp(e)){let o=e.producers;for(;o!==void 0;)o=WE(o)}return t}function gp(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function w1(n){WH?.(n)}function YH(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function b1(n,e){return Object.is(n,e)}function x1(n,e){let t=Object.create(QH);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(_1(t),hp(t),t.value===x0)throw t.error;return t.value};return r[po]=t,w1(t),r}var g1=Symbol("UNSET"),m1=Symbol("COMPUTING"),x0=Symbol("ERRORED"),QH=Vt(Ve({},fp),{value:g1,dirty:!0,error:null,equal:b1,kind:"computed",producerMustRecompute(n){return n.value===g1||n.value===m1},producerRecomputeValue(n){if(n.value===m1)throw new Error("");let e=n.value;n.value=m1;let t=pp(n),r,i=!1;try{r=n.computation(),gn(null),i=e!==g1&&e!==x0&&r!==x0&&n.equal(e,r)}catch(o){r=x0,n.error=o}finally{C0(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function ZH(){throw new Error}var FO=ZH;function VO(n){FO(n)}function KE(n){FO=n}var XH=null;function YE(n,e){let t=Object.create(C1);t.value=n,e!==void 0&&(t.equal=e);let r=()=>jO(t);return r[po]=t,w1(t),[r,s=>mp(t,s),s=>QE(t,s)]}function jO(n){return hp(n),n.value}function mp(n,e){GE()||VO(n),n.equal(n.value,e)||(n.value=e,JH(n))}function QE(n,e){GE()||VO(n),mp(n,e(n.value))}var C1=Vt(Ve({},fp),{equal:b1,value:void 0,kind:"signal"});function JH(n){n.version++,kO(),HE(n),XH?.(n)}function Jt(n){return typeof n=="function"}function vp(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var E1=vp(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function gf(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Hr=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Jt(r))try{r()}catch(o){e=o instanceof E1?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{BO(o)}catch(s){e=e??[],s instanceof E1?e=[...e,...s.errors]:e.push(s)}}if(e)throw new E1(e)}}add(e){var t;if(e&&e!==this)if(this.closed)BO(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&gf(t,e)}remove(e){let{_finalizers:t}=this;t&&gf(t,e),e instanceof n&&e._removeParent(this)}};Hr.EMPTY=(()=>{let n=new Hr;return n.closed=!0,n})();var ZE=Hr.EMPTY;function I1(n){return n instanceof Hr||n&&"closed"in n&&Jt(n.remove)&&Jt(n.add)&&Jt(n.unsubscribe)}function BO(n){Jt(n)?n():n.unsubscribe()}var Ha={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var yp={setTimeout(n,e,...t){let{delegate:r}=yp;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=yp;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function S1(n){yp.setTimeout(()=>{let{onUnhandledError:e}=Ha;if(e)e(n);else throw n})}function mf(){}var UO=XE("C",void 0,void 0);function zO(n){return XE("E",void 0,n)}function qO(n){return XE("N",n,void 0)}function XE(n,e,t){return{kind:n,value:e,error:t}}var vf=null;function _p(n){if(Ha.useDeprecatedSynchronousErrorHandling){let e=!vf;if(e&&(vf={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=vf;if(vf=null,t)throw r}}else n()}function $O(n){Ha.useDeprecatedSynchronousErrorHandling&&vf&&(vf.errorThrown=!0,vf.error=n)}var yf=class extends Hr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,I1(e)&&e.add(this)):this.destination=nG}static create(e,t,r){return new Ga(e,t,r)}next(e){this.isStopped?eI(qO(e),this):this._next(e)}error(e){this.isStopped?eI(zO(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?eI(UO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eG=Function.prototype.bind;function JE(n,e){return eG.call(n,e)}var tI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){A1(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){A1(r)}else A1(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){A1(t)}}},Ga=class extends yf{constructor(e,t,r){super();let i;if(Jt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ha.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&JE(e.next,o),error:e.error&&JE(e.error,o),complete:e.complete&&JE(e.complete,o)}):i=e}this.destination=new tI(i)}};function A1(n){Ha.useDeprecatedSynchronousErrorHandling?$O(n):S1(n)}function tG(n){throw n}function eI(n,e){let{onStoppedNotification:t}=Ha;t&&yp.setTimeout(()=>t(n,e))}var nG={closed:!0,next:mf,error:tG,complete:mf};var wp=typeof Symbol=="function"&&Symbol.observable||"@@observable";function jo(n){return n}function T1(...n){return nI(n)}function nI(n){return n.length===0?jo:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Pt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=iG(t)?t:new Ga(t,r,i);return _p(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=HO(r),new r((i,o)=>{let s=new Ga({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[wp](){return this}pipe(...t){return nI(t)(this)}toPromise(t){return t=HO(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function HO(n){var e;return(e=n??Ha.Promise)!==null&&e!==void 0?e:Promise}function rG(n){return n&&Jt(n.next)&&Jt(n.error)&&Jt(n.complete)}function iG(n){return n&&n instanceof yf||rG(n)&&I1(n)}function rI(n){return Jt(n?.lift)}function cn(n){return e=>{if(rI(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ln(n,e,t,r,i){return new iI(n,e,t,r,i)}var iI=class extends yf{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function bp(){return cn((n,e)=>{let t=null;n._refCount++;let r=ln(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var xp=class extends Pt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,rI(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Hr;let t=this.getSubject();e.add(this.source.subscribe(ln(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Hr.EMPTY)}return e}refCount(){return bp()(this)}};var GO=vp(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var kn=(()=>{class n extends Pt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new D1(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new GO}next(t){_p(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){_p(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){_p(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ZE:(this.currentObservers=null,o.push(t),new Hr(()=>{this.currentObservers=null,gf(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Pt;return t.source=this,t}}return n.create=(e,t)=>new D1(e,t),n})(),D1=class extends kn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ZE}};var Zi=class extends kn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var S0={now(){return(S0.delegate||Date).now()},delegate:void 0};var A0=class extends kn{constructor(e=1/0,t=1/0,r=S0){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var M1=class extends Hr{constructor(e,t){super()}schedule(e,t=0){return this}};var T0={setInterval(n,e,...t){let{delegate:r}=T0;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=T0;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Cp=class extends M1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return T0.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&T0.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,gf(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ep=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ep.now=S0.now;var Ip=class extends Ep{constructor(e,t=Ep.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var _f=new Ip(Cp);var N1=class extends Cp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var P1=class extends Ip{};var oI=new P1(N1);var go=new Pt(n=>n.complete());function WO(n){return n&&Jt(n.schedule)}function sI(n){return n[n.length-1]}function k1(n){return Jt(sI(n))?n.pop():void 0}function Rc(n){return WO(sI(n))?n.pop():void 0}function KO(n,e){return typeof sI(n)=="number"?n.pop():e}var R1=n=>n&&typeof n.length=="number"&&typeof n!="function";function O1(n){return Jt(n?.then)}function L1(n){return Jt(n[wp])}function F1(n){return Symbol.asyncIterator&&Jt(n?.[Symbol.asyncIterator])}function V1(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function oG(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var j1=oG();function B1(n){return Jt(n?.[j1])}function U1(n){return EO(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield i1(t.read());if(i)return yield i1(void 0);yield yield i1(r)}}finally{t.releaseLock()}})}function z1(n){return Jt(n?.getReader)}function wr(n){if(n instanceof Pt)return n;if(n!=null){if(L1(n))return sG(n);if(R1(n))return aG(n);if(O1(n))return cG(n);if(F1(n))return YO(n);if(B1(n))return lG(n);if(z1(n))return uG(n)}throw V1(n)}function sG(n){return new Pt(e=>{let t=n[wp]();if(Jt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aG(n){return new Pt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function cG(n){return new Pt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,S1)})}function lG(n){return new Pt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function YO(n){return new Pt(e=>{dG(n,e).catch(t=>e.error(t))})}function uG(n){return YO(U1(n))}function dG(n,e){var t,r,i,o;return CO(this,void 0,void 0,function*(){try{for(t=IO(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function cs(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function mo(n,e=0){return cn((t,r)=>{t.subscribe(ln(r,i=>cs(r,n,()=>r.next(i),e),()=>cs(r,n,()=>r.complete(),e),i=>cs(r,n,()=>r.error(i),e)))})}function ga(n,e=0){return cn((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function QO(n,e){return wr(n).pipe(ga(e),mo(e))}function ZO(n,e){return wr(n).pipe(ga(e),mo(e))}function XO(n,e){return new Pt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function JO(n,e){return new Pt(t=>{let r;return cs(t,e,()=>{r=n[j1](),cs(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Jt(r?.return)&&r.return()})}function q1(n,e){if(!n)throw new Error("Iterable cannot be null");return new Pt(t=>{cs(t,e,()=>{let r=n[Symbol.asyncIterator]();cs(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function e3(n,e){return q1(U1(n),e)}function t3(n,e){if(n!=null){if(L1(n))return QO(n,e);if(R1(n))return XO(n,e);if(O1(n))return ZO(n,e);if(F1(n))return q1(n,e);if(B1(n))return JO(n,e);if(z1(n))return e3(n,e)}throw V1(n)}function mn(n,e){return e?t3(n,e):wr(n)}function pt(...n){let e=Rc(n);return mn(n,e)}function Sp(n,e){let t=Jt(n)?n:()=>n,r=i=>i.error(t());return new Pt(e?i=>e.schedule(r,0,i):r)}function aI(n){return!!n&&(n instanceof Pt||Jt(n.lift)&&Jt(n.subscribe))}var Wa=vp(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function cI(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Ga({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Wa)}});n.subscribe(o)})}function at(n,e){return cn((t,r)=>{let i=0;t.subscribe(ln(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:fG}=Array;function hG(n,e){return fG(e)?n(...e):n(e)}function $1(n){return at(e=>hG(n,e))}var{isArray:pG}=Array,{getPrototypeOf:gG,prototype:mG,keys:vG}=Object;function H1(n){if(n.length===1){let e=n[0];if(pG(e))return{args:e,keys:null};if(yG(e)){let t=vG(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function yG(n){return n&&typeof n=="object"&&gG(n)===mG}function G1(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function D0(...n){let e=Rc(n),t=k1(n),{args:r,keys:i}=H1(n);if(r.length===0)return mn([],e);let o=new Pt(_G(r,e,i?s=>G1(i,s):jo));return t?o.pipe($1(t)):o}function _G(n,e,t=jo){return r=>{n3(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)n3(e,()=>{let l=mn(n[c],e),u=!1;l.subscribe(ln(r,p=>{o[c]=p,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function n3(n,e,t){n?cs(t,n,e):e()}function r3(n,e,t,r,i,o,s,a){let c=[],l=0,u=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},g=E=>l<r?x(E):c.push(E),x=E=>{o&&e.next(E),l++;let D=!1;wr(t(E,u++)).subscribe(ln(e,N=>{i?.(N),o?g(N):e.next(N)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;c.length&&l<r;){let N=c.shift();s?cs(e,s,()=>x(N)):x(N)}m()}catch(N){e.error(N)}}))};return n.subscribe(ln(e,g,()=>{p=!0,m()})),()=>{a?.()}}function Jr(n,e,t=1/0){return Jt(e)?Jr((r,i)=>at((o,s)=>e(r,o,i,s))(wr(n(r,i))),t):(typeof e=="number"&&(t=e),cn((r,i)=>r3(r,i,n,t)))}function Oc(n=1/0){return Jr(jo,n)}function i3(){return Oc(1)}function Ap(...n){return i3()(mn(n,Rc(n)))}function M0(n){return new Pt(e=>{wr(n()).subscribe(e)})}function lI(...n){let e=k1(n),{args:t,keys:r}=H1(n),i=new Pt(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let p=!1;wr(t[u]).subscribe(ln(o,m=>{p||(p=!0,l--),a[u]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?G1(r,a):a),o.complete())}))}});return e?i.pipe($1(e)):i}function uI(...n){let e=Rc(n),t=KO(n,1/0),r=n;return r.length?r.length===1?wr(r[0]):Oc(t)(mn(r,e)):go}var Rl=new Pt(mf);function br(n,e){return cn((t,r)=>{let i=0;t.subscribe(ln(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ol(n){return cn((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ln(t,void 0,void 0,s=>{o=wr(n(s,Ol(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function o3(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(ln(s,u=>{let p=l++;c=a?n(c,u,p):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Fu(n,e){return Jt(e)?Jr(n,e,1):Jr(n,1)}function dI(n,e=_f){return cn((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+n,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}t.subscribe(ln(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Vu(n){return cn((e,t)=>{let r=!1;e.subscribe(ln(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xi(n){return n<=0?()=>go:cn((e,t)=>{let r=0;e.subscribe(ln(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function W1(n,e=jo){return n=n??wG,cn((t,r)=>{let i,o=!0;t.subscribe(ln(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function wG(n,e){return n===e}function K1(n=bG){return cn((e,t)=>{let r=!1;e.subscribe(ln(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function bG(){return new Wa}function N0(n){return cn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ka(n,e){let t=arguments.length>=2;return r=>r.pipe(n?br((i,o)=>n(i,o,r)):jo,Xi(1),t?Vu(e):K1(()=>new Wa))}function Tp(n){return n<=0?()=>go:cn((e,t)=>{let r=[];e.subscribe(ln(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fI(n,e){let t=arguments.length>=2;return r=>r.pipe(n?br((i,o)=>n(i,o,r)):jo,Tp(1),t?Vu(e):K1(()=>new Wa))}function Dp(){return cn((n,e)=>{let t,r=!1;n.subscribe(ln(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function ju(n,e){return cn(o3(n,e,arguments.length>=2,!0))}function s3(n={}){let{connector:e=()=>new kn,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,u=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},g=()=>{m(),s=c=void 0,u=p=!1},x=()=>{let E=s;g(),E?.unsubscribe()};return cn((E,D)=>{l++,!p&&!u&&m();let N=c=c??e();D.add(()=>{l--,l===0&&!p&&!u&&(a=hI(x,i))}),N.subscribe(D),!s&&l>0&&(s=new Ga({next:K=>N.next(K),error:K=>{p=!0,m(),a=hI(g,t,K),N.error(K)},complete:()=>{u=!0,m(),a=hI(g,r),N.complete()}}),wr(E).subscribe(s))})(o)}}function hI(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Ga({next:()=>{r.unsubscribe(),n()}});return wr(e(...t)).subscribe(r)}function Y1(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,s3({connector:()=>new A0(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Bu(...n){let e=Rc(n);return cn((t,r)=>{(e?Ap(n,t,e):Ap(n,t)).subscribe(r)})}function Nn(n,e){return cn((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ln(r,c=>{i?.unsubscribe();let l=0,u=o++;wr(n(c,u)).subscribe(i=ln(r,p=>r.next(e?e(c,p,u,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Q1(n,e){return Jt(e)?Nn(()=>n,e):Nn(()=>n)}function Z1(n){return cn((e,t)=>{wr(n).subscribe(ln(t,()=>t.complete(),mf)),!t.closed&&e.subscribe(t)})}function Di(n,e,t){let r=Jt(n)||e||t?{next:n,error:e,complete:t}:n;return r?cn((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ln(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):jo}function a3(n){let e=gn(null);try{return n()}finally{gn(e)}}var Fl=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},O0=new Fl("20.3.15");var tw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",et=class extends Error{code;constructor(e,t){super(Qa(e,t)),this.code=e}};function xG(n){return`NG0${Math.abs(n)}`}function Qa(n,e){return`${xG(n)}${e?": "+e:""}`}var vo=globalThis;function Bn(n){for(let e in n)if(n[e]===Bn)return e;throw Error("")}function u3(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Vl(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Vl).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function nw(n,e){return n?e?`${n} ${e}`:n:e||""}var CG=Bn({__forward_ref__:Bn});function ls(n){return n.__forward_ref__=ls,n.toString=function(){return Vl(this())},n}function Ji(n){return SI(n)?n():n}function SI(n){return typeof n=="function"&&n.hasOwnProperty(CG)&&n.__forward_ref__===ls}function Qe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nr(n){return{providers:n.providers||[],imports:n.imports||[]}}function L0(n){return EG(n,rw)}function AI(n){return L0(n)!==null}function EG(n,e){return n.hasOwnProperty(e)&&n[e]||null}function IG(n){let e=n?.[rw]??null;return e||null}function gI(n){return n&&n.hasOwnProperty(J1)?n[J1]:null}var rw=Bn({\u0275prov:Bn}),J1=Bn({\u0275inj:Bn}),Ye=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Qe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function TI(n){return n&&!!n.\u0275providers}var DI=Bn({\u0275cmp:Bn}),MI=Bn({\u0275dir:Bn}),NI=Bn({\u0275pipe:Bn}),PI=Bn({\u0275mod:Bn}),k0=Bn({\u0275fac:Bn}),Ef=Bn({__NG_ELEMENT_ID__:Bn}),c3=Bn({__NG_ENV_ID__:Bn});function qu(n){return typeof n=="string"?n:n==null?"":String(n)}function d3(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():qu(n)}var f3=Bn({ngErrorCode:Bn}),SG=Bn({ngErrorMessage:Bn}),AG=Bn({ngTokenPath:Bn});function kI(n,e){return h3("",-200,e)}function iw(n,e){throw new et(-201,!1)}function h3(n,e,t){let r=new et(e,n);return r[f3]=e,r[SG]=n,t&&(r[AG]=t),r}function TG(n){return n[f3]}var mI;function p3(){return mI}function Bo(n){let e=mI;return mI=n,e}function RI(n,e,t){let r=L0(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;iw(n,"Injector")}var DG={},wf=DG,vI="__NG_DI_FLAG__",yI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=bf(t)||0;try{return this.injector.get(e,r&8?null:wf,r)}catch(i){if(dp(i))return i;throw i}}};function MG(n,e=0){let t=h1();if(t===void 0)throw new et(-203,!1);if(t===null)return RI(n,void 0,e);{let r=NG(e),i=t.retrieve(n,r);if(dp(i)){if(r.optional)return null;throw i}return i}}function Le(n,e=0){return(p3()||MG)(Ji(n),e)}function Me(n,e){return Le(n,bf(e))}function bf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function NG(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function _I(n){let e=[];for(let t=0;t<n.length;t++){let r=Ji(n[t]);if(Array.isArray(r)){if(r.length===0)throw new et(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=PG(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Le(i,o))}else e.push(Le(r))}return e}function g3(n,e){return n[vI]=e,n.prototype[vI]=e,n}function PG(n){return n[vI]}function Uu(n,e){let t=n.hasOwnProperty(k0);return t?n[k0]:null}function m3(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function v3(n){return n.flat(Number.POSITIVE_INFINITY)}function ow(n,e){n.forEach(t=>Array.isArray(t)?ow(t,e):e(t))}function OI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function F0(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function y3(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function sw(n,e,t){let r=Np(n,e);return r>=0?n[r|1]=t:(r=~r,y3(n,r,e,t)),r}function aw(n,e){let t=Np(n,e);if(t>=0)return n[t|1]}function Np(n,e){return kG(n,e,1)}function kG(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var $u={},Uo=[],Bl=new Ye(""),LI=new Ye("",-1),FI=new Ye(""),R0=class{get(e,t=wf){if(t===wf){let i=h3("",-201);throw i.name="\u0275NotFound",i}return t}};function VI(n){return n[PI]||null}function Ul(n){return n[DI]||null}function jI(n){return n[MI]||null}function _3(n){return n[NI]||null}function eo(n){return{\u0275providers:n}}function w3(...n){return{\u0275providers:BI(!0,n),\u0275fromNgModule:!0}}function BI(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return ow(e,s=>{let a=s;ew(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&b3(i,o),t}function b3(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];UI(i,o=>{e(o,r)})}}function ew(n,e,t,r){if(n=Ji(n),!n)return!1;let i=null,o=gI(n),s=!o&&Ul(n);if(!o&&!s){let c=n.ngModule;if(o=gI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)ew(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{ow(o.imports,u=>{ew(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&b3(l,e)}if(!a){let l=Uu(i)||(()=>new i);e({provide:i,useFactory:l,deps:Uo},i),e({provide:FI,useValue:i,multi:!0},i),e({provide:Bl,useValue:()=>Le(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;UI(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function UI(n,e){for(let t of n)TI(t)&&(t=t.\u0275providers),Array.isArray(t)?UI(t,e):e(t)}var RG=Bn({provide:String,useValue:Bn});function x3(n){return n!==null&&typeof n=="object"&&RG in n}function OG(n){return!!(n&&n.useExisting)}function LG(n){return!!(n&&n.useFactory)}function xf(n){return typeof n=="function"}function C3(n){return!!n.useClass}var V0=new Ye(""),X1={},l3={},pI;function j0(){return pI===void 0&&(pI=new R0),pI}var Wn=class{},Cf=class extends Wn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,bI(e,s=>this.processProvider(s)),this.records.set(LI,Mp(void 0,this)),i.has("environment")&&this.records.set(Wn,Mp(void 0,this));let o=this.records.get(V0);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(FI,Uo,{self:!0}))}retrieve(e,t){let r=bf(t)||0;try{return this.get(e,wf,r)}catch(i){if(dp(i))return i;throw i}}destroy(){P0(this),this._destroyed=!0;let e=gn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),gn(e)}}onDestroy(e){return P0(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){P0(this);let t=kc(this),r=Bo(void 0),i;try{return e()}finally{kc(t),Bo(r)}}get(e,t=wf,r){if(P0(this),e.hasOwnProperty(c3))return e[c3](this);let i=bf(r),o,s=kc(this),a=Bo(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=UG(e)&&L0(e);u&&this.injectableDefInScope(u)?l=Mp(wI(e),X1):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?j0():this.parent;return t=i&8&&t===wf?null:t,c.get(e,t)}catch(c){let l=TG(c);throw l===-200||l===-201?new et(l,null):c}finally{Bo(a),kc(s)}}resolveInjectorInitializers(){let e=gn(null),t=kc(this),r=Bo(void 0),i;try{let o=this.get(Bl,Uo,{self:!0});for(let s of o)s()}finally{kc(t),Bo(r),gn(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Vl(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ji(e);let t=xf(e)?e:Ji(e&&e.provide),r=VG(e);if(!xf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Mp(void 0,X1,!0),i.factory=()=>_I(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=gn(null);try{if(t.value===l3)throw kI(Vl(e));return t.value===X1&&(t.value=l3,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&BG(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{gn(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ji(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function wI(n){let e=L0(n),t=e!==null?e.factory:Uu(n);if(t!==null)return t;if(n instanceof Ye)throw new et(204,!1);if(n instanceof Function)return FG(n);throw new et(204,!1)}function FG(n){if(n.length>0)throw new et(204,!1);let t=IG(n);return t!==null?()=>t.factory(n):()=>new n}function VG(n){if(x3(n))return Mp(void 0,n.useValue);{let e=zI(n);return Mp(e,X1)}}function zI(n,e,t){let r;if(xf(n)){let i=Ji(n);return Uu(i)||wI(i)}else if(x3(n))r=()=>Ji(n.useValue);else if(LG(n))r=()=>n.useFactory(..._I(n.deps||[]));else if(OG(n))r=(i,o)=>Le(Ji(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ji(n&&(n.useClass||n.provide));if(jG(n))r=()=>new i(..._I(n.deps));else return Uu(i)||wI(i)}return r}function P0(n){if(n.destroyed)throw new et(205,!1)}function Mp(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function jG(n){return!!n.deps}function BG(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function UG(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function bI(n,e){for(let t of n)Array.isArray(t)?bI(t,e):t&&TI(t)?bI(t.\u0275providers,e):e(t)}function fi(n,e){let t;n instanceof Cf?(P0(n),t=n):t=new yI(n);let r,i=kc(t),o=Bo(void 0);try{return e()}finally{kc(i),Bo(o)}}function qI(){return p3()!==void 0||h1()!=null}var Za=0,$t=1,en=2,ji=3,ma=4,va=5,B0=6,Pp=7,yo=8,Hu=9,Lc=10,xr=11,kp=12,$I=13,If=14,ya=15,Gu=16,Sf=17,Fc=18,U0=19,HI=20,Ll=21,cw=22,z0=23,Us=24,Af=25,q0=26,Bi=27,E3=1;var Wu=7,$0=8,Tf=9,zo=10;function Vc(n){return Array.isArray(n)&&typeof n[E3]=="object"}function Xa(n){return Array.isArray(n)&&n[E3]===!0}function GI(n){return(n.flags&4)!==0}function zl(n){return n.componentOffset>-1}function Rp(n){return(n.flags&1)===1}function jc(n){return!!n.template}function Op(n){return(n[en]&512)!==0}function Df(n){return(n[en]&256)===256}var WI="svg",I3="math";function _a(n){for(;Array.isArray(n);)n=n[Za];return n}function KI(n,e){return _a(e[n])}function wa(n,e){return _a(e[n.index])}function lw(n,e){return n.data[e]}function YI(n,e){return n[e]}function QI(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ba(n,e){let t=e[n];return Vc(t)?t:t[Za]}function S3(n){return(n[en]&4)===4}function uw(n){return(n[en]&128)===128}function A3(n){return Xa(n[ji])}function Mf(n,e){return e==null?null:n[e]}function ZI(n){n[Sf]=0}function XI(n){n[en]&1024||(n[en]|=1024,uw(n)&&Lp(n))}function T3(n,e){for(;n>0;)e=e[If],n--;return e}function H0(n){return!!(n[en]&9216||n[Us]?.dirty)}function dw(n){n[Lc].changeDetectionScheduler?.notify(8),n[en]&64&&(n[en]|=1024),H0(n)&&Lp(n)}function Lp(n){n[Lc].changeDetectionScheduler?.notify(0);let e=zu(n);for(;e!==null&&!(e[en]&8192||(e[en]|=8192,!uw(e)));)e=zu(e)}function JI(n,e){if(Df(n))throw new et(911,!1);n[Ll]===null&&(n[Ll]=[]),n[Ll].push(e)}function D3(n,e){if(n[Ll]===null)return;let t=n[Ll].indexOf(e);t!==-1&&n[Ll].splice(t,1)}function zu(n){let e=n[ji];return Xa(e)?e[ji]:e}function eS(n){return n[Pp]??=[]}function tS(n){return n.cleanup??=[]}function M3(n,e,t,r){let i=eS(e);i.push(t),n.firstCreatePass&&tS(n).push(r,i.length-1)}var un={lFrame:$3(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var xI=!1;function N3(){return un.lFrame.elementDepthCount}function P3(){un.lFrame.elementDepthCount++}function nS(){un.lFrame.elementDepthCount--}function fw(){return un.bindingsEnabled}function k3(){return un.skipHydrationRootTNode!==null}function rS(n){return un.skipHydrationRootTNode===n}function iS(){un.skipHydrationRootTNode=null}function dn(){return un.lFrame.lView}function hi(){return un.lFrame.tView}function Ie(n){return un.lFrame.contextLView=n,n[yo]}function Se(n){return un.lFrame.contextLView=null,n}function Mi(){let n=oS();for(;n!==null&&n.type===64;)n=n.parent;return n}function oS(){return un.lFrame.currentTNode}function R3(){let n=un.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Fp(n,e){let t=un.lFrame;t.currentTNode=n,t.isParent=e}function sS(){return un.lFrame.isParent}function O3(){un.lFrame.isParent=!1}function L3(){return un.lFrame.contextLView}function aS(){return xI}function cS(n){let e=xI;return xI=n,e}function hw(){let n=un.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function F3(){return un.lFrame.bindingIndex}function V3(n){return un.lFrame.bindingIndex=n}function Nf(){return un.lFrame.bindingIndex++}function pw(n){let e=un.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function j3(){return un.lFrame.inI18n}function B3(n,e){let t=un.lFrame;t.bindingIndex=t.bindingRootIndex=n,gw(e)}function U3(){return un.lFrame.currentDirectiveIndex}function gw(n){un.lFrame.currentDirectiveIndex=n}function z3(n){let e=un.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function lS(){return un.lFrame.currentQueryIndex}function mw(n){un.lFrame.currentQueryIndex=n}function zG(n){let e=n[$t];return e.type===2?e.declTNode:e.type===1?n[va]:null}function uS(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=zG(o),i===null||(o=o[If],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=un.lFrame=q3();return r.currentTNode=e,r.lView=n,!0}function vw(n){let e=q3(),t=n[$t];un.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function q3(){let n=un.lFrame,e=n===null?null:n.child;return e===null?$3(n):e}function $3(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function H3(){let n=un.lFrame;return un.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var dS=H3;function yw(){let n=H3();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function G3(n){return(un.lFrame.contextLView=T3(n,un.lFrame.contextLView))[yo]}function ql(){return un.lFrame.selectedIndex}function Ku(n){un.lFrame.selectedIndex=n}function G0(){let n=un.lFrame;return lw(n.tView,n.selectedIndex)}function Vr(){un.lFrame.currentNamespace=WI}function us(){qG()}function qG(){un.lFrame.currentNamespace=null}function W3(){return un.lFrame.currentNamespace}var K3=!0;function _w(){return K3}function W0(n){K3=n}function CI(n,e=null,t=null,r){let i=fS(n,e,t,r);return i.resolveInjectorInitializers(),i}function fS(n,e=null,t=null,r,i=new Set){let o=[t||Uo,w3(n)];return r=r||(typeof n=="object"?void 0:Vl(n)),new Cf(o,e||j0(),r||null,i)}var Rn=class n{static THROW_IF_NOT_FOUND=wf;static NULL=new R0;static create(e,t){if(Array.isArray(e))return CI({name:""},t,e,"");{let r=e.name??"";return CI({name:r},e.parent,e.providers,r)}}static \u0275prov=Qe({token:n,providedIn:"any",factory:()=>Le(LI)});static __NG_ELEMENT_ID__=-1},ei=new Ye(""),xa=(()=>{class n{static __NG_ELEMENT_ID__=$G;static __NG_ENV_ID__=t=>t}return n})(),EI=class extends xa{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Df(this._lView)}onDestroy(e){let t=this._lView;return JI(t,e),()=>D3(t,e)}};function $G(){return new EI(dn())}var Ya=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ds=new Ye("",{providedIn:"root",factory:()=>{let n=Me(Wn),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Ya),e.handleError(t))}}}),Y3={provide:Bl,useValue:()=>void Me(Ya),multi:!0};function hS(n){return typeof n=="function"&&n[po]!==void 0}function Ca(n,e){let[t,r,i]=YE(n,e?.equal),o=t,s=o[po];return o.set=r,o.update=i,o.asReadonly=Q3.bind(o),o}function Q3(){let n=this[po];if(n.readonlyFn===void 0){let e=()=>this();e[po]=n,n.readonlyFn=e}return n.readonlyFn}function pS(n){return hS(n)&&typeof n.set=="function"}var ww=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=HG}return n})();function HG(){return new ww(dn(),Mi())}var jl=class{},K0=new Ye("",{providedIn:"root",factory:()=>!1});var gS=new Ye(""),mS=new Ye(""),Bc=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Zi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Pt(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new n})}return n})(),Vp=(()=>{class n{internalPendingTasks=Me(Bc);scheduler=Me(jl);errorHandler=Me(ds);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new n})}return n})();function Y0(...n){}var vS=(()=>{class n{static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new II})}return n})(),II=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Hp(n){return{toString:n}.toString()}var bw="__parameters__";function ZG(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function XG(n,e,t){return Hp(()=>{let r=ZG(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let p=c.hasOwnProperty(bw)?c[bw]:Object.defineProperty(c,bw,{value:[]})[bw];for(;p.length<=u;)p.push(null);return(p[u]=p[u]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ir=g3(XG("Optional"),8);function M4(n){let e=vo.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function JG(n){return typeof n=="function"}var Nw=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function N4(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Ia=(()=>{let n=()=>P4;return n.ngInherit=!0,n})();function P4(n){return n.type.prototype.ngOnChanges&&(n.setInput=tW),eW}function eW(){let n=R4(this),e=n?.current;if(e){let t=n.previous;if(t===$u)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function tW(n,e,t,r,i){let o=this.declaredInputs[r],s=R4(n)||nW(n,{previous:$u,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Nw(l&&l.currentValue,t,c===$u),N4(n,e,i,t)}var k4="__ngSimpleChanges__";function R4(n){return n[k4]||null}function nW(n,e){return n[k4]=e}var Z3=[];var cr=function(n,e=null,t){for(let r=0;r<Z3.length;r++){let i=Z3[r];i(n,e,t)}};function rW(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=P4(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function O4(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Aw(n,e,t){L4(n,e,3,t)}function Tw(n,e,t,r){(n[en]&3)===t&&L4(n,e,t,r)}function yS(n,e){let t=n[en];(t&3)===e&&(t&=16383,t+=1,n[en]=t)}function L4(n,e,t,r){let i=r!==void 0?n[Sf]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Sf]+=65536),(a<o||o==-1)&&(iW(n,t,e,c),n[Sf]=(n[Sf]&4294901760)+c+2),c++}function X3(n,e){cr(4,n,e);let t=gn(null);try{e.call(n)}finally{gn(t),cr(5,n,e)}}function iW(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[en]>>14<n[Sf]>>16&&(n[en]&3)===e&&(n[en]+=16384,X3(a,o)):X3(a,o)}var Bp=-1,kf=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function oW(n){return(n.flags&8)!==0}function sW(n){return(n.flags&16)!==0}function aW(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];cW(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function F4(n){return n===3||n===4||n===6}function cW(n){return n.charCodeAt(0)===64}function Up(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?J3(n,t,i,null,e[++r]):J3(n,t,i,null,null))}}return n}function J3(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function V4(n){return n!==Bp}function Pw(n){return n&32767}function lW(n){return n>>16}function kw(n,e){let t=lW(n),r=e;for(;t>0;)r=r[If],t--;return r}var TS=!0;function Rw(n){let e=TS;return TS=n,e}var uW=256,j4=uW-1,B4=5,dW=0,Uc={};function fW(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ef)&&(r=t[Ef]),r==null&&(r=t[Ef]=dW++);let i=r&j4,o=1<<i;e.data[n+(i>>B4)]|=o}function Ow(n,e){let t=U4(n,e);if(t!==-1)return t;let r=e[$t];r.firstCreatePass&&(n.injectorIndex=e.length,_S(r.data,n),_S(e,null),_S(r.blueprint,null));let i=aA(n,e),o=n.injectorIndex;if(V4(i)){let s=Pw(i),a=kw(i,e),c=a[$t].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function _S(n,e){n.push(0,0,0,0,0,0,0,0,e)}function U4(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function aA(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=G4(i),r===null)return Bp;if(t++,i=i[If],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Bp}function DS(n,e,t){fW(n,e,t)}function hW(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(F4(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function z4(n,e,t){if(t&8||n!==void 0)return n;iw(e,"NodeInjector")}function q4(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Hu],o=Bo(void 0);try{return i?i.get(e,r,t&8):RI(e,r,t&8)}finally{Bo(o)}}return z4(r,e,t)}function $4(n,e,t,r=0,i){if(n!==null){if(e[en]&2048&&!(r&2)){let s=vW(n,e,t,r,Uc);if(s!==Uc)return s}let o=H4(n,e,t,r,Uc);if(o!==Uc)return o}return q4(e,t,r,i)}function H4(n,e,t,r,i){let o=gW(t);if(typeof o=="function"){if(!uS(e,n,r))return r&1?z4(i,t,r):q4(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))iw(t);else return s}finally{dS()}}else if(typeof o=="number"){let s=null,a=U4(n,e),c=Bp,l=r&1?e[ya][va]:null;for((a===-1||r&4)&&(c=a===-1?aA(n,e):e[a+8],c===Bp||!t4(r,!1)?a=-1:(s=e[$t],a=Pw(c),e=kw(c,e)));a!==-1;){let u=e[$t];if(e4(o,a,u.data)){let p=pW(a,e,t,s,r,l);if(p!==Uc)return p}c=e[a+8],c!==Bp&&t4(r,e[$t].data[a+8]===l)&&e4(o,a,e)?(s=u,a=Pw(c),e=kw(c,e)):a=-1}}return i}function pW(n,e,t,r,i,o){let s=e[$t],a=s.data[n+8],c=r==null?zl(a)&&TS:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=Dw(a,s,t,c,l);return u!==null?X0(e,s,u,a,i):Uc}function Dw(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,p=r?a:a+u,m=i?a+u:l;for(let g=p;g<m;g++){let x=s[g];if(g<c&&t===x||g>=c&&x.type===t)return g}if(i){let g=s[c];if(g&&jc(g)&&g.type===t)return c}return null}function X0(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof kf){let a=o;if(a.resolving){let g=d3(s[t]);throw kI(g)}let c=Rw(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,p=a.injectImpl?Bo(a.injectImpl):null,m=uS(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&rW(t,s[t],e)}finally{p!==null&&Bo(p),Rw(c),a.resolving=!1,dS()}}return o}function gW(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ef)?n[Ef]:void 0;return typeof e=="number"?e>=0?e&j4:mW:e}function e4(n,e,t){let r=1<<n;return!!(t[e+(n>>B4)]&r)}function t4(n,e){return!(n&2)&&!(n&1&&e)}var Pf=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return $4(this._tNode,this._lView,e,bf(r),t)}};function mW(){return new Pf(Mi(),dn())}function Sa(n){return Hp(()=>{let e=n.prototype.constructor,t=e[k0]||MS(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[k0]||MS(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function MS(n){return SI(n)?()=>{let e=MS(Ji(n));return e&&e()}:Uu(n)}function vW(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[en]&2048&&!Op(s);){let a=H4(o,s,t,r|2,Uc);if(a!==Uc)return a;let c=o.parent;if(!c){let l=s[HI];if(l){let u=l.get(t,Uc,r);if(u!==Uc)return u}c=G4(s),s=s[If]}o=c}return i}function G4(n){let e=n[$t],t=e.type;return t===2?e.declTNode:t===1?n[va]:null}function iv(n){return hW(Mi(),n)}function yW(){return Gp(Mi(),dn())}function Gp(n,e){return new _o(wa(n,e))}var _o=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=yW}return n})();function _W(n){return n instanceof _o?n.nativeElement:n}function wW(){return this._results[Symbol.iterator]()}var Lw=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new kn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=v3(e);(this._changesDetected=!m3(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=wW};function W4(n){return(n.flags&128)===128}var cA=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(cA||{}),K4=new Map,bW=0;function xW(){return bW++}function CW(n){K4.set(n[U0],n)}function NS(n){K4.delete(n[U0])}var n4="__ngContext__";function zp(n,e){Vc(e)?(n[n4]=e[U0],CW(e)):n[n4]=e}function Y4(n){return Z4(n[kp])}function Q4(n){return Z4(n[ma])}function Z4(n){for(;n!==null&&!Xa(n);)n=n[ma];return n}var PS;function lA(n){PS=n}function X4(){if(PS!==void 0)return PS;if(typeof document<"u")return document;throw new et(210,!1)}var Kw=new Ye("",{providedIn:"root",factory:()=>EW}),EW="ng",Yw=new Ye(""),Ui=new Ye("",{providedIn:"platform",factory:()=>"unknown"});var Qw=new Ye("",{providedIn:"root",factory:()=>X4().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var IW="h",SW="b";var J4=!1,eL=new Ye("",{providedIn:"root",factory:()=>J4});var Zw=new Ye("");var AW=(n,e,t,r)=>{};function TW(n,e,t,r){AW(n,e,t,r)}function uA(n){return(n.flags&32)===32}var DW=()=>null;function tL(n,e,t=!1){return DW(n,e,t)}function nL(n,e){let t=n.contentQueries;if(t!==null){let r=gn(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];mw(o),a.contentQueries(2,e[s],s)}}}finally{gn(r)}}}function kS(n,e,t){mw(0);let r=gn(null);try{e(n,t)}finally{gn(r)}}function dA(n,e,t){if(GI(e)){let r=gn(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{gn(r)}}}var $l=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})($l||{});var xw;function MW(){if(xw===void 0&&(xw=null,vo.trustedTypes))try{xw=vo.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return xw}function Xw(n){return MW()?.createHTML(n)||n}var Cw;function NW(){if(Cw===void 0&&(Cw=null,vo.trustedTypes))try{Cw=vo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Cw}function r4(n){return NW()?.createScriptURL(n)||n}var Hl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tw})`}},RS=class extends Hl{getTypeName(){return"HTML"}},OS=class extends Hl{getTypeName(){return"Style"}},LS=class extends Hl{getTypeName(){return"Script"}},FS=class extends Hl{getTypeName(){return"URL"}},VS=class extends Hl{getTypeName(){return"ResourceURL"}};function Aa(n){return n instanceof Hl?n.changingThisBreaksApplicationSecurity:n}function Gl(n,e){let t=rL(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${tw})`)}return t===e}function rL(n){return n instanceof Hl&&n.getTypeName()||null}function fA(n){return new RS(n)}function hA(n){return new OS(n)}function pA(n){return new LS(n)}function gA(n){return new FS(n)}function mA(n){return new VS(n)}function PW(n){let e=new BS(n);return kW()?new jS(e):e}var jS=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Xw(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},BS=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Xw(e),t}};function kW(){try{return!!new window.DOMParser().parseFromString(Xw(""),"text/html")}catch{return!1}}var RW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ov(n){return n=String(n),n.match(RW)?n:"unsafe:"+n}function Wl(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function sv(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var iL=Wl("area,br,col,hr,img,wbr"),oL=Wl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sL=Wl("rp,rt"),OW=sv(sL,oL),LW=sv(oL,Wl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),FW=sv(sL,Wl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),i4=sv(iL,LW,FW,OW),aL=Wl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),VW=Wl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),jW=Wl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),BW=sv(aL,VW,jW),UW=Wl("script,style,template"),US=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=$W(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=qW(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=o4(e).toLowerCase();if(!i4.hasOwnProperty(t))return this.sanitizedSomething=!0,!UW.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!BW.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;aL[a]&&(c=ov(c)),this.buf.push(" ",s,'="',s4(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=o4(e).toLowerCase();i4.hasOwnProperty(t)&&!iL.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(s4(e))}};function zW(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function qW(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw cL(e);return e}function $W(n){let e=n.firstChild;if(e&&zW(n,e))throw cL(e);return e}function o4(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function cL(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var HW=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,GW=/([^\#-~ |!])/g;function s4(n){return n.replace(/&/g,"&amp;").replace(HW,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(GW,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ew;function vA(n,e){let t=null;try{Ew=Ew||PW(n);let r=e?String(e):"";t=Ew.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Ew.getInertBodyElement(r)}while(r!==o);let a=new US().sanitizeChildren(a4(t)||t);return Xw(a)}finally{if(t){let r=a4(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function a4(n){return"content"in n&&WW(n)?n.content:null}function WW(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var KW=/^>|^->|<!--|-->|--!>|<!-$/g,YW=/(<|>)/g,QW="\u200B$1\u200B";function ZW(n){return n.replace(KW,e=>e.replace(YW,QW))}function XW(n,e){return n.createText(e)}function JW(n,e,t){n.setValue(e,t)}function eK(n,e){return n.createComment(ZW(e))}function lL(n,e,t){return n.createElement(e,t)}function Fw(n,e,t,r,i){n.insertBefore(e,t,r,i)}function uL(n,e,t){n.appendChild(e,t)}function c4(n,e,t,r,i){r!==null?Fw(n,e,t,r,i):uL(n,e,t)}function tK(n,e,t,r){n.removeChild(null,e,t,r)}function nK(n,e,t){n.setAttribute(e,"style",t)}function rK(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function dL(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&aW(n,e,r),i!==null&&rK(n,e,i),o!==null&&nK(n,e,o)}var tc=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(tc||{});function Sr(n){let e=hL();return e?e.sanitize(tc.URL,n)||"":Gl(n,"URL")?Aa(n):ov(qu(n))}function fL(n){let e=hL();if(e)return r4(e.sanitize(tc.RESOURCE_URL,n)||"");if(Gl(n,"ResourceURL"))return r4(Aa(n));throw new et(904,!1)}function iK(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?fL:Sr}function yA(n,e,t){return iK(e,t)(n)}function hL(){let n=dn();return n&&n[Lc].sanitizer}function pL(n){return n instanceof Function?n():n}function oK(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var gL="ng-template";function sK(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&oK(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(_A(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function _A(n){return n.type===4&&n.value!==gL}function aK(n,e,t){let r=n.type===4&&!t?gL:n.value;return e===r}function cK(n,e,t){let r=4,i=n.attrs,o=i!==null?dK(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ja(r)&&!Ja(c))return!1;if(s&&Ja(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!aK(n,c,t)||c===""&&e.length===1){if(Ja(r))return!1;s=!0}}else if(r&8){if(i===null||!sK(n,i,c,t)){if(Ja(r))return!1;s=!0}}else{let l=e[++a],u=lK(c,i,_A(n),t);if(u===-1){if(Ja(r))return!1;s=!0;continue}if(l!==""){let p;if(u>o?p="":p=i[u+1].toLowerCase(),r&2&&l!==p){if(Ja(r))return!1;s=!0}}}}return Ja(r)||s}function Ja(n){return(n&1)===0}function lK(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return fK(e,n)}function uK(n,e,t=!1){for(let r=0;r<e.length;r++)if(cK(n,e[r],t))return!0;return!1}function dK(n){for(let e=0;e<n.length;e++){let t=n[e];if(F4(t))return e}return n.length}function fK(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function l4(n,e){return n?":not("+e.trim()+")":e}function hK(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ja(s)&&(e+=l4(o,i),i=""),r=s,o=o||!Ja(r);t++}return i!==""&&(e+=l4(o,i)),e}function pK(n){return n.map(hK).join(",")}function gK(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Ja(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var fs={};function wA(n,e,t,r,i,o,s,a,c,l,u){let p=Bi+r,m=p+i,g=mK(p,m),x=typeof l=="function"?l():l;return g[$t]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:x,incompleteFirstPass:!1,ssrId:u}}function mK(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:fs);return t}function vK(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=wA(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function bA(n,e,t,r,i,o,s,a,c,l,u){let p=e.blueprint.slice();return p[Za]=i,p[en]=r|4|128|8|64|1024,(l!==null||n&&n[en]&2048)&&(p[en]|=2048),ZI(p),p[ji]=p[If]=n,p[yo]=t,p[Lc]=s||n&&n[Lc],p[xr]=a||n&&n[xr],p[Hu]=c||n&&n[Hu]||null,p[va]=o,p[U0]=xW(),p[B0]=u,p[HI]=l,p[ya]=e.type==2?n[ya]:p,p}function yK(n,e,t){let r=wa(e,n),i=vK(t),o=n[Lc].rendererFactory,s=xA(n,bA(n,i,null,mL(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function mL(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function vL(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function xA(n,e){return n[kp]?n[$I][ma]=e:n[kp]=e,n[$I]=e,e}function X(n=1){yL(hi(),dn(),ql()+n,!1)}function yL(n,e,t,r){if(!r)if((e[en]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Aw(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Tw(e,o,0,t)}Ku(t)}var Jw=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Jw||{});function zS(n,e,t,r){let i=gn(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Jw.SignalBased)!==0&&(c=e[o][po]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):N4(e,c,o,r)}finally{gn(i)}}var zc=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(zc||{}),_K;function CA(n,e){return _K(n,e)}var qp=new Set,eb=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(eb||{}),Vf=new Ye(""),u4=new Set;function Wp(n){u4.has(n)||(u4.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var _L=!1,qS=class extends kn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,qI()&&(this.destroyRef=Me(xa,{optional:!0})??void 0,this.pendingTasks=Me(Bc,{optional:!0})??void 0)}emit(e){let t=gn(null);try{super.next(e)}finally{gn(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Hr&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},jr=qS;function wL(n){let e,t;function r(){n=Y0;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function d4(n){return queueMicrotask(()=>n()),()=>{n=Y0}}var EA="isAngularZone",Vw=EA+"_ID",wK=0,jt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new jr(!1);onMicrotaskEmpty=new jr(!1);onStable=new jr(!1);onError=new jr(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=_L}=e;if(typeof Zone>"u")throw new et(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,CK(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(EA)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new et(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new et(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,bK,Y0,Y0);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},bK={};function IA(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xK(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){wL(()=>{n.callbackScheduled=!1,$S(n),n.isCheckStableRunning=!0,IA(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$S(n)}function CK(n){let e=()=>{xK(n)},t=wK++;n._inner=n._inner.fork({name:"angular",properties:{[EA]:!0,[Vw]:t,[Vw+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(EK(c))return r.invokeTask(o,s,a,c);try{return f4(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),h4(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return f4(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!IK(c)&&e(),h4(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,$S(n),IA(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function $S(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function f4(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function h4(n){n._nesting--,IA(n)}var J0=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new jr;onMicrotaskEmpty=new jr;onStable=new jr;onError=new jr;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function EK(n){return bL(n,"__ignore_ng_zone__")}function IK(n){return bL(n,"__scheduler_tick__")}function bL(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function xL(n="zone.js",e){return n==="noop"?new J0:n==="zone.js"?new jt(e):n}var SA=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new n})}return n})(),CL=[0,1,2,3],EL=(()=>{class n{ngZone=Me(jt);scheduler=Me(jl);errorHandler=Me(Ya,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Me(Vf,{optional:!0})}execute(){let t=this.sequences.size>0;t&&cr(16),this.executing=!0;for(let r of CL)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&cr(17)}register(t){let{view:r}=t;r!==void 0?((r[Af]??=[]).push(t),Lp(r),r[en]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(eb.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new n})}return n})(),jw=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Af];e&&(this.view[Af]=e.filter(t=>t!==this))}};function av(n,e){let t=e?.injector??Me(Rn);return Wp("NgAfterNextRender"),AK(n,t,e,!0)}function SK(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function AK(n,e,t,r){let i=e.get(SA);i.impl??=e.get(EL);let o=e.get(Vf,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(xa):null,a=e.get(ww,null,{optional:!0}),c=new jw(i.impl,SK(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var TK=new Ye("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function IL(n,e,t){let r=n.get(TK);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function DK(n,e){for(let[t,r]of e)IL(n,r.animateFns)}function p4(n,e,t,r){let i=n?.[q0]?.enter;e!==null&&i&&i.has(t.index)&&DK(r,i)}function jp(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;Xa(i)?c=i:Vc(i)&&(l=!0,i=i[Za]);let u=_a(i);n===0&&r!==null?(p4(a,r,o,t),s==null?uL(e,r,u):Fw(e,r,u,s||null,!0)):n===1&&r!==null?(p4(a,r,o,t),Fw(e,r,u,s||null,!0)):n===2?g4(a,o,t,p=>{tK(e,u,l,p)}):n===3&&g4(a,o,t,()=>{e.destroyNode(u)}),c!=null&&zK(e,n,t,c,o,r,s)}}function MK(n,e){SL(n,e),e[Za]=null,e[va]=null}function NK(n,e,t,r,i,o){r[Za]=i,r[va]=e,tb(n,r,t,1,i,o)}function SL(n,e){e[Lc].changeDetectionScheduler?.notify(9),tb(n,e,e[xr],2,null,null)}function PK(n){let e=n[kp];if(!e)return wS(n[$t],n);for(;e;){let t=null;if(Vc(e))t=e[kp];else{let r=e[zo];r&&(t=r)}if(!t){for(;e&&!e[ma]&&e!==n;)Vc(e)&&wS(e[$t],e),e=e[ji];e===null&&(e=n),Vc(e)&&wS(e[$t],e),t=e&&e[ma]}e=t}}function AA(n,e){let t=n[Tf],r=t.indexOf(e);t.splice(r,1)}function AL(n,e){if(Df(e))return;let t=e[xr];t.destroyNode&&tb(n,e,t,3,null,null),PK(e)}function wS(n,e){if(Df(e))return;let t=gn(null);try{e[en]&=-129,e[en]|=256,e[Us]&&I0(e[Us]),OK(n,e),RK(n,e),e[$t].type===1&&e[xr].destroy();let r=e[Gu];if(r!==null&&Xa(e[ji])){r!==e[ji]&&AA(r,e);let i=e[Fc];i!==null&&i.detachView(n)}NS(e)}finally{gn(t)}}function g4(n,e,t,r){let i=n?.[q0];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&qp.add(n),IL(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),kK(n,r)}else n&&qp.delete(n),r(!1)},i)}function kK(n,e){let t=n[q0]?.running;if(t){t.then(()=>{n[q0].running=void 0,qp.delete(n),e(!0)});return}e(!1)}function RK(n,e){let t=n.cleanup,r=e[Pp];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Pp]=null);let i=e[Ll];if(i!==null){e[Ll]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[z0];if(o!==null){e[z0]=null;for(let s of o)s.destroy()}}function OK(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof kf)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];cr(4,a,c);try{c.call(a)}finally{cr(5,a,c)}}else{cr(4,i,o);try{o.call(i)}finally{cr(5,i,o)}}}}}function LK(n,e,t){return FK(n,e.parent,t)}function FK(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Za];if(zl(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===$l.None||i===$l.Emulated)return null}return wa(r,t)}function VK(n,e,t){return BK(n,e,t)}function jK(n,e,t){return n.type&40?wa(n,t):null}var BK=jK,m4;function TA(n,e,t,r){let i=LK(n,r,e),o=e[xr],s=r.parent||e[va],a=VK(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)c4(o,i,t[c],a,!1);else c4(o,i,t,a,!1);m4!==void 0&&m4(o,r,e,t,i)}function Q0(n,e){if(e!==null){let t=e.type;if(t&3)return wa(e,n);if(t&4)return HS(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Q0(n,r);{let i=n[e.index];return Xa(i)?HS(-1,i):_a(i)}}else{if(t&128)return Q0(n,e.next);if(t&32)return CA(e,n)()||_a(n[e.index]);{let r=TL(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=zu(n[ya]);return Q0(i,r)}else return Q0(n,e.next)}}}return null}function TL(n,e){if(e!==null){let r=n[ya][va],i=e.projection;return r.projection[i]}return null}function HS(n,e){let t=zo+n+1;if(t<e.length){let r=e[t],i=r[$t].firstChild;if(i!==null)return Q0(r,i)}return e[Wu]}function DA(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Hu];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&zp(_a(c),r),t.flags|=2),!uA(t))if(l&8)DA(n,e,t.child,r,i,o,!1),jp(e,n,a,i,c,t,o,r);else if(l&32){let u=CA(t,r),p;for(;p=u();)jp(e,n,a,i,p,t,o,r);jp(e,n,a,i,c,t,o,r)}else l&16?UK(n,e,r,t,i,o):jp(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function tb(n,e,t,r,i,o){DA(t,r,n.firstChild,e,i,o,!1)}function UK(n,e,t,r,i,o){let s=t[ya],c=s[va].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];jp(e,n,t[Hu],i,u,r,o,t)}else{let l=c,u=s[ji];W4(r)&&(l.flags|=128),DA(n,e,l,u,i,o,!0)}}function zK(n,e,t,r,i,o,s){let a=r[Wu],c=_a(r);a!==c&&jp(e,n,t,o,a,i,s);for(let l=zo;l<r.length;l++){let u=r[l];tb(u[$t],u,n,e,o,a)}}function qK(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:zc.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=zc.Important),n.setStyle(t,r,i,o))}}function DL(n,e,t,r,i){let o=ql(),s=r&2;try{Ku(-1),s&&e.length>Bi&&yL(n,e,Bi,!1),cr(s?2:0,i,t),t(r,i)}finally{Ku(o),cr(s?3:1,i,t)}}function nb(n,e,t){YK(n,e,t),(t.flags&64)===64&&QK(n,e,t)}function rb(n,e,t=wa){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function $K(n,e,t,r){let o=r.get(eL,J4)||t===$l.ShadowDom,s=n.selectRootElement(e,o);return HK(s),s}function HK(n){GK(n)}var GK=()=>null;function WK(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function ML(n,e,t,r,i,o){let s=e[$t];if(ib(n,s,e,t,r)){zl(n)&&NL(e,n.index);return}n.type&3&&(t=WK(t)),KK(n,e,t,r,i,o)}function KK(n,e,t,r,i,o){if(n.type&3){let s=wa(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function NL(n,e){let t=ba(e,n);t[en]&16||(t[en]|=64)}function YK(n,e,t){let r=t.directiveStart,i=t.directiveEnd;zl(t)&&yK(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ow(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=X0(e,n,s,t);if(zp(c,e),o!==null&&JK(e,s-r,c,a,t,o),jc(a)){let l=ba(t.index,e);l[yo]=X0(e,n,s,t)}}}function QK(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=U3();try{Ku(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];gw(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ZK(c,l)}}finally{Ku(-1),gw(s)}}function ZK(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function MA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];uK(e,o.selectors,!1)&&(r??=[],jc(o)?r.unshift(o):r.push(o))}return r}function XK(n,e,t,r,i,o){let s=wa(n,e);PL(e[xr],s,o,n.value,t,r,i)}function PL(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?qu(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function JK(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];zS(r,t,c,l)}}function NA(n,e,t,r,i){let o=Bi+t,s=e[$t],a=i(s,e,n,r,t);e[o]=a,Fp(n,!0);let c=n.type===2;return c?(dL(e[xr],a,n),(N3()===0||Rp(n))&&zp(a,e),P3()):zp(a,e),_w()&&(!c||!uA(n))&&TA(s,e,a,n),n}function PA(n){let e=n;return sS()?O3():(e=e.parent,Fp(e,!1)),e}function eY(n,e){let t=n[Hu];if(!t)return;let r;try{r=t.get(ds,null)}catch{r=null}r?.(e)}function ib(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],p=e.data[l];zS(p,t[l],u,i),a=!0}if(o)for(let c of o){let l=t[c],u=e.data[c];zS(u,l,r,i),a=!0}return a}function tY(n,e){let t=ba(e,n),r=t[$t];nY(r,t);let i=t[Za];i!==null&&t[B0]===null&&(t[B0]=tL(i,t[Hu])),cr(18),kA(r,t,t[yo]),cr(19,t[yo])}function nY(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function kA(n,e,t){vw(e);try{let r=n.viewQuery;r!==null&&kS(1,r,t);let i=n.template;i!==null&&DL(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Fc]?.finishViewCreation(n),n.staticContentQueries&&nL(n,e),n.staticViewQueries&&kS(2,n.viewQuery,t);let o=n.components;o!==null&&rY(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[en]&=-5,yw()}}function rY(n,e){for(let t=0;t<e.length;t++)tY(n,e[t])}function iY(n,e,t,r){let i=gn(null);try{let o=e.tView,a=n[en]&4096?4096:16,c=bA(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Gu]=l;let u=n[Fc];return u!==null&&(c[Fc]=u.createEmbeddedView(o)),kA(o,c,t),c}finally{gn(i)}}function v4(n,e){return!e||e.firstChild===null||W4(n)}function ev(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(_a(o)),Xa(o)&&kL(o,r);let s=t.type;if(s&8)ev(n,e,t.child,r);else if(s&32){let a=CA(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=TL(e,t);if(Array.isArray(a))r.push(...a);else{let c=zu(e[ya]);ev(c[$t],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function kL(n,e){for(let t=zo;t<n.length;t++){let r=n[t],i=r[$t].firstChild;i!==null&&ev(r[$t],r,i,e)}n[Wu]!==n[Za]&&e.push(n[Wu])}function RL(n){if(n[Af]!==null){for(let e of n[Af])e.impl.addSequence(e);n[Af].length=0}}var OL=[];function oY(n){return n[Us]??sY(n)}function sY(n){let e=OL.pop()??Object.create(cY);return e.lView=n,e}function aY(n){n.lView[Us]!==n&&(n.lView=null,OL.push(n))}var cY=Vt(Ve({},fp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Lp(n.lView)},consumerOnSignalRead(){this.lView[Us]=this}});function lY(n){let e=n[Us]??Object.create(uY);return e.lView=n,e}var uY=Vt(Ve({},fp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=zu(n.lView);for(;e&&!LL(e[$t]);)e=zu(e);e&&XI(e)},consumerOnSignalRead(){this.lView[Us]=this}});function LL(n){return n.type!==2}function FL(n){if(n[z0]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[z0])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[en]&8192)}}var dY=100;function VL(n,e=0){let r=n[Lc].rendererFactory,i=!1;i||r.begin?.();try{fY(n,e)}finally{i||r.end?.()}}function fY(n,e){let t=aS();try{cS(!0),GS(n,e);let r=0;for(;H0(n);){if(r===dY)throw new et(103,!1);r++,GS(n,1)}}finally{cS(t)}}function hY(n,e,t,r){if(Df(e))return;let i=e[en],o=!1,s=!1;vw(e);let a=!0,c=null,l=null;o||(LL(n)?(l=oY(e),c=pp(l)):y1()===null?(a=!1,l=lY(e),c=pp(l)):e[Us]&&(I0(e[Us]),e[Us]=null));try{ZI(e),V3(n.bindingStartIndex),t!==null&&DL(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let g=n.preOrderCheckHooks;g!==null&&Aw(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Tw(e,g,0,null),yS(e,0)}if(s||pY(e),FL(e),jL(e,0),n.contentQueries!==null&&nL(n,e),!o)if(u){let g=n.contentCheckHooks;g!==null&&Aw(e,g)}else{let g=n.contentHooks;g!==null&&Tw(e,g,1),yS(e,1)}mY(n,e);let p=n.components;p!==null&&UL(e,p,0);let m=n.viewQuery;if(m!==null&&kS(2,m,r),!o)if(u){let g=n.viewCheckHooks;g!==null&&Aw(e,g)}else{let g=n.viewHooks;g!==null&&Tw(e,g,2),yS(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[cw]){for(let g of e[cw])g();e[cw]=null}o||(RL(e),e[en]&=-73)}catch(u){throw o||Lp(e),u}finally{l!==null&&(C0(l,c),a&&aY(l)),yw()}}function jL(n,e){for(let t=Y4(n);t!==null;t=Q4(t))for(let r=zo;r<t.length;r++){let i=t[r];BL(i,e)}}function pY(n){for(let e=Y4(n);e!==null;e=Q4(e)){if(!(e[en]&2))continue;let t=e[Tf];for(let r=0;r<t.length;r++){let i=t[r];XI(i)}}}function gY(n,e,t){cr(18);let r=ba(e,n);BL(r,t),cr(19,r[yo])}function BL(n,e){uw(n)&&GS(n,e)}function GS(n,e){let r=n[$t],i=n[en],o=n[Us],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&E0(o)),s||=!1,o&&(o.dirty=!1),n[en]&=-9217,s)hY(r,n,r.template,n[yo]);else if(i&8192){let a=gn(null);try{FL(n),jL(n,1);let c=r.components;c!==null&&UL(n,c,1),RL(n)}finally{gn(a)}}}function UL(n,e,t){for(let r=0;r<e.length;r++)gY(n,e[r],t)}function mY(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ku(~i);else{let o=i,s=t[++r],a=t[++r];B3(s,o);let c=e[o];cr(24,c),a(2,c),cr(25,c)}}}finally{Ku(-1)}}function RA(n,e){let t=aS()?64:1088;for(n[Lc].changeDetectionScheduler?.notify(e);n;){n[en]|=t;let r=zu(n);if(Op(n)&&!r)return n;n=r}return null}function zL(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function vY(n,e,t,r=!0){let i=e[$t];if(yY(i,e,n,t),r){let s=HS(t,n),a=e[xr],c=a.parentNode(n[Wu]);c!==null&&NK(i,n[va],a,e,c,s)}let o=e[B0];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function WS(n,e){if(n.length<=zo)return;let t=zo+e,r=n[t];if(r){let i=r[Gu];i!==null&&i!==n&&AA(i,r),e>0&&(n[t-1][ma]=r[ma]);let o=F0(n,zo+e);MK(r[$t],r);let s=o[Fc];s!==null&&s.detachView(o[$t]),r[ji]=null,r[ma]=null,r[en]&=-129}return r}function yY(n,e,t,r){let i=zo+r,o=t.length;r>0&&(t[i-1][ma]=e),r<o-zo?(e[ma]=t[i],OI(t,zo+r,e)):(t.push(e),e[ma]=null),e[ji]=t;let s=e[Gu];s!==null&&t!==s&&qL(s,e);let a=e[Fc];a!==null&&a.insertView(n),dw(e),e[en]|=128}function qL(n,e){let t=n[Tf],r=e[ji];if(Vc(r))n[en]|=2;else{let i=r[ji][ya];e[ya]!==i&&(n[en]|=2)}t===null?n[Tf]=[e]:t.push(e)}var Yu=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[$t];return ev(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[yo]}set context(e){this._lView[yo]=e}get destroyed(){return Df(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ji];if(Xa(e)){let t=e[$0],r=t?t.indexOf(this):-1;r>-1&&(WS(e,r),F0(t,r))}this._attachedToViewContainer=!1}AL(this._lView[$t],this._lView)}onDestroy(e){JI(this._lView,e)}markForCheck(){RA(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[en]&=-129}reattach(){dw(this._lView),this._lView[en]|=128}detectChanges(){this._lView[en]|=1024,VL(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new et(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Op(this._lView),t=this._lView[Gu];t!==null&&!e&&AA(t,this._lView),SL(this._lView[$t],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new et(902,!1);this._appRef=e;let t=Op(this._lView),r=this._lView[Gu];r!==null&&!t&&qL(r,this._lView),dw(this._lView)}};var Qu=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=_Y;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=iY(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Yu(o)}}return n})();function _Y(){return ob(Mi(),dn())}function ob(n,e){return n.type&4?new Qu(e,n,Gp(n,e)):null}function sb(n,e,t,r,i){let o=n.data[e];if(o===null)o=wY(n,e,t,r,i),j3()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=R3();o.injectorIndex=s===null?-1:s.injectorIndex}return Fp(o,!0),o}function wY(n,e,t,r,i){let o=oS(),s=sS(),a=s?o:o&&o.parent,c=n.data[e]=xY(n,a,t,e,r,i);return bY(n,c,o,s),c}function bY(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function xY(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return k3()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Tbe=new RegExp(`^(\\d+)*(${SW}|${IW})*(.*)`);var CY=()=>null;function y4(n,e){return CY(n,e)}var $L=class{},ab=class{},KS=class{resolveComponentFactory(e){throw new et(917,!1)}},cv=class{static NULL=new KS},Rf=class{},hs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>EY()}return n})();function EY(){let n=dn(),e=Mi(),t=ba(e.index,n);return(Vc(t)?t:n)[xr]}var HL=(()=>{class n{static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>null})}return n})();var Mw={},YS=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Mw,r);return i!==Mw||t===Mw?i:this.parentInjector.get(e,t,r)}};function Bw(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=nw(i,a);else if(o==2){let c=a,l=e[++s];r=nw(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Je(n,e=0){let t=dn();if(t===null)return Le(n,e);let r=Mi();return $4(r,t,Ji(n),e)}function OA(){let n="invalid";throw new Error(n)}function GL(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}AY(n,e,t,a,o,c,l)}o!==null&&r!==null&&IY(t,r,o)}function IY(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new et(-301,!1);r.push(e[i],o)}}function SY(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function AY(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let m=0;m<a;m++){let g=r[m];!c&&jc(g)&&(c=!0,SY(n,t,m)),DS(Ow(t,e),n,g.type)}kY(t,n.data.length,a);for(let m=0;m<a;m++){let g=r[m];g.providersResolver&&g.providersResolver(g)}let l=!1,u=!1,p=vL(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let g=r[m];if(t.mergedAttrs=Up(t.mergedAttrs,g.hostAttrs),DY(n,t,e,p,g),PY(p,g,i),s!==null&&s.has(g)){let[E,D]=s.get(g);t.directiveToIndex.set(g.type,[p,E+t.directiveStart,D+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,p);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let x=g.type.prototype;!l&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(x.ngOnChanges||x.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),p++}TY(n,t,o)}function TY(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))_4(0,e,i,r),_4(1,e,i,r),b4(e,r,!1);else{let o=t.get(i);w4(0,e,o,r),w4(1,e,o,r),b4(e,r,!0)}}}function _4(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),WL(e,o)}}function w4(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),WL(e,s)}}function WL(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function b4(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||_A(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function DY(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Uu(i.type,!0)),s=new kf(o,jc(i),Je,null);n.blueprint[r]=s,t[r]=s,MY(n,e,r,vL(n,t,i.hostVars,fs),i)}function MY(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;NY(s)!=a&&s.push(a),s.push(t,r,o)}}function NY(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function PY(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;jc(e)&&(t[""]=n)}}function kY(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function LA(n,e,t,r,i,o,s,a){let c=e[$t],l=c.consts,u=Mf(l,s),p=sb(c,n,t,r,u);return o&&GL(c,e,p,Mf(l,a),i),p.mergedAttrs=Up(p.mergedAttrs,p.attrs),p.attrs!==null&&Bw(p,p.attrs,!1),p.mergedAttrs!==null&&Bw(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function FA(n,e){O4(n,e),GI(e)&&n.queries.elementEnd(e)}function RY(n,e,t,r,i,o){let s=e.consts,a=Mf(s,i),c=sb(e,n,t,r,a);if(c.mergedAttrs=Up(c.mergedAttrs,c.attrs),o!=null){let l=Mf(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Bw(c,c.attrs,!1),c.mergedAttrs!==null&&Bw(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function VA(n){return YL(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function KL(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function YL(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function jA(n,e,t){return n[e]=t}function Ea(n,e,t){if(t===fs)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function BA(n,e,t,r){let i=Ea(n,e,t);return Ea(n,e+1,r)||i}function OY(n,e,t,r,i){let o=BA(n,e,t,r);return Ea(n,e+2,i)||o}function bS(n,e,t){return function r(i){let o=zl(n)?ba(n.index,e):e;RA(o,5);let s=e[yo],a=x4(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=x4(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function x4(n,e,t,r){let i=gn(null);try{return cr(6,e,t),t(r)!==!1}catch(o){return eY(n,o),!1}finally{cr(7,e,t),gn(i)}}function LY(n,e,t,r,i,o,s,a){let c=Rp(n),l=!1,u=null;if(!r&&c&&(u=VY(e,t,o,n.index)),u!==null){let p=u.__ngLastListenerFn__||u;p.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let p=wa(n,t),m=r?r(p):p;TW(t,m,o,a);let g=i.listen(m,o,a);if(!FY(o)){let x=r?E=>r(_a(E[n.index])):n.index;QL(x,e,t,o,a,g,!1)}}return l}function FY(n){return n.startsWith("animation")||n.startsWith("transition")}function VY(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Pp],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function QL(n,e,t,r,i,o,s){let a=e.firstCreatePass?tS(e):null,c=eS(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function C4(n,e,t,r,i,o){let s=e[t],a=e[$t],l=a.data[t].outputs[r],p=s[l].subscribe(o);QL(n.index,a,e,i,o,p,!0)}var QS=Symbol("BINDING");var Uw=class extends cv{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ul(e);return new Of(t,this.ngModule)}};function jY(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Jw.SignalBased)!==0};return i&&(o.transform=i),o})}function BY(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function UY(n,e,t){let r=e instanceof Wn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new YS(t,r):t}function zY(n){let e=n.get(Rf,null);if(e===null)throw new et(407,!1);let t=n.get(HL,null),r=n.get(jl,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function qY(n,e){let t=ZL(n);return lL(e,t,t==="svg"?WI:t==="math"?I3:null)}function ZL(n){return(n.selectors[0][0]||"div").toLowerCase()}var Of=class extends ab{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=jY(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=BY(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=pK(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){cr(22);let a=gn(null);try{let c=this.componentDef,l=$Y(r,c,s,o),u=UY(c,i||this.ngModule,e),p=zY(u),m=p.rendererFactory.createRenderer(null,c),g=r?$K(m,r,c.encapsulation,u):qY(c,m),x=s?.some(E4)||o?.some(N=>typeof N!="function"&&N.bindings.some(E4)),E=bA(null,l,null,512|mL(c),null,null,p,m,u,null,tL(g,u,!0));E[Bi]=g,vw(E);let D=null;try{let N=LA(Bi,E,2,"#host",()=>l.directiveRegistry,!0,0);dL(m,g,N),zp(g,E),nb(l,E,N),dA(l,N,E),FA(l,N),t!==void 0&&GY(N,this.ngContentSelectors,t),D=ba(N.index,E),E[yo]=D[yo],kA(l,E,null)}catch(N){throw D!==null&&NS(D),NS(E),N}finally{cr(23),yw()}return new zw(this.componentType,E,!!x)}finally{gn(a)}}};function $Y(n,e,t,r){let i=n?["ng-version","20.3.15"]:gK(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[QS].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let p=r[u];if(typeof p!="function")for(let m of p.bindings){a+=m[QS].requiredVars;let g=u+1;m.create&&(m.targetIdx=g,(o??=[]).push(m)),m.update&&(m.targetIdx=g,(s??=[]).push(m))}}let c=[e];if(r)for(let u of r){let p=typeof u=="function"?u:u.type,m=jI(p);c.push(m)}return wA(0,null,HY(o,s),1,a,c,null,null,null,[i],null)}function HY(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function E4(n){let e=n[QS].kind;return e==="input"||e==="twoWay"}var zw=class extends $L{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=lw(t[$t],Bi),this.location=Gp(this._tNode,t),this.instance=ba(this._tNode.index,t)[yo],this.hostView=this.changeDetectorRef=new Yu(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=ib(r,i[$t],i,e,t);this.previousInputValues.set(e,t);let s=ba(r.index,i);RA(s,1)}get injector(){return new Pf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function GY(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Kl=(()=>{class n{static __NG_ELEMENT_ID__=WY}return n})();function WY(){let n=Mi();return JL(n,dn())}var KY=Kl,XL=class extends KY{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Gp(this._hostTNode,this._hostLView)}get injector(){return new Pf(this._hostTNode,this._hostLView)}get parentInjector(){let e=aA(this._hostTNode,this._hostLView);if(V4(e)){let t=kw(e,this._hostLView),r=Pw(e),i=t[$t].data[r+8];return new Pf(i,t)}else return new Pf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=I4(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-zo}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=y4(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,v4(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!JG(e),l;if(c)l=t;else{let D=t||{};l=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef,s=D.directives,a=D.bindings}let u=c?e:new Of(Ul(e)),p=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(c?p:this.parentInjector).get(Wn,null);N&&(o=N)}let m=Ul(u.componentType??{}),g=y4(this._lContainer,m?.id??null),x=g?.firstChild??null,E=u.create(p,i,x,o,s,a);return this.insertImpl(E.hostView,l,v4(this._hostTNode,g)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(A3(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[ji],l=new XL(c,c[va],c[ji]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return vY(s,i,o,r),e.attachToViewContainerRef(),OI(xS(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=I4(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=WS(this._lContainer,t);r&&(F0(xS(this._lContainer),t),AL(r[$t],r))}detach(e){let t=this._adjustIndex(e,-1),r=WS(this._lContainer,t);return r&&F0(xS(this._lContainer),t)!=null?new Yu(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function I4(n){return n[$0]}function xS(n){return n[$0]||(n[$0]=[])}function JL(n,e){let t,r=e[n.index];return Xa(r)?t=r:(t=zL(r,e,null,n),e[n.index]=t,xA(e,t)),QY(t,e,n,r),new XL(t,n,e)}function YY(n,e){let t=n[xr],r=t.createComment(""),i=wa(e,n),o=t.parentNode(i);return Fw(t,o,r,t.nextSibling(i),!1),r}var QY=JY,ZY=()=>!1;function XY(n,e,t){return ZY(n,e,t)}function JY(n,e,t,r){if(n[Wu])return;let i;t.type&8?i=_a(r):i=YY(e,t),n[Wu]=i}var ZS=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},XS=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)UA(e,t).matches!==null&&this.queries[t].setDirty()}},qw=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=aQ(e):this.predicate=e}},JS=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},eA=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,eQ(t,o)),this.matchTNodeWithReadOption(e,t,Dw(t,e,o,!1,!1))}else r===Qu?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Dw(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===_o||i===Kl||i===Qu&&t.type&4)this.addMatch(t.index,-2);else{let o=Dw(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function eQ(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function tQ(n,e){return n.type&11?Gp(n,e):n.type&4?ob(n,e):null}function nQ(n,e,t,r){return t===-1?tQ(e,n):t===-2?rQ(n,e,r):X0(n,n[$t],t,e)}function rQ(n,e,t){if(t===_o)return Gp(e,n);if(t===Qu)return ob(e,n);if(t===Kl)return JL(e,n)}function eF(n,e,t,r){let i=e[Fc].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(nQ(e,u,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function tA(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=eF(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let p=zo;p<u.length;p++){let m=u[p];m[Gu]===m[ji]&&tA(m[$t],m,l,r)}if(u[Tf]!==null){let p=u[Tf];for(let m=0;m<p.length;m++){let g=p[m];tA(g[$t],g,l,r)}}}}}return r}function iQ(n,e){return n[Fc].queries[e].queryList}function tF(n,e,t){let r=new Lw((t&4)===4);return M3(n,e,r,r.destroy),(e[Fc]??=new XS).queries.push(new ZS(r))-1}function oQ(n,e,t){let r=hi();return r.firstCreatePass&&(nF(r,new qw(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),tF(r,dn(),e)}function sQ(n,e,t,r){let i=hi();if(i.firstCreatePass){let o=Mi();nF(i,new qw(e,t,r),o.index),cQ(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return tF(i,dn(),t)}function aQ(n){return n.split(",").map(e=>e.trim())}function nF(n,e,t){n.queries===null&&(n.queries=new JS),n.queries.track(new eA(e,t))}function cQ(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function UA(n,e){return n.queries.getByIndex(e)}function lQ(n,e){let t=n[$t],r=UA(t,e);return r.crossesNgTemplate?tA(t,n,e,[]):eF(t,n,r,e)}function rF(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(a=>dQ(i,a)))}return o}return $w.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(g=>{a[l+m]=g,u.splice(u.indexOf(p),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>fQ(o));e.push(c)}),iF(),Promise.all(e).then(()=>{})}var $w=new Map,uQ=new Set;function iF(){let n=$w;return $w=new Map,n}function oF(){return $w.size===0}function dQ(n,e){return typeof e=="string"?e:e.status!==void 0&&e.status!==200?Promise.reject(new et(918,!1)):e.text()}function fQ(n){uQ.delete(n)}var Lf=class{},cb=class{};var tv=class extends Lf{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Uw(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=VI(e);this._bootstrapComponents=pL(o.bootstrap),this._r3Injector=fS(e,t,[{provide:Lf,useValue:this},{provide:cv,useValue:this.componentFactoryResolver},...r],Vl(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},nv=class extends cb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new tv(this.moduleType,e,[])}};function sF(n,e,t){return new tv(n,e,t,!1)}var Hw=class extends Lf{injector;componentFactoryResolver=new Uw(this);instance=null;constructor(e){super();let t=new Cf([...e.providers,{provide:Lf,useValue:this},{provide:cv,useValue:this.componentFactoryResolver}],e.parent||j0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kp(n,e,t=null){return new Hw({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var hQ=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=BI(!1,t.type),i=r.length>0?Kp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Qe({token:n,providedIn:"environment",factory:()=>new n(Le(Wn))})}return n})();function lr(n){return Hp(()=>{let e=aF(n),t=Vt(Ve({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===cA.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(hQ).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$l.Emulated,styles:n.styles||Uo,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Wp("NgStandalone"),cF(t);let r=n.dependencies;return t.directiveDefs=S4(r,pQ),t.pipeDefs=S4(r,_3),t.id=vQ(t),t})}function pQ(n){return Ul(n)||jI(n)}function ur(n){return Hp(()=>({type:n.type,bootstrap:n.bootstrap||Uo,declarations:n.declarations||Uo,imports:n.imports||Uo,exports:n.exports||Uo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function gQ(n,e){if(n==null)return $u;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Jw.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function mQ(n){if(n==null)return $u;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function rr(n){return Hp(()=>{let e=aF(n);return cF(e),e})}function lb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function aF(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||$u,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Uo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:gQ(n.inputs,e),outputs:mQ(n.outputs),debugInfo:null}}function cF(n){n.features?.forEach(e=>e(n))}function S4(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function vQ(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yQ(n){return Object.getPrototypeOf(n.prototype).constructor}function qo(n){let e=yQ(n.type),t=!0,r=[n];for(;e;){let i;if(jc(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new et(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=CS(n.inputs),s.declaredInputs=CS(n.declaredInputs),s.outputs=CS(n.outputs);let a=i.hostBindings;a&&CQ(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&bQ(n,c),l&&xQ(n,l),_Q(n,i),u3(n.outputs,i.outputs),jc(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===qo&&(t=!1)}}e=Object.getPrototypeOf(e)}wQ(r)}function _Q(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function wQ(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Up(i.hostAttrs,t=Up(t,i.hostAttrs))}}function CS(n){return n===$u?{}:n===Uo?[]:n}function bQ(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function xQ(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function CQ(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function EQ(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Up(n.mergedAttrs,n.attrs);let u=n.tView=wA(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Fp(n,!1);let c=SQ(t,e,n,r);_w()&&TA(t,e,c,n),zp(c,e);let l=zL(c,e,c,n);e[r+Bi]=l,xA(e,l),XY(l,n,e)}function IQ(n,e,t,r,i,o,s,a,c,l,u){let p=t+Bi,m;return e.firstCreatePass?(m=sb(e,p,4,s||null,a||null),fw()&&GL(e,n,m,Mf(e.consts,l),MA),O4(e,m)):m=e.data[p],EQ(m,n,e,t,r,i,o,c),Rp(m)&&nb(e,n,m),l!=null&&rb(n,m,u),m}function rt(n,e,t,r,i,o,s,a){let c=dn(),l=hi(),u=Mf(l.consts,o);return IQ(c,l,n,e,t,r,i,u,void 0,s,a),rt}var SQ=AQ;function AQ(n,e,t,r){return W0(!0),e[xr].createComment("")}var ub=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var db=new Ye(""),Yp=new Ye(""),lv=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,qI()&&(this._destroyRef=Me(xa,{optional:!0})??void 0),zA||(lF(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{jt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(Le(jt),Le(uv),Le(Yp))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),uv=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return zA?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function lF(n){zA=n}var zA;function Zu(n){return!!n&&typeof n.then=="function"}function qA(n){return!!n&&typeof n.subscribe=="function"}var $A=new Ye("");function Qp(n){return eo([{provide:$A,multi:!0,useValue:n}])}var HA=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Me($A,{optional:!0})??[];injector=Me(Rn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=fi(this.injector,i);if(Zu(o))t.push(o);else if(qA(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fb=new Ye("");function uF(){KE(()=>{let n="";throw new et(600,n)})}function dF(n){return n.isBoundToModule}var TQ=10;function GA(n,e){return Array.isArray(e)?e.reduce(GA,n):Ve(Ve({},n),e)}var $o=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Me(ds);afterRenderManager=Me(SA);zonelessEnabled=Me(K0);rootEffectScheduler=Me(vS);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new kn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Me(Bc);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(at(t=>!t))}constructor(){Me(Vf,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Me(Wn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Rn.NULL){return this._injector.get(jt).run(()=>{cr(10);let s=t instanceof ab;if(!this._injector.get(HA).done){let x="";throw new et(405,x)}let c;s?c=t:c=this._injector.get(cv).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=dF(c)?void 0:this._injector.get(Lf),u=r||c.selector,p=c.create(i,[],u,l),m=p.location.nativeElement,g=p.injector.get(db,null);return g?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Z0(this.components,p),g?.unregisterApplication(m)}),this._loadComponent(p),cr(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){cr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(eb.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new et(101,!1);let t=gn(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,gn(t),this.afterTick.next(),cr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Rf,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<TQ;)cr(14),this.synchronizeOnce(),cr(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!H0(i))continue;let o=r&&!this.zonelessEnabled?0:1;VL(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>H0(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Z0(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(fb,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Z0(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new et(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ta(n,e){let t=dn(),r=Nf();if(Ea(t,r,e)){let i=hi(),o=G0();if(ib(o,i,t,n,e))zl(o)&&NL(t,o.index);else{let a=wa(o,t);PL(t[xr],a,null,o.value,n,e,null)}}return Ta}function jf(n,e,t,r){let i=dn(),o=Nf();if(Ea(i,o,e)){let s=hi(),a=G0();XK(a,i,n,e,t,r)}return jf}var Obe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ge(n,e,t){let r=dn(),i=Nf();if(Ea(r,i,e)){let o=hi(),s=G0();ML(s,r,n,e,r[xr],t)}return ge}function nA(n,e,t,r,i){ib(e,n,t,i?"class":"style",r)}function A(n,e,t,r){let i=dn(),o=i[$t],s=n+Bi,a=o.firstCreatePass?LA(s,i,2,e,MA,fw(),t,r):o.data[s];if(NA(a,i,n,e,fF),Rp(a)){let c=i[$t];nb(c,i,a),dA(c,a,i)}return r!=null&&rb(i,a),A}function R(){let n=hi(),e=Mi(),t=PA(e);return n.firstCreatePass&&FA(n,t),rS(t)&&iS(),nS(),t.classesWithoutHost!=null&&oW(t)&&nA(n,t,dn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&sW(t)&&nA(n,t,dn(),t.stylesWithoutHost,!1),R}function wt(n,e,t,r){return A(n,e,t,r),R(),wt}function WA(n,e,t,r){let i=dn(),o=i[$t],s=n+Bi,a=o.firstCreatePass?RY(s,o,2,e,t,r):o.data[s];return NA(a,i,n,e,fF),r!=null&&rb(i,a),WA}function KA(){let n=Mi(),e=PA(n);return rS(e)&&iS(),nS(),KA}function hb(n,e,t,r){return WA(n,e,t,r),KA(),hb}var fF=(n,e,t,r,i)=>(W0(!0),lL(e[xr],r,W3()));function Ni(n,e,t){let r=dn(),i=r[$t],o=n+Bi,s=i.firstCreatePass?LA(o,r,8,"ng-container",MA,fw(),e,t):i.data[o];if(NA(s,r,n,"ng-container",DQ),Rp(s)){let a=r[$t];nb(a,r,s),dA(a,s,r)}return t!=null&&rb(r,s),Ni}function Pi(){let n=hi(),e=Mi(),t=PA(e);return n.firstCreatePass&&FA(n,t),Pi}var DQ=(n,e,t,r,i)=>(W0(!0),eK(e[xr],""));function Bt(){return dn()}var dv="en-US";var MQ=dv;function hF(n){typeof n=="string"&&(MQ=n.toLowerCase().replace(/_/g,"-"))}function Fe(n,e,t){let r=dn(),i=hi(),o=Mi();return pF(i,r,r[xr],o,n,e,t),Fe}function pF(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=bS(r,e,o),LY(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let p=0;p<u.length;p+=2){let m=u[p],g=u[p+1];c??=bS(r,e,o),C4(r,e,m,g,i,c)}if(l&&l.length)for(let p of l)c??=bS(r,e,o),C4(r,e,p,i,i,c)}}function ie(n=1){return G3(n)}function YA(n,e,t,r){sQ(n,e,t,r)}function fv(n,e,t){oQ(n,e,t)}function Bf(n){let e=dn(),t=hi(),r=lS();mw(r+1);let i=UA(t,r);if(n.dirty&&S3(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=lQ(e,r);n.reset(o,_W),n.notifyOnChanges()}return!0}return!1}function Uf(){return iQ(dn(),lS())}function pi(n){let e=L3();return YI(e,Bi+n)}function Iw(n,e){return n<<17|e<<2}function Ff(n){return n>>17&32767}function NQ(n){return(n&2)==2}function PQ(n,e){return n&131071|e<<17}function rA(n){return n|2}function $p(n){return(n&131068)>>2}function ES(n,e){return n&-131069|e<<2}function kQ(n){return(n&1)===1}function iA(n){return n|1}function RQ(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ff(s),c=$p(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let p=t;u=p[1],(u===null||Np(p,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let m=Ff(n[a+1]);n[r+1]=Iw(m,a),m!==0&&(n[m+1]=ES(n[m+1],r)),n[a+1]=PQ(n[a+1],r)}else n[r+1]=Iw(a,0),a!==0&&(n[a+1]=ES(n[a+1],r)),a=r;else n[r+1]=Iw(c,0),a===0?a=r:n[c+1]=ES(n[c+1],r),c=r;l&&(n[r+1]=rA(n[r+1])),A4(n,u,r,!0),A4(n,u,r,!1),OQ(e,u,n,r,o),s=Iw(a,c),o?e.classBindings=s:e.styleBindings=s}function OQ(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Np(o,e)>=0&&(t[r+1]=iA(t[r+1]))}function A4(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ff(i):$p(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];LQ(c,e)&&(a=!0,n[s+1]=r?iA(l):rA(l)),s=r?Ff(l):$p(l)}a&&(n[t+1]=r?rA(i):iA(i))}function LQ(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Np(n,e)>=0:!1}var ec={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FQ(n){return n.substring(ec.key,ec.keyEnd)}function VQ(n){return jQ(n),gF(n,mF(n,0,ec.textEnd))}function gF(n,e){let t=ec.textEnd;return t===e?-1:(e=ec.keyEnd=BQ(n,ec.key=e,t),mF(n,e,t))}function jQ(n){ec.key=0,ec.keyEnd=0,ec.value=0,ec.valueEnd=0,ec.textEnd=n.length}function mF(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function BQ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ps(n,e){return zQ(n,e,null,!0),ps}function QA(n){qQ(YQ,UQ,n,!0)}function UQ(n,e){for(let t=VQ(e);t>=0;t=gF(e,t))sw(n,FQ(e),!0)}function zQ(n,e,t,r){let i=dn(),o=hi(),s=pw(2);if(o.firstUpdatePass&&yF(o,n,s,r),e!==fs&&Ea(i,s,e)){let a=o.data[ql()];_F(o,a,i,i[xr],n,i[s+1]=ZQ(e,t),r,s)}}function qQ(n,e,t,r){let i=hi(),o=pw(2);i.firstUpdatePass&&yF(i,null,o,r);let s=dn();if(t!==fs&&Ea(s,o,t)){let a=i.data[ql()];if(wF(a,r)&&!vF(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=nw(c,t||"")),nA(i,a,s,t,r)}else QQ(i,a,s,s[xr],s[o+1],s[o+1]=KQ(n,e,t),r,o)}}function vF(n,e){return e>=n.expandoStartIndex}function yF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ql()],s=vF(n,t);wF(o,r)&&e===null&&!s&&(e=!1),e=$Q(i,o,e,r),RQ(i,o,e,t,s,r)}}function $Q(n,e,t,r){let i=z3(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=IS(null,n,e,t,r),t=rv(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=IS(i,n,e,t,r),o===null){let c=HQ(n,e,r);c!==void 0&&Array.isArray(c)&&(c=IS(null,n,e,c[1],r),c=rv(c,e.attrs,r),GQ(n,e,r,c))}else o=WQ(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function HQ(n,e,t){let r=t?e.classBindings:e.styleBindings;if($p(r)!==0)return n[Ff(r)]}function GQ(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ff(i)]=r}function WQ(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=rv(r,s,t)}return rv(r,e.attrs,t)}function IS(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=rv(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function rv(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sw(n,s,t?!0:e[++o]))}return n===void 0?null:n}function KQ(n,e,t){if(t==null||t==="")return Uo;let r=[],i=Aa(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function YQ(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&sw(n,r,t)}function QQ(n,e,t,r,i,o,s,a){i===fs&&(i=Uo);let c=0,l=0,u=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;u!==null||p!==null;){let m=c<i.length?i[c+1]:void 0,g=l<o.length?o[l+1]:void 0,x=null,E;u===p?(c+=2,l+=2,m!==g&&(x=p,E=g)):p===null||u!==null&&u<p?(c+=2,x=u):(l+=2,x=p,E=g),x!==null&&_F(n,e,t,r,x,E,s,a),u=c<i.length?i[c]:null,p=l<o.length?o[l]:null}}function _F(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=kQ(l)?T4(c,e,t,i,$p(l),s):void 0;if(!Gw(u)){Gw(o)||NQ(l)&&(o=T4(c,null,t,i,a,s));let p=KI(ql(),t);qK(r,s,p,i,o)}}function T4(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,p=u===null,m=t[i+1];m===fs&&(m=p?Uo:void 0);let g=p?aw(m,r):u===r?m:void 0;if(l&&!Gw(g)&&(g=aw(c,r)),Gw(g)&&(a=g,s))return a;let x=n[i+1];i=s?Ff(x):$p(x)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=aw(c,r))}return a}function Gw(n){return n!==void 0}function ZQ(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Vl(Aa(n)))),n}function wF(n,e){return(n.flags&(e?8:16))!==0}function W(n,e=""){let t=dn(),r=hi(),i=n+Bi,o=r.firstCreatePass?sb(r,i,1,e,null):r.data[i],s=XQ(r,t,o,e,n);t[i]=s,_w()&&TA(r,t,s,o),Fp(o,!1)}var XQ=(n,e,t,r,i)=>(W0(!0),XW(e[xr],r));function bF(n,e,t,r=""){return Ea(n,Nf(),t)?e+qu(t)+r:fs}function JQ(n,e,t,r,i,o=""){let s=F3(),a=BA(n,s,t,i);return pw(2),a?e+qu(t)+r+qu(i)+o:fs}function zt(n){return Ar("",n),zt}function Ar(n,e,t){let r=dn(),i=bF(r,n,e,t);return i!==fs&&xF(r,ql(),i),Ar}function pb(n,e,t,r,i){let o=dn(),s=JQ(o,n,e,t,r,i);return s!==fs&&xF(o,ql(),s),pb}function xF(n,e,t){let r=KI(e,n);JW(n[xr],r,t)}function lt(n,e,t){pS(e)&&(e=e());let r=dn(),i=Nf();if(Ea(r,i,e)){let o=hi(),s=G0();ML(s,r,n,e,r[xr],t)}return lt}function dt(n,e){let t=pS(n);return t&&n.set(e),t}function ut(n,e){let t=dn(),r=hi(),i=Mi();return pF(r,t,t[xr],i,n,e),ut}function zf(n){return Ea(dn(),Nf(),n)?qu(n):fs}function qc(n,e,t=""){return bF(dn(),n,e,t)}function eZ(n,e,t){let r=hi();if(r.firstCreatePass){let i=jc(n);oA(t,r.data,r.blueprint,i,!0),oA(e,r.data,r.blueprint,i,!1)}}function oA(n,e,t,r,i){if(n=Ji(n),Array.isArray(n))for(let o=0;o<n.length;o++)oA(n[o],e,t,r,i);else{let o=hi(),s=dn(),a=Mi(),c=xf(n)?n:Ji(n.provide),l=zI(n),u=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(xf(n)||!n.multi){let g=new kf(l,i,Je,null),x=AS(c,e,i?u:u+m,p);x===-1?(DS(Ow(a,s),o,c),SS(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[x]=g,s[x]=g)}else{let g=AS(c,e,u+m,p),x=AS(c,e,u,u+m),E=g>=0&&t[g],D=x>=0&&t[x];if(i&&!D||!i&&!E){DS(Ow(a,s),o,c);let N=rZ(i?nZ:tZ,t.length,i,r,l,n);!i&&D&&(t[x].providerFactory=N),SS(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(N),s.push(N)}else{let N=CF(t[i?x:g],l,!i&&r);SS(o,n,g>-1?g:x,N)}!i&&r&&D&&t[x].componentProviders++}}}function SS(n,e,t,r){let i=xf(e),o=C3(e);if(i||o){let c=(o?Ji(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function CF(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function AS(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function tZ(n,e,t,r,i){return sA(this.multi,[])}function nZ(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=X0(r,r[$t],this.providerFactory.index,i);s=c.slice(0,a),sA(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],sA(o,s);return s}function sA(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function rZ(n,e,t,r,i,o){let s=new kf(n,t,Je,null);return s.multi=[],s.index=e,s.componentProviders=0,CF(s,i,r&&!t),s}function nc(n,e=[]){return t=>{t.providersResolver=(r,i)=>eZ(r,i?i(n):n,e)}}function $c(n,e,t,r){return iZ(dn(),hw(),n,e,t,r)}function hv(n,e,t,r,i){return oZ(dn(),hw(),n,e,t,r,i)}function ZA(n,e){let t=n[e];return t===fs?void 0:t}function iZ(n,e,t,r,i,o){let s=e+t;return Ea(n,s,i)?jA(n,s+1,o?r.call(o,i):r(i)):ZA(n,s+1)}function oZ(n,e,t,r,i,o,s){let a=e+t;return BA(n,a,i,o)?jA(n,a+2,s?r.call(s,i,o):r(i,o)):ZA(n,a+2)}function sZ(n,e,t,r,i,o,s,a){let c=e+t;return OY(n,c,i,o,s)?jA(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):ZA(n,c+3)}function pv(n,e){let t=hi(),r,i=n+Bi;t.firstCreatePass?(r=aZ(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Uu(r.type,!0)),s,a=Bo(Je);try{let c=Rw(!1),l=o();return Rw(c),QI(t,dn(),i,l),l}finally{Bo(a)}}function aZ(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function gv(n,e,t,r,i){let o=n+Bi,s=dn(),a=YI(s,o);return cZ(s,o)?sZ(s,hw(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function cZ(n,e){return n[$t].data[e].pure}function to(n,e){return ob(n,e)}var Sw=null;function EF(n){Sw!==null&&(n.defaultEncapsulation!==Sw.defaultEncapsulation||n.preserveWhitespaces!==Sw.preserveWhitespaces)||(Sw=n)}var Ww=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},XA=(()=>{class n{compileModuleSync(t){return new nv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=VI(t),o=pL(i.declarations).reduce((s,a)=>{let c=Ul(a);return c&&s.push(new Of(c)),s},[]);return new Ww(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IF=new Ye("");var lZ=(()=>{class n{zone=Me(jt);changeDetectionScheduler=Me(jl);applicationRef=Me($o);applicationErrorHandler=Me(ds);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SF({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new jt(Vt(Ve({},JA()),{scheduleInRootZone:t})),[{provide:jt,useFactory:n},{provide:Bl,multi:!0,useFactory:()=>{let r=Me(lZ,{optional:!0});return()=>r.initialize()}},{provide:Bl,multi:!0,useFactory:()=>{let r=Me(uZ);return()=>{r.initialize()}}},e===!0?{provide:gS,useValue:!0}:[],{provide:mS,useValue:t??_L},{provide:ds,useFactory:()=>{let r=Me(jt),i=Me(Wn),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Ya),o.handleError(s))})}}}]}function JA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uZ=(()=>{class n{subscription=new Hr;initialized=!1;zone=Me(jt);pendingTasks=Me(Bc);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{jt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{jt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var AF=(()=>{class n{applicationErrorHandler=Me(ds);appRef=Me($o);taskService=Me(Bc);ngZone=Me(jt);zonelessEnabled=Me(K0);tracing=Me(Vf,{optional:!0});disableScheduling=Me(gS,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Hr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Vw):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Me(mS,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof J0||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?d4:wL;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Vw+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,d4(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dZ(){return typeof $localize<"u"&&$localize.locale||dv}var gb=new Ye("",{providedIn:"root",factory:()=>Me(gb,{optional:!0,skipSelf:!0})||dZ()});function zi(n){return a3(n)}function Zp(n,e){return x1(n,e?.equal)}var TF=class{[po];constructor(e){this[po]=e}destroy(){this[po].destroy()}};var OF=Symbol("InputSignalNode#UNSET"),EZ=Vt(Ve({},C1),{transformFn:void 0,applyValueToInputSignal(n,e){mp(n,e)}});function LF(n,e){let t=Object.create(EZ);t.value=n,t.transformFn=e?.transform;function r(){if(hp(t),t.value===OF){let i=null;throw new et(-950,i)}return t.value}return r[po]=t,r}var mb=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>iv(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},IZ=new Ye("");IZ.__NG_ELEMENT_ID__=n=>{let e=Mi();if(e===null)throw new et(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new et(204,!1)};function DF(n,e){return LF(n,e)}function SZ(n){return LF(OF,n)}var FF=(DF.required=SZ,DF);function AZ(n,e,t){let r=new nv(t);return Promise.resolve(r)}function MF(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var vb=new Ye(""),TZ=new Ye("");function mv(n){return!n.moduleRef}function DZ(n){let e=mv(n)?n.r3Injector:n.moduleRef.injector,t=e.get(jt);return t.run(()=>{mv(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ds),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),mv(n)){let o=()=>e.destroy(),s=n.platformInjector.get(vb);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(vb);s.add(o),n.moduleRef.onDestroy(()=>{Z0(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return NZ(r,t,()=>{let o=e.get(Bc),s=o.add(),a=e.get(HA);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(gb,dv);if(hF(c||dv),!e.get(TZ,!0))return mv(n)?e.get($o):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(mv(n)){let u=e.get($o);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return VF?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var VF;function NF(){VF=MZ}function MZ(n,e){let t=n.injector.get($o);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new et(-403,!1);e.push(n)}function NZ(n,e,t){try{let r=t();return Zu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var jF=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>xL(r?.ngZone,Vt(Ve({},JA({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[SF({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:jl,useExisting:AF},Y3],c=sF(t.moduleType,this.injector,a);return NF(),DZ({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=GA({},r);return NF(),AZ(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new et(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(vb,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(Le(Rn))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),i5=null;function PZ(n){if(s5())throw new et(400,!1);uF(),i5=n;let e=n.get(jF);return OZ(n),e}function o5(n,e,t=[]){let r=`Platform: ${e}`,i=new Ye(r);return(o=[])=>{let s=s5();if(!s){let a=[...t,...o,{provide:i,useValue:!0}];s=n?.(a)??PZ(kZ(a,r))}return RZ(i)}}function kZ(n=[],e){return Rn.create({name:e,providers:[{provide:V0,useValue:"platform"},{provide:vb,useValue:new Set([()=>i5=null])},...n]})}function RZ(n){let e=s5();if(!e)throw new et(-401,!1);return e}function s5(){return i5?.get(jF)??null}function OZ(n){let e=n.get(Yw,null);fi(n,()=>{e?.forEach(t=>t())})}function Xu(){return!1}var Hc=(()=>{class n{static __NG_ELEMENT_ID__=LZ}return n})();function LZ(n){return FZ(Mi(),dn(),(n&16)===16)}function FZ(n,e,t){if(zl(n)&&!t){let r=ba(n.index,e);return new Yu(r,r)}else if(n.type&175){let r=e[ya];return new Yu(r,e)}return null}var e5=class{constructor(){}supports(e){return VA(e)}create(e){return new t5(e)}},VZ=(n,e)=>e,t5=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||VZ}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<PF(r,i,o)?t:r,a=PF(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let m=0;m<l;m++){let g=m<o.length?o[m]:o[m]=0,x=g+m;u<=x&&x<l&&(o[m]=g+1)}let p=s.previousIndex;o[p]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!VA(e))throw new et(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,KL(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new n5(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new yb),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new yb),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},n5=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},r5=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},yb=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new r5,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function PF(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function kF(){return new a5([new e5])}var a5=(()=>{class n{factories;static \u0275prov=Qe({token:n,providedIn:"root",factory:kF});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=Me(n,{optional:!0,skipSelf:!0});return n.create(t,r||kF())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new et(901,!1)}}return n})();var BF=o5(null,"core",[]),UF=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(Le($o))};static \u0275mod=ur({type:n});static \u0275inj=nr({})}return n})();function Ju(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function zF(n){let e=Ul(n);if(!e)return null;let t=new Of(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var HF=null;function zs(){return HF}function c5(n){HF??=n}var vv=class{},yv=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>Me(GF),providedIn:"platform"})}return n})(),l5=new Ye(""),GF=(()=>{class n extends yv{_location;_history;_doc=Me(ei);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zs().getBaseHref(this._doc)}onPopState(t){let r=zs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=zs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function _b(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function qF(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function rc(n){return n&&n[0]!=="?"?`?${n}`:n}var ic=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>Me(bb),providedIn:"root"})}return n})(),wb=new Ye(""),bb=(()=>{class n extends ic{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Me(ei).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _b(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+rc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+rc(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+rc(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Le(yv),Le(wb,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ed=(()=>{class n{_subject=new kn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=UZ(qF($F(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rc(r))}normalize(t){return n.stripTrailingSlash(BZ(this._basePath,$F(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=rc;static joinWithSlash=_b;static stripTrailingSlash=qF;static \u0275fac=function(r){return new(r||n)(Le(ic))};static \u0275prov=Qe({token:n,factory:()=>jZ(),providedIn:"root"})}return n})();function jZ(){return new ed(Le(ic))}function BZ(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function $F(n){return n.replace(/\/index.html$/,"")}function UZ(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var d5=(()=>{class n extends ic{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=_b(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+rc(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+rc(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Le(yv),Le(wb,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})();var u5=/\s+/,WF=[],qf=(()=>{class n{_ngEl;_renderer;initialClasses=WF;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(u5):WF}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(u5):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(u5).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Je(_o),Je(hs))};static \u0275dir=rr({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var xb=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wo=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new xb(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),KF(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);KF(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Je(Kl),Je(Qu),Je(a5))};static \u0275dir=rr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function KF(n,e){n.context.$implicit=e.item}var no=(()=>{class n{_viewContainer;_context=new Cb;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){YF(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){YF(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Je(Kl),Je(Qu))};static \u0275dir=rr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Cb=class{$implicit=null;ngIf=null};function YF(n,e){if(n&&!n.createEmbeddedView)throw new et(2020,!1)}function zZ(n,e){return new et(2100,!1)}var f5=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw zZ(n,t);return t.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=lb({name:"slice",type:n,pure:!1})}return n})();var Yl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=nr({})}return n})();function h5(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var _v=class{};var g5="browser",qZ="server";function m5(n){return n===g5}function Eb(n){return n===qZ}var QF=(()=>{class n{static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new p5(Me(ei),window)})}return n})(),p5=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Vt(Ve({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=$Z(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Qa(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Vt(Ve({},t),{left:i-s[0],top:o-s[1]}))}};function $Z(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var wv=class{_doc;constructor(e){this._doc=e}manager},Ib=(()=>{class n extends wv{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Le(ei))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),Ab=new Ye(""),b5=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Ib));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Ib);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new et(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Le(Ab),Le(jt))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),v5="ng-app-id";function ZF(n){for(let e of n)e.remove()}function XF(n,e){let t=e.createElement("style");return t.textContent=n,t}function HZ(n,e,t,r){let i=n.head?.querySelectorAll(`style[${v5}="${e}"],link[${v5}="${e}"]`);if(i)for(let o of i)o.removeAttribute(v5),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function _5(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var x5=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,HZ(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,XF);r?.forEach(i=>this.addUsage(i,this.external,_5))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(ZF(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])ZF(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,XF(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,_5(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Le(ei),Le(Kw),Le(Qw,8),Le(Ui))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),y5={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},C5=/%COMP%/g;var e6="%COMP%",GZ=`_nghost-${e6}`,WZ=`_ngcontent-${e6}`,KZ=!0,YZ=new Ye("",{providedIn:"root",factory:()=>KZ});function QZ(n){return WZ.replace(C5,n)}function ZZ(n){return GZ.replace(C5,n)}function t6(n,e){return e.map(t=>t.replace(C5,n))}var E5=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new bv(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Sb?i.applyToHost(t):i instanceof xv&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case $l.Emulated:o=new Sb(c,l,r,this.appId,u,s,a,p,m);break;case $l.ShadowDom:return new w5(c,l,t,r,s,a,this.nonce,p,m);default:o=new xv(c,l,r,u,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Le(b5),Le(x5),Le(Kw),Le(YZ),Le(ei),Le(jt),Le(Qw),Le(Vf,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),bv=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(y5[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(JF(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(JF(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new et(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=y5[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=y5[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(zc.DashCase|zc.Important)?e.style.setProperty(t,r,i&zc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&zc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=zs().getGlobalEventTarget(this.doc,e),!e))throw new et(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function JF(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var w5=class extends bv{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=t6(i.id,u);for(let m of u){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=m,this.shadowRoot.appendChild(g)}let p=i.getExternalStyles?.();if(p)for(let m of p){let g=_5(m,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xv=class extends bv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?t6(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&qp.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Sb=class extends xv{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,l,u),this.contentAttr=QZ(u),this.hostAttr=ZZ(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Tb=class n extends vv{supportsDOMEvents=!0;static makeCurrent(){c5(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=XZ();return t==null?null:JZ(t)}resetBaseElement(){Cv=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return h5(document.cookie,e)}},Cv=null;function XZ(){return Cv=Cv||document.head.querySelector("base"),Cv?Cv.getAttribute("href"):null}function JZ(n){return new URL(n,document.baseURI).pathname}var Db=class{addToWindow(e){vo.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new et(5103,!1);return o},vo.getAllAngularTestabilities=()=>e.getAllTestabilities(),vo.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=vo.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};vo.frameworkStabilizers||(vo.frameworkStabilizers=[]),vo.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?zs().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},eX=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),n6=["alt","control","meta","shift"],tX={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nX={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},r6=(()=>{class n extends wv{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zs().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),n6.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=tX[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),n6.forEach(s=>{if(s!==i){let a=nX[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Le(ei))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})();function rX(){Tb.makeCurrent()}function iX(){return new Ya}function oX(){return lA(document),document}var sX=[{provide:Ui,useValue:g5},{provide:Yw,useValue:rX,multi:!0},{provide:ei,useFactory:oX}],I5=o5(BF,"browser",sX);var aX=[{provide:Yp,useClass:Db},{provide:db,useClass:lv,deps:[jt,uv,Yp]},{provide:lv,useClass:lv,deps:[jt,uv,Yp]}],cX=[{provide:V0,useValue:"root"},{provide:Ya,useFactory:iX},{provide:Ab,useClass:Ib,multi:!0,deps:[ei]},{provide:Ab,useClass:r6,multi:!0,deps:[ei]},E5,x5,b5,{provide:Rf,useExisting:E5},{provide:_v,useClass:eX},[]],S5=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=nr({providers:[...cX,...aX],imports:[Yl,UF]})}return n})();var i6=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Le(ei))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var A5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=Le(lX),i},providedIn:"root"})}return n})(),lX=(()=>{class n extends A5{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case tc.NONE:return r;case tc.HTML:return Gl(r,"HTML")?Aa(r):vA(this._doc,String(r)).toString();case tc.STYLE:return Gl(r,"Style")?Aa(r):r;case tc.SCRIPT:if(Gl(r,"Script"))return Aa(r);throw new et(5200,!1);case tc.URL:return Gl(r,"URL")?Aa(r):ov(String(r));case tc.RESOURCE_URL:if(Gl(r,"ResourceURL"))return Aa(r);throw new et(5201,!1);default:throw new et(5202,!1)}}bypassSecurityTrustHtml(t){return fA(t)}bypassSecurityTrustStyle(t){return hA(t)}bypassSecurityTrustScript(t){return pA(t)}bypassSecurityTrustUrl(t){return gA(t)}bypassSecurityTrustResourceUrl(t){return mA(t)}static \u0275fac=function(r){return new(r||n)(Le(ei))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p6=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Je(hs),Je(_o))};static \u0275dir=rr({type:n})}return n})(),Mv=(()=>{class n extends p6{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Sa(n)))(i||n)}})();static \u0275dir=rr({type:n,features:[qo]})}return n})(),tg=new Ye(""),uX={provide:tg,useExisting:ls(()=>N5),multi:!0},N5=(()=>{class n extends Mv{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Sa(n)))(i||n)}})();static \u0275dir=rr({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[nc([uX]),qo]})}return n})(),dX={provide:tg,useExisting:ls(()=>gs),multi:!0};function fX(){let n=zs()?zs().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var hX=new Ye(""),gs=(()=>{class n extends p6{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!fX())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Je(hs),Je(_o),Je(hX,8))};static \u0275dir=rr({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Fe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[nc([dX]),qo]})}return n})();function pX(n){return n==null||gX(n)===0}function gX(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Vb=new Ye(""),g6=new Ye("");function mX(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function vX(n){return pX(n.value)?{required:!0}:null}function o6(n){return null}function m6(n){return n!=null}function v6(n){return Zu(n)?mn(n):n}function y6(n){let e={};return n.forEach(t=>{e=t!=null?Ve(Ve({},e),t):e}),Object.keys(e).length===0?null:e}function _6(n,e){return e.map(t=>t(n))}function yX(n){return!n.validate}function w6(n){return n.map(e=>yX(e)?e:t=>e.validate(t))}function _X(n){if(!n)return null;let e=n.filter(m6);return e.length==0?null:function(t){return y6(_6(t,e))}}function P5(n){return n!=null?_X(w6(n)):null}function wX(n){if(!n)return null;let e=n.filter(m6);return e.length==0?null:function(t){let r=_6(t,e).map(v6);return lI(r).pipe(at(y6))}}function k5(n){return n!=null?wX(w6(n)):null}function s6(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bX(n){return n._rawValidators}function xX(n){return n._rawAsyncValidators}function D5(n){return n?Array.isArray(n)?n:[n]:[]}function Nb(n,e){return Array.isArray(n)?n.includes(e):n===e}function a6(n,e){let t=D5(e);return D5(n).forEach(i=>{Nb(t,i)||t.push(i)}),t}function c6(n,e){return D5(e).filter(t=>!Nb(n,t))}var Pb=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=P5(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=k5(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},eg=class extends Pb{name;get formDirective(){return null}get path(){return null}},Dv=class extends Pb{_parent=null;name=null;valueAccessor=null},kb=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},CX={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},dTe=Vt(Ve({},CX),{"[class.ng-submitted]":"isSubmitted"}),Da=(()=>{class n extends kb{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Je(Dv,2))};static \u0275dir=rr({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ps("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[qo]})}return n})(),ng=(()=>{class n extends kb{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Je(eg,10))};static \u0275dir=rr({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ps("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[qo]})}return n})();var Ev="VALID",Mb="INVALID",Xp="PENDING",Iv="DISABLED",td=class{},Rb=class extends td{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Av=class extends td{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Tv=class extends td{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Jp=class extends td{status;source;constructor(e,t){super(),this.status=e,this.source=t}},M5=class extends td{source;constructor(e){super(),this.source=e}},Ob=class extends td{source;constructor(e){super(),this.source=e}};function b6(n){return(jb(n)?n.validators:n)||null}function EX(n){return Array.isArray(n)?P5(n):n||null}function x6(n,e){return(jb(e)?e.asyncValidators:n)||null}function IX(n){return Array.isArray(n)?k5(n):n||null}function jb(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function SX(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new et(1e3,"");if(!r[t])throw new et(1001,"")}function AX(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new et(1002,"")})}var Lb=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return zi(this.statusReactive)}set status(e){zi(()=>this.statusReactive.set(e))}_status=Zp(()=>this.statusReactive());statusReactive=Ca(void 0);get valid(){return this.status===Ev}get invalid(){return this.status===Mb}get pending(){return this.status==Xp}get disabled(){return this.status===Iv}get enabled(){return this.status!==Iv}errors;get pristine(){return zi(this.pristineReactive)}set pristine(e){zi(()=>this.pristineReactive.set(e))}_pristine=Zp(()=>this.pristineReactive());pristineReactive=Ca(!0);get dirty(){return!this.pristine}get touched(){return zi(this.touchedReactive)}set touched(e){zi(()=>this.touchedReactive.set(e))}_touched=Zp(()=>this.touchedReactive());touchedReactive=Ca(!1);get untouched(){return!this.touched}_events=new kn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(a6(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(a6(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(c6(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(c6(e,this._rawAsyncValidators))}hasValidator(e){return Nb(this._rawValidators,e)}hasAsyncValidator(e){return Nb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Vt(Ve({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Tv(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Tv(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Vt(Ve({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Av(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Av(!0,r))}markAsPending(e={}){this.status=Xp;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jp(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Vt(Ve({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Iv,this.errors=null,this._forEachChild(i=>{i.disable(Vt(Ve({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rb(this.value,r)),this._events.next(new Jp(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Vt(Ve({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ev,this._forEachChild(r=>{r.enable(Vt(Ve({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Vt(Ve({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ev||this.status===Xp)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rb(this.value,t)),this._events.next(new Jp(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Vt(Ve({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Iv:Ev}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Xp,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=v6(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Jp(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new jr,this.statusChanges=new jr}_calculateStatus(){return this._allControlsDisabled()?Iv:this.errors?Mb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xp)?Xp:this._anyControlsHaveStatus(Mb)?Mb:Ev}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Av(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Tv(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jb(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=EX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=IX(this._rawAsyncValidators)}},Fb=class extends Lb{constructor(e,t,r){super(b6(t),x6(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){AX(this,!0,e),Object.keys(e).forEach(r=>{SX(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ob(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var R5=new Ye("",{providedIn:"root",factory:()=>O5}),O5="always";function TX(n,e){return[...e.path,n]}function C6(n,e,t=O5){E6(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),MX(n,e),PX(n,e),NX(n,e),DX(n,e)}function l6(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function DX(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function E6(n,e){let t=bX(n);e.validator!==null?n.setValidators(s6(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=xX(n);e.asyncValidator!==null?n.setAsyncValidators(s6(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();l6(e._rawValidators,i),l6(e._rawAsyncValidators,i)}function MX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&I6(n,e)})}function NX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&I6(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function I6(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function PX(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function kX(n,e){n==null,E6(n,e)}function RX(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function OX(n){return Object.getPrototypeOf(n.constructor)===Mv}function LX(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function FX(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===gs?t=o:OX(o)?r=o:i=o}),i||r||t||null}var VX={provide:eg,useExisting:ls(()=>$f)},Sv=Promise.resolve(),$f=(()=>{class n extends eg{callSetDisabledState;get submitted(){return zi(this.submittedReactive)}_submitted=Zp(()=>this.submittedReactive());submittedReactive=Ca(!1);_directives=new Set;form;ngSubmit=new jr;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Fb({},P5(t),k5(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Sv.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),C6(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Sv.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Sv.then(()=>{let r=this._findContainer(t.path),i=new Fb({});kX(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Sv.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Sv.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),LX(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new M5(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Je(Vb,10),Je(g6,10),Je(R5,8))};static \u0275dir=rr({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Fe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[nc([VX]),qo]})}return n})();function u6(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function d6(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var jX=class extends Lb{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(b6(t),x6(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(d6(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Ob(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){u6(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){u6(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){d6(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var BX={provide:Dv,useExisting:ls(()=>qs)},f6=Promise.resolve(),qs=(()=>{class n extends Dv{_changeDetectorRef;callSetDisabledState;control=new jX;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new jr;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=FX(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),RX(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){C6(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){f6.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ju(r);f6.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?TX(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Je(eg,9),Je(Vb,10),Je(g6,10),Je(tg,10),Je(Hc,8),Je(R5,8))};static \u0275dir=rr({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[nc([BX]),qo,Ia]})}return n})();var rg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=rr({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),UX={provide:tg,useExisting:ls(()=>L5),multi:!0},L5=(()=>{class n extends Mv{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Sa(n)))(i||n)}})();static \u0275dir=rr({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[nc([UX]),qo]})}return n})();var zX={provide:tg,useExisting:ls(()=>Wc),multi:!0};function S6(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function qX(n){return n.split(":")[0]}var Wc=(()=>{class n extends Mv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=Me($o).injector;destroyRef=Me(xa);cdr=Me(Hc);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,av({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=S6(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=qX(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Sa(n)))(i||n)}})();static \u0275dir=rr({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Fe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[nc([zX]),qo]})}return n})(),nd=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(S6(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Je(_o),Je(hs),Je(Wc,9))};static \u0275dir=rr({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),$X={provide:tg,useExisting:ls(()=>A6),multi:!0};function h6(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function HX(n){return n.split(":")[0]}var A6=(()=>{class n extends Mv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=HX(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Sa(n)))(i||n)}})();static \u0275dir=rr({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[nc([$X]),qo]})}return n})(),rd=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(h6(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(h6(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Je(_o),Je(hs),Je(A6,9))};static \u0275dir=rr({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function GX(n){return typeof n=="number"?n:parseFloat(n)}var T6=(()=>{class n{_validator=o6;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):o6,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rr({type:n,features:[Ia]})}return n})();var WX={provide:Vb,useExisting:ls(()=>F5),multi:!0},F5=(()=>{class n extends T6{min;inputName="min";normalizeInput=t=>GX(t);createValidator=t=>mX(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Sa(n)))(i||n)}})();static \u0275dir=rr({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&jf("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[nc([WX]),qo]})}return n})(),KX={provide:Vb,useExisting:ls(()=>Hf),multi:!0};var Hf=(()=>{class n extends T6{required;inputName="required";normalizeInput=Ju;createValidator=t=>vX;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Sa(n)))(i||n)}})();static \u0275dir=rr({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&jf("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[nc([KX]),qo]})}return n})();var YX=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=nr({})}return n})();var ig=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:R5,useValue:t.callSetDisabledState??O5}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=nr({imports:[YX]})}return n})();var nn="primary",qv=Symbol("RouteTitle"),z5=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Kf(n){return new z5(n)}function L6(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function QX(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Kc(n[t],e[t]))return!1;return!0}function Kc(n,e){let t=n?q5(n):void 0,r=e?q5(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!F6(n[i],e[i]))return!1;return!0}function q5(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function F6(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function V6(n){return n.length>0?n[n.length-1]:null}function Ql(n){return aI(n)?n:Zu(n)?mn(Promise.resolve(n)):pt(n)}var ZX={exact:B6,subset:U6},j6={exact:XX,subset:JX,ignored:()=>!0};function D6(n,e,t){return ZX[t.paths](n.root,e.root,t.matrixParams)&&j6[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function XX(n,e){return Kc(n,e)}function B6(n,e,t){if(!Gf(n.segments,e.segments)||!zb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!B6(n.children[r],e.children[r],t))return!1;return!0}function JX(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>F6(n[t],e[t]))}function U6(n,e,t){return z6(n,e,e.segments,t)}function z6(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Gf(i,t)||e.hasChildren()||!zb(i,t,r))}else if(n.segments.length===t.length){if(!Gf(n.segments,t)||!zb(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!U6(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Gf(n.segments,i)||!zb(n.segments,i,r)||!n.children[nn]?!1:z6(n.children[nn],e,o,r)}}function zb(n,e,t){return e.every((r,i)=>j6[t](n[i].parameters,r.parameters))}var Qc=class{root;queryParams;fragment;_queryParamMap;constructor(e=new On([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Kf(this.queryParams),this._queryParamMap}toString(){return nJ.serialize(this)}},On=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qb(this)}},id=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Kf(this.parameters),this._parameterMap}toString(){return $6(this)}};function eJ(n,e){return Gf(n,e)&&n.every((t,r)=>Kc(t.parameters,e[r].parameters))}function Gf(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function tJ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===nn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==nn&&(t=t.concat(e(i,r)))}),t}var Yf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>new od,providedIn:"root"})}return n})(),od=class{parse(e){let t=new H5(e);return new Qc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Nv(e.root,!0)}`,r=oJ(e.queryParams),i=typeof e.fragment=="string"?`#${rJ(e.fragment)}`:"";return`${t}${r}${i}`}},nJ=new od;function qb(n){return n.segments.map(e=>$6(e)).join("/")}function Nv(n,e){if(!n.hasChildren())return qb(n);if(e){let t=n.children[nn]?Nv(n.children[nn],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==nn&&r.push(`${i}:${Nv(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=tJ(n,(r,i)=>i===nn?[Nv(n.children[nn],!1)]:[`${i}:${Nv(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[nn]!=null?`${qb(n)}/${t[0]}`:`${qb(n)}/(${t.join("//")})`}}function q6(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bb(n){return q6(n).replace(/%3B/gi,";")}function rJ(n){return encodeURI(n)}function $5(n){return q6(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $b(n){return decodeURIComponent(n)}function M6(n){return $b(n.replace(/\+/g,"%20"))}function $6(n){return`${$5(n.path)}${iJ(n.parameters)}`}function iJ(n){return Object.entries(n).map(([e,t])=>`;${$5(e)}=${$5(t)}`).join("")}function oJ(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Bb(t)}=${Bb(i)}`).join("&"):`${Bb(t)}=${Bb(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var sJ=/^[^\/()?;#]+/;function V5(n){let e=n.match(sJ);return e?e[0]:""}var aJ=/^[^\/()?;=#]+/;function cJ(n){let e=n.match(aJ);return e?e[0]:""}var lJ=/^[^=?&#]+/;function uJ(n){let e=n.match(lJ);return e?e[0]:""}var dJ=/^[^&#]+/;function fJ(n){let e=n.match(dJ);return e?e[0]:""}var H5=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new On([],{}):new On([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[nn]=new On(e,t)),r}parseSegment(){let e=V5(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new et(4009,!1);return this.capture(e),new id($b(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=cJ(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=V5(this.remaining);i&&(r=i,this.capture(r))}e[$b(t)]=$b(r)}parseQueryParam(e){let t=uJ(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=fJ(this.remaining);s&&(r=s,this.capture(r))}let i=M6(t),o=M6(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=V5(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new et(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=nn);let s=this.parseChildren();t[o??nn]=Object.keys(s).length===1&&s[nn]?s[nn]:new On([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new et(4011,!1)}};function H6(n){return n.segments.length>0?new On([],{[nn]:n}):n}function G6(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=G6(i);if(r===nn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new On(n.segments,e);return hJ(t)}function hJ(n){if(n.numberOfChildren===1&&n.children[nn]){let e=n.children[nn];return new On(n.segments.concat(e.segments),e.children)}return n}function sd(n){return n instanceof Qc}function W6(n,e,t=null,r=null){let i=K6(n);return Y6(i,e,t,r)}function K6(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new On(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=H6(r);return e??i}function Y6(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return j5(i,i,i,t,r);let o=pJ(e);if(o.toRoot())return j5(i,i,new On([],{}),t,r);let s=gJ(o,i,n),a=s.processChildren?kv(s.segmentGroup,s.index,o.commands):Z6(s.segmentGroup,s.index,o.commands);return j5(i,s.segmentGroup,a,t,r)}function Hb(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ov(n){return typeof n=="object"&&n!=null&&n.outlets}function j5(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=Q6(n,e,t);let a=H6(G6(s));return new Qc(a,o,i)}function Q6(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Q6(o,e,t)}),new On(n.segments,r)}var Gb=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Hb(r[0]))throw new et(4003,!1);let i=r.find(Ov);if(i&&i!==V6(r))throw new et(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function pJ(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Gb(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Gb(t,e,r)}var cg=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function gJ(n,e,t){if(n.isAbsolute)return new cg(e,!0,0);if(!t)return new cg(e,!1,NaN);if(t.parent===null)return new cg(t,!0,0);let r=Hb(n.commands[0])?0:1,i=t.segments.length-1+r;return mJ(t,i,n.numberOfDoubleDots)}function mJ(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new et(4005,!1);i=r.segments.length}return new cg(r,!1,i-o)}function vJ(n){return Ov(n[0])?n[0].outlets:{[nn]:n}}function Z6(n,e,t){if(n??=new On([],{}),n.segments.length===0&&n.hasChildren())return kv(n,e,t);let r=yJ(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new On(n.segments.slice(0,r.pathIndex),{});return o.children[nn]=new On(n.segments.slice(r.pathIndex),n.children),kv(o,0,i)}else return r.match&&i.length===0?new On(n.segments,{}):r.match&&!n.hasChildren()?G5(n,e,t):r.match?kv(n,0,i):G5(n,e,t)}function kv(n,e,t){if(t.length===0)return new On(n.segments,{});{let r=vJ(t),i={};if(Object.keys(r).some(o=>o!==nn)&&n.children[nn]&&n.numberOfChildren===1&&n.children[nn].segments.length===0){let o=kv(n.children[nn],e,t);return new On(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Z6(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new On(n.segments,i)}}function yJ(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ov(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!P6(c,l,s))return o;r+=2}else{if(!P6(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function G5(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ov(o)){let c=_J(o.outlets);return new On(r,c)}if(i===0&&Hb(t[0])){let c=n.segments[e];r.push(new id(c.path,N6(t[0]))),i++;continue}let s=Ov(o)?o.outlets[nn]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Hb(a)?(r.push(new id(s,N6(a))),i+=2):(r.push(new id(s,{})),i++)}return new On(r,{})}function _J(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=G5(new On([],{}),0,r))}),e}function N6(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function P6(n,e,t){return n==t.path&&Kc(e,t.parameters)}var lg="imperative",ki=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ki||{}),Hs=class{id;url;constructor(e,t){this.id=e,this.url=t}},ad=class extends Hs{type=ki.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Go=class extends Hs{urlAfterRedirects;type=ki.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ho=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Ho||{}),dg=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(dg||{}),Yc=class extends Hs{reason;code;type=ki.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zc=class extends Hs{reason;code;type=ki.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},fg=class extends Hs{error;target;type=ki.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lv=class extends Hs{urlAfterRedirects;state;type=ki.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wb=class extends Hs{urlAfterRedirects;state;type=ki.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kb=class extends Hs{urlAfterRedirects;state;shouldActivate;type=ki.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Yb=class extends Hs{urlAfterRedirects;state;type=ki.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qb=class extends Hs{urlAfterRedirects;state;type=ki.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zb=class{route;type=ki.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xb=class{route;type=ki.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jb=class{snapshot;type=ki.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},e2=class{snapshot;type=ki.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},t2=class{snapshot;type=ki.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},n2=class{snapshot;type=ki.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hg=class{routerEvent;position;anchor;type=ki.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Fv=class{},pg=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function wJ(n){return!(n instanceof Fv)&&!(n instanceof pg)}function bJ(n,e){return n.providers&&!n._injector&&(n._injector=Kp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function oc(n){return n.outlet||nn}function xJ(n,e){let t=n.filter(r=>oc(r)===e);return t.push(...n.filter(r=>oc(r)!==e)),t}function vg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var r2=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return vg(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Qf(this.rootInjector)}},Qf=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new r2(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Le(Wn))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),i2=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=W5(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=W5(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=K5(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return K5(e,this._root).map(t=>t.value)}};function W5(n,e){if(n===e.value)return e;for(let t of e.children){let r=W5(n,t);if(r)return r}return null}function K5(n,e){if(n===e.value)return[e];for(let t of e.children){let r=K5(n,t);if(r.length)return r.unshift(e),r}return[]}var $s=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ag(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Vv=class extends i2{snapshot;constructor(e,t){super(e),this.snapshot=t,nT(this,e)}toString(){return this.snapshot.toString()}};function X6(n){let e=CJ(n),t=new Zi([new id("",{})]),r=new Zi({}),i=new Zi({}),o=new Zi({}),s=new Zi(""),a=new Gs(t,r,o,s,i,nn,n,e.root);return a.snapshot=e.root,new Vv(new $s(a,[]),e)}function CJ(n){let e={},t={},r={},o=new Wf([],e,r,"",t,nn,n,null,{});return new jv("",new $s(o,[]))}var Gs=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(at(l=>l[qv]))??pt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(at(e=>Kf(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(at(e=>Kf(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function o2(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Ve(Ve({},e.params),n.params),data:Ve(Ve({},e.data),n.data),resolve:Ve(Ve(Ve(Ve({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Ve({},n.params),data:Ve({},n.data),resolve:Ve(Ve({},n.data),n._resolvedData??{})},i&&e8(i)&&(r.resolve[qv]=i.title),r}var Wf=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[qv]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Kf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Kf(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},jv=class extends i2{url;constructor(e,t){super(t),this.url=e,nT(this,t)}toString(){return J6(this._root)}};function nT(n,e){e.value._routerState=n,e.children.forEach(t=>nT(n,t))}function J6(n){let e=n.children.length>0?` { ${n.children.map(J6).join(", ")} } `:"";return`${n.value}${e}`}function B5(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Kc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Kc(e.params,t.params)||n.paramsSubject.next(t.params),QX(e.url,t.url)||n.urlSubject.next(t.url),Kc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Y5(n,e){let t=Kc(n.params,e.params)&&eJ(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Y5(n.parent,e.parent))}function e8(n){return typeof n.title=="string"||n.title===null}var t8=new Ye(""),$v=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=nn;activateEvents=new jr;deactivateEvents=new jr;attachEvents=new jr;detachEvents=new jr;routerOutletData=FF();parentContexts=Me(Qf);location=Me(Kl);changeDetector=Me(Hc);inputBinder=Me(Hv,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new et(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new et(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new et(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new et(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Q5(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rr({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ia]})}return n})(),Q5=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Gs?this.route:e===Qf?this.childContexts:e===t8?this.outletData:this.parent.get(e,t)}},Hv=new Ye(""),rT=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=D0([r.queryParams,r.params,r.data]).pipe(Nn(([o,s,a],c)=>(a=Ve(Ve(Ve({},o),s),a),c===0?pt(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=zF(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),iT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=lr({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&wt(0,"router-outlet")},dependencies:[$v],encapsulation:2})}return n})();function oT(n){let e=n.children&&n.children.map(oT),t=e?Vt(Ve({},n),{children:e}):Ve({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==nn&&(t.component=iT),t}function EJ(n,e,t){let r=Bv(n,e._root,t?t._root:void 0);return new Vv(r,e)}function Bv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=IJ(n,e,t);return new $s(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Bv(n,a)),s}}let r=SJ(e.value),i=e.children.map(o=>Bv(n,o));return new $s(r,i)}}function IJ(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Bv(n,r,i);return Bv(n,r)})}function SJ(n){return new Gs(new Zi(n.url),new Zi(n.params),new Zi(n.queryParams),new Zi(n.fragment),new Zi(n.data),n.outlet,n.component,n)}var gg=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},n8="ngNavigationCancelingError";function s2(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=sd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=r8(!1,Ho.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function r8(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[n8]=!0,t.cancellationCode=e,t}function AJ(n){return i8(n)&&sd(n.url)}function i8(n){return!!n&&n[n8]}var TJ=(n,e,t,r)=>at(i=>(new Z5(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Z5=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),B5(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ag(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ag(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ag(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ag(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new n2(o.value.snapshot))}),e.children.length&&this.forwardEvent(new e2(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(B5(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),B5(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},a2=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ug=class{component;route;constructor(e,t){this.component=e,this.route=t}};function DJ(n,e,t){let r=n._root,i=e?e._root:null;return Pv(r,i,t,[r.value])}function MJ(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function yg(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!AI(n)?n:e.get(n):r}function Pv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ag(e);return n.children.forEach(s=>{NJ(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Rv(a,t.getContext(s),i)),i}function NJ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=PJ(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new a2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Pv(n,e,a?a.children:null,r,i):Pv(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ug(a.outlet.component,s))}else s&&Rv(e,a,i),i.canActivateChecks.push(new a2(r)),o.component?Pv(n,null,a?a.children:null,r,i):Pv(n,null,t,r,i);return i}function PJ(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Gf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Gf(n.url,e.url)||!Kc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Y5(n,e)||!Kc(n.queryParams,e.queryParams);case"paramsChange":default:return!Y5(n,e)}}function Rv(n,e,t){let r=ag(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Rv(s,e.children.getContext(o),t):Rv(s,null,t):Rv(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ug(e.outlet.component,i)):t.canDeactivateChecks.push(new ug(null,i)):t.canDeactivateChecks.push(new ug(null,i))}function Gv(n){return typeof n=="function"}function kJ(n){return typeof n=="boolean"}function RJ(n){return n&&Gv(n.canLoad)}function OJ(n){return n&&Gv(n.canActivate)}function LJ(n){return n&&Gv(n.canActivateChild)}function FJ(n){return n&&Gv(n.canDeactivate)}function VJ(n){return n&&Gv(n.canMatch)}function o8(n){return n instanceof Wa||n?.name==="EmptyError"}var Ub=Symbol("INITIAL_VALUE");function mg(){return Nn(n=>D0(n.map(e=>e.pipe(Xi(1),Bu(Ub)))).pipe(at(e=>{for(let t of e)if(t!==!0){if(t===Ub)return Ub;if(t===!1||jJ(t))return t}return!0}),br(e=>e!==Ub),Xi(1)))}function jJ(n){return sd(n)||n instanceof gg}function BJ(n,e){return Jr(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?pt(Vt(Ve({},t),{guardsResult:!0})):UJ(s,r,i,n).pipe(Jr(a=>a&&kJ(a)?zJ(r,o,n,e):pt(a)),at(a=>Vt(Ve({},t),{guardsResult:a})))})}function UJ(n,e,t,r){return mn(n).pipe(Jr(i=>WJ(i.component,i.route,t,e,r)),Ka(i=>i!==!0,!0))}function zJ(n,e,t,r){return mn(e).pipe(Fu(i=>Ap($J(i.route.parent,r),qJ(i.route,r),GJ(n,i.path,t),HJ(n,i.route,t))),Ka(i=>i!==!0,!0))}function qJ(n,e){return n!==null&&e&&e(new t2(n)),pt(!0)}function $J(n,e){return n!==null&&e&&e(new Jb(n)),pt(!0)}function HJ(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pt(!0);let i=r.map(o=>M0(()=>{let s=vg(e)??t,a=yg(o,s),c=OJ(a)?a.canActivate(e,n):fi(s,()=>a(e,n));return Ql(c).pipe(Ka())}));return pt(i).pipe(mg())}function GJ(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>MJ(s)).filter(s=>s!==null).map(s=>M0(()=>{let a=s.guards.map(c=>{let l=vg(s.node)??t,u=yg(c,l),p=LJ(u)?u.canActivateChild(r,n):fi(l,()=>u(r,n));return Ql(p).pipe(Ka())});return pt(a).pipe(mg())}));return pt(o).pipe(mg())}function WJ(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pt(!0);let s=o.map(a=>{let c=vg(e)??i,l=yg(a,c),u=FJ(l)?l.canDeactivate(n,e,t,r):fi(c,()=>l(n,e,t,r));return Ql(u).pipe(Ka())});return pt(s).pipe(mg())}function KJ(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return pt(!0);let o=i.map(s=>{let a=yg(s,n),c=RJ(a)?a.canLoad(e,t):fi(n,()=>a(e,t));return Ql(c)});return pt(o).pipe(mg(),s8(r))}function s8(n){return T1(Di(e=>{if(typeof e!="boolean")throw s2(n,e)}),at(e=>e===!0))}function YJ(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return pt(!0);let o=i.map(s=>{let a=yg(s,n),c=VJ(a)?a.canMatch(e,t):fi(n,()=>a(e,t));return Ql(c)});return pt(o).pipe(mg(),s8(r))}var Uv=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},zv=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function sg(n){return Sp(new Uv(n))}function QJ(n){return Sp(new et(4e3,!1))}function ZJ(n){return Sp(r8(!1,Ho.GuardRejected))}var X5=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pt(r);if(i.numberOfChildren>1||!i.children[nn])return QJ(`${e.redirectTo}`);i=i.children[nn]}}applyRedirectCommands(e,t,r,i,o){return XJ(t,i,o).pipe(at(s=>{if(s instanceof Qc)throw new zv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new zv(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Qc(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new On(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new et(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function XJ(n,e,t){if(typeof n=="string")return pt(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:p}=e;return Ql(fi(t,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var J5={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JJ(n,e,t,r,i){let o=a8(n,e,t);return o.matched?(r=bJ(e,r),YJ(r,e,t,i).pipe(at(s=>s===!0?o:Ve({},J5)))):pt(o)}function a8(n,e,t){if(e.path==="**")return eee(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Ve({},J5):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||L6)(t,n,e);if(!i)return Ve({},J5);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Ve(Ve({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function eee(n){return{matched:!0,parameters:n.length>0?V6(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function k6(n,e,t,r){return t.length>0&&ree(n,t,r)?{segmentGroup:new On(e,nee(r,new On(t,n.children))),slicedSegments:[]}:t.length===0&&iee(n,t,r)?{segmentGroup:new On(n.segments,tee(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new On(n.segments,n.children),slicedSegments:t}}function tee(n,e,t,r){let i={};for(let o of t)if(l2(n,e,o)&&!r[oc(o)]){let s=new On([],{});i[oc(o)]=s}return Ve(Ve({},r),i)}function nee(n,e){let t={};t[nn]=e;for(let r of n)if(r.path===""&&oc(r)!==nn){let i=new On([],{});t[oc(r)]=i}return t}function ree(n,e,t){return t.some(r=>l2(n,e,r)&&oc(r)!==nn)}function iee(n,e,t){return t.some(r=>l2(n,e,r))}function l2(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function oee(n,e,t){return e.length===0&&!n.children[t]}var eT=class{};function see(n,e,t,r,i,o,s="emptyOnly"){return new tT(n,e,t,r,i,s,o).recognize()}var aee=31,tT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new X5(this.urlSerializer,this.urlTree)}noMatchError(e){return new et(4002,`'${e.segmentGroup}'`)}recognize(){let e=k6(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(at(({children:t,rootSnapshot:r})=>{let i=new $s(r,t),o=new jv("",i),s=W6(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Wf([],Object.freeze({}),Object.freeze(Ve({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),nn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,nn,t).pipe(at(r=>({children:r,rootSnapshot:t})),Ol(r=>{if(r instanceof zv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Uv?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(at(s=>s instanceof $s?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return mn(o).pipe(Fu(s=>{let a=r.children[s],c=xJ(t,s);return this.processSegmentGroup(e,c,a,s,i)}),ju((s,a)=>(s.push(...a),s)),Vu(null),fI(),Jr(s=>{if(s===null)return sg(r);let a=c8(s);return cee(a),pt(a)}))}processSegment(e,t,r,i,o,s,a){return mn(t).pipe(Fu(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Ol(l=>{if(l instanceof Uv)return pt(null);throw l}))),Ka(c=>!!c),Ol(c=>{if(o8(c))return oee(r,i,o)?pt(new eT):sg(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return oc(r)!==s&&(s===nn||!l2(i,o,r))?sg(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):sg(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:p,remainingSegments:m}=a8(t,i,o);if(!c)return sg(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>aee&&(this.allowRedirects=!1));let g=new Wf(o,l,Object.freeze(Ve({},this.urlTree.queryParams)),this.urlTree.fragment,R6(i),oc(i),i.component??i._loadedComponent??null,i,O6(i)),x=o2(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(x.params),g.data=Object.freeze(x.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,p,g,e).pipe(Nn(D=>this.applyRedirects.lineralizeSegments(i,D)),Jr(D=>this.processSegment(e,r,t,D.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=JJ(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Nn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Nn(({routes:l})=>{let u=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:g}=c,x=new Wf(m,p,Object.freeze(Ve({},this.urlTree.queryParams)),this.urlTree.fragment,R6(r),oc(r),r.component??r._loadedComponent??null,r,O6(r)),E=o2(x,s,this.paramsInheritanceStrategy);x.params=Object.freeze(E.params),x.data=Object.freeze(E.data);let{segmentGroup:D,slicedSegments:N}=k6(t,m,g,l);if(N.length===0&&D.hasChildren())return this.processChildren(u,l,D,x).pipe(at(j=>new $s(x,j)));if(l.length===0&&N.length===0)return pt(new $s(x,[]));let K=oc(r)===o;return this.processSegment(u,l,D,N,K?nn:o,!0,x).pipe(at(j=>new $s(x,j instanceof $s?[j]:[])))}))):sg(t)))}getChildConfig(e,t,r){return t.children?pt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?pt({routes:t._loadedRoutes,injector:t._loadedInjector}):KJ(e,t,r,this.urlSerializer).pipe(Jr(i=>i?this.configLoader.loadChildren(e,t).pipe(Di(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):ZJ(t))):pt({routes:[],injector:e})}};function cee(n){n.sort((e,t)=>e.value.outlet===nn?-1:t.value.outlet===nn?1:e.value.outlet.localeCompare(t.value.outlet))}function lee(n){let e=n.value.routeConfig;return e&&e.path===""}function c8(n){let e=[],t=new Set;for(let r of n){if(!lee(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=c8(r.children);e.push(new $s(r.value,i))}return e.filter(r=>!t.has(r))}function R6(n){return n.data||{}}function O6(n){return n.resolve||{}}function uee(n,e,t,r,i,o){return Jr(s=>see(n,e,t,r,s.extractedUrl,i,o).pipe(at(({state:a,tree:c})=>Vt(Ve({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function dee(n,e){return Jr(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pt(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of l8(c))s.add(l);let a=0;return mn(s).pipe(Fu(c=>o.has(c)?fee(c,r,n,e):(c.data=o2(c,c.parent,n).resolve,pt(void 0))),Di(()=>a++),Tp(1),Jr(c=>a===s.size?pt(t):go))})}function l8(n){let e=n.children.map(t=>l8(t)).flat();return[n,...e]}function fee(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!e8(i)&&(o[qv]=i.title),M0(()=>(n.data=o2(n,n.parent,t).resolve,hee(o,n,e,r).pipe(at(s=>(n._resolvedData=s,n.data=Ve(Ve({},n.data),s),null)))))}function hee(n,e,t,r){let i=q5(n);if(i.length===0)return pt({});let o={};return mn(i).pipe(Jr(s=>pee(n[s],e,t,r).pipe(Ka(),Di(a=>{if(a instanceof gg)throw s2(new od,a);o[s]=a}))),Tp(1),at(()=>o),Ol(s=>o8(s)?go:Sp(s)))}function pee(n,e,t,r){let i=vg(e)??r,o=yg(n,i),s=o.resolve?o.resolve(e,t):fi(i,()=>o(e,t));return Ql(s)}function U5(n){return Nn(e=>{let t=n(e);return t?mn(t).pipe(at(()=>e)):pt(e)})}var sT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===nn);return r}getResolvedTitleForRoute(t){return t.data[qv]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>Me(u8),providedIn:"root"})}return n})(),u8=(()=>{class n extends sT{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Le(i6))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cd=new Ye("",{providedIn:"root",factory:()=>({})}),_g=new Ye(""),u2=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Me(XA);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return pt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ql(fi(t,()=>r.loadComponent())).pipe(at(f8),Nn(h8),Di(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),N0(()=>{this.componentLoaders.delete(r)})),o=new xp(i,()=>new kn).pipe(bp());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=d8(r,this.compiler,t,this.onLoadEndListener).pipe(N0(()=>{this.childrenLoaders.delete(r)})),s=new xp(o,()=>new kn).pipe(bp());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function d8(n,e,t,r){return Ql(fi(t,()=>n.loadChildren())).pipe(at(f8),Nn(h8),Jr(i=>i instanceof cb||Array.isArray(i)?pt(i):mn(e.compileModuleAsync(i))),at(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(_g,[],{optional:!0,self:!0}).flat()),{routes:s.map(oT),injector:o}}))}function gee(n){return n&&typeof n=="object"&&"default"in n}function f8(n){return gee(n)?n.default:n}function h8(n){return pt(n)}var d2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>Me(mee),providedIn:"root"})}return n})(),mee=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aT=new Ye(""),cT=new Ye("");function p8(n,e,t){let r=n.get(cT),i=n.get(ei);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),vee(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&fi(n,()=>c({transition:a,from:e,to:t})),s}function vee(n){return new Promise(e=>{av({read:()=>setTimeout(e)},{injector:n})})}var lT=new Ye(""),f2=(()=>{class n{currentNavigation=Ca(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new kn;transitionAbortWithErrorSubject=new kn;configLoader=Me(u2);environmentInjector=Me(Wn);destroyRef=Me(xa);urlSerializer=Me(Yf);rootContexts=Me(Qf);location=Me(ed);inputBindingEnabled=Me(Hv,{optional:!0})!==null;titleStrategy=Me(sT);options=Me(cd,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Me(d2);createViewTransition=Me(aT,{optional:!0});navigationErrorHandler=Me(lT,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>pt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Zb(i)),r=i=>this.events.next(new Xb(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;zi(()=>{this.transitions?.next(Vt(Ve({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Zi(null),this.transitions.pipe(br(r=>r!==null),Nn(r=>{let i=!1;return pt(r).pipe(Nn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ho.SupersededByNewNavigation),go;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Vt(Ve({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Zc(o.id,this.urlSerializer.serialize(o.rawUrl),"",dg.IgnoredSameUrlNavigation)),o.resolve(!1),go;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return pt(o).pipe(Nn(c=>(this.events.next(new ad(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?go:Promise.resolve(c))),uee(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Di(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new Lv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:p,extras:m}=o,g=new ad(c,this.urlSerializer.serialize(l),u,p);this.events.next(g);let x=X6(this.rootComponentType).snapshot;return this.currentTransition=r=Vt(Ve({},o),{targetSnapshot:x,urlAfterRedirects:l,extras:Vt(Ve({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(E=>(E.finalUrl=l,E)),pt(r)}else return this.events.next(new Zc(o.id,this.urlSerializer.serialize(o.extractedUrl),"",dg.IgnoredByUrlHandlingStrategy)),o.resolve(!1),go}),Di(o=>{let s=new Wb(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),at(o=>(this.currentTransition=r=Vt(Ve({},o),{guards:DJ(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),BJ(this.environmentInjector,o=>this.events.next(o)),Di(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw s2(this.urlSerializer,o.guardsResult);let s=new Kb(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),br(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ho.GuardRejected),!1)),U5(o=>{if(o.guards.canActivateChecks.length!==0)return pt(o).pipe(Di(s=>{let a=new Yb(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Nn(s=>{let a=!1;return pt(s).pipe(dee(this.paramsInheritanceStrategy,this.environmentInjector),Di({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Ho.NoDataFromResolver)}}))}),Di(s=>{let a=new Qb(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),U5(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=vg(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Di(u=>{a.component=u}),at(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return D0(s(o.targetSnapshot.root)).pipe(Vu(null),Xi(1))}),U5(()=>this.afterPreactivation()),Nn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?mn(a).pipe(at(()=>r)):pt(r)}),at(o=>{let s=EJ(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Vt(Ve({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Di(()=>{this.events.next(new Fv)}),TJ(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Xi(1),Z1(new Pt(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(br(()=>!i&&!r.targetRouterState),Di(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Ho.Aborted)}))),Di({next:o=>{i=!0,this.lastSuccessfulNavigation=zi(this.currentNavigation),this.events.next(new Go(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Z1(this.transitionAbortWithErrorSubject.pipe(Di(o=>{throw o}))),N0(()=>{i||this.cancelNavigationTransition(r,"",Ho.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ol(o=>{if(this.destroyed)return r.resolve(!1),go;if(i=!0,i8(o))this.events.next(new Yc(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),AJ(o)?this.events.next(new pg(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new fg(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=fi(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof gg){let{message:c,cancellationCode:l}=s2(this.urlSerializer,a);this.events.next(new Yc(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new pg(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return go}))}))}cancelNavigationTransition(t,r,i){let o=new Yc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=zi(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yee(n){return n!==lg}var g8=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>Me(_ee),providedIn:"root"})}return n})(),c2=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},_ee=(()=>{class n extends c2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Sa(n)))(i||n)}})();static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),m8=(()=>{class n{urlSerializer=Me(Yf);options=Me(cd,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Me(ed);urlHandlingStrategy=Me(d2);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Qc;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Qc?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=X6(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>Me(wee),providedIn:"root"})}return n})(),wee=(()=>{class n extends m8{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ad?this.updateStateMemento():t instanceof Zc?this.commitTransition(r):t instanceof Lv?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Fv?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Yc&&t.code!==Ho.SupersededByNewNavigation&&t.code!==Ho.Redirect?this.restoreHistory(r):t instanceof fg?this.restoreHistory(r,!0):t instanceof Go&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Ve(Ve({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=Ve(Ve({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Sa(n)))(i||n)}})();static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function h2(n,e){n.events.pipe(br(t=>t instanceof Go||t instanceof Yc||t instanceof fg||t instanceof Zc),at(t=>t instanceof Go||t instanceof Zc?0:(t instanceof Yc?t.code===Ho.Redirect||t.code===Ho.SupersededByNewNavigation:!1)?2:1),br(t=>t!==2),Xi(1)).subscribe(()=>{e()})}var bee={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xee={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Tr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Me(ub);stateManager=Me(m8);options=Me(cd,{optional:!0})||{};pendingTasks=Me(Bc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Me(f2);urlSerializer=Me(Yf);location=Me(ed);urlHandlingStrategy=Me(d2);injector=Me(Wn);_events=new kn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Me(g8);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Me(_g,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Me(Hv,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Hr;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=zi(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Yc&&r.code!==Ho.Redirect&&r.code!==Ho.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Go)this.navigated=!0;else if(r instanceof pg){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Ve({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||yee(i.source)},s);this.scheduleNavigation(a,lg,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}wJ(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),lg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Ve({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(ds)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return zi(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(oT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=Ve(Ve({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=K6(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return Y6(p,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=sd(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,lg,null,r)}navigate(t,r={skipLocationChange:!1}){return Cee(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Qa(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Ve({},bee):r===!1?i=Ve({},xee):i=r,sd(t))return D6(this.currentUrlTree,t,i);let o=this.parseUrl(t);return D6(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let u=this.pendingTasks.add();return h2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cee(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new et(4008,!1)}var Ma=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ca(null);get href(){return zi(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new kn;applicationErrorHandler=Me(ds);options=Me(cd,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(Me(new mb("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Go&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(sd(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:sd(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Je(Tr),Je(Gs),iv("tabindex"),Je(hs),Je(_o),Je(ic))};static \u0275dir=rr({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Fe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&jf("href",i.reactiveHref(),yA)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ju],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ju],replaceUrl:[2,"replaceUrl","replaceUrl",Ju],routerLink:"routerLink"},features:[Ia]})}return n})(),dT=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new jr;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Go&&this.update()})}ngAfterContentInit(){pt(this.links.changes,pt(null)).pipe(Oc()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=mn(t).pipe(Oc()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Eee(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Je(Tr),Je(_o),Je(hs),Je(Hc),Je(Ma,8))};static \u0275dir=rr({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&YA(o,Ma,5),r&2){let s;Bf(s=Uf())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Ia]})}return n})();function Eee(n){return!!n.paths}var Wv=class{};var v8=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(br(t=>t instanceof Go),Fu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Kp(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return mn(i).pipe(Oc())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=pt(null);let o=i.pipe(Jr(s=>s===null?pt(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return mn([o,s]).pipe(Oc())}else return o})}static \u0275fac=function(r){return new(r||n)(Le(Tr),Le(Wn),Le(Wv),Le(u2))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),y8=new Ye(""),Iee=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=lg;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ad?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Go?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Zc&&t.code===dg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof hg))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>ee(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new hg(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){OA()};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})();function See(n){return n.routerState.root}function Kv(n,e){return{\u0275kind:n,\u0275providers:e}}function Aee(){let n=Me(Rn);return e=>{let t=n.get($o);if(e!==t.components[0])return;let r=n.get(Tr),i=n.get(_8);n.get(fT)===1&&r.initialNavigation(),n.get(x8,null,{optional:!0})?.setUpPreloading(),n.get(y8,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var _8=new Ye("",{factory:()=>new kn}),fT=new Ye("",{providedIn:"root",factory:()=>1});function w8(){let n=[{provide:Zw,useValue:!0},{provide:fT,useValue:0},Qp(()=>{let e=Me(Rn);return e.get(l5,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Tr),o=e.get(_8);h2(i,()=>{r(!0)}),e.get(f2).afterPreactivation=()=>(r(!0),o.closed?pt(void 0):o),i.initialNavigation()}))})];return Kv(2,n)}function b8(){let n=[Qp(()=>{Me(Tr).setUpLocationChangeListener()}),{provide:fT,useValue:2}];return Kv(3,n)}var x8=new Ye("");function C8(n){return Kv(0,[{provide:x8,useExisting:v8},{provide:Wv,useExisting:n}])}function E8(){return Kv(8,[rT,{provide:Hv,useExisting:rT}])}function I8(n){Wp("NgRouterViewTransitions");let e=[{provide:aT,useValue:p8},{provide:cT,useValue:Ve({skipNextTransition:!!n?.skipInitialTransition},n)}];return Kv(9,e)}var S8=[ed,{provide:Yf,useClass:od},Tr,Qf,{provide:Gs,useFactory:See,deps:[Tr]},u2,[]],ld=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[S8,[],{provide:_g,multi:!0,useValue:t},[],r?.errorHandler?{provide:lT,useValue:r.errorHandler}:[],{provide:cd,useValue:r||{}},r?.useHash?Dee():Mee(),Tee(),r?.preloadingStrategy?C8(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Nee(r):[],r?.bindToComponentInputs?E8().\u0275providers:[],r?.enableViewTransitions?I8().\u0275providers:[],Pee()]}}static forChild(t){return{ngModule:n,providers:[{provide:_g,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=nr({})}return n})();function Tee(){return{provide:y8,useFactory:()=>{let n=Me(QF),e=Me(jt),t=Me(cd),r=Me(f2),i=Me(Yf);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Iee(i,r,n,e,t)}}}function Dee(){return{provide:ic,useClass:d5}}function Mee(){return{provide:ic,useClass:bb}}function Nee(n){return[n.initialNavigation==="disabled"?b8().\u0275providers:[],n.initialNavigation==="enabledBlocking"?w8().\u0275providers:[]]}var uT=new Ye("");function Pee(){return[{provide:uT,useFactory:Aee},{provide:fb,multi:!0,useExisting:uT}]}function Ri(n){n===void 0&&(n=Me(Rn));let e=n.get(Vp);return t=>new Pt(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var kee="firebase",Ree="11.10.0";Gn(kee,Ree,"app");var ti=new Fl("ANGULARFIRE2_VERSION");function Zl(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Xc=(n,e)=>{let t=e?[e]:f1(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},wg=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(wg||{}),A8=Xu()&&typeof Zone<"u"?wg.WARN:wg.SILENT;var p2=class{zone;delegate;constructor(e,t=oI){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ni=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Me(jt);this.outsideAngular=t.runOutsideAngular(()=>new p2(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new p2(typeof Zone>"u"?void 0:Zone.current,_f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),T8=!1;function Oee(n,e){!T8&&(A8>wg.SILENT||Xu())&&(T8=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),A8>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Lee(n){let e=Me(jt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Zf(n){let e=Me(jt,{optional:!0});return e?e.run(()=>n()):n()}var Fee=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),fi(t,()=>Zf(()=>n.apply(void 0,r)))),Dr=(n,e,t)=>(t||=e?wg.WARN:wg.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=Me(ni),s=Me(Vp),a=Me(Wn)}catch{return Oee(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Zf(()=>s.add())),i[l]=Fee(i[l],r,a));let c=Lee(()=>n.apply(this,i));return e?c instanceof Pt?c.pipe(ga(o.outsideAngular),mo(o.insideAngular),Ri(a)):c instanceof Promise?Zf(()=>{let l=s.add();return new Promise((u,p)=>{c.then(m=>fi(a,()=>Zf(()=>u(m))),m=>fi(a,()=>Zf(()=>p(m)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Zf(()=>c):c instanceof Pt?c.pipe(ga(o.outsideAngular),mo(o.insideAngular)):Zf(()=>c)});var Ws=class{constructor(e){return e}},ac=class{constructor(){return f1()}};function Vee(n){return n&&n.length===1?n[0]:new Ws(Pc())}var pT=new Ye("angularfire2._apps"),jee={provide:Ws,useFactory:Vee,deps:[[new Ir,pT]]},Bee={provide:ac,deps:[[new Ir,pT]]};function Uee(n){return(e,t)=>{let r=t.get(Ui);Gn("angularfire",ti.full,"core"),Gn("angularfire",ti.full,"app"),Gn("angular",O0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ws(i)}}function D8(n,...e){return eo([jee,Bee,{provide:pT,useFactory:Uee(n),multi:!0,deps:[jt,Rn,ni,...e]}])}var M8=Dr(NO,!0);var zee=new Map,qee={activated:!1,tokenObservers:[]},$ee={initialized:!1,enabled:!1};function cc(n){return zee.get(n)||Object.assign({},qee)}function R8(){return $ee}var Hee="https://content-firebaseappcheck.googleapis.com/v1";var Gee="exchangeDebugToken",N8={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},RDe=1440*60*1e3;var vT=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return ee(this,null,function*(){this.stop();try{this.pending=new jE,this.pending.promise.catch(t=>{}),yield Wee(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new jE,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Wee(n){return new Promise(e=>{setTimeout(e,n)})}var Kee={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ud=new cp("appCheck","AppCheck",Kee);function O8(n){if(!cc(n).activated)throw ud.create("use-before-activation",{appName:n.name})}function L8(r,i){return ee(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let g=yield s.getHeartbeatsHeader();g&&(o["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(g){throw ud.create("fetch-network-error",{originalErrorMessage:g?.message})}if(c.status!==200)throw ud.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(g){throw ud.create("fetch-parse-error",{originalErrorMessage:g?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ud.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(u[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function F8(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Hee}/projects/${t}/apps/${r}:${Gee}?key=${i}`,body:{debug_token:e}}}var Yee="firebase-app-check-database",Qee=1,yT="firebase-app-check-store";var g2=null;function Zee(){return g2||(g2=new Promise((n,e)=>{try{let t=indexedDB.open(Yee,Qee);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ud.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yT,{keyPath:"compositeKey"})}}}catch(t){e(ud.create("storage-open",{originalErrorMessage:t?.message}))}}),g2)}function Xee(n,e){return Jee(ete(n),e)}function Jee(n,e){return ee(this,null,function*(){let r=(yield Zee()).transaction(yT,"readwrite"),o=r.objectStore(yT).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(ud.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function ete(n){return`${n.options.appId}-${n.name}`}var Yv=new up("@firebase/app-check");function gT(n,e){return ap()?Xee(n,e).catch(t=>{Yv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function V8(){return R8().enabled}function j8(){return ee(this,null,function*(){let n=R8();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var tte={error:"UNKNOWN_ERROR"};function nte(n){return SO.encodeString(JSON.stringify(n),!1)}function _T(n,e=!1,t=!1){return ee(this,null,function*(){let r=n.app;O8(r);let i=cc(r),o=i.token,s;if(o&&!Qv(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Qv(l)?o=l:yield gT(r,void 0))}if(!e&&o&&Qv(o))return{token:o.token};let a=!1;if(V8())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=L8(F8(r,yield j8()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield gT(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Yv.warn(l.message):t&&Yv.error(l),mT(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield cc(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Yv.warn(l.message):t&&Yv.error(l),s=l}let c;return o?s?Qv(o)?c={token:o.token,internalError:s}:c=mT(s):(c={token:o.token},i.token=o,yield gT(r,o)):c=mT(s),a&&ste(r,c),c})}function rte(n){return ee(this,null,function*(){let e=n.app;O8(e);let{provider:t}=cc(e);if(V8()){let r=yield j8(),{token:i}=yield L8(F8(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function ite(n,e,t,r){let{app:i}=n,o=cc(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Qv(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),P8(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>P8(n))}function B8(n,e){let t=cc(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function P8(n){let{app:e}=n,t=cc(e),r=t.tokenRefresher;r||(r=ote(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ote(n){let{app:e}=n;return new vT(()=>ee(null,null,function*(){let t=cc(e),r;if(t.token?r=yield _T(n,!0):r=yield _T(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=cc(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},N8.RETRIAL_MIN_WAIT,N8.RETRIAL_MAX_WAIT)}function ste(n,e){let t=cc(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Qv(n){return n.expireTimeMillis-Date.now()>0}function mT(n){return{token:nte(tte),error:n}}var wT=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=cc(this.app);for(let t of e)B8(this.app,t.next);return Promise.resolve()}};function ate(n,e){return new wT(n,e)}function cte(n){return{getToken:e=>_T(n,e),getLimitedUseToken:()=>rte(n),addTokenListener:e=>ite(n,"INTERNAL",e),removeTokenListener:e=>B8(n.app,e)}}var lte="@firebase/app-check",ute="0.10.1";var dte="app-check",k8="app-check-internal";function fte(){Bs(new Qi(dte,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return ate(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(k8).initialize()})),Bs(new Qi(k8,n=>{let e=n.getProvider("app-check").getImmediate();return cte(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gn(lte,ute)}fte();var hte="app-check";var ms=class{constructor(){return Xc(hte)}};var pte=["localhost","0.0.0.0","127.0.0.1"],WDe=typeof window<"u"&&pte.includes(window.location.hostname);var gte="firebase",mte="11.10.0";Ti.registerVersion(gte,mte,"app-compat");var vte=["ngOnDestroy"],z8=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(vte.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let p=u?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var m2=class{constructor(e){return e}},dd=new Ye("angularfire2.app.options"),fd=new Ye("angularfire2.app.name");function Xf(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Ti.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ti.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;yte("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new m2(s)}var yte=(n,...e)=>{Xu()&&typeof console<"u"&&console[n](...e)},_te={provide:m2,useFactory:Xf,deps:[dd,jt,[new Ir,fd]]},q8=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:dd,useValue:t},{provide:fd,useValue:r}]}}constructor(t){Ti.registerVersion("angularfire",ti.full,"core"),Ti.registerVersion("angularfire",ti.full,"app-compat"),Ti.registerVersion("angular",O0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Le(Ui))};static \u0275mod=ur({type:n});static \u0275inj=nr({providers:[_te]})}return n})();function bg(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return wte(i,s)||(U8("error",`${e} was already initialized on the ${t} Firebase App with different settings.${bte?" You may need to reload as Firebase is not HMR aware.":""}`),U8("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function wte(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var bte=typeof module<"u"&&!!module.hot,U8=(n,...e)=>{Xu()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var xT=new Ye("angularfire2.auth.use-emulator"),CT=new Ye("angularfire2.auth.settings"),ET=new Ye("angularfire2.auth.tenant-id"),IT=new Ye("angularfire2.auth.langugage-code"),ST=new Ye("angularfire2.auth.use-device-language"),AT=new Ye("angularfire.auth.persistence"),TT=(n,e,t,r,i,o,s,a)=>bg(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),Ks=(()=>{class n{injector=Me(Wn);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,u,p,m,g){let x=new kn,E=pt(void 0).pipe(mo(s.outsideAngular),Nn(()=>o.runOutsideAngular(()=>import("./chunk-NO5NGGK2.js"))),at(()=>Xf(t,o,r)),at(D=>TT(D,o,a,l,u,p,c,m)),Y1({bufferSize:1,refCount:!1}));if(Eb(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{E.pipe(Ka()).subscribe();let D=E.pipe(Nn(j=>j.getRedirectResult().then(G=>G,()=>null)),Ri(this.injector),Y1({bufferSize:1,refCount:!1})),N=E.pipe(Nn(j=>new Pt(G=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(oe=>G.next(oe),oe=>G.error(oe),()=>G.complete()))})))),K=E.pipe(Nn(j=>new Pt(G=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(oe=>G.next(oe),oe=>G.error(oe),()=>G.complete()))}))));this.authState=D.pipe(Q1(N),ga(s.outsideAngular),mo(s.insideAngular)),this.user=D.pipe(Q1(K),ga(s.outsideAngular),mo(s.insideAngular)),this.idToken=this.user.pipe(Nn(j=>j?mn(j.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe(Nn(j=>j?mn(j.getIdTokenResult()):pt(null))),this.credential=uI(D,x,this.authState.pipe(br(j=>!j))).pipe(at(j=>j?.user?j:null),ga(s.outsideAngular),mo(s.insideAngular))}return z8(this,E,o,{spy:{apply:(D,N,K)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&K.then(j=>x.next(j))}}})}static \u0275fac=function(r){return new(r||n)(Le(dd),Le(fd,8),Le(Ui),Le(jt),Le(ni),Le(xT,8),Le(CT,8),Le(ET,8),Le(IT,8),Le(ST,8),Le(AT,8),Le(ms,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),$8=(()=>{class n{constructor(){Ti.registerVersion("angularfire",ti.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=nr({providers:[Ks]})}return n})();var Zv={production:!1,version:"1.0.1",publicBaseUrl:"",firebase:{apiKey:"AIzaSyCcUiX0VhFp0onLlKVknBHmUfMLAUEmFb8",authDomain:"profghizzapp-7cd59.firebaseapp.com",projectId:"profghizzapp-7cd59",storageBucket:"profghizzapp-7cd59.firebasestorage.app",messagingSenderId:"142548255598",appId:"1:142548255598:web:963e0aecd134f7d7afb77f",measurementId:"G-B77VGH8SVQ"}};var Cg=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i,this._ensuring=null}ensureSignedIn(){return ee(this,null,function*(){if(this._ensuring)return this._ensuring;this._ensuring=ee(this,null,function*(){if(!(yield this.afAuth.currentUser))try{yield this.afAuth.signInAnonymously(),yield new Promise(i=>{let o=this.afAuth.authState.subscribe(s=>{s&&(o.unsubscribe(),i())});setTimeout(()=>{o.unsubscribe(),i()},5e3)})}catch(i){console.error("AuthService.ensureSignedIn failed",i)}});try{yield this._ensuring}finally{this._ensuring=null}})}logout(){return ee(this,null,function*(){try{yield this.afAuth.signOut(),this.router.navigate(["/login"])}catch(r){console.error("Errore durante il logout:",r)}})}get authState(){return this.afAuth.authState}get currentUser(){return this.afAuth.currentUser}};e.\u0275fac=function(i){return new(i||e)(Le(Ks),Le(Tr))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var H8=(()=>{let e=class e{constructor(r){this.authService=r,this.appVersion=Zv.version}logout(){this.authService.logout()}};e.\u0275fac=function(i){return new(i||e)(Je(Cg))},e.\u0275cmp=lr({type:e,selectors:[["app-header"]],standalone:!1,decls:11,vars:1,consts:[[1,"app-header"],[1,"logo"],[1,"header-actions"],[1,"version-badge"],["title","Esci dal sistema","aria-label","Logout",1,"logout-btn",3,"click"],[1,"material-icons"],[1,"logout-text"]],template:function(i,o){i&1&&(A(0,"header",0)(1,"div",1),W(2,"Prof Ghizz"),R(),A(3,"nav",2)(4,"span",3),W(5),R(),A(6,"button",4),Fe("click",function(){return o.logout()}),A(7,"span",5),W(8,"logout"),R(),A(9,"span",6),W(10,"Esci"),R()()()()),i&2&&(X(5),Ar("v",o.appVersion))},styles:["[_nghost-%COMP%]{display:block}.app-header[_ngcontent-%COMP%]{height:64px;display:flex;align-items:center;justify-content:flex-start;padding:0 20px;background:#fff;border-bottom:1px solid #e6edf3;position:relative;z-index:1100;pointer-events:auto}.app-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-weight:800;color:#0f2a63;font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:auto;display:inline-flex;align-items:center;gap:10px}.open-browser[_ngcontent-%COMP%]{color:#0f2a63;text-decoration:none;font-weight:600;padding:6px 8px;border-radius:6px;transition:background-color .2s ease,color .2s ease}.open-browser[_ngcontent-%COMP%]:hover{background:#f3f7fa;color:#0b1e49}.install-btn[_ngcontent-%COMP%]{background:#1976d2;color:#fff;border:0;border-radius:6px;padding:8px 12px;font-weight:600;cursor:pointer;box-shadow:0 1px 2px #0c154014;transition:background-color .2s ease,box-shadow .2s ease,transform .02s ease-in}.install-btn[_ngcontent-%COMP%]:hover{background:#165fa8;box-shadow:0 2px 6px #0c15401f}.install-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.app-state[_ngcontent-%COMP%]{font-size:12px;font-weight:700;background:#2e7d32;color:#fff;padding:4px 8px;border-radius:999px;box-shadow:0 1px 2px #0c154014}.logout-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;background:#f44336;color:#fff;border:none;border-radius:6px;padding:6px 12px;font-weight:600;cursor:pointer;font-size:14px;transition:background-color .2s ease,box-shadow .2s ease,transform .02s ease-in;box-shadow:0 1px 2px #0c154014}.logout-btn[_ngcontent-%COMP%]:hover{background:#d32f2f;box-shadow:0 2px 6px #0c15401f}.logout-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.logout-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.logout-text[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.logout-text[_ngcontent-%COMP%]{display:inline}}.version-badge[_ngcontent-%COMP%]{font-size:11px;color:#999;font-weight:600;text-transform:uppercase;letter-spacing:.5px}"]});let n=e;return n})();var G8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=lr({type:e,selectors:[["app-sidebar"]],standalone:!1,decls:31,vars:0,consts:[["aria-label","Sidebar navigation",1,"app-sidebar"],["routerLink","/","routerLinkActive","active","aria-label","Home","title","Home"],["viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","role","img","aria-hidden","true","focusable","false",1,"side-svg"],["width","24","height","24","fill","none"],["d","M3 10L12 3l9 7v8a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-8z","fill","#fff"],[1,"sr-only"],["routerLink","/anagrafica","routerLinkActive","active","aria-label","Clienti","title","Clienti"],["d","M16 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8zM8 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z","fill","#fff"],["d","M2 20a6 6 0 0 1 6-6h8a6 6 0 0 1 6 6v1H2v-1z","fill","#fff"],["routerLink","/esercizi","routerLinkActive","active","aria-label","Esercizi","title","Esercizi"],["d","M13 2L3 14h7l-1 8L21 10h-7l-1-8z","fill","#fff"],["routerLink","/gestione-schede","routerLinkActive","active","aria-label","Schede","title","Schede"],["x","3","y","3","width","8","height","8","fill","#fff"],["x","13","y","3","width","8","height","8","fill","#fff"],["x","3","y","13","width","8","height","8","fill","#fff"],["x","13","y","13","width","8","height","8","fill","#fff"]],template:function(i,o){i&1&&(A(0,"aside",0)(1,"ul")(2,"li")(3,"a",1),Vr(),A(4,"svg",2),wt(5,"rect",3)(6,"path",4),R(),us(),A(7,"span",5),W(8,"Home"),R()()(),A(9,"li")(10,"a",6),Vr(),A(11,"svg",2),wt(12,"path",7)(13,"path",8),R(),us(),A(14,"span",5),W(15,"Clienti"),R()()(),A(16,"li")(17,"a",9),Vr(),A(18,"svg",2),wt(19,"path",10),R(),us(),A(20,"span",5),W(21,"Esercizi"),R()()(),A(22,"li")(23,"a",11),Vr(),A(24,"svg",2),wt(25,"rect",12)(26,"rect",13)(27,"rect",14)(28,"rect",15),R(),us(),A(29,"span",5),W(30,"Schede"),R()()()()())},dependencies:[Ma,dT],styles:["[_nghost-%COMP%]{display:block}.app-sidebar[_ngcontent-%COMP%]{width:80px;background:#0b2a63;padding:8px;border-right:1px solid rgba(255,255,255,.06);height:100vh;min-height:110vh;box-sizing:border-box;position:relative;z-index:1100;pointer-events:auto}.app-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:12px 0 0;margin:8px 0 0;display:flex;flex-direction:column;gap:12px;align-items:center}.app-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:10px;padding:4px 6px;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:12px;color:#fff;text-decoration:none;cursor:pointer}.app-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff0f}.app-sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#ffffff1f;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px}.app-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.icon[_ngcontent-%COMP%]{margin-right:8px}.app-sidebar[_ngcontent-%COMP%]   .side-svg[_ngcontent-%COMP%]{width:28px;height:28px;display:block}.app-sidebar[_ngcontent-%COMP%]   .sr-only[_ngcontent-%COMP%]{position:absolute;left:-9999px}.app-sidebar[_ngcontent-%COMP%]   .side-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 8px;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   .side-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.95}"]});let n=e;return n})();function Ete(n,e){n&1&&(Ni(0),wt(1,"router-outlet"),Pi())}function Ite(n,e){n&1&&(Ni(0),wt(1,"app-header"),A(2,"div",3),wt(3,"app-sidebar"),A(4,"main",4),wt(5,"router-outlet"),R()(),Pi())}function Ste(n,e){n&1&&wt(0,"router-outlet")}function Ate(n,e){if(n&1&&rt(0,Ite,6,0,"ng-container",2)(1,Ste,1,0,"ng-template",null,1,to),n&2){let t=pi(2),r=ie();ge("ngIf",!r.isPublic)("ngIfElse",t)}}var W8=(()=>{let e=class e{constructor(r,i){this.router=r,this.afAuth=i,this.isPublic=!1,this.isLoggedIn=!1}ngOnInit(){this.authSub=this.afAuth.authState.subscribe(r=>{this.isLoggedIn=!!r}),this.isPublic=this.router.url.includes("/public-pdf/"),this.sub=this.router.events.pipe(br(r=>r instanceof Go)).subscribe(()=>{this.isPublic=this.router.url.includes("/public-pdf/")})}ngOnDestroy(){this.sub?.unsubscribe(),this.authSub?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(Je(Tr),Je(Ks))},e.\u0275cmp=lr({type:e,selectors:[["app-root"]],standalone:!1,decls:3,vars:2,consts:[["loggedInView",""],["publicView",""],[4,"ngIf","ngIfElse"],[1,"app-shell"],[1,"app-main"]],template:function(i,o){if(i&1&&rt(0,Ete,2,0,"ng-container",2)(1,Ate,3,2,"ng-template",null,0,to),i&2){let s=pi(2);ge("ngIf",!o.isLoggedIn&&!o.isPublic)("ngIfElse",s)}},dependencies:[no,$v,H8,G8],styles:["[_ngcontent-%COMP%]:root{--header-h: 64px;--sidebar-w: 80px;--bg: #f5f8fc;--panel: #ffffff;--border: #e6edf7}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;background:var(--bg)}app-header[_ngcontent-%COMP%], .app-header[_ngcontent-%COMP%]{position:relative;z-index:100;display:block;width:100%;min-height:var(--header-h);background:var(--panel);border-bottom:1px solid var(--border)}.app-shell[_ngcontent-%COMP%]{display:flex;position:relative;z-index:0;min-height:calc(100vh - var(--header-h));isolation:isolate;background:var(--bg)}app-sidebar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%]{position:relative;z-index:10;width:var(--sidebar-w);min-height:calc(100vh - var(--header-h));flex-shrink:0;background:#f8fbff;border-right:1px solid var(--border);overflow:auto;-webkit-overflow-scrolling:touch}.app-main[_ngcontent-%COMP%]{position:relative;z-index:0;flex:1 1 auto;min-width:0;padding:24px;min-height:calc(100vh - var(--header-h));background:var(--bg)}router-outlet[_ngcontent-%COMP%]{display:block;position:relative;z-index:0}.app-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:1200}.app-modal[_ngcontent-%COMP%]{position:relative;z-index:1210;background:#fff;border-radius:12px;box-shadow:0 8px 40px #0000003b;max-width:90vw;width:680px;padding:22px}.app-modal-backdrop.is-hidden[_ngcontent-%COMP%]{pointer-events:none!important;opacity:0!important}.app-shell[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto}@media (max-width: 800px){.app-shell[_ngcontent-%COMP%]{flex-direction:column;min-height:calc(100vh - var(--header-h))}app-sidebar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%]{width:100%;height:auto;min-height:auto;border-right:none;border-bottom:1px solid var(--border)}.app-main[_ngcontent-%COMP%]{min-height:auto;padding:18px}}.safe-content[_ngcontent-%COMP%]{position:relative;z-index:0}"]});let n=e;return n})();var K8="auth",Xv=class{constructor(e){return e}},Jf=class{constructor(){return Xc(K8)}};var MT=new Ye("angularfire2.auth-instances");function Sne(n,e){let t=Zl(K8,n,e);return t&&new Xv(t)}function Ane(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Xv(r)}}var Tne={provide:Jf,deps:[[new Ir,MT]]},Dne={provide:Xv,useFactory:Sne,deps:[[new Ir,MT],Ws]};function Y8(n,...e){return Gn("angularfire",ti.full,"auth"),eo([Dne,Tne,{provide:MT,useFactory:Ane(n),multi:!0,deps:[jt,Rn,ni,ac,[new Ir,ms],...e]}])}var Q8=Dr(zE,!0);var Z8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},X8={};var Xl,NT;(function(){var n;function e(z,M){function I(){}I.prototype=M.prototype,z.D=M.prototype,z.prototype=new I,z.prototype.constructor=z,z.C=function(V,b,S){for(var T=Array(arguments.length-2),te=2;te<arguments.length;te++)T[te-2]=arguments[te];return M.prototype[b].apply(V,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(z,M,I){I||(I=0);var V=Array(16);if(typeof M=="string")for(var b=0;16>b;++b)V[b]=M.charCodeAt(I++)|M.charCodeAt(I++)<<8|M.charCodeAt(I++)<<16|M.charCodeAt(I++)<<24;else for(b=0;16>b;++b)V[b]=M[I++]|M[I++]<<8|M[I++]<<16|M[I++]<<24;M=z.g[0],I=z.g[1],b=z.g[2];var S=z.g[3],T=M+(S^I&(b^S))+V[0]+3614090360&4294967295;M=I+(T<<7&4294967295|T>>>25),T=S+(b^M&(I^b))+V[1]+3905402710&4294967295,S=M+(T<<12&4294967295|T>>>20),T=b+(I^S&(M^I))+V[2]+606105819&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(M^b&(S^M))+V[3]+3250441966&4294967295,I=b+(T<<22&4294967295|T>>>10),T=M+(S^I&(b^S))+V[4]+4118548399&4294967295,M=I+(T<<7&4294967295|T>>>25),T=S+(b^M&(I^b))+V[5]+1200080426&4294967295,S=M+(T<<12&4294967295|T>>>20),T=b+(I^S&(M^I))+V[6]+2821735955&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(M^b&(S^M))+V[7]+4249261313&4294967295,I=b+(T<<22&4294967295|T>>>10),T=M+(S^I&(b^S))+V[8]+1770035416&4294967295,M=I+(T<<7&4294967295|T>>>25),T=S+(b^M&(I^b))+V[9]+2336552879&4294967295,S=M+(T<<12&4294967295|T>>>20),T=b+(I^S&(M^I))+V[10]+4294925233&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(M^b&(S^M))+V[11]+2304563134&4294967295,I=b+(T<<22&4294967295|T>>>10),T=M+(S^I&(b^S))+V[12]+1804603682&4294967295,M=I+(T<<7&4294967295|T>>>25),T=S+(b^M&(I^b))+V[13]+4254626195&4294967295,S=M+(T<<12&4294967295|T>>>20),T=b+(I^S&(M^I))+V[14]+2792965006&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(M^b&(S^M))+V[15]+1236535329&4294967295,I=b+(T<<22&4294967295|T>>>10),T=M+(b^S&(I^b))+V[1]+4129170786&4294967295,M=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(M^I))+V[6]+3225465664&4294967295,S=M+(T<<9&4294967295|T>>>23),T=b+(M^I&(S^M))+V[11]+643717713&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^M&(b^S))+V[0]+3921069994&4294967295,I=b+(T<<20&4294967295|T>>>12),T=M+(b^S&(I^b))+V[5]+3593408605&4294967295,M=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(M^I))+V[10]+38016083&4294967295,S=M+(T<<9&4294967295|T>>>23),T=b+(M^I&(S^M))+V[15]+3634488961&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^M&(b^S))+V[4]+3889429448&4294967295,I=b+(T<<20&4294967295|T>>>12),T=M+(b^S&(I^b))+V[9]+568446438&4294967295,M=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(M^I))+V[14]+3275163606&4294967295,S=M+(T<<9&4294967295|T>>>23),T=b+(M^I&(S^M))+V[3]+4107603335&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^M&(b^S))+V[8]+1163531501&4294967295,I=b+(T<<20&4294967295|T>>>12),T=M+(b^S&(I^b))+V[13]+2850285829&4294967295,M=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(M^I))+V[2]+4243563512&4294967295,S=M+(T<<9&4294967295|T>>>23),T=b+(M^I&(S^M))+V[7]+1735328473&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^M&(b^S))+V[12]+2368359562&4294967295,I=b+(T<<20&4294967295|T>>>12),T=M+(I^b^S)+V[5]+4294588738&4294967295,M=I+(T<<4&4294967295|T>>>28),T=S+(M^I^b)+V[8]+2272392833&4294967295,S=M+(T<<11&4294967295|T>>>21),T=b+(S^M^I)+V[11]+1839030562&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^M)+V[14]+4259657740&4294967295,I=b+(T<<23&4294967295|T>>>9),T=M+(I^b^S)+V[1]+2763975236&4294967295,M=I+(T<<4&4294967295|T>>>28),T=S+(M^I^b)+V[4]+1272893353&4294967295,S=M+(T<<11&4294967295|T>>>21),T=b+(S^M^I)+V[7]+4139469664&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^M)+V[10]+3200236656&4294967295,I=b+(T<<23&4294967295|T>>>9),T=M+(I^b^S)+V[13]+681279174&4294967295,M=I+(T<<4&4294967295|T>>>28),T=S+(M^I^b)+V[0]+3936430074&4294967295,S=M+(T<<11&4294967295|T>>>21),T=b+(S^M^I)+V[3]+3572445317&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^M)+V[6]+76029189&4294967295,I=b+(T<<23&4294967295|T>>>9),T=M+(I^b^S)+V[9]+3654602809&4294967295,M=I+(T<<4&4294967295|T>>>28),T=S+(M^I^b)+V[12]+3873151461&4294967295,S=M+(T<<11&4294967295|T>>>21),T=b+(S^M^I)+V[15]+530742520&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^M)+V[2]+3299628645&4294967295,I=b+(T<<23&4294967295|T>>>9),T=M+(b^(I|~S))+V[0]+4096336452&4294967295,M=I+(T<<6&4294967295|T>>>26),T=S+(I^(M|~b))+V[7]+1126891415&4294967295,S=M+(T<<10&4294967295|T>>>22),T=b+(M^(S|~I))+V[14]+2878612391&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~M))+V[5]+4237533241&4294967295,I=b+(T<<21&4294967295|T>>>11),T=M+(b^(I|~S))+V[12]+1700485571&4294967295,M=I+(T<<6&4294967295|T>>>26),T=S+(I^(M|~b))+V[3]+2399980690&4294967295,S=M+(T<<10&4294967295|T>>>22),T=b+(M^(S|~I))+V[10]+4293915773&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~M))+V[1]+2240044497&4294967295,I=b+(T<<21&4294967295|T>>>11),T=M+(b^(I|~S))+V[8]+1873313359&4294967295,M=I+(T<<6&4294967295|T>>>26),T=S+(I^(M|~b))+V[15]+4264355552&4294967295,S=M+(T<<10&4294967295|T>>>22),T=b+(M^(S|~I))+V[6]+2734768916&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~M))+V[13]+1309151649&4294967295,I=b+(T<<21&4294967295|T>>>11),T=M+(b^(I|~S))+V[4]+4149444226&4294967295,M=I+(T<<6&4294967295|T>>>26),T=S+(I^(M|~b))+V[11]+3174756917&4294967295,S=M+(T<<10&4294967295|T>>>22),T=b+(M^(S|~I))+V[2]+718787259&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~M))+V[9]+3951481745&4294967295,z.g[0]=z.g[0]+M&4294967295,z.g[1]=z.g[1]+(b+(T<<21&4294967295|T>>>11))&4294967295,z.g[2]=z.g[2]+b&4294967295,z.g[3]=z.g[3]+S&4294967295}r.prototype.u=function(z,M){M===void 0&&(M=z.length);for(var I=M-this.blockSize,V=this.B,b=this.h,S=0;S<M;){if(b==0)for(;S<=I;)i(this,z,S),S+=this.blockSize;if(typeof z=="string"){for(;S<M;)if(V[b++]=z.charCodeAt(S++),b==this.blockSize){i(this,V),b=0;break}}else for(;S<M;)if(V[b++]=z[S++],b==this.blockSize){i(this,V),b=0;break}}this.h=b,this.o+=M},r.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var M=1;M<z.length-8;++M)z[M]=0;var I=8*this.o;for(M=z.length-8;M<z.length;++M)z[M]=I&255,I/=256;for(this.u(z),z=Array(16),M=I=0;4>M;++M)for(var V=0;32>V;V+=8)z[I++]=this.g[M]>>>V&255;return z};function o(z,M){var I=a;return Object.prototype.hasOwnProperty.call(I,z)?I[z]:I[z]=M(z)}function s(z,M){this.h=M;for(var I=[],V=!0,b=z.length-1;0<=b;b--){var S=z[b]|0;V&&S==M||(I[b]=S,V=!1)}this.g=I}var a={};function c(z){return-128<=z&&128>z?o(z,function(M){return new s([M|0],0>M?-1:0)}):new s([z|0],0>z?-1:0)}function l(z){if(isNaN(z)||!isFinite(z))return p;if(0>z)return D(l(-z));for(var M=[],I=1,V=0;z>=I;V++)M[V]=z/I|0,I*=4294967296;return new s(M,0)}function u(z,M){if(z.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(z.charAt(0)=="-")return D(u(z.substring(1),M));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(M,8)),V=p,b=0;b<z.length;b+=8){var S=Math.min(8,z.length-b),T=parseInt(z.substring(b,b+S),M);8>S?(S=l(Math.pow(M,S)),V=V.j(S).add(l(T))):(V=V.j(I),V=V.add(l(T)))}return V}var p=c(0),m=c(1),g=c(16777216);n=s.prototype,n.m=function(){if(E(this))return-D(this).m();for(var z=0,M=1,I=0;I<this.g.length;I++){var V=this.i(I);z+=(0<=V?V:4294967296+V)*M,M*=4294967296}return z},n.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(x(this))return"0";if(E(this))return"-"+D(this).toString(z);for(var M=l(Math.pow(z,6)),I=this,V="";;){var b=G(I,M).g;I=N(I,b.j(M));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(z);if(I=b,x(I))return S+V;for(;6>S.length;)S="0"+S;V=S+V}},n.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function x(z){if(z.h!=0)return!1;for(var M=0;M<z.g.length;M++)if(z.g[M]!=0)return!1;return!0}function E(z){return z.h==-1}n.l=function(z){return z=N(this,z),E(z)?-1:x(z)?0:1};function D(z){for(var M=z.g.length,I=[],V=0;V<M;V++)I[V]=~z.g[V];return new s(I,~z.h).add(m)}n.abs=function(){return E(this)?D(this):this},n.add=function(z){for(var M=Math.max(this.g.length,z.g.length),I=[],V=0,b=0;b<=M;b++){var S=V+(this.i(b)&65535)+(z.i(b)&65535),T=(S>>>16)+(this.i(b)>>>16)+(z.i(b)>>>16);V=T>>>16,S&=65535,T&=65535,I[b]=T<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function N(z,M){return z.add(D(M))}n.j=function(z){if(x(this)||x(z))return p;if(E(this))return E(z)?D(this).j(D(z)):D(D(this).j(z));if(E(z))return D(this.j(D(z)));if(0>this.l(g)&&0>z.l(g))return l(this.m()*z.m());for(var M=this.g.length+z.g.length,I=[],V=0;V<2*M;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(var b=0;b<z.g.length;b++){var S=this.i(V)>>>16,T=this.i(V)&65535,te=z.i(b)>>>16,_e=z.i(b)&65535;I[2*V+2*b]+=T*_e,K(I,2*V+2*b),I[2*V+2*b+1]+=S*_e,K(I,2*V+2*b+1),I[2*V+2*b+1]+=T*te,K(I,2*V+2*b+1),I[2*V+2*b+2]+=S*te,K(I,2*V+2*b+2)}for(V=0;V<M;V++)I[V]=I[2*V+1]<<16|I[2*V];for(V=M;V<2*M;V++)I[V]=0;return new s(I,0)};function K(z,M){for(;(z[M]&65535)!=z[M];)z[M+1]+=z[M]>>>16,z[M]&=65535,M++}function j(z,M){this.g=z,this.h=M}function G(z,M){if(x(M))throw Error("division by zero");if(x(z))return new j(p,p);if(E(z))return M=G(D(z),M),new j(D(M.g),D(M.h));if(E(M))return M=G(z,D(M)),new j(D(M.g),M.h);if(30<z.g.length){if(E(z)||E(M))throw Error("slowDivide_ only works with positive integers.");for(var I=m,V=M;0>=V.l(z);)I=oe(I),V=oe(V);var b=fe(I,1),S=fe(V,1);for(V=fe(V,2),I=fe(I,2);!x(V);){var T=S.add(V);0>=T.l(z)&&(b=b.add(I),S=T),V=fe(V,1),I=fe(I,1)}return M=N(z,b.j(M)),new j(b,M)}for(b=p;0<=z.l(M);){for(I=Math.max(1,Math.floor(z.m()/M.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),S=l(I),T=S.j(M);E(T)||0<T.l(z);)I-=V,S=l(I),T=S.j(M);x(S)&&(S=m),b=b.add(S),z=N(z,T)}return new j(b,z)}n.A=function(z){return G(this,z).h},n.and=function(z){for(var M=Math.max(this.g.length,z.g.length),I=[],V=0;V<M;V++)I[V]=this.i(V)&z.i(V);return new s(I,this.h&z.h)},n.or=function(z){for(var M=Math.max(this.g.length,z.g.length),I=[],V=0;V<M;V++)I[V]=this.i(V)|z.i(V);return new s(I,this.h|z.h)},n.xor=function(z){for(var M=Math.max(this.g.length,z.g.length),I=[],V=0;V<M;V++)I[V]=this.i(V)^z.i(V);return new s(I,this.h^z.h)};function oe(z){for(var M=z.g.length+1,I=[],V=0;V<M;V++)I[V]=z.i(V)<<1|z.i(V-1)>>>31;return new s(I,z.h)}function fe(z,M){var I=M>>5;M%=32;for(var V=z.g.length-I,b=[],S=0;S<V;S++)b[S]=0<M?z.i(S+I)>>>M|z.i(S+I+1)<<32-M:z.i(S+I);return new s(b,z.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,NT=X8.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=u,Xl=X8.Integer=s}).apply(typeof Z8<"u"?Z8:typeof self<"u"?self:typeof window<"u"?window:{});var v2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jl={};var PT,Mne,Eg,kT,Jv,y2,RT,OT,LT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,C){return f==Array.prototype||f==Object.prototype||(f[_]=C.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof v2=="object"&&v2];for(var _=0;_<f.length;++_){var C=f[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=t(this);function i(f,_){if(_)e:{var C=r;f=f.split(".");for(var B=0;B<f.length-1;B++){var le=f[B];if(!(le in C))break e;C=C[le]}f=f[f.length-1],B=C[f],_=_(B),_!=B&&_!=null&&e(C,f,{configurable:!0,writable:!0,value:_})}}function o(f,_){f instanceof String&&(f+="");var C=0,B=!1,le={next:function(){if(!B&&C<f.length){var xe=C++;return{value:_(xe,f[xe]),done:!1}}return B=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}i("Array.prototype.values",function(f){return f||function(){return o(this,function(_,C){return C})}});var s=s||{},a=this||self;function c(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function l(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function u(f,_,C){return f.call.apply(f.bind,arguments)}function p(f,_,C){if(!f)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,B),f.apply(_,le)}}return function(){return f.apply(_,arguments)}}function m(f,_,C){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:p,m.apply(null,arguments)}function g(f,_){var C=Array.prototype.slice.call(arguments,1);return function(){var B=C.slice();return B.push.apply(B,arguments),f.apply(this,B)}}function x(f,_){function C(){}C.prototype=_.prototype,f.aa=_.prototype,f.prototype=new C,f.prototype.constructor=f,f.Qb=function(B,le,xe){for(var Ze=Array(arguments.length-2),Dn=2;Dn<arguments.length;Dn++)Ze[Dn-2]=arguments[Dn];return _.prototype[le].apply(B,Ze)}}function E(f){let _=f.length;if(0<_){let C=Array(_);for(let B=0;B<_;B++)C[B]=f[B];return C}return[]}function D(f,_){for(let C=1;C<arguments.length;C++){let B=arguments[C];if(c(B)){let le=f.length||0,xe=B.length||0;f.length=le+xe;for(let Ze=0;Ze<xe;Ze++)f[le+Ze]=B[Ze]}else f.push(B)}}class N{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function K(f){return/^[\s\xa0]*$/.test(f)}function j(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function G(f){return G[" "](f),f}G[" "]=function(){};var oe=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function fe(f,_,C){for(let B in f)_.call(C,f[B],B,f)}function z(f,_){for(let C in f)_.call(void 0,f[C],C,f)}function M(f){let _={};for(let C in f)_[C]=f[C];return _}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,_){let C,B;for(let le=1;le<arguments.length;le++){B=arguments[le];for(C in B)f[C]=B[C];for(let xe=0;xe<I.length;xe++)C=I[xe],Object.prototype.hasOwnProperty.call(B,C)&&(f[C]=B[C])}}function b(f){var _=1;f=f.split(":");let C=[];for(;0<_&&f.length;)C.push(f.shift()),_--;return f.length&&C.push(f.join(":")),C}function S(f){a.setTimeout(()=>{throw f},0)}function T(){var f=Ae;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class te{constructor(){this.h=this.g=null}add(_,C){let B=_e.get();B.set(_,C),this.h?this.h.next=B:this.g=B,this.h=B}}var _e=new N(()=>new Te,f=>f.reset());class Te{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let be,de=!1,Ae=new te,Be=()=>{let f=a.Promise.resolve(void 0);be=()=>{f.then(Re)}};var Re=()=>{for(var f;f=T();){try{f.h.call(f.g)}catch(C){S(C)}var _=_e;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}de=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let C=()=>{};a.addEventListener("test",C,_),a.removeEventListener("test",C,_)}catch{}return f})();function re(f,_){if(H.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var C=this.type=f.type,B=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(oe){e:{try{G(_.nodeName);var le=!0;break e}catch{}le=!1}le||(_=null)}}else C=="mouseover"?_=f.fromElement:C=="mouseout"&&(_=f.toElement);this.relatedTarget=_,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ae[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&re.aa.h.call(this)}}x(re,H);var ae={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function ye(f,_,C,B,le){this.listener=f,this.proxy=null,this.src=_,this.type=C,this.capture=!!B,this.ha=le,this.key=++Ee,this.da=this.fa=!1}function De(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ue(f){this.src=f,this.g={},this.h=0}Ue.prototype.add=function(f,_,C,B,le){var xe=f.toString();f=this.g[xe],f||(f=this.g[xe]=[],this.h++);var Ze=We(f,_,B,le);return-1<Ze?(_=f[Ze],C||(_.fa=!1)):(_=new ye(_,this.src,xe,!!B,le),_.fa=C,f.push(_)),_};function Xe(f,_){var C=_.type;if(C in f.g){var B=f.g[C],le=Array.prototype.indexOf.call(B,_,void 0),xe;(xe=0<=le)&&Array.prototype.splice.call(B,le,1),xe&&(De(_),f.g[C].length==0&&(delete f.g[C],f.h--))}}function We(f,_,C,B){for(var le=0;le<f.length;++le){var xe=f[le];if(!xe.da&&xe.listener==_&&xe.capture==!!C&&xe.ha==B)return le}return-1}var ot="closure_lm_"+(1e6*Math.random()|0),$={};function Ke(f,_,C,B,le){if(B&&B.once)return qe(f,_,C,B,le);if(Array.isArray(_)){for(var xe=0;xe<_.length;xe++)Ke(f,_[xe],C,B,le);return null}return C=Ut(C),f&&f[he]?f.K(_,C,l(B)?!!B.capture:!!B,le):kt(f,_,C,!1,B,le)}function kt(f,_,C,B,le,xe){if(!_)throw Error("Invalid event type");var Ze=l(le)?!!le.capture:!!le,Dn=vn(f);if(Dn||(f[ot]=Dn=new Ue(f)),C=Dn.add(_,C,B,Ze,xe),C.proxy)return C;if(B=Ct(),C.proxy=B,B.src=f,B.listener=C,f.addEventListener)J||(le=Ze),le===void 0&&(le=!1),f.addEventListener(_.toString(),B,le);else if(f.attachEvent)f.attachEvent(vt(_.toString()),B);else if(f.addListener&&f.removeListener)f.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ct(){function f(C){return _.call(f.src,f.listener,C)}let _=Et;return f}function qe(f,_,C,B,le){if(Array.isArray(_)){for(var xe=0;xe<_.length;xe++)qe(f,_[xe],C,B,le);return null}return C=Ut(C),f&&f[he]?f.L(_,C,l(B)?!!B.capture:!!B,le):kt(f,_,C,!0,B,le)}function At(f,_,C,B,le){if(Array.isArray(_))for(var xe=0;xe<_.length;xe++)At(f,_[xe],C,B,le);else B=l(B)?!!B.capture:!!B,C=Ut(C),f&&f[he]?(f=f.i,_=String(_).toString(),_ in f.g&&(xe=f.g[_],C=We(xe,C,B,le),-1<C&&(De(xe[C]),Array.prototype.splice.call(xe,C,1),xe.length==0&&(delete f.g[_],f.h--)))):f&&(f=vn(f))&&(_=f.g[_.toString()],f=-1,_&&(f=We(_,C,B,le)),(C=-1<f?_[f]:null)&&st(C))}function st(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[he])Xe(_.i,f);else{var C=f.type,B=f.proxy;_.removeEventListener?_.removeEventListener(C,B,f.capture):_.detachEvent?_.detachEvent(vt(C),B):_.addListener&&_.removeListener&&_.removeListener(B),(C=vn(_))?(Xe(C,f),C.h==0&&(C.src=null,_[ot]=null)):De(f)}}}function vt(f){return f in $?$[f]:$[f]="on"+f}function Et(f,_){if(f.da)f=!0;else{_=new re(_,this);var C=f.listener,B=f.ha||f.src;f.fa&&st(f),f=C.call(B,_)}return f}function vn(f){return f=f[ot],f instanceof Ue?f:null}var Qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ut(f){return typeof f=="function"?f:(f[Qt]||(f[Qt]=function(_){return f.handleEvent(_)}),f[Qt])}function Rt(){O.call(this),this.i=new Ue(this),this.M=this,this.F=null}x(Rt,O),Rt.prototype[he]=!0,Rt.prototype.removeEventListener=function(f,_,C,B){At(this,f,_,C,B)};function Ot(f,_){var C,B=f.F;if(B)for(C=[];B;B=B.F)C.push(B);if(f=f.M,B=_.type||_,typeof _=="string")_=new H(_,f);else if(_ instanceof H)_.target=_.target||f;else{var le=_;_=new H(B,f),V(_,le)}if(le=!0,C)for(var xe=C.length-1;0<=xe;xe--){var Ze=_.g=C[xe];le=gt(Ze,B,!0,_)&&le}if(Ze=_.g=f,le=gt(Ze,B,!0,_)&&le,le=gt(Ze,B,!1,_)&&le,C)for(xe=0;xe<C.length;xe++)Ze=_.g=C[xe],le=gt(Ze,B,!1,_)&&le}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var C=f.g[_],B=0;B<C.length;B++)De(C[B]);delete f.g[_],f.h--}}this.F=null},Rt.prototype.K=function(f,_,C,B){return this.i.add(String(f),_,!1,C,B)},Rt.prototype.L=function(f,_,C,B){return this.i.add(String(f),_,!0,C,B)};function gt(f,_,C,B){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var le=!0,xe=0;xe<_.length;++xe){var Ze=_[xe];if(Ze&&!Ze.da&&Ze.capture==C){var Dn=Ze.listener,Lr=Ze.ha||Ze.src;Ze.fa&&Xe(f.i,Ze),le=Dn.call(Lr,B)!==!1&&le}}return le&&!B.defaultPrevented}function Xt(f,_,C){if(typeof f=="function")C&&(f=m(f,C));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(f,_||0)}function It(f){f.g=Xt(()=>{f.g=null,f.i&&(f.i=!1,It(f))},f.l);let _=f.h;f.h=null,f.m.apply(null,_)}class kr extends O{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(f){O.call(this),this.h=f,this.g={}}x(yn,O);var sn=[];function an(f){fe(f.g,function(_,C){this.g.hasOwnProperty(C)&&st(_)},f),f.g={}}yn.prototype.N=function(){yn.aa.N.call(this),an(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=a.JSON.stringify,Nt=a.JSON.parse,Zn=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Ft(){}Ft.prototype.h=null;function Zt(f){return f.h||(f.h=f.i())}function or(){}var tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lt(){H.call(this,"d")}x(Lt,H);function Sn(){H.call(this,"c")}x(Sn,H);var Do={},xi=null;function es(){return xi=xi||new Rt}Do.La="serverreachability";function Es(f){H.call(this,Do.La,f)}x(Es,H);function Mt(f){let _=es();Ot(_,new Es(_))}Do.STAT_EVENT="statevent";function ia(f,_){H.call(this,Do.STAT_EVENT,f),this.stat=_}x(ia,H);function vr(f){let _=es();Ot(_,new ia(_,f))}Do.Ma="timingevent";function Mo(f,_){H.call(this,Do.Ma,f),this.size=_}x(Mo,H);function Fi(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},_)}function Xn(){this.g=!0}Xn.prototype.xa=function(){this.g=!1};function ui(f,_,C,B,le,xe){f.info(function(){if(f.g)if(xe)for(var Ze="",Dn=xe.split("&"),Lr=0;Lr<Dn.length;Lr++){var Wt=Dn[Lr].split("=");if(1<Wt.length){var hr=Wt[0];Wt=Wt[1];var Fr=hr.split("_");Ze=2<=Fr.length&&Fr[1]=="type"?Ze+(hr+"="+Wt+"&"):Ze+(hr+"=redacted&")}}else Ze=null;else Ze=xe;return"XMLHTTP REQ ("+B+") [attempt "+le+"]: "+_+`
`+C+`
`+Ze})}function Ci(f,_,C,B,le,xe,Ze){f.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+le+"]: "+_+`
`+C+`
`+xe+" "+Ze})}function ts(f,_,C,B){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Is(f,C)+(B?" "+B:"")})}function wc(f,_){f.info(function(){return"TIMEOUT: "+_})}Xn.prototype.info=function(){};function Is(f,_){if(!f.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(f=0;f<C.length;f++)if(Array.isArray(C[f])){var B=C[f];if(!(2>B.length)){var le=B[1];if(Array.isArray(le)&&!(1>le.length)){var xe=le[0];if(xe!="noop"&&xe!="stop"&&xe!="close")for(var Ze=1;Ze<le.length;Ze++)le[Ze]=""}}}}return Qn(C)}catch{return _}}var No={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ns={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Po;function Hi(){}x(Hi,Ft),Hi.prototype.g=function(){return new XMLHttpRequest},Hi.prototype.i=function(){return{}},Po=new Hi;function co(f,_,C,B){this.j=f,this.i=_,this.l=C,this.R=B||1,this.U=new yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ss}function Ss(){this.i=null,this.g="",this.h=!1}var bc={},xc={};function Cc(f,_,C){f.L=1,f.v=xl(rs(_)),f.m=C,f.P=!0,_l(f,null)}function _l(f,_){f.F=Date.now(),wl(f),f.A=rs(f.v);var C=f.A,B=f.R;Array.isArray(B)||(B=[String(B)]),Gt(C.i,"t",B),f.C=0,C=f.j.J,f.h=new Ss,f.g=Or(f.j,C?_:null,!f.m),0<f.O&&(f.M=new kr(m(f.Y,f,f.g),f.O)),_=f.U,C=f.g,B=f.ca;var le="readystatechange";Array.isArray(le)||(le&&(sn[0]=le.toString()),le=sn);for(var xe=0;xe<le.length;xe++){var Ze=Ke(C,le[xe],B||_.handleEvent,!1,_.h||_);if(!Ze)break;_.g[Ze.key]=Ze}_=f.H?M(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),Mt(),ui(f.i,f.u,f.A,f.l,f.R,f.m)}co.prototype.ca=function(f){f=f.target;let _=this.M;_&&is(f)==3?_.j():this.Y(f)},co.prototype.Y=function(f){try{if(f==this.g)e:{let Fr=is(this.g);var _=this.g.Ba();let Ba=this.g.Z();if(!(3>Fr)&&(Fr!=3||this.g&&(this.h.h||this.g.oa()||lf(this.g)))){this.J||Fr!=4||_==7||(_==8||0>=Ba?Mt(3):Mt(2)),lo(this);var C=this.g.Z();this.X=C;t:if(Qh(this)){var B=lf(this.g);f="";var le=B.length,xe=is(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oa(this),Oa(this);var Ze="";break t}this.h.i=new a.TextDecoder}for(_=0;_<le;_++)this.h.h=!0,f+=this.h.i.decode(B[_],{stream:!(xe&&_==le-1)});B.length=0,this.h.g+=f,this.C=0,Ze=this.h.g}else Ze=this.g.oa();if(this.o=C==200,Ci(this.i,this.u,this.A,this.l,this.R,Fr,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Dn,Lr=this.g;if((Dn=Lr.g?Lr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Dn)){var Wt=Dn;break t}}Wt=null}if(C=Wt)ts(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bl(this,C);else{this.o=!1,this.s=3,vr(12),oa(this),Oa(this);break e}}if(this.P){C=!0;let Er;for(;!this.J&&this.C<Ze.length;)if(Er=ef(this,Ze),Er==xc){Fr==4&&(this.s=4,vr(14),C=!1),ts(this.i,this.l,null,"[Incomplete Response]");break}else if(Er==bc){this.s=4,vr(15),ts(this.i,this.l,Ze,"[Invalid Chunk]"),C=!1;break}else ts(this.i,this.l,Er,null),bl(this,Er);if(Qh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fr!=4||Ze.length!=0||this.h.h||(this.s=1,vr(16),C=!1),this.o=this.o&&C,!C)ts(this.i,this.l,Ze,"[Invalid Chunked Response]"),oa(this),Oa(this);else if(0<Ze.length&&!this.W){this.W=!0;var hr=this.j;hr.g==this&&hr.ba&&!hr.M&&(hr.j.info("Great, no buffering proxy detected. Bytes received: "+Ze.length),yt(hr),hr.M=!0,vr(11))}}else ts(this.i,this.l,Ze,null),bl(this,Ze);Fr==4&&oa(this),this.o&&!this.J&&(Fr==4?_n(this.j,this):(this.o=!1,wl(this)))}else Va(this.g),C==400&&0<Ze.indexOf("Unknown SID")?(this.s=3,vr(12)):(this.s=0,vr(13)),oa(this),Oa(this)}}}catch{}finally{}};function Qh(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ef(f,_){var C=f.C,B=_.indexOf(`
`,C);return B==-1?xc:(C=Number(_.substring(C,B)),isNaN(C)?bc:(B+=1,B+C>_.length?xc:(_=_.slice(B,B+C),f.C=B+C,_)))}co.prototype.cancel=function(){this.J=!0,oa(this)};function wl(f){f.S=Date.now()+f.I,tf(f,f.I)}function tf(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Fi(m(f.ba,f),_)}function lo(f){f.B&&(a.clearTimeout(f.B),f.B=null)}co.prototype.ba=function(){this.B=null;let f=Date.now();0<=f-this.S?(wc(this.i,this.A),this.L!=2&&(Mt(),vr(17)),oa(this),this.s=2,Oa(this)):tf(this,this.S-f)};function Oa(f){f.j.G==0||f.J||_n(f.j,f)}function oa(f){lo(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,an(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function bl(f,_){try{var C=f.j;if(C.G!=0&&(C.g==f||Ec(C.h,f))){if(!f.K&&Ec(C.h,f)&&C.G==3){try{var B=C.Da.g.parse(_)}catch{B=null}if(Array.isArray(B)&&B.length==3){var le=B;if(le[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<f.F)Kt(C),Al(C);else break e;ft(C),vr(18)}}else C.za=le[1],0<C.za-C.T&&37500>le[2]&&C.F&&C.v==0&&!C.C&&(C.C=Fi(m(C.Za,C),6e3));if(1>=As(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else er(C,11)}else if((f.K||C.g==f)&&Kt(C),!K(_))for(le=C.Da.g.parse(_),_=0;_<le.length;_++){let Wt=le[_];if(C.T=Wt[0],Wt=Wt[1],C.G==2)if(Wt[0]=="c"){C.K=Wt[1],C.ia=Wt[2];let hr=Wt[3];hr!=null&&(C.la=hr,C.j.info("VER="+C.la));let Fr=Wt[4];Fr!=null&&(C.Aa=Fr,C.j.info("SVER="+C.Aa));let Ba=Wt[5];Ba!=null&&typeof Ba=="number"&&0<Ba&&(B=1.5*Ba,C.L=B,C.j.info("backChannelRequestTimeoutMs_="+B)),B=C;let Er=f.g;if(Er){let da=Er.g?Er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var xe=B.h;xe.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(of(xe,xe.h),xe.h=null))}if(B.D){let Tl=Er.g?Er.g.getResponseHeader("X-HTTP-Session-Id"):null;Tl&&(B.ya=Tl,Vn(B.I,B.D,Tl))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-f.F,C.j.info("Handshake RTT: "+C.R+"ms")),B=C;var Ze=f;if(B.qa=zr(B,B.J?B.ia:null,B.W),Ze.K){Rr(B.h,Ze);var Dn=Ze,Lr=B.L;Lr&&(Dn.I=Lr),Dn.B&&(lo(Dn),wl(Dn)),B.g=Ze}else ze(B);0<C.i.length&&P(C)}else Wt[0]!="stop"&&Wt[0]!="close"||er(C,7);else C.G==3&&(Wt[0]=="stop"||Wt[0]=="close"?Wt[0]=="stop"?er(C,7):ja(C):Wt[0]!="noop"&&C.l&&C.l.ta(Wt),C.v=0)}}Mt(4)}catch{}}var Zh=class{constructor(f,_){this.g=f,this.map=_}};function nf(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rf(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function As(f){return f.h?1:f.g?f.g.size:0}function Ec(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function of(f,_){f.g?f.g.add(_):f.h=_}function Rr(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}nf.prototype.cancel=function(){if(this.i=sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function sf(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(let C of f.g.values())_=_.concat(C.D);return _}return E(f.i)}function sa(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var _=[],C=f.length,B=0;B<C;B++)_.push(f[B]);return _}_=[],C=0;for(B in f)_[C++]=f[B];return _}function gu(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var _=[];f=f.length;for(var C=0;C<f;C++)_.push(C);return _}_=[],C=0;for(let B in f)_[C++]=B;return _}}}function af(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var C=gu(f),B=sa(f),le=B.length,xe=0;xe<le;xe++)_.call(void 0,B[xe],C&&C[xe],f)}var ko=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kr(f,_){if(f){f=f.split("&");for(var C=0;C<f.length;C++){var B=f[C].indexOf("="),le=null;if(0<=B){var xe=f[C].substring(0,B);le=f[C].substring(B+1)}else xe=f[C];_(xe,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Gi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Gi){this.h=f.h,mu(this,f.j),this.o=f.o,this.g=f.g,vu(this,f.s),this.l=f.l;var _=f.i,C=new Cl;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),Ts(this,C),this.m=f.m}else f&&(_=String(f).match(ko))?(this.h=!1,mu(this,_[1]||"",!0),this.o=aa(_[2]||""),this.g=aa(_[3]||"",!0),vu(this,_[4]),this.l=aa(_[5]||"",!0),Ts(this,_[6]||"",!0),this.m=aa(_[7]||"")):(this.h=!1,this.i=new Cl(null,this.h))}Gi.prototype.toString=function(){var f=[],_=this.j;_&&f.push(Ds(_,Xh,!0),":");var C=this.g;return(C||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Ds(_,Xh,!0),"@"),f.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&f.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&f.push("/"),f.push(Ds(C,C.charAt(0)=="/"?cf:r0,!0))),(C=this.i.toString())&&f.push("?",C),(C=this.m)&&f.push("#",Ds(C,Ms)),f.join("")};function rs(f){return new Gi(f)}function mu(f,_,C){f.j=C?aa(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function vu(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function Ts(f,_,C){_ instanceof Cl?(f.i=_,i0(f.i,f.h)):(C||(_=Ds(_,Jh)),f.i=new Cl(_,f.h))}function Vn(f,_,C){f.i.set(_,C)}function xl(f){return Vn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function aa(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ds(f,_,C){return typeof f=="string"?(f=encodeURI(f).replace(_,n0),C&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function n0(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Xh=/[#\/\?@]/g,r0=/[#\?:]/g,cf=/[#\?]/g,Jh=/[#\?@]/g,Ms=/#/g;function Cl(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function uo(f){f.g||(f.g=new Map,f.h=0,f.i&&Kr(f.i,function(_,C){f.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}n=Cl.prototype,n.add=function(f,_){uo(this),this.i=null,f=Ic(this,f);var C=this.g.get(f);return C||this.g.set(f,C=[]),C.push(_),this.h+=1,this};function yu(f,_){uo(f),_=Ic(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function ep(f,_){return uo(f),_=Ic(f,_),f.g.has(_)}n.forEach=function(f,_){uo(this),this.g.forEach(function(C,B){C.forEach(function(le){f.call(_,le,B,this)},this)},this)},n.na=function(){uo(this);let f=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let B=0;B<_.length;B++){let le=f[B];for(let xe=0;xe<le.length;xe++)C.push(_[B])}return C},n.V=function(f){uo(this);let _=[];if(typeof f=="string")ep(this,f)&&(_=_.concat(this.g.get(Ic(this,f))));else{f=Array.from(this.g.values());for(let C=0;C<f.length;C++)_=_.concat(f[C])}return _},n.set=function(f,_){return uo(this),this.i=null,f=Ic(this,f),ep(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function Gt(f,_,C){yu(f,_),0<C.length&&(f.i=null,f.g.set(Ic(f,_),E(C)),f.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var B=_[C];let xe=encodeURIComponent(String(B)),Ze=this.V(B);for(B=0;B<Ze.length;B++){var le=xe;Ze[B]!==""&&(le+="="+encodeURIComponent(String(Ze[B]))),f.push(le)}}return this.i=f.join("&")};function Ic(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function i0(f,_){_&&!f.j&&(uo(f),f.i=null,f.g.forEach(function(C,B){var le=B.toLowerCase();B!=le&&(yu(this,B),Gt(this,le,C))},f)),f.j=_}function o0(f,_){let C=new Xn;if(a.Image){let B=new Image;B.onload=g(Vi,C,"TestLoadImage: loaded",!0,_,B),B.onerror=g(Vi,C,"TestLoadImage: error",!1,_,B),B.onabort=g(Vi,C,"TestLoadImage: abort",!1,_,B),B.ontimeout=g(Vi,C,"TestLoadImage: timeout",!1,_,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=f}else _(!1)}function La(f,_){let C=new Xn,B=new AbortController,le=setTimeout(()=>{B.abort(),Vi(C,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:B.signal}).then(xe=>{clearTimeout(le),xe.ok?Vi(C,"TestPingServer: ok",!0,_):Vi(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(le),Vi(C,"TestPingServer: error",!1,_)})}function Vi(f,_,C,B,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),B(C)}catch{}}function s0(){this.g=new Zn}function a0(f,_,C){let B=C||"";try{af(f,function(le,xe){let Ze=le;l(le)&&(Ze=Qn(le)),_.push(B+xe+"="+encodeURIComponent(Ze))})}catch(le){throw _.push(B+"type="+encodeURIComponent("_badmap")),le}}function ca(f){this.l=f.Ub||null,this.j=f.eb||!1}x(ca,Ft),ca.prototype.g=function(){return new Sc(this.l,this.j)},ca.prototype.i=(function(f){return function(){return f}})({});function Sc(f,_){Rt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Sc,Rt),n=Sc.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,Ro(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,El(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ro(this)),this.g&&(this.readyState=3,Ro(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ac(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ac(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?El(this):Ro(this),this.readyState==3&&Ac(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,El(this))},n.Qa=function(f){this.g&&(this.response=f,El(this))},n.ga=function(){this.g&&El(this)};function El(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Ro(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,f.push(C[0]+": "+C[1]),C=_.next();return f.join(`\r
`)};function Ro(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function tp(f){let _="";return fe(f,function(C,B){_+=B,_+=":",_+=C,_+=`\r
`}),_}function Il(f,_,C){e:{for(B in C){var B=!1;break e}B=!0}B||(C=tp(C),typeof f=="string"?C!=null&&encodeURIComponent(String(C)):Vn(f,_,C))}function Jn(f){Rt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Jn,Rt);var np=/^https?$/i,Fa=["POST","PUT"];n=Jn.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,C,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Po.g(),this.v=this.o?Zt(this.o):Zt(Po),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(xe){_u(this,xe);return}if(f=C||"",C=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var le in B)C.set(le,B[le]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(let xe of B.keys())C.set(xe,B.get(xe));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(C.keys()).find(xe=>xe.toLowerCase()=="content-type"),le=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Fa,_,void 0))||B||le||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[xe,Ze]of C)this.g.setRequestHeader(xe,Ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bu(this),this.u=!0,this.g.send(f),this.u=!1}catch(xe){_u(this,xe)}};function _u(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,Sl(f),la(f)}function Sl(f){f.A||(f.A=!0,Ot(f,"complete"),Ot(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ot(this,"complete"),Ot(this,"abort"),la(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),Jn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wu(this):this.bb())},n.bb=function(){wu(this)};function wu(f){if(f.h&&typeof s<"u"&&(!f.v[1]||is(f)!=4||f.Z()!=2)){if(f.u&&is(f)==4)Xt(f.Ea,0,f);else if(Ot(f,"readystatechange"),is(f)==4){f.h=!1;try{let Ze=f.Z();e:switch(Ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var B;if(B=Ze===0){var le=String(f.D).match(ko)[1]||null;!le&&a.self&&a.self.location&&(le=a.self.location.protocol.slice(0,-1)),B=!np.test(le?le.toLowerCase():"")}C=B}if(C)Ot(f,"complete"),Ot(f,"success");else{f.m=6;try{var xe=2<is(f)?f.g.statusText:""}catch{xe=""}f.l=xe+" ["+f.Z()+"]",Sl(f)}}finally{la(f)}}}}function la(f,_){if(f.g){bu(f);let C=f.g,B=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Ot(f,"ready");try{C.onreadystatechange=B}catch{}}}function bu(f){f.I&&(a.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function is(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<is(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Nt(_)}};function lf(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Va(f){let _={};f=(f.g&&2<=is(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<f.length;B++){if(K(f[B]))continue;var C=b(f[B]);let le=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();let xe=_[le]||[];_[le]=xe,xe.push(C)}z(_,function(B){return B.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oo(f,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[f]||_}function uf(f){this.Aa=0,this.i=[],this.j=new Xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oo("baseRetryDelayMs",5e3,f),this.cb=Oo("retryDelaySeedMs",1e4,f),this.Wa=Oo("forwardChannelMaxRetries",2,f),this.wa=Oo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new nf(f&&f.concurrentRequestLimit),this.Da=new s0,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=uf.prototype,n.la=8,n.G=1,n.connect=function(f,_,C,B){vr(0),this.W=f,this.H=_||{},C&&B!==void 0&&(this.H.OSID=C,this.H.OAID=B),this.F=this.X,this.I=zr(this,null,this.W),P(this)};function ja(f){if(v(f),f.G==3){var _=f.U++,C=rs(f.I);if(Vn(C,"SID",f.K),Vn(C,"RID",_),Vn(C,"TYPE","terminate"),ue(f,C),_=new co(f,f.j,_),_.L=2,_.v=xl(rs(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&a.Image&&(new Image().src=_.v,C=!0),C||(_.g=Or(_.j,null),_.g.ea(_.v)),_.F=Date.now(),wl(_)}qn(f)}function Al(f){f.g&&(yt(f),f.g.cancel(),f.g=null)}function v(f){Al(f),f.u&&(a.clearTimeout(f.u),f.u=null),Kt(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function P(f){if(!rf(f.h)&&!f.s){f.s=!0;var _=f.Ga;be||Be(),de||(be(),de=!0),Ae.add(_,f),f.B=0}}function Y(f,_){return As(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Fi(m(f.Ga,f,_),fr(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;let le=new co(this,this.j,f),xe=this.o;if(this.S&&(xe?(xe=M(xe),V(xe,this.S)):xe=this.S),this.m!==null||this.O||(le.H=xe,xe=null),this.P)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var B=this.i[C];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(_+=B,4096<_){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=Pe(this,le,_),C=rs(this.I),Vn(C,"RID",f),Vn(C,"CVER",22),this.D&&Vn(C,"X-HTTP-Session-Id",this.D),ue(this,C),xe&&(this.O?_="headers="+encodeURIComponent(String(tp(xe)))+"&"+_:this.m&&Il(C,this.m,xe)),of(this.h,le),this.Ua&&Vn(C,"TYPE","init"),this.P?(Vn(C,"$req",_),Vn(C,"SID","null"),le.T=!0,Cc(le,C,null)):Cc(le,C,_),this.G=2}}else this.G==3&&(f?ne(this,f):this.i.length==0||rf(this.h)||ne(this))};function ne(f,_){var C;_?C=_.l:C=f.U++;let B=rs(f.I);Vn(B,"SID",f.K),Vn(B,"RID",C),Vn(B,"AID",f.T),ue(f,B),f.m&&f.o&&Il(B,f.m,f.o),C=new co(f,f.j,C,f.B+1),f.m===null&&(C.H=f.o),_&&(f.i=_.D.concat(f.i)),_=Pe(f,C,1e3),C.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),of(f.h,C),Cc(C,B,_)}function ue(f,_){f.H&&fe(f.H,function(C,B){Vn(_,B,C)}),f.l&&af({},function(C,B){Vn(_,B,C)})}function Pe(f,_,C){C=Math.min(f.i.length,C);var B=f.l?m(f.l.Na,f.l,f):null;e:{var le=f.i;let xe=-1;for(;;){let Ze=["count="+C];xe==-1?0<C?(xe=le[0].g,Ze.push("ofs="+xe)):xe=0:Ze.push("ofs="+xe);let Dn=!0;for(let Lr=0;Lr<C;Lr++){let Wt=le[Lr].g,hr=le[Lr].map;if(Wt-=xe,0>Wt)xe=Math.max(0,le[Lr].g-100),Dn=!1;else try{a0(hr,Ze,"req"+Wt+"_")}catch{B&&B(hr)}}if(Dn){B=Ze.join("&");break e}}}return f=f.i.splice(0,C),_.D=f,B}function ze(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;be||Be(),de||(be(),de=!0),Ae.add(_,f),f.v=0}}function ft(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Fi(m(f.Fa,f),fr(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,qt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Fi(m(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vr(10),Al(this),qt(this))};function yt(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function qt(f){f.g=new co(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=rs(f.qa);Vn(_,"RID","rpc"),Vn(_,"SID",f.K),Vn(_,"AID",f.T),Vn(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&Vn(_,"TO",f.ja),Vn(_,"TYPE","xmlhttp"),ue(f,_),f.m&&f.o&&Il(_,f.m,f.o),f.L&&(f.g.I=f.L);var C=f.g;f=f.ia,C.L=1,C.v=xl(rs(_)),C.m=null,C.P=!0,_l(C,f)}n.Za=function(){this.C!=null&&(this.C=null,Al(this),ft(this),vr(19))};function Kt(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function _n(f,_){var C=null;if(f.g==_){Kt(f),yt(f),f.g=null;var B=2}else if(Ec(f.h,_))C=_.D,Rr(f.h,_),B=1;else return;if(f.G!=0){if(_.o)if(B==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var le=f.B;B=es(),Ot(B,new Mo(B,C)),P(f)}else ze(f);else if(le=_.s,le==3||le==0&&0<_.X||!(B==1&&Y(f,_)||B==2&&ft(f)))switch(C&&0<C.length&&(_=f.h,_.i=_.i.concat(C)),le){case 1:er(f,5);break;case 4:er(f,10);break;case 3:er(f,6);break;default:er(f,2)}}}function fr(f,_){let C=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(C*=2),C*_}function er(f,_){if(f.j.info("Error code "+_),_==2){var C=m(f.fb,f),B=f.Xa;let le=!B;B=new Gi(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mu(B,"https"),xl(B),le?o0(B.toString(),C):La(B.toString(),C)}else vr(2);f.G=0,f.l&&f.l.sa(_),qn(f),v(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),vr(2)):(this.j.info("Failed to ping google.com"),vr(1))};function qn(f){if(f.G=0,f.ka=[],f.l){let _=sf(f.h);(_.length!=0||f.i.length!=0)&&(D(f.ka,_),D(f.ka,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.ra()}}function zr(f,_,C){var B=C instanceof Gi?rs(C):new Gi(C);if(B.g!="")_&&(B.g=_+"."+B.g),vu(B,B.s);else{var le=a.location;B=le.protocol,_=_?_+"."+le.hostname:le.hostname,le=+le.port;var xe=new Gi(null);B&&mu(xe,B),_&&(xe.g=_),le&&vu(xe,le),C&&(xe.l=C),B=xe}return C=f.D,_=f.ya,C&&_&&Vn(B,C,_),Vn(B,"VER",f.la),ue(f,B),B}function Or(f,_,C){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new Jn(new ca({eb:C})):new Jn(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function di(){}n=di.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function os(){}os.prototype.g=function(f,_){return new yr(f,_)};function yr(f,_){Rt.call(this),this.g=new uf(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!K(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!K(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Ns(this)}x(yr,Rt),yr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){ja(this.g)},yr.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var C={};C.__data__=f,f=C}else this.u&&(C={},C.__data__=Qn(f),f=C);_.i.push(new Zh(_.Ya++,f)),_.G==3&&P(_)},yr.prototype.N=function(){this.g.l=null,delete this.j,ja(this.g),delete this.g,yr.aa.N.call(this)};function ua(f){Lt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(let C in _){f=C;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}x(ua,Lt);function xu(){Sn.call(this),this.status=1}x(xu,Sn);function Ns(f){this.g=f}x(Ns,di),Ns.prototype.ua=function(){Ot(this.g,"a")},Ns.prototype.ta=function(f){Ot(this.g,new ua(f))},Ns.prototype.sa=function(f){Ot(this.g,new xu)},Ns.prototype.ra=function(){Ot(this.g,"b")},os.prototype.createWebChannel=os.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,LT=Jl.createWebChannelTransport=function(){return new os},OT=Jl.getStatEventTarget=function(){return es()},RT=Jl.Event=Do,y2=Jl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},No.NO_ERROR=0,No.TIMEOUT=8,No.HTTP_ERROR=6,Jv=Jl.ErrorCode=No,ns.COMPLETE="complete",kT=Jl.EventType=ns,or.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Eg=Jl.WebChannel=or,Mne=Jl.FetchXmlHttpFactory=ca,Jn.prototype.listenOnce=Jn.prototype.L,Jn.prototype.getLastError=Jn.prototype.Ka,Jn.prototype.getLastErrorCode=Jn.prototype.Ba,Jn.prototype.getStatus=Jn.prototype.Z,Jn.prototype.getResponseJson=Jn.prototype.Oa,Jn.prototype.getResponseText=Jn.prototype.oa,Jn.prototype.send=Jn.prototype.ea,Jn.prototype.setWithCredentials=Jn.prototype.Ha,PT=Jl.XhrIo=Jn}).apply(typeof v2<"u"?v2:typeof self<"u"?self:typeof window<"u"?window:{});var J8="@firebase/firestore",eV="4.8.0";var vi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");var lm="11.10.0";var xd=new up("@firebase/firestore");function Ng(){return xd.logLevel}function YM(n){xd.setLogLevel(n)}function He(n,...e){if(xd.logLevel<=Nc.DEBUG){let t=e.map(QM);xd.debug(`Firestore (${lm}): ${n}`,...t)}}function ri(n,...e){if(xd.logLevel<=Nc.ERROR){let t=e.map(QM);xd.error(`Firestore (${lm}): ${n}`,...t)}}function ws(n,...e){if(xd.logLevel<=Nc.WARN){let t=e.map(QM);xd.warn(`Firestore (${lm}): ${n}`,...t)}}function QM(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ct(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,g7(n,r,t)}function g7(n,e,t){let r=`FIRESTORE (${lm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ri(r),new Error(r)}function _t(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||g7(e,i,r)}function m7(n,e){n||ct(57014,e)}function it(n,e){return n}var Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},je=class extends Lu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Oi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var P2=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$T=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vi.UNAUTHENTICATED))}shutdown(){}},HT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},GT=class{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_t(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Oi,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>ee(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Oi)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string",31837,{l:r}),new P2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new vi(e)}},WT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},KT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new WT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},k2=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},YT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,u1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_t(this.o===void 0,3512);let r=o=>{o.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,He("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new k2(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new k2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Nne(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function ZM(){return new TextEncoder}var py=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Nne(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Ht(n,e){return n<e?-1:n>e?1:0}function QT(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ht(r,i);{let o=ZM(),s=Pne(o.encode(tV(n,t)),o.encode(tV(e,t)));return s!==0?s:Ht(r,i)}}t+=r>65535?2:1}return Ht(n.length,e.length)}function tV(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Pne(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ht(n[t],e[t]);return Ht(n.length,e.length)}function Bg(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function v7(n){return n+"\0"}var nV="__name__",R2=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ct(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ct(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ht(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):QT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xl.fromString(e.substring(4,e.length-2))}},En=class n extends R2{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new je(Ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},kne=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ii=class n extends R2{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return kne.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nV}static keyField(){return new n([nV])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new je(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new je(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new je(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new je(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var tt=class n{constructor(e){this.path=e}static fromPath(e){return new n(En.fromString(e))}static fromName(e){return new n(En.fromString(e).popFirst(5))}static empty(){return new n(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&En.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new En(e.slice()))}};function XM(n,e,t){if(!t)throw new je(Ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JM(n,e,t,r){if(e===!0&&r===!0)throw new je(Ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rV(n){if(!tt.isDocumentKey(n))throw new je(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iV(n){if(tt.isDocumentKey(n))throw new je(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function y7(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Rx(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ct(12329,{type:typeof n})}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Rx(n);throw new je(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _7(n,e){if(e<=0)throw new je(Ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function yi(n,e){let t={typeString:n};return e&&(t.value=e),t}function jy(n,e){if(!y7(n))throw new je(Ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new je(Ce.INVALID_ARGUMENT,t);return!0}var oV=-62135596800,sV=1e6,gr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*sV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<oV)throw new je(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sV}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jy(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-oV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};gr._jsonSchemaVersion="firestore/timestamp/1.0",gr._jsonSchema={type:yi("string",gr._jsonSchemaVersion),seconds:yi("number"),nanoseconds:yi("number")};var Dt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new gr(0,0))}static max(){return new n(new gr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ug=-1,zg=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function ZT(n){return n.fields.find(e=>e.kind===2)}function th(n){return n.fields.filter(e=>e.kind!==2)}zg.UNKNOWN_ID=-1;var Fg=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var gy=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Na.min())}};function w7(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(r===1e9?new gr(t+1,0):new gr(t,r));return new Na(i,tt.empty(),e)}function b7(n){return new Na(n.readTime,n.key,Ug)}var Na=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Dt.min(),tt.empty(),Ug)}static max(){return new n(Dt.max(),tt.empty(),Ug)}};function eN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=tt.comparator(n.documentKey,e.documentKey),t!==0?t:Ht(n.largestBatchId,e.largestBatchId))}var x7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",O2=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function kd(n){return ee(this,null,function*(){if(n.code!==Ce.FAILED_PRECONDITION||n.message!==x7)throw n;He("LocalStore","Unexpectedly lost primary lease")})}var we=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Ys="SimpleDb",L2=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new lh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Oi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new lh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=tN(r.target.error);this.S.reject(new lh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(He(Ys,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new JT(t)}},Cd=class n{static delete(e){return He(Ys,"Removing database:",e),rh(VE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!ap())return!1;if(n.F())return!0;let e=b0(),t=n.M(e),r=0<t&&t<10,i=C7(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(b0())===12.2&&ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return ee(this,null,function*(){return this.db||(He(Ys,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new lh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new je(Ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new je(Ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new lh(e,s))},i.onupgradeneeded=o=>{He(Ys,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{He(Ys,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(ws('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,i){return ee(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=L2.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),we.reject(l))).toPromise();return c.catch(()=>{}),yield a.D,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(He(Ys,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function C7(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var XT=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return rh(this.$.delete())}},lh=class extends je{constructor(e,t){super(Ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Rd(n){return n.name==="IndexedDbTransactionError"}var JT=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(He(Ys,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(He(Ys,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rh(r)}add(e){return He(Ys,"ADD",this.store.name,e,e),rh(this.store.add(e))}get(e){return rh(this.store.get(e)).next(t=>(t===void 0&&(t=null),He(Ys,"GET",this.store.name,e,t),t))}delete(e){return He(Ys,"DELETE",this.store.name,e),rh(this.store.delete(e))}count(){return He(Ys,"COUNT",this.store.name),rh(this.store.count())}j(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new we((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,c)=>{s.push(c)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new we((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,t){He(Ys,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Z=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}ee(e){let t=this.cursor({});return new we((r,i)=>{t.onerror=o=>{let s=tN(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new we((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new XT(a),l=t(a.primaryKey,a.value,c);if(l instanceof we){let u=l.catch(p=>(c.done(),we.reject(p)));r.push(u)}c.isDone?i():c.W===null?a.continue():a.continue(c.W)}}).next(()=>we.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function rh(n){return new we((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=tN(r.target.error);t(i)}})}var aV=!1;function tN(n){let e=Cd.M(b0());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aV||(aV=!0,setTimeout(()=>{throw r},0)),r}}return n}var sy="IndexBackfiller",eD=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){He(sy,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>ee(this,null,function*(){this.task=null;try{let t=yield this.te.re();He(sy,`Documents written: ${t}`)}catch(t){Rd(t)?He(sy,"Ignoring IndexedDB error during index backfill: ",t):yield kd(t)}yield this.ne(6e4)}))}},tD=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return ee(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let r=new Set,i=t,o=!0;return we.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return He(sy,`Processing collection: ${s}`),this.se(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(a=>(He(sy,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}oe(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=b7(o);eN(s,r)>0&&(r=s)}),new Na(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Qs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),_d=-1;function By(n){return n==null}function my(n){return n===0&&1/n==-1/0}function E7(n){return typeof n=="number"&&Number.isInteger(n)&&!my(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var F2="";function Co(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cV(e)),e=Rne(n.get(t),e);return cV(e)}function Rne(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case F2:t+="";break;default:t+=o}}return t}function cV(n){return n+F2+""}function el(n){let e=n.length;if(_t(e>=2,64408,{path:n}),e===2)return _t(n.charAt(0)===F2&&n.charAt(1)==="",56145,{path:n}),En.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(F2,o);switch((s<0||s>t)&&ct(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:ct(61167,{path:n})}o=s+2}return new En(r)}var nh="remoteDocuments",Uy="owner",Ig="owner",vy="mutationQueues",One="userId",lc="mutations",lV="batchId",ah="userMutationsIndex",uV=["userId","batchId"];function E2(n,e){return[n,Co(e)]}function I7(n,e,t){return[n,Co(e),t]}var Lne={},qg="documentMutations",V2="remoteDocumentsV14",Fne=["prefixPath","collectionGroup","readTime","documentId"],I2="documentKeyIndex",Vne=["prefixPath","collectionGroup","documentId"],S7="collectionGroupIndex",jne=["collectionGroup","readTime","prefixPath","documentId"],yy="remoteDocumentGlobal",nD="remoteDocumentGlobalKey",$g="targets",A7="queryTargetsIndex",Bne=["canonicalId","targetId"],Hg="targetDocuments",Une=["targetId","path"],nN="documentTargetsIndex",zne=["path","targetId"],j2="targetGlobalKey",uh="targetGlobal",_y="collectionParents",qne=["collectionId","parent"],Gg="clientMetadata",$ne="clientId",Ox="bundles",Hne="bundleId",Lx="namedQueries",Gne="name",rN="indexConfiguration",Wne="indexId",rD="collectionGroupIndex",Kne="collectionGroup",ay="indexState",Yne=["indexId","uid"],T7="sequenceNumberIndex",Qne=["uid","sequenceNumber"],cy="indexEntries",Zne=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],D7="documentKeyIndex",Xne=["indexId","uid","orderedDocumentKey"],Fx="documentOverlays",Jne=["userId","collectionPath","documentId"],iD="collectionPathOverlayIndex",ere=["userId","collectionPath","largestBatchId"],M7="collectionGroupOverlayIndex",tre=["userId","collectionGroup","largestBatchId"],iN="globals",nre="name",N7=[vy,lc,qg,nh,$g,Uy,uh,Hg,Gg,yy,_y,Ox,Lx],rre=[...N7,Fx],P7=[vy,lc,qg,V2,$g,Uy,uh,Hg,Gg,yy,_y,Ox,Lx,Fx],k7=P7,oN=[...k7,rN,ay,cy],ire=oN,R7=[...oN,iN],ore=R7;var wy=class extends O2{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function Li(n,e){let t=it(n);return Cd.N(t.ce,e)}function dV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Od(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function O7(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Cr=class n{constructor(e,t){this.comparator=e,this.root=t||nl.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nl.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lg(this.root,e,this.comparator,!0)}},Lg=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nl=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ct(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ct(27949);return e+(this.isRed()?0:1)}};nl.EMPTY=null,nl.RED=!0,nl.BLACK=!1;nl.EMPTY=new class{constructor(){this.size=0}get key(){throw ct(57766)}get value(){throw ct(16141)}get color(){throw ct(16727)}get left(){throw ct(29726)}get right(){throw ct(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new nl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ir=class n{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new B2(this.data.getIterator())}getIteratorFrom(e){return new B2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},B2=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Sg(n){return n.hasNext()?n.getNext():void 0}var Zs=class n{constructor(e){this.fields=e,e.sort(ii.comparator)}static empty(){return new n([])}unionWith(e){let t=new ir(ii.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bg(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var U2=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function L7(){return typeof atob<"u"}var si=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new U2("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};si.EMPTY_BYTE_STRING=new si("");var sre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nu(n){if(_t(!!n,39018),typeof n=="string"){let e=0,t=sre.exec(n);if(_t(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mr(n.seconds),nanos:Mr(n.nanos)}}function Mr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ru(n){return typeof n=="string"?si.fromBase64String(n):si.fromUint8Array(n)}var F7="server_timestamp",V7="__type__",j7="__previous_value__",B7="__local_write_time__";function Vx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[V7])===null||t===void 0?void 0:t.stringValue)===F7}function jx(n){let e=n.mapValue.fields[j7];return Vx(e)?jx(e):e}function by(n){let e=nu(n.mapValue.fields[B7].timestampValue);return new gr(e.seconds,e.nanos)}var oD=class{constructor(e,t,r,i,o,s,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},z2="(default)",Ed=class n{constructor(e,t){this.projectId=e,this.database=t||z2}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===z2}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var sN="__type__",U7="__max__",vd={mapValue:{fields:{__type__:{stringValue:U7}}}},aN="__vector__",Wg="value",S2={nullValue:"NULL_VALUE"};function Id(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vx(n)?4:z7(n)?9007199254740991:Bx(n)?10:11:ct(28295,{value:n})}function sl(n,e){if(n===e)return!0;let t=Id(n);if(t!==Id(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return by(n).isEqual(by(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=nu(i.timestampValue),a=nu(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return ru(i.bytesValue).isEqual(ru(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Mr(i.geoPointValue.latitude)===Mr(o.geoPointValue.latitude)&&Mr(i.geoPointValue.longitude)===Mr(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Mr(i.integerValue)===Mr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Mr(i.doubleValue),a=Mr(o.doubleValue);return s===a?my(s)===my(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Bg(n.arrayValue.values||[],e.arrayValue.values||[],sl);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(dV(s)!==dV(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!sl(s[c],a[c])))return!1;return!0})(n,e);default:return ct(52216,{left:n})}}function xy(n,e){return(n.values||[]).find(t=>sl(t,e))!==void 0}function Sd(n,e){if(n===e)return 0;let t=Id(n),r=Id(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Mr(o.integerValue||o.doubleValue),c=Mr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return fV(n.timestampValue,e.timestampValue);case 4:return fV(by(n),by(e));case 5:return QT(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=ru(o),c=ru(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=Ht(a[l],c[l]);if(u!==0)return u}return Ht(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=Ht(Mr(o.latitude),Mr(s.latitude));return a!==0?a:Ht(Mr(o.longitude),Mr(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hV(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,l,u;let p=o.fields||{},m=s.fields||{},g=(a=p[Wg])===null||a===void 0?void 0:a.arrayValue,x=(c=m[Wg])===null||c===void 0?void 0:c.arrayValue,E=Ht(((l=g?.values)===null||l===void 0?void 0:l.length)||0,((u=x?.values)===null||u===void 0?void 0:u.length)||0);return E!==0?E:hV(g,x)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===vd.mapValue&&s===vd.mapValue)return 0;if(o===vd.mapValue)return 1;if(s===vd.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let p=0;p<c.length&&p<u.length;++p){let m=QT(c[p],u[p]);if(m!==0)return m;let g=Sd(a[c[p]],l[u[p]]);if(g!==0)return g}return Ht(c.length,u.length)})(n.mapValue,e.mapValue);default:throw ct(23264,{le:t})}}function fV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ht(n,e);let t=nu(n),r=nu(e),i=Ht(t.seconds,r.seconds);return i!==0?i:Ht(t.nanos,r.nanos)}function hV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Sd(t[i],r[i]);if(o)return o}return Ht(t.length,r.length)}function Kg(n){return sD(n)}function sD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=nu(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ru(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return tt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=sD(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${sD(t.fields[s])}`;return i+"}"})(n.mapValue):ct(61005,{value:n})}function A2(n){switch(Id(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=jx(n);return e?16+A2(e):16;case 5:return 2*n.stringValue.length;case 6:return ru(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+A2(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Od(r.fields,(o,s)=>{i+=o.length+A2(s)}),i})(n.mapValue);default:throw ct(13486,{value:n})}}function dh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function aD(n){return!!n&&"integerValue"in n}function Cy(n){return!!n&&"arrayValue"in n}function pV(n){return!!n&&"nullValue"in n}function gV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function T2(n){return!!n&&"mapValue"in n}function Bx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sN])===null||t===void 0?void 0:t.stringValue)===aN}function ly(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Od(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ly(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ly(n.arrayValue.values[t]);return e}return Object.assign({},n)}function z7(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===U7}var q7={mapValue:{fields:{[sN]:{stringValue:aN},[Wg]:{arrayValue:{}}}}};function are(n){return"nullValue"in n?S2:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dh(Ed.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Bx(n)?q7:{mapValue:{}}:ct(35942,{value:n})}function cre(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dh(Ed.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?q7:"mapValue"in n?Bx(n)?{mapValue:{}}:vd:ct(61959,{value:n})}function mV(n,e){let t=Sd(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vV(n,e){let t=Sd(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var xo=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!T2(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ly(t)}setAll(e){let t=ii.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ly(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());T2(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];T2(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Od(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ly(this.value))}};function $7(n){let e=[];return Od(n.fields,(t,r)=>{let i=new ii([t]);if(T2(r)){let o=$7(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Zs(e)}var _i=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Dt.min(),Dt.min(),Dt.min(),xo.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Dt.min(),Dt.min(),xo.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Dt.min(),Dt.min(),xo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var al=class{constructor(e,t){this.position=e,this.inclusive=t}};function yV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=tt.comparator(tt.fromName(s.referenceValue),t.key):r=Sd(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _V(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sl(n.position[t],e.position[t]))return!1;return!0}var fh=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function lre(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var q2=class{},xn=class n extends q2{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new uD(e,t,r):t==="array-contains"?new hD(e,r):t==="in"?new $2(e,r):t==="not-in"?new pD(e,r):t==="array-contains-any"?new gD(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dD(e,r):new fD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Sd(t,this.value)):t!==null&&Id(this.value)===Id(t)&&this.matchesComparison(Sd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Kn=class n extends q2{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Yg(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Yg(n){return n.op==="and"}function cD(n){return n.op==="or"}function cN(n){return H7(n)&&Yg(n)}function H7(n){for(let e of n.filters)if(e instanceof Kn)return!1;return!0}function lD(n){if(n instanceof xn)return n.field.canonicalString()+n.op.toString()+Kg(n.value);if(cN(n))return n.filters.map(e=>lD(e)).join(",");{let e=n.filters.map(t=>lD(t)).join(",");return`${n.op}(${e})`}}function G7(n,e){return n instanceof xn?(function(r,i){return i instanceof xn&&r.op===i.op&&r.field.isEqual(i.field)&&sl(r.value,i.value)})(n,e):n instanceof Kn?(function(r,i){return i instanceof Kn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&G7(s,i.filters[a]),!0):!1})(n,e):void ct(19439)}function W7(n,e){let t=n.filters.concat(e);return Kn.create(t,n.op)}function K7(n){return n instanceof xn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Kg(t.value)}`})(n):n instanceof Kn?(function(t){return t.op.toString()+" {"+t.getFilters().map(K7).join(" ,")+"}"})(n):"Filter"}var uD=class extends xn{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){let t=tt.comparator(e.key,this.key);return this.matchesComparison(t)}},dD=class extends xn{constructor(e,t){super(e,"in",t),this.keys=Y7("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},fD=class extends xn{constructor(e,t){super(e,"not-in",t),this.keys=Y7("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Y7(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}var hD=class extends xn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Cy(t)&&xy(t.arrayValue,this.value)}},$2=class extends xn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&xy(this.value.arrayValue,t)}},pD=class extends xn{constructor(e,t){super(e,"not-in",t)}matches(e){if(xy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xy(this.value.arrayValue,t)}},gD=class extends xn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Cy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xy(this.value.arrayValue,r))}};var mD=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function vD(n,e=null,t=[],r=[],i=null,o=null,s=null){return new mD(n,e,t,r,i,o,s)}function hh(n){let e=it(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>lD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),By(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Kg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Kg(r)).join(",")),e.Pe=t}return e.Pe}function zy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lre(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!G7(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_V(n.startAt,e.startAt)&&_V(n.endAt,e.endAt)}function H2(n){return tt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function G2(n,e){return n.filters.filter(t=>t instanceof xn&&t.field.isEqual(e))}function wV(n,e,t){let r=S2,i=!0;for(let o of G2(n,e)){let s=S2,a=!0;switch(o.op){case"<":case"<=":s=are(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=S2}mV({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];mV({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function bV(n,e,t){let r=vd,i=!0;for(let o of G2(n,e)){let s=vd,a=!0;switch(o.op){case">=":case">":s=cre(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=vd}vV({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];vV({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var uc=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Q7(n,e,t,r,i,o,s,a){return new uc(n,e,t,r,i,o,s,a)}function um(n){return new uc(n)}function xV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lN(n){return n.collectionGroup!==null}function Vg(n){let e=it(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ir(ii.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new fh(o,r))}),t.has(ii.keyField().canonicalString())||e.Te.push(new fh(ii.keyField(),r))}return e.Te}function Wo(n){let e=it(n);return e.Ie||(e.Ie=ure(e,Vg(n))),e.Ie}function ure(n,e){if(n.limitType==="F")return vD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new fh(i.field,o)});let t=n.endAt?new al(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new al(n.startAt.position,n.startAt.inclusive):null;return vD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yD(n,e){let t=n.filters.concat([e]);return new uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function W2(n,e,t){return new uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qy(n,e){return zy(Wo(n),Wo(e))&&n.limitType===e.limitType}function Z7(n){return`${hh(Wo(n))}|lt:${n.limitType}`}function Pg(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>K7(i)).join(", ")}]`),By(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Kg(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Kg(i)).join(",")),`Target(${r})`})(Wo(n))}; limitType=${n.limitType})`}function $y(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):tt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Vg(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=yV(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,Vg(r),i)||r.endAt&&!(function(s,a,c){let l=yV(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,Vg(r),i))})(n,e)}function X7(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function J7(n){return(e,t)=>{let r=!1;for(let i of Vg(n)){let o=dre(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function dre(n,e,t){let r=n.field.isKeyField()?tt.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Sd(c,l):ct(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct(19790,{direction:n.dir})}}var dc=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Od(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return O7(this.inner)}size(){return this.innerSize}};var fre=new Cr(tt.comparator);function ys(){return fre}var ej=new Cr(tt.comparator);function iy(...n){let e=ej;for(let t of n)e=e.insert(t.key,t);return e}function tj(n){let e=ej;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function tl(){return uy()}function nj(){return uy()}function uy(){return new dc(n=>n.toString(),(n,e)=>n.isEqual(e))}var hre=new Cr(tt.comparator),pre=new ir(tt.comparator);function fn(...n){let e=pre;for(let t of n)e=e.add(t);return e}var gre=new ir(Ht);function uN(){return gre}function dN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:my(e)?"-0":e}}function rj(n){return{integerValue:""+n}}function ij(n,e){return E7(e)?rj(e):dN(n,e)}var Qg=class{constructor(){this._=void 0}};function mre(n,e,t){return n instanceof Ad?(function(i,o){let s={fields:{[V7]:{stringValue:F7},[B7]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Vx(o)&&(o=jx(o)),o&&(s.fields[j7]=o),{mapValue:s}})(t,e):n instanceof iu?sj(n,e):n instanceof ou?aj(n,e):(function(i,o){let s=oj(i,o),a=CV(s)+CV(i.Ee);return aD(s)&&aD(i.Ee)?rj(a):dN(i.serializer,a)})(n,e)}function vre(n,e,t){return n instanceof iu?sj(n,e):n instanceof ou?aj(n,e):t}function oj(n,e){return n instanceof Td?(function(r){return aD(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ad=class extends Qg{},iu=class extends Qg{constructor(e){super(),this.elements=e}};function sj(n,e){let t=cj(e);for(let r of n.elements)t.some(i=>sl(i,r))||t.push(r);return{arrayValue:{values:t}}}var ou=class extends Qg{constructor(e){super(),this.elements=e}};function aj(n,e){let t=cj(e);for(let r of n.elements)t=t.filter(i=>!sl(i,r));return{arrayValue:{values:t}}}var Td=class extends Qg{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function CV(n){return Mr(n.integerValue||n.doubleValue)}function cj(n){return Cy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ph=class{constructor(e,t){this.field=e,this.transform=t}};function yre(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof iu&&i instanceof iu||r instanceof ou&&i instanceof ou?Bg(r.elements,i.elements,sl):r instanceof Td&&i instanceof Td?sl(r.Ee,i.Ee):r instanceof Ad&&i instanceof Ad})(n.transform,e.transform)}var _D=class{constructor(e,t){this.version=e,this.transformResults=t}},Gr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function D2(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Zg=class{};function lj(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Md(n.key,Gr.none()):new Dd(n.key,n.data,Gr.none());{let t=n.data,r=xo.empty(),i=new ir(ii.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new fc(n.key,r,new Zs(i.toArray()),Gr.none())}}function _re(n,e,t){n instanceof Dd?(function(i,o,s){let a=i.value.clone(),c=IV(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof fc?(function(i,o,s){if(!D2(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=IV(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(uj(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function dy(n,e,t,r){return n instanceof Dd?(function(o,s,a,c){if(!D2(o.precondition,s))return a;let l=o.value.clone(),u=SV(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof fc?(function(o,s,a,c){if(!D2(o.precondition,s))return a;let l=SV(o.fieldTransforms,c,s),u=s.data;return u.setAll(uj(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return D2(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function wre(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=oj(r.transform,i||null);o!=null&&(t===null&&(t=xo.empty()),t.set(r.field,o))}return t||null}function EV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bg(r,i,(o,s)=>yre(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Dd=class extends Zg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},fc=class extends Zg{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function uj(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function IV(n,e,t){let r=new Map;_t(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,vre(s,a,t[i]))}return r}function SV(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,mre(o,s,e))}return r}var Md=class extends Zg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ey=class extends Zg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Iy=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&_re(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=dy(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=dy(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=nj();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=lj(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fn())}isEqual(e){return this.batchId===e.batchId&&Bg(this.mutations,e.mutations,(t,r)=>EV(t,r))&&Bg(this.baseMutations,e.baseMutations,(t,r)=>EV(t,r))}},wD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){_t(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return hre})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Sy=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var bD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var gi,Tn;function dj(n){switch(n){case Ce.OK:return ct(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return ct(15467,{code:n})}}function fj(n){if(n===void 0)return ri("GRPC error has no .code"),Ce.UNKNOWN;switch(n){case gi.OK:return Ce.OK;case gi.CANCELLED:return Ce.CANCELLED;case gi.UNKNOWN:return Ce.UNKNOWN;case gi.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case gi.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case gi.INTERNAL:return Ce.INTERNAL;case gi.UNAVAILABLE:return Ce.UNAVAILABLE;case gi.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case gi.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case gi.NOT_FOUND:return Ce.NOT_FOUND;case gi.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case gi.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case gi.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case gi.ABORTED:return Ce.ABORTED;case gi.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case gi.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case gi.DATA_LOSS:return Ce.DATA_LOSS;default:return ct(39323,{code:n})}}(Tn=gi||(gi={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";var AV=null;var bre=new Xl([4294967295,4294967295],0);function TV(n){let e=ZM().encode(n),t=new NT;return t.update(e),new Uint8Array(t.digest())}function DV(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Xl([t,r],0),new Xl([i,o],0)]}var xD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ch(`Invalid padding: ${t}`);if(r<0)throw new ch(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ch(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ch(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Xl.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Xl.fromNumber(r)));return i.compare(bre)===1&&(i=new Xl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=TV(e),[r,i]=DV(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=TV(e),[r,i]=DV(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ch=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ay=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ty.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Dt.min(),i,new Cr(Ht),ys(),fn())}},Ty=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fn(),fn(),fn())}};var jg=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},K2=class{constructor(e,t){this.targetId=e,this.De=t}},Y2=class{constructor(e,t,r=si.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Q2=class{constructor(){this.ve=0,this.Ce=MV(),this.Fe=si.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fn(),t=fn(),r=fn();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct(38017,{changeType:o})}}),new Ty(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=MV()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},CD=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ys(),this.je=_2(),this.Je=_2(),this.He=new Cr(Ht)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ct(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(H2(o))if(r===0){let s=new tt(o.path);this.Xe(t,s,_i.newNoDocument(s,Dt.min()))}else _t(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}AV?.ct((function(u,p,m,g,x){var E,D,N,K,j,G;let oe={localCacheCount:u,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},fe=p.unchangedNames;return fe&&(oe.bloomFilter={applied:x===0,hashCount:(E=fe?.hashCount)!==null&&E!==void 0?E:0,bitmapLength:(K=(N=(D=fe?.bits)===null||D===void 0?void 0:D.bitmap)===null||N===void 0?void 0:N.length)!==null&&K!==void 0?K:0,padding:(G=(j=fe?.bits)===null||j===void 0?void 0:j.padding)!==null&&G!==void 0?G:0,mightContain:z=>{var M;return(M=g?.mightContain(z))!==null&&M!==void 0&&M}}),oe})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ru(r).toUint8Array()}catch(c){if(c instanceof U2)return ws("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new xD(s,i,o)}catch(c){return ws(c instanceof ch?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&H2(a.target)){let c=new tt(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,_i.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=fn();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Ay(e,t,this.He,this.ze,r);return this.ze=ys(),this.je=_2(),this.Je=_2(),this.He=new Cr(Ht),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Q2,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new ir(Ht),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new ir(Ht),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||He("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Q2),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function _2(){return new Cr(tt.comparator)}function MV(){return new Cr(tt.comparator)}var xre={asc:"ASCENDING",desc:"DESCENDING"},Cre={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ere={and:"AND",or:"OR"},ED=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ID(n,e){return n.useProto3Json||By(e)?e:{value:e}}function Xg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ire(n,e){return Xg(n,e.toTimestamp())}function oi(n){return _t(!!n,49232),Dt.fromTimestamp((function(t){let r=nu(t);return new gr(r.seconds,r.nanos)})(n))}function fN(n,e){return SD(n,e).canonicalString()}function SD(n,e){let t=(function(i){return new En(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pj(n){let e=En.fromString(n);return _t(Ej(e),10190,{key:e.toString()}),e}function Dy(n,e){return fN(n.databaseId,e.path)}function rl(n,e){let t=pj(e);if(t.get(1)!==n.databaseId.projectId)throw new je(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(vj(t))}function gj(n,e){return fN(n.databaseId,e)}function mj(n){let e=pj(n);return e.length===4?En.emptyPath():vj(e)}function AD(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vj(n){return _t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function NV(n,e,t){return{name:Dy(n,e),fields:t.value.mapValue.fields}}function yj(n,e,t){let r=rl(n,e.name),i=oi(e.updateTime),o=e.createTime?oi(e.createTime):Dt.min(),s=new xo({mapValue:{fields:e.fields}}),a=_i.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Sre(n,e){return"found"in e?(function(r,i){_t(!!i.found,43571),i.found.name,i.found.updateTime;let o=rl(r,i.found.name),s=oi(i.found.updateTime),a=i.found.createTime?oi(i.found.createTime):Dt.min(),c=new xo({mapValue:{fields:i.found.fields}});return _i.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){_t(!!i.missing,3894),_t(!!i.readTime,22933);let o=rl(r,i.missing),s=oi(i.readTime);return _i.newNoDocument(o,s)})(n,e):ct(7234,{result:e})}function Are(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ct(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,u){return l.useProto3Json?(_t(u===void 0||typeof u=="string",58123),si.fromBase64String(u||"")):(_t(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),si.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let u=l.code===void 0?Ce.UNKNOWN:fj(l.code);return new je(u,l.message||"")})(s);t=new Y2(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=rl(n,r.document.name),o=oi(r.document.updateTime),s=r.document.createTime?oi(r.document.createTime):Dt.min(),a=new xo({mapValue:{fields:r.document.fields}}),c=_i.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new jg(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=rl(n,r.document),o=r.readTime?oi(r.readTime):Dt.min(),s=_i.newNoDocument(i,o),a=r.removedTargetIds||[];t=new jg([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=rl(n,r.document),o=r.removedTargetIds||[];t=new jg([],o,i,null)}else{if(!("filter"in e))return ct(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new bD(i,o),a=r.targetId;t=new K2(a,s)}}return t}function My(n,e){let t;if(e instanceof Dd)t={update:NV(n,e.key,e.value)};else if(e instanceof Md)t={delete:Dy(n,e.key)};else if(e instanceof fc)t={update:NV(n,e.key,e.data),updateMask:kre(e.fieldMask)};else{if(!(e instanceof Ey))return ct(16599,{Rt:e.type});t={verify:Dy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Ad)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof iu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ou)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Td)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw ct(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Ire(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ct(27497)})(n,e.precondition)),t}function TD(n,e){let t=e.currentDocument?(function(o){return o.updateTime!==void 0?Gr.updateTime(oi(o.updateTime)):o.exists!==void 0?Gr.exists(o.exists):Gr.none()})(e.currentDocument):Gr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>(function(s,a){let c=null;if("setToServerValue"in a)_t(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new Ad;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new iu(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new ou(u)}else"increment"in a?c=new Td(s,a.increment):ct(16584,{proto:a});let l=ii.fromServerFormat(a.fieldPath);return new ph(l,c)})(n,i)):[];if(e.update){e.update.name;let i=rl(n,e.update.name),o=new xo({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=(function(c){let l=c.fieldPaths||[];return new Zs(l.map(u=>ii.fromServerFormat(u)))})(e.updateMask);return new fc(i,o,s,t,r)}return new Dd(i,o,t,r)}if(e.delete){let i=rl(n,e.delete);return new Md(i,t)}if(e.verify){let i=rl(n,e.verify);return new Ey(i,t)}return ct(1463,{proto:e})}function Tre(n,e){return n&&n.length>0?(_t(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?oi(i.updateTime):oi(o);return s.isEqual(Dt.min())&&(s=oi(o)),new _D(s,i.transformResults||[])})(t,e))):[]}function _j(n,e){return{documents:[gj(n,e.path)]}}function wj(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gj(n,i);let o=(function(l){if(l.length!==0)return Cj(Kn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(u=>(function(m){return{field:kg(m.field),direction:Mre(m.dir)}})(u))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=ID(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function bj(n){let e=mj(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){_t(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=(function(p){let m=xj(p);return m instanceof Kn&&cN(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(x){return new fh(Rg(x.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,By(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(p){let m=!!p.before,g=p.values||[];return new al(g,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,g=p.values||[];return new al(g,m)})(t.endAt)),Q7(e,i,s,o,a,"F",c,l)}function Dre(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xj(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Rg(t.unaryFilter.field);return xn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Rg(t.unaryFilter.field);return xn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Rg(t.unaryFilter.field);return xn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Rg(t.unaryFilter.field);return xn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ct(61313);default:return ct(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xn.create(Rg(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ct(58110);default:return ct(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Kn.create(t.compositeFilter.filters.map(r=>xj(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ct(1026)}})(t.compositeFilter.op))})(n):ct(30097,{filter:n})}function Mre(n){return xre[n]}function Nre(n){return Cre[n]}function Pre(n){return Ere[n]}function kg(n){return{fieldPath:n.canonicalString()}}function Rg(n){return ii.fromServerFormat(n.fieldPath)}function Cj(n){return n instanceof xn?(function(t){if(t.op==="=="){if(gV(t.value))return{unaryFilter:{field:kg(t.field),op:"IS_NAN"}};if(pV(t.value))return{unaryFilter:{field:kg(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gV(t.value))return{unaryFilter:{field:kg(t.field),op:"IS_NOT_NAN"}};if(pV(t.value))return{unaryFilter:{field:kg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kg(t.field),op:Nre(t.op),value:t.value}}})(n):n instanceof Kn?(function(t){let r=t.getFilters().map(i=>Cj(i));return r.length===1?r[0]:{compositeFilter:{op:Pre(t.op),filters:r}}})(n):ct(54877,{filter:n})}function kre(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ej(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Jg=class n{constructor(e,t,r,i,o=Dt.min(),s=Dt.min(),a=si.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Z2=class{constructor(e){this.gt=e}};function Rre(n,e){let t;if(e.document)t=yj(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=tt.fromSegments(e.noDocument.path),i=mh(e.noDocument.readTime);t=_i.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct(56709);{let r=tt.fromSegments(e.unknownDocument.path),i=mh(e.unknownDocument.version);t=_i.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){let o=new gr(i[0],i[1]);return Dt.fromTimestamp(o)})(e.readTime)),t}function PV(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:X2(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:Dy(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Xg(o,s.version.toTimestamp()),createTime:Xg(o,s.createTime.toTimestamp())}})(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gh(e.version)};else{if(!e.isUnknownDocument())return ct(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:gh(e.version)}}return r}function X2(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function gh(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mh(n){let e=new gr(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function ih(n,e){let t=(e.baseMutations||[]).map(o=>TD(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>TD(n.gt,o)),i=gr.fromMillis(e.localWriteTimeMs);return new Iy(e.batchId,i,t,r)}function oy(n){let e=mh(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?mh(n.lastLimboFreeSnapshotVersion):Dt.min(),r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){let s=o.documents.length;return _t(s===1,1966,{count:s}),Wo(um(mj(o.documents[0])))})(n.query):(function(o){return Wo(bj(o))})(n.query),new Jg(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,si.fromBase64String(n.resumeToken))}function Ij(n,e){let t=gh(e.snapshotVersion),r=gh(e.lastLimboFreeSnapshotVersion),i;i=H2(e.target)?_j(n.gt,e.target):wj(n.gt,e.target).Vt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hh(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function hN(n){let e=bj({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?W2(e,e.limit,"L"):e}function FT(n,e){return new Sy(e.largestBatchId,TD(n.gt,e.overlayMutation))}function kV(n,e){let t=e.path.lastSegment();return[n,Co(e.path.popLast()),t]}function RV(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:gh(r.readTime),documentKey:Co(r.documentKey.path),largestBatchId:r.largestBatchId}}var DD=class{getBundleMetadata(e,t){return OV(e).get(t).next(r=>{if(r)return(function(o){return{id:o.bundleId,createTime:mh(o.createTime),version:o.version}})(r)})}saveBundleMetadata(e,t){return OV(e).put((function(i){return{bundleId:i.id,createTime:gh(oi(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return LV(e).get(t).next(r=>{if(r)return(function(o){return{name:o.name,query:hN(o.bundledQuery),readTime:mh(o.readTime)}})(r)})}saveNamedQuery(e,t){return LV(e).put((function(i){return{name:i.name,readTime:gh(oi(i.readTime)),bundledQuery:i.bundledQuery}})(t))}};function OV(n){return Li(n,Ox)}function LV(n){return Li(n,Lx)}var J2=class n{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return ey(e).get(kV(this.userId,t)).next(r=>r?FT(this.serializer,r):null)}getOverlays(e,t){let r=tl();return we.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Sy(t,s);i.push(this.wt(e,a))}),we.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Co(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ey(e).Y(iD,a))}),we.waitFor(o)}getOverlaysForCollection(e,t,r){let i=tl(),o=Co(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ey(e).j(iD,s).next(a=>{for(let c of a){let l=FT(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=tl(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ey(e).X({index:M7,range:a},(c,l,u)=>{let p=FT(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):u.done()}).next(()=>o)}wt(e,t){return ey(e).put((function(i,o,s){let[a,c,l]=kV(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:My(i.gt,s.mutation)}})(this.serializer,this.userId,t))}};function ey(n){return Li(n,Fx)}var MD=class{St(e){return Li(e,iN)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?si.fromUint8Array(r):si.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var eu=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Mr(e.integerValue));else if("doubleValue"in e){let r=Mr(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),my(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=nu(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ru(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?z7(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Bx(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ct(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Wg,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Mr(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),tt.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};eu.Ut=new eu;var Ag=255;function Ore(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function FV(n){let e=64-(function(r){let i=0;for(let o=0;o<8;++o){let s=Ore(255&r[o]);if(i+=s,s!==8)break}return i})(n);return Math.ceil(e/8)}var ND=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{let i=t.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{let i=t.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){let t=this.Xt(e),r=FV(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}tn(e){let t=this.Xt(e),r=FV(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}nn(){this.rn(Ag),this.rn(255)}sn(){this._n(Ag),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=(function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===Ag?(this.rn(Ag),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===Ag?(this._n(Ag),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},PD=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},kD=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},oh=class{constructor(){this.un=new ND,this.cn=new PD(this.un),this.ln=new kD(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var sh=class n{constructor(e,t,r,i){this.Pn=e,this.Tn=t,this.In=r,this.dn=i}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:M2(this.In),directionalValue:M2(this.dn),orderedDocumentKey:M2(t),documentKey:r.path.toArray()}}Rn(e,t,r){let i=this.An(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function hd(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=VV(n.In,e.In),t!==0?t:(t=VV(n.dn,e.dn),t!==0?t:tt.comparator(n.Tn,e.Tn)))}function VV(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function M2(n){return UE()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function jV(n){return typeof n!="string"?n:(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}var ex=class{constructor(e){this.Vn=new ir((t,r)=>ii.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(_t(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=ZT(e);if(t!==void 0&&!this.yn(t))return!1;let r=th(e),i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.wn(a,c)||!this.Sn(this.mn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new ir(ii.comparator),t=[];for(let r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Fg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Fg(r.field,0))}for(let r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Fg(r.field,r.dir==="asc"?0:1)));return new zg(zg.UNKNOWN_ID,this.collectionId,t,gy.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Sj(n){var e,t;if(_t(n instanceof xn||n instanceof Kn,20012),n instanceof xn){if(n instanceof $2){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>xn.create(n.field,"==",o)))||[];return Kn.create(i,"or")}return n}let r=n.filters.map(i=>Sj(i));return Kn.create(r,n.op)}function Lre(n){if(n.getFilters().length===0)return[];let e=LD(Sj(n));return _t(Aj(e),7391),RD(e)||OD(e)?[e]:e.getFilters()}function RD(n){return n instanceof xn}function OD(n){return n instanceof Kn&&cN(n)}function Aj(n){return RD(n)||OD(n)||(function(t){if(t instanceof Kn&&cD(t)){for(let r of t.getFilters())if(!RD(r)&&!OD(r))return!1;return!0}return!1})(n)}function LD(n){if(_t(n instanceof xn||n instanceof Kn,34018),n instanceof xn)return n;if(n.filters.length===1)return LD(n.filters[0]);let e=n.filters.map(r=>LD(r)),t=Kn.create(e,n.op);return t=tx(t),Aj(t)?t:(_t(t instanceof Kn,64498),_t(Yg(t),40251),_t(t.filters.length>1,57927),t.filters.reduce((r,i)=>pN(r,i)))}function pN(n,e){let t;return _t(n instanceof xn||n instanceof Kn,38388),_t(e instanceof xn||e instanceof Kn,25473),t=n instanceof xn?e instanceof xn?(function(i,o){return Kn.create([i,o],"and")})(n,e):BV(n,e):e instanceof xn?BV(e,n):(function(i,o){if(_t(i.filters.length>0&&o.filters.length>0,48005),Yg(i)&&Yg(o))return W7(i,o.getFilters());let s=cD(i)?i:o,a=cD(i)?o:i,c=s.filters.map(l=>pN(l,a));return Kn.create(c,"or")})(n,e),tx(t)}function BV(n,e){if(Yg(e))return W7(e,n.getFilters());{let t=e.filters.map(r=>pN(n,r));return Kn.create(t,"or")}}function tx(n){if(_t(n instanceof xn||n instanceof Kn,11850),n instanceof xn)return n;let e=n.getFilters();if(e.length===1)return tx(e[0]);if(H7(n))return n;let t=e.map(i=>tx(i)),r=[];return t.forEach(i=>{i instanceof xn?r.push(i):i instanceof Kn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Kn.create(r,n.op)}var FD=class{constructor(){this.Dn=new Ny}addToCollectionParentIndex(e,t){return this.Dn.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(Na.min())}getMinOffsetFromCollectionGroup(e,t){return we.resolve(Na.min())}updateCollectionGroup(e,t,r){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}},Ny=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ir(En.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ir(En.comparator)).toArray()}};var UV="IndexedDbIndexManager",w2=new Uint8Array(0),VD=class{constructor(e,t){this.databaseId=t,this.vn=new Ny,this.Cn=new dc(r=>hh(r),(r,i)=>zy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:Co(i)};return zV(e).put(o)}return we.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[v7(t),""],!1,!0);return zV(e).j(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(el(s.parent))}return r})}addFieldIndex(e,t){let r=ty(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}})(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Dg(e);return o.next(a=>{s.put(RV(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=ty(e),i=Dg(e),o=Tg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=ty(e),r=Tg(e),i=Dg(e);return t.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,t){return we.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new ex(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Tg(e),i=!0,o=new Map;return we.forEach(this.Fn(t),s=>this.Mn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=fn(),a=[];return we.forEach(o,(c,l)=>{He(UV,`Using index ${(function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`})(c)} to execute ${hh(t)}`);let u=(function(j,G){let oe=ZT(G);if(oe===void 0)return null;for(let fe of G2(j,oe.fieldPath))switch(fe.op){case"array-contains-any":return fe.value.arrayValue.values||[];case"array-contains":return[fe.value]}return null})(l,c),p=(function(j,G){let oe=new Map;for(let fe of th(G))for(let z of G2(j,fe.fieldPath))switch(z.op){case"==":case"in":oe.set(fe.fieldPath.canonicalString(),z.value);break;case"not-in":case"!=":return oe.set(fe.fieldPath.canonicalString(),z.value),Array.from(oe.values())}return null})(l,c),m=(function(j,G){let oe=[],fe=!0;for(let z of th(G)){let M=z.kind===0?wV(j,z.fieldPath,j.startAt):bV(j,z.fieldPath,j.startAt);oe.push(M.value),fe&&(fe=M.inclusive)}return new al(oe,fe)})(l,c),g=(function(j,G){let oe=[],fe=!0;for(let z of th(G)){let M=z.kind===0?bV(j,z.fieldPath,j.endAt):wV(j,z.fieldPath,j.endAt);oe.push(M.value),fe&&(fe=M.inclusive)}return new al(oe,fe)})(l,c),x=this.xn(c,l,m),E=this.xn(c,l,g),D=this.On(c,l,p),N=this.Nn(c.indexId,u,x,m.inclusive,E,g.inclusive,D);return we.forEach(N,K=>r.H(K,t.limit).next(j=>{j.forEach(G=>{let oe=tt.fromSegments(G.documentKey);s.has(oe)||(s=s.add(oe),a.push(oe))})}))}).next(()=>a)}return we.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=Lre(Kn.create(e.filters,"and")).map(r=>vD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),u=[];for(let p=0;p<c;++p){let m=t?this.Bn(t[p/l]):w2,g=this.Ln(e,m,r[p%l],i),x=this.kn(e,m,o[p%l],s),E=a.map(D=>this.Ln(e,m,D,!0));u.push(...this.createRange(g,x,E))}return u}Ln(e,t,r,i){let o=new sh(e,tt.empty(),t,r);return i?o:o.En()}kn(e,t,r,i){let o=new sh(e,tt.empty(),t,r);return i?o.En():o}Mn(e,t){let r=new ex(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.pn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Fn(t);return we.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<(function(c){let l=new ir(ii.comparator),u=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?u=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(u?1:0)})(o)&&(r=1):r=0})).next(()=>(function(s){return s.limit!==null})(t)&&i.length>1&&r===2?1:r)}qn(e,t){let r=new oh;for(let i of th(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.hn(i.kind);eu.Ut.bt(o,s)}return r.an()}Bn(e){let t=new oh;return eu.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let r=new oh;return eu.Ut.bt(dh(this.databaseId,t),r.hn((function(o){let s=th(o);return s.length===0?0:s[s.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let i=[];i.push(new oh);let o=0;for(let s of th(e)){let a=r[o++];for(let c of i)if(this.$n(t,s.fieldPath)&&Cy(a))i=this.Un(i,s,a);else{let l=c.hn(s.kind);eu.Ut.bt(a,l)}}return this.Kn(i)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new oh;c.seed(a.an()),eu.Ut.bt(s,c.hn(t.kind)),o.push(c)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof xn&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=ty(e),i=Dg(e);return(t?r.j(rD,IDBKeyRange.bound(t,t)):r.j()).next(o=>{let s=[];return we.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push((function(u,p){let m=p?new gy(p.sequenceNumber,new Na(mh(p.readTime),new tt(el(p.documentKey)),p.largestBatchId)):gy.empty(),g=u.fields.map(([x,E])=>new Fg(ii.fromServerFormat(x),E));return new zg(u.indexId,u.collectionGroup,g,m)})(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Ht(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=ty(e),o=Dg(e);return this.Wn(e).next(s=>i.j(rD,IDBKeyRange.bound(t,t)).next(a=>we.forEach(a,c=>o.put(RV(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return we.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?we.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),we.forEach(a,c=>this.Gn(e,i,c).next(l=>{let u=this.zn(o,c);return l.isEqual(u)?we.resolve():this.jn(e,o,c,l,u)}))))})}Jn(e,t,r,i){return Tg(e).put(i.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,i){return Tg(e).delete(i.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){let i=Tg(e),o=new ir(hd);return i.X({index:D7,range:IDBKeyRange.only([r.indexId,this.uid,M2(this.Qn(r,t))])},(s,a)=>{o=o.add(new sh(r.indexId,t,jV(a.arrayValue),jV(a.directionalValue)))}).next(()=>o)}zn(e,t){let r=new ir(hd),i=this.qn(t,e);if(i==null)return r;let o=ZT(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Cy(s))for(let a of s.arrayValue.values||[])r=r.add(new sh(t.indexId,e.key,this.Bn(a),i))}else r=r.add(new sh(t.indexId,e.key,w2,i));return r}jn(e,t,r,i,o){He(UV,"Updating index entries for document '%s'",t.key);let s=[];return(function(c,l,u,p,m){let g=c.getIterator(),x=l.getIterator(),E=Sg(g),D=Sg(x);for(;E||D;){let N=!1,K=!1;if(E&&D){let j=u(E,D);j<0?K=!0:j>0&&(N=!0)}else E!=null?K=!0:N=!0;N?(p(D),D=Sg(x)):K?(m(E),E=Sg(g)):(E=Sg(g),D=Sg(x))}})(i,o,hd,a=>{s.push(this.Jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),we.waitFor(s)}Wn(e){let t=1;return Dg(e).X({index:T7,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>hd(s,a)).filter((s,a,c)=>!a||hd(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=hd(s,e),c=hd(s,t);if(a===0)i[0]=e.En();else if(a>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];let a=i[s].Rn(this.uid,w2,tt.empty()),c=i[s+1].Rn(this.uid,w2,tt.empty());o.push(IDBKeyRange.bound(a,c))}return o}Yn(e,t){return hd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qV)}getMinOffset(e,t){return we.mapArray(this.Fn(t),r=>this.Mn(e,r).next(i=>i||ct(44426))).next(qV)}};function zV(n){return Li(n,_y)}function Tg(n){return Li(n,cy)}function ty(n){return Li(n,rN)}function Dg(n){return Li(n,ay)}function qV(n){_t(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;eN(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Na(e.readTime,e.documentKey,t)}var $V={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tj=41943040,vs=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function Dj(n,e,t){let r=n.store(lc),i=n.store(qg),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.X({range:s},(u,p,m)=>(a++,m.delete()));o.push(c.next(()=>{_t(a===1,47070,{batchId:t.batchId})}));let l=[];for(let u of t.mutations){let p=I7(e,u.key.path,t.batchId);o.push(i.delete(p)),l.push(u.key)}return we.waitFor(o).next(()=>l)}function nx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct(14731);e=n.noDocument}return JSON.stringify(e).length}vs.DEFAULT_COLLECTION_PERCENTILE=10,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vs.DEFAULT=new vs(Tj,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vs.DISABLED=new vs(-1,0,0);var rx=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,t,r,i){_t(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pd(e).X({index:ah,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Og(e),s=pd(e);return s.add({}).next(a=>{_t(typeof a=="number",49019);let c=new Iy(a,t,r,i),l=(function(g,x,E){let D=E.baseMutations.map(K=>My(g.gt,K)),N=E.mutations.map(K=>My(g.gt,K));return{userId:x,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:D,mutations:N}})(this.serializer,this.userId,c),u=[],p=new ir((m,g)=>Ht(m.canonicalString(),g.canonicalString()));for(let m of i){let g=I7(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),u.push(s.put(l)),u.push(o.put(g,Lne))}return p.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Zn[a]=c.keys()}),we.waitFor(u).next(()=>c)})}lookupMutationBatch(e,t){return pd(e).get(t).next(r=>r?(_t(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ih(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?we.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return pd(e).X({index:ah,range:i},(s,a,c)=>{a.userId===this.userId&&(_t(a.batchId>=r,47524,{er:r}),o=ih(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=_d;return pd(e).X({index:ah,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,_d],[this.userId,Number.POSITIVE_INFINITY]);return pd(e).j(ah,t).next(r=>r.map(i=>ih(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=E2(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Og(e).X({range:i},(s,a,c)=>{let[l,u,p]=s,m=el(u);if(l===this.userId&&t.path.isEqual(m))return pd(e).get(p).next(g=>{if(!g)throw ct(61480,{tr:s,batchId:p});_t(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:p}),o.push(ih(this.serializer,g))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ir(Ht),i=[];return t.forEach(o=>{let s=E2(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Og(e).X({range:a},(l,u,p)=>{let[m,g,x]=l,E=el(g);m===this.userId&&o.path.isEqual(E)?r=r.add(x):p.done()});i.push(c)}),we.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=E2(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ir(Ht);return Og(e).X({range:s},(c,l,u)=>{let[p,m,g]=c,x=el(m);p===this.userId&&r.isPrefixOf(x)?x.length===i&&(a=a.add(g)):u.done()}).next(()=>this.nr(e,a))}nr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(pd(e).get(o).next(s=>{if(s===null)throw ct(35274,{batchId:o});_t(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(ih(this.serializer,s))}))}),we.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Dj(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),we.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return we.resolve();let r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Og(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=el(o[1]);i.push(c)}else a.done()}).next(()=>{_t(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return Mj(e,this.userId,t)}sr(e){return Nj(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:_d,lastStreamToken:""})}};function Mj(n,e,t){let r=E2(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Og(n).X({range:o,Z:!0},(a,c,l)=>{let[u,p,m]=a;u===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function pd(n){return Li(n,lc)}function Og(n){return Li(n,qg)}function Nj(n){return Li(n,vy)}var em=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var jD=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let r=new em(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>Dt.fromTimestamp(new gr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.lr(e,i)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Mg(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(_t(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Mg(e).X((s,a)=>{let c=oy(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>we.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Mg(e).X((r,i)=>{let o=oy(i);t(o)})}cr(e){return HV(e).get(j2).next(t=>(_t(t!==null,2888),t))}lr(e,t){return HV(e).put(j2,t)}hr(e,t){return Mg(e).put(Ij(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=hh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Mg(e).X({range:i,index:A7},(s,a,c)=>{let l=oy(a);zy(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=md(e);return t.forEach(s=>{let a=Co(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),we.waitFor(i)}removeMatchingKeys(e,t,r){let i=md(e);return we.forEach(t,o=>{let s=Co(o.path);return we.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=md(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=md(e),o=fn();return i.X({range:r,Z:!0},(s,a,c)=>{let l=el(s[1]),u=new tt(l);o=o.add(u)}).next(()=>o)}containsKey(e,t){let r=Co(t.path),i=IDBKeyRange.bound([r],[v7(r)],!1,!0),o=0;return md(e).X({index:nN,Z:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Et(e,t){return Mg(e).get(t).next(r=>r?oy(r):null)}};function Mg(n){return Li(n,$g)}function HV(n){return Li(n,uh)}function md(n){return Li(n,Hg)}var GV="LruGarbageCollector",Fre=1048576;function WV([n,e],[t,r]){let i=Ht(n,t);return i===0?Ht(e,r):i}var BD=class{constructor(e){this.Tr=e,this.buffer=new ir(WV),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();WV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ix=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){He(GV,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>ee(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Rd(t)?He(GV,"Ignoring IndexedDB error during garbage collection: ",t):yield kd(t)}yield this.Rr(3e5)}))}},UD=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return we.resolve(Qs.ue);let r=new BD(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve($V)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$V):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ng()<=Nc.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Pj(n,e){return new UD(n,e)}var zD=class{constructor(e,t){this.db=e,this.garbageCollector=Pj(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,i)=>t(i))}addReference(e,t,r){return b2(e,r)}removeReference(e,t,r){return b2(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return b2(e,t)}Sr(e,t){return(function(i,o){let s=!1;return Nj(i).ee(a=>Mj(i,a,o).next(c=>(c&&(s=!0),we.resolve(!c)))).next(()=>s)})(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.wr(e,(s,a)=>{if(a<=t){let c=this.Sr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Dt.min()),md(e).delete((function(p){return[0,Co(p.path)]})(s))))});i.push(c)}}).next(()=>we.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return b2(e,t)}wr(e,t){let r=md(e),i,o=Qs.ue;return r.X({index:nN},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Qs.ue&&t(new tt(el(i)),o),o=l,i=c):o=Qs.ue}).next(()=>{o!==Qs.ue&&t(new tt(el(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function b2(n,e){return md(n).put((function(r,i){return{targetId:0,path:Co(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}var ox=class{constructor(){this.changes=new dc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_i.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?we.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qD=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return eh(e).put(r)}removeEntry(e,t,r){return eh(e).delete((function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],X2(s),a[a.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=_i.newInvalidDocument(t);return eh(e).X({index:I2,range:IDBKeyRange.only(ny(t))},(i,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:_i.newInvalidDocument(t)};return eh(e).X({index:I2,range:IDBKeyRange.only(ny(t))},(i,o)=>{r={document:this.Dr(t,o),size:nx(o)}}).next(()=>r)}getEntries(e,t){let r=ys();return this.Cr(e,t,(i,o)=>{let s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,t){let r=ys(),i=new Cr(tt.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Dr(o,s);r=r.insert(o,a),i=i.insert(o,nx(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,t,r){if(t.isEmpty())return we.resolve();let i=new ir(QV);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(ny(i.first()),ny(i.last())),s=i.getIterator(),a=s.getNext();return eh(e).X({index:I2,range:o},(c,l,u)=>{let p=tt.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&QV(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?u.G(ny(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),X2(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return eh(e).j(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let u=ys();for(let p of l){let m=this.Dr(tt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&($y(t,m)||i.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,t,r,i){let o=ys(),s=YV(t,r),a=YV(t,Na.max());return eh(e).X({index:S7,range:IDBKeyRange.bound(s,a,!0)},(c,l,u)=>{let p=this.Dr(tt.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&u.done()}).next(()=>o)}newChangeBuffer(e){return new $D(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return KV(e).get(nD).next(t=>(_t(!!t,20021),t))}br(e,t){return KV(e).put(nD,t)}Dr(e,t){if(t){let r=Rre(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Dt.min())))return r}return _i.newInvalidDocument(e)}};function kj(n){return new qD(n)}var $D=class extends ox{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new dc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new ir((o,s)=>Ht(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=PV(this.Or.serializer,s);i=i.add(o.path.popLast());let l=nx(c);r+=l-a.size,t.push(this.Or.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=PV(this.Or.serializer,s.convertToNoDocument(Dt.min()));t.push(this.Or.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),we.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function KV(n){return Li(n,yy)}function eh(n){return Li(n,V2)}function ny(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function YV(n,e){let t=e.documentKey.path.toArray();return[n,X2(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function QV(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Ht(t[o],r[o]),i)return i;return i=Ht(t.length,r.length),i||(i=Ht(t[t.length-2],r[r.length-2]),i||Ht(t[t.length-1],r[r.length-1]))}var HD=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var sx=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&dy(r.mutation,i,Zs.empty(),gr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fn()){let i=tl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=iy();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=tl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fn()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ys(),s=uy(),a=(function(){return uy()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof fc)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),dy(u.mutation,l,u.mutation.getFieldMask(),gr.now())):s.set(l.key,Zs.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),t.forEach((l,u)=>{var p;return a.set(l,new HD(u,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=uy(),i=new Cr((s,a)=>s-a),o=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||Zs.empty();u=a.applyToLocalView(l,u),r.set(c,u);let p=(i.get(a.batchId)||fn()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,p=nj();u.forEach(m=>{if(!o.has(m)){let g=lj(t.get(m),r.get(m));g!==null&&p.set(m,g),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return we.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return tt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):we.resolve(tl()),a=Ug,c=o;return s.next(l=>we.forEach(l,(u,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(u)?we.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{c=c.insert(u,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,fn())).next(u=>({batchId:a,changes:tj(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=iy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=iy();return this.indexManager.getCollectionParents(e,o).next(a=>we.forEach(a,c=>{let l=(function(p,m){return new uc(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,_i.newInvalidDocument(u)))});let a=iy();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&dy(u.mutation,l,Zs.empty(),gr.now()),$y(t,l)&&(a=a.insert(c,l))}),a})}};var GD=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return we.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:oi(i.createTime)}})(t)),we.resolve()}getNamedQuery(e,t){return we.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:hN(i.bundledQuery),readTime:oi(i.readTime)}})(t)),we.resolve()}};var WD=class{constructor(){this.overlays=new Cr(tt.comparator),this.kr=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}getOverlays(e,t){let r=tl();return we.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),we.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),we.resolve()}getOverlaysForCollection(e,t,r){let i=tl(),o=t.length+1,s=new tt(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return we.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Cr((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=tl(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=tl(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return we.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Sy(t,r));let o=this.kr.get(t);o===void 0&&(o=fn(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var KD=class{constructor(){this.sessionToken=si.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,we.resolve()}};var Py=class{constructor(){this.qr=new ir(mi.Qr),this.$r=new ir(mi.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new mi(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new mi(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new tt(new En([])),r=new mi(t,e),i=new mi(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new tt(new En([])),r=new mi(t,e),i=new mi(t,e+1),o=fn();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new mi(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},mi=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return tt.comparator(e.key,t.key)||Ht(e.Hr,t.Hr)}static Ur(e,t){return Ht(e.Hr,t.Hr)||tt.comparator(e.key,t.key)}};var YD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new ir(mi.Qr)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Iy(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new mi(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return we.resolve(s)}lookupMutationBatch(e,t){return we.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return we.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?_d:this.er-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new mi(t,0),i=new mi(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),we.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ir(Ht);return t.forEach(i=>{let o=new mi(i,0),s=new mi(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),we.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;tt.isDocumentKey(o)||(o=o.child(""));let s=new mi(new tt(o),0),a=new ir(Ht);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),we.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){_t(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return we.forEach(t.mutations,i=>{let o=new mi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new mi(t,0),i=this.Yr.firstAfterOrEqual(r);return we.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var QD=class{constructor(e){this.ni=e,this.docs=(function(){return new Cr(tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return we.resolve(r?r.document.mutableCopy():_i.newInvalidDocument(t))}getEntries(e,t){let r=ys();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():_i.newInvalidDocument(i))}),we.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ys(),s=t.path,a=new tt(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||eN(b7(u),r)<=0||(i.has(u.key)||$y(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return we.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ct(9500)}ri(e,t){return we.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ZD(this)}getSize(e){return we.resolve(this.size)}},ZD=class extends ox{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),we.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var XD=class{constructor(e){this.persistence=e,this.ii=new dc(t=>hh(t),zy),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.si=0,this.oi=new Py,this.targetCount=0,this._i=em.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),we.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new em(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.hr(t),we.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),we.waitFor(o).next(()=>i)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return we.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),we.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),we.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),we.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return we.resolve(r)}containsKey(e,t){return we.resolve(this.oi.containsKey(t))}};var ky=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Qs(0),this.ci=!1,this.ci=!0,this.li=new KD,this.referenceDelegate=e(this),this.hi=new XD(this),this.indexManager=new FD,this.remoteDocumentCache=(function(i){return new QD(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Z2(t),this.Ti=new GD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new YD(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);let i=new JD(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return we.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},JD=class extends O2{constructor(e){super(),this.currentSequenceNumber=e}},ax=class n{constructor(e){this.persistence=e,this.Ai=new Py,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ct(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),we.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),we.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.mi,r=>{let i=tt.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Dt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return we.or([()=>we.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},cx=class n{constructor(e,t){this.persistence=e,this.gi=new dc(r=>Co(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Pj(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return we.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return we.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?we.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Dt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),we.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),we.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=A2(e.data.value)),t}Sr(e,t,r){return we.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return we.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var eM=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new L2("createOrUpgrade",t);r<1&&i>=1&&((function(c){c.createObjectStore(Uy)})(e),(function(c){c.createObjectStore(vy,{keyPath:One}),c.createObjectStore(lc,{keyPath:lV,autoIncrement:!0}).createIndex(ah,uV,{unique:!0}),c.createObjectStore(qg)})(e),ZV(e),(function(c){c.createObjectStore(nh)})(e));let s=we.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Hg),c.deleteObjectStore($g),c.deleteObjectStore(uh)})(e),ZV(e)),s=s.next(()=>(function(c){let l=c.store(uh),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return l.put(j2,u)})(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>(function(c,l){return l.store(lc).j().next(p=>{c.deleteObjectStore(lc),c.createObjectStore(lc,{keyPath:lV,autoIncrement:!0}).createIndex(ah,uV,{unique:!0});let m=l.store(lc),g=p.map(x=>m.put(x));return we.waitFor(g)})})(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(Gg,{keyPath:$ne})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>((function(c){c.createObjectStore(yy)})(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(Ox,{keyPath:Hne})})(e),(function(c){c.createObjectStore(Lx,{keyPath:Gne})})(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore(Fx,{keyPath:Jne});l.createIndex(iD,ere,{unique:!1}),l.createIndex(M7,tre,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>(function(c){let l=c.createObjectStore(V2,{keyPath:Fne});l.createIndex(I2,Vne),l.createIndex(S7,jne)})(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(nh))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>(function(c){c.createObjectStore(rN,{keyPath:Wne,autoIncrement:!0}).createIndex(rD,Kne,{unique:!1}),c.createObjectStore(ay,{keyPath:Yne}).createIndex(T7,Qne,{unique:!1}),c.createObjectStore(cy,{keyPath:Zne}).createIndex(D7,Xne,{unique:!1})})(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(ay).clear()}).next(()=>{t.objectStore(cy).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(iN,{keyPath:nre})})(e)})),r<18&&i>=18&&UE()&&(s=s.next(()=>{t.objectStore(ay).clear()}).next(()=>{t.objectStore(cy).clear()})),s}yi(e){let t=0;return e.store(nh).X((r,i)=>{t+=nx(i)}).next(()=>{let r={byteSize:t};return e.store(yy).put(nD,r)})}pi(e){let t=e.store(vy),r=e.store(lc);return t.j().next(i=>we.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,_d],[o.userId,o.lastAcknowledgedBatchId]);return r.j(ah,s).next(a=>we.forEach(a,c=>{_t(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let l=ih(this.serializer,c);return Dj(e,o.userId,l).next(()=>{})}))}))}wi(e){let t=e.store(Hg),r=e.store(nh);return e.store(uh).get(j2).next(i=>{let o=[];return r.X((s,a)=>{let c=new En(s),l=(function(p){return[0,Co(p)]})(c);o.push(t.get(l).next(u=>u?we.resolve():(p=>t.put({targetId:0,path:Co(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>we.waitFor(o))})}Si(e,t){e.createObjectStore(_y,{keyPath:qne});let r=t.store(_y),i=new Ny,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Co(c)})}};return t.store(nh).X({Z:!0},(s,a)=>{let c=new En(s);return o(c.popLast())}).next(()=>t.store(qg).X({Z:!0},([s,a,c],l)=>{let u=el(a);return o(u.popLast())}))}bi(e){let t=e.store($g);return t.X((r,i)=>{let o=oy(i),s=Ij(this.serializer,o);return t.put(s)})}Di(e,t){let r=t.store(nh),i=[];return r.X((o,s)=>{let a=t.store(V2),c=(function(p){return p.document?new tt(En.fromString(p.document.name).popFirst(5)):p.noDocument?tt.fromSegments(p.noDocument.path):p.unknownDocument?tt.fromSegments(p.unknownDocument.path):ct(36783)})(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>we.waitFor(i))}Ci(e,t){let r=t.store(lc),i=kj(this.serializer),o=new ky(ax.Vi,this.serializer.gt);return r.j().next(s=>{let a=new Map;return s.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:fn();ih(this.serializer,c).keys().forEach(p=>u=u.add(p)),a.set(c.userId,u)}),we.forEach(a,(c,l)=>{let u=new vi(l),p=J2.yt(this.serializer,u),m=o.getIndexManager(u),g=rx.yt(u,this.serializer,m,o.referenceDelegate);return new sx(i,g,p,m).recalculateAndSaveOverlaysForDocumentKeys(new wy(t,Qs.ue),c).next()})})}};function ZV(n){n.createObjectStore(Hg,{keyPath:Une}).createIndex(nN,zne,{unique:!0}),n.createObjectStore($g,{keyPath:"targetId"}).createIndex(A7,Bne,{unique:!0}),n.createObjectStore(uh)}var gd="IndexedDbPersistence",VT=18e5,jT=5e3,BT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Rj="main",tM=class n{constructor(e,t,r,i,o,s,a,c,l,u,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=s,this.document=a,this.Mi=l,this.xi=u,this.Oi=p,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=m=>Promise.resolve(),!n.C())throw new je(Ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zD(this,i),this.Qi=t+Rj,this.serializer=new Z2(c),this.$i=new Cd(this.Qi,this.Oi,new eM(this.serializer)),this.li=new MD,this.hi=new jD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kj(this.serializer),this.Ti=new DD,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,u===!1&&ri(gd,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new je(Ce.FAILED_PRECONDITION,BT);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new Qs(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>ee(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>ee(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>x2(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(Rd(e))return He(gd,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He(gd,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return ry(e).get(Ig).next(t=>we.resolve(this.Xi(t)))}es(e){return x2(e).delete(this.clientId)}ts(){return ee(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,VT)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Li(t,Gg);return r.j().next(i=>{let o=this.rs(i,VT),s=i.filter(a=>o.indexOf(a)===-1);return we.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?we.resolve(!0):ry(e).get(Ig).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,jT)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new je(Ce.FAILED_PRECONDITION,BT);return!1}}return!(!this.networkEnabled||!this.inForeground)||x2(e).j().next(r=>this.rs(r,jT).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&He(gd,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return ee(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[Uy,Gg],e=>{let t=new wy(e,Qs.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>x2(e).j().next(t=>this.rs(t,VT).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return rx.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new VD(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return J2.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){He(gd,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=(function(c){return c===18?ore:c===17?R7:c===16?ire:c===15?oN:c===14?k7:c===13?P7:c===12?rre:c===11?N7:void ct(60245)})(this.Oi),s;return this.$i.runTransaction(e,i,o,a=>(s=new wy(a,this.ui?this.ui.next():Qs.ue),t==="readwrite-primary"?this.Ji(s).next(c=>!!c||this.Hi(s)).next(c=>{if(!c)throw ri(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new je(Ce.FAILED_PRECONDITION,x7);return r(s)}).next(c=>this.Zi(s).next(()=>c)):this.Ts(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ts(e){return ry(e).get(Ig).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,jT)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new je(Ce.FAILED_PRECONDITION,BT)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ry(e).put(Ig,t)}static C(){return Cd.C()}Yi(e){let t=ry(e);return t.get(Ig).next(r=>this.Xi(r)?(He(gd,"Releasing primary lease."),t.delete(Ig)):we.resolve())}ns(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ri(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;BE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return He(gd,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ri(gd,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){ri("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ry(n){return Li(n,Uy)}function x2(n){return Li(n,Gg)}function gN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var nM=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=fn(),i=fn();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var rM=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var lx=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return BE()?8:C7(b0())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new rM;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ng()<=Nc.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",Pg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),we.resolve()):(Ng()<=Nc.DEBUG&&He("QueryEngine","Query:",Pg(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ng()<=Nc.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",Pg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wo(t))):we.resolve())}ps(e,t){if(xV(t))return we.resolve(null);let r=Wo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=W2(t,null,"F"),r=Wo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fn(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,W2(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return xV(t)||i.isEqual(Dt.min())?we.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?we.resolve(null):(Ng()<=Nc.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pg(t)),this.vs(e,s,t,w7(i,Ug)).next(a=>a))})}bs(e,t){let r=new ir(J7(e));return t.forEach((i,o)=>{$y(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Ng()<=Nc.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",Pg(t)),this.gs.getDocumentsMatchingQuery(e,t,Na.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var mN="LocalStore",Vre=3e8,iM=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Cr(Ht),this.Ms=new dc(o=>hh(o),zy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Oj(n,e,t,r){return new iM(n,e,t,r)}function Lj(n,e){return ee(this,null,function*(){let t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=fn();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function jre(n,e){let t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let p=l.batch,m=p.keys(),g=we.resolve();return m.forEach(x=>{g=g.next(()=>u.getEntry(c,x)).next(E=>{let D=l.docVersions.get(x);_t(D!==null,48541),E.version.compareTo(D)<0&&(p.applyToRemoteDocument(E,l),E.isValidDocument()&&(E.setReadTime(l.commitVersion),u.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=fn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Fj(n){let e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Bre(n,e){let t=it(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((u,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,u.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,u.addedDocuments,p)));let g=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(si.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(p,g),(function(E,D,N){return E.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=Vre?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(m,g,u)&&a.push(t.hi.updateTargetData(o,g))});let c=ys(),l=fn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(Vj(o,s,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!r.isEqual(Dt.min())){let u=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return we.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function Vj(n,e,t){let r=fn(),i=fn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ys();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Dt.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):He(mN,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function Ure(n,e){let t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=_d),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tm(n,e){let t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,we.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Jg(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function nm(n,e,t){return ee(this,null,function*(){let r=it(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Rd(s))throw s;He(mN,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function ux(n,e,t){let r=it(n),i=Dt.min(),o=fn();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,u){let p=it(c),m=p.Ms.get(u);return m!==void 0?we.resolve(p.Fs.get(m)):p.hi.getTargetData(l,u)})(r,s,Wo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Dt.min(),t?o:fn())).next(a=>(Uj(r,X7(e),a),{documents:a,qs:o})))}function jj(n,e){let t=it(n),r=it(t.hi),i=t.Fs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function Bj(n,e){let t=it(n),r=t.xs.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Os.getAllFromCollectionGroup(i,e,w7(r,Ug),Number.MAX_SAFE_INTEGER)).then(i=>(Uj(t,e,i),i))}function Uj(n,e,t){let r=n.xs.get(e)||Dt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}function zre(n,e,t,r){return ee(this,null,function*(){let i=it(n),o=fn(),s=ys();for(let l of t){let u=e.Qs(l.metadata.name);l.document&&(o=o.add(u));let p=e.$s(l);p.setReadTime(e.Us(l.metadata.readTime)),s=s.insert(u,p)}let a=i.Os.newChangeBuffer({trackRemovals:!0}),c=yield tm(i,(function(u){return Wo(um(En.fromString(`__bundle__/docs/${u}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Vj(l,a,s).next(u=>(a.apply(l),u)).next(u=>i.hi.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.hi.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,u.Ls,u.ks)).next(()=>u.Ls)))})}function qre(r,i){return ee(this,arguments,function*(n,e,t=fn()){let o=yield tm(n,Wo(hN(e.bundledQuery))),s=it(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=oi(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Ti.saveNamedQuery(a,e);let l=o.withResumeToken(si.EMPTY_BYTE_STRING,c);return s.Fs=s.Fs.insert(l.targetId,l),s.hi.updateTargetData(a,l).next(()=>s.hi.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.hi.addMatchingKeys(a,t,o.targetId)).next(()=>s.Ti.saveNamedQuery(a,e))})})}var zj="firestore_clients";function XV(n,e){return`${zj}_${n}_${e}`}var qj="firestore_mutations";function JV(n,e,t){let r=`${qj}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var $j="firestore_targets";function UT(n,e){return`${$j}_${n}_${e}`}var Jc="SharedClientState",dx=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ks(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new je(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ri(Jc,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},fy=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new je(r.error.code,r.error.message))),o?new n(e,r.state,i):(ri(Jc,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},fx=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=uN();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=E7(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ri(Jc,`Failed to parse client data for instance '${e}': ${t}`),null)}},oM=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ri(Jc,`Failed to parse online state: ${e}`),null)}},Ry=class{constructor(){this.activeTargetIds=uN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},hy=class{constructor(e,t,r,i,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new Cr(Ht),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=XV(this.persistenceKey,this.js),this.eo=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new Ry),this.no=new RegExp(`^${zj}_${s}_([^_]*)$`),this.ro=new RegExp(`^${qj}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${$j}_${s}_(\\d+)$`),this.so=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.oo=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return ee(this,null,function*(){let e=yield this.syncEngine.Ps();for(let r of e){if(r===this.js)continue;let i=this.getItem(XV(this.persistenceKey,r));if(i){let o=fx.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();let t=this.storage.getItem(this.so);if(t){let r=this.ao(t);r&&this.uo(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(UT(this.persistenceKey,e));if(i){let o=fy.Ks(e,i);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(UT(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return He(Jc,"READ",e,t),t}setItem(e,t){He(Jc,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){He(Jc,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if(He(Jc,"EVENT",t.key,t.newValue),t.key===this.Xs)return void ri("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>ee(this,null,function*(){if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){let r=this.Ao(t.key);return this.Ro(r,null)}{let r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){let r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){let r=(function(o){let s=Qs.ue;if(o!=null)try{let a=JSON.parse(o);_t(typeof a=="number",30636,{wo:o}),s=a}catch(a){ri(Jc,"Failed to read sequence number from WebStorage",a)}return s})(t.newValue);r!==Qs.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){let r=this.So(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){let i=new dx(this.currentUser,e,t,r),o=JV(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){let t=JV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){let t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){let i=UT(this.persistenceKey,e),o=new fy(e,t,r);this.setItem(i,o.Ws())}Eo(e){let t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){let t=this.no.exec(e);return t?t[1]:null}Vo(e,t){let r=this.Ao(e);return fx.Ks(r,t)}mo(e,t){let r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return dx.Ks(new vi(o),i,t)}po(e,t){let r=this.io.exec(e),i=Number(r[1]);return fy.Ks(i,t)}ao(e){return oM.Ks(e)}So(e){return JSON.parse(e)}fo(e){return ee(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);He(Jc,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Ys.insert(e,t):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Co(s,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=uN();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},hx=class{constructor(){this.Fo=new Ry,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ry,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var sM=class{xo(e){}shutdown(){}};var e7="ConnectivityMonitor",px=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){He(e7,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){He(e7,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var C2=null;function aM(){return C2===null?C2=(function(){return 268435456+Math.round(2147483648*Math.random())})():C2++,"0x"+C2.toString(16)}var zT="RestConnection",$re={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},cM=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===z2?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=aM(),a=this.Go(e,t.toUriEncodedString());He(zT,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),u=sp(l);return this.jo(e,a,c,r,u).then(p=>(He(zT,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ws(zT,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+lm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=$re[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var lM=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var bo="WebChannelConnection",uM=class extends cM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=aM();return new Promise((a,c)=>{let l=new PT;l.setWithCredentials(!0),l.listenOnce(kT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Jv.NO_ERROR:let p=l.getResponseJson();He(bo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Jv.TIMEOUT:He(bo,`RPC '${e}' ${s} timed out`),c(new je(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Jv.HTTP_ERROR:let m=l.getStatus();if(He(bo,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let x=g?.error;if(x&&x.status&&x.message){let E=(function(N){let K=N.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(K)>=0?K:Ce.UNKNOWN})(x.status);c(new je(E,x.message))}else c(new je(Ce.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new je(Ce.UNAVAILABLE,"Connection failed."));break;default:ct(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{He(bo,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);He(bo,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}P_(e,t,r){let i=aM(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=LT(),a=OT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");He(bo,`Creating RPC '${e}' stream ${i}: ${u}`,c);let p=s.createWebChannel(u,c);this.T_(p);let m=!1,g=!1,x=new lM({Ho:D=>{g?He(bo,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(m||(He(bo,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),He(bo,`RPC '${e}' stream ${i} sending:`,D),p.send(D))},Yo:()=>p.close()}),E=(D,N,K)=>{D.listen(N,j=>{try{K(j)}catch(G){setTimeout(()=>{throw G},0)}})};return E(p,Eg.EventType.OPEN,()=>{g||(He(bo,`RPC '${e}' stream ${i} transport opened.`),x.s_())}),E(p,Eg.EventType.CLOSE,()=>{g||(g=!0,He(bo,`RPC '${e}' stream ${i} transport closed`),x.__(),this.I_(p))}),E(p,Eg.EventType.ERROR,D=>{g||(g=!0,ws(bo,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),x.__(new je(Ce.UNAVAILABLE,"The operation could not be completed")))}),E(p,Eg.EventType.MESSAGE,D=>{var N;if(!g){let K=D.data[0];_t(!!K,16349);let j=K,G=j?.error||((N=j[0])===null||N===void 0?void 0:N.error);if(G){He(bo,`RPC '${e}' stream ${i} received error:`,G);let oe=G.status,fe=(function(I){let V=gi[I];if(V!==void 0)return fj(V)})(oe),z=G.message;fe===void 0&&(fe=Ce.INTERNAL,z="Unknown error status: "+oe+" with message "+G.message),g=!0,x.__(new je(fe,z)),p.close()}else He(bo,`RPC '${e}' stream ${i} received:`,K),x.a_(K)}}),E(a,RT.STAT_EVENT,D=>{D.stat===y2.PROXY?He(bo,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===y2.NOPROXY&&He(bo,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function Hj(){return typeof window<"u"?window:null}function N2(){return typeof document<"u"?document:null}function Hy(n){return new ED(n,!0)}var Oy=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var t7="PersistentStream",gx=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Oy(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return ee(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return ee(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return ee(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(ri(t.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new je(Ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>ee(this,null,function*(){this.state=0,this.start()}))}G_(e){return He(t7,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(He(t7,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dM=class extends gx{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Are(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Dt.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Dt.min():s.readTime?oi(s.readTime):Dt.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=AD(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=H2(c)?{documents:_j(o,c)}:{query:wj(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=hj(o,s.resumeToken);let l=ID(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Dt.min())>0){a.readTime=Xg(o,s.snapshotVersion.toTimestamp());let l=ID(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Dre(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=AD(this.serializer),t.removeTarget=e,this.k_(t)}},fM=class extends gx{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=Tre(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=AD(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>My(this.serializer,r))};this.k_(t)}};var hM=class{},pM=class extends hM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new je(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,SD(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new je(Ce.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,SD(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new je(Ce.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},gM=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ri(t),this._a=!1):He("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var vh="RemoteStore",mM=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>ee(this,null,function*(){Ld(this)&&(He(vh,"Restarting streams for network reachability change."),yield(function(c){return ee(this,null,function*(){let l=it(c);l.Ia.add(4),yield dm(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Gy(l)})})(this))}))}),this.Aa=new gM(r,i)}};function Gy(n){return ee(this,null,function*(){if(Ld(n))for(let e of n.da)yield e(!0)})}function dm(n){return ee(this,null,function*(){for(let e of n.da)yield e(!1)})}function Ux(n,e){let t=it(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),_N(t)?yN(t):hm(t).x_()&&vN(t,e))}function rm(n,e){let t=it(n),r=hm(t);t.Ta.delete(e),r.x_()&&Gj(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ld(t)&&t.Aa.set("Unknown"))}function vN(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hm(n).H_(e)}function Gj(n,e){n.Ra.$e(e),hm(n).Y_(e)}function yN(n){n.Ra=new CD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),hm(n).start(),n.Aa.aa()}function _N(n){return Ld(n)&&!hm(n).M_()&&n.Ta.size>0}function Ld(n){return it(n).Ia.size===0}function Wj(n){n.Ra=void 0}function Hre(n){return ee(this,null,function*(){n.Aa.set("Online")})}function Gre(n){return ee(this,null,function*(){n.Ta.forEach((e,t)=>{vN(n,e)})})}function Wre(n,e){return ee(this,null,function*(){Wj(n),_N(n)?(n.Aa.la(e),yN(n)):n.Aa.set("Unknown")})}function Kre(n,e,t){return ee(this,null,function*(){if(n.Aa.set("Online"),e instanceof Y2&&e.state===2&&e.cause)try{yield(function(i,o){return ee(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){He(vh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mx(n,r)}else if(e instanceof jg?n.Ra.Ye(e):e instanceof K2?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Dt.min()))try{let r=yield Fj(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.Ta.get(l);u&&o.Ta.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.Ta.get(c);if(!u)return;o.Ta.set(c,u.withResumeToken(si.EMPTY_BYTE_STRING,u.snapshotVersion)),Gj(o,c);let p=new Jg(u.target,c,l,u.sequenceNumber);vN(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){He(vh,"Failed to raise snapshot:",r),yield mx(n,r)}})}function mx(n,e,t){return ee(this,null,function*(){if(!Rd(e))throw e;n.Ia.add(1),yield dm(n),n.Aa.set("Offline"),t||(t=()=>Fj(n.localStore)),n.asyncQueue.enqueueRetryable(()=>ee(null,null,function*(){He(vh,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Gy(n)}))})}function Kj(n,e){return e().catch(t=>mx(n,t,e))}function fm(n){return ee(this,null,function*(){let e=it(n),t=Nd(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:_d;for(;Yre(e);)try{let i=yield Ure(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Qre(e,i)}catch(i){yield mx(e,i)}Yj(e)&&Qj(e)})}function Yre(n){return Ld(n)&&n.Pa.length<10}function Qre(n,e){n.Pa.push(e);let t=Nd(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Yj(n){return Ld(n)&&!Nd(n).M_()&&n.Pa.length>0}function Qj(n){Nd(n).start()}function Zre(n){return ee(this,null,function*(){Nd(n).na()})}function Xre(n){return ee(this,null,function*(){let e=Nd(n);for(let t of n.Pa)e.X_(t.mutations)})}function Jre(n,e,t){return ee(this,null,function*(){let r=n.Pa.shift(),i=wD.from(r,e,t);yield Kj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield fm(n)})}function eie(n,e){return ee(this,null,function*(){e&&Nd(n).Z_&&(yield(function(r,i){return ee(this,null,function*(){if((function(s){return dj(s)&&s!==Ce.ABORTED})(i.code)){let o=r.Pa.shift();Nd(r).N_(),yield Kj(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield fm(r)}})})(n,e)),Yj(n)&&Qj(n)})}function n7(n,e){return ee(this,null,function*(){let t=it(n);t.asyncQueue.verifyOperationInProgress(),He(vh,"RemoteStore received new credentials");let r=Ld(t);t.Ia.add(3),yield dm(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Gy(t)})}function vM(n,e){return ee(this,null,function*(){let t=it(n);e?(t.Ia.delete(2),yield Gy(t)):e||(t.Ia.add(2),yield dm(t),t.Aa.set("Unknown"))})}function hm(n){return n.Va||(n.Va=(function(t,r,i){let o=it(t);return o.ia(),new dM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:Hre.bind(null,n),e_:Gre.bind(null,n),n_:Wre.bind(null,n),J_:Kre.bind(null,n)}),n.da.push(e=>ee(null,null,function*(){e?(n.Va.N_(),_N(n)?yN(n):n.Aa.set("Unknown")):(yield n.Va.stop(),Wj(n))}))),n.Va}function Nd(n){return n.ma||(n.ma=(function(t,r,i){let o=it(t);return o.ia(),new fM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Zre.bind(null,n),n_:eie.bind(null,n),ea:Xre.bind(null,n),ta:Jre.bind(null,n)}),n.da.push(e=>ee(null,null,function*(){e?(n.ma.N_(),yield fm(n)):(yield n.ma.stop(),n.Pa.length>0&&(He(vh,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var yM=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function pm(n,e){if(ri("AsyncQueue",`${e}: ${n}`),Rd(n))return new je(Ce.UNAVAILABLE,`${e}: ${n}`);throw n}var vx=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=iy(),this.sortedSet=new Cr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var yx=class{constructor(){this.fa=new Cr(tt.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ct(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},im=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,vx.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var _M=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},wM=class{constructor(){this.queries=r7(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=it(t),o=i.queries;i.queries=r7(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new je(Ce.ABORTED,"Firestore shutting down"))}};function r7(){return new dc(n=>Z7(n),qy)}function wN(n,e){return ee(this,null,function*(){let t=it(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new _M,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=pm(s,`Initialization of query '${Pg(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&xN(t)})}function bN(n,e){return ee(this,null,function*(){let t=it(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function tie(n,e){let t=it(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&xN(t)}function nie(n,e,t){let r=it(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function xN(n){n.Da.forEach(e=>{e.next()})}var bM,i7;(i7=bM||(bM={})).Fa="default",i7.Cache="cache";var Ly=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new im(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=im.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==bM.Cache}};var xM=class{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}};var _x=class{constructor(e){this.serializer=e}Qs(e){return rl(this.serializer,e)}$s(e){return e.metadata.exists?yj(this.serializer,e.document,!1):_i.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return oi(e)}},CM=class{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=Zj(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=En.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){let t=new Map,r=new _x(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Qs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||fn()).add(o);t.set(s,a)}}return t}za(e){return ee(this,null,function*(){let t=yield zre(e,new _x(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(let i of this.Ua)yield qre(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}})}};function Zj(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var wx=class{constructor(e){this.key=e}},bx=class{constructor(e){this.key=e}},xx=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fn(),this.mutatedKeys=fn(),this.Xa=J7(e),this.eu=new vx(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new yx,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,p)=>{let m=i.get(u),g=$y(this.query,p)?p:null,x=!!m&&this.mutatedKeys.has(m.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),D=!1;m&&g?m.data.isEqual(g.data)?x!==E&&(r.track({type:3,doc:g}),D=!0):this.iu(m,g)||(r.track({type:2,doc:g}),D=!0,(c&&this.Xa(g,c)>0||l&&this.Xa(g,l)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),D=!0):m&&!g&&(r.track({type:1,doc:m}),D=!0,(c||l)&&(a=!0)),D&&(g?(s=s.add(g),o=E?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((u,p)=>(function(g,x){let E=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct(20277,{At:D})}};return E(g)-E(x)})(u.type,p.type)||this.Xa(u.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new im(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new yx,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fn(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new bx(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new wx(r))}),t}uu(e){this.Ha=e.qs,this.Za=fn();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return im.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Fd="SyncEngine",EM=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},IM=class{constructor(e){this.key=e,this.lu=!1}},SM=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new dc(a=>Z7(a),qy),this.Tu=new Map,this.Iu=new Set,this.du=new Cr(tt.comparator),this.Eu=new Map,this.Au=new Py,this.Ru={},this.Vu=new Map,this.mu=em.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function rie(n,e,t=!0){return ee(this,null,function*(){let r=zx(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield Xj(r,e,t,!0),i})}function iie(n,e){return ee(this,null,function*(){let t=zx(n);yield Xj(t,e,!0,!1)})}function Xj(n,e,t,r){return ee(this,null,function*(){let i=yield tm(n.localStore,Wo(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield CN(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Ux(n.remoteStore,i),a})}function CN(n,e,t,r,i){return ee(this,null,function*(){n.gu=(p,m,g)=>(function(E,D,N,K){return ee(this,null,function*(){let j=D.view.nu(N);j.Ds&&(j=yield ux(E.localStore,D.query,!1).then(({documents:z})=>D.view.nu(z,j)));let G=K&&K.targetChanges.get(D.targetId),oe=K&&K.targetMismatches.get(D.targetId)!=null,fe=D.view.applyChanges(j,E.isPrimaryClient,G,oe);return AM(E,D.targetId,fe._u),fe.snapshot})})(n,p,m,g);let o=yield ux(n.localStore,e,!0),s=new xx(e,o.qs),a=s.nu(o.documents),c=Ty.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);AM(n,t,l._u);let u=new EM(e,t,s);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function oie(n,e,t){return ee(this,null,function*(){let r=it(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!qy(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield nm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&rm(r.remoteStore,i.targetId),om(r,i.targetId)}).catch(kd))):(om(r,i.targetId),yield nm(r.localStore,i.targetId,!0))})}function sie(n,e){return ee(this,null,function*(){let t=it(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),rm(t.remoteStore,r.targetId))})}function aie(n,e,t){return ee(this,null,function*(){let r=AN(n);try{let i=yield(function(s,a){let c=it(s),l=gr.now(),u=a.reduce((g,x)=>g.add(x.key),fn()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=ys(),E=fn();return c.Os.getEntries(g,u).next(D=>{x=D,x.forEach((N,K)=>{K.isValidDocument()||(E=E.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,x)).next(D=>{p=D;let N=[];for(let K of a){let j=wre(K,p.get(K.key).overlayedDocument);j!=null&&N.push(new fc(K.key,j,$7(j.value.mapValue),Gr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,N,a)}).next(D=>{m=D;let N=D.applyToLocalDocumentSet(p,E);return c.documentOverlayCache.saveOverlays(g,D.batchId,N)})}).then(()=>({batchId:m.batchId,changes:tj(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new Cr(Ht)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield cu(r,i.changes),yield fm(r.remoteStore)}catch(i){let o=pm(i,"Failed to persist write");t.reject(o)}})}function Jj(n,e){return ee(this,null,function*(){let t=it(n);try{let r=yield Bre(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(_t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?_t(s.lu,14607):i.removedDocuments.size>0&&(_t(s.lu,42227),s.lu=!1))}),yield cu(t,r,e)}catch(r){yield kd(r)}})}function o7(n,e,t){let r=it(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=it(s);c.onlineState=a;let l=!1;c.queries.forEach((u,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&xN(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cie(n,e,t){return ee(this,null,function*(){let r=it(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Cr(tt.comparator);s=s.insert(o,_i.newNoDocument(o,Dt.min()));let a=fn().add(o),c=new Ay(Dt.min(),new Map,new Cr(Ht),s,a);yield Jj(r,c),r.du=r.du.remove(o),r.Eu.delete(e),SN(r)}else yield nm(r.localStore,e,!1).then(()=>om(r,e,t)).catch(kd)})}function lie(n,e){return ee(this,null,function*(){let t=it(n),r=e.batch.batchId;try{let i=yield jre(t.localStore,e);IN(t,r,null),EN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield cu(t,i)}catch(i){yield kd(i)}})}function uie(n,e,t){return ee(this,null,function*(){let r=it(n);try{let i=yield(function(s,a){let c=it(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(_t(p!==null,37113),u=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(r.localStore,e);IN(r,e,t),EN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield cu(r,i)}catch(i){yield kd(i)}})}function die(n,e){return ee(this,null,function*(){let t=it(n);Ld(t.remoteStore)||He(Fd,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield(function(s){let a=it(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))})(t.localStore);if(r===_d)return void e.resolve();let i=t.Vu.get(r)||[];i.push(e),t.Vu.set(r,i)}catch(r){let i=pm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function EN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function IN(n,e,t){let r=it(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function om(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||eB(n,r)})}function eB(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(rm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),SN(n))}function AM(n,e,t){for(let r of t)r instanceof wx?(n.Au.addReference(r.key,e),fie(n,r)):r instanceof bx?(He(Fd,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||eB(n,r.key)):ct(19791,{yu:r})}function fie(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(He(Fd,"New document in limbo: "+t),n.Iu.add(r),SN(n))}function SN(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new tt(En.fromString(e)),r=n.mu.next();n.Eu.set(r,new IM(t)),n.du=n.du.insert(t,r),Ux(n.remoteStore,new Jg(Wo(um(t.path)),r,"TargetPurposeLimboResolution",Qs.ue))}}function cu(n,e,t){return ee(this,null,function*(){let r=it(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=nM.Es(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,l){return ee(this,null,function*(){let u=it(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>we.forEach(l,m=>we.forEach(m.Is,g=>u.persistence.referenceDelegate.addReference(p,m.targetId,g)).next(()=>we.forEach(m.ds,g=>u.persistence.referenceDelegate.removeReference(p,m.targetId,g)))))}catch(p){if(!Rd(p))throw p;He(mN,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let g=u.Fs.get(m),x=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(x);u.Fs=u.Fs.insert(m,E)}}})})(r.localStore,o))})}function hie(n,e){return ee(this,null,function*(){let t=it(n);if(!t.currentUser.isEqual(e)){He(Fd,"User change. New user:",e.toKey());let r=yield Lj(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new je(Ce.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cu(t,r.Bs)}})}function pie(n,e){let t=it(n),r=t.Eu.get(e);if(r&&r.lu)return fn().add(r.key);{let i=fn(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function gie(n,e){return ee(this,null,function*(){let t=it(n),r=yield ux(t.localStore,e.query,!0),i=e.view.uu(r);return t.isPrimaryClient&&AM(t,e.targetId,i._u),i})}function mie(n,e){return ee(this,null,function*(){let t=it(n);return Bj(t.localStore,e).then(r=>cu(t,r))})}function vie(n,e,t,r){return ee(this,null,function*(){let i=it(n),o=yield(function(a,c){let l=it(a),u=it(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>u.Xn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):we.resolve(null)))})(i.localStore,e);o!==null?(t==="pending"?yield fm(i.remoteStore):t==="acknowledged"||t==="rejected"?(IN(i,e,r||null),EN(i,e),(function(a,c){it(it(a).mutationQueue).rr(c)})(i.localStore,e)):ct(6720,"Unknown batchState",{wu:t}),yield cu(i,o)):He(Fd,"Cannot apply mutation batch with id: "+e)})}function yie(n,e){return ee(this,null,function*(){let t=it(n);if(zx(t),AN(t),e===!0&&t.fu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield s7(t,r.toArray());t.fu=!0,yield vM(t.remoteStore,!0);for(let o of i)Ux(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){let r=[],i=Promise.resolve();t.Tu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(om(t,s),nm(t.localStore,s,!0))),rm(t.remoteStore,s)}),yield i,yield s7(t,r),(function(s){let a=it(s);a.Eu.forEach((c,l)=>{rm(a.remoteStore,l)}),a.Au.jr(),a.Eu=new Map,a.du=new Cr(tt.comparator)})(t),t.fu=!1,yield vM(t.remoteStore,!1)}})}function s7(n,e,t){return ee(this,null,function*(){let r=it(n),i=[],o=[];for(let s of e){let a,c=r.Tu.get(s);if(c&&c.length!==0){a=yield tm(r.localStore,Wo(c[0]));for(let l of c){let u=r.Pu.get(l),p=yield gie(r,u);p.snapshot&&o.push(p.snapshot)}}else{let l=yield jj(r.localStore,s);a=yield tm(r.localStore,l),yield CN(r,tB(l),s,!1,a.resumeToken)}i.push(a)}return r.hu.J_(o),i})}function tB(n){return Q7(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _ie(n){return(function(t){return it(it(t).persistence).Ps()})(it(n).localStore)}function wie(n,e,t,r){return ee(this,null,function*(){let i=it(n);if(i.fu)return void He(Fd,"Ignoring unexpected query state notification.");let o=i.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Bj(i.localStore,X7(o[0])),a=Ay.createSynthesizedRemoteEventForCurrentChange(e,t==="current",si.EMPTY_BYTE_STRING);yield cu(i,s,a);break}case"rejected":yield nm(i.localStore,e,!0),om(i,e,r);break;default:ct(64155,t)}})}function bie(n,e,t){return ee(this,null,function*(){let r=zx(n);if(r.fu){for(let i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){He(Fd,"Adding an already active target "+i);continue}let o=yield jj(r.localStore,i),s=yield tm(r.localStore,o);yield CN(r,tB(o),s.targetId,!1,s.resumeToken),Ux(r.remoteStore,s)}for(let i of t)r.Tu.has(i)&&(yield nm(r.localStore,i,!1).then(()=>{rm(r.remoteStore,i),om(r,i)}).catch(kd))}})}function zx(n){let e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cie.bind(null,e),e.hu.J_=tie.bind(null,e.eventManager),e.hu.pu=nie.bind(null,e.eventManager),e}function AN(n){let e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uie.bind(null,e),e}function xie(n,e,t){let r=it(n);(function(o,s,a){return ee(this,null,function*(){try{let c=yield s.getMetadata();if(yield(function(g,x){let E=it(g),D=oi(x.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",N=>E.Ti.getBundleMetadata(N,x.id)).then(N=>!!N&&N.createTime.compareTo(D)>=0)})(o.localStore,c))return yield s.close(),a._completeWith((function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(Zj(c));let l=new CM(c,s.serializer),u=yield s.Su();for(;u;){let m=yield l.Wa(u);m&&a._updateProgress(m),u=yield s.Su()}let p=yield l.za(o.localStore);return yield cu(o,p.Ja,void 0),yield(function(g,x){let E=it(g);return E.persistence.runTransaction("Save bundle","readwrite",D=>E.Ti.saveBundleMetadata(D,x))})(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.ja)}catch(c){return ws(Fd,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var TN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return ee(this,null,function*(){this.serializer=Hy(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return Oj(this.persistence,new lx,t.initialUser,this.serializer)}Du(t){return new ky(ax.Vi,this.serializer)}bu(t){return new hx}terminate(){return ee(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),TM=class extends TN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){_t(this.persistence.referenceDelegate instanceof cx,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ix(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?vs.withCacheSize(this.cacheSizeBytes):vs.DEFAULT;return new ky(r=>cx.Vi(r,t),this.serializer)}},Cx=class n extends TN{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return ee(this,null,function*(){yield FE(n.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield AN(this.Mu.syncEngine),yield fm(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return Oj(this.persistence,new lx,e.initialUser,this.serializer)}Cu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new ix(r,e.asyncQueue,t)}Fu(e,t){let r=new tD(t,this.persistence);return new eD(e.asyncQueue,r)}Du(e){let t=gN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?vs.withCacheSize(this.cacheSizeBytes):vs.DEFAULT;return new tM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Hj(),N2(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new hx}},DM=class n extends Cx{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return ee(this,null,function*(){yield FE(n.prototype,this,"initialize").call(this,e);let t=this.Mu.syncEngine;this.sharedClientState instanceof hy&&(this.sharedClientState.syncEngine={Do:vie.bind(null,t),vo:wie.bind(null,t),Co:bie.bind(null,t),Ps:_ie.bind(null,t),bo:mie.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.ji(r=>ee(this,null,function*(){yield yie(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}bu(e){let t=Hj();if(!hy.C(t))throw new je(Ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=gN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hy(t,e.asyncQueue,r,e.clientId,e.initialUser)}},DN=(()=>{class n{initialize(t,r){return ee(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>o7(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hie.bind(null,this.syncEngine),yield vM(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new wM})()}createDatastore(t){let r=Hy(t.databaseInfo.databaseId),i=(function(s){return new uM(s)})(t.databaseInfo);return(function(s,a,c,l){return new pM(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new mM(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>o7(this.syncEngine,r,0),(function(){return px.C()?new px:new sM})())}createSyncEngine(t,r){return(function(o,s,a,c,l,u,p){let m=new SM(o,s,a,c,l,u);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return ee(this,null,function*(){var t,r;yield(function(o){return ee(this,null,function*(){let s=it(o);He(vh,"RemoteStore shutting down."),s.Ia.add(5),yield dm(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function a7(n,e=10240){let t=0;return{read(){return ee(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return ee(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var sm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var MM=class{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new Oi,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}getMetadata(){return ee(this,null,function*(){return this.metadata.promise})}Su(){return ee(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return ee(this,null,function*(){let e=yield this.ku();if(e===null)return null;let t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);let i=yield this.Qu(r);return new xM(JSON.parse(i),e.length+r)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return ee(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Qu(e){return ee(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");let t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return ee(this,null,function*(){let e=yield this.Nu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var NM=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return ee(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new je(Ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield(function(i,o){return ee(this,null,function*(){let s=it(i),a={documents:o.map(p=>Dy(s.serializer,p))},c=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,En.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=Sre(s.serializer,p);l.set(m.key.toString(),m)});let u=[];return o.forEach(p=>{let m=l.get(p.toString());_t(!!m,55234,{key:p}),u.push(m)}),u})})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Md(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return ee(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=tt.fromPath(r);this.mutations.push(new Ey(i,this.precondition(i)))}),yield(function(r,i){return ee(this,null,function*(){let o=it(r),s={writes:i.map(a=>My(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,En.emptyPath(),s)})})(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct(50498,{Wu:e.constructor.name});t=Dt.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new je(Ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Gr.exists(!1):Gr.updateTime(t):Gr.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new je(Ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gr.updateTime(t)}return Gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var PM=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new Oy(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>ee(this,null,function*(){let e=new NM(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!By(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!dj(t)}return!1}};var Pd="FirestoreClient",kM=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vi.UNAUTHENTICATED,this.clientId=py.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>ee(this,null,function*(){He(Pd,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(He(Pd,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>ee(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=pm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function qT(n,e){return ee(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),He(Pd,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>ee(null,null,function*(){r.isEqual(i)||(yield Lj(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{ws("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{He("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ws("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function c7(n,e){return ee(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield MN(n);He(Pd,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>n7(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>n7(e.remoteStore,i)),n._onlineComponents=e})}function MN(n){return ee(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){He(Pd,"Using user provided OfflineComponentProvider");try{yield qT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ce.FAILED_PRECONDITION||i.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ws("Error using user provided cache. Falling back to memory cache: "+t),yield qT(n,new TN)}}else He(Pd,"Using default OfflineComponentProvider"),yield qT(n,new TM(void 0));return n._offlineComponents})}function qx(n){return ee(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(He(Pd,"Using user provided OnlineComponentProvider"),yield c7(n,n._uninitializedComponentsProvider._online)):(He(Pd,"Using default OnlineComponentProvider"),yield c7(n,new DN))),n._onlineComponents})}function nB(n){return MN(n).then(e=>e.persistence)}function NN(n){return MN(n).then(e=>e.localStore)}function rB(n){return qx(n).then(e=>e.remoteStore)}function PN(n){return qx(n).then(e=>e.syncEngine)}function Cie(n){return qx(n).then(e=>e.datastore)}function am(n){return ee(this,null,function*(){let e=yield qx(n),t=e.eventManager;return t.onListen=rie.bind(null,e.syncEngine),t.onUnlisten=oie.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iie.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sie.bind(null,e.syncEngine),t})}function Eie(n){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){let e=yield nB(n),t=yield rB(n);return e.setNetworkEnabled(!0),(function(i){let o=it(i);return o.Ia.delete(0),Gy(o)})(t)}))}function Iie(n){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){let e=yield nB(n),t=yield rB(n);return e.setNetworkEnabled(!1),(function(i){return ee(this,null,function*(){let o=it(i);o.Ia.add(0),yield dm(o),o.Aa.set("Offline")})})(t)}))}function Sie(n,e){let t=new Oi;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o,s){return ee(this,null,function*(){try{let a=yield(function(l,u){let p=it(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,u))})(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new je(Ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=pm(a,`Failed to get document '${o} from cache`);s.reject(c)}})})(yield NN(n),e,t)})),t.promise}function iB(n,e,t={}){let r=new Oi;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(o,s,a,c,l){let u=new sm({next:m=>{u.Ou(),s.enqueueAndForget(()=>bN(o,p));let g=m.docs.has(a);!g&&m.fromCache?l.reject(new je(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?l.reject(new je(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Ly(um(a.path),u,{includeMetadataChanges:!0,ka:!0});return wN(o,p)})(yield am(n),n.asyncQueue,e,t,r)})),r.promise}function Aie(n,e){let t=new Oi;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o,s){return ee(this,null,function*(){try{let a=yield ux(i,o,!0),c=new xx(o,a.qs),l=c.nu(a.documents),u=c.applyChanges(l,!1);s.resolve(u.snapshot)}catch(a){let c=pm(a,`Failed to execute query '${o} against cache`);s.reject(c)}})})(yield NN(n),e,t)})),t.promise}function oB(n,e,t={}){let r=new Oi;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(o,s,a,c,l){let u=new sm({next:m=>{u.Ou(),s.enqueueAndForget(()=>bN(o,p)),m.fromCache&&c.source==="server"?l.reject(new je(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Ly(a,u,{includeMetadataChanges:!0,ka:!0});return wN(o,p)})(yield am(n),n.asyncQueue,e,t,r)})),r.promise}function Tie(n,e){let t=new sm(e);return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o){it(i).Da.add(o),o.next()})(yield am(n),t)})),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o){it(i).Da.delete(o)})(yield am(n),t)}))}}function Die(n,e,t,r){let i=(function(s,a){let c;return c=typeof s=="string"?ZM().encode(s):s,(function(u,p){return new MM(u,p)})((function(u,p){if(u instanceof Uint8Array)return a7(u,p);if(u instanceof ArrayBuffer)return a7(new Uint8Array(u),p);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(t,Hy(e));n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){xie(yield PN(n),i,r)}))}function Mie(n,e){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){return(function(r,i){let o=it(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))})(yield NN(n),e)}))}function sB(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var l7=new Map;var aB="firestore.googleapis.com",u7=!0,Ex=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new je(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aB,this.ssl=u7}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:u7;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Fre)throw new je(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sB((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new je(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new je(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new je(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},yh=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ex({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ex(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $T;switch(r.type){case"firstParty":return new KT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new je(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return ee(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=l7.get(t);r&&(He("ComponentProvider","Removing Datastore"),l7.delete(t),r.terminate())})(this),Promise.resolve()}};function $x(n,e,t,r={}){var i;n=Pn(n,yh);let o=sp(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(s1(`https://${c}`),c1("Firestore",!0)),s.host!==aB&&s.host!==c&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!lp(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,p;if(typeof r.mockUserToken=="string")u=r.mockUserToken,p=vi.MOCK_USER;else{u=a1(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new je(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new vi(m)}n._authCredentials=new HT(new P2(u,p))}}var ro=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Yn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new il(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(jy(t,n._jsonSchema))return new n(e,r||null,new tt(En.fromString(t.referencePath)))}};Yn._jsonSchemaVersion="firestore/documentReference/1.0",Yn._jsonSchema={type:yi("string",Yn._jsonSchemaVersion),referencePath:yi("string")};var il=class n extends ro{constructor(e,t,r){super(e,t,um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new tt(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Wy(n,e,...t){if(n=wn(n),XM("collection","path",e),n instanceof yh){let r=En.fromString(e,...t);return iV(r),new il(n,null,r)}{if(!(n instanceof Yn||n instanceof il))throw new je(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(En.fromString(e,...t));return iV(r),new il(n.firestore,null,r)}}function kN(n,e){if(n=Pn(n,yh),XM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new je(Ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ro(n,null,(function(r){return new uc(En.emptyPath(),r)})(e))}function bh(n,e,...t){if(n=wn(n),arguments.length===1&&(e=py.newId()),XM("doc","path",e),n instanceof yh){let r=En.fromString(e,...t);return rV(r),new Yn(n,null,new tt(r))}{if(!(n instanceof Yn||n instanceof il))throw new je(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(En.fromString(e,...t));return rV(r),new Yn(n.firestore,n instanceof il?n.converter:null,new tt(r))}}function Ky(n,e){return n=wn(n),e=wn(e),(n instanceof Yn||n instanceof il)&&(e instanceof Yn||e instanceof il)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Hx(n,e){return n=wn(n),e=wn(e),n instanceof ro&&e instanceof ro&&n.firestore===e.firestore&&qy(n._query,e._query)&&n.converter===e.converter}var d7="AsyncQueue",Ix=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Oy(this,"async_queue_retry"),this.oc=()=>{let r=N2();r&&He(d7,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=N2();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=N2();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Oi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return ee(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Rd(e))throw e;He(d7,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ri("INTERNAL UNHANDLED ERROR: ",f7(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=yM.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ct(47125,{hc:f7(this.tc)})}verifyOperationInProgress(){}Pc(){return ee(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function f7(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function RM(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var OM=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var cB=-1,Br=class extends yh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ix,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return ee(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ix(e),this._firestoreClient=void 0,yield e}})}};function lB(n,e){let t=typeof n=="object"?n:Pc(),r=typeof n=="string"?n:e||z2,i=$a(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=o1("firestore");o&&$x(i,...o)}return i}function io(n){if(n._terminated)throw new je(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||uB(n),n._firestoreClient}function uB(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,l,u){return new oD(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,sB(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new kM(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}function RN(n,e){ws("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return dB(n,DN.provider,{build:r=>new Cx(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function ON(n){return ee(this,null,function*(){ws("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();dB(n,DN.provider,{build:t=>new DM(t,e.cacheSizeBytes)})})}function dB(n,e,t){if((n=Pn(n,Br))._firestoreClient||n._terminated)throw new je(Ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new je(Ce.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},uB(n)}function LN(n){if(n._initialized&&!n._terminated)throw new je(Ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Oi;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>ee(null,null,function*(){try{yield(function(r){return ee(this,null,function*(){if(!Cd.C())return Promise.resolve();let i=r+Rj;yield Cd.delete(i)})})(gN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function FN(n){return(function(t){let r=new Oi;return t.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return die(yield PN(t),r)})),r.promise})(io(n=Pn(n,Br)))}function VN(n){return Eie(io(n=Pn(n,Br)))}function jN(n){return Iie(io(n=Pn(n,Br)))}function BN(n,e){let t=io(n=Pn(n,Br)),r=new OM;return Die(t,n._databaseId,e,r),r}function UN(n,e){return Mie(io(n=Pn(n,Br)),e).then(t=>t?new ro(n,null,t.query):null)}var Xs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(si.fromBase64String(e))}catch(t){throw new je(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jy(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Xs._jsonSchemaVersion="firestore/bytes/1.0",Xs._jsonSchema={type:yi("string",Xs._jsonSchemaVersion),bytes:yi("string")};var hc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new je(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var su=class{constructor(e){this._methodName=e}};var ol=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(jy(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ol._jsonSchemaVersion="firestore/geoPoint/1.0",ol._jsonSchema={type:yi("string",ol._jsonSchemaVersion),latitude:yi("number"),longitude:yi("number")};var wd=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jy(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new je(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};wd._jsonSchemaVersion="firestore/vectorValue/1.0",wd._jsonSchema={type:yi("string",wd._jsonSchemaVersion),vectorValues:yi("object")};var Nie=/^__.*__$/,LM=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dd(e,this.data,t,this.fieldTransforms)}},Sx=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fc(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function fB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct(40011,{Ec:n})}}var Ax=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Tx(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(fB(this.Ec)&&Nie.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},FM=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hy(e)}Dc(e,t,r,i=!1){return new Ax({Ec:e,methodName:t,bc:r,path:ii.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function xh(n){let e=n._freezeSettings(),t=Hy(n._databaseId);return new FM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Gx(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);$N("Data must be an object, but it was:",s,r);let a=gB(r,s),c,l;if(o.merge)c=new Zs(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let p of o.mergeFields){let m=zM(e,p,t);if(!s.contains(m))throw new je(Ce.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);vB(u,m)||u.push(m)}c=new Zs(u),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new LM(new xo(a),c,l)}var Fy=class n extends su{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function hB(n,e,t){return new Ax({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var VM=class n extends su{_toFieldTransform(e){return new ph(e.path,new Ad)}isEqual(e){return e instanceof n}},jM=class n extends su{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=hB(this,e,!0),r=this.vc.map(o=>Ch(o,t)),i=new iu(r);return new ph(e.path,i)}isEqual(e){return e instanceof n&&lp(this.vc,e.vc)}},BM=class n extends su{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=hB(this,e,!0),r=this.vc.map(o=>Ch(o,t)),i=new ou(r);return new ph(e.path,i)}isEqual(e){return e instanceof n&&lp(this.vc,e.vc)}},UM=class n extends su{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new Td(e.serializer,ij(e.serializer,this.Cc));return new ph(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function zN(n,e,t,r){let i=n.Dc(1,e,t);$N("Data must be an object, but it was:",i,r);let o=[],s=xo.empty();Od(r,(c,l)=>{let u=HN(e,c,t);l=wn(l);let p=i.gc(u);if(l instanceof Fy)o.push(u);else{let m=Ch(l,p);m!=null&&(o.push(u),s.set(u,m))}});let a=new Zs(o);return new Sx(s,a,i.fieldTransforms)}function qN(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[zM(e,r,t)],c=[i];if(o.length%2!=0)throw new je(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(zM(e,o[m])),c.push(o[m+1]);let l=[],u=xo.empty();for(let m=a.length-1;m>=0;--m)if(!vB(l,a[m])){let g=a[m],x=c[m];x=wn(x);let E=s.gc(g);if(x instanceof Fy)l.push(g);else{let D=Ch(x,E);D!=null&&(l.push(g),u.set(g,D))}}let p=new Zs(l);return new Sx(u,p,s.fieldTransforms)}function pB(n,e,t,r=!1){return Ch(t,n.Dc(r?4:3,e))}function Ch(n,e){if(mB(n=wn(n)))return $N("Unsupported field value:",e,n),gB(n,e);if(n instanceof su)return(function(r,i){if(!fB(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=Ch(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ij(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=gr.fromDate(r);return{timestampValue:Xg(i.serializer,o)}}if(r instanceof gr){let o=new gr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xg(i.serializer,o)}}if(r instanceof ol)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xs)return{bytesValue:hj(i.serializer,r._byteString)};if(r instanceof Yn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fN(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wd)return(function(s,a){return{mapValue:{fields:{[sN]:{stringValue:aN},[Wg]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return dN(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Rx(r)}`)})(n,e)}function gB(n,e){let t={};return O7(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Od(n,(r,i)=>{let o=Ch(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function mB(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gr||n instanceof ol||n instanceof Xs||n instanceof Yn||n instanceof su||n instanceof wd)}function $N(n,e,t){if(!mB(t)||!y7(t)){let r=Rx(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function zM(n,e,t){if((e=wn(e))instanceof hc)return e._internalPath;if(typeof e=="string")return HN(n,e);throw Tx("Field path arguments must be of type string or ",n,!1,void 0,t)}var Pie=new RegExp("[~\\*/\\[\\]]");function HN(n,e,t){if(e.search(Pie)>=0)throw Tx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hc(...e.split("."))._internalPath}catch{throw Tx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tx(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new je(Ce.INVALID_ARGUMENT,a+n+c)}function vB(n,e){return n.some(t=>t.isEqual(e))}var _h=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Wx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qM=class extends _h{data(){return super.data()}};function Wx(n,e){return typeof e=="string"?HN(n,e):e instanceof hc?e._internalPath:e._delegate._internalPath}function yB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new je(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vy=class{},wh=class extends Vy{};function pc(n,e,...t){let r=[];e instanceof Vy&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof $M).length,a=o.filter(c=>c instanceof Dx).length;if(s>1||s>0&&a>0)throw new je(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Dx=class n extends wh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return wB(e._query,t),new ro(e.firestore,e.converter,yD(e._query,t))}_parse(e){let t=xh(e.firestore);return(function(o,s,a,c,l,u,p){let m;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new je(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){p7(p,u);let x=[];for(let E of p)x.push(h7(c,o,E));m={arrayValue:{values:x}}}else m=h7(c,o,p)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||p7(p,u),m=pB(a,s,p,u==="in"||u==="not-in");return xn.create(l,u,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Kx(n,e,t){let r=e,i=Wx("where",n);return Dx._create(i,r,t)}var $M=class n extends Vy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Kn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)wB(s,c),s=yD(s,c)})(e._query,t),new ro(e.firestore,e.converter,yD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var HM=class n extends wh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new je(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new je(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fh(o,s)})(e._query,this._field,this._direction);return new ro(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new uc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function Yx(n,e="asc"){let t=e,r=Wx("orderBy",n);return HM._create(r,t)}var Mx=class n extends wh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ro(e.firestore,e.converter,W2(e._query,this._limit,this._limitType))}};function GN(n){return _7("limit",n),Mx._create("limit",n,"F")}function WN(n){return _7("limitToLast",n),Mx._create("limitToLast",n,"L")}var Nx=class n extends wh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=_B(e,this.type,this._docOrFields,this._inclusive);return new ro(e.firestore,e.converter,(function(i,o){return new uc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function KN(...n){return Nx._create("startAt",n,!0)}function YN(...n){return Nx._create("startAfter",n,!1)}var Px=class n extends wh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=_B(e,this.type,this._docOrFields,this._inclusive);return new ro(e.firestore,e.converter,(function(i,o){return new uc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,t))}};function QN(...n){return Px._create("endBefore",n,!1)}function ZN(...n){return Px._create("endAt",n,!0)}function _B(n,e,t,r){if(t[0]=wn(t[0]),t[0]instanceof _h)return(function(o,s,a,c,l){if(!c)throw new je(Ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let p of Vg(o))if(p.field.isKeyField())u.push(dh(s,c.key));else{let m=c.data.field(p.field);if(Vx(m))throw new je(Ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let g=p.field.canonicalString();throw new je(Ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}u.push(m)}return new al(u,l)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=xh(n.firestore);return(function(s,a,c,l,u,p){let m=s.explicitOrderBy;if(u.length>m.length)throw new je(Ce.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let x=0;x<u.length;x++){let E=u[x];if(m[x].field.isKeyField()){if(typeof E!="string")throw new je(Ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof E}`);if(!lN(s)&&E.indexOf("/")!==-1)throw new je(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${E}' contains a slash.`);let D=s.path.child(En.fromString(E));if(!tt.isDocumentKey(D))throw new je(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);let N=new tt(D);g.push(dh(a,N))}else{let D=pB(c,l,E);g.push(D)}}return new al(g,p)})(n._query,n.firestore._databaseId,i,e,t,r)}}function h7(n,e,t){if(typeof(t=wn(t))=="string"){if(t==="")throw new je(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lN(e)&&t.indexOf("/")!==-1)throw new je(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(En.fromString(t));if(!tt.isDocumentKey(r))throw new je(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dh(n,new tt(r))}if(t instanceof Yn)return dh(n,t._key);throw new je(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rx(t)}.`)}function p7(n,e){if(!Array.isArray(n)||n.length===0)throw new je(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wB(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new je(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new je(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var cm=class{convertValue(e,t="none"){switch(Id(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ru(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ct(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Od(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Wg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Mr(s.doubleValue));return new wd(o)}convertGeoPoint(e){return new ol(Mr(e.latitude),Mr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=jx(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(by(e));default:return null}}convertTimestamp(e){let t=nu(e);return new gr(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=En.fromString(e);_t(Ej(r),9688,{name:e});let i=new Ed(r.get(1),r.get(3)),o=new tt(r.popFirst(5));return i.isEqual(t)||ri(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Qx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var GM=class extends cm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}};var tu=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ko=class n extends _h{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Wx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new je(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ko._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ko._jsonSchema={type:yi("string",Ko._jsonSchemaVersion),bundleSource:yi("string","DocumentSnapshot"),bundleName:yi("string"),bundle:yi("string")};var bd=class extends Ko{data(e={}){return super.data(e)}},_s=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bd(this._firestore,this._userDataWriter,r.key,r,new tu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new bd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new bd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:kie(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new je(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=py.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function kie(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct(61501,{type:n})}}function Zx(n,e){return n instanceof Ko&&e instanceof Ko?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _s&&e instanceof _s&&n._firestore===e._firestore&&Hx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Xx(n){n=Pn(n,Yn);let e=Pn(n.firestore,Br);return iB(io(e),n._key).then(t=>rP(e,n,t))}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:yi("string",_s._jsonSchemaVersion),bundleSource:yi("string","QuerySnapshot"),bundleName:yi("string"),bundle:yi("string")};var au=class extends cm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}};function XN(n){n=Pn(n,Yn);let e=Pn(n.firestore,Br),t=io(e),r=new au(e);return Sie(t,n._key).then(i=>new Ko(e,r,n._key,i,new tu(i!==null&&i.hasLocalMutations,!0),n.converter))}function JN(n){n=Pn(n,Yn);let e=Pn(n.firestore,Br);return iB(io(e),n._key,{source:"server"}).then(t=>rP(e,n,t))}function Jx(n){n=Pn(n,ro);let e=Pn(n.firestore,Br),t=io(e),r=new au(e);return yB(n._query),oB(t,n._query).then(i=>new _s(e,r,n,i))}function eP(n){n=Pn(n,ro);let e=Pn(n.firestore,Br),t=io(e),r=new au(e);return Aie(t,n._query).then(i=>new _s(e,r,n,i))}function tP(n){n=Pn(n,ro);let e=Pn(n.firestore,Br),t=io(e),r=new au(e);return oB(t,n._query,{source:"server"}).then(i=>new _s(e,r,n,i))}function Yy(n,e,t){n=Pn(n,Yn);let r=Pn(n.firestore,Br),i=Qx(n.converter,e,t);return mm(r,[Gx(xh(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Gr.none())])}function Qy(n,e,t,...r){n=Pn(n,Yn);let i=Pn(n.firestore,Br),o=xh(i),s;return s=typeof(e=wn(e))=="string"||e instanceof hc?qN(o,"updateDoc",n._key,e,t,r):zN(o,"updateDoc",n._key,e),mm(i,[s.toMutation(n._key,Gr.exists(!0))])}function eC(n){return mm(Pn(n.firestore,Br),[new Md(n._key,Gr.none())])}function tC(n,e){let t=Pn(n.firestore,Br),r=bh(n),i=Qx(n.converter,e);return mm(t,[Gx(xh(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Gr.exists(!1))]).then(()=>r)}function gm(n,...e){var t,r,i;n=wn(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||RM(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(RM(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,u;if(n instanceof Yn)l=Pn(n.firestore,Br),u=um(n._key.path),c={next:p=>{e[s]&&e[s](rP(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Pn(n,ro);l=Pn(p.firestore,Br),u=p._query;let m=new au(l);c={next:g=>{e[s]&&e[s](new _s(l,m,p,g))},error:e[s+1],complete:e[s+2]},yB(n._query)}return(function(m,g,x,E){let D=new sm(E),N=new Ly(g,D,x);return m.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return wN(yield am(m),N)})),()=>{D.Ou(),m.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return bN(yield am(m),N)}))}})(io(l),u,a,c)}function nP(n,e){return Tie(io(n=Pn(n,Br)),RM(e)?e:{next:e})}function mm(n,e){return(function(r,i){let o=new Oi;return r.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return aie(yield PN(r),i,o)})),o.promise})(io(n),e)}function rP(n,e,t){let r=t.docs.get(e._key),i=new au(n);return new Ko(n,i,e._key,r,new tu(t.hasPendingWrites,t.fromCache),e.converter)}var Rie={maxAttempts:5};var kx=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xh(e)}set(e,t,r){this._verifyNotCommitted();let i=yd(e,this._firestore),o=Qx(i.converter,t,r),s=Gx(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Gr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=yd(e,this._firestore),s;return s=typeof(t=wn(t))=="string"||t instanceof hc?qN(this._dataReader,"WriteBatch.update",o._key,t,r,i):zN(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Gr.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=yd(e,this._firestore);return this._mutations=this._mutations.concat(new Md(t._key,Gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new je(Ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function yd(n,e){if((n=wn(n)).firestore!==e)throw new je(Ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var WM=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xh(e)}get(e){let t=yd(e,this._firestore),r=new GM(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return ct(24041);let o=i[0];if(o.isFoundDocument())return new _h(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new _h(this._firestore,r,t._key,null,t.converter);throw ct(18433,{doc:o})})}set(e,t,r){let i=yd(e,this._firestore),o=Qx(i.converter,t,r),s=Gx(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=yd(e,this._firestore),s;return s=typeof(t=wn(t))=="string"||t instanceof hc?qN(this._dataReader,"Transaction.update",o._key,t,r,i):zN(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=yd(e,this._firestore);return this._transaction.delete(t._key),this}};var KM=class extends WM{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=yd(e,this._firestore),r=new au(this._firestore);return super.get(e).then(i=>new Ko(this._firestore,r,t._key,i._document,new tu(!1,!1),t.converter))}};function iP(n,e,t){n=Pn(n,Br);let r=Object.assign(Object.assign({},Rie),t);return(function(o){if(o.maxAttempts<1)throw new je(Ce.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let c=new Oi;return o.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){let l=yield Cie(o);new PM(o.asyncQueue,l,a,s,c).zu()})),c.promise})(io(n),i=>e(new KM(n,i)),r)}function oP(){return new Fy("deleteField")}function bB(){return new VM("serverTimestamp")}function xB(...n){return new jM("arrayUnion",n)}function CB(...n){return new BM("arrayRemove",n)}function sP(n){return new UM("increment",n)}(function(e,t=!0){(function(i){lm=i})(d1),Bs(new Qi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Br(new GT(r.getProvider("auth-internal")),new YT(s,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new je(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ed(l.options.projectId,u)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Gn(J8,eV,e),Gn(J8,eV,"esm2017")})();var nC=function(){return nC=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},nC.apply(this,arguments)};var Lie={includeMetadataChanges:!1};function aP(n,e){return e===void 0&&(e=Lie),new Pt(function(t){var r=gm(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function EB(n){return aP(n,{includeMetadataChanges:!0})}function IB(n,e){return e===void 0&&(e={}),EB(n).pipe(at(function(t){return cP(t,e)}))}function cP(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:nC(nC({},r),(t={},t[e.idField]=n.id,t))}function SB(n){return aP(n,{includeMetadataChanges:!0}).pipe(at(function(e){return e.docs}))}function AB(n,e){return e===void 0&&(e={}),SB(n).pipe(at(function(t){return t.map(function(r){return cP(r,e)})}))}var Yo=class{constructor(e){return e}},TB="firestore",lP=class{constructor(){return Xc(TB)}};var uP=new Ye("angularfire2.firestore-instances");function Fie(n,e){let t=Zl(TB,n,e);return t&&new Yo(t)}function Vie(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Yo(r)}}var jie={provide:lP,deps:[[new Ir,uP]]},Bie={provide:Yo,useFactory:Fie,deps:[[new Ir,uP],Ws]};function DB(n,...e){return Gn("angularfire",ti.full,"fst"),eo([Bie,jie,{provide:uP,useFactory:Vie(n),multi:!0,deps:[jt,Rn,ni,ac,[new Ir,Jf],[new Ir,ms],...e]}])}var Vd=Dr(AB,!0);var MB=Dr(IB,!0);var NB=Dr(tC,!0,2);var oo=Dr(Wy,!0,2);var vm=Dr(eC,!0,2);var wi=Dr(bh,!0,2);var rC=Dr(Xx,!0);var Eh=Dr(Jx,!0);var PB=Dr(lB,!0);var kB=Dr(Yx,!0,2),RB=Dr(pc,!0,2);var jd=Dr(Yy,!0,2);var cl=Dr(Qy,!0,2);var OB=Dr(Kx,!0,2);var ym=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){if(!this.firestore)return pt([]);let r=oo(this.firestore,"users");return Vd(r,{idField:"id"}).pipe(at(i=>i.map(o=>({id:o.id,name:o.name,email:o.email,phone:o.phone,signupDate:o.signupDate||"",avatarUrl:o.avatarUrl||"",status:o.status??"Attivo",birthDate:o.birthDate??"",gender:o.gender??"",address:o.address??"",city:o.city??"",cap:o.cap??"",personalNotes:o.personalNotes??"",subscriptionEnd:o.subscriptionEnd??"",cards:o.cards??[]}))))}getAll(){return ee(this,null,function*(){if(!this.firestore)return[];let r=oo(this.firestore,"users");return(yield Eh(r)).docs.map(o=>{let s=o.data();return{id:o.id,name:s.name,email:s.email,phone:s.phone,signupDate:s.signupDate||"",avatarUrl:s.avatarUrl||"",status:s.status??"Attivo",birthDate:s.birthDate??"",gender:s.gender??"",address:s.address??"",city:s.city??"",cap:s.cap??"",personalNotes:s.personalNotes??"",subscriptionEnd:s.subscriptionEnd??"",cards:s.cards??[]}})})}getById$(r){if(!this.firestore)return pt(void 0);let i=oo(this.firestore,"users");return Vd(i,{idField:"id"}).pipe(at(o=>o.find(s=>s.id===r)))}getById(r){return ee(this,null,function*(){if(!this.firestore)return;let i=wi(this.firestore,`users/${r}`),o=yield rC(i);if(!o.exists())return;let s=o.data();return{id:o.id,name:s.name,email:s.email,phone:s.phone,signupDate:s.signupDate||"",avatarUrl:s.avatarUrl||"",status:s.status??"Attivo",birthDate:s.birthDate??"",gender:s.gender??"",address:s.address??"",city:s.city??"",cap:s.cap??"",personalNotes:s.personalNotes??"",subscriptionEnd:s.subscriptionEnd??"",cards:s.cards??[]}})}add(r){return ee(this,null,function*(){let i=wi(oo(this.firestore,"users")),o={name:r.name,email:r.email,phone:r.phone??"",signupDate:r.signupDate??new Date().toISOString().slice(0,10),avatarUrl:r.avatarUrl??"",status:r.status??"Attivo",birthDate:r.birthDate??"",gender:r.gender??"",address:r.address??"",city:r.city??"",cap:r.cap??"",personalNotes:r.personalNotes??"",subscriptionEnd:r.subscriptionEnd??"",cards:r.cards??[]};if(!this.firestore)throw new Error("Firestore not available - add user");return yield jd(i,o),Ve({id:i.id},o)})}};e.\u0275fac=function(i){return new(i||e)(Le(Yo))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Uie(n,e){if(n&1){let t=Bt();A(0,"div",15),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeScaduteModal())}),R()}}function zie(n,e){if(n&1&&(A(0,"span"),W(1,"("),A(2,"em"),W(3),R(),W(4,")"),R()),n&2){let t=ie().$implicit;X(3),Ar("Scadenza: ",t.subscriptionEnd)}}function qie(n,e){if(n&1&&(A(0,"li",25)(1,"strong"),W(2),R(),rt(3,zie,5,1,"span",22),R()),n&2){let t=e.$implicit;X(2),zt(t.name),X(),ge("ngIf",t.subscriptionEnd)}}function $ie(n,e){n&1&&(A(0,"li"),W(1," Nessuna tessera scaduta. "),R())}function Hie(n,e){if(n&1){let t=Bt();A(0,"div",16)(1,"div",17),Fe("click",function(i){return Ie(t),Se(i.stopPropagation())}),A(2,"h3",18)(3,"span",19),W(4,"warning"),R(),W(5," Tessere scadute "),R(),A(6,"ul",20),rt(7,qie,4,2,"li",21)(8,$ie,2,0,"li",22),R(),A(9,"div",23)(10,"button",24),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeScaduteModal())}),W(11,"Chiudi"),R()()()()}if(n&2){let t=ie();X(7),ge("ngForOf",t.tessereScadute),X(),ge("ngIf",t.tessereScadute.length===0)}}var LB=(()=>{let e=class e{constructor(r){this.userService=r,this.activeClients=0,this.tessereAttive=[],this.tessereScadute=[],this.thisWeekCards=0,this.totalExercises=0,this.scaduteModalOpen=!1}ngOnInit(){return ee(this,null,function*(){let r=yield this.userService.getAll(),i=new Date().toISOString().substring(0,10);this.activeClients=r.filter(o=>o.status==="Attivo").length,this.tessereScadute=r.filter(o=>o.subscriptionEnd&&o.subscriptionEnd<=i),this.tessereAttive=r.filter(o=>o.subscriptionEnd&&o.subscriptionEnd>i)})}openScaduteModal(){this.scaduteModalOpen=!0}closeScaduteModal(){this.scaduteModalOpen=!1}};e.\u0275fac=function(i){return new(i||e)(Je(ym))},e.\u0275cmp=lr({type:e,selectors:[["app-home"]],standalone:!1,decls:41,vars:7,consts:[[1,"page","home-page"],[1,"cards"],[1,"card","stat-card"],[1,"stat-label"],[1,"card","stat-card",2,"margin-top","20px"],[1,"tessere-row",2,"display","flex","align-items","center","gap","18px"],[2,"font-size","1rem","font-weight","400"],[1,"tessera-btn","warning-card",2,"display","flex","align-items","center","gap","7px","background","#fff","border","1px solid #ededed","border-radius","8px","padding","7px 16px","cursor","pointer","box-shadow","none",3,"click"],[1,"material-icons",2,"color","#d32f2f","font-size","1.25em"],[2,"font-size","1rem"],[1,"stat-label",2,"margin-left","7px"],[1,"tessera-btn","success-card",2,"display","flex","align-items","center","gap","7px","background","#fff","border","1px solid #ededed","border-radius","8px","padding","7px 16px","box-shadow","none"],[1,"material-icons",2,"color","#318b2b","font-size","1.25em"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-tessera-scaduti",4,"ngIf"],[1,"modal-backdrop",3,"click"],[1,"modal-tessera-scaduti"],[1,"modal-scaduti-box",2,"padding","24px 28px","border-radius","10px","max-width","360px","background","#fff","box-shadow","0 4px 24px -6px #b2b2b2",3,"click"],[2,"color","#d32f2f","font-size","1.15rem","margin-bottom","13px"],[1,"material-icons",2,"font-size","26px","vertical-align","middle","margin-right","6px"],[1,"scaduti-list",2,"margin","0","padding","0","list-style","none"],["style","margin-bottom:9px;",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"text-align","right","margin-top","15px"],[1,"btn","outline",3,"click"],[2,"margin-bottom","9px"]],template:function(i,o){i&1&&(A(0,"div",0)(1,"h2"),W(2,"Dashboard"),R(),A(3,"div",1)(4,"div",2),W(5,"Clienti attivi "),A(6,"span",3)(7,"strong"),W(8),R()()(),A(9,"div",2),W(10,"Schede"),A(11,"span",3)(12,"strong"),W(13),R()()(),A(14,"div",2),W(15,"Esercizi"),A(16,"span",3)(17,"strong"),W(18),R()()()(),A(19,"div",4)(20,"div",5)(21,"span",6),W(22,"Tessere:"),R(),A(23,"div",7),Fe("click",function(){return o.openScaduteModal()}),A(24,"span",8),W(25,"report_problem"),R(),A(26,"span",9),W(27,"Scadute:"),R(),A(28,"span",10)(29,"strong"),W(30),R()()(),A(31,"div",11)(32,"span",12),W(33,"verified_user"),R(),A(34,"span",9),W(35,"Attive:"),R(),A(36,"span",10)(37,"strong"),W(38),R()()()()(),rt(39,Uie,1,0,"div",13)(40,Hie,12,2,"div",14),R()),i&2&&(X(8),zt(o.activeClients),X(5),zt(o.thisWeekCards),X(5),zt(o.totalExercises),X(12),zt(o.tessereScadute.length),X(8),zt(o.tessereAttive.length),X(),ge("ngIf",o.scaduteModalOpen),X(),ge("ngIf",o.scaduteModalOpen))},dependencies:[wo,no],styles:[".home-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0f2540}.cards[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.card[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:8px;box-shadow:0 2px 8px #14283c0f;flex:1 1 0;min-width:0;display:flex;align-items:center;min-height:58px}.card.stat-card[_ngcontent-%COMP%]{margin-bottom:16px;min-width:0;flex:1 1 0;display:flex;align-items:center}.stat-label[_ngcontent-%COMP%]{margin-left:7px}.tessera-btn[_ngcontent-%COMP%], .tessera-stat[_ngcontent-%COMP%]{background:#fff;border:1px solid #ededed;border-radius:8px;display:flex;align-items:center;gap:7px;padding:7px 16px;font-size:1rem;box-shadow:none}.tessera-btn.warning-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .tessera-stat.warning-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#d32f2f}.tessera-btn.success-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .tessera-stat.success-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#318b2b}"]});let n=e;return n})();var iC=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){let r=oo(this.firestore,"exercises");return Vd(r,{idField:"id"})}getAll(){return ee(this,null,function*(){let r=oo(this.firestore,"exercises");return yield cI(Vd(r,{idField:"id"}))})}create(r){return ee(this,null,function*(){let i=oo(this.firestore,"exercises"),o=wi(i),s=Ve({},r);return yield jd(o,s),Ve({id:o.id},s)})}update(r,i){return ee(this,null,function*(){yield cl(wi(this.firestore,`exercises/${r}`),i)})}delete(r){return ee(this,null,function*(){yield vm(wi(this.firestore,`exercises/${r}`))})}};e.\u0275fac=function(i){return new(i||e)(Le(Yo))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var VB=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){let r=oo(this.firestore,"categories");return Vd(r,{idField:"id"}).pipe(at(i=>i.map(o=>({id:o.id,name:o.name,image:o.image}))))}create(r){return ee(this,null,function*(){let i=crypto.randomUUID(),o={id:i,name:r.name,image:r.image};return yield jd(wi(this.firestore,`categories/${i}`),o),o})}update(r,i){return ee(this,null,function*(){yield cl(wi(this.firestore,`categories/${r}`),i)})}delete(r){return ee(this,null,function*(){yield vm(wi(this.firestore,`categories/${r}`))})}};e.\u0275fac=function(i){return new(i||e)(Le(Yo))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var _m=(()=>{let e=class e{compressAndConvertToBase64(r,i=1e3,o=256){return ee(this,null,function*(){let s=document.createElement("img"),a=new FileReader;return new Promise((c,l)=>{a.onload=u=>{s.onload=()=>{let p=document.createElement("canvas");p.width=o,p.height=o,p.getContext("2d")?.drawImage(s,0,0,p.width,p.height);let g=.8,x=p.toDataURL("image/jpeg",g);for(;x.length/1024>i&&g>.1;)g-=.05,x=p.toDataURL("image/jpeg",g);c(x)},s.onerror=l,s.src=u.target.result},a.onerror=l,a.readAsDataURL(r)})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var BB=n=>["/esercizi",n],Wie=n=>({"auto-matched":n});function Kie(n,e){if(n&1&&wt(0,"img",40),n&2){let t=ie().$implicit;ge("src",t.image,Sr)("alt",t.name)}}function Yie(n,e){n&1&&(A(0,"div",41),Vr(),A(1,"svg",42),wt(2,"circle",43)(3,"rect",44)(4,"rect",45)(5,"rect",46),R()())}function Qie(n,e){if(n&1&&(A(0,"div",32)(1,"div",33),rt(2,Kie,1,2,"img",34)(3,Yie,6,0,"div",35),R(),A(4,"div",36)(5,"div",37),W(6),R(),A(7,"div",38),W(8),R()(),A(9,"button",39),W(10," Dettaglio "),R()()),n&2){let t=e.$implicit;X(2),ge("ngIf",t.image),X(),ge("ngIf",!t.image),X(3),zt(t.name),X(2),zt(t.category),X(),Ta("aria-label",qc("Dettaglio esercizio ",t.name)),ge("routerLink",$c(7,BB,t.id))}}function Zie(n,e){n&1&&(A(0,"div",47),W(1," Nessun esercizio presente "),R())}function Xie(n,e){if(n&1){let t=Bt();A(0,"button",48),Fe("click",function(){Ie(t);let i=ie();return Se(i.openAllExercisesModal())}),W(1," Mostra tutti "),R()}}function Jie(n,e){if(n&1&&wt(0,"img",40),n&2){let t=ie().$implicit;ge("src",t.image,Sr)("alt",t.name)}}function eoe(n,e){n&1&&(A(0,"div",62),Vr(),A(1,"svg",42),wt(2,"circle",63)(3,"path",64),R()())}function toe(n,e){if(n&1){let t=Bt();A(0,"div",49)(1,"div",33),rt(2,Jie,1,2,"img",34)(3,eoe,4,0,"div",50),A(4,"button",51),Fe("click",function(){let i=Ie(t).$implicit,o=ie();return Se(o.openEditCategoryModal(i))}),Vr(),A(5,"svg",52),wt(6,"path",53)(7,"circle",54),R()()(),us(),A(8,"div",55),Fe("click",function(){let i=Ie(t).$implicit,o=ie();return Se(o.openEditCategoryModal(i))}),A(9,"div",56),W(10),R()(),A(11,"div",57)(12,"button",58),Fe("click",function(){let i=Ie(t).$implicit,o=ie();return Se(o.confirmRemoveCategory(i))}),W(13," \xD7 "),R(),A(14,"label",59)(15,"input",60),Fe("change",function(i){let o=Ie(t).$implicit,s=ie();return Se(s.onCategoryToggle(o,i.target.checked))}),R(),wt(16,"span",61),R()()()}if(n&2){let t=e.$implicit;X(2),ge("ngIf",t.image),X(),ge("ngIf",!t.image),X(),Ta("aria-label",qc("Modifica immagine categoria ",t.name)),X(6),zt(t.name),X(2),Ta("aria-label",qc("Elimina categoria ",t.name)),X(3),ge("checked",t.selected)}}function noe(n,e){n&1&&(A(0,"div",47),W(1," Nessuna categoria trovata "),R())}function roe(n,e){if(n&1){let t=Bt();A(0,"button",68),Fe("click",function(){Ie(t);let i=ie(2);return Se(i.openAllCategoriesModal())}),W(1," Mostra tutte "),R()}}function ioe(n,e){if(n&1){let t=Bt();A(0,"div",65)(1,"button",66),Fe("click",function(){Ie(t);let i=ie();return Se(i.resetCategorySelections())}),W(2," Azzera "),R(),rt(3,roe,2,0,"button",67),R()}if(n&2){let t=ie();X(3),ge("ngIf",t.categories.length>5)}}function ooe(n,e){if(n&1&&(A(0,"span",81),W(1),R()),n&2){let t=ie(2);X(),Ar(" Categoria: ",t.selectedCategoryNames[0]," ")}}function soe(n,e){if(n&1&&wt(0,"img",40),n&2){let t=ie().$implicit;ge("src",t.image,Sr)("alt",t.name)}}function aoe(n,e){n&1&&(A(0,"div",89),Vr(),A(1,"svg",90),wt(2,"circle",91)(3,"rect",44),R()())}function coe(n,e){if(n&1&&(A(0,"div",82)(1,"div",83),rt(2,soe,1,2,"img",34)(3,aoe,4,0,"div",84),R(),A(4,"div",85)(5,"div",86),W(6),R(),A(7,"div",87),W(8),R()(),A(9,"a",88),W(10," Dettaglio "),R()()),n&2){let t=e.$implicit;X(2),ge("ngIf",t.image),X(),ge("ngIf",!t.image),X(3),zt(t.name),X(2),zt(t.category),X(),Ta("aria-label",qc("Dettaglio esercizio ",t.name)),ge("routerLink",$c(7,BB,t.id))}}function loe(n,e){n&1&&(A(0,"div",92),W(1,"Nessun esercizio trovato"),R())}function uoe(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",70)(2,"div",71)(3,"h3",72),W(4," Tutti gli esercizi "),rt(5,ooe,2,1,"span",73),R(),A(6,"button",74),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeAllExercisesModal())}),W(7,"\xD7"),R()(),A(8,"div",75)(9,"label",76)(10,"input",77),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.exerciseSearch,i)||(o.exerciseSearch=i),Se(i)}),R()()(),A(11,"div",78),rt(12,coe,11,9,"div",79)(13,loe,2,0,"div",80),R()()()}if(n&2){let t=ie();X(5),ge("ngIf",t.selectedCategoryNames.length),X(5),lt("ngModel",t.exerciseSearch),X(2),ge("ngForOf",t.allExercisesForModal),X(),ge("ngIf",t.allExercisesForModal.length===0)}}function doe(n,e){if(n&1&&wt(0,"img",40),n&2){let t=ie().$implicit;ge("src",t.image,Sr)("alt",t.name)}}function foe(n,e){n&1&&(A(0,"div",109),Vr(),A(1,"svg",110),wt(2,"circle",111)(3,"path",112),R()())}function hoe(n,e){if(n&1){let t=Bt();A(0,"div",98)(1,"div",99),rt(2,doe,1,2,"img",34)(3,foe,4,0,"div",100),A(4,"button",101),Fe("click",function(){let i=Ie(t).$implicit,o=ie(2);return Se(o.openEditCategoryModal(i))}),Vr(),A(5,"svg",102),wt(6,"path",53),R()()(),us(),A(7,"div",103)(8,"div",104),W(9),R()(),A(10,"div",105)(11,"button",106),Fe("click",function(){let i=Ie(t).$implicit,o=ie(2);return Se(o.confirmRemoveCategory(i))}),W(12,"\xD7"),R(),A(13,"label",107)(14,"input",60),Fe("change",function(i){let o=Ie(t).$implicit,s=ie(2);return Se(s.onCategoryToggle(o,i.target.checked))}),R(),wt(15,"span",108),R()()()}if(n&2){let t=e.$implicit;X(2),ge("ngIf",t.image),X(),ge("ngIf",!t.image),X(),Ta("aria-label",qc("Modifica categoria ",t.name)),X(5),zt(t.name),X(2),Ta("aria-label",qc("Elimina categoria ",t.name)),X(3),ge("checked",t.selected)}}function poe(n,e){n&1&&(A(0,"div",92),W(1,"Nessuna categoria trovata"),R())}function goe(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",93)(2,"div",71)(3,"h3",72),W(4," Tutte le categorie "),R(),A(5,"button",74),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeAllCategoriesModal())}),W(6,"\xD7"),R()(),A(7,"div",75)(8,"label",94)(9,"input",95),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.categorySearch,i)||(o.categorySearch=i),Se(i)}),R()()(),A(10,"div",96),rt(11,hoe,16,8,"div",97)(12,poe,2,0,"div",80),R()()()}if(n&2){let t=ie();X(9),lt("ngModel",t.categorySearch),X(2),ge("ngForOf",t.allCategoriesForModal),X(),ge("ngIf",t.allCategoriesForModal.length===0)}}function moe(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",113)(2,"div",114)(3,"p",115),W(4,"Sicuro di voler cancellare la categoria?"),R(),A(5,"div",116)(6,"button",117),Fe("click",function(){Ie(t);let i=ie();return Se(i.removeCategoryConfirmed())}),W(7,"Si"),R(),A(8,"button",118),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeDeleteCategoryModal())}),W(9,"No"),R()()()()()}}function voe(n,e){n&1&&(Ni(0),Vr(),A(1,"svg",131),wt(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),R(),Pi())}function yoe(n,e){if(n&1&&wt(0,"img",138),n&2){let t=ie(2);ge("src",t.exerciseImage,Sr)}}function _oe(n,e){if(n&1){let t=Bt();A(0,"button",139),Fe("mousedown",function(i){return Ie(t),Se(i.preventDefault())})("click",function(){Ie(t);let i=ie(2);return Se(i.clearCategoryInput())}),W(1," \xD7 "),R()}}function woe(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),rt(6,voe,8,0,"ng-container",122)(7,yoe,1,1,"ng-template",null,0,to),R(),A(9,"input",123),Fe("change",function(i){Ie(t);let o=ie();return Se(o.onExerciseImageChange(i))}),R()()(),A(10,"label",124),W(11," Nome esercizio "),A(12,"input",125),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.exerciseName,i)||(o.exerciseName=i),Se(i)}),Fe("keydown.enter",function(){Ie(t);let i=ie();return Se(i.saveExercise())}),R()(),A(13,"label",126),W(14," Categoria "),A(15,"div",127)(16,"input",128),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.exerciseCategoryInput,i)||(o.exerciseCategoryInput=i),Se(i)}),Fe("input",function(){Ie(t);let i=ie();return Se(i.onAutoCategoryInput())})("blur",function(){Ie(t);let i=ie();return Se(i.onAutoCategoryBlur())}),R(),rt(17,_oe,2,0,"button",129),R()(),A(18,"div",116)(19,"button",130),Fe("click",function(){Ie(t);let i=ie();return Se(i.saveExercise())}),W(20," Salva "),R(),A(21,"button",118),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeExerciseModal())}),W(22,"Annulla"),R()()()()()}if(n&2){let t=pi(8),r=ie();X(6),ge("ngIf",!r.exerciseImage)("ngIfElse",t),X(6),lt("ngModel",r.exerciseName),X(4),lt("ngModel",r.exerciseCategoryInput),ge("ngClass",$c(7,Wie,r.autoCatMatched)),X(),ge("ngIf",r.exerciseCategoryInput),X(2),ge("disabled",!r.exerciseName.trim()||!r.exerciseCategoryInput.trim())}}function boe(n,e){n&1&&(Ni(0),Vr(),A(1,"svg",131),wt(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),R(),Pi())}function xoe(n,e){if(n&1&&wt(0,"img",142),n&2){let t=ie(2);ge("src",t.categoryImage,Sr)}}function Coe(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),rt(6,boe,8,0,"ng-container",122)(7,xoe,1,1,"ng-template",null,1,to),R(),A(9,"input",123),Fe("change",function(i){Ie(t);let o=ie();return Se(o.onCategoryImageChange(i))}),R()()(),A(10,"label",140),W(11," Nome categoria "),A(12,"input",141),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.categoryName,i)||(o.categoryName=i),Se(i)}),R()(),A(13,"div",116)(14,"button",130),Fe("click",function(){Ie(t);let i=ie();return Se(i.saveCategory())}),W(15,"Salva"),R(),A(16,"button",118),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeCategoryModal())}),W(17,"Annulla"),R()()()()()}if(n&2){let t=pi(8),r=ie();X(6),ge("ngIf",!r.categoryImage)("ngIfElse",t),X(6),lt("ngModel",r.categoryName),X(2),ge("disabled",!r.categoryName.trim())}}function Eoe(n,e){n&1&&(Ni(0),Vr(),A(1,"svg",131),wt(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),R(),Pi())}function Ioe(n,e){if(n&1&&wt(0,"img",142),n&2){let t=ie(2);ge("src",t.editCategoryImage,Sr)}}function Soe(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),rt(6,Eoe,8,0,"ng-container",122)(7,Ioe,1,1,"ng-template",null,2,to),R(),A(9,"input",123),Fe("change",function(i){Ie(t);let o=ie();return Se(o.onEditCategoryImageChange(i))}),R()()(),A(10,"label",143),W(11," Nome categoria "),A(12,"input",144),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.editCategoryName,i)||(o.editCategoryName=i),Se(i)}),R()(),A(13,"div",116)(14,"button",130),Fe("click",function(){Ie(t);let i=ie();return Se(i.saveEditCategory())}),W(15,"Salva"),R(),A(16,"button",118),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeEditCategoryModal())}),W(17,"Annulla"),R()()()()()}if(n&2){let t=pi(8),r=ie();X(6),ge("ngIf",!r.editCategoryImage)("ngIfElse",t),X(6),lt("ngModel",r.editCategoryName),X(2),ge("disabled",!r.editCategoryName.trim())}}var UB=(()=>{let e=class e{constructor(r,i,o){this.eserciziService=r,this.categorieService=i,this.imageService=o,this.exercises=[],this.categories=[],this.subscriptions=[],this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null,this.exerciseSearch="",this.categoryName="",this.categoryImageFile=null,this.categoryImage=null,this.categorySearch="",this.showExerciseModal=!1,this.showCategoryModal=!1,this.showEditCategoryModal=!1,this.showDeleteCategoryModal=!1,this.showAllExercisesModal=!1,this.showAllCategoriesModal=!1,this.categoryToEdit=null,this.categoryToDelete=null,this.editCategoryName="",this.editCategoryImageFile=null,this.editCategoryImage=null,this.autoCatMatched=!1}ngOnInit(){this.loadExercises(),this.loadCategories()}ngOnDestroy(){this.subscriptions.forEach(r=>r.unsubscribe())}loadExercises(){let r=this.eserciziService.getAll$().subscribe(i=>{this.exercises=i});this.subscriptions.push(r)}loadCategories(){let r=this.categorieService.getAll$().subscribe(i=>{this.categories=i.map(o=>Vt(Ve({},o),{selected:!1}))});this.subscriptions.push(r)}onExerciseImageChange(r){let i=r.target.files?.[0]||null;this.exerciseImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,256).then(o=>this.exerciseImage=o):this.exerciseImage=null}onCategoryImageChange(r){let i=r.target.files?.[0]||null;this.categoryImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,128).then(o=>this.categoryImage=o):this.categoryImage=null}onEditCategoryImageChange(r){let i=r.target.files?.[0]||null;this.editCategoryImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,128).then(o=>this.editCategoryImage=o):this.editCategoryImage=null}saveExercise(){return ee(this,null,function*(){let r=this.exerciseImage??void 0,i={name:this.exerciseName.trim(),category:this.exerciseCategoryInput.trim(),image:r};yield this.eserciziService.create(i),this.closeExerciseModal(),this.loadExercises()})}saveCategory(){return ee(this,null,function*(){let r=this.categoryImage??void 0,i={name:this.categoryName.trim(),image:r};yield this.categorieService.create(i),this.closeCategoryModal(),this.loadCategories()})}saveEditCategory(){return ee(this,null,function*(){if(!this.categoryToEdit)return;let r=this.categoryToEdit.name,i=this.editCategoryName.trim(),o=this.editCategoryImage??this.categoryToEdit.image,s={name:i,image:o};yield this.categorieService.update(this.categoryToEdit.id,s);let c=(yield this.eserciziService.getAll()).filter(l=>l.category===r);for(let l of c)yield this.eserciziService.update(l.id,{category:i});this.closeEditCategoryModal(),this.loadCategories(),this.loadExercises()})}openExerciseModal(){this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null,this.showExerciseModal=!0}closeExerciseModal(){this.showExerciseModal=!1,this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null}openCategoryModal(){this.categoryName="",this.categoryImageFile=null,this.categoryImage=null,this.showCategoryModal=!0}closeCategoryModal(){this.showCategoryModal=!1,this.categoryName="",this.categoryImageFile=null,this.categoryImage=null}openEditCategoryModal(r){this.categoryToEdit=r,this.editCategoryName=r.name,this.editCategoryImage=r.image||null,this.editCategoryImageFile=null,this.showEditCategoryModal=!0}closeEditCategoryModal(){this.showEditCategoryModal=!1,this.categoryToEdit=null,this.editCategoryName="",this.editCategoryImage=null,this.editCategoryImageFile=null}openAllExercisesModal(){this.showAllExercisesModal=!0}closeAllExercisesModal(){this.showAllExercisesModal=!1}openAllCategoriesModal(){this.showAllCategoriesModal=!0}closeAllCategoriesModal(){this.showAllCategoriesModal=!1}confirmRemoveCategory(r){this.categoryToDelete=r,this.showDeleteCategoryModal=!0}closeDeleteCategoryModal(){this.categoryToDelete=null,this.showDeleteCategoryModal=!1}removeCategoryConfirmed(){return ee(this,null,function*(){this.categoryToDelete&&(yield this.categorieService.delete(this.categoryToDelete.id),this.closeDeleteCategoryModal(),this.loadCategories())})}onAutoCategoryInput(){this.autoCatMatched=!1;let r=this.exerciseCategoryInput.trim();if(r.length<3)return;let i=this.categories.find(o=>o.name.toLowerCase().startsWith(r.toLowerCase()));i&&(this.exerciseCategoryInput=i.name,this.autoCatMatched=!0)}onAutoCategoryBlur(){this.onAutoCategoryInput()}clearCategoryInput(){this.exerciseCategoryInput="",this.autoCatMatched=!1}onCategoryToggle(r,i){i?this.categories.forEach(o=>o.selected=o.id===r.id):this.categories.forEach(o=>o.selected=!1),this.categories=[...this.categories]}resetCategorySelections(){this.categories.forEach(r=>r.selected=!1),this.categories=[...this.categories]}get selectedCategoryNames(){return this.categories.filter(r=>r.selected).map(r=>r.name)}get filteredExercisesLimited(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(s=>s.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();return o&&(i=i.filter(s=>s.name.toLowerCase().includes(o))),i.slice(0,5)}get allExercisesForModal(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(s=>s.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();return o&&(i=i.filter(s=>s.name.toLowerCase().includes(o))),i}get filteredCategoriesLimited(){let r=this.categorySearch.trim().toLowerCase();return(r?this.categories.filter(o=>o.name.toLowerCase().includes(r)):this.categories).slice(0,5)}get allCategoriesForModal(){let r=this.categorySearch.trim().toLowerCase();return r?this.categories.filter(i=>i.name.toLowerCase().includes(r)):this.categories}};e.\u0275fac=function(i){return new(i||e)(Je(iC),Je(VB),Je(_m))},e.\u0275cmp=lr({type:e,selectors:[["app-esercizi"]],decls:42,vars:14,consts:[["exercisePreviewTpl",""],["categoryPreviewTpl",""],["editCategoryPreviewTpl",""],[1,"esercizi-page"],[1,"esercizi-layout"],[1,"esercizi-card"],[1,"section-header"],[1,"section-title"],["type","button","aria-label","Aggiungi esercizio",1,"top-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24"],["x","2","y","9.5","width","3","height","5","rx","1.2","fill","#2563eb"],["x","19","y","9.5","width","3","height","5","rx","1.2","fill","#2563eb"],["x","6","y","11","width","12","height","2","rx","1","fill","#2563eb"],["x","8","y","10","width","8","height","4","rx","1.6","fill","#e7effd"],[1,"section-divider"],[1,"search-bar-wrapper"],["for","exercise-search",1,"search-bar"],["id","exercise-search","type","text","aria-label","Cerca esercizi","autocomplete","off","placeholder","Cerca esercizi...",3,"ngModelChange","ngModel"],[1,"exercise-list"],["class","card-item",4,"ngFor","ngForOf"],["class","exercise-empty-info",4,"ngIf"],["class","more-btn","type","button",3,"click",4,"ngIf"],[1,"categorie-card"],["type","button","aria-label","Aggiungi categoria",1,"top-btn",3,"click"],["d","M3 12.5 L12 21.2 Q12.6 21.8 13.3 21.25 L21.25 13.3 Q21.8 12.6 21.2 12 L12.5 3 Q12.05 2.55 11.45 3.1 L3.1 11.45 Q2.55 12.05 3 12.5Z","fill","#2563eb","stroke","#1857a7","stroke-width","1"],["cx","8","cy","8","r","2","fill","#fff","stroke","#2563eb","stroke-width","1"],["for","category-search",1,"search-bar"],["id","category-search","type","text","aria-label","Cerca categorie","autocomplete","off","placeholder","Cerca categorie...",3,"ngModelChange","ngModel"],[1,"category-list"],["class","card-item category-row",4,"ngFor","ngForOf"],["class","category-actions-bottom",4,"ngIf"],["class","esercizi-modal-backdrop",4,"ngIf"],[1,"card-item"],[1,"card-img-wrap"],[3,"src","alt",4,"ngIf"],["class","exercise-placeholder",4,"ngIf"],[1,"exercise-text"],[1,"exercise-name"],[1,"exercise-category"],["type","button",1,"exercise-detail-btn",3,"routerLink","aria-label"],[3,"src","alt"],[1,"exercise-placeholder"],["width","64","height","64","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#cfe6fd"],["x","8","y","10","width","8","height","4","rx","1.5","fill","#83b4fa"],["x","4","y","11.5","width","3","height","3","rx","1.2","fill","#2563eb"],["x","17","y","11.5","width","3","height","3","rx","1.2","fill","#2563eb"],[1,"exercise-empty-info"],["type","button",1,"more-btn",3,"click"],[1,"card-item","category-row"],["class","category-placeholder",4,"ngIf"],["type","button",1,"category-edit-img-btn",3,"click","aria-label"],["width","22","height","22","viewBox","0 0 24 24"],["d","M14.06 5.94a2.5 2.5 0 013.54 3.54l-8.585 8.585-4.243.707.707-4.243z","fill","none","stroke","#2563eb","stroke-width","2"],["cx","17.5","cy","6.5","r","1.5","fill","#83b4fa","stroke","#2563eb","stroke-width","1"],[1,"category-text",3,"click"],[1,"category-name"],[1,"category-controls-destra"],["type","button","title","Elimina categoria",1,"category-x-btn2",3,"click","aria-label"],["title","Seleziona categoria per filtrare esercizi",1,"category-checkbox-wrap"],["type","checkbox",3,"change","checked"],[1,"category-checkbox"],[1,"category-placeholder"],["cx","12","cy","12","r","12","fill","#e5fbee"],["d","M9 15l3-6 3 6","stroke","#22c16b","stroke-width","2","fill","none"],[1,"category-actions-bottom"],["type","button",1,"reset-categories-btn",3,"click"],["type","button","class","toggle-categories-btn",3,"click",4,"ngIf"],["type","button",1,"toggle-categories-btn",3,"click"],[1,"esercizi-modal-backdrop"],[1,"esercizi-modal","esercizi-grid-modal"],[1,"grid-modal-header"],[1,"grid-modal-title"],["class","grid-filter-tag",4,"ngIf"],["type","button","aria-label","Chiudi",1,"grid-close-btn",3,"click"],[1,"search-bar-wrapper","modal-search-inline"],["for","exercise-search-modal",1,"search-bar"],["id","exercise-search-modal","type","text","aria-label","Cerca esercizi nella griglia","autocomplete","off","placeholder","Cerca...",3,"ngModelChange","ngModel"],[1,"exercise-grid"],["class","exercise-grid-card",4,"ngFor","ngForOf"],["class","grid-empty",4,"ngIf"],[1,"grid-filter-tag"],[1,"exercise-grid-card"],[1,"grid-img"],["class","grid-placeholder",4,"ngIf"],[1,"grid-info"],[1,"grid-name"],[1,"grid-cat"],[1,"grid-detail-link",3,"routerLink","aria-label"],[1,"grid-placeholder"],["width","48","height","48","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#d9ecfd"],[1,"grid-empty"],[1,"esercizi-modal","categorie-grid-modal"],["for","category-search-modal",1,"search-bar"],["id","category-search-modal","type","text","aria-label","Cerca categorie nella griglia","autocomplete","off","placeholder","Cerca...",3,"ngModelChange","ngModel"],[1,"category-grid"],["class","category-grid-card",4,"ngFor","ngForOf"],[1,"category-grid-card"],[1,"grid-cat-img"],["class","grid-cat-placeholder",4,"ngIf"],["type","button",1,"grid-cat-edit-btn",3,"click","aria-label"],["width","18","height","18","viewBox","0 0 24 24"],[1,"grid-cat-info"],[1,"grid-cat-name"],[1,"grid-cat-actions"],["type","button",1,"grid-cat-delete-btn",3,"click","aria-label"],["title","Seleziona categoria per filtrare esercizi",1,"grid-cat-checkbox-wrap"],[1,"grid-cat-checkbox"],[1,"grid-cat-placeholder"],["width","46","height","46","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#e0f7eb"],["d","M9 15l3-6 3 6","stroke","#18c879","stroke-width","2","fill","none"],[1,"esercizi-modal"],[1,"esercizi-modal-body"],[1,"modal-message"],[1,"modal-actions"],["type","button",1,"modal-yes",3,"click"],["type","button",1,"modal-no",3,"click"],[1,"image-upload-zone"],[1,"input-image-label"],[1,"icon-image-upload-big"],[4,"ngIf","ngIfElse"],["type","file","accept","image/*",3,"change"],["for","exercise-name",1,"field-label"],["id","exercise-name","type","text","placeholder","Nome esercizio","autocomplete","off",3,"ngModelChange","keydown.enter","ngModel"],["for","exercise-category-auto",1,"field-label"],[1,"single-autocat-wrapper"],["id","exercise-category-auto","type","text","placeholder","Digita almeno 3 caratteri","autocomplete","off",3,"ngModelChange","input","blur","ngModel","ngClass"],["type","button","class","clear-cat-btn","aria-label","Pulisci categoria",3,"mousedown","click",4,"ngIf"],["type","button",1,"modal-yes",3,"click","disabled"],["width","180","height","180","viewBox","0 0 180 180","fill","none"],["x","10","y","10","width","160","height","160","rx","25","fill","#F7FBFF","stroke","#b5d9f8","stroke-width","3"],["x","47","y","125","width","86","height","25","rx","10","fill","#d1eaff"],["x","60","y","99","width","63","height","17","rx","7","fill","#bfe1fc"],["cx","66","cy","67","r","13","fill","#83b4fa"],["x","10","y","10","width","160","height","160","rx","25","stroke","#b5d9f8","stroke-width","3"],["points","36,151 80,92 110,135 144,74 168,130","fill","none","stroke","#5ab0fa","stroke-width","4.5","stroke-linecap","round","stroke-linejoin","round"],["alt","Preview immagine esercizio",1,"image-preview",3,"src"],["type","button","aria-label","Pulisci categoria",1,"clear-cat-btn",3,"mousedown","click"],["for","category-name",1,"field-label"],["id","category-name","type","text","placeholder","Nome categoria","autocomplete","off",3,"ngModelChange","ngModel"],["alt","Preview immagine categoria",1,"image-preview",3,"src"],["for","category-edit-name",1,"field-label"],["id","category-edit-name","type","text","placeholder","Nome categoria","autocomplete","off",3,"ngModelChange","ngModel"]],template:function(i,o){i&1&&(A(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),W(5,"ESERCIZI"),R(),A(6,"button",8),Fe("click",function(){return o.openExerciseModal()}),Vr(),A(7,"svg",9),wt(8,"rect",10)(9,"rect",11)(10,"rect",12)(11,"rect",13),R()()(),us(),wt(12,"div",14),A(13,"div",15)(14,"label",16)(15,"input",17),ut("ngModelChange",function(a){return dt(o.exerciseSearch,a)||(o.exerciseSearch=a),a}),R()()(),A(16,"div",18),rt(17,Qie,11,9,"div",19)(18,Zie,2,0,"div",20)(19,Xie,2,0,"button",21),R()(),A(20,"div",22)(21,"div",6)(22,"span",7),W(23,"CATEGORIE"),R(),A(24,"button",23),Fe("click",function(){return o.openCategoryModal()}),Vr(),A(25,"svg",9),wt(26,"path",24)(27,"circle",25),R()()(),us(),wt(28,"div",14),A(29,"div",15)(30,"label",26)(31,"input",27),ut("ngModelChange",function(a){return dt(o.categorySearch,a)||(o.categorySearch=a),a}),R()()(),A(32,"div",28),rt(33,toe,17,8,"div",29)(34,noe,2,0,"div",20)(35,ioe,4,1,"div",30),R()()(),rt(36,uoe,14,4,"div",31)(37,goe,13,3,"div",31)(38,moe,10,0,"div",31)(39,woe,23,9,"div",31)(40,Coe,18,4,"div",31)(41,Soe,18,4,"div",31),R()),i&2&&(X(15),lt("ngModel",o.exerciseSearch),X(2),ge("ngForOf",o.filteredExercisesLimited),X(),ge("ngIf",o.filteredExercisesLimited.length===0),X(),ge("ngIf",o.exercises.length>5),X(12),lt("ngModel",o.categorySearch),X(2),ge("ngForOf",o.filteredCategoriesLimited),X(),ge("ngIf",o.filteredCategoriesLimited.length===0),X(),ge("ngIf",o.categories.length),X(),ge("ngIf",o.showAllExercisesModal),X(),ge("ngIf",o.showAllCategoriesModal),X(),ge("ngIf",o.showDeleteCategoryModal),X(),ge("ngIf",o.showExerciseModal),X(),ge("ngIf",o.showCategoryModal),X(),ge("ngIf",o.showEditCategoryModal))},dependencies:[Yl,qf,wo,no,ig,gs,Da,qs,ld,Ma],styles:['root[_ngcontent-%COMP%]{--green: #18c879;--green-dark: #138554;--text: #153b56;--card: #fff;--radius: 18px;--shadow-card: 0 2px 12px rgba(36,80,144,.06);--primary: #2563eb}body[_ngcontent-%COMP%]{margin:0;font-family:system-ui,sans-serif;background:#f5f8fc}.esercizi-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f8fc;position:relative;z-index:0}.esercizi-layout[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;gap:52px;max-width:1200px;margin:0 auto;padding-top:30px;position:relative;z-index:0;pointer-events:auto}.esercizi-card[_ngcontent-%COMP%], .categorie-card[_ngcontent-%COMP%]{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow-card);min-width:410px;max-width:520px;width:100%;min-height:260px;display:flex;flex-direction:column;box-sizing:border-box;overflow:hidden;position:relative;z-index:0}.esercizi-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff 89%,#f8fdff)}.categorie-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff 89%,#f8fcfa)}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 26px 0}.section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;letter-spacing:.035em;color:#22416f;flex:1}.top-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e7effd 60%,#dbeafe);border:none;border-radius:50%;width:42px;height:42px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 10px #2563eb11;transition:background .14s,transform .14s}.top-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#bfd8fd 40%,#e8f1ff);transform:scale(1.08)}.section-divider[_ngcontent-%COMP%]{width:calc(100% - 52px);margin:0 26px 10px;height:0;position:relative}.section-divider[_ngcontent-%COMP%]:before{content:"";display:block;height:4px;width:100%;background:linear-gradient(90deg,#dadde2,#ececec);border-radius:3px;box-shadow:0 1.5px 6px #0000000d}.search-bar-wrapper[_ngcontent-%COMP%]{padding:0 26px 4px;box-sizing:border-box;width:100%;position:relative;z-index:0;pointer-events:auto}.search-bar[_ngcontent-%COMP%]{display:block;position:relative;width:100%;height:34px;border:1.7px solid #c9d9ec;border-radius:10px;background:#f7fbff;overflow:hidden;transition:border-color .18s,background-color .18s}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;inset:0;padding:0 12px 0 38px;border:none;background:transparent;font-size:.85rem;font-weight:600;color:#1c3554;outline:none}.exercise-list[_ngcontent-%COMP%], .category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:14px 26px 10px;width:100%;box-sizing:border-box}.card-item[_ngcontent-%COMP%]{width:82%;max-width:82%;margin:0 auto;min-height:118px;background:#fff;border-radius:20px;box-shadow:0 3px 12px #24509014;display:flex;align-items:center;gap:16px;padding:14px 18px;position:relative;box-sizing:border-box}.card-img-wrap[_ngcontent-%COMP%]{width:82px;height:82px;border-radius:18px;background:#f2f6fa;display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;overflow:hidden}.card-img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:74px;max-height:74px;object-fit:contain;display:block}.exercise-placeholder[_ngcontent-%COMP%], .category-placeholder[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center}.exercise-text[_ngcontent-%COMP%]{flex:1 1 0;display:flex;flex-direction:column;justify-content:center}.exercise-name[_ngcontent-%COMP%], .category-name[_ngcontent-%COMP%]{font-size:1.04rem;font-weight:800;color:var(--text);margin:0}.exercise-category[_ngcontent-%COMP%]{font-size:.85rem;font-style:italic;color:#3969b1;margin-top:2px}.exercise-detail-btn[_ngcontent-%COMP%]{position:absolute;right:14px;bottom:14px;font-size:.72rem;font-weight:700;background:var(--primary);color:#fff;border:none;border-radius:6px;padding:5px 14px;cursor:pointer;box-shadow:0 1px 4px #2563eb59;transition:background .15s}.exercise-detail-btn[_ngcontent-%COMP%]:hover{background:#184a9b}.category-row[_ngcontent-%COMP%]{padding-right:70px}.category-controls-destra[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;gap:10px}.category-x-btn2[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4d1d1;color:#db3131;width:26px;height:26px;font-size:1rem;font-weight:700;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .15s,color .15s,border-color .15s}.category-x-btn2[_ngcontent-%COMP%]:hover{background:#db3131;color:#fff;border-color:#db3131}.category-checkbox-wrap[_ngcontent-%COMP%]{width:26px;height:26px;position:relative;display:flex;align-items:center;justify-content:center}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;width:26px;height:26px;margin:0;cursor:pointer}.category-checkbox[_ngcontent-%COMP%]{width:22px;height:22px;border:2px solid var(--primary);border-radius:6px;background:#fff;position:relative;display:block;transition:background .15s,border-color .15s}.category-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:6px;top:3px;width:7px;height:12px;border:solid #fff;border-width:0 2.5px 2.5px 0;transform:rotate(45deg);opacity:0;transition:opacity .15s}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .category-checkbox[_ngcontent-%COMP%]{background:var(--primary);border-color:var(--primary)}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .category-checkbox[_ngcontent-%COMP%]:after{opacity:1}.category-actions-bottom[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:14px;margin:18px 0 10px;flex-wrap:wrap}.reset-categories-btn[_ngcontent-%COMP%]{margin:0;padding:8px 22px;border-radius:12px;border:none;background:#f2fcf7;color:var(--green);font-weight:800;font-size:.78rem;cursor:pointer;letter-spacing:.03em;box-shadow:0 1px 4px #00000014;transition:background .15s,color .15s}.reset-categories-btn[_ngcontent-%COMP%]:hover{background:#e7faee;color:var(--green-dark)}.toggle-categories-btn[_ngcontent-%COMP%]{margin:0;padding:8px 22px;border:none;border-radius:12px;background:#eef3fb;color:#194d9a;font-weight:700;font-size:.78rem;cursor:pointer;letter-spacing:.03em;box-shadow:0 1px 4px #00000014;transition:background .15s,color .15s}.toggle-categories-btn[_ngcontent-%COMP%]:hover{background:#dce9fa;color:#0f356b}.exercise-empty-info[_ngcontent-%COMP%]{font-size:.85rem;color:#6b88b7;text-align:center;background:#e9f3fc;border-radius:10px;padding:10px 8px}.more-btn[_ngcontent-%COMP%]{margin:6px auto 4px;background:#eef3fb;color:#1e3a8a;border:none;border-radius:8px;padding:6px 16px;font-size:.75rem;font-weight:700;cursor:pointer;letter-spacing:.04em;transition:background .15s,color .15s;display:inline-block}.more-btn[_ngcontent-%COMP%]:hover, .more-btn[_ngcontent-%COMP%]:focus{background:#dbe9fb;color:#0f2a63}.esercizi-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:1000}.esercizi-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:26px 22px 22px;box-shadow:0 8px 40px #0000003b;width:92vw;max-width:410px;position:relative}.esercizi-modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.image-upload-zone[_ngcontent-%COMP%]{display:flex;justify-content:center}.input-image-label[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;align-items:center}.input-image-label[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.icon-image-upload-big[_ngcontent-%COMP%]{width:180px;height:180px;display:flex;align-items:center;justify-content:center}.image-preview[_ngcontent-%COMP%]{width:172px;height:172px;border-radius:23px;object-fit:contain;background:#f7fbff;border:2.5px solid #b5d9f8}.field-label[_ngcontent-%COMP%]{font-weight:700;color:#22416f;font-size:.9rem;display:flex;flex-direction:column;gap:4px;position:relative}.field-label[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .field-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:4px;padding:9px 12px;border:1.6px solid #d2e3fa;border-radius:8px;font-size:.92rem;background:#f7fbff;color:#234169;outline:none;transition:border-color .15s,background-color .15s}.field-label[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .field-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:#f2f8ff}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}.modal-yes[_ngcontent-%COMP%], .modal-no[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;padding:7px 18px;border:none;border-radius:8px;cursor:pointer}.modal-yes[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.modal-yes[_ngcontent-%COMP%]:hover{background:#184a9b}.modal-no[_ngcontent-%COMP%]{background:#f2f2f2;color:#22416f}.modal-no[_ngcontent-%COMP%]:hover{background:#e4eaf3}.category-autocomplete-label[_ngcontent-%COMP%]{position:relative}.category-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:4px;display:flex;align-items:center;border:1.6px solid #d2e3fa;border-radius:8px;background:#f7fbff;transition:border-color .15s,background-color .15s}.category-input-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);background:#f2f8ff}.category-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;padding:9px 36px 9px 34px;font-size:.92rem;outline:none;font-weight:600;color:#234169}.search-icon[_ngcontent-%COMP%]{position:absolute;left:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:.9}.clear-cat-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:#eef3fb;color:#22416f;border:none;width:24px;height:24px;font-size:16px;line-height:1;border-radius:6px;cursor:pointer;padding:0;font-weight:700}.category-autocomplete-list[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:calc(100% + 4px);z-index:1100;background:#fff;border:1.3px solid #dbeafe;border-radius:8px;box-shadow:0 4px 18px #002e701a;list-style:none;padding:4px 0;margin:0;max-height:220px;overflow-y:auto;animation:_ngcontent-%COMP%_fadeIn .15s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 14px;font-size:.88rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:6px;color:#173a62;transition:background .13s,color .13s;position:relative}.category-autocomplete-list[_ngcontent-%COMP%]   li.highlighted[_ngcontent-%COMP%], .category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#e6f1fe;color:#0f2f59}.category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.no-suggestions):not(.create-suggestion):before{content:"\\1f50d";font-size:.75rem;opacity:.65}.no-suggestions[_ngcontent-%COMP%]{font-style:italic;color:#5b6e83;justify-content:space-between}.create-suggestion[_ngcontent-%COMP%]{background:#f7fbff;justify-content:center}.inline-create-btn[_ngcontent-%COMP%]{background:#2563eb;border:none;color:#fff;padding:4px 10px;font-size:.7rem;font-weight:700;border-radius:14px;cursor:pointer;letter-spacing:.03em;transition:background .15s}.inline-create-btn[_ngcontent-%COMP%]:hover{background:#184a9b}.inline-create-btn[_ngcontent-%COMP%]:disabled{background:#9db8df;cursor:not-allowed}.grid-modal-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:12px}.grid-modal-title[_ngcontent-%COMP%]{font-size:1.12rem;font-weight:700;color:#163a5d;margin:0;display:flex;align-items:center;gap:12px}.grid-filter-tag[_ngcontent-%COMP%]{font-size:.66rem;font-weight:700;background:#e4f1ff;color:#2563eb;padding:3px 8px;border-radius:999px;letter-spacing:.04em}.grid-close-btn[_ngcontent-%COMP%]{background:#eef3fb;border:none;width:30px;height:30px;border-radius:8px;font-size:1.15rem;font-weight:700;color:#1e3962;cursor:pointer;transition:background .15s,color .15s;line-height:1}.grid-close-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.modal-search-inline[_ngcontent-%COMP%]{margin-bottom:6px}.exercise-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:12px 12px;margin-top:4px}.exercise-grid-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2ecf5;border-radius:12px;padding:8px 8px 9px;display:flex;flex-direction:column;align-items:center;gap:5px;position:relative;box-shadow:0 2px 10px #d6e5f826;transition:box-shadow .15s,transform .15s;min-height:135px}.exercise-grid-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #c6d9f84b;transform:translateY(-2px)}.grid-img[_ngcontent-%COMP%]{width:54px;height:54px;border-radius:10px;background:#f2f7fb;display:flex;align-items:center;justify-content:center;overflow:hidden}.grid-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:50px;max-height:50px;object-fit:contain;display:block}.grid-placeholder[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center}.grid-info[_ngcontent-%COMP%]{width:100%;text-align:center;display:flex;flex-direction:column;gap:0;min-height:32px}.grid-name[_ngcontent-%COMP%]{font-size:.62rem;font-weight:700;color:#163a5d;word-break:break-word;line-height:1.08;max-width:100%}.grid-cat[_ngcontent-%COMP%]{font-size:.5rem;font-weight:600;letter-spacing:.05em;color:#2563eb;opacity:.78}.grid-detail-link[_ngcontent-%COMP%]{margin-top:auto;font-size:.52rem;font-weight:700;background:var(--primary);color:#fff;padding:4px 10px 3px;border-radius:5px;text-decoration:none;letter-spacing:.04em;box-shadow:0 1px 3px #2563eb59;transition:background .15s;align-self:flex-end}.grid-detail-link[_ngcontent-%COMP%]:hover{background:#18397a}.categorie-grid-modal[_ngcontent-%COMP%]{max-width:880px;width:94vw;padding:24px 24px 30px;position:relative}.category-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(115px,1fr));gap:12px 12px;margin-top:4px}.category-grid-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e1ebf3;border-radius:12px;padding:8px 8px 10px;display:flex;flex-direction:column;align-items:center;gap:5px;position:relative;box-shadow:0 2px 10px #d6e5f826;transition:box-shadow .15s,transform .15s;min-height:132px}.category-grid-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #c6d9f84b;transform:translateY(-2px)}.grid-cat-img[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:10px;background:#f2fbf4;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.grid-cat-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:48px;max-height:48px;object-fit:contain;display:block}.grid-cat-placeholder[_ngcontent-%COMP%]{width:34px;height:34px;display:flex;align-items:center;justify-content:center}.grid-cat-edit-btn[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]{position:absolute;bottom:6px;right:6px;width:26px;height:26px;padding:2px;border-radius:50%;border:1px solid #cfe0fb;background:#eaf2ff;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:background .15s,border-color .15s,transform .12s,box-shadow .15s}.grid-cat-edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.grid-cat-edit-btn[_ngcontent-%COMP%]:hover, .category-edit-img-btn[_ngcontent-%COMP%]:hover{background:#2563eb;border-color:#1f56c7;transform:translateY(-1px);box-shadow:0 2px 8px #2563eb59}.grid-cat-edit-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#fff}.grid-cat-info[_ngcontent-%COMP%]{width:100%;text-align:center;display:flex;flex-direction:column;gap:0;min-height:28px}.grid-cat-name[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#163a5d;word-break:break-word;line-height:1.08}.grid-cat-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:auto}.grid-cat-delete-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4d1d1;color:#db3131;width:20px;height:20px;border-radius:50%;font-size:.7rem;font-weight:700;cursor:pointer;transition:background .15s,color .15s,border-color .15s;line-height:1;display:flex;align-items:center;justify-content:center}.grid-cat-delete-btn[_ngcontent-%COMP%]:hover{background:#db3131;color:#fff;border-color:#db3131}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]{width:18px;height:18px;position:relative;display:flex;align-items:center;justify-content:center}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;inset:0;cursor:pointer;margin:0}.grid-cat-checkbox[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #2563eb;border-radius:4px;background:#fff;position:relative;display:block;transition:background .15s,border-color .15s}.grid-cat-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:4px;top:2px;width:4px;height:7px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg);opacity:0;transition:opacity .15s}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .grid-cat-checkbox[_ngcontent-%COMP%]{background:#2563eb;border-color:#2563eb}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .grid-cat-checkbox[_ngcontent-%COMP%]:after{opacity:1}.grid-empty[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;font-size:.72rem;font-weight:600;color:#5c6b80;background:#f1f6fb;border:1px dashed #d2e2f1;padding:14px 12px;border-radius:12px}@media (max-width: 1050px){.esercizi-layout[_ngcontent-%COMP%]{flex-direction:column;gap:32px;padding:24px 8px 44px;max-width:97vw}.esercizi-card[_ngcontent-%COMP%], .categorie-card[_ngcontent-%COMP%]{min-width:0;max-width:100%}.card-item[_ngcontent-%COMP%]{width:88%;max-width:88%}}@media (max-width: 660px){.card-item[_ngcontent-%COMP%]{width:94%!important;max-width:94%!important}}@media (max-width: 620px){.exercise-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:10px 10px}.grid-img[_ngcontent-%COMP%]{width:50px;height:50px}.grid-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:46px;max-height:46px}.category-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:10px 10px}.grid-cat-img[_ngcontent-%COMP%]{width:48px;height:48px}.grid-cat-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:44px;max-height:44px}}@media (max-width: 500px){.card-img-wrap[_ngcontent-%COMP%]{width:64px;height:64px}.card-img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:58px;max-height:58px}.exercise-detail-btn[_ngcontent-%COMP%]{font-size:.68rem;padding:5px 12px;bottom:10px;right:10px}.icon-image-upload-big[_ngcontent-%COMP%]{width:140px;height:140px}.image-preview[_ngcontent-%COMP%]{width:132px;height:132px}}.single-autocat-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:4px;display:flex;align-items:center}.single-autocat-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;border:1.7px solid #d2e3fa;border-radius:8px;padding:10px 34px 10px 15px;font-size:.96rem;background:#f7fbff;color:#2563eb;font-weight:700;outline:none;transition:border-color .17s,background .15s,color .15s}.single-autocat-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#2563eb;background:#f2f8ff}.single-autocat-wrapper[_ngcontent-%COMP%]   input.auto-matched[_ngcontent-%COMP%]{color:#1b533e;background:#e6f9f0}.clear-cat-btn[_ngcontent-%COMP%]{position:absolute;right:7px;top:50%;transform:translateY(-50%);background:#eef3fb;color:#22416f;border:none;width:24px;height:24px;font-size:16px;line-height:1;border-radius:6px;cursor:pointer;padding:0;font-weight:700;transition:background .15s,color .15s}.clear-cat-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}']});let n=e;return n})();var Aoe=n=>({active:n}),Toe=(n,e)=>({active:n,inactive:e}),Doe=n=>["/anagrafica",n];function Moe(n,e){if(n&1&&wt(0,"img",42),n&2){let t=ie().$implicit;ge("src",t.avatarUrl,Sr)("alt",t.name)}}function Noe(n,e){n&1&&(A(0,"span",43),W(1,"person"),R())}function Poe(n,e){if(n&1&&(A(0,"tr")(1,"td",27)(2,"div",28)(3,"div",29),rt(4,Moe,1,2,"img",30)(5,Noe,2,0,"ng-template",null,0,to),R(),A(7,"div",31)(8,"div",32),W(9),R()()()(),A(10,"td",33)(11,"span",34)(12,"span",35),W(13,"event"),R(),W(14),R()(),A(15,"td",36)(16,"span",37),W(17),R()(),A(18,"td",38)(19,"div",39)(20,"span",40),W(21),R()()(),A(22,"td")(23,"a",41)(24,"span",12),W(25,"visibility"),R()()()()),n&2){let t=e.$implicit,r=pi(6);X(4),ge("ngIf",t.avatarUrl)("ngIfElse",r),X(5),zt(t.name),X(5),Ar(" ",t.signupDate," "),X(3),zt(t.email),X(3),ge("ngClass",hv(10,Toe,t.status==="Attivo",t.status!=="Attivo")),X(),zt(t.status),X(2),Ta("aria-label",qc("Dettaglio ",t.name)),ge("routerLink",$c(13,Doe,t.id))}}function koe(n,e){if(n&1){let t=Bt();A(0,"aside",44)(1,"div",45),W(2,"Filtri"),R(),A(3,"label",46)(4,"span",47),W(5,"Stato"),R(),A(6,"select",48),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.filterStatus,i)||(o.filterStatus=i),Se(i)}),Fe("change",function(){Ie(t);let i=ie();return Se(i.applyFilters())}),A(7,"option",49),W(8,"Tutti"),R(),A(9,"option",50),W(10,"Attivo"),R(),A(11,"option",51),W(12,"Inattivo"),R()()(),A(13,"label",46)(14,"span",47),W(15,"Email"),R(),A(16,"select",48),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.filterHasEmail,i)||(o.filterHasEmail=i),Se(i)}),Fe("change",function(){Ie(t);let i=ie();return Se(i.applyFilters())}),A(17,"option",49),W(18,"Tutte"),R(),A(19,"option",52),W(20,"Solo con email"),R(),A(21,"option",53),W(22,"Solo senza email"),R()()(),A(23,"label",46)(24,"span",47),W(25,"Tessera"),R(),A(26,"select",54),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.filterTessera,i)||(o.filterTessera=i),Se(i)}),Fe("change",function(){Ie(t);let i=ie();return Se(i.applyFilters())}),A(27,"option",49),W(28,"Tutte"),R(),A(29,"option",55),W(30,"Attive"),R(),A(31,"option",56),W(32,"Scadute"),R()()()()}if(n&2){let t=ie();X(6),lt("ngModel",t.filterStatus),X(10),lt("ngModel",t.filterHasEmail),X(10),lt("ngModel",t.filterTessera)}}function Roe(n,e){if(n&1){let t=Bt();A(0,"div",57),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeModal())}),R()}}function Ooe(n,e){if(n&1&&(Ni(0),wt(1,"img",85),Pi()),n&2){let t=ie(2);X(),ge("src",t.form.avatar,Sr)}}function Loe(n,e){if(n&1){let t=Bt();A(0,"button",86),Fe("click",function(){Ie(t),ie();let i=pi(8),o=ie();return Se(o.triggerAvatarInput(i))}),A(1,"span",87),W(2,"photo_camera"),R()()}}function Foe(n,e){n&1&&(A(0,"div",88),W(1," Caricamento immagine in corso... "),R())}function Voe(n,e){if(n&1){let t=Bt();A(0,"div",58)(1,"form",59,1),Fe("ngSubmit",function(){Ie(t);let i=ie();return Se(i.registerUser())})("click",function(i){return Ie(t),Se(i.stopPropagation())}),A(3,"h2"),W(4,"Registra Cliente"),R(),A(5,"div",60)(6,"div",61)(7,"input",62,2),Fe("change",function(i){Ie(t);let o=ie();return Se(o.onAvatarChange(i))}),R(),rt(9,Ooe,2,1,"ng-container",63)(10,Loe,3,0,"ng-template",null,3,to),R(),rt(12,Foe,2,0,"div",64),R(),A(13,"div",65)(14,"div",66)(15,"div",67)(16,"label",68),W(17,"Nome"),R(),A(18,"input",69),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.form.nome,i)||(o.form.nome=i),Se(i)}),R()(),A(19,"div",67)(20,"label",68),W(21,"Cognome"),R(),A(22,"input",70),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.form.cognome,i)||(o.form.cognome=i),Se(i)}),R()()(),A(23,"div",66)(24,"div",67)(25,"label",68),W(26,"Email"),R(),A(27,"input",71),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.form.emailModal,i)||(o.form.emailModal=i),Se(i)}),R()(),A(28,"div",67)(29,"label",68),W(30,"Numero di Telefono"),R(),A(31,"input",72),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.form.phone,i)||(o.form.phone=i),Se(i)}),R()()(),A(32,"div",66)(33,"div",67)(34,"label",73)(35,"span",35),W(36,"event"),R(),W(37," Data Iscrizione "),R(),A(38,"input",74),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.form.signupDateModal,i)||(o.form.signupDateModal=i),Se(i)}),R()(),A(39,"div",75)(40,"label",76),W(41,"-"),R(),A(42,"div",77)(43,"label",78)(44,"input",79),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.form.isActive,i)||(o.form.isActive=i),Se(i)}),R(),wt(45,"span",80),R(),A(46,"span",81),W(47),R()()()()(),A(48,"div",82)(49,"button",83),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeModal())}),W(50,"Annulla"),R(),A(51,"button",84),W(52,"Registra Cliente"),R()()()()}if(n&2){let t=pi(2),r=pi(11),i=ie();X(9),ge("ngIf",i.form.avatar)("ngIfElse",r),X(3),ge("ngIf",i.avatarLoading),X(6),lt("ngModel",i.form.nome),X(4),lt("ngModel",i.form.cognome),X(5),lt("ngModel",i.form.emailModal),X(4),lt("ngModel",i.form.phone),X(7),lt("ngModel",i.form.signupDateModal),X(6),lt("ngModel",i.form.isActive),X(2),ps("active",i.form.isActive)("inactive",!i.form.isActive),X(),Ar(" ",i.form.isActive?"Attivo":"Inattivo"," "),X(4),ge("disabled",t.invalid||i.avatarLoading)}}var zB=(()=>{let e=class e{constructor(r,i){this.userService=r,this.imageService=i,this.searchTerm="",this.showFilters=!1,this.filterStatus="",this.filterHasEmail="",this.filterTessera="",this.users=[],this.filteredUsers=[],this.modalOpen=!1,this.today=new Date().toISOString().slice(0,10),this.form={avatar:"",avatarFile:null,nome:"",cognome:"",emailModal:"",phone:"",signupDateModal:"",isActive:!0},this.avatarLoading=!1}ngOnInit(){this.usersSub=this.userService.getAll$().subscribe(r=>{this.users=r||[],this.applyFilters()})}ngOnDestroy(){this.usersSub?.unsubscribe()}openModal(){this.modalOpen=!0,this.form={avatar:"",avatarFile:null,nome:"",cognome:"",emailModal:"",phone:"",signupDateModal:"",isActive:!0}}closeModal(){this.modalOpen=!1}onSearchChange(){this.applyFilters()}toggleFilters(){this.showFilters=!this.showFilters}matchesSearch(r,i){if(!i)return!0;let o=i.toLowerCase();return r.name?.toLowerCase().includes(o)||r.email?.toLowerCase().includes(o)||!1}hasEmail(r){return!!(r.email&&r.email.trim()!=="")}getTesseraFine(r){let i=(r.subscriptionEnd||r.tesseraEnd||"").trim();return i.length===10?i:""}applyFilters(){let r=[...this.users];this.searchTerm&&(r=r.filter(i=>this.matchesSearch(i,this.searchTerm))),this.filterStatus&&(r=r.filter(i=>i.status===this.filterStatus)),this.filterHasEmail==="with"?r=r.filter(i=>this.hasEmail(i)):this.filterHasEmail==="without"&&(r=r.filter(i=>!this.hasEmail(i))),this.filterTessera==="attiva"?r=r.filter(i=>{let o=this.getTesseraFine(i);return o!==""&&o>this.today}):this.filterTessera==="scaduta"&&(r=r.filter(i=>{let o=this.getTesseraFine(i);return o!==""&&o<=this.today})),this.filteredUsers=r}onAvatarChange(r){return ee(this,null,function*(){let i=r.target.files?.[0];i&&(this.avatarLoading=!0,this.form.avatarFile=i,this.form.avatar=yield this.imageService.compressAndConvertToBase64(i,1e3,256),this.avatarLoading=!1)})}triggerAvatarInput(r){r.click()}registerUser(){return ee(this,null,function*(){this.avatarLoading=!0;let r=this.form.isActive?"Attivo":"Inattivo",i={name:`${this.form.nome} ${this.form.cognome}`.trim(),email:this.form.emailModal,phone:this.form.phone,signupDate:this.form.signupDateModal||new Date().toISOString().slice(0,10),avatarUrl:this.form.avatar,status:r,cards:[]};try{yield this.userService.add(i),this.avatarLoading=!1,this.closeModal(),this.applyFilters()}catch(o){this.avatarLoading=!1,alert("Errore nel salvataggio: "+(o?.message||o))}})}};e.\u0275fac=function(i){return new(i||e)(Je(ym),Je(_m))},e.\u0275cmp=lr({type:e,selectors:[["app-anagrafica"]],standalone:!1,decls:40,vars:12,consts:[["defaultAvatarRow",""],["modalForm","ngForm"],["avatarInput",""],["showIcon",""],[1,"anagrafica-utenti-layout"],[1,"anagrafica-content","align-left"],[1,"actions-header","responsive-header"],[1,"btn","primary",3,"click"],[1,"header-controls"],[1,"searchbar"],["type","text","placeholder","Cerca...",3,"ngModelChange","input","ngModel"],["title","Cerca",1,"icon-btn",3,"click"],[1,"material-icons"],["title","Filtri",1,"icon-btn",3,"click","ngClass","aria-expanded"],[1,"list-layout"],[1,"list-main"],[1,"table-outer-center"],[1,"user-table"],[2,"width","30%"],[2,"width","16%"],[2,"width","13%"],[2,"width","12%"],[1,"align-left"],[4,"ngFor","ngForOf"],["class","filters-aside",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-nuovo-utente",4,"ngIf"],[1,"user-cell"],[1,"user-card-row"],[1,"user-avatar"],["class","avatar-img",3,"src","alt",4,"ngIf","ngIfElse"],[1,"user-info-main"],[1,"user-name"],[1,"user-signup"],[1,"user-date"],[1,"material-icons","calendar-icon"],[1,"user-email-table"],[1,"user-email"],[1,"user-status-actions"],[1,"status-action-flex","left-align"],[1,"status-label",3,"ngClass"],["title","Dettaglio",1,"icon-btn",3,"aria-label","routerLink"],[1,"avatar-img",3,"src","alt"],[1,"avatar-placeholder","material-icons"],[1,"filters-aside"],[1,"filters-title"],[1,"filter-group"],[1,"filter-label"],[3,"ngModelChange","change","ngModel"],["value",""],["value","Attivo"],["value","Inattivo"],["value","with"],["value","without"],[1,"tessera-select",3,"ngModelChange","change","ngModel"],["value","attiva"],["value","scaduta"],[1,"modal-backdrop",3,"click"],[1,"modal-nuovo-utente"],[1,"modal-form",3,"ngSubmit","click"],[1,"avatar-modal-section"],[1,"avatar-upload-box"],["type","file","accept","image/*","hidden","",3,"change"],[4,"ngIf","ngIfElse"],["class","avatar-loader","style","margin-left:15px;color:#888;",4,"ngIf"],[1,"modal-fields","modal-fields-2col"],[1,"modal-form-row"],[1,"form-group"],[1,"field-label"],["type","text","placeholder","Nome","name","nome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Cognome","name","cognome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","emailModal","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Numero di Telefono","name","phone",3,"ngModelChange","ngModel"],[1,"field-label","flex-label","calendar-label"],["type","date","name","signupDateModal",3,"ngModelChange","ngModel"],[1,"form-group","form-group-switch"],[1,"field-label",2,"opacity","0","user-select","none"],[1,"modal-stato-switch"],[1,"switch"],["type","checkbox","name","isActive",3,"ngModelChange","ngModel"],[1,"slider"],[1,"modal-stato"],[1,"modal-actions"],["type","button",1,"btn","cancel",3,"click"],["type","submit",1,"btn","primary",3,"disabled"],["alt","Avatar",1,"avatar-img-preview",3,"src"],["type","button",1,"avatar-add-btn",3,"click"],[1,"material-icons","avatar-add"],[1,"avatar-loader",2,"margin-left","15px","color","#888"]],template:function(i,o){i&1&&(A(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),Fe("click",function(){return o.openModal()}),W(4,"Cliente"),R(),A(5,"div",8)(6,"div",9)(7,"input",10),ut("ngModelChange",function(a){return dt(o.searchTerm,a)||(o.searchTerm=a),a}),Fe("input",function(){return o.onSearchChange()}),R(),A(8,"button",11),Fe("click",function(){return o.onSearchChange()}),A(9,"span",12),W(10,"search"),R()(),A(11,"button",13),Fe("click",function(){return o.toggleFilters()}),A(12,"span",12),W(13,"filter_list"),R()()()()(),A(14,"div",14)(15,"div",15)(16,"div",16)(17,"table",17)(18,"colgroup"),wt(19,"col",18)(20,"col",19)(21,"col",19)(22,"col",20)(23,"col",21),R(),A(24,"thead")(25,"tr")(26,"th",22),W(27,"Cliente"),R(),A(28,"th",22),W(29,"Data Iscrizione"),R(),A(30,"th",22),W(31,"Email"),R(),A(32,"th",22),W(33,"Stato"),R(),wt(34,"th"),R()(),A(35,"tbody"),rt(36,Poe,26,15,"tr",23),R()()()(),rt(37,koe,33,3,"aside",24),R(),rt(38,Roe,1,0,"div",25)(39,Voe,53,15,"div",26),R()()),i&2&&(X(7),lt("ngModel",o.searchTerm),X(4),Ta("aria-expanded",zf(o.showFilters)),ge("ngClass",$c(10,Aoe,o.showFilters)),X(3),ps("has-filters",o.showFilters),X(22),ge("ngForOf",o.filteredUsers),X(),ge("ngIf",o.showFilters),X(),ge("ngIf",o.modalOpen),X(),ge("ngIf",o.modalOpen))},dependencies:[qf,wo,no,rg,nd,rd,gs,N5,Wc,Da,ng,Hf,qs,$f,Ma],styles:['[_ngcontent-%COMP%]:root{--primary: #2563eb;--primary-hover: #194fd6;--bg: #f5f8fc;--panel-bg: #ffffff;--panel-shadow: 0 2px 12px rgba(36,80,144,.06);--radius: 10px;--text: #143559}.anagrafica-utenti-layout[_ngcontent-%COMP%]{background:#f6f8fa;min-height:100vh;font-family:Segoe UI,Arial,sans-serif;width:100%;box-sizing:border-box}.anagrafica-content.align-left[_ngcontent-%COMP%]{max-width:1200px;margin:36px auto 40px;padding:0 24px}.actions-header.responsive-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;align-items:center;gap:18px;margin-bottom:18px}.header-controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:18px}.searchbar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f8fafd;border-radius:9px;padding:6px 10px;gap:4px;min-width:220px;max-width:360px;width:100%;height:38px;box-shadow:0 0 4px #365fd014;border:1px solid #dae2ec;transition:border-color .18s,box-shadow .18s}.searchbar[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);box-shadow:0 0 0 3px #2563eb1c}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;font-size:.92rem;font-weight:500;padding:4px 6px 4px 2px;width:100%;color:#242f42}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:6px 7px;border-radius:8px;transition:background .13s;display:flex;align-items:center;margin-left:0}.icon-btn[_ngcontent-%COMP%]:hover, .icon-btn[_ngcontent-%COMP%]:focus{background:#eaeef6}.icon-btn.active[_ngcontent-%COMP%], .icon-btn[aria-expanded=true][_ngcontent-%COMP%]{background:#e8f0ff}.material-icons[_ngcontent-%COMP%], .icon-font[_ngcontent-%COMP%]{font-family:Material Icons,Segoe UI Symbol,Arial,sans-serif;font-style:normal;font-weight:400;font-size:22px;display:inline-block;line-height:1;color:var(--primary);vertical-align:middle;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.list-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:18px;align-items:start}.list-layout.has-filters[_ngcontent-%COMP%]{grid-template-columns:1fr 260px}.filters-aside[_ngcontent-%COMP%]{align-self:start;background:transparent;border:none;box-shadow:none;padding:4px 0;display:flex;flex-direction:column;gap:12px}.filters-title[_ngcontent-%COMP%]{font-weight:700;color:#143559;margin-bottom:2px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.filter-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#345;letter-spacing:.02em}.filters-aside[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:36px;line-height:36px;padding:0 12px;border-radius:8px;border:1px solid #ccdaeb;background:#fff;color:#132a4a;font-weight:600;font-size:.95rem;outline:none;transition:border-color .18s,box-shadow .18s}.filters-aside[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #2563eb26}.tessera-select[_ngcontent-%COMP%]   option[value=attiva][_ngcontent-%COMP%]{color:#318b2b}.tessera-select[_ngcontent-%COMP%]   option[value=scaduta][_ngcontent-%COMP%]{color:#d32f2f}.table-outer-center[_ngcontent-%COMP%]{display:block}.user-table[_ngcontent-%COMP%]{background:#fff;box-shadow:0 5px 35px #d3dbe925;border-spacing:0;border-radius:13px;width:100%;table-layout:fixed;overflow:hidden}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px;font-size:.95rem;background:#fff;vertical-align:middle;word-break:break-word;text-align:left;height:52px}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fbfc;font-weight:700;color:#232e47;border-bottom:2px solid #ececf0}.user-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f1f2f7}.user-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.user-cell[_ngcontent-%COMP%]{vertical-align:middle;padding-top:6px;padding-bottom:6px}.user-card-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;min-height:41px}.user-avatar[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center}.avatar-img[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:41px;height:41px;border-radius:12px;background:#dbe3ef;display:flex;align-items:center;justify-content:center;font-size:22px;color:#b4bed0;object-fit:cover}.user-info-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;min-width:0;width:100%}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#143559;font-size:1.06rem;line-height:1.15}.user-date[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--primary);font-size:.83rem;gap:6px;font-weight:600}.calendar-icon[_ngcontent-%COMP%]{font-size:18px;color:#2177e8}.user-email[_ngcontent-%COMP%]{color:#5f6c7e;font-size:.83rem;word-break:break-all}.user-status-actions[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.status-action-flex.left-align[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.status-label[_ngcontent-%COMP%]{font-weight:600;border-radius:7px;padding:6px 16px;font-size:.83rem;min-width:72px;text-align:center}.status-label.active[_ngcontent-%COMP%]{color:#14b452;background:#e8faee}.status-label.inactive[_ngcontent-%COMP%]{color:#e76c6c;background:#fde8e8}a.icon-btn[_ngcontent-%COMP%]{text-decoration:none!important}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:1010;inset:0;background:#17334b33}.modal-nuovo-utente[_ngcontent-%COMP%]{position:fixed;z-index:1020;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:20px;box-shadow:0 6px 32px #21407a33,0 1.5px 3px #21407a29;min-width:380px;max-width:520px;width:96vw;padding:26px 20px 18px;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalpop .18s cubic-bezier(.32,1.56,.66,1)}.modal-form[_ngcontent-%COMP%]{width:100%}.modal-nuovo-utente[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;color:#232e47;margin:0 0 18px;text-align:center}.avatar-modal-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:18px;margin-top:4px}.avatar-upload-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.avatar-add-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0}.avatar-add[_ngcontent-%COMP%]{font-size:34px}.avatar-img-preview[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;object-fit:cover;display:block}.modal-fields-2col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:100%}.modal-form-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:28px;width:100%;margin-bottom:22px}.form-group[_ngcontent-%COMP%]{flex:1 0 0;min-width:0;display:flex;flex-direction:column}.form-group-switch[_ngcontent-%COMP%]{justify-content:flex-end;align-items:flex-end}.modal-fields-2col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-fields-2col[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.9rem;border-radius:7px;border:1.4px solid #d6d9e0;padding:10px 9px;outline:none;background:#f8fafc;color:#223555;transition:border-color .15s,background-color .15s;width:100%}.modal-fields-2col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-fields-2col[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:#f2f7ff}.field-label[_ngcontent-%COMP%]{font-size:.83rem;font-weight:600;color:#1e2a3e;margin:4px 0 6px 1px;letter-spacing:.02em;text-transform:uppercase}.flex-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.modal-stato-switch[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.modal-stato[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:#21af5a;min-width:55px;text-align:right}.modal-stato.inactive[_ngcontent-%COMP%]{color:#e36e6e}.switch[_ngcontent-%COMP%]{display:inline-block;width:48px;height:26px;position:relative}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;inset:0;background:#e4e9f1;border-radius:26px;transition:.2s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#22c55e}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:4px;bottom:3px;border-radius:50%;background:#fff;box-shadow:0 1px 4px #6366f13a;transition:.19s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(20px)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:4px}.btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 15px;border-radius:9px;font-size:.85rem;font-weight:600;cursor:pointer;transition:background .16s}.btn[_ngcontent-%COMP%]:hover{background:var(--primary-hover)}.btn.cancel[_ngcontent-%COMP%]{background:#eef3fb;color:#1e3a8a}.btn.cancel[_ngcontent-%COMP%]:hover{background:#e1ebfb}@keyframes _ngcontent-%COMP%_modalpop{0%{transform:translate(-50%,-53%) scale(.97)}to{transform:translate(-50%,-50%) scale(1)}}@media (max-width: 980px){.list-layout.has-filters[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-aside[_ngcontent-%COMP%]{order:-1}}@media (max-width: 600px){.searchbar[_ngcontent-%COMP%]{max-width:100%}.modal-nuovo-utente[_ngcontent-%COMP%]{min-width:300px}}@media (max-width: 420px){.searchbar[_ngcontent-%COMP%]{min-width:100%;height:36px}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:.84rem}.icon-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}}']});let n=e;return n})();var joe=n=>["/anagrafica",n];function Boe(n,e){if(n&1&&(A(0,"div",3)(1,"div",4)(2,"div",5),W(3),R(),A(4,"div",6),W(5),R()(),A(6,"div",7)(7,"a",8),W(8,"Dettaglio"),R()()()),n&2){let t=e.$implicit;X(3),zt(t.name),X(2),zt(t.email),X(2),ge("routerLink",$c(3,joe,t.id))}}var qB=(()=>{let e=class e{constructor(r){this.userService=r,this.users=[],this.filteredUsers=[]}ngOnInit(){return ee(this,null,function*(){let r=yield this.userService.getAll();this.users=r,this.filteredUsers=[...this.users]})}};e.\u0275fac=function(i){return new(i||e)(Je(ym))},e.\u0275cmp=lr({type:e,selectors:[["app-anagrafica-list"]],standalone:!1,decls:5,vars:1,consts:[[1,"page","anagrafica-list"],[1,"list"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"left"],[1,"name"],[1,"email"],[1,"actions"],[1,"btn","small",3,"routerLink"]],template:function(i,o){i&1&&(A(0,"div",0)(1,"h2"),W(2,"Lista Utenti"),R(),A(3,"div",1),rt(4,Boe,9,5,"div",2),R()()),i&2&&(X(4),ge("ngForOf",o.filteredUsers))},dependencies:[wo,Ma],styles:[".anagrafica-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin-top:12px}.anagrafica-list[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;padding:12px;border-radius:8px;margin-bottom:10px}.anagrafica-list[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600}.anagrafica-list[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--muted);font-size:13px}.btn.small[_ngcontent-%COMP%]{padding:6px 8px}.anagrafica-list[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400;font-size:15px}.anagrafica-list[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .anagrafica-list[_ngcontent-%COMP%]   select.tessera-combo[_ngcontent-%COMP%]{accent-color:#1742b0;margin-right:6px;margin-left:3px;vertical-align:middle}.anagrafica-list[_ngcontent-%COMP%]   .tessera-combo[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #b9c4d4;padding:5px 9px;font-size:15px;background:#fff;color:#1742b0;font-weight:500;min-width:75px;margin-left:8px;margin-right:6px;vertical-align:middle}.anagrafica-list[_ngcontent-%COMP%]   .filter-bar[_ngcontent-%COMP%]{display:flex;gap:18px;align-items:center;margin-bottom:15px}.anagrafica-list[_ngcontent-%COMP%]   .filter-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}"]});let n=e;return n})();function Un(n){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(n)}var gc=Uint8Array,Js=Uint16Array,vP=Int32Array,yP=new gc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_P=new gc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$B=new gc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),KB=function(n,e){for(var t=new Js(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new vP(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},YB=KB(yP,2),Uoe=YB.b,pP=YB.r;Uoe[28]=258,pP[258]=28;var QB=KB(_P,0),ike=QB.b,HB=QB.r,gP=new Js(32768);for(Ln=0;Ln<32768;++Ln)lu=(Ln&43690)>>1|(Ln&21845)<<1,lu=(lu&52428)>>2|(lu&13107)<<2,lu=(lu&61680)>>4|(lu&3855)<<4,gP[Ln]=((lu&65280)>>8|(lu&255)<<8)>>1;var lu,Ln,Jy=function(n,e,t){for(var r=n.length,i=0,o=new Js(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new Js(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new Js(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],u=e-n[i],p=s[n[i]-1]++<<u,m=p|(1<<u)-1;p<=m;++p)a[gP[p]>>c]=l}else for(a=new Js(r),i=0;i<r;++i)n[i]&&(a[i]=gP[s[n[i]-1]++]>>15-n[i]);return a},Ih=new gc(288);for(Ln=0;Ln<144;++Ln)Ih[Ln]=8;var Ln;for(Ln=144;Ln<256;++Ln)Ih[Ln]=9;var Ln;for(Ln=256;Ln<280;++Ln)Ih[Ln]=7;var Ln;for(Ln=280;Ln<288;++Ln)Ih[Ln]=8;var Ln,oC=new gc(32);for(Ln=0;Ln<32;++Ln)oC[Ln]=5;var Ln,zoe=Jy(Ih,9,0);var qoe=Jy(oC,5,0);var ZB=function(n){return(n+7)/8|0},$oe=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new gc(n.subarray(e,t))};var uu=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Zy=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},hP=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:JB,l:0};if(i==1){var s=new gc(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(oe,fe){return oe.f-fe.f}),t.push({s:-1,f:25001});var a=t[0],c=t[1],l=0,u=1,p=2;for(t[0]={s:-1,f:a.f+c.f,l:a,r:c};u!=i-1;)a=t[t[l].f<t[p].f?l++:p++],c=t[l!=u&&t[l].f<t[p].f?l++:p++],t[u++]={s:-1,f:a.f+c.f,l:a,r:c};for(var m=o[0].s,r=1;r<i;++r)o[r].s>m&&(m=o[r].s);var g=new Js(m+1),x=mP(t[u-1],g,0);if(x>e){var r=0,E=0,D=x-e,N=1<<D;for(o.sort(function(fe,z){return g[z.s]-g[fe.s]||fe.f-z.f});r<i;++r){var K=o[r].s;if(g[K]>e)E+=N-(1<<x-g[K]),g[K]=e;else break}for(E>>=D;E>0;){var j=o[r].s;g[j]<e?E-=1<<e-g[j]++-1:++r}for(;r>=0&&E;--r){var G=o[r].s;g[G]==e&&(--g[G],++E)}x=e}return{t:new gc(g),l:x}},mP=function(n,e,t){return n.s==-1?Math.max(mP(n.l,e,t+1),mP(n.r,e,t+1)):e[n.s]=t},GB=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Js(++e),r=0,i=n[0],o=1,s=function(c){t[r++]=c},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},Xy=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},XB=function(n,e,t){var r=t.length,i=ZB(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},WB=function(n,e,t,r,i,o,s,a,c,l,u){uu(e,u++,t),++i[256];for(var p=hP(i,15),m=p.t,g=p.l,x=hP(o,15),E=x.t,D=x.l,N=GB(m),K=N.c,j=N.n,G=GB(E),oe=G.c,fe=G.n,z=new Js(19),M=0;M<K.length;++M)++z[K[M]&31];for(var M=0;M<oe.length;++M)++z[oe[M]&31];for(var I=hP(z,7),V=I.t,b=I.l,S=19;S>4&&!V[$B[S-1]];--S);var T=l+5<<3,te=Xy(i,Ih)+Xy(o,oC)+s,_e=Xy(i,m)+Xy(o,E)+s+14+3*S+Xy(z,V)+2*z[16]+3*z[17]+7*z[18];if(c>=0&&T<=te&&T<=_e)return XB(e,u,n.subarray(c,c+l));var Te,be,de,Ae;if(uu(e,u,1+(_e<te)),u+=2,_e<te){Te=Jy(m,g,0),be=m,de=Jy(E,D,0),Ae=E;var Be=Jy(V,b,0);uu(e,u,j-257),uu(e,u+5,fe-1),uu(e,u+10,S-4),u+=14;for(var M=0;M<S;++M)uu(e,u+3*M,V[$B[M]]);u+=3*S;for(var Re=[K,oe],O=0;O<2;++O)for(var H=Re[O],M=0;M<H.length;++M){var J=H[M]&31;uu(e,u,Be[J]),u+=V[J],J>15&&(uu(e,u,H[M]>>5&127),u+=H[M]>>12)}}else Te=zoe,be=Ih,de=qoe,Ae=oC;for(var M=0;M<a;++M){var re=r[M];if(re>255){var J=re>>18&31;Zy(e,u,Te[J+257]),u+=be[J+257],J>7&&(uu(e,u,re>>23&31),u+=yP[J]);var ae=re&31;Zy(e,u,de[ae]),u+=Ae[ae],ae>3&&(Zy(e,u,re>>5&8191),u+=_P[ae])}else Zy(e,u,Te[re]),u+=be[re]}return Zy(e,u,Te[256]),u+be[256]},Hoe=new vP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),JB=new gc(0),Goe=function(n,e,t,r,i,o){var s=o.z||n.length,a=new gc(r+s+5*(1+Math.ceil(s/7e3))+i),c=a.subarray(r,a.length-i),l=o.l,u=(o.r||0)&7;if(e){u&&(c[0]=o.r>>3);for(var p=Hoe[e-1],m=p>>13,g=p&8191,x=(1<<t)-1,E=o.p||new Js(32768),D=o.h||new Js(x+1),N=Math.ceil(t/3),K=2*N,j=function(ot){return(n[ot]^n[ot+1]<<N^n[ot+2]<<K)&x},G=new vP(25e3),oe=new Js(288),fe=new Js(32),z=0,M=0,I=o.i||0,V=0,b=o.w||0,S=0;I+2<s;++I){var T=j(I),te=I&32767,_e=D[T];if(E[te]=_e,D[T]=te,b<=I){var Te=s-I;if((z>7e3||V>24576)&&(Te>423||!l)){u=WB(n,c,0,G,oe,fe,M,V,S,I-S,u),V=z=M=0,S=I;for(var be=0;be<286;++be)oe[be]=0;for(var be=0;be<30;++be)fe[be]=0}var de=2,Ae=0,Be=g,Re=te-_e&32767;if(Te>2&&T==j(I-Re))for(var O=Math.min(m,Te)-1,H=Math.min(32767,I),J=Math.min(258,Te);Re<=H&&--Be&&te!=_e;){if(n[I+de]==n[I+de-Re]){for(var re=0;re<J&&n[I+re]==n[I+re-Re];++re);if(re>de){if(de=re,Ae=Re,re>O)break;for(var ae=Math.min(Re,re-2),he=0,be=0;be<ae;++be){var Ee=I-Re+be&32767,ye=E[Ee],De=Ee-ye&32767;De>he&&(he=De,_e=Ee)}}}te=_e,_e=E[te],Re+=te-_e&32767}if(Ae){G[V++]=268435456|pP[de]<<18|HB[Ae];var Ue=pP[de]&31,Xe=HB[Ae]&31;M+=yP[Ue]+_P[Xe],++oe[257+Ue],++fe[Xe],b=I+de,++z}else G[V++]=n[I],++oe[n[I]]}}for(I=Math.max(I,b);I<s;++I)G[V++]=n[I],++oe[n[I]];u=WB(n,c,l,G,oe,fe,M,V,S,I-S,u),l||(o.r=u&7|c[u/8|0]<<3,u-=7,o.h=D,o.p=E,o.i=I,o.w=b)}else{for(var I=o.w||0;I<s+l;I+=65535){var We=I+65535;We>=s&&(c[u/8|0]=l,We=s),u=XB(c,u+1,n.subarray(I,We))}o.i=s}return $oe(a,0,r+ZB(u)+i)};var eU=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Woe=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new gc(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return Goe(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)};var tU=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var Koe=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=eU();i.p(e.dictionary),tU(n,2,i.d())}};function sC(n,e){e||(e={});var t=eU();t.p(n);var r=Woe(n,e,e.dictionary?6:2,4);return Koe(r,e),tU(r,r.length-4,t.d()),r}var Yoe=typeof TextDecoder<"u"&&new TextDecoder,Qoe=0;try{Yoe.decode(JB,{stream:!0}),Qoe=1}catch{}function nU(n){if(Array.isArray(n))return n}function rU(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function wP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function iU(n,e){if(n){if(typeof n=="string")return wP(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?wP(n,e):void 0}}function oU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bP(n,e){return nU(n)||rU(n,e)||iU(n,e)||oU()}function xP(n,e="utf8"){return new TextDecoder(e).decode(n)}var Zoe=new TextEncoder;function sU(n){return Zoe.encode(n)}var Xoe=1024*8,Joe=(()=>{let n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),CP={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},e_=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Xoe,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);let i=t.offset?t.offset>>>0:0,o=e.byteLength-i,s=i;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){let r=CP[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===Joe&&t!=="uint8"&&t!=="int8"){let a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();let c=new CP[t](a.buffer);return this.offset+=r,c.reverse(),c}let s=new CP[t](o);return this.offset+=r,s}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return xP(this.readBytes(e))}decodeText(e=1,t="utf8"){return xP(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(sU(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function Im(n){let e=n.length;for(;--e>=0;)n[e]=0}var ese=0,HU=1,tse=2,nse=3,rse=258,WP=29,g_=256,a_=g_+1+WP,xm=30,KP=19,GU=2*a_+1,Sh=15,EP=16,ise=7,YP=256,WU=16,KU=17,YU=18,VP=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),fC=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ose=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),QU=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sse=512,fu=new Array((a_+2)*2);Im(fu);var i_=new Array(xm*2);Im(i_);var c_=new Array(sse);Im(c_);var l_=new Array(rse-nse+1);Im(l_);var QP=new Array(WP);Im(QP);var hC=new Array(xm);Im(hC);function IP(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var ZU,XU,JU;function SP(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var e9=n=>n<256?c_[n]:c_[256+(n>>>7)],u_=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},bs=(n,e,t)=>{n.bi_valid>EP-t?(n.bi_buf|=e<<n.bi_valid&65535,u_(n,n.bi_buf),n.bi_buf=e>>EP-n.bi_valid,n.bi_valid+=t-EP):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},ul=(n,e,t)=>{bs(n,t[e*2],t[e*2+1])},t9=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},ase=n=>{n.bi_valid===16?(u_(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},cse=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,u,p,m,g,x,E=0;for(m=0;m<=Sh;m++)n.bl_count[m]=0;for(t[n.heap[n.heap_max]*2+1]=0,l=n.heap_max+1;l<GU;l++)u=n.heap[l],m=t[t[u*2+1]*2+1]+1,m>c&&(m=c,E++),t[u*2+1]=m,!(u>r)&&(n.bl_count[m]++,g=0,u>=a&&(g=s[u-a]),x=t[u*2],n.opt_len+=x*(m+g),o&&(n.static_len+=x*(i[u*2+1]+g)));if(E!==0){do{for(m=c-1;n.bl_count[m]===0;)m--;n.bl_count[m]--,n.bl_count[m+1]+=2,n.bl_count[c]--,E-=2}while(E>0);for(m=c;m!==0;m--)for(u=n.bl_count[m];u!==0;)p=n.heap[--l],!(p>r)&&(t[p*2+1]!==m&&(n.opt_len+=(m-t[p*2+1])*t[p*2],t[p*2+1]=m),u--)}},n9=(n,e,t)=>{let r=new Array(Sh+1),i=0,o,s;for(o=1;o<=Sh;o++)i=i+t[o-1]<<1,r[o]=i;for(s=0;s<=e;s++){let a=n[s*2+1];a!==0&&(n[s*2]=t9(r[a]++,a))}},lse=()=>{let n,e,t,r,i,o=new Array(Sh+1);for(t=0,r=0;r<WP-1;r++)for(QP[r]=t,n=0;n<1<<VP[r];n++)l_[t++]=r;for(l_[t-1]=r,i=0,r=0;r<16;r++)for(hC[r]=i,n=0;n<1<<fC[r];n++)c_[i++]=r;for(i>>=7;r<xm;r++)for(hC[r]=i<<7,n=0;n<1<<fC[r]-7;n++)c_[256+i++]=r;for(e=0;e<=Sh;e++)o[e]=0;for(n=0;n<=143;)fu[n*2+1]=8,n++,o[8]++;for(;n<=255;)fu[n*2+1]=9,n++,o[9]++;for(;n<=279;)fu[n*2+1]=7,n++,o[7]++;for(;n<=287;)fu[n*2+1]=8,n++,o[8]++;for(n9(fu,a_+1,o),n=0;n<xm;n++)i_[n*2+1]=5,i_[n*2]=t9(n,5);ZU=new IP(fu,VP,g_+1,a_,Sh),XU=new IP(i_,fC,0,xm,Sh),JU=new IP(new Array(0),ose,0,KP,ise)},r9=n=>{let e;for(e=0;e<a_;e++)n.dyn_ltree[e*2]=0;for(e=0;e<xm;e++)n.dyn_dtree[e*2]=0;for(e=0;e<KP;e++)n.bl_tree[e*2]=0;n.dyn_ltree[YP*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},i9=n=>{n.bi_valid>8?u_(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},aU=(n,e,t,r)=>{let i=e*2,o=t*2;return n[i]<n[o]||n[i]===n[o]&&r[e]<=r[t]},AP=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&aU(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!aU(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},cU=(n,e,t)=>{let r,i,o=0,s,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+o++]&255,r+=(n.pending_buf[n.sym_buf+o++]&255)<<8,i=n.pending_buf[n.sym_buf+o++],r===0?ul(n,i,e):(s=l_[i],ul(n,s+g_+1,e),a=VP[s],a!==0&&(i-=QP[s],bs(n,i,a)),r--,s=e9(r),ul(n,s,t),a=fC[s],a!==0&&(r-=hC[s],bs(n,r,a)));while(o<n.sym_next);ul(n,YP,e)},jP=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,c=-1,l;for(n.heap_len=0,n.heap_max=GU,s=0;s<o;s++)t[s*2]!==0?(n.heap[++n.heap_len]=c=s,n.depth[s]=0):t[s*2+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,t[l*2]=1,n.depth[l]=0,n.opt_len--,i&&(n.static_len-=r[l*2+1]);for(e.max_code=c,s=n.heap_len>>1;s>=1;s--)AP(n,t,s);l=o;do s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],AP(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=a,t[l*2]=t[s*2]+t[a*2],n.depth[l]=(n.depth[s]>=n.depth[a]?n.depth[s]:n.depth[a])+1,t[s*2+1]=t[a*2+1]=l,n.heap[1]=l++,AP(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],cse(n,e),n9(t,c,n.bl_count)},lU=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)&&(a<l?n.bl_tree[o*2]+=a:o!==0?(o!==i&&n.bl_tree[o*2]++,n.bl_tree[WU*2]++):a<=10?n.bl_tree[KU*2]++:n.bl_tree[YU*2]++,a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},uU=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),r=0;r<=t;r++)if(o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)){if(a<l)do ul(n,o,n.bl_tree);while(--a!==0);else o!==0?(o!==i&&(ul(n,o,n.bl_tree),a--),ul(n,WU,n.bl_tree),bs(n,a-3,2)):a<=10?(ul(n,KU,n.bl_tree),bs(n,a-3,3)):(ul(n,YU,n.bl_tree),bs(n,a-11,7));a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}},use=n=>{let e;for(lU(n,n.dyn_ltree,n.l_desc.max_code),lU(n,n.dyn_dtree,n.d_desc.max_code),jP(n,n.bl_desc),e=KP-1;e>=3&&n.bl_tree[QU[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},dse=(n,e,t,r)=>{let i;for(bs(n,e-257,5),bs(n,t-1,5),bs(n,r-4,4),i=0;i<r;i++)bs(n,n.bl_tree[QU[i]*2+1],3);uU(n,n.dyn_ltree,e-1),uU(n,n.dyn_dtree,t-1)},fse=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<g_;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},dU=!1,hse=n=>{dU||(lse(),dU=!0),n.l_desc=new SP(n.dyn_ltree,ZU),n.d_desc=new SP(n.dyn_dtree,XU),n.bl_desc=new SP(n.bl_tree,JU),n.bi_buf=0,n.bi_valid=0,r9(n)},o9=(n,e,t,r)=>{bs(n,(ese<<1)+(r?1:0),3),i9(n),u_(n,t),u_(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},pse=n=>{bs(n,HU<<1,3),ul(n,YP,fu),ase(n)},gse=(n,e,t,r)=>{let i,o,s=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=fse(n)),jP(n,n.l_desc),jP(n,n.d_desc),s=use(n),i=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?o9(n,e,t,r):n.strategy===4||o===i?(bs(n,(HU<<1)+(r?1:0),3),cU(n,fu,i_)):(bs(n,(tse<<1)+(r?1:0),3),dse(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),cU(n,n.dyn_ltree,n.dyn_dtree)),r9(n),r&&i9(n)},mse=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(l_[t]+g_+1)*2]++,n.dyn_dtree[e9(e)*2]++),n.sym_next===n.sym_end),vse=hse,yse=o9,_se=gse,wse=mse,bse=pse,xse={_tr_init:vse,_tr_stored_block:yse,_tr_flush_block:_se,_tr_tally:wse,_tr_align:bse},Cse=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0},d_=Cse,Ese=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},Ise=new Uint32Array(Ese()),Sse=(n,e,t,r)=>{let i=Ise,o=r+t;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1},qi=Sse,Dh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Sm={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Ase,_tr_stored_block:BP,_tr_flush_block:Tse,_tr_tally:zd,_tr_align:Dse}=xse,{Z_NO_FLUSH:qd,Z_PARTIAL_FLUSH:Mse,Z_FULL_FLUSH:Nse,Z_FINISH:Pa,Z_BLOCK:fU,Z_OK:so,Z_STREAM_END:hU,Z_STREAM_ERROR:dl,Z_DATA_ERROR:Pse,Z_BUF_ERROR:TP,Z_DEFAULT_COMPRESSION:kse,Z_FILTERED:Rse,Z_HUFFMAN_ONLY:aC,Z_RLE:Ose,Z_FIXED:Lse,Z_DEFAULT_STRATEGY:Fse,Z_UNKNOWN:Vse,Z_DEFLATED:mC}=Sm,jse=9,Bse=15,Use=8,zse=29,qse=256,UP=qse+1+zse,$se=30,Hse=19,Gse=2*UP+1,Wse=15,In=3,Ud=258,fl=Ud+In+1,Kse=32,Cm=42,ZP=57,zP=69,qP=73,$P=91,HP=103,Ah=113,n_=666,Qo=1,Am=2,Mh=3,Tm=4,Yse=3,Th=(n,e)=>(n.msg=Dh[e],e),pU=n=>n*2-(n>4?9:0),Bd=n=>{let e=n.length;for(;--e>=0;)n[e]=0},Qse=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},Zse=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,$d=Zse,ea=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},ta=(n,e)=>{Tse(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,ea(n.strm)},Fn=(n,e)=>{n.pending_buf[n.pending++]=e},t_=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},GP=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=d_(n.adler,e,i,t):n.state.wrap===2&&(n.adler=qi(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},s9=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,o,s=n.prev_length,a=n.nice_match,c=n.strstart>n.w_size-fl?n.strstart-(n.w_size-fl):0,l=n.window,u=n.w_mask,p=n.prev,m=n.strstart+Ud,g=l[r+s-1],x=l[r+s];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(l[i+s]!==x||l[i+s-1]!==g||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<m);if(o=Ud-(m-r),r=m-Ud,o>s){if(n.match_start=e,s=o,o>=a)break;g=l[r+s-1],x=l[r+s]}}while((e=p[e&u])>c&&--t!==0);return s<=n.lookahead?s:n.lookahead},Em=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-fl)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),Qse(n),r+=e),n.strm.avail_in===0)break;if(t=GP(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=In)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=$d(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=$d(n,n.ins_h,n.window[i+In-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<In)););}while(n.lookahead<fl&&n.strm.avail_in!==0)},a9=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,o,s=0,a=n.strm.avail_in;do{if(r=65535,o=n.bi_valid+42>>3,n.strm.avail_out<o||(o=n.strm.avail_out-o,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>o&&(r=o),r<t&&(r===0&&e!==Pa||e===qd||r!==i+n.strm.avail_in)))break;s=e===Pa&&r===i+n.strm.avail_in?1:0,BP(n,0,0,s),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,ea(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(GP(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(s===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),s?Tm:e!==qd&&e!==Pa&&n.strm.avail_in===0&&n.strstart===n.block_start?Am:(o=n.window_size-n.strstart,n.strm.avail_in>o&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,o+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),o>n.strm.avail_in&&(o=n.strm.avail_in),o&&(GP(n.strm,n.window,n.strstart,o),n.strstart+=o,n.insert+=o>n.w_size-n.insert?n.w_size-n.insert:o),n.high_water<n.strstart&&(n.high_water=n.strstart),o=n.bi_valid+42>>3,o=n.pending_buf_size-o>65535?65535:n.pending_buf_size-o,t=o>n.w_size?n.w_size:o,i=n.strstart-n.block_start,(i>=t||(i||e===Pa)&&e!==qd&&n.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,s=e===Pa&&n.strm.avail_in===0&&r===i?1:0,BP(n,n.block_start,r,s),n.block_start+=r,ea(n.strm)),s?Mh:Qo)},DP=(n,e)=>{let t,r;for(;;){if(n.lookahead<fl){if(Em(n),n.lookahead<fl&&e===qd)return Qo;if(n.lookahead===0)break}if(t=0,n.lookahead>=In&&(n.ins_h=$d(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-fl&&(n.match_length=s9(n,t)),n.match_length>=In)if(r=zd(n,n.strstart-n.match_start,n.match_length-In),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=In){n.match_length--;do n.strstart++,n.ins_h=$d(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=$d(n,n.ins_h,n.window[n.strstart+1]);else r=zd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(ta(n,!1),n.strm.avail_out===0))return Qo}return n.insert=n.strstart<In-1?n.strstart:In-1,e===Pa?(ta(n,!0),n.strm.avail_out===0?Mh:Tm):n.sym_next&&(ta(n,!1),n.strm.avail_out===0)?Qo:Am},wm=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<fl){if(Em(n),n.lookahead<fl&&e===qd)return Qo;if(n.lookahead===0)break}if(t=0,n.lookahead>=In&&(n.ins_h=$d(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=In-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-fl&&(n.match_length=s9(n,t),n.match_length<=5&&(n.strategy===Rse||n.match_length===In&&n.strstart-n.match_start>4096)&&(n.match_length=In-1)),n.prev_length>=In&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-In,r=zd(n,n.strstart-1-n.prev_match,n.prev_length-In),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=$d(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=In-1,n.strstart++,r&&(ta(n,!1),n.strm.avail_out===0))return Qo}else if(n.match_available){if(r=zd(n,0,n.window[n.strstart-1]),r&&ta(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return Qo}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=zd(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<In-1?n.strstart:In-1,e===Pa?(ta(n,!0),n.strm.avail_out===0?Mh:Tm):n.sym_next&&(ta(n,!1),n.strm.avail_out===0)?Qo:Am},Xse=(n,e)=>{let t,r,i,o,s=n.window;for(;;){if(n.lookahead<=Ud){if(Em(n),n.lookahead<=Ud&&e===qd)return Qo;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=In&&n.strstart>0&&(i=n.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=n.strstart+Ud;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);n.match_length=Ud-(o-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=In?(t=zd(n,1,n.match_length-In),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=zd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(ta(n,!1),n.strm.avail_out===0))return Qo}return n.insert=0,e===Pa?(ta(n,!0),n.strm.avail_out===0?Mh:Tm):n.sym_next&&(ta(n,!1),n.strm.avail_out===0)?Qo:Am},Jse=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(Em(n),n.lookahead===0)){if(e===qd)return Qo;break}if(n.match_length=0,t=zd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(ta(n,!1),n.strm.avail_out===0))return Qo}return n.insert=0,e===Pa?(ta(n,!0),n.strm.avail_out===0?Mh:Tm):n.sym_next&&(ta(n,!1),n.strm.avail_out===0)?Qo:Am};function ll(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var r_=[new ll(0,0,0,0,a9),new ll(4,4,8,4,DP),new ll(4,5,16,8,DP),new ll(4,6,32,32,DP),new ll(4,4,16,16,wm),new ll(8,16,32,32,wm),new ll(8,16,128,128,wm),new ll(8,32,128,256,wm),new ll(32,128,258,1024,wm),new ll(32,258,258,4096,wm)],eae=n=>{n.window_size=2*n.w_size,Bd(n.head),n.max_lazy_match=r_[n.level].max_lazy,n.good_match=r_[n.level].good_length,n.nice_match=r_[n.level].nice_length,n.max_chain_length=r_[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=In-1,n.match_available=0,n.ins_h=0};function tae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=mC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Gse*2),this.dyn_dtree=new Uint16Array((2*$se+1)*2),this.bl_tree=new Uint16Array((2*Hse+1)*2),Bd(this.dyn_ltree),Bd(this.dyn_dtree),Bd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Wse+1),this.heap=new Uint16Array(2*UP+1),Bd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*UP+1),Bd(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var m_=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==Cm&&e.status!==ZP&&e.status!==zP&&e.status!==qP&&e.status!==$P&&e.status!==HP&&e.status!==Ah&&e.status!==n_?1:0},c9=n=>{if(m_(n))return Th(n,dl);n.total_in=n.total_out=0,n.data_type=Vse;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?ZP:e.wrap?Cm:Ah,n.adler=e.wrap===2?0:1,e.last_flush=-2,Ase(e),so},l9=n=>{let e=c9(n);return e===so&&eae(n.state),e},nae=(n,e)=>m_(n)||n.state.wrap!==2?dl:(n.state.gzhead=e,so),u9=(n,e,t,r,i,o)=>{if(!n)return dl;let s=1;if(e===kse&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>jse||t!==mC||r<8||r>15||e<0||e>9||o<0||o>Lse||r===8&&s!==1)return Th(n,dl);r===8&&(r=9);let a=new tae;return n.state=a,a.strm=n,a.status=Cm,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+In-1)/In),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=t,l9(n)},rae=(n,e)=>u9(n,e,mC,Bse,Use,Fse),iae=(n,e)=>{if(m_(n)||e>fU||e<0)return n?Th(n,dl):dl;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===n_&&e!==Pa)return Th(n,n.avail_out===0?TP:dl);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(ea(n),n.avail_out===0)return t.last_flush=-1,so}else if(n.avail_in===0&&pU(e)<=pU(r)&&e!==Pa)return Th(n,TP);if(t.status===n_&&n.avail_in!==0)return Th(n,TP);if(t.status===Cm&&t.wrap===0&&(t.status=Ah),t.status===Cm){let i=mC+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=aC||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,i|=o<<6,t.strstart!==0&&(i|=Kse),i+=31-i%31,t_(t,i),t.strstart!==0&&(t_(t,n.adler>>>16),t_(t,n.adler&65535)),n.adler=1,t.status=Ah,ea(n),t.pending!==0)return t.last_flush=-1,so}if(t.status===ZP){if(n.adler=0,Fn(t,31),Fn(t,139),Fn(t,8),t.gzhead)Fn(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Fn(t,t.gzhead.time&255),Fn(t,t.gzhead.time>>8&255),Fn(t,t.gzhead.time>>16&255),Fn(t,t.gzhead.time>>24&255),Fn(t,t.level===9?2:t.strategy>=aC||t.level<2?4:0),Fn(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Fn(t,t.gzhead.extra.length&255),Fn(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=qi(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=zP;else if(Fn(t,0),Fn(t,0),Fn(t,0),Fn(t,0),Fn(t,0),Fn(t,t.level===9?2:t.strategy>=aC||t.level<2?4:0),Fn(t,Yse),t.status=Ah,ea(n),t.pending!==0)return t.last_flush=-1,so}if(t.status===zP){if(t.gzhead.extra){let i=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=qi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,ea(n),t.pending!==0)return t.last_flush=-1,so;i=0,o-=a}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>i&&(n.adler=qi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=qP}if(t.status===qP){if(t.gzhead.name){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=qi(n.adler,t.pending_buf,t.pending-i,i)),ea(n),t.pending!==0)return t.last_flush=-1,so;i=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,Fn(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=qi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=$P}if(t.status===$P){if(t.gzhead.comment){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=qi(n.adler,t.pending_buf,t.pending-i,i)),ea(n),t.pending!==0)return t.last_flush=-1,so;i=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,Fn(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=qi(n.adler,t.pending_buf,t.pending-i,i))}t.status=HP}if(t.status===HP){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(ea(n),t.pending!==0))return t.last_flush=-1,so;Fn(t,n.adler&255),Fn(t,n.adler>>8&255),n.adler=0}if(t.status=Ah,ea(n),t.pending!==0)return t.last_flush=-1,so}if(n.avail_in!==0||t.lookahead!==0||e!==qd&&t.status!==n_){let i=t.level===0?a9(t,e):t.strategy===aC?Jse(t,e):t.strategy===Ose?Xse(t,e):r_[t.level].func(t,e);if((i===Mh||i===Tm)&&(t.status=n_),i===Qo||i===Mh)return n.avail_out===0&&(t.last_flush=-1),so;if(i===Am&&(e===Mse?Dse(t):e!==fU&&(BP(t,0,0,!1),e===Nse&&(Bd(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),ea(n),n.avail_out===0))return t.last_flush=-1,so}return e!==Pa?so:t.wrap<=0?hU:(t.wrap===2?(Fn(t,n.adler&255),Fn(t,n.adler>>8&255),Fn(t,n.adler>>16&255),Fn(t,n.adler>>24&255),Fn(t,n.total_in&255),Fn(t,n.total_in>>8&255),Fn(t,n.total_in>>16&255),Fn(t,n.total_in>>24&255)):(t_(t,n.adler>>>16),t_(t,n.adler&65535)),ea(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?so:hU)},oae=n=>{if(m_(n))return dl;let e=n.state.status;return n.state=null,e===Ah?Th(n,Pse):so},sae=(n,e)=>{let t=e.length;if(m_(n))return dl;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==Cm||r.lookahead)return dl;if(i===1&&(n.adler=d_(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Bd(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(t-r.w_size,t),0),e=c,t=r.w_size}let o=n.avail_in,s=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,Em(r);r.lookahead>=In;){let c=r.strstart,l=r.lookahead-(In-1);do r.ins_h=$d(r,r.ins_h,r.window[c+In-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=In-1,Em(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=In-1,r.match_available=0,n.next_in=s,n.input=a,n.avail_in=o,r.wrap=i,so},aae=rae,cae=u9,lae=l9,uae=c9,dae=nae,fae=iae,hae=oae,pae=sae,gae="pako deflate (from Nodeca project)",o_={deflateInit:aae,deflateInit2:cae,deflateReset:lae,deflateResetKeep:uae,deflateSetHeader:dae,deflate:fae,deflateEnd:hae,deflateSetDictionary:pae,deflateInfo:gae},mae=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),vae=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)mae(t,r)&&(n[r]=t[r])}}return n},yae=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];t.set(s,i),i+=s.length}return t},vC={assign:vae,flattenChunks:yae},d9=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d9=!1}var f_=new Uint8Array(256);for(let n=0;n<256;n++)f_[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;f_[254]=f_[254]=1;var _ae=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},wae=(n,e)=>{if(e<65534&&n.subarray&&d9)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},bae=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,o=new Array(t*2);for(i=0,r=0;r<t;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=f_[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<t;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return wae(o,i)},xae=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+f_[n[t]]>e?t:e},h_={string2buf:_ae,buf2string:bae,utf8border:xae};function Cae(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var f9=Cae,h9=Object.prototype.toString,{Z_NO_FLUSH:Eae,Z_SYNC_FLUSH:Iae,Z_FULL_FLUSH:Sae,Z_FINISH:Aae,Z_OK:pC,Z_STREAM_END:Tae,Z_DEFAULT_COMPRESSION:Dae,Z_DEFAULT_STRATEGY:Mae,Z_DEFLATED:Nae}=Sm;function v_(n){this.options=vC.assign({level:Dae,method:Nae,chunkSize:16384,windowBits:15,memLevel:8,strategy:Mae},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f9,this.strm.avail_out=0;let t=o_.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==pC)throw new Error(Dh[t]);if(e.header&&o_.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=h_.string2buf(e.dictionary):h9.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=o_.deflateSetDictionary(this.strm,r),t!==pC)throw new Error(Dh[t]);this._dict_set=!0}}v_.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?Aae:Eae,typeof n=="string"?t.input=h_.string2buf(n):h9.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(o===Iae||o===Sae)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=o_.deflate(t,o),i===Tae)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=o_.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===pC;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};v_.prototype.onData=function(n){this.chunks.push(n)};v_.prototype.onEnd=function(n){n===pC&&(this.result=vC.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function XP(n,e){let t=new v_(e);if(t.push(n,!0),t.err)throw t.msg||Dh[t.err];return t.result}function Pae(n,e){return e=e||{},e.raw=!0,XP(n,e)}function kae(n,e){return e=e||{},e.gzip=!0,XP(n,e)}var Rae=v_,Oae=XP,Lae=Pae,Fae=kae,Vae=Sm,jae={Deflate:Rae,deflate:Oae,deflateRaw:Lae,gzip:Fae,constants:Vae},cC=16209,Bae=16191,Uae=function(e,t){let r,i,o,s,a,c,l,u,p,m,g,x,E,D,N,K,j,G,oe,fe,z,M,I,V,b=e.state;r=e.next_in,I=e.input,i=r+(e.avail_in-5),o=e.next_out,V=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=b.dmax,l=b.wsize,u=b.whave,p=b.wnext,m=b.window,g=b.hold,x=b.bits,E=b.lencode,D=b.distcode,N=(1<<b.lenbits)-1,K=(1<<b.distbits)-1;e:do{x<15&&(g+=I[r++]<<x,x+=8,g+=I[r++]<<x,x+=8),j=E[g&N];t:for(;;){if(G=j>>>24,g>>>=G,x-=G,G=j>>>16&255,G===0)V[o++]=j&65535;else if(G&16){oe=j&65535,G&=15,G&&(x<G&&(g+=I[r++]<<x,x+=8),oe+=g&(1<<G)-1,g>>>=G,x-=G),x<15&&(g+=I[r++]<<x,x+=8,g+=I[r++]<<x,x+=8),j=D[g&K];n:for(;;){if(G=j>>>24,g>>>=G,x-=G,G=j>>>16&255,G&16){if(fe=j&65535,G&=15,x<G&&(g+=I[r++]<<x,x+=8,x<G&&(g+=I[r++]<<x,x+=8)),fe+=g&(1<<G)-1,fe>c){e.msg="invalid distance too far back",b.mode=cC;break e}if(g>>>=G,x-=G,G=o-s,fe>G){if(G=fe-G,G>u&&b.sane){e.msg="invalid distance too far back",b.mode=cC;break e}if(z=0,M=m,p===0){if(z+=l-G,G<oe){oe-=G;do V[o++]=m[z++];while(--G);z=o-fe,M=V}}else if(p<G){if(z+=l+p-G,G-=p,G<oe){oe-=G;do V[o++]=m[z++];while(--G);if(z=0,p<oe){G=p,oe-=G;do V[o++]=m[z++];while(--G);z=o-fe,M=V}}}else if(z+=p-G,G<oe){oe-=G;do V[o++]=m[z++];while(--G);z=o-fe,M=V}for(;oe>2;)V[o++]=M[z++],V[o++]=M[z++],V[o++]=M[z++],oe-=3;oe&&(V[o++]=M[z++],oe>1&&(V[o++]=M[z++]))}else{z=o-fe;do V[o++]=V[z++],V[o++]=V[z++],V[o++]=V[z++],oe-=3;while(oe>2);oe&&(V[o++]=V[z++],oe>1&&(V[o++]=V[z++]))}}else if((G&64)===0){j=D[(j&65535)+(g&(1<<G)-1)];continue n}else{e.msg="invalid distance code",b.mode=cC;break e}break}}else if((G&64)===0){j=E[(j&65535)+(g&(1<<G)-1)];continue t}else if(G&32){b.mode=Bae;break e}else{e.msg="invalid literal/length code",b.mode=cC;break e}break}}while(r<i&&o<a);oe=x>>3,r-=oe,x-=oe<<3,g&=(1<<x)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),b.hold=g,b.bits=x},bm=15,gU=852,mU=592,vU=0,MP=1,yU=2,zae=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),qae=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),$ae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Hae=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Gae=(n,e,t,r,i,o,s,a)=>{let c=a.bits,l=0,u=0,p=0,m=0,g=0,x=0,E=0,D=0,N=0,K=0,j,G,oe,fe,z,M=null,I,V=new Uint16Array(bm+1),b=new Uint16Array(bm+1),S=null,T,te,_e;for(l=0;l<=bm;l++)V[l]=0;for(u=0;u<r;u++)V[e[t+u]]++;for(g=c,m=bm;m>=1&&V[m]===0;m--);if(g>m&&(g=m),m===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(p=1;p<m&&V[p]===0;p++);for(g<p&&(g=p),D=1,l=1;l<=bm;l++)if(D<<=1,D-=V[l],D<0)return-1;if(D>0&&(n===vU||m!==1))return-1;for(b[1]=0,l=1;l<bm;l++)b[l+1]=b[l]+V[l];for(u=0;u<r;u++)e[t+u]!==0&&(s[b[e[t+u]]++]=u);if(n===vU?(M=S=s,I=20):n===MP?(M=zae,S=qae,I=257):(M=$ae,S=Hae,I=0),K=0,u=0,l=p,z=o,x=g,E=0,oe=-1,N=1<<g,fe=N-1,n===MP&&N>gU||n===yU&&N>mU)return 1;for(;;){T=l-E,s[u]+1<I?(te=0,_e=s[u]):s[u]>=I?(te=S[s[u]-I],_e=M[s[u]-I]):(te=96,_e=0),j=1<<l-E,G=1<<x,p=G;do G-=j,i[z+(K>>E)+G]=T<<24|te<<16|_e|0;while(G!==0);for(j=1<<l-1;K&j;)j>>=1;if(j!==0?(K&=j-1,K+=j):K=0,u++,--V[l]===0){if(l===m)break;l=e[t+s[u]]}if(l>g&&(K&fe)!==oe){for(E===0&&(E=g),z+=p,x=l-E,D=1<<x;x+E<m&&(D-=V[x+E],!(D<=0));)x++,D<<=1;if(N+=1<<x,n===MP&&N>gU||n===yU&&N>mU)return 1;oe=K&fe,i[oe]=g<<24|x<<16|z-o|0}}return K!==0&&(i[z+K]=l-E<<24|64<<16|0),a.bits=g,0},s_=Gae,Wae=0,p9=1,g9=2,{Z_FINISH:_U,Z_BLOCK:Kae,Z_TREES:lC,Z_OK:Nh,Z_STREAM_END:Yae,Z_NEED_DICT:Qae,Z_STREAM_ERROR:ka,Z_DATA_ERROR:m9,Z_MEM_ERROR:v9,Z_BUF_ERROR:Zae,Z_DEFLATED:wU}=Sm,yC=16180,bU=16181,xU=16182,CU=16183,EU=16184,IU=16185,SU=16186,AU=16187,TU=16188,DU=16189,gC=16190,du=16191,NP=16192,MU=16193,PP=16194,NU=16195,PU=16196,kU=16197,RU=16198,uC=16199,dC=16200,OU=16201,LU=16202,FU=16203,VU=16204,jU=16205,kP=16206,BU=16207,UU=16208,Nr=16209,y9=16210,_9=16211,Xae=852,Jae=592,ece=15,tce=ece,zU=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function nce(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Ph=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<yC||e.mode>_9?1:0},w9=n=>{if(Ph(n))return ka;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=yC,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Xae),e.distcode=e.distdyn=new Int32Array(Jae),e.sane=1,e.back=-1,Nh},b9=n=>{if(Ph(n))return ka;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,w9(n)},x9=(n,e)=>{let t;if(Ph(n))return ka;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ka:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,b9(n))},C9=(n,e)=>{if(!n)return ka;let t=new nce;n.state=t,t.strm=n,t.window=null,t.mode=yC;let r=x9(n,e);return r!==Nh&&(n.state=null),r},rce=n=>C9(n,tce),qU=!0,RP,OP,ice=n=>{if(qU){RP=new Int32Array(512),OP=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(s_(p9,n.lens,0,288,RP,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;s_(g9,n.lens,0,32,OP,0,n.work,{bits:5}),qU=!1}n.lencode=RP,n.lenbits=9,n.distcode=OP,n.distbits=5},E9=(n,e,t,r)=>{let i,o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},oce=(n,e)=>{let t,r,i,o,s,a,c,l,u,p,m,g,x,E,D=0,N,K,j,G,oe,fe,z,M,I=new Uint8Array(4),V,b,S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ph(n)||!n.output||!n.input&&n.avail_in!==0)return ka;t=n.state,t.mode===du&&(t.mode=NP),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,p=a,m=c,M=Nh;e:for(;;)switch(t.mode){case yC:if(t.wrap===0){t.mode=NP;break}for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,I[0]=l&255,I[1]=l>>>8&255,t.check=qi(t.check,I,2,0),l=0,u=0,t.mode=bU;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){n.msg="incorrect header check",t.mode=Nr;break}if((l&15)!==wU){n.msg="unknown compression method",t.mode=Nr;break}if(l>>>=4,u-=4,z=(l&15)+8,t.wbits===0&&(t.wbits=z),z>15||z>t.wbits){n.msg="invalid window size",t.mode=Nr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=l&512?DU:du,l=0,u=0;break;case bU:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==wU){n.msg="unknown compression method",t.mode=Nr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Nr;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,t.check=qi(t.check,I,2,0)),l=0,u=0,t.mode=xU;case xU:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,I[2]=l>>>16&255,I[3]=l>>>24&255,t.check=qi(t.check,I,4,0)),l=0,u=0,t.mode=CU;case CU:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,t.check=qi(t.check,I,2,0)),l=0,u=0,t.mode=EU;case EU:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,t.check=qi(t.check,I,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=IU;case IU:if(t.flags&1024&&(g=t.length,g>a&&(g=a),g&&(t.head&&(z=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+g),z)),t.flags&512&&t.wrap&4&&(t.check=qi(t.check,r,g,o)),a-=g,o+=g,t.length-=g),t.length))break e;t.length=0,t.mode=SU;case SU:if(t.flags&2048){if(a===0)break e;g=0;do z=r[o+g++],t.head&&z&&t.length<65536&&(t.head.name+=String.fromCharCode(z));while(z&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=qi(t.check,r,g,o)),a-=g,o+=g,z)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=AU;case AU:if(t.flags&4096){if(a===0)break e;g=0;do z=r[o+g++],t.head&&z&&t.length<65536&&(t.head.comment+=String.fromCharCode(z));while(z&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=qi(t.check,r,g,o)),a-=g,o+=g,z)break e}else t.head&&(t.head.comment=null);t.mode=TU;case TU:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Nr;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=du;break;case DU:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}n.adler=t.check=zU(l),l=0,u=0,t.mode=gC;case gC:if(t.havedict===0)return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,Qae;n.adler=t.check=1,t.mode=du;case du:if(e===Kae||e===lC)break e;case NP:if(t.last){l>>>=u&7,u-=u&7,t.mode=kP;break}for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=MU;break;case 1:if(ice(t),t.mode=uC,e===lC){l>>>=2,u-=2;break e}break;case 2:t.mode=PU;break;case 3:n.msg="invalid block type",t.mode=Nr}l>>>=2,u-=2;break;case MU:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Nr;break}if(t.length=l&65535,l=0,u=0,t.mode=PP,e===lC)break e;case PP:t.mode=NU;case NU:if(g=t.length,g){if(g>a&&(g=a),g>c&&(g=c),g===0)break e;i.set(r.subarray(o,o+g),s),a-=g,o+=g,c-=g,s+=g,t.length-=g;break}t.mode=du;break;case PU:for(;u<14;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Nr;break}t.have=0,t.mode=kU;case kU:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.lens[S[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[S[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},M=s_(Wae,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,M){n.msg="invalid code lengths set",t.mode=Nr;break}t.have=0,t.mode=RU;case RU:for(;t.have<t.nlen+t.ndist;){for(;D=t.lencode[l&(1<<t.lenbits)-1],N=D>>>24,K=D>>>16&255,j=D&65535,!(N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(j<16)l>>>=N,u-=N,t.lens[t.have++]=j;else{if(j===16){for(b=N+2;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=N,u-=N,t.have===0){n.msg="invalid bit length repeat",t.mode=Nr;break}z=t.lens[t.have-1],g=3+(l&3),l>>>=2,u-=2}else if(j===17){for(b=N+3;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=N,u-=N,z=0,g=3+(l&7),l>>>=3,u-=3}else{for(b=N+7;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=N,u-=N,z=0,g=11+(l&127),l>>>=7,u-=7}if(t.have+g>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Nr;break}for(;g--;)t.lens[t.have++]=z}}if(t.mode===Nr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Nr;break}if(t.lenbits=9,V={bits:t.lenbits},M=s_(p9,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,M){n.msg="invalid literal/lengths set",t.mode=Nr;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},M=s_(g9,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,M){n.msg="invalid distances set",t.mode=Nr;break}if(t.mode=uC,e===lC)break e;case uC:t.mode=dC;case dC:if(a>=6&&c>=258){n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,Uae(n,m),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,t.mode===du&&(t.back=-1);break}for(t.back=0;D=t.lencode[l&(1<<t.lenbits)-1],N=D>>>24,K=D>>>16&255,j=D&65535,!(N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(K&&(K&240)===0){for(G=N,oe=K,fe=j;D=t.lencode[fe+((l&(1<<G+oe)-1)>>G)],N=D>>>24,K=D>>>16&255,j=D&65535,!(G+N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=G,u-=G,t.back+=G}if(l>>>=N,u-=N,t.back+=N,t.length=j,K===0){t.mode=jU;break}if(K&32){t.back=-1,t.mode=du;break}if(K&64){n.msg="invalid literal/length code",t.mode=Nr;break}t.extra=K&15,t.mode=OU;case OU:if(t.extra){for(b=t.extra;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=LU;case LU:for(;D=t.distcode[l&(1<<t.distbits)-1],N=D>>>24,K=D>>>16&255,j=D&65535,!(N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((K&240)===0){for(G=N,oe=K,fe=j;D=t.distcode[fe+((l&(1<<G+oe)-1)>>G)],N=D>>>24,K=D>>>16&255,j=D&65535,!(G+N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=G,u-=G,t.back+=G}if(l>>>=N,u-=N,t.back+=N,K&64){n.msg="invalid distance code",t.mode=Nr;break}t.offset=j,t.extra=K&15,t.mode=FU;case FU:if(t.extra){for(b=t.extra;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Nr;break}t.mode=VU;case VU:if(c===0)break e;if(g=m-c,t.offset>g){if(g=t.offset-g,g>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Nr;break}g>t.wnext?(g-=t.wnext,x=t.wsize-g):x=t.wnext-g,g>t.length&&(g=t.length),E=t.window}else E=i,x=s-t.offset,g=t.length;g>c&&(g=c),c-=g,t.length-=g;do i[s++]=E[x++];while(--g);t.length===0&&(t.mode=dC);break;case jU:if(c===0)break e;i[s++]=t.length,c--,t.mode=dC;break;case kP:if(t.wrap){for(;u<32;){if(a===0)break e;a--,l|=r[o++]<<u,u+=8}if(m-=c,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?qi(t.check,i,m,s-m):d_(t.check,i,m,s-m)),m=c,t.wrap&4&&(t.flags?l:zU(l))!==t.check){n.msg="incorrect data check",t.mode=Nr;break}l=0,u=0}t.mode=BU;case BU:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Nr;break}l=0,u=0}t.mode=UU;case UU:M=Yae;break e;case Nr:M=m9;break e;case y9:return v9;case _9:default:return ka}return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,(t.wsize||m!==n.avail_out&&t.mode<Nr&&(t.mode<kP||e!==_U))&&E9(n,n.output,n.next_out,m-n.avail_out),p-=n.avail_in,m-=n.avail_out,n.total_in+=p,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?qi(t.check,i,m,n.next_out-m):d_(t.check,i,m,n.next_out-m)),n.data_type=t.bits+(t.last?64:0)+(t.mode===du?128:0)+(t.mode===uC||t.mode===PP?256:0),(p===0&&m===0||e===_U)&&M===Nh&&(M=Zae),M},sce=n=>{if(Ph(n))return ka;let e=n.state;return e.window&&(e.window=null),n.state=null,Nh},ace=(n,e)=>{if(Ph(n))return ka;let t=n.state;return(t.wrap&2)===0?ka:(t.head=e,e.done=!1,Nh)},cce=(n,e)=>{let t=e.length,r,i,o;return Ph(n)||(r=n.state,r.wrap!==0&&r.mode!==gC)?ka:r.mode===gC&&(i=1,i=d_(i,e,t,0),i!==r.check)?m9:(o=E9(n,e,t,t),o?(r.mode=y9,v9):(r.havedict=1,Nh))},lce=b9,uce=x9,dce=w9,fce=rce,hce=C9,pce=oce,gce=sce,mce=ace,vce=cce,yce="pako inflate (from Nodeca project)",hu={inflateReset:lce,inflateReset2:uce,inflateResetKeep:dce,inflateInit:fce,inflateInit2:hce,inflate:pce,inflateEnd:gce,inflateGetHeader:mce,inflateSetDictionary:vce,inflateInfo:yce};function _ce(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var wce=_ce,I9=Object.prototype.toString,{Z_NO_FLUSH:bce,Z_FINISH:xce,Z_OK:p_,Z_STREAM_END:LP,Z_NEED_DICT:FP,Z_STREAM_ERROR:Cce,Z_DATA_ERROR:$U,Z_MEM_ERROR:Ece}=Sm;function y_(n){this.options=vC.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f9,this.strm.avail_out=0;let t=hu.inflateInit2(this.strm,e.windowBits);if(t!==p_)throw new Error(Dh[t]);if(this.header=new wce,hu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=h_.string2buf(e.dictionary):I9.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=hu.inflateSetDictionary(this.strm,e.dictionary),t!==p_)))throw new Error(Dh[t])}y_.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?xce:bce,I9.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=hu.inflate(t,s),o===FP&&i&&(o=hu.inflateSetDictionary(t,i),o===p_?o=hu.inflate(t,s):o===$U&&(o=FP));t.avail_in>0&&o===LP&&t.state.wrap>0&&n[t.next_in]!==0;)hu.inflateReset(t),o=hu.inflate(t,s);switch(o){case Cce:case $U:case FP:case Ece:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===LP))if(this.options.to==="string"){let c=h_.utf8border(t.output,t.next_out),l=t.next_out-c,u=h_.buf2string(t.output,c);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===p_&&a===0)){if(o===LP)return o=hu.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};y_.prototype.onData=function(n){this.chunks.push(n)};y_.prototype.onEnd=function(n){n===p_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=vC.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function JP(n,e){let t=new y_(e);if(t.push(n),t.err)throw t.msg||Dh[t.err];return t.result}function Ice(n,e){return e=e||{},e.raw=!0,JP(n,e)}var Sce=y_,Ace=JP,Tce=Ice,Dce=JP,Mce=Sm,Nce={Inflate:Sce,inflate:Ace,inflateRaw:Tce,ungzip:Dce,constants:Mce},{Deflate:wke,deflate:bke,deflateRaw:xke,gzip:Cke}=jae,{Inflate:Pce,inflate:kce,inflateRaw:Eke,ungzip:Ike}=Nce;var ek=Pce,S9=kce;var T9=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;T9[n]=e}var A9=4294967295;function Rce(n,e,t){let r=n;for(let i=0;i<t;i++)r=T9[(r^e[i])&255]^r>>>8;return r}function Oce(n,e){return(Rce(A9,n,e)^A9)>>>0}function tk(n,e,t){let r=n.readUint32(),i=Oce(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function _C(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function wC(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function bC(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function xC(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function CC(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+Lce(e[o-i],t[o],t[o-i])&255}}function Lce(n,e,t){let r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),s=Math.abs(r-t);return i<=o&&i<=s?n:o<=s?e:t}function D9(n,e,t,r,i,o){switch(n){case 0:_C(e,t,i);break;case 1:wC(e,t,i,o);break;case 2:bC(e,t,r,i);break;case 3:xC(e,t,r,i,o);break;case 4:CC(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}var Fce=new Uint16Array([255]),Vce=new Uint8Array(Fce.buffer),jce=Vce[0]===255;function M9(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,c=new Uint8Array(r*t*a),l=0;for(let u=0;u<7;u++){let p=s[u],m=Math.ceil((t-p.x)/p.xStep),g=Math.ceil((r-p.y)/p.yStep);if(m<=0||g<=0)continue;let x=m*a,E=new Uint8Array(x);for(let D=0;D<g;D++){let N=e[l++],K=e.subarray(l,l+x);l+=x;let j=new Uint8Array(x);D9(N,K,j,E,x,a),E.set(j);for(let G=0;G<m;G++){let oe=p.x+G*p.xStep,fe=p.y+D*p.yStep;if(!(oe>=t||fe>=r))for(let z=0;z<a;z++)c[(fe*t+oe)*a+z]=j[G*a+z]}}}if(o===16){let u=new Uint16Array(c.buffer);if(jce)for(let p=0;p<u.length;p++)u[p]=Bce(u[p]);return u}else return c}function Bce(n){return(n&255)<<8|n>>8&255}var Uce=new Uint16Array([255]),zce=new Uint8Array(Uce.buffer),qce=zce[0]===255,$ce=new Uint8Array(0);function nk(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*t),c=new Uint8Array(r*a),l=$ce,u=0,p,m;for(let g=0;g<r;g++){switch(p=e.subarray(u+1,u+1+a),m=c.subarray(g*a,(g+1)*a),e[u]){case 0:_C(p,m,a);break;case 1:wC(p,m,a,s);break;case 2:bC(p,m,l,a);break;case 3:xC(p,m,l,a,s);break;case 4:CC(p,m,l,a,s);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}l=m,u+=a+1}if(o===16){let g=new Uint16Array(c.buffer);if(qce)for(let x=0;x<g.length;x++)g[x]=Hce(g[x]);return g}else return c}function Hce(n){return(n&255)<<8|n>>8&255}var EC=Uint8Array.of(137,80,78,71,13,10,26,10);function rk(n){if(!N9(n.readBytes(EC.length)))throw new Error("wrong PNG signature")}function N9(n){if(n.length<EC.length)return!1;for(let e=0;e<EC.length;e++)if(n[e]!==EC[e])return!1;return!0}var P9="tEXt",Wce=0,k9=new TextDecoder("latin1");function Kce(n){if(Qce(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var Yce=/^[\u0000-\u00FF]*$/;function Qce(n){if(!Yce.test(n))throw new Error("invalid latin1 text")}function R9(n,e,t){let r=ik(e);n[r]=Zce(e,t-r.length-1)}function ik(n){for(n.mark();n.readByte()!==Wce;);let e=n.offset;n.reset();let t=k9.decode(n.readBytes(e-n.offset-1));return n.skip(1),Kce(t),t}function Zce(n,e){return k9.decode(n.readBytes(e))}var Zo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},__={UNKNOWN:-1,DEFLATE:0},IC={UNKNOWN:-1,ADAPTIVE:0},w_={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},b_={NONE:0,BACKGROUND:1,PREVIOUS:2},SC={SOURCE:0,OVER:1};var AC=class extends e_{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);let{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new ek,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=__.UNKNOWN,this._filterMethod=IC.UNKNOWN,this._interlaceMethod=w_.UNKNOWN,this._colorType=Zo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(rk(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(rk(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){let r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case P9:R9(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?tk(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){let r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?tk(this,e+4,t):this.skip(4)}decodeIHDR(){let e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Xce(this.readUint8());let t=this.readUint8();this._colorType=t;let r;switch(t){case Zo.GREYSCALE:r=1;break;case Zo.TRUECOLOUR:r=3;break;case Zo.INDEXED_COLOUR:r=1;break;case Zo.GREYSCALE_ALPHA:r=2;break;case Zo.TRUECOLOUR_ALPHA:r=4;break;case Zo.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==__.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);let t=e/3;this._hasPalette=!0;let r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Zo.GREYSCALE:case Zo.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Zo.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){let r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Zo.UNKNOWN:case Zo.GREYSCALE_ALPHA:case Zo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t=ik(this),r=this.readUint8();if(r!==__.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);let i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:S9(i)}}decodepHYs(){let e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){let t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=nk({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{let i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case b_.NONE:break;case b_.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){let s=(i*e.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[s+a]=0}break;case b_.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){let r=1<<this._png.depth,i=(o,s)=>{let a=((o+t.yOffset)*this._png.width+t.xOffset+s)*this._png.channels,c=(o*t.width+s)*this._png.channels;return{index:a,frameIndex:c}};switch(t.blendOp){case SC.SOURCE:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++)e.data[a+l]=t.data[c+l]}break;case SC.OVER:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++){let u=t.data[c+this._png.channels-1]/r,p=l%(this._png.channels-1)===0?1:t.data[c+l],m=Math.floor(u*p+(1-u)*e.data[a+l]);e.data[a+l]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==IC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===w_.NO_INTERLACE)this._png.data=nk({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===w_.ADAM7)this._png.data=M9({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:b_.NONE,blendOp:SC.SOURCE,data:e}),this._inflator=new ek,this._writingDataChunks=!1}};function Xce(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function O9(n,e){return new AC(n,e).decode()}var Yt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function ok(){Yt.console&&typeof Yt.console.log=="function"&&Yt.console.log.apply(Yt.console,arguments)}var dr={log:ok,warn:function(n){Yt.console&&(typeof Yt.console.warn=="function"?Yt.console.warn.apply(Yt.console,arguments):ok.call(null,arguments))},error:function(n){Yt.console&&(typeof Yt.console.error=="function"?Yt.console.error.apply(Yt.console,arguments):ok(n))}};function sk(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){kh(r.response,e,t)},r.onerror=function(){dr.error("could not download file")},r.send()}function L9(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function TC(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var kh=Yt.saveAs||((typeof window>"u"?"undefined":Un(window))!=="object"||window!==Yt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Yt.URL||Yt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?L9(i.href)?sk(n,e,t):TC(i,i.target="_blank"):TC(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){TC(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(L9(n))sk(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){TC(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Un(o)!=="object"&&(dr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return sk(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(Yt.HTMLElement)||Yt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Un(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(n)}else{var c=Yt.URL||Yt.webkitURL,l=c.createObjectURL(n);r?r.location=l:location.href=l,r=null,setTimeout(function(){c.revokeObjectURL(l)},4e4)}});function sz(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),l=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),"#"+a+c+l}}var PC=Yt.atob.bind(Yt),F9=Yt.btoa.bind(Yt);function ak(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=Eo(t,r,i,o,e[0],7,-680876936),o=Eo(o,t,r,i,e[1],12,-389564586),i=Eo(i,o,t,r,e[2],17,606105819),r=Eo(r,i,o,t,e[3],22,-1044525330),t=Eo(t,r,i,o,e[4],7,-176418897),o=Eo(o,t,r,i,e[5],12,1200080426),i=Eo(i,o,t,r,e[6],17,-1473231341),r=Eo(r,i,o,t,e[7],22,-45705983),t=Eo(t,r,i,o,e[8],7,1770035416),o=Eo(o,t,r,i,e[9],12,-1958414417),i=Eo(i,o,t,r,e[10],17,-42063),r=Eo(r,i,o,t,e[11],22,-1990404162),t=Eo(t,r,i,o,e[12],7,1804603682),o=Eo(o,t,r,i,e[13],12,-40341101),i=Eo(i,o,t,r,e[14],17,-1502002290),t=Io(t,r=Eo(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Io(o,t,r,i,e[6],9,-1069501632),i=Io(i,o,t,r,e[11],14,643717713),r=Io(r,i,o,t,e[0],20,-373897302),t=Io(t,r,i,o,e[5],5,-701558691),o=Io(o,t,r,i,e[10],9,38016083),i=Io(i,o,t,r,e[15],14,-660478335),r=Io(r,i,o,t,e[4],20,-405537848),t=Io(t,r,i,o,e[9],5,568446438),o=Io(o,t,r,i,e[14],9,-1019803690),i=Io(i,o,t,r,e[3],14,-187363961),r=Io(r,i,o,t,e[8],20,1163531501),t=Io(t,r,i,o,e[13],5,-1444681467),o=Io(o,t,r,i,e[2],9,-51403784),i=Io(i,o,t,r,e[7],14,1735328473),t=So(t,r=Io(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=So(o,t,r,i,e[8],11,-2022574463),i=So(i,o,t,r,e[11],16,1839030562),r=So(r,i,o,t,e[14],23,-35309556),t=So(t,r,i,o,e[1],4,-1530992060),o=So(o,t,r,i,e[4],11,1272893353),i=So(i,o,t,r,e[7],16,-155497632),r=So(r,i,o,t,e[10],23,-1094730640),t=So(t,r,i,o,e[13],4,681279174),o=So(o,t,r,i,e[0],11,-358537222),i=So(i,o,t,r,e[3],16,-722521979),r=So(r,i,o,t,e[6],23,76029189),t=So(t,r,i,o,e[9],4,-640364487),o=So(o,t,r,i,e[12],11,-421815835),i=So(i,o,t,r,e[15],16,530742520),t=Ao(t,r=So(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=Ao(o,t,r,i,e[7],10,1126891415),i=Ao(i,o,t,r,e[14],15,-1416354905),r=Ao(r,i,o,t,e[5],21,-57434055),t=Ao(t,r,i,o,e[12],6,1700485571),o=Ao(o,t,r,i,e[3],10,-1894986606),i=Ao(i,o,t,r,e[10],15,-1051523),r=Ao(r,i,o,t,e[1],21,-2054922799),t=Ao(t,r,i,o,e[8],6,1873313359),o=Ao(o,t,r,i,e[15],10,-30611744),i=Ao(i,o,t,r,e[6],15,-1560198380),r=Ao(r,i,o,t,e[13],21,1309151649),t=Ao(t,r,i,o,e[4],6,-145523070),o=Ao(o,t,r,i,e[11],10,-1120210379),i=Ao(i,o,t,r,e[2],15,718787259),r=Ao(r,i,o,t,e[9],21,-343485551),n[0]=Gd(t,n[0]),n[1]=Gd(r,n[1]),n[2]=Gd(i,n[2]),n[3]=Gd(o,n[3])}function jC(n,e,t,r,i,o){return e=Gd(Gd(e,n),Gd(r,o)),Gd(e<<i|e>>>32-i,t)}function Eo(n,e,t,r,i,o,s){return jC(e&t|~e&r,n,e,i,o,s)}function Io(n,e,t,r,i,o,s){return jC(e&r|t&~r,n,e,i,o,s)}function So(n,e,t,r,i,o,s){return jC(e^t^r,n,e,i,o,s)}function Ao(n,e,t,r,i,o,s){return jC(t^(e|~r),n,e,i,o,s)}function az(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)ak(r,Jce(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(ak(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,ak(r,i),r}function Jce(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var V9="0123456789abcdef".split("");function ele(n){for(var e="",t=0;t<4;t++)e+=V9[n>>8*t+4&15]+V9[n>>8*t&15];return e}function tle(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function hk(n){return az(n).map(tle).join("")}var nle=(function(n){for(var e=0;e<n.length;e++)n[e]=ele(n[e]);return n.join("")})(az("hello"))!="5d41402abc4b2a76b9719d911017c592";function Gd(n,e){if(nle){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function pk(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var l=0;for(c=0;c<256;c++){var u=a[c];l=(l+u+s.charCodeAt(c))%256,a[c]=a[l],a[l]=u}t=n,r=a}else a=r;var p=e.length,m=0,g=0,x="";for(c=0;c<p;c++)g=(g+(u=a[m=(m+1)%256]))%256,a[m]=a[g],a[g]=u,s=a[(a[m]+a[g])%256],x+=String.fromCharCode(e.charCodeAt(c)^s);return x}var j9={print:4,modify:8,copy:16,"annot-forms":32};function Nm(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(j9.perm!==void 0)throw new Error("Invalid permission: "+a);i+=j9[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=hk(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=pk(this.encryptionKey,this.padding)}function Pm(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function B9(n){if(Un(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){Yt.console&&dr.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function FC(n){if(!(this instanceof FC))return new FC(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function cz(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Rh(n,e,t,r,i){if(!(this instanceof Rh))return new Rh(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,cz.call(this,r,i)}function km(n,e,t,r,i){if(!(this instanceof km))return new km(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,cz.call(this,r,i)}function St(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,c=16,l="S",u=null;Un(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),l=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=B9;var x="1.3",E=g.__private__.getPdfVersion=function(){return x};g.__private__.setPdfVersion=function(v){x=v};var D={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return D};var N=g.__private__.getPageFormat=function(v){return D[v]};i=i||"a4";var K="compat",j="advanced",G=K;function oe(){this.saveGraphicsState(),$(new Mt(Xt,0,0,-Xt,0,ja()*Xt).toString()+" cm"),this.setFontSize(this.getFontSize()/Xt),l="n",G=j}function fe(){this.restoreGraphicsState(),l="S",G=K}var z=g.__private__.combineFontStyleAndFontWeight=function(v,P){if(v=="bold"&&P=="normal"||v=="bold"&&P==400||v=="normal"&&P=="italic"||v=="bold"&&P=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return P&&(v=P==400||P==="normal"?v==="italic"?"italic":"normal":P!=700&&P!=="bold"||v!=="normal"?(P==700?"bold":P)+""+v:"bold"),v};g.advancedAPI=function(v){var P=G===K;return P&&oe.call(this),typeof v!="function"||(v(this),P&&fe.call(this)),this},g.compatAPI=function(v){var P=G===j;return P&&fe.call(this),typeof v!="function"||(v(this),P&&oe.call(this)),this},g.isAdvancedAPI=function(){return G===j};var M,I=function(v){if(G!==j)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=g.roundToPrecision=g.__private__.roundToPrecision=function(v,P){var Y=e||P;if(isNaN(v)||isNaN(Y))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Y).replace(/0+$/,"")};M=g.hpf=g.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,16)};var b=g.f2=g.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return V(v,2)},S=g.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return V(v,3)},T=g.scale=g.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return G===K?v*Xt:G===j?v:void 0},te=function(v){return T((function(P){return G===K?ja()-P:G===j?P:void 0})(v))};g.__private__.setPrecision=g.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var _e,Te="00000000000000000000000000000000",be=g.__private__.getFileId=function(){return Te},de=g.__private__.setFileId=function(v){return Te=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():Te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Kr=new Nm(u.userPermissions,u.userPassword,u.ownerPassword,Te)),Te};g.setFileId=function(v){return de(v),this},g.getFileId=function(){return be()};var Ae=g.__private__.convertDateToPDFDate=function(v){var P=v.getTimezoneOffset(),Y=P<0?"+":"-",ne=Math.floor(Math.abs(P/60)),ue=Math.abs(P%60),Pe=[Y,J(ne),"'",J(ue),"'"].join("");return["D:",v.getFullYear(),J(v.getMonth()+1),J(v.getDate()),J(v.getHours()),J(v.getMinutes()),J(v.getSeconds()),Pe].join("")},Be=g.__private__.convertPDFDateToDate=function(v){var P=parseInt(v.substr(2,4),10),Y=parseInt(v.substr(6,2),10)-1,ne=parseInt(v.substr(8,2),10),ue=parseInt(v.substr(10,2),10),Pe=parseInt(v.substr(12,2),10),ze=parseInt(v.substr(14,2),10);return new Date(P,Y,ne,ue,Pe,ze,0)},Re=g.__private__.setCreationDate=function(v){var P;if(v===void 0&&(v=new Date),v instanceof Date)P=Ae(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");P=v}return _e=P},O=g.__private__.getCreationDate=function(v){var P=_e;return v==="jsDate"&&(P=Be(_e)),P};g.setCreationDate=function(v){return Re(v),this},g.getCreationDate=function(v){return O(v)};var H,J=g.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},re=g.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},ae=0,he=[],Ee=[],ye=0,De=[],Ue=[],Xe=!1,We=Ee;g.__private__.setCustomOutputDestination=function(v){Xe=!0,We=v};var ot=function(v){Xe||(We=v)};g.__private__.resetCustomOutputDestination=function(){Xe=!1,We=Ee};var $=g.__private__.out=function(v){return v=v.toString(),ye+=v.length+1,We.push(v),We},Ke=g.__private__.write=function(v){return $(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},kt=g.__private__.getArrayBuffer=function(v){for(var P=v.length,Y=new ArrayBuffer(P),ne=new Uint8Array(Y);P--;)ne[P]=v.charCodeAt(P);return Y},Ct=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Ct};var qe=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(v){return qe=G===j?v/Xt:v,this};var At,st=g.__private__.getFontSize=g.getFontSize=function(){return G===K?qe:qe*Xt},vt=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(v){return vt=v,this},g.__private__.getR2L=g.getR2L=function(){return vt};var Et,vn=g.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))At=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');At=v}else At=parseInt(v,10)};g.__private__.getZoomMode=function(){return At};var Qt,Ut=g.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Et=v};g.__private__.getPageMode=function(){return Et};var Rt=g.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Qt=v};g.__private__.getLayoutMode=function(){return Qt},g.__private__.setDisplayMode=g.setDisplayMode=function(v,P,Y){return vn(v),Rt(P),Ut(Y),this};var Ot={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(v){if(Object.keys(Ot).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ot[v]},g.__private__.getDocumentProperties=function(){return Ot},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(v){for(var P in Ot)Ot.hasOwnProperty(P)&&v[P]&&(Ot[P]=v[P]);return this},g.__private__.setDocumentProperty=function(v,P){if(Object.keys(Ot).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ot[v]=P};var gt,Xt,It,kr,yn,sn={},an={},Qn=[],Nt={},Zn={},Ft={},Zt={},or=null,tn=0,Lt=[],Sn=new B9(g),Do=n.hotfixes||[],xi={},es={},Es=[],Mt=function v(P,Y,ne,ue,Pe,ze){if(!(this instanceof v))return new v(P,Y,ne,ue,Pe,ze);isNaN(P)&&(P=1),isNaN(Y)&&(Y=0),isNaN(ne)&&(ne=0),isNaN(ue)&&(ue=1),isNaN(Pe)&&(Pe=0),isNaN(ze)&&(ze=0),this._matrix=[P,Y,ne,ue,Pe,ze]};Object.defineProperty(Mt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Mt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Mt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Mt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Mt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Mt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Mt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Mt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Mt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Mt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Mt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Mt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Mt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Mt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Mt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Mt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Mt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(v)},Mt.prototype.multiply=function(v){var P=v.sx*this.sx+v.shy*this.shx,Y=v.sx*this.shy+v.shy*this.sy,ne=v.shx*this.sx+v.sy*this.shx,ue=v.shx*this.shy+v.sy*this.sy,Pe=v.tx*this.sx+v.ty*this.shx+this.tx,ze=v.tx*this.shy+v.ty*this.sy+this.ty;return new Mt(P,Y,ne,ue,Pe,ze)},Mt.prototype.decompose=function(){var v=this.sx,P=this.shy,Y=this.shx,ne=this.sy,ue=this.tx,Pe=this.ty,ze=Math.sqrt(v*v+P*P),ft=(v/=ze)*Y+(P/=ze)*ne;Y-=v*ft,ne-=P*ft;var yt=Math.sqrt(Y*Y+ne*ne);return ft/=yt,v*(ne/=yt)<P*(Y/=yt)&&(v=-v,P=-P,ft=-ft,ze=-ze),{scale:new Mt(ze,0,0,yt,0,0),translate:new Mt(1,0,0,1,ue,Pe),rotate:new Mt(v,P,-P,v,0,0),skew:new Mt(1,0,ft,1,0,0)}},Mt.prototype.toString=function(v){return this.join(" ")},Mt.prototype.inversed=function(){var v=this.sx,P=this.shy,Y=this.shx,ne=this.sy,ue=this.tx,Pe=this.ty,ze=1/(v*ne-P*Y),ft=ne*ze,yt=-P*ze,qt=-Y*ze,Kt=v*ze;return new Mt(ft,yt,qt,Kt,-ft*ue-qt*Pe,-yt*ue-Kt*Pe)},Mt.prototype.applyToPoint=function(v){var P=v.x*this.sx+v.y*this.shx+this.tx,Y=v.x*this.shy+v.y*this.sy+this.ty;return new Fa(P,Y)},Mt.prototype.applyToRectangle=function(v){var P=this.applyToPoint(v),Y=this.applyToPoint(new Fa(v.x+v.w,v.y+v.h));return new _u(P.x,P.y,Y.x-P.x,Y.y-P.y)},Mt.prototype.clone=function(){var v=this.sx,P=this.shy,Y=this.shx,ne=this.sy,ue=this.tx,Pe=this.ty;return new Mt(v,P,Y,ne,ue,Pe)},g.Matrix=Mt;var ia=g.matrixMult=function(v,P){return P.multiply(v)},vr=new Mt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=vr;var Mo=function(v,P){if(!Zn[v]){var Y=(P instanceof Rh?"Sh":"P")+(Object.keys(Nt).length+1).toString(10);P.id=Y,Zn[v]=Y,Nt[Y]=P,Sn.publish("addPattern",P)}};g.ShadingPattern=Rh,g.TilingPattern=km,g.addShadingPattern=function(v,P){return I("addShadingPattern()"),Mo(v,P),this},g.beginTilingPattern=function(v){I("beginTilingPattern()"),wu(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},g.endTilingPattern=function(v,P){I("endTilingPattern()"),P.stream=Ue[H].join(`
`),Mo(v,P),Sn.publish("endTilingPattern",P),Es.pop().restore()};var Fi,Xn=g.__private__.newObject=function(){var v=ui();return Ci(v,!0),v},ui=g.__private__.newObjectDeferred=function(){return ae++,he[ae]=function(){return ye},ae},Ci=function(v,P){return P=typeof P=="boolean"&&P,he[v]=ye,P&&$(v+" 0 obj"),v},ts=g.__private__.newAdditionalObject=function(){var v={objId:ui(),content:""};return De.push(v),v},wc=ui(),Is=ui(),No=g.__private__.decodeColorString=function(v){var P=v.split(" ");if(P.length!==2||P[1]!=="g"&&P[1]!=="G")P.length!==5||P[4]!=="k"&&P[4]!=="K"||(P=[(1-P[0])*(1-P[3]),(1-P[1])*(1-P[3]),(1-P[2])*(1-P[3]),"r"]);else{var Y=parseFloat(P[0]);P=[Y,Y,Y,"r"]}for(var ne="#",ue=0;ue<3;ue++)ne+=("0"+Math.floor(255*parseFloat(P[ue])).toString(16)).slice(-2);return ne},ns=g.__private__.encodeColorString=function(v){var P;typeof v=="string"&&(v={ch1:v});var Y=v.ch1,ne=v.ch2,ue=v.ch3,Pe=v.ch4,ze=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Y=="string"&&Y.charAt(0)!=="#"){var ft=new sz(Y);if(ft.ok)Y=ft.toHex();else if(!/^\d*\.?\d*$/.test(Y))throw new Error('Invalid color "'+Y+'" passed to jsPDF.encodeColorString.')}if(typeof Y=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Y)&&(Y="#"+Y[1]+Y[1]+Y[2]+Y[2]+Y[3]+Y[3]),typeof Y=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Y)){var yt=parseInt(Y.substr(1),16);Y=yt>>16&255,ne=yt>>8&255,ue=255&yt}if(ne===void 0||Pe===void 0&&Y===ne&&ne===ue)P=typeof Y=="string"?Y+" "+ze[0]:v.precision===2?b(Y/255)+" "+ze[0]:S(Y/255)+" "+ze[0];else if(Pe===void 0||Un(Pe)==="object"){if(Pe&&!isNaN(Pe.a)&&Pe.a===0)return["1.","1.","1.",ze[1]].join(" ");P=typeof Y=="string"?[Y,ne,ue,ze[1]].join(" "):v.precision===2?[b(Y/255),b(ne/255),b(ue/255),ze[1]].join(" "):[S(Y/255),S(ne/255),S(ue/255),ze[1]].join(" ")}else P=typeof Y=="string"?[Y,ne,ue,Pe,ze[2]].join(" "):v.precision===2?[b(Y),b(ne),b(ue),b(Pe),ze[2]].join(" "):[S(Y),S(ne),S(ue),S(Pe),ze[2]].join(" ");return P},Po=g.__private__.getFilters=function(){return s},Hi=g.__private__.putStream=function(v){var P=(v=v||{}).data||"",Y=v.filters||Po(),ne=v.alreadyAppliedFilters||[],ue=v.addLength1||!1,Pe=P.length,ze=v.objectId,ft=function(zr){return zr};if(u!==null&&ze===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ft=Kr.encryptor(ze,0));var yt={};Y===!0&&(Y=["FlateEncode"]);var qt=v.additionalKeyValues||[],Kt=(yt=St.API.processDataByFilters!==void 0?St.API.processDataByFilters(P,Y):{data:P,reverseChain:[]}).reverseChain+(Array.isArray(ne)?ne.join(" "):ne.toString());if(yt.data.length!==0&&(qt.push({key:"Length",value:yt.data.length}),ue===!0&&qt.push({key:"Length1",value:Pe})),Kt.length!=0)if(Kt.split("/").length-1==1)qt.push({key:"Filter",value:Kt});else{qt.push({key:"Filter",value:"["+Kt+"]"});for(var _n=0;_n<qt.length;_n+=1)if(qt[_n].key==="DecodeParms"){for(var fr=[],er=0;er<yt.reverseChain.split("/").length-1;er+=1)fr.push("null");fr.push(qt[_n].value),qt[_n].value="["+fr.join(" ")+"]"}}$("<<");for(var qn=0;qn<qt.length;qn++)$("/"+qt[qn].key+" "+qt[qn].value);$(">>"),yt.data.length!==0&&($("stream"),$(ft(yt.data)),$("endstream"))},co=g.__private__.putPage=function(v){var P=v.number,Y=v.data,ne=v.objId,ue=v.contentsObjId;Ci(ne,!0),$("<</Type /Page"),$("/Parent "+v.rootDictionaryObjId+" 0 R"),$("/Resources "+v.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(M(v.mediaBox.bottomLeftX))+" "+parseFloat(M(v.mediaBox.bottomLeftY))+" "+M(v.mediaBox.topRightX)+" "+M(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&$("/CropBox ["+M(v.cropBox.bottomLeftX)+" "+M(v.cropBox.bottomLeftY)+" "+M(v.cropBox.topRightX)+" "+M(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&$("/BleedBox ["+M(v.bleedBox.bottomLeftX)+" "+M(v.bleedBox.bottomLeftY)+" "+M(v.bleedBox.topRightX)+" "+M(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&$("/TrimBox ["+M(v.trimBox.bottomLeftX)+" "+M(v.trimBox.bottomLeftY)+" "+M(v.trimBox.topRightX)+" "+M(v.trimBox.topRightY)+"]"),v.artBox!==null&&$("/ArtBox ["+M(v.artBox.bottomLeftX)+" "+M(v.artBox.bottomLeftY)+" "+M(v.artBox.topRightX)+" "+M(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&$("/UserUnit "+v.userUnit),Sn.publish("putPage",{objId:ne,pageContext:Lt[P],pageNumber:P,page:Y}),$("/Contents "+ue+" 0 R"),$(">>"),$("endobj");var Pe=Y.join(`
`);return G===j&&(Pe+=`
Q`),Ci(ue,!0),Hi({data:Pe,filters:Po(),objectId:ue}),$("endobj"),ne},Ss=g.__private__.putPages=function(){var v,P,Y=[];for(v=1;v<=tn;v++)Lt[v].objId=ui(),Lt[v].contentsObjId=ui();for(v=1;v<=tn;v++)Y.push(co({number:v,data:Ue[v],objId:Lt[v].objId,contentsObjId:Lt[v].contentsObjId,mediaBox:Lt[v].mediaBox,cropBox:Lt[v].cropBox,bleedBox:Lt[v].bleedBox,trimBox:Lt[v].trimBox,artBox:Lt[v].artBox,userUnit:Lt[v].userUnit,rootDictionaryObjId:wc,resourceDictionaryObjId:Is}));Ci(wc,!0),$("<</Type /Pages");var ne="/Kids [";for(P=0;P<tn;P++)ne+=Y[P]+" 0 R ";$(ne+"]"),$("/Count "+tn),$(">>"),$("endobj"),Sn.publish("postPutPages")},bc=function(v){Sn.publish("putFont",{font:v,out:$,newObject:Xn,putStream:Hi}),v.isAlreadyPutted!==!0&&(v.objectNumber=Xn(),$("<<"),$("/Type /Font"),$("/BaseFont /"+Pm(v.postScriptName)),$("/Subtype /Type1"),typeof v.encoding=="string"&&$("/Encoding /"+v.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},xc=function(v){v.objectNumber=Xn();var P=[];P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Form"}),P.push({key:"BBox",value:"["+[M(v.x),M(v.y),M(v.x+v.width),M(v.y+v.height)].join(" ")+"]"}),P.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Y=v.pages[1].join(`
`);Hi({data:Y,additionalKeyValues:P,objectId:v.objectNumber}),$("endobj")},Cc=function(v,P){P||(P=21);var Y=Xn(),ne=(function(ze,ft){var yt,qt=[],Kt=1/(ft-1);for(yt=0;yt<1;yt+=Kt)qt.push(yt);if(qt.push(1),ze[0].offset!=0){var _n={offset:0,color:ze[0].color};ze.unshift(_n)}if(ze[ze.length-1].offset!=1){var fr={offset:1,color:ze[ze.length-1].color};ze.push(fr)}for(var er="",qn=0,zr=0;zr<qt.length;zr++){for(yt=qt[zr];yt>ze[qn+1].offset;)qn++;var Or=ze[qn].offset,di=(yt-Or)/(ze[qn+1].offset-Or),os=ze[qn].color,yr=ze[qn+1].color;er+=re(Math.round((1-di)*os[0]+di*yr[0]).toString(16))+re(Math.round((1-di)*os[1]+di*yr[1]).toString(16))+re(Math.round((1-di)*os[2]+di*yr[2]).toString(16))}return er.trim()})(v.colors,P),ue=[];ue.push({key:"FunctionType",value:"0"}),ue.push({key:"Domain",value:"[0.0 1.0]"}),ue.push({key:"Size",value:"["+P+"]"}),ue.push({key:"BitsPerSample",value:"8"}),ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hi({data:ne,additionalKeyValues:ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Y}),$("endobj"),v.objectNumber=Xn(),$("<< /ShadingType "+v.type),$("/ColorSpace /DeviceRGB");var Pe="/Coords ["+M(parseFloat(v.coords[0]))+" "+M(parseFloat(v.coords[1]))+" ";v.type===2?Pe+=M(parseFloat(v.coords[2]))+" "+M(parseFloat(v.coords[3])):Pe+=M(parseFloat(v.coords[2]))+" "+M(parseFloat(v.coords[3]))+" "+M(parseFloat(v.coords[4]))+" "+M(parseFloat(v.coords[5])),$(Pe+="]"),v.matrix&&$("/Matrix ["+v.matrix.toString()+"]"),$("/Function "+Y+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},_l=function(v,P){var Y=ui(),ne=Xn();P.push({resourcesOid:Y,objectOid:ne}),v.objectNumber=ne;var ue=[];ue.push({key:"Type",value:"/Pattern"}),ue.push({key:"PatternType",value:"1"}),ue.push({key:"PaintType",value:"1"}),ue.push({key:"TilingType",value:"1"}),ue.push({key:"BBox",value:"["+v.boundingBox.map(M).join(" ")+"]"}),ue.push({key:"XStep",value:M(v.xStep)}),ue.push({key:"YStep",value:M(v.yStep)}),ue.push({key:"Resources",value:Y+" 0 R"}),v.matrix&&ue.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Hi({data:v.stream,additionalKeyValues:ue,objectId:v.objectNumber}),$("endobj")},Qh=function(v){for(var P in v.objectNumber=Xn(),$("<<"),v)switch(P){case"opacity":$("/ca "+b(v[P]));break;case"stroke-opacity":$("/CA "+b(v[P]))}$(">>"),$("endobj")},ef=function(v){Ci(v.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var P in $("/Font <<"),sn)sn.hasOwnProperty(P)&&(p===!1||p===!0&&m.hasOwnProperty(P))&&$("/"+P+" "+sn[P].objectNumber+" 0 R");$(">>")})(),(function(){if(Object.keys(Nt).length>0){for(var P in $("/Shading <<"),Nt)Nt.hasOwnProperty(P)&&Nt[P]instanceof Rh&&Nt[P].objectNumber>=0&&$("/"+P+" "+Nt[P].objectNumber+" 0 R");Sn.publish("putShadingPatternDict"),$(">>")}})(),(function(P){if(Object.keys(Nt).length>0){for(var Y in $("/Pattern <<"),Nt)Nt.hasOwnProperty(Y)&&Nt[Y]instanceof g.TilingPattern&&Nt[Y].objectNumber>=0&&Nt[Y].objectNumber<P&&$("/"+Y+" "+Nt[Y].objectNumber+" 0 R");Sn.publish("putTilingPatternDict"),$(">>")}})(v.objectOid),(function(){if(Object.keys(Ft).length>0){var P;for(P in $("/ExtGState <<"),Ft)Ft.hasOwnProperty(P)&&Ft[P].objectNumber>=0&&$("/"+P+" "+Ft[P].objectNumber+" 0 R");Sn.publish("putGStateDict"),$(">>")}})(),(function(){for(var P in $("/XObject <<"),xi)xi.hasOwnProperty(P)&&xi[P].objectNumber>=0&&$("/"+P+" "+xi[P].objectNumber+" 0 R");Sn.publish("putXobjectDict"),$(">>")})(),$(">>"),$("endobj")},wl=function(v){an[v.fontName]=an[v.fontName]||{},an[v.fontName][v.fontStyle]=v.id},tf=function(v,P,Y,ne,ue){var Pe={id:"F"+(Object.keys(sn).length+1).toString(10),postScriptName:v,fontName:P,fontStyle:Y,encoding:ne,isStandardFont:ue||!1,metadata:{}};return Sn.publish("addFont",{font:Pe,instance:this}),sn[Pe.id]=Pe,wl(Pe),Pe.id},lo=g.__private__.pdfEscape=g.pdfEscape=function(v,P){return(function(Y,ne){var ue,Pe,ze,ft,yt,qt,Kt,_n,fr;if(ze=(ne=ne||{}).sourceEncoding||"Unicode",yt=ne.outputEncoding,(ne.autoencode||yt)&&sn[gt].metadata&&sn[gt].metadata[ze]&&sn[gt].metadata[ze].encoding&&(ft=sn[gt].metadata[ze].encoding,!yt&&sn[gt].encoding&&(yt=sn[gt].encoding),!yt&&ft.codePages&&(yt=ft.codePages[0]),typeof yt=="string"&&(yt=ft[yt]),yt)){for(Kt=!1,qt=[],ue=0,Pe=Y.length;ue<Pe;ue++)(_n=yt[Y.charCodeAt(ue)])?qt.push(String.fromCharCode(_n)):qt.push(Y[ue]),qt[ue].charCodeAt(0)>>8&&(Kt=!0);Y=qt.join("")}for(ue=Y.length;Kt===void 0&&ue!==0;)Y.charCodeAt(ue-1)>>8&&(Kt=!0),ue--;if(!Kt)return Y;for(qt=ne.noBOM?[]:[254,255],ue=0,Pe=Y.length;ue<Pe;ue++){if((fr=(_n=Y.charCodeAt(ue))>>8)>>8)throw new Error("Character at position "+ue+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(fr),qt.push(_n-(fr<<8))}return String.fromCharCode.apply(void 0,qt)})(v,P).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Oa=g.__private__.beginPage=function(v){Ue[++tn]=[],Lt[tn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Zh(tn),ot(Ue[H])},oa=function(v,P){var Y,ne,ue;switch(t=P||t,typeof v=="string"&&(Y=N(v.toLowerCase()),Array.isArray(Y)&&(ne=Y[0],ue=Y[1])),Array.isArray(v)&&(ne=v[0]*Xt,ue=v[1]*Xt),isNaN(ne)&&(ne=i[0],ue=i[1]),(ne>14400||ue>14400)&&(dr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ne=Math.min(14400,ne),ue=Math.min(14400,ue)),i=[ne,ue],t.substr(0,1)){case"l":ue>ne&&(i=[ue,ne]);break;case"p":ne>ue&&(i=[ue,ne])}Oa(i),Gt(yu),$(ca),Il!==0&&$(Il+" J"),Jn!==0&&$(Jn+" j"),Sn.publish("addPage",{pageNumber:tn})},bl=function(v){v>0&&v<=tn&&(Ue.splice(v,1),Lt.splice(v,1),tn--,H>tn&&(H=tn),this.setPage(H))},Zh=function(v){v>0&&v<=tn&&(H=v)},nf=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Ue.length-1},rf=function(v,P,Y){var ne,ue=void 0;return Y=Y||{},v=v!==void 0?v:sn[gt].fontName,P=P!==void 0?P:sn[gt].fontStyle,ne=v.toLowerCase(),an[ne]!==void 0&&an[ne][P]!==void 0?ue=an[ne][P]:an[v]!==void 0&&an[v][P]!==void 0?ue=an[v][P]:Y.disableWarning===!1&&dr.warn("Unable to look up font label for font '"+v+"', '"+P+"'. Refer to getFontList() for available fonts."),ue||Y.noFallback||(ue=an.times[P])==null&&(ue=an.times.normal),ue},As=g.__private__.putInfo=function(){var v=Xn(),P=function(ne){return ne};for(var Y in u!==null&&(P=Kr.encryptor(v,0)),$("<<"),$("/Producer ("+lo(P("jsPDF "+St.version))+")"),Ot)Ot.hasOwnProperty(Y)&&Ot[Y]&&$("/"+Y.substr(0,1).toUpperCase()+Y.substr(1)+" ("+lo(P(Ot[Y]))+")");$("/CreationDate ("+lo(P(_e))+")"),$(">>"),$("endobj")},Ec=g.__private__.putCatalog=function(v){var P=(v=v||{}).rootDictionaryObjId||wc;switch(Xn(),$("<<"),$("/Type /Catalog"),$("/Pages "+P+" 0 R"),At||(At="fullwidth"),At){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Y=""+At;Y.substr(Y.length-1)==="%"&&(At=parseInt(At)/100),typeof At=="number"&&$("/OpenAction [3 0 R /XYZ null null "+b(At)+"]")}switch(Qt||(Qt="continuous"),Qt){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}Et&&$("/PageMode /"+Et),Sn.publish("putCatalog"),$(">>"),$("endobj")},of=g.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(ae+1)),$("/Root "+ae+" 0 R"),$("/Info "+(ae-1)+" 0 R"),u!==null&&$("/Encrypt "+Kr.oid+" 0 R"),$("/ID [ <"+Te+"> <"+Te+"> ]"),$(">>")},Rr=g.__private__.putHeader=function(){$("%PDF-"+x),$("%\xBA\xDF\xAC\xE0")},sf=g.__private__.putXRef=function(){var v="0000000000";$("xref"),$("0 "+(ae+1)),$("0000000000 65535 f ");for(var P=1;P<=ae;P++)typeof he[P]=="function"?$((v+he[P]()).slice(-10)+" 00000 n "):he[P]!==void 0?$((v+he[P]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},sa=g.__private__.buildDocument=function(){var v;ae=0,ye=0,Ee=[],he=[],De=[],wc=ui(),Is=ui(),ot(Ee),Sn.publish("buildDocument"),Rr(),Ss(),(function(){Sn.publish("putAdditionalObjects");for(var Y=0;Y<De.length;Y++){var ne=De[Y];Ci(ne.objId,!0),$(ne.content),$("endobj")}Sn.publish("postPutAdditionalObjects")})(),v=[],(function(){for(var Y in sn)sn.hasOwnProperty(Y)&&(p===!1||p===!0&&m.hasOwnProperty(Y))&&bc(sn[Y])})(),(function(){var Y;for(Y in Ft)Ft.hasOwnProperty(Y)&&Qh(Ft[Y])})(),(function(){for(var Y in xi)xi.hasOwnProperty(Y)&&xc(xi[Y])})(),(function(Y){var ne;for(ne in Nt)Nt.hasOwnProperty(ne)&&(Nt[ne]instanceof Rh?Cc(Nt[ne]):Nt[ne]instanceof km&&_l(Nt[ne],Y))})(v),Sn.publish("putResources"),v.forEach(ef),ef({resourcesOid:Is,objectOid:Number.MAX_SAFE_INTEGER}),Sn.publish("postPutResources"),u!==null&&(Kr.oid=Xn(),$("<<"),$("/Filter /Standard"),$("/V "+Kr.v),$("/R "+Kr.r),$("/U <"+Kr.toHexString(Kr.U)+">"),$("/O <"+Kr.toHexString(Kr.O)+">"),$("/P "+Kr.P),$(">>"),$("endobj")),As(),Ec();var P=ye;return sf(),of(),$("startxref"),$(""+P),$("%%EOF"),ot(Ue[H]),Ee.join(`
`)},gu=g.__private__.getBlob=function(v){return new Blob([kt(v)],{type:"application/pdf"})},af=g.output=g.__private__.output=(Fi=function(v,P){switch(typeof(P=P||{})=="string"?P={filename:P}:P.filename=P.filename||"generated.pdf",v){case void 0:return sa();case"save":g.save(P.filename);break;case"arraybuffer":return kt(sa());case"blob":return gu(sa());case"bloburi":case"bloburl":if(Yt.URL!==void 0&&typeof Yt.URL.createObjectURL=="function")return Yt.URL&&Yt.URL.createObjectURL(gu(sa()))||void 0;dr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Y="",ne=sa();try{Y=F9(ne)}catch{Y=F9(unescape(encodeURIComponent(ne)))}return"data:application/pdf;filename="+P.filename+";base64,"+Y;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Yt)==="[object Window]"){var ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';P.pdfObjectUrl&&(ue=P.pdfObjectUrl,Pe="");var ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ue+'"'+Pe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(P)+");<\/script></body></html>",ft=Yt.open();return ft!==null&&ft.document.write(ze),ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Yt)==="[object Window]"){var yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(P.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+P.filename+'" width="500px" height="400px" /></body></html>',qt=Yt.open();if(qt!==null){qt.document.write(yt);var Kt=this;qt.document.documentElement.querySelector("#pdfViewer").onload=function(){qt.document.title=P.filename,qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Kt.output("bloburl"))}}return qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Yt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _n='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",P)+'"></iframe></body></html>',fr=Yt.open();if(fr!==null&&(fr.document.write(_n),fr.document.title=P.filename),fr||typeof safari>"u")return fr;break;case"datauri":case"dataurl":return Yt.document.location.href=this.output("datauristring",P);default:return null}},Fi.foo=function(){try{return Fi.apply(this,arguments)}catch(Y){var v=Y.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var P="Error in function "+v.split(`
`)[0].split("<")[0]+": "+Y.message;if(!Yt.console)throw new Error(P);Yt.console.error(P,Y),Yt.alert&&alert(P)}},Fi.foo.bar=Fi,Fi.foo),ko=function(v){return Array.isArray(Do)===!0&&Do.indexOf(v)>-1};switch(r){case"pt":Xt=1;break;case"mm":Xt=72/25.4;break;case"cm":Xt=72/2.54;break;case"in":Xt=72;break;case"px":Xt=ko("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xt=12;break;case"ex":Xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Xt=r}var Kr=null;Re(),de();var Gi=g.__private__.getPageInfo=g.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Lt[v].objId,pageNumber:v,pageContext:Lt[v]}},rs=g.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var P in Lt)if(Lt[P].objId===v)break;return Gi(P)},mu=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Lt[H].objId,pageNumber:H,pageContext:Lt[H]}};g.addPage=function(){return oa.apply(this,arguments),this},g.setPage=function(){return Zh.apply(this,arguments),ot.call(this,Ue[H]),this},g.insertPage=function(v){return this.addPage(),this.movePage(H,v),this},g.movePage=function(v,P){var Y,ne;if(v>P){Y=Ue[v],ne=Lt[v];for(var ue=v;ue>P;ue--)Ue[ue]=Ue[ue-1],Lt[ue]=Lt[ue-1];Ue[P]=Y,Lt[P]=ne,this.setPage(P)}else if(v<P){Y=Ue[v],ne=Lt[v];for(var Pe=v;Pe<P;Pe++)Ue[Pe]=Ue[Pe+1],Lt[Pe]=Lt[Pe+1];Ue[P]=Y,Lt[P]=ne,this.setPage(P)}return this},g.deletePage=function(){return bl.apply(this,arguments),this},g.__private__.text=g.text=function(v,P,Y,ne,ue){var Pe,ze,ft,yt,qt,Kt,_n,fr,er,qn=(ne=ne||{}).scope||this;if(typeof v=="number"&&typeof P=="number"&&(typeof Y=="string"||Array.isArray(Y))){var zr=Y;Y=P,P=v,v=zr}if(arguments[3]instanceof Mt==0?(ft=arguments[4],yt=arguments[5],Un(_n=arguments[3])==="object"&&_n!==null||(typeof ft=="string"&&(yt=ft,ft=null),typeof _n=="string"&&(yt=_n,_n=null),typeof _n=="number"&&(ft=_n,_n=null),ne={flags:_n,angle:ft,align:yt})):(I("The transform parameter of text() with a Matrix value"),er=ue),isNaN(P)||isNaN(Y)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return qn;var Or,di="",os=typeof ne.lineHeightFactor=="number"?ne.lineHeightFactor:uo,yr=qn.internal.scaleFactor;function ua(jn){return jn=jn.split("	").join(Array(ne.TabLen||9).join(" ")),lo(jn,_n)}function xu(jn){for(var sr,Qr=jn.concat(),Ei=[],Ml=Qr.length;Ml--;)typeof(sr=Qr.shift())=="string"?Ei.push(sr):Array.isArray(jn)&&(sr.length===1||sr[1]===void 0&&sr[2]===void 0)?Ei.push(sr[0]):Ei.push([sr[0],sr[1],sr[2]]);return Ei}function Ns(jn,sr){var Qr;if(typeof jn=="string")Qr=sr(jn)[0];else if(Array.isArray(jn)){for(var Ei,Ml,p0=jn.concat(),ip=[],U_=p0.length;U_--;)typeof(Ei=p0.shift())=="string"?ip.push(sr(Ei)[0]):Array.isArray(Ei)&&typeof Ei[0]=="string"&&(Ml=sr(Ei[0],Ei[1],Ei[2]),ip.push([Ml[0],Ml[1],Ml[2]]));Qr=ip}return Qr}var f=!1,_=!0;if(typeof v=="string")f=!0;else if(Array.isArray(v)){var C=v.concat();ze=[];for(var B,le=C.length;le--;)(typeof(B=C.shift())!="string"||Array.isArray(B)&&typeof B[0]!="string")&&(_=!1);f=_}if(f===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var xe=qe/qn.internal.scaleFactor,Ze=xe*(os-1);switch(ne.baseline){case"bottom":Y-=Ze;break;case"top":Y+=xe-Ze;break;case"hanging":Y+=xe-2*Ze;break;case"middle":Y+=xe/2-Ze}if((Kt=ne.maxWidth||0)>0&&(typeof v=="string"?v=qn.splitTextToSize(v,Kt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(jn,sr){return jn.concat(qn.splitTextToSize(sr,Kt))},[]))),Pe={text:v,x:P,y:Y,options:ne,mutex:{pdfEscape:lo,activeFontKey:gt,fonts:sn,activeFontSize:qe}},Sn.publish("preProcessText",Pe),v=Pe.text,ft=(ne=Pe.options).angle,er instanceof Mt==0&&ft&&typeof ft=="number"){ft*=Math.PI/180,ne.rotationDirection===0&&(ft=-ft),G===j&&(ft=-ft);var Dn=Math.cos(ft),Lr=Math.sin(ft);er=new Mt(Dn,Lr,-Lr,Dn,0,0)}else ft&&ft instanceof Mt&&(er=ft);G!==j||er||(er=vr),(qt=ne.charSpace||Ro)!==void 0&&(di+=M(T(qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(fr=ne.horizontalScale)!==void 0&&(di+=M(100*fr)+` Tz
`),ne.lang;var Wt=-1,hr=ne.renderingMode!==void 0?ne.renderingMode:ne.stroke,Fr=qn.internal.getCurrentPageInfo().pageContext;switch(hr){case 0:case!1:case"fill":Wt=0;break;case 1:case!0:case"stroke":Wt=1;break;case 2:case"fillThenStroke":Wt=2;break;case 3:case"invisible":Wt=3;break;case 4:case"fillAndAddForClipping":Wt=4;break;case 5:case"strokeAndAddPathForClipping":Wt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wt=6;break;case 7:case"addToPathForClipping":Wt=7}var Ba=Fr.usedRenderingMode!==void 0?Fr.usedRenderingMode:-1;Wt!==-1?di+=Wt+` Tr
`:Ba!==-1&&(di+=`0 Tr
`),Wt!==-1&&(Fr.usedRenderingMode=Wt),yt=ne.align||"left";var Er,da=qe*os,Tl=qn.internal.pageSize.getWidth(),c0=sn[gt];qt=ne.charSpace||Ro,Kt=ne.maxWidth||0,_n=Object.assign({autoencode:!0,noBOM:!0},ne.flags);var Cu=[],df=function(jn){return qn.getStringUnitWidth(jn,{font:c0,charSpace:qt,fontSize:qe,doKerning:!1})*qe/yr};if(Object.prototype.toString.call(v)==="[object Array]"){var Ps;ze=xu(v),yt!=="left"&&(Er=ze.map(df));var ks,Eu=0;if(yt==="right"){P-=Er[0],v=[],le=ze.length;for(var Dl=0;Dl<le;Dl++)Dl===0?(ks=La(P),Ps=Vi(Y)):(ks=T(Eu-Er[Dl]),Ps=-da),v.push([ze[Dl],ks,Ps]),Eu=Er[Dl]}else if(yt==="center"){P-=Er[0]/2,v=[],le=ze.length;for(var Iu=0;Iu<le;Iu++)Iu===0?(ks=La(P),Ps=Vi(Y)):(ks=T((Eu-Er[Iu])/2),Ps=-da),v.push([ze[Iu],ks,Ps]),Eu=Er[Iu]}else if(yt==="left"){v=[],le=ze.length;for(var l0=0;l0<le;l0++)v.push(ze[l0])}else if(yt==="justify"&&c0.encoding==="Identity-H"){v=[],le=ze.length,Kt=Kt!==0?Kt:Tl;for(var rp=0,Yr=0;Yr<le;Yr++)if(Ps=Yr===0?Vi(Y):-da,ks=Yr===0?La(P):rp,Yr<le-1){var B_=T((Kt-Er[Yr])/(ze[Yr].split(" ").length-1)),Tc=ze[Yr].split(" ");v.push([Tc[0]+" ",ks,Ps]),rp=0;for(var Dc=1;Dc<Tc.length;Dc++){var u0=(df(Tc[Dc-1]+" "+Tc[Dc])-df(Tc[Dc]))*yr+B_;Dc==Tc.length-1?v.push([Tc[Dc],u0,0]):v.push([Tc[Dc]+" ",u0,0]),rp-=u0}}else v.push([ze[Yr],ks,Ps]);v.push(["",rp,0])}else{if(yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],le=ze.length,Kt=Kt!==0?Kt:Tl,Yr=0;Yr<le;Yr++){Ps=Yr===0?Vi(Y):-da,ks=Yr===0?La(P):0;var d0=ze[Yr].split(" ").length-1,f0=d0>0?(Kt-Er[Yr])/d0:0;Yr<le-1?Cu.push(M(T(f0))):Cu.push(0),v.push([ze[Yr],ks,Ps])}}}(typeof ne.R2L=="boolean"?ne.R2L:vt)===!0&&(v=Ns(v,function(jn,sr,Qr){return[jn.split("").reverse().join(""),sr,Qr]})),Pe={text:v,x:P,y:Y,options:ne,mutex:{pdfEscape:lo,activeFontKey:gt,fonts:sn,activeFontSize:qe}},Sn.publish("postProcessText",Pe),v=Pe.text,Or=Pe.mutex.isHex||!1;var h0=sn[gt].encoding;h0!=="WinAnsiEncoding"&&h0!=="StandardEncoding"||(v=Ns(v,function(jn,sr,Qr){return[ua(jn),sr,Qr]})),ze=xu(v),v=[];for(var Su,Au,Tu,ff=Array.isArray(ze[0])?1:0,Du="",hf=function(jn,sr,Qr){var Ei="";return Qr instanceof Mt?(Qr=typeof ne.angle=="number"?ia(Qr,new Mt(1,0,0,1,jn,sr)):ia(new Mt(1,0,0,1,jn,sr),Qr),G===j&&(Qr=ia(new Mt(1,0,0,-1,0,0),Qr)),Ei=Qr.join(" ")+` Tm
`):Ei=M(jn)+" "+M(sr)+` Td
`,Ei},fa=0;fa<ze.length;fa++){switch(Du="",ff){case 1:Tu=(Or?"<":"(")+ze[fa][0]+(Or?">":")"),Su=parseFloat(ze[fa][1]),Au=parseFloat(ze[fa][2]);break;case 0:Tu=(Or?"<":"(")+ze[fa]+(Or?">":")"),Su=La(P),Au=Vi(Y)}Cu!==void 0&&Cu[fa]!==void 0&&(Du=Cu[fa]+` Tw
`),fa===0?v.push(Du+hf(Su,Au,er)+Tu):ff===0?v.push(Du+Tu):ff===1&&v.push(Du+hf(Su,Au,er)+Tu)}v=ff===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var Mc=`BT
/`;return Mc+=gt+" "+qe+` Tf
`,Mc+=M(qe*os)+` TL
`,Mc+=Ac+`
`,Mc+=di,Mc+=v,$(Mc+="ET"),m[gt]=!0,qn};var vu=g.__private__.clip=g.clip=function(v){return $(v==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return vu("evenodd")},g.__private__.discardPath=g.discardPath=function(){return $("n"),this};var Ts=g.__private__.isValidStyle=function(v){var P=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(P=!0),P};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(v){return Ts(v)&&(l=v),this};var Vn=g.__private__.getStyle=g.getStyle=function(v){var P=l;switch(v){case"D":case"S":P="S";break;case"F":P="f";break;case"FD":case"DF":P="B";break;case"f":case"f*":case"B":case"B*":P=v}return P},xl=g.close=function(){return $("h"),this};g.stroke=function(){return $("S"),this},g.fill=function(v){return aa("f",v),this},g.fillEvenOdd=function(v){return aa("f*",v),this},g.fillStroke=function(v){return aa("B",v),this},g.fillStrokeEvenOdd=function(v){return aa("B*",v),this};var aa=function(v,P){Un(P)==="object"?Xh(P,v):$(v)},Ds=function(v){v===null||G===j&&v===void 0||(v=Vn(v),$(v))};function n0(v,P,Y,ne,ue){var Pe=new km(P||this.boundingBox,Y||this.xStep,ne||this.yStep,this.gState,ue||this.matrix);Pe.stream=this.stream;var ze=v+"$$"+this.cloneIndex+++"$$";return Mo(ze,Pe),Pe}var Xh=function(v,P){var Y=Zn[v.key],ne=Nt[Y];if(ne instanceof Rh)$("q"),$(r0(P)),ne.gState&&g.setGState(ne.gState),$(v.matrix.toString()+" cm"),$("/"+Y+" sh"),$("Q");else if(ne instanceof km){var ue=new Mt(1,0,0,-1,0,ja());v.matrix&&(ue=ue.multiply(v.matrix||vr),Y=n0.call(ne,v.key,v.boundingBox,v.xStep,v.yStep,ue).id),$("q"),$("/Pattern cs"),$("/"+Y+" scn"),ne.gState&&g.setGState(ne.gState),$(P),$("Q")}},r0=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},cf=g.moveTo=function(v,P){return $(M(T(v))+" "+M(te(P))+" m"),this},Jh=g.lineTo=function(v,P){return $(M(T(v))+" "+M(te(P))+" l"),this},Ms=g.curveTo=function(v,P,Y,ne,ue,Pe){return $([M(T(v)),M(te(P)),M(T(Y)),M(te(ne)),M(T(ue)),M(te(Pe)),"c"].join(" ")),this};g.__private__.line=g.line=function(v,P,Y,ne,ue){if(isNaN(v)||isNaN(P)||isNaN(Y)||isNaN(ne)||!Ts(ue))throw new Error("Invalid arguments passed to jsPDF.line");return G===K?this.lines([[Y-v,ne-P]],v,P,[1,1],ue||"S"):this.lines([[Y-v,ne-P]],v,P,[1,1]).stroke()},g.__private__.lines=g.lines=function(v,P,Y,ne,ue,Pe){var ze,ft,yt,qt,Kt,_n,fr,er,qn,zr,Or,di;if(typeof v=="number"&&(di=Y,Y=P,P=v,v=di),ne=ne||[1,1],Pe=Pe||!1,isNaN(P)||isNaN(Y)||!Array.isArray(v)||!Array.isArray(ne)||!Ts(ue)||typeof Pe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(cf(P,Y),ze=ne[0],ft=ne[1],qt=v.length,zr=P,Or=Y,yt=0;yt<qt;yt++)(Kt=v[yt]).length===2?(zr=Kt[0]*ze+zr,Or=Kt[1]*ft+Or,Jh(zr,Or)):(_n=Kt[0]*ze+zr,fr=Kt[1]*ft+Or,er=Kt[2]*ze+zr,qn=Kt[3]*ft+Or,zr=Kt[4]*ze+zr,Or=Kt[5]*ft+Or,Ms(_n,fr,er,qn,zr,Or));return Pe&&xl(),Ds(ue),this},g.path=function(v){for(var P=0;P<v.length;P++){var Y=v[P],ne=Y.c;switch(Y.op){case"m":cf(ne[0],ne[1]);break;case"l":Jh(ne[0],ne[1]);break;case"c":Ms.apply(this,ne);break;case"h":xl()}}return this},g.__private__.rect=g.rect=function(v,P,Y,ne,ue){if(isNaN(v)||isNaN(P)||isNaN(Y)||isNaN(ne)||!Ts(ue))throw new Error("Invalid arguments passed to jsPDF.rect");return G===K&&(ne=-ne),$([M(T(v)),M(te(P)),M(T(Y)),M(T(ne)),"re"].join(" ")),Ds(ue),this},g.__private__.triangle=g.triangle=function(v,P,Y,ne,ue,Pe,ze){if(isNaN(v)||isNaN(P)||isNaN(Y)||isNaN(ne)||isNaN(ue)||isNaN(Pe)||!Ts(ze))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Y-v,ne-P],[ue-Y,Pe-ne],[v-ue,P-Pe]],v,P,[1,1],ze,!0),this},g.__private__.roundedRect=g.roundedRect=function(v,P,Y,ne,ue,Pe,ze){if(isNaN(v)||isNaN(P)||isNaN(Y)||isNaN(ne)||isNaN(ue)||isNaN(Pe)||!Ts(ze))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ft=4/3*(Math.SQRT2-1);return ue=Math.min(ue,.5*Y),Pe=Math.min(Pe,.5*ne),this.lines([[Y-2*ue,0],[ue*ft,0,ue,Pe-Pe*ft,ue,Pe],[0,ne-2*Pe],[0,Pe*ft,-ue*ft,Pe,-ue,Pe],[2*ue-Y,0],[-ue*ft,0,-ue,-Pe*ft,-ue,-Pe],[0,2*Pe-ne],[0,-Pe*ft,ue*ft,-Pe,ue,-Pe]],v+ue,P,[1,1],ze,!0),this},g.__private__.ellipse=g.ellipse=function(v,P,Y,ne,ue){if(isNaN(v)||isNaN(P)||isNaN(Y)||isNaN(ne)||!Ts(ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pe=4/3*(Math.SQRT2-1)*Y,ze=4/3*(Math.SQRT2-1)*ne;return cf(v+Y,P),Ms(v+Y,P-ze,v+Pe,P-ne,v,P-ne),Ms(v-Pe,P-ne,v-Y,P-ze,v-Y,P),Ms(v-Y,P+ze,v-Pe,P+ne,v,P+ne),Ms(v+Pe,P+ne,v+Y,P+ze,v+Y,P),Ds(ue),this},g.__private__.circle=g.circle=function(v,P,Y,ne){if(isNaN(v)||isNaN(P)||isNaN(Y)||!Ts(ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,P,Y,Y,ne)},g.setFont=function(v,P,Y){return Y&&(P=z(P,Y)),gt=rf(v,P,{disableWarning:!1}),this};var Cl=g.__private__.getFont=g.getFont=function(){return sn[rf.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var v,P,Y={};for(v in an)if(an.hasOwnProperty(v))for(P in Y[v]=[],an[v])an[v].hasOwnProperty(P)&&Y[v].push(P);return Y},g.addFont=function(v,P,Y,ne,ue){var Pe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pe.indexOf(arguments[3])!==-1?ue=arguments[3]:arguments[3]&&Pe.indexOf(arguments[3])==-1&&(Y=z(Y,ne)),tf.call(this,v,P,Y,ue=ue||"Identity-H")};var uo,yu=n.lineWidth||.200025,ep=g.__private__.getLineWidth=g.getLineWidth=function(){return yu},Gt=g.__private__.setLineWidth=g.setLineWidth=function(v){return yu=v,$(M(T(v))+" w"),this};g.__private__.setLineDash=St.API.setLineDash=St.API.setLineDashPattern=function(v,P){if(v=v||[],P=P||0,isNaN(P)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Y){return M(T(Y))}).join(" "),P=M(T(P)),$("["+v+"] "+P+" d"),this};var Ic=g.__private__.getLineHeight=g.getLineHeight=function(){return qe*uo};g.__private__.getLineHeight=g.getLineHeight=function(){return qe*uo};var i0=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(uo=v),this},o0=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return uo};i0(n.lineHeight);var La=g.__private__.getHorizontalCoordinate=function(v){return T(v)},Vi=g.__private__.getVerticalCoordinate=function(v){return G===j?v:Lt[H].mediaBox.topRightY-Lt[H].mediaBox.bottomLeftY-T(v)},s0=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(v){return M(La(v))},a0=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(v){return M(Vi(v))},ca=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return No(ca)},g.__private__.setStrokeColor=g.setDrawColor=function(v,P,Y,ne){return ca=ns({ch1:v,ch2:P,ch3:Y,ch4:ne,pdfColorType:"draw",precision:2}),$(ca),this};var Sc=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return No(Sc)},g.__private__.setFillColor=g.setFillColor=function(v,P,Y,ne){return Sc=ns({ch1:v,ch2:P,ch3:Y,ch4:ne,pdfColorType:"fill",precision:2}),$(Sc),this};var Ac=n.textColor||"0 g",El=g.__private__.getTextColor=g.getTextColor=function(){return No(Ac)};g.__private__.setTextColor=g.setTextColor=function(v,P,Y,ne){return Ac=ns({ch1:v,ch2:P,ch3:Y,ch4:ne,pdfColorType:"text",precision:3}),this};var Ro=n.charSpace,tp=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Ro||0)};g.__private__.setCharSpace=g.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ro=v,this};var Il=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(v){var P=g.CapJoinStyles[v];if(P===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Il=P,$(P+" J"),this};var Jn=0;g.__private__.setLineJoin=g.setLineJoin=function(v){var P=g.CapJoinStyles[v];if(P===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Jn=P,$(P+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(M(T(v))+" M"),this},g.GState=FC,g.setGState=function(v){(v=typeof v=="string"?Ft[Zt[v]]:np(null,v)).equals(or)||($("/"+v.id+" gs"),or=v)};var np=function(v,P){if(!v||!Zt[v]){var Y=!1;for(var ne in Ft)if(Ft.hasOwnProperty(ne)&&Ft[ne].equals(P)){Y=!0;break}if(Y)P=Ft[ne];else{var ue="GS"+(Object.keys(Ft).length+1).toString(10);Ft[ue]=P,P.id=ue}return v&&(Zt[v]=P.id),Sn.publish("addGState",P),P}};g.addGState=function(v,P){return np(v,P),this},g.saveGraphicsState=function(){return $("q"),Qn.push({key:gt,size:qe,color:Ac}),this},g.restoreGraphicsState=function(){$("Q");var v=Qn.pop();return gt=v.key,qe=v.size,Ac=v.color,or=null,this},g.setCurrentTransformationMatrix=function(v){return $(v.toString()+" cm"),this},g.comment=function(v){return $("#"+v),this};var Fa=function(v,P){var Y=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Y},set:function(Pe){isNaN(Pe)||(Y=parseFloat(Pe))}});var ne=P||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ne},set:function(Pe){isNaN(Pe)||(ne=parseFloat(Pe))}});var ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ue},set:function(Pe){ue=Pe.toString()}}),this},_u=function(v,P,Y,ne){Fa.call(this,v,P),this.type="rect";var ue=Y||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ue},set:function(ze){isNaN(ze)||(ue=parseFloat(ze))}});var Pe=ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pe},set:function(ze){isNaN(ze)||(Pe=parseFloat(ze))}}),this},Sl=function(){this.page=tn,this.currentPage=H,this.pages=Ue.slice(0),this.pagesContext=Lt.slice(0),this.x=It,this.y=kr,this.matrix=yn,this.width=bu(H),this.height=lf(H),this.outputDestination=We,this.id="",this.objectNumber=-1};Sl.prototype.restore=function(){tn=this.page,H=this.currentPage,Lt=this.pagesContext,Ue=this.pages,It=this.x,kr=this.y,yn=this.matrix,is(H,this.width),Va(H,this.height),We=this.outputDestination};var wu=function(v,P,Y,ne,ue){Es.push(new Sl),tn=H=0,Ue=[],It=v,kr=P,yn=ue,Oa([Y,ne])};for(var la in g.beginFormObject=function(v,P,Y,ne,ue){return wu(v,P,Y,ne,ue),this},g.endFormObject=function(v){return(function(P){if(es[P])Es.pop().restore();else{var Y=new Sl,ne="Xo"+(Object.keys(xi).length+1).toString(10);Y.id=ne,es[P]=ne,xi[ne]=Y,Sn.publish("addFormObject",Y),Es.pop().restore()}})(v),this},g.doFormObject=function(v,P){var Y=xi[es[v]];return $("q"),$(P.toString()+" cm"),$("/"+Y.id+" Do"),$("Q"),this},g.getFormObject=function(v){var P=xi[es[v]];return{x:P.x,y:P.y,width:P.width,height:P.height,matrix:P.matrix}},g.save=function(v,P){return v=v||"generated.pdf",(P=P||{}).returnPromise=P.returnPromise||!1,P.returnPromise===!1?(kh(gu(sa()),v),typeof kh.unload=="function"&&Yt.setTimeout&&setTimeout(kh.unload,911),this):new Promise(function(Y,ne){try{var ue=kh(gu(sa()),v);typeof kh.unload=="function"&&Yt.setTimeout&&setTimeout(kh.unload,911),Y(ue)}catch(Pe){ne(Pe.message)}})},St.API)St.API.hasOwnProperty(la)&&(la==="events"&&St.API.events.length?(function(v,P){var Y,ne,ue;for(ue=P.length-1;ue!==-1;ue--)Y=P[ue][0],ne=P[ue][1],v.subscribe.apply(v,[Y].concat(typeof ne=="function"?[ne]:ne))})(Sn,St.API.events):g[la]=St.API[la]);function bu(v){return Lt[v].mediaBox.topRightX-Lt[v].mediaBox.bottomLeftX}function is(v,P){Lt[v].mediaBox.topRightX=P+Lt[v].mediaBox.bottomLeftX}function lf(v){return Lt[v].mediaBox.topRightY-Lt[v].mediaBox.bottomLeftY}function Va(v,P){Lt[v].mediaBox.topRightY=P+Lt[v].mediaBox.bottomLeftY}var Oo=g.getPageWidth=function(v){return bu(v=v||H)/Xt},uf=g.setPageWidth=function(v,P){is(v,P*Xt)},ja=g.getPageHeight=function(v){return lf(v=v||H)/Xt},Al=g.setPageHeight=function(v,P){Va(v,P*Xt)};return g.internal={pdfEscape:lo,getStyle:Vn,getFont:Cl,getFontSize:st,getCharSpace:tp,getTextColor:El,getLineHeight:Ic,getLineHeightFactor:o0,getLineWidth:ep,write:Ke,getHorizontalCoordinate:La,getVerticalCoordinate:Vi,getCoordinateString:s0,getVerticalCoordinateString:a0,collections:{},newObject:Xn,newAdditionalObject:ts,newObjectDeferred:ui,newObjectDeferredBegin:Ci,getFilters:Po,putStream:Hi,events:Sn,scaleFactor:Xt,pageSize:{getWidth:function(){return Oo(H)},setWidth:function(v){uf(H,v)},getHeight:function(){return ja(H)},setHeight:function(v){Al(H,v)}},encryptionOptions:u,encryption:Kr,getEncryptor:function(v){return u!==null?Kr.encryptor(v,0):function(P){return P}},output:af,getNumberOfPages:nf,get pages(){return Ue},out:$,f2:b,f3:S,getPageInfo:Gi,getPageInfoByObjId:rs,getCurrentPageInfo:mu,getPDFVersion:E,Point:Fa,Rectangle:_u,Matrix:Mt,hasHotfix:ko},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Oo(H)},set:function(v){uf(H,v)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return ja(H)},set:function(v){Al(H,v)},enumerable:!0,configurable:!0}),(function(v){for(var P=0,Y=Ct.length;P<Y;P++){var ne=tf.call(this,v[P][0],v[P][1],v[P][2],Ct[P][3],!0);p===!1&&(m[ne]=!0);var ue=v[P][0].split("-");wl({id:ne,fontName:ue[0],fontStyle:ue[1]||""})}Sn.publish("addFonts",{fonts:sn,dictionary:an})}).call(g,Ct),gt="F1",oa(i,t),Sn.publish("initialized"),g}Nm.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Nm.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Nm.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Nm.prototype.processOwnerPassword=function(n,e){return pk(hk(e).substr(0,5),n)},Nm.prototype.encryptor=function(n,e){var t=hk(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return pk(t,r)}},FC.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Un(n)!==Un(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},St.API={events:[]},St.version="3.0.4";var Wr=St.API,vk=1,Lh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dm=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rn=function(n){return n.toFixed(2)},Hd=function(n){return n.toFixed(5)};Wr.__acroform__={};var xs=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},U9=function(n){return n*vk},hl=function(n){var e=new uz,t=mt.internal.getHeight(n)||0,r=mt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(rn(r)),Number(rn(t))],e},rle=Wr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},ile=Wr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},ole=Wr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ai=Wr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ole(n,e-1)},ci=Wr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return rle(n,e-1)},li=Wr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ile(n,e-1)},sle=Wr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(o+a)||0,c.upperRight_X=t(i+s)||0,c.upperRight_Y=r(o)||0,[Number(rn(c.lowerLeft_X)),Number(rn(c.lowerLeft_Y)),Number(rn(c.upperRight_X)),Number(rn(c.upperRight_Y))]},ale=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=gk(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+rn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=hl(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},gk=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(b){return b.split(`
`)}):i.map(function(b){return[b]});var o=t,s=mt.internal.getHeight(n)||0;s=s<0?-s:s;var a=mt.internal.getWidth(n)||0;a=a<0?-a:a;var c=function(b,S,T){if(b+1<i.length){var te=S+" "+i[b+1][0];return DC(te,n,T).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var l,u,p=DC("3",n,o).height,m=n.multiline?s-o:(s-p)/2,g=m+=2,x=0,E=0,D=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+DC(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var N="",K=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var G=!1;if(i[j].length!==1&&D!==i[j].length-1){if((p+2)*(K+2)+2>s)continue e;N+=i[j][D],G=!0,E=j,j--}else{N=(N+=i[j][D]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var oe=parseInt(j),fe=c(oe,N,o),z=j>=i.length-1;if(fe&&!z){N+=" ",D=0;continue}if(fe||z){if(z)E=oe;else if(n.multiline&&(p+2)*(K+2)+2>s)continue e}else{if(!n.multiline||(p+2)*(K+2)+2>s)continue e;E=oe}}for(var M="",I=x;I<=E;I++){var V=i[I];if(n.multiline){if(I===E){M+=V[D]+" ",D=(D+1)%V.length;continue}if(I===x){M+=V[V.length-1]+" ";continue}}M+=V[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,u=DC(M,n,o).width,n.textAlign){case"right":l=a-u-2;break;case"center":l=(a-u)/2;break;default:l=2}e+=rn(l)+" "+rn(g)+` Td
`,e+="("+Lh(M)+`) Tj
`,e+=-rn(l)+` 0 Td
`,g=-(o+2),u=0,x=G?E:E+1,K++,N=""}break}return r.text=e,r.fontSize=o,r},DC=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},cle={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},lle=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},ule=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(vc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(cle)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");vk=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new dz,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&lle(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],c=[],l=a.Rect;if(a.Rect&&(a.Rect=sle(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=mt.createDefaultAppearanceStream(a),Un(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=l,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=ale(a);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var p="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var g=a.appearanceStreamContent[m];if(p+="/"+m+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var s in g)if(g.hasOwnProperty(s)){var x=g[s];typeof x=="function"&&(x=x.call(i,a)),p+="/"+s+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=g)=="function"&&(x=x.call(i,a)),p+="/"+s+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}o&&(function(E,D){for(var N in E)if(E.hasOwnProperty(N)){var K=N,j=E[N];D.internal.newObjectDeferredBegin(j.objId,!0),Un(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete E[K]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},lz=Wr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Un(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Lh(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ck=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Lh(r(n))+")"},pl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};pl.prototype.toString=function(){return this.objId+" 0 R"},pl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},pl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:lz(i,this.objId,this.scope)}):i instanceof pl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var uz=function(){pl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};xs(uz,pl);var dz=function(){pl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Lh(t(n))+")"}},set:function(t){n=t}})};xs(dz,pl);var vc=function n(){pl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ai(e,3)},set:function(N){N?this.F=ci(e,3):this.F=li(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');t=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof VC)return;o="FieldObject"+n.FieldNum++}var N=function(K){return K};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+Lh(N(o))+")"},set:function(N){o=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(N){o=N}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(N){s=N}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(N){a=N}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/vk:l},set:function(N){l=N}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(N){u=N}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof VC||this instanceof Oh))return ck(p,this.objId,this.scope)},set:function(N){N=N.toString(),p=N}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof $i==0?ck(m,this.objId,this.scope):m},set:function(N){N=N.toString(),m=this instanceof $i==0?N.substr(0,1)==="("?Dm(N.substr(1,N.length-2)):Dm(N):N}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i==1?Dm(m.substr(1,m.length-1)):m},set:function(N){N=N.toString(),m=this instanceof $i==1?"/"+N:N}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof $i==0?ck(g,this.objId,this.scope):g},set:function(N){N=N.toString(),g=this instanceof $i==0?N.substr(0,1)==="("?Dm(N.substr(1,N.length-2)):Dm(N):N}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i==1?Dm(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof $i==1?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(N){N=!!N,E=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(N){x=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,1)},set:function(N){N?this.Ff=ci(this.Ff,1):this.Ff=li(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,2)},set:function(N){N?this.Ff=ci(this.Ff,2):this.Ff=li(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,3)},set:function(N){N?this.Ff=ci(this.Ff,3):this.Ff=li(this.Ff,3)}});var D=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(D!==null)return D},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');D=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(D){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:D=2;break;case"center":case 1:D=1;break;default:D=0}}})};xs(vc,pl);var Rm=function(){vc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lz(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,s,a){a||(a=1);for(var c,l=[];c=s.exec(o);)l.push(c[a]);return l})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,18)},set:function(t){t?this.Ff=ci(this.Ff,18):this.Ff=li(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ci(this.Ff,19):this.Ff=li(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,20)},set:function(t){t?(this.Ff=ci(this.Ff,20),e.sort()):this.Ff=li(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,22)},set:function(t){t?this.Ff=ci(this.Ff,22):this.Ff=li(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(t){t?this.Ff=ci(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,27)},set:function(t){t?this.Ff=ci(this.Ff,27):this.Ff=li(this.Ff,27)}}),this.hasAppearanceStream=!1};xs(Rm,vc);var Om=function(){Rm.call(this),this.fontName="helvetica",this.combo=!1};xs(Om,Rm);var Lm=function(){Om.call(this),this.combo=!0};xs(Lm,Om);var kC=function(){Lm.call(this),this.edit=!0};xs(kC,Lm);var $i=function(){vc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,15)},set:function(t){t?this.Ff=ci(this.Ff,15):this.Ff=li(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,16)},set:function(t){t?this.Ff=ci(this.Ff,16):this.Ff=li(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,17)},set:function(t){t?this.Ff=ci(this.Ff,17):this.Ff=li(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(t){t?this.Ff=ci(this.Ff,26):this.Ff=li(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Lh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Un(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};xs($i,vc);var RC=function(){$i.call(this),this.pushButton=!0};xs(RC,$i);var Fm=function(){$i.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};xs(Fm,$i);var VC=function(){var n,e;vc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+Lh(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Un(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};xs(VC,vc),Fm.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Fm.prototype.createOption=function(n){var e=new VC;return e.Parent=this,e.optionName=n,this.Kids.push(e),dle.call(this.scope,e),e};var OC=function(){$i.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mt.CheckBox.createAppearanceStream()};xs(OC,$i);var Oh=function(){vc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,13)},set:function(e){e?this.Ff=ci(this.Ff,13):this.Ff=li(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,21)},set:function(e){e?this.Ff=ci(this.Ff,21):this.Ff=li(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(e){e?this.Ff=ci(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,24)},set:function(e){e?this.Ff=ci(this.Ff,24):this.Ff=li(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,25)},set:function(e){e?this.Ff=ci(this.Ff,25):this.Ff=li(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(e){e?this.Ff=ci(this.Ff,26):this.Ff=li(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};xs(Oh,vc);var LC=function(){Oh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,14)},set:function(n){n?this.Ff=ci(this.Ff,14):this.Ff=li(this.Ff,14)}}),this.password=!0};xs(LC,Oh);var mt={CheckBox:{createAppearanceStream:function(){return{N:{On:mt.CheckBox.YesNormal},D:{On:mt.CheckBox.YesPushDown,Off:mt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=gk(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+rn(mt.internal.getWidth(n))+" "+rn(mt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+rn(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=hl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=mt.internal.getHeight(n),s=mt.internal.getWidth(n),a=gk(n,n.caption);return i.push("1 g"),i.push("0 0 "+rn(s)+" "+rn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+rn(s-1)+" "+rn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+rn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(mt.internal.getWidth(n))+" "+rn(mt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:mt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=mt.RadioButton.Circle.YesNormal,e.D[n]=mt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=hl(n);e.scope=n.scope;var t=[],r=mt.internal.getWidth(n)<=mt.internal.getHeight(n)?mt.internal.getWidth(n)/4:mt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=mt.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Hd(mt.internal.getWidth(n)/2)+" "+Hd(mt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=[],r=mt.internal.getWidth(n)<=mt.internal.getHeight(n)?mt.internal.getWidth(n)/4:mt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*mt.internal.Bezier_C).toFixed(5)),s=Number((r*mt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hd(mt.internal.getWidth(n)/2)+" "+Hd(mt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Hd(mt.internal.getWidth(n)/2)+" "+Hd(mt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=[],r=mt.internal.getWidth(n)<=mt.internal.getHeight(n)?mt.internal.getWidth(n)/4:mt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*mt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hd(mt.internal.getWidth(n)/2)+" "+Hd(mt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:mt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=mt.RadioButton.Cross.YesNormal,e.D[n]=mt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=hl(n);e.scope=n.scope;var t=[],r=mt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+rn(mt.internal.getWidth(n)-2)+" "+rn(mt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(rn(r.x1.x)+" "+rn(r.x1.y)+" m"),t.push(rn(r.x2.x)+" "+rn(r.x2.y)+" l"),t.push(rn(r.x4.x)+" "+rn(r.x4.y)+" m"),t.push(rn(r.x3.x)+" "+rn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=mt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+rn(mt.internal.getWidth(n))+" "+rn(mt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+rn(mt.internal.getWidth(n)-2)+" "+rn(mt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(rn(t.x1.x)+" "+rn(t.x1.y)+" m"),r.push(rn(t.x2.x)+" "+rn(t.x2.y)+" l"),r.push(rn(t.x4.x)+" "+rn(t.x4.y)+" m"),r.push(rn(t.x3.x)+" "+rn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(mt.internal.getWidth(n))+" "+rn(mt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};mt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=mt.internal.getWidth(n),t=mt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},mt.internal.getWidth=function(n){var e=0;return Un(n)==="object"&&(e=U9(n.Rect[2])),e},mt.internal.getHeight=function(n){var e=0;return Un(n)==="object"&&(e=U9(n.Rect[3])),e};var dle=Wr.addField=function(n){if(ule(this,n),!(n instanceof vc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Wr.AcroFormChoiceField=Rm,Wr.AcroFormListBox=Om,Wr.AcroFormComboBox=Lm,Wr.AcroFormEditBox=kC,Wr.AcroFormButton=$i,Wr.AcroFormPushButton=RC,Wr.AcroFormRadioButton=Fm,Wr.AcroFormCheckBox=OC,Wr.AcroFormTextField=Oh,Wr.AcroFormPasswordField=LC,Wr.AcroFormAppearance=mt,Wr.AcroForm={ChoiceField:Rm,ListBox:Om,ComboBox:Lm,EditBox:kC,Button:$i,PushButton:RC,RadioButton:Fm,CheckBox:OC,TextField:Oh,PasswordField:LC,Appearance:mt},St.AcroForm={ChoiceField:Rm,ListBox:Om,ComboBox:Lm,EditBox:kC,Button:$i,PushButton:RC,RadioButton:Fm,CheckBox:OC,TextField:Oh,PasswordField:LC,Appearance:mt};var _Re=St.AcroForm;function fz(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(b,S){var T,te,_e,Te,be,de=t;if((S=S||t)==="RGBA"||b.data!==void 0&&b.data instanceof Uint8ClampedArray&&"height"in b&&"width"in b)return"RGBA";if(fe(b))for(be in r)for(_e=r[be],T=0;T<_e.length;T+=1){for(Te=!0,te=0;te<_e[T].length;te+=1)if(_e[T][te]!==void 0&&_e[T][te]!==b[te]){Te=!1;break}if(Te===!0){de=be;break}}else for(be in r)for(_e=r[be],T=0;T<_e.length;T+=1){for(Te=!0,te=0;te<_e[T].length;te+=1)if(_e[T][te]!==void 0&&_e[T][te]!==b.charCodeAt(te)){Te=!1;break}if(Te===!0){de=be;break}}return de===t&&S!==t&&(de=S),de},o=function b(S){for(var T=this.internal.write,te=this.internal.putStream,_e=(0,this.internal.getFilters)();_e.indexOf("FlateEncode")!==-1;)_e.splice(_e.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var Te=[];if(Te.push({key:"Type",value:"/XObject"}),Te.push({key:"Subtype",value:"/Image"}),Te.push({key:"Width",value:S.width}),Te.push({key:"Height",value:S.height}),S.colorSpace===N.INDEXED?Te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(Te.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===N.DEVICE_CMYK&&Te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Te.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&Te.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)&&S.transparency.length>0){for(var be="",de=0,Ae=S.transparency.length;de<Ae;de++)be+=S.transparency[de]+" "+S.transparency[de]+" ";Te.push({key:"Mask",value:"["+be+"]"})}S.sMask!==void 0&&Te.push({key:"SMask",value:S.objectId+1+" 0 R"});var Be=S.filter!==void 0?["/"+S.filter]:void 0;if(te({data:S.data,additionalKeyValues:Te,alreadyAppliedFilters:Be,objectId:S.objectId}),T("endobj"),"sMask"in S&&S.sMask!==void 0){var Re,O=(Re=S.sMaskBitsPerComponent)!==null&&Re!==void 0?Re:S.bitsPerComponent,H={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:S.sMask};"filter"in S&&(H.decodeParameters="/Predictor ".concat(S.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(S.width),H.filter=S.filter),b.call(this,H)}if(S.colorSpace===N.INDEXED){var J=this.internal.newObject();te({data:M(new Uint8Array(S.palette)),objectId:J}),T("endobj")}},s=function(){var b=this.internal.collections[e+"images"];for(var S in b)o.call(this,b[S])},a=function(){var b,S=this.internal.collections[e+"images"],T=this.internal.write;for(var te in S)T("/I"+(b=S[te]).index,b.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var b=this.internal.collections[e+"images"];return c.call(this),b},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(b){return typeof n["process"+b.toUpperCase()]=="function"},m=function(b){return Un(b)==="object"&&b.nodeType===1},g=function(b,S){if(b.nodeName==="IMG"&&b.hasAttribute("src")){var T=""+b.getAttribute("src");if(T.indexOf("data:image/")===0)return PC(unescape(T).split("base64,").pop());var te=n.loadFile(T,!0);if(te!==void 0)return te}if(b.nodeName==="CANVAS"){if(b.width===0||b.height===0)throw new Error("Given canvas must have data. Canvas width: "+b.width+", height: "+b.height);var _e;switch(S){case"PNG":_e="image/png";break;case"WEBP":_e="image/webp";break;default:_e="image/jpeg"}return PC(b.toDataURL(_e,1).split("base64,").pop())}},x=function(b){var S=this.internal.collections[e+"images"];if(S){for(var T in S)if(b===S[T].alias)return S[T]}},E=function(b,S,T){return b||S||(b=-96,S=-96),b<0&&(b=-1*T.width*72/b/this.internal.scaleFactor),S<0&&(S=-1*T.height*72/S/this.internal.scaleFactor),b===0&&(b=S*T.width/T.height),S===0&&(S=b*T.height/T.width),[b,S]},D=function(b,S,T,te,_e,Te){var be=E.call(this,T,te,_e),de=this.internal.getCoordinateString,Ae=this.internal.getVerticalCoordinateString,Be=l.call(this);if(T=be[0],te=be[1],Be[_e.index]=_e,Te){Te*=Math.PI/180;var Re=Math.cos(Te),O=Math.sin(Te),H=function(re){return re.toFixed(4)},J=[H(Re),H(O),H(-1*O),H(Re),0,0,"cm"]}this.internal.write("q"),Te?(this.internal.write([1,"0","0",1,de(b),Ae(S+te),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([de(T),"0","0",de(te),"0","0","cm"].join(" "))):this.internal.write([de(T),"0","0",de(te),de(b),Ae(S+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+_e.index+" Do"),this.internal.write("Q")},N=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var K=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=n.__addimage__.sHashCode=function(b){var S,T,te=0;if(typeof b=="string")for(T=b.length,S=0;S<T;S++)te=(te<<5)-te+b.charCodeAt(S),te|=0;else if(fe(b))for(T=b.byteLength/2,S=0;S<T;S++)te=(te<<5)-te+b[S],te|=0;return te},G=n.__addimage__.validateStringAsBase64=function(b){(b=b||"").toString().trim();var S=!0;return b.length===0&&(S=!1),b.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(b.substr(0,b.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(b.substr(-2))===!1&&(S=!1),S},oe=n.__addimage__.extractImageFromDataUrl=function(b){if(b==null||!(b=b.trim()).startsWith("data:"))return null;var S=b.indexOf(",");return S<0?null:b.substring(0,S).trim().endsWith("base64")?b.substring(S+1):null};n.__addimage__.isArrayBuffer=function(b){return b instanceof ArrayBuffer};var fe=n.__addimage__.isArrayBufferView=function(b){return b instanceof Int8Array||b instanceof Uint8Array||b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array},z=n.__addimage__.binaryStringToUint8Array=function(b){for(var S=b.length,T=new Uint8Array(S),te=0;te<S;te++)T[te]=b.charCodeAt(te);return T},M=n.__addimage__.arrayBufferToBinaryString=function(b){for(var S="",T=fe(b)?b:new Uint8Array(b),te=0;te<T.length;te+=8192)S+=String.fromCharCode.apply(null,T.subarray(te,te+8192));return S};n.addImage=function(){var b,S,T,te,_e,Te,be,de,Ae;if(typeof arguments[1]=="number"?(S=t,T=arguments[1],te=arguments[2],_e=arguments[3],Te=arguments[4],be=arguments[5],de=arguments[6],Ae=arguments[7]):(S=arguments[1],T=arguments[2],te=arguments[3],_e=arguments[4],Te=arguments[5],be=arguments[6],de=arguments[7],Ae=arguments[8]),Un(b=arguments[0])==="object"&&!m(b)&&"imageData"in b){var Be=b;b=Be.imageData,S=Be.format||S||t,T=Be.x||T||0,te=Be.y||te||0,_e=Be.w||Be.width||_e,Te=Be.h||Be.height||Te,be=Be.alias||be,de=Be.compression||de,Ae=Be.rotation||Be.angle||Ae}var Re=this.internal.getFilters();if(de===void 0&&Re.indexOf("FlateEncode")!==-1&&(de="SLOW"),isNaN(T)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var O=I.call(this,b,S,be,de);return D.call(this,T,te,_e,Te,O,Ae),this};var I=function(b,S,T,te){var _e,Te,be;if(typeof b=="string"&&i(b)===t){b=unescape(b);var de=V(b,!1);(de!==""||(de=n.loadFile(b,!0))!==void 0)&&(b=de)}if(m(b)&&(b=g(b,S)),S=i(b,S),!p(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((be=T)==null||be.length===0)&&(T=(function(Ae){return typeof Ae=="string"||fe(Ae)?j(Ae):fe(Ae.data)?j(Ae.data):null})(b)),(_e=x.call(this,T))||(b instanceof Uint8Array||S==="RGBA"||(Te=b,b=z(b)),_e=this["process"+S.toUpperCase()](b,u.call(this),T,(function(Ae){return Ae&&typeof Ae=="string"&&(Ae=Ae.toUpperCase()),Ae in n.image_compression?Ae:K.NONE})(te),Te)),!_e)throw new Error("An unknown error occurred whilst processing the image.");return _e},V=n.__addimage__.convertBase64ToBinaryString=function(b,S){S=typeof S!="boolean"||S;var T,te="";if(typeof b=="string"){var _e;T=(_e=oe(b))!==null&&_e!==void 0?_e:b;try{te=PC(T)}catch(Te){if(S)throw G(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};n.getImageProperties=function(b){var S,T,te="";if(m(b)&&(b=g(b)),typeof b=="string"&&i(b)===t&&((te=V(b,!1))===""&&(te=n.loadFile(b)||""),b=te),T=i(b),!p(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(b instanceof Uint8Array||(b=z(b)),!(S=this["process"+T.toUpperCase()](b)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=T,S}})(St.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};St.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,u=!1,p=0;p<l.length&&!u;p++)switch((r=l[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<l.length;m++){r=l[m];var g=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),D=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(E.objId),K=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(N(r.contents))+")",o+=" /Popup "+D.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+g(N(K))+") >>",E.content=o;var j=E.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(o+=" /Open true"),o+=" >>",D.content=o,this.internal.write(E.objId,"0 R",D.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var G=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(x(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var oe=this.annotations._nameMap[r.options.name];r.options.pageNumber=oe.page,r.options.top=oe.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var fe=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+fe+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(t),y:l(r),w:c(t+i),h:l(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,c=this.getTextWidth(t),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var u=this.splitTextToSize(t,a).length;s=Math.ceil(l*u)}else a=c,s=l;return this.text(t,r,i,o),i+=.2*l,o.align==="center"&&(r-=c/2),o.align==="right"&&(r-=c),this.link(r,i-l,a,s,o),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(St.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=n.__arabicParser__.isArabicEndLetter=function(E){return s(E)&&o(E)&&e[E.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(E){return s(E)&&i.indexOf(E.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return s(E)&&o(E)&&e[E.charCodeAt(0)].length>=1};var l=n.__arabicParser__.arabicLetterHasFinalForm=function(E){return s(E)&&o(E)&&e[E.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(E){return s(E)&&o(E)&&e[E.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(E){return s(E)&&o(E)&&e[E.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(E){var D=0,N=t,K="",j=0;for(D=0;D<E.length;D+=1)N[E.charCodeAt(D)]!==void 0?(j++,typeof(N=N[E.charCodeAt(D)])=="number"&&(K+=String.fromCharCode(N),N=t,j=0),D===E.length-1&&(N=t,K+=E.charAt(D-(j-1)),D-=j-1,j=0)):(N=t,K+=E.charAt(D-j),D-=j,j=0);return K};n.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(E,D,N){return s(E)?o(E)===!1?-1:!l(E)||!s(D)&&!s(N)||!s(N)&&a(D)||a(E)&&!s(D)||a(E)&&c(D)||a(E)&&a(D)?0:u(E)&&s(D)&&!a(D)&&s(N)&&l(N)?3:a(E)||!s(N)?1:2:-1},g=function(E){var D=0,N=0,K=0,j="",G="",oe="",fe=(E=E||"").split("\\s+"),z=[];for(D=0;D<fe.length;D+=1){for(z.push(""),N=0;N<fe[D].length;N+=1)j=fe[D][N],G=fe[D][N-1],oe=fe[D][N+1],s(j)?(K=m(j,G,oe),z[D]+=K!==-1?String.fromCharCode(e[j.charCodeAt(0)][K]):j):z[D]+=j;z[D]=p(z[D])}return z.join(" ")},x=n.__arabicParser__.processArabic=n.processArabic=function(){var E,D=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(D)){var K=0;for(N=[],K=0;K<D.length;K+=1)Array.isArray(D[K])?N.push([g(D[K][0]),D[K][1],D[K][2]]):N.push([g(D[K])]);E=N}else E=g(D);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};n.events.push(["preProcessText",x])})(St.API),St.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(St.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(E){u=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,l){r.call(this);var u=(l=l||{}).fontSize||this.getFontSize(),p=l.font||this.getFont(),m=l.scaleFactor||this.internal.scaleFactor,g=0,x=0,E=0,D=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var N=l.maxWidth;N>0?typeof c=="string"?c=this.splitTextToSize(c,N):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,G){return j.concat(D.splitTextToSize(G,N))},[])):c=Array.isArray(c)?c:[c];for(var K=0;K<c.length;K++)g<(E=this.getStringUnitWidth(c[K],{font:p})*u)&&(g=E);return g!==0&&(x=c.length),{w:g/=m,h:Math.max((x*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var l=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===c.lineNumber?(c.x=(l.x||0)+(l.width||0),c.y=l.y||0):l.y+l.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,g&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=l.y+l.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};n.table=function(c,l,u,p,m){if(r.call(this),!u)throw new Error("No data for PDF table.");var g,x,E,D,N=[],K=[],j=[],G={},oe={},fe=[],z=[],M=(m=m||{}).autoSize||!1,I=m.printHeaders!==!1,V=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,b=m.margins||Object.assign({width:this.getPageWidth()},e),S=typeof m.padding=="number"?m.padding:3,T=m.headerBackgroundColor||"#c8c8c8",te=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=b,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=te,this.setFontSize(V),p==null)K=N=Object.keys(u[0]),j=N.map(function(){return"left"});else if(Array.isArray(p)&&Un(p[0])==="object")for(N=p.map(function(Be){return Be.name}),K=p.map(function(Be){return Be.prompt||Be.name||""}),j=p.map(function(Be){return Be.align||"left"}),g=0;g<p.length;g+=1)oe[p[g].name]=.7499990551181103*p[g].width;else Array.isArray(p)&&typeof p[0]=="string"&&(K=N=p,j=N.map(function(){return"left"}));if(M||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<N.length;g+=1){for(G[D=N[g]]=u.map(function(Be){return Be[D]}),this.setFont(void 0,"bold"),fe.push(this.getTextDimensions(K[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=G[D],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)fe.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);oe[D]=Math.max.apply(null,fe)+S+S,fe=[]}if(I){var _e={};for(g=0;g<N.length;g+=1)_e[N[g]]={},_e[N[g]].text=K[g],_e[N[g]].align=j[g];var Te=a.call(this,_e,oe);z=N.map(function(Be){return new o(c,l,oe[Be],Te,_e[Be].text,void 0,_e[Be].align)}),this.setTableHeaderRow(z),this.printHeaderRow(1,!1)}var be=p.reduce(function(Be,Re){return Be[Re.name]=Re.align,Be},{});for(g=0;g<u.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:u[g]},this);var de=a.call(this,u[g],oe);for(E=0;E<N.length;E+=1){var Ae=u[g][N[E]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:E,data:Ae},this),s.call(this,new o(c,l,oe[N[E]],de,Ae,g+2,be[N[E]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=l,this};var a=function(c,l){var u=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(g){var x=c[g];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,l[g]-u-u)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/m+u+u},this).reduce(function(g,x){return Math.max(g,x)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,l){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){u=this.internal.__cell__.tableHeaderRow[g].clone(),l&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}})(St.API);var hz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},pz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],mk=fz(pz),gz=[100,200,300,400,500,600,700,800,900],fle=fz(gz);function lk(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return hz[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof mk[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function z9(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var hle={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},q9={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function $9(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function H9(n){return n.trimLeft()}function ple(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function gle(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var MC,G9,W9,Mm,NC,K9,Y9,Q9,uk=["times"];function Z9(n,e,t,r,i){var o=4,s=J9;switch(i){case St.API.image_compression.FAST:o=1,s=X9;break;case St.API.image_compression.MEDIUM:o=6,s=ez;break;case St.API.image_compression.SLOW:o=9,s=tz}n=(function(c,l,u,p){for(var m,g=c.length/l,x=new Uint8Array(c.length+g),E=[mle,X9,J9,ez,tz],D=0;D<g;D+=1){var N=D*l,K=c.subarray(N,N+l);if(p)x.set(p(K,u,m),N+D);else{for(var j=E.length,G=[],oe=0;oe<j;oe+=1)G[oe]=E[oe](K,u,m);var fe=yle(G.concat());x.set(G[fe],N+D)}m=K}return x})(n,e,Math.ceil(t*r/8),s);var a=sC(n,{level:o});return St.API.__addimage__.arrayBufferToBinaryString(a)}function mle(n){var e=Array.apply([],n);return e.unshift(0),e}function X9(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function J9(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var s=t&&t[o]||0;i[o+1]=n[o]-s+256&255}return i}function ez(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var s=n[o-e]||0,a=t&&t[o]||0;i[o+1]=n[o]+256-(s+a>>>1)&255}return i}function tz(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var s=vle(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-s+256&255}return i}function vle(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function yle(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function dk(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),s=(1<<t)-1;return mz(n,i)>>o&s}function nz(n,e,t,r){var i=t*r,o=Math.floor(i/8),s=16-(i-8*o+r),a=(1<<r)-1,c=(e&a)<<s;(function(l,u,p){if(u+1<l.byteLength)l.setUint16(u,p,!1);else{var m=p>>8&255;l.setUint8(u,m)}})(n,o,mz(n,o)&~(a<<s)&65535|c)}function mz(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function _le(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<1+(7&i);n[e++],n[e++];var a=null,c=null;o&&(a=e,c=s,e+=3*s);var l=!0,u=[],p=0,m=null,g=0,x=null;for(this.width=t,this.height=r;l&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,x=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=n[e++];p=n[e++]|n[e++]<<8,m=n[e++],1&E||(m=null),g=E>>2&7,e++;break;case 254:for(;;){if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var D=n[e++]|n[e++]<<8,N=n[e++]|n[e++]<<8,K=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,G=n[e++],oe=G>>6&1,fe=1<<1+(7&G),z=a,M=c,I=!1;G>>7&&(I=!0,z=e,M=fe,e+=3*fe);var V=e;for(e++;;){var b;if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}u.push({x:D,y:N,width:K,height:j,has_local_palette:I,palette_offset:z,palette_size:M,data_offset:V,data_length:e-V,transparent_index:m,interlaced:!!oe,delay:p,disposal:g});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return x},this.frameInfo=function(S){if(S<0||S>=u.length)throw new Error("Frame index out of range.");return u[S]},this.decodeAndBlitFrameBGRA=function(S,T){var te=this.frameInfo(S),_e=te.width*te.height,Te=new Uint8Array(_e);rz(n,te.data_offset,Te,_e);var be=te.palette_offset,de=te.transparent_index;de===null&&(de=256);var Ae=te.width,Be=t-Ae,Re=Ae,O=4*(te.y*t+te.x),H=4*((te.y+te.height)*t+te.x),J=O,re=4*Be;te.interlaced===!0&&(re+=4*t*7);for(var ae=8,he=0,Ee=Te.length;he<Ee;++he){var ye=Te[he];if(Re===0&&(Re=Ae,(J+=re)>=H&&(re=4*Be+4*t*(ae-1),J=O+(Ae+Be)*(ae<<1),ae>>=1)),ye===de)J+=4;else{var De=n[be+3*ye],Ue=n[be+3*ye+1],Xe=n[be+3*ye+2];T[J++]=Xe,T[J++]=Ue,T[J++]=De,T[J++]=255}--Re}},this.decodeAndBlitFrameRGBA=function(S,T){var te=this.frameInfo(S),_e=te.width*te.height,Te=new Uint8Array(_e);rz(n,te.data_offset,Te,_e);var be=te.palette_offset,de=te.transparent_index;de===null&&(de=256);var Ae=te.width,Be=t-Ae,Re=Ae,O=4*(te.y*t+te.x),H=4*((te.y+te.height)*t+te.x),J=O,re=4*Be;te.interlaced===!0&&(re+=4*t*7);for(var ae=8,he=0,Ee=Te.length;he<Ee;++he){var ye=Te[he];if(Re===0&&(Re=Ae,(J+=re)>=H&&(re=4*Be+4*t*(ae-1),J=O+(Ae+Be)*(ae<<1),ae>>=1)),ye===de)J+=4;else{var De=n[be+3*ye],Ue=n[be+3*ye+1],Xe=n[be+3*ye+2];T[J++]=De,T[J++]=Ue,T[J++]=Xe,T[J++]=255}--Re}}}function rz(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,c=i+1,l=(1<<c)-1,u=0,p=0,m=0,g=n[e++],x=new Int32Array(4096),E=null;;){for(;u<16&&g!==0;)p|=n[e++]<<u,u+=8,g===1?g=n[e++]:--g;if(u<c)break;var D=p&l;if(p>>=c,u-=c,D!==o){if(D===s)break;for(var N=D<a?D:E,K=0,j=N;j>o;)j=x[j]>>8,++K;var G=j;if(m+K+(N!==D?1:0)>r)return void dr.log("Warning, gif stream longer than expected.");t[m++]=G;var oe=m+=K;for(N!==D&&(t[m++]=G),j=N;K--;)j=x[j],t[--oe]=255&j,j>>=8;E!==null&&a<4096&&(x[a++]=E<<8|G,a>=l+1&&c<12&&(++c,l=l<<1|1)),E=D}else a=s+1,l=(1<<(c=i+1))-1,E=null}return m!==r&&dr.log("Warning, gif stream shorter than expected."),t}function fk(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),p=new Array(65535),m=new Array(65535),g=new Array(64),x=new Array(64),E=[],D=0,N=7,K=new Array(64),j=new Array(64),G=new Array(64),oe=new Array(256),fe=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],b=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],_e=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Te(O,H){for(var J=0,re=0,ae=new Array,he=1;he<=16;he++){for(var Ee=1;Ee<=O[he];Ee++)ae[H[re]]=[],ae[H[re]][0]=J,ae[H[re]][1]=he,re++,J++;J*=2}return ae}function be(O){for(var H=O[0],J=O[1]-1;J>=0;)H&1<<J&&(D|=1<<N),J--,--N<0&&(D==255?(de(255),de(0)):de(D),N=7,D=0)}function de(O){E.push(O)}function Ae(O){de(O>>8&255),de(255&O)}function Be(O,H,J,re,ae){for(var he,Ee=ae[0],ye=ae[240],De=(function(qe,At){var st,vt,Et,vn,Qt,Ut,Rt,Ot,gt,Xt,It=0;for(gt=0;gt<8;++gt){st=qe[It],vt=qe[It+1],Et=qe[It+2],vn=qe[It+3],Qt=qe[It+4],Ut=qe[It+5],Rt=qe[It+6];var kr=st+(Ot=qe[It+7]),yn=st-Ot,sn=vt+Rt,an=vt-Rt,Qn=Et+Ut,Nt=Et-Ut,Zn=vn+Qt,Ft=vn-Qt,Zt=kr+Zn,or=kr-Zn,tn=sn+Qn,Lt=sn-Qn;qe[It]=Zt+tn,qe[It+4]=Zt-tn;var Sn=.707106781*(Lt+or);qe[It+2]=or+Sn,qe[It+6]=or-Sn;var Do=.382683433*((Zt=Ft+Nt)-(Lt=an+yn)),xi=.5411961*Zt+Do,es=1.306562965*Lt+Do,Es=.707106781*(tn=Nt+an),Mt=yn+Es,ia=yn-Es;qe[It+5]=ia+xi,qe[It+3]=ia-xi,qe[It+1]=Mt+es,qe[It+7]=Mt-es,It+=8}for(It=0,gt=0;gt<8;++gt){st=qe[It],vt=qe[It+8],Et=qe[It+16],vn=qe[It+24],Qt=qe[It+32],Ut=qe[It+40],Rt=qe[It+48];var vr=st+(Ot=qe[It+56]),Mo=st-Ot,Fi=vt+Rt,Xn=vt-Rt,ui=Et+Ut,Ci=Et-Ut,ts=vn+Qt,wc=vn-Qt,Is=vr+ts,No=vr-ts,ns=Fi+ui,Po=Fi-ui;qe[It]=Is+ns,qe[It+32]=Is-ns;var Hi=.707106781*(Po+No);qe[It+16]=No+Hi,qe[It+48]=No-Hi;var co=.382683433*((Is=wc+Ci)-(Po=Xn+Mo)),Ss=.5411961*Is+co,bc=1.306562965*Po+co,xc=.707106781*(ns=Ci+Xn),Cc=Mo+xc,_l=Mo-xc;qe[It+40]=_l+Ss,qe[It+24]=_l-Ss,qe[It+8]=Cc+bc,qe[It+56]=Cc-bc,It++}for(gt=0;gt<64;++gt)Xt=qe[gt]*At[gt],g[gt]=Xt>0?Xt+.5|0:Xt-.5|0;return g})(O,H),Ue=0;Ue<64;++Ue)x[z[Ue]]=De[Ue];var Xe=x[0]-J;J=x[0],Xe==0?be(re[0]):(be(re[m[he=32767+Xe]]),be(p[he]));for(var We=63;We>0&&x[We]==0;)We--;if(We==0)return be(Ee),J;for(var ot,$=1;$<=We;){for(var Ke=$;x[$]==0&&$<=We;)++$;var kt=$-Ke;if(kt>=16){ot=kt>>4;for(var Ct=1;Ct<=ot;++Ct)be(ye);kt&=15}he=32767+x[$],be(ae[(kt<<4)+m[he]]),be(p[he]),$++}return We!=63&&be(Ee),J}function Re(O){O=Math.min(Math.max(O,1),100),o!=O&&((function(H){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var ae=s((J[re]*H+50)/100);ae=Math.min(Math.max(ae,1),255),a[z[re]]=ae}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var ye=s((he[Ee]*H+50)/100);ye=Math.min(Math.max(ye,1),255),c[z[Ee]]=ye}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ue=0,Xe=0;Xe<8;Xe++)for(var We=0;We<8;We++)l[Ue]=1/(a[z[Ue]]*De[Xe]*De[We]*8),u[Ue]=1/(c[z[Ue]]*De[Xe]*De[We]*8),Ue++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),o=O)}this.encode=function(O,H){H&&Re(H),E=new Array,D=0,N=7,Ae(65496),Ae(65504),Ae(16),de(74),de(70),de(73),de(70),de(0),de(1),de(1),de(0),Ae(1),Ae(1),de(0),de(0),(function(){Ae(65499),Ae(132),de(0);for(var vt=0;vt<64;vt++)de(a[vt]);de(1);for(var Et=0;Et<64;Et++)de(c[Et])})(),(function(vt,Et){Ae(65472),Ae(17),de(8),Ae(Et),Ae(vt),de(3),de(1),de(17),de(0),de(2),de(17),de(1),de(3),de(17),de(1)})(O.width,O.height),(function(){Ae(65476),Ae(418),de(0);for(var vt=0;vt<16;vt++)de(M[vt+1]);for(var Et=0;Et<=11;Et++)de(I[Et]);de(16);for(var vn=0;vn<16;vn++)de(V[vn+1]);for(var Qt=0;Qt<=161;Qt++)de(b[Qt]);de(1);for(var Ut=0;Ut<16;Ut++)de(S[Ut+1]);for(var Rt=0;Rt<=11;Rt++)de(T[Rt]);de(17);for(var Ot=0;Ot<16;Ot++)de(te[Ot+1]);for(var gt=0;gt<=161;gt++)de(_e[gt])})(),Ae(65498),Ae(12),de(3),de(1),de(0),de(2),de(17),de(3),de(17),de(0),de(63),de(0);var J=0,re=0,ae=0;D=0,N=7,this.encode.displayName="_encode_";for(var he,Ee,ye,De,Ue,Xe,We,ot,$,Ke=O.data,kt=O.width,Ct=O.height,qe=4*kt,At=0;At<Ct;){for(he=0;he<qe;){for(Ue=qe*At+he,We=-1,ot=0,$=0;$<64;$++)Xe=Ue+(ot=$>>3)*qe+(We=4*(7&$)),At+ot>=Ct&&(Xe-=qe*(At+1+ot-Ct)),he+We>=qe&&(Xe-=he+We-qe+4),Ee=Ke[Xe++],ye=Ke[Xe++],De=Ke[Xe++],K[$]=(fe[Ee]+fe[ye+256|0]+fe[De+512|0]>>16)-128,j[$]=(fe[Ee+768|0]+fe[ye+1024|0]+fe[De+1280|0]>>16)-128,G[$]=(fe[Ee+1280|0]+fe[ye+1536|0]+fe[De+1792|0]>>16)-128;J=Be(K,l,J,e,r),re=Be(j,u,re,t,i),ae=Be(G,u,ae,t,i),he+=32}At+=8}if(N>=0){var st=[];st[1]=N+1,st[0]=(1<<N+1)-1,be(st)}return Ae(65497),new Uint8Array(E)},n=n||50,(function(){for(var O=String.fromCharCode,H=0;H<256;H++)oe[H]=O(H)})(),e=Te(M,I),t=Te(S,T),r=Te(V,b),i=Te(te,_e),(function(){for(var O=1,H=2,J=1;J<=15;J++){for(var re=O;re<H;re++)m[32767+re]=J,p[32767+re]=[],p[32767+re][1]=J,p[32767+re][0]=re;for(var ae=-(H-1);ae<=-O;ae++)m[32767+ae]=J,p[32767+ae]=[],p[32767+ae][1]=J,p[32767+ae][0]=H-1+ae;O<<=1,H<<=1}})(),(function(){for(var O=0;O<256;O++)fe[O]=19595*O,fe[O+256|0]=38470*O,fe[O+512|0]=7471*O+32768,fe[O+768|0]=-11059*O,fe[O+1024|0]=-21709*O,fe[O+1280|0]=32768*O+8421375,fe[O+1536|0]=-27439*O,fe[O+1792|0]=-5329*O})(),Re(n)}function mc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function iz(n){function e(I){if(!I)throw Error("assert :P")}function t(I,V,b){for(var S=0;4>S;S++)if(I[V+S]!=b.charCodeAt(S))return!0;return!1}function r(I,V,b,S,T){for(var te=0;te<T;te++)I[V+te]=b[S+te]}function i(I,V,b,S){for(var T=0;T<S;T++)I[V+T]=b}function o(I){return new Int32Array(I)}function s(I,V){for(var b=[],S=0;S<I;S++)b.push(new V);return b}function a(I,V){var b=[];return(function S(T,te,_e){for(var Te=_e[te],be=0;be<Te&&(T.push(_e.length>te+1?[]:new V),!(_e.length<te+1));be++)S(T[be],te+1,_e)})(b,0,I),b}var c=function(){var I=this;function V(d,h){for(var y=1<<h-1>>>0;d&y;)y>>>=1;return y?(d&y-1)+y:d}function b(d,h,y,w,k){e(!(w%y));do d[h+(w-=y)]=k;while(0<w)}function S(d,h,y,w,k){if(e(2328>=k),512>=k)var L=o(512);else if((L=o(k))==null)return 0;return(function(F,U,q,Q,se,ve){var Z,ce,pe=U,Ne=1<<q,me=o(16),ke=o(16);for(e(se!=0),e(Q!=null),e(F!=null),e(0<q),ce=0;ce<se;++ce){if(15<Q[ce])return 0;++me[Q[ce]]}if(me[0]==se)return 0;for(ke[1]=0,Z=1;15>Z;++Z){if(me[Z]>1<<Z)return 0;ke[Z+1]=ke[Z]+me[Z]}for(ce=0;ce<se;++ce)Z=Q[ce],0<Q[ce]&&(ve[ke[Z]++]=ce);if(ke[15]==1)return(Q=new T).g=0,Q.value=ve[0],b(F,pe,1,Ne,Q),Ne;var Oe,Ge=-1,$e=Ne-1,Tt=0,ht=1,hn=1,bt=1<<q;for(ce=0,Z=1,se=2;Z<=q;++Z,se<<=1){if(ht+=hn<<=1,0>(hn-=me[Z]))return 0;for(;0<me[Z];--me[Z])(Q=new T).g=Z,Q.value=ve[ce++],b(F,pe+Tt,se,bt,Q),Tt=V(Tt,Z)}for(Z=q+1,se=2;15>=Z;++Z,se<<=1){if(ht+=hn<<=1,0>(hn-=me[Z]))return 0;for(;0<me[Z];--me[Z]){if(Q=new T,(Tt&$e)!=Ge){for(pe+=bt,Oe=1<<(Ge=Z)-q;15>Ge&&!(0>=(Oe-=me[Ge]));)++Ge,Oe<<=1;Ne+=bt=1<<(Oe=Ge-q),F[U+(Ge=Tt&$e)].g=Oe+q,F[U+Ge].value=pe-U-Ge}Q.g=Z-q,Q.value=ve[ce++],b(F,pe+(Tt>>q),se,bt,Q),Tt=V(Tt,Z)}}return ht!=2*ke[15]-1?0:Ne})(d,h,y,w,k,L)}function T(){this.value=this.g=0}function te(){this.value=this.g=0}function _e(){this.G=s(5,T),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(df,te)}function Te(d,h,y,w){e(d!=null),e(h!=null),e(2147483648>w),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=h,d.pa=y,d.Jd=h,d.Yc=y+w,d.Zc=4<=w?y+w-4+1:y,Ee(d)}function be(d,h){for(var y=0;0<h--;)y|=De(d,128)<<h;return y}function de(d,h){var y=be(d,h);return ye(d)?-y:y}function Ae(d,h,y,w){var k,L=0;for(e(d!=null),e(h!=null),e(4294967288>w),d.Sb=w,d.Ra=0,d.u=0,d.h=0,4<w&&(w=4),k=0;k<w;++k)L+=h[y+k]<<8*k;d.Ra=L,d.bb=w,d.oa=h,d.pa=y}function Be(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Eu-8>>>0,++d.bb,d.u-=8;re(d)&&(d.h=1,d.u=0)}function Re(d,h){if(e(0<=h),!d.h&&h<=ks){var y=J(d)&Ps[h];return d.u+=h,Be(d),y}return d.h=1,d.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(d){return d.Ra>>>(d.u&Eu-1)>>>0}function re(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Eu}function ae(d,h){d.u=h,d.h=re(d)}function he(d){d.u>=Dl&&(e(d.u>=Dl),Be(d))}function Ee(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function ye(d){return be(d,1)}function De(d,h){var y=d.Ca;0>d.b&&Ee(d);var w=d.b,k=y*h>>>8,L=(d.I>>>w>k)+0;for(L?(y-=k,d.I-=k+1<<w>>>0):y=k+1,w=y,k=0;256<=w;)k+=8,w>>=8;return w=7^k+Iu[w],d.b-=w,d.Ca=(y<<w)-1,L}function Ue(d,h,y){d[h+0]=y>>24&255,d[h+1]=y>>16&255,d[h+2]=y>>8&255,d[h+3]=255&y}function Xe(d,h){return d[h+0]|d[h+1]<<8}function We(d,h){return Xe(d,h)|d[h+2]<<16}function ot(d,h){return Xe(d,h)|Xe(d,h+2)<<16}function $(d,h){var y=1<<h;return e(d!=null),e(0<h),d.X=o(y),d.X==null?0:(d.Mb=32-h,d.Xa=h,1)}function Ke(d,h){e(d!=null),e(h!=null),e(d.Xa==h.Xa),r(h.X,0,d.X,0,1<<h.Xa)}function kt(){this.X=[],this.Xa=this.Mb=0}function Ct(d,h,y,w){e(y!=null),e(w!=null);var k=y[0],L=w[0];return k==0&&(k=(d*L+h/2)/h),L==0&&(L=(h*k+d/2)/d),0>=k||0>=L?0:(y[0]=k,w[0]=L,1)}function qe(d,h){return d+(1<<h)-1>>>h}function At(d,h){return((4278255360&d)+(4278255360&h)>>>0&4278255360)+((16711935&d)+(16711935&h)>>>0&16711935)>>>0}function st(d,h){I[h]=function(y,w,k,L,F,U,q){var Q;for(Q=0;Q<F;++Q){var se=I[d](U[q+Q-1],k,L+Q);U[q+Q]=At(y[w+Q],se)}}}function vt(){this.ud=this.hd=this.jd=0}function Et(d,h){return((4278124286&(d^h))>>>1)+(d&h)>>>0}function vn(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Qt(d,h){return vn(d+(d-h+.5>>1))}function Ut(d,h,y){return Math.abs(h-y)-Math.abs(d-y)}function Rt(d,h,y,w,k,L,F){for(w=L[F-1],y=0;y<k;++y)L[F+y]=w=At(d[h+y],w)}function Ot(d,h,y,w,k){var L;for(L=0;L<y;++L){var F=d[h+L],U=F>>8&255,q=16711935&(q=(q=16711935&F)+((U<<16)+U));w[k+L]=(4278255360&F)+q>>>0}}function gt(d,h){h.jd=255&d,h.hd=d>>8&255,h.ud=d>>16&255}function Xt(d,h,y,w,k,L){var F;for(F=0;F<w;++F){var U=h[y+F],q=U>>>8,Q=U,se=255&(se=(se=U>>>16)+((d.jd<<24>>24)*(q<<24>>24)>>>5));Q=255&(Q=(Q+=(d.hd<<24>>24)*(q<<24>>24)>>>5)+((d.ud<<24>>24)*(se<<24>>24)>>>5)),k[L+F]=(4278255360&U)+(se<<16)+Q}}function It(d,h,y,w,k){I[h]=function(L,F,U,q,Q,se,ve,Z,ce){for(q=ve;q<Z;++q)for(ve=0;ve<ce;++ve)Q[se++]=k(U[w(L[F++])])},I[d]=function(L,F,U,q,Q,se,ve){var Z=8>>L.b,ce=L.Ea,pe=L.K[0],Ne=L.w;if(8>Z)for(L=(1<<L.b)-1,Ne=(1<<Z)-1;F<U;++F){var me,ke=0;for(me=0;me<ce;++me)me&L||(ke=w(q[Q++])),se[ve++]=k(pe[ke&Ne]),ke>>=Z}else I["VP8LMapColor"+y](q,Q,pe,Ne,se,ve,F,U,ce)}}function kr(d,h,y,w,k){for(y=h+y;h<y;){var L=d[h++];w[k++]=L>>16&255,w[k++]=L>>8&255,w[k++]=255&L}}function yn(d,h,y,w,k){for(y=h+y;h<y;){var L=d[h++];w[k++]=L>>16&255,w[k++]=L>>8&255,w[k++]=255&L,w[k++]=L>>24&255}}function sn(d,h,y,w,k){for(y=h+y;h<y;){var L=(F=d[h++])>>16&240|F>>12&15,F=240&F|F>>28&15;w[k++]=L,w[k++]=F}}function an(d,h,y,w,k){for(y=h+y;h<y;){var L=(F=d[h++])>>16&248|F>>13&7,F=F>>5&224|F>>3&31;w[k++]=L,w[k++]=F}}function Qn(d,h,y,w,k){for(y=h+y;h<y;){var L=d[h++];w[k++]=255&L,w[k++]=L>>8&255,w[k++]=L>>16&255}}function Nt(d,h,y,w,k,L){if(L==0)for(y=h+y;h<y;)Ue(w,((L=d[h++])[0]>>24|L[1]>>8&65280|L[2]<<8&16711680|L[3]<<24)>>>0),k+=32;else r(w,k,d,h,y)}function Zn(d,h){I[h][0]=I[d+"0"],I[h][1]=I[d+"1"],I[h][2]=I[d+"2"],I[h][3]=I[d+"3"],I[h][4]=I[d+"4"],I[h][5]=I[d+"5"],I[h][6]=I[d+"6"],I[h][7]=I[d+"7"],I[h][8]=I[d+"8"],I[h][9]=I[d+"9"],I[h][10]=I[d+"10"],I[h][11]=I[d+"11"],I[h][12]=I[d+"12"],I[h][13]=I[d+"13"],I[h][14]=I[d+"0"],I[h][15]=I[d+"0"]}function Ft(d){return d==CE||d==EE||d==W_||d==IE}function Zt(){this.eb=[],this.size=this.A=this.fb=0}function or(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function tn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zt,this.f.kb=new or,this.sd=null}function Lt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Sn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Do(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function xi(d,h){var y=d.T,w=h.ba.f.RGBA,k=w.eb,L=w.fb+d.ka*w.A,F=pa[h.ba.S],U=d.y,q=d.O,Q=d.f,se=d.N,ve=d.ea,Z=d.W,ce=h.cc,pe=h.dc,Ne=h.Mc,me=h.Nc,ke=d.ka,Oe=d.ka+d.T,Ge=d.U,$e=Ge+1>>1;for(ke==0?F(U,q,null,null,Q,se,ve,Z,Q,se,ve,Z,k,L,null,null,Ge):(F(h.ec,h.fc,U,q,ce,pe,Ne,me,Q,se,ve,Z,k,L-w.A,k,L,Ge),++y);ke+2<Oe;ke+=2)ce=Q,pe=se,Ne=ve,me=Z,se+=d.Rc,Z+=d.Rc,L+=2*w.A,F(U,(q+=2*d.fa)-d.fa,U,q,ce,pe,Ne,me,Q,se,ve,Z,k,L-w.A,k,L,Ge);return q+=d.fa,d.j+Oe<d.o?(r(h.ec,h.fc,U,q,Ge),r(h.cc,h.dc,Q,se,$e),r(h.Mc,h.Nc,ve,Z,$e),y--):1&Oe||F(U,q,null,null,Q,se,ve,Z,Q,se,ve,Z,k,L+w.A,null,null,Ge),y}function es(d,h,y){var w=d.F,k=[d.J];if(w!=null){var L=d.U,F=h.ba.S,U=F==G_||F==W_;h=h.ba.f.RGBA;var q=[0],Q=d.ka;q[0]=d.T,d.Kb&&(Q==0?--q[0]:(--Q,k[0]-=d.width),d.j+d.ka+d.T==d.o&&(q[0]=d.o-d.j-Q));var se=h.eb;Q=h.fb+Q*h.A,d=GR(w,k[0],d.width,L,q,se,Q+(U?0:3),h.A),e(y==q),d&&Ft(F)&&g0(se,Q,U,L,q,h.A)}return 0}function Es(d){var h=d.ma,y=h.ba.S,w=11>y,k=y==$_||y==H_||y==G_||y==xE||y==12||Ft(y);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Tl(h.Oa,d,k?11:12))return 0;if(k&&Ft(y)&&xu(),d.da)alert("todo:use_scaling");else{if(w){if(h.Ib=Do,d.Kb){if(y=d.U+1>>1,h.memory=o(d.U+2*y),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+d.U,h.Mc=h.cc,h.Nc=h.dc+y,h.Ib=xi,xu()}}else alert("todo:EmitYUV");k&&(h.Jb=es,w&&yr())}if(w&&!lO){for(d=0;256>d;++d)AH[d]=89858*(d-128)+Y_>>K_,MH[d]=-22014*(d-128)+Y_,DH[d]=-45773*(d-128),TH[d]=113618*(d-128)+Y_>>K_;for(d=v0;d<TE;++d)h=76283*(d-16)+Y_>>K_,NH[d-v0]=As(h,255),PH[d-v0]=As(h+8>>4,15);lO=1}return 1}function Mt(d){var h=d.ma,y=d.U,w=d.T;return e(!(1&d.ka)),0>=y||0>=w?0:(y=h.Ib(d,h),h.Jb!=null&&h.Jb(d,h,y),h.Dc+=y,1)}function ia(d){d.ma.memory=null}function vr(d,h,y,w){return Re(d,8)!=47?0:(h[0]=Re(d,14)+1,y[0]=Re(d,14)+1,w[0]=Re(d,1),Re(d,3)!=0?0:!d.h)}function Mo(d,h){if(4>d)return d+1;var y=d-2>>1;return(2+(1&d)<<y)+Re(h,y)+1}function Fi(d,h){return 120<h?h-120:1<=(y=((y=hH[h-1])>>4)*d+(8-(15&y)))?y:1;var y}function Xn(d,h,y){var w=J(y),k=d[h+=255&w].g-8;return 0<k&&(ae(y,y.u+8),w=J(y),h+=d[h].value,h+=w&(1<<k)-1),ae(y,y.u+d[h].g),d[h].value}function ui(d,h,y){return y.g+=d.g,y.value+=d.value<<h>>>0,e(8>=y.g),d.g}function Ci(d,h,y){var w=d.xc;return e((h=w==0?0:d.vc[d.md*(y>>w)+(h>>w)])<d.Wb),d.Ya[h]}function ts(d,h,y,w){var k=d.ab,L=d.c*h,F=d.C;h=F+h;var U=y,q=w;for(w=d.Ta,y=d.Ua;0<k--;){var Q=d.gc[k],se=F,ve=h,Z=U,ce=q,pe=(q=w,U=y,Q.Ea);switch(e(se<ve),e(ve<=Q.nc),Q.hc){case 2:Yr(Z,ce,(ve-se)*pe,q,U);break;case 0:var Ne=se,me=ve,ke=q,Oe=U,Ge=(bt=Q).Ea;Ne==0&&(l0(Z,ce,null,null,1,ke,Oe),Rt(Z,ce+1,0,0,Ge-1,ke,Oe+1),ce+=Ge,Oe+=Ge,++Ne);for(var $e=1<<bt.b,Tt=$e-1,ht=qe(Ge,bt.b),hn=bt.K,bt=bt.w+(Ne>>bt.b)*ht;Ne<me;){var Cn=hn,Ii=bt,pn=1;for(rp(Z,ce,ke,Oe-Ge,1,ke,Oe);pn<Ge;){var xt=(pn&~Tt)+$e;xt>Ge&&(xt=Ge),(0,d0[Cn[Ii++]>>8&15])(Z,ce+ +pn,ke,Oe+pn-Ge,xt-pn,ke,Oe+pn),pn=xt}ce+=Ge,Oe+=Ge,++Ne&Tt||(bt+=ht)}ve!=Q.nc&&r(q,U-pe,q,U+(ve-se-1)*pe,pe);break;case 1:for(pe=Z,me=ce,Ge=(Z=Q.Ea)-(Oe=Z&~(ke=(ce=1<<Q.b)-1)),Ne=qe(Z,Q.b),$e=Q.K,Q=Q.w+(se>>Q.b)*Ne;se<ve;){for(Tt=$e,ht=Q,hn=new vt,bt=me+Oe,Cn=me+Z;me<bt;)gt(Tt[ht++],hn),f0(hn,pe,me,ce,q,U),me+=ce,U+=ce;me<Cn&&(gt(Tt[ht++],hn),f0(hn,pe,me,Ge,q,U),me+=Ge,U+=Ge),++se&ke||(Q+=Ne)}break;case 3:if(Z==q&&ce==U&&0<Q.b){for(me=q,Z=pe=U+(ve-se)*pe-(Oe=(ve-se)*qe(Q.Ea,Q.b)),ce=q,ke=U,Ne=[],Oe=(Ge=Oe)-1;0<=Oe;--Oe)Ne[Oe]=ce[ke+Oe];for(Oe=Ge-1;0<=Oe;--Oe)me[Z+Oe]=Ne[Oe];B_(Q,se,ve,q,pe,q,U)}else B_(Q,se,ve,Z,ce,q,U)}U=w,q=y}q!=y&&r(w,y,U,q,L)}function wc(d,h){var y=d.V,w=d.Ba+d.c*d.C,k=h-d.C;if(e(h<=d.l.o),e(16>=k),0<k){var L=d.l,F=d.Ta,U=d.Ua,q=L.width;if(ts(d,k,y,w),k=U=[U],e((y=d.C)<(w=h)),e(L.v<L.va),w>L.o&&(w=L.o),y<L.j){var Q=L.j-y;y=L.j,k[0]+=Q*q}if(y>=w?y=0:(k[0]+=4*L.v,L.ka=y-L.j,L.U=L.va-L.v,L.T=w-y,y=1),y){if(U=U[0],11>(y=d.ca).S){var se=y.f.RGBA,ve=(w=y.S,k=L.U,L=L.T,Q=se.eb,se.A),Z=L;for(se=se.fb+d.Ma*se.A;0<Z--;){var ce=F,pe=U,Ne=k,me=Q,ke=se;switch(w){case q_:h0(ce,pe,Ne,me,ke);break;case $_:Su(ce,pe,Ne,me,ke);break;case CE:Su(ce,pe,Ne,me,ke),g0(me,ke,0,Ne,1,0);break;case JR:ff(ce,pe,Ne,me,ke);break;case H_:Nt(ce,pe,Ne,me,ke,1);break;case EE:Nt(ce,pe,Ne,me,ke,1),g0(me,ke,0,Ne,1,0);break;case G_:Nt(ce,pe,Ne,me,ke,0);break;case W_:Nt(ce,pe,Ne,me,ke,0),g0(me,ke,1,Ne,1,0);break;case xE:Au(ce,pe,Ne,me,ke);break;case IE:Au(ce,pe,Ne,me,ke),HR(me,ke,Ne,1,0);break;case eO:Tu(ce,pe,Ne,me,ke);break;default:e(0)}U+=q,se+=ve}d.Ma+=L}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=y.height)}}d.C=h,e(d.C<=d.i)}function Is(d){var h;if(0<d.ua)return 0;for(h=0;h<d.Wb;++h){var y=d.Ya[h].G,w=d.Ya[h].H;if(0<y[1][w[1]+0].g||0<y[2][w[2]+0].g||0<y[3][w[3]+0].g)return 0}return 1}function No(d,h,y,w,k,L){if(d.Z!=0){var F=d.qd,U=d.rd;for(e(Nu[d.Z]!=null);h<y;++h)Nu[d.Z](F,U,w,k,w,k,L),F=w,U=k,k+=L;d.qd=F,d.rd=U}}function ns(d,h){var y=d.l.ma,w=y.Z==0||y.Z==1?d.l.j:d.C;if(w=d.C<w?w:d.C,e(h<=d.l.o),h>w){var k=d.l.width,L=y.ca,F=y.tb+k*w,U=d.V,q=d.Ba+d.c*w,Q=d.gc;e(d.ab==1),e(Q[0].hc==3),Dc(Q[0],w,h,U,q,L,F),No(y,w,h,L,F,k)}d.C=d.Ma=h}function Po(d,h,y,w,k,L,F){var U=d.$/w,q=d.$%w,Q=d.m,se=d.s,ve=y+d.$,Z=ve;k=y+w*k;var ce=y+w*L,pe=280+se.ua,Ne=d.Pb?U:16777216,me=0<se.ua?se.Wa:null,ke=se.wc,Oe=ve<ce?Ci(se,q,U):null;e(d.C<L),e(ce<=k);var Ge=!1;e:for(;;){for(;Ge||ve<ce;){var $e=0;if(U>=Ne){var Tt=ve-y;e((Ne=d).Pb),Ne.wd=Ne.m,Ne.xd=Tt,0<Ne.s.ua&&Ke(Ne.s.Wa,Ne.s.vb),Ne=U+gH}if(q&ke||(Oe=Ci(se,q,U)),e(Oe!=null),Oe.Qb&&(h[ve]=Oe.qb,Ge=!0),!Ge)if(he(Q),Oe.jc){$e=Q,Tt=h;var ht=ve,hn=Oe.pd[J($e)&df-1];e(Oe.jc),256>hn.g?(ae($e,$e.u+hn.g),Tt[ht]=hn.value,$e=0):(ae($e,$e.u+hn.g-256),e(256<=hn.value),$e=hn.value),$e==0&&(Ge=!0)}else $e=Xn(Oe.G[0],Oe.H[0],Q);if(Q.h)break;if(Ge||256>$e){if(!Ge)if(Oe.nd)h[ve]=(Oe.qb|$e<<8)>>>0;else{if(he(Q),Ge=Xn(Oe.G[1],Oe.H[1],Q),he(Q),Tt=Xn(Oe.G[2],Oe.H[2],Q),ht=Xn(Oe.G[3],Oe.H[3],Q),Q.h)break;h[ve]=(ht<<24|Ge<<16|$e<<8|Tt)>>>0}if(Ge=!1,++ve,++q>=w&&(q=0,++U,F!=null&&U<=L&&!(U%16)&&F(d,U),me!=null))for(;Z<ve;)$e=h[Z++],me.X[(506832829*$e&4294967295)>>>me.Mb]=$e}else if(280>$e){if($e=Mo($e-256,Q),Tt=Xn(Oe.G[4],Oe.H[4],Q),he(Q),Tt=Fi(w,Tt=Mo(Tt,Q)),Q.h)break;if(ve-y<Tt||k-ve<$e)break e;for(ht=0;ht<$e;++ht)h[ve+ht]=h[ve+ht-Tt];for(ve+=$e,q+=$e;q>=w;)q-=w,++U,F!=null&&U<=L&&!(U%16)&&F(d,U);if(e(ve<=k),q&ke&&(Oe=Ci(se,q,U)),me!=null)for(;Z<ve;)$e=h[Z++],me.X[(506832829*$e&4294967295)>>>me.Mb]=$e}else{if(!($e<pe))break e;for(Ge=$e-280,e(me!=null);Z<ve;)$e=h[Z++],me.X[(506832829*$e&4294967295)>>>me.Mb]=$e;$e=ve,e(!(Ge>>>(Tt=me).Xa)),h[$e]=Tt.X[Ge],Ge=!0}Ge||e(Q.h==re(Q))}if(d.Pb&&Q.h&&ve<k)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Ke(d.s.vb,d.s.Wa);else{if(Q.h)break e;F?.(d,U>L?L:U),d.a=0,d.$=ve-y}return 1}return d.a=3,0}function Hi(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var h=d.Wa;h!=null&&(h.X=null),d.vb=null,e(d!=null)}function co(){var d=new qt;return d==null?null:(d.a=0,d.xb=rO,Zn("Predictor","VP8LPredictors"),Zn("Predictor","VP8LPredictors_C"),Zn("PredictorAdd","VP8LPredictorsAdd"),Zn("PredictorAdd","VP8LPredictorsAdd_C"),Yr=Ot,f0=Xt,h0=kr,Su=yn,Au=sn,Tu=an,ff=Qn,I.VP8LMapColor32b=Tc,I.VP8LMapColor8b=u0,d)}function Ss(d,h,y,w,k){var L=1,F=[d],U=[h],q=w.m,Q=w.s,se=null,ve=0;e:for(;;){if(y)for(;L&&Re(q,1);){var Z=F,ce=U,pe=w,Ne=1,me=pe.m,ke=pe.gc[pe.ab],Oe=Re(me,2);if(pe.Oc&1<<Oe)L=0;else{switch(pe.Oc|=1<<Oe,ke.hc=Oe,ke.Ea=Z[0],ke.nc=ce[0],ke.K=[null],++pe.ab,e(4>=pe.ab),Oe){case 0:case 1:ke.b=Re(me,3)+2,Ne=Ss(qe(ke.Ea,ke.b),qe(ke.nc,ke.b),0,pe,ke.K),ke.K=ke.K[0];break;case 3:var Ge,$e=Re(me,8)+1,Tt=16<$e?0:4<$e?1:2<$e?2:3;if(Z[0]=qe(ke.Ea,Tt),ke.b=Tt,Ge=Ne=Ss($e,1,0,pe,ke.K)){var ht,hn=$e,bt=ke,Cn=1<<(8>>bt.b),Ii=o(Cn);if(Ii==null)Ge=0;else{var pn=bt.K[0],xt=bt.w;for(Ii[0]=bt.K[0][0],ht=1;ht<1*hn;++ht)Ii[ht]=At(pn[xt+ht],Ii[ht-1]);for(;ht<4*Cn;++ht)Ii[ht]=0;bt.K[0]=null,bt.K[0]=Ii,Ge=1}}Ne=Ge;break;case 2:break;default:e(0)}L=Ne}}if(F=F[0],U=U[0],L&&Re(q,1)&&!(L=1<=(ve=Re(q,4))&&11>=ve)){w.a=3;break e}var nt;if(nt=L)t:{var Zr,on,An,_r=w,Wi=F,Lo=U,qr=ve,fo=y,Fo=_r.m,Si=_r.s,Mn=[null],$n=1,$r=0,Hn=pH[qr];n:for(;;){if(fo&&Re(Fo,1)){var Ki=Re(Fo,3)+2,za=qe(Wi,Ki),Xr=qe(Lo,Ki),ss=za*Xr;if(!Ss(za,Xr,0,_r,Mn))break n;for(Mn=Mn[0],Si.xc=Ki,Zr=0;Zr<ss;++Zr){var ar=Mn[Zr]>>8&65535;Mn[Zr]=ar,ar>=$n&&($n=ar+1)}}if(Fo.h)break n;for(on=0;5>on;++on){var Ai=tO[on];!on&&0<qr&&(Ai+=1<<qr),$r<Ai&&($r=Ai)}var Os=s($n*Hn,T),Vo=$n,Ls=s(Vo,_e);if(Ls==null)var Fs=null;else e(65536>=Vo),Fs=Ls;var as=o($r);if(Fs==null||as==null||Os==null){_r.a=1;break n}var Vs=Os;for(Zr=An=0;Zr<$n;++Zr){var pr=Fs[Zr],js=pr.G,qa=pr.H,pf=0,Pl=1,Yi=0;for(on=0;5>on;++on){Ai=tO[on],js[on]=Vs,qa[on]=An,!on&&0<qr&&(Ai+=1<<qr);i:{var Z_,DE=Ai,X_=_r,y0=as,OH=Vs,LH=An,ME=0,Pu=X_.m,FH=Re(Pu,1);if(i(y0,0,0,DE),FH){var VH=Re(Pu,1)+1,jH=Re(Pu,1),fO=Re(Pu,jH==0?1:8);y0[fO]=1,VH==2&&(y0[fO=Re(Pu,8)]=1);var J_=1}else{var hO=o(19),pO=Re(Pu,4)+4;if(19<pO){X_.a=3;var e1=0;break i}for(Z_=0;Z_<pO;++Z_)hO[fH[Z_]]=Re(Pu,3);var NE=void 0,_0=void 0,gO=X_,BH=hO,t1=DE,mO=y0,PE=0,ku=gO.m,vO=8,yO=s(128,T);r:for(;S(yO,0,7,BH,19);){if(Re(ku,1)){var UH=2+2*Re(ku,3);if((NE=2+Re(ku,UH))>t1)break r}else NE=t1;for(_0=0;_0<t1&&NE--;){he(ku);var _O=yO[0+(127&J(ku))];ae(ku,ku.u+_O.g);var op=_O.value;if(16>op)mO[_0++]=op,op!=0&&(vO=op);else{var zH=op==16,wO=op-16,qH=uH[wO],bO=Re(ku,lH[wO])+qH;if(_0+bO>t1)break r;for(var $H=zH?vO:0;0<bO--;)mO[_0++]=$H}}PE=1;break r}PE||(gO.a=3),J_=PE}(J_=J_&&!Pu.h)&&(ME=S(OH,LH,8,y0,DE)),J_&&ME!=0?e1=ME:(X_.a=3,e1=0)}if(e1==0)break n;if(Pl&&dH[on]==1&&(Pl=Vs[An].g==0),pf+=Vs[An].g,An+=e1,3>=on){var w0,kE=as[0];for(w0=1;w0<Ai;++w0)as[w0]>kE&&(kE=as[w0]);Yi+=kE}}if(pr.nd=Pl,pr.Qb=0,Pl&&(pr.qb=(js[3][qa[3]+0].value<<24|js[1][qa[1]+0].value<<16|js[2][qa[2]+0].value)>>>0,pf==0&&256>js[0][qa[0]+0].value&&(pr.Qb=1,pr.qb+=js[0][qa[0]+0].value<<8)),pr.jc=!pr.Qb&&6>Yi,pr.jc){var n1,kl=pr;for(n1=0;n1<df;++n1){var Ru=n1,Ou=kl.pd[Ru],r1=kl.G[0][kl.H[0]+Ru];256<=r1.value?(Ou.g=r1.g+256,Ou.value=r1.value):(Ou.g=0,Ou.value=0,Ru>>=ui(r1,8,Ou),Ru>>=ui(kl.G[1][kl.H[1]+Ru],16,Ou),Ru>>=ui(kl.G[2][kl.H[2]+Ru],0,Ou),ui(kl.G[3][kl.H[3]+Ru],24,Ou))}}}Si.vc=Mn,Si.Wb=$n,Si.Ya=Fs,Si.yc=Os,nt=1;break t}nt=0}if(!(L=nt)){w.a=3;break e}if(0<ve){if(Q.ua=1<<ve,!$(Q.Wa,ve)){w.a=1,L=0;break e}}else Q.ua=0;var RE=w,xO=F,HH=U,OE=RE.s,LE=OE.xc;if(RE.c=xO,RE.i=HH,OE.md=qe(xO,LE),OE.wc=LE==0?-1:(1<<LE)-1,y){w.xb=xH;break e}if((se=o(F*U))==null){w.a=1,L=0;break e}L=(L=Po(w,se,0,F,U,U,null))&&!q.h;break e}return L?(k!=null?k[0]=se:(e(se==null),e(y)),w.$=0,y||Hi(Q)):Hi(Q),L}function bc(d,h){var y=d.c*d.i,w=y+h+16*h;return e(d.c<=h),d.V=o(w),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+y+h,1)}function xc(d,h){var y=d.C,w=h-y,k=d.V,L=d.Ba+d.c*y;for(e(h<=d.l.o);0<w;){var F=16<w?16:w,U=d.l.ma,q=d.l.width,Q=q*F,se=U.ca,ve=U.tb+q*y,Z=d.Ta,ce=d.Ua;ts(d,F,k,L),WR(Z,ce,se,ve,Q),No(U,y,y+F,se,ve,q),w-=F,k+=F*d.c,y+=F}e(y==h),d.C=d.Ma=h}function Cc(){this.ub=this.yd=this.td=this.Rb=0}function _l(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qh(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function ef(){this.Yb=(function(){var d=[];return(function h(y,w,k){for(var L=k[w],F=0;F<L&&(y.push(k.length>w+1?[]:0),!(k.length<w+1));F++)h(y[F],w+1,k)})(d,0,[3,11]),d})()}function wl(){this.jb=o(3),this.Wc=a([4,8],ef),this.Xc=a([4,17],ef)}function tf(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function lo(){this.ld=this.La=this.dd=this.tc=0}function Oa(){this.Na=this.la=0}function oa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bl(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Zh(){this.uc=this.M=this.Nb=0,this.wa=Array(new lo),this.Y=0,this.ya=Array(new bl),this.aa=0,this.l=new Ec}function nf(){this.y=o(16),this.f=o(8),this.ea=o(8)}function rf(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new Cc,this.Kc=new _l,this.ed=new tf,this.Qa=new Qh,this.Ic=this.$c=this.Aa=0,this.D=new Zh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,O),this.ia=0,this.pb=s(4,oa),this.Pa=new wl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new nf),this.Hd=0,this.rb=Array(new Oa),this.sb=0,this.wa=Array(new lo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bl),this.L=this.aa=0,this.gd=a([4,2],lo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function As(d,h){return 0>d?0:d>h?h:d}function Ec(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function of(){var d=new rf;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,m0||(m0=gu)),d}function Rr(d,h,y){return d.a==0&&(d.a=h,d.sc=y,d.cb=0),0}function sf(d,h,y){return 3<=y&&d[h+0]==157&&d[h+1]==1&&d[h+2]==42}function sa(d,h){if(d==null)return 0;if(d.a=0,d.sc="OK",h==null)return Rr(d,2,"null VP8Io passed to VP8GetHeaders()");var y=h.data,w=h.w,k=h.ha;if(4>k)return Rr(d,7,"Truncated header.");var L=y[w+0]|y[w+1]<<8|y[w+2]<<16,F=d.Od;if(F.Rb=!(1&L),F.td=L>>1&7,F.yd=L>>4&1,F.ub=L>>5,3<F.td)return Rr(d,3,"Incorrect keyframe parameters.");if(!F.yd)return Rr(d,4,"Frame not displayable.");w+=3,k-=3;var U=d.Kc;if(F.Rb){if(7>k)return Rr(d,7,"cannot parse picture header");if(!sf(y,w,k))return Rr(d,3,"Bad code word");U.c=16383&(y[w+4]<<8|y[w+3]),U.Td=y[w+4]>>6,U.i=16383&(y[w+6]<<8|y[w+5]),U.Ud=y[w+6]>>6,w+=7,k-=7,d.za=U.c+15>>4,d.Ub=U.i+15>>4,h.width=U.c,h.height=U.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((L=d.Pa).jb,0,255,L.jb.length),e((L=d.Qa)!=null),L.Cb=0,L.Bb=0,L.Fb=1,i(L.Zb,0,0,L.Zb.length),i(L.Lb,0,0,L.Lb)}if(F.ub>k)return Rr(d,7,"bad partition length");Te(L=d.m,y,w,F.ub),w+=F.ub,k-=F.ub,F.Rb&&(U.Ld=ye(L),U.Kd=ye(L)),U=d.Qa;var q,Q=d.Pa;if(e(L!=null),e(U!=null),U.Cb=ye(L),U.Cb){if(U.Bb=ye(L),ye(L)){for(U.Fb=ye(L),q=0;4>q;++q)U.Zb[q]=ye(L)?de(L,7):0;for(q=0;4>q;++q)U.Lb[q]=ye(L)?de(L,6):0}if(U.Bb)for(q=0;3>q;++q)Q.jb[q]=ye(L)?be(L,8):255}else U.Bb=0;if(L.Ka)return Rr(d,3,"cannot parse segment header");if((U=d.ed).zd=ye(L),U.Tb=be(L,6),U.wb=be(L,3),U.Pc=ye(L),U.Pc&&ye(L)){for(Q=0;4>Q;++Q)ye(L)&&(U.vd[Q]=de(L,6));for(Q=0;4>Q;++Q)ye(L)&&(U.od[Q]=de(L,6))}if(d.L=U.Tb==0?0:U.zd?1:2,L.Ka)return Rr(d,3,"cannot parse filter header");var se=k;if(k=q=w,w=q+se,U=se,d.Xb=(1<<be(d.m,2))-1,se<3*(Q=d.Xb))y=7;else{for(q+=3*Q,U-=3*Q,se=0;se<Q;++se){var ve=y[k+0]|y[k+1]<<8|y[k+2]<<16;ve>U&&(ve=U),Te(d.Jc[+se],y,q,ve),q+=ve,U-=ve,k+=3}Te(d.Jc[+Q],y,q,U),y=q<w?0:5}if(y!=0)return Rr(d,y,"cannot parse partitions");for(y=be(q=d.m,7),k=ye(q)?de(q,4):0,w=ye(q)?de(q,4):0,U=ye(q)?de(q,4):0,Q=ye(q)?de(q,4):0,q=ye(q)?de(q,4):0,se=d.Qa,ve=0;4>ve;++ve){if(se.Cb){var Z=se.Zb[ve];se.Fb||(Z+=y)}else{if(0<ve){d.pb[ve]=d.pb[0];continue}Z=y}var ce=d.pb[ve];ce.Sc[0]=SE[As(Z+k,127)],ce.Sc[1]=AE[As(Z+0,127)],ce.Eb[0]=2*SE[As(Z+w,127)],ce.Eb[1]=101581*AE[As(Z+U,127)]>>16,8>ce.Eb[1]&&(ce.Eb[1]=8),ce.Qc[0]=SE[As(Z+Q,117)],ce.Qc[1]=AE[As(Z+q,127)],ce.lc=Z+q}if(!F.Rb)return Rr(d,4,"Not a key frame.");for(ye(L),F=d.Pa,y=0;4>y;++y){for(k=0;8>k;++k)for(w=0;3>w;++w)for(U=0;11>U;++U)Q=De(L,wH[y][k][w][U])?be(L,8):yH[y][k][w][U],F.Wc[y][k].Yb[w][U]=Q;for(k=0;17>k;++k)F.Xc[y][k]=F.Wc[y][bH[k]]}return d.kc=ye(L),d.kc&&(d.Bd=be(L,8)),d.cb=1}function gu(d,h,y,w,k,L,F){var U=h[k].Yb[y];for(y=0;16>k;++k){if(!De(d,U[y+0]))return k;for(;!De(d,U[y+1]);)if(U=h[++k].Yb[0],y=0,k==16)return 16;var q=h[k+1].Yb;if(De(d,U[y+2])){var Q=d,se=0;if(De(Q,(Z=U)[(ve=y)+3]))if(De(Q,Z[ve+6])){for(U=0,ve=2*(se=De(Q,Z[ve+8]))+(Z=De(Q,Z[ve+9+se])),se=0,Z=mH[ve];Z[U];++U)se+=se+De(Q,Z[U]);se+=3+(8<<ve)}else De(Q,Z[ve+7])?(se=7+2*De(Q,165),se+=De(Q,145)):se=5+De(Q,159);else se=De(Q,Z[ve+4])?3+De(Q,Z[ve+5]):2;U=q[2]}else se=1,U=q[1];q=F+vH[k],0>(Q=d).b&&Ee(Q);var ve,Z=Q.b,ce=(ve=Q.Ca>>1)-(Q.I>>Z)>>31;--Q.b,Q.Ca+=ce,Q.Ca|=1,Q.I-=(ve+1&ce)<<Z,L[q]=((se^ce)-ce)*w[(0<k)+0]}return 16}function af(d){var h=d.rb[d.sb-1];h.la=0,h.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function ko(d,h,y,w,k){k=d[h+y+32*w]+(k>>3),d[h+y+32*w]=-256&k?0>k?0:255:k}function Kr(d,h,y,w,k,L){ko(d,h,0,y,w+k),ko(d,h,1,y,w+L),ko(d,h,2,y,w-L),ko(d,h,3,y,w-k)}function Gi(d){return(20091*d>>16)+d}function rs(d,h,y,w){var k,L=0,F=o(16);for(k=0;4>k;++k){var U=d[h+0]+d[h+8],q=d[h+0]-d[h+8],Q=(35468*d[h+4]>>16)-Gi(d[h+12]),se=Gi(d[h+4])+(35468*d[h+12]>>16);F[L+0]=U+se,F[L+1]=q+Q,F[L+2]=q-Q,F[L+3]=U-se,L+=4,h++}for(k=L=0;4>k;++k)U=(d=F[L+0]+4)+F[L+8],q=d-F[L+8],Q=(35468*F[L+4]>>16)-Gi(F[L+12]),ko(y,w,0,0,U+(se=Gi(F[L+4])+(35468*F[L+12]>>16))),ko(y,w,1,0,q+Q),ko(y,w,2,0,q-Q),ko(y,w,3,0,U-se),L++,w+=32}function mu(d,h,y,w){var k=d[h+0]+4,L=35468*d[h+4]>>16,F=Gi(d[h+4]),U=35468*d[h+1]>>16;Kr(y,w,0,k+F,d=Gi(d[h+1]),U),Kr(y,w,1,k+L,d,U),Kr(y,w,2,k-L,d,U),Kr(y,w,3,k-F,d,U)}function vu(d,h,y,w,k){rs(d,h,y,w),k&&rs(d,h+16,y,w+4)}function Ts(d,h,y,w){hf(d,h+0,y,w,1),hf(d,h+32,y,w+128,1)}function Vn(d,h,y,w){var k;for(d=d[h+0]+4,k=0;4>k;++k)for(h=0;4>h;++h)ko(y,w,h,k,d)}function xl(d,h,y,w){d[h+0]&&jn(d,h+0,y,w),d[h+16]&&jn(d,h+16,y,w+4),d[h+32]&&jn(d,h+32,y,w+128),d[h+48]&&jn(d,h+48,y,w+128+4)}function aa(d,h,y,w){var k,L=o(16);for(k=0;4>k;++k){var F=d[h+0+k]+d[h+12+k],U=d[h+4+k]+d[h+8+k],q=d[h+4+k]-d[h+8+k],Q=d[h+0+k]-d[h+12+k];L[0+k]=F+U,L[8+k]=F-U,L[4+k]=Q+q,L[12+k]=Q-q}for(k=0;4>k;++k)F=(d=L[0+4*k]+3)+L[3+4*k],U=L[1+4*k]+L[2+4*k],q=L[1+4*k]-L[2+4*k],Q=d-L[3+4*k],y[w+0]=F+U>>3,y[w+16]=Q+q>>3,y[w+32]=F-U>>3,y[w+48]=Q-q>>3,w+=64}function Ds(d,h,y){var w,k=h-32,L=Rs,F=255-d[k-1];for(w=0;w<y;++w){var U,q=L,Q=F+d[h-1];for(U=0;U<y;++U)d[h+U]=q[Q+d[k+U]];h+=32}}function n0(d,h){Ds(d,h,4)}function Xh(d,h){Ds(d,h,8)}function r0(d,h){Ds(d,h,16)}function cf(d,h){var y;for(y=0;16>y;++y)r(d,h+32*y,d,h-32,16)}function Jh(d,h){var y;for(y=16;0<y;--y)i(d,h,d[h-1],16),h+=32}function Ms(d,h,y){var w;for(w=0;16>w;++w)i(h,y+32*w,d,16)}function Cl(d,h){var y,w=16;for(y=0;16>y;++y)w+=d[h-1+32*y]+d[h+y-32];Ms(w>>5,d,h)}function uo(d,h){var y,w=8;for(y=0;16>y;++y)w+=d[h-1+32*y];Ms(w>>4,d,h)}function yu(d,h){var y,w=8;for(y=0;16>y;++y)w+=d[h+y-32];Ms(w>>4,d,h)}function ep(d,h){Ms(128,d,h)}function Gt(d,h,y){return d+2*h+y+2>>2}function Ic(d,h){var y,w=h-32;for(w=new Uint8Array([Gt(d[w-1],d[w+0],d[w+1]),Gt(d[w+0],d[w+1],d[w+2]),Gt(d[w+1],d[w+2],d[w+3]),Gt(d[w+2],d[w+3],d[w+4])]),y=0;4>y;++y)r(d,h+32*y,w,0,w.length)}function i0(d,h){var y=d[h-1],w=d[h-1+32],k=d[h-1+64],L=d[h-1+96];Ue(d,h+0,16843009*Gt(d[h-1-32],y,w)),Ue(d,h+32,16843009*Gt(y,w,k)),Ue(d,h+64,16843009*Gt(w,k,L)),Ue(d,h+96,16843009*Gt(k,L,L))}function o0(d,h){var y,w=4;for(y=0;4>y;++y)w+=d[h+y-32]+d[h-1+32*y];for(w>>=3,y=0;4>y;++y)i(d,h+32*y,w,4)}function La(d,h){var y=d[h-1+0],w=d[h-1+32],k=d[h-1+64],L=d[h-1-32],F=d[h+0-32],U=d[h+1-32],q=d[h+2-32],Q=d[h+3-32];d[h+0+96]=Gt(w,k,d[h-1+96]),d[h+1+96]=d[h+0+64]=Gt(y,w,k),d[h+2+96]=d[h+1+64]=d[h+0+32]=Gt(L,y,w),d[h+3+96]=d[h+2+64]=d[h+1+32]=d[h+0+0]=Gt(F,L,y),d[h+3+64]=d[h+2+32]=d[h+1+0]=Gt(U,F,L),d[h+3+32]=d[h+2+0]=Gt(q,U,F),d[h+3+0]=Gt(Q,q,U)}function Vi(d,h){var y=d[h+1-32],w=d[h+2-32],k=d[h+3-32],L=d[h+4-32],F=d[h+5-32],U=d[h+6-32],q=d[h+7-32];d[h+0+0]=Gt(d[h+0-32],y,w),d[h+1+0]=d[h+0+32]=Gt(y,w,k),d[h+2+0]=d[h+1+32]=d[h+0+64]=Gt(w,k,L),d[h+3+0]=d[h+2+32]=d[h+1+64]=d[h+0+96]=Gt(k,L,F),d[h+3+32]=d[h+2+64]=d[h+1+96]=Gt(L,F,U),d[h+3+64]=d[h+2+96]=Gt(F,U,q),d[h+3+96]=Gt(U,q,q)}function s0(d,h){var y=d[h-1+0],w=d[h-1+32],k=d[h-1+64],L=d[h-1-32],F=d[h+0-32],U=d[h+1-32],q=d[h+2-32],Q=d[h+3-32];d[h+0+0]=d[h+1+64]=L+F+1>>1,d[h+1+0]=d[h+2+64]=F+U+1>>1,d[h+2+0]=d[h+3+64]=U+q+1>>1,d[h+3+0]=q+Q+1>>1,d[h+0+96]=Gt(k,w,y),d[h+0+64]=Gt(w,y,L),d[h+0+32]=d[h+1+96]=Gt(y,L,F),d[h+1+32]=d[h+2+96]=Gt(L,F,U),d[h+2+32]=d[h+3+96]=Gt(F,U,q),d[h+3+32]=Gt(U,q,Q)}function a0(d,h){var y=d[h+0-32],w=d[h+1-32],k=d[h+2-32],L=d[h+3-32],F=d[h+4-32],U=d[h+5-32],q=d[h+6-32],Q=d[h+7-32];d[h+0+0]=y+w+1>>1,d[h+1+0]=d[h+0+64]=w+k+1>>1,d[h+2+0]=d[h+1+64]=k+L+1>>1,d[h+3+0]=d[h+2+64]=L+F+1>>1,d[h+0+32]=Gt(y,w,k),d[h+1+32]=d[h+0+96]=Gt(w,k,L),d[h+2+32]=d[h+1+96]=Gt(k,L,F),d[h+3+32]=d[h+2+96]=Gt(L,F,U),d[h+3+64]=Gt(F,U,q),d[h+3+96]=Gt(U,q,Q)}function ca(d,h){var y=d[h-1+0],w=d[h-1+32],k=d[h-1+64],L=d[h-1+96];d[h+0+0]=y+w+1>>1,d[h+2+0]=d[h+0+32]=w+k+1>>1,d[h+2+32]=d[h+0+64]=k+L+1>>1,d[h+1+0]=Gt(y,w,k),d[h+3+0]=d[h+1+32]=Gt(w,k,L),d[h+3+32]=d[h+1+64]=Gt(k,L,L),d[h+3+64]=d[h+2+64]=d[h+0+96]=d[h+1+96]=d[h+2+96]=d[h+3+96]=L}function Sc(d,h){var y=d[h-1+0],w=d[h-1+32],k=d[h-1+64],L=d[h-1+96],F=d[h-1-32],U=d[h+0-32],q=d[h+1-32],Q=d[h+2-32];d[h+0+0]=d[h+2+32]=y+F+1>>1,d[h+0+32]=d[h+2+64]=w+y+1>>1,d[h+0+64]=d[h+2+96]=k+w+1>>1,d[h+0+96]=L+k+1>>1,d[h+3+0]=Gt(U,q,Q),d[h+2+0]=Gt(F,U,q),d[h+1+0]=d[h+3+32]=Gt(y,F,U),d[h+1+32]=d[h+3+64]=Gt(w,y,F),d[h+1+64]=d[h+3+96]=Gt(k,w,y),d[h+1+96]=Gt(L,k,w)}function Ac(d,h){var y;for(y=0;8>y;++y)r(d,h+32*y,d,h-32,8)}function El(d,h){var y;for(y=0;8>y;++y)i(d,h,d[h-1],8),h+=32}function Ro(d,h,y){var w;for(w=0;8>w;++w)i(h,y+32*w,d,8)}function tp(d,h){var y,w=8;for(y=0;8>y;++y)w+=d[h+y-32]+d[h-1+32*y];Ro(w>>4,d,h)}function Il(d,h){var y,w=4;for(y=0;8>y;++y)w+=d[h+y-32];Ro(w>>3,d,h)}function Jn(d,h){var y,w=4;for(y=0;8>y;++y)w+=d[h-1+32*y];Ro(w>>3,d,h)}function np(d,h){Ro(128,d,h)}function Fa(d,h,y){var w=d[h-y],k=d[h+0],L=3*(k-w)+bE[1020+d[h-2*y]-d[h+y]],F=z_[112+(L+4>>3)];d[h-y]=Rs[255+w+z_[112+(L+3>>3)]],d[h+0]=Rs[255+k-F]}function _u(d,h,y,w){var k=d[h+0],L=d[h+y];return ha[255+d[h-2*y]-d[h-y]]>w||ha[255+L-k]>w}function Sl(d,h,y,w){return 4*ha[255+d[h-y]-d[h+0]]+ha[255+d[h-2*y]-d[h+y]]<=w}function wu(d,h,y,w,k){var L=d[h-3*y],F=d[h-2*y],U=d[h-y],q=d[h+0],Q=d[h+y],se=d[h+2*y],ve=d[h+3*y];return 4*ha[255+U-q]+ha[255+F-Q]>w?0:ha[255+d[h-4*y]-L]<=k&&ha[255+L-F]<=k&&ha[255+F-U]<=k&&ha[255+ve-se]<=k&&ha[255+se-Q]<=k&&ha[255+Q-q]<=k}function la(d,h,y,w){var k=2*w+1;for(w=0;16>w;++w)Sl(d,h+w,y,k)&&Fa(d,h+w,y)}function bu(d,h,y,w){var k=2*w+1;for(w=0;16>w;++w)Sl(d,h+w*y,1,k)&&Fa(d,h+w*y,1)}function is(d,h,y,w){var k;for(k=3;0<k;--k)la(d,h+=4*y,y,w)}function lf(d,h,y,w){var k;for(k=3;0<k;--k)bu(d,h+=4,y,w)}function Va(d,h,y,w,k,L,F,U){for(L=2*L+1;0<k--;){if(wu(d,h,y,L,F))if(_u(d,h,y,U))Fa(d,h,y);else{var q=d,Q=h,se=y,ve=q[Q-2*se],Z=q[Q-se],ce=q[Q+0],pe=q[Q+se],Ne=q[Q+2*se],me=27*(Oe=bE[1020+3*(ce-Z)+bE[1020+ve-pe]])+63>>7,ke=18*Oe+63>>7,Oe=9*Oe+63>>7;q[Q-3*se]=Rs[255+q[Q-3*se]+Oe],q[Q-2*se]=Rs[255+ve+ke],q[Q-se]=Rs[255+Z+me],q[Q+0]=Rs[255+ce-me],q[Q+se]=Rs[255+pe-ke],q[Q+2*se]=Rs[255+Ne-Oe]}h+=w}}function Oo(d,h,y,w,k,L,F,U){for(L=2*L+1;0<k--;){if(wu(d,h,y,L,F))if(_u(d,h,y,U))Fa(d,h,y);else{var q=d,Q=h,se=y,ve=q[Q-se],Z=q[Q+0],ce=q[Q+se],pe=z_[112+(4+(Ne=3*(Z-ve))>>3)],Ne=z_[112+(Ne+3>>3)],me=pe+1>>1;q[Q-2*se]=Rs[255+q[Q-2*se]+me],q[Q-se]=Rs[255+ve+Ne],q[Q+0]=Rs[255+Z-pe],q[Q+se]=Rs[255+ce-me]}h+=w}}function uf(d,h,y,w,k,L){Va(d,h,y,1,16,w,k,L)}function ja(d,h,y,w,k,L){Va(d,h,1,y,16,w,k,L)}function Al(d,h,y,w,k,L){var F;for(F=3;0<F;--F)Oo(d,h+=4*y,y,1,16,w,k,L)}function v(d,h,y,w,k,L){var F;for(F=3;0<F;--F)Oo(d,h+=4,1,y,16,w,k,L)}function P(d,h,y,w,k,L,F,U){Va(d,h,k,1,8,L,F,U),Va(y,w,k,1,8,L,F,U)}function Y(d,h,y,w,k,L,F,U){Va(d,h,1,k,8,L,F,U),Va(y,w,1,k,8,L,F,U)}function ne(d,h,y,w,k,L,F,U){Oo(d,h+4*k,k,1,8,L,F,U),Oo(y,w+4*k,k,1,8,L,F,U)}function ue(d,h,y,w,k,L,F,U){Oo(d,h+4,1,k,8,L,F,U),Oo(y,w+4,1,k,8,L,F,U)}function Pe(){this.ba=new tn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Sn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ze(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ft(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function yt(){this.ua=0,this.Wa=new kt,this.vb=new kt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new _e,this.yc=new T}function qt(){this.xb=this.a=0,this.l=new Ec,this.ca=new tn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new yt,this.ab=0,this.gc=s(4,ft),this.Oc=0}function Kt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ec,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function _n(d,h,y,w,k,L,F){for(d=d==null?0:d[h+0],h=0;h<F;++h)k[L+h]=d+y[w+h]&255,d=k[L+h]}function fr(d,h,y,w,k,L,F){var U;if(d==null)_n(null,null,y,w,k,L,F);else for(U=0;U<F;++U)k[L+U]=d[h+U]+y[w+U]&255}function er(d,h,y,w,k,L,F){if(d==null)_n(null,null,y,w,k,L,F);else{var U,q=d[h+0],Q=q,se=q;for(U=0;U<F;++U)Q=se+(q=d[h+U])-Q,se=y[w+U]+(-256&Q?0>Q?0:255:Q)&255,Q=q,k[L+U]=se}}function qn(d,h,y,w){var k=h.width,L=h.o;if(e(d!=null&&h!=null),0>y||0>=w||y+w>L)return null;if(!d.Cc){if(d.ga==null){var F;if(d.ga=new Kt,(F=d.ga==null)||(F=h.width*h.o,e(d.Gb.length==0),d.Gb=o(F),d.Uc=0,d.Gb==null?F=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,F=1),F=!F),!F){F=d.ga;var U=d.Fa,q=d.P,Q=d.qc,se=d.mb,ve=d.nb,Z=q+1,ce=Q-1,pe=F.l;if(e(U!=null&&se!=null&&h!=null),Nu[0]=null,Nu[1]=_n,Nu[2]=fr,Nu[3]=er,F.ca=se,F.tb=ve,F.c=h.width,F.i=h.height,e(0<F.c&&0<F.i),1>=Q)h=0;else if(F.$a=3&U[q+0],F.Z=U[q+0]>>2&3,F.Lc=U[q+0]>>4&3,q=U[q+0]>>6&3,0>F.$a||1<F.$a||4<=F.Z||1<F.Lc||q)h=0;else if(pe.put=Mt,pe.ac=Es,pe.bc=ia,pe.ma=F,pe.width=h.width,pe.height=h.height,pe.Da=h.Da,pe.v=h.v,pe.va=h.va,pe.j=h.j,pe.o=h.o,F.$a)e:{e(F.$a==1),h=co();t:for(;;){if(h==null){h=0;break e}if(e(F!=null),F.mc=h,h.c=F.c,h.i=F.i,h.l=F.l,h.l.ma=F,h.l.width=F.c,h.l.height=F.i,h.a=0,Ae(h.m,U,Z,ce),!Ss(F.c,F.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&Is(h.s)?(F.ic=1,U=h.c*h.i,h.Ta=null,h.Ua=0,h.V=o(U),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(F.ic=0,h=bc(h,F.c)),!h))break t;h=1;break e}F.mc=null,h=0}else h=ce>=F.c*F.i;F=!h}if(F)return null;d.ga.Lc!=1?d.Ga=0:w=L-y}e(d.ga!=null),e(y+w<=L);e:{if(h=(U=d.ga).c,L=U.l.o,U.$a==0){if(Z=d.rc,ce=d.Vc,pe=d.Fa,q=d.P+1+y*h,Q=d.mb,se=d.nb+y*h,e(q<=d.P+d.qc),U.Z!=0)for(e(Nu[U.Z]!=null),F=0;F<w;++F)Nu[U.Z](Z,ce,pe,q,Q,se,h),Z=Q,ce=se,se+=h,q+=h;else for(F=0;F<w;++F)r(Q,se,pe,q,h),Z=Q,ce=se,se+=h,q+=h;d.rc=Z,d.Vc=ce}else{if(e(U.mc!=null),h=y+w,e((F=U.mc)!=null),e(h<=F.i),F.C>=h)h=1;else if(U.ic||yr(),U.ic){U=F.V,Z=F.Ba,ce=F.c;var Ne=F.i,me=(pe=1,q=F.$/ce,Q=F.$%ce,se=F.m,ve=F.s,F.$),ke=ce*Ne,Oe=ce*h,Ge=ve.wc,$e=me<Oe?Ci(ve,Q,q):null;e(me<=ke),e(h<=Ne),e(Is(ve));t:for(;;){for(;!se.h&&me<Oe;){if(Q&Ge||($e=Ci(ve,Q,q)),e($e!=null),he(se),256>(Ne=Xn($e.G[0],$e.H[0],se)))U[Z+me]=Ne,++me,++Q>=ce&&(Q=0,++q<=h&&!(q%16)&&ns(F,q));else{if(!(280>Ne)){pe=0;break t}Ne=Mo(Ne-256,se);var Tt,ht=Xn($e.G[4],$e.H[4],se);if(he(se),!(me>=(ht=Fi(ce,ht=Mo(ht,se)))&&ke-me>=Ne)){pe=0;break t}for(Tt=0;Tt<Ne;++Tt)U[Z+me+Tt]=U[Z+me+Tt-ht];for(me+=Ne,Q+=Ne;Q>=ce;)Q-=ce,++q<=h&&!(q%16)&&ns(F,q);me<Oe&&Q&Ge&&($e=Ci(ve,Q,q))}e(se.h==re(se))}ns(F,q>h?h:q);break t}!pe||se.h&&me<ke?(pe=0,F.a=se.h?5:3):F.$=me,h=pe}else h=Po(F,F.V,F.Ba,F.c,F.i,h,xc);if(!h){w=0;break e}}y+w>=L&&(d.Cc=1),w=1}if(!w)return null;if(d.Cc&&((w=d.ga)!=null&&(w.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+y*k}function zr(d,h,y,w,k,L){for(;0<k--;){var F,U=d,q=h+(y?1:0),Q=d,se=h+(y?0:3);for(F=0;F<w;++F){var ve=Q[se+4*F];ve!=255&&(ve*=32897,U[q+4*F+0]=U[q+4*F+0]*ve>>23,U[q+4*F+1]=U[q+4*F+1]*ve>>23,U[q+4*F+2]=U[q+4*F+2]*ve>>23)}h+=L}}function Or(d,h,y,w,k){for(;0<w--;){var L;for(L=0;L<y;++L){var F=d[h+2*L+0],U=15&(Q=d[h+2*L+1]),q=4369*U,Q=(240&Q|Q>>4)*q>>16;d[h+2*L+0]=(240&F|F>>4)*q>>16&240|(15&F|F<<4)*q>>16>>4&15,d[h+2*L+1]=240&Q|U}h+=k}}function di(d,h,y,w,k,L,F,U){var q,Q,se=255;for(Q=0;Q<k;++Q){for(q=0;q<w;++q){var ve=d[h+q];L[F+4*q]=ve,se&=ve}h+=y,F+=U}return se!=255}function os(d,h,y,w,k){var L;for(L=0;L<k;++L)y[w+L]=d[h+L]>>8}function yr(){g0=zr,HR=Or,GR=di,WR=os}function ua(d,h,y){I[d]=function(w,k,L,F,U,q,Q,se,ve,Z,ce,pe,Ne,me,ke,Oe,Ge){var $e,Tt=Ge-1>>1,ht=U[q+0]|Q[se+0]<<16,hn=ve[Z+0]|ce[pe+0]<<16;e(w!=null);var bt=3*ht+hn+131074>>2;for(h(w[k+0],255&bt,bt>>16,Ne,me),L!=null&&(bt=3*hn+ht+131074>>2,h(L[F+0],255&bt,bt>>16,ke,Oe)),$e=1;$e<=Tt;++$e){var Cn=U[q+$e]|Q[se+$e]<<16,Ii=ve[Z+$e]|ce[pe+$e]<<16,pn=ht+Cn+hn+Ii+524296,xt=pn+2*(Cn+hn)>>3;bt=xt+ht>>1,ht=(pn=pn+2*(ht+Ii)>>3)+Cn>>1,h(w[k+2*$e-1],255&bt,bt>>16,Ne,me+(2*$e-1)*y),h(w[k+2*$e-0],255&ht,ht>>16,Ne,me+(2*$e-0)*y),L!=null&&(bt=pn+hn>>1,ht=xt+Ii>>1,h(L[F+2*$e-1],255&bt,bt>>16,ke,Oe+(2*$e-1)*y),h(L[F+2*$e+0],255&ht,ht>>16,ke,Oe+(2*$e+0)*y)),ht=Cn,hn=Ii}1&Ge||(bt=3*ht+hn+131074>>2,h(w[k+Ge-1],255&bt,bt>>16,Ne,me+(Ge-1)*y),L!=null&&(bt=3*hn+ht+131074>>2,h(L[F+Ge-1],255&bt,bt>>16,ke,Oe+(Ge-1)*y)))}}function xu(){pa[q_]=CH,pa[$_]=iO,pa[JR]=EH,pa[H_]=oO,pa[G_]=sO,pa[xE]=aO,pa[eO]=IH,pa[CE]=iO,pa[EE]=oO,pa[W_]=sO,pa[IE]=aO}function Ns(d){return d&~SH?0>d?0:255:d>>cO}function f(d,h){return Ns((19077*d>>8)+(26149*h>>8)-14234)}function _(d,h,y){return Ns((19077*d>>8)-(6419*h>>8)-(13320*y>>8)+8708)}function C(d,h){return Ns((19077*d>>8)+(33050*h>>8)-17685)}function B(d,h,y,w,k){w[k+0]=f(d,y),w[k+1]=_(d,h,y),w[k+2]=C(d,h)}function le(d,h,y,w,k){w[k+0]=C(d,h),w[k+1]=_(d,h,y),w[k+2]=f(d,y)}function xe(d,h,y,w,k){var L=_(d,h,y);h=L<<3&224|C(d,h)>>3,w[k+0]=248&f(d,y)|L>>5,w[k+1]=h}function Ze(d,h,y,w,k){var L=240&C(d,h)|15;w[k+0]=240&f(d,y)|_(d,h,y)>>4,w[k+1]=L}function Dn(d,h,y,w,k){w[k+0]=255,B(d,h,y,w,k+1)}function Lr(d,h,y,w,k){le(d,h,y,w,k),w[k+3]=255}function Wt(d,h,y,w,k){B(d,h,y,w,k),w[k+3]=255}function hr(d,h,y){I[d]=function(w,k,L,F,U,q,Q,se,ve){for(var Z=se+(-2&ve)*y;se!=Z;)h(w[k+0],L[F+0],U[q+0],Q,se),h(w[k+1],L[F+0],U[q+0],Q,se+y),k+=2,++F,++q,se+=2*y;1&ve&&h(w[k+0],L[F+0],U[q+0],Q,se)}}function Fr(d,h,y){return y==0?d==0?h==0?6:5:h==0?4:0:y}function Ba(d,h,y,w,k){switch(d>>>30){case 3:hf(h,y,w,k,0);break;case 2:fa(h,y,w,k);break;case 1:jn(h,y,w,k)}}function Er(d,h){var y,w,k=h.M,L=h.Nb,F=d.oc,U=d.pc+40,q=d.oc,Q=d.pc+584,se=d.oc,ve=d.pc+600;for(y=0;16>y;++y)F[U+32*y-1]=129;for(y=0;8>y;++y)q[Q+32*y-1]=129,se[ve+32*y-1]=129;for(0<k?F[U-1-32]=q[Q-1-32]=se[ve-1-32]=129:(i(F,U-32-1,127,21),i(q,Q-32-1,127,9),i(se,ve-32-1,127,9)),w=0;w<d.za;++w){var Z=h.ya[h.aa+w];if(0<w){for(y=-1;16>y;++y)r(F,U+32*y-4,F,U+32*y+12,4);for(y=-1;8>y;++y)r(q,Q+32*y-4,q,Q+32*y+4,4),r(se,ve+32*y-4,se,ve+32*y+4,4)}var ce=d.Gd,pe=d.Hd+w,Ne=Z.ad,me=Z.Hc;if(0<k&&(r(F,U-32,ce[pe].y,0,16),r(q,Q-32,ce[pe].f,0,8),r(se,ve-32,ce[pe].ea,0,8)),Z.Za){var ke=F,Oe=U-32+16;for(0<k&&(w>=d.za-1?i(ke,Oe,ce[pe].y[15],4):r(ke,Oe,ce[pe+1].y,0,4)),y=0;4>y;y++)ke[Oe+128+y]=ke[Oe+256+y]=ke[Oe+384+y]=ke[Oe+0+y];for(y=0;16>y;++y,me<<=2)ke=F,Oe=U+uO[y],Ua[Z.Ob[y]](ke,Oe),Ba(me,Ne,16*+y,ke,Oe)}else if(ke=Fr(w,k,Z.Ob[0]),Mu[ke](F,U),me!=0)for(y=0;16>y;++y,me<<=2)Ba(me,Ne,16*+y,F,U+uO[y]);for(y=Z.Gc,ke=Fr(w,k,Z.Dd),Nl[ke](q,Q),Nl[ke](se,ve),me=Ne,ke=q,Oe=Q,255&(Z=0|y)&&(170&Z?Mc(me,256,ke,Oe):sr(me,256,ke,Oe)),Z=se,me=ve,255&(y>>=8)&&(170&y?Mc(Ne,320,Z,me):sr(Ne,320,Z,me)),k<d.Ub-1&&(r(ce[pe].y,0,F,U+480,16),r(ce[pe].f,0,q,Q+224,8),r(ce[pe].ea,0,se,ve+224,8)),y=8*L*d.B,ce=d.sa,pe=d.ta+16*w+16*L*d.R,Ne=d.qa,Z=d.ra+8*w+y,me=d.Ha,ke=d.Ia+8*w+y,y=0;16>y;++y)r(ce,pe+y*d.R,F,U+32*y,16);for(y=0;8>y;++y)r(Ne,Z+y*d.B,q,Q+32*y,8),r(me,ke+y*d.B,se,ve+32*y,8)}}function da(d,h,y,w,k,L,F,U,q){var Q=[0],se=[0],ve=0,Z=q!=null?q.kd:0,ce=q??new ze;if(d==null||12>y)return 7;ce.data=d,ce.w=h,ce.ha=y,h=[h],y=[y],ce.gb=[ce.gb];e:{var pe=h,Ne=y,me=ce.gb;if(e(d!=null),e(Ne!=null),e(me!=null),me[0]=0,12<=Ne[0]&&!t(d,pe[0],"RIFF")){if(t(d,pe[0]+8,"WEBP")){me=3;break e}var ke=ot(d,pe[0]+4);if(12>ke||4294967286<ke){me=3;break e}if(Z&&ke>Ne[0]-8){me=7;break e}me[0]=ke,pe[0]+=12,Ne[0]-=12}me=0}if(me!=0)return me;for(ke=0<ce.gb[0],y=y[0];;){e:{var Oe=d;Ne=h,me=y;var Ge=Q,$e=se,Tt=pe=[0];if((bt=ve=[ve])[0]=0,8>me[0])me=7;else{if(!t(Oe,Ne[0],"VP8X")){if(ot(Oe,Ne[0]+4)!=10){me=3;break e}if(18>me[0]){me=7;break e}var ht=ot(Oe,Ne[0]+8),hn=1+We(Oe,Ne[0]+12);if(2147483648<=hn*(Oe=1+We(Oe,Ne[0]+15))){me=3;break e}Tt!=null&&(Tt[0]=ht),Ge!=null&&(Ge[0]=hn),$e!=null&&($e[0]=Oe),Ne[0]+=18,me[0]-=18,bt[0]=1}me=0}}if(ve=ve[0],pe=pe[0],me!=0)return me;if(Ne=!!(2&pe),!ke&&ve)return 3;if(L!=null&&(L[0]=!!(16&pe)),F!=null&&(F[0]=Ne),U!=null&&(U[0]=0),F=Q[0],pe=se[0],ve&&Ne&&q==null){me=0;break}if(4>y){me=7;break}if(ke&&ve||!ke&&!ve&&!t(d,h[0],"ALPH")){y=[y],ce.na=[ce.na],ce.P=[ce.P],ce.Sa=[ce.Sa];e:{ht=d,me=h,ke=y;var bt=ce.gb;Ge=ce.na,$e=ce.P,Tt=ce.Sa,hn=22,e(ht!=null),e(ke!=null),Oe=me[0];var Cn=ke[0];for(e(Ge!=null),e(Tt!=null),Ge[0]=null,$e[0]=null,Tt[0]=0;;){if(me[0]=Oe,ke[0]=Cn,8>Cn){me=7;break e}var Ii=ot(ht,Oe+4);if(4294967286<Ii){me=3;break e}var pn=8+Ii+1&-2;if(hn+=pn,0<bt&&hn>bt){me=3;break e}if(!t(ht,Oe,"VP8 ")||!t(ht,Oe,"VP8L")){me=0;break e}if(Cn[0]<pn){me=7;break e}t(ht,Oe,"ALPH")||(Ge[0]=ht,$e[0]=Oe+8,Tt[0]=Ii),Oe+=pn,Cn-=pn}}if(y=y[0],ce.na=ce.na[0],ce.P=ce.P[0],ce.Sa=ce.Sa[0],me!=0)break}y=[y],ce.Ja=[ce.Ja],ce.xa=[ce.xa];e:if(bt=d,me=h,ke=y,Ge=ce.gb[0],$e=ce.Ja,Tt=ce.xa,ht=me[0],Oe=!t(bt,ht,"VP8 "),hn=!t(bt,ht,"VP8L"),e(bt!=null),e(ke!=null),e($e!=null),e(Tt!=null),8>ke[0])me=7;else{if(Oe||hn){if(bt=ot(bt,ht+4),12<=Ge&&bt>Ge-12){me=3;break e}if(Z&&bt>ke[0]-8){me=7;break e}$e[0]=bt,me[0]+=8,ke[0]-=8,Tt[0]=hn}else Tt[0]=5<=ke[0]&&bt[ht+0]==47&&!(bt[ht+4]>>5),$e[0]=ke[0];me=0}if(y=y[0],ce.Ja=ce.Ja[0],ce.xa=ce.xa[0],h=h[0],me!=0)break;if(4294967286<ce.Ja)return 3;if(U==null||Ne||(U[0]=ce.xa?2:1),F=[F],pe=[pe],ce.xa){if(5>y){me=7;break}U=F,Z=pe,Ne=L,d==null||5>y?d=0:5<=y&&d[h+0]==47&&!(d[h+4]>>5)?(ke=[0],bt=[0],Ge=[0],Ae($e=new H,d,h,y),vr($e,ke,bt,Ge)?(U!=null&&(U[0]=ke[0]),Z!=null&&(Z[0]=bt[0]),Ne!=null&&(Ne[0]=Ge[0]),d=1):d=0):d=0}else{if(10>y){me=7;break}U=pe,d==null||10>y||!sf(d,h+3,y-3)?d=0:(Z=d[h+0]|d[h+1]<<8|d[h+2]<<16,Ne=16383&(d[h+7]<<8|d[h+6]),d=16383&(d[h+9]<<8|d[h+8]),1&Z||3<(Z>>1&7)||!(Z>>4&1)||Z>>5>=ce.Ja||!Ne||!d?d=0:(F&&(F[0]=Ne),U&&(U[0]=d),d=1))}if(!d||(F=F[0],pe=pe[0],ve&&(Q[0]!=F||se[0]!=pe)))return 3;q!=null&&(q[0]=ce,q.offset=h-q.w,e(4294967286>h-q.w),e(q.offset==q.ha-y));break}return me==0||me==7&&ve&&q==null?(L!=null&&(L[0]|=ce.na!=null&&0<ce.na.length),w!=null&&(w[0]=F),k!=null&&(k[0]=pe),0):me}function Tl(d,h,y){var w=h.width,k=h.height,L=0,F=0,U=w,q=k;if(h.Da=d!=null&&0<d.Da,h.Da&&(U=d.cd,q=d.bd,L=d.v,F=d.j,11>y||(L&=-2,F&=-2),0>L||0>F||0>=U||0>=q||L+U>w||F+q>k))return 0;if(h.v=L,h.j=F,h.va=L+U,h.o=F+q,h.U=U,h.T=q,h.da=d!=null&&0<d.da,h.da){if(!Ct(U,q,y=[d.ib],L=[d.hb]))return 0;h.ib=y[0],h.hb=L[0]}return h.ob=d!=null&&d.ob,h.Kb=d==null||!d.Sd,h.da&&(h.ob=h.ib<3*w/4&&h.hb<3*k/4,h.Kb=0),1}function c0(d){if(d==null)return 2;if(11>d.S){var h=d.f.RGBA;h.fb+=(d.height-1)*h.A,h.A=-h.A}else h=d.f.kb,d=d.height,h.O+=(d-1)*h.fa,h.fa=-h.fa,h.N+=(d-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(d-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(d-1)*h.lb,h.lb=-h.lb);return 0}function Cu(d,h,y,w){if(w==null||0>=d||0>=h)return 2;if(y!=null){if(y.Da){var k=y.cd,L=y.bd,F=-2&y.v,U=-2&y.j;if(0>F||0>U||0>=k||0>=L||F+k>d||U+L>h)return 2;d=k,h=L}if(y.da){if(!Ct(d,h,k=[y.ib],L=[y.hb]))return 2;d=k[0],h=L[0]}}w.width=d,w.height=h;e:{var q=w.width,Q=w.height;if(d=w.S,0>=q||0>=Q||!(d>=q_&&13>d))d=2;else{if(0>=w.Rd&&w.sd==null){F=L=k=h=0;var se=(U=q*dO[d])*Q;if(11>d||(L=(Q+1)/2*(h=(q+1)/2),d==12&&(F=(k=q)*Q)),(Q=o(se+2*L+F))==null){d=1;break e}w.sd=Q,11>d?((q=w.f.RGBA).eb=Q,q.fb=0,q.A=U,q.size=se):((q=w.f.kb).y=Q,q.O=0,q.fa=U,q.Fd=se,q.f=Q,q.N=0+se,q.Ab=h,q.Cd=L,q.ea=Q,q.W=0+se+L,q.Db=h,q.Ed=L,d==12&&(q.F=Q,q.J=0+se+2*L),q.Tc=F,q.lb=k)}if(h=1,k=w.S,L=w.width,F=w.height,k>=q_&&13>k)if(11>k)d=w.f.RGBA,h&=(U=Math.abs(d.A))*(F-1)+L<=d.size,h&=U>=L*dO[k],h&=d.eb!=null;else{d=w.f.kb,U=(L+1)/2,se=(F+1)/2,q=Math.abs(d.fa),Q=Math.abs(d.Ab);var ve=Math.abs(d.Db),Z=Math.abs(d.lb),ce=Z*(F-1)+L;h&=q*(F-1)+L<=d.Fd,h&=Q*(se-1)+U<=d.Cd,h=(h&=ve*(se-1)+U<=d.Ed)&q>=L&Q>=U&ve>=U,h&=d.y!=null,h&=d.f!=null,h&=d.ea!=null,k==12&&(h&=Z>=L,h&=ce<=d.Tc,h&=d.F!=null)}else h=0;d=h?0:2}}return d!=0||y!=null&&y.fd&&(d=c0(w)),d}var df=64,Ps=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ks=24,Eu=32,Dl=8,Iu=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(d){return d},I.Predictor2=function(d,h,y){return h[y+0]},I.Predictor3=function(d,h,y){return h[y+1]},I.Predictor4=function(d,h,y){return h[y-1]},I.Predictor5=function(d,h,y){return Et(Et(d,h[y+1]),h[y+0])},I.Predictor6=function(d,h,y){return Et(d,h[y-1])},I.Predictor7=function(d,h,y){return Et(d,h[y+0])},I.Predictor8=function(d,h,y){return Et(h[y-1],h[y+0])},I.Predictor9=function(d,h,y){return Et(h[y+0],h[y+1])},I.Predictor10=function(d,h,y){return Et(Et(d,h[y-1]),Et(h[y+0],h[y+1]))},I.Predictor11=function(d,h,y){var w=h[y+0];return 0>=Ut(w>>24&255,d>>24&255,(h=h[y-1])>>24&255)+Ut(w>>16&255,d>>16&255,h>>16&255)+Ut(w>>8&255,d>>8&255,h>>8&255)+Ut(255&w,255&d,255&h)?w:d},I.Predictor12=function(d,h,y){var w=h[y+0];return(vn((d>>24&255)+(w>>24&255)-((h=h[y-1])>>24&255))<<24|vn((d>>16&255)+(w>>16&255)-(h>>16&255))<<16|vn((d>>8&255)+(w>>8&255)-(h>>8&255))<<8|vn((255&d)+(255&w)-(255&h)))>>>0},I.Predictor13=function(d,h,y){var w=h[y-1];return(Qt((d=Et(d,h[y+0]))>>24&255,w>>24&255)<<24|Qt(d>>16&255,w>>16&255)<<16|Qt(d>>8&255,w>>8&255)<<8|Qt(255&d,255&w))>>>0};var l0=I.PredictorAdd0;I.PredictorAdd1=Rt,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var rp=I.PredictorAdd2;It("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),It("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Yr,B_=I.ColorIndexInverseTransform,Tc=I.MapARGB,Dc=I.VP8LColorIndexInverseTransformAlpha,u0=I.MapAlpha,d0=I.VP8LPredictorsAdd=[];d0.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var f0,h0,Su,Au,Tu,ff,Du,hf,fa,Mc,jn,sr,Qr,Ei,Ml,p0,ip,U_,jR,BR,UR,zR,qR,$R,g0,HR,GR,WR,KR=o(511),YR=o(2041),QR=o(225),ZR=o(767),XR=0,bE=YR,z_=QR,Rs=ZR,ha=KR,q_=0,$_=1,JR=2,H_=3,G_=4,xE=5,eO=6,CE=7,EE=8,W_=9,IE=10,lH=[2,3,7],uH=[3,3,11],tO=[280,256,256,256,40],dH=[0,1,1,1,0],fH=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],hH=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],pH=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],gH=8,SE=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],AE=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],m0=null,mH=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],vH=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nO=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],yH=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_H=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],wH=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bH=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Mu=[],Ua=[],Nl=[],xH=1,rO=2,Nu=[],pa=[];ua("UpsampleRgbLinePair",B,3),ua("UpsampleBgrLinePair",le,3),ua("UpsampleRgbaLinePair",Wt,4),ua("UpsampleBgraLinePair",Lr,4),ua("UpsampleArgbLinePair",Dn,4),ua("UpsampleRgba4444LinePair",Ze,2),ua("UpsampleRgb565LinePair",xe,2);var CH=I.UpsampleRgbLinePair,EH=I.UpsampleBgrLinePair,iO=I.UpsampleRgbaLinePair,oO=I.UpsampleBgraLinePair,sO=I.UpsampleArgbLinePair,aO=I.UpsampleRgba4444LinePair,IH=I.UpsampleRgb565LinePair,K_=16,Y_=1<<K_-1,v0=-227,TE=482,cO=6,SH=(256<<cO)-1,lO=0,AH=o(256),TH=o(256),DH=o(256),MH=o(256),NH=o(TE-v0),PH=o(TE-v0);hr("YuvToRgbRow",B,3),hr("YuvToBgrRow",le,3),hr("YuvToRgbaRow",Wt,4),hr("YuvToBgraRow",Lr,4),hr("YuvToArgbRow",Dn,4),hr("YuvToRgba4444Row",Ze,2),hr("YuvToRgb565Row",xe,2);var uO=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Q_=[0,2,8],kH=[8,7,6,4,4,2,2,2,1,1,1,1],RH=1;this.WebPDecodeRGBA=function(d,h,y,w,k){var L=$_,F=new Pe,U=new tn;F.ba=U,U.S=L,U.width=[U.width],U.height=[U.height];var q=U.width,Q=U.height,se=new Lt;if(se==null||d==null)var ve=2;else e(se!=null),ve=da(d,h,y,se.width,se.height,se.Pd,se.Qd,se.format,null);if(ve!=0?q=0:(q!=null&&(q[0]=se.width[0]),Q!=null&&(Q[0]=se.height[0]),q=1),q){U.width=U.width[0],U.height=U.height[0],w!=null&&(w[0]=U.width),k!=null&&(k[0]=U.height);e:{if(w=new Ec,(k=new ze).data=d,k.w=h,k.ha=y,k.kd=1,h=[0],e(k!=null),((d=da(k.data,k.w,k.ha,null,null,null,h,null,k))==0||d==7)&&h[0]&&(d=4),(h=d)==0){if(e(F!=null),w.data=k.data,w.w=k.w+k.offset,w.ha=k.ha-k.offset,w.put=Mt,w.ac=Es,w.bc=ia,w.ma=F,k.xa){if((d=co())==null){F=1;break e}if((function(Z,ce){var pe=[0],Ne=[0],me=[0];t:for(;;){if(Z==null)return 0;if(ce==null)return Z.a=2,0;if(Z.l=ce,Z.a=0,Ae(Z.m,ce.data,ce.w,ce.ha),!vr(Z.m,pe,Ne,me)){Z.a=3;break t}if(Z.xb=rO,ce.width=pe[0],ce.height=Ne[0],!Ss(pe[0],Ne[0],1,Z,null))break t;return 1}return e(Z.a!=0),0})(d,w)){if(w=(h=Cu(w.width,w.height,F.Oa,F.ba))==0){t:{w=d;n:for(;;){if(w==null){w=0;break t}if(e(w.s.yc!=null),e(w.s.Ya!=null),e(0<w.s.Wb),e((y=w.l)!=null),e((k=y.ma)!=null),w.xb!=0){if(w.ca=k.ba,w.tb=k.tb,e(w.ca!=null),!Tl(k.Oa,y,H_)){w.a=2;break n}if(!bc(w,y.width)||y.da)break n;if((y.da||Ft(w.ca.S))&&yr(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&yr()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!$(w.s.vb,w.s.Wa.Xa)){w.a=1;break n}w.xb=0}if(!Po(w,w.V,w.Ba,w.c,w.i,y.o,wc))break n;k.Dc=w.Ma,w=1;break t}e(w.a!=0),w=0}w=!w}w&&(h=d.a)}else h=d.a}else{if((d=new of)==null){F=1;break e}if(d.Fa=k.na,d.P=k.P,d.qc=k.Sa,sa(d,w)){if((h=Cu(w.width,w.height,F.Oa,F.ba))==0){if(d.Aa=0,y=F.Oa,e((k=d)!=null),y!=null){if(0<(q=0>(q=y.Md)?0:100<q?255:255*q/100)){for(Q=se=0;4>Q;++Q)12>(ve=k.pb[Q]).lc&&(ve.ia=q*kH[0>ve.lc?0:ve.lc]>>3),se|=ve.ia;se&&(alert("todo:VP8InitRandom"),k.ia=1)}k.Ga=y.Id,100<k.Ga?k.Ga=100:0>k.Ga&&(k.Ga=0)}(function(Z,ce){if(Z==null)return 0;if(ce==null)return Rr(Z,2,"NULL VP8Io parameter in VP8Decode().");if(!Z.cb&&!sa(Z,ce))return 0;if(e(Z.cb),ce.ac==null||ce.ac(ce)){ce.ob&&(Z.L=0);var pe=Q_[Z.L];if(Z.L==2?(Z.yb=0,Z.zb=0):(Z.yb=ce.v-pe>>4,Z.zb=ce.j-pe>>4,0>Z.yb&&(Z.yb=0),0>Z.zb&&(Z.zb=0)),Z.Va=ce.o+15+pe>>4,Z.Hb=ce.va+15+pe>>4,Z.Hb>Z.za&&(Z.Hb=Z.za),Z.Va>Z.Ub&&(Z.Va=Z.Ub),0<Z.L){var Ne=Z.ed;for(pe=0;4>pe;++pe){var me;if(Z.Qa.Cb){var ke=Z.Qa.Lb[pe];Z.Qa.Fb||(ke+=Ne.Tb)}else ke=Ne.Tb;for(me=0;1>=me;++me){var Oe=Z.gd[pe][me],Ge=ke;if(Ne.Pc&&(Ge+=Ne.vd[0],me&&(Ge+=Ne.od[0])),0<(Ge=0>Ge?0:63<Ge?63:Ge)){var $e=Ge;0<Ne.wb&&($e=4<Ne.wb?$e>>2:$e>>1)>9-Ne.wb&&($e=9-Ne.wb),1>$e&&($e=1),Oe.dd=$e,Oe.tc=2*Ge+$e,Oe.ld=40<=Ge?2:15<=Ge?1:0}else Oe.tc=0;Oe.La=me}}}pe=0}else Rr(Z,6,"Frame setup failed"),pe=Z.a;if(pe=pe==0){if(pe){Z.$c=0,0<Z.Aa||(Z.Ic=RH);t:{pe=Z.Ic,Ne=4*($e=Z.za);var Tt=32*$e,ht=$e+1,hn=0<Z.L?$e*(0<Z.Aa?2:1):0,bt=(Z.Aa==2?2:1)*$e;if((Oe=Ne+832+(me=3*(16*pe+Q_[Z.L])/2*Tt)+(ke=Z.Fa!=null&&0<Z.Fa.length?Z.Kc.c*Z.Kc.i:0))!=Oe)pe=0;else{if(Oe>Z.Vb){if(Z.Vb=0,Z.Ec=o(Oe),Z.Fc=0,Z.Ec==null){pe=Rr(Z,1,"no memory during frame initialization.");break t}Z.Vb=Oe}Oe=Z.Ec,Ge=Z.Fc,Z.Ac=Oe,Z.Bc=Ge,Ge+=Ne,Z.Gd=s(Tt,nf),Z.Hd=0,Z.rb=s(ht+1,Oa),Z.sb=1,Z.wa=hn?s(hn,lo):null,Z.Y=0,Z.D.Nb=0,Z.D.wa=Z.wa,Z.D.Y=Z.Y,0<Z.Aa&&(Z.D.Y+=$e),e(!0),Z.oc=Oe,Z.pc=Ge,Ge+=832,Z.ya=s(bt,bl),Z.aa=0,Z.D.ya=Z.ya,Z.D.aa=Z.aa,Z.Aa==2&&(Z.D.aa+=$e),Z.R=16*$e,Z.B=8*$e,$e=(Tt=Q_[Z.L])*Z.R,Tt=Tt/2*Z.B,Z.sa=Oe,Z.ta=Ge+$e,Z.qa=Z.sa,Z.ra=Z.ta+16*pe*Z.R+Tt,Z.Ha=Z.qa,Z.Ia=Z.ra+8*pe*Z.B+Tt,Z.$c=0,Ge+=me,Z.mb=ke?Oe:null,Z.nb=ke?Ge:null,e(Ge+ke<=Z.Fc+Z.Vb),af(Z),i(Z.Ac,Z.Bc,0,Ne),pe=1}}if(pe){if(ce.ka=0,ce.y=Z.sa,ce.O=Z.ta,ce.f=Z.qa,ce.N=Z.ra,ce.ea=Z.Ha,ce.Vd=Z.Ia,ce.fa=Z.R,ce.Rc=Z.B,ce.F=null,ce.J=0,!XR){for(pe=-255;255>=pe;++pe)KR[255+pe]=0>pe?-pe:pe;for(pe=-1020;1020>=pe;++pe)YR[1020+pe]=-128>pe?-128:127<pe?127:pe;for(pe=-112;112>=pe;++pe)QR[112+pe]=-16>pe?-16:15<pe?15:pe;for(pe=-255;510>=pe;++pe)ZR[255+pe]=0>pe?0:255<pe?255:pe;XR=1}Du=aa,hf=vu,Mc=Ts,jn=Vn,sr=xl,fa=mu,Qr=uf,Ei=ja,Ml=P,p0=Y,ip=Al,U_=v,jR=ne,BR=ue,UR=la,zR=bu,qR=is,$R=lf,Ua[0]=o0,Ua[1]=n0,Ua[2]=Ic,Ua[3]=i0,Ua[4]=La,Ua[5]=s0,Ua[6]=Vi,Ua[7]=a0,Ua[8]=Sc,Ua[9]=ca,Mu[0]=Cl,Mu[1]=r0,Mu[2]=cf,Mu[3]=Jh,Mu[4]=uo,Mu[5]=yu,Mu[6]=ep,Nl[0]=tp,Nl[1]=Xh,Nl[2]=Ac,Nl[3]=El,Nl[4]=Jn,Nl[5]=Il,Nl[6]=np,pe=1}else pe=0}pe&&(pe=(function(Cn,Ii){for(Cn.M=0;Cn.M<Cn.Va;++Cn.M){var pn,xt=Cn.Jc[Cn.M&Cn.Xb],nt=Cn.m,Zr=Cn;for(pn=0;pn<Zr.za;++pn){var on=nt,An=Zr,_r=An.Ac,Wi=An.Bc+4*pn,Lo=An.zc,qr=An.ya[An.aa+pn];if(An.Qa.Bb?qr.$b=De(on,An.Pa.jb[0])?2+De(on,An.Pa.jb[2]):De(on,An.Pa.jb[1]):qr.$b=0,An.kc&&(qr.Ad=De(on,An.Bd)),qr.Za=!De(on,145)+0,qr.Za){var fo=qr.Ob,Fo=0;for(An=0;4>An;++An){var Si,Mn=Lo[0+An];for(Si=0;4>Si;++Si){Mn=_H[_r[Wi+Si]][Mn];for(var $n=nO[De(on,Mn[0])];0<$n;)$n=nO[2*$n+De(on,Mn[$n])];Mn=-$n,_r[Wi+Si]=Mn}r(fo,Fo,_r,Wi,4),Fo+=4,Lo[0+An]=Mn}}else Mn=De(on,156)?De(on,128)?1:3:De(on,163)?2:0,qr.Ob[0]=Mn,i(_r,Wi,Mn,4),i(Lo,0,Mn,4);qr.Dd=De(on,142)?De(on,114)?De(on,183)?1:3:2:0}if(Zr.m.Ka)return Rr(Cn,7,"Premature end-of-partition0 encountered.");for(;Cn.ja<Cn.za;++Cn.ja){if(Zr=xt,on=(nt=Cn).rb[nt.sb-1],_r=nt.rb[nt.sb+nt.ja],pn=nt.ya[nt.aa+nt.ja],Wi=nt.kc?pn.Ad:0)on.la=_r.la=0,pn.Za||(on.Na=_r.Na=0),pn.Hc=0,pn.Gc=0,pn.ia=0;else{var $r,Hn;if(on=_r,_r=Zr,Wi=nt.Pa.Xc,Lo=nt.ya[nt.aa+nt.ja],qr=nt.pb[Lo.$b],An=Lo.ad,fo=0,Fo=nt.rb[nt.sb-1],Mn=Si=0,i(An,fo,0,384),Lo.Za)var Ki=0,za=Wi[3];else{$n=o(16);var Xr=on.Na+Fo.Na;if(Xr=m0(_r,Wi[1],Xr,qr.Eb,0,$n,0),on.Na=Fo.Na=(0<Xr)+0,1<Xr)Du($n,0,An,fo);else{var ss=$n[0]+3>>3;for($n=0;256>$n;$n+=16)An[fo+$n]=ss}Ki=1,za=Wi[0]}var ar=15&on.la,Ai=15&Fo.la;for($n=0;4>$n;++$n){var Os=1&Ai;for(ss=Hn=0;4>ss;++ss)ar=ar>>1|(Os=(Xr=m0(_r,za,Xr=Os+(1&ar),qr.Sc,Ki,An,fo))>Ki)<<7,Hn=Hn<<2|(3<Xr?3:1<Xr?2:An[fo+0]!=0),fo+=16;ar>>=4,Ai=Ai>>1|Os<<7,Si=(Si<<8|Hn)>>>0}for(za=ar,Ki=Ai>>4,$r=0;4>$r;$r+=2){for(Hn=0,ar=on.la>>4+$r,Ai=Fo.la>>4+$r,$n=0;2>$n;++$n){for(Os=1&Ai,ss=0;2>ss;++ss)Xr=Os+(1&ar),ar=ar>>1|(Os=0<(Xr=m0(_r,Wi[2],Xr,qr.Qc,0,An,fo)))<<3,Hn=Hn<<2|(3<Xr?3:1<Xr?2:An[fo+0]!=0),fo+=16;ar>>=2,Ai=Ai>>1|Os<<5}Mn|=Hn<<4*$r,za|=ar<<4<<$r,Ki|=(240&Ai)<<$r}on.la=za,Fo.la=Ki,Lo.Hc=Si,Lo.Gc=Mn,Lo.ia=43690&Mn?0:qr.ia,Wi=!(Si|Mn)}if(0<nt.L&&(nt.wa[nt.Y+nt.ja]=nt.gd[pn.$b][pn.Za],nt.wa[nt.Y+nt.ja].La|=!Wi),Zr.Ka)return Rr(Cn,7,"Premature end-of-file encountered.")}if(af(Cn),nt=Ii,Zr=1,pn=(xt=Cn).D,on=0<xt.L&&xt.M>=xt.zb&&xt.M<=xt.Va,xt.Aa==0)t:{if(pn.M=xt.M,pn.uc=on,Er(xt,pn),Zr=1,pn=(Hn=xt.D).Nb,on=(Mn=Q_[xt.L])*xt.R,_r=Mn/2*xt.B,$n=16*pn*xt.R,ss=8*pn*xt.B,Wi=xt.sa,Lo=xt.ta-on+$n,qr=xt.qa,An=xt.ra-_r+ss,fo=xt.Ha,Fo=xt.Ia-_r+ss,Ai=(ar=Hn.M)==0,Si=ar>=xt.Va-1,xt.Aa==2&&Er(xt,Hn),Hn.uc)for(Os=(Xr=xt).D.M,e(Xr.D.uc),Hn=Xr.yb;Hn<Xr.Hb;++Hn){Ki=Hn,za=Os;var Vo=(Ls=(Yi=Xr).D).Nb;$r=Yi.R;var Ls=Ls.wa[Ls.Y+Ki],Fs=Yi.sa,as=Yi.ta+16*Vo*$r+16*Ki,Vs=Ls.dd,pr=Ls.tc;if(pr!=0)if(e(3<=pr),Yi.L==1)0<Ki&&zR(Fs,as,$r,pr+4),Ls.La&&$R(Fs,as,$r,pr),0<za&&UR(Fs,as,$r,pr+4),Ls.La&&qR(Fs,as,$r,pr);else{var js=Yi.B,qa=Yi.qa,pf=Yi.ra+8*Vo*js+8*Ki,Pl=Yi.Ha,Yi=Yi.Ia+8*Vo*js+8*Ki;Vo=Ls.ld,0<Ki&&(Ei(Fs,as,$r,pr+4,Vs,Vo),p0(qa,pf,Pl,Yi,js,pr+4,Vs,Vo)),Ls.La&&(U_(Fs,as,$r,pr,Vs,Vo),BR(qa,pf,Pl,Yi,js,pr,Vs,Vo)),0<za&&(Qr(Fs,as,$r,pr+4,Vs,Vo),Ml(qa,pf,Pl,Yi,js,pr+4,Vs,Vo)),Ls.La&&(ip(Fs,as,$r,pr,Vs,Vo),jR(qa,pf,Pl,Yi,js,pr,Vs,Vo))}}if(xt.ia&&alert("todo:DitherRow"),nt.put!=null){if(Hn=16*ar,ar=16*(ar+1),Ai?(nt.y=xt.sa,nt.O=xt.ta+$n,nt.f=xt.qa,nt.N=xt.ra+ss,nt.ea=xt.Ha,nt.W=xt.Ia+ss):(Hn-=Mn,nt.y=Wi,nt.O=Lo,nt.f=qr,nt.N=An,nt.ea=fo,nt.W=Fo),Si||(ar-=Mn),ar>nt.o&&(ar=nt.o),nt.F=null,nt.J=null,xt.Fa!=null&&0<xt.Fa.length&&Hn<ar&&(nt.J=qn(xt,nt,Hn,ar-Hn),nt.F=xt.mb,nt.F==null&&nt.F.length==0)){Zr=Rr(xt,3,"Could not decode alpha data.");break t}Hn<nt.j&&(Mn=nt.j-Hn,Hn=nt.j,e(!(1&Mn)),nt.O+=xt.R*Mn,nt.N+=xt.B*(Mn>>1),nt.W+=xt.B*(Mn>>1),nt.F!=null&&(nt.J+=nt.width*Mn)),Hn<ar&&(nt.O+=nt.v,nt.N+=nt.v>>1,nt.W+=nt.v>>1,nt.F!=null&&(nt.J+=nt.v),nt.ka=Hn-nt.j,nt.U=nt.va-nt.v,nt.T=ar-Hn,Zr=nt.put(nt))}pn+1!=xt.Ic||Si||(r(xt.sa,xt.ta-on,Wi,Lo+16*xt.R,on),r(xt.qa,xt.ra-_r,qr,An+8*xt.B,_r),r(xt.Ha,xt.Ia-_r,fo,Fo+8*xt.B,_r))}if(!Zr)return Rr(Cn,6,"Output aborted.")}return 1})(Z,ce)),ce.bc!=null&&ce.bc(ce),pe&=1}return pe?(Z.cb=0,pe):0})(d,w)||(h=d.a)}}else h=d.a}h==0&&F.Oa!=null&&F.Oa.fd&&(h=c0(F.ba))}F=h}L=F!=0?null:11>L?U.f.RGBA.eb:U.f.kb.y}else L=null;return L};var dO=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(I,V){for(var b="",S=0;S<4;S++)b+=String.fromCharCode(I[V++]);return b}function u(I,V){return I[V+0]|I[V+1]<<8}function p(I,V){return(I[V+0]|I[V+1]<<8|I[V+2]<<16)>>>0}function m(I,V){return(I[V+0]|I[V+1]<<8|I[V+2]<<16|I[V+3]<<24)>>>0}new c;var g=[0],x=[0],E=[],D=new c,N=n,K=(function(I,V){var b={},S=0,T=!1,te=0,_e=0;if(b.frames=[],!(function(O,H){for(var J=0;J<4;J++)if(O[H+J]!="RIFF".charCodeAt(J))return!0;return!1})(I,V)){for(m(I,V+=4),V+=8;V<I.length;){var Te=l(I,V),be=m(I,V+=4);V+=4;var de=be+(1&be);switch(Te){case"VP8 ":case"VP8L":b.frames[S]===void 0&&(b.frames[S]={}),(Re=b.frames[S]).src_off=T?_e:V-8,Re.src_size=te+be+8,S++,T&&(T=!1,te=0,_e=0);break;case"VP8X":(Re=b.header={}).feature_flags=I[V];var Ae=V+4;Re.canvas_width=1+p(I,Ae),Ae+=3,Re.canvas_height=1+p(I,Ae),Ae+=3;break;case"ALPH":T=!0,te=de+8,_e=V-8;break;case"ANIM":(Re=b.header).bgcolor=m(I,V),Ae=V+4,Re.loop_count=u(I,Ae),Ae+=2;break;case"ANMF":var Be,Re;(Re=b.frames[S]={}).offset_x=2*p(I,V),V+=3,Re.offset_y=2*p(I,V),V+=3,Re.width=1+p(I,V),V+=3,Re.height=1+p(I,V),V+=3,Re.duration=p(I,V),V+=3,Be=I[V++],Re.dispose=1&Be,Re.blend=Be>>1&1}Te!="ANMF"&&(V+=de)}return b}})(N,0);K.response=N,K.rgbaoutput=!0,K.dataurl=!1;var j=K.header?K.header:null,G=K.frames?K.frames:null;if(j){j.loop_counter=j.loop_count,g=[j.canvas_height],x=[j.canvas_width];for(var oe=0;oe<G.length&&G[oe].blend!=0;oe++);}var fe=G[0],z=D.WebPDecodeRGBA(N,fe.src_off,fe.src_size,x,g);fe.rgba=z,fe.imgwidth=x[0],fe.imgheight=g[0];for(var M=0;M<x[0]*g[0]*4;M++)E[M]=z[M];return this.width=x,this.height=g,this.data=E,this}(function(n){var e,t,r,i,o,s,a,c,l,u=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new s,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new s,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,l=new u}]);var p=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=O;Object.defineProperty(this,"pdf",{get:function(){return H}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function($){J=!!$}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function($){re=!!$}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function($){isNaN($)||(ae=$)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function($){isNaN($)||(he=$)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function($){var Ke;typeof $=="number"?Ke=[$,$,$,$]:((Ke=new Array(4))[0]=$[0],Ke[1]=$.length>=2?$[1]:Ke[0],Ke[2]=$.length>=3?$[2]:Ke[0],Ke[3]=$.length>=4?$[3]:Ke[1]),l.margin=Ke}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function($){Ee=$}});var ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return ye},set:function($){ye=$}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function($){De=$}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function($){$ instanceof u&&(l=$)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function($){l.path=$}});var Ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ue},set:function($){Ue=$}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function($){var Ke;Ke=m($),this.ctx.fillStyle=Ke.style,this.ctx.isFillTransparent=Ke.a===0,this.ctx.fillOpacity=Ke.a,this.pdf.setFillColor(Ke.r,Ke.g,Ke.b,{a:Ke.a}),this.pdf.setTextColor(Ke.r,Ke.g,Ke.b,{a:Ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function($){var Ke=m($);this.ctx.strokeStyle=Ke.style,this.ctx.isStrokeTransparent=Ke.a===0,this.ctx.strokeOpacity=Ke.a,Ke.a===0?this.pdf.setDrawColor(255,255,255):(Ke.a,this.pdf.setDrawColor(Ke.r,Ke.g,Ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function($){["butt","round","square"].indexOf($)!==-1&&(this.ctx.lineCap=$,this.pdf.setLineCap($))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function($){isNaN($)||(this.ctx.lineWidth=$,this.pdf.setLineWidth($))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function($){["bevel","round","miter"].indexOf($)!==-1&&(this.ctx.lineJoin=$,this.pdf.setLineJoin($))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function($){isNaN($)||(this.ctx.miterLimit=$,this.pdf.setMiterLimit($))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function($){this.ctx.textBaseline=$}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function($){["right","end","center","left","start"].indexOf($)!==-1&&(this.ctx.textAlign=$)}});var Xe=null,We=null,ot=null;Object.defineProperty(this,"fontFaces",{get:function(){return ot},set:function($){Xe=null,We=null,ot=$}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function($){var Ke;if(this.ctx.font=$,(Ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec($))!==null){var kt=Ke[1];Ke[2];var Ct=Ke[3],qe=Ke[4];Ke[5];var At=Ke[6],st=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(qe)[2];qe=Math.floor(st==="px"?parseFloat(qe)*this.pdf.internal.scaleFactor:st==="em"?parseFloat(qe)*this.pdf.getFontSize():parseFloat(qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(qe);var vt=(function(It){var kr,yn,sn=[],an=It.trim();if(an==="")return uk;if(an in q9)return[q9[an]];for(;an!=="";){switch(yn=null,kr=(an=H9(an)).charAt(0)){case'"':case"'":yn=ple(an.substring(1),kr);break;default:yn=gle(an)}if(yn===null||(sn.push(yn[0]),(an=H9(yn[1]))!==""&&an.charAt(0)!==","))return uk;an=an.replace(/^,/,"")}return sn})(At);if(this.fontFaces){var Et=(function(It,kr){var yn=It.getFontList(),sn=JSON.stringify(yn);if(Xe===null||We!==sn){var an=(function(Qn){var Nt=[];return Object.keys(Qn).forEach(function(Zn){Qn[Zn].forEach(function(Ft){var Zt=null;switch(Ft){case"bold":Zt={family:Zn,weight:"bold"};break;case"italic":Zt={family:Zn,style:"italic"};break;case"bolditalic":Zt={family:Zn,weight:"bold",style:"italic"};break;case"":case"normal":Zt={family:Zn}}Zt!==null&&(Zt.ref={name:Zn,style:Ft},Nt.push(Zt))})}),Nt})(yn);Xe=(function(Qn){for(var Nt={},Zn=0;Zn<Qn.length;++Zn){var Ft=lk(Qn[Zn]),Zt=Ft.family,or=Ft.stretch,tn=Ft.style,Lt=Ft.weight;Nt[Zt]=Nt[Zt]||{},Nt[Zt][or]=Nt[Zt][or]||{},Nt[Zt][or][tn]=Nt[Zt][or][tn]||{},Nt[Zt][or][tn][Lt]=Ft}return Nt})(an.concat(kr)),We=sn}return Xe})(this.pdf,this.fontFaces),vn=vt.map(function(It){return{family:It,stretch:"normal",weight:Ct,style:kt}}),Qt=(function(It,kr,yn){for(var sn=(yn=yn||{}).defaultFontFamily||"times",an=Object.assign({},hle,yn.genericFontFamilies||{}),Qn=null,Nt=null,Zn=0;Zn<kr.length;++Zn)if(an[(Qn=lk(kr[Zn])).family]&&(Qn.family=an[Qn.family]),It.hasOwnProperty(Qn.family)){Nt=It[Qn.family];break}if(!(Nt=Nt||It[sn]))throw new Error("Could not find a font-family for the rule '"+$9(Qn)+"' and default family '"+sn+"'.");if(Nt=(function(Ft,Zt){if(Zt[Ft])return Zt[Ft];var or=mk[Ft],tn=or<=mk.normal?-1:1,Lt=z9(Zt,pz,or,tn);if(!Lt)throw new Error("Could not find a matching font-stretch value for "+Ft);return Lt})(Qn.stretch,Nt),Nt=(function(Ft,Zt){if(Zt[Ft])return Zt[Ft];for(var or=hz[Ft],tn=0;tn<or.length;++tn)if(Zt[or[tn]])return Zt[or[tn]];throw new Error("Could not find a matching font-style for "+Ft)})(Qn.style,Nt),!(Nt=(function(Ft,Zt){if(Zt[Ft])return Zt[Ft];if(Ft===400&&Zt[500])return Zt[500];if(Ft===500&&Zt[400])return Zt[400];var or=fle[Ft],tn=z9(Zt,gz,or,Ft<400?-1:1);if(!tn)throw new Error("Could not find a matching font-weight for value "+Ft);return tn})(Qn.weight,Nt)))throw new Error("Failed to resolve a font for the rule '"+$9(Qn)+"'.");return Nt})(Et,vn);this.pdf.setFont(Qt.ref.name,Qt.ref.style)}else{var Ut="";(Ct==="bold"||parseInt(Ct,10)>=700||kt==="bold")&&(Ut="bold"),kt==="italic"&&(Ut+="italic"),Ut.length===0&&(Ut="normal");for(var Rt="",Ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gt=0;gt<vt.length;gt++){if(this.pdf.internal.getFont(vt[gt],Ut,{noFallback:!0,disableWarning:!0})!==void 0){Rt=vt[gt];break}if(Ut==="bolditalic"&&this.pdf.internal.getFont(vt[gt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rt=vt[gt],Ut="bold";else if(this.pdf.internal.getFont(vt[gt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rt=vt[gt],Ut="normal";break}}if(Rt===""){for(var Xt=0;Xt<vt.length;Xt++)if(Ot[vt[Xt]]){Rt=Ot[vt[Xt]];break}}Rt=Rt===""?"Times":Rt,this.pdf.setFont(Rt,Ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function($){this.ctx.globalCompositeOperation=$}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function($){this.ctx.globalAlpha=$}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function($){this.ctx.lineDashOffset=$,Re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function($){this.ctx.lineDash=$,Re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function($){this.ctx.ignoreClearRect=!!$}})};p.prototype.setLineDash=function(O){this.lineDash=O},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){G.call(this,"fill",!1)},p.prototype.stroke=function(){G.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(O,H){if(isNaN(O)||isNaN(H))throw dr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new s(O,H));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(O,H)},p.prototype.closePath=function(){var O=new s(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Un(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){O=new s(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(O.x,O.y)},p.prototype.lineTo=function(O,H){if(isNaN(O)||isNaN(H))throw dr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new s(O,H));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},p.prototype.quadraticCurveTo=function(O,H,J,re){if(isNaN(J)||isNaN(re)||isNaN(O)||isNaN(H))throw dr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new s(J,re)),he=this.ctx.transform.applyToPoint(new s(O,H));this.path.push({type:"qct",x1:he.x,y1:he.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new s(ae.x,ae.y)},p.prototype.bezierCurveTo=function(O,H,J,re,ae,he){if(isNaN(ae)||isNaN(he)||isNaN(O)||isNaN(H)||isNaN(J)||isNaN(re))throw dr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new s(ae,he)),ye=this.ctx.transform.applyToPoint(new s(O,H)),De=this.ctx.transform.applyToPoint(new s(J,re));this.path.push({type:"bct",x1:ye.x,y1:ye.y,x2:De.x,y2:De.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new s(Ee.x,Ee.y)},p.prototype.arc=function(O,H,J,re,ae,he){if(isNaN(O)||isNaN(H)||isNaN(J)||isNaN(re)||isNaN(ae))throw dr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new s(O,H));O=Ee.x,H=Ee.y;var ye=this.ctx.transform.applyToPoint(new s(0,J)),De=this.ctx.transform.applyToPoint(new s(0,0));J=Math.sqrt(Math.pow(ye.x-De.x,2)+Math.pow(ye.y-De.y,2))}Math.abs(ae-re)>=2*Math.PI&&(re=0,ae=2*Math.PI),this.path.push({type:"arc",x:O,y:H,radius:J,startAngle:re,endAngle:ae,counterclockwise:he})},p.prototype.arcTo=function(O,H,J,re,ae){throw new Error("arcTo not implemented.")},p.prototype.rect=function(O,H,J,re){if(isNaN(O)||isNaN(H)||isNaN(J)||isNaN(re))throw dr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,H),this.lineTo(O+J,H),this.lineTo(O+J,H+re),this.lineTo(O,H+re),this.lineTo(O,H),this.lineTo(O+J,H),this.lineTo(O,H)},p.prototype.fillRect=function(O,H,J,re){if(isNaN(O)||isNaN(H)||isNaN(J)||isNaN(re))throw dr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,H,J,re),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},p.prototype.strokeRect=function(O,H,J,re){if(isNaN(O)||isNaN(H)||isNaN(J)||isNaN(re))throw dr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(O,H,J,re),this.stroke())},p.prototype.clearRect=function(O,H,J,re){if(isNaN(O)||isNaN(H)||isNaN(J)||isNaN(re))throw dr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,H,J,re))},p.prototype.save=function(O){O=typeof O!="boolean"||O;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},p.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(H),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(O){var H,J,re,ae;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))H=0,J=0,re=0,ae=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(he!==null)H=parseInt(he[1]),J=parseInt(he[2]),re=parseInt(he[3]),ae=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)H=parseInt(he[1]),J=parseInt(he[2]),re=parseInt(he[3]),ae=parseFloat(he[4]);else{if(ae=1,typeof O=="string"&&O.charAt(0)!=="#"){var Ee=new sz(O);O=Ee.ok?Ee.toHex():"#000000"}O.length===4?(H=O.substring(1,2),H+=H,J=O.substring(2,3),J+=J,re=O.substring(3,4),re+=re):(H=O.substring(1,3),J=O.substring(3,5),re=O.substring(5,7)),H=parseInt(H,16),J=parseInt(J,16),re=parseInt(re,16)}}return{r:H,g:J,b:re,a:ae,style:O}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(O,H,J,re){if(isNaN(H)||isNaN(J)||typeof O!="string")throw dr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!g.call(this)){var ae=de(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;S.call(this,{text:O,x:H,y:J,scale:he,angle:ae,align:this.textAlign,maxWidth:re})}},p.prototype.strokeText=function(O,H,J,re){if(isNaN(H)||isNaN(J)||typeof O!="string")throw dr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){re=isNaN(re)?void 0:re;var ae=de(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;S.call(this,{text:O,x:H,y:J,scale:he,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:re})}},p.prototype.measureText=function(O){if(typeof O!="string")throw dr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,J=this.pdf.internal.scaleFactor,re=H.internal.getFontSize(),ae=H.getStringUnitWidth(O)*re/H.internal.scaleFactor;return new function(he){var Ee=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ee}}),this}({width:ae*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(O,H){if(isNaN(O)||isNaN(H))throw dr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(O,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(O){if(isNaN(O))throw dr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},p.prototype.translate=function(O,H){if(isNaN(O)||isNaN(H))throw dr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,O,H);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(O,H,J,re,ae,he){if(isNaN(O)||isNaN(H)||isNaN(J)||isNaN(re)||isNaN(ae)||isNaN(he))throw dr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new c(O,H,J,re,ae,he);this.ctx.transform=this.ctx.transform.multiply(Ee)},p.prototype.setTransform=function(O,H,J,re,ae,he){O=isNaN(O)?1:O,H=isNaN(H)?0:H,J=isNaN(J)?0:J,re=isNaN(re)?1:re,ae=isNaN(ae)?0:ae,he=isNaN(he)?0:he,this.ctx.transform=new c(O,H,J,re,ae,he)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(O,H,J,re,ae,he,Ee,ye,De){var Ue=this.pdf.getImageProperties(O),Xe=1,We=1,ot=1,$=1;re!==void 0&&ye!==void 0&&(ot=ye/re,$=De/ae,Xe=Ue.width/re*ye/re,We=Ue.height/ae*De/ae),he===void 0&&(he=H,Ee=J,H=0,J=0),re!==void 0&&ye===void 0&&(ye=re,De=ae),re===void 0&&ye===void 0&&(ye=Ue.width,De=Ue.height);var Ke=this.ctx.transform.decompose(),kt=de(Ke.rotate.shx),Ct=new c,qe=(Ct=(Ct=(Ct=Ct.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new a(he-H*ot,Ee-J*$,re*Xe,ae*We));if(this.autoPaging){for(var At,st=D.call(this,qe),vt=[],Et=0;Et<st.length;Et+=1)vt.indexOf(st[Et])===-1&&vt.push(st[Et]);j(vt);for(var vn=vt[0],Qt=vt[vt.length-1],Ut=vn;Ut<Qt+1;Ut++){this.pdf.setPage(Ut);var Rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ot=Ut===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=Ut===1?0:gt+(Ut-2)*Xt;if(this.ctx.clip_path.length!==0){var kr=this.path;At=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=K(At,this.posX+this.margin[3],-It+Ot+this.ctx.prevPageLastElemOffset),oe.call(this,"fill",!0),this.path=kr}var yn=JSON.parse(JSON.stringify(qe));yn=K([yn],this.posX+this.margin[3],-It+Ot+this.ctx.prevPageLastElemOffset)[0];var sn=(Ut>vn||Ut<Qt)&&E.call(this);sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,Xt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",yn.x,yn.y,yn.w,yn.h,null,null,kt),sn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",qe.x,qe.y,qe.w,qe.h,null,null,kt)};var D=function(O,H,J){var re=[];H=H||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":re.push(Math.floor((O.y+ae)/J)+1);break;case"arc":re.push(Math.floor((O.y+ae-O.radius)/J)+1),re.push(Math.floor((O.y+ae+O.radius)/J)+1);break;case"qct":var he=Ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);re.push(Math.floor((he.y+ae)/J)+1),re.push(Math.floor((he.y+he.h+ae)/J)+1);break;case"bct":var Ee=Be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);re.push(Math.floor((Ee.y+ae)/J)+1),re.push(Math.floor((Ee.y+Ee.h+ae)/J)+1);break;case"rect":re.push(Math.floor((O.y+ae)/J)+1),re.push(Math.floor((O.y+O.h+ae)/J)+1)}for(var ye=0;ye<re.length;ye+=1)for(;this.pdf.internal.getNumberOfPages()<re[ye];)N.call(this);return re},N=function(){var O=this.fillStyle,H=this.strokeStyle,J=this.font,re=this.lineCap,ae=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=H,this.font=J,this.lineCap=re,this.lineWidth=ae,this.lineJoin=he},K=function(O,H,J){for(var re=0;re<O.length;re++)switch(O[re].type){case"bct":O[re].x2+=H,O[re].y2+=J;case"qct":O[re].x1+=H,O[re].y1+=J;default:O[re].x+=H,O[re].y+=J}return O},j=function(O){return O.sort(function(H,J){return H-J})},G=function(O,H){var J=this.fillStyle,re=this.strokeStyle,ae=this.lineCap,he=this.lineWidth,Ee=Math.abs(he*this.ctx.transform.scaleX),ye=this.lineJoin;if(this.autoPaging){for(var De,Ue,Xe=JSON.parse(JSON.stringify(this.path)),We=JSON.parse(JSON.stringify(this.path)),ot=[],$=0;$<We.length;$++)if(We[$].x!==void 0)for(var Ke=D.call(this,We[$]),kt=0;kt<Ke.length;kt+=1)ot.indexOf(Ke[kt])===-1&&ot.push(Ke[kt]);for(var Ct=0;Ct<ot.length;Ct++)for(;this.pdf.internal.getNumberOfPages()<ot[Ct];)N.call(this);j(ot);for(var qe=ot[0],At=ot[ot.length-1],st=qe;st<At+1;st++){this.pdf.setPage(st),this.fillStyle=J,this.strokeStyle=re,this.lineCap=ae,this.lineWidth=Ee,this.lineJoin=ye;var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=st===1?this.posY+this.margin[0]:this.margin[0],vn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=st===1?0:vn+(st-2)*Qt;if(this.ctx.clip_path.length!==0){var Rt=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=K(De,this.posX+this.margin[3],-Ut+Et+this.ctx.prevPageLastElemOffset),oe.call(this,O,!0),this.path=Rt}if(Ue=JSON.parse(JSON.stringify(Xe)),this.path=K(Ue,this.posX+this.margin[3],-Ut+Et+this.ctx.prevPageLastElemOffset),H===!1||st===0){var Ot=(st>qe||st<At)&&E.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,Qt,null).clip().discardPath()),oe.call(this,O,H),Ot&&this.pdf.restoreGraphicsState()}this.lineWidth=he}this.path=Xe}else this.lineWidth=Ee,oe.call(this,O,H),this.lineWidth=he},oe=function(O,H){if((O!=="stroke"||H||!x.call(this))&&(O==="stroke"||H||!g.call(this))){for(var J,re,ae=[],he=this.path,Ee=0;Ee<he.length;Ee++){var ye=he[Ee];switch(ye.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ye,deltas:[],abs:[]});break;case"lt":var De=ae.length;if(he[Ee-1]&&!isNaN(he[Ee-1].x)&&(J=[ye.x-he[Ee-1].x,ye.y-he[Ee-1].y],De>0)){for(;De>=0;De--)if(ae[De-1].close!==!0&&ae[De-1].begin!==!0){ae[De-1].deltas.push(J),ae[De-1].abs.push(ye);break}}break;case"bct":J=[ye.x1-he[Ee-1].x,ye.y1-he[Ee-1].y,ye.x2-he[Ee-1].x,ye.y2-he[Ee-1].y,ye.x-he[Ee-1].x,ye.y-he[Ee-1].y],ae[ae.length-1].deltas.push(J);break;case"qct":var Ue=he[Ee-1].x+2/3*(ye.x1-he[Ee-1].x),Xe=he[Ee-1].y+2/3*(ye.y1-he[Ee-1].y),We=ye.x+2/3*(ye.x1-ye.x),ot=ye.y+2/3*(ye.y1-ye.y),$=ye.x,Ke=ye.y;J=[Ue-he[Ee-1].x,Xe-he[Ee-1].y,We-he[Ee-1].x,ot-he[Ee-1].y,$-he[Ee-1].x,Ke-he[Ee-1].y],ae[ae.length-1].deltas.push(J);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ye)}}re=H?null:O==="stroke"?"stroke":"fill";for(var kt=!1,Ct=0;Ct<ae.length;Ct++)if(ae[Ct].arc)for(var qe=ae[Ct].abs,At=0;At<qe.length;At++){var st=qe[At];st.type==="arc"?M.call(this,st.x,st.y,st.radius,st.startAngle,st.endAngle,st.counterclockwise,void 0,H,!kt):T.call(this,st.x,st.y),kt=!0}else if(ae[Ct].close===!0)this.pdf.internal.out("h"),kt=!1;else if(ae[Ct].begin!==!0){var vt=ae[Ct].start.x,Et=ae[Ct].start.y;te.call(this,ae[Ct].deltas,vt,Et),kt=!0}re&&I.call(this,re),H&&V.call(this)}},fe=function(O){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-J;case"top":return O+H-J;case"hanging":return O+H-2*J;case"middle":return O+H/2-J;default:return O}},z=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(H,J){this.colorStops.push([H,J])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(O,H,J,re,ae,he,Ee,ye,De){for(var Ue=Te.call(this,J,re,ae,he),Xe=0;Xe<Ue.length;Xe++){var We=Ue[Xe];Xe===0&&(De?b.call(this,We.x1+O,We.y1+H):T.call(this,We.x1+O,We.y1+H)),_e.call(this,O,H,We.x2,We.y2,We.x3,We.y3,We.x4,We.y4)}ye?V.call(this):I.call(this,Ee)},I=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},b=function(O,H){this.pdf.internal.out(t(O)+" "+r(H)+" m")},S=function(O){var H;switch(O.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var J,re,ae,he=this.pdf.getTextDimensions(O.text),Ee=fe.call(this,O.y),ye=z.call(this,Ee)-he.h,De=this.ctx.transform.applyToPoint(new s(O.x,Ee));if(this.autoPaging){var Ue=this.ctx.transform.decompose(),Xe=new c;Xe=(Xe=(Xe=Xe.multiply(Ue.translate)).multiply(Ue.skew)).multiply(Ue.scale);for(var We=this.ctx.transform.applyToRectangle(new a(O.x,Ee,he.w,he.h)),ot=Xe.applyToRectangle(new a(O.x,ye,he.w,he.h)),$=D.call(this,ot),Ke=[],kt=0;kt<$.length;kt+=1)Ke.indexOf($[kt])===-1&&Ke.push($[kt]);j(Ke);for(var Ct=Ke[0],qe=Ke[Ke.length-1],At=Ct;At<qe+1;At++){this.pdf.setPage(At);var st=At===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[2],vn=Et-this.margin[0],Qt=this.pdf.internal.pageSize.width-this.margin[1],Ut=Qt-this.margin[3],Rt=At===1?0:vt+(At-2)*vn;if(this.ctx.clip_path.length!==0){var Ot=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=K(J,this.posX+this.margin[3],-1*Rt+st),oe.call(this,"fill",!0),this.path=Ot}var gt=K([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-Rt+st+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*O.scale),ae=this.lineWidth,this.lineWidth=ae*O.scale);var Xt=this.autoPaging!=="text";if(Xt||gt.y+gt.h<=Et){if(Xt||gt.y>=st&&gt.x<=Qt){var It=Xt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Qt-gt.x)[0],kr=K([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-Rt+st+this.ctx.prevPageLastElemOffset)[0],yn=Xt&&(At>Ct||At<qe)&&E.call(this);yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,vn,null).clip().discardPath()),this.pdf.text(It,kr.x,kr.y,{angle:O.angle,align:H,renderingMode:O.renderingMode}),yn&&this.pdf.restoreGraphicsState()}}else gt.y<Et&&(this.ctx.prevPageLastElemOffset+=Et-gt.y);O.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=ae)}}else O.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*O.scale),ae=this.lineWidth,this.lineWidth=ae*O.scale),this.pdf.text(O.text,De.x+this.posX,De.y+this.posY,{angle:O.angle,align:H,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=ae)},T=function(O,H,J,re){J=J||0,re=re||0,this.pdf.internal.out(t(O+J)+" "+r(H+re)+" l")},te=function(O,H,J){return this.pdf.lines(O,H,J,null,null)},_e=function(O,H,J,re,ae,he,Ee,ye){this.pdf.internal.out([e(i(J+O)),e(o(re+H)),e(i(ae+O)),e(o(he+H)),e(i(Ee+O)),e(o(ye+H)),"c"].join(" "))},Te=function(O,H,J,re){for(var ae=2*Math.PI,he=Math.PI/2;H>J;)H-=ae;var Ee=Math.abs(J-H);Ee<ae&&re&&(Ee=ae-Ee);for(var ye=[],De=re?-1:1,Ue=H;Ee>1e-5;){var Xe=Ue+De*Math.min(Ee,he);ye.push(be.call(this,O,Ue,Xe)),Ee-=Math.abs(Xe-Ue),Ue=Xe}return ye},be=function(O,H,J){var re=(J-H)/2,ae=O*Math.cos(re),he=O*Math.sin(re),Ee=ae,ye=-he,De=Ee*Ee+ye*ye,Ue=De+Ee*ae+ye*he,Xe=4/3*(Math.sqrt(2*De*Ue)-Ue)/(Ee*he-ye*ae),We=Ee-Xe*ye,ot=ye+Xe*Ee,$=We,Ke=-ot,kt=re+H,Ct=Math.cos(kt),qe=Math.sin(kt);return{x1:O*Math.cos(H),y1:O*Math.sin(H),x2:We*Ct-ot*qe,y2:We*qe+ot*Ct,x3:$*Ct-Ke*qe,y3:$*qe+Ke*Ct,x4:O*Math.cos(J),y4:O*Math.sin(J)}},de=function(O){return 180*O/Math.PI},Ae=function(O,H,J,re,ae,he){var Ee=O+.5*(J-O),ye=H+.5*(re-H),De=ae+.5*(J-ae),Ue=he+.5*(re-he),Xe=Math.min(O,ae,Ee,De),We=Math.max(O,ae,Ee,De),ot=Math.min(H,he,ye,Ue),$=Math.max(H,he,ye,Ue);return new a(Xe,ot,We-Xe,$-ot)},Be=function(O,H,J,re,ae,he,Ee,ye){var De,Ue,Xe,We,ot,$,Ke,kt,Ct,qe,At,st,vt,Et,vn=J-O,Qt=re-H,Ut=ae-J,Rt=he-re,Ot=Ee-ae,gt=ye-he;for(Ue=0;Ue<41;Ue++)Ct=(Ke=(Xe=O+(De=Ue/40)*vn)+De*((ot=J+De*Ut)-Xe))+De*(ot+De*(ae+De*Ot-ot)-Ke),qe=(kt=(We=H+De*Qt)+De*(($=re+De*Rt)-We))+De*($+De*(he+De*gt-$)-kt),Ue==0?(At=Ct,st=qe,vt=Ct,Et=qe):(At=Math.min(At,Ct),st=Math.min(st,qe),vt=Math.max(vt,Ct),Et=Math.max(Et,qe));return new a(Math.round(At),Math.round(st),Math.round(vt-At),Math.round(Et-st))},Re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,H,J=(O=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:H}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(St.API),(function(n){var e=function(s){var a,c,l,u,p,m,g,x,E,D;for(/[^\x00-\xFF]/.test(s),c=[],l=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(p=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(m=(p=((p=((p=((p=(p-(D=p%85))/85)-(E=p%85))/85)-(x=p%85))/85)-(g=p%85))/85)%85,c.push(m+33,g+33,x+33,E+33,D+33)):c.push(122);return(function(N,K){for(var j=K;j>0;j--)N.pop()})(c,a.length),String.fromCharCode.apply(String,c)+"~>"},t=function(s){var a,c,l,u,p,m=String,g="length",x=255,E="charCodeAt",D="slice",N="replace";for(s[D](-2),s=s[D](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),l=[],u=0,p=(s+=a="uuuuu"[D](s[g]%5||5))[g];p>u;u+=5)c=52200625*(s[E](u)-33)+614125*(s[E](u+1)-33)+7225*(s[E](u+2)-33)+85*(s[E](u+3)-33)+(s[E](u+4)-33),l.push(x&c>>24,x&c>>16,x&c>>8,x&c);return(function(K,j){for(var G=j;G>0;G--)K.pop()})(l,a[g]),m.fromCharCode.apply(m,l)},r=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",l=0;l<s.length;l+=2)c+=String.fromCharCode("0x"+(s[l]+s[l+1]));return c},o=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return(a=sC(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var c=0,l=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=o(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}})(St.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(c,l,u){var p=new XMLHttpRequest,m=0,g=function(x){var E=x.length,D=[],N=String.fromCharCode;for(m=0;m<E;m+=1)D.push(N(255&x.charCodeAt(m)));return D.join("")};if(p.open("GET",c,!l),p.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(p.onload=function(){p.status===200?u(g(this.responseText)):u(void 0)}),p.send(null),l&&p.status===200)return g(p.responseText)})(i,o,s)}catch{}return a})(e,t,r)},n.loadImageFile=n.loadFile})(St.API),(function(n){function e(){return(Yt.html2canvas?Promise.resolve(Yt.html2canvas):import("./chunk-3DX2HYX3.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Yt.DOMPurify?Promise.resolve(Yt.DOMPurify):import("./chunk-5XEYTCIL.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var c=Un(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var l=document.createElement(a);for(var u in c.className&&(l.className=c.className),c.innerHTML&&c.dompurify&&(l.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)l.style[u]=c.style[u];return l},o=function a(c,l){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)l!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||u.appendChild(a(p,l));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},s=function a(c){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return(u=u.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),c){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,c(this.prop.container,l)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=this.opt.jsPDF,u=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var x=u[g],E=x.src.find(function(D){return D.format==="truetype"});E&&l.addFont(E.url,x.ref.name,x.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var c=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||St.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,l,u){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,l,u){return this.setProgress(a?this.progress.val+a:null,c||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,c){var l=this;return this.thenCore(a,c,function(u,p){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return l.updateProgress(null,u),m}).then(u,p).then(function(m){return l.updateProgress(1),m})})},s.prototype.thenCore=function(a,c,l){l=l||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),c&&(c=c.bind(u));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:s.convert(Object.assign({},u),Promise.prototype),m=l.call(p,a,c);return s.convert(m,u.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(l){c=c.thenCore(l)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,St.getPageSize=function(a,c,l){if(Un(a)==="object"){var u=a;a=u.orientation,c=u.unit||c,l=u.format||l}c=c||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var p,m=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var x,E=0,D=0;if(g.hasOwnProperty(m))E=g[m][1]/p,D=g[m][0]/p;else try{E=l[1],D=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",D>E&&(x=D,D=E,E=x);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",E>D&&(x=D,D=E,E=x)}return{width:D,height:E,unit:c,k:p,orientation:a}},n.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(lk):null;var l=new s(c);return c.worker?l:l.from(a).doCallback()}})(St.API),St.API.addJS=function(n){return W9=n,this.internal.events.subscribe("postPutResources",function(){MC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(MC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),G9=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+W9+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){MC!==void 0&&G9!==void 0&&this.internal.out("/Names <</JavaScript "+MC+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var c=a[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(o=0;o<l;o++){var p=t.internal.newObject();u.push(p);var m=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<u.length;o++)t.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var c=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<r.children.length;l++)this.renderItems(r.children[l])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(St.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var c,l=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(p){for(var m,g=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,E={width:0,height:0,numcomponents:1},D=4;D<x;D+=2){if(D+=g,e.indexOf(p.charCodeAt(D+1))!==-1){m=256*p.charCodeAt(D+5)+p.charCodeAt(D+6),E={width:256*p.charCodeAt(D+7)+p.charCodeAt(D+8),height:m,numcomponents:p.charCodeAt(D+9)};break}g=256*p.charCodeAt(D+2)+p.charCodeAt(D+3)}return E})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:t,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:l,index:r,alias:i}}return u}})(St.API),St.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=O9(n,{checkCrc:!0}),s=o.width,a=o.height,c=o.channels,l=o.palette,u=o.depth;i=l&&c===1?(function(M){for(var I=M.width,V=M.height,b=M.data,S=M.palette,T=M.depth,te=!1,_e=[],Te=[],be=void 0,de=!1,Ae=0,Be=0;Be<S.length;Be++){var Re=bP(S[Be],4),O=Re[0],H=Re[1],J=Re[2],re=Re[3];_e.push(O,H,J),re!=null&&(re===0?(Ae++,Te.length<1&&Te.push(Be)):re<255&&(de=!0))}if(de||Ae>1){te=!0,Te=void 0;var ae=I*V;be=new Uint8Array(ae);for(var he=new DataView(b.buffer),Ee=0;Ee<ae;Ee++){var ye=dk(he,Ee,T),De=bP(S[ye],4)[3];be[Ee]=De}}else Ae===0&&(Te=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:te?8:void 0,colorBytes:b,alphaBytes:be,needSMask:te,palette:_e,mask:Te}})(o):c===2||c===4?(function(M){for(var I=M.data,V=M.width,b=M.height,S=M.channels,T=M.depth,te=S===2?"DeviceGray":"DeviceRGB",_e=S-1,Te=V*b,be=_e,de=Te*be,Ae=1*Te,Be=Math.ceil(de*T/8),Re=Math.ceil(Ae*T/8),O=new Uint8Array(Be),H=new Uint8Array(Re),J=new DataView(I.buffer),re=new DataView(O.buffer),ae=new DataView(H.buffer),he=!1,Ee=0;Ee<Te;Ee++){for(var ye=Ee*S,De=0;De<be;De++)nz(re,dk(J,ye+De,T),Ee*be+De,T);var Ue=dk(J,ye+be,T);Ue<(1<<T)-1&&(he=!0),nz(ae,Ue,1*Ee,T)}return{colorSpace:te,colorsPerPixel:_e,sMaskBitsPerComponent:he?T:void 0,colorBytes:O,alphaBytes:H,needSMask:he}})(o):(function(M){var I=M.data,V=M.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?(function(b){for(var S=b.length,T=new Uint8Array(2*S),te=new DataView(T.buffer,T.byteOffset,T.byteLength),_e=0;_e<S;_e++)te.setUint16(2*_e,b[_e],!1);return T})(I):I,needSMask:!1}})(o);var p,m,g,x=i,E=x.colorSpace,D=x.colorsPerPixel,N=x.sMaskBitsPerComponent,K=x.colorBytes,j=x.alphaBytes,G=x.needSMask,oe=x.palette,fe=x.mask,z=null;return r!==St.API.image_compression.NONE&&typeof sC=="function"?(z=(function(M){var I;switch(M){case St.API.image_compression.FAST:I=11;break;case St.API.image_compression.MEDIUM:I=13;break;case St.API.image_compression.SLOW:I=14;break;default:I=12}return I})(r),p=this.decode.FLATE_DECODE,m="/Predictor ".concat(z," /Colors ").concat(D," /BitsPerComponent ").concat(u," /Columns ").concat(s),n=Z9(K,Math.ceil(s*D*u/8),D,u,r),G&&(g=Z9(j,Math.ceil(s*N/8),1,N,r))):(p=void 0,m=void 0,n=K,G&&(g=j)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:t,data:n,index:e,filter:p,decodeParameters:m,transparency:fe,palette:oe,sMask:g,predictor:z,width:s,height:a,bitsPerComponent:u,sMaskBitsPerComponent:N,colorSpace:E}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new _le(e),s=o.width,a=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:s,height:a},u=new fk(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)},n.processGIF87A=n.processGIF89A})(St.API),mc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},mc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){dr.log("bit decode error:"+t)}},mc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[o>>7-a&1];this.data[s+4*a]=c.blue,this.data[s+4*a+1]=c.green,this.data[s+4*a+2]=c.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},mc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,c=15&o,l=this.palette[a];if(this.data[s]=l.blue,this.data[s+1]=l.green,this.data[s+2]=l.red,this.data[s+3]=255,2*i+1>=this.width)break;l=this.palette[c],this.data[s+4]=l.blue,this.data[s+4+1]=l.green,this.data[s+4+2]=l.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},mc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},mc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,c=(o>>10&e)/e*255|0,l=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=c,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=l}this.pos+=n}},mc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&t)/t*255|0,l=(s>>11)/e*255|0,u=i*this.width*4+4*o;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=a,this.data[u+3]=255}this.pos+=n}},mc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},mc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},mc.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new mc(e,!1),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new fk(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(St.API),iz.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new iz(e),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new fk(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(St.API),St.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,c=0,l=0;l<i;l+=4){var u=r[l],p=r[l+1],m=r[l+2],g=r[l+3];o[a++]=u,o[a++]=p,o[a++]=m,s[c++]=g}var x=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},St.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Mm=St.API,NC=Mm.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=l.fof?l.fof:1,p=e.doKerning!==!1,m=0,g=n.length,x=0,E=a[0]||c,D=[];for(t=0;t<g;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?D.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(m=p&&Un(l[r])==="object"&&!isNaN(parseInt(l[r][x],10))?l[r][x]/u:0,D.push((a[r]||E)/c+m)),x=r;return D},K9=Mm.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Mm.processArabic&&(n=Mm.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:NC.apply(this,arguments).reduce(function(o,s){return o+s},0)},Y9=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var c=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(c,o)),a=0,c=o),a+=e[o],o++;return c!==o&&i.push(n.slice(c,o)),i},Q9=function(n,e,t){t||(t={});var r,i,o,s,a,c,l,u=[],p=[u],m=t.textIndent||0,g=0,x=0,E=n.split(" "),D=NC.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?E[0].length+2:t.lineIndent||0){var N=Array(c).join(" "),K=[];E.map(function(G){(G=G.split(/\s*\n/)).length>1?K=K.concat(G.map(function(oe,fe){return(fe&&oe.length?`
`:"")+oe})):K.push(G[0])}),E=K,c=K9.apply(this,[N,t])}for(o=0,s=E.length;o<s;o++){var j=0;if(r=E[o],c&&r[0]==`
`&&(r=r.substr(1),j=1),m+g+(x=(i=NC.apply(this,[r,t])).reduce(function(G,oe){return G+oe},0))>e||j){if(x>e){for(a=Y9.apply(this,[r,i,e-(m+g),e]),u.push(a.shift()),u=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(G,oe){return G+oe},0)}else u=[r];p.push(u),m=x+c,g=D}else u.push(r),m+=g+x,g=D}return l=c?function(G,oe){return(oe?N:"")+G.join(" ")}:function(G){return G.join(" ")},p.map(l)},Mm.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var p=this.internal.getFont(u.fontName,u.fontStyle),m="Unicode";return p.metadata[m]?{widths:p.metadata[m].widths||{0:1},kerning:p.metadata[m].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,c,l=[];for(a=0,c=r.length;a<c;a++)l=l.concat(Q9.apply(this,[r[a],s,o]));return l},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=n.__fontmetrics__.compress=function(m){var g,x,E,D,N=["{"];for(var K in m){if(g=m[K],isNaN(parseInt(K,10))?x="'"+K+"'":(K=parseInt(K,10),x=(x=s(K).slice(2)).slice(0,-1)+i[x.slice(-1)]),typeof g=="number")g<0?(E=s(g).slice(3),D="-"):(E=s(g).slice(2),D=""),E=D+E.slice(0,-1)+i[E.slice(-1)];else{if(Un(g)!=="object")throw new Error("Don't know what to do with value type "+Un(g)+".");E=a(g)}N.push(x+E)}return N.push("}"),N.join("")},c=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,x,E,D,N={},K=1,j=N,G=[],oe="",fe="",z=m.length-1,M=1;M<z;M+=1)(D=m[M])=="'"?g?(E=g.join(""),g=void 0):g=[]:g?g.push(D):D=="{"?(G.push([j,E]),j={},E=void 0):D=="}"?((x=G.pop())[0][x[1]]=j,E=void 0,j=x[0]):D=="-"?K=-1:E===void 0?r.hasOwnProperty(D)?(oe+=r[D],E=parseInt(oe,16)*K,K=1,oe=""):oe+=D:r.hasOwnProperty(D)?(fe+=r[D],j[E]=parseInt(fe,16)*K,K=1,E=void 0,fe=""):fe+=D;return N},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var g=m.font,x=p.Unicode[g.postScriptName];x&&(g.metadata.Unicode={},g.metadata.Unicode.widths=x.widths,g.metadata.Unicode.kerning=x.kerning);var E=u.Unicode[g.postScriptName];E&&(g.metadata.Unicode.encoding=E,g.encoding=E.codePages[0])}])})(St.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(PC(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(St),St.API.addSvgAsImage=function(n,e,t,r,i,o,s,a){if(isNaN(e)||isNaN(t))throw dr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw dr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var l=c.getContext("2d");l.fillStyle="#fff",l.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Yt.canvg?Promise.resolve(Yt.canvg):import("./chunk-3MQJB5HQ.js")).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(l,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(u)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,s,a)})},St.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},St.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),c=[],l=0,u=0,p=0;function m(x,E){var D,N=!1;for(D=0;D<x.length;D+=1)x[D]===E&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(Un(n)==="object"){for(i in n)if(o=n[i],m(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&m(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(l=0;l<o.length;l+=1)if(r=!0,o[l].length===1&&typeof o[l][0]=="number")c.push(String(o[l]-1));else if(o[l].length>1){for(u=0;u<o[l].length;u+=1)typeof o[l][u]!="number"&&(r=!1);r===!0&&c.push([o[l][0]-1,o[l][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?E.push("/"+x+" /"+t[x].value):E.push("/"+x+" "+t[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),l=o.length+s.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(St.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,c=s.metadata.Unicode.widths,l=["","0","00","000","0000"],u=[""],p=0,m=o.length;p<m;++p){if(a=s.metadata.characterToGlyph(o.charCodeAt(p)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(p),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(l[4-a.length],a)}return u.join("")},r=function(o){var s,a,c,l,u,p,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,m=(a=Object.keys(o).sort(function(g,x){return g-x})).length;p<m;p++)s=a[p],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(l=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+l+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",x=0;x<m.length;x++)g+=String.fromCharCode(m[x]);var E=l();u({data:g,addLength1:!0,objectId:E}),c("endobj");var D=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:D}),c("endobj");var N=l();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Pm(a.fontName)),c("/FontFile2 "+E+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var K=l();c("<<"),c("/Type /Font"),c("/BaseFont /"+Pm(a.fontName)),c("/FontDescriptor "+N+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=l(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+D+" 0 R"),c("/BaseFont /"+Pm(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+K+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,m="",g=0;g<p.length;g++)m+=String.fromCharCode(p[g]);var x=l();u({data:m,addLength1:!0,objectId:x}),c("endobj");var E=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),c("endobj");var D=l();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+Pm(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=l();for(var N=0;N<a.metadata.hmtx.widths.length;N++)a.metadata.hmtx.widths[N]=parseInt(a.metadata.hmtx.widths[N]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+Pm(a.fontName)+"/FontDescriptor "+D+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",c=o.x,l=o.y,u=o.options||{},p=o.mutex||{},m=p.pdfEscape,g=p.activeFontKey,x=p.fonts,E=g,D="",N=0,K="",j=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:c,y:l,options:u,mutex:p};for(K=a,E=g,Array.isArray(a)&&(K=a[0]),N=0;N<K.length;N+=1)x[E].metadata.hasOwnProperty("cmap")&&(s=x[E].metadata.cmap.unicode.codeMap[K[N].charCodeAt(0)]),s||K[N].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?D+=K[N]:D+="";var G="";return parseInt(E.slice(1))<14||j==="WinAnsiEncoding"?G=m(D,E).split("").map(function(oe){return oe.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(G=t(D,x[E])),p.isHex=!0,{text:G,x:c,y:l,options:u,mutex:p}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],c={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var l=0;for(l=0;l<s.length;l+=1)Array.isArray(s[l])&&s[l].length===3?a.push([i(Object.assign({},c,{text:s[l][0]})).text,s[l][1],s[l][2]]):a.push(i(Object.assign({},c,{text:s[l]})).text);o.text=a}else o.text=i(Object.assign({},c,{text:s})).text}])})(St),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(St.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,c,l,u,p=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},D=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),K=!1,j=0;this.__bidiEngine__={};var G=function(b){var S=b.charCodeAt(),T=S>>8,te=E[T];return te!==void 0?p[256*te+(255&S)]:T===252||T===253?"AL":N.test(T)?"L":T===8?"R":"N"},oe=function(b){for(var S,T=0;T<b.length;T++){if((S=G(b.charAt(T)))==="L")return!1;if(S==="R")return!0}return!1},fe=function(b,S,T,te){var _e,Te,be,de,Ae=S[te];switch(Ae){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":K=!1;break;case"N":case"AN":break;case"EN":K&&(Ae="AN");break;case"AL":K=!0,Ae="R";break;case"WS":case"BN":Ae="N";break;case"CS":te<1||te+1>=S.length||(_e=T[te-1])!=="EN"&&_e!=="AN"||(Te=S[te+1])!=="EN"&&Te!=="AN"?Ae="N":K&&(Te="AN"),Ae=Te===_e?Te:"N";break;case"ES":Ae=(_e=te>0?T[te-1]:"B")==="EN"&&te+1<S.length&&S[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&T[te-1]==="EN"){Ae="EN";break}if(K){Ae="N";break}for(be=te+1,de=S.length;be<de&&S[be]==="ET";)be++;Ae=be<de&&S[be]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(de=S.length,be=te+1;be<de&&S[be]==="NSM";)be++;if(be<de){var Be=b[te],Re=Be>=1425&&Be<=2303||Be===64286;if(_e=S[be],Re&&(_e==="R"||_e==="AL")){Ae="R";break}}}Ae=te<1||(_e=S[te-1])==="B"?"N":T[te-1];break;case"B":K=!1,i=!0,Ae=j;break;case"S":o=!0,Ae="N"}return Ae},z=function(b,S,T){var te=b.split("");return T&&M(te,T,{hiLevel:j}),te.reverse(),S&&S.reverse(),te.join("")},M=function(b,S,T){var te,_e,Te,be,de,Ae=-1,Be=b.length,Re=0,O=[],H=j?g:m,J=[];for(K=!1,i=!1,o=!1,_e=0;_e<Be;_e++)J[_e]=G(b[_e]);for(Te=0;Te<Be;Te++){if(de=Re,O[Te]=fe(b,J,O,Te),te=240&(Re=H[de][x[O[Te]]]),Re&=15,S[Te]=be=H[Re][5],te>0)if(te===16){for(_e=Ae;_e<Te;_e++)S[_e]=1;Ae=-1}else Ae=-1;if(H[Re][6])Ae===-1&&(Ae=Te);else if(Ae>-1){for(_e=Ae;_e<Te;_e++)S[_e]=be;Ae=-1}J[Te]==="B"&&(S[Te]=0),T.hiLevel|=be}o&&(function(re,ae,he){for(var Ee=0;Ee<he;Ee++)if(re[Ee]==="S"){ae[Ee]=j;for(var ye=Ee-1;ye>=0&&re[ye]==="WS";ye--)ae[ye]=j}})(J,S,Be)},I=function(b,S,T,te,_e){if(!(_e.hiLevel<b)){if(b===1&&j===1&&!i)return S.reverse(),void(T&&T.reverse());for(var Te,be,de,Ae,Be=S.length,Re=0;Re<Be;){if(te[Re]>=b){for(de=Re+1;de<Be&&te[de]>=b;)de++;for(Ae=Re,be=de-1;Ae<be;Ae++,be--)Te=S[Ae],S[Ae]=S[be],S[be]=Te,T&&(Te=T[Ae],T[Ae]=T[be],T[be]=Te);Re=de}Re++}}},V=function(b,S,T){var te=b.split(""),_e={hiLevel:j};return T||(T=[]),M(te,T,_e),(function(Te,be,de){if(de.hiLevel!==0&&u)for(var Ae,Be=0;Be<Te.length;Be++)be[Be]===1&&(Ae=D.indexOf(Te[Be]))>=0&&(Te[Be]=D[Ae+1])})(te,T,_e),I(2,te,S,T,_e),I(1,te,S,T,_e),te.join("")};return this.__bidiEngine__.doBidiReorder=function(b,S,T){if((function(_e,Te){if(Te)for(var be=0;be<_e.length;be++)Te[be]=be;a===void 0&&(a=oe(_e)),l===void 0&&(l=oe(_e))})(b,S),s||!c||l)if(s&&c&&a^l)j=a?1:0,b=z(b,S,T);else if(!s&&c&&l)j=a?1:0,b=V(b,S,T),b=z(b,S);else if(!s||a||c||l){if(s&&!c&&a^l)b=z(b,S),a?(j=0,b=V(b,S,T)):(j=1,b=V(b,S,T),b=z(b,S));else if(s&&a&&!c&&l)j=1,b=V(b,S,T),b=z(b,S);else if(!s&&!c&&a^l){var te=u;a?(j=1,b=V(b,S,T),j=0,u=!1,b=V(b,S,T),u=te):(j=0,b=V(b,S,T),b=z(b,S),j=1,u=!1,b=V(b,S,T),u=te,b=z(b,S))}}else j=0,b=V(b,S,T);else j=a?1:0,b=V(b,S,T);return b},this.__bidiEngine__.setOptions=function(b){b&&(s=b.isInputVisual,c=b.isOutputVisual,a=b.isInputRtl,l=b.isOutputRtl,u=b.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(St),St.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Wd(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Rle(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new wle(this.contents),this.head=new xle(this),this.name=new Ale(this),this.cmap=new vz(this),this.toUnicode={},this.hhea=new Cle(this),this.maxp=new Tle(this),this.hmtx=new Dle(this),this.post=new Ile(this),this.os2=new Ele(this),this.loca=new kle(this),this.glyf=new Mle(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,c,l;for(l=[],s=0,a=(c=this.bbox).length;s<a;s++)e=c[s],l.push(Math.round(e*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var yc,Wd=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),wle=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,c,l,u,p,m,g,x,E;for(E in g=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(g)/c),s=Math.floor(p/c),u=16*g-p,(i=new Wd).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(s),i.writeShort(u),o=16*g,l=i.pos+o,a=null,x=[],t)for(m=t[E],i.writeString(E),i.writeInt(n(m)),i.writeInt(l),i.writeInt(m.length),x=x.concat(m),E==="head"&&(a=l),l+=m.length;l%4;)x.push(0),l++;return i.write(x),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=yz.call(t);t.length%4;)t.push(0);for(o=new Wd(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),ble={}.hasOwnProperty,gl=function(n,e){for(var t in e)ble.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};yc=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var xle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,yc),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Wd).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),oz=(function(){function n(e,t){var r,i,o,s,a,c,l,u,p,m,g,x,E,D,N,K,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,o=(function(){var G,oe;for(oe=[],c=G=0;0<=m?G<m:G>m;c=0<=m?++G:--G)oe.push(e.readUInt16());return oe})(),e.pos+=2,E=(function(){var G,oe;for(oe=[],c=G=0;0<=m?G<m:G>m;c=0<=m?++G:--G)oe.push(e.readUInt16());return oe})(),l=(function(){var G,oe;for(oe=[],c=G=0;0<=m?G<m:G>m;c=0<=m?++G:--G)oe.push(e.readUInt16());return oe})(),u=(function(){var G,oe;for(oe=[],c=G=0;0<=m?G<m:G>m;c=0<=m?++G:--G)oe.push(e.readUInt16());return oe})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var G,oe;for(oe=[],c=G=0;0<=i?G<i:G>i;c=0<=i?++G:--G)oe.push(e.readUInt16());return oe})(),c=N=0,j=o.length;N<j;c=++N)for(D=o[c],r=K=x=E[c];x<=D?K<=D:K>=D;r=x<=D?++K:--K)u[c]===0?s=r+l[c]:(s=a[u[c]/2+(r-x)-(m-c)]||0)!==0&&(s+=l[c]),this.codeMap[r]=65535&s}e.pos=p}return n.encode=function(e,t){var r,i,o,s,a,c,l,u,p,m,g,x,E,D,N,K,j,G,oe,fe,z,M,I,V,b,S,T,te,_e,Te,be,de,Ae,Be,Re,O,H,J,re,ae,he,Ee,ye,De,Ue,Xe;switch(te=new Wd,s=Object.keys(e).sort(function(We,ot){return We-ot}),t){case"macroman":for(E=0,D=(function(){var We=[];for(x=0;x<256;++x)We.push(0);return We})(),K={0:0},o={},_e=0,Ae=s.length;_e<Ae;_e++)K[ye=e[i=s[_e]]]==null&&(K[ye]=++E),o[i]={old:e[i],new:K[e[i]]},D[i]=K[e[i]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(D),{charMap:o,subtable:te.data,maxGlyphID:E+1};case"unicode":for(S=[],p=[],j=0,K={},r={},N=l=null,Te=0,Be=s.length;Te<Be;Te++)K[oe=e[i=s[Te]]]==null&&(K[oe]=++j),r[i]={old:oe,new:K[oe]},a=K[oe]-i,N!=null&&a===l||(N&&p.push(N),S.push(i),l=a),N=i;for(N&&p.push(N),p.push(65535),S.push(65535),V=2*(I=S.length),M=2*Math.pow(Math.log(I)/Math.LN2,2),m=Math.log(M/2)/Math.LN2,z=2*I-M,c=[],fe=[],g=[],x=be=0,Re=S.length;be<Re;x=++be){if(b=S[x],u=p[x],b===65535){c.push(0),fe.push(0);break}if(b-(T=r[b].new)>=32768)for(c.push(0),fe.push(2*(g.length+I-x)),i=de=b;b<=u?de<=u:de>=u;i=b<=u?++de:--de)g.push(r[i].new);else c.push(T-b),fe.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*I+2*g.length),te.writeUInt16(0),te.writeUInt16(V),te.writeUInt16(M),te.writeUInt16(m),te.writeUInt16(z),he=0,O=p.length;he<O;he++)i=p[he],te.writeUInt16(i);for(te.writeUInt16(0),Ee=0,H=S.length;Ee<H;Ee++)i=S[Ee],te.writeUInt16(i);for(De=0,J=c.length;De<J;De++)a=c[De],te.writeUInt16(a);for(Ue=0,re=fe.length;Ue<re;Ue++)G=fe[Ue],te.writeUInt16(G);for(Xe=0,ae=g.length;Xe<ae;Xe++)E=g[Xe],te.writeUInt16(E);return{charMap:r,subtable:te.data,maxGlyphID:j+1}}},n})(),vz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,yc),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new oz(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=oz.encode(e,t),(i=new Wd).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),Cle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,yc),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),Ele=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,yc),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),Ile=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,yc),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,a,c;for(c=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)c.push(e.readUInt32());return c}).call(this)}},n})(),Sle=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Ale=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,yc),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,s,a,c,l,u,p,m;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(c={},o=u=0,p=r.length;u<p;o=++u)i=r[o],e.pos=i.offset,l=e.readString(i.length),s=new Sle(l,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),Tle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,yc),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),Dle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,yc),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,s,a,c;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var l,u;for(u=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)u.push(e.readInt16());return u})(),this.widths=(function(){var l,u,p,m;for(m=[],l=0,u=(p=this.metrics).length;l<u;l++)o=p[l],m.push(o.advance);return m}).call(this),r=this.widths[this.widths.length-1],c=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),yz=[].slice,Mle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,yc),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,s,a,c,l,u,p;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,s=(a=new Wd(t.read(i))).readShort(),l=a.readShort(),p=a.readShort(),c=a.readShort(),u=a.readShort(),this.cache[e]=s===-1?new Ple(a,l,p,c,u):new Nle(a,s,l,p,c,u),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,s,a,c;for(s=[],o=[],a=0,c=t.length;a<c;a++)i=e[t[a]],o.push(s.length),i&&(s=s.concat(i.encode(r)));return o.push(s.length),{table:s,offsets:o}},n})(),Nle=(function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),Ple=(function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Wd(yz.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),kle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,yc),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<r.length;++s)if(r[s]=i,o<t.length&&t[o]==s){++o,r[s]=i;var a=this.offsets[s],c=this.offsets[s+1]-a;c>0&&(i+=c)}for(var l=new Array(4*r.length),u=0;u<r.length;++u)l[4*u+3]=255&r[u],l[4*u+2]=(65280&r[u])>>8,l[4*u+1]=(16711680&r[u])>>16,l[4*u]=(4278190080&r[u])>>24;return l},n})(),Rle=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,c;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in c=this.glyphsFor(t))r=c[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,c,l,u,p,m,g,x,E,D,N;for(i in r=vz.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),g={0:0},N=r.charMap)g[(c=N[i]).old]=c.new;for(x in m=r.maxGlyphID,s)x in g||(g[x]=m++);return u=(function(K){var j,G;for(j in G={},K)G[K[j]]=j;return G})(g),p=Object.keys(u).sort(function(K,j){return K-j}),E=(function(){var K,j,G;for(G=[],K=0,j=p.length;K<j;K++)a=p[K],G.push(u[a]);return G})(),o=this.font.glyf.encode(s,E,g),l=this.font.loca.encode(o.offsets,E),D={cmap:this.font.cmap.raw(),glyf:o.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(D["OS/2"]=this.font.os2.raw()),this.font.directory.encode(D)},n})();St.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+(function(){var a,c,l;for(l=[],a=0,c=t.length;a<c;a++)r=t[a],l.push(e.convert(r));return l})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e})();var BC=(()=>{let e=class e{buildDoc(r,i,o=null){return ee(this,null,function*(){return r?.templateType==="profghizztemplate"?this.buildAthletePdf(r,i,o):this.buildGymPdf(r,i,o)})}buildGymPdf(r,i,o=null){return ee(this,null,function*(){let s=new St({unit:"mm",format:"a4",hotfixes:["px_scaling"]}),a=[26,35,126],c=[233,186,0],l=[44,122,70],u=10,p=8.5,m=12,g=s.internal.pageSize.getWidth(),x=s.internal.pageSize.getHeight(),E=14,D=16,N=g-E*2,K=15;s.setFillColor("#0b4fa3"),s.rect(0,0,g,K,"F"),s.setFont("Helvetica","bold"),s.setFontSize(15),s.setTextColor("#ffffff"),s.text("fitness&dance",g-E,K/1.6,{align:"right"}),s.setTextColor("#000000");let j=K+6,G=38,oe=38,fe=0,z=i?.name||"";if(o)try{let ye=yield new Promise((We,ot)=>{let $=new Image;$.onload=()=>We({w:$.width,h:$.height}),$.onerror=ot,$.src=o}),De=G,Ue=oe,Xe=ye.w/ye.h;Xe>1?(Ue=oe,De=Math.min(G,Ue*Xe)):(De=G,Ue=Math.min(oe,De/Xe)),s.addImage(o,"PNG",E,j,De,Ue,void 0,"FAST"),fe=Ue}catch{}let M=E+G+12,I=j+6,V=M,b=M+16,S=I;s.setFont("Helvetica","bold"),s.setFontSize(15),s.text(z,M,S),S+=10;let T="-";if(r?.dataInizio&&/^\d{4}-\d{2}-\d{2}$/.test(r.dataInizio)){let[ye,De,Ue]=r.dataInizio.split("-");T=`${Ue}/${De}/${ye}`}let te=[{label:"Livello:",value:r?.livello??"-"},{label:"Durata:",value:r?.durata??"-"},{label:"Inizio:",value:T}];s.setFontSize(12);for(let ye of te)s.setFont("Helvetica","bold"),s.text(ye.label,V,S),s.setFont("Helvetica","normal"),s.text(String(ye.value),b,S),S+=8;let _e=Math.max(fe,S-j)+2;j+=_e+m;let Te=3,be=50,de=27,Ae=N/Te,Be=14,Re=10,O=N/Be,H=11,J="bold";for(let ye of r?.giorni||[]){if(!ye?.esercizi?.length)continue;let De=[];for(let We=0;We<ye.esercizi.length;We+=Te)De.push(ye.esercizi.slice(We,We+Te));let Ue=De.map(()=>de+20);x-D-j<u+Ue[0]+3&&(s.addPage(),j=18),s.setFillColor(...c),s.rect(E,j,N,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text(String(ye?.nome||""),E+N/2,j+u/1.7,{align:"center"}),s.setTextColor("#000000"),j+=u+3;for(let We=0;We<De.length;We++){let ot=De[We],$=Ue[We];j+$>x-D&&(s.addPage(),j=18);for(let Ke=0;Ke<ot.length;Ke++){let kt=ot[Ke],Ct=E+Ke*Ae,qe=Ct+(Ae-be)/2,At=j;try{if(kt?.image){let Ot=kt.image.startsWith("data:image/jpeg")||kt.image.toLowerCase().endsWith(".jpg")||kt.image.toLowerCase().endsWith(".jpeg")?"JPEG":"PNG";s.addImage(kt.image,Ot,qe,At,be,de,void 0,"FAST")}}catch{}let st=At+de+5;s.setFont("Helvetica",J),s.setFontSize(H),s.setTextColor("#183047"),s.text(String(kt?.nome||""),Ct+Ae/2,st,{align:"center"}),st+=6;let vt=kt?.settimaneValori?.[0]||{},Et=Number(vt.serie)||0,vn=Number(vt.ripetizioni)||0,Qt=Number(vt.minuti)||0,Ut=Number(vt.secondi)||0;s.setFont("Helvetica",J),s.setFontSize(H),s.setTextColor("#000000");let Rt=`${Et}x${vn} - ${Qt}' ${Ut}"`;s.text(Rt,Ct+Ae/2,st,{align:"center"})}j+=$}j+=6,j+u+ye.esercizi.length*Re>x-D&&(s.addPage(),j=18),s.setFillColor(...a),s.rect(E,j,N,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text("Tracking pesi",E+2.5,j+u/1.7,{align:"left"}),s.setTextColor("#000000"),j+=u+2;let Xe=j;for(let We=0;We<ye.esercizi.length;We++){Xe+Re>x-D&&(s.addPage(),Xe=18);for(let ot=0;ot<Be;ot++)s.rect(E+ot*O,Xe,O,Re,"S");Xe+=Re}j=Xe+6}j+u+126>x-D&&(s.addPage(),j=18),s.setFillColor(...a),s.rect(E,j,N,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text("Note personali",E+2.5,j+u/1.7,{align:"left"}),s.setTextColor("#000000"),j+=u+2;let re=i?.personalNotes??r?.personalNotes??"",ae=typeof re=="string"&&re.trim()?re.split(`
`):[],he=18;s.setFont("Helvetica","normal"),s.setFontSize(11);let Ee=7;for(let ye=0;ye<he;ye++)j+Ee>x-D&&(s.addPage(),j=18),s.line(E,j,E+N,j),ae[ye]&&s.text(ae[ye],E+2.5,j+Ee*.68,{align:"left"}),j+=Ee;return s.line(E,j,E+N,j),s})}buildAthletePdf(r,i,o=null){return ee(this,null,function*(){let s=new St({unit:"mm",format:"a4",hotfixes:["px_scaling"]}),a=[233,186,0],c=[245,245,210],l=[255,255,255],u=s.internal.pageSize.getWidth(),p=s.internal.pageSize.getHeight(),m=10,g=u-m*2,x=15,E=16;s.setFillColor("#0b4fa3"),s.rect(0,0,u,x,"F"),s.setFont("Helvetica","bold"),s.setFontSize(15),s.setTextColor("#ffffff"),s.text("Prof Ghizz",u-m,x/1.6,{align:"right"}),s.setTextColor("#000000");let D=x+6,N=38,K=38,j=0,G=i?.name||"";if(o)try{let be=yield new Promise((Re,O)=>{let H=new Image;H.onload=()=>Re({w:H.width,h:H.height}),H.onerror=O,H.src=o}),de=N,Ae=K,Be=be.w/be.h;Be>1?(Ae=K,de=Math.min(N,Ae*Be)):(de=N,Ae=Math.min(K,de/Be)),s.addImage(o,"PNG",m,D,de,Ae,void 0,"FAST"),j=Ae}catch{}let oe=m+N+12,fe=D+6,z=oe,M=oe+16,I=fe;s.setFont("Helvetica","bold"),s.setFontSize(15),s.text(G,oe,I),I+=10;let V="-";if(r?.dataInizio&&/^\d{4}-\d{2}-\d{2}$/.test(r.dataInizio)){let[be,de,Ae]=r.dataInizio.split("-");V=`${Ae}/${de}/${be}`}let b=[{label:"Livello:",value:r?.livello??"-"},{label:"Durata:",value:r?.durata??"-"},{label:"Inizio:",value:V}];s.setFontSize(12);for(let be of b)s.setFont("Helvetica","bold"),s.text(be.label,z,I),s.setFont("Helvetica","normal"),s.text(String(be.value),M,I),I+=8;let S=Math.max(j,I-D)+6;D+=S;let T=32,te=26,_e=9,Te=26;s.setDrawColor(0,0,0),s.setLineWidth(.3);for(let be of r?.giorni||[]){let de=Array.isArray(be?.settimane)&&be.settimane.length?be.settimane:Array.from({length:10},(H,J)=>({nome:`Settim. ${J+1}`}));D+10+_e+Te>p-E&&(s.addPage(),D=18),s.setFillColor(...a),s.rect(m,D,g,10,"F"),s.setFont("Helvetica","bold"),s.setFontSize(14),s.setTextColor("#000000"),s.text(String(be?.nome||""),m+g/2,D+7,{align:"center"}),D+=12;let Be=(g-T)/de.length,Re=m,O=D;for(let H=0;H<de.length;H++){let J=Re+T+H*Be;s.setFillColor(...c),s.rect(J,O,Be,_e,"F"),s.rect(J,O,Be,_e,"S"),s.setFont("Helvetica","bold"),s.setFontSize(10.2),s.setTextColor(0,0,0);let re=(de[H]?.nome||`Settim. ${H+1}`).replace("Settimana","Settim.");s.text(re,J+Be/2,O+5.6,{align:"center"})}s.rect(Re,O,T,_e,"S"),O+=_e;for(let H of be?.esercizi||[]){let J=Te,re=s.splitTextToSize(String(H?.nome||""),T-2),ae=te-13,he=0,Ee=re.length*4.7+2;H?.didascalia&&(he=4.5);let ye=2+ae+2+he+2+Ee;ye>J&&(J=ye+2),O+J>p-E&&(s.addPage(),O=18),s.rect(Re,O,T,J,"S");let De=O+2,Ue=Re+2,Xe=T-4;try{if(H?.image){let ot=H.image.startsWith("data:image/jpeg")||H.image.toLowerCase().endsWith(".jpg")||H.image.toLowerCase().endsWith(".jpeg")?"JPEG":"PNG";s.addImage(H.image,ot,Ue,De,Xe,ae,void 0,"FAST")}}catch{}let We=De+ae+2;H?.didascalia&&(s.setFont("Helvetica","italic"),s.setFontSize(8),s.setTextColor(0,0,0),s.text(String(H.didascalia),Re+T/2,We,{align:"center",maxWidth:T-2}),We+=he),s.setFont("Helvetica","normal"),s.setFontSize(8.6),s.setTextColor(0,0,0),s.text(re,Re+T/2,We+2,{align:"center",maxWidth:T-2});for(let ot=0;ot<de.length;ot++){let $=Re+T+ot*Be;s.setFillColor(...l),s.rect($,O,Be,J,"F"),s.rect($,O,Be,J,"S");let Ke=H?.settimaneValori&&H.settimaneValori[ot]?H.settimaneValori[ot]:null,kt=Ke&&Number(Ke.serie)||0,Ct=Ke&&Number(Ke.ripetizioni)||0,qe=Ke&&Number(Ke.caricoKg)||0;s.setFont("Helvetica","bold"),s.setFontSize(10.3),s.setTextColor(0,0,0);let At=kt||Ct||qe?`${kt}*${Ct} @ ${qe} kg`:"__*__ @ __ kg";s.text(At,$+Be/2,O+8.5,{align:"center"}),s.setDrawColor(0,0,0),s.setLineWidth(.2),s.line($+1,O+11,$+Be-1,O+11),s.setLineWidth(.3);let st=Ke&&Number(Ke.minuti)||0,vt=Ke&&Number(Ke.secondi)||0;s.setFont("Helvetica","normal"),s.setFontSize(9.2);let Et=st||vt?`rec. ${st}' ${vt}"`:"rec. __";s.text(Et,$+Be/2,O+15.5,{align:"center"}),s.setDrawColor(0,0,0),s.setLineWidth(.2),s.line($+1,O+18,$+Be-1,O+18),s.setLineWidth(.3);let vn=Ke?.note||"";if(vn){s.setFont("Helvetica","italic"),s.setFontSize(8.2);let Qt=s.splitTextToSize(String(vn),Be-4),Ut=Array.isArray(Qt)?Qt[0]:Qt;s.text(Ut,$+Be/2,O+21.2,{align:"center"})}}O+=J}D=O+6}return s})}buildProfGhizzDoc(r,i,o=null){return ee(this,null,function*(){return this.buildAthletePdf(r,i,o)})}buildAndSavePdf(r,i,o=null){return ee(this,null,function*(){let s=yield this.buildDoc(r,i,o),a=(i?.name||"Cliente").replace(/\s+/g,""),c=r?.dataInizio||"",l=`scheda-${a}-${c}.pdf`;s.save(l)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ole=(n,e)=>({active:n,inactive:e});function Lle(n,e){if(n&1&&wt(0,"img",35),n&2){let t=ie(2);ge("src",t.user.avatarUrl,Sr)("alt",t.user.name)}}function Fle(n,e){n&1&&(Ni(0),A(1,"span",36),W(2,"person"),R(),Pi())}function Vle(n,e){n&1&&(A(0,"span",37),W(1," Tessera scaduta! "),R())}function jle(n,e){if(n&1&&(A(0,"div",38),W(1),R()),n&2){let t=ie(2);X(),Ar("Totale: ",t.filteredCards.length)}}function Ble(n,e){if(n&1&&(Ni(0),W(1),Pi()),n&2){let t=ie().$implicit;X(),Ar(" - ",t.time)}}function Ule(n,e){if(n&1){let t=Bt();A(0,"div",40)(1,"div",41)(2,"span",42),W(3,"assignment"),R(),A(4,"span",43),W(5),rt(6,Ble,2,1,"ng-container",9),R()(),A(7,"div",44)(8,"button",45),Fe("click",function(){let i=Ie(t).index,o=ie(3);return Se(o.printCard(i))}),A(9,"span",46),W(10,"print"),R()(),A(11,"button",47),Fe("click",function(){let i=Ie(t).index,o=ie(3);return Se(o.deleteCard(i))}),A(12,"span",46),W(13,"delete"),R()()()()}if(n&2){let t=e.$implicit;X(5),Ar(" ",t.date),X(),ge("ngIf",t.time)}}function zle(n,e){if(n&1&&(Ni(0),rt(1,Ule,14,2,"div",39),Pi()),n&2){let t=ie(2);X(),ge("ngForOf",t.filteredCards)}}function qle(n,e){n&1&&(A(0,"div",48),W(1," Nessuna scheda associata. "),R())}function $le(n,e){if(n&1){let t=Bt();A(0,"div",49),Fe("click",function(){Ie(t);let i=ie(2);return Se(i.closeDeleteModal())}),R()}}function Hle(n,e){if(n&1){let t=Bt();A(0,"div",50)(1,"div",51),Fe("click",function(i){return Ie(t),Se(i.stopPropagation())}),A(2,"p"),W(3,"Sei sicuro di voler eliminare questo cliente in modo definitivo?"),R(),A(4,"div",52)(5,"button",53),Fe("click",function(){Ie(t);let i=ie(2);return Se(i.deleteUserCustom())}),W(6,"Elimina"),R(),A(7,"button",21),Fe("click",function(){Ie(t);let i=ie(2);return Se(i.closeDeleteModal())}),W(8,"Annulla"),R()()()()}}function Gle(n,e){if(n&1){let t=Bt();A(0,"div",49),Fe("click",function(){Ie(t);let i=ie(2);return Se(i.closeEditModal())}),R()}}function Wle(n,e){if(n&1&&(Ni(0),wt(1,"img",84),Pi()),n&2){let t=ie(3);X(),ge("src",t.editForm.avatarUrl||(t.user==null?null:t.user.avatarUrl),Sr)}}function Kle(n,e){n&1&&(A(0,"span",85),W(1,"person"),R())}function Yle(n,e){n&1&&(A(0,"div",86),W(1,"Caricamento..."),R())}function Qle(n,e){if(n&1){let t=Bt();A(0,"div",54)(1,"form",55),Fe("ngSubmit",function(){Ie(t);let i=ie(2);return Se(i.saveEditModal())})("click",function(i){return Ie(t),Se(i.stopPropagation())}),A(2,"h2"),W(3,"Profilo Cliente"),R(),A(4,"div",56)(5,"div",57),Fe("click",function(){Ie(t);let i=pi(10),o=ie(2);return Se(o.triggerAvatarInput(i))}),rt(6,Wle,2,1,"ng-container",5)(7,Kle,2,0,"ng-template",null,2,to),A(9,"input",58,3),Fe("change",function(i){Ie(t);let o=ie(2);return Se(o.onAvatarChange(i))}),R()(),rt(11,Yle,2,0,"div",59),A(12,"div",60)(13,"div",61)(14,"label"),W(15,"Nome "),A(16,"input",62),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.nome,i)||(o.nome=i),Se(i)}),R()(),A(17,"label"),W(18,"Cognome "),A(19,"input",63),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.cognome,i)||(o.cognome=i),Se(i)}),R()(),A(20,"label"),W(21,"Email "),A(22,"input",64),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.email,i)||(o.editForm.email=i),Se(i)}),R()(),A(23,"label"),W(24,"Telefono "),A(25,"input",65),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.phone,i)||(o.editForm.phone=i),Se(i)}),R()(),A(26,"label"),W(27,"Data di nascita "),A(28,"input",66),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.birthDate,i)||(o.editForm.birthDate=i),Se(i)}),R()(),A(29,"label"),W(30,"Genere "),A(31,"select",67),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.gender,i)||(o.editForm.gender=i),Se(i)}),A(32,"option",68),W(33,"Seleziona..."),R(),A(34,"option",69),W(35,"Maschio"),R(),A(36,"option",70),W(37,"Femmina"),R(),A(38,"option",71),W(39,"Altro"),R()()(),A(40,"label"),W(41,"Indirizzo "),A(42,"input",72),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.address,i)||(o.editForm.address=i),Se(i)}),R()(),A(43,"label"),W(44,"Citt\xE0 "),A(45,"input",73),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.city,i)||(o.editForm.city=i),Se(i)}),R()(),A(46,"label"),W(47,"Provincia "),A(48,"input",74),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.provincia,i)||(o.editForm.provincia=i),Se(i)}),R()(),A(49,"label"),W(50,"CAP "),A(51,"input",75),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.cap,i)||(o.editForm.cap=i),Se(i)}),R()(),A(52,"label"),W(53,"Stato "),A(54,"select",76),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.status,i)||(o.editForm.status=i),Se(i)}),A(55,"option",77),W(56,"Attivo"),R(),A(57,"option",78),W(58,"Inattivo"),R()()()(),A(59,"div",79)(60,"label"),W(61,"Note personali "),A(62,"textarea",80),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.personalNotes,i)||(o.editForm.personalNotes=i),Se(i)}),R()()()()(),A(63,"div",81)(64,"button",82),W(65,"Salva"),R(),A(66,"button",83),Fe("click",function(){Ie(t);let i=ie(2);return Se(i.closeEditModal())}),W(67,"Annulla"),R()()()()}if(n&2){let t=pi(8),r=ie(2);X(6),ge("ngIf",r.editForm.avatarUrl||(r.user==null?null:r.user.avatarUrl))("ngIfElse",t),X(5),ge("ngIf",r.avatarLoading),X(5),lt("ngModel",r.nome),X(3),lt("ngModel",r.cognome),X(3),lt("ngModel",r.editForm.email),X(3),lt("ngModel",r.editForm.phone),X(3),lt("ngModel",r.editForm.birthDate),X(3),lt("ngModel",r.editForm.gender),X(11),lt("ngModel",r.editForm.address),X(3),lt("ngModel",r.editForm.city),X(3),lt("ngModel",r.editForm.provincia),X(3),lt("ngModel",r.editForm.cap),X(3),lt("ngModel",r.editForm.status),X(8),lt("ngModel",r.editForm.personalNotes)}}function Zle(n,e){if(n&1){let t=Bt();Ni(0),A(1,"div",6)(2,"div",7),rt(3,Lle,1,2,"img",8)(4,Fle,3,0,"ng-container",9),R(),A(5,"div",10)(6,"div",11)(7,"div")(8,"div",12),W(9),R(),A(10,"div",13),W(11),R(),A(12,"div",14),W(13),rt(14,Vle,2,0,"span",15),R()(),A(15,"div",16)(16,"span",17),W(17),R(),A(18,"div",18),W(19),R()()(),A(20,"div",19)(21,"button",20),Fe("click",function(){Ie(t);let i=ie();return Se(i.openEditModal())}),W(22,"Modifica Profilo"),R(),A(23,"button",21),Fe("click",function(){Ie(t);let i=ie();return Se(i.openDeleteModal())}),W(24,"Elimina Cliente"),R()()()(),A(25,"div",22)(26,"div",23)(27,"div",24)(28,"h3"),W(29,"Dettagli Cliente"),R(),A(30,"div",25)(31,"span"),W(32,"Nome"),R(),A(33,"span"),W(34),R()(),A(35,"div",25)(36,"span"),W(37,"Cognome"),R(),A(38,"span"),W(39),R()(),A(40,"div",25)(41,"span"),W(42,"Data di nascita"),R(),A(43,"span"),W(44),R()(),A(45,"div",25)(46,"span"),W(47,"Genere"),R(),A(48,"span"),W(49),R()(),A(50,"div",25)(51,"span"),W(52,"Indirizzo"),R(),A(53,"span"),W(54),R()(),A(55,"div",25)(56,"span"),W(57,"Citt\xE0"),R(),A(58,"span"),W(59),R()(),A(60,"div",25)(61,"span"),W(62,"Provincia"),R(),A(63,"span"),W(64),R()(),A(65,"div",25)(66,"span"),W(67,"CAP"),R(),A(68,"span"),W(69),R()()(),A(70,"div",24)(71,"h3"),W(72,"Tessera"),R(),A(73,"div",25)(74,"span"),W(75,"Scadenza"),R(),A(76,"span")(77,"input",26),Fe("change",function(i){Ie(t);let o=ie();return Se(o.updateSubscriptionEnd(i.target.value))}),R()()()(),A(78,"div",24)(79,"h3"),W(80,"Note Personali"),R(),A(81,"div",27),W(82),R()()(),A(83,"div",28)(84,"div",24)(85,"div",29)(86,"h3"),W(87,"Schede di Allenamento"),R(),rt(88,jle,2,1,"div",30),R(),A(89,"div",31),rt(90,zle,2,1,"ng-container",5)(91,qle,2,0,"ng-template",null,1,to),R()()()(),rt(93,$le,1,0,"div",32)(94,Hle,9,0,"div",33)(95,Gle,1,0,"div",32)(96,Qle,68,15,"div",34),Pi()}if(n&2){let t=pi(92),r=ie();X(3),ge("ngIf",r.user.avatarUrl),X(),ge("ngIf",!r.user.avatarUrl),X(5),zt(r.user.name),X(2),zt(r.user.email),X(2),Ar(" Tel: ",r.user.phone||"-"," "),X(),ge("ngIf",r.isExpired(r.user.subscriptionEnd)),X(2),ge("ngClass",hv(26,Ole,r.user.status==="Attivo",r.user.status!=="Attivo")),X(),Ar(" ",r.user.status," "),X(2),Ar("Data iscrizione: ",r.user.signupDate),X(15),zt(r.user.name.split(" ")[0]),X(5),zt(r.user.name.split(" ").slice(1).join(" ")||"-"),X(5),zt(r.user.birthDate||"-"),X(5),zt(r.user.gender||"-"),X(5),zt(r.user.address||"-"),X(5),zt(r.user.city||"-"),X(5),zt(r.user.provincia||"-"),X(5),zt(r.user.cap||"-"),X(8),ge("value",r.user.subscriptionEnd||""),X(5),zt(r.user.personalNotes||""),X(6),ge("ngIf",r.filteredCards.length),X(2),ge("ngIf",r.filteredCards.length>0)("ngIfElse",t),X(3),ge("ngIf",r.showDeleteModal),X(),ge("ngIf",r.showDeleteModal),X(),ge("ngIf",r.showEditModal),X(),ge("ngIf",r.showEditModal)}}function Xle(n,e){n&1&&(A(0,"p"),W(1,"Utente non trovato"),R())}var wz=(()=>{let e=class e{constructor(r,i,o,s){this.route=r,this.router=i,this.pdfSchedaService=o,this.authService=s,this.firestore=Me(Yo),this.imageService=Me(_m),this.userId="",this.nome="",this.cognome="",this.showEditModal=!1,this.showDeleteModal=!1,this.editForm={},this.avatarLoading=!1,this.today=new Date().toISOString().substring(0,10),this.filterExpiredOnly=!1,this.showShareMenu=!1,this.publicShareUrl="",this.selectedCardIndex=null}ngOnInit(){this.route.paramMap.subscribe(r=>{let i=r.get("id");i&&(this.userId=i,this.getUser())})}ngOnDestroy(){this.userSub?.unsubscribe()}getUser(){if(!this.userId)return;let r=wi(this.firestore,`users/${this.userId}`);this.userSub?.unsubscribe(),this.userSub=MB(r).subscribe(i=>{if(!i)return;let o=Vt(Ve({},i),{id:this.userId});Array.isArray(o.cards)&&(o.cards=o.cards.sort((s,a)=>{let c=this.parseItDateTime(s.date,s.time);return(this.parseItDateTime(a.date,a.time)?.getTime()||0)-(c?.getTime()||0)})),this.user=o})}parseItDateTime(r,i){if(!r)return;let o=r.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!o)return;let s=Number(o[1]),a=Number(o[2])-1,c=Number(o[3]),l=0,u=0;if(i){let p=i.match(/^(\d{2}):(\d{2})/);p&&(l=Number(p[1]),u=Number(p[2]))}return new Date(c,a,s,l,u)}isExpired(r){return r?r<=this.today:!1}updateSubscriptionEnd(r){return ee(this,null,function*(){if(this.user?.id)try{yield this.authService.ensureSignedIn();let i=wi(this.firestore,`users/${this.user.id}`);yield cl(i,{subscriptionEnd:r||""})}catch{alert("Errore durante l\u2019aggiornamento.")}})}deleteCard(r){return ee(this,null,function*(){if(!this.user||!this.user.id)return;let i=[...this.user.cards||[]];i.splice(r,1);let o=wi(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield cl(o,{cards:i})}catch{}})}openEditModal(){if(!this.user)return;this.editForm=Ve({},this.user);let r=(this.user.name||"").trim().split(" ");this.nome=r[0]||"",this.cognome=r.slice(1).join(" ")||"",this.showEditModal=!0}closeEditModal(){this.showEditModal=!1}onAvatarChange(r){return ee(this,null,function*(){let i=r.target.files?.[0];if(!i)return;this.avatarLoading=!0;let o=yield this.imageService.compressAndConvertToBase64(i,1e3,256);this.editForm.avatarUrl=o,this.avatarLoading=!1})}triggerAvatarInput(r){r.click()}saveEditModal(){return ee(this,null,function*(){if(!this.user?.id)return;let r=`${this.nome} ${this.cognome}`.trim(),i=Vt(Ve({},this.editForm),{name:r});delete i.avatarFile;try{yield this.authService.ensureSignedIn(),yield cl(wi(this.firestore,`users/${this.user.id}`),i),this.closeEditModal()}catch{alert("Errore aggiornamento.")}})}printCard(r){return ee(this,null,function*(){if(!this.user?.cards?.[r])return;let i=this.user.cards[r];if(i.pdfBase64){let o=atob(i.pdfBase64),s=new Array(o.length);for(let c=0;c<o.length;c++)s[c]=o.charCodeAt(c);let a=new Blob([new Uint8Array(s)],{type:"application/pdf"});window.open(URL.createObjectURL(a),"_blank");return}try{yield this.pdfSchedaService.buildAndSavePdf(i,this.user)}catch{alert("Errore stampa PDF")}})}get filteredCards(){return this.user?.cards||[]}deleteUserCustom(){return ee(this,null,function*(){if(this.user?.id)try{yield this.authService.ensureSignedIn(),yield vm(wi(this.firestore,`users/${this.user.id}`)),this.router.navigate(["/anagrafica/list"])}catch{}})}openDeleteModal(){this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1}};e.\u0275fac=function(i){return new(i||e)(Je(Gs),Je(Tr),Je(BC),Je(Cg))},e.\u0275cmp=lr({type:e,selectors:[["app-anagrafica-detail"]],standalone:!1,decls:6,vars:2,consts:[["notfound",""],["schedeVuote",""],["emptyAvatar",""],["avatarInput",""],[1,"page","anagrafica-detail"],[4,"ngIf","ngIfElse"],[1,"user-detail-header"],[1,"user-avatar-big"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"user-basic-info"],[1,"user-row-top"],[1,"user-detail-name"],[1,"user-detail-email"],[1,"user-detail-phone"],["class","badge badge-danger","style","margin-left:8px; background:#ffdede; color:#d32f2f; border-radius:6px; padding:0 8px;",4,"ngIf"],[1,"status-date"],[1,"user-status-label",3,"ngClass"],[1,"user-detail-signup-date"],[1,"user-detail-actions"],[1,"btn",3,"click"],[1,"btn","outline",3,"click"],[1,"user-detail-content"],[1,"user-detail-col"],[1,"user-detail-section"],[1,"personal-info-row"],["type","date",1,"gestabbonamento-date",2,"background","#fff","border","none","outline","none","font-size","1rem","color","#195089",3,"change","value"],[1,"note-box"],[1,"user-detail-col","user-detail-col-wide"],[1,"schede-header"],["class","schede-count",4,"ngIf"],[1,"scheda-box"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-confirm-delete",4,"ngIf"],["class","modal-edit-profilo",4,"ngIf"],[3,"src","alt"],[1,"material-icons","avatar-placeholder-big",2,"font-size","72px","border-radius","50%","background","#f4f4f4","color","#bbb"],[1,"badge","badge-danger",2,"margin-left","8px","background","#ffdede","color","#d32f2f","border-radius","6px","padding","0 8px"],[1,"schede-count"],["class","scheda-row",4,"ngFor","ngForOf"],[1,"scheda-row"],[1,"scheda-info-flex","scheda-info",2,"flex-direction","row","align-items","center","gap","10px"],[1,"material-icons","scheda-icon"],[1,"scheda-date",2,"font-weight","600"],[1,"scheda-actions-inline"],["title","Stampa PDF",1,"btn","small",3,"click"],[1,"material-icons","small-icon"],["title","Elimina",1,"btn","small","outline",3,"click"],[1,"scheda-empty"],[1,"modal-backdrop",3,"click"],[1,"modal-confirm-delete"],[1,"modal-confirm-content",3,"click"],[1,"modal-confirm-actions"],[1,"btn","danger",3,"click"],[1,"modal-edit-profilo"],["autocomplete","off",3,"ngSubmit","click"],[1,"modal-edit-flex"],[1,"modal-avatar-box",3,"click"],["type","file","accept","image/*","hidden","",3,"change"],["class","avatar-loader","style","margin-left:15px;color:#888;",4,"ngIf"],[1,"modal-fields-note-wrap"],[1,"modal-fields-grid"],["type","text","name","nome","required","",3,"ngModelChange","ngModel"],["type","text","name","cognome","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","name","phone",3,"ngModelChange","ngModel"],["type","date","name","birthDate",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Maschio"],["value","Femmina"],["value","Altro"],["type","text","name","address",3,"ngModelChange","ngModel"],["type","text","name","city",3,"ngModelChange","ngModel"],["type","text","name","provincia",3,"ngModelChange","ngModel"],["type","text","name","cap",3,"ngModelChange","ngModel"],["name","status",3,"ngModelChange","ngModel"],["value","Attivo"],["value","Inattivo"],[1,"modal-field-note-row"],["name","personalNotes","rows","4",3,"ngModelChange","ngModel"],[1,"modal-edit-actions"],["type","submit",1,"btn"],["type","button",1,"btn","outline",3,"click"],["alt","Avatar",1,"avatar-img-preview",2,"width","72px","height","72px","border-radius","50%","object-fit","cover","cursor","pointer","box-shadow","0 0 8px #eee",3,"src"],[1,"material-icons",2,"font-size","60px","width","72px","height","72px","border-radius","50%","background","#f4f4f4","color","#9b9b9b","display","inline-flex","align-items","center","justify-content","center","cursor","pointer"],[1,"avatar-loader",2,"margin-left","15px","color","#888"]],template:function(i,o){if(i&1&&(A(0,"div",4)(1,"h2"),W(2,"Cliente"),R(),rt(3,Zle,97,29,"ng-container",5)(4,Xle,2,0,"ng-template",null,0,to),R()),i&2){let s=pi(5);X(3),ge("ngIf",o.user)("ngIfElse",s)}},dependencies:[qf,wo,no,rg,nd,rd,gs,Wc,Da,ng,Hf,qs,$f],styles:[".page.anagrafica-detail[_ngcontent-%COMP%]{max-width:1160px;margin:32px auto;padding:24px 20px 32px;background:#f8fafc;border-radius:16px;box-shadow:0 5px 35px #d3dbe925}h2[_ngcontent-%COMP%]{font-size:1.54rem;font-weight:600;margin-bottom:28px}.user-detail-header[_ngcontent-%COMP%]{display:flex;gap:26px;align-items:flex-start;background:#fff;border-radius:14px;margin-bottom:28px;box-shadow:0 2px 12px #c7d5e12a;padding:22px 28px 15px 22px}.user-avatar-big[_ngcontent-%COMP%], .modal-avatar-box[_ngcontent-%COMP%]{width:96px;height:96px;border-radius:50%;background:#e9f2fb;display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;cursor:pointer}.user-avatar-big[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .modal-avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:94px;height:94px;border-radius:50%;object-fit:cover}.avatar-placeholder-big[_ngcontent-%COMP%]{font-size:58px;color:#bdcbe1}.user-basic-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:flex-start}.user-row-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:15px}.user-detail-name[_ngcontent-%COMP%]{font-size:1.19rem;font-weight:700;color:#132c4c}.user-detail-email[_ngcontent-%COMP%]{color:#577296;font-size:1rem;margin-top:7px}.user-detail-phone[_ngcontent-%COMP%]{font-size:.98rem;color:#3f4760;margin-top:6px}.status-date[_ngcontent-%COMP%]{text-align:right}.user-status-label[_ngcontent-%COMP%]{display:inline-block;background:#e8faee;color:#1cb164;font-weight:600;border-radius:7px;padding:6px 22px;font-size:1.06rem;min-width:74px;text-align:center;margin-bottom:5px}.user-status-label.inactive[_ngcontent-%COMP%]{color:#e76c6c;background:#fde8e8}.user-detail-signup-date[_ngcontent-%COMP%]{color:#7b90ad;font-size:.96rem;margin-top:7px}.user-detail-actions[_ngcontent-%COMP%]{margin-top:14px}.btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;padding:8px 14px;border-radius:6px;margin-right:9px;font-size:1rem;font-weight:500;cursor:pointer;transition:background .18s;box-shadow:0 2px 6px #365fd214}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{background:#1742b0}.btn.outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #cbd8e6;color:#2563eb}.btn.small[_ngcontent-%COMP%]{font-size:.97rem;padding:7px 10px;margin:0;display:flex;align-items:center;justify-content:center;min-width:38px;height:38px}.btn.tiny[_ngcontent-%COMP%]{font-size:.82rem;padding:6px 10px;margin:0}.btn.danger[_ngcontent-%COMP%]{background:#ee4555;color:#fff;border:none}.btn.danger[_ngcontent-%COMP%]:hover, .btn.danger[_ngcontent-%COMP%]:focus{background:#ad1125}.btn.share[_ngcontent-%COMP%]{background:#e6f0ff;color:#1742b0;border:1px solid #bed1f5}.btn.share[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.user-detail-content[_ngcontent-%COMP%]{display:flex;gap:30px;margin-top:16px}.user-detail-col[_ngcontent-%COMP%]{flex:1.1;min-width:270px;display:flex;flex-direction:column;gap:28px}.user-detail-col-wide[_ngcontent-%COMP%]{flex:2}.user-detail-section[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 1.5px 6px #d7dbe333;padding:18px 20px 19px 22px;margin-bottom:4px}.user-detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.09rem;font-weight:600;margin-bottom:18px}.personal-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.01rem;padding:2.5px 0;color:#495879;border-bottom:1px solid #f1f5fa}.personal-info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.personal-info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#253157;font-weight:500}.note-box[_ngcontent-%COMP%]{background:#f6fbff;border:1px solid #e1e8ee;border-radius:7px;color:#6d7c96;font-size:.99rem;padding:11px 15px;min-height:54px;margin-bottom:2px}.schede-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:8px}.schede-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.schede-count[_ngcontent-%COMP%]{color:#607997;font-size:.95rem}.scheda-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:13px}.scheda-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:15px;background:#fafdfe;border:1px solid #c8e8fd;border-radius:10px;padding:12px 16px}.scheda-info-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.scheda-icon[_ngcontent-%COMP%]{color:#2563eb;font-size:28px;flex-shrink:0}.scheda-date[_ngcontent-%COMP%]{font-size:.97rem;color:#195089;font-weight:600}.scheda-actions-inline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-left:auto}.scheda-empty[_ngcontent-%COMP%]{background:#f6fbff;border:1px dashed #cbd8e6;border-radius:8px;padding:14px 12px;color:#607997;text-align:center}.share-inline[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:14px;background:#f4f9ff;border:1px solid #cfe2ff;border-radius:10px;padding:12px}.share-inline-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.share-url-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.share-url-input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;border-radius:8px;border:1px solid #cfe2ff;font-size:.92rem;color:#15375e;background:#fff}.share-buttons-row[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.share-inline-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:#17334b44}.modal-confirm-delete[_ngcontent-%COMP%]{position:fixed;z-index:1050;top:50%;left:50%;transform:translate(-50%,-50%);min-width:340px;max-width:95vw;background:#fff;border-radius:14px;box-shadow:0 8px 44px #0d1d3325;padding:32px 34px 22px;display:flex;flex-direction:column;align-items:stretch}.modal-confirm-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.modal-confirm-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.12rem;margin-bottom:22px;text-align:center;color:#18325a}.modal-confirm-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:22px}.modal-edit-profilo[_ngcontent-%COMP%]{position:fixed;z-index:1010;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:18px;box-shadow:0 10px 40px #1d2c4522;min-width:650px;max-width:980px;padding:32px 34px 22px 32px;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalpop .18s cubic-bezier(.32,1.56,.66,1) 1}@keyframes _ngcontent-%COMP%_modalpop{0%{transform:translate(-50%,-56%) scale(.98)}to{transform:translate(-50%,-50%) scale(1)}}.modal-edit-profilo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;margin-bottom:18px}.modal-edit-flex[_ngcontent-%COMP%]{display:flex;gap:32px;align-items:flex-start}.modal-avatar-box[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;margin-right:32px;margin-top:7px;cursor:pointer;width:88px;height:88px;border-radius:50%;box-shadow:0 2px 9px #2463eb0f;background:#f8fafc}.modal-avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2.5px solid #e0e5f7}.modal-fields-note-wrap[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.modal-fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px 20px}.modal-fields-grid[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.97rem;color:#143349;gap:5px}.modal-fields-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-fields-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 10px;border-radius:7px;border:1.3px solid #dce1eb;background:#f8fafc;color:#102039;font-size:1rem}.modal-fields-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-fields-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-field-note-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:1.3px solid #2563eb;background:#f6faff}.modal-field-note-row[_ngcontent-%COMP%]{grid-column:1/-1;margin-top:18px;display:flex;flex-direction:column}.modal-field-note-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.99rem;color:#143349}.modal-field-note-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:92px;resize:vertical;padding:10px;border-radius:8px;border:1.2px solid #dce1eb;background:#f8fafc;color:#102039;font-size:1rem}.modal-edit-actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end;gap:14px}.small-icon[_ngcontent-%COMP%]{font-size:20px!important;vertical-align:middle;margin-right:0!important}@media (max-width: 900px){.modal-edit-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.modal-avatar-box[_ngcontent-%COMP%]{margin:0 auto 20px}.modal-fields-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pdf-preview[_ngcontent-%COMP%]{width:100%;height:360px;border:1px solid #ddd;border-radius:6px}.attach-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-start;margin-bottom:8px}.attach-area[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{color:#586b7a;font-size:.86rem}.error[_ngcontent-%COMP%]{color:#c62828;margin-bottom:6px}.share-btn[_ngcontent-%COMP%]{background:#eef2ff!important;color:#4f46e5!important;border:1px solid #c7d2fe!important}.share-btn[_ngcontent-%COMP%]:hover{background:#4f46e5!important;color:#fff!important}.modal-share[_ngcontent-%COMP%]{position:fixed;z-index:1100;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:18px;padding:24px;width:90%;max-width:380px;box-shadow:0 10px 40px #00000026;animation:_ngcontent-%COMP%_modalpop .2s ease-out}.modal-share-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.modal-share[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.modal-share[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.92rem;color:#64748b;margin-bottom:20px}.share-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px}.share-opt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:15px;border-radius:12px;border:1px solid #f1f5f9;background:#f8fafc;cursor:pointer;transition:all .2s}.share-opt[_ngcontent-%COMP%]:hover{background:#f1f5f9;transform:translateY(-2px)}.share-opt[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:28px}.whatsapp[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#22c55e}.telegram[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#0ea5e9}.email[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#f43f5e}.native[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#6366f1}.share-link-copy[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#f1f5f9;padding:8px 12px;border-radius:8px;margin-bottom:20px}.share-link-copy[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;font-size:.85rem;color:#475569;outline:none}.full-width[_ngcontent-%COMP%]{width:100%}.close-icon[_ngcontent-%COMP%]{cursor:pointer;color:#94a3b8}"]});let n=e;return n})();function Jle(n,e){if(n&1&&(A(0,"div",46),W(1),R()),n&2){let t=ie();X(),Ar(" ",t.savedMsgText,`
`)}}function eue(n,e){if(n&1&&wt(0,"img",47),n&2){let t=ie();ge("src",t.cliente==null?null:t.cliente.avatarUrl,Sr)}}function tue(n,e){n&1&&(A(0,"div",48),W(1,"\u{1F464}"),R())}function nue(n,e){n&1&&(Ni(0),Vr(),A(1,"svg",49),wt(2,"rect",50),A(3,"g"),wt(4,"rect",51)(5,"circle",52)(6,"path",53),R()(),Pi())}function rue(n,e){if(n&1&&wt(0,"img",54),n&2){let t=ie();ge("src",t.logoPreviewUrl,Sr)}}function iue(n,e){if(n&1){let t=Bt();A(0,"div",58),Fe("click",function(){Ie(t);let i=ie().index,o=ie();return Se(o.setGiorno(i))})("dblclick",function(){Ie(t);let i=ie().$implicit,o=ie();return Se(o.enableTabEdit(i))}),W(1),R()}if(n&2){let t=ie().$implicit;X(),zt(t.nome)}}function oue(n,e){if(n&1){let t=Bt();A(0,"input",59),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit;return dt(o.nome,i)||(o.nome=i),Se(i)}),Fe("blur",function(){Ie(t);let i=ie().$implicit,o=ie();return Se(o.disableTabEdit(i))})("keydown.enter",function(){Ie(t);let i=ie().$implicit,o=ie();return Se(o.disableTabEdit(i))}),R()}if(n&2){let t=ie().$implicit;lt("ngModel",t.nome)}}function sue(n,e){if(n&1&&(A(0,"div",55),rt(1,iue,2,1,"div",56)(2,oue,1,1,"input",57),R()),n&2){let t=e.$implicit,r=e.index,i=ie();ps("active",r===i.giornoAttivoIndex),X(),ge("ngIf",!t.editing),X(),ge("ngIf",t.editing)}}function aue(n,e){if(n&1){let t=Bt();A(0,"div",63),Fe("click",function(){let i=Ie(t).index,o=ie(2);return Se(o.setSettimana(i))}),W(1),R()}if(n&2){let t=e.$implicit,r=e.index,i=ie(2);ps("active",r===i.settimanaAttivaIndex),X(),Ar(" ",t.nome," ")}}function cue(n,e){if(n&1){let t=Bt();A(0,"div",60),rt(1,aue,2,3,"div",61),A(2,"button",29),Fe("click",function(){Ie(t);let i=ie();return Se(i.aggiungiSettimanaGiorno())}),W(3,"+ Settimana"),R(),A(4,"button",62),Fe("click",function(){Ie(t);let i=ie();return Se(i.rimuoviSettimanaGiorno())}),W(5,"\u2013 Settimana"),R()()}if(n&2){let t=ie();X(),ge("ngForOf",t.scheda.giorni[t.giornoAttivoIndex].settimane),X(3),ge("disabled",(t.scheda.giorni[t.giornoAttivoIndex].settimane==null?null:t.scheda.giorni[t.giornoAttivoIndex].settimane.length)===1)}}function lue(n,e){n&1&&(A(0,"div",64),W(1," Aggiungi un esercizio dalla colonna destra "),R())}function uue(n,e){if(n&1&&wt(0,"img",80),n&2){let t=ie().$implicit;ge("alt",zf(t.nome))("src",t.image,Sr)}}function due(n,e){n&1&&(A(0,"div",81),W(1,"\u{1F3CB}\uFE0F"),R())}function fue(n,e){if(n&1){let t=Bt();A(0,"div",82)(1,"label"),W(2,"Serie "),A(3,"input",83),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit,s=ie(2);return dt(o.settimaneValori[s.settimanaAttivaIndex].serie,i)||(o.settimaneValori[s.settimanaAttivaIndex].serie=i),Se(i)}),R()(),A(4,"label"),W(5,"Ripetizioni "),A(6,"input",83),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit,s=ie(2);return dt(o.settimaneValori[s.settimanaAttivaIndex].ripetizioni,i)||(o.settimaneValori[s.settimanaAttivaIndex].ripetizioni=i),Se(i)}),R()(),A(7,"label"),W(8,"Min "),A(9,"input",83),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit,s=ie(2);return dt(o.settimaneValori[s.settimanaAttivaIndex].minuti,i)||(o.settimaneValori[s.settimanaAttivaIndex].minuti=i),Se(i)}),R()(),A(10,"label"),W(11,"Sec "),A(12,"input",83),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit,s=ie(2);return dt(o.settimaneValori[s.settimanaAttivaIndex].secondi,i)||(o.settimaneValori[s.settimanaAttivaIndex].secondi=i),Se(i)}),R()(),A(13,"label"),W(14,"Kg "),A(15,"input",84),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit,s=ie(2);return dt(o.settimaneValori[s.settimanaAttivaIndex].caricoKg,i)||(o.settimaneValori[s.settimanaAttivaIndex].caricoKg=i),Se(i)}),R()()()}if(n&2){let t=ie().$implicit,r=ie(2);X(3),lt("ngModel",t.settimaneValori[r.settimanaAttivaIndex].serie),X(3),lt("ngModel",t.settimaneValori[r.settimanaAttivaIndex].ripetizioni),X(3),lt("ngModel",t.settimaneValori[r.settimanaAttivaIndex].minuti),X(3),lt("ngModel",t.settimaneValori[r.settimanaAttivaIndex].secondi),X(3),lt("ngModel",t.settimaneValori[r.settimanaAttivaIndex].caricoKg)}}function hue(n,e){if(n&1){let t=Bt();A(0,"div",82)(1,"label"),W(2,"Serie "),A(3,"input",83),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit;return dt(o.settimaneValori[0].serie,i)||(o.settimaneValori[0].serie=i),Se(i)}),R()(),A(4,"label"),W(5,"Ripetizioni "),A(6,"input",83),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit;return dt(o.settimaneValori[0].ripetizioni,i)||(o.settimaneValori[0].ripetizioni=i),Se(i)}),R()(),A(7,"label"),W(8,"Min "),A(9,"input",83),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit;return dt(o.settimaneValori[0].minuti,i)||(o.settimaneValori[0].minuti=i),Se(i)}),R()(),A(10,"label"),W(11,"Sec "),A(12,"input",83),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit;return dt(o.settimaneValori[0].secondi,i)||(o.settimaneValori[0].secondi=i),Se(i)}),R()()()}if(n&2){let t=ie().$implicit;X(3),lt("ngModel",t.settimaneValori[0].serie),X(3),lt("ngModel",t.settimaneValori[0].ripetizioni),X(3),lt("ngModel",t.settimaneValori[0].minuti),X(3),lt("ngModel",t.settimaneValori[0].secondi)}}function pue(n,e){if(n&1){let t=Bt();A(0,"textarea",85),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit,s=ie(2);return dt(o.settimaneValori[s.settimanaAttivaIndex].note,i)||(o.settimaneValori[s.settimanaAttivaIndex].note=i),Se(i)}),Fe("blur",function(){Ie(t);let i=ie(3);return Se(i.persistSchedule())}),R()}if(n&2){let t=ie().$implicit,r=ie(2);lt("ngModel",t.settimaneValori[r.settimanaAttivaIndex].note)}}function gue(n,e){if(n&1){let t=Bt();A(0,"textarea",85),ut("ngModelChange",function(i){Ie(t);let o=ie().$implicit;return dt(o.settimaneValori[0].note,i)||(o.settimaneValori[0].note=i),Se(i)}),Fe("blur",function(){Ie(t);let i=ie(3);return Se(i.persistSchedule())}),R()}if(n&2){let t=ie().$implicit;lt("ngModel",t.settimaneValori[0].note)}}function mue(n,e){if(n&1){let t=Bt();A(0,"div",67)(1,"div",68)(2,"div",69),rt(3,uue,1,3,"img",70)(4,due,2,0,"div",71),R(),A(5,"div",72),W(6),R(),A(7,"div",73)(8,"button",74),Fe("click",function(){let i=Ie(t).index,o=ie(2);return Se(o.moveExerciseUp(i))}),W(9,"\u2191"),R(),A(10,"button",75),Fe("click",function(){let i=Ie(t).index,o=ie(2);return Se(o.moveExerciseDown(i))}),W(11,"\u2193"),R(),A(12,"button",76),Fe("click",function(){let i=Ie(t).index,o=ie(2);return Se(o.resetExercise(i))}),W(13,"\u27F3"),R(),A(14,"button",77),Fe("click",function(){let i=Ie(t).index,o=ie(2);return Se(o.rimuoviEsercizio(i))}),W(15,"\xD7"),R()()(),rt(16,fue,16,5,"div",78)(17,hue,13,4,"div",78)(18,pue,1,1,"textarea",79)(19,gue,1,1,"textarea",79),R()}if(n&2){let t=e.$implicit,r=e.index,i=ie(2);X(3),ge("ngIf",t.image),X(),ge("ngIf",!t.image),X(2),zt(t.nome),X(2),ge("disabled",i.currentExercisePage*i.pageSize+r===0),X(2),ge("disabled",i.currentExercisePage*i.pageSize+r===i.scheda.giorni[i.giornoAttivoIndex].esercizi.length-1),X(6),ge("ngIf",i.templateType==="profghizztemplate"),X(),ge("ngIf",i.templateType!=="profghizztemplate"),X(),ge("ngIf",i.templateType==="profghizztemplate"),X(),ge("ngIf",i.templateType!=="profghizztemplate")}}function vue(n,e){if(n&1&&(A(0,"div",65),rt(1,mue,20,9,"div",66),R()),n&2){let t=ie();X(),ge("ngForOf",t.pagedExercises)}}function yue(n,e){if(n&1){let t=Bt();A(0,"div",86)(1,"button",87),Fe("click",function(){Ie(t);let i=ie();return Se(i.goToPrevExercisePage())}),Vr(),A(2,"svg",88),wt(3,"circle",89)(4,"path",90),R()(),us(),A(5,"span",91),W(6),R(),A(7,"button",87),Fe("click",function(){Ie(t);let i=ie();return Se(i.goToNextExercisePage())}),Vr(),A(8,"svg",88),wt(9,"circle",89)(10,"path",92),R()()()}if(n&2){let t=ie();X(),ge("disabled",t.currentExercisePage<=0),X(5),pb("",t.currentExercisePage+1," / ",t.totalExercisePages||1),X(),ge("disabled",t.currentExercisePage>=t.totalExercisePages-1)}}function _ue(n,e){if(n&1&&(A(0,"option",93),W(1),R()),n&2){let t=e.$implicit;ge("value",t.name),X(),zt(t.name)}}function wue(n,e){if(n&1&&wt(0,"img",80),n&2){let t=ie().$implicit;ge("alt",zf(t.name))("src",t.image,Sr)}}function bue(n,e){n&1&&(A(0,"div",100),W(1,"\u{1F3CB}\uFE0F"),R())}function xue(n,e){if(n&1){let t=Bt();A(0,"div",94),Fe("click",function(){let i=Ie(t).$implicit,o=ie();return Se(o.aggiungiEsercizioAlGiorno(i))}),A(1,"div",95),rt(2,wue,1,3,"img",70)(3,bue,2,0,"div",96),R(),A(4,"div",97)(5,"div",98),W(6),R(),A(7,"div",99),W(8),R()()()}if(n&2){let t=e.$implicit;X(2),ge("ngIf",t.image),X(),ge("ngIf",!t.image),X(3),zt(t.name),X(2),zt(t.category)}}function Cue(n,e){n&1&&(A(0,"div",101),W(1,"Nessun esercizio"),R())}function Eue(n,e){if(n&1&&wt(0,"img",80),n&2){let t=ie().$implicit;ge("alt",zf(t.name))("src",t.avatarUrl,Sr)}}function Iue(n,e){n&1&&(A(0,"span"),W(1,"\u{1F464}"),R())}function Sue(n,e){if(n&1&&(A(0,"div",117),W(1),R()),n&2){let t=ie().$implicit;X(),zt(t.email)}}function Aue(n,e){if(n&1){let t=Bt();A(0,"div",111),Fe("click",function(){let i=Ie(t).$implicit,o=ie(2);return Se(o.selectUser(i))}),A(1,"div",112),rt(2,Eue,1,3,"img",70)(3,Iue,2,0,"span",15),R(),A(4,"div",113)(5,"div",114),W(6),R(),rt(7,Sue,2,1,"div",115),A(8,"div",116),W(9),R()()()}if(n&2){let t=e.$implicit;X(2),ge("ngIf",t.avatarUrl),X(),ge("ngIf",!t.avatarUrl),X(3),zt(t.name),X(),ge("ngIf",t.email),X(),ps("inactive",t.status!=="Attivo"),X(),zt(t.status)}}function Tue(n,e){n&1&&(A(0,"div",118),W(1,"Nessun utente"),R())}function Due(n,e){if(n&1){let t=Bt();A(0,"div",102)(1,"div",103)(2,"div",104)(3,"div",105),W(4,"Seleziona Cliente"),R(),A(5,"button",106),Fe("click",function(){Ie(t);let i=ie();return Se(i.closeUserPicker())}),W(6,"\xD7"),R()(),A(7,"input",107),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.userSearch,i)||(o.userSearch=i),Se(i)}),Fe("input",function(){Ie(t);let i=ie();return Se(i.filterUsers())}),R(),A(8,"div",108),rt(9,Aue,10,7,"div",109),pv(10,"slice"),rt(11,Tue,2,0,"div",110),R()()()}if(n&2){let t=ie();X(7),lt("ngModel",t.userSearch),X(2),ge("ngForOf",gv(10,3,t.filteredUserList,0,3)),X(2),ge("ngIf",t.filteredUserList.length===0)}}var bz=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.pdfSchedaService=i,this.authService=o,this.firestore=Me(Yo),this.cliente=null,this.scheda={stato:"In preparazione",livello:"Intermedio",durata:"4 Settimane",dataInizio:"",orario:"",giorni:[{nome:"Giorno 1",esercizi:[],settimane:[{nome:"Settimana 1"}]}],templateType:"fitnessanddance"},this.logoPreviewUrl=null,this.tempLogoFile=null,this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0,this.esercizi=[],this.categorie=[],this.eserciziFiltrati=[],this.searchTerm="",this.filterCategoria="",this.allUsers=[],this.filteredUserList=[],this.userSearch="",this.showUserPicker=!1,this.oggi=new Date().toISOString().split("T")[0],this.pdfBlobUrl=null,this.currentExercisePage=0,this.pageSize=3,this.showSavedMsg=!1,this.savedMsgText="Scheda salvata",this.templateType="fitnessanddance"}get pagedExercises(){let r=this.scheda.giorni[this.giornoAttivoIndex].esercizi,i=this.currentExercisePage*this.pageSize;return r.slice(i,i+this.pageSize)}get totalExercisePages(){let r=this.scheda.giorni[this.giornoAttivoIndex].esercizi;return Math.max(1,Math.ceil(r.length/this.pageSize))}goToPrevExercisePage(){this.currentExercisePage>0&&this.currentExercisePage--}goToNextExercisePage(){this.currentExercisePage<this.totalExercisePages-1&&this.currentExercisePage++}ngOnInit(){this.initStandard()}initStandard(){return ee(this,null,function*(){yield this.loadUsers(),yield this.loadSelectedUser(),yield this.loadExercises(),yield this.loadCategories(),yield this.loadExistingSchedule(),this.filtraEsercizi(),this.filterUsers(),this.scheda.dataInizio||(this.scheda.dataInizio=this.oggi),this.scheda.orario||(this.scheda.orario=this.normalizeTimeToHMS(new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))),this.scheda.templateType=this.templateType,this.scheda.giorni.forEach(r=>{this.templateType==="profghizztemplate"?(!r.settimane||r.settimane.length===0)&&(r.settimane=[{nome:"Settimana 1"}]):delete r.settimane,r.esercizi.forEach(i=>{(!i.settimaneValori||i.settimaneValori.length===0)&&(i.settimaneValori=[this.zeroValues()])})}),this.templateType==="profghizztemplate"&&(this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0)})}onTemplateTypeChange(r){this.templateType=r,this.scheda.templateType=r,r==="profghizztemplate"?(this.scheda.giorni=[{nome:"Giorno 1",esercizi:[],settimane:[{nome:"Settimana 1"}]}],this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0):(this.scheda.giorni=[{nome:"Giorno 1",esercizi:[]}],this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0),this.persistSchedule()}setGiorno(r){this.giornoAttivoIndex=r,this.settimanaAttivaIndex=0,this.currentExercisePage=0}setSettimana(r){let i=this.scheda.giorni[this.giornoAttivoIndex];this.templateType==="profghizztemplate"&&i.settimane&&i.esercizi.forEach(o=>{for(o.settimaneValori=o.settimaneValori||[];o.settimaneValori.length<=r;)o.settimaneValori.push(this.zeroValues())}),this.settimanaAttivaIndex=r}aggiungiGiorno(){let r=this.scheda.giorni.length+1;this.templateType==="profghizztemplate"?this.scheda.giorni.push({nome:"Giorno "+r,esercizi:[],settimane:[{nome:"Settimana 1"}]}):this.scheda.giorni.push({nome:"Giorno "+r,esercizi:[]}),this.giornoAttivoIndex=this.scheda.giorni.length-1,this.settimanaAttivaIndex=0,this.currentExercisePage=0,this.persistSchedule()}rimuoviGiorno(){this.scheda.giorni.length!==1&&(this.scheda.giorni.splice(this.giornoAttivoIndex,1),this.giornoAttivoIndex>=this.scheda.giorni.length&&(this.giornoAttivoIndex=this.scheda.giorni.length-1),this.settimanaAttivaIndex=0,this.currentExercisePage=0,this.persistSchedule())}aggiungiSettimanaGiorno(){if(this.templateType!=="profghizztemplate")return;let r=this.scheda.giorni[this.giornoAttivoIndex].settimane||[];r.push({nome:"Settimana "+(r.length+1)}),this.scheda.giorni[this.giornoAttivoIndex].settimane=r,this.scheda.giorni[this.giornoAttivoIndex].esercizi.forEach(o=>{o.settimaneValori=o.settimaneValori||[],o.settimaneValori.push(this.zeroValues())}),this.settimanaAttivaIndex=r.length-1,this.persistSchedule()}rimuoviSettimanaGiorno(){if(this.templateType!=="profghizztemplate")return;let r=this.scheda.giorni[this.giornoAttivoIndex],i=r.settimane||[];i.length!==1&&(i.splice(this.settimanaAttivaIndex,1),r.esercizi.forEach(o=>{o.settimaneValori?.length>this.settimanaAttivaIndex&&o.settimaneValori.splice(this.settimanaAttivaIndex,1)}),this.settimanaAttivaIndex>=i.length&&(this.settimanaAttivaIndex=i.length-1),r.settimane=i,this.persistSchedule())}loadUsers(){return ee(this,null,function*(){let r=oo(this.firestore,"users"),i=yield Eh(r);this.allUsers=i.docs.map(o=>Ve({id:o.id},o.data()))})}loadSelectedUser(){return ee(this,null,function*(){this.cliente=this.allUsers[0]||null,this.cliente&&(this.scheda.userId=this.cliente.id)})}loadExercises(){return ee(this,null,function*(){let r=oo(this.firestore,"exercises"),i=yield Eh(r);this.esercizi=i.docs.map(o=>Ve({id:o.id},o.data()))})}loadCategories(){return ee(this,null,function*(){let r=oo(this.firestore,"categories"),i=yield Eh(r);this.categorie=i.docs.map(o=>Ve({id:o.id,selected:!1},o.data()))})}loadExistingSchedule(){return ee(this,null,function*(){if(!this.cliente)return;let r=oo(this.firestore,"schede"),i=RB(r,OB("userId","==",this.cliente.id),kB("createdAt","asc")),s=(yield Eh(i)).docs.map(a=>Ve({id:a.id},a.data()));s.length>0&&(this.scheda=s[s.length-1],this.scheda.giorni.forEach(a=>{this.templateType==="profghizztemplate"?(!a.settimane||a.settimane.length===0)&&(a.settimane=[{nome:"Settimana 1"}]):delete a.settimane,a.esercizi.forEach(c=>{(!c.settimaneValori||c.settimaneValori.length===0)&&(c.settimaneValori=[this.zeroValues()])})}),this.scheda.templateType=this.scheda.templateType||"fitnessanddance",this.templateType=this.scheda.templateType)})}filterUsers(){let r=this.userSearch.toLowerCase().trim();this.filteredUserList=this.allUsers.filter(i=>(i.name||"").toLowerCase().includes(r)||(i.email||"").toLowerCase().includes(r))}openUserPicker(){this.showUserPicker=!0,this.userSearch="",this.filterUsers()}closeUserPicker(){this.showUserPicker=!1}selectUser(r){return ee(this,null,function*(){this.cliente=r,this.scheda.userId=r.id,this.closeUserPicker(),yield this.loadExistingSchedule(),this.currentExercisePage=0})}enableTabEdit(r){r.editing=!0,setTimeout(()=>{let i=document.querySelectorAll(".tab-edit"),o=i[i.length-1];o?.focus(),o?.select()},0)}disableTabEdit(r){r.editing=!1,this.persistSchedule()}aggiungiEsercizioAlGiorno(r){let i=this.scheda.giorni[this.giornoAttivoIndex];if(this.templateType==="profghizztemplate"){let o=i.settimane?.length||1;i.esercizi.push({id:r.id,nome:r.name,image:r.image,categoria:r.category,settimaneValori:Array.from({length:o},()=>this.zeroValues())})}else i.esercizi.push({id:r.id,nome:r.name,image:r.image,categoria:r.category,settimaneValori:[this.zeroValues()]});this.persistSchedule()}rimuoviEsercizio(r){this.scheda.giorni[this.giornoAttivoIndex].esercizi.splice(r+this.currentExercisePage*this.pageSize,1),this.currentExercisePage>0&&this.pagedExercises.length===0&&this.goToPrevExercisePage(),this.persistSchedule()}filtraEsercizi(){let r=this.searchTerm.toLowerCase().trim();this.eserciziFiltrati=this.esercizi.filter(i=>{let o=(i.name||"").toLowerCase().includes(r),s=this.filterCategoria?i.category===this.filterCategoria:!0;return o&&s})}salvaScheda(){return ee(this,null,function*(){yield this.authService.ensureSignedIn();let r=new Date;this.scheda.orario=this.normalizeTimeToHMS(r.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"})),this.scheda.dataInizio=r.toISOString().split("T")[0],this.scheda.templateType=this.templateType,yield this.persistSchedule();let i=yield this.buildPdfBase64();yield this.appendCardToUser(this.scheda.dataInizio,this.scheda.orario,i),this.showSavedMsg=!0,this.savedMsgText="Scheda salvata",setTimeout(()=>{this.showSavedMsg=!1},2500)})}normalizeTimeToHMS(r){if(!r)return"";let i=r.match(/^(\d{2}):(\d{2})(?::(\d{2}))?$/);if(!i)return r;let o=i[3]??"00";return`${i[1]}:${i[2]}:${o}`}zeroValues(){return{serie:0,ripetizioni:0,minuti:0,secondi:0,caricoKg:0,note:""}}buildPdfBase64(){return ee(this,null,function*(){try{return(this.scheda.templateType==="profghizztemplate"?yield this.pdfSchedaService.buildProfGhizzDoc(this.scheda,this.cliente,this.logoPreviewUrl):yield this.pdfSchedaService.buildDoc(this.scheda,this.cliente,this.logoPreviewUrl)).output("datauristring").split(",")[1]||""}catch{return""}})}appendCardToUser(r,i,o){return ee(this,null,function*(){if(!this.cliente||!this.scheda)return;yield this.authService.ensureSignedIn();let s=this.computeScheduleTitle(),a=this.formatDateIT(r),c=this.normalizeTimeToHMS(i),l=85e4,u={title:s,date:a||"",time:c};o&&o.length<=l&&(u.pdfBase64=o);let p=wi(this.firestore,`users/${this.cliente.id}`);try{let m=yield rC(p),x=[...m.exists()&&Array.isArray(m.data().cards)?m.data().cards:[],u];yield cl(p,{cards:x}),this.cliente&&(this.cliente.cards=x)}catch(m){console.error("Error appending card to user",m)}})}computeScheduleTitle(){let r=this.scheda.giorni?.[this.giornoAttivoIndex]?.nome||"Scheda allenamento",i=this.scheda.livello||"",o=this.scheda.stato||"",s=i?`${r} \u2022 ${i}`:r;return o?`${s} \u2022 ${o}`:s}formatDateIT(r){if(!r)return null;let i=r.match(/^(\d{4})-(\d{2})-(\d{2})$/);return i?`${i[3]}/${i[2]}/${i[1]}`:null}persistSchedule(){return ee(this,null,function*(){if(!this.cliente)return;yield this.authService.ensureSignedIn();let r=Vt(Ve({},this.scheda),{userId:this.cliente.id,createdAt:Date.now(),templateType:this.templateType});if(this.scheda.id){let i=wi(this.firestore,`schede/${this.scheda.id}`);try{yield jd(i,r,{merge:!0})}catch(o){console.error("Error updating schedule",o)}}else{let i=oo(this.firestore,"schede");try{let o=yield NB(i,r);this.scheda.id=o.id}catch(o){console.error("Error creating schedule",o)}}})}apriSchedaPerUser(r){this.router.navigate(["/gestione-schede"],{state:{selectedUserId:r}})}anteprimaPdf(){return ee(this,null,function*(){let r;this.scheda.templateType==="profghizztemplate"?r=yield this.pdfSchedaService.buildProfGhizzDoc(this.scheda,this.cliente,this.logoPreviewUrl):r=yield this.pdfSchedaService.buildDoc(this.scheda,this.cliente,this.logoPreviewUrl);let i=r.output("blob");if(this.pdfBlobUrl)try{URL.revokeObjectURL(this.pdfBlobUrl)}catch{}this.pdfBlobUrl=URL.createObjectURL(i),window.open(this.pdfBlobUrl,"_blank")})}moveExerciseUp(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;o!==0&&([i[o-1],i[o]]=[i[o],i[o-1]],this.persistSchedule())}moveExerciseDown(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;o!==i.length-1&&([i[o+1],i[o]]=[i[o],i[o+1]],this.persistSchedule())}resetExercise(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;if(!i[o]?.settimaneValori)return;let s=this.templateType==="profghizztemplate"?this.settimanaAttivaIndex:0;i[o].settimaneValori[s]=this.zeroValues(),this.persistSchedule()}onLogoSelect(r){let i=r.target;if(!i.files||!i.files[0])return;let o=i.files[0];this.tempLogoFile=o;let s=new FileReader;s.onload=()=>{this.logoPreviewUrl=s.result},s.readAsDataURL(o)}};e.\u0275fac=function(i){return new(i||e)(Je(Tr),Je(BC),Je(Cg))},e.\u0275cmp=lr({type:e,selectors:[["app-gestione-schede"]],standalone:!1,decls:82,vars:31,consts:[["class","save-toast",4,"ngIf"],[1,"schede-page"],[1,"col-left","section-box"],[1,"avatar-block",3,"click"],["alt","Cliente",3,"src",4,"ngIf"],["class","avatar-placeholder",4,"ngIf"],[1,"cliente-name"],[1,"cliente-info"],[1,"info-row"],[1,"label"],[3,"ngModelChange","ngModel"],["type","text","placeholder","es. 8 Settimane",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"logo-uploader"],["for","logoInput",1,"logo-upload-box"],[4,"ngIf"],["alt","Logo anteprima","class","logo-preview-img",3,"src",4,"ngIf"],["type","file","id","logoInput","accept","image/*","hidden","",3,"change"],[1,"left-actions"],[1,"btn","primary",3,"click"],[1,"btn","outline",3,"click"],[1,"col-center","section-box"],[1,"row-template-select-compact","small"],["for","templateTypeSel",1,"label-template-type-compact"],["id","templateTypeSel",1,"select-template-type-compact",3,"ngModelChange","change","ngModel"],["value","fitnessanddance"],["value","profghizztemplate"],[1,"giorni-tabs"],["class","tab-item",3,"active",4,"ngFor","ngForOf"],[1,"tab-add",3,"click"],["title","Rimuovi giorno",1,"tab-remove",3,"click","disabled"],["class","settimane-tabs",4,"ngIf"],[1,"giorno-contenuto"],["class","empty-drop",4,"ngIf"],["class","exercise-list",4,"ngIf"],["class","exercise-pagination-mini",4,"ngIf"],[1,"col-right","section-box"],[1,"search-box"],["type","text","placeholder","Cerca esercizi...",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"esercizi-scroll"],["class","big-ex-card",3,"click",4,"ngFor","ngForOf"],["class","empty-right",4,"ngIf"],["class","user-picker-backdrop",4,"ngIf"],[1,"save-toast"],["alt","Cliente",3,"src"],[1,"avatar-placeholder"],["width","75","height","75","viewBox","0 0 75 75","fill","none"],["x","3","y","3","width","69","height","69","rx","16","fill","#F4F8FB","stroke","#b9cddd","stroke-width","2.3"],["x","17","y","23","width","41","height","30","rx","5","fill","#E8F0FA","stroke","#b9cddd","stroke-width","1.6"],["cx","29","cy","37","r","5.5","fill","#b9cddd"],["d","M19 53l12-12c2-2 5.6-2 7.6 0l15 15c1.9 1.9 5 1.6 6.8-.4l8-10.5","stroke","#2563eb","stroke-width","2","fill","none"],["alt","Logo anteprima",1,"logo-preview-img",3,"src"],[1,"tab-item"],["class","tab-label",3,"click","dblclick",4,"ngIf"],["class","tab-edit",3,"ngModel","ngModelChange","blur","keydown.enter",4,"ngIf"],[1,"tab-label",3,"click","dblclick"],[1,"tab-edit",3,"ngModelChange","blur","keydown.enter","ngModel"],[1,"settimane-tabs"],["class","tab-item",3,"active","click",4,"ngFor","ngForOf"],["title","Rimuovi settimana",1,"tab-remove",3,"click","disabled"],[1,"tab-item",3,"click"],[1,"empty-drop"],[1,"exercise-list"],["class","exercise-card",4,"ngFor","ngForOf"],[1,"exercise-card"],[1,"ex-top"],[1,"ex-img"],[3,"src","alt",4,"ngIf"],["class","ex-placeholder",4,"ngIf"],[1,"ex-title"],[1,"ex-controls"],["title","Sposta su",1,"btn-icon","move",3,"click","disabled"],["title","Sposta gi\xF9",1,"btn-icon","move",3,"click","disabled"],["title","Reset valori",1,"btn-icon","reset",3,"click"],[1,"btn-icon","remove",3,"click"],["class","ex-fields",4,"ngIf"],["class","ex-note","rows","2","placeholder","Note",3,"ngModel","ngModelChange","blur",4,"ngIf"],[3,"src","alt"],[1,"ex-placeholder"],[1,"ex-fields"],["type","number","min","0",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.1",3,"ngModelChange","ngModel"],["rows","2","placeholder","Note",1,"ex-note",3,"ngModelChange","blur","ngModel"],[1,"exercise-pagination-mini"],[1,"page-arrow-mini",3,"click","disabled"],["viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","transparent"],["d","M15.5 19 9.5 12l6-7","fill","none","stroke","white","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[1,"page-indicator-mini"],["d","M8.5 5 14.5 12l-6 7","fill","none","stroke","white","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[3,"value"],[1,"big-ex-card",3,"click"],[1,"big-img"],["class","big-placeholder",4,"ngIf"],[1,"big-info"],[1,"big-name"],[1,"big-cat"],[1,"big-placeholder"],[1,"empty-right"],[1,"user-picker-backdrop"],[1,"user-picker-modal"],[1,"picker-header"],[1,"picker-title"],[1,"picker-close",3,"click"],["type","text","placeholder","Cerca nome o email...",1,"picker-search",3,"ngModelChange","input","ngModel"],[1,"picker-list"],["class","picker-item",3,"click",4,"ngFor","ngForOf"],["class","picker-empty",4,"ngIf"],[1,"picker-item",3,"click"],[1,"pi-avatar"],[1,"pi-data"],[1,"pi-name"],["class","pi-email",4,"ngIf"],[1,"pi-status"],[1,"pi-email"],[1,"picker-empty"]],template:function(i,o){i&1&&(rt(0,Jle,2,1,"div",0),A(1,"div",1)(2,"aside",2)(3,"div",3),Fe("click",function(){return o.openUserPicker()}),rt(4,eue,1,1,"img",4)(5,tue,2,0,"div",5),R(),A(6,"div",6),W(7),R(),A(8,"div",7)(9,"div",8)(10,"span",9),W(11,"Stato"),R(),A(12,"select",10),ut("ngModelChange",function(a){return dt(o.scheda.stato,a)||(o.scheda.stato=a),a}),A(13,"option"),W(14,"In preparazione"),R(),A(15,"option"),W(16,"Attiva"),R(),A(17,"option"),W(18,"Completata"),R(),A(19,"option"),W(20,"Sospesa"),R()()(),A(21,"div",8)(22,"span",9),W(23,"Livello"),R(),A(24,"select",10),ut("ngModelChange",function(a){return dt(o.scheda.livello,a)||(o.scheda.livello=a),a}),A(25,"option"),W(26,"Principiante"),R(),A(27,"option"),W(28,"Intermedio"),R(),A(29,"option"),W(30,"Avanzato"),R()()(),A(31,"div",8)(32,"span",9),W(33,"Durata"),R(),A(34,"input",11),ut("ngModelChange",function(a){return dt(o.scheda.durata,a)||(o.scheda.durata=a),a}),R()(),A(35,"div",8)(36,"span",9),W(37,"Inizio"),R(),A(38,"input",12),ut("ngModelChange",function(a){return dt(o.scheda.dataInizio,a)||(o.scheda.dataInizio=a),a}),R()()(),A(39,"div",13)(40,"label",14),rt(41,nue,7,0,"ng-container",15)(42,rue,1,1,"img",16),A(43,"input",17),Fe("change",function(a){return o.onLogoSelect(a)}),R()()(),A(44,"div",18)(45,"button",19),Fe("click",function(){return o.salvaScheda()}),W(46,"Salva Scheda"),R(),A(47,"button",20),Fe("click",function(){return o.anteprimaPdf()}),W(48,"Stampa PDF"),R()()(),A(49,"section",21)(50,"div",22)(51,"label",23),W(52,"Template"),R(),A(53,"select",24),ut("ngModelChange",function(a){return dt(o.templateType,a)||(o.templateType=a),a}),Fe("change",function(){return o.onTemplateTypeChange(o.templateType)}),A(54,"option",25),W(55,"Palestra"),R(),A(56,"option",26),W(57,"Atleta"),R()()(),A(58,"div",27),rt(59,sue,3,4,"div",28),A(60,"button",29),Fe("click",function(){return o.aggiungiGiorno()}),W(61,"+ Giorno"),R(),A(62,"button",30),Fe("click",function(){return o.rimuoviGiorno()}),W(63,"\u2013 Giorno"),R()(),rt(64,cue,6,2,"div",31),A(65,"div",32),rt(66,lue,2,0,"div",33)(67,vue,2,1,"div",34)(68,yue,11,4,"div",35),R()(),A(69,"aside",36)(70,"div",37)(71,"input",38),ut("ngModelChange",function(a){return dt(o.searchTerm,a)||(o.searchTerm=a),a}),Fe("input",function(){return o.filtraEsercizi()}),R(),A(72,"select",39),ut("ngModelChange",function(a){return dt(o.filterCategoria,a)||(o.filterCategoria=a),a}),Fe("change",function(){return o.filtraEsercizi()}),A(73,"option",40),W(74,"Tutte le categorie"),R(),rt(75,_ue,2,2,"option",41),pv(76,"slice"),R()(),A(77,"div",42),rt(78,xue,9,4,"div",43),pv(79,"slice"),rt(80,Cue,2,0,"div",44),R()()(),rt(81,Due,12,7,"div",45)),i&2&&(ge("ngIf",o.showSavedMsg),X(4),ge("ngIf",o.cliente==null?null:o.cliente.avatarUrl),X(),ge("ngIf",!(o.cliente!=null&&o.cliente.avatarUrl)),X(2),zt((o.cliente==null?null:o.cliente.name)||"Seleziona cliente"),X(5),lt("ngModel",o.scheda.stato),X(12),lt("ngModel",o.scheda.livello),X(10),lt("ngModel",o.scheda.durata),X(4),lt("ngModel",o.scheda.dataInizio),X(3),ge("ngIf",!o.logoPreviewUrl),X(),ge("ngIf",o.logoPreviewUrl),X(11),lt("ngModel",o.templateType),X(6),ge("ngForOf",o.scheda.giorni),X(3),ge("disabled",o.scheda.giorni.length===1),X(2),ge("ngIf",o.templateType==="profghizztemplate"&&(o.scheda.giorni[o.giornoAttivoIndex]==null?null:o.scheda.giorni[o.giornoAttivoIndex].settimane)),X(2),ge("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length===0),X(),ge("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length>0),X(),ge("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length>0),X(3),lt("ngModel",o.searchTerm),X(),lt("ngModel",o.filterCategoria),X(3),ge("ngForOf",gv(76,23,o.categorie,0,3)),X(3),ge("ngForOf",gv(79,27,o.eserciziFiltrati,0,3)),X(2),ge("ngIf",o.eserciziFiltrati.length===0),X(),ge("ngIf",o.showUserPicker))},dependencies:[wo,no,nd,rd,gs,L5,Wc,Da,F5,qs,f5],styles:["body[_ngcontent-%COMP%]{background:#f5f8fc;color:#173453;font-family:Segoe UI,Arial,sans-serif}.schede-page[_ngcontent-%COMP%]{display:grid;grid-template-columns:280px 1fr 320px;gap:26px;padding:26px 30px 40px;background:#f5f8fc;min-height:100vh;box-sizing:border-box}.save-toast[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:24px;background:#1cb164;color:#fff;font-weight:700;border-radius:10px;padding:10px 14px;box-shadow:0 6px 18px #1cb16447;z-index:3000;letter-spacing:.02em}.section-box[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:18px 16px 20px;box-shadow:0 3px 14px #193c6e14;display:flex;flex-direction:column;gap:18px}.bordered[_ngcontent-%COMP%]{border-radius:8px;background:#f9fbfe}.col-left[_ngcontent-%COMP%], .col-center[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.col-left[_ngcontent-%COMP%]{align-items:center;background:#183d81;border-radius:14px}.col-left[_ngcontent-%COMP%]   .section-box[_ngcontent-%COMP%], .col-left.section-box[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.col-left[_ngcontent-%COMP%]   .cliente-name[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .bordered[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{background:#f5f9ff;color:#183d81;border:none}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]:hover{background:#1d4fb8;color:#fff}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#194065}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.outline[_ngcontent-%COMP%]:hover{background:#dbe9fb}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.share[_ngcontent-%COMP%]{background:#fbf7ef;color:#965d00;border:1px solid #e9d7b2}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.share[_ngcontent-%COMP%]:hover{background:#f6e9cf}.col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;background:#eef6ff}.avatar-block[_ngcontent-%COMP%]{width:92px;height:92px;border-radius:20px;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer;background:#eef3fb;border:none;transition:box-shadow .15s,transform .15s,border-color .15s;margin-left:auto;margin-right:auto}.avatar-block[_ngcontent-%COMP%]:hover{box-shadow:0 4px 14px #2563eb59;transform:translateY(-3px)}.avatar-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.avatar-placeholder[_ngcontent-%COMP%]{font-size:40px;opacity:.55}.cliente-name[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem;font-weight:800;letter-spacing:.03em;margin-left:auto;margin-right:auto;text-align:center;display:block;border:none}.cliente-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:14px 12px;border:none}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:70px;font-size:.68rem;font-weight:700;color:#173453}.info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{flex:1;padding:6px 8px;font-size:.7rem;background:#f1f6fb;font-weight:600;color:#173453;outline:none;transition:background-color .15s;border:none}.info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;box-sizing:border-box}.logo-uploader[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:18px}.logo-upload-box[_ngcontent-%COMP%]{width:110px;height:110px;border:2px dashed #b9cddd;border-radius:18px;background:#f8fafc;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:border-color .15s,background .15s;text-align:center}.logo-upload-box[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#f1faff}.logo-upload-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.logo-preview-img[_ngcontent-%COMP%]{width:104px;height:104px;object-fit:contain;border-radius:12px;display:block}.left-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.btn[_ngcontent-%COMP%]{border:none;padding:12px 18px;border-radius:12px;font-size:.72rem;font-weight:800;letter-spacing:.05em;cursor:pointer;transition:background .16s,box-shadow .16s,transform .12s;display:inline-flex;align-items:center;justify-content:center}.btn.primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none}.btn.primary[_ngcontent-%COMP%]:hover{background:#1d4fb8;color:#fff}.btn.primary[disabled][_ngcontent-%COMP%], .btn.primary[_ngcontent-%COMP%]:disabled{background:#e3e9f8;color:#173453;cursor:not-allowed;box-shadow:none;opacity:1}.btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#194065}.btn.outline[_ngcontent-%COMP%]:hover{background:#dbe9fb}.btn.share[_ngcontent-%COMP%]{background:#fbf7ef;color:#965d00;border:1px solid #e9d7b2}.btn.share[_ngcontent-%COMP%]:hover{background:#f6e9cf}.btn.mini[_ngcontent-%COMP%]{background:#eef3fb;color:#173453;padding:6px 10px;font-size:.6rem}.btn.mini[_ngcontent-%COMP%]:hover{background:#dbe9fb}.row-template-select-compact.small[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px;gap:5px;padding:0}.label-template-type-compact[_ngcontent-%COMP%]{font-size:.69rem;font-weight:900;color:#1c355d;margin-right:0;min-width:0;display:inline-block;letter-spacing:.01em}.select-template-type-compact[_ngcontent-%COMP%]{font-size:.74rem;height:24px;padding:0 10px;border-radius:8px;border:1.5px solid #2563eb;font-weight:800;color:#1742b0;background:#f7faff;outline:none;transition:border-color .14s;min-width:86px;box-shadow:none}.select-template-type-compact[_ngcontent-%COMP%]:focus{border-color:#1d6ceb;background:#eaf3ff}.giorni-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px;flex-wrap:wrap;border:none}.tab-remove[_ngcontent-%COMP%]{background:#fbefee;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;margin-left:0;cursor:pointer;transition:background .15s;border:none}.tab-remove[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.tab-remove[_ngcontent-%COMP%]:hover:not([disabled]){background:#ffe3e3}.tab-item[_ngcontent-%COMP%]{background:#eef3fb;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;letter-spacing:.05em;cursor:pointer;transition:background .15s,color .15s;border:none}.tab-item.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.tab-item[_ngcontent-%COMP%]:hover:not(.active){background:#dbe9fb}.tab-label[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.tab-edit[_ngcontent-%COMP%]{width:100px;padding:6px 8px;font-size:.66rem;border-radius:8px;outline:none;border:none}.tab-edit[_ngcontent-%COMP%]:focus{background:#eef6ff}.tab-add[_ngcontent-%COMP%]{background:#f2fbf7;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;transition:background .15s;border:none;color:#067a45}.tab-add[_ngcontent-%COMP%]:hover{background:#e4f9ee}.settimane-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:8px 14px;flex-wrap:wrap;margin-bottom:12px;margin-top:-10px}.settimane-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{background:#eef3fb;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;letter-spacing:.05em;cursor:pointer;border:none;transition:background .15s,color .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.settimane-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]:hover:not(.active){background:#dbe9fb}.settimane-tabs[_ngcontent-%COMP%]   .tab-add[_ngcontent-%COMP%]{background:#f2fbf7;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;color:#067a45;border:none;transition:background .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-add[_ngcontent-%COMP%]:hover{background:#e4f9ee}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[_ngcontent-%COMP%]{background:#fbefee;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;color:#cb1b2b;border:none;margin-left:0;transition:background .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[_ngcontent-%COMP%]:hover:not([disabled]){background:#ffe3e3}.giorno-contenuto[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:20px;border:none}.empty-drop[_ngcontent-%COMP%]{padding:26px 22px;text-align:center;font-size:.7rem;font-weight:700;color:#4b647d;border:none}.exercise-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;border:none}.exercise-card[_ngcontent-%COMP%]{background:#fff;padding:18px 16px 16px;border-radius:16px;display:flex;flex-direction:column;gap:14px;box-shadow:0 3px 12px #193c6e0f;transition:box-shadow .15s,transform .12s;border:none}.exercise-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #193c6e24;transform:translateY(-2px)}.ex-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,minmax(110px,1fr));gap:12px;max-width:100%}@media (max-width: 700px){.ex-fields[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.ex-fields[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:.58rem;font-weight:700;letter-spacing:.05em;color:#173453;min-width:110px}.ex-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;border-radius:10px;font-size:.66rem;font-weight:600;background:#f7fafc;color:#102f4d;outline:none;transition:background-color .15s;height:32px;box-sizing:border-box;border:none}.ex-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#eef6ff}.ex-note[_ngcontent-%COMP%]{width:80%;padding:10px 12px;border-radius:12px;font-size:.66rem;font-weight:600;background:#f8fbff;color:#173453;resize:vertical;outline:none;transition:background-color .15s;display:block;border:none}.ex-note[_ngcontent-%COMP%]:focus{background:#eef6ff}.exercise-pagination-mini[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;margin-top:10px;margin-bottom:4px}.page-arrow-mini[_ngcontent-%COMP%]{background:#2563eb;border:none;border-radius:50%;width:28px;height:28px;color:#fff;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 8px #2563eb1a;transition:background .14s,box-shadow .14s,transform .11s;outline:none;padding:0}.page-arrow-mini[disabled][_ngcontent-%COMP%]{background:#eaf0fa;color:#bed2f6;cursor:not-allowed;box-shadow:none}.page-arrow-mini[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:13px;height:13px;display:block;margin:auto}.page-indicator-mini[_ngcontent-%COMP%]{font-size:.93rem;font-weight:700;color:#2563eb;min-width:38px;text-align:center;letter-spacing:.01em}.ex-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;border:none}.ex-img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:18px;background:#f1f5fa;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;border:none}.ex-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.ex-placeholder[_ngcontent-%COMP%]{font-size:28px;opacity:.55}.ex-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:800;color:#173453;flex:1;letter-spacing:.03em;border:none}.ex-controls[_ngcontent-%COMP%]{display:flex;gap:4px;border:none}.btn-icon.move[_ngcontent-%COMP%], .btn-icon.reset[_ngcontent-%COMP%], .btn-icon.remove[_ngcontent-%COMP%]{background:#fff;color:#2563eb;width:32px;height:32px;font-size:1rem;font-weight:700;border-radius:12px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;transition:background .15s,color .15s;padding:0;border:none}.btn-icon.remove[_ngcontent-%COMP%]{color:#dc2626}.btn-icon.remove[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.btn-icon.move[disabled][_ngcontent-%COMP%], .btn-icon.reset[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.btn-icon.move[_ngcontent-%COMP%]:hover:not([disabled]){background:#eef6ff}.btn-icon.reset[_ngcontent-%COMP%]:hover:not([disabled]){background:#e0f0ff}.search-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:14px;border:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border-radius:12px;background:#f7fbff;font-size:.7rem;font-weight:600;color:#173453;outline:none;transition:background-color .15s;border:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{background:#eef6ff}.esercizi-scroll[_ngcontent-%COMP%]{flex:1;overflow:auto;display:flex;flex-direction:column;gap:14px;padding:14px;border:none}.big-ex-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px 18px;display:flex;align-items:center;gap:18px;cursor:pointer;transition:box-shadow .15s,transform .12s,background .15s;min-height:96px;border:none}.big-ex-card[_ngcontent-%COMP%]:hover{background:#f0f6ff;box-shadow:0 4px 14px #2563eb38;transform:translateY(-3px)}.big-img[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:16px;background:#f0f4fa;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;border:none}.big-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.big-placeholder[_ngcontent-%COMP%]{font-size:30px;opacity:.55}.big-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.big-name[_ngcontent-%COMP%]{font-size:.76rem;font-weight:800;color:#173453;letter-spacing:.03em}.big-cat[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#2563eb;opacity:.85;letter-spacing:.05em}.empty-right[_ngcontent-%COMP%]{background:#f1f6fb;border-radius:16px;padding:18px 16px;text-align:center;font-size:.68rem;font-weight:600;color:#516b87;border:none}.user-picker-backdrop[_ngcontent-%COMP%], .share-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f234173;display:flex;align-items:center;justify-content:center;z-index:3000;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.user-picker-modal[_ngcontent-%COMP%], .share-modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;border:2px solid #d9e5f1;box-shadow:0 18px 50px #0f23414d;padding:24px 24px 26px;max-width:420px;width:100%;max-height:85vh;display:flex;flex-direction:column;gap:14px;overflow:auto}.user-picker-modal[_ngcontent-%COMP%]{width:380px}.share-modal[_ngcontent-%COMP%]{width:420px}.picker-header[_ngcontent-%COMP%], .share-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.picker-title[_ngcontent-%COMP%], .share-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:800;color:#173453}.picker-close[_ngcontent-%COMP%], .share-close[_ngcontent-%COMP%]{background:#f0f5fa;border:1px solid #d9e5f1;width:36px;height:36px;font-size:18px;font-weight:700;border-radius:12px;cursor:pointer;transition:background .15s,color .15s}.picker-close[_ngcontent-%COMP%]:hover, .share-close[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.picker-search[_ngcontent-%COMP%]{padding:10px 12px;border:1.8px solid #b9cddd;border-radius:12px;background:#f7fbff;font-size:.68rem;font-weight:600;color:#173453;outline:none;margin-bottom:8px}.picker-list[_ngcontent-%COMP%]{overflow:auto;flex:1;display:flex;flex-direction:column;gap:10px}.picker-item[_ngcontent-%COMP%]{display:flex;gap:14px;background:#f8fbff;border:1px solid #d9e5f1;border-radius:14px;padding:12px 14px;cursor:pointer;transition:background .15s,box-shadow .15s,transform .12s}.picker-item[_ngcontent-%COMP%]:hover{background:#edf5ff;box-shadow:0 3px 12px #2563eb38;transform:translateY(-2px)}.pi-avatar[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:14px;background:#eef3fb;border:1px solid #d9e5f1;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}.pi-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.pi-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.pi-name[_ngcontent-%COMP%]{font-size:.68rem;font-weight:800;color:#173453}.pi-email[_ngcontent-%COMP%]{font-size:.58rem;font-weight:600;color:#375d80}.pi-status[_ngcontent-%COMP%]{font-size:.56rem;font-weight:700;color:#16a34a}.pi-status.inactive[_ngcontent-%COMP%]{color:#dc2626}.picker-empty[_ngcontent-%COMP%]{text-align:center;font-size:.62rem;font-weight:700;color:#4b647d;padding:16px 10px;border:1px dashed #b9cddd;border-radius:12px}.share-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.share-options[_ngcontent-%COMP%]{display:flex;gap:14px;flex-wrap:wrap}.share-option[_ngcontent-%COMP%]{flex:1 1 110px;background:#f8fbff;border:1.6px solid #b9cddd;border-radius:16px;padding:14px 12px;display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer;transition:background .15s,box-shadow .15s,transform .12s;font-size:.62rem;font-weight:700;color:#173453}.share-option[_ngcontent-%COMP%]:hover{background:#edf5ff;box-shadow:0 3px 12px #2563eb38;transform:translateY(-2px)}.share-icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:800}.share-icon.gmail[_ngcontent-%COMP%]{background:#ffebe6;color:#d93025}.share-icon.outlook[_ngcontent-%COMP%]{background:#e6f0ff;color:#2563eb}.share-icon.link[_ngcontent-%COMP%]{background:#e9f7ff;color:#0d5f8c}.share-link-box[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.share-link-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1.6px solid #b9cddd;border-radius:12px;background:#f7fbff;font-size:.64rem;font-weight:600;color:#173453;outline:none}@media (max-width:1180px){.schede-page[_ngcontent-%COMP%]{grid-template-columns:260px 1fr 300px}}@media (max-width:980px){.schede-page[_ngcontent-%COMP%]{grid-template-columns:1fr}.col-left[_ngcontent-%COMP%], .col-center[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{width:100%}}@media (max-width:560px){.schede-page[_ngcontent-%COMP%]{padding:20px 16px 34px}.exercise-card[_ngcontent-%COMP%]{padding:16px 14px 14px}.big-ex-card[_ngcontent-%COMP%]{padding:14px 16px;min-height:88px}.avatar-block[_ngcontent-%COMP%]{width:78px;height:78px}.giorni-tabs[_ngcontent-%COMP%]{gap:8px}.tab-item[_ngcontent-%COMP%], .tab-add[_ngcontent-%COMP%]{padding:7px 12px;font-size:.6rem}}"]});let n=e;return n})();var Mue=["fileInput"];function Nue(n,e){if(n&1&&wt(0,"img",33),n&2){let t=ie(2);ge("src",t.editForm.media||t.editForm.image,Sr)}}function Pue(n,e){n&1&&(A(0,"div",34),wt(1,"span",35),R())}function kue(n,e){if(n&1){let t=Bt();A(0,"button",36),Fe("click",function(){Ie(t);let i=ie(2);return Se(i.enableEdit())}),W(1,"Modifica"),R()}}function Rue(n,e){if(n&1){let t=Bt();A(0,"button",36),Fe("click",function(){Ie(t);let i=ie(2);return Se(i.saveExercise())}),W(1,"Salva Esercizio"),R()}}function Oue(n,e){if(n&1){let t=Bt();A(0,"button",13),Fe("click",function(){Ie(t);let i=ie(2);return Se(i.cancelEdit())}),W(1,"Annulla"),R()}}function Lue(n,e){if(n&1){let t=Bt();A(0,"button",39),Fe("click",function(){Ie(t);let i=ie().index,o=ie(2);return Se(o.removeMuscle(i))}),W(1,"\xD7"),R()}}function Fue(n,e){if(n&1&&(A(0,"span",37),W(1),rt(2,Lue,2,0,"button",38),R()),n&2){let t=e.$implicit,r=ie(2);X(),Ar(" ",t," "),X(),ge("ngIf",r.editMode)}}function Vue(n,e){if(n&1){let t=Bt();A(0,"div",40)(1,"input",41),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.newMuscle,i)||(o.newMuscle=i),Se(i)}),Fe("keydown.enter",function(){Ie(t);let i=ie(2);return Se(i.addMuscle())}),R(),A(2,"button",42),Fe("click",function(){Ie(t);let i=ie(2);return Se(i.addMuscle())}),W(3,"Aggiungi"),R()()}if(n&2){let t=ie(2);X(),lt("ngModel",t.newMuscle)}}function jue(n,e){if(n&1&&(A(0,"div",43),W(1),R()),n&2){let t=ie(2);X(),zt(t.editForm.notes||"Nessuna nota")}}function Bue(n,e){if(n&1){let t=Bt();A(0,"textarea",44),ut("ngModelChange",function(i){Ie(t);let o=ie(2);return dt(o.editForm.notes,i)||(o.editForm.notes=i),Se(i)}),R()}if(n&2){let t=ie(2);lt("ngModel",t.editForm.notes)}}function Uue(n,e){if(n&1){let t=Bt();A(0,"div",3)(1,"div",4)(2,"div",5),Fe("click",function(){Ie(t);let i=ie();return Se(i.onMediaBoxClick())}),rt(3,Nue,1,1,"img",6)(4,Pue,2,0,"div",7),A(5,"input",8,1),Fe("change",function(i){Ie(t);let o=ie();return Se(o.onMediaChange(i))}),R()()(),A(7,"div",9)(8,"div",10),rt(9,kue,2,0,"button",11)(10,Rue,2,0,"button",11)(11,Oue,2,0,"button",12),A(12,"button",13),Fe("click",function(){Ie(t);let i=ie();return Se(i.backToList())}),W(13,"Indietro"),R()(),A(14,"h2"),W(15,"Esercizio"),R(),A(16,"div",14)(17,"label"),W(18,"Nome"),R(),A(19,"input",15),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.editForm.name,i)||(o.editForm.name=i),Se(i)}),R()(),A(20,"div",14)(21,"label"),W(22,"Categoria"),R(),A(23,"input",15),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.editForm.category,i)||(o.editForm.category=i),Se(i)}),R()(),A(24,"div",14)(25,"label"),W(26,"Posizionamento"),R(),A(27,"textarea",16),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.editForm.posizionamento,i)||(o.editForm.posizionamento=i),Se(i)}),R()(),A(28,"div",14)(29,"label"),W(30,"Esecuzione"),R(),A(31,"textarea",17),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.editForm.esecuzione,i)||(o.editForm.esecuzione=i),Se(i)}),R()(),A(32,"div",14)(33,"label"),W(34,"Ritorno"),R(),A(35,"textarea",18),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.editForm.ritorno,i)||(o.editForm.ritorno=i),Se(i)}),R()(),A(36,"div",14)(37,"label"),W(38,"Accorgimenti tecnici"),R(),A(39,"textarea",19),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.editForm.accorgimenti,i)||(o.editForm.accorgimenti=i),Se(i)}),R()(),A(40,"div",14)(41,"label"),W(42,"Obiettivo"),R(),A(43,"textarea",20),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.editForm.obiettivo,i)||(o.editForm.obiettivo=i),Se(i)}),R()(),A(44,"div",21)(45,"label"),W(46,"Muscoli Coinvolti"),R(),A(47,"div",22),rt(48,Fue,3,2,"span",23),R(),rt(49,Vue,4,1,"div",24),R(),A(50,"div",14)(51,"label"),W(52,"Difficolt\xE0"),R(),A(53,"select",25),ut("ngModelChange",function(i){Ie(t);let o=ie();return dt(o.editForm.difficulty,i)||(o.editForm.difficulty=i),Se(i)}),A(54,"option",26),W(55,"Facile"),R(),A(56,"option",27),W(57,"Intermedio"),R(),A(58,"option",28),W(59,"Difficile"),R()()()(),A(60,"aside",29)(61,"div",30)(62,"h4"),W(63,"Note Personali"),R(),rt(64,jue,2,1,"div",31)(65,Bue,1,1,"textarea",32),R()()()}if(n&2){let t=ie();X(2),ps("clickable",t.editMode),X(),ge("ngIf",t.editForm.media||t.editForm.image),X(),ge("ngIf",!(t.editForm.media||t.editForm.image)),X(5),ge("ngIf",!t.editMode),X(),ge("ngIf",t.editMode),X(),ge("ngIf",t.editMode),X(8),lt("ngModel",t.editForm.name),ge("readonly",!t.editMode),X(4),lt("ngModel",t.editForm.category),ge("readonly",!t.editMode),X(4),lt("ngModel",t.editForm.posizionamento),ge("readonly",!t.editMode),X(4),lt("ngModel",t.editForm.esecuzione),ge("readonly",!t.editMode),X(4),lt("ngModel",t.editForm.ritorno),ge("readonly",!t.editMode),X(4),lt("ngModel",t.editForm.accorgimenti),ge("readonly",!t.editMode),X(4),lt("ngModel",t.editForm.obiettivo),ge("readonly",!t.editMode),X(5),ge("ngForOf",t.editForm.muscles),X(),ge("ngIf",t.editMode),X(4),lt("ngModel",t.editForm.difficulty),ge("disabled",!t.editMode),X(11),ge("ngIf",!t.editMode),X(),ge("ngIf",t.editMode)}}function zue(n,e){if(n&1){let t=Bt();A(0,"div",9)(1,"h2"),W(2,"Esercizio"),R(),A(3,"p"),W(4,"Elemento non trovato."),R(),A(5,"button",13),Fe("click",function(){Ie(t);let i=ie();return Se(i.backToList())}),W(6,"Indietro"),R()()}}var xz=(()=>{let e=class e{constructor(r,i,o){this.route=r,this.router=i,this.eserciziService=o,this.exerciseId=null,this.exercise=null,this.editMode=!1,this.editForm={name:"",category:"",posizionamento:"",esecuzione:"",ritorno:"",accorgimenti:"",obiettivo:"",description:"",muscles:[],difficulty:"Intermedio",image:void 0,media:null,notes:""},this.newMuscle="",this.loading=!0,this.notFound=!1}ngOnInit(){return ee(this,null,function*(){if(this.exerciseId=this.route.snapshot.paramMap.get("id"),!this.exerciseId){this.exercise=null,this.notFound=!0,this.loading=!1;return}try{let i=(yield this.eserciziService.getAll()).find(o=>o.id===this.exerciseId);i?(this.exercise=i,this.populateForm(i)):(this.exercise=null,this.notFound=!0)}catch{this.exercise=null,this.notFound=!0}this.loading=!1})}populateForm(r){this.editForm={name:r.name,category:r.category,posizionamento:r.posizionamento??"",esecuzione:r.esecuzione??"",ritorno:r.ritorno??"",accorgimenti:r.accorgimenti??"",obiettivo:r.obiettivo??"",description:r.description??"",muscles:r.muscles??[],difficulty:r.difficulty??"Intermedio",image:r.image??void 0,media:null,notes:r.notes??""}}backToList(){this.router.navigate(["/esercizi"])}enableEdit(){this.editMode=!0}cancelEdit(){this.exercise&&this.populateForm(this.exercise),this.editMode=!1}saveExercise(){return ee(this,null,function*(){if(!this.exercise)return;let r={name:this.editForm.name,category:this.editForm.category,posizionamento:this.editForm.posizionamento??"",esecuzione:this.editForm.esecuzione??"",ritorno:this.editForm.ritorno??"",accorgimenti:this.editForm.accorgimenti??"",obiettivo:this.editForm.obiettivo??"",description:this.editForm.description,muscles:this.editForm.muscles,difficulty:this.editForm.difficulty,image:this.editForm.image??void 0,notes:this.editForm.notes??""};yield this.eserciziService.update(this.exercise.id,r),this.exercise=Ve(Ve({},this.exercise),r),this.editMode=!1})}addMuscle(){let r=this.newMuscle.trim();r&&(this.editForm.muscles.push(r),this.newMuscle="")}removeMuscle(r){this.editForm.muscles.splice(r,1)}onMediaBoxClick(){this.editMode&&this.fileInputRef?.nativeElement?.click()}onMediaChange(r){let i=r.target.files?.[0]||null;if(!i)return;let o=new FileReader;o.onload=()=>{this.editForm.media=o.result},o.readAsDataURL(i)}};e.\u0275fac=function(i){return new(i||e)(Je(Gs),Je(Tr),Je(iC))},e.\u0275cmp=lr({type:e,selectors:[["app-dettaglio-esercizi"]],viewQuery:function(i,o){if(i&1&&fv(Mue,5),i&2){let s;Bf(s=Uf())&&(o.fileInputRef=s.first)}},decls:3,vars:2,consts:[["notFound",""],["fileInput",""],["class","dettaglio-esercizi-layout",4,"ngIf","ngIfElse"],[1,"dettaglio-esercizi-layout"],[1,"left-media"],[1,"media-box",3,"click"],["alt","Immagine esercizio",3,"src",4,"ngIf"],["class","media-placeholder",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],[1,"center-form"],[1,"top-actions"],["type","button","class","btn",3,"click",4,"ngIf"],["type","button","class","btn outline",3,"click",4,"ngIf"],["type","button",1,"btn","outline",3,"click"],[1,"form-row"],["type","text",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come posizionarsi per l'esercizio",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come eseguire correttamente l'esercizio",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come tornare alla posizione iniziale",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Consigli tecnici e correzioni",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Scopo o obiettivo dell'esercizio",3,"ngModelChange","ngModel","readonly"],[1,"form-row","small-tags"],[1,"tags"],["class","tag",4,"ngFor","ngForOf"],["class","tag-add",4,"ngIf"],[3,"ngModelChange","ngModel","disabled"],["value","Facile"],["value","Intermedio"],["value","Difficile"],[1,"right-side"],[1,"notes"],["class","note-card",4,"ngIf"],["class","note-textarea","rows","6","placeholder","Scrivi le tue note...",3,"ngModel","ngModelChange",4,"ngIf"],["alt","Immagine esercizio",3,"src"],[1,"media-placeholder"],[1,"placeholder-icon"],["type","button",1,"btn",3,"click"],[1,"tag"],["type","button","class","tag-remove","aria-label","Rimuovi",3,"click",4,"ngIf"],["type","button","aria-label","Rimuovi",1,"tag-remove",3,"click"],[1,"tag-add"],["type","text","placeholder","Aggiungi muscolo...",3,"ngModelChange","keydown.enter","ngModel"],["type","button",1,"btn","small",3,"click"],[1,"note-card"],["rows","6","placeholder","Scrivi le tue note...",1,"note-textarea",3,"ngModelChange","ngModel"]],template:function(i,o){if(i&1&&rt(0,Uue,66,27,"div",2)(1,zue,7,0,"ng-template",null,0,to),i&2){let s=pi(2);ge("ngIf",o.exercise)("ngIfElse",s)}},dependencies:[Yl,wo,no,ig,nd,rd,gs,Wc,Da,qs,ld],styles:["[_ngcontent-%COMP%]:root{--primary: #2563eb;--panel: #fff;--panel-border: #e7ecf9;--bg: #f5f8fc;--text: #193455}.dettaglio-esercizi-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr 260px;gap:22px;padding:18px 30px;background:var(--bg)}.left-media[_ngcontent-%COMP%]{background:var(--panel);border-radius:12px;padding:14px;border:1px solid var(--panel-border)}.media-box[_ngcontent-%COMP%]{height:220px;display:flex;align-items:center;justify-content:center;background:#fafbfd;border-radius:12px;margin-bottom:10px;overflow:hidden;position:relative;transition:box-shadow .15s,transform .12s}.media-box.clickable[_ngcontent-%COMP%]{cursor:pointer}.media-box.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 2px 10px #2563eb2e;transform:translateY(-1px)}.media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;display:block}.media-placeholder[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:14px;background:#eef3fb;border:1px solid #d7e4f6;position:relative}.placeholder-icon[_ngcontent-%COMP%]{width:100%;height:100%;display:inline-block;background:linear-gradient(#9bb8e0,#9bb8e0) center 40%/36% 14% no-repeat,linear-gradient(#9bb8e0,#9bb8e0) center 60%/60% 28% no-repeat;border-radius:12px}.center-form[_ngcontent-%COMP%]{background:var(--panel);padding:18px;border-radius:12px;border:1px solid var(--panel-border)}.center-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:var(--text)}.top-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-bottom:12px}.form-row[_ngcontent-%COMP%]{margin-bottom:12px;display:flex;flex-direction:column}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#294860;margin-bottom:6px}.form-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:9px 11px;border-radius:8px;border:1px solid #dbe9fb;font-size:.98rem}.tags[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.tag[_ngcontent-%COMP%]{background:#e6f2ff;padding:6px 8px;border-radius:20px;color:#1b355b;font-weight:700;display:inline-flex;align-items:center;gap:6px}.tag-remove[_ngcontent-%COMP%]{background:#fff;border:1px solid #cfe0fb;color:#274162;width:18px;height:18px;border-radius:50%;font-size:12px;line-height:1;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.tag-remove[_ngcontent-%COMP%]:hover{background:var(--primary);color:#fff;border-color:#1f56c7}.tag-add[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:8px}.tag-add[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;border-radius:8px;border:1px solid #dbe9fb}.right-side[_ngcontent-%COMP%]{background:var(--panel);border-radius:12px;padding:14px;border:1px solid var(--panel-border)}.notes[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#294860}.note-card[_ngcontent-%COMP%]{padding:10px;background:#fbfbfd;border-radius:8px;border:1px solid #e7ecf9;color:#193455}.note-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:8px;border:1px solid #dbe9fb}.btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 14px;border-radius:10px;font-size:.95rem;font-weight:700;cursor:pointer;transition:background .16s}.btn[_ngcontent-%COMP%]:hover{background:#194fd6}.btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#1e3a8a;border:1px solid #d7e4f6}.btn.outline[_ngcontent-%COMP%]:hover{background:#e1ebfb}.btn.small[_ngcontent-%COMP%]{padding:6px 12px;font-size:.85rem}@media (max-width: 980px){.dettaglio-esercizi-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]});let n=e;return n})();function que(n,e){if(n&1&&(A(0,"div",17)(1,"span",18),W(2,"error"),R(),A(3,"span"),W(4),R()()),n&2){let t=ie();X(4),zt(t.error)}}function $ue(n,e){n&1&&(A(0,"span"),W(1,"Accedi"),R())}function Hue(n,e){n&1&&(A(0,"span",19),wt(1,"span",20),W(2," Accesso in corso... "),R())}var Cz=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i,this.email="",this.password="",this.loading=!1,this.error="",this.showPassword=!1}ngOnInit(){this.afAuth.currentUser.then(r=>{r&&this.router.navigate(["/"])})}togglePasswordVisibility(){this.showPassword=!this.showPassword}login(){return ee(this,null,function*(){if(!this.email.trim()||!this.password.trim()){this.error="Email e password sono obbligatori";return}this.loading=!0,this.error="";try{(yield this.afAuth.signInWithEmailAndPassword(this.email.trim(),this.password.trim())).user&&this.router.navigate(["/"])}catch(r){this.loading=!1;let i=r.code,o=r.message;switch(i){case"auth/invalid-email":this.error="Email non valida";break;case"auth/user-disabled":this.error="Questo account \xE8 stato disabilitato";break;case"auth/user-not-found":this.error="Email non trovata";break;case"auth/wrong-password":this.error="Password non corretta";break;case"auth/too-many-requests":this.error="Troppi tentativi di accesso. Riprova pi\xF9 tardi";break;default:this.error="Errore di accesso: "+o}}})}onKeyPress(r){r.key==="Enter"&&this.login()}};e.\u0275fac=function(i){return new(i||e)(Je(Ks),Je(Tr))},e.\u0275cmp=lr({type:e,selectors:[["app-login"]],standalone:!1,decls:27,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],["autocomplete","off",1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["id","email","type","email","name","email","placeholder","Inserisci la tua email","required","","autocomplete","off",3,"ngModelChange","ngModel","disabled"],["for","password"],[1,"password-input-wrapper"],["id","password","name","password","placeholder","Inserisci la tua password","required","","autocomplete","off",3,"ngModelChange","keypress","type","ngModel","disabled"],["type","button","title","Mostra/nascondi password",1,"toggle-password-btn",3,"click","disabled"],[1,"material-icons"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"login-footer"],[1,"error-message"],[1,"material-icons","error-icon"],[1,"loading-spinner"],[1,"spinner"]],template:function(i,o){i&1&&(A(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),W(4,"Prof Ghizz"),R(),A(5,"p"),W(6,"Sistema di Gestione Fitness"),R()(),A(7,"form",3),Fe("ngSubmit",function(){return o.login()}),A(8,"div",4)(9,"label",5),W(10,"Email"),R(),A(11,"input",6),ut("ngModelChange",function(a){return dt(o.email,a)||(o.email=a),a}),R()(),A(12,"div",4)(13,"label",7),W(14,"Password"),R(),A(15,"div",8)(16,"input",9),ut("ngModelChange",function(a){return dt(o.password,a)||(o.password=a),a}),Fe("keypress",function(a){return o.onKeyPress(a)}),R(),A(17,"button",10),Fe("click",function(){return o.togglePasswordVisibility()}),A(18,"span",11),W(19),R()()()(),rt(20,que,5,1,"div",12),A(21,"button",13),rt(22,$ue,2,0,"span",14)(23,Hue,3,0,"span",15),R()(),A(24,"div",16)(25,"p"),W(26,"\xA9 2026 Prof Ghizz - Tutti i diritti riservati"),R()()()()),i&2&&(X(11),lt("ngModel",o.email),ge("disabled",o.loading),X(5),ge("type",o.showPassword?"text":"password"),lt("ngModel",o.password),ge("disabled",o.loading),X(),ge("disabled",o.loading),X(2),zt(o.showPassword?"visibility_off":"visibility"),X(),ge("ngIf",o.error),X(),ge("disabled",o.loading),X(),ge("ngIf",!o.loading),X(),ge("ngIf",o.loading))},dependencies:[no,rg,gs,Da,ng,Hf,qs,$f],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background-color:#0f172a;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Helvetica Neue,sans-serif;padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;width:100%;max-width:420px;padding:40px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#667eea;margin:0 0 8px;letter-spacing:-.5px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#999;margin:0;font-weight:500}.login-form[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#333;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 14px;font-size:14px;border:2px solid #e0e0e0;border-radius:8px;transition:all .3s ease;background:#f9f9f9;box-sizing:border-box;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;background:#f5f5f5}.password-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding-right:45px}.toggle-password-btn[_ngcontent-%COMP%]{position:absolute;right:12px;background:none;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#999;transition:color .3s ease;padding:4px;width:32px;height:32px}.toggle-password-btn[_ngcontent-%COMP%]:hover:not(:disabled){color:#667eea}.toggle-password-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.toggle-password-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 14px;background:#ffebee;border:1px solid #f48fb1;border-radius:8px;color:#c2185b;font-size:13px;margin-bottom:16px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.error-icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.btn-login[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background-color:#1d4ed8;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 12px #1d4ed84d}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1e40af;transform:translateY(-2px);box-shadow:0 6px 20px #1d4ed866}.btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;justify-content:center}.spinner[_ngcontent-%COMP%]{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#999;margin:0}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:30px 20px;border-radius:8px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px;font-size:16px}}"]});let n=e;return n})();var Kd=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i}canActivate(){return this.afAuth.authState.pipe(Xi(1),at(r=>r?!0:(this.router.navigate(["/login"]),!1)))}};e.\u0275fac=function(i){return new(i||e)(Le(Ks),Le(Tr))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Gue=[{path:"login",component:Cz},{path:"",component:LB,canActivate:[Kd]},{path:"esercizi",component:UB,canActivate:[Kd]},{path:"esercizi/:id",component:xz,canActivate:[Kd]},{path:"anagrafica",component:zB,canActivate:[Kd]},{path:"anagrafica/list",component:qB,canActivate:[Kd]},{path:"anagrafica/:id",component:wz,canActivate:[Kd]},{path:"gestione-schede",component:bz,canActivate:[Kd]},{path:"**",redirectTo:"login"}],Ez=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ur({type:e}),e.\u0275inj=nr({imports:[ld.forRoot(Gue,{useHash:!0}),ld]});let n=e;return n})();var Wue="@firebase/firestore-compat",Kue="0.3.53";function Ck(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Iz(){if(typeof Uint8Array>"u")throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function Sz(){if(!L7())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}var UC=class n{constructor(e){this._delegate=e}static fromBase64String(e){return Sz(),new n(Xs.fromBase64String(e))}static fromUint8Array(e){return Iz(),new n(Xs.fromUint8Array(e))}toBase64(){return Sz(),this._delegate.toBase64()}toUint8Array(){return Iz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function yk(n){return Yue(n,["next","error","complete"])}function Yue(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var _k=class{enableIndexedDbPersistence(e,t){return RN(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return ON(e._delegate)}clearIndexedDbPersistence(e){return LN(e._delegate)}},zC=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ed||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ws("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){$x(this._delegate,e,t,r)}enableNetwork(){return VN(this._delegate)}disableNetwork(){return jN(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return FN(this._delegate)}onSnapshotsInSync(e){return nP(this._delegate,e)}get app(){if(!this._appCompat)throw new je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bm(this,Wy(this._delegate,e))}catch(t){throw Xo(t,"collection()","Firestore.collection()")}}doc(e){try{return new ml(this,bh(this._delegate,e))}catch(t){throw Xo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bh(this,kN(this._delegate,e))}catch(t){throw Xo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return iP(this._delegate,t=>e(new qC(this,t)))}batch(){return io(this._delegate),new $C(new kx(this._delegate,e=>mm(this._delegate,e)))}loadBundle(e){return BN(this._delegate,e)}namedQuery(e){return UN(this._delegate,e).then(t=>t?new Bh(this,t):null)}},Vm=class extends cm{constructor(e){super(),this.firestore=e}convertBytes(e){return new UC(new Xs(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return ml.forKey(t,this.firestore,null)}};function Que(n){YM(n)}var qC=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Vm(e)}get(e){let t=Fh(e);return this._delegate.get(t).then(r=>new Vh(this._firestore,new Ko(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Fh(e);return r?(Ck("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Fh(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Fh(e);return this._delegate.delete(t),this}},$C=class{constructor(e){this._delegate=e}set(e,t,r){let i=Fh(e);return r?(Ck("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Fh(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Fh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},jm=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new bd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Vm(e),t),i.set(t,o)),o}};jm.INSTANCES=new WeakMap;var ml=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Vm(e)}static forPath(e,t,r){if(e.length%2!==0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Yn(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new n(t,new Yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Bm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bm(this.firestore,Wy(this._delegate,e))}catch(t){throw Xo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=wn(e),e instanceof Yn?Ky(this._delegate,e):!1}set(e,t){t=Ck("DocumentReference.set",t);try{return t?Yy(this._delegate,e,t):Yy(this._delegate,e)}catch(r){throw Xo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Qy(this._delegate,e):Qy(this._delegate,e,t,...r)}catch(i){throw Xo(i,"updateDoc()","DocumentReference.update()")}}delete(){return eC(this._delegate)}onSnapshot(...e){let t=Az(e),r=Tz(e,i=>new Vh(this.firestore,new Ko(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return gm(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=XN(this._delegate):e?.source==="server"?t=JN(this._delegate):t=Xx(this._delegate),t.then(r=>new Vh(this.firestore,new Ko(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(jm.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Xo(n,e,t){return n.message=n.message.replace(e,t),n}function Az(n){for(let e of n)if(typeof e=="object"&&!yk(e))return e;return{}}function Tz(n,e){var t,r;let i;return yk(n[0])?i=n[0]:yk(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Vh=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ml(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Zx(this._delegate,e._delegate)}},jh=class extends Vh{data(e){let t=this._delegate.data(e);return this._delegate._converter||m7(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Bh=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Vm(e)}where(e,t,r){try{return new n(this.firestore,pc(this._delegate,Kx(e,t,r)))}catch(i){throw Xo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,pc(this._delegate,Yx(e,t)))}catch(r){throw Xo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,pc(this._delegate,GN(e)))}catch(t){throw Xo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,pc(this._delegate,WN(e)))}catch(t){throw Xo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,pc(this._delegate,KN(...e)))}catch(t){throw Xo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,pc(this._delegate,YN(...e)))}catch(t){throw Xo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,pc(this._delegate,QN(...e)))}catch(t){throw Xo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,pc(this._delegate,ZN(...e)))}catch(t){throw Xo(t,"endAt()","Query.endAt()")}}isEqual(e){return Hx(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=eP(this._delegate):e?.source==="server"?t=tP(this._delegate):t=Jx(this._delegate),t.then(r=>new x_(this.firestore,new _s(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=Az(e),r=Tz(e,i=>new x_(this.firestore,new _s(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return gm(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(jm.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},wk=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},x_=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Bh(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new jh(this._firestore,r))})}isEqual(e){return Zx(this._delegate,e._delegate)}},Bm=class n extends Bh{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ml(this.firestore,e):null}doc(e){try{return e===void 0?new ml(this.firestore,bh(this._delegate)):new ml(this.firestore,bh(this._delegate,e))}catch(t){throw Xo(t,"doc()","CollectionReference.doc()")}}add(e){return tC(this._delegate,e).then(t=>new ml(this.firestore,t))}isEqual(e){return Ky(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(jm.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Fh(n){return Pn(n,Yn)}var bk=class n{constructor(...e){this._delegate=new hc(...e)}static documentId(){return new n(ii.keyField().canonicalString())}isEqual(e){return e=wn(e),e instanceof hc?this._delegate._internalPath.isEqual(e._internalPath):!1}};var xk=class n{static serverTimestamp(){let e=bB();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=oP();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=xB(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=CB(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=sP(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Zue={Firestore:zC,GeoPoint:ol,Timestamp:gr,Blob:UC,Transaction:qC,WriteBatch:$C,DocumentReference:ml,DocumentSnapshot:Vh,Query:Bh,QueryDocumentSnapshot:jh,QuerySnapshot:x_,CollectionReference:Bm,FieldPath:bk,FieldValue:xk,setLogLevel:Que,CACHE_SIZE_UNLIMITED:cB};function Xue(n,e){n.INTERNAL.registerComponent(new Qi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Zue)))}function Jue(n){Xue(n,(e,t)=>new zC(e,t,new _k)),n.registerVersion(Wue,Kue)}Jue(Ti);function ede(n,e=_f){return new Pt(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Dz(n,e){return ede(n,e)}function tde(n,e){return Dz(n,e).pipe(Bu(void 0),Dp(),at(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Sk(n,e){return Dz(n,e).pipe(at(t=>({payload:t,type:"query"})))}var HC=class{ref;afs;injector=Me(Wn);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=Rz(r,t);return new WC(i,o,this.afs)}snapshotChanges(){return tde(this.ref,this.afs.schedulers.outsideAngular).pipe(Ri(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(at(({payload:t})=>e.idField?Vt(Ve({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return mn(this.ref.get(e)).pipe(Ri(this.injector))}};function GC(n,e){return Sk(n,e).pipe(Bu(void 0),Dp(),at(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function Mz(n,e,t){return GC(n,t).pipe(ju((r,i)=>nde(r,i.map(o=>o.payload),e),[]),W1(),at(r=>r.map(i=>({type:i.type,payload:i}))))}function nde(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=rde(n,r))}),n}function Ek(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function rde(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return Ek(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Ek(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return Ek(n,e.oldIndex,1);break}return n}function Nz(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var WC=class{ref;query;afs;injector=Me(Wn);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=GC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(at(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Bu(void 0),Dp(),br(([r,i])=>i.length>0||!r),at(([,r])=>r),Ri(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(ju((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Nz(e);return Mz(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ri(this.injector))}valueChanges(e={}){return Sk(this.query,this.afs.schedulers.outsideAngular).pipe(at(t=>t.payload.docs.map(r=>e.idField?Vt(Ve({},r.data()),{[e.idField]:r.id}):r.data())),Ri(this.injector))}get(e){return mn(this.query.get(e)).pipe(Ri(this.injector))}add(e){return this.ref.add(e)}doc(e){return new HC(this.ref.doc(e),this.afs)}},Ik=class{query;afs;injector=Me(Wn);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?GC(this.query,this.afs.schedulers.outsideAngular).pipe(Ri(this.injector)):GC(this.query,this.afs.schedulers.outsideAngular).pipe(at(t=>t.filter(r=>e.indexOf(r.type)>-1)),br(t=>t.length>0),Ri(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(ju((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Nz(e);return Mz(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ri(this.injector))}valueChanges(e={}){return Sk(this.query,this.afs.schedulers.outsideAngular).pipe(at(r=>r.payload.docs.map(i=>e.idField?Ve({[e.idField]:i.id},i.data()):i.data())),Ri(this.injector))}get(e){return mn(this.query.get(e)).pipe(Ri(this.injector))}},Pz=new Ye("angularfire2.enableFirestorePersistence"),kz=new Ye("angularfire2.firestore.persistenceSettings"),ide=new Ye("angularfire2.firestore.settings"),ode=new Ye("angularfire2.firestore.use-emulator");function Rz(n,e=t=>t){return{query:e(n),ref:n}}var Ak=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=Me(jt);constructor(t,r,i,o,s,a,c,l,u,p,m,g,x,E,D,N,K){this.schedulers=c;let j=Xf(t,a,r),G=u;p&&TT(j,a,m,x,E,D,g,N),[this.firestore,this.persistenceEnabled$]=bg(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let oe=a.runOutsideAngular(()=>j.firestore());if(o&&oe.settings(o),G&&oe.useEmulator(...G),i&&!Eb(s)){let fe=()=>{try{return mn(oe.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(z){return typeof console<"u"&&console.warn(z),pt(!1)}};return[oe,a.runOutsideAngular(fe)]}else return[oe,pt(!1)]},[o,G,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=Rz(i,r),a=this.ngZone.run(()=>o);return new WC(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new Ik(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new HC(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Le(dd),Le(fd,8),Le(Pz,8),Le(ide,8),Le(Ui),Le(jt),Le(ni),Le(kz,8),Le(ode,8),Le(Ks,8),Le(xT,8),Le(CT,8),Le(ET,8),Le(IT,8),Le(ST,8),Le(AT,8),Le(ms,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Oz=(()=>{class n{constructor(){Ti.registerVersion("angularfire",ti.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Pz,useValue:!0},{provide:kz,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=nr({providers:[Ak]})}return n})();var $z="firebasestorage.googleapis.com",Hz="storageBucket",ade=120*1e3,cde=600*1e3,lde=1e3;var Ur=class n extends Lu{constructor(e,t,r=0){super(Tk(e),`Firebase Storage: ${t} (${Tk(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Pr=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(Pr||{});function Tk(n){return"storage/"+n}function Lk(){let n="An unknown error occurred, please check the error payload for server response.";return new Ur(Pr.UNKNOWN,n)}function ude(n){return new Ur(Pr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function dde(n){return new Ur(Pr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function fde(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ur(Pr.UNAUTHENTICATED,n)}function hde(){return new Ur(Pr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pde(n){return new Ur(Pr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Gz(){return new Ur(Pr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wz(){return new Ur(Pr.CANCELED,"User canceled the upload/download.")}function gde(n){return new Ur(Pr.INVALID_URL,"Invalid URL '"+n+"'.")}function mde(n){return new Ur(Pr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function vde(){return new Ur(Pr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Hz+"' property when initializing the app?")}function Kz(){return new Ur(Pr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yde(){return new Ur(Pr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function _de(){return new Ur(Pr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wde(n){return new Ur(Pr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Uh(n){return new Ur(Pr.INVALID_ARGUMENT,n)}function Yz(){return new Ur(Pr.APP_DELETED,"The Firebase app was deleted.")}function Fk(n){return new Ur(Pr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function E_(n,e){return new Ur(Pr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function C_(n){throw new Ur(Pr.INTERNAL_ERROR,"Internal error: "+n)}var Jo=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw mde(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function l(G){G.path_=decodeURIComponent(G.path)}let u="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${p}/${u}/b/${i}/o${m}`,"i"),x={bucket:1,path:3},E=t===$z?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",N=new RegExp(`^https?://${E}/${i}/${D}`,"i"),j=[{regex:a,indices:c,postModify:o},{regex:g,indices:x,postModify:l},{regex:N,indices:{bucket:1,path:2},postModify:l}];for(let G=0;G<j.length;G++){let oe=j[G],fe=oe.regex.exec(e);if(fe){let z=fe[oe.indices.bucket],M=fe[oe.indices.path];M||(M=""),r=new n(z,M),oe.postModify(r);break}}if(r==null)throw gde(e);return r}},Mk=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function bde(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let l=!1;function u(...D){l||(l=!0,e.apply(null,D))}function p(D){i=setTimeout(()=>{i=null,n(g,c())},D)}function m(){o&&clearTimeout(o)}function g(D,...N){if(l){m();return}if(D){m(),u.call(null,D,...N);return}if(c()||s){m(),u.call(null,D,...N);return}r<64&&(r*=2);let j;a===1?(a=2,j=0):j=(r+Math.random())*1e3,p(j)}let x=!1;function E(D){x||(x=!0,m(),!l&&(i!==null?(D||(a=2),clearTimeout(i),p(0)):D||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,E(!0)},t),E}function xde(n){n(!1)}function Cde(n){return n!==void 0}function Ede(n){return typeof n=="function"}function Ide(n){return typeof n=="object"&&!Array.isArray(n)}function QC(n){return typeof n=="string"||n instanceof String}function Lz(n){return Vk()&&n instanceof Blob}function Vk(){return typeof Blob<"u"}function Nk(n,e,t,r){if(r<e)throw Uh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Uh(`Invalid value for '${n}'. Expected ${t} or less.`)}function Yd(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Qz(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var qm=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(qm||{});function Zz(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var Pk=class{constructor(e,t,r,i,o,s,a,c,l,u,p,m=!0,g=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,E)=>{this.resolve_=x,this.reject_=E,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new zm(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===qm.NO_ERROR,c=o.getStatus();if(!a||Zz(c,this.additionalRetryCodes_)&&this.retry){let u=o.getErrorCode()===qm.ABORT;r(!1,new zm(!1,null,u));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new zm(l,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Cde(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=Lk();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?Yz():Wz();s(c)}else{let c=Gz();s(c)}};this.canceled_?t(!1,new zm(!1,null,!0)):this.backoffId_=bde(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xde(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},zm=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Sde(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Ade(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Tde(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Dde(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Mde(n,e,t,r,i,o,s=!0,a=!1){let c=Qz(n.urlParams),l=n.url+c,u=Object.assign({},n.headers);return Tde(u,e),Sde(u,t),Ade(u,o),Dde(u,r),new Pk(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function Nde(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Pde(...n){let e=Nde();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Vk())return new Blob(n);throw new Ur(Pr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function kde(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Rde(n){if(typeof atob>"u")throw wde("base-64");return atob(n)}var na={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},I_=class{constructor(e,t){this.data=e,this.contentType=t||null}};function jk(n,e){switch(n){case na.RAW:return new I_(Xz(e));case na.BASE64:case na.BASE64URL:return new I_(Jz(n,e));case na.DATA_URL:return new I_(Lde(e),Fde(e))}throw Lk()}function Xz(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Ode(n){let e;try{e=decodeURIComponent(n)}catch{throw E_(na.DATA_URL,"Malformed data URL.")}return Xz(e)}function Jz(n,e){switch(n){case na.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw E_(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case na.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw E_(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Rde(e)}catch(i){throw i.message.includes("polyfill")?i:E_(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var YC=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw E_(na.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=Vde(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Lde(n){let e=new YC(n);return e.base64?Jz(na.BASE64,e.rest):Ode(e.rest)}function Fde(n){return new YC(n).contentType}function Vde(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var $m=class n{constructor(e,t){let r=0,i="";Lz(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Lz(this.data_)){let r=this.data_,i=kde(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(Vk()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Pde.apply(null,t))}else{let t=e.map(s=>QC(s)?jk(na.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function Bk(n){let e;try{e=JSON.parse(n)}catch{return null}return Ide(e)?e:null}function jde(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Bde(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function eq(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Ude(n,e){return e}var ao=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Ude}},KC=null;function zde(n){return!QC(n)||n.length<2?n:eq(n)}function ZC(){if(KC)return KC;let n=[];n.push(new ao("bucket")),n.push(new ao("generation")),n.push(new ao("metageneration")),n.push(new ao("name","fullPath",!0));function e(o,s){return zde(s)}let t=new ao("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new ao("size");return i.xform=r,n.push(i),n.push(new ao("timeCreated")),n.push(new ao("updated")),n.push(new ao("md5Hash",null,!0)),n.push(new ao("cacheControl",null,!0)),n.push(new ao("contentDisposition",null,!0)),n.push(new ao("contentEncoding",null,!0)),n.push(new ao("contentLanguage",null,!0)),n.push(new ao("contentType",null,!0)),n.push(new ao("metadata","customMetadata",!0)),KC=n,KC}function qde(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new Jo(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function $de(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return qde(r,n),r}function tq(n,e,t){let r=Bk(e);return r===null?null:$de(n,r,t)}function Hde(n,e,t,r){let i=Bk(e);if(i===null||!QC(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let u=n.bucket,p=n.fullPath,m="/b/"+s(u)+"/o/"+s(p),g=Yd(m,t,r),x=Qz({alt:"media",token:l});return g+x})[0]}function Uk(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var Fz="prefixes",Vz="items";function Gde(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Fz])for(let i of t[Fz]){let o=i.replace(/\/$/,""),s=n._makeStorageReference(new Jo(e,o));r.prefixes.push(s)}if(t[Vz])for(let i of t[Vz]){let o=n._makeStorageReference(new Jo(e,i.name));r.items.push(o)}return r}function Wde(n,e,t){let r=Bk(t);return r===null?null:Gde(n,e,r)}var _c=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function yl(n){if(!n)throw Lk()}function XC(n,e){function t(r,i){let o=tq(n,i,e);return yl(o!==null),o}return t}function Kde(n,e){function t(r,i){let o=Wde(n,e,i);return yl(o!==null),o}return t}function Yde(n,e){function t(r,i){let o=tq(n,i,e);return yl(o!==null),Hde(o,i,n.host,n._protocol)}return t}function Wm(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=hde():i=fde():t.getStatus()===402?i=dde(n.bucket):t.getStatus()===403?i=pde(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function JC(n){let e=Wm(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=ude(n.path)),o.serverResponse=i.serverResponse,o}return t}function nq(n,e,t){let r=e.fullServerUrl(),i=Yd(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new _c(i,o,XC(n,t),s);return a.errorHandler=JC(e),a}function Qde(n,e,t,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=Yd(s,n.host,n._protocol),c="GET",l=n.maxOperationRetryTime,u=new _c(a,c,Kde(n,e.bucket),l);return u.urlParams=o,u.errorHandler=Wm(e),u}function Zde(n,e,t){let r=e.fullServerUrl(),i=Yd(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new _c(i,o,Yde(n,t),s);return a.errorHandler=JC(e),a}function Xde(n,e,t,r){let i=e.fullServerUrl(),o=Yd(i,n.host,n._protocol),s="PATCH",a=Uk(t,r),c={"Content-Type":"application/json; charset=utf-8"},l=n.maxOperationRetryTime,u=new _c(o,s,XC(n,r),l);return u.headers=c,u.body=a,u.errorHandler=JC(e),u}function Jde(n,e){let t=e.fullServerUrl(),r=Yd(t,n.host,n._protocol),i="DELETE",o=n.maxOperationRetryTime;function s(c,l){}let a=new _c(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=JC(e),a}function efe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function rq(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=efe(null,e)),r}function tfe(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let j="";for(let G=0;G<2;G++)j=j+Math.random().toString().slice(2);return j}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let l=rq(e,r,i),u=Uk(l,t),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+c+"--",g=$m.getBlob(p,r,m);if(g===null)throw Kz();let x={name:l.fullPath},E=Yd(o,n.host,n._protocol),D="POST",N=n.maxUploadRetryTime,K=new _c(E,D,XC(n,t),N);return K.urlParams=x,K.headers=s,K.body=g.uploadData(),K.errorHandler=Wm(e),K}var Hm=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function zk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{yl(!1)}return yl(!!t&&(e||["active"]).indexOf(t)!==-1),t}function nfe(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s=rq(e,r,i),a={name:s.fullPath},c=Yd(o,n.host,n._protocol),l="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},p=Uk(s,t),m=n.maxUploadRetryTime;function g(E){zk(E);let D;try{D=E.getResponseHeader("X-Goog-Upload-URL")}catch{yl(!1)}return yl(QC(D)),D}let x=new _c(c,l,g,m);return x.urlParams=a,x.headers=u,x.body=p,x.errorHandler=Wm(e),x}function rfe(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function o(l){let u=zk(l,["active","final"]),p=null;try{p=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{yl(!1)}p||yl(!1);let m=Number(p);return yl(!isNaN(m)),new Hm(m,r.size(),u==="final")}let s="POST",a=n.maxUploadRetryTime,c=new _c(t,s,o,a);return c.headers=i,c.errorHandler=Wm(e),c}var jz=256*1024;function ife(n,e,t,r,i,o,s,a){let c=new Hm(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw yde();let l=c.total-c.current,u=l;i>0&&(u=Math.min(u,i));let p=c.current,m=p+u,g="";u===0?g="finalize":l===u?g="upload, finalize":g="upload";let x={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${c.current}`},E=r.slice(p,m);if(E===null)throw Kz();function D(G,oe){let fe=zk(G,["active","final"]),z=c.current+u,M=r.size(),I;return fe==="final"?I=XC(e,o)(G,oe):I=null,new Hm(z,M,fe==="final",I)}let N="POST",K=e.maxUploadRetryTime,j=new _c(t,N,D,K);return j.headers=x,j.body=E.uploadData(),j.progressCallback=a||null,j.errorHandler=Wm(n),j}var iq={STATE_CHANGED:"state_changed"},To={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Dk(n){switch(n){case"running":case"pausing":case"canceling":return To.RUNNING;case"paused":return To.PAUSED;case"success":return To.SUCCESS;case"canceled":return To.CANCELED;case"error":return To.ERROR;default:return To.ERROR}}var kk=class{constructor(e,t,r){if(Ede(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function Um(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var Bz=null,Rk=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw C_("cannot .send() more than once");if(sp(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw C_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw C_("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw C_("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw C_("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},Ok=class extends Rk{initXhr(){this.xhr_.responseType="text"}};function vl(){return Bz?Bz():new Ok}var S_=class{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ZC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Pr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(Zz(i.status,[]))if(o)i=Gz();else{this.sleepTime=Math.max(this.sleepTime*2,lde),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Pr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=nfe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=rfe(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,vl,t,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=jz*this._chunkMultiplier,t=new Hm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=ife(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,vl,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){jz*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=nq(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,vl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=tfe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Wz(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=Dk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let o=new kk(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Dk(this._state)){case To.SUCCESS:Um(this._resolve.bind(null,this.snapshot))();break;case To.CANCELED:case To.ERROR:let t=this._reject;Um(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Dk(this._state)){case To.RUNNING:case To.PAUSED:e.next&&Um(e.next.bind(e,this.snapshot))();break;case To.SUCCESS:e.complete&&Um(e.complete.bind(e))();break;case To.CANCELED:case To.ERROR:e.error&&Um(e.error.bind(e,this._error))();break;default:e.error&&Um(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Gm=class n{constructor(e,t){this._service=e,t instanceof Jo?this._location=t:this._location=Jo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Jo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eq(this._location.path)}get storage(){return this._service}get parent(){let e=jde(this._location.path);if(e===null)return null;let t=new Jo(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Fk(e)}};function ofe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new S_(n,new $m(e),t)}function sfe(n){let e={prefixes:[],items:[]};return oq(n,e).then(()=>e)}function oq(n,e,t){return ee(this,null,function*(){let i=yield sq(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield oq(n,e,i.nextPageToken))})}function sq(n,e){e!=null&&typeof e.maxResults=="number"&&Nk("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=Qde(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,vl)}function afe(n){n._throwIfRoot("getMetadata");let e=nq(n.storage,n._location,ZC());return n.storage.makeRequestWithTokens(e,vl)}function cfe(n,e){n._throwIfRoot("updateMetadata");let t=Xde(n.storage,n._location,e,ZC());return n.storage.makeRequestWithTokens(t,vl)}function lfe(n){n._throwIfRoot("getDownloadURL");let e=Zde(n.storage,n._location,ZC());return n.storage.makeRequestWithTokens(e,vl).then(t=>{if(t===null)throw _de();return t})}function ufe(n){n._throwIfRoot("deleteObject");let e=Jde(n.storage,n._location);return n.storage.makeRequestWithTokens(e,vl)}function aq(n,e){let t=Bde(n._location.path,e),r=new Jo(n._location.bucket,t);return new Gm(n.storage,r)}function dfe(n){return/^[A-Za-z]+:\/\//.test(n)}function ffe(n,e){return new Gm(n,e)}function cq(n,e){if(n instanceof A_){let t=n;if(t._bucket==null)throw vde();let r=new Gm(t,t._bucket);return e!=null?cq(r,e):r}else return e!==void 0?aq(n,e):n}function hfe(n,e){if(e&&dfe(e)){if(n instanceof A_)return ffe(n,e);throw Uh("To use ref(service, url), the first argument must be a Storage instance.")}else return cq(n,e)}function Uz(n,e){let t=e?.[Hz];return t==null?null:Jo.makeFromBucketSpec(t,n)}function pfe(n,e,t,r={}){n.host=`${e}:${t}`;let i=sp(e);i&&(s1(`https://${n.host}/b`),c1("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:a1(o,n.app.options.projectId))}var A_=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=$z,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ade,this._maxUploadRetryTime=cde,this._requests=new Set,i!=null?this._bucket=Jo.makeFromBucketSpec(i,this._host):this._bucket=Uz(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jo.makeFromBucketSpec(this._url,e):this._bucket=Uz(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Nk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Nk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return ee(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return ee(this,null,function*(){if(u1(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gm(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Mk(Yz());{let s=Mde(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return ee(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},zz="@firebase/storage",qz="0.13.14";var lq="storage";function qk(n,e,t){return n=wn(n),ofe(n,e,t)}function $k(n){return n=wn(n),afe(n)}function Hk(n,e){return n=wn(n),cfe(n,e)}function Gk(n,e){return n=wn(n),sq(n,e)}function Wk(n){return n=wn(n),sfe(n)}function Kk(n){return n=wn(n),lfe(n)}function Yk(n){return n=wn(n),ufe(n)}function eE(n,e){return n=wn(n),hfe(n,e)}function uq(n,e){return aq(n,e)}function dq(n=Pc(),e){n=wn(n);let r=$a(n,lq).getImmediate({identifier:e}),i=o1("storage");return i&&tE(r,...i),r}function tE(n,e,t,r={}){pfe(n,e,t,r)}function gfe(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new A_(t,r,i,e,d1)}function mfe(){Bs(new Qi(lq,gfe,"PUBLIC").setMultipleInstances(!0)),Gn(zz,qz,""),Gn(zz,qz,"esm2017")}mfe();var Km=class{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var nE=class{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Km(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Km(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(typeof t=="function"?o=s=>t(new Km(s,this,this._ref)):o={next:t.next?s=>t.next(new Km(s,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},rE=class{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new zh(e,this._service))}get items(){return this._delegate.items.map(e=>new zh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var zh=class n{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let t=uq(this._delegate,e);return new n(t,this.storage)}get root(){return new n(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new n(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new nE(qk(this._delegate,e,t),this)}putString(e,t=na.RAW,r){this._throwIfRoot("putString");let i=jk(t,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new nE(new S_(this._delegate,new $m(i.data,!0),o),this)}listAll(){return Wk(this._delegate).then(e=>new rE(e,this.storage))}list(e){return Gk(this._delegate,e||void 0).then(t=>new rE(t,this.storage))}getMetadata(){return $k(this._delegate)}updateMetadata(e){return Hk(this._delegate,e)}getDownloadURL(){return Kk(this._delegate)}delete(){return this._throwIfRoot("delete"),Yk(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw Fk(e)}};var iE=class{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(fq(e))throw Uh("ref() expected a child path but got a URL, use refFromURL instead.");return new zh(eE(this._delegate,e),this)}refFromURL(e){if(!fq(e))throw Uh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Jo.makeFromUrl(e,this._delegate.host)}catch{throw Uh("refFromUrl() expected a valid full URL but got an invalid one.")}return new zh(eE(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){tE(this._delegate,e,t,r)}};function fq(n){return/^[A-Za-z]+:\/\//.test(n)}var vfe="@firebase/storage-compat",yfe="0.3.24";var _fe="storage-compat";function wfe(n,{instanceIdentifier:e}){let t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new iE(t,r)}function bfe(n){let e={TaskState:To,TaskEvent:iq,StringFormat:na,Storage:iE,Reference:zh};n.INTERNAL.registerComponent(new Qi(_fe,wfe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(vfe,yfe)}bfe(Ti);function xfe(n){return new Pt(e=>{let t=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();t(n.snapshot);let o=n.on("state_changed",t);return n.then(s=>{t(s),i()},s=>{t(n.snapshot),r(s)}),function(){o()}}).pipe(dI(0))}function hq(n){let e=xfe(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(at(t=>t.bytesTransferred/t.totalBytes*100))}}function oE(n,e){return{getDownloadURL:()=>pt(void 0).pipe(mo(e.get(ni).outsideAngular),Nn(()=>n.getDownloadURL()),Ri(e)),getMetadata:()=>pt(void 0).pipe(mo(e.get(ni).outsideAngular),Nn(()=>n.getMetadata()),Ri(e)),delete:()=>mn(n.delete()),child:t=>oE(n.child(t),e),updateMetadata:t=>mn(n.updateMetadata(t)),put:(t,r)=>{let i=n.put(t,r);return hq(i)},putString:(t,r,i)=>{let o=n.putString(t,r,i);return hq(o)},list:t=>mn(n.list(t)),listAll:()=>mn(n.listAll())}}var Cfe=new Ye("angularfire2.storageBucket"),Efe=new Ye("angularfire2.storage.maxUploadRetryTime"),Ife=new Ye("angularfire2.storage.maxOperationRetryTime"),Sfe=new Ye("angularfire2.storage.use-emulator"),Qk=(()=>{class n{storage;injector=Me(Wn);constructor(t,r,i,o,s,a,c,l,u,p){let m=Xf(t,s,r);this.storage=bg(`${m.name}.storage.${i}`,"AngularFireStorage",m.name,()=>{let g=s.runOutsideAngular(()=>m.storage(i||void 0)),x=u;return x&&g.useEmulator(...x),c&&g.setMaxUploadRetryTime(c),l&&g.setMaxOperationRetryTime(l),g},[c,l])}ref(t){return oE(this.storage.ref(t),this.injector)}refFromURL(t){return oE(this.storage.refFromURL(t),this.injector)}upload(t,r,i){let o=this.storage.ref(t);return oE(o,this.injector).put(r,i)}static \u0275fac=function(r){return new(r||n)(Le(dd),Le(fd,8),Le(Cfe,8),Le(Ui),Le(jt),Le(ni),Le(Efe,8),Le(Ife,8),Le(Sfe,8),Le(ms,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var pq=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=nr({})}return n})(),gq=(()=>{class n{constructor(){Ti.registerVersion("angularfire",ti.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=nr({providers:[Qk],imports:[pq,pq]})}return n})();var mq=(()=>{let e=class e{constructor(r,i,o){this.firestore=r,this.auth=i,this.storage=o,this.schedeCollection=this.firestore.collection("schede")}testWrite(){return ee(this,null,function*(){try{try{(yield this.auth.currentUser)||(yield this.auth.signInAnonymously())}catch{}return{ok:!0,id:(yield this.schedeCollection.add({nome:"debug-"+Date.now(),dataCreazione:new Date,idCliente:"debug",esercizi:[]})).id}}catch(r){return console.error("FirebaseService.testWrite error",r),{ok:!1,error:r}}})}getSchede(){return this.schedeCollection.snapshotChanges().pipe(at(r=>r.map(i=>{let o=i.payload.doc.data(),s=i.payload.doc.id;return Ve({id:s},o)})))}getScheda(r){return this.schedeCollection.doc(r).valueChanges().pipe(at(i=>i?Vt(Ve({},i),{id:r}):void 0))}addScheda(r){return this.schedeCollection.add(r)}updateScheda(r,i){return this.schedeCollection.doc(r).update(i)}deleteScheda(r){return this.schedeCollection.doc(r).delete()}};e.\u0275fac=function(i){return new(i||e)(Le(Ak),Le(Ks),Le(Qk))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var T_=class{constructor(e){return e}},vq="storage",Zk=class{constructor(){return Xc(vq)}};var Xk=new Ye("angularfire2.storage-instances");function Tfe(n,e){let t=Zl(vq,n,e);return t&&new T_(t)}function Dfe(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new T_(r)}}var Mfe={provide:Zk,deps:[[new Ir,Xk]]},Nfe={provide:T_,useFactory:Tfe,deps:[[new Ir,Xk],Ws]};function yq(n,...e){return Gn("angularfire",ti.full,"gcs"),eo([Nfe,Mfe,{provide:Xk,useFactory:Dfe(n),multi:!0,deps:[jt,Rn,ni,ac,[new Ir,Jf],[new Ir,ms],...e]}])}var _q=Dr(dq,!0);var xq="@firebase/installations",nR="0.6.18";var Cq=1e4,Eq=`w:${nR}`,Iq="FIS_v2",Pfe="https://firebaseinstallations.googleapis.com/v1",kfe=3600*1e3,Rfe="installations",Ofe="Installations";var Lfe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$h=new cp(Rfe,Ofe,Lfe);function Sq(n){return n instanceof Lu&&n.code.includes("request-failed")}function Aq({projectId:n}){return`${Pfe}/projects/${n}/installations`}function Tq(n){return{token:n.token,requestStatus:2,expiresIn:Vfe(n.expiresIn),creationTime:Date.now()}}function Dq(n,e){return ee(this,null,function*(){let r=(yield e.json()).error;return $h.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function Mq({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Ffe(n,{refreshToken:e}){let t=Mq(n);return t.append("Authorization",jfe(e)),t}function Nq(n){return ee(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function Vfe(n){return Number(n.replace("s","000"))}function jfe(n){return`${Iq} ${n}`}function Bfe(r,i){return ee(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=Aq(n),s=Mq(n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let c={fid:t,authVersion:Iq,appId:n.appId,sdkVersion:Eq},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield Nq(()=>fetch(o,l));if(u.ok){let p=yield u.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:Tq(p.authToken)}}else throw yield Dq("Create Installation",u)})}function Pq(n){return new Promise(e=>{setTimeout(e,n)})}function Ufe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var zfe=/^[cdef][\w-]{21}$/,tR="";function qfe(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=$fe(n);return zfe.test(t)?t:tR}catch{return tR}}function $fe(n){return Ufe(n).substr(0,22)}function aE(n){return`${n.appName}!${n.appId}`}var kq=new Map;function Rq(n,e){let t=aE(n);Oq(t,e),Hfe(t,e)}function Oq(n,e){let t=kq.get(n);if(t)for(let r of t)r(e)}function Hfe(n,e){let t=Gfe();t&&t.postMessage({key:n,fid:e}),Wfe()}var qh=null;function Gfe(){return!qh&&"BroadcastChannel"in self&&(qh=new BroadcastChannel("[Firebase] FID Change"),qh.onmessage=n=>{Oq(n.data.key,n.data.fid)}),qh}function Wfe(){kq.size===0&&qh&&(qh.close(),qh=null)}var Kfe="firebase-installations-database",Yfe=1,Hh="firebase-installations-store",Jk=null;function rR(){return Jk||(Jk=MO(Kfe,Yfe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Hh)}}})),Jk}function sE(n,e){return ee(this,null,function*(){let t=aE(n),i=(yield rR()).transaction(Hh,"readwrite"),o=i.objectStore(Hh),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&Rq(n,e.fid),e})}function Lq(n){return ee(this,null,function*(){let e=aE(n),r=(yield rR()).transaction(Hh,"readwrite");yield r.objectStore(Hh).delete(e),yield r.done})}function cE(n,e){return ee(this,null,function*(){let t=aE(n),i=(yield rR()).transaction(Hh,"readwrite"),o=i.objectStore(Hh),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&Rq(n,a.fid),a})}function iR(n){return ee(this,null,function*(){let e,t=yield cE(n.appConfig,r=>{let i=Qfe(r),o=Zfe(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===tR?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function Qfe(n){let e=n||{fid:qfe(),registrationStatus:0};return Fq(e)}function Zfe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject($h.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Xfe(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Jfe(n)}:{installationEntry:e}}function Xfe(n,e){return ee(this,null,function*(){try{let t=yield Bfe(n,e);return sE(n.appConfig,t)}catch(t){throw Sq(t)&&t.customData.serverCode===409?yield Lq(n.appConfig):yield sE(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function Jfe(n){return ee(this,null,function*(){let e=yield wq(n.appConfig);for(;e.registrationStatus===1;)yield Pq(100),e=yield wq(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield iR(n);return r||t}return e})}function wq(n){return cE(n,e=>{if(!e)throw $h.create("installation-not-found");return Fq(e)})}function Fq(n){return ehe(n)?{fid:n.fid,registrationStatus:0}:n}function ehe(n){return n.registrationStatus===1&&n.registrationTime+Cq<Date.now()}function the(r,i){return ee(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=nhe(n,t),s=Ffe(n,t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let c={installation:{sdkVersion:Eq,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield Nq(()=>fetch(o,l));if(u.ok){let p=yield u.json();return Tq(p)}else throw yield Dq("Generate Auth Token",u)})}function nhe(n,{fid:e}){return`${Aq(n)}/${e}/authTokens:generate`}function oR(n,e=!1){return ee(this,null,function*(){let t,r=yield cE(n.appConfig,o=>{if(!Vq(o))throw $h.create("not-registered");let s=o.authToken;if(!e&&ohe(s))return o;if(s.requestStatus===1)return t=rhe(n,e),o;{if(!navigator.onLine)throw $h.create("app-offline");let a=ahe(o);return t=ihe(n,a),a}});return t?yield t:r.authToken})}function rhe(n,e){return ee(this,null,function*(){let t=yield bq(n.appConfig);for(;t.authToken.requestStatus===1;)yield Pq(100),t=yield bq(n.appConfig);let r=t.authToken;return r.requestStatus===0?oR(n,e):r})}function bq(n){return cE(n,e=>{if(!Vq(e))throw $h.create("not-registered");let t=e.authToken;return che(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ihe(n,e){return ee(this,null,function*(){try{let t=yield the(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield sE(n.appConfig,r),t}catch(t){if(Sq(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield Lq(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield sE(n.appConfig,r)}throw t}})}function Vq(n){return n!==void 0&&n.registrationStatus===2}function ohe(n){return n.requestStatus===2&&!she(n)}function she(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+kfe}function ahe(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function che(n){return n.requestStatus===1&&n.requestTime+Cq<Date.now()}function lhe(n){return ee(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield iR(e);return r?r.catch(console.error):oR(e).catch(console.error),t.fid})}function uhe(n,e=!1){return ee(this,null,function*(){let t=n;return yield dhe(t),(yield oR(t,e)).token})}function dhe(n){return ee(this,null,function*(){let{registrationPromise:e}=yield iR(n);e&&(yield e)})}function fhe(n){if(!n||!n.options)throw eR("App Configuration");if(!n.name)throw eR("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw eR(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function eR(n){return $h.create("missing-app-config-values",{valueName:n})}var jq="installations",hhe="installations-internal",phe=n=>{let e=n.getProvider("app").getImmediate(),t=fhe(e),r=$a(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ghe=n=>{let e=n.getProvider("app").getImmediate(),t=$a(e,jq).getImmediate();return{getId:()=>lhe(t),getToken:i=>uhe(t,i)}};function mhe(){Bs(new Qi(jq,phe,"PUBLIC")),Bs(new Qi(hhe,ghe,"PRIVATE"))}mhe();Gn(xq,nR);Gn(xq,nR,"esm2017");var lE="analytics",vhe="firebase_id",yhe="origin",_he=60*1e3,whe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fR="https://www.googletagmanager.com/gtag/js";var Cs=new up("@firebase/analytics");var bhe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ra=new cp("analytics","Analytics",bhe);function xhe(n){if(!n.startsWith(fR)){let e=ra.create("invalid-gtag-resource",{gtagURL:n});return Cs.warn(e.message),""}return n}function Gq(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Che(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Ehe(n,e){let t=Che("firebase-js-sdk-policy",{createScriptURL:xhe}),r=document.createElement("script"),i=`${fR}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Ihe(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function She(n,e,t,r,i,o){return ee(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield Gq(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){Cs.error(a)}n("config",i,o)})}function Ahe(n,e,t,r,i){return ee(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield Gq(t);for(let c of s){let l=a.find(p=>p.measurementId===c),u=l&&e[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Cs.error(o)}})}function The(n,e,t,r){function i(o,...s){return ee(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield Ahe(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield She(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,l]=s;n("get",a,c,l)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){Cs.error(a)}})}return i}function Dhe(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=The(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function Mhe(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(fR)&&t.src.includes(n))return t;return null}var Nhe=30,Phe=1e3,aR=class{constructor(e={},t=Phe){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},Wq=new aR;function khe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Rhe(n){return ee(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:khe(r)},o=whe.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw ra.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function Ohe(r){return ee(this,arguments,function*(n,e=Wq,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw ra.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw ra.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new cR;return setTimeout(()=>ee(null,null,function*(){c.abort()}),t!==void 0?t:_he),Kq({appId:i,apiKey:o,measurementId:s},a,c,e)})}function Kq(o,s,a){return ee(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Wq){var c;let{appId:l,measurementId:u}=n;try{yield Lhe(r,e)}catch(p){if(u)return Cs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:u};throw p}try{let p=yield Rhe(n);return i.deleteThrottleMetadata(l),p}catch(p){let m=p;if(!Fhe(m)){if(i.deleteThrottleMetadata(l),u)return Cs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:u};throw p}let g=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?l1(t,i.intervalMillis,Nhe):l1(t,i.intervalMillis),x={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return i.setThrottleMetadata(l,x),Cs.debug(`Calling attemptFetch again in ${g} millis`),Kq(n,x,r,i)}})}function Lhe(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(ra.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Fhe(n){if(!(n instanceof Lu)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var cR=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var lR;function Vhe(n,e,t,r,i){return ee(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}var uR;function jhe(n){uR=n}function Bhe(n){lR=n}function Uhe(){return ee(this,null,function*(){if(ap())try{yield TO()}catch(n){return Cs.warn(ra.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Cs.warn(ra.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function zhe(n,e,t,r,i,o,s){return ee(this,null,function*(){var a;let c=Ohe(n);c.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&Cs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Cs.error(g)),e.push(c);let l=Uhe().then(g=>{if(g)return r.getId()}),[u,p]=yield Promise.all([c,l]);Mhe(o)||Ehe(o,u.measurementId),uR&&(i("consent","default",uR),jhe(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[yhe]="firebase",m.update=!0,p!=null&&(m[vhe]=p),i("config",u.measurementId,m),lR&&(i("set",lR),Bhe(void 0)),u.measurementId})}var dR=class{constructor(e){this.app=e}_delete(){return delete D_[this.app.options.appId],Promise.resolve()}},D_={},Bq=[],Uq={},sR="dataLayer",qhe="gtag",zq,Yq,qq=!1;function $he(){let n=[];if(AO()&&n.push("This is a browser extension environment."),DO()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ra.create("invalid-analytics-context",{errorInfo:e});Cs.warn(t.message)}}function Hhe(n,e,t){$he();let r=n.options.appId;if(!r)throw ra.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Cs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ra.create("no-api-key");if(D_[r]!=null)throw ra.create("already-exists",{id:r});if(!qq){Ihe(sR);let{wrappedGtag:o,gtagCore:s}=Dhe(D_,Bq,Uq,sR,qhe);Yq=o,zq=s,qq=!0}return D_[r]=zhe(n,Bq,Uq,e,zq,sR,t),new dR(n)}function Qq(n=Pc()){n=wn(n);let e=$a(n,lE);return e.isInitialized()?e.getImmediate():Zq(n)}function Zq(n,e={}){let t=$a(n,lE);if(t.isInitialized()){let i=t.getImmediate();if(lp(e,t.getOptions()))return i;throw ra.create("already-initialized")}return t.initialize({options:e})}function Xq(n,e,t,r){n=wn(n),Vhe(Yq,D_[n.app.options.appId],e,t,r).catch(i=>Cs.error(i))}var $q="@firebase/analytics",Hq="0.10.17";function Ghe(){Bs(new Qi(lE,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Hhe(r,i,t)},"PUBLIC")),Bs(new Qi("analytics-internal",n,"PRIVATE")),Gn($q,Hq),Gn($q,Hq,"esm2017");function n(e){try{let t=e.getProvider(lE).getImmediate();return{logEvent:(r,i,o)=>Xq(t,r,i,o)}}catch(t){throw ra.create("interop-component-reg-failed",{reason:t})}}}Ghe();var M_=class{constructor(e){return e}},Jq="analytics",hR=class{constructor(){return Xc(Jq)}};var e$=Dr(Qq,!0);var t4e=Math.floor(Math.random()*(2**32-1))-2**31;var pR=new Ye("angularfire2.analytics-instances");function Whe(n,e,t){if(!m5(t))return null;let r=Zl(Jq,n,e);return r&&new M_(r)}function Khe(n){return(e,t,r)=>{if(!m5(r))return null;let i=e.runOutsideAngular(()=>n(t));return new M_(i)}}var Yhe={provide:hR,deps:[[new Ir,pR]]},Qhe={provide:M_,useFactory:Whe,deps:[[new Ir,pR],Ws,Ui]};function t$(n,...e){return Gn("angularfire",ti.full,"analytics"),eo([Qhe,Yhe,{provide:pR,useFactory:Khe(n),multi:!0,deps:[jt,Rn,Ui,ni,ac,...e]}])}var gR="Service workers are disabled or not supported by this browser",Ym=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Pt(r=>r.error(new et(5601,!1)));else{let r=null,i=new kn;this.worker=new Pt(l=>(r!==null&&l.next(r),i.subscribe(u=>l.next(u))));let o=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Nn(()=>e.getRegistration().then(l=>{if(!l)throw new et(5601,!1);return l})));let s=new kn;this.events=s.asObservable();let a=l=>{let{data:u}=l;u?.type&&s.next(u)};e.addEventListener("message",a),t?.get($o,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(Xi(1)).subscribe(i=>{i.postMessage(Ve({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(br(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Xi(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(br(i=>i.nonce===e),Xi(1),at(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},r$=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new kn;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Rl,this.notificationClicks=Rl,this.notificationCloses=Rl,this.pushSubscriptionChanges=Rl,this.subscription=Rl;return}this.messages=this.sw.eventsOfType("PUSH").pipe(at(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(at(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(at(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(at(i=>i.data)),this.pushManager=this.sw.registration.pipe(at(i=>i.pushManager));let r=this.pushManager.pipe(Nn(i=>i.getSubscription()));this.subscription=new Pt(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(gR));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Nn(c=>c.subscribe(r)),Xi(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(gR));let t=r=>{if(r===null)throw new et(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new et(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(Xi(1),Nn(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(Le(Ym))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),i$=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Rl,this.unrecoverable=Rl;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(gR));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new et(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(Le(Ym))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})();var o$=new Ye("");function Zhe(){let n=Me(N_);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=Me(o$),t=Me(jt),r=Me($o);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=n$(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),n$(+a[0])]);break;default:throw new et(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error(Qa(5604,!1)))})})}function n$(n){return new Promise(e=>setTimeout(e,n))}function Xhe(n,e){return new Ym(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var N_=class{enabled;updateViaCache;type;scope;registrationStrategy};function Jhe(n,e={}){return eo([r$,i$,{provide:o$,useValue:n},{provide:N_,useValue:e},{provide:Ym,useFactory:Xhe,deps:[N_,Rn]},Qp(Zhe)])}var s$=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[Jhe(t,r)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=nr({providers:[r$,i$]})}return n})();var t0=GH(sH(),1);var Wpe=["qrcElement"],aH=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.sanitizer=i,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new jr,this.context=null}ngOnChanges(){return ee(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(r){return this.allowEmptyString===!1?!(typeof r>"u"||r===""||r==="null"||r===null):!(typeof r>"u")}toDataURL(r){return new Promise((i,o)=>{(0,t0.toDataURL)(this.qrdata,r,(s,a)=>{s?o(s):i(a)})})}toCanvas(r,i){return new Promise((o,s)=>{(0,t0.toCanvas)(r,this.qrdata,i,a=>{a?s(a):o("success")})})}toSVG(r){return new Promise((i,o)=>{(0,t0.toString)(this.qrdata,r,(s,a)=>{s?o(s):i(a)})})}renderElement(r){for(let i of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,i);this.renderer.appendChild(this.qrcElement.nativeElement,r)}createQRCode(){return ee(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let r={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},i=this.imageSrc,o=this.imageHeight||40,s=this.imageWidth||40;switch(this.elementType){case"canvas":{let a=this.renderer.createElement("canvas");this.context=a.getContext("2d"),this.toCanvas(a,r).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(a,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(a,"title",`${this.title}`),i&&this.context){this.centerImage=new Image(s,o),i!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=i),o!==this.centerImage.height&&(this.centerImage.height=o),s!==this.centerImage.width&&(this.centerImage.width=s);let c=this.centerImage;c&&(c.onload=()=>{this.context?.drawImage(c,a.width/2-s/2,a.height/2-o/2,s,o)})}this.renderElement(a),this.emitQRCodeURL(a)}).catch(c=>{console.error("[angularx-qrcode] canvas error:",c)});break}case"svg":{let a=this.renderer.createElement("div");this.toSVG(r).then(c=>{this.renderer.setProperty(a,"innerHTML",c);let l=a.firstChild;this.renderer.setAttribute(l,"height",`${this.width}`),this.renderer.setAttribute(l,"width",`${this.width}`),this.renderElement(l),this.emitQRCodeURL(l)}).catch(c=>{console.error("[angularx-qrcode] svg error:",c)});break}case"url":case"img":default:{let a=this.renderer.createElement("img");this.toDataURL(r).then(c=>{this.alt&&a.setAttribute("alt",this.alt),this.ariaLabel&&a.setAttribute("aria-label",this.ariaLabel),a.setAttribute("src",c),this.title&&a.setAttribute("title",this.title),this.renderElement(a),this.emitQRCodeURL(a)}).catch(c=>{console.error("[angularx-qrcode] img/url error:",c)})}}}catch(r){console.error("[angularx-qrcode] Error generating QR Code:",r.message)}})}convertBase64ImageUrlToBlob(r){let i=r.split(";base64,"),o=i[0].split(":")[1],s=atob(i[1]),a=new Uint8Array(s.length);for(let c=0;c<s.length;++c)a[c]=s.charCodeAt(c);return new Blob([a],{type:o})}emitQRCodeURL(r){let i=r.constructor.name;if(i===SVGSVGElement.name){let l=r.outerHTML,u=new Blob([l],{type:"image/svg+xml"}),p=URL.createObjectURL(u),m=this.sanitizer.bypassSecurityTrustUrl(p);this.qrCodeURL.emit(m);return}let o="";i===HTMLCanvasElement.name&&(o=r.toDataURL("image/png")),i===HTMLImageElement.name&&(o=r.src);let s=this.convertBase64ImageUrlToBlob(o),a=URL.createObjectURL(s),c=this.sanitizer.bypassSecurityTrustUrl(a);this.qrCodeURL.emit(c)}};e.\u0275fac=function(i){return new(i||e)(Je(hs),Je(A5))},e.\u0275cmp=lr({type:e,selectors:[["qrcode"]],viewQuery:function(i,o){if(i&1&&fv(Wpe,7),i&2){let s;Bf(s=Uf())&&(o.qrcElement=s.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[Ia],decls:2,vars:2,consts:[["qrcElement",""]],template:function(i,o){i&1&&hb(0,"div",null,0),i&2&&QA(o.cssClass)},encapsulation:2,changeDetection:0});let n=e;return n})();var cH=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ur({type:e,bootstrap:[W8]}),e.\u0275inj=nr({providers:[mq,D8(()=>M8(Zv.firebase)),Y8(()=>Q8()),DB(()=>PB()),yq(()=>_q()),t$(()=>e$())],imports:[S5,Yl,ig,Ez,aH,q8.initializeApp(Zv.firebase),$8,Oz,gq,s$.register("ngsw-worker.js",{enabled:!Xu(),registrationStrategy:"registerWhenStable:30000"})]});let n=e;return n})();I5().bootstrapModule(cH).catch(n=>console.error(n));
