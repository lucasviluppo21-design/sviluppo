import{A as Uh,B as jk,C as Ds,D as Ra,E as S_,F as A_,G as Bk,H as wc,I as D_,J as zn,K as bi,L as zE,a as Pk,b as w_,c as kk,d as Rk,e as Ok,f as VE,g as b_,h as jE,i as Fh,j as x_,k as E_,l as C_,m as Um,n as Lk,o as BE,p as UE,q as Vh,r as Fk,s as Vk,t as Eu,u as jh,v as Bh,w as I_,x as yn,y as qi,z as _c}from"./chunk-WLKSXRLX.js";import{a as Fe,b as Pt,f as FE,g as ee}from"./chunk-WTI2L5DI.js";var qE;function T_(){return qE}function bc(n){let e=qE;return qE=n,e}var Uk=Symbol("NotFound");function zh(n){return n===Uk||n?.name==="\u0275NotFound"}var no=null,M_=!1,$E=1,jz=null,ro=Symbol("SIGNAL");function hn(n){let e=no;return no=n,e}function R_(){return no}var qh={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $h(n){if(M_)throw new Error("");if(no===null)return;no.consumerOnSignalRead(n);let e=no.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=no.recomputing;if(r&&(t=e!==void 0?e.nextProducer:no.producers,t!==void 0&&t.producer===n)){no.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===no&&(!r||Uz(i,no)))return;let o=Wh(no),s={producer:n,consumer:no,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};no.producersTail=s,e!==void 0?e.nextProducer=s:no.producers=s,o&&Hk(n,s)}function zk(){$E++}function O_(n){if(!(Wh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===$E)){if(!n.producerMustRecompute(n)&&!$m(n)){k_(n);return}n.producerRecomputeValue(n),k_(n)}}function HE(n){if(n.consumers===void 0)return;let e=M_;M_=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Bz(r)}}finally{M_=e}}function WE(){return no?.consumerAllowSignalWrites!==!1}function Bz(n){n.dirty=!0,HE(n),n.consumerMarkedDirty?.(n)}function k_(n){n.dirty=!1,n.lastCleanEpoch=$E}function Hh(n){return n&&qk(n),hn(n)}function qk(n){n.producersTail=void 0,n.recomputing=!0}function qm(n,e){hn(e),n&&$k(n)}function $k(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Wh(n))do t=GE(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function $m(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(O_(t),r!==t.version))return!0}return!1}function Hm(n){if(Wh(n)){let e=n.producers;for(;e!==void 0;)e=GE(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Hk(n,e){let t=n.consumersTail,r=Wh(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Hk(i.producer,i)}function GE(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Wh(e)){let o=e.producers;for(;o!==void 0;)o=GE(o)}return t}function Wh(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function L_(n){jz?.(n)}function Uz(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function F_(n,e){return Object.is(n,e)}function V_(n,e){let t=Object.create(zz);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(O_(t),$h(t),t.value===zm)throw t.error;return t.value};return r[ro]=t,L_(t),r}var N_=Symbol("UNSET"),P_=Symbol("COMPUTING"),zm=Symbol("ERRORED"),zz=Pt(Fe({},qh),{value:N_,dirty:!0,error:null,equal:F_,kind:"computed",producerMustRecompute(n){return n.value===N_||n.value===P_},producerRecomputeValue(n){if(n.value===P_)throw new Error("");let e=n.value;n.value=P_;let t=Hh(n),r,i=!1;try{r=n.computation(),hn(null),i=e!==N_&&e!==zm&&r!==zm&&n.equal(e,r)}catch(o){r=zm,n.error=o}finally{qm(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function qz(){throw new Error}var Wk=qz;function Gk(n){Wk(n)}function KE(n){Wk=n}var $z=null;function YE(n,e){let t=Object.create(j_);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Kk(t);return r[ro]=t,L_(t),[r,s=>Gh(t,s),s=>ZE(t,s)]}function Kk(n){return $h(n),n.value}function Gh(n,e){WE()||Gk(n),n.equal(n.value,e)||(n.value=e,Hz(n))}function ZE(n,e){WE()||Gk(n),Gh(n,e(n.value))}var j_=Pt(Fe({},qh),{equal:F_,value:void 0,kind:"signal"});function Hz(n){n.version++,zk(),HE(n),$z?.(n)}function Xt(n){return typeof n=="function"}function Kh(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var B_=Kh(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Qd(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var jr=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Xt(r))try{r()}catch(o){e=o instanceof B_?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Yk(o)}catch(s){e=e??[],s instanceof B_?e=[...e,...s.errors]:e.push(s)}}if(e)throw new B_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Yk(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Qd(t,e)}remove(e){let{_finalizers:t}=this;t&&Qd(t,e),e instanceof n&&e._removeParent(this)}};jr.EMPTY=(()=>{let n=new jr;return n.closed=!0,n})();var QE=jr.EMPTY;function U_(n){return n instanceof jr||n&&"closed"in n&&Xt(n.remove)&&Xt(n.add)&&Xt(n.unsubscribe)}function Yk(n){Xt(n)?n():n.unsubscribe()}var Oa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Yh={setTimeout(n,e,...t){let{delegate:r}=Yh;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Yh;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function z_(n){Yh.setTimeout(()=>{let{onUnhandledError:e}=Oa;if(e)e(n);else throw n})}function Wm(){}var Zk=XE("C",void 0,void 0);function Qk(n){return XE("E",void 0,n)}function Xk(n){return XE("N",n,void 0)}function XE(n,e,t){return{kind:n,value:e,error:t}}var Xd=null;function Zh(n){if(Oa.useDeprecatedSynchronousErrorHandling){let e=!Xd;if(e&&(Xd={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Xd;if(Xd=null,t)throw r}}else n()}function Jk(n){Oa.useDeprecatedSynchronousErrorHandling&&Xd&&(Xd.errorThrown=!0,Xd.error=n)}var Jd=class extends jr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,U_(e)&&e.add(this)):this.destination=Kz}static create(e,t,r){return new El(e,t,r)}next(e){this.isStopped?eC(Xk(e),this):this._next(e)}error(e){this.isStopped?eC(Qk(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?eC(Zk,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Wz=Function.prototype.bind;function JE(n,e){return Wz.call(n,e)}var tC=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){q_(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){q_(r)}else q_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){q_(t)}}},El=class extends Jd{constructor(e,t,r){super();let i;if(Xt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Oa.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&JE(e.next,o),error:e.error&&JE(e.error,o),complete:e.complete&&JE(e.complete,o)}):i=e}this.destination=new tC(i)}};function q_(n){Oa.useDeprecatedSynchronousErrorHandling?Jk(n):z_(n)}function Gz(n){throw n}function eC(n,e){let{onStoppedNotification:t}=Oa;t&&Yh.setTimeout(()=>t(n,e))}var Kz={closed:!0,next:Wm,error:Gz,complete:Wm};var Qh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function No(n){return n}function $_(...n){return nC(n)}function nC(n){return n.length===0?No:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Bt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Zz(t)?t:new El(t,r,i);return Zh(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=eR(r),new r((i,o)=>{let s=new El({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qh](){return this}pipe(...t){return nC(t)(this)}toPromise(t){return t=eR(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function eR(n){var e;return(e=n??Oa.Promise)!==null&&e!==void 0?e:Promise}function Yz(n){return n&&Xt(n.next)&&Xt(n.error)&&Xt(n.complete)}function Zz(n){return n&&n instanceof Jd||Yz(n)&&U_(n)}function rC(n){return Xt(n?.lift)}function an(n){return e=>{if(rC(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function cn(n,e,t,r,i){return new iC(n,e,t,r,i)}var iC=class extends Jd{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Xh(){return an((n,e)=>{let t=null;n._refCount++;let r=cn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Jh=class extends Bt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,rC(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new jr;let t=this.getSubject();e.add(this.source.subscribe(cn(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=jr.EMPTY)}return e}refCount(){return Xh()(this)}};var tR=Kh(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ir=(()=>{class n extends Bt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new H_(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new tR}next(t){Zh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Zh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Zh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?QE:(this.currentObservers=null,o.push(t),new jr(()=>{this.currentObservers=null,Qd(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Bt;return t.source=this,t}}return n.create=(e,t)=>new H_(e,t),n})(),H_=class extends ir{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:QE}};var $i=class extends ir{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Gm={now(){return(Gm.delegate||Date).now()},delegate:void 0};var Km=class extends ir{constructor(e=1/0,t=1/0,r=Gm){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var W_=class extends jr{constructor(e,t){super()}schedule(e,t=0){return this}};var Ym={setInterval(n,e,...t){let{delegate:r}=Ym;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ym;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ep=class extends W_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ym.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ym.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Qd(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var tp=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};tp.now=Gm.now;var np=class extends tp{constructor(e,t=tp.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ef=new np(ep);var G_=class extends ep{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var K_=class extends np{};var oC=new K_(G_);var io=new Bt(n=>n.complete());function nR(n){return n&&Xt(n.schedule)}function sC(n){return n[n.length-1]}function Y_(n){return Xt(sC(n))?n.pop():void 0}function xc(n){return nR(sC(n))?n.pop():void 0}function rR(n,e){return typeof sC(n)=="number"?n.pop():e}var Z_=n=>n&&typeof n.length=="number"&&typeof n!="function";function Q_(n){return Xt(n?.then)}function X_(n){return Xt(n[Qh])}function J_(n){return Symbol.asyncIterator&&Xt(n?.[Symbol.asyncIterator])}function e1(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Qz(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var t1=Qz();function n1(n){return Xt(n?.[t1])}function r1(n){return kk(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield w_(t.read());if(i)return yield w_(void 0);yield yield w_(r)}}finally{t.releaseLock()}})}function i1(n){return Xt(n?.getReader)}function vr(n){if(n instanceof Bt)return n;if(n!=null){if(X_(n))return Xz(n);if(Z_(n))return Jz(n);if(Q_(n))return eq(n);if(J_(n))return iR(n);if(n1(n))return tq(n);if(i1(n))return nq(n)}throw e1(n)}function Xz(n){return new Bt(e=>{let t=n[Qh]();if(Xt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Jz(n){return new Bt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function eq(n){return new Bt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,z_)})}function tq(n){return new Bt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function iR(n){return new Bt(e=>{rq(n,e).catch(t=>e.error(t))})}function nq(n){return iR(r1(n))}function rq(n,e){var t,r,i,o;return Pk(this,void 0,void 0,function*(){try{for(t=Rk(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Jo(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function oo(n,e=0){return an((t,r)=>{t.subscribe(cn(r,i=>Jo(r,n,()=>r.next(i),e),()=>Jo(r,n,()=>r.complete(),e),i=>Jo(r,n,()=>r.error(i),e)))})}function sa(n,e=0){return an((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function oR(n,e){return vr(n).pipe(sa(e),oo(e))}function sR(n,e){return vr(n).pipe(sa(e),oo(e))}function aR(n,e){return new Bt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function cR(n,e){return new Bt(t=>{let r;return Jo(t,e,()=>{r=n[t1](),Jo(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Xt(r?.return)&&r.return()})}function o1(n,e){if(!n)throw new Error("Iterable cannot be null");return new Bt(t=>{Jo(t,e,()=>{let r=n[Symbol.asyncIterator]();Jo(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function lR(n,e){return o1(r1(n),e)}function uR(n,e){if(n!=null){if(X_(n))return oR(n,e);if(Z_(n))return aR(n,e);if(Q_(n))return sR(n,e);if(J_(n))return o1(n,e);if(n1(n))return cR(n,e);if(i1(n))return lR(n,e)}throw e1(n)}function pn(n,e){return e?uR(n,e):vr(n)}function ht(...n){let e=xc(n);return pn(n,e)}function rp(n,e){let t=Xt(n)?n:()=>n,r=i=>i.error(t());return new Bt(e?i=>e.schedule(r,0,i):r)}function aC(n){return!!n&&(n instanceof Bt||Xt(n.lift)&&Xt(n.subscribe))}var Cl=Kh(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function gt(n,e){return an((t,r)=>{let i=0;t.subscribe(cn(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:iq}=Array;function oq(n,e){return iq(e)?n(...e):n(e)}function s1(n){return gt(e=>oq(n,e))}var{isArray:sq}=Array,{getPrototypeOf:aq,prototype:cq,keys:lq}=Object;function a1(n){if(n.length===1){let e=n[0];if(sq(e))return{args:e,keys:null};if(uq(e)){let t=lq(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function uq(n){return n&&typeof n=="object"&&aq(n)===cq}function c1(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Zm(...n){let e=xc(n),t=Y_(n),{args:r,keys:i}=a1(n);if(r.length===0)return pn([],e);let o=new Bt(dq(r,e,i?s=>c1(i,s):No));return t?o.pipe(s1(t)):o}function dq(n,e,t=No){return r=>{dR(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)dR(e,()=>{let l=pn(n[c],e),u=!1;l.subscribe(cn(r,p=>{o[c]=p,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function dR(n,e,t){n?Jo(t,n,e):e()}function fR(n,e,t,r,i,o,s,a){let c=[],l=0,u=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},g=I=>l<r?C(I):c.push(I),C=I=>{o&&e.next(I),l++;let N=!1;vr(t(I,u++)).subscribe(cn(e,P=>{i?.(P),o?g(P):e.next(P)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let P=c.shift();s?Jo(e,s,()=>C(P)):C(P)}m()}catch(P){e.error(P)}}))};return n.subscribe(cn(e,g,()=>{p=!0,m()})),()=>{a?.()}}function Gr(n,e,t=1/0){return Xt(e)?Gr((r,i)=>gt((o,s)=>e(r,o,i,s))(vr(n(r,i))),t):(typeof e=="number"&&(t=e),an((r,i)=>fR(r,i,n,t)))}function Ec(n=1/0){return Gr(No,n)}function hR(){return Ec(1)}function ip(...n){return hR()(pn(n,xc(n)))}function Qm(n){return new Bt(e=>{vr(n()).subscribe(e)})}function cC(...n){let e=Y_(n),{args:t,keys:r}=a1(n),i=new Bt(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let p=!1;vr(t[u]).subscribe(cn(o,m=>{p||(p=!0,l--),a[u]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?c1(r,a):a),o.complete())}))}});return e?i.pipe(s1(e)):i}function lC(...n){let e=xc(n),t=rR(n,1/0),r=n;return r.length?r.length===1?vr(r[0]):Ec(t)(pn(r,e)):io}function ai(n,e){return an((t,r)=>{let i=0;t.subscribe(cn(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Il(n){return an((e,t)=>{let r=null,i=!1,o;r=e.subscribe(cn(t,void 0,void 0,s=>{o=vr(n(s,Il(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function pR(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(cn(s,u=>{let p=l++;c=a?n(c,u,p):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Cu(n,e){return Xt(e)?Gr(n,e,1):Gr(n,1)}function uC(n,e=ef){return an((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+n,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}t.subscribe(cn(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Iu(n){return an((e,t)=>{let r=!1;e.subscribe(cn(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Sl(n){return n<=0?()=>io:an((e,t)=>{let r=0;e.subscribe(cn(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function l1(n,e=No){return n=n??fq,an((t,r)=>{let i,o=!0;t.subscribe(cn(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function fq(n,e){return n===e}function u1(n=hq){return an((e,t)=>{let r=!1;e.subscribe(cn(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hq(){return new Cl}function Xm(n){return an((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function La(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ai((i,o)=>n(i,o,r)):No,Sl(1),t?Iu(e):u1(()=>new Cl))}function op(n){return n<=0?()=>io:an((e,t)=>{let r=[];e.subscribe(cn(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function dC(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ai((i,o)=>n(i,o,r)):No,op(1),t?Iu(e):u1(()=>new Cl))}function sp(){return an((n,e)=>{let t,r=!1;n.subscribe(cn(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Su(n,e){return an(pR(n,e,arguments.length>=2,!0))}function gR(n={}){let{connector:e=()=>new ir,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,u=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},g=()=>{m(),s=c=void 0,u=p=!1},C=()=>{let I=s;g(),I?.unsubscribe()};return an((I,N)=>{l++,!p&&!u&&m();let P=c=c??e();N.add(()=>{l--,l===0&&!p&&!u&&(a=fC(C,i))}),P.subscribe(N),!s&&l>0&&(s=new El({next:Q=>P.next(Q),error:Q=>{p=!0,m(),a=fC(g,t,Q),P.error(Q)},complete:()=>{u=!0,m(),a=fC(g,r),P.complete()}}),vr(I).subscribe(s))})(o)}}function fC(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new El({next:()=>{r.unsubscribe(),n()}});return vr(e(...t)).subscribe(r)}function d1(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,gR({connector:()=>new Km(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Au(...n){let e=xc(n);return an((t,r)=>{(e?ip(n,t,e):ip(n,t)).subscribe(r)})}function Jn(n,e){return an((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(cn(r,c=>{i?.unsubscribe();let l=0,u=o++;vr(n(c,u)).subscribe(i=cn(r,p=>r.next(e?e(c,p,u,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function f1(n,e){return Xt(e)?Jn(()=>n,e):Jn(()=>n)}function h1(n){return an((e,t)=>{vr(n).subscribe(cn(t,()=>t.complete(),Wm)),!t.closed&&e.subscribe(t)})}function xi(n,e,t){let r=Xt(n)||e||t?{next:n,error:e,complete:t}:n;return r?an((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(cn(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):No}function mR(n){let e=hn(null);try{return n()}finally{hn(e)}}var Du=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},n0=new Du("20.3.15");var v1="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ct=class extends Error{code;constructor(e,t){super(Nu(e,t)),this.code=e}};function pq(n){return`NG0${Math.abs(n)}`}function Nu(n,e){return`${pq(n)}${e?": "+e:""}`}var Ms=globalThis;function Ln(n){for(let e in n)if(n[e]===Ln)return e;throw Error("")}function _R(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Dl(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Dl).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function IC(n,e){return n?e?`${n} ${e}`:n:e||""}var gq=Ln({__forward_ref__:Ln});function ko(n){return n.__forward_ref__=ko,n.toString=function(){return Dl(this())},n}function Hi(n){return SC(n)?n():n}function SC(n){return typeof n=="function"&&n.hasOwnProperty(gq)&&n.__forward_ref__===ko}function tt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function dr(n){return{providers:n.providers||[],imports:n.imports||[]}}function r0(n){return mq(n,y1)}function AC(n){return r0(n)!==null}function mq(n,e){return n.hasOwnProperty(e)&&n[e]||null}function vq(n){let e=n?.[y1]??null;return e||null}function pC(n){return n&&n.hasOwnProperty(g1)?n[g1]:null}var y1=Ln({\u0275prov:Ln}),g1=Ln({\u0275inj:Ln}),Ke=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=tt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function DC(n){return n&&!!n.\u0275providers}var TC=Ln({\u0275cmp:Ln}),MC=Ln({\u0275dir:Ln}),NC=Ln({\u0275pipe:Ln}),PC=Ln({\u0275mod:Ln}),e0=Ln({\u0275fac:Ln}),sf=Ln({__NG_ELEMENT_ID__:Ln}),vR=Ln({__NG_ENV_ID__:Ln});function Pu(n){return typeof n=="string"?n:n==null?"":String(n)}function wR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Pu(n)}var bR=Ln({ngErrorCode:Ln}),yq=Ln({ngErrorMessage:Ln}),_q=Ln({ngTokenPath:Ln});function kC(n,e){return xR("",-200,e)}function _1(n,e){throw new ct(-201,!1)}function xR(n,e,t){let r=new ct(e,n);return r[bR]=e,r[yq]=n,t&&(r[_q]=t),r}function wq(n){return n[bR]}var gC;function ER(){return gC}function Po(n){let e=gC;return gC=n,e}function RC(n,e,t){let r=r0(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;_1(n,"Injector")}var bq={},tf=bq,mC="__NG_DI_FLAG__",vC=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=nf(t)||0;try{return this.injector.get(e,r&8?null:tf,r)}catch(i){if(zh(i))return i;throw i}}};function xq(n,e=0){let t=T_();if(t===void 0)throw new ct(-203,!1);if(t===null)return RC(n,void 0,e);{let r=Eq(e),i=t.retrieve(n,r);if(zh(i)){if(r.optional)return null;throw i}return i}}function ze(n,e=0){return(ER()||xq)(Hi(n),e)}function Se(n,e){return ze(n,nf(e))}function nf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Eq(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function yC(n){let e=[];for(let t=0;t<n.length;t++){let r=Hi(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ct(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=Cq(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ze(i,o))}else e.push(ze(r))}return e}function CR(n,e){return n[mC]=e,n.prototype[mC]=e,n}function Cq(n){return n[mC]}function Tu(n,e){let t=n.hasOwnProperty(e0);return t?n[e0]:null}function IR(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function SR(n){return n.flat(Number.POSITIVE_INFINITY)}function w1(n,e){n.forEach(t=>Array.isArray(t)?w1(t,e):e(t))}function OC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function i0(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function AR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function DR(n,e,t){let r=cp(n,e);return r>=0?n[r|1]=t:(r=~r,AR(n,r,e,t)),r}function b1(n,e){let t=cp(n,e);if(t>=0)return n[t|1]}function cp(n,e){return Iq(n,e,1)}function Iq(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ku={},Ts=[],Ru=new Ke(""),LC=new Ke("",-1),FC=new Ke(""),t0=class{get(e,t=tf){if(t===tf){let i=xR("",-201);throw i.name="\u0275NotFound",i}return t}};function VC(n){return n[PC]||null}function Ml(n){return n[TC]||null}function jC(n){return n[MC]||null}function TR(n){return n[NC]||null}function es(n){return{\u0275providers:n}}function MR(...n){return{\u0275providers:BC(!0,n),\u0275fromNgModule:!0}}function BC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return w1(e,s=>{let a=s;m1(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&NR(i,o),t}function NR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];UC(i,o=>{e(o,r)})}}function m1(n,e,t,r){if(n=Hi(n),!n)return!1;let i=null,o=pC(n),s=!o&&Ml(n);if(!o&&!s){let c=n.ngModule;if(o=pC(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)m1(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{w1(o.imports,u=>{m1(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&NR(l,e)}if(!a){let l=Tu(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ts},i),e({provide:FC,useValue:i,multi:!0},i),e({provide:Ru,useValue:()=>ze(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;UC(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function UC(n,e){for(let t of n)DC(t)&&(t=t.\u0275providers),Array.isArray(t)?UC(t,e):e(t)}var Sq=Ln({provide:String,useValue:Ln});function PR(n){return n!==null&&typeof n=="object"&&Sq in n}function Aq(n){return!!(n&&n.useExisting)}function Dq(n){return!!(n&&n.useFactory)}function rf(n){return typeof n=="function"}function kR(n){return!!n.useClass}var o0=new Ke(""),p1={},yR={},hC;function s0(){return hC===void 0&&(hC=new t0),hC}var qn=class{},of=class extends qn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,wC(e,s=>this.processProvider(s)),this.records.set(LC,ap(void 0,this)),i.has("environment")&&this.records.set(qn,ap(void 0,this));let o=this.records.get(o0);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(FC,Ts,{self:!0}))}retrieve(e,t){let r=nf(t)||0;try{return this.get(e,tf,r)}catch(i){if(zh(i))return i;throw i}}destroy(){Jm(this),this._destroyed=!0;let e=hn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),hn(e)}}onDestroy(e){return Jm(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Jm(this);let t=bc(this),r=Po(void 0),i;try{return e()}finally{bc(t),Po(r)}}get(e,t=tf,r){if(Jm(this),e.hasOwnProperty(vR))return e[vR](this);let i=nf(r),o,s=bc(this),a=Po(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=kq(e)&&r0(e);u&&this.injectableDefInScope(u)?l=ap(_C(e),p1):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?s0():this.parent;return t=i&8&&t===tf?null:t,c.get(e,t)}catch(c){let l=wq(c);throw l===-200||l===-201?new ct(l,null):c}finally{Po(a),bc(s)}}resolveInjectorInitializers(){let e=hn(null),t=bc(this),r=Po(void 0),i;try{let o=this.get(Ru,Ts,{self:!0});for(let s of o)s()}finally{bc(t),Po(r),hn(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Dl(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Hi(e);let t=rf(e)?e:Hi(e&&e.provide),r=Mq(e);if(!rf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ap(void 0,p1,!0),i.factory=()=>yC(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=hn(null);try{if(t.value===yR)throw kC(Dl(e));return t.value===p1&&(t.value=yR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Pq(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{hn(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Hi(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function _C(n){let e=r0(n),t=e!==null?e.factory:Tu(n);if(t!==null)return t;if(n instanceof Ke)throw new ct(204,!1);if(n instanceof Function)return Tq(n);throw new ct(204,!1)}function Tq(n){if(n.length>0)throw new ct(204,!1);let t=vq(n);return t!==null?()=>t.factory(n):()=>new n}function Mq(n){if(PR(n))return ap(void 0,n.useValue);{let e=zC(n);return ap(e,p1)}}function zC(n,e,t){let r;if(rf(n)){let i=Hi(n);return Tu(i)||_C(i)}else if(PR(n))r=()=>Hi(n.useValue);else if(Dq(n))r=()=>n.useFactory(...yC(n.deps||[]));else if(Aq(n))r=(i,o)=>ze(Hi(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Hi(n&&(n.useClass||n.provide));if(Nq(n))r=()=>new i(...yC(n.deps));else return Tu(i)||_C(i)}return r}function Jm(n){if(n.destroyed)throw new ct(205,!1)}function ap(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Nq(n){return!!n.deps}function Pq(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function kq(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function wC(n,e){for(let t of n)Array.isArray(t)?wC(t,e):t&&DC(t)?wC(t.\u0275providers,e):e(t)}function ci(n,e){let t;n instanceof of?(Jm(n),t=n):t=new vC(n);let r,i=bc(t),o=Po(void 0);try{return e()}finally{bc(i),Po(o)}}function qC(){return ER()!==void 0||T_()!=null}var Va=0,Ht=1,Jt=2,Ni=3,aa=4,ca=5,a0=6,lp=7,so=8,Ou=9,Cc=10,br=11,up=12,$C=13,af=14,la=15,Lu=16,cf=17,Ic=18,c0=19,HC=20,Al=21,x1=22,l0=23,Ns=24,lf=25,u0=26,Wi=27,RR=1;var Fu=7,d0=8,uf=9,Ro=10;function Sc(n){return Array.isArray(n)&&typeof n[RR]=="object"}function ja(n){return Array.isArray(n)&&n[RR]===!0}function WC(n){return(n.flags&4)!==0}function Nl(n){return n.componentOffset>-1}function dp(n){return(n.flags&1)===1}function Ac(n){return!!n.template}function fp(n){return(n[Jt]&512)!==0}function df(n){return(n[Jt]&256)===256}var GC="svg",OR="math";function ua(n){for(;Array.isArray(n);)n=n[Va];return n}function KC(n,e){return ua(e[n])}function da(n,e){return ua(e[n.index])}function E1(n,e){return n.data[e]}function YC(n,e){return n[e]}function ZC(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function fa(n,e){let t=e[n];return Sc(t)?t:t[Va]}function LR(n){return(n[Jt]&4)===4}function C1(n){return(n[Jt]&128)===128}function FR(n){return ja(n[Ni])}function f0(n,e){return e==null?null:n[e]}function QC(n){n[cf]=0}function XC(n){n[Jt]&1024||(n[Jt]|=1024,C1(n)&&hp(n))}function VR(n,e){for(;n>0;)e=e[af],n--;return e}function h0(n){return!!(n[Jt]&9216||n[Ns]?.dirty)}function I1(n){n[Cc].changeDetectionScheduler?.notify(8),n[Jt]&64&&(n[Jt]|=1024),h0(n)&&hp(n)}function hp(n){n[Cc].changeDetectionScheduler?.notify(0);let e=Mu(n);for(;e!==null&&!(e[Jt]&8192||(e[Jt]|=8192,!C1(e)));)e=Mu(e)}function JC(n,e){if(df(n))throw new ct(911,!1);n[Al]===null&&(n[Al]=[]),n[Al].push(e)}function jR(n,e){if(n[Al]===null)return;let t=n[Al].indexOf(e);t!==-1&&n[Al].splice(t,1)}function Mu(n){let e=n[Ni];return ja(e)?e[Ni]:e}function eI(n){return n[lp]??=[]}function tI(n){return n.cleanup??=[]}function BR(n,e,t,r){let i=eI(e);i.push(t),n.firstCreatePass&&tI(n).push(r,i.length-1)}var ln={lFrame:r3(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var bC=!1;function UR(){return ln.lFrame.elementDepthCount}function zR(){ln.lFrame.elementDepthCount++}function qR(){ln.lFrame.elementDepthCount--}function S1(){return ln.bindingsEnabled}function $R(){return ln.skipHydrationRootTNode!==null}function HR(n){return ln.skipHydrationRootTNode===n}function WR(){ln.skipHydrationRootTNode=null}function mn(){return ln.lFrame.lView}function Ei(){return ln.lFrame.tView}function pe(n){return ln.lFrame.contextLView=n,n[so]}function ge(n){return ln.lFrame.contextLView=null,n}function Pi(){let n=nI();for(;n!==null&&n.type===64;)n=n.parent;return n}function nI(){return ln.lFrame.currentTNode}function GR(){let n=ln.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function pp(n,e){let t=ln.lFrame;t.currentTNode=n,t.isParent=e}function rI(){return ln.lFrame.isParent}function KR(){ln.lFrame.isParent=!1}function YR(){return ln.lFrame.contextLView}function iI(){return bC}function oI(n){let e=bC;return bC=n,e}function A1(){let n=ln.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ZR(){return ln.lFrame.bindingIndex}function QR(n){return ln.lFrame.bindingIndex=n}function ff(){return ln.lFrame.bindingIndex++}function sI(n){let e=ln.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function XR(){return ln.lFrame.inI18n}function JR(n,e){let t=ln.lFrame;t.bindingIndex=t.bindingRootIndex=n,D1(e)}function e3(){return ln.lFrame.currentDirectiveIndex}function D1(n){ln.lFrame.currentDirectiveIndex=n}function t3(n){let e=ln.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function aI(){return ln.lFrame.currentQueryIndex}function T1(n){ln.lFrame.currentQueryIndex=n}function Rq(n){let e=n[Ht];return e.type===2?e.declTNode:e.type===1?n[ca]:null}function cI(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Rq(o),i===null||(o=o[af],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ln.lFrame=n3();return r.currentTNode=e,r.lView=n,!0}function M1(n){let e=n3(),t=n[Ht];ln.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function n3(){let n=ln.lFrame,e=n===null?null:n.child;return e===null?r3(n):e}function r3(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function i3(){let n=ln.lFrame;return ln.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var lI=i3;function N1(){let n=i3();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function o3(n){return(ln.lFrame.contextLView=VR(n,ln.lFrame.contextLView))[so]}function Vu(){return ln.lFrame.selectedIndex}function ju(n){ln.lFrame.selectedIndex=n}function p0(){let n=ln.lFrame;return E1(n.tView,n.selectedIndex)}function fr(){ln.lFrame.currentNamespace=GC}function Oo(){Oq()}function Oq(){ln.lFrame.currentNamespace=null}function s3(){return ln.lFrame.currentNamespace}var a3=!0;function P1(){return a3}function g0(n){a3=n}function xC(n,e=null,t=null,r){let i=uI(n,e,t,r);return i.resolveInjectorInitializers(),i}function uI(n,e=null,t=null,r,i=new Set){let o=[t||Ts,MR(n)];return r=r||(typeof n=="object"?void 0:Dl(n)),new of(o,e||s0(),r||null,i)}var $n=class n{static THROW_IF_NOT_FOUND=tf;static NULL=new t0;static create(e,t){if(Array.isArray(e))return xC({name:""},t,e,"");{let r=e.name??"";return xC({name:r},e.parent,e.providers,r)}}static \u0275prov=tt({token:n,providedIn:"any",factory:()=>ze(LC)});static __NG_ELEMENT_ID__=-1},li=new Ke(""),ha=(()=>{class n{static __NG_ELEMENT_ID__=Lq;static __NG_ENV_ID__=t=>t}return n})(),EC=class extends ha{_lView;constructor(e){super(),this._lView=e}get destroyed(){return df(this._lView)}onDestroy(e){let t=this._lView;return JC(t,e),()=>jR(t,e)}};function Lq(){return new EC(mn())}var Fa=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ts=new Ke("",{providedIn:"root",factory:()=>{let n=Se(qn),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Fa),e.handleError(t))}}}),c3={provide:Ru,useValue:()=>void Se(Fa),multi:!0};function dI(n){return typeof n=="function"&&n[ro]!==void 0}function pa(n,e){let[t,r,i]=YE(n,e?.equal),o=t,s=o[ro];return o.set=r,o.update=i,o.asReadonly=l3.bind(o),o}function l3(){let n=this[ro];if(n.readonlyFn===void 0){let e=()=>this();e[ro]=n,n.readonlyFn=e}return n.readonlyFn}function fI(n){return dI(n)&&typeof n.set=="function"}var k1=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Fq}return n})();function Fq(){return new k1(mn(),Pi())}var Tl=class{},R1=new Ke("",{providedIn:"root",factory:()=>!1});var hI=new Ke(""),pI=new Ke(""),Dc=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new $i(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Bt(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=tt({token:n,providedIn:"root",factory:()=>new n})}return n})(),gp=(()=>{class n{internalPendingTasks=Se(Dc);scheduler=Se(Tl);errorHandler=Se(ts);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=tt({token:n,providedIn:"root",factory:()=>new n})}return n})();function m0(...n){}var gI=(()=>{class n{static \u0275prov=tt({token:n,providedIn:"root",factory:()=>new CC})}return n})(),CC=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function bp(n){return{toString:n}.toString()}var O1="__parameters__";function qq(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function $q(n,e,t){return bp(()=>{let r=qq(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let p=c.hasOwnProperty(O1)?c[O1]:Object.defineProperty(c,O1,{value:[]})[O1];for(;p.length<=u;)p.push(null);return(p[u]=p[u]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Nr=CR($q("Optional"),8);function U3(n){let e=Ms.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Hq(n){return typeof n=="function"}var q1=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function z3(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Nc=(()=>{let n=()=>q3;return n.ngInherit=!0,n})();function q3(n){return n.type.prototype.ngOnChanges&&(n.setInput=Gq),Wq}function Wq(){let n=H3(this),e=n?.current;if(e){let t=n.previous;if(t===ku)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Gq(n,e,t,r,i){let o=this.declaredInputs[r],s=H3(n)||Kq(n,{previous:ku,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new q1(l&&l.currentValue,t,c===ku),z3(n,e,i,t)}var $3="__ngSimpleChanges__";function H3(n){return n[$3]||null}function Kq(n,e){return n[$3]=e}var u3=[];var or=function(n,e=null,t){for(let r=0;r<u3.length;r++){let i=u3[r];i(n,e,t)}};function Yq(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=q3(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function W3(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function j1(n,e,t){G3(n,e,3,t)}function B1(n,e,t,r){(n[Jt]&3)===t&&G3(n,e,t,r)}function mI(n,e){let t=n[Jt];(t&3)===e&&(t&=16383,t+=1,n[Jt]=t)}function G3(n,e,t,r){let i=r!==void 0?n[cf]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[cf]+=65536),(a<o||o==-1)&&(Zq(n,t,e,c),n[cf]=(n[cf]&4294901760)+c+2),c++}function d3(n,e){or(4,n,e);let t=hn(null);try{e.call(n)}finally{hn(t),or(5,n,e)}}function Zq(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Jt]>>14<n[cf]>>16&&(n[Jt]&3)===e&&(n[Jt]+=16384,d3(a,o)):d3(a,o)}var vp=-1,pf=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function Qq(n){return(n.flags&8)!==0}function Xq(n){return(n.flags&16)!==0}function Jq(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];e$(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function K3(n){return n===3||n===4||n===6}function e$(n){return n.charCodeAt(0)===64}function _0(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?f3(n,t,i,null,e[++r]):f3(n,t,i,null,null))}}return n}function f3(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Y3(n){return n!==vp}function $1(n){return n&32767}function t$(n){return n>>16}function H1(n,e){let t=t$(n),r=e;for(;t>0;)r=r[af],t--;return r}var SI=!0;function W1(n){let e=SI;return SI=n,e}var n$=256,Z3=n$-1,Q3=5,r$=0,Tc={};function i$(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(sf)&&(r=t[sf]),r==null&&(r=t[sf]=r$++);let i=r&Z3,o=1<<i;e.data[n+(i>>Q3)]|=o}function G1(n,e){let t=X3(n,e);if(t!==-1)return t;let r=e[Ht];r.firstCreatePass&&(n.injectorIndex=e.length,vI(r.data,n),vI(e,null),vI(r.blueprint,null));let i=ZI(n,e),o=n.injectorIndex;if(Y3(i)){let s=$1(i),a=H1(i,e),c=a[Ht].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function vI(n,e){n.push(0,0,0,0,0,0,0,0,e)}function X3(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ZI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=rO(i),r===null)return vp;if(t++,i=i[af],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return vp}function AI(n,e,t){i$(n,e,t)}function o$(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(K3(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function J3(n,e,t){if(t&8||n!==void 0)return n;_1(e,"NodeInjector")}function eO(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ou],o=Po(void 0);try{return i?i.get(e,r,t&8):RC(e,r,t&8)}finally{Po(o)}}return J3(r,e,t)}function tO(n,e,t,r=0,i){if(n!==null){if(e[Jt]&2048&&!(r&2)){let s=l$(n,e,t,r,Tc);if(s!==Tc)return s}let o=nO(n,e,t,r,Tc);if(o!==Tc)return o}return eO(e,t,r,i)}function nO(n,e,t,r,i){let o=a$(t);if(typeof o=="function"){if(!cI(e,n,r))return r&1?J3(i,t,r):eO(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))_1(t);else return s}finally{lI()}}else if(typeof o=="number"){let s=null,a=X3(n,e),c=vp,l=r&1?e[la][ca]:null;for((a===-1||r&4)&&(c=a===-1?ZI(n,e):e[a+8],c===vp||!p3(r,!1)?a=-1:(s=e[Ht],a=$1(c),e=H1(c,e)));a!==-1;){let u=e[Ht];if(h3(o,a,u.data)){let p=s$(a,e,t,s,r,l);if(p!==Tc)return p}c=e[a+8],c!==vp&&p3(r,e[Ht].data[a+8]===l)&&h3(o,a,e)?(s=u,a=$1(c),e=H1(c,e)):a=-1}}return i}function s$(n,e,t,r,i,o){let s=e[Ht],a=s.data[n+8],c=r==null?Nl(a)&&SI:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=U1(a,s,t,c,l);return u!==null?w0(e,s,u,a,i):Tc}function U1(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,p=r?a:a+u,m=i?a+u:l;for(let g=p;g<m;g++){let C=s[g];if(g<c&&t===C||g>=c&&C.type===t)return g}if(i){let g=s[c];if(g&&Ac(g)&&g.type===t)return c}return null}function w0(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof pf){let a=o;if(a.resolving){let g=wR(s[t]);throw kC(g)}let c=W1(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,p=a.injectImpl?Po(a.injectImpl):null,m=cI(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Yq(t,s[t],e)}finally{p!==null&&Po(p),W1(c),a.resolving=!1,lI()}}return o}function a$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(sf)?n[sf]:void 0;return typeof e=="number"?e>=0?e&Z3:c$:e}function h3(n,e,t){let r=1<<n;return!!(t[e+(n>>Q3)]&r)}function p3(n,e){return!(n&2)&&!(n&1&&e)}var hf=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return tO(this._tNode,this._lView,e,nf(r),t)}};function c$(){return new hf(Pi(),mn())}function ga(n){return bp(()=>{let e=n.prototype.constructor,t=e[e0]||DI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[e0]||DI(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function DI(n){return SC(n)?()=>{let e=DI(Hi(n));return e&&e()}:Tu(n)}function l$(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Jt]&2048&&!fp(s);){let a=nO(o,s,t,r|2,Tc);if(a!==Tc)return a;let c=o.parent;if(!c){let l=s[HC];if(l){let u=l.get(t,Tc,r);if(u!==Tc)return u}c=rO(s),s=s[af]}o=c}return i}function rO(n){let e=n[Ht],t=e.type;return t===2?e.declTNode:t===1?n[ca]:null}function S0(n){return o$(Pi(),n)}function u$(){return xp(Pi(),mn())}function xp(n,e){return new Gi(da(n,e))}var Gi=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=u$}return n})();function d$(n){return n instanceof Gi?n.nativeElement:n}function f$(){return this._results[Symbol.iterator]()}var K1=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ir}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=SR(e);(this._changesDetected=!IR(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=f$};function iO(n){return(n.flags&128)===128}var QI=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(QI||{}),oO=new Map,h$=0;function p$(){return h$++}function g$(n){oO.set(n[c0],n)}function TI(n){oO.delete(n[c0])}var g3="__ngContext__";function yp(n,e){Sc(e)?(n[g3]=e[c0],g$(e)):n[g3]=e}function sO(n){return cO(n[up])}function aO(n){return cO(n[aa])}function cO(n){for(;n!==null&&!ja(n);)n=n[aa];return n}var MI;function XI(n){MI=n}function lO(){if(MI!==void 0)return MI;if(typeof document<"u")return document;throw new ct(210,!1)}var sw=new Ke("",{providedIn:"root",factory:()=>m$}),m$="ng",aw=new Ke(""),ki=new Ke("",{providedIn:"platform",factory:()=>"unknown"});var cw=new Ke("",{providedIn:"root",factory:()=>lO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var v$="h",y$="b";var uO=!1,dO=new Ke("",{providedIn:"root",factory:()=>uO});var JI=new Ke("");var _$=(n,e,t,r)=>{};function w$(n,e,t,r){_$(n,e,t,r)}function eS(n){return(n.flags&32)===32}var b$=()=>null;function fO(n,e,t=!1){return b$(n,e,t)}function hO(n,e){let t=n.contentQueries;if(t!==null){let r=hn(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];T1(o),a.contentQueries(2,e[s],s)}}}finally{hn(r)}}}function NI(n,e,t){T1(0);let r=hn(null);try{e(n,t)}finally{hn(r)}}function tS(n,e,t){if(WC(e)){let r=hn(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{hn(r)}}}var Pl=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Pl||{});var L1;function x$(){if(L1===void 0&&(L1=null,Ms.trustedTypes))try{L1=Ms.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return L1}function m3(n){return x$()?.createScriptURL(n)||n}var Y1=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${v1})`}};function A0(n){return n instanceof Y1?n.changingThisBreaksApplicationSecurity:n}function nS(n,e){let t=pO(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${v1})`)}return t===e}function pO(n){return n instanceof Y1&&n.getTypeName()||null}var E$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function gO(n){return n=String(n),n.match(E$)?n:"unsafe:"+n}var C$=/^>|^->|<!--|-->|--!>|<!-$/g,I$=/(<|>)/g,S$="\u200B$1\u200B";function A$(n){return n.replace(C$,e=>e.replace(I$,S$))}function D$(n,e){return n.createText(e)}function T$(n,e,t){n.setValue(e,t)}function M$(n,e){return n.createComment(A$(e))}function mO(n,e,t){return n.createElement(e,t)}function Z1(n,e,t,r,i){n.insertBefore(e,t,r,i)}function vO(n,e,t){n.appendChild(e,t)}function v3(n,e,t,r,i){r!==null?Z1(n,e,t,r,i):vO(n,e,t)}function N$(n,e,t,r){n.removeChild(null,e,t,r)}function P$(n,e,t){n.setAttribute(e,"style",t)}function k$(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yO(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Jq(n,e,r),i!==null&&k$(n,e,i),o!==null&&P$(n,e,o)}var lw=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(lw||{});function xr(n){let e=wO();return e?e.sanitize(lw.URL,n)||"":nS(n,"URL")?A0(n):gO(Pu(n))}function _O(n){let e=wO();if(e)return m3(e.sanitize(lw.RESOURCE_URL,n)||"");if(nS(n,"ResourceURL"))return m3(A0(n));throw new ct(904,!1)}function R$(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?_O:xr}function rS(n,e,t){return R$(e,t)(n)}function wO(){let n=mn();return n&&n[Cc].sanitizer}function bO(n){return n instanceof Function?n():n}function O$(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var xO="ng-template";function L$(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&O$(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(iS(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function iS(n){return n.type===4&&n.value!==xO}function F$(n,e,t){let r=n.type===4&&!t?xO:n.value;return e===r}function V$(n,e,t){let r=4,i=n.attrs,o=i!==null?U$(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ba(r)&&!Ba(c))return!1;if(s&&Ba(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!F$(n,c,t)||c===""&&e.length===1){if(Ba(r))return!1;s=!0}}else if(r&8){if(i===null||!L$(n,i,c,t)){if(Ba(r))return!1;s=!0}}else{let l=e[++a],u=j$(c,i,iS(n),t);if(u===-1){if(Ba(r))return!1;s=!0;continue}if(l!==""){let p;if(u>o?p="":p=i[u+1].toLowerCase(),r&2&&l!==p){if(Ba(r))return!1;s=!0}}}}return Ba(r)||s}function Ba(n){return(n&1)===0}function j$(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return z$(e,n)}function B$(n,e,t=!1){for(let r=0;r<e.length;r++)if(V$(n,e[r],t))return!0;return!1}function U$(n){for(let e=0;e<n.length;e++){let t=n[e];if(K3(t))return e}return n.length}function z$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function y3(n,e){return n?":not("+e.trim()+")":e}function q$(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ba(s)&&(e+=y3(o,i),i=""),r=s,o=o||!Ba(r);t++}return i!==""&&(e+=y3(o,i)),e}function $$(n){return n.map(q$).join(",")}function H$(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Ba(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var ma={};function oS(n,e,t,r,i,o,s,a,c,l,u){let p=Wi+r,m=p+i,g=W$(p,m),C=typeof l=="function"?l():l;return g[Ht]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:C,incompleteFirstPass:!1,ssrId:u}}function W$(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ma);return t}function G$(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=oS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sS(n,e,t,r,i,o,s,a,c,l,u){let p=e.blueprint.slice();return p[Va]=i,p[Jt]=r|4|128|8|64|1024,(l!==null||n&&n[Jt]&2048)&&(p[Jt]|=2048),QC(p),p[Ni]=p[af]=n,p[so]=t,p[Cc]=s||n&&n[Cc],p[br]=a||n&&n[br],p[Ou]=c||n&&n[Ou]||null,p[ca]=o,p[c0]=p$(),p[a0]=u,p[HC]=l,p[la]=e.type==2?n[la]:p,p}function K$(n,e,t){let r=da(e,n),i=G$(t),o=n[Cc].rendererFactory,s=aS(n,sS(n,i,null,EO(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function EO(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function CO(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function aS(n,e){return n[up]?n[$C][aa]=e:n[up]=e,n[$C]=e,e}function X(n=1){IO(Ei(),mn(),Vu()+n,!1)}function IO(n,e,t,r){if(!r)if((e[Jt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&j1(e,o,t)}else{let o=n.preOrderHooks;o!==null&&B1(e,o,0,t)}ju(t)}var uw=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(uw||{});function PI(n,e,t,r){let i=hn(null);try{let[o,s,a]=n.inputs[t],c=null;(s&uw.SignalBased)!==0&&(c=e[o][ro]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):z3(e,c,o,r)}finally{hn(i)}}var Mc=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Mc||{}),Y$;function cS(n,e){return Y$(n,e)}var _p=new Set,dw=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(dw||{}),_f=new Ke(""),_3=new Set;function Ep(n){_3.has(n)||(_3.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var SO=!1,kI=class extends ir{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,qC()&&(this.destroyRef=Se(ha,{optional:!0})??void 0,this.pendingTasks=Se(Dc,{optional:!0})??void 0)}emit(e){let t=hn(null);try{super.next(e)}finally{hn(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof jr&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Kr=kI;function AO(n){let e,t;function r(){n=m0;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function w3(n){return queueMicrotask(()=>n()),()=>{n=m0}}var lS="isAngularZone",Q1=lS+"_ID",Z$=0,Ut=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Kr(!1);onMicrotaskEmpty=new Kr(!1);onStable=new Kr(!1);onError=new Kr(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=SO}=e;if(typeof Zone>"u")throw new ct(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,J$(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(lS)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ct(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ct(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Q$,m0,m0);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Q$={};function uS(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function X$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){AO(()=>{n.callbackScheduled=!1,RI(n),n.isCheckStableRunning=!0,uS(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),RI(n)}function J$(n){let e=()=>{X$(n)},t=Z$++;n._inner=n._inner.fork({name:"angular",properties:{[lS]:!0,[Q1]:t,[Q1+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(eH(c))return r.invokeTask(o,s,a,c);try{return b3(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),x3(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return b3(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!tH(c)&&e(),x3(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,RI(n),uS(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function RI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function b3(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function x3(n){n._nesting--,uS(n)}var b0=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Kr;onMicrotaskEmpty=new Kr;onStable=new Kr;onError=new Kr;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function eH(n){return DO(n,"__ignore_ng_zone__")}function tH(n){return DO(n,"__scheduler_tick__")}function DO(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function TO(n="zone.js",e){return n==="noop"?new b0:n==="zone.js"?new Ut(e):n}var dS=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=tt({token:n,providedIn:"root",factory:()=>new n})}return n})(),MO=[0,1,2,3],NO=(()=>{class n{ngZone=Se(Ut);scheduler=Se(Tl);errorHandler=Se(Fa,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Se(_f,{optional:!0})}execute(){let t=this.sequences.size>0;t&&or(16),this.executing=!0;for(let r of MO)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&or(17)}register(t){let{view:r}=t;r!==void 0?((r[lf]??=[]).push(t),hp(r),r[Jt]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(dw.AFTER_NEXT_RENDER,t):t()}static \u0275prov=tt({token:n,providedIn:"root",factory:()=>new n})}return n})(),X1=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[lf];e&&(this.view[lf]=e.filter(t=>t!==this))}};function D0(n,e){let t=e?.injector??Se($n);return Ep("NgAfterNextRender"),rH(n,t,e,!0)}function nH(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function rH(n,e,t,r){let i=e.get(dS);i.impl??=e.get(NO);let o=e.get(_f,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ha):null,a=e.get(k1,null,{optional:!0}),c=new X1(i.impl,nH(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var iH=new Ke("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function PO(n,e,t){let r=n.get(iH);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function oH(n,e){for(let[t,r]of e)PO(n,r.animateFns)}function E3(n,e,t,r){let i=n?.[u0]?.enter;e!==null&&i&&i.has(t.index)&&oH(r,i)}function mp(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;ja(i)?c=i:Sc(i)&&(l=!0,i=i[Va]);let u=ua(i);n===0&&r!==null?(E3(a,r,o,t),s==null?vO(e,r,u):Z1(e,r,u,s||null,!0)):n===1&&r!==null?(E3(a,r,o,t),Z1(e,r,u,s||null,!0)):n===2?C3(a,o,t,p=>{N$(e,u,l,p)}):n===3&&C3(a,o,t,()=>{e.destroyNode(u)}),c!=null&&yH(e,n,t,c,o,r,s)}}function sH(n,e){kO(n,e),e[Va]=null,e[ca]=null}function aH(n,e,t,r,i,o){r[Va]=i,r[ca]=e,fw(n,r,t,1,i,o)}function kO(n,e){e[Cc].changeDetectionScheduler?.notify(9),fw(n,e,e[br],2,null,null)}function cH(n){let e=n[up];if(!e)return yI(n[Ht],n);for(;e;){let t=null;if(Sc(e))t=e[up];else{let r=e[Ro];r&&(t=r)}if(!t){for(;e&&!e[aa]&&e!==n;)Sc(e)&&yI(e[Ht],e),e=e[Ni];e===null&&(e=n),Sc(e)&&yI(e[Ht],e),t=e&&e[aa]}e=t}}function fS(n,e){let t=n[uf],r=t.indexOf(e);t.splice(r,1)}function RO(n,e){if(df(e))return;let t=e[br];t.destroyNode&&fw(n,e,t,3,null,null),cH(e)}function yI(n,e){if(df(e))return;let t=hn(null);try{e[Jt]&=-129,e[Jt]|=256,e[Ns]&&Hm(e[Ns]),dH(n,e),uH(n,e),e[Ht].type===1&&e[br].destroy();let r=e[Lu];if(r!==null&&ja(e[Ni])){r!==e[Ni]&&fS(r,e);let i=e[Ic];i!==null&&i.detachView(n)}TI(e)}finally{hn(t)}}function C3(n,e,t,r){let i=n?.[u0];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&_p.add(n),PO(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),lH(n,r)}else n&&_p.delete(n),r(!1)},i)}function lH(n,e){let t=n[u0]?.running;if(t){t.then(()=>{n[u0].running=void 0,_p.delete(n),e(!0)});return}e(!1)}function uH(n,e){let t=n.cleanup,r=e[lp];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[lp]=null);let i=e[Al];if(i!==null){e[Al]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[l0];if(o!==null){e[l0]=null;for(let s of o)s.destroy()}}function dH(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof pf)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];or(4,a,c);try{c.call(a)}finally{or(5,a,c)}}else{or(4,i,o);try{o.call(i)}finally{or(5,i,o)}}}}}function fH(n,e,t){return hH(n,e.parent,t)}function hH(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Va];if(Nl(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Pl.None||i===Pl.Emulated)return null}return da(r,t)}function pH(n,e,t){return mH(n,e,t)}function gH(n,e,t){return n.type&40?da(n,t):null}var mH=gH,I3;function hS(n,e,t,r){let i=fH(n,r,e),o=e[br],s=r.parent||e[ca],a=pH(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)v3(o,i,t[c],a,!1);else v3(o,i,t,a,!1);I3!==void 0&&I3(o,r,e,t,i)}function v0(n,e){if(e!==null){let t=e.type;if(t&3)return da(e,n);if(t&4)return OI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return v0(n,r);{let i=n[e.index];return ja(i)?OI(-1,i):ua(i)}}else{if(t&128)return v0(n,e.next);if(t&32)return cS(e,n)()||ua(n[e.index]);{let r=OO(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Mu(n[la]);return v0(i,r)}else return v0(n,e.next)}}}return null}function OO(n,e){if(e!==null){let r=n[la][ca],i=e.projection;return r.projection[i]}return null}function OI(n,e){let t=Ro+n+1;if(t<e.length){let r=e[t],i=r[Ht].firstChild;if(i!==null)return v0(r,i)}return e[Fu]}function pS(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Ou];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&yp(ua(c),r),t.flags|=2),!eS(t))if(l&8)pS(n,e,t.child,r,i,o,!1),mp(e,n,a,i,c,t,o,r);else if(l&32){let u=cS(t,r),p;for(;p=u();)mp(e,n,a,i,p,t,o,r);mp(e,n,a,i,c,t,o,r)}else l&16?vH(n,e,r,t,i,o):mp(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function fw(n,e,t,r,i,o){pS(t,r,n.firstChild,e,i,o,!1)}function vH(n,e,t,r,i,o){let s=t[la],c=s[ca].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];mp(e,n,t[Ou],i,u,r,o,t)}else{let l=c,u=s[Ni];iO(r)&&(l.flags|=128),pS(n,e,l,u,i,o,!0)}}function yH(n,e,t,r,i,o,s){let a=r[Fu],c=ua(r);a!==c&&mp(e,n,t,o,a,i,s);for(let l=Ro;l<r.length;l++){let u=r[l];fw(u[Ht],u,n,e,o,a)}}function _H(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Mc.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Mc.Important),n.setStyle(t,r,i,o))}}function LO(n,e,t,r,i){let o=Vu(),s=r&2;try{ju(-1),s&&e.length>Wi&&IO(n,e,Wi,!1),or(s?2:0,i,t),t(r,i)}finally{ju(o),or(s?3:1,i,t)}}function hw(n,e,t){IH(n,e,t),(t.flags&64)===64&&SH(n,e,t)}function gS(n,e,t=da){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function wH(n,e,t,r){let o=r.get(dO,uO)||t===Pl.ShadowDom,s=n.selectRootElement(e,o);return bH(s),s}function bH(n){xH(n)}var xH=()=>null;function EH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function FO(n,e,t,r,i,o){let s=e[Ht];if(pw(n,s,e,t,r)){Nl(n)&&VO(e,n.index);return}n.type&3&&(t=EH(t)),CH(n,e,t,r,i,o)}function CH(n,e,t,r,i,o){if(n.type&3){let s=da(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function VO(n,e){let t=fa(e,n);t[Jt]&16||(t[Jt]|=64)}function IH(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Nl(t)&&K$(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||G1(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=w0(e,n,s,t);if(yp(c,e),o!==null&&TH(e,s-r,c,a,t,o),Ac(a)){let l=fa(t.index,e);l[so]=w0(e,n,s,t)}}}function SH(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=e3();try{ju(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];D1(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&AH(c,l)}}finally{ju(-1),D1(s)}}function AH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function mS(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];B$(e,o.selectors,!1)&&(r??=[],Ac(o)?r.unshift(o):r.push(o))}return r}function DH(n,e,t,r,i,o){let s=da(n,e);jO(e[br],s,o,n.value,t,r,i)}function jO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Pu(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function TH(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];PI(r,t,c,l)}}function BO(n,e,t,r,i){let o=Wi+t,s=e[Ht],a=i(s,e,n,r,t);e[o]=a,pp(n,!0);let c=n.type===2;return c?(yO(e[br],a,n),(UR()===0||dp(n))&&yp(a,e),zR()):yp(a,e),P1()&&(!c||!eS(n))&&hS(s,e,a,n),n}function UO(n){let e=n;return rI()?KR():(e=e.parent,pp(e,!1)),e}function MH(n,e){let t=n[Ou];if(!t)return;let r;try{r=t.get(ts,null)}catch{r=null}r?.(e)}function pw(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],p=e.data[l];PI(p,t[l],u,i),a=!0}if(o)for(let c of o){let l=t[c],u=e.data[c];PI(u,l,r,i),a=!0}return a}function NH(n,e){let t=fa(e,n),r=t[Ht];PH(r,t);let i=t[Va];i!==null&&t[a0]===null&&(t[a0]=fO(i,t[Ou])),or(18),vS(r,t,t[so]),or(19,t[so])}function PH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function vS(n,e,t){M1(e);try{let r=n.viewQuery;r!==null&&NI(1,r,t);let i=n.template;i!==null&&LO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ic]?.finishViewCreation(n),n.staticContentQueries&&hO(n,e),n.staticViewQueries&&NI(2,n.viewQuery,t);let o=n.components;o!==null&&kH(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Jt]&=-5,N1()}}function kH(n,e){for(let t=0;t<e.length;t++)NH(n,e[t])}function RH(n,e,t,r){let i=hn(null);try{let o=e.tView,a=n[Jt]&4096?4096:16,c=sS(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Lu]=l;let u=n[Ic];return u!==null&&(c[Ic]=u.createEmbeddedView(o)),vS(o,c,t),c}finally{hn(i)}}function S3(n,e){return!e||e.firstChild===null||iO(n)}function x0(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ua(o)),ja(o)&&zO(o,r);let s=t.type;if(s&8)x0(n,e,t.child,r);else if(s&32){let a=cS(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=OO(e,t);if(Array.isArray(a))r.push(...a);else{let c=Mu(e[la]);x0(c[Ht],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function zO(n,e){for(let t=Ro;t<n.length;t++){let r=n[t],i=r[Ht].firstChild;i!==null&&x0(r[Ht],r,i,e)}n[Fu]!==n[Va]&&e.push(n[Fu])}function qO(n){if(n[lf]!==null){for(let e of n[lf])e.impl.addSequence(e);n[lf].length=0}}var $O=[];function OH(n){return n[Ns]??LH(n)}function LH(n){let e=$O.pop()??Object.create(VH);return e.lView=n,e}function FH(n){n.lView[Ns]!==n&&(n.lView=null,$O.push(n))}var VH=Pt(Fe({},qh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{hp(n.lView)},consumerOnSignalRead(){this.lView[Ns]=this}});function jH(n){let e=n[Ns]??Object.create(BH);return e.lView=n,e}var BH=Pt(Fe({},qh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Mu(n.lView);for(;e&&!HO(e[Ht]);)e=Mu(e);e&&XC(e)},consumerOnSignalRead(){this.lView[Ns]=this}});function HO(n){return n.type!==2}function WO(n){if(n[l0]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[l0])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Jt]&8192)}}var UH=100;function GO(n,e=0){let r=n[Cc].rendererFactory,i=!1;i||r.begin?.();try{zH(n,e)}finally{i||r.end?.()}}function zH(n,e){let t=iI();try{oI(!0),LI(n,e);let r=0;for(;h0(n);){if(r===UH)throw new ct(103,!1);r++,LI(n,1)}}finally{oI(t)}}function qH(n,e,t,r){if(df(e))return;let i=e[Jt],o=!1,s=!1;M1(e);let a=!0,c=null,l=null;o||(HO(n)?(l=OH(e),c=Hh(l)):R_()===null?(a=!1,l=jH(e),c=Hh(l)):e[Ns]&&(Hm(e[Ns]),e[Ns]=null));try{QC(e),QR(n.bindingStartIndex),t!==null&&LO(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let g=n.preOrderCheckHooks;g!==null&&j1(e,g,null)}else{let g=n.preOrderHooks;g!==null&&B1(e,g,0,null),mI(e,0)}if(s||$H(e),WO(e),KO(e,0),n.contentQueries!==null&&hO(n,e),!o)if(u){let g=n.contentCheckHooks;g!==null&&j1(e,g)}else{let g=n.contentHooks;g!==null&&B1(e,g,1),mI(e,1)}WH(n,e);let p=n.components;p!==null&&ZO(e,p,0);let m=n.viewQuery;if(m!==null&&NI(2,m,r),!o)if(u){let g=n.viewCheckHooks;g!==null&&j1(e,g)}else{let g=n.viewHooks;g!==null&&B1(e,g,2),mI(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[x1]){for(let g of e[x1])g();e[x1]=null}o||(qO(e),e[Jt]&=-73)}catch(u){throw o||hp(e),u}finally{l!==null&&(qm(l,c),a&&FH(l)),N1()}}function KO(n,e){for(let t=sO(n);t!==null;t=aO(t))for(let r=Ro;r<t.length;r++){let i=t[r];YO(i,e)}}function $H(n){for(let e=sO(n);e!==null;e=aO(e)){if(!(e[Jt]&2))continue;let t=e[uf];for(let r=0;r<t.length;r++){let i=t[r];XC(i)}}}function HH(n,e,t){or(18);let r=fa(e,n);YO(r,t),or(19,r[so])}function YO(n,e){C1(n)&&LI(n,e)}function LI(n,e){let r=n[Ht],i=n[Jt],o=n[Ns],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&$m(o)),s||=!1,o&&(o.dirty=!1),n[Jt]&=-9217,s)qH(r,n,r.template,n[so]);else if(i&8192){let a=hn(null);try{WO(n),KO(n,1);let c=r.components;c!==null&&ZO(n,c,1),qO(n)}finally{hn(a)}}}function ZO(n,e,t){for(let r=0;r<e.length;r++)HH(n,e[r],t)}function WH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ju(~i);else{let o=i,s=t[++r],a=t[++r];JR(s,o);let c=e[o];or(24,c),a(2,c),or(25,c)}}}finally{ju(-1)}}function yS(n,e){let t=iI()?64:1088;for(n[Cc].changeDetectionScheduler?.notify(e);n;){n[Jt]|=t;let r=Mu(n);if(fp(n)&&!r)return n;n=r}return null}function QO(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function GH(n,e,t,r=!0){let i=e[Ht];if(KH(i,e,n,t),r){let s=OI(t,n),a=e[br],c=a.parentNode(n[Fu]);c!==null&&aH(i,n[ca],a,e,c,s)}let o=e[a0];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function FI(n,e){if(n.length<=Ro)return;let t=Ro+e,r=n[t];if(r){let i=r[Lu];i!==null&&i!==n&&fS(i,r),e>0&&(n[t-1][aa]=r[aa]);let o=i0(n,Ro+e);sH(r[Ht],r);let s=o[Ic];s!==null&&s.detachView(o[Ht]),r[Ni]=null,r[aa]=null,r[Jt]&=-129}return r}function KH(n,e,t,r){let i=Ro+r,o=t.length;r>0&&(t[i-1][aa]=e),r<o-Ro?(e[aa]=t[i],OC(t,Ro+r,e)):(t.push(e),e[aa]=null),e[Ni]=t;let s=e[Lu];s!==null&&t!==s&&XO(s,e);let a=e[Ic];a!==null&&a.insertView(n),I1(e),e[Jt]|=128}function XO(n,e){let t=n[uf],r=e[Ni];if(Sc(r))n[Jt]|=2;else{let i=r[Ni][la];e[la]!==i&&(n[Jt]|=2)}t===null?n[uf]=[e]:t.push(e)}var Bu=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Ht];return x0(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[so]}set context(e){this._lView[so]=e}get destroyed(){return df(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ni];if(ja(e)){let t=e[d0],r=t?t.indexOf(this):-1;r>-1&&(FI(e,r),i0(t,r))}this._attachedToViewContainer=!1}RO(this._lView[Ht],this._lView)}onDestroy(e){JC(this._lView,e)}markForCheck(){yS(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Jt]&=-129}reattach(){I1(this._lView),this._lView[Jt]|=128}detectChanges(){this._lView[Jt]|=1024,GO(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=fp(this._lView),t=this._lView[Lu];t!==null&&!e&&fS(t,this._lView),kO(this._lView[Ht],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ct(902,!1);this._appRef=e;let t=fp(this._lView),r=this._lView[Lu];r!==null&&!t&&XO(r,this._lView),I1(this._lView)}};var Uu=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=YH;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=RH(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Bu(o)}}return n})();function YH(){return gw(Pi(),mn())}function gw(n,e){return n.type&4?new Uu(e,n,xp(n,e)):null}function _S(n,e,t,r,i){let o=n.data[e];if(o===null)o=ZH(n,e,t,r,i),XR()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=GR();o.injectorIndex=s===null?-1:s.injectorIndex}return pp(o,!0),o}function ZH(n,e,t,r,i){let o=nI(),s=rI(),a=s?o:o&&o.parent,c=n.data[e]=XH(n,a,t,e,r,i);return QH(n,c,o,s),c}function QH(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function XH(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return $R()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Wve=new RegExp(`^(\\d+)*(${y$}|${v$})*(.*)`);var JH=()=>null;function A3(n,e){return JH(n,e)}var JO=class{},mw=class{},VI=class{resolveComponentFactory(e){throw new ct(917,!1)}},T0=class{static NULL=new VI},gf=class{},Ps=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>eW()}return n})();function eW(){let n=mn(),e=Pi(),t=fa(e.index,n);return(Sc(t)?t:n)[br]}var e4=(()=>{class n{static \u0275prov=tt({token:n,providedIn:"root",factory:()=>null})}return n})();var z1={},jI=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,z1,r);return i!==z1||t===z1?i:this.parentInjector.get(e,t,r)}};function D3(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=IC(i,a);else if(o==2){let c=a,l=e[++s];r=IC(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function it(n,e=0){let t=mn();if(t===null)return ze(n,e);let r=Pi();return tO(r,t,Hi(n),e)}function wS(){let n="invalid";throw new Error(n)}function t4(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}rW(n,e,t,a,o,c,l)}o!==null&&r!==null&&tW(t,r,o)}function tW(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ct(-301,!1);r.push(e[i],o)}}function nW(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function rW(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let m=0;m<a;m++){let g=r[m];!c&&Ac(g)&&(c=!0,nW(n,t,m)),AI(G1(t,e),n,g.type)}lW(t,n.data.length,a);for(let m=0;m<a;m++){let g=r[m];g.providersResolver&&g.providersResolver(g)}let l=!1,u=!1,p=CO(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let g=r[m];if(t.mergedAttrs=_0(t.mergedAttrs,g.hostAttrs),oW(n,t,e,p,g),cW(p,g,i),s!==null&&s.has(g)){let[I,N]=s.get(g);t.directiveToIndex.set(g.type,[p,I+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,p);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let C=g.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),p++}iW(n,t,o)}function iW(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))T3(0,e,i,r),T3(1,e,i,r),N3(e,r,!1);else{let o=t.get(i);M3(0,e,o,r),M3(1,e,o,r),N3(e,r,!0)}}}function T3(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),n4(e,o)}}function M3(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),n4(e,s)}}function n4(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function N3(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||iS(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function oW(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Tu(i.type,!0)),s=new pf(o,Ac(i),it,null);n.blueprint[r]=s,t[r]=s,sW(n,e,r,CO(n,t,i.hostVars,ma),i)}function sW(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;aW(s)!=a&&s.push(a),s.push(t,r,o)}}function aW(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function cW(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ac(e)&&(t[""]=n)}}function lW(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function bS(n,e,t,r,i,o,s,a){let c=e[Ht],l=c.consts,u=f0(l,s),p=_S(c,n,t,r,u);return o&&t4(c,e,p,f0(l,a),i),p.mergedAttrs=_0(p.mergedAttrs,p.attrs),p.attrs!==null&&D3(p,p.attrs,!1),p.mergedAttrs!==null&&D3(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function xS(n,e){W3(n,e),WC(e)&&n.queries.elementEnd(e)}function ES(n){return i4(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function r4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function i4(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function CS(n,e,t){return n[e]=t}function Ua(n,e,t){if(t===ma)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function IS(n,e,t,r){let i=Ua(n,e,t);return Ua(n,e+1,r)||i}function uW(n,e,t,r,i){let o=IS(n,e,t,r);return Ua(n,e+2,i)||o}function _I(n,e,t){return function r(i){let o=Nl(n)?fa(n.index,e):e;yS(o,5);let s=e[so],a=P3(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=P3(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function P3(n,e,t,r){let i=hn(null);try{return or(6,e,t),t(r)!==!1}catch(o){return MH(n,o),!1}finally{or(7,e,t),hn(i)}}function dW(n,e,t,r,i,o,s,a){let c=dp(n),l=!1,u=null;if(!r&&c&&(u=hW(e,t,o,n.index)),u!==null){let p=u.__ngLastListenerFn__||u;p.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let p=da(n,t),m=r?r(p):p;w$(t,m,o,a);let g=i.listen(m,o,a);if(!fW(o)){let C=r?I=>r(ua(I[n.index])):n.index;o4(C,e,t,o,a,g,!1)}}return l}function fW(n){return n.startsWith("animation")||n.startsWith("transition")}function hW(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[lp],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function o4(n,e,t,r,i,o,s){let a=e.firstCreatePass?tI(e):null,c=eI(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function k3(n,e,t,r,i,o){let s=e[t],a=e[Ht],l=a.data[t].outputs[r],p=s[l].subscribe(o);o4(n.index,a,e,i,o,p,!0)}var BI=Symbol("BINDING");var J1=class extends T0{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ml(e);return new mf(t,this.ngModule)}};function pW(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&uw.SignalBased)!==0};return i&&(o.transform=i),o})}function gW(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function mW(n,e,t){let r=e instanceof qn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new jI(t,r):t}function vW(n){let e=n.get(gf,null);if(e===null)throw new ct(407,!1);let t=n.get(e4,null),r=n.get(Tl,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function yW(n,e){let t=s4(n);return mO(e,t,t==="svg"?GC:t==="math"?OR:null)}function s4(n){return(n.selectors[0][0]||"div").toLowerCase()}var mf=class extends mw{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=pW(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=gW(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=$$(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){or(22);let a=hn(null);try{let c=this.componentDef,l=_W(r,c,s,o),u=mW(c,i||this.ngModule,e),p=vW(u),m=p.rendererFactory.createRenderer(null,c),g=r?wH(m,r,c.encapsulation,u):yW(c,m),C=s?.some(R3)||o?.some(P=>typeof P!="function"&&P.bindings.some(R3)),I=sS(null,l,null,512|EO(c),null,null,p,m,u,null,fO(g,u,!0));I[Wi]=g,M1(I);let N=null;try{let P=bS(Wi,I,2,"#host",()=>l.directiveRegistry,!0,0);yO(m,g,P),yp(g,I),hw(l,I,P),tS(l,P,I),xS(l,P),t!==void 0&&bW(P,this.ngContentSelectors,t),N=fa(P.index,I),I[so]=N[so],vS(l,I,null)}catch(P){throw N!==null&&TI(N),TI(I),P}finally{or(23),N1()}return new ew(this.componentType,I,!!C)}finally{hn(a)}}};function _W(n,e,t,r){let i=n?["ng-version","20.3.15"]:H$(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[BI].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let p=r[u];if(typeof p!="function")for(let m of p.bindings){a+=m[BI].requiredVars;let g=u+1;m.create&&(m.targetIdx=g,(o??=[]).push(m)),m.update&&(m.targetIdx=g,(s??=[]).push(m))}}let c=[e];if(r)for(let u of r){let p=typeof u=="function"?u:u.type,m=jC(p);c.push(m)}return oS(0,null,wW(o,s),1,a,c,null,null,null,[i],null)}function wW(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function R3(n){let e=n[BI].kind;return e==="input"||e==="twoWay"}var ew=class extends JO{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=E1(t[Ht],Wi),this.location=xp(this._tNode,t),this.instance=fa(this._tNode.index,t)[so],this.hostView=this.changeDetectorRef=new Bu(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=pw(r,i[Ht],i,e,t);this.previousInputValues.set(e,t);let s=fa(r.index,i);yS(s,1)}get injector(){return new hf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function bW(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var kl=(()=>{class n{static __NG_ELEMENT_ID__=xW}return n})();function xW(){let n=Pi();return c4(n,mn())}var EW=kl,a4=class extends EW{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return xp(this._hostTNode,this._hostLView)}get injector(){return new hf(this._hostTNode,this._hostLView)}get parentInjector(){let e=ZI(this._hostTNode,this._hostLView);if(Y3(e)){let t=H1(e,this._hostLView),r=$1(e),i=t[Ht].data[r+8];return new hf(i,t)}else return new hf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=O3(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ro}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=A3(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,S3(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!Hq(e),l;if(c)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let u=c?e:new mf(Ml(e)),p=r||this.parentInjector;if(!o&&u.ngModule==null){let P=(c?p:this.parentInjector).get(qn,null);P&&(o=P)}let m=Ml(u.componentType??{}),g=A3(this._lContainer,m?.id??null),C=g?.firstChild??null,I=u.create(p,i,C,o,s,a);return this.insertImpl(I.hostView,l,S3(this._hostTNode,g)),I}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(FR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ni],l=new a4(c,c[ca],c[Ni]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return GH(s,i,o,r),e.attachToViewContainerRef(),OC(wI(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=O3(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=FI(this._lContainer,t);r&&(i0(wI(this._lContainer),t),RO(r[Ht],r))}detach(e){let t=this._adjustIndex(e,-1),r=FI(this._lContainer,t);return r&&i0(wI(this._lContainer),t)!=null?new Bu(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function O3(n){return n[d0]}function wI(n){return n[d0]||(n[d0]=[])}function c4(n,e){let t,r=e[n.index];return ja(r)?t=r:(t=QO(r,e,null,n),e[n.index]=t,aS(e,t)),IW(t,e,n,r),new a4(t,n,e)}function CW(n,e){let t=n[br],r=t.createComment(""),i=da(e,n),o=t.parentNode(i);return Z1(t,o,r,t.nextSibling(i),!1),r}var IW=DW,SW=()=>!1;function AW(n,e,t){return SW(n,e,t)}function DW(n,e,t,r){if(n[Fu])return;let i;t.type&8?i=ua(r):i=CW(e,t),n[Fu]=i}var UI=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},zI=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)SS(e,t).matches!==null&&this.queries[t].setDirty()}},tw=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=LW(e):this.predicate=e}},qI=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},$I=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,TW(t,o)),this.matchTNodeWithReadOption(e,t,U1(t,e,o,!1,!1))}else r===Uu?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,U1(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Gi||i===kl||i===Uu&&t.type&4)this.addMatch(t.index,-2);else{let o=U1(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function TW(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function MW(n,e){return n.type&11?xp(n,e):n.type&4?gw(n,e):null}function NW(n,e,t,r){return t===-1?MW(e,n):t===-2?PW(n,e,r):w0(n,n[Ht],t,e)}function PW(n,e,t){if(t===Gi)return xp(e,n);if(t===Uu)return gw(e,n);if(t===kl)return c4(e,n)}function l4(n,e,t,r){let i=e[Ic].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(NW(e,u,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function HI(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=l4(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let p=Ro;p<u.length;p++){let m=u[p];m[Lu]===m[Ni]&&HI(m[Ht],m,l,r)}if(u[uf]!==null){let p=u[uf];for(let m=0;m<p.length;m++){let g=p[m];HI(g[Ht],g,l,r)}}}}}return r}function kW(n,e){return n[Ic].queries[e].queryList}function u4(n,e,t){let r=new K1((t&4)===4);return BR(n,e,r,r.destroy),(e[Ic]??=new zI).queries.push(new UI(r))-1}function RW(n,e,t){let r=Ei();return r.firstCreatePass&&(d4(r,new tw(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),u4(r,mn(),e)}function OW(n,e,t,r){let i=Ei();if(i.firstCreatePass){let o=Pi();d4(i,new tw(e,t,r),o.index),FW(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return u4(i,mn(),t)}function LW(n){return n.split(",").map(e=>e.trim())}function d4(n,e,t){n.queries===null&&(n.queries=new qI),n.queries.track(new $I(e,t))}function FW(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function SS(n,e){return n.queries.getByIndex(e)}function VW(n,e){let t=n[Ht],r=SS(t,e);return r.crossesNgTemplate?HI(t,n,e,[]):l4(t,n,r,e)}function f4(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(a=>BW(i,a)))}return o}return nw.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(g=>{a[l+m]=g,u.splice(u.indexOf(p),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>UW(o));e.push(c)}),h4(),Promise.all(e).then(()=>{})}var nw=new Map,jW=new Set;function h4(){let n=nw;return nw=new Map,n}function p4(){return nw.size===0}function BW(n,e){return typeof e=="string"?e:e.status!==void 0&&e.status!==200?Promise.reject(new ct(918,!1)):e.text()}function UW(n){jW.delete(n)}var vf=class{},vw=class{};var E0=class extends vf{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new J1(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=VC(e);this._bootstrapComponents=bO(o.bootstrap),this._r3Injector=uI(e,t,[{provide:vf,useValue:this},{provide:T0,useValue:this.componentFactoryResolver},...r],Dl(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},C0=class extends vw{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new E0(this.moduleType,e,[])}};function g4(n,e,t){return new E0(n,e,t,!1)}var rw=class extends vf{injector;componentFactoryResolver=new J1(this);instance=null;constructor(e){super();let t=new of([...e.providers,{provide:vf,useValue:this},{provide:T0,useValue:this.componentFactoryResolver}],e.parent||s0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cp(n,e,t=null){return new rw({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var zW=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=BC(!1,t.type),i=r.length>0?Cp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=tt({token:n,providedIn:"environment",factory:()=>new n(ze(qn))})}return n})();function Pr(n){return bp(()=>{let e=m4(n),t=Pt(Fe({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===QI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(zW).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pl.Emulated,styles:n.styles||Ts,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ep("NgStandalone"),v4(t);let r=n.dependencies;return t.directiveDefs=L3(r,qW),t.pipeDefs=L3(r,TR),t.id=WW(t),t})}function qW(n){return Ml(n)||jC(n)}function yr(n){return bp(()=>({type:n.type,bootstrap:n.bootstrap||Ts,declarations:n.declarations||Ts,imports:n.imports||Ts,exports:n.exports||Ts,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $W(n,e){if(n==null)return ku;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=uw.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function HW(n){if(n==null)return ku;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Hn(n){return bp(()=>{let e=m4(n);return v4(e),e})}function yw(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function m4(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ku,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ts,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:$W(n.inputs,e),outputs:HW(n.outputs),debugInfo:null}}function v4(n){n.features?.forEach(e=>e(n))}function L3(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function WW(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function GW(n){return Object.getPrototypeOf(n.prototype).constructor}function ao(n){let e=GW(n.type),t=!0,r=[n];for(;e;){let i;if(Ac(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ct(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=bI(n.inputs),s.declaredInputs=bI(n.declaredInputs),s.outputs=bI(n.outputs);let a=i.hostBindings;a&&XW(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&ZW(n,c),l&&QW(n,l),KW(n,i),_R(n.outputs,i.outputs),Ac(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ao&&(t=!1)}}e=Object.getPrototypeOf(e)}YW(r)}function KW(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function YW(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_0(i.hostAttrs,t=_0(t,i.hostAttrs))}}function bI(n){return n===ku?{}:n===Ts?[]:n}function ZW(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function QW(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function XW(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function JW(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=_0(n.mergedAttrs,n.attrs);let u=n.tView=oS(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),pp(n,!1);let c=tG(t,e,n,r);P1()&&hS(t,e,c,n),yp(c,e);let l=QO(c,e,c,n);e[r+Wi]=l,aS(e,l),AW(l,n,e)}function eG(n,e,t,r,i,o,s,a,c,l,u){let p=t+Wi,m;return e.firstCreatePass?(m=_S(e,p,4,s||null,a||null),S1()&&t4(e,n,m,f0(e.consts,l),mS),W3(e,m)):m=e.data[p],JW(m,n,e,t,r,i,o,c),dp(m)&&hw(e,n,m),l!=null&&gS(n,m,u),m}function ut(n,e,t,r,i,o,s,a){let c=mn(),l=Ei(),u=f0(l.consts,o);return eG(c,l,n,e,t,r,i,u,void 0,s,a),ut}var tG=nG;function nG(n,e,t,r){return g0(!0),e[br].createComment("")}var AS=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var _w=new Ke(""),Ip=new Ke(""),M0=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,qC()&&(this._destroyRef=Se(ha,{optional:!0})??void 0),DS||(y4(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(ze(Ut),ze(N0),ze(Ip))};static \u0275prov=tt({token:n,factory:n.\u0275fac})}return n})(),N0=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return DS?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function y4(n){DS=n}var DS;function zu(n){return!!n&&typeof n.then=="function"}function TS(n){return!!n&&typeof n.subscribe=="function"}var MS=new Ke("");function ww(n){return es([{provide:MS,multi:!0,useValue:n}])}var NS=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Se(MS,{optional:!0})??[];injector=Se($n);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ci(this.injector,i);if(zu(o))t.push(o);else if(TS(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bw=new Ke("");function _4(){KE(()=>{let n="";throw new ct(600,n)})}function w4(n){return n.isBoundToModule}var rG=10;function PS(n,e){return Array.isArray(e)?e.reduce(PS,n):Fe(Fe({},n),e)}var za=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Se(ts);afterRenderManager=Se(dS);zonelessEnabled=Se(R1);rootEffectScheduler=Se(gI);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ir;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Se(Dc);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(gt(t=>!t))}constructor(){Se(_f,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Se(qn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=$n.NULL){return this._injector.get(Ut).run(()=>{or(10);let s=t instanceof mw;if(!this._injector.get(NS).done){let C="";throw new ct(405,C)}let c;s?c=t:c=this._injector.get(T0).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=w4(c)?void 0:this._injector.get(vf),u=r||c.selector,p=c.create(i,[],u,l),m=p.location.nativeElement,g=p.injector.get(_w,null);return g?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),y0(this.components,p),g?.unregisterApplication(m)}),this._loadComponent(p),or(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){or(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(dw.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ct(101,!1);let t=hn(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,hn(t),this.afterTick.next(),or(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(gf,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<rG;)or(14),this.synchronizeOnce(),or(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!h0(i))continue;let o=r&&!this.zonelessEnabled?0:1;GO(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>h0(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;y0(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(bw,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>y0(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ct(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function qa(n,e){let t=mn(),r=ff();if(Ua(t,r,e)){let i=Ei(),o=p0();if(pw(o,i,t,n,e))Nl(o)&&VO(t,o.index);else{let a=da(o,t);jO(t[br],a,null,o.value,n,e,null)}}return qa}function wf(n,e,t,r){let i=mn(),o=ff();if(Ua(i,o,e)){let s=Ei(),a=p0();DH(a,i,n,e,t,r)}return wf}var Jve=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function _e(n,e,t){let r=mn(),i=ff();if(Ua(r,i,e)){let o=Ei(),s=p0();FO(s,r,n,e,r[br],t)}return _e}function F3(n,e,t,r,i){pw(e,n,t,i?"class":"style",r)}function x(n,e,t,r){let i=mn(),o=i[Ht],s=n+Wi,a=o.firstCreatePass?bS(s,i,2,e,mS,S1(),t,r):o.data[s];if(BO(a,i,n,e,iG),dp(a)){let c=i[Ht];hw(c,i,a),tS(c,a,i)}return r!=null&&gS(i,a),x}function D(){let n=Ei(),e=Pi(),t=UO(e);return n.firstCreatePass&&xS(n,t),HR(t)&&WR(),qR(),t.classesWithoutHost!=null&&Qq(t)&&F3(n,t,mn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Xq(t)&&F3(n,t,mn(),t.stylesWithoutHost,!1),D}function bt(n,e,t,r){return x(n,e,t,r),D(),bt}var iG=(n,e,t,r,i)=>(g0(!0),mO(e[br],r,s3()));function co(n,e,t){let r=mn(),i=r[Ht],o=n+Wi,s=i.firstCreatePass?bS(o,r,8,"ng-container",mS,S1(),e,t):i.data[o];if(BO(s,r,n,"ng-container",oG),dp(s)){let a=r[Ht];hw(a,r,s),tS(a,s,r)}return t!=null&&gS(r,s),co}function lo(){let n=Ei(),e=Pi(),t=UO(e);return n.firstCreatePass&&xS(n,t),lo}var oG=(n,e,t,r,i)=>(g0(!0),M$(e[br],""));function Vt(){return mn()}var P0="en-US";var sG=P0;function b4(n){typeof n=="string"&&(sG=n.toLowerCase().replace(/_/g,"-"))}function Me(n,e,t){let r=mn(),i=Ei(),o=Pi();return x4(i,r,r[br],o,n,e,t),Me}function x4(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=_I(r,e,o),dW(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let p=0;p<u.length;p+=2){let m=u[p],g=u[p+1];c??=_I(r,e,o),k3(r,e,m,g,i,c)}if(l&&l.length)for(let p of l)c??=_I(r,e,o),k3(r,e,p,i,i,c)}}function ie(n=1){return o3(n)}function kS(n,e,t,r){OW(n,e,t,r)}function RS(n,e,t){RW(n,e,t)}function k0(n){let e=mn(),t=Ei(),r=aI();T1(r+1);let i=SS(t,r);if(n.dirty&&LR(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=VW(e,r);n.reset(o,d$),n.notifyOnChanges()}return!0}return!1}function R0(){return kW(mn(),aI())}function Ci(n){let e=YR();return YC(e,Wi+n)}function F1(n,e){return n<<17|e<<2}function yf(n){return n>>17&32767}function aG(n){return(n&2)==2}function cG(n,e){return n&131071|e<<17}function WI(n){return n|2}function wp(n){return(n&131068)>>2}function xI(n,e){return n&-131069|e<<2}function lG(n){return(n&1)===1}function GI(n){return n|1}function uG(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=yf(s),c=wp(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let p=t;u=p[1],(u===null||cp(p,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let m=yf(n[a+1]);n[r+1]=F1(m,a),m!==0&&(n[m+1]=xI(n[m+1],r)),n[a+1]=cG(n[a+1],r)}else n[r+1]=F1(a,0),a!==0&&(n[a+1]=xI(n[a+1],r)),a=r;else n[r+1]=F1(c,0),a===0?a=r:n[c+1]=xI(n[c+1],r),c=r;l&&(n[r+1]=WI(n[r+1])),V3(n,u,r,!0),V3(n,u,r,!1),dG(e,u,n,r,o),s=F1(a,c),o?e.classBindings=s:e.styleBindings=s}function dG(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&cp(o,e)>=0&&(t[r+1]=GI(t[r+1]))}function V3(n,e,t,r){let i=n[t+1],o=e===null,s=r?yf(i):wp(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];fG(c,e)&&(a=!0,n[s+1]=r?GI(l):WI(l)),s=r?yf(l):wp(l)}a&&(n[t+1]=r?WI(i):GI(i))}function fG(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?cp(n,e)>=0:!1}function va(n,e){return hG(n,e,null,!0),va}function hG(n,e,t,r){let i=mn(),o=Ei(),s=sI(2);if(o.firstUpdatePass&&gG(o,n,s,r),e!==ma&&Ua(i,s,e)){let a=o.data[Vu()];wG(o,a,i,i[br],n,i[s+1]=bG(e,t),r,s)}}function pG(n,e){return e>=n.expandoStartIndex}function gG(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Vu()],s=pG(n,t);xG(o,r)&&e===null&&!s&&(e=!1),e=mG(i,o,e,r),uG(i,o,e,t,s,r)}}function mG(n,e,t,r){let i=t3(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=EI(null,n,e,t,r),t=I0(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=EI(i,n,e,t,r),o===null){let c=vG(n,e,r);c!==void 0&&Array.isArray(c)&&(c=EI(null,n,e,c[1],r),c=I0(c,e.attrs,r),yG(n,e,r,c))}else o=_G(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function vG(n,e,t){let r=t?e.classBindings:e.styleBindings;if(wp(r)!==0)return n[yf(r)]}function yG(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[yf(i)]=r}function _G(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=I0(r,s,t)}return I0(r,e.attrs,t)}function EI(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=I0(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function I0(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),DR(n,s,t?!0:e[++o]))}return n===void 0?null:n}function wG(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=lG(l)?j3(c,e,t,i,wp(l),s):void 0;if(!iw(u)){iw(o)||aG(l)&&(o=j3(c,null,t,i,a,s));let p=KC(Vu(),t);_H(r,s,p,i,o)}}function j3(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,p=u===null,m=t[i+1];m===ma&&(m=p?Ts:void 0);let g=p?b1(m,r):u===r?m:void 0;if(l&&!iw(g)&&(g=b1(c,r)),iw(g)&&(a=g,s))return a;let C=n[i+1];i=s?yf(C):wp(C)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=b1(c,r))}return a}function iw(n){return n!==void 0}function bG(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Dl(A0(n)))),n}function xG(n,e){return(n.flags&(e?8:16))!==0}function q(n,e=""){let t=mn(),r=Ei(),i=n+Wi,o=r.firstCreatePass?_S(r,i,1,e,null):r.data[i],s=EG(r,t,o,e,n);t[i]=s,P1()&&hS(r,t,s,o),pp(o,!1)}var EG=(n,e,t,r,i)=>(g0(!0),D$(e[br],r));function E4(n,e,t,r=""){return Ua(n,ff(),t)?e+Pu(t)+r:ma}function CG(n,e,t,r,i,o=""){let s=ZR(),a=IS(n,s,t,i);return sI(2),a?e+Pu(t)+r+Pu(i)+o:ma}function Kt(n){return Yr("",n),Kt}function Yr(n,e,t){let r=mn(),i=E4(r,n,e,t);return i!==ma&&C4(r,Vu(),i),Yr}function xw(n,e,t,r,i){let o=mn(),s=CG(o,n,e,t,r,i);return s!==ma&&C4(o,Vu(),s),xw}function C4(n,e,t){let r=KC(e,n);T$(n[br],r,t)}function Qe(n,e,t){fI(e)&&(e=e());let r=mn(),i=ff();if(Ua(r,i,e)){let o=Ei(),s=p0();FO(s,r,n,e,r[br],t)}return Qe}function Je(n,e){let t=fI(n);return t&&n.set(e),t}function Xe(n,e){let t=mn(),r=Ei(),i=Pi();return x4(r,t,t[br],i,n,e),Xe}function O0(n){return Ua(mn(),ff(),n)?Pu(n):ma}function Pc(n,e,t=""){return E4(mn(),n,e,t)}function IG(n,e,t){let r=Ei();if(r.firstCreatePass){let i=Ac(n);KI(t,r.data,r.blueprint,i,!0),KI(e,r.data,r.blueprint,i,!1)}}function KI(n,e,t,r,i){if(n=Hi(n),Array.isArray(n))for(let o=0;o<n.length;o++)KI(n[o],e,t,r,i);else{let o=Ei(),s=mn(),a=Pi(),c=rf(n)?n:Hi(n.provide),l=zC(n),u=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(rf(n)||!n.multi){let g=new pf(l,i,it,null),C=II(c,e,i?u:u+m,p);C===-1?(AI(G1(a,s),o,c),CI(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[C]=g,s[C]=g)}else{let g=II(c,e,u+m,p),C=II(c,e,u,u+m),I=g>=0&&t[g],N=C>=0&&t[C];if(i&&!N||!i&&!I){AI(G1(a,s),o,c);let P=DG(i?AG:SG,t.length,i,r,l,n);!i&&N&&(t[C].providerFactory=P),CI(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),s.push(P)}else{let P=I4(t[i?C:g],l,!i&&r);CI(o,n,g>-1?g:C,P)}!i&&r&&N&&t[C].componentProviders++}}}function CI(n,e,t,r){let i=rf(e),o=kR(e);if(i||o){let c=(o?Hi(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function I4(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function II(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function SG(n,e,t,r,i){return YI(this.multi,[])}function AG(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=w0(r,r[Ht],this.providerFactory.index,i);s=c.slice(0,a),YI(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],YI(o,s);return s}function YI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function DG(n,e,t,r,i,o){let s=new pf(n,t,it,null);return s.multi=[],s.index=e,s.componentProviders=0,I4(s,i,r&&!t),s}function ya(n,e=[]){return t=>{t.providersResolver=(r,i)=>IG(r,i?i(n):n,e)}}function kc(n,e,t,r){return TG(mn(),A1(),n,e,t,r)}function L0(n,e,t,r,i){return MG(mn(),A1(),n,e,t,r,i)}function OS(n,e){let t=n[e];return t===ma?void 0:t}function TG(n,e,t,r,i,o){let s=e+t;return Ua(n,s,i)?CS(n,s+1,o?r.call(o,i):r(i)):OS(n,s+1)}function MG(n,e,t,r,i,o,s){let a=e+t;return IS(n,a,i,o)?CS(n,a+2,s?r.call(s,i,o):r(i,o)):OS(n,a+2)}function NG(n,e,t,r,i,o,s,a){let c=e+t;return uW(n,c,i,o,s)?CS(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):OS(n,c+3)}function F0(n,e){let t=Ei(),r,i=n+Wi;t.firstCreatePass?(r=PG(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Tu(r.type,!0)),s,a=Po(it);try{let c=W1(!1),l=o();return W1(c),ZC(t,mn(),i,l),l}finally{Po(a)}}function PG(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function V0(n,e,t,r,i){let o=n+Wi,s=mn(),a=YC(s,o);return kG(s,o)?NG(s,A1(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function kG(n,e){return n[Ht].data[e].pure}function ns(n,e){return gw(n,e)}var V1=null;function S4(n){V1!==null&&(n.defaultEncapsulation!==V1.defaultEncapsulation||n.preserveWhitespaces!==V1.preserveWhitespaces)||(V1=n)}var ow=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},LS=(()=>{class n{compileModuleSync(t){return new C0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=VC(t),o=bO(i.declarations).reduce((s,a)=>{let c=Ml(a);return c&&s.push(new mf(c)),s},[]);return new ow(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A4=new Ke("");var RG=(()=>{class n{zone=Se(Ut);changeDetectionScheduler=Se(Tl);applicationRef=Se(za);applicationErrorHandler=Se(ts);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function D4({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ut(Pt(Fe({},FS()),{scheduleInRootZone:t})),[{provide:Ut,useFactory:n},{provide:Ru,multi:!0,useFactory:()=>{let r=Se(RG,{optional:!0});return()=>r.initialize()}},{provide:Ru,multi:!0,useFactory:()=>{let r=Se(OG);return()=>{r.initialize()}}},e===!0?{provide:hI,useValue:!0}:[],{provide:pI,useValue:t??SO},{provide:ts,useFactory:()=>{let r=Se(Ut),i=Se(qn),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Fa),o.handleError(s))})}}}]}function FS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var OG=(()=>{class n{subscription=new jr;initialized=!1;zone=Se(Ut);pendingTasks=Se(Dc);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ut.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var T4=(()=>{class n{applicationErrorHandler=Se(ts);appRef=Se(za);taskService=Se(Dc);ngZone=Se(Ut);zonelessEnabled=Se(R1);tracing=Se(_f,{optional:!0});disableScheduling=Se(hI,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new jr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Q1):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Se(pI,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof b0||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?w3:AO;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Q1+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,w3(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LG(){return typeof $localize<"u"&&$localize.locale||P0}var Ew=new Ke("",{providedIn:"root",factory:()=>Se(Ew,{optional:!0,skipSelf:!0})||LG()});function Ri(n){return mR(n)}function Sp(n,e){return V_(n,e?.equal)}var M4=class{[ro];constructor(e){this[ro]=e}destroy(){this[ro].destroy()}};var F4=Symbol("InputSignalNode#UNSET"),YG=Pt(Fe({},j_),{transformFn:void 0,applyValueToInputSignal(n,e){Gh(n,e)}});function V4(n,e){let t=Object.create(YG);t.value=n,t.transformFn=e?.transform;function r(){if($h(t),t.value===F4){let i=null;throw new ct(-950,i)}return t.value}return r[ro]=t,r}var Cw=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>S0(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},ZG=new Ke("");ZG.__NG_ELEMENT_ID__=n=>{let e=Pi();if(e===null)throw new ct(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new ct(204,!1)};function N4(n,e){return V4(n,e)}function QG(n){return V4(F4,n)}var j4=(N4.required=QG,N4);function XG(n,e,t){let r=new C0(t);return Promise.resolve(r)}function P4(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var Iw=new Ke(""),JG=new Ke("");function j0(n){return!n.moduleRef}function eK(n){let e=j0(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ut);return t.run(()=>{j0(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ts),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),j0(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Iw);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Iw);s.add(o),n.moduleRef.onDestroy(()=>{y0(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return nK(r,t,()=>{let o=e.get(Dc),s=o.add(),a=e.get(NS);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Ew,P0);if(b4(c||P0),!e.get(JG,!0))return j0(n)?e.get(za):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(j0(n)){let u=e.get(za);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return B4?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var B4;function k4(){B4=tK}function tK(n,e){let t=n.injector.get(za);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ct(-403,!1);e.push(n)}function nK(n,e,t){try{let r=t();return zu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var U4=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>TO(r?.ngZone,Pt(Fe({},FS({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[D4({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Tl,useExisting:T4},c3],c=g4(t.moduleType,this.injector,a);return k4(),eK({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=PS({},r);return k4(),XG(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ct(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Iw,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(ze($n))};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),zS=null;function rK(n){if($S())throw new ct(400,!1);_4(),zS=n;let e=n.get(U4);return sK(n),e}function qS(n,e,t=[]){let r=`Platform: ${e}`,i=new Ke(r);return(o=[])=>{let s=$S();if(!s){let a=[...t,...o,{provide:i,useValue:!0}];s=n?.(a)??rK(iK(a,r))}return oK(i)}}function iK(n=[],e){return $n.create({name:e,providers:[{provide:o0,useValue:"platform"},{provide:Iw,useValue:new Set([()=>zS=null])},...n]})}function oK(n){let e=$S();if(!e)throw new ct(-401,!1);return e}function $S(){return zS?.get(U4)??null}function sK(n){let e=n.get(aw,null);ci(n,()=>{e?.forEach(t=>t())})}function Ap(){return!1}var Rc=(()=>{class n{static __NG_ELEMENT_ID__=aK}return n})();function aK(n){return cK(Pi(),mn(),(n&16)===16)}function cK(n,e,t){if(Nl(n)&&!t){let r=fa(n.index,e);return new Bu(r,r)}else if(n.type&175){let r=e[la];return new Bu(r,e)}return null}var VS=class{constructor(){}supports(e){return ES(e)}create(e){return new jS(e)}},lK=(n,e)=>e,jS=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||lK}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<R4(r,i,o)?t:r,a=R4(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let m=0;m<l;m++){let g=m<o.length?o[m]:o[m]=0,C=g+m;u<=C&&C<l&&(o[m]=g+1)}let p=s.previousIndex;o[p]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ES(e))throw new ct(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,r4(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new BS(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Sw),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sw),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},BS=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},US=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Sw=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new US,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function R4(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function O4(){return new HS([new VS])}var HS=(()=>{class n{factories;static \u0275prov=tt({token:n,providedIn:"root",factory:O4});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=Se(n,{optional:!0,skipSelf:!0});return n.create(t,r||O4())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ct(901,!1)}}return n})();var z4=qS(null,"core",[]),q4=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(ze(za))};static \u0275mod=yr({type:n});static \u0275inj=dr({})}return n})();function qu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function $4(n){let e=Ml(n);if(!e)return null;let t=new mf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var G4=null;function ks(){return G4}function WS(n){G4??=n}var B0=class{},U0=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:()=>Se(K4),providedIn:"platform"})}return n})(),GS=new Ke(""),K4=(()=>{class n extends U0{_location;_history;_doc=Se(li);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ks().getBaseHref(this._doc)}onPopState(t){let r=ks().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ks().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Aw(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function H4(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function $a(n){return n&&n[0]!=="?"?`?${n}`:n}var Ha=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:()=>Se(Tw),providedIn:"root"})}return n})(),Dw=new Ke(""),Tw=(()=>{class n extends Ha{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Se(li).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Aw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+$a(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+$a(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+$a(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ze(U0),ze(Dw,8))};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$u=(()=>{class n{_subject=new ir;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=fK(H4(W4(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$a(r))}normalize(t){return n.stripTrailingSlash(dK(this._basePath,W4(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$a(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$a(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=$a;static joinWithSlash=Aw;static stripTrailingSlash=H4;static \u0275fac=function(r){return new(r||n)(ze(Ha))};static \u0275prov=tt({token:n,factory:()=>uK(),providedIn:"root"})}return n})();function uK(){return new $u(ze(Ha))}function dK(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function W4(n){return n.replace(/\/index.html$/,"")}function fK(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var YS=(()=>{class n extends Ha{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Aw(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+$a(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+$a(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ze(U0),ze(Dw,8))};static \u0275prov=tt({token:n,factory:n.\u0275fac})}return n})();var KS=/\s+/,Y4=[],bf=(()=>{class n{_ngEl;_renderer;initialClasses=Y4;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(KS):Y4}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(KS):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(KS).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(it(Gi),it(Ps))};static \u0275dir=Hn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Mw=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},uo=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Mw(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Z4(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Z4(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(it(kl),it(Uu),it(HS))};static \u0275dir=Hn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Z4(n,e){n.context.$implicit=e.item}var Lo=(()=>{class n{_viewContainer;_context=new Nw;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Q4(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Q4(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(it(kl),it(Uu))};static \u0275dir=Hn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Nw=class{$implicit=null;ngIf=null};function Q4(n,e){if(n&&!n.createEmbeddedView)throw new ct(2020,!1)}function hK(n,e){return new ct(2100,!1)}var ZS=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw hK(n,t);return t.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=yw({name:"slice",type:n,pure:!1})}return n})();var z0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=dr({})}return n})();function QS(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var q0=class{};var JS="browser",pK="server";function eA(n){return n===JS}function Pw(n){return n===pK}var X4=(()=>{class n{static \u0275prov=tt({token:n,providedIn:"root",factory:()=>new XS(Se(li),window)})}return n})(),XS=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Pt(Fe({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=gK(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Nu(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Pt(Fe({},t),{left:i-s[0],top:o-s[1]}))}};function gK(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var $0=class{_doc;constructor(e){this._doc=e}manager},kw=(()=>{class n extends $0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ze(li))};static \u0275prov=tt({token:n,factory:n.\u0275fac})}return n})(),Ow=new Ke(""),oA=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof kw));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof kw);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ct(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ze(Ow),ze(Ut))};static \u0275prov=tt({token:n,factory:n.\u0275fac})}return n})(),tA="ng-app-id";function J4(n){for(let e of n)e.remove()}function eL(n,e){let t=e.createElement("style");return t.textContent=n,t}function mK(n,e,t,r){let i=n.head?.querySelectorAll(`style[${tA}="${e}"],link[${tA}="${e}"]`);if(i)for(let o of i)o.removeAttribute(tA),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function rA(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var sA=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,mK(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,eL);r?.forEach(i=>this.addUsage(i,this.external,rA))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(J4(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])J4(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,eL(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,rA(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ze(li),ze(sw),ze(cw,8),ze(ki))};static \u0275prov=tt({token:n,factory:n.\u0275fac})}return n})(),nA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},aA=/%COMP%/g;var nL="%COMP%",vK=`_nghost-${nL}`,yK=`_ngcontent-${nL}`,_K=!0,wK=new Ke("",{providedIn:"root",factory:()=>_K});function bK(n){return yK.replace(aA,n)}function xK(n){return vK.replace(aA,n)}function rL(n,e){return e.map(t=>t.replace(aA,n))}var cA=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new H0(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Rw?i.applyToHost(t):i instanceof W0&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Pl.Emulated:o=new Rw(c,l,r,this.appId,u,s,a,p,m);break;case Pl.ShadowDom:return new iA(c,l,t,r,s,a,this.nonce,p,m);default:o=new W0(c,l,r,u,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ze(oA),ze(sA),ze(sw),ze(wK),ze(li),ze(Ut),ze(cw),ze(_f,8))};static \u0275prov=tt({token:n,factory:n.\u0275fac})}return n})(),H0=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(nA[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(tL(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(tL(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ct(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=nA[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=nA[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Mc.DashCase|Mc.Important)?e.style.setProperty(t,r,i&Mc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Mc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=ks().getGlobalEventTarget(this.doc,e),!e))throw new ct(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function tL(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var iA=class extends H0{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=rL(i.id,u);for(let m of u){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=m,this.shadowRoot.appendChild(g)}let p=i.getExternalStyles?.();if(p)for(let m of p){let g=rA(m,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},W0=class extends H0{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?rL(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&_p.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Rw=class extends W0{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,l,u),this.contentAttr=bK(u),this.hostAttr=xK(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Lw=class n extends B0{supportsDOMEvents=!0;static makeCurrent(){WS(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=EK();return t==null?null:CK(t)}resetBaseElement(){G0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return QS(document.cookie,e)}},G0=null;function EK(){return G0=G0||document.head.querySelector("base"),G0?G0.getAttribute("href"):null}function CK(n){return new URL(n,document.baseURI).pathname}var Fw=class{addToWindow(e){Ms.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new ct(5103,!1);return o},Ms.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ms.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Ms.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Ms.frameworkStabilizers||(Ms.frameworkStabilizers=[]),Ms.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?ks().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},IK=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac})}return n})(),iL=["alt","control","meta","shift"],SK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},oL=(()=>{class n extends $0{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ks().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),iL.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=SK[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),iL.forEach(s=>{if(s!==i){let a=AK[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ze(li))};static \u0275prov=tt({token:n,factory:n.\u0275fac})}return n})();function DK(){Lw.makeCurrent()}function TK(){return new Fa}function MK(){return XI(document),document}var NK=[{provide:ki,useValue:JS},{provide:aw,useValue:DK,multi:!0},{provide:li,useFactory:MK}],lA=qS(z4,"browser",NK);var PK=[{provide:Ip,useClass:Fw},{provide:_w,useClass:M0,deps:[Ut,N0,Ip]},{provide:M0,useClass:M0,deps:[Ut,N0,Ip]}],kK=[{provide:o0,useValue:"root"},{provide:Fa,useFactory:TK},{provide:Ow,useClass:kw,multi:!0,deps:[li]},{provide:Ow,useClass:oL,multi:!0,deps:[li]},cA,sA,oA,{provide:gf,useExisting:cA},{provide:q0,useClass:IK},[]],uA=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=dr({providers:[...kK,...PK],imports:[z0,q4]})}return n})();var sL=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ze(li))};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vL=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(it(Ps),it(Gi))};static \u0275dir=Hn({type:n})}return n})(),Pp=(()=>{class n extends vL{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=Hn({type:n,features:[ao]})}return n})(),xf=new Ke(""),RK={provide:xf,useExisting:ko(()=>Ef),multi:!0},Ef=(()=>{class n extends Pp{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=Hn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Me("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ya([RK]),ao]})}return n})(),OK={provide:xf,useExisting:ko(()=>rs),multi:!0};function LK(){let n=ks()?ks().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var FK=new Ke(""),rs=(()=>{class n extends vL{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!LK())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(it(Ps),it(Gi),it(FK,8))};static \u0275dir=Hn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Me("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ya([OK]),ao]})}return n})();function VK(n){return n==null||jK(n)===0}function jK(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Ww=new Ke(""),yL=new Ke("");function BK(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function UK(n){return VK(n.value)?{required:!0}:null}function cL(n){return null}function _L(n){return n!=null}function wL(n){return zu(n)?pn(n):n}function bL(n){let e={};return n.forEach(t=>{e=t!=null?Fe(Fe({},e),t):e}),Object.keys(e).length===0?null:e}function xL(n,e){return e.map(t=>t(n))}function zK(n){return!n.validate}function EL(n){return n.map(e=>zK(e)?e:t=>e.validate(t))}function qK(n){if(!n)return null;let e=n.filter(_L);return e.length==0?null:function(t){return bL(xL(t,e))}}function hA(n){return n!=null?qK(EL(n)):null}function $K(n){if(!n)return null;let e=n.filter(_L);return e.length==0?null:function(t){let r=xL(t,e).map(wL);return cC(r).pipe(gt(bL))}}function pA(n){return n!=null?$K(EL(n)):null}function lL(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function HK(n){return n._rawValidators}function WK(n){return n._rawAsyncValidators}function dA(n){return n?Array.isArray(n)?n:[n]:[]}function jw(n,e){return Array.isArray(n)?n.includes(e):n===e}function uL(n,e){let t=dA(e);return dA(n).forEach(i=>{jw(t,i)||t.push(i)}),t}function dL(n,e){return dA(e).filter(t=>!jw(n,t))}var Bw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Mp=class extends Bw{name;get formDirective(){return null}get path(){return null}},Np=class extends Bw{_parent=null;name=null;valueAccessor=null},Uw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},GK={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},TCe=Pt(Fe({},GK),{"[class.ng-submitted]":"isSubmitted"}),_a=(()=>{class n extends Uw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(it(Np,2))};static \u0275dir=Hn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&va("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ao]})}return n})(),kp=(()=>{class n extends Uw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(it(Mp,10))};static \u0275dir=Hn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&va("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ao]})}return n})();var K0="VALID",Vw="INVALID",Dp="PENDING",Y0="DISABLED",Wu=class{},zw=class extends Wu{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Q0=class extends Wu{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},X0=class extends Wu{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Tp=class extends Wu{status;source;constructor(e,t){super(),this.status=e,this.source=t}},fA=class extends Wu{source;constructor(e){super(),this.source=e}},qw=class extends Wu{source;constructor(e){super(),this.source=e}};function CL(n){return(Gw(n)?n.validators:n)||null}function KK(n){return Array.isArray(n)?hA(n):n||null}function IL(n,e){return(Gw(e)?e.asyncValidators:n)||null}function YK(n){return Array.isArray(n)?pA(n):n||null}function Gw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function ZK(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ct(1e3,"");if(!r[t])throw new ct(1001,"")}function QK(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ct(1002,"")})}var $w=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ri(this.statusReactive)}set status(e){Ri(()=>this.statusReactive.set(e))}_status=Sp(()=>this.statusReactive());statusReactive=pa(void 0);get valid(){return this.status===K0}get invalid(){return this.status===Vw}get pending(){return this.status==Dp}get disabled(){return this.status===Y0}get enabled(){return this.status!==Y0}errors;get pristine(){return Ri(this.pristineReactive)}set pristine(e){Ri(()=>this.pristineReactive.set(e))}_pristine=Sp(()=>this.pristineReactive());pristineReactive=pa(!0);get dirty(){return!this.pristine}get touched(){return Ri(this.touchedReactive)}set touched(e){Ri(()=>this.touchedReactive.set(e))}_touched=Sp(()=>this.touchedReactive());touchedReactive=pa(!1);get untouched(){return!this.touched}_events=new ir;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dL(e,this._rawAsyncValidators))}hasValidator(e){return jw(this._rawValidators,e)}hasAsyncValidator(e){return jw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Pt(Fe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new X0(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new X0(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Pt(Fe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Q0(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Q0(!0,r))}markAsPending(e={}){this.status=Dp;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tp(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Pt(Fe({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Y0,this.errors=null,this._forEachChild(i=>{i.disable(Pt(Fe({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zw(this.value,r)),this._events.next(new Tp(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Pt(Fe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=K0,this._forEachChild(r=>{r.enable(Pt(Fe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Pt(Fe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===K0||this.status===Dp)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zw(this.value,t)),this._events.next(new Tp(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Pt(Fe({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Y0:K0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Dp,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=wL(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Tp(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Kr,this.statusChanges=new Kr}_calculateStatus(){return this._allControlsDisabled()?Y0:this.errors?Vw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dp)?Dp:this._anyControlsHaveStatus(Vw)?Vw:K0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Q0(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new X0(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=KK(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=YK(this._rawAsyncValidators)}},Hw=class extends $w{constructor(e,t,r){super(CL(t),IL(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){QK(this,!0,e),Object.keys(e).forEach(r=>{ZK(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new qw(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Kw=new Ke("",{providedIn:"root",factory:()=>Yw}),Yw="always";function XK(n,e){return[...e.path,n]}function SL(n,e,t=Yw){AL(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),eY(n,e),nY(n,e),tY(n,e),JK(n,e)}function fL(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function JK(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function AL(n,e){let t=HK(n);e.validator!==null?n.setValidators(lL(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=WK(n);e.asyncValidator!==null?n.setAsyncValidators(lL(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();fL(e._rawValidators,i),fL(e._rawAsyncValidators,i)}function eY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&DL(n,e)})}function tY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&DL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function DL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function nY(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function rY(n,e){n==null,AL(n,e)}function iY(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function oY(n){return Object.getPrototypeOf(n.constructor)===Pp}function sY(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function aY(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===rs?t=o:oY(o)?r=o:i=o}),i||r||t||null}var cY={provide:Mp,useExisting:ko(()=>Cf)},Z0=Promise.resolve(),Cf=(()=>{class n extends Mp{callSetDisabledState;get submitted(){return Ri(this.submittedReactive)}_submitted=Sp(()=>this.submittedReactive());submittedReactive=pa(!1);_directives=new Set;form;ngSubmit=new Kr;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Hw({},hA(t),pA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Z0.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),SL(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Z0.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Z0.then(()=>{let r=this._findContainer(t.path),i=new Hw({});rY(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Z0.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Z0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),sY(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new fA(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(it(Ww,10),it(yL,10),it(Kw,8))};static \u0275dir=Hn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Me("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ya([cY]),ao]})}return n})();function hL(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pL(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var lY=class extends $w{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(CL(t),IL(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(pL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new qw(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){pL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var uY={provide:Np,useExisting:ko(()=>Rs)},gL=Promise.resolve(),Rs=(()=>{class n extends Np{_changeDetectorRef;callSetDisabledState;control=new lY;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Kr;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=aY(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),iY(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){SL(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){gL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&qu(r);gL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?XK(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(it(Mp,9),it(Ww,10),it(yL,10),it(xf,10),it(Rc,8),it(Kw,8))};static \u0275dir=Hn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ya([uY]),ao,Nc]})}return n})();var Rp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Hn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),dY={provide:xf,useExisting:ko(()=>gA),multi:!0},gA=(()=>{class n extends Pp{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=Hn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Me("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ya([dY]),ao]})}return n})(),fY={provide:xf,useExisting:ko(()=>mA),multi:!0};var hY=(()=>{class n{_accessors=[];add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mA=(()=>{class n extends Pp{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=Se(Kw,{optional:!0})??Yw;constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(Np),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(it(Ps),it(Gi),it(hY),it($n))};static \u0275dir=Hn({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&Me("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[ya([fY]),ao]})}return n})();var pY={provide:xf,useExisting:ko(()=>wa),multi:!0};function TL(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function gY(n){return n.split(":")[0]}var wa=(()=>{class n extends Pp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=Se(za).injector;destroyRef=Se(ha);cdr=Se(Rc);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,D0({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=TL(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=gY(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=Hn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Me("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ya([pY]),ao]})}return n})(),Oc=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(TL(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(it(Gi),it(Ps),it(wa,9))};static \u0275dir=Hn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),mY={provide:xf,useExisting:ko(()=>ML),multi:!0};function mL(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function vY(n){return n.split(":")[0]}var ML=(()=>{class n extends Pp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=vY(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=Hn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Me("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ya([mY]),ao]})}return n})(),Lc=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(mL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(mL(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(it(Gi),it(Ps),it(ML,9))};static \u0275dir=Hn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function yY(n){return typeof n=="number"?n:parseFloat(n)}var NL=(()=>{class n{_validator=cL;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):cL,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Hn({type:n,features:[Nc]})}return n})();var _Y={provide:Ww,useExisting:ko(()=>vA),multi:!0},vA=(()=>{class n extends NL{min;inputName="min";normalizeInput=t=>yY(t);createValidator=t=>BK(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=Hn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&wf("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[ya([_Y]),ao]})}return n})(),wY={provide:Ww,useExisting:ko(()=>If),multi:!0};var If=(()=>{class n extends NL{required;inputName="required";normalizeInput=qu;createValidator=t=>UK;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=Hn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&wf("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ya([wY]),ao]})}return n})();var bY=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=dr({})}return n})();var PL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kw,useValue:t.callSetDisabledState??Yw}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=dr({imports:[bY]})}return n})();var tn="primary",dv=Symbol("RouteTitle"),xA=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Df(n){return new xA(n)}function BL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xY(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fc(n[t],e[t]))return!1;return!0}function Fc(n,e){let t=n?EA(n):void 0,r=e?EA(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!UL(n[i],e[i]))return!1;return!0}function EA(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function UL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function zL(n){return n.length>0?n[n.length-1]:null}function Rl(n){return aC(n)?n:zu(n)?pn(Promise.resolve(n)):ht(n)}var EY={exact:$L,subset:HL},qL={exact:CY,subset:IY,ignored:()=>!0};function kL(n,e,t){return EY[t.paths](n.root,e.root,t.matrixParams)&&qL[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function CY(n,e){return Fc(n,e)}function $L(n,e,t){if(!Sf(n.segments,e.segments)||!Xw(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!$L(n.children[r],e.children[r],t))return!1;return!0}function IY(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>UL(n[t],e[t]))}function HL(n,e,t){return WL(n,e,e.segments,t)}function WL(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Sf(i,t)||e.hasChildren()||!Xw(i,t,r))}else if(n.segments.length===t.length){if(!Sf(n.segments,t)||!Xw(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!HL(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Sf(n.segments,i)||!Xw(n.segments,i,r)||!n.children[tn]?!1:WL(n.children[tn],e,o,r)}}function Xw(n,e,t){return e.every((r,i)=>qL[t](n[i].parameters,r.parameters))}var jc=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Nn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Df(this.queryParams),this._queryParamMap}toString(){return DY.serialize(this)}},Nn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jw(this)}},Gu=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Df(this.parameters),this._parameterMap}toString(){return KL(this)}};function SY(n,e){return Sf(n,e)&&n.every((t,r)=>Fc(t.parameters,e[r].parameters))}function Sf(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function AY(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===tn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==tn&&(t=t.concat(e(i,r)))}),t}var Tf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:()=>new Ku,providedIn:"root"})}return n})(),Ku=class{parse(e){let t=new IA(e);return new jc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${J0(e.root,!0)}`,r=NY(e.queryParams),i=typeof e.fragment=="string"?`#${TY(e.fragment)}`:"";return`${t}${r}${i}`}},DY=new Ku;function Jw(n){return n.segments.map(e=>KL(e)).join("/")}function J0(n,e){if(!n.hasChildren())return Jw(n);if(e){let t=n.children[tn]?J0(n.children[tn],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==tn&&r.push(`${i}:${J0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=AY(n,(r,i)=>i===tn?[J0(n.children[tn],!1)]:[`${i}:${J0(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[tn]!=null?`${Jw(n)}/${t[0]}`:`${Jw(n)}/(${t.join("//")})`}}function GL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zw(n){return GL(n).replace(/%3B/gi,";")}function TY(n){return encodeURI(n)}function CA(n){return GL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eb(n){return decodeURIComponent(n)}function RL(n){return eb(n.replace(/\+/g,"%20"))}function KL(n){return`${CA(n.path)}${MY(n.parameters)}`}function MY(n){return Object.entries(n).map(([e,t])=>`;${CA(e)}=${CA(t)}`).join("")}function NY(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Zw(t)}=${Zw(i)}`).join("&"):`${Zw(t)}=${Zw(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var PY=/^[^\/()?;#]+/;function yA(n){let e=n.match(PY);return e?e[0]:""}var kY=/^[^\/()?;=#]+/;function RY(n){let e=n.match(kY);return e?e[0]:""}var OY=/^[^=?&#]+/;function LY(n){let e=n.match(OY);return e?e[0]:""}var FY=/^[^&#]+/;function VY(n){let e=n.match(FY);return e?e[0]:""}var IA=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nn([],{}):new Nn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[tn]=new Nn(e,t)),r}parseSegment(){let e=yA(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ct(4009,!1);return this.capture(e),new Gu(eb(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=RY(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=yA(this.remaining);i&&(r=i,this.capture(r))}e[eb(t)]=eb(r)}parseQueryParam(e){let t=LY(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=VY(this.remaining);s&&(r=s,this.capture(r))}let i=RL(t),o=RL(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=yA(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ct(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=tn);let s=this.parseChildren();t[o??tn]=Object.keys(s).length===1&&s[tn]?s[tn]:new Nn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ct(4011,!1)}};function YL(n){return n.segments.length>0?new Nn([],{[tn]:n}):n}function ZL(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=ZL(i);if(r===tn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Nn(n.segments,e);return jY(t)}function jY(n){if(n.numberOfChildren===1&&n.children[tn]){let e=n.children[tn];return new Nn(n.segments.concat(e.segments),e.children)}return n}function Yu(n){return n instanceof jc}function QL(n,e,t=null,r=null){let i=XL(n);return JL(i,e,t,r)}function XL(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Nn(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=YL(r);return e??i}function JL(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return _A(i,i,i,t,r);let o=BY(e);if(o.toRoot())return _A(i,i,new Nn([],{}),t,r);let s=UY(o,i,n),a=s.processChildren?tv(s.segmentGroup,s.index,o.commands):tF(s.segmentGroup,s.index,o.commands);return _A(i,s.segmentGroup,a,t,r)}function tb(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function rv(n){return typeof n=="object"&&n!=null&&n.outlets}function _A(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=eF(n,e,t);let a=YL(ZL(s));return new jc(a,o,i)}function eF(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=eF(o,e,t)}),new Nn(n.segments,r)}var nb=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tb(r[0]))throw new ct(4003,!1);let i=r.find(rv);if(i&&i!==zL(r))throw new ct(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BY(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new nb(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new nb(t,e,r)}var Vp=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function UY(n,e,t){if(n.isAbsolute)return new Vp(e,!0,0);if(!t)return new Vp(e,!1,NaN);if(t.parent===null)return new Vp(t,!0,0);let r=tb(n.commands[0])?0:1,i=t.segments.length-1+r;return zY(t,i,n.numberOfDoubleDots)}function zY(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ct(4005,!1);i=r.segments.length}return new Vp(r,!1,i-o)}function qY(n){return rv(n[0])?n[0].outlets:{[tn]:n}}function tF(n,e,t){if(n??=new Nn([],{}),n.segments.length===0&&n.hasChildren())return tv(n,e,t);let r=$Y(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Nn(n.segments.slice(0,r.pathIndex),{});return o.children[tn]=new Nn(n.segments.slice(r.pathIndex),n.children),tv(o,0,i)}else return r.match&&i.length===0?new Nn(n.segments,{}):r.match&&!n.hasChildren()?SA(n,e,t):r.match?tv(n,0,i):SA(n,e,t)}function tv(n,e,t){if(t.length===0)return new Nn(n.segments,{});{let r=qY(t),i={};if(Object.keys(r).some(o=>o!==tn)&&n.children[tn]&&n.numberOfChildren===1&&n.children[tn].segments.length===0){let o=tv(n.children[tn],e,t);return new Nn(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=tF(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Nn(n.segments,i)}}function $Y(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(rv(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!LL(c,l,s))return o;r+=2}else{if(!LL(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function SA(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(rv(o)){let c=HY(o.outlets);return new Nn(r,c)}if(i===0&&tb(t[0])){let c=n.segments[e];r.push(new Gu(c.path,OL(t[0]))),i++;continue}let s=rv(o)?o.outlets[tn]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&tb(a)?(r.push(new Gu(s,OL(a))),i+=2):(r.push(new Gu(s,{})),i++)}return new Nn(r,{})}function HY(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=SA(new Nn([],{}),0,r))}),e}function OL(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function LL(n,e,t){return n==t.path&&Fc(e,t.parameters)}var jp="imperative",Ii=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ii||{}),Ls=class{id;url;constructor(e,t){this.id=e,this.url=t}},Zu=class extends Ls{type=Ii.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fs=class extends Ls{urlAfterRedirects;type=Ii.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fo=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Fo||{}),Up=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Up||{}),Vc=class extends Ls{reason;code;type=Ii.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bc=class extends Ls{reason;code;type=Ii.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},zp=class extends Ls{error;target;type=Ii.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},iv=class extends Ls{urlAfterRedirects;state;type=Ii.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rb=class extends Ls{urlAfterRedirects;state;type=Ii.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ib=class extends Ls{urlAfterRedirects;state;shouldActivate;type=Ii.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ob=class extends Ls{urlAfterRedirects;state;type=Ii.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sb=class extends Ls{urlAfterRedirects;state;type=Ii.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ab=class{route;type=Ii.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cb=class{route;type=Ii.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lb=class{snapshot;type=Ii.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ub=class{snapshot;type=Ii.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},db=class{snapshot;type=Ii.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fb=class{snapshot;type=Ii.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qp=class{routerEvent;position;anchor;type=Ii.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ov=class{},$p=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function WY(n){return!(n instanceof ov)&&!(n instanceof $p)}function GY(n,e){return n.providers&&!n._injector&&(n._injector=Cp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Wa(n){return n.outlet||tn}function KY(n,e){let t=n.filter(r=>Wa(r)===e);return t.push(...n.filter(r=>Wa(r)!==e)),t}function Gp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var hb=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Gp(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Mf(this.rootInjector)}},Mf=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hb(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ze(qn))};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pb=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=AA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=AA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=DA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return DA(e,this._root).map(t=>t.value)}};function AA(n,e){if(n===e.value)return e;for(let t of e.children){let r=AA(n,t);if(r)return r}return null}function DA(n,e){if(n===e.value)return[e];for(let t of e.children){let r=DA(n,t);if(r.length)return r.unshift(e),r}return[]}var Os=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Fp(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var sv=class extends pb{snapshot;constructor(e,t){super(e),this.snapshot=t,LA(this,e)}toString(){return this.snapshot.toString()}};function nF(n){let e=YY(n),t=new $i([new Gu("",{})]),r=new $i({}),i=new $i({}),o=new $i({}),s=new $i(""),a=new Vs(t,r,o,s,i,tn,n,e.root);return a.snapshot=e.root,new sv(new Os(a,[]),e)}function YY(n){let e={},t={},r={},o=new Af([],e,r,"",t,tn,n,null,{});return new av("",new Os(o,[]))}var Vs=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(gt(l=>l[dv]))??ht(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(gt(e=>Df(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(gt(e=>Df(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gb(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Fe(Fe({},e.params),n.params),data:Fe(Fe({},e.data),n.data),resolve:Fe(Fe(Fe(Fe({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Fe({},n.params),data:Fe({},n.data),resolve:Fe(Fe({},n.data),n._resolvedData??{})},i&&iF(i)&&(r.resolve[dv]=i.title),r}var Af=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[dv]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Df(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Df(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},av=class extends pb{url;constructor(e,t){super(t),this.url=e,LA(this,t)}toString(){return rF(this._root)}};function LA(n,e){e.value._routerState=n,e.children.forEach(t=>LA(n,t))}function rF(n){let e=n.children.length>0?` { ${n.children.map(rF).join(", ")} } `:"";return`${n.value}${e}`}function wA(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Fc(e.params,t.params)||n.paramsSubject.next(t.params),xY(e.url,t.url)||n.urlSubject.next(t.url),Fc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function TA(n,e){let t=Fc(n.params,e.params)&&SY(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||TA(n.parent,e.parent))}function iF(n){return typeof n.title=="string"||n.title===null}var oF=new Ke(""),fv=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=tn;activateEvents=new Kr;deactivateEvents=new Kr;attachEvents=new Kr;detachEvents=new Kr;routerOutletData=j4();parentContexts=Se(Mf);location=Se(kl);changeDetector=Se(Rc);inputBinder=Se(hv,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ct(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ct(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ct(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ct(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new MA(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Hn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Nc]})}return n})(),MA=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Vs?this.route:e===Mf?this.childContexts:e===oF?this.outletData:this.parent.get(e,t)}},hv=new Ke(""),FA=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Zm([r.queryParams,r.params,r.data]).pipe(Jn(([o,s,a],c)=>(a=Fe(Fe(Fe({},o),s),a),c===0?ht(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=$4(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac})}return n})(),VA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Pr({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&bt(0,"router-outlet")},dependencies:[fv],encapsulation:2})}return n})();function jA(n){let e=n.children&&n.children.map(jA),t=e?Pt(Fe({},n),{children:e}):Fe({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==tn&&(t.component=VA),t}function ZY(n,e,t){let r=cv(n,e._root,t?t._root:void 0);return new sv(r,e)}function cv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=QY(n,e,t);return new Os(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>cv(n,a)),s}}let r=XY(e.value),i=e.children.map(o=>cv(n,o));return new Os(r,i)}}function QY(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cv(n,r,i);return cv(n,r)})}function XY(n){return new Vs(new $i(n.url),new $i(n.params),new $i(n.queryParams),new $i(n.fragment),new $i(n.data),n.outlet,n.component,n)}var Hp=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},sF="ngNavigationCancelingError";function mb(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Yu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=aF(!1,Fo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function aF(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[sF]=!0,t.cancellationCode=e,t}function JY(n){return cF(n)&&Yu(n.url)}function cF(n){return!!n&&n[sF]}var eZ=(n,e,t,r)=>gt(i=>(new NA(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),NA=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Fp(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fp(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fp(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Fp(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new fb(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ub(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(wA(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),wA(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},vb=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Bp=class{component;route;constructor(e,t){this.component=e,this.route=t}};function tZ(n,e,t){let r=n._root,i=e?e._root:null;return ev(r,i,t,[r.value])}function nZ(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Kp(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!AC(n)?n:e.get(n):r}function ev(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fp(e);return n.children.forEach(s=>{rZ(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>nv(a,t.getContext(s),i)),i}function rZ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=iZ(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new vb(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ev(n,e,a?a.children:null,r,i):ev(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Bp(a.outlet.component,s))}else s&&nv(e,a,i),i.canActivateChecks.push(new vb(r)),o.component?ev(n,null,a?a.children:null,r,i):ev(n,null,t,r,i);return i}function iZ(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Sf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Sf(n.url,e.url)||!Fc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!TA(n,e)||!Fc(n.queryParams,e.queryParams);case"paramsChange":default:return!TA(n,e)}}function nv(n,e,t){let r=Fp(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?nv(s,e.children.getContext(o),t):nv(s,null,t):nv(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Bp(e.outlet.component,i)):t.canDeactivateChecks.push(new Bp(null,i)):t.canDeactivateChecks.push(new Bp(null,i))}function pv(n){return typeof n=="function"}function oZ(n){return typeof n=="boolean"}function sZ(n){return n&&pv(n.canLoad)}function aZ(n){return n&&pv(n.canActivate)}function cZ(n){return n&&pv(n.canActivateChild)}function lZ(n){return n&&pv(n.canDeactivate)}function uZ(n){return n&&pv(n.canMatch)}function lF(n){return n instanceof Cl||n?.name==="EmptyError"}var Qw=Symbol("INITIAL_VALUE");function Wp(){return Jn(n=>Zm(n.map(e=>e.pipe(Sl(1),Au(Qw)))).pipe(gt(e=>{for(let t of e)if(t!==!0){if(t===Qw)return Qw;if(t===!1||dZ(t))return t}return!0}),ai(e=>e!==Qw),Sl(1)))}function dZ(n){return Yu(n)||n instanceof Hp}function fZ(n,e){return Gr(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ht(Pt(Fe({},t),{guardsResult:!0})):hZ(s,r,i,n).pipe(Gr(a=>a&&oZ(a)?pZ(r,o,n,e):ht(a)),gt(a=>Pt(Fe({},t),{guardsResult:a})))})}function hZ(n,e,t,r){return pn(n).pipe(Gr(i=>_Z(i.component,i.route,t,e,r)),La(i=>i!==!0,!0))}function pZ(n,e,t,r){return pn(e).pipe(Cu(i=>ip(mZ(i.route.parent,r),gZ(i.route,r),yZ(n,i.path,t),vZ(n,i.route,t))),La(i=>i!==!0,!0))}function gZ(n,e){return n!==null&&e&&e(new db(n)),ht(!0)}function mZ(n,e){return n!==null&&e&&e(new lb(n)),ht(!0)}function vZ(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ht(!0);let i=r.map(o=>Qm(()=>{let s=Gp(e)??t,a=Kp(o,s),c=aZ(a)?a.canActivate(e,n):ci(s,()=>a(e,n));return Rl(c).pipe(La())}));return ht(i).pipe(Wp())}function yZ(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>nZ(s)).filter(s=>s!==null).map(s=>Qm(()=>{let a=s.guards.map(c=>{let l=Gp(s.node)??t,u=Kp(c,l),p=cZ(u)?u.canActivateChild(r,n):ci(l,()=>u(r,n));return Rl(p).pipe(La())});return ht(a).pipe(Wp())}));return ht(o).pipe(Wp())}function _Z(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ht(!0);let s=o.map(a=>{let c=Gp(e)??i,l=Kp(a,c),u=lZ(l)?l.canDeactivate(n,e,t,r):ci(c,()=>l(n,e,t,r));return Rl(u).pipe(La())});return ht(s).pipe(Wp())}function wZ(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ht(!0);let o=i.map(s=>{let a=Kp(s,n),c=sZ(a)?a.canLoad(e,t):ci(n,()=>a(e,t));return Rl(c)});return ht(o).pipe(Wp(),uF(r))}function uF(n){return $_(xi(e=>{if(typeof e!="boolean")throw mb(n,e)}),gt(e=>e===!0))}function bZ(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ht(!0);let o=i.map(s=>{let a=Kp(s,n),c=uZ(a)?a.canMatch(e,t):ci(n,()=>a(e,t));return Rl(c)});return ht(o).pipe(Wp(),uF(r))}var lv=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},uv=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Lp(n){return rp(new lv(n))}function xZ(n){return rp(new ct(4e3,!1))}function EZ(n){return rp(aF(!1,Fo.GuardRejected))}var PA=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ht(r);if(i.numberOfChildren>1||!i.children[tn])return xZ(`${e.redirectTo}`);i=i.children[tn]}}applyRedirectCommands(e,t,r,i,o){return CZ(t,i,o).pipe(gt(s=>{if(s instanceof jc)throw new uv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new uv(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new jc(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Nn(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ct(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function CZ(n,e,t){if(typeof n=="string")return ht(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:p}=e;return Rl(ci(t,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var kA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function IZ(n,e,t,r,i){let o=dF(n,e,t);return o.matched?(r=GY(e,r),bZ(r,e,t,i).pipe(gt(s=>s===!0?o:Fe({},kA)))):ht(o)}function dF(n,e,t){if(e.path==="**")return SZ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Fe({},kA):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||BL)(t,n,e);if(!i)return Fe({},kA);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Fe(Fe({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function SZ(n){return{matched:!0,parameters:n.length>0?zL(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function FL(n,e,t,r){return t.length>0&&TZ(n,t,r)?{segmentGroup:new Nn(e,DZ(r,new Nn(t,n.children))),slicedSegments:[]}:t.length===0&&MZ(n,t,r)?{segmentGroup:new Nn(n.segments,AZ(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Nn(n.segments,n.children),slicedSegments:t}}function AZ(n,e,t,r){let i={};for(let o of t)if(_b(n,e,o)&&!r[Wa(o)]){let s=new Nn([],{});i[Wa(o)]=s}return Fe(Fe({},r),i)}function DZ(n,e){let t={};t[tn]=e;for(let r of n)if(r.path===""&&Wa(r)!==tn){let i=new Nn([],{});t[Wa(r)]=i}return t}function TZ(n,e,t){return t.some(r=>_b(n,e,r)&&Wa(r)!==tn)}function MZ(n,e,t){return t.some(r=>_b(n,e,r))}function _b(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function NZ(n,e,t){return e.length===0&&!n.children[t]}var RA=class{};function PZ(n,e,t,r,i,o,s="emptyOnly"){return new OA(n,e,t,r,i,s,o).recognize()}var kZ=31,OA=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new PA(this.urlSerializer,this.urlTree)}noMatchError(e){return new ct(4002,`'${e.segmentGroup}'`)}recognize(){let e=FL(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(gt(({children:t,rootSnapshot:r})=>{let i=new Os(r,t),o=new av("",i),s=QL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Af([],Object.freeze({}),Object.freeze(Fe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),tn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,tn,t).pipe(gt(r=>({children:r,rootSnapshot:t})),Il(r=>{if(r instanceof uv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lv?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(gt(s=>s instanceof Os?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return pn(o).pipe(Cu(s=>{let a=r.children[s],c=KY(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Su((s,a)=>(s.push(...a),s)),Iu(null),dC(),Gr(s=>{if(s===null)return Lp(r);let a=fF(s);return RZ(a),ht(a)}))}processSegment(e,t,r,i,o,s,a){return pn(t).pipe(Cu(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Il(l=>{if(l instanceof lv)return ht(null);throw l}))),La(c=>!!c),Il(c=>{if(lF(c))return NZ(r,i,o)?ht(new RA):Lp(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Wa(r)!==s&&(s===tn||!_b(i,o,r))?Lp(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Lp(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:p,remainingSegments:m}=dF(t,i,o);if(!c)return Lp(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kZ&&(this.allowRedirects=!1));let g=new Af(o,l,Object.freeze(Fe({},this.urlTree.queryParams)),this.urlTree.fragment,VL(i),Wa(i),i.component??i._loadedComponent??null,i,jL(i)),C=gb(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(C.params),g.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,p,g,e).pipe(Jn(N=>this.applyRedirects.lineralizeSegments(i,N)),Gr(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=IZ(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Jn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Jn(({routes:l})=>{let u=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:g}=c,C=new Af(m,p,Object.freeze(Fe({},this.urlTree.queryParams)),this.urlTree.fragment,VL(r),Wa(r),r.component??r._loadedComponent??null,r,jL(r)),I=gb(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(I.params),C.data=Object.freeze(I.data);let{segmentGroup:N,slicedSegments:P}=FL(t,m,g,l);if(P.length===0&&N.hasChildren())return this.processChildren(u,l,N,C).pipe(gt(j=>new Os(C,j)));if(l.length===0&&P.length===0)return ht(new Os(C,[]));let Q=Wa(r)===o;return this.processSegment(u,l,N,P,Q?tn:o,!0,C).pipe(gt(j=>new Os(C,j instanceof Os?[j]:[])))}))):Lp(t)))}getChildConfig(e,t,r){return t.children?ht({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ht({routes:t._loadedRoutes,injector:t._loadedInjector}):wZ(e,t,r,this.urlSerializer).pipe(Gr(i=>i?this.configLoader.loadChildren(e,t).pipe(xi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):EZ(t))):ht({routes:[],injector:e})}};function RZ(n){n.sort((e,t)=>e.value.outlet===tn?-1:t.value.outlet===tn?1:e.value.outlet.localeCompare(t.value.outlet))}function OZ(n){let e=n.value.routeConfig;return e&&e.path===""}function fF(n){let e=[],t=new Set;for(let r of n){if(!OZ(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=fF(r.children);e.push(new Os(r.value,i))}return e.filter(r=>!t.has(r))}function VL(n){return n.data||{}}function jL(n){return n.resolve||{}}function LZ(n,e,t,r,i,o){return Gr(s=>PZ(n,e,t,r,s.extractedUrl,i,o).pipe(gt(({state:a,tree:c})=>Pt(Fe({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function FZ(n,e){return Gr(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ht(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of hF(c))s.add(l);let a=0;return pn(s).pipe(Cu(c=>o.has(c)?VZ(c,r,n,e):(c.data=gb(c,c.parent,n).resolve,ht(void 0))),xi(()=>a++),op(1),Gr(c=>a===s.size?ht(t):io))})}function hF(n){let e=n.children.map(t=>hF(t)).flat();return[n,...e]}function VZ(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!iF(i)&&(o[dv]=i.title),Qm(()=>(n.data=gb(n,n.parent,t).resolve,jZ(o,n,e,r).pipe(gt(s=>(n._resolvedData=s,n.data=Fe(Fe({},n.data),s),null)))))}function jZ(n,e,t,r){let i=EA(n);if(i.length===0)return ht({});let o={};return pn(i).pipe(Gr(s=>BZ(n[s],e,t,r).pipe(La(),xi(a=>{if(a instanceof Hp)throw mb(new Ku,a);o[s]=a}))),op(1),gt(()=>o),Il(s=>lF(s)?io:rp(s)))}function BZ(n,e,t,r){let i=Gp(e)??r,o=Kp(n,i),s=o.resolve?o.resolve(e,t):ci(i,()=>o(e,t));return Rl(s)}function bA(n){return Jn(e=>{let t=n(e);return t?pn(t).pipe(gt(()=>e)):ht(e)})}var BA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===tn);return r}getResolvedTitleForRoute(t){return t.data[dv]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:()=>Se(pF),providedIn:"root"})}return n})(),pF=(()=>{class n extends BA{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ze(sL))};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qu=new Ke("",{providedIn:"root",factory:()=>({})}),Yp=new Ke(""),wb=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Se(LS);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ht(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Rl(ci(t,()=>r.loadComponent())).pipe(gt(mF),Jn(vF),xi(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Xm(()=>{this.componentLoaders.delete(r)})),o=new Jh(i,()=>new ir).pipe(Xh());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ht({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=gF(r,this.compiler,t,this.onLoadEndListener).pipe(Xm(()=>{this.childrenLoaders.delete(r)})),s=new Jh(o,()=>new ir).pipe(Xh());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gF(n,e,t,r){return Rl(ci(t,()=>n.loadChildren())).pipe(gt(mF),Jn(vF),Gr(i=>i instanceof vw||Array.isArray(i)?ht(i):pn(e.compileModuleAsync(i))),gt(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Yp,[],{optional:!0,self:!0}).flat()),{routes:s.map(jA),injector:o}}))}function UZ(n){return n&&typeof n=="object"&&"default"in n}function mF(n){return UZ(n)?n.default:n}function vF(n){return ht(n)}var bb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:()=>Se(zZ),providedIn:"root"})}return n})(),zZ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UA=new Ke(""),zA=new Ke("");function yF(n,e,t){let r=n.get(zA),i=n.get(li);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),qZ(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&ci(n,()=>c({transition:a,from:e,to:t})),s}function qZ(n){return new Promise(e=>{D0({read:()=>setTimeout(e)},{injector:n})})}var qA=new Ke(""),xb=(()=>{class n{currentNavigation=pa(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ir;transitionAbortWithErrorSubject=new ir;configLoader=Se(wb);environmentInjector=Se(qn);destroyRef=Se(ha);urlSerializer=Se(Tf);rootContexts=Se(Mf);location=Se($u);inputBindingEnabled=Se(hv,{optional:!0})!==null;titleStrategy=Se(BA);options=Se(Qu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Se(bb);createViewTransition=Se(UA,{optional:!0});navigationErrorHandler=Se(qA,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ht(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new ab(i)),r=i=>this.events.next(new cb(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Ri(()=>{this.transitions?.next(Pt(Fe({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new $i(null),this.transitions.pipe(ai(r=>r!==null),Jn(r=>{let i=!1;return ht(r).pipe(Jn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Fo.SupersededByNewNavigation),io;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Pt(Fe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Bc(o.id,this.urlSerializer.serialize(o.rawUrl),"",Up.IgnoredSameUrlNavigation)),o.resolve(!1),io;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ht(o).pipe(Jn(c=>(this.events.next(new Zu(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?io:Promise.resolve(c))),LZ(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),xi(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new iv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:p,extras:m}=o,g=new Zu(c,this.urlSerializer.serialize(l),u,p);this.events.next(g);let C=nF(this.rootComponentType).snapshot;return this.currentTransition=r=Pt(Fe({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:Pt(Fe({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(I=>(I.finalUrl=l,I)),ht(r)}else return this.events.next(new Bc(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Up.IgnoredByUrlHandlingStrategy)),o.resolve(!1),io}),xi(o=>{let s=new rb(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),gt(o=>(this.currentTransition=r=Pt(Fe({},o),{guards:tZ(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),fZ(this.environmentInjector,o=>this.events.next(o)),xi(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw mb(this.urlSerializer,o.guardsResult);let s=new ib(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ai(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Fo.GuardRejected),!1)),bA(o=>{if(o.guards.canActivateChecks.length!==0)return ht(o).pipe(xi(s=>{let a=new ob(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Jn(s=>{let a=!1;return ht(s).pipe(FZ(this.paramsInheritanceStrategy,this.environmentInjector),xi({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Fo.NoDataFromResolver)}}))}),xi(s=>{let a=new sb(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),bA(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Gp(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(xi(u=>{a.component=u}),gt(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Zm(s(o.targetSnapshot.root)).pipe(Iu(null),Sl(1))}),bA(()=>this.afterPreactivation()),Jn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?pn(a).pipe(gt(()=>r)):ht(r)}),gt(o=>{let s=ZY(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Pt(Fe({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),xi(()=>{this.events.next(new ov)}),eZ(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Sl(1),h1(new Bt(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ai(()=>!i&&!r.targetRouterState),xi(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Fo.Aborted)}))),xi({next:o=>{i=!0,this.lastSuccessfulNavigation=Ri(this.currentNavigation),this.events.next(new Fs(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),h1(this.transitionAbortWithErrorSubject.pipe(xi(o=>{throw o}))),Xm(()=>{i||this.cancelNavigationTransition(r,"",Fo.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Il(o=>{if(this.destroyed)return r.resolve(!1),io;if(i=!0,cF(o))this.events.next(new Vc(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),JY(o)?this.events.next(new $p(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new zp(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=ci(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Hp){let{message:c,cancellationCode:l}=mb(this.urlSerializer,a);this.events.next(new Vc(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new $p(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return io}))}))}cancelNavigationTransition(t,r,i){let o=new Vc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ri(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $Z(n){return n!==jp}var _F=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:()=>Se(HZ),providedIn:"root"})}return n})(),yb=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},HZ=(()=>{class n extends yb{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wF=(()=>{class n{urlSerializer=Se(Tf);options=Se(Qu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Se($u);urlHandlingStrategy=Se(bb);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new jc;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof jc?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=nF(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:()=>Se(WZ),providedIn:"root"})}return n})(),WZ=(()=>{class n extends wF{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Zu?this.updateStateMemento():t instanceof Bc?this.commitTransition(r):t instanceof iv?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ov?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Vc&&t.code!==Fo.SupersededByNewNavigation&&t.code!==Fo.Redirect?this.restoreHistory(r):t instanceof zp?this.restoreHistory(r,!0):t instanceof Fs&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Fe(Fe({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=Fe(Fe({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Eb(n,e){n.events.pipe(ai(t=>t instanceof Fs||t instanceof Vc||t instanceof zp||t instanceof Bc),gt(t=>t instanceof Fs||t instanceof Bc?0:(t instanceof Vc?t.code===Fo.Redirect||t.code===Fo.SupersededByNewNavigation:!1)?2:1),ai(t=>t!==2),Sl(1)).subscribe(()=>{e()})}var GZ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KZ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Oi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Se(AS);stateManager=Se(wF);options=Se(Qu,{optional:!0})||{};pendingTasks=Se(Dc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Se(xb);urlSerializer=Se(Tf);location=Se($u);urlHandlingStrategy=Se(bb);injector=Se(qn);_events=new ir;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Se(_F);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Se(Yp,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Se(hv,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new jr;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ri(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Vc&&r.code!==Fo.Redirect&&r.code!==Fo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fs)this.navigated=!0;else if(r instanceof $p){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Fe({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||$Z(i.source)},s);this.scheduleNavigation(a,jp,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}WY(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),jp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Fe({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(ts)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ri(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(jA),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=Fe(Fe({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=XL(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return JL(p,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Yu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,jp,null,r)}navigate(t,r={skipLocationChange:!1}){return YZ(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Nu(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Fe({},GZ):r===!1?i=Fe({},KZ):i=r,Yu(t))return kL(this.currentUrlTree,t,i);let o=this.parseUrl(t);return kL(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let u=this.pendingTasks.add();return Eb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YZ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ct(4008,!1)}var ba=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=pa(null);get href(){return Ri(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ir;applicationErrorHandler=Se(ts);options=Se(Qu,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(Se(new Cw("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Fs&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Yu(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Yu(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(it(Oi),it(Vs),S0("tabindex"),it(Ps),it(Gi),it(Ha))};static \u0275dir=Hn({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Me("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&wf("href",i.reactiveHref(),rS)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",qu],skipLocationChange:[2,"skipLocationChange","skipLocationChange",qu],replaceUrl:[2,"replaceUrl","replaceUrl",qu],routerLink:"routerLink"},features:[Nc]})}return n})(),HA=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Kr;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Fs&&this.update()})}ngAfterContentInit(){ht(this.links.changes,ht(null)).pipe(Ec()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=pn(t).pipe(Ec()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=ZZ(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(it(Oi),it(Gi),it(Ps),it(Rc),it(ba,8))};static \u0275dir=Hn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&kS(o,ba,5),r&2){let s;k0(s=R0())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Nc]})}return n})();function ZZ(n){return!!n.paths}var gv=class{};var bF=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ai(t=>t instanceof Fs),Cu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Cp(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return pn(i).pipe(Ec())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ht(null);let o=i.pipe(Gr(s=>s===null?ht(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return pn([o,s]).pipe(Ec())}else return o})}static \u0275fac=function(r){return new(r||n)(ze(Oi),ze(qn),ze(gv),ze(wb))};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xF=new Ke(""),QZ=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=jp;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fs?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Bc&&t.code===Up.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof qp))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>ee(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new qp(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){wS()};static \u0275prov=tt({token:n,factory:n.\u0275fac})}return n})();function XZ(n){return n.routerState.root}function mv(n,e){return{\u0275kind:n,\u0275providers:e}}function JZ(){let n=Se($n);return e=>{let t=n.get(za);if(e!==t.components[0])return;let r=n.get(Oi),i=n.get(EF);n.get(WA)===1&&r.initialNavigation(),n.get(SF,null,{optional:!0})?.setUpPreloading(),n.get(xF,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var EF=new Ke("",{factory:()=>new ir}),WA=new Ke("",{providedIn:"root",factory:()=>1});function CF(){let n=[{provide:JI,useValue:!0},{provide:WA,useValue:0},ww(()=>{let e=Se($n);return e.get(GS,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Oi),o=e.get(EF);Eb(i,()=>{r(!0)}),e.get(xb).afterPreactivation=()=>(r(!0),o.closed?ht(void 0):o),i.initialNavigation()}))})];return mv(2,n)}function IF(){let n=[ww(()=>{Se(Oi).setUpLocationChangeListener()}),{provide:WA,useValue:2}];return mv(3,n)}var SF=new Ke("");function AF(n){return mv(0,[{provide:SF,useExisting:bF},{provide:gv,useExisting:n}])}function DF(){return mv(8,[FA,{provide:hv,useExisting:FA}])}function TF(n){Ep("NgRouterViewTransitions");let e=[{provide:UA,useValue:yF},{provide:zA,useValue:Fe({skipNextTransition:!!n?.skipInitialTransition},n)}];return mv(9,e)}var MF=[$u,{provide:Tf,useClass:Ku},Oi,Mf,{provide:Vs,useFactory:XZ,deps:[Oi]},wb,[]],Zp=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[MF,[],{provide:Yp,multi:!0,useValue:t},[],r?.errorHandler?{provide:qA,useValue:r.errorHandler}:[],{provide:Qu,useValue:r||{}},r?.useHash?tQ():nQ(),eQ(),r?.preloadingStrategy?AF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?rQ(r):[],r?.bindToComponentInputs?DF().\u0275providers:[],r?.enableViewTransitions?TF().\u0275providers:[],iQ()]}}static forChild(t){return{ngModule:n,providers:[{provide:Yp,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=dr({})}return n})();function eQ(){return{provide:xF,useFactory:()=>{let n=Se(X4),e=Se(Ut),t=Se(Qu),r=Se(xb),i=Se(Tf);return t.scrollOffset&&n.setOffset(t.scrollOffset),new QZ(i,r,n,e,t)}}}function tQ(){return{provide:Ha,useClass:YS}}function nQ(){return{provide:Ha,useClass:Tw}}function rQ(n){return[n.initialNavigation==="disabled"?IF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?CF().\u0275providers:[]]}var $A=new Ke("");function iQ(){return[{provide:$A,useFactory:JZ},{provide:bw,multi:!0,useExisting:$A}]}var oQ="firebase",sQ="11.10.0";zn(oQ,sQ,"app");function Si(n){n===void 0&&(n=Se($n));let e=n.get(gp);return t=>new Bt(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Zr=new Du("ANGULARFIRE2_VERSION");function Ol(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Uc=(n,e)=>{let t=e?[e]:D_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Qp=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Qp||{}),NF=Ap()&&typeof Zone<"u"?Qp.WARN:Qp.SILENT;var Cb=class{zone;delegate;constructor(e,t=oC){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Qr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Se(Ut);this.outsideAngular=t.runOutsideAngular(()=>new Cb(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Cb(typeof Zone>"u"?void 0:Zone.current,ef))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PF=!1;function aQ(n,e){!PF&&(NF>Qp.SILENT||Ap())&&(PF=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),NF>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function cQ(n){let e=Se(Ut,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Nf(n){let e=Se(Ut,{optional:!0});return e?e.run(()=>n()):n()}var lQ=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ci(t,()=>Nf(()=>n.apply(void 0,r)))),sr=(n,e,t)=>(t||=e?Qp.WARN:Qp.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=Se(Qr),s=Se(gp),a=Se(qn)}catch{return aQ(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Nf(()=>s.add())),i[l]=lQ(i[l],r,a));let c=cQ(()=>n.apply(this,i));return e?c instanceof Bt?c.pipe(sa(o.outsideAngular),oo(o.insideAngular),Si(a)):c instanceof Promise?Nf(()=>{let l=s.add();return new Promise((u,p)=>{c.then(m=>ci(a,()=>Nf(()=>u(m))),m=>ci(a,()=>Nf(()=>p(m)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Nf(()=>c):c instanceof Bt?c.pipe(sa(o.outsideAngular),oo(o.insideAngular)):Nf(()=>c)});var js=class{constructor(e){return e}},Ga=class{constructor(){return D_()}};function uQ(n){return n&&n.length===1?n[0]:new js(wc())}var KA=new Ke("angularfire2._apps"),dQ={provide:js,useFactory:uQ,deps:[[new Nr,KA]]},fQ={provide:Ga,deps:[[new Nr,KA]]};function hQ(n){return(e,t)=>{let r=t.get(ki);zn("angularfire",Zr.full,"core"),zn("angularfire",Zr.full,"app"),zn("angular",n0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new js(i)}}function kF(n,...e){return es([dQ,fQ,{provide:KA,useFactory:hQ(n),multi:!0,deps:[Ut,$n,Qr,...e]}])}var RF=sr(Bk,!0);var pQ=new Map,gQ={activated:!1,tokenObservers:[]},mQ={initialized:!1,enabled:!1};function Ka(n){return pQ.get(n)||Object.assign({},gQ)}function VF(){return mQ}var vQ="https://content-firebaseappcheck.googleapis.com/v1";var yQ="exchangeDebugToken",OF={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},XIe=1440*60*1e3;var QA=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return ee(this,null,function*(){this.stop();try{this.pending=new jE,this.pending.promise.catch(t=>{}),yield _Q(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new jE,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function _Q(n){return new Promise(e=>{setTimeout(e,n)})}var wQ={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ju=new jh("appCheck","AppCheck",wQ);function jF(n){if(!Ka(n).activated)throw Ju.create("use-before-activation",{appName:n.name})}function BF(r,i){return ee(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let g=yield s.getHeartbeatsHeader();g&&(o["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(g){throw Ju.create("fetch-network-error",{originalErrorMessage:g?.message})}if(c.status!==200)throw Ju.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(g){throw Ju.create("fetch-parse-error",{originalErrorMessage:g?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ju.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(u[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function UF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${vQ}/projects/${t}/apps/${r}:${yQ}?key=${i}`,body:{debug_token:e}}}var bQ="firebase-app-check-database",xQ=1,XA="firebase-app-check-store";var Ib=null;function EQ(){return Ib||(Ib=new Promise((n,e)=>{try{let t=indexedDB.open(bQ,xQ);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ju.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(XA,{keyPath:"compositeKey"})}}}catch(t){e(Ju.create("storage-open",{originalErrorMessage:t?.message}))}}),Ib)}function CQ(n,e){return IQ(SQ(n),e)}function IQ(n,e){return ee(this,null,function*(){let r=(yield EQ()).transaction(XA,"readwrite"),o=r.objectStore(XA).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Ju.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function SQ(n){return`${n.options.appId}-${n.name}`}var vv=new Uh("@firebase/app-check");function YA(n,e){return Vh()?CQ(n,e).catch(t=>{vv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zF(){return VF().enabled}function qF(){return ee(this,null,function*(){let n=VF();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var AQ={error:"UNKNOWN_ERROR"};function DQ(n){return Ok.encodeString(JSON.stringify(n),!1)}function JA(n,e=!1,t=!1){return ee(this,null,function*(){let r=n.app;jF(r);let i=Ka(r),o=i.token,s;if(o&&!yv(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(yv(l)?o=l:yield YA(r,void 0))}if(!e&&o&&yv(o))return{token:o.token};let a=!1;if(zF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=BF(UF(r,yield qF()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield YA(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?vv.warn(l.message):t&&vv.error(l),ZA(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Ka(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?vv.warn(l.message):t&&vv.error(l),s=l}let c;return o?s?yv(o)?c={token:o.token,internalError:s}:c=ZA(s):(c={token:o.token},i.token=o,yield YA(r,o)):c=ZA(s),a&&PQ(r,c),c})}function TQ(n){return ee(this,null,function*(){let e=n.app;jF(e);let{provider:t}=Ka(e);if(zF()){let r=yield qF(),{token:i}=yield BF(UF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function MQ(n,e,t,r){let{app:i}=n,o=Ka(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&yv(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),LF(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>LF(n))}function $F(n,e){let t=Ka(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function LF(n){let{app:e}=n,t=Ka(e),r=t.tokenRefresher;r||(r=NQ(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function NQ(n){let{app:e}=n;return new QA(()=>ee(null,null,function*(){let t=Ka(e),r;if(t.token?r=yield JA(n,!0):r=yield JA(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Ka(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},OF.RETRIAL_MIN_WAIT,OF.RETRIAL_MAX_WAIT)}function PQ(n,e){let t=Ka(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function yv(n){return n.expireTimeMillis-Date.now()>0}function ZA(n){return{token:DQ(AQ),error:n}}var eD=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ka(this.app);for(let t of e)$F(this.app,t.next);return Promise.resolve()}};function kQ(n,e){return new eD(n,e)}function RQ(n){return{getToken:e=>JA(n,e),getLimitedUseToken:()=>TQ(n),addTokenListener:e=>MQ(n,"INTERNAL",e),removeTokenListener:e=>$F(n.app,e)}}var OQ="@firebase/app-check",LQ="0.10.1";var FQ="app-check",FF="app-check-internal";function VQ(){Ds(new qi(FQ,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return kQ(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(FF).initialize()})),Ds(new qi(FF,n=>{let e=n.getProvider("app-check").getImmediate();return RQ(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),zn(OQ,LQ)}VQ();var jQ="app-check";var is=class{constructor(){return Uc(jQ)}};var BQ=["localhost","0.0.0.0","127.0.0.1"],dSe=typeof window<"u"&&BQ.includes(window.location.hostname);var UQ="firebase",zQ="11.10.0";bi.registerVersion(UQ,zQ,"app-compat");var qQ=["ngOnDestroy"],WF=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(qQ.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let p=u?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Sb=class{constructor(e){return e}},ed=new Ke("angularfire2.app.options"),td=new Ke("angularfire2.app.name");function Pf(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=bi.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>bi.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;$Q("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Sb(s)}var $Q=(n,...e)=>{Ap()&&typeof console<"u"&&console[n](...e)},HQ={provide:Sb,useFactory:Pf,deps:[ed,Ut,[new Nr,td]]},GF=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ed,useValue:t},{provide:td,useValue:r}]}}constructor(t){bi.registerVersion("angularfire",Zr.full,"core"),bi.registerVersion("angularfire",Zr.full,"app-compat"),bi.registerVersion("angular",n0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ze(ki))};static \u0275mod=yr({type:n});static \u0275inj=dr({providers:[HQ]})}return n})();function Xp(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return WQ(i,s)||(HF("error",`${e} was already initialized on the ${t} Firebase App with different settings.${GQ?" You may need to reload as Firebase is not HMR aware.":""}`),HF("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function WQ(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var GQ=typeof module<"u"&&!!module.hot,HF=(n,...e)=>{Ap()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var nD=new Ke("angularfire2.auth.use-emulator"),rD=new Ke("angularfire2.auth.settings"),iD=new Ke("angularfire2.auth.tenant-id"),oD=new Ke("angularfire2.auth.langugage-code"),sD=new Ke("angularfire2.auth.use-device-language"),aD=new Ke("angularfire.auth.persistence"),cD=(n,e,t,r,i,o,s,a)=>Xp(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),kf=(()=>{class n{injector=Se(qn);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,u,p,m,g){let C=new ir,I=ht(void 0).pipe(oo(s.outsideAngular),Jn(()=>o.runOutsideAngular(()=>import("./chunk-NO5NGGK2.js"))),gt(()=>Pf(t,o,r)),gt(N=>cD(N,o,a,l,u,p,c,m)),d1({bufferSize:1,refCount:!1}));if(Pw(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ht(null);else{I.pipe(La()).subscribe();let N=I.pipe(Jn(j=>j.getRedirectResult().then(W=>W,()=>null)),Si(this.injector),d1({bufferSize:1,refCount:!1})),P=I.pipe(Jn(j=>new Bt(W=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(ae=>W.next(ae),ae=>W.error(ae),()=>W.complete()))})))),Q=I.pipe(Jn(j=>new Bt(W=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(ae=>W.next(ae),ae=>W.error(ae),()=>W.complete()))}))));this.authState=N.pipe(f1(P),sa(s.outsideAngular),oo(s.insideAngular)),this.user=N.pipe(f1(Q),sa(s.outsideAngular),oo(s.insideAngular)),this.idToken=this.user.pipe(Jn(j=>j?pn(j.getIdToken()):ht(null))),this.idTokenResult=this.user.pipe(Jn(j=>j?pn(j.getIdTokenResult()):ht(null))),this.credential=lC(N,C,this.authState.pipe(ai(j=>!j))).pipe(gt(j=>j?.user?j:null),sa(s.outsideAngular),oo(s.insideAngular))}return WF(this,I,o,{spy:{apply:(N,P,Q)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&Q.then(j=>C.next(j))}}})}static \u0275fac=function(r){return new(r||n)(ze(ed),ze(td,8),ze(ki),ze(Ut),ze(Qr),ze(nD,8),ze(rD,8),ze(iD,8),ze(oD,8),ze(sD,8),ze(aD,8),ze(is,8))};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),KF=(()=>{class n{constructor(){bi.registerVersion("angularfire",Zr.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=dr({providers:[kf]})}return n})();var YF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ZF={};var Ll,uD;(function(){var n;function e(z,M){function S(){}S.prototype=M.prototype,z.D=M.prototype,z.prototype=new S,z.prototype.constructor=z,z.C=function(V,b,A){for(var T=Array(arguments.length-2),te=2;te<arguments.length;te++)T[te-2]=arguments[te];return M.prototype[b].apply(V,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(z,M,S){S||(S=0);var V=Array(16);if(typeof M=="string")for(var b=0;16>b;++b)V[b]=M.charCodeAt(S++)|M.charCodeAt(S++)<<8|M.charCodeAt(S++)<<16|M.charCodeAt(S++)<<24;else for(b=0;16>b;++b)V[b]=M[S++]|M[S++]<<8|M[S++]<<16|M[S++]<<24;M=z.g[0],S=z.g[1],b=z.g[2];var A=z.g[3],T=M+(A^S&(b^A))+V[0]+3614090360&4294967295;M=S+(T<<7&4294967295|T>>>25),T=A+(b^M&(S^b))+V[1]+3905402710&4294967295,A=M+(T<<12&4294967295|T>>>20),T=b+(S^A&(M^S))+V[2]+606105819&4294967295,b=A+(T<<17&4294967295|T>>>15),T=S+(M^b&(A^M))+V[3]+3250441966&4294967295,S=b+(T<<22&4294967295|T>>>10),T=M+(A^S&(b^A))+V[4]+4118548399&4294967295,M=S+(T<<7&4294967295|T>>>25),T=A+(b^M&(S^b))+V[5]+1200080426&4294967295,A=M+(T<<12&4294967295|T>>>20),T=b+(S^A&(M^S))+V[6]+2821735955&4294967295,b=A+(T<<17&4294967295|T>>>15),T=S+(M^b&(A^M))+V[7]+4249261313&4294967295,S=b+(T<<22&4294967295|T>>>10),T=M+(A^S&(b^A))+V[8]+1770035416&4294967295,M=S+(T<<7&4294967295|T>>>25),T=A+(b^M&(S^b))+V[9]+2336552879&4294967295,A=M+(T<<12&4294967295|T>>>20),T=b+(S^A&(M^S))+V[10]+4294925233&4294967295,b=A+(T<<17&4294967295|T>>>15),T=S+(M^b&(A^M))+V[11]+2304563134&4294967295,S=b+(T<<22&4294967295|T>>>10),T=M+(A^S&(b^A))+V[12]+1804603682&4294967295,M=S+(T<<7&4294967295|T>>>25),T=A+(b^M&(S^b))+V[13]+4254626195&4294967295,A=M+(T<<12&4294967295|T>>>20),T=b+(S^A&(M^S))+V[14]+2792965006&4294967295,b=A+(T<<17&4294967295|T>>>15),T=S+(M^b&(A^M))+V[15]+1236535329&4294967295,S=b+(T<<22&4294967295|T>>>10),T=M+(b^A&(S^b))+V[1]+4129170786&4294967295,M=S+(T<<5&4294967295|T>>>27),T=A+(S^b&(M^S))+V[6]+3225465664&4294967295,A=M+(T<<9&4294967295|T>>>23),T=b+(M^S&(A^M))+V[11]+643717713&4294967295,b=A+(T<<14&4294967295|T>>>18),T=S+(A^M&(b^A))+V[0]+3921069994&4294967295,S=b+(T<<20&4294967295|T>>>12),T=M+(b^A&(S^b))+V[5]+3593408605&4294967295,M=S+(T<<5&4294967295|T>>>27),T=A+(S^b&(M^S))+V[10]+38016083&4294967295,A=M+(T<<9&4294967295|T>>>23),T=b+(M^S&(A^M))+V[15]+3634488961&4294967295,b=A+(T<<14&4294967295|T>>>18),T=S+(A^M&(b^A))+V[4]+3889429448&4294967295,S=b+(T<<20&4294967295|T>>>12),T=M+(b^A&(S^b))+V[9]+568446438&4294967295,M=S+(T<<5&4294967295|T>>>27),T=A+(S^b&(M^S))+V[14]+3275163606&4294967295,A=M+(T<<9&4294967295|T>>>23),T=b+(M^S&(A^M))+V[3]+4107603335&4294967295,b=A+(T<<14&4294967295|T>>>18),T=S+(A^M&(b^A))+V[8]+1163531501&4294967295,S=b+(T<<20&4294967295|T>>>12),T=M+(b^A&(S^b))+V[13]+2850285829&4294967295,M=S+(T<<5&4294967295|T>>>27),T=A+(S^b&(M^S))+V[2]+4243563512&4294967295,A=M+(T<<9&4294967295|T>>>23),T=b+(M^S&(A^M))+V[7]+1735328473&4294967295,b=A+(T<<14&4294967295|T>>>18),T=S+(A^M&(b^A))+V[12]+2368359562&4294967295,S=b+(T<<20&4294967295|T>>>12),T=M+(S^b^A)+V[5]+4294588738&4294967295,M=S+(T<<4&4294967295|T>>>28),T=A+(M^S^b)+V[8]+2272392833&4294967295,A=M+(T<<11&4294967295|T>>>21),T=b+(A^M^S)+V[11]+1839030562&4294967295,b=A+(T<<16&4294967295|T>>>16),T=S+(b^A^M)+V[14]+4259657740&4294967295,S=b+(T<<23&4294967295|T>>>9),T=M+(S^b^A)+V[1]+2763975236&4294967295,M=S+(T<<4&4294967295|T>>>28),T=A+(M^S^b)+V[4]+1272893353&4294967295,A=M+(T<<11&4294967295|T>>>21),T=b+(A^M^S)+V[7]+4139469664&4294967295,b=A+(T<<16&4294967295|T>>>16),T=S+(b^A^M)+V[10]+3200236656&4294967295,S=b+(T<<23&4294967295|T>>>9),T=M+(S^b^A)+V[13]+681279174&4294967295,M=S+(T<<4&4294967295|T>>>28),T=A+(M^S^b)+V[0]+3936430074&4294967295,A=M+(T<<11&4294967295|T>>>21),T=b+(A^M^S)+V[3]+3572445317&4294967295,b=A+(T<<16&4294967295|T>>>16),T=S+(b^A^M)+V[6]+76029189&4294967295,S=b+(T<<23&4294967295|T>>>9),T=M+(S^b^A)+V[9]+3654602809&4294967295,M=S+(T<<4&4294967295|T>>>28),T=A+(M^S^b)+V[12]+3873151461&4294967295,A=M+(T<<11&4294967295|T>>>21),T=b+(A^M^S)+V[15]+530742520&4294967295,b=A+(T<<16&4294967295|T>>>16),T=S+(b^A^M)+V[2]+3299628645&4294967295,S=b+(T<<23&4294967295|T>>>9),T=M+(b^(S|~A))+V[0]+4096336452&4294967295,M=S+(T<<6&4294967295|T>>>26),T=A+(S^(M|~b))+V[7]+1126891415&4294967295,A=M+(T<<10&4294967295|T>>>22),T=b+(M^(A|~S))+V[14]+2878612391&4294967295,b=A+(T<<15&4294967295|T>>>17),T=S+(A^(b|~M))+V[5]+4237533241&4294967295,S=b+(T<<21&4294967295|T>>>11),T=M+(b^(S|~A))+V[12]+1700485571&4294967295,M=S+(T<<6&4294967295|T>>>26),T=A+(S^(M|~b))+V[3]+2399980690&4294967295,A=M+(T<<10&4294967295|T>>>22),T=b+(M^(A|~S))+V[10]+4293915773&4294967295,b=A+(T<<15&4294967295|T>>>17),T=S+(A^(b|~M))+V[1]+2240044497&4294967295,S=b+(T<<21&4294967295|T>>>11),T=M+(b^(S|~A))+V[8]+1873313359&4294967295,M=S+(T<<6&4294967295|T>>>26),T=A+(S^(M|~b))+V[15]+4264355552&4294967295,A=M+(T<<10&4294967295|T>>>22),T=b+(M^(A|~S))+V[6]+2734768916&4294967295,b=A+(T<<15&4294967295|T>>>17),T=S+(A^(b|~M))+V[13]+1309151649&4294967295,S=b+(T<<21&4294967295|T>>>11),T=M+(b^(S|~A))+V[4]+4149444226&4294967295,M=S+(T<<6&4294967295|T>>>26),T=A+(S^(M|~b))+V[11]+3174756917&4294967295,A=M+(T<<10&4294967295|T>>>22),T=b+(M^(A|~S))+V[2]+718787259&4294967295,b=A+(T<<15&4294967295|T>>>17),T=S+(A^(b|~M))+V[9]+3951481745&4294967295,z.g[0]=z.g[0]+M&4294967295,z.g[1]=z.g[1]+(b+(T<<21&4294967295|T>>>11))&4294967295,z.g[2]=z.g[2]+b&4294967295,z.g[3]=z.g[3]+A&4294967295}r.prototype.u=function(z,M){M===void 0&&(M=z.length);for(var S=M-this.blockSize,V=this.B,b=this.h,A=0;A<M;){if(b==0)for(;A<=S;)i(this,z,A),A+=this.blockSize;if(typeof z=="string"){for(;A<M;)if(V[b++]=z.charCodeAt(A++),b==this.blockSize){i(this,V),b=0;break}}else for(;A<M;)if(V[b++]=z[A++],b==this.blockSize){i(this,V),b=0;break}}this.h=b,this.o+=M},r.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var M=1;M<z.length-8;++M)z[M]=0;var S=8*this.o;for(M=z.length-8;M<z.length;++M)z[M]=S&255,S/=256;for(this.u(z),z=Array(16),M=S=0;4>M;++M)for(var V=0;32>V;V+=8)z[S++]=this.g[M]>>>V&255;return z};function o(z,M){var S=a;return Object.prototype.hasOwnProperty.call(S,z)?S[z]:S[z]=M(z)}function s(z,M){this.h=M;for(var S=[],V=!0,b=z.length-1;0<=b;b--){var A=z[b]|0;V&&A==M||(S[b]=A,V=!1)}this.g=S}var a={};function c(z){return-128<=z&&128>z?o(z,function(M){return new s([M|0],0>M?-1:0)}):new s([z|0],0>z?-1:0)}function l(z){if(isNaN(z)||!isFinite(z))return p;if(0>z)return N(l(-z));for(var M=[],S=1,V=0;z>=S;V++)M[V]=z/S|0,S*=4294967296;return new s(M,0)}function u(z,M){if(z.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(z.charAt(0)=="-")return N(u(z.substring(1),M));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=l(Math.pow(M,8)),V=p,b=0;b<z.length;b+=8){var A=Math.min(8,z.length-b),T=parseInt(z.substring(b,b+A),M);8>A?(A=l(Math.pow(M,A)),V=V.j(A).add(l(T))):(V=V.j(S),V=V.add(l(T)))}return V}var p=c(0),m=c(1),g=c(16777216);n=s.prototype,n.m=function(){if(I(this))return-N(this).m();for(var z=0,M=1,S=0;S<this.g.length;S++){var V=this.i(S);z+=(0<=V?V:4294967296+V)*M,M*=4294967296}return z},n.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(C(this))return"0";if(I(this))return"-"+N(this).toString(z);for(var M=l(Math.pow(z,6)),S=this,V="";;){var b=W(S,M).g;S=P(S,b.j(M));var A=((0<S.g.length?S.g[0]:S.h)>>>0).toString(z);if(S=b,C(S))return A+V;for(;6>A.length;)A="0"+A;V=A+V}},n.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function C(z){if(z.h!=0)return!1;for(var M=0;M<z.g.length;M++)if(z.g[M]!=0)return!1;return!0}function I(z){return z.h==-1}n.l=function(z){return z=P(this,z),I(z)?-1:C(z)?0:1};function N(z){for(var M=z.g.length,S=[],V=0;V<M;V++)S[V]=~z.g[V];return new s(S,~z.h).add(m)}n.abs=function(){return I(this)?N(this):this},n.add=function(z){for(var M=Math.max(this.g.length,z.g.length),S=[],V=0,b=0;b<=M;b++){var A=V+(this.i(b)&65535)+(z.i(b)&65535),T=(A>>>16)+(this.i(b)>>>16)+(z.i(b)>>>16);V=T>>>16,A&=65535,T&=65535,S[b]=T<<16|A}return new s(S,S[S.length-1]&-2147483648?-1:0)};function P(z,M){return z.add(N(M))}n.j=function(z){if(C(this)||C(z))return p;if(I(this))return I(z)?N(this).j(N(z)):N(N(this).j(z));if(I(z))return N(this.j(N(z)));if(0>this.l(g)&&0>z.l(g))return l(this.m()*z.m());for(var M=this.g.length+z.g.length,S=[],V=0;V<2*M;V++)S[V]=0;for(V=0;V<this.g.length;V++)for(var b=0;b<z.g.length;b++){var A=this.i(V)>>>16,T=this.i(V)&65535,te=z.i(b)>>>16,be=z.i(b)&65535;S[2*V+2*b]+=T*be,Q(S,2*V+2*b),S[2*V+2*b+1]+=A*be,Q(S,2*V+2*b+1),S[2*V+2*b+1]+=T*te,Q(S,2*V+2*b+1),S[2*V+2*b+2]+=A*te,Q(S,2*V+2*b+2)}for(V=0;V<M;V++)S[V]=S[2*V+1]<<16|S[2*V];for(V=M;V<2*M;V++)S[V]=0;return new s(S,0)};function Q(z,M){for(;(z[M]&65535)!=z[M];)z[M+1]+=z[M]>>>16,z[M]&=65535,M++}function j(z,M){this.g=z,this.h=M}function W(z,M){if(C(M))throw Error("division by zero");if(C(z))return new j(p,p);if(I(z))return M=W(N(z),M),new j(N(M.g),N(M.h));if(I(M))return M=W(z,N(M)),new j(N(M.g),M.h);if(30<z.g.length){if(I(z)||I(M))throw Error("slowDivide_ only works with positive integers.");for(var S=m,V=M;0>=V.l(z);)S=ae(S),V=ae(V);var b=me(S,1),A=me(V,1);for(V=me(V,2),S=me(S,2);!C(V);){var T=A.add(V);0>=T.l(z)&&(b=b.add(S),A=T),V=me(V,1),S=me(S,1)}return M=P(z,b.j(M)),new j(b,M)}for(b=p;0<=z.l(M);){for(S=Math.max(1,Math.floor(z.m()/M.m())),V=Math.ceil(Math.log(S)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),A=l(S),T=A.j(M);I(T)||0<T.l(z);)S-=V,A=l(S),T=A.j(M);C(A)&&(A=m),b=b.add(A),z=P(z,T)}return new j(b,z)}n.A=function(z){return W(this,z).h},n.and=function(z){for(var M=Math.max(this.g.length,z.g.length),S=[],V=0;V<M;V++)S[V]=this.i(V)&z.i(V);return new s(S,this.h&z.h)},n.or=function(z){for(var M=Math.max(this.g.length,z.g.length),S=[],V=0;V<M;V++)S[V]=this.i(V)|z.i(V);return new s(S,this.h|z.h)},n.xor=function(z){for(var M=Math.max(this.g.length,z.g.length),S=[],V=0;V<M;V++)S[V]=this.i(V)^z.i(V);return new s(S,this.h^z.h)};function ae(z){for(var M=z.g.length+1,S=[],V=0;V<M;V++)S[V]=z.i(V)<<1|z.i(V-1)>>>31;return new s(S,z.h)}function me(z,M){var S=M>>5;M%=32;for(var V=z.g.length-S,b=[],A=0;A<V;A++)b[A]=0<M?z.i(A+S)>>>M|z.i(A+S+1)<<32-M:z.i(A+S);return new s(b,z.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uD=ZF.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=u,Ll=ZF.Integer=s}).apply(typeof YF<"u"?YF:typeof self<"u"?self:typeof window<"u"?window:{});var Ab=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fl={};var dD,KQ,Jp,fD,_v,Db,hD,pD,gD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,E){return f==Array.prototype||f==Object.prototype||(f[_]=E.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ab=="object"&&Ab];for(var _=0;_<f.length;++_){var E=f[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(f,_){if(_)e:{var E=r;f=f.split(".");for(var B=0;B<f.length-1;B++){var le=f[B];if(!(le in E))break e;E=E[le]}f=f[f.length-1],B=E[f],_=_(B),_!=B&&_!=null&&e(E,f,{configurable:!0,writable:!0,value:_})}}function o(f,_){f instanceof String&&(f+="");var E=0,B=!1,le={next:function(){if(!B&&E<f.length){var Ee=E++;return{value:_(Ee,f[Ee]),done:!1}}return B=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}i("Array.prototype.values",function(f){return f||function(){return o(this,function(_,E){return E})}});var s=s||{},a=this||self;function c(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function l(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function u(f,_,E){return f.call.apply(f.bind,arguments)}function p(f,_,E){if(!f)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,B),f.apply(_,le)}}return function(){return f.apply(_,arguments)}}function m(f,_,E){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:p,m.apply(null,arguments)}function g(f,_){var E=Array.prototype.slice.call(arguments,1);return function(){var B=E.slice();return B.push.apply(B,arguments),f.apply(this,B)}}function C(f,_){function E(){}E.prototype=_.prototype,f.aa=_.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(B,le,Ee){for(var Ye=Array(arguments.length-2),Dn=2;Dn<arguments.length;Dn++)Ye[Dn-2]=arguments[Dn];return _.prototype[le].apply(B,Ye)}}function I(f){let _=f.length;if(0<_){let E=Array(_);for(let B=0;B<_;B++)E[B]=f[B];return E}return[]}function N(f,_){for(let E=1;E<arguments.length;E++){let B=arguments[E];if(c(B)){let le=f.length||0,Ee=B.length||0;f.length=le+Ee;for(let Ye=0;Ye<Ee;Ye++)f[le+Ye]=B[Ye]}else f.push(B)}}class P{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function Q(f){return/^[\s\xa0]*$/.test(f)}function j(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function W(f){return W[" "](f),f}W[" "]=function(){};var ae=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function me(f,_,E){for(let B in f)_.call(E,f[B],B,f)}function z(f,_){for(let E in f)_.call(void 0,f[E],E,f)}function M(f){let _={};for(let E in f)_[E]=f[E];return _}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,_){let E,B;for(let le=1;le<arguments.length;le++){B=arguments[le];for(E in B)f[E]=B[E];for(let Ee=0;Ee<S.length;Ee++)E=S[Ee],Object.prototype.hasOwnProperty.call(B,E)&&(f[E]=B[E])}}function b(f){var _=1;f=f.split(":");let E=[];for(;0<_&&f.length;)E.push(f.shift()),_--;return f.length&&E.push(f.join(":")),E}function A(f){a.setTimeout(()=>{throw f},0)}function T(){var f=Te;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class te{constructor(){this.h=this.g=null}add(_,E){let B=be.get();B.set(_,E),this.h?this.h.next=B:this.g=B,this.h=B}}var be=new P(()=>new De,f=>f.reset());class De{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,he=!1,Te=new te,Ge=()=>{let f=a.Promise.resolve(void 0);Ae=()=>{f.then(Le)}};var Le=()=>{for(var f;f=T();){try{f.h.call(f.g)}catch(E){A(E)}var _=be;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}he=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return f})();function re(f,_){if(G.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,B=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(ae){e:{try{W(_.nodeName);var le=!0;break e}catch{}le=!1}le||(_=null)}}else E=="mouseover"?_=f.fromElement:E=="mouseout"&&(_=f.toElement);this.relatedTarget=_,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:oe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&re.aa.h.call(this)}}C(re,G);var oe={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),xe=0;function Ie(f,_,E,B,le){this.listener=f,this.proxy=null,this.src=_,this.type=E,this.capture=!!B,this.ha=le,this.key=++xe,this.da=this.fa=!1}function Pe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function $e(f){this.src=f,this.g={},this.h=0}$e.prototype.add=function(f,_,E,B,le){var Ee=f.toString();f=this.g[Ee],f||(f=this.g[Ee]=[],this.h++);var Ye=He(f,_,B,le);return-1<Ye?(_=f[Ye],E||(_.fa=!1)):(_=new Ie(_,this.src,Ee,!!B,le),_.fa=E,f.push(_)),_};function et(f,_){var E=_.type;if(E in f.g){var B=f.g[E],le=Array.prototype.indexOf.call(B,_,void 0),Ee;(Ee=0<=le)&&Array.prototype.splice.call(B,le,1),Ee&&(Pe(_),f.g[E].length==0&&(delete f.g[E],f.h--))}}function He(f,_,E,B){for(var le=0;le<f.length;++le){var Ee=f[le];if(!Ee.da&&Ee.listener==_&&Ee.capture==!!E&&Ee.ha==B)return le}return-1}var st="closure_lm_"+(1e6*Math.random()|0),H={};function Ze(f,_,E,B,le){if(B&&B.once)return Ue(f,_,E,B,le);if(Array.isArray(_)){for(var Ee=0;Ee<_.length;Ee++)Ze(f,_[Ee],E,B,le);return null}return E=Wt(E),f&&f[ue]?f.K(_,E,l(B)?!!B.capture:!!B,le):Rt(f,_,E,!1,B,le)}function Rt(f,_,E,B,le,Ee){if(!_)throw Error("Invalid event type");var Ye=l(le)?!!le.capture:!!le,Dn=Cn(f);if(Dn||(f[st]=Dn=new $e(f)),E=Dn.add(_,E,B,Ye,Ee),E.proxy)return E;if(B=At(),E.proxy=B,B.src=f,B.listener=E,f.addEventListener)J||(le=Ye),le===void 0&&(le=!1),f.addEventListener(_.toString(),B,le);else if(f.attachEvent)f.attachEvent(Et(_.toString()),B);else if(f.addListener&&f.removeListener)f.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return E}function At(){function f(E){return _.call(f.src,f.listener,E)}let _=It;return f}function Ue(f,_,E,B,le){if(Array.isArray(_)){for(var Ee=0;Ee<_.length;Ee++)Ue(f,_[Ee],E,B,le);return null}return E=Wt(E),f&&f[ue]?f.L(_,E,l(B)?!!B.capture:!!B,le):Rt(f,_,E,!0,B,le)}function Dt(f,_,E,B,le){if(Array.isArray(_))for(var Ee=0;Ee<_.length;Ee++)Dt(f,_[Ee],E,B,le);else B=l(B)?!!B.capture:!!B,E=Wt(E),f&&f[ue]?(f=f.i,_=String(_).toString(),_ in f.g&&(Ee=f.g[_],E=He(Ee,E,B,le),-1<E&&(Pe(Ee[E]),Array.prototype.splice.call(Ee,E,1),Ee.length==0&&(delete f.g[_],f.h--)))):f&&(f=Cn(f))&&(_=f.g[_.toString()],f=-1,_&&(f=He(_,E,B,le)),(E=-1<f?_[f]:null)&&at(E))}function at(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[ue])et(_.i,f);else{var E=f.type,B=f.proxy;_.removeEventListener?_.removeEventListener(E,B,f.capture):_.detachEvent?_.detachEvent(Et(E),B):_.addListener&&_.removeListener&&_.removeListener(B),(E=Cn(_))?(et(E,f),E.h==0&&(E.src=null,_[st]=null)):Pe(f)}}}function Et(f){return f in H?H[f]:H[f]="on"+f}function It(f,_){if(f.da)f=!0;else{_=new re(_,this);var E=f.listener,B=f.ha||f.src;f.fa&&at(f),f=E.call(B,_)}return f}function Cn(f){return f=f[st],f instanceof $e?f:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wt(f){return typeof f=="function"?f:(f[gn]||(f[gn]=function(_){return f.handleEvent(_)}),f[gn])}function Lt(){L.call(this),this.i=new $e(this),this.M=this,this.F=null}C(Lt,L),Lt.prototype[ue]=!0,Lt.prototype.removeEventListener=function(f,_,E,B){Dt(this,f,_,E,B)};function Ft(f,_){var E,B=f.F;if(B)for(E=[];B;B=B.F)E.push(B);if(f=f.M,B=_.type||_,typeof _=="string")_=new G(_,f);else if(_ instanceof G)_.target=_.target||f;else{var le=_;_=new G(B,f),V(_,le)}if(le=!0,E)for(var Ee=E.length-1;0<=Ee;Ee--){var Ye=_.g=E[Ee];le=pt(Ye,B,!0,_)&&le}if(Ye=_.g=f,le=pt(Ye,B,!0,_)&&le,le=pt(Ye,B,!1,_)&&le,E)for(Ee=0;Ee<E.length;Ee++)Ye=_.g=E[Ee],le=pt(Ye,B,!1,_)&&le}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var E=f.g[_],B=0;B<E.length;B++)Pe(E[B]);delete f.g[_],f.h--}}this.F=null},Lt.prototype.K=function(f,_,E,B){return this.i.add(String(f),_,!1,E,B)},Lt.prototype.L=function(f,_,E,B){return this.i.add(String(f),_,!0,E,B)};function pt(f,_,E,B){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var le=!0,Ee=0;Ee<_.length;++Ee){var Ye=_[Ee];if(Ye&&!Ye.da&&Ye.capture==E){var Dn=Ye.listener,Tr=Ye.ha||Ye.src;Ye.fa&&et(f.i,Ye),le=Dn.call(Tr,B)!==!1&&le}}return le&&!B.defaultPrevented}function Qt(f,_,E){if(typeof f=="function")E&&(f=m(f,E));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(f,_||0)}function xt(f){f.g=Qt(()=>{f.g=null,f.i&&(f.i=!1,xt(f))},f.l);let _=f.h;f.h=null,f.m.apply(null,_)}class Sr extends L{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(f){L.call(this),this.h=f,this.g={}}C(vn,L);var on=[];function sn(f){me(f.g,function(_,E){this.g.hasOwnProperty(E)&&at(_)},f),f.g={}}vn.prototype.N=function(){vn.aa.N.call(this),sn(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kn=a.JSON.stringify,Nt=a.JSON.parse,Yn=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Ot(){}Ot.prototype.h=null;function Zt(f){return f.h||(f.h=f.i())}function tr(){}var en={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kt(){G.call(this,"d")}C(kt,G);function In(){G.call(this,"c")}C(In,G);var bo={},gi=null;function Ho(){return gi=gi||new Lt}bo.La="serverreachability";function fs(f){G.call(this,bo.La,f)}C(fs,G);function Mt(f){let _=Ho();Ft(_,new fs(_))}bo.STAT_EVENT="statevent";function Ys(f,_){G.call(this,bo.STAT_EVENT,f),this.stat=_}C(Ys,G);function pr(f){let _=Ho();Ft(_,new Ys(_,f))}bo.Ma="timingevent";function xo(f,_){G.call(this,bo.Ma,f),this.size=_}C(xo,G);function Ti(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},_)}function Zn(){this.g=!0}Zn.prototype.xa=function(){this.g=!1};function oi(f,_,E,B,le,Ee){f.info(function(){if(f.g)if(Ee)for(var Ye="",Dn=Ee.split("&"),Tr=0;Tr<Dn.length;Tr++){var $t=Dn[Tr].split("=");if(1<$t.length){var lr=$t[0];$t=$t[1];var Mr=lr.split("_");Ye=2<=Mr.length&&Mr[1]=="type"?Ye+(lr+"="+$t+"&"):Ye+(lr+"=redacted&")}}else Ye=null;else Ye=Ee;return"XMLHTTP REQ ("+B+") [attempt "+le+"]: "+_+`
`+E+`
`+Ye})}function mi(f,_,E,B,le,Ee,Ye){f.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+le+"]: "+_+`
`+E+`
`+Ee+" "+Ye})}function Wo(f,_,E,B){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+hs(f,E)+(B?" "+B:"")})}function cc(f,_){f.info(function(){return"TIMEOUT: "+_})}Zn.prototype.info=function(){};function hs(f,_){if(!f.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var B=E[f];if(!(2>B.length)){var le=B[1];if(Array.isArray(le)&&!(1>le.length)){var Ee=le[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(var Ye=1;Ye<le.length;Ye++)le[Ye]=""}}}}return Kn(E)}catch{return _}}var Eo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Go={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Co;function Vi(){}C(Vi,Ot),Vi.prototype.g=function(){return new XMLHttpRequest},Vi.prototype.i=function(){return{}},Co=new Vi;function Xi(f,_,E,B){this.j=f,this.i=_,this.l=E,this.R=B||1,this.U=new vn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ps}function ps(){this.i=null,this.g="",this.h=!1}var lc={},uc={};function dc(f,_,E){f.L=1,f.v=dl(Ko(_)),f.m=E,f.P=!0,cl(f,null)}function cl(f,_){f.F=Date.now(),ll(f),f.A=Ko(f.v);var E=f.A,B=f.R;Array.isArray(B)||(B=[String(B)]),qt(E.i,"t",B),f.C=0,E=f.j.J,f.h=new ps,f.g=Dr(f.j,E?_:null,!f.m),0<f.O&&(f.M=new Sr(m(f.Y,f,f.g),f.O)),_=f.U,E=f.g,B=f.ca;var le="readystatechange";Array.isArray(le)||(le&&(on[0]=le.toString()),le=on);for(var Ee=0;Ee<le.length;Ee++){var Ye=Ze(E,le[Ee],B||_.handleEvent,!1,_.h||_);if(!Ye)break;_.g[Ye.key]=Ye}_=f.H?M(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),Mt(),oi(f.i,f.u,f.A,f.l,f.R,f.m)}Xi.prototype.ca=function(f){f=f.target;let _=this.M;_&&Yo(f)==3?_.j():this.Y(f)},Xi.prototype.Y=function(f){try{if(f==this.g)e:{let Mr=Yo(this.g);var _=this.g.Ba();let Ma=this.g.Z();if(!(3>Mr)&&(Mr!=3||this.g&&(this.h.h||this.g.oa()||Hd(this.g)))){this.J||Mr!=4||_==7||(_==8||0>=Ma?Mt(3):Mt(2)),Ji(this);var E=this.g.Z();this.X=E;t:if(Ah(this)){var B=Hd(this.g);f="";var le=B.length,Ee=Yo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zs(this),Ia(this);var Ye="";break t}this.h.i=new a.TextDecoder}for(_=0;_<le;_++)this.h.h=!0,f+=this.h.i.decode(B[_],{stream:!(Ee&&_==le-1)});B.length=0,this.h.g+=f,this.C=0,Ye=this.h.g}else Ye=this.g.oa();if(this.o=E==200,mi(this.i,this.u,this.A,this.l,this.R,Mr,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Dn,Tr=this.g;if((Dn=Tr.g?Tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Dn)){var $t=Dn;break t}}$t=null}if(E=$t)Wo(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ul(this,E);else{this.o=!1,this.s=3,pr(12),Zs(this),Ia(this);break e}}if(this.P){E=!0;let wr;for(;!this.J&&this.C<Ye.length;)if(wr=Fd(this,Ye),wr==uc){Mr==4&&(this.s=4,pr(14),E=!1),Wo(this.i,this.l,null,"[Incomplete Response]");break}else if(wr==lc){this.s=4,pr(15),Wo(this.i,this.l,Ye,"[Invalid Chunk]"),E=!1;break}else Wo(this.i,this.l,wr,null),ul(this,wr);if(Ah(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mr!=4||Ye.length!=0||this.h.h||(this.s=1,pr(16),E=!1),this.o=this.o&&E,!E)Wo(this.i,this.l,Ye,"[Invalid Chunked Response]"),Zs(this),Ia(this);else if(0<Ye.length&&!this.W){this.W=!0;var lr=this.j;lr.g==this&&lr.ba&&!lr.M&&(lr.j.info("Great, no buffering proxy detected. Bytes received: "+Ye.length),vt(lr),lr.M=!0,pr(11))}}else Wo(this.i,this.l,Ye,null),ul(this,Ye);Mr==4&&Zs(this),this.o&&!this.J&&(Mr==4?_n(this.j,this):(this.o=!1,ll(this)))}else Da(this.g),E==400&&0<Ye.indexOf("Unknown SID")?(this.s=3,pr(12)):(this.s=0,pr(13)),Zs(this),Ia(this)}}}catch{}finally{}};function Ah(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Fd(f,_){var E=f.C,B=_.indexOf(`
`,E);return B==-1?uc:(E=Number(_.substring(E,B)),isNaN(E)?lc:(B+=1,B+E>_.length?uc:(_=_.slice(B,B+E),f.C=B+E,_)))}Xi.prototype.cancel=function(){this.J=!0,Zs(this)};function ll(f){f.S=Date.now()+f.I,Vd(f,f.I)}function Vd(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ti(m(f.ba,f),_)}function Ji(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Xi.prototype.ba=function(){this.B=null;let f=Date.now();0<=f-this.S?(cc(this.i,this.A),this.L!=2&&(Mt(),pr(17)),Zs(this),this.s=2,Ia(this)):Vd(this,this.S-f)};function Ia(f){f.j.G==0||f.J||_n(f.j,f)}function Zs(f){Ji(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,sn(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function ul(f,_){try{var E=f.j;if(E.G!=0&&(E.g==f||fc(E.h,f))){if(!f.K&&fc(E.h,f)&&E.G==3){try{var B=E.Da.g.parse(_)}catch{B=null}if(Array.isArray(B)&&B.length==3){var le=B;if(le[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)Gt(E),ml(E);else break e;dt(E),pr(18)}}else E.za=le[1],0<E.za-E.T&&37500>le[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ti(m(E.Za,E),6e3));if(1>=gs(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Xn(E,11)}else if((f.K||E.g==f)&&Gt(E),!Q(_))for(le=E.Da.g.parse(_),_=0;_<le.length;_++){let $t=le[_];if(E.T=$t[0],$t=$t[1],E.G==2)if($t[0]=="c"){E.K=$t[1],E.ia=$t[2];let lr=$t[3];lr!=null&&(E.la=lr,E.j.info("VER="+E.la));let Mr=$t[4];Mr!=null&&(E.Aa=Mr,E.j.info("SVER="+E.Aa));let Ma=$t[5];Ma!=null&&typeof Ma=="number"&&0<Ma&&(B=1.5*Ma,E.L=B,E.j.info("backChannelRequestTimeoutMs_="+B)),B=E;let wr=f.g;if(wr){let na=wr.g?wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var Ee=B.h;Ee.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(Ud(Ee,Ee.h),Ee.h=null))}if(B.D){let vl=wr.g?wr.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(B.ya=vl,Rn(B.I,B.D,vl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),B=E;var Ye=f;if(B.qa=Lr(B,B.J?B.ia:null,B.W),Ye.K){Ar(B.h,Ye);var Dn=Ye,Tr=B.L;Tr&&(Dn.I=Tr),Dn.B&&(Ji(Dn),ll(Dn)),B.g=Ye}else je(B);0<E.i.length&&k(E)}else $t[0]!="stop"&&$t[0]!="close"||Xn(E,7);else E.G==3&&($t[0]=="stop"||$t[0]=="close"?$t[0]=="stop"?Xn(E,7):Ta(E):$t[0]!="noop"&&E.l&&E.l.ta($t),E.v=0)}}Mt(4)}catch{}}var Dh=class{constructor(f,_){this.g=f,this.map=_}};function jd(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bd(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function gs(f){return f.h?1:f.g?f.g.size:0}function fc(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Ud(f,_){f.g?f.g.add(_):f.h=_}function Ar(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}jd.prototype.cancel=function(){if(this.i=zd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function zd(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(let E of f.g.values())_=_.concat(E.D);return _}return I(f.i)}function Qs(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var _=[],E=f.length,B=0;B<E;B++)_.push(f[B]);return _}_=[],E=0;for(B in f)_[E++]=f[B];return _}function nu(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var _=[];f=f.length;for(var E=0;E<f;E++)_.push(E);return _}_=[],E=0;for(let B in f)_[E++]=B;return _}}}function qd(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var E=nu(f),B=Qs(f),le=B.length,Ee=0;Ee<le;Ee++)_.call(void 0,B[Ee],E&&E[Ee],f)}var Io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zr(f,_){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var B=f[E].indexOf("="),le=null;if(0<=B){var Ee=f[E].substring(0,B);le=f[E].substring(B+1)}else Ee=f[E];_(Ee,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function ji(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof ji){this.h=f.h,ru(this,f.j),this.o=f.o,this.g=f.g,iu(this,f.s),this.l=f.l;var _=f.i,E=new fl;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),ms(this,E),this.m=f.m}else f&&(_=String(f).match(Io))?(this.h=!1,ru(this,_[1]||"",!0),this.o=Xs(_[2]||""),this.g=Xs(_[3]||"",!0),iu(this,_[4]),this.l=Xs(_[5]||"",!0),ms(this,_[6]||"",!0),this.m=Xs(_[7]||"")):(this.h=!1,this.i=new fl(null,this.h))}ji.prototype.toString=function(){var f=[],_=this.j;_&&f.push(vs(_,Th,!0),":");var E=this.g;return(E||_=="file")&&(f.push("//"),(_=this.o)&&f.push(vs(_,Th,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(vs(E,E.charAt(0)=="/"?$d:Em,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",vs(E,ys)),f.join("")};function Ko(f){return new ji(f)}function ru(f,_,E){f.j=E?Xs(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function iu(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function ms(f,_,E){_ instanceof fl?(f.i=_,Cm(f.i,f.h)):(E||(_=vs(_,Mh)),f.i=new fl(_,f.h))}function Rn(f,_,E){f.i.set(_,E)}function dl(f){return Rn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Xs(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function vs(f,_,E){return typeof f=="string"?(f=encodeURI(f).replace(_,xm),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function xm(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Th=/[#\/\?@]/g,Em=/[#\?:]/g,$d=/[#\?]/g,Mh=/[#\?@]/g,ys=/#/g;function fl(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function eo(f){f.g||(f.g=new Map,f.h=0,f.i&&zr(f.i,function(_,E){f.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=fl.prototype,n.add=function(f,_){eo(this),this.i=null,f=hc(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(_),this.h+=1,this};function ou(f,_){eo(f),_=hc(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Nh(f,_){return eo(f),_=hc(f,_),f.g.has(_)}n.forEach=function(f,_){eo(this),this.g.forEach(function(E,B){E.forEach(function(le){f.call(_,le,B,this)},this)},this)},n.na=function(){eo(this);let f=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let B=0;B<_.length;B++){let le=f[B];for(let Ee=0;Ee<le.length;Ee++)E.push(_[B])}return E},n.V=function(f){eo(this);let _=[];if(typeof f=="string")Nh(this,f)&&(_=_.concat(this.g.get(hc(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)_=_.concat(f[E])}return _},n.set=function(f,_){return eo(this),this.i=null,f=hc(this,f),Nh(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function qt(f,_,E){ou(f,_),0<E.length&&(f.i=null,f.g.set(hc(f,_),I(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var B=_[E];let Ee=encodeURIComponent(String(B)),Ye=this.V(B);for(B=0;B<Ye.length;B++){var le=Ee;Ye[B]!==""&&(le+="="+encodeURIComponent(String(Ye[B]))),f.push(le)}}return this.i=f.join("&")};function hc(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Cm(f,_){_&&!f.j&&(eo(f),f.i=null,f.g.forEach(function(E,B){var le=B.toLowerCase();B!=le&&(ou(this,B),qt(this,le,E))},f)),f.j=_}function Im(f,_){let E=new Zn;if(a.Image){let B=new Image;B.onload=g(Mi,E,"TestLoadImage: loaded",!0,_,B),B.onerror=g(Mi,E,"TestLoadImage: error",!1,_,B),B.onabort=g(Mi,E,"TestLoadImage: abort",!1,_,B),B.ontimeout=g(Mi,E,"TestLoadImage: timeout",!1,_,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=f}else _(!1)}function Sa(f,_){let E=new Zn,B=new AbortController,le=setTimeout(()=>{B.abort(),Mi(E,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:B.signal}).then(Ee=>{clearTimeout(le),Ee.ok?Mi(E,"TestPingServer: ok",!0,_):Mi(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(le),Mi(E,"TestPingServer: error",!1,_)})}function Mi(f,_,E,B,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),B(E)}catch{}}function Sm(){this.g=new Yn}function Am(f,_,E){let B=E||"";try{qd(f,function(le,Ee){let Ye=le;l(le)&&(Ye=Kn(le)),_.push(B+Ee+"="+encodeURIComponent(Ye))})}catch(le){throw _.push(B+"type="+encodeURIComponent("_badmap")),le}}function Js(f){this.l=f.Ub||null,this.j=f.eb||!1}C(Js,Ot),Js.prototype.g=function(){return new pc(this.l,this.j)},Js.prototype.i=(function(f){return function(){return f}})({});function pc(f,_){Lt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(pc,Lt),n=pc.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,So(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hl(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,So(this)),this.g&&(this.readyState=3,So(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function gc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?hl(this):So(this),this.readyState==3&&gc(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,hl(this))},n.Qa=function(f){this.g&&(this.response=f,hl(this))},n.ga=function(){this.g&&hl(this)};function hl(f){f.readyState=4,f.l=null,f.j=null,f.v=null,So(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=_.next();return f.join(`\r
`)};function So(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ph(f){let _="";return me(f,function(E,B){_+=B,_+=":",_+=E,_+=`\r
`}),_}function pl(f,_,E){e:{for(B in E){var B=!1;break e}B=!0}B||(E=Ph(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):Rn(f,_,E))}function Qn(f){Lt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Qn,Lt);var kh=/^https?$/i,Aa=["POST","PUT"];n=Qn.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,E,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Co.g(),this.v=this.o?Zt(this.o):Zt(Co),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(Ee){su(this,Ee);return}if(f=E||"",E=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var le in B)E.set(le,B[le]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(let Ee of B.keys())E.set(Ee,B.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(E.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),le=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Aa,_,void 0))||B||le||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[Ee,Ye]of E)this.g.setRequestHeader(Ee,Ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cu(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ee){su(this,Ee)}};function su(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,gl(f),ea(f)}function gl(f){f.A||(f.A=!0,Ft(f,"complete"),Ft(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ft(this,"complete"),Ft(this,"abort"),ea(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ea(this,!0)),Qn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?au(this):this.bb())},n.bb=function(){au(this)};function au(f){if(f.h&&typeof s<"u"&&(!f.v[1]||Yo(f)!=4||f.Z()!=2)){if(f.u&&Yo(f)==4)Qt(f.Ea,0,f);else if(Ft(f,"readystatechange"),Yo(f)==4){f.h=!1;try{let Ye=f.Z();e:switch(Ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var B;if(B=Ye===0){var le=String(f.D).match(Io)[1]||null;!le&&a.self&&a.self.location&&(le=a.self.location.protocol.slice(0,-1)),B=!kh.test(le?le.toLowerCase():"")}E=B}if(E)Ft(f,"complete"),Ft(f,"success");else{f.m=6;try{var Ee=2<Yo(f)?f.g.statusText:""}catch{Ee=""}f.l=Ee+" ["+f.Z()+"]",gl(f)}}finally{ea(f)}}}}function ea(f,_){if(f.g){cu(f);let E=f.g,B=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Ft(f,"ready");try{E.onreadystatechange=B}catch{}}}function cu(f){f.I&&(a.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Yo(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Yo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Nt(_)}};function Hd(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Da(f){let _={};f=(f.g&&2<=Yo(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<f.length;B++){if(Q(f[B]))continue;var E=b(f[B]);let le=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();let Ee=_[le]||[];_[le]=Ee,Ee.push(E)}z(_,function(B){return B.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ao(f,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||_}function Wd(f){this.Aa=0,this.i=[],this.j=new Zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ao("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ao("baseRetryDelayMs",5e3,f),this.cb=Ao("retryDelaySeedMs",1e4,f),this.Wa=Ao("forwardChannelMaxRetries",2,f),this.wa=Ao("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new jd(f&&f.concurrentRequestLimit),this.Da=new Sm,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Wd.prototype,n.la=8,n.G=1,n.connect=function(f,_,E,B){pr(0),this.W=f,this.H=_||{},E&&B!==void 0&&(this.H.OSID=E,this.H.OAID=B),this.F=this.X,this.I=Lr(this,null,this.W),k(this)};function Ta(f){if(v(f),f.G==3){var _=f.U++,E=Ko(f.I);if(Rn(E,"SID",f.K),Rn(E,"RID",_),Rn(E,"TYPE","terminate"),de(f,E),_=new Xi(f,f.j,_),_.L=2,_.v=dl(Ko(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&(new Image().src=_.v,E=!0),E||(_.g=Dr(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ll(_)}jn(f)}function ml(f){f.g&&(vt(f),f.g.cancel(),f.g=null)}function v(f){ml(f),f.u&&(a.clearTimeout(f.u),f.u=null),Gt(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function k(f){if(!Bd(f.h)&&!f.s){f.s=!0;var _=f.Ga;Ae||Ge(),he||(Ae(),he=!0),Te.add(_,f),f.B=0}}function K(f,_){return gs(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ti(m(f.Ga,f,_),cr(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;let le=new Xi(this,this.j,f),Ee=this.o;if(this.S&&(Ee?(Ee=M(Ee),V(Ee,this.S)):Ee=this.S),this.m!==null||this.O||(le.H=Ee,Ee=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var B=this.i[E];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(_+=B,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=ke(this,le,_),E=Ko(this.I),Rn(E,"RID",f),Rn(E,"CVER",22),this.D&&Rn(E,"X-HTTP-Session-Id",this.D),de(this,E),Ee&&(this.O?_="headers="+encodeURIComponent(String(Ph(Ee)))+"&"+_:this.m&&pl(E,this.m,Ee)),Ud(this.h,le),this.Ua&&Rn(E,"TYPE","init"),this.P?(Rn(E,"$req",_),Rn(E,"SID","null"),le.T=!0,dc(le,E,null)):dc(le,E,_),this.G=2}}else this.G==3&&(f?ne(this,f):this.i.length==0||Bd(this.h)||ne(this))};function ne(f,_){var E;_?E=_.l:E=f.U++;let B=Ko(f.I);Rn(B,"SID",f.K),Rn(B,"RID",E),Rn(B,"AID",f.T),de(f,B),f.m&&f.o&&pl(B,f.m,f.o),E=new Xi(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),_&&(f.i=_.D.concat(f.i)),_=ke(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ud(f.h,E),dc(E,B,_)}function de(f,_){f.H&&me(f.H,function(E,B){Rn(_,B,E)}),f.l&&qd({},function(E,B){Rn(_,B,E)})}function ke(f,_,E){E=Math.min(f.i.length,E);var B=f.l?m(f.l.Na,f.l,f):null;e:{var le=f.i;let Ee=-1;for(;;){let Ye=["count="+E];Ee==-1?0<E?(Ee=le[0].g,Ye.push("ofs="+Ee)):Ee=0:Ye.push("ofs="+Ee);let Dn=!0;for(let Tr=0;Tr<E;Tr++){let $t=le[Tr].g,lr=le[Tr].map;if($t-=Ee,0>$t)Ee=Math.max(0,le[Tr].g-100),Dn=!1;else try{Am(lr,Ye,"req"+$t+"_")}catch{B&&B(lr)}}if(Dn){B=Ye.join("&");break e}}}return f=f.i.splice(0,E),_.D=f,B}function je(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;Ae||Ge(),he||(Ae(),he=!0),Te.add(_,f),f.v=0}}function dt(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ti(m(f.Fa,f),cr(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,jt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ti(m(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pr(10),ml(this),jt(this))};function vt(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function jt(f){f.g=new Xi(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Ko(f.qa);Rn(_,"RID","rpc"),Rn(_,"SID",f.K),Rn(_,"AID",f.T),Rn(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&Rn(_,"TO",f.ja),Rn(_,"TYPE","xmlhttp"),de(f,_),f.m&&f.o&&pl(_,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=dl(Ko(_)),E.m=null,E.P=!0,cl(E,f)}n.Za=function(){this.C!=null&&(this.C=null,ml(this),dt(this),pr(19))};function Gt(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function _n(f,_){var E=null;if(f.g==_){Gt(f),vt(f),f.g=null;var B=2}else if(fc(f.h,_))E=_.D,Ar(f.h,_),B=1;else return;if(f.G!=0){if(_.o)if(B==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var le=f.B;B=Ho(),Ft(B,new xo(B,E)),k(f)}else je(f);else if(le=_.s,le==3||le==0&&0<_.X||!(B==1&&K(f,_)||B==2&&dt(f)))switch(E&&0<E.length&&(_=f.h,_.i=_.i.concat(E)),le){case 1:Xn(f,5);break;case 4:Xn(f,10);break;case 3:Xn(f,6);break;default:Xn(f,2)}}}function cr(f,_){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*_}function Xn(f,_){if(f.j.info("Error code "+_),_==2){var E=m(f.fb,f),B=f.Xa;let le=!B;B=new ji(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ru(B,"https"),dl(B),le?Im(B.toString(),E):Sa(B.toString(),E)}else pr(2);f.G=0,f.l&&f.l.sa(_),jn(f),v(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),pr(2)):(this.j.info("Failed to ping google.com"),pr(1))};function jn(f){if(f.G=0,f.ka=[],f.l){let _=zd(f.h);(_.length!=0||f.i.length!=0)&&(N(f.ka,_),N(f.ka,f.i),f.h.i.length=0,I(f.i),f.i.length=0),f.l.ra()}}function Lr(f,_,E){var B=E instanceof ji?Ko(E):new ji(E);if(B.g!="")_&&(B.g=_+"."+B.g),iu(B,B.s);else{var le=a.location;B=le.protocol,_=_?_+"."+le.hostname:le.hostname,le=+le.port;var Ee=new ji(null);B&&ru(Ee,B),_&&(Ee.g=_),le&&iu(Ee,le),E&&(Ee.l=E),B=Ee}return E=f.D,_=f.ya,E&&_&&Rn(B,E,_),Rn(B,"VER",f.la),de(f,B),B}function Dr(f,_,E){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new Qn(new Js({eb:E})):new Qn(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function si(){}n=si.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Zo(){}Zo.prototype.g=function(f,_){return new gr(f,_)};function gr(f,_){Lt.call(this),this.g=new Wd(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!Q(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!Q(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new _s(this)}C(gr,Lt),gr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gr.prototype.close=function(){Ta(this.g)},gr.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=Kn(f),f=E);_.i.push(new Dh(_.Ya++,f)),_.G==3&&k(_)},gr.prototype.N=function(){this.g.l=null,delete this.j,Ta(this.g),delete this.g,gr.aa.N.call(this)};function ta(f){kt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(let E in _){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}C(ta,kt);function lu(){In.call(this),this.status=1}C(lu,In);function _s(f){this.g=f}C(_s,si),_s.prototype.ua=function(){Ft(this.g,"a")},_s.prototype.ta=function(f){Ft(this.g,new ta(f))},_s.prototype.sa=function(f){Ft(this.g,new lu)},_s.prototype.ra=function(){Ft(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,gr.prototype.send=gr.prototype.o,gr.prototype.open=gr.prototype.m,gr.prototype.close=gr.prototype.close,gD=Fl.createWebChannelTransport=function(){return new Zo},pD=Fl.getStatEventTarget=function(){return Ho()},hD=Fl.Event=bo,Db=Fl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Eo.NO_ERROR=0,Eo.TIMEOUT=8,Eo.HTTP_ERROR=6,_v=Fl.ErrorCode=Eo,Go.COMPLETE="complete",fD=Fl.EventType=Go,tr.EventType=en,en.OPEN="a",en.CLOSE="b",en.ERROR="c",en.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,Jp=Fl.WebChannel=tr,KQ=Fl.FetchXmlHttpFactory=Js,Qn.prototype.listenOnce=Qn.prototype.L,Qn.prototype.getLastError=Qn.prototype.Ka,Qn.prototype.getLastErrorCode=Qn.prototype.Ba,Qn.prototype.getStatus=Qn.prototype.Z,Qn.prototype.getResponseJson=Qn.prototype.Oa,Qn.prototype.getResponseText=Qn.prototype.oa,Qn.prototype.send=Qn.prototype.ea,Qn.prototype.setWithCredentials=Qn.prototype.Ha,dD=Fl.XhrIo=Qn}).apply(typeof Ab<"u"?Ab:typeof self<"u"?self:typeof window<"u"?window:{});var QF="@firebase/firestore",XF="4.8.0";var fi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};fi.UNAUTHENTICATED=new fi(null),fi.GOOGLE_CREDENTIALS=new fi("google-credentials-uid"),fi.FIRST_PARTY=new fi("first-party-uid"),fi.MOCK_USER=new fi("mock-user");var Vg="11.10.0";var dd=new Uh("@firebase/firestore");function sg(){return dd.logLevel}function DT(n){dd.setLogLevel(n)}function qe(n,...e){if(dd.logLevel<=_c.DEBUG){let t=e.map(TT);dd.debug(`Firestore (${Vg}): ${n}`,...t)}}function Xr(n,...e){if(dd.logLevel<=_c.ERROR){let t=e.map(TT);dd.error(`Firestore (${Vg}): ${n}`,...t)}}function cs(n,...e){if(dd.logLevel<=_c.WARN){let t=e.map(TT);dd.warn(`Firestore (${Vg}): ${n}`,...t)}}function TT(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function lt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,h8(n,r,t)}function h8(n,e,t){let r=`FIRESTORE (${Vg}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Xr(r),new Error(r)}function yt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||h8(e,i,r)}function p8(n,e){n||lt(57014,e)}function ot(n,e){return n}var Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ve=class extends Eu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ai=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var zb=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ED=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fi.UNAUTHENTICATED))}shutdown(){}},CD=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ID=class{constructor(e){this.t=e,this.currentUser=fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ai,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>ee(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ai)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new zb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new fi(e)}},SD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},AD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new SD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qb=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},DD=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,S_(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0,3512);let r=o=>{o.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,qe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qb(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function YQ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function MT(){return new TextEncoder}var Rv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=YQ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function zt(n,e){return n<e?-1:n>e?1:0}function TD(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return zt(r,i);{let o=MT(),s=ZQ(o.encode(JF(n,t)),o.encode(JF(e,t)));return s!==0?s:zt(r,i)}}t+=r>65535?2:1}return zt(n.length,e.length)}function JF(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function ZQ(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return zt(n[t],e[t]);return zt(n.length,e.length)}function gg(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function g8(n){return n+"\0"}var e6="__name__",$b=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&lt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&lt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return zt(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):TD(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ll.fromString(e.substring(4,e.length-2))}},xn=class n extends $b{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Ve(Ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},QQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Jr=class n extends $b{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return QQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e6}static keyField(){return new n([e6])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Ve(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ve(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ve(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ve(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var nt=class n{constructor(e){this.path=e}static fromPath(e){return new n(xn.fromString(e))}static fromName(e){return new n(xn.fromString(e).popFirst(5))}static empty(){return new n(xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new xn(e.slice()))}};function NT(n,e,t){if(!t)throw new Ve(Ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PT(n,e,t,r){if(e===!0&&r===!0)throw new Ve(Ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function t6(n){if(!nt.isDocumentKey(n))throw new Ve(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function n6(n){if(nt.isDocumentKey(n))throw new Ve(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function m8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $2(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":lt(12329,{type:typeof n})}function Mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=$2(n);throw new Ve(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function v8(n,e){if(e<=0)throw new Ve(Ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function hi(n,e){let t={typeString:n};return e&&(t.value=e),t}function oy(n,e){if(!m8(n))throw new Ve(Ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Ve(Ce.INVALID_ARGUMENT,t);return!0}var r6=-62135596800,i6=1e6,hr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*i6);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<r6)throw new Ve(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(oy(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-r6;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};hr._jsonSchemaVersion="firestore/timestamp/1.0",hr._jsonSchema={type:hi("string",hr._jsonSchemaVersion),seconds:hi("number"),nanoseconds:hi("number")};var Tt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new hr(0,0))}static max(){return new n(new hr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var mg=-1,vg=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function MD(n){return n.fields.find(e=>e.kind===2)}function Of(n){return n.fields.filter(e=>e.kind!==2)}vg.UNKNOWN_ID=-1;var fg=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Ov=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,xa.min())}};function y8(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(r===1e9?new hr(t+1,0):new hr(t,r));return new xa(i,nt.empty(),e)}function _8(n){return new xa(n.readTime,n.key,mg)}var xa=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Tt.min(),nt.empty(),mg)}static max(){return new n(Tt.max(),nt.empty(),mg)}};function kT(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=nt.comparator(n.documentKey,e.documentKey),t!==0?t:zt(n.largestBatchId,e.largestBatchId))}var w8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function xd(n){return ee(this,null,function*(){if(n.code!==Ce.FAILED_PRECONDITION||n.message!==w8)throw n;qe("LocalStore","Unexpectedly lost primary lease")})}var we=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Bs="SimpleDb",Wb=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new qf(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ai,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new qf(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=RT(r.target.error);this.S.reject(new qf(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(qe(Bs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new PD(t)}},fd=class n{static delete(e){return qe(Bs,"Removing database:",e),Ff(VE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Vh())return!1;if(n.F())return!0;let e=Um(),t=n.M(e),r=0<t&&t<10,i=b8(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(Um())===12.2&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return ee(this,null,function*(){return this.db||(qe(Bs,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new qf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new Ve(Ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Ve(Ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new qf(e,s))},i.onupgradeneeded=o=>{qe(Bs,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{qe(Bs,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(cs('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,i){return ee(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=Wb.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),we.reject(l))).toPromise();return c.catch(()=>{}),yield a.D,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(qe(Bs,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function b8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var ND=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return Ff(this.$.delete())}},qf=class extends Ve{constructor(e,t){super(Ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ed(n){return n.name==="IndexedDbTransactionError"}var PD=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(qe(Bs,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(qe(Bs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ff(r)}add(e){return qe(Bs,"ADD",this.store.name,e,e),Ff(this.store.add(e))}get(e){return Ff(this.store.get(e)).next(t=>(t===void 0&&(t=null),qe(Bs,"GET",this.store.name,e,t),t))}delete(e){return qe(Bs,"DELETE",this.store.name,e),Ff(this.store.delete(e))}count(){return qe(Bs,"COUNT",this.store.name),Ff(this.store.count())}j(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new we((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,c)=>{s.push(c)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new we((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,t){qe(Bs,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Z=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}ee(e){let t=this.cursor({});return new we((r,i)=>{t.onerror=o=>{let s=RT(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new we((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new ND(a),l=t(a.primaryKey,a.value,c);if(l instanceof we){let u=l.catch(p=>(c.done(),we.reject(p)));r.push(u)}c.isDone?i():c.W===null?a.continue():a.continue(c.W)}}).next(()=>we.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ff(n){return new we((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=RT(r.target.error);t(i)}})}var o6=!1;function RT(n){let e=fd.M(Um());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return o6||(o6=!0,setTimeout(()=>{throw r},0)),r}}return n}var Sv="IndexBackfiller",kD=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){qe(Sv,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>ee(this,null,function*(){this.task=null;try{let t=yield this.te.re();qe(Sv,`Documents written: ${t}`)}catch(t){Ed(t)?qe(Sv,"Ignoring IndexedDB error during index backfill: ",t):yield xd(t)}yield this.ne(6e4)}))}},RD=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return ee(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let r=new Set,i=t,o=!0;return we.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return qe(Sv,`Processing collection: ${s}`),this.se(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(a=>(qe(Sv,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}oe(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=_8(o);kT(s,r)>0&&(r=s)}),new xa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Us=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),cd=-1;function sy(n){return n==null}function Lv(n){return n===0&&1/n==-1/0}function x8(n){return typeof n=="number"&&Number.isInteger(n)&&!Lv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Gb="";function po(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=s6(e)),e=XQ(n.get(t),e);return s6(e)}function XQ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Gb:t+="";break;default:t+=o}}return t}function s6(n){return n+Gb+""}function qc(n){let e=n.length;if(yt(e>=2,64408,{path:n}),e===2)return yt(n.charAt(0)===Gb&&n.charAt(1)==="",56145,{path:n}),xn.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Gb,o);switch((s<0||s>t)&&lt(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:lt(61167,{path:n})}o=s+2}return new xn(r)}var Lf="remoteDocuments",ay="owner",eg="owner",Fv="mutationQueues",JQ="userId",Ya="mutations",a6="batchId",Uf="userMutationsIndex",c6=["userId","batchId"];function Rb(n,e){return[n,po(e)]}function E8(n,e,t){return[n,po(e),t]}var eX={},yg="documentMutations",Kb="remoteDocumentsV14",tX=["prefixPath","collectionGroup","readTime","documentId"],Ob="documentKeyIndex",nX=["prefixPath","collectionGroup","documentId"],C8="collectionGroupIndex",rX=["collectionGroup","readTime","prefixPath","documentId"],Vv="remoteDocumentGlobal",OD="remoteDocumentGlobalKey",_g="targets",I8="queryTargetsIndex",iX=["canonicalId","targetId"],wg="targetDocuments",oX=["targetId","path"],OT="documentTargetsIndex",sX=["path","targetId"],Yb="targetGlobalKey",$f="targetGlobal",jv="collectionParents",aX=["collectionId","parent"],bg="clientMetadata",cX="clientId",H2="bundles",lX="bundleId",W2="namedQueries",uX="name",LT="indexConfiguration",dX="indexId",LD="collectionGroupIndex",fX="collectionGroup",Av="indexState",hX=["indexId","uid"],S8="sequenceNumberIndex",pX=["uid","sequenceNumber"],Dv="indexEntries",gX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],A8="documentKeyIndex",mX=["indexId","uid","orderedDocumentKey"],G2="documentOverlays",vX=["userId","collectionPath","documentId"],FD="collectionPathOverlayIndex",yX=["userId","collectionPath","largestBatchId"],D8="collectionGroupOverlayIndex",_X=["userId","collectionGroup","largestBatchId"],FT="globals",wX="name",T8=[Fv,Ya,yg,Lf,_g,ay,$f,wg,bg,Vv,jv,H2,W2],bX=[...T8,G2],M8=[Fv,Ya,yg,Kb,_g,ay,$f,wg,bg,Vv,jv,H2,W2,G2],N8=M8,VT=[...N8,LT,Av,Dv],xX=VT,P8=[...VT,FT],EX=P8;var Bv=class extends Hb{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function Di(n,e){let t=ot(n);return fd.N(t.ce,e)}function l6(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cd(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function k8(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var _r=class n{constructor(e,t){this.comparator=e,this.root=t||Hc.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hc.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dg(this.root,e,this.comparator,!1)}getReverseIterator(){return new dg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dg(this.root,e,this.comparator,!0)}},dg=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Hc=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}};Hc.EMPTY=null,Hc.RED=!0,Hc.BLACK=!1;Hc.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Hc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var er=class n{constructor(e){this.comparator=e,this.data=new _r(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zb(this.data.getIterator())}getIteratorFrom(e){return new Zb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Zb=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function tg(n){return n.hasNext()?n.getNext():void 0}var zs=class n{constructor(e){this.fields=e,e.sort(Jr.comparator)}static empty(){return new n([])}unionWith(e){let t=new er(Jr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gg(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Qb=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function R8(){return typeof atob<"u"}var ti=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Qb("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ti.EMPTY_BYTE_STRING=new ti("");var CX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bl(n){if(yt(!!n,39018),typeof n=="string"){let e=0,t=CX.exec(n);if(yt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Er(n.seconds),nanos:Er(n.nanos)}}function Er(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ul(n){return typeof n=="string"?ti.fromBase64String(n):ti.fromUint8Array(n)}var O8="server_timestamp",L8="__type__",F8="__previous_value__",V8="__local_write_time__";function K2(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[L8])===null||t===void 0?void 0:t.stringValue)===O8}function Y2(n){let e=n.mapValue.fields[F8];return K2(e)?Y2(e):e}function Uv(n){let e=Bl(n.mapValue.fields[V8].timestampValue);return new hr(e.seconds,e.nanos)}var VD=class{constructor(e,t,r,i,o,s,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},Xb="(default)",hd=class n{constructor(e,t){this.projectId=e,this.database=t||Xb}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Xb}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var jT="__type__",j8="__max__",sd={mapValue:{fields:{__type__:{stringValue:j8}}}},BT="__vector__",xg="value",Lb={nullValue:"NULL_VALUE"};function pd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?K2(n)?4:B8(n)?9007199254740991:Z2(n)?10:11:lt(28295,{value:n})}function Yc(n,e){if(n===e)return!0;let t=pd(n);if(t!==pd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uv(n).isEqual(Uv(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Bl(i.timestampValue),a=Bl(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Ul(i.bytesValue).isEqual(Ul(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Er(i.geoPointValue.latitude)===Er(o.geoPointValue.latitude)&&Er(i.geoPointValue.longitude)===Er(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Er(i.integerValue)===Er(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Er(i.doubleValue),a=Er(o.doubleValue);return s===a?Lv(s)===Lv(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return gg(n.arrayValue.values||[],e.arrayValue.values||[],Yc);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(l6(s)!==l6(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Yc(s[c],a[c])))return!1;return!0})(n,e);default:return lt(52216,{left:n})}}function zv(n,e){return(n.values||[]).find(t=>Yc(t,e))!==void 0}function gd(n,e){if(n===e)return 0;let t=pd(n),r=pd(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Er(o.integerValue||o.doubleValue),c=Er(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return u6(n.timestampValue,e.timestampValue);case 4:return u6(Uv(n),Uv(e));case 5:return TD(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Ul(o),c=Ul(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=zt(a[l],c[l]);if(u!==0)return u}return zt(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=zt(Er(o.latitude),Er(s.latitude));return a!==0?a:zt(Er(o.longitude),Er(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return d6(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,l,u;let p=o.fields||{},m=s.fields||{},g=(a=p[xg])===null||a===void 0?void 0:a.arrayValue,C=(c=m[xg])===null||c===void 0?void 0:c.arrayValue,I=zt(((l=g?.values)===null||l===void 0?void 0:l.length)||0,((u=C?.values)===null||u===void 0?void 0:u.length)||0);return I!==0?I:d6(g,C)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===sd.mapValue&&s===sd.mapValue)return 0;if(o===sd.mapValue)return 1;if(s===sd.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let p=0;p<c.length&&p<u.length;++p){let m=TD(c[p],u[p]);if(m!==0)return m;let g=gd(a[c[p]],l[u[p]]);if(g!==0)return g}return zt(c.length,u.length)})(n.mapValue,e.mapValue);default:throw lt(23264,{le:t})}}function u6(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return zt(n,e);let t=Bl(n),r=Bl(e),i=zt(t.seconds,r.seconds);return i!==0?i:zt(t.nanos,r.nanos)}function d6(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=gd(t[i],r[i]);if(o)return o}return zt(t.length,r.length)}function Eg(n){return jD(n)}function jD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Bl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ul(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return nt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=jD(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${jD(t.fields[s])}`;return i+"}"})(n.mapValue):lt(61005,{value:n})}function Fb(n){switch(pd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Y2(n);return e?16+Fb(e):16;case 5:return 2*n.stringValue.length;case 6:return Ul(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Fb(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Cd(r.fields,(o,s)=>{i+=o.length+Fb(s)}),i})(n.mapValue);default:throw lt(13486,{value:n})}}function Hf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function BD(n){return!!n&&"integerValue"in n}function qv(n){return!!n&&"arrayValue"in n}function f6(n){return!!n&&"nullValue"in n}function h6(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vb(n){return!!n&&"mapValue"in n}function Z2(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[jT])===null||t===void 0?void 0:t.stringValue)===BT}function Tv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Cd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Tv(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function B8(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===j8}var U8={mapValue:{fields:{[jT]:{stringValue:BT},[xg]:{arrayValue:{}}}}};function IX(n){return"nullValue"in n?Lb:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Hf(hd.empty(),nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Z2(n)?U8:{mapValue:{}}:lt(35942,{value:n})}function SX(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Hf(hd.empty(),nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?U8:"mapValue"in n?Z2(n)?{mapValue:{}}:sd:lt(61959,{value:n})}function p6(n,e){let t=gd(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function g6(n,e){let t=gd(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var ho=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tv(t)}setAll(e){let t=Jr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Tv(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Vb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Cd(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Tv(this.value))}};function z8(n){let e=[];return Cd(n.fields,(t,r)=>{let i=new Jr([t]);if(Vb(r)){let o=z8(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new zs(e)}var pi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Tt.min(),Tt.min(),Tt.min(),ho.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Tt.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Tt.min(),Tt.min(),ho.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Tt.min(),Tt.min(),ho.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ho.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ho.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Zc=class{constructor(e,t){this.position=e,this.inclusive=t}};function m6(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=nt.comparator(nt.fromName(s.referenceValue),t.key):r=gd(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function v6(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yc(n.position[t],e.position[t]))return!1;return!0}var Wf=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function AX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Jb=class{},wn=class n extends Jb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qD(e,t,r):t==="array-contains"?new WD(e,r):t==="in"?new e2(e,r):t==="not-in"?new GD(e,r):t==="array-contains-any"?new KD(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $D(e,r):new HD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(gd(t,this.value)):t!==null&&pd(this.value)===pd(t)&&this.matchesComparison(gd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Wn=class n extends Jb{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Cg(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Cg(n){return n.op==="and"}function UD(n){return n.op==="or"}function UT(n){return q8(n)&&Cg(n)}function q8(n){for(let e of n.filters)if(e instanceof Wn)return!1;return!0}function zD(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+Eg(n.value);if(UT(n))return n.filters.map(e=>zD(e)).join(",");{let e=n.filters.map(t=>zD(t)).join(",");return`${n.op}(${e})`}}function $8(n,e){return n instanceof wn?(function(r,i){return i instanceof wn&&r.op===i.op&&r.field.isEqual(i.field)&&Yc(r.value,i.value)})(n,e):n instanceof Wn?(function(r,i){return i instanceof Wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&$8(s,i.filters[a]),!0):!1})(n,e):void lt(19439)}function H8(n,e){let t=n.filters.concat(e);return Wn.create(t,n.op)}function W8(n){return n instanceof wn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Eg(t.value)}`})(n):n instanceof Wn?(function(t){return t.op.toString()+" {"+t.getFilters().map(W8).join(" ,")+"}"})(n):"Filter"}var qD=class extends wn{constructor(e,t,r){super(e,t,r),this.key=nt.fromName(r.referenceValue)}matches(e){let t=nt.comparator(e.key,this.key);return this.matchesComparison(t)}},$D=class extends wn{constructor(e,t){super(e,"in",t),this.keys=G8("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},HD=class extends wn{constructor(e,t){super(e,"not-in",t),this.keys=G8("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function G8(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>nt.fromName(r.referenceValue))}var WD=class extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return qv(t)&&zv(t.arrayValue,this.value)}},e2=class extends wn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&zv(this.value.arrayValue,t)}},GD=class extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(zv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zv(this.value.arrayValue,t)}},KD=class extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!qv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zv(this.value.arrayValue,r))}};var YD=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function ZD(n,e=null,t=[],r=[],i=null,o=null,s=null){return new YD(n,e,t,r,i,o,s)}function Gf(n){let e=ot(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),sy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Eg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Eg(r)).join(",")),e.Pe=t}return e.Pe}function cy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$8(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!v6(n.startAt,e.startAt)&&v6(n.endAt,e.endAt)}function t2(n){return nt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function n2(n,e){return n.filters.filter(t=>t instanceof wn&&t.field.isEqual(e))}function y6(n,e,t){let r=Lb,i=!0;for(let o of n2(n,e)){let s=Lb,a=!0;switch(o.op){case"<":case"<=":s=IX(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Lb}p6({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];p6({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function _6(n,e,t){let r=sd,i=!0;for(let o of n2(n,e)){let s=sd,a=!0;switch(o.op){case">=":case">":s=SX(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=sd}g6({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];g6({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Za=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function K8(n,e,t,r,i,o,s,a){return new Za(n,e,t,r,i,o,s,a)}function jg(n){return new Za(n)}function w6(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zT(n){return n.collectionGroup!==null}function hg(n){let e=ot(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new er(Jr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Wf(o,r))}),t.has(Jr.keyField().canonicalString())||e.Te.push(new Wf(Jr.keyField(),r))}return e.Te}function Vo(n){let e=ot(n);return e.Ie||(e.Ie=DX(e,hg(n))),e.Ie}function DX(n,e){if(n.limitType==="F")return ZD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Wf(i.field,o)});let t=n.endAt?new Zc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Zc(n.startAt.position,n.startAt.inclusive):null;return ZD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function QD(n,e){let t=n.filters.concat([e]);return new Za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function r2(n,e,t){return new Za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ly(n,e){return cy(Vo(n),Vo(e))&&n.limitType===e.limitType}function Y8(n){return`${Gf(Vo(n))}|lt:${n.limitType}`}function ag(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>W8(i)).join(", ")}]`),sy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Eg(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Eg(i)).join(",")),`Target(${r})`})(Vo(n))}; limitType=${n.limitType})`}function uy(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):nt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of hg(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=m6(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,hg(r),i)||r.endAt&&!(function(s,a,c){let l=m6(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,hg(r),i))})(n,e)}function Z8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Q8(n){return(e,t)=>{let r=!1;for(let i of hg(n)){let o=TX(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function TX(n,e,t){let r=n.field.isKeyField()?nt.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?gd(c,l):lt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt(19790,{direction:n.dir})}}var Qa=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cd(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return k8(this.inner)}size(){return this.innerSize}};var MX=new _r(nt.comparator);function ss(){return MX}var X8=new _r(nt.comparator);function Cv(...n){let e=X8;for(let t of n)e=e.insert(t.key,t);return e}function J8(n){let e=X8;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $c(){return Mv()}function eV(){return Mv()}function Mv(){return new Qa(n=>n.toString(),(n,e)=>n.isEqual(e))}var NX=new _r(nt.comparator),PX=new er(nt.comparator);function un(...n){let e=PX;for(let t of n)e=e.add(t);return e}var kX=new er(zt);function qT(){return kX}function $T(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lv(e)?"-0":e}}function tV(n){return{integerValue:""+n}}function nV(n,e){return x8(e)?tV(e):$T(n,e)}var Ig=class{constructor(){this._=void 0}};function RX(n,e,t){return n instanceof md?(function(i,o){let s={fields:{[L8]:{stringValue:O8},[V8]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&K2(o)&&(o=Y2(o)),o&&(s.fields[F8]=o),{mapValue:s}})(t,e):n instanceof zl?iV(n,e):n instanceof ql?oV(n,e):(function(i,o){let s=rV(i,o),a=b6(s)+b6(i.Ee);return BD(s)&&BD(i.Ee)?tV(a):$T(i.serializer,a)})(n,e)}function OX(n,e,t){return n instanceof zl?iV(n,e):n instanceof ql?oV(n,e):t}function rV(n,e){return n instanceof vd?(function(r){return BD(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var md=class extends Ig{},zl=class extends Ig{constructor(e){super(),this.elements=e}};function iV(n,e){let t=sV(e);for(let r of n.elements)t.some(i=>Yc(i,r))||t.push(r);return{arrayValue:{values:t}}}var ql=class extends Ig{constructor(e){super(),this.elements=e}};function oV(n,e){let t=sV(e);for(let r of n.elements)t=t.filter(i=>!Yc(i,r));return{arrayValue:{values:t}}}var vd=class extends Ig{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function b6(n){return Er(n.integerValue||n.doubleValue)}function sV(n){return qv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Kf=class{constructor(e,t){this.field=e,this.transform=t}};function LX(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof zl&&i instanceof zl||r instanceof ql&&i instanceof ql?gg(r.elements,i.elements,Yc):r instanceof vd&&i instanceof vd?Yc(r.Ee,i.Ee):r instanceof md&&i instanceof md})(n.transform,e.transform)}var XD=class{constructor(e,t){this.version=e,this.transformResults=t}},Br=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function jb(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Sg=class{};function aV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _d(n.key,Br.none()):new yd(n.key,n.data,Br.none());{let t=n.data,r=ho.empty(),i=new er(Jr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Xa(n.key,r,new zs(i.toArray()),Br.none())}}function FX(n,e,t){n instanceof yd?(function(i,o,s){let a=i.value.clone(),c=E6(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Xa?(function(i,o,s){if(!jb(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=E6(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(cV(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Nv(n,e,t,r){return n instanceof yd?(function(o,s,a,c){if(!jb(o.precondition,s))return a;let l=o.value.clone(),u=C6(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Xa?(function(o,s,a,c){if(!jb(o.precondition,s))return a;let l=C6(o.fieldTransforms,c,s),u=s.data;return u.setAll(cV(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return jb(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function VX(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=rV(r.transform,i||null);o!=null&&(t===null&&(t=ho.empty()),t.set(r.field,o))}return t||null}function x6(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gg(r,i,(o,s)=>LX(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var yd=class extends Sg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xa=class extends Sg{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function cV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function E6(n,e,t){let r=new Map;yt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,OX(s,a,t[i]))}return r}function C6(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,RX(o,s,e))}return r}var _d=class extends Sg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$v=class extends Sg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Hv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&FX(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Nv(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Nv(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=eV();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=aV(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&gg(this.mutations,e.mutations,(t,r)=>x6(t,r))&&gg(this.baseMutations,e.baseMutations,(t,r)=>x6(t,r))}},JD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){yt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return NX})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Wv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var e5=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ui,An;function lV(n){switch(n){case Ce.OK:return lt(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return lt(15467,{code:n})}}function uV(n){if(n===void 0)return Xr("GRPC error has no .code"),Ce.UNKNOWN;switch(n){case ui.OK:return Ce.OK;case ui.CANCELLED:return Ce.CANCELLED;case ui.UNKNOWN:return Ce.UNKNOWN;case ui.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case ui.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case ui.INTERNAL:return Ce.INTERNAL;case ui.UNAVAILABLE:return Ce.UNAVAILABLE;case ui.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case ui.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case ui.NOT_FOUND:return Ce.NOT_FOUND;case ui.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case ui.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case ui.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case ui.ABORTED:return Ce.ABORTED;case ui.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case ui.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case ui.DATA_LOSS:return Ce.DATA_LOSS;default:return lt(39323,{code:n})}}(An=ui||(ui={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";var I6=null;var jX=new Ll([4294967295,4294967295],0);function S6(n){let e=MT().encode(n),t=new uD;return t.update(e),new Uint8Array(t.digest())}function A6(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ll([t,r],0),new Ll([i,o],0)]}var t5=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zf(`Invalid padding: ${t}`);if(r<0)throw new zf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zf(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ll.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Ll.fromNumber(r)));return i.compare(jX)===1&&(i=new Ll([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=S6(e),[r,i]=A6(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=S6(e),[r,i]=A6(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},zf=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Gv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Kv.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Tt.min(),i,new _r(zt),ss(),un())}},Kv=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,un(),un(),un())}};var pg=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},i2=class{constructor(e,t){this.targetId=e,this.De=t}},o2=class{constructor(e,t,r=ti.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},s2=class{constructor(){this.ve=0,this.Ce=D6(),this.Fe=ti.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=un(),t=un(),r=un();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt(38017,{changeType:o})}}),new Kv(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=D6()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},n5=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ss(),this.je=Tb(),this.Je=Tb(),this.He=new _r(zt)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:lt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(t2(o))if(r===0){let s=new nt(o.path);this.Xe(t,s,pi.newNoDocument(s,Tt.min()))}else yt(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}I6?.ct((function(u,p,m,g,C){var I,N,P,Q,j,W;let ae={localCacheCount:u,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},me=p.unchangedNames;return me&&(ae.bloomFilter={applied:C===0,hashCount:(I=me?.hashCount)!==null&&I!==void 0?I:0,bitmapLength:(Q=(P=(N=me?.bits)===null||N===void 0?void 0:N.bitmap)===null||P===void 0?void 0:P.length)!==null&&Q!==void 0?Q:0,padding:(W=(j=me?.bits)===null||j===void 0?void 0:j.padding)!==null&&W!==void 0?W:0,mightContain:z=>{var M;return(M=g?.mightContain(z))!==null&&M!==void 0&&M}}),ae})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Ul(r).toUint8Array()}catch(c){if(c instanceof Qb)return cs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new t5(s,i,o)}catch(c){return cs(c instanceof zf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&t2(a.target)){let c=new nt(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,pi.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=un();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Gv(e,t,this.He,this.ze,r);return this.ze=ss(),this.je=Tb(),this.Je=Tb(),this.He=new _r(zt),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new s2,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new er(zt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new er(zt),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||qe("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new s2),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Tb(){return new _r(nt.comparator)}function D6(){return new _r(nt.comparator)}var BX={asc:"ASCENDING",desc:"DESCENDING"},UX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zX={and:"AND",or:"OR"},r5=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function i5(n,e){return n.useProto3Json||sy(e)?e:{value:e}}function Ag(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qX(n,e){return Ag(n,e.toTimestamp())}function ei(n){return yt(!!n,49232),Tt.fromTimestamp((function(t){let r=Bl(t);return new hr(r.seconds,r.nanos)})(n))}function HT(n,e){return o5(n,e).canonicalString()}function o5(n,e){let t=(function(i){return new xn(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function fV(n){let e=xn.fromString(n);return yt(xV(e),10190,{key:e.toString()}),e}function Yv(n,e){return HT(n.databaseId,e.path)}function Wc(n,e){let t=fV(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nt(gV(t))}function hV(n,e){return HT(n.databaseId,e)}function pV(n){let e=fV(n);return e.length===4?xn.emptyPath():gV(e)}function s5(n){return new xn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gV(n){return yt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function T6(n,e,t){return{name:Yv(n,e),fields:t.value.mapValue.fields}}function mV(n,e,t){let r=Wc(n,e.name),i=ei(e.updateTime),o=e.createTime?ei(e.createTime):Tt.min(),s=new ho({mapValue:{fields:e.fields}}),a=pi.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function $X(n,e){return"found"in e?(function(r,i){yt(!!i.found,43571),i.found.name,i.found.updateTime;let o=Wc(r,i.found.name),s=ei(i.found.updateTime),a=i.found.createTime?ei(i.found.createTime):Tt.min(),c=new ho({mapValue:{fields:i.found.fields}});return pi.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){yt(!!i.missing,3894),yt(!!i.readTime,22933);let o=Wc(r,i.missing),s=ei(i.readTime);return pi.newNoDocument(o,s)})(n,e):lt(7234,{result:e})}function HX(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:lt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,u){return l.useProto3Json?(yt(u===void 0||typeof u=="string",58123),ti.fromBase64String(u||"")):(yt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ti.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let u=l.code===void 0?Ce.UNKNOWN:uV(l.code);return new Ve(u,l.message||"")})(s);t=new o2(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Wc(n,r.document.name),o=ei(r.document.updateTime),s=r.document.createTime?ei(r.document.createTime):Tt.min(),a=new ho({mapValue:{fields:r.document.fields}}),c=pi.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new pg(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Wc(n,r.document),o=r.readTime?ei(r.readTime):Tt.min(),s=pi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new pg([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Wc(n,r.document),o=r.removedTargetIds||[];t=new pg([],o,i,null)}else{if(!("filter"in e))return lt(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new e5(i,o),a=r.targetId;t=new i2(a,s)}}return t}function Zv(n,e){let t;if(e instanceof yd)t={update:T6(n,e.key,e.value)};else if(e instanceof _d)t={delete:Yv(n,e.key)};else if(e instanceof Xa)t={update:T6(n,e.key,e.data),updateMask:QX(e.fieldMask)};else{if(!(e instanceof $v))return lt(16599,{Rt:e.type});t={verify:Yv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof md)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ql)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vd)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw lt(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:qX(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:lt(27497)})(n,e.precondition)),t}function a5(n,e){let t=e.currentDocument?(function(o){return o.updateTime!==void 0?Br.updateTime(ei(o.updateTime)):o.exists!==void 0?Br.exists(o.exists):Br.none()})(e.currentDocument):Br.none(),r=e.updateTransforms?e.updateTransforms.map(i=>(function(s,a){let c=null;if("setToServerValue"in a)yt(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new md;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new zl(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new ql(u)}else"increment"in a?c=new vd(s,a.increment):lt(16584,{proto:a});let l=Jr.fromServerFormat(a.fieldPath);return new Kf(l,c)})(n,i)):[];if(e.update){e.update.name;let i=Wc(n,e.update.name),o=new ho({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=(function(c){let l=c.fieldPaths||[];return new zs(l.map(u=>Jr.fromServerFormat(u)))})(e.updateMask);return new Xa(i,o,s,t,r)}return new yd(i,o,t,r)}if(e.delete){let i=Wc(n,e.delete);return new _d(i,t)}if(e.verify){let i=Wc(n,e.verify);return new $v(i,t)}return lt(1463,{proto:e})}function WX(n,e){return n&&n.length>0?(yt(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?ei(i.updateTime):ei(o);return s.isEqual(Tt.min())&&(s=ei(o)),new XD(s,i.transformResults||[])})(t,e))):[]}function vV(n,e){return{documents:[hV(n,e.path)]}}function yV(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hV(n,i);let o=(function(l){if(l.length!==0)return bV(Wn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(u=>(function(m){return{field:cg(m.field),direction:KX(m.dir)}})(u))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=i5(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function _V(n){let e=pV(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){yt(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=(function(p){let m=wV(p);return m instanceof Wn&&UT(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(C){return new Wf(lg(C.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,sy(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(p){let m=!!p.before,g=p.values||[];return new Zc(g,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,g=p.values||[];return new Zc(g,m)})(t.endAt)),K8(e,i,s,o,a,"F",c,l)}function GX(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wV(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=lg(t.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=lg(t.unaryFilter.field);return wn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=lg(t.unaryFilter.field);return wn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=lg(t.unaryFilter.field);return wn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wn.create(lg(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wn.create(t.compositeFilter.filters.map(r=>wV(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return lt(1026)}})(t.compositeFilter.op))})(n):lt(30097,{filter:n})}function KX(n){return BX[n]}function YX(n){return UX[n]}function ZX(n){return zX[n]}function cg(n){return{fieldPath:n.canonicalString()}}function lg(n){return Jr.fromServerFormat(n.fieldPath)}function bV(n){return n instanceof wn?(function(t){if(t.op==="=="){if(h6(t.value))return{unaryFilter:{field:cg(t.field),op:"IS_NAN"}};if(f6(t.value))return{unaryFilter:{field:cg(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(h6(t.value))return{unaryFilter:{field:cg(t.field),op:"IS_NOT_NAN"}};if(f6(t.value))return{unaryFilter:{field:cg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cg(t.field),op:YX(t.op),value:t.value}}})(n):n instanceof Wn?(function(t){let r=t.getFilters().map(i=>bV(i));return r.length===1?r[0]:{compositeFilter:{op:ZX(t.op),filters:r}}})(n):lt(54877,{filter:n})}function QX(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xV(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Dg=class n{constructor(e,t,r,i,o=Tt.min(),s=Tt.min(),a=ti.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var a2=class{constructor(e){this.gt=e}};function XX(n,e){let t;if(e.document)t=mV(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=nt.fromSegments(e.noDocument.path),i=Zf(e.noDocument.readTime);t=pi.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt(56709);{let r=nt.fromSegments(e.unknownDocument.path),i=Zf(e.unknownDocument.version);t=pi.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){let o=new hr(i[0],i[1]);return Tt.fromTimestamp(o)})(e.readTime)),t}function M6(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:c2(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:Yv(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ag(o,s.version.toTimestamp()),createTime:Ag(o,s.createTime.toTimestamp())}})(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yf(e.version)};else{if(!e.isUnknownDocument())return lt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Yf(e.version)}}return r}function c2(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yf(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zf(n){let e=new hr(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Vf(n,e){let t=(e.baseMutations||[]).map(o=>a5(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>a5(n.gt,o)),i=hr.fromMillis(e.localWriteTimeMs);return new Hv(e.batchId,i,t,r)}function Iv(n){let e=Zf(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Zf(n.lastLimboFreeSnapshotVersion):Tt.min(),r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){let s=o.documents.length;return yt(s===1,1966,{count:s}),Vo(jg(pV(o.documents[0])))})(n.query):(function(o){return Vo(_V(o))})(n.query),new Dg(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ti.fromBase64String(n.resumeToken))}function EV(n,e){let t=Yf(e.snapshotVersion),r=Yf(e.lastLimboFreeSnapshotVersion),i;i=t2(e.target)?vV(n.gt,e.target):yV(n.gt,e.target).Vt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gf(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function WT(n){let e=_V({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?r2(e,e.limit,"L"):e}function mD(n,e){return new Wv(e.largestBatchId,a5(n.gt,e.overlayMutation))}function N6(n,e){let t=e.path.lastSegment();return[n,po(e.path.popLast()),t]}function P6(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Yf(r.readTime),documentKey:po(r.documentKey.path),largestBatchId:r.largestBatchId}}var c5=class{getBundleMetadata(e,t){return k6(e).get(t).next(r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Zf(o.createTime),version:o.version}})(r)})}saveBundleMetadata(e,t){return k6(e).put((function(i){return{bundleId:i.id,createTime:Yf(ei(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return R6(e).get(t).next(r=>{if(r)return(function(o){return{name:o.name,query:WT(o.bundledQuery),readTime:Zf(o.readTime)}})(r)})}saveNamedQuery(e,t){return R6(e).put((function(i){return{name:i.name,readTime:Yf(ei(i.readTime)),bundledQuery:i.bundledQuery}})(t))}};function k6(n){return Di(n,H2)}function R6(n){return Di(n,W2)}var l2=class n{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return wv(e).get(N6(this.userId,t)).next(r=>r?mD(this.serializer,r):null)}getOverlays(e,t){let r=$c();return we.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Wv(t,s);i.push(this.wt(e,a))}),we.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(po(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(wv(e).Y(FD,a))}),we.waitFor(o)}getOverlaysForCollection(e,t,r){let i=$c(),o=po(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return wv(e).j(FD,s).next(a=>{for(let c of a){let l=mD(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=$c(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wv(e).X({index:D8,range:a},(c,l,u)=>{let p=mD(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):u.done()}).next(()=>o)}wt(e,t){return wv(e).put((function(i,o,s){let[a,c,l]=N6(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Zv(i.gt,s.mutation)}})(this.serializer,this.userId,t))}};function wv(n){return Di(n,G2)}var l5=class{St(e){return Di(e,FT)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?ti.fromUint8Array(r):ti.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Vl=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Er(e.integerValue));else if("doubleValue"in e){let r=Er(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Lv(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Bl(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Ul(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?B8(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Z2(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):lt(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=xg,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Er(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),nt.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Vl.Ut=new Vl;var ng=255;function JX(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function O6(n){let e=64-(function(r){let i=0;for(let o=0;o<8;++o){let s=JX(255&r[o]);if(i+=s,s!==8)break}return i})(n);return Math.ceil(e/8)}var u5=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{let i=t.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{let i=t.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){let t=this.Xt(e),r=O6(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}tn(e){let t=this.Xt(e),r=O6(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}nn(){this.rn(ng),this.rn(255)}sn(){this._n(ng),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=(function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===ng?(this.rn(ng),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===ng?(this._n(ng),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},d5=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},f5=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},jf=class{constructor(){this.un=new u5,this.cn=new d5(this.un),this.ln=new f5(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var Bf=class n{constructor(e,t,r,i){this.Pn=e,this.Tn=t,this.In=r,this.dn=i}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:Bb(this.In),directionalValue:Bb(this.dn),orderedDocumentKey:Bb(t),documentKey:r.path.toArray()}}Rn(e,t,r){let i=this.An(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function nd(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=L6(n.In,e.In),t!==0?t:(t=L6(n.dn,e.dn),t!==0?t:nt.comparator(n.Tn,e.Tn)))}function L6(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Bb(n){return UE()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function F6(n){return typeof n!="string"?n:(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}var u2=class{constructor(e){this.Vn=new er((t,r)=>Jr.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(yt(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=MD(e);if(t!==void 0&&!this.yn(t))return!1;let r=Of(e),i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.wn(a,c)||!this.Sn(this.mn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new er(Jr.comparator),t=[];for(let r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new fg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new fg(r.field,0))}for(let r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new fg(r.field,r.dir==="asc"?0:1)));return new vg(vg.UNKNOWN_ID,this.collectionId,t,Ov.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function CV(n){var e,t;if(yt(n instanceof wn||n instanceof Wn,20012),n instanceof wn){if(n instanceof e2){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>wn.create(n.field,"==",o)))||[];return Wn.create(i,"or")}return n}let r=n.filters.map(i=>CV(i));return Wn.create(r,n.op)}function eJ(n){if(n.getFilters().length===0)return[];let e=g5(CV(n));return yt(IV(e),7391),h5(e)||p5(e)?[e]:e.getFilters()}function h5(n){return n instanceof wn}function p5(n){return n instanceof Wn&&UT(n)}function IV(n){return h5(n)||p5(n)||(function(t){if(t instanceof Wn&&UD(t)){for(let r of t.getFilters())if(!h5(r)&&!p5(r))return!1;return!0}return!1})(n)}function g5(n){if(yt(n instanceof wn||n instanceof Wn,34018),n instanceof wn)return n;if(n.filters.length===1)return g5(n.filters[0]);let e=n.filters.map(r=>g5(r)),t=Wn.create(e,n.op);return t=d2(t),IV(t)?t:(yt(t instanceof Wn,64498),yt(Cg(t),40251),yt(t.filters.length>1,57927),t.filters.reduce((r,i)=>GT(r,i)))}function GT(n,e){let t;return yt(n instanceof wn||n instanceof Wn,38388),yt(e instanceof wn||e instanceof Wn,25473),t=n instanceof wn?e instanceof wn?(function(i,o){return Wn.create([i,o],"and")})(n,e):V6(n,e):e instanceof wn?V6(e,n):(function(i,o){if(yt(i.filters.length>0&&o.filters.length>0,48005),Cg(i)&&Cg(o))return H8(i,o.getFilters());let s=UD(i)?i:o,a=UD(i)?o:i,c=s.filters.map(l=>GT(l,a));return Wn.create(c,"or")})(n,e),d2(t)}function V6(n,e){if(Cg(e))return H8(e,n.getFilters());{let t=e.filters.map(r=>GT(n,r));return Wn.create(t,"or")}}function d2(n){if(yt(n instanceof wn||n instanceof Wn,11850),n instanceof wn)return n;let e=n.getFilters();if(e.length===1)return d2(e[0]);if(q8(n))return n;let t=e.map(i=>d2(i)),r=[];return t.forEach(i=>{i instanceof wn?r.push(i):i instanceof Wn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Wn.create(r,n.op)}var m5=class{constructor(){this.Dn=new Qv}addToCollectionParentIndex(e,t){return this.Dn.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(xa.min())}getMinOffsetFromCollectionGroup(e,t){return we.resolve(xa.min())}updateCollectionGroup(e,t,r){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}},Qv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new er(xn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new er(xn.comparator)).toArray()}};var j6="IndexedDbIndexManager",Mb=new Uint8Array(0),v5=class{constructor(e,t){this.databaseId=t,this.vn=new Qv,this.Cn=new Qa(r=>Gf(r),(r,i)=>cy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:po(i)};return B6(e).put(o)}return we.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[g8(t),""],!1,!0);return B6(e).j(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(qc(s.parent))}return r})}addFieldIndex(e,t){let r=bv(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}})(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=ig(e);return o.next(a=>{s.put(P6(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=bv(e),i=ig(e),o=rg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=bv(e),r=rg(e),i=ig(e);return t.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,t){return we.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new u2(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=rg(e),i=!0,o=new Map;return we.forEach(this.Fn(t),s=>this.Mn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=un(),a=[];return we.forEach(o,(c,l)=>{qe(j6,`Using index ${(function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`})(c)} to execute ${Gf(t)}`);let u=(function(j,W){let ae=MD(W);if(ae===void 0)return null;for(let me of n2(j,ae.fieldPath))switch(me.op){case"array-contains-any":return me.value.arrayValue.values||[];case"array-contains":return[me.value]}return null})(l,c),p=(function(j,W){let ae=new Map;for(let me of Of(W))for(let z of n2(j,me.fieldPath))switch(z.op){case"==":case"in":ae.set(me.fieldPath.canonicalString(),z.value);break;case"not-in":case"!=":return ae.set(me.fieldPath.canonicalString(),z.value),Array.from(ae.values())}return null})(l,c),m=(function(j,W){let ae=[],me=!0;for(let z of Of(W)){let M=z.kind===0?y6(j,z.fieldPath,j.startAt):_6(j,z.fieldPath,j.startAt);ae.push(M.value),me&&(me=M.inclusive)}return new Zc(ae,me)})(l,c),g=(function(j,W){let ae=[],me=!0;for(let z of Of(W)){let M=z.kind===0?_6(j,z.fieldPath,j.endAt):y6(j,z.fieldPath,j.endAt);ae.push(M.value),me&&(me=M.inclusive)}return new Zc(ae,me)})(l,c),C=this.xn(c,l,m),I=this.xn(c,l,g),N=this.On(c,l,p),P=this.Nn(c.indexId,u,C,m.inclusive,I,g.inclusive,N);return we.forEach(P,Q=>r.H(Q,t.limit).next(j=>{j.forEach(W=>{let ae=nt.fromSegments(W.documentKey);s.has(ae)||(s=s.add(ae),a.push(ae))})}))}).next(()=>a)}return we.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=eJ(Wn.create(e.filters,"and")).map(r=>ZD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),u=[];for(let p=0;p<c;++p){let m=t?this.Bn(t[p/l]):Mb,g=this.Ln(e,m,r[p%l],i),C=this.kn(e,m,o[p%l],s),I=a.map(N=>this.Ln(e,m,N,!0));u.push(...this.createRange(g,C,I))}return u}Ln(e,t,r,i){let o=new Bf(e,nt.empty(),t,r);return i?o:o.En()}kn(e,t,r,i){let o=new Bf(e,nt.empty(),t,r);return i?o.En():o}Mn(e,t){let r=new u2(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.pn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Fn(t);return we.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<(function(c){let l=new er(Jr.comparator),u=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?u=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(u?1:0)})(o)&&(r=1):r=0})).next(()=>(function(s){return s.limit!==null})(t)&&i.length>1&&r===2?1:r)}qn(e,t){let r=new jf;for(let i of Of(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.hn(i.kind);Vl.Ut.bt(o,s)}return r.an()}Bn(e){let t=new jf;return Vl.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let r=new jf;return Vl.Ut.bt(Hf(this.databaseId,t),r.hn((function(o){let s=Of(o);return s.length===0?0:s[s.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let i=[];i.push(new jf);let o=0;for(let s of Of(e)){let a=r[o++];for(let c of i)if(this.$n(t,s.fieldPath)&&qv(a))i=this.Un(i,s,a);else{let l=c.hn(s.kind);Vl.Ut.bt(a,l)}}return this.Kn(i)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new jf;c.seed(a.an()),Vl.Ut.bt(s,c.hn(t.kind)),o.push(c)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof wn&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=bv(e),i=ig(e);return(t?r.j(LD,IDBKeyRange.bound(t,t)):r.j()).next(o=>{let s=[];return we.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push((function(u,p){let m=p?new Ov(p.sequenceNumber,new xa(Zf(p.readTime),new nt(qc(p.documentKey)),p.largestBatchId)):Ov.empty(),g=u.fields.map(([C,I])=>new fg(Jr.fromServerFormat(C),I));return new vg(u.indexId,u.collectionGroup,g,m)})(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=bv(e),o=ig(e);return this.Wn(e).next(s=>i.j(LD,IDBKeyRange.bound(t,t)).next(a=>we.forEach(a,c=>o.put(P6(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return we.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?we.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),we.forEach(a,c=>this.Gn(e,i,c).next(l=>{let u=this.zn(o,c);return l.isEqual(u)?we.resolve():this.jn(e,o,c,l,u)}))))})}Jn(e,t,r,i){return rg(e).put(i.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,i){return rg(e).delete(i.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){let i=rg(e),o=new er(nd);return i.X({index:A8,range:IDBKeyRange.only([r.indexId,this.uid,Bb(this.Qn(r,t))])},(s,a)=>{o=o.add(new Bf(r.indexId,t,F6(a.arrayValue),F6(a.directionalValue)))}).next(()=>o)}zn(e,t){let r=new er(nd),i=this.qn(t,e);if(i==null)return r;let o=MD(t);if(o!=null){let s=e.data.field(o.fieldPath);if(qv(s))for(let a of s.arrayValue.values||[])r=r.add(new Bf(t.indexId,e.key,this.Bn(a),i))}else r=r.add(new Bf(t.indexId,e.key,Mb,i));return r}jn(e,t,r,i,o){qe(j6,"Updating index entries for document '%s'",t.key);let s=[];return(function(c,l,u,p,m){let g=c.getIterator(),C=l.getIterator(),I=tg(g),N=tg(C);for(;I||N;){let P=!1,Q=!1;if(I&&N){let j=u(I,N);j<0?Q=!0:j>0&&(P=!0)}else I!=null?Q=!0:P=!0;P?(p(N),N=tg(C)):Q?(m(I),I=tg(g)):(I=tg(g),N=tg(C))}})(i,o,nd,a=>{s.push(this.Jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),we.waitFor(s)}Wn(e){let t=1;return ig(e).X({index:S8,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>nd(s,a)).filter((s,a,c)=>!a||nd(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=nd(s,e),c=nd(s,t);if(a===0)i[0]=e.En();else if(a>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];let a=i[s].Rn(this.uid,Mb,nt.empty()),c=i[s+1].Rn(this.uid,Mb,nt.empty());o.push(IDBKeyRange.bound(a,c))}return o}Yn(e,t){return nd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(U6)}getMinOffset(e,t){return we.mapArray(this.Fn(t),r=>this.Mn(e,r).next(i=>i||lt(44426))).next(U6)}};function B6(n){return Di(n,jv)}function rg(n){return Di(n,Dv)}function bv(n){return Di(n,LT)}function ig(n){return Di(n,Av)}function U6(n){yt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;kT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new xa(e.readTime,e.documentKey,t)}var z6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SV=41943040,os=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function AV(n,e,t){let r=n.store(Ya),i=n.store(yg),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.X({range:s},(u,p,m)=>(a++,m.delete()));o.push(c.next(()=>{yt(a===1,47070,{batchId:t.batchId})}));let l=[];for(let u of t.mutations){let p=E8(e,u.key.path,t.batchId);o.push(i.delete(p)),l.push(u.key)}return we.waitFor(o).next(()=>l)}function f2(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt(14731);e=n.noDocument}return JSON.stringify(e).length}os.DEFAULT_COLLECTION_PERCENTILE=10,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,os.DEFAULT=new os(SV,os.DEFAULT_COLLECTION_PERCENTILE,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),os.DISABLED=new os(-1,0,0);var h2=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,t,r,i){yt(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rd(e).X({index:Uf,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=ug(e),s=rd(e);return s.add({}).next(a=>{yt(typeof a=="number",49019);let c=new Hv(a,t,r,i),l=(function(g,C,I){let N=I.baseMutations.map(Q=>Zv(g.gt,Q)),P=I.mutations.map(Q=>Zv(g.gt,Q));return{userId:C,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:N,mutations:P}})(this.serializer,this.userId,c),u=[],p=new er((m,g)=>zt(m.canonicalString(),g.canonicalString()));for(let m of i){let g=E8(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),u.push(s.put(l)),u.push(o.put(g,eX))}return p.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Zn[a]=c.keys()}),we.waitFor(u).next(()=>c)})}lookupMutationBatch(e,t){return rd(e).get(t).next(r=>r?(yt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Vf(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?we.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return rd(e).X({index:Uf,range:i},(s,a,c)=>{a.userId===this.userId&&(yt(a.batchId>=r,47524,{er:r}),o=Vf(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=cd;return rd(e).X({index:Uf,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,cd],[this.userId,Number.POSITIVE_INFINITY]);return rd(e).j(Uf,t).next(r=>r.map(i=>Vf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Rb(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ug(e).X({range:i},(s,a,c)=>{let[l,u,p]=s,m=qc(u);if(l===this.userId&&t.path.isEqual(m))return rd(e).get(p).next(g=>{if(!g)throw lt(61480,{tr:s,batchId:p});yt(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:p}),o.push(Vf(this.serializer,g))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new er(zt),i=[];return t.forEach(o=>{let s=Rb(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ug(e).X({range:a},(l,u,p)=>{let[m,g,C]=l,I=qc(g);m===this.userId&&o.path.isEqual(I)?r=r.add(C):p.done()});i.push(c)}),we.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Rb(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new er(zt);return ug(e).X({range:s},(c,l,u)=>{let[p,m,g]=c,C=qc(m);p===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(g)):u.done()}).next(()=>this.nr(e,a))}nr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(rd(e).get(o).next(s=>{if(s===null)throw lt(35274,{batchId:o});yt(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Vf(this.serializer,s))}))}),we.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return AV(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),we.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return we.resolve();let r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return ug(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=qc(o[1]);i.push(c)}else a.done()}).next(()=>{yt(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return DV(e,this.userId,t)}sr(e){return TV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:cd,lastStreamToken:""})}};function DV(n,e,t){let r=Rb(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ug(n).X({range:o,Z:!0},(a,c,l)=>{let[u,p,m]=a;u===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function rd(n){return Di(n,Ya)}function ug(n){return Di(n,yg)}function TV(n){return Di(n,Fv)}var Tg=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var y5=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let r=new Tg(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>Tt.fromTimestamp(new hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.lr(e,i)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>og(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(yt(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return og(e).X((s,a)=>{let c=Iv(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>we.waitFor(o)).next(()=>i)}forEachTarget(e,t){return og(e).X((r,i)=>{let o=Iv(i);t(o)})}cr(e){return q6(e).get(Yb).next(t=>(yt(t!==null,2888),t))}lr(e,t){return q6(e).put(Yb,t)}hr(e,t){return og(e).put(EV(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Gf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return og(e).X({range:i,index:I8},(s,a,c)=>{let l=Iv(a);cy(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=od(e);return t.forEach(s=>{let a=po(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),we.waitFor(i)}removeMatchingKeys(e,t,r){let i=od(e);return we.forEach(t,o=>{let s=po(o.path);return we.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=od(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=od(e),o=un();return i.X({range:r,Z:!0},(s,a,c)=>{let l=qc(s[1]),u=new nt(l);o=o.add(u)}).next(()=>o)}containsKey(e,t){let r=po(t.path),i=IDBKeyRange.bound([r],[g8(r)],!1,!0),o=0;return od(e).X({index:OT,Z:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Et(e,t){return og(e).get(t).next(r=>r?Iv(r):null)}};function og(n){return Di(n,_g)}function q6(n){return Di(n,$f)}function od(n){return Di(n,wg)}var $6="LruGarbageCollector",tJ=1048576;function H6([n,e],[t,r]){let i=zt(n,t);return i===0?zt(e,r):i}var _5=class{constructor(e){this.Tr=e,this.buffer=new er(H6),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();H6(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},p2=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){qe($6,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>ee(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ed(t)?qe($6,"Ignoring IndexedDB error during garbage collection: ",t):yield xd(t)}yield this.Rr(3e5)}))}},w5=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return we.resolve(Us.ue);let r=new _5(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(z6)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z6):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),sg()<=_c.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function MV(n,e){return new w5(n,e)}var b5=class{constructor(e,t){this.db=e,this.garbageCollector=MV(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,i)=>t(i))}addReference(e,t,r){return Nb(e,r)}removeReference(e,t,r){return Nb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Nb(e,t)}Sr(e,t){return(function(i,o){let s=!1;return TV(i).ee(a=>DV(i,a,o).next(c=>(c&&(s=!0),we.resolve(!c)))).next(()=>s)})(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.wr(e,(s,a)=>{if(a<=t){let c=this.Sr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Tt.min()),od(e).delete((function(p){return[0,po(p.path)]})(s))))});i.push(c)}}).next(()=>we.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Nb(e,t)}wr(e,t){let r=od(e),i,o=Us.ue;return r.X({index:OT},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Us.ue&&t(new nt(qc(i)),o),o=l,i=c):o=Us.ue}).next(()=>{o!==Us.ue&&t(new nt(qc(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Nb(n,e){return od(n).put((function(r,i){return{targetId:0,path:po(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}var g2=class{constructor(){this.changes=new Qa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?we.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var x5=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Rf(e).put(r)}removeEntry(e,t,r){return Rf(e).delete((function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],c2(s),a[a.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=pi.newInvalidDocument(t);return Rf(e).X({index:Ob,range:IDBKeyRange.only(xv(t))},(i,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:pi.newInvalidDocument(t)};return Rf(e).X({index:Ob,range:IDBKeyRange.only(xv(t))},(i,o)=>{r={document:this.Dr(t,o),size:f2(o)}}).next(()=>r)}getEntries(e,t){let r=ss();return this.Cr(e,t,(i,o)=>{let s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,t){let r=ss(),i=new _r(nt.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Dr(o,s);r=r.insert(o,a),i=i.insert(o,f2(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,t,r){if(t.isEmpty())return we.resolve();let i=new er(K6);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(xv(i.first()),xv(i.last())),s=i.getIterator(),a=s.getNext();return Rf(e).X({index:Ob,range:o},(c,l,u)=>{let p=nt.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&K6(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?u.G(xv(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),c2(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rf(e).j(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let u=ss();for(let p of l){let m=this.Dr(nt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(uy(t,m)||i.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,t,r,i){let o=ss(),s=G6(t,r),a=G6(t,xa.max());return Rf(e).X({index:C8,range:IDBKeyRange.bound(s,a,!0)},(c,l,u)=>{let p=this.Dr(nt.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&u.done()}).next(()=>o)}newChangeBuffer(e){return new E5(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return W6(e).get(OD).next(t=>(yt(!!t,20021),t))}br(e,t){return W6(e).put(OD,t)}Dr(e,t){if(t){let r=XX(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Tt.min())))return r}return pi.newInvalidDocument(e)}};function NV(n){return new x5(n)}var E5=class extends g2{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Qa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new er((o,s)=>zt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=M6(this.Or.serializer,s);i=i.add(o.path.popLast());let l=f2(c);r+=l-a.size,t.push(this.Or.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=M6(this.Or.serializer,s.convertToNoDocument(Tt.min()));t.push(this.Or.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),we.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function W6(n){return Di(n,Vv)}function Rf(n){return Di(n,Kb)}function xv(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function G6(n,e){let t=e.documentKey.path.toArray();return[n,c2(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function K6(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=zt(t[o],r[o]),i)return i;return i=zt(t.length,r.length),i||(i=zt(t[t.length-2],r[r.length-2]),i||zt(t[t.length-1],r[r.length-1]))}var C5=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var m2=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Nv(r.mutation,i,zs.empty(),hr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,un()).next(()=>r))}getLocalViewOfDocuments(e,t,r=un()){let i=$c();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Cv();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=$c();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,un()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ss(),s=Mv(),a=(function(){return Mv()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Xa)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),Nv(u.mutation,l,u.mutation.getFieldMask(),hr.now())):s.set(l.key,zs.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),t.forEach((l,u)=>{var p;return a.set(l,new C5(u,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Mv(),i=new _r((s,a)=>s-a),o=un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||zs.empty();u=a.applyToLocalView(l,u),r.set(c,u);let p=(i.get(a.batchId)||un()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,p=eV();u.forEach(m=>{if(!o.has(m)){let g=aV(t.get(m),r.get(m));g!==null&&p.set(m,g),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return we.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return nt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):we.resolve($c()),a=mg,c=o;return s.next(l=>we.forEach(l,(u,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(u)?we.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{c=c.insert(u,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,un())).next(u=>({batchId:a,changes:J8(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nt(t)).next(r=>{let i=Cv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Cv();return this.indexManager.getCollectionParents(e,o).next(a=>we.forEach(a,c=>{let l=(function(p,m){return new Za(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,pi.newInvalidDocument(u)))});let a=Cv();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&Nv(u.mutation,l,zs.empty(),hr.now()),uy(t,l)&&(a=a.insert(c,l))}),a})}};var I5=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return we.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ei(i.createTime)}})(t)),we.resolve()}getNamedQuery(e,t){return we.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:WT(i.bundledQuery),readTime:ei(i.readTime)}})(t)),we.resolve()}};var S5=class{constructor(){this.overlays=new _r(nt.comparator),this.kr=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}getOverlays(e,t){let r=$c();return we.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),we.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),we.resolve()}getOverlaysForCollection(e,t,r){let i=$c(),o=t.length+1,s=new nt(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return we.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new _r((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=$c(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=$c(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return we.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Wv(t,r));let o=this.kr.get(t);o===void 0&&(o=un(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var A5=class{constructor(){this.sessionToken=ti.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,we.resolve()}};var Xv=class{constructor(){this.qr=new er(di.Qr),this.$r=new er(di.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new di(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new di(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new nt(new xn([])),r=new di(t,e),i=new di(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new nt(new xn([])),r=new di(t,e),i=new di(t,e+1),o=un();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new di(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},di=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return nt.comparator(e.key,t.key)||zt(e.Hr,t.Hr)}static Ur(e,t){return zt(e.Hr,t.Hr)||nt.comparator(e.key,t.key)}};var D5=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new er(di.Qr)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Hv(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new di(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return we.resolve(s)}lookupMutationBatch(e,t){return we.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return we.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?cd:this.er-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new di(t,0),i=new di(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),we.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new er(zt);return t.forEach(i=>{let o=new di(i,0),s=new di(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),we.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;nt.isDocumentKey(o)||(o=o.child(""));let s=new di(new nt(o),0),a=new er(zt);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),we.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){yt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return we.forEach(t.mutations,i=>{let o=new di(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new di(t,0),i=this.Yr.firstAfterOrEqual(r);return we.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var T5=class{constructor(e){this.ni=e,this.docs=(function(){return new _r(nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return we.resolve(r?r.document.mutableCopy():pi.newInvalidDocument(t))}getEntries(e,t){let r=ss();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pi.newInvalidDocument(i))}),we.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ss(),s=t.path,a=new nt(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||kT(_8(u),r)<=0||(i.has(u.key)||uy(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return we.resolve(o)}getAllFromCollectionGroup(e,t,r,i){lt(9500)}ri(e,t){return we.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new M5(this)}getSize(e){return we.resolve(this.size)}},M5=class extends g2{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),we.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var N5=class{constructor(e){this.persistence=e,this.ii=new Qa(t=>Gf(t),cy),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.si=0,this.oi=new Xv,this.targetCount=0,this._i=Tg.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),we.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Tg(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.hr(t),we.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),we.waitFor(o).next(()=>i)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return we.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),we.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),we.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),we.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return we.resolve(r)}containsKey(e,t){return we.resolve(this.oi.containsKey(t))}};var Jv=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Us(0),this.ci=!1,this.ci=!0,this.li=new A5,this.referenceDelegate=e(this),this.hi=new N5(this),this.indexManager=new m5,this.remoteDocumentCache=(function(i){return new T5(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new a2(t),this.Ti=new I5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new S5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new D5(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);let i=new P5(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return we.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},P5=class extends Hb{constructor(e){super(),this.currentSequenceNumber=e}},v2=class n{constructor(e){this.persistence=e,this.Ai=new Xv,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw lt(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),we.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),we.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.mi,r=>{let i=nt.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Tt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return we.or([()=>we.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},y2=class n{constructor(e,t){this.persistence=e,this.gi=new Qa(r=>po(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=MV(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return we.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return we.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?we.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Tt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),we.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),we.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fb(e.data.value)),t}Sr(e,t,r){return we.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return we.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var k5=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new Wb("createOrUpgrade",t);r<1&&i>=1&&((function(c){c.createObjectStore(ay)})(e),(function(c){c.createObjectStore(Fv,{keyPath:JQ}),c.createObjectStore(Ya,{keyPath:a6,autoIncrement:!0}).createIndex(Uf,c6,{unique:!0}),c.createObjectStore(yg)})(e),Y6(e),(function(c){c.createObjectStore(Lf)})(e));let s=we.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(wg),c.deleteObjectStore(_g),c.deleteObjectStore($f)})(e),Y6(e)),s=s.next(()=>(function(c){let l=c.store($f),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return l.put(Yb,u)})(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>(function(c,l){return l.store(Ya).j().next(p=>{c.deleteObjectStore(Ya),c.createObjectStore(Ya,{keyPath:a6,autoIncrement:!0}).createIndex(Uf,c6,{unique:!0});let m=l.store(Ya),g=p.map(C=>m.put(C));return we.waitFor(g)})})(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(bg,{keyPath:cX})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>((function(c){c.createObjectStore(Vv)})(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(H2,{keyPath:lX})})(e),(function(c){c.createObjectStore(W2,{keyPath:uX})})(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore(G2,{keyPath:vX});l.createIndex(FD,yX,{unique:!1}),l.createIndex(D8,_X,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>(function(c){let l=c.createObjectStore(Kb,{keyPath:tX});l.createIndex(Ob,nX),l.createIndex(C8,rX)})(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(Lf))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>(function(c){c.createObjectStore(LT,{keyPath:dX,autoIncrement:!0}).createIndex(LD,fX,{unique:!1}),c.createObjectStore(Av,{keyPath:hX}).createIndex(S8,pX,{unique:!1}),c.createObjectStore(Dv,{keyPath:gX}).createIndex(A8,mX,{unique:!1})})(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(Av).clear()}).next(()=>{t.objectStore(Dv).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(FT,{keyPath:wX})})(e)})),r<18&&i>=18&&UE()&&(s=s.next(()=>{t.objectStore(Av).clear()}).next(()=>{t.objectStore(Dv).clear()})),s}yi(e){let t=0;return e.store(Lf).X((r,i)=>{t+=f2(i)}).next(()=>{let r={byteSize:t};return e.store(Vv).put(OD,r)})}pi(e){let t=e.store(Fv),r=e.store(Ya);return t.j().next(i=>we.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,cd],[o.userId,o.lastAcknowledgedBatchId]);return r.j(Uf,s).next(a=>we.forEach(a,c=>{yt(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let l=Vf(this.serializer,c);return AV(e,o.userId,l).next(()=>{})}))}))}wi(e){let t=e.store(wg),r=e.store(Lf);return e.store($f).get(Yb).next(i=>{let o=[];return r.X((s,a)=>{let c=new xn(s),l=(function(p){return[0,po(p)]})(c);o.push(t.get(l).next(u=>u?we.resolve():(p=>t.put({targetId:0,path:po(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>we.waitFor(o))})}Si(e,t){e.createObjectStore(jv,{keyPath:aX});let r=t.store(jv),i=new Qv,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:po(c)})}};return t.store(Lf).X({Z:!0},(s,a)=>{let c=new xn(s);return o(c.popLast())}).next(()=>t.store(yg).X({Z:!0},([s,a,c],l)=>{let u=qc(a);return o(u.popLast())}))}bi(e){let t=e.store(_g);return t.X((r,i)=>{let o=Iv(i),s=EV(this.serializer,o);return t.put(s)})}Di(e,t){let r=t.store(Lf),i=[];return r.X((o,s)=>{let a=t.store(Kb),c=(function(p){return p.document?new nt(xn.fromString(p.document.name).popFirst(5)):p.noDocument?nt.fromSegments(p.noDocument.path):p.unknownDocument?nt.fromSegments(p.unknownDocument.path):lt(36783)})(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>we.waitFor(i))}Ci(e,t){let r=t.store(Ya),i=NV(this.serializer),o=new Jv(v2.Vi,this.serializer.gt);return r.j().next(s=>{let a=new Map;return s.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:un();Vf(this.serializer,c).keys().forEach(p=>u=u.add(p)),a.set(c.userId,u)}),we.forEach(a,(c,l)=>{let u=new fi(l),p=l2.yt(this.serializer,u),m=o.getIndexManager(u),g=h2.yt(u,this.serializer,m,o.referenceDelegate);return new m2(i,g,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Bv(t,Us.ue),c).next()})})}};function Y6(n){n.createObjectStore(wg,{keyPath:oX}).createIndex(OT,sX,{unique:!0}),n.createObjectStore(_g,{keyPath:"targetId"}).createIndex(I8,iX,{unique:!0}),n.createObjectStore($f)}var id="IndexedDbPersistence",vD=18e5,yD=5e3,_D="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",PV="main",R5=class n{constructor(e,t,r,i,o,s,a,c,l,u,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=s,this.document=a,this.Mi=l,this.xi=u,this.Oi=p,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=m=>Promise.resolve(),!n.C())throw new Ve(Ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new b5(this,i),this.Qi=t+PV,this.serializer=new a2(c),this.$i=new fd(this.Qi,this.Oi,new k5(this.serializer)),this.li=new l5,this.hi=new y5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NV(this.serializer),this.Ti=new c5,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,u===!1&&Xr(id,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(Ce.FAILED_PRECONDITION,_D);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new Us(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>ee(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>ee(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(Ed(e))return qe(id,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qe(id,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return Ev(e).get(eg).next(t=>we.resolve(this.Xi(t)))}es(e){return Pb(e).delete(this.clientId)}ts(){return ee(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,vD)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Di(t,bg);return r.j().next(i=>{let o=this.rs(i,vD),s=i.filter(a=>o.indexOf(a)===-1);return we.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?we.resolve(!0):Ev(e).get(eg).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,yD)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new Ve(Ce.FAILED_PRECONDITION,_D);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pb(e).j().next(r=>this.rs(r,yD).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&qe(id,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return ee(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[ay,bg],e=>{let t=new Bv(e,Us.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>Pb(e).j().next(t=>this.rs(t,vD).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return h2.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new v5(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return l2.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){qe(id,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=(function(c){return c===18?EX:c===17?P8:c===16?xX:c===15?VT:c===14?N8:c===13?M8:c===12?bX:c===11?T8:void lt(60245)})(this.Oi),s;return this.$i.runTransaction(e,i,o,a=>(s=new Bv(a,this.ui?this.ui.next():Us.ue),t==="readwrite-primary"?this.Ji(s).next(c=>!!c||this.Hi(s)).next(c=>{if(!c)throw Xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new Ve(Ce.FAILED_PRECONDITION,w8);return r(s)}).next(c=>this.Zi(s).next(()=>c)):this.Ts(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ts(e){return Ev(e).get(eg).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,yD)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ve(Ce.FAILED_PRECONDITION,_D)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ev(e).put(eg,t)}static C(){return fd.C()}Yi(e){let t=Ev(e);return t.get(eg).next(r=>this.Xi(r)?(qe(id,"Releasing primary lease."),t.delete(eg)):we.resolve())}ns(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Xr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;BE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return qe(id,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xr(id,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Xr("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ev(n){return Di(n,ay)}function Pb(n){return Di(n,bg)}function KT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var O5=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=un(),i=un();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var L5=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _2=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return BE()?8:b8(Um())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new L5;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(sg()<=_c.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",ag(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),we.resolve()):(sg()<=_c.DEBUG&&qe("QueryEngine","Query:",ag(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(sg()<=_c.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",ag(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vo(t))):we.resolve())}ps(e,t){if(w6(t))return we.resolve(null);let r=Vo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=r2(t,null,"F"),r=Vo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=un(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,r2(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return w6(t)||i.isEqual(Tt.min())?we.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?we.resolve(null):(sg()<=_c.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ag(t)),this.vs(e,s,t,y8(i,mg)).next(a=>a))})}bs(e,t){let r=new er(Q8(e));return t.forEach((i,o)=>{uy(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return sg()<=_c.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",ag(t)),this.gs.getDocumentsMatchingQuery(e,t,xa.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var YT="LocalStore",nJ=3e8,F5=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new _r(zt),this.Ms=new Qa(o=>Gf(o),cy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function kV(n,e,t,r){return new F5(n,e,t,r)}function RV(n,e){return ee(this,null,function*(){let t=ot(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=un();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function rJ(n,e){let t=ot(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let p=l.batch,m=p.keys(),g=we.resolve();return m.forEach(C=>{g=g.next(()=>u.getEntry(c,C)).next(I=>{let N=l.docVersions.get(C);yt(N!==null,48541),I.version.compareTo(N)<0&&(p.applyToRemoteDocument(I,l),I.isValidDocument()&&(I.setReadTime(l.commitVersion),u.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=un();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function OV(n){let e=ot(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function iJ(n,e){let t=ot(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((u,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,u.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,u.addedDocuments,p)));let g=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(ti.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(p,g),(function(I,N,P){return I.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=nJ?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(m,g,u)&&a.push(t.hi.updateTargetData(o,g))});let c=ss(),l=un();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(LV(o,s,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!r.isEqual(Tt.min())){let u=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return we.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function LV(n,e,t){let r=un(),i=un();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ss();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Tt.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):qe(YT,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function oJ(n,e){let t=ot(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=cd),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Mg(n,e){let t=ot(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,we.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Dg(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function Ng(n,e,t){return ee(this,null,function*(){let r=ot(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ed(s))throw s;qe(YT,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function w2(n,e,t){let r=ot(n),i=Tt.min(),o=un();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,u){let p=ot(c),m=p.Ms.get(u);return m!==void 0?we.resolve(p.Fs.get(m)):p.hi.getTargetData(l,u)})(r,s,Vo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Tt.min(),t?o:un())).next(a=>(jV(r,Z8(e),a),{documents:a,qs:o})))}function FV(n,e){let t=ot(n),r=ot(t.hi),i=t.Fs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function VV(n,e){let t=ot(n),r=t.xs.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Os.getAllFromCollectionGroup(i,e,y8(r,mg),Number.MAX_SAFE_INTEGER)).then(i=>(jV(t,e,i),i))}function jV(n,e,t){let r=n.xs.get(e)||Tt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}function sJ(n,e,t,r){return ee(this,null,function*(){let i=ot(n),o=un(),s=ss();for(let l of t){let u=e.Qs(l.metadata.name);l.document&&(o=o.add(u));let p=e.$s(l);p.setReadTime(e.Us(l.metadata.readTime)),s=s.insert(u,p)}let a=i.Os.newChangeBuffer({trackRemovals:!0}),c=yield Mg(i,(function(u){return Vo(jg(xn.fromString(`__bundle__/docs/${u}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>LV(l,a,s).next(u=>(a.apply(l),u)).next(u=>i.hi.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.hi.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,u.Ls,u.ks)).next(()=>u.Ls)))})}function aJ(r,i){return ee(this,arguments,function*(n,e,t=un()){let o=yield Mg(n,Vo(WT(e.bundledQuery))),s=ot(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=ei(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Ti.saveNamedQuery(a,e);let l=o.withResumeToken(ti.EMPTY_BYTE_STRING,c);return s.Fs=s.Fs.insert(l.targetId,l),s.hi.updateTargetData(a,l).next(()=>s.hi.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.hi.addMatchingKeys(a,t,o.targetId)).next(()=>s.Ti.saveNamedQuery(a,e))})})}var BV="firestore_clients";function Z6(n,e){return`${BV}_${n}_${e}`}var UV="firestore_mutations";function Q6(n,e,t){let r=`${UV}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var zV="firestore_targets";function wD(n,e){return`${zV}_${n}_${e}`}var zc="SharedClientState",b2=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ks(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new Ve(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Xr(zc,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Pv=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new Ve(r.error.code,r.error.message))),o?new n(e,r.state,i):(Xr(zc,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},x2=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=qT();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=x8(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Xr(zc,`Failed to parse client data for instance '${e}': ${t}`),null)}},V5=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Xr(zc,`Failed to parse online state: ${e}`),null)}},ey=class{constructor(){this.activeTargetIds=qT()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},kv=class{constructor(e,t,r,i,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new _r(zt),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=Z6(this.persistenceKey,this.js),this.eo=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new ey),this.no=new RegExp(`^${BV}_${s}_([^_]*)$`),this.ro=new RegExp(`^${UV}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${zV}_${s}_(\\d+)$`),this.so=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.oo=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return ee(this,null,function*(){let e=yield this.syncEngine.Ps();for(let r of e){if(r===this.js)continue;let i=this.getItem(Z6(this.persistenceKey,r));if(i){let o=x2.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();let t=this.storage.getItem(this.so);if(t){let r=this.ao(t);r&&this.uo(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(wD(this.persistenceKey,e));if(i){let o=Pv.Ks(e,i);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wD(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return qe(zc,"READ",e,t),t}setItem(e,t){qe(zc,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){qe(zc,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if(qe(zc,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>ee(this,null,function*(){if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){let r=this.Ao(t.key);return this.Ro(r,null)}{let r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){let r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){let r=(function(o){let s=Us.ue;if(o!=null)try{let a=JSON.parse(o);yt(typeof a=="number",30636,{wo:o}),s=a}catch(a){Xr(zc,"Failed to read sequence number from WebStorage",a)}return s})(t.newValue);r!==Us.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){let r=this.So(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){let i=new b2(this.currentUser,e,t,r),o=Q6(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){let t=Q6(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){let t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){let i=wD(this.persistenceKey,e),o=new Pv(e,t,r);this.setItem(i,o.Ws())}Eo(e){let t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){let t=this.no.exec(e);return t?t[1]:null}Vo(e,t){let r=this.Ao(e);return x2.Ks(r,t)}mo(e,t){let r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return b2.Ks(new fi(o),i,t)}po(e,t){let r=this.io.exec(e),i=Number(r[1]);return Pv.Ks(i,t)}ao(e){return V5.Ks(e)}So(e){return JSON.parse(e)}fo(e){return ee(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);qe(zc,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Ys.insert(e,t):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Co(s,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=qT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},E2=class{constructor(){this.Fo=new ey,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ey,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var j5=class{xo(e){}shutdown(){}};var X6="ConnectivityMonitor",C2=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){qe(X6,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){qe(X6,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var kb=null;function B5(){return kb===null?kb=(function(){return 268435456+Math.round(2147483648*Math.random())})():kb++,"0x"+kb.toString(16)}var bD="RestConnection",cJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},U5=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Xb?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=B5(),a=this.Go(e,t.toUriEncodedString());qe(bD,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),u=Fh(l);return this.jo(e,a,c,r,u).then(p=>(qe(bD,`Received RPC '${e}' ${s}: `,p),p),p=>{throw cs(bD,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vg})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=cJ[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var z5=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var fo="WebChannelConnection",q5=class extends U5{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=B5();return new Promise((a,c)=>{let l=new dD;l.setWithCredentials(!0),l.listenOnce(fD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _v.NO_ERROR:let p=l.getResponseJson();qe(fo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case _v.TIMEOUT:qe(fo,`RPC '${e}' ${s} timed out`),c(new Ve(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case _v.HTTP_ERROR:let m=l.getStatus();if(qe(fo,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let C=g?.error;if(C&&C.status&&C.message){let I=(function(P){let Q=P.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(Q)>=0?Q:Ce.UNKNOWN})(C.status);c(new Ve(I,C.message))}else c(new Ve(Ce.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Ve(Ce.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{qe(fo,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);qe(fo,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}P_(e,t,r){let i=B5(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=gD(),a=pD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");qe(fo,`Creating RPC '${e}' stream ${i}: ${u}`,c);let p=s.createWebChannel(u,c);this.T_(p);let m=!1,g=!1,C=new z5({Ho:N=>{g?qe(fo,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(qe(fo,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),qe(fo,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),I=(N,P,Q)=>{N.listen(P,j=>{try{Q(j)}catch(W){setTimeout(()=>{throw W},0)}})};return I(p,Jp.EventType.OPEN,()=>{g||(qe(fo,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),I(p,Jp.EventType.CLOSE,()=>{g||(g=!0,qe(fo,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),I(p,Jp.EventType.ERROR,N=>{g||(g=!0,cs(fo,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),C.__(new Ve(Ce.UNAVAILABLE,"The operation could not be completed")))}),I(p,Jp.EventType.MESSAGE,N=>{var P;if(!g){let Q=N.data[0];yt(!!Q,16349);let j=Q,W=j?.error||((P=j[0])===null||P===void 0?void 0:P.error);if(W){qe(fo,`RPC '${e}' stream ${i} received error:`,W);let ae=W.status,me=(function(S){let V=ui[S];if(V!==void 0)return uV(V)})(ae),z=W.message;me===void 0&&(me=Ce.INTERNAL,z="Unknown error status: "+ae+" with message "+W.message),g=!0,C.__(new Ve(me,z)),p.close()}else qe(fo,`RPC '${e}' stream ${i} received:`,Q),C.a_(Q)}}),I(a,hD.STAT_EVENT,N=>{N.stat===Db.PROXY?qe(fo,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Db.NOPROXY&&qe(fo,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function qV(){return typeof window<"u"?window:null}function Ub(){return typeof document<"u"?document:null}function dy(n){return new r5(n,!0)}var ty=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var J6="PersistentStream",I2=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ty(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return ee(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return ee(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return ee(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new Ve(Ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>ee(this,null,function*(){this.state=0,this.start()}))}G_(e){return qe(J6,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(qe(J6,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},$5=class extends I2{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=HX(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Tt.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Tt.min():s.readTime?ei(s.readTime):Tt.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=s5(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=t2(c)?{documents:vV(o,c)}:{query:yV(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=dV(o,s.resumeToken);let l=i5(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Tt.min())>0){a.readTime=Ag(o,s.snapshotVersion.toTimestamp());let l=i5(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=GX(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=s5(this.serializer),t.removeTarget=e,this.k_(t)}},H5=class extends I2{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=WX(e.writeResults,e.commitTime),r=ei(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=s5(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Zv(this.serializer,r))};this.k_(t)}};var W5=class{},G5=class extends W5{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ve(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,o5(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(Ce.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,o5(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(Ce.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},K5=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Xr(t),this._a=!1):qe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Qf="RemoteStore",Y5=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>ee(this,null,function*(){Id(this)&&(qe(Qf,"Restarting streams for network reachability change."),yield(function(c){return ee(this,null,function*(){let l=ot(c);l.Ia.add(4),yield Bg(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield fy(l)})})(this))}))}),this.Aa=new K5(r,i)}};function fy(n){return ee(this,null,function*(){if(Id(n))for(let e of n.da)yield e(!0)})}function Bg(n){return ee(this,null,function*(){for(let e of n.da)yield e(!1)})}function Q2(n,e){let t=ot(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),XT(t)?QT(t):zg(t).x_()&&ZT(t,e))}function Pg(n,e){let t=ot(n),r=zg(t);t.Ta.delete(e),r.x_()&&$V(t,e),t.Ta.size===0&&(r.x_()?r.B_():Id(t)&&t.Aa.set("Unknown"))}function ZT(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zg(n).H_(e)}function $V(n,e){n.Ra.$e(e),zg(n).Y_(e)}function QT(n){n.Ra=new n5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),zg(n).start(),n.Aa.aa()}function XT(n){return Id(n)&&!zg(n).M_()&&n.Ta.size>0}function Id(n){return ot(n).Ia.size===0}function HV(n){n.Ra=void 0}function lJ(n){return ee(this,null,function*(){n.Aa.set("Online")})}function uJ(n){return ee(this,null,function*(){n.Ta.forEach((e,t)=>{ZT(n,e)})})}function dJ(n,e){return ee(this,null,function*(){HV(n),XT(n)?(n.Aa.la(e),QT(n)):n.Aa.set("Unknown")})}function fJ(n,e,t){return ee(this,null,function*(){if(n.Aa.set("Online"),e instanceof o2&&e.state===2&&e.cause)try{yield(function(i,o){return ee(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){qe(Qf,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield S2(n,r)}else if(e instanceof pg?n.Ra.Ye(e):e instanceof i2?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Tt.min()))try{let r=yield OV(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.Ta.get(l);u&&o.Ta.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.Ta.get(c);if(!u)return;o.Ta.set(c,u.withResumeToken(ti.EMPTY_BYTE_STRING,u.snapshotVersion)),$V(o,c);let p=new Dg(u.target,c,l,u.sequenceNumber);ZT(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){qe(Qf,"Failed to raise snapshot:",r),yield S2(n,r)}})}function S2(n,e,t){return ee(this,null,function*(){if(!Ed(e))throw e;n.Ia.add(1),yield Bg(n),n.Aa.set("Offline"),t||(t=()=>OV(n.localStore)),n.asyncQueue.enqueueRetryable(()=>ee(null,null,function*(){qe(Qf,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield fy(n)}))})}function WV(n,e){return e().catch(t=>S2(n,t,e))}function Ug(n){return ee(this,null,function*(){let e=ot(n),t=wd(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:cd;for(;hJ(e);)try{let i=yield oJ(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,pJ(e,i)}catch(i){yield S2(e,i)}GV(e)&&KV(e)})}function hJ(n){return Id(n)&&n.Pa.length<10}function pJ(n,e){n.Pa.push(e);let t=wd(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function GV(n){return Id(n)&&!wd(n).M_()&&n.Pa.length>0}function KV(n){wd(n).start()}function gJ(n){return ee(this,null,function*(){wd(n).na()})}function mJ(n){return ee(this,null,function*(){let e=wd(n);for(let t of n.Pa)e.X_(t.mutations)})}function vJ(n,e,t){return ee(this,null,function*(){let r=n.Pa.shift(),i=JD.from(r,e,t);yield WV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ug(n)})}function yJ(n,e){return ee(this,null,function*(){e&&wd(n).Z_&&(yield(function(r,i){return ee(this,null,function*(){if((function(s){return lV(s)&&s!==Ce.ABORTED})(i.code)){let o=r.Pa.shift();wd(r).N_(),yield WV(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ug(r)}})})(n,e)),GV(n)&&KV(n)})}function e8(n,e){return ee(this,null,function*(){let t=ot(n);t.asyncQueue.verifyOperationInProgress(),qe(Qf,"RemoteStore received new credentials");let r=Id(t);t.Ia.add(3),yield Bg(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield fy(t)})}function Z5(n,e){return ee(this,null,function*(){let t=ot(n);e?(t.Ia.delete(2),yield fy(t)):e||(t.Ia.add(2),yield Bg(t),t.Aa.set("Unknown"))})}function zg(n){return n.Va||(n.Va=(function(t,r,i){let o=ot(t);return o.ia(),new $5(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:lJ.bind(null,n),e_:uJ.bind(null,n),n_:dJ.bind(null,n),J_:fJ.bind(null,n)}),n.da.push(e=>ee(null,null,function*(){e?(n.Va.N_(),XT(n)?QT(n):n.Aa.set("Unknown")):(yield n.Va.stop(),HV(n))}))),n.Va}function wd(n){return n.ma||(n.ma=(function(t,r,i){let o=ot(t);return o.ia(),new H5(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:gJ.bind(null,n),n_:yJ.bind(null,n),ea:mJ.bind(null,n),ta:vJ.bind(null,n)}),n.da.push(e=>ee(null,null,function*(){e?(n.ma.N_(),yield Ug(n)):(yield n.ma.stop(),n.Pa.length>0&&(qe(Qf,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var Q5=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qg(n,e){if(Xr("AsyncQueue",`${e}: ${n}`),Ed(n))return new Ve(Ce.UNAVAILABLE,`${e}: ${n}`);throw n}var A2=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||nt.comparator(t.key,r.key):(t,r)=>nt.comparator(t.key,r.key),this.keyedMap=Cv(),this.sortedSet=new _r(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var D2=class{constructor(){this.fa=new _r(nt.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):lt(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},kg=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,A2.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ly(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var X5=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},J5=class{constructor(){this.queries=t8(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ot(t),o=i.queries;i.queries=t8(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new Ve(Ce.ABORTED,"Firestore shutting down"))}};function t8(){return new Qa(n=>Y8(n),ly)}function JT(n,e){return ee(this,null,function*(){let t=ot(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new X5,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=qg(s,`Initialization of query '${ag(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&tM(t)})}function eM(n,e){return ee(this,null,function*(){let t=ot(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function _J(n,e){let t=ot(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&tM(t)}function wJ(n,e,t){let r=ot(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function tM(n){n.Da.forEach(e=>{e.next()})}var eT,n8;(n8=eT||(eT={})).Fa="default",n8.Cache="cache";var ny=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new kg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=kg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==eT.Cache}};var tT=class{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}};var T2=class{constructor(e){this.serializer=e}Qs(e){return Wc(this.serializer,e)}$s(e){return e.metadata.exists?mV(this.serializer,e.document,!1):pi.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return ei(e)}},nT=class{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=YV(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=xn.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){let t=new Map,r=new T2(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Qs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||un()).add(o);t.set(s,a)}}return t}za(e){return ee(this,null,function*(){let t=yield sJ(e,new T2(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(let i of this.Ua)yield aJ(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}})}};function YV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var M2=class{constructor(e){this.key=e}},N2=class{constructor(e){this.key=e}},P2=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=un(),this.mutatedKeys=un(),this.Xa=Q8(e),this.eu=new A2(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new D2,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,p)=>{let m=i.get(u),g=uy(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),N=!1;m&&g?m.data.isEqual(g.data)?C!==I&&(r.track({type:3,doc:g}),N=!0):this.iu(m,g)||(r.track({type:2,doc:g}),N=!0,(c&&this.Xa(g,c)>0||l&&this.Xa(g,l)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),N=!0):m&&!g&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(g?(s=s.add(g),o=I?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((u,p)=>(function(g,C){let I=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{At:N})}};return I(g)-I(C)})(u.type,p.type)||this.Xa(u.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new kg(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new D2,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=un(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new N2(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new M2(r))}),t}uu(e){this.Ha=e.qs,this.Za=un();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return kg.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Sd="SyncEngine",rT=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},iT=class{constructor(e){this.key=e,this.lu=!1}},oT=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Qa(a=>Y8(a),ly),this.Tu=new Map,this.Iu=new Set,this.du=new _r(nt.comparator),this.Eu=new Map,this.Au=new Xv,this.Ru={},this.Vu=new Map,this.mu=Tg.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function bJ(n,e,t=!0){return ee(this,null,function*(){let r=X2(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield ZV(r,e,t,!0),i})}function xJ(n,e){return ee(this,null,function*(){let t=X2(n);yield ZV(t,e,!0,!1)})}function ZV(n,e,t,r){return ee(this,null,function*(){let i=yield Mg(n.localStore,Vo(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield nM(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Q2(n.remoteStore,i),a})}function nM(n,e,t,r,i){return ee(this,null,function*(){n.gu=(p,m,g)=>(function(I,N,P,Q){return ee(this,null,function*(){let j=N.view.nu(P);j.Ds&&(j=yield w2(I.localStore,N.query,!1).then(({documents:z})=>N.view.nu(z,j)));let W=Q&&Q.targetChanges.get(N.targetId),ae=Q&&Q.targetMismatches.get(N.targetId)!=null,me=N.view.applyChanges(j,I.isPrimaryClient,W,ae);return sT(I,N.targetId,me._u),me.snapshot})})(n,p,m,g);let o=yield w2(n.localStore,e,!0),s=new P2(e,o.qs),a=s.nu(o.documents),c=Kv.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);sT(n,t,l._u);let u=new rT(e,t,s);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function EJ(n,e,t){return ee(this,null,function*(){let r=ot(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ly(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ng(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Pg(r.remoteStore,i.targetId),Rg(r,i.targetId)}).catch(xd))):(Rg(r,i.targetId),yield Ng(r.localStore,i.targetId,!0))})}function CJ(n,e){return ee(this,null,function*(){let t=ot(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Pg(t.remoteStore,r.targetId))})}function IJ(n,e,t){return ee(this,null,function*(){let r=sM(n);try{let i=yield(function(s,a){let c=ot(s),l=hr.now(),u=a.reduce((g,C)=>g.add(C.key),un()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let C=ss(),I=un();return c.Os.getEntries(g,u).next(N=>{C=N,C.forEach((P,Q)=>{Q.isValidDocument()||(I=I.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,C)).next(N=>{p=N;let P=[];for(let Q of a){let j=VX(Q,p.get(Q.key).overlayedDocument);j!=null&&P.push(new Xa(Q.key,j,z8(j.value.mapValue),Br.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,P,a)}).next(N=>{m=N;let P=N.applyToLocalDocumentSet(p,I);return c.documentOverlayCache.saveOverlays(g,N.batchId,P)})}).then(()=>({batchId:m.batchId,changes:J8(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new _r(zt)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Wl(r,i.changes),yield Ug(r.remoteStore)}catch(i){let o=qg(i,"Failed to persist write");t.reject(o)}})}function QV(n,e){return ee(this,null,function*(){let t=ot(n);try{let r=yield iJ(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?yt(s.lu,14607):i.removedDocuments.size>0&&(yt(s.lu,42227),s.lu=!1))}),yield Wl(t,r,e)}catch(r){yield xd(r)}})}function r8(n,e,t){let r=ot(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=ot(s);c.onlineState=a;let l=!1;c.queries.forEach((u,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&tM(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SJ(n,e,t){return ee(this,null,function*(){let r=ot(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new _r(nt.comparator);s=s.insert(o,pi.newNoDocument(o,Tt.min()));let a=un().add(o),c=new Gv(Tt.min(),new Map,new _r(zt),s,a);yield QV(r,c),r.du=r.du.remove(o),r.Eu.delete(e),oM(r)}else yield Ng(r.localStore,e,!1).then(()=>Rg(r,e,t)).catch(xd)})}function AJ(n,e){return ee(this,null,function*(){let t=ot(n),r=e.batch.batchId;try{let i=yield rJ(t.localStore,e);iM(t,r,null),rM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wl(t,i)}catch(i){yield xd(i)}})}function DJ(n,e,t){return ee(this,null,function*(){let r=ot(n);try{let i=yield(function(s,a){let c=ot(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(yt(p!==null,37113),u=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(r.localStore,e);iM(r,e,t),rM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wl(r,i)}catch(i){yield xd(i)}})}function TJ(n,e){return ee(this,null,function*(){let t=ot(n);Id(t.remoteStore)||qe(Sd,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield(function(s){let a=ot(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))})(t.localStore);if(r===cd)return void e.resolve();let i=t.Vu.get(r)||[];i.push(e),t.Vu.set(r,i)}catch(r){let i=qg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function rM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function iM(n,e,t){let r=ot(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Rg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||XV(n,r)})}function XV(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Pg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),oM(n))}function sT(n,e,t){for(let r of t)r instanceof M2?(n.Au.addReference(r.key,e),MJ(n,r)):r instanceof N2?(qe(Sd,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||XV(n,r.key)):lt(19791,{yu:r})}function MJ(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(qe(Sd,"New document in limbo: "+t),n.Iu.add(r),oM(n))}function oM(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new nt(xn.fromString(e)),r=n.mu.next();n.Eu.set(r,new iT(t)),n.du=n.du.insert(t,r),Q2(n.remoteStore,new Dg(Vo(jg(t.path)),r,"TargetPurposeLimboResolution",Us.ue))}}function Wl(n,e,t){return ee(this,null,function*(){let r=ot(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=O5.Es(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,l){return ee(this,null,function*(){let u=ot(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>we.forEach(l,m=>we.forEach(m.Is,g=>u.persistence.referenceDelegate.addReference(p,m.targetId,g)).next(()=>we.forEach(m.ds,g=>u.persistence.referenceDelegate.removeReference(p,m.targetId,g)))))}catch(p){if(!Ed(p))throw p;qe(YT,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let g=u.Fs.get(m),C=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(C);u.Fs=u.Fs.insert(m,I)}}})})(r.localStore,o))})}function NJ(n,e){return ee(this,null,function*(){let t=ot(n);if(!t.currentUser.isEqual(e)){qe(Sd,"User change. New user:",e.toKey());let r=yield RV(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Ve(Ce.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wl(t,r.Bs)}})}function PJ(n,e){let t=ot(n),r=t.Eu.get(e);if(r&&r.lu)return un().add(r.key);{let i=un(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function kJ(n,e){return ee(this,null,function*(){let t=ot(n),r=yield w2(t.localStore,e.query,!0),i=e.view.uu(r);return t.isPrimaryClient&&sT(t,e.targetId,i._u),i})}function RJ(n,e){return ee(this,null,function*(){let t=ot(n);return VV(t.localStore,e).then(r=>Wl(t,r))})}function OJ(n,e,t,r){return ee(this,null,function*(){let i=ot(n),o=yield(function(a,c){let l=ot(a),u=ot(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>u.Xn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):we.resolve(null)))})(i.localStore,e);o!==null?(t==="pending"?yield Ug(i.remoteStore):t==="acknowledged"||t==="rejected"?(iM(i,e,r||null),rM(i,e),(function(a,c){ot(ot(a).mutationQueue).rr(c)})(i.localStore,e)):lt(6720,"Unknown batchState",{wu:t}),yield Wl(i,o)):qe(Sd,"Cannot apply mutation batch with id: "+e)})}function LJ(n,e){return ee(this,null,function*(){let t=ot(n);if(X2(t),sM(t),e===!0&&t.fu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield i8(t,r.toArray());t.fu=!0,yield Z5(t.remoteStore,!0);for(let o of i)Q2(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){let r=[],i=Promise.resolve();t.Tu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Rg(t,s),Ng(t.localStore,s,!0))),Pg(t.remoteStore,s)}),yield i,yield i8(t,r),(function(s){let a=ot(s);a.Eu.forEach((c,l)=>{Pg(a.remoteStore,l)}),a.Au.jr(),a.Eu=new Map,a.du=new _r(nt.comparator)})(t),t.fu=!1,yield Z5(t.remoteStore,!1)}})}function i8(n,e,t){return ee(this,null,function*(){let r=ot(n),i=[],o=[];for(let s of e){let a,c=r.Tu.get(s);if(c&&c.length!==0){a=yield Mg(r.localStore,Vo(c[0]));for(let l of c){let u=r.Pu.get(l),p=yield kJ(r,u);p.snapshot&&o.push(p.snapshot)}}else{let l=yield FV(r.localStore,s);a=yield Mg(r.localStore,l),yield nM(r,JV(l),s,!1,a.resumeToken)}i.push(a)}return r.hu.J_(o),i})}function JV(n){return K8(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function FJ(n){return(function(t){return ot(ot(t).persistence).Ps()})(ot(n).localStore)}function VJ(n,e,t,r){return ee(this,null,function*(){let i=ot(n);if(i.fu)return void qe(Sd,"Ignoring unexpected query state notification.");let o=i.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield VV(i.localStore,Z8(o[0])),a=Gv.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ti.EMPTY_BYTE_STRING);yield Wl(i,s,a);break}case"rejected":yield Ng(i.localStore,e,!0),Rg(i,e,r);break;default:lt(64155,t)}})}function jJ(n,e,t){return ee(this,null,function*(){let r=X2(n);if(r.fu){for(let i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){qe(Sd,"Adding an already active target "+i);continue}let o=yield FV(r.localStore,i),s=yield Mg(r.localStore,o);yield nM(r,JV(o),s.targetId,!1,s.resumeToken),Q2(r.remoteStore,s)}for(let i of t)r.Tu.has(i)&&(yield Ng(r.localStore,i,!1).then(()=>{Pg(r.remoteStore,i),Rg(r,i)}).catch(xd))}})}function X2(n){let e=ot(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SJ.bind(null,e),e.hu.J_=_J.bind(null,e.eventManager),e.hu.pu=wJ.bind(null,e.eventManager),e}function sM(n){let e=ot(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DJ.bind(null,e),e}function BJ(n,e,t){let r=ot(n);(function(o,s,a){return ee(this,null,function*(){try{let c=yield s.getMetadata();if(yield(function(g,C){let I=ot(g),N=ei(C.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",P=>I.Ti.getBundleMetadata(P,C.id)).then(P=>!!P&&P.createTime.compareTo(N)>=0)})(o.localStore,c))return yield s.close(),a._completeWith((function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(YV(c));let l=new nT(c,s.serializer),u=yield s.Su();for(;u;){let m=yield l.Wa(u);m&&a._updateProgress(m),u=yield s.Su()}let p=yield l.za(o.localStore);return yield Wl(o,p.Ja,void 0),yield(function(g,C){let I=ot(g);return I.persistence.runTransaction("Save bundle","readwrite",N=>I.Ti.saveBundleMetadata(N,C))})(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.ja)}catch(c){return cs(Sd,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var aM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return ee(this,null,function*(){this.serializer=dy(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return kV(this.persistence,new _2,t.initialUser,this.serializer)}Du(t){return new Jv(v2.Vi,this.serializer)}bu(t){return new E2}terminate(){return ee(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),aT=class extends aM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){yt(this.persistence.referenceDelegate instanceof y2,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new p2(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?os.withCacheSize(this.cacheSizeBytes):os.DEFAULT;return new Jv(r=>y2.Vi(r,t),this.serializer)}},k2=class n extends aM{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return ee(this,null,function*(){yield FE(n.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield sM(this.Mu.syncEngine),yield Ug(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return kV(this.persistence,new _2,e.initialUser,this.serializer)}Cu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new p2(r,e.asyncQueue,t)}Fu(e,t){let r=new RD(t,this.persistence);return new kD(e.asyncQueue,r)}Du(e){let t=KT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?os.withCacheSize(this.cacheSizeBytes):os.DEFAULT;return new R5(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,qV(),Ub(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new E2}},cT=class n extends k2{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return ee(this,null,function*(){yield FE(n.prototype,this,"initialize").call(this,e);let t=this.Mu.syncEngine;this.sharedClientState instanceof kv&&(this.sharedClientState.syncEngine={Do:OJ.bind(null,t),vo:VJ.bind(null,t),Co:jJ.bind(null,t),Ps:FJ.bind(null,t),bo:RJ.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.ji(r=>ee(this,null,function*(){yield LJ(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}bu(e){let t=qV();if(!kv.C(t))throw new Ve(Ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=KT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kv(t,e.asyncQueue,r,e.clientId,e.initialUser)}},cM=(()=>{class n{initialize(t,r){return ee(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>r8(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=NJ.bind(null,this.syncEngine),yield Z5(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new J5})()}createDatastore(t){let r=dy(t.databaseInfo.databaseId),i=(function(s){return new q5(s)})(t.databaseInfo);return(function(s,a,c,l){return new G5(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new Y5(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>r8(this.syncEngine,r,0),(function(){return C2.C()?new C2:new j5})())}createSyncEngine(t,r){return(function(o,s,a,c,l,u,p){let m=new oT(o,s,a,c,l,u);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return ee(this,null,function*(){var t,r;yield(function(o){return ee(this,null,function*(){let s=ot(o);qe(Qf,"RemoteStore shutting down."),s.Ia.add(5),yield Bg(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function o8(n,e=10240){let t=0;return{read(){return ee(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return ee(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Og=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var lT=class{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new Ai,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}getMetadata(){return ee(this,null,function*(){return this.metadata.promise})}Su(){return ee(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return ee(this,null,function*(){let e=yield this.ku();if(e===null)return null;let t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);let i=yield this.Qu(r);return new tT(JSON.parse(i),e.length+r)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return ee(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Qu(e){return ee(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");let t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return ee(this,null,function*(){let e=yield this.Nu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var uT=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return ee(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ve(Ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield(function(i,o){return ee(this,null,function*(){let s=ot(i),a={documents:o.map(p=>Yv(s.serializer,p))},c=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,xn.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=$X(s.serializer,p);l.set(m.key.toString(),m)});let u=[];return o.forEach(p=>{let m=l.get(p.toString());yt(!!m,55234,{key:p}),u.push(m)}),u})})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _d(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return ee(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=nt.fromPath(r);this.mutations.push(new $v(i,this.precondition(i)))}),yield(function(r,i){return ee(this,null,function*(){let o=ot(r),s={writes:i.map(a=>Zv(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,xn.emptyPath(),s)})})(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt(50498,{Wu:e.constructor.name});t=Tt.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ve(Ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tt.min())?Br.exists(!1):Br.updateTime(t):Br.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Ve(Ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Br.updateTime(t)}return Br.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var dT=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new ty(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>ee(this,null,function*(){let e=new uT(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!sy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!lV(t)}return!1}};var bd="FirestoreClient",fT=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=fi.UNAUTHENTICATED,this.clientId=Rv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>ee(this,null,function*(){qe(bd,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(qe(bd,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>ee(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=qg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function xD(n,e){return ee(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),qe(bd,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>ee(null,null,function*(){r.isEqual(i)||(yield RV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{cs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{qe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{cs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function s8(n,e){return ee(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield lM(n);qe(bd,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>e8(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>e8(e.remoteStore,i)),n._onlineComponents=e})}function lM(n){return ee(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe(bd,"Using user provided OfflineComponentProvider");try{yield xD(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ce.FAILED_PRECONDITION||i.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;cs("Error using user provided cache. Falling back to memory cache: "+t),yield xD(n,new aM)}}else qe(bd,"Using default OfflineComponentProvider"),yield xD(n,new aT(void 0));return n._offlineComponents})}function J2(n){return ee(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe(bd,"Using user provided OnlineComponentProvider"),yield s8(n,n._uninitializedComponentsProvider._online)):(qe(bd,"Using default OnlineComponentProvider"),yield s8(n,new cM))),n._onlineComponents})}function e7(n){return lM(n).then(e=>e.persistence)}function uM(n){return lM(n).then(e=>e.localStore)}function t7(n){return J2(n).then(e=>e.remoteStore)}function dM(n){return J2(n).then(e=>e.syncEngine)}function UJ(n){return J2(n).then(e=>e.datastore)}function Lg(n){return ee(this,null,function*(){let e=yield J2(n),t=e.eventManager;return t.onListen=bJ.bind(null,e.syncEngine),t.onUnlisten=EJ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xJ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CJ.bind(null,e.syncEngine),t})}function zJ(n){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){let e=yield e7(n),t=yield t7(n);return e.setNetworkEnabled(!0),(function(i){let o=ot(i);return o.Ia.delete(0),fy(o)})(t)}))}function qJ(n){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){let e=yield e7(n),t=yield t7(n);return e.setNetworkEnabled(!1),(function(i){return ee(this,null,function*(){let o=ot(i);o.Ia.add(0),yield Bg(o),o.Aa.set("Offline")})})(t)}))}function $J(n,e){let t=new Ai;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o,s){return ee(this,null,function*(){try{let a=yield(function(l,u){let p=ot(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,u))})(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new Ve(Ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=qg(a,`Failed to get document '${o} from cache`);s.reject(c)}})})(yield uM(n),e,t)})),t.promise}function n7(n,e,t={}){let r=new Ai;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(o,s,a,c,l){let u=new Og({next:m=>{u.Ou(),s.enqueueAndForget(()=>eM(o,p));let g=m.docs.has(a);!g&&m.fromCache?l.reject(new Ve(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?l.reject(new Ve(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new ny(jg(a.path),u,{includeMetadataChanges:!0,ka:!0});return JT(o,p)})(yield Lg(n),n.asyncQueue,e,t,r)})),r.promise}function HJ(n,e){let t=new Ai;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o,s){return ee(this,null,function*(){try{let a=yield w2(i,o,!0),c=new P2(o,a.qs),l=c.nu(a.documents),u=c.applyChanges(l,!1);s.resolve(u.snapshot)}catch(a){let c=qg(a,`Failed to execute query '${o} against cache`);s.reject(c)}})})(yield uM(n),e,t)})),t.promise}function r7(n,e,t={}){let r=new Ai;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(o,s,a,c,l){let u=new Og({next:m=>{u.Ou(),s.enqueueAndForget(()=>eM(o,p)),m.fromCache&&c.source==="server"?l.reject(new Ve(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new ny(a,u,{includeMetadataChanges:!0,ka:!0});return JT(o,p)})(yield Lg(n),n.asyncQueue,e,t,r)})),r.promise}function WJ(n,e){let t=new Og(e);return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o){ot(i).Da.add(o),o.next()})(yield Lg(n),t)})),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o){ot(i).Da.delete(o)})(yield Lg(n),t)}))}}function GJ(n,e,t,r){let i=(function(s,a){let c;return c=typeof s=="string"?MT().encode(s):s,(function(u,p){return new lT(u,p)})((function(u,p){if(u instanceof Uint8Array)return o8(u,p);if(u instanceof ArrayBuffer)return o8(new Uint8Array(u),p);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(t,dy(e));n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){BJ(yield dM(n),i,r)}))}function KJ(n,e){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){return(function(r,i){let o=ot(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))})(yield uM(n),e)}))}function i7(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var a8=new Map;var o7="firestore.googleapis.com",c8=!0,R2=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o7,this.ssl=c8}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:c8;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tJ)throw new Ve(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i7((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ve(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ve(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ve(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xf=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ED;switch(r.type){case"firstParty":return new AD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ve(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return ee(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=a8.get(t);r&&(qe("ComponentProvider","Removing Datastore"),a8.delete(t),r.terminate())})(this),Promise.resolve()}};function ex(n,e,t,r={}){var i;n=Mn(n,Xf);let o=Fh(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(x_(`https://${c}`),C_("Firestore",!0)),s.host!==o7&&s.host!==c&&cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Bh(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,p;if(typeof r.mockUserToken=="string")u=r.mockUserToken,p=fi.MOCK_USER;else{u=E_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ve(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new fi(m)}n._authCredentials=new CD(new zb(u,p))}}var Ki=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Gn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(oy(t,n._jsonSchema))return new n(e,r||null,new nt(xn.fromString(t.referencePath)))}};Gn._jsonSchemaVersion="firestore/documentReference/1.0",Gn._jsonSchema={type:hi("string",Gn._jsonSchemaVersion),referencePath:hi("string")};var Gc=class n extends Ki{constructor(e,t,r){super(e,t,jg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new nt(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function hy(n,e,...t){if(n=yn(n),NT("collection","path",e),n instanceof Xf){let r=xn.fromString(e,...t);return n6(r),new Gc(n,null,r)}{if(!(n instanceof Gn||n instanceof Gc))throw new Ve(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xn.fromString(e,...t));return n6(r),new Gc(n.firestore,null,r)}}function fM(n,e){if(n=Mn(n,Xf),NT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ve(Ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ki(n,null,(function(r){return new Za(xn.emptyPath(),r)})(e))}function th(n,e,...t){if(n=yn(n),arguments.length===1&&(e=Rv.newId()),NT("doc","path",e),n instanceof Xf){let r=xn.fromString(e,...t);return t6(r),new Gn(n,null,new nt(r))}{if(!(n instanceof Gn||n instanceof Gc))throw new Ve(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xn.fromString(e,...t));return t6(r),new Gn(n.firestore,n instanceof Gc?n.converter:null,new nt(r))}}function py(n,e){return n=yn(n),e=yn(e),(n instanceof Gn||n instanceof Gc)&&(e instanceof Gn||e instanceof Gc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function tx(n,e){return n=yn(n),e=yn(e),n instanceof Ki&&e instanceof Ki&&n.firestore===e.firestore&&ly(n._query,e._query)&&n.converter===e.converter}var l8="AsyncQueue",O2=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ty(this,"async_queue_retry"),this.oc=()=>{let r=Ub();r&&qe(l8,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Ub();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Ub();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Ai;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return ee(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ed(e))throw e;qe(l8,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Xr("INTERNAL UNHANDLED ERROR: ",u8(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Q5.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&lt(47125,{hc:u8(this.tc)})}verifyOperationInProgress(){}Pc(){return ee(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function u8(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function hT(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var pT=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ai,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var s7=-1,kr=class extends Xf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new O2,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return ee(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new O2(e),this._firestoreClient=void 0,yield e}})}};function a7(n,e){let t=typeof n=="object"?n:wc(),r=typeof n=="string"?n:e||Xb,i=Ra(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=b_("firestore");o&&ex(i,...o)}return i}function Yi(n){if(n._terminated)throw new Ve(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||c7(n),n._firestoreClient}function c7(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,l,u){return new VD(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,i7(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new fT(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}function hM(n,e){cs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return l7(n,cM.provider,{build:r=>new k2(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function pM(n){return ee(this,null,function*(){cs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();l7(n,cM.provider,{build:t=>new cT(t,e.cacheSizeBytes)})})}function l7(n,e,t){if((n=Mn(n,kr))._firestoreClient||n._terminated)throw new Ve(Ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ve(Ce.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},c7(n)}function gM(n){if(n._initialized&&!n._terminated)throw new Ve(Ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ai;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>ee(null,null,function*(){try{yield(function(r){return ee(this,null,function*(){if(!fd.C())return Promise.resolve();let i=r+PV;yield fd.delete(i)})})(KT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function mM(n){return(function(t){let r=new Ai;return t.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return TJ(yield dM(t),r)})),r.promise})(Yi(n=Mn(n,kr)))}function vM(n){return zJ(Yi(n=Mn(n,kr)))}function yM(n){return qJ(Yi(n=Mn(n,kr)))}function _M(n,e){let t=Yi(n=Mn(n,kr)),r=new pT;return GJ(t,n._databaseId,e,r),r}function wM(n,e){return KJ(Yi(n=Mn(n,kr)),e).then(t=>t?new Ki(n,null,t.query):null)}var qs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ti.fromBase64String(e))}catch(t){throw new Ve(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(oy(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};qs._jsonSchemaVersion="firestore/bytes/1.0",qs._jsonSchema={type:hi("string",qs._jsonSchemaVersion),bytes:hi("string")};var Ja=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $l=class{constructor(e){this._methodName=e}};var Kc=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(oy(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Kc._jsonSchemaVersion="firestore/geoPoint/1.0",Kc._jsonSchema={type:hi("string",Kc._jsonSchemaVersion),latitude:hi("number"),longitude:hi("number")};var ld=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(oy(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Ve(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ld._jsonSchemaVersion="firestore/vectorValue/1.0",ld._jsonSchema={type:hi("string",ld._jsonSchemaVersion),vectorValues:hi("object")};var YJ=/^__.*__$/,gT=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new yd(e,this.data,t,this.fieldTransforms)}},L2=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function u7(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ec:n})}}var F2=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return V2(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(u7(this.Ec)&&YJ.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},mT=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||dy(e)}Dc(e,t,r,i=!1){return new F2({Ec:e,methodName:t,bc:r,path:Jr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function nh(n){let e=n._freezeSettings(),t=dy(n._databaseId);return new mT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nx(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);EM("Data must be an object, but it was:",s,r);let a=h7(r,s),c,l;if(o.merge)c=new zs(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let p of o.mergeFields){let m=bT(e,p,t);if(!s.contains(m))throw new Ve(Ce.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);g7(u,m)||u.push(m)}c=new zs(u),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new gT(new ho(a),c,l)}var ry=class n extends $l{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function d7(n,e,t){return new F2({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var vT=class n extends $l{_toFieldTransform(e){return new Kf(e.path,new md)}isEqual(e){return e instanceof n}},yT=class n extends $l{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=d7(this,e,!0),r=this.vc.map(o=>rh(o,t)),i=new zl(r);return new Kf(e.path,i)}isEqual(e){return e instanceof n&&Bh(this.vc,e.vc)}},_T=class n extends $l{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=d7(this,e,!0),r=this.vc.map(o=>rh(o,t)),i=new ql(r);return new Kf(e.path,i)}isEqual(e){return e instanceof n&&Bh(this.vc,e.vc)}},wT=class n extends $l{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new vd(e.serializer,nV(e.serializer,this.Cc));return new Kf(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function bM(n,e,t,r){let i=n.Dc(1,e,t);EM("Data must be an object, but it was:",i,r);let o=[],s=ho.empty();Cd(r,(c,l)=>{let u=CM(e,c,t);l=yn(l);let p=i.gc(u);if(l instanceof ry)o.push(u);else{let m=rh(l,p);m!=null&&(o.push(u),s.set(u,m))}});let a=new zs(o);return new L2(s,a,i.fieldTransforms)}function xM(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[bT(e,r,t)],c=[i];if(o.length%2!=0)throw new Ve(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(bT(e,o[m])),c.push(o[m+1]);let l=[],u=ho.empty();for(let m=a.length-1;m>=0;--m)if(!g7(l,a[m])){let g=a[m],C=c[m];C=yn(C);let I=s.gc(g);if(C instanceof ry)l.push(g);else{let N=rh(C,I);N!=null&&(l.push(g),u.set(g,N))}}let p=new zs(l);return new L2(u,p,s.fieldTransforms)}function f7(n,e,t,r=!1){return rh(t,n.Dc(r?4:3,e))}function rh(n,e){if(p7(n=yn(n)))return EM("Unsupported field value:",e,n),h7(n,e);if(n instanceof $l)return(function(r,i){if(!u7(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=rh(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=yn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=hr.fromDate(r);return{timestampValue:Ag(i.serializer,o)}}if(r instanceof hr){let o=new hr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ag(i.serializer,o)}}if(r instanceof Kc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qs)return{bytesValue:dV(i.serializer,r._byteString)};if(r instanceof Gn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:HT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ld)return(function(s,a){return{mapValue:{fields:{[jT]:{stringValue:BT},[xg]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return $T(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${$2(r)}`)})(n,e)}function h7(n,e){let t={};return k8(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cd(n,(r,i)=>{let o=rh(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function p7(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof hr||n instanceof Kc||n instanceof qs||n instanceof Gn||n instanceof $l||n instanceof ld)}function EM(n,e,t){if(!p7(t)||!m8(t)){let r=$2(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function bT(n,e,t){if((e=yn(e))instanceof Ja)return e._internalPath;if(typeof e=="string")return CM(n,e);throw V2("Field path arguments must be of type string or ",n,!1,void 0,t)}var ZJ=new RegExp("[~\\*/\\[\\]]");function CM(n,e,t){if(e.search(ZJ)>=0)throw V2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ja(...e.split("."))._internalPath}catch{throw V2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function V2(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Ve(Ce.INVALID_ARGUMENT,a+n+c)}function g7(n,e){return n.some(t=>t.isEqual(e))}var Jf=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new xT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(rx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},xT=class extends Jf{data(){return super.data()}};function rx(n,e){return typeof e=="string"?CM(n,e):e instanceof Ja?e._internalPath:e._delegate._internalPath}function m7(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ve(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var iy=class{},eh=class extends iy{};function ec(n,e,...t){let r=[];e instanceof iy&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof ET).length,a=o.filter(c=>c instanceof j2).length;if(s>1||s>0&&a>0)throw new Ve(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var j2=class n extends eh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return y7(e._query,t),new Ki(e.firestore,e.converter,QD(e._query,t))}_parse(e){let t=nh(e.firestore);return(function(o,s,a,c,l,u,p){let m;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ve(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){f8(p,u);let C=[];for(let I of p)C.push(d8(c,o,I));m={arrayValue:{values:C}}}else m=d8(c,o,p)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||f8(p,u),m=f7(a,s,p,u==="in"||u==="not-in");return wn.create(l,u,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function ix(n,e,t){let r=e,i=rx("where",n);return j2._create(i,r,t)}var ET=class n extends iy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Wn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)y7(s,c),s=QD(s,c)})(e._query,t),new Ki(e.firestore,e.converter,QD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var CT=class n extends eh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new Ve(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ve(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wf(o,s)})(e._query,this._field,this._direction);return new Ki(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Za(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function ox(n,e="asc"){let t=e,r=rx("orderBy",n);return CT._create(r,t)}var B2=class n extends eh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Ki(e.firestore,e.converter,r2(e._query,this._limit,this._limitType))}};function IM(n){return v8("limit",n),B2._create("limit",n,"F")}function SM(n){return v8("limitToLast",n),B2._create("limitToLast",n,"L")}var U2=class n extends eh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=v7(e,this.type,this._docOrFields,this._inclusive);return new Ki(e.firestore,e.converter,(function(i,o){return new Za(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function AM(...n){return U2._create("startAt",n,!0)}function DM(...n){return U2._create("startAfter",n,!1)}var z2=class n extends eh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=v7(e,this.type,this._docOrFields,this._inclusive);return new Ki(e.firestore,e.converter,(function(i,o){return new Za(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,t))}};function TM(...n){return z2._create("endBefore",n,!1)}function MM(...n){return z2._create("endAt",n,!0)}function v7(n,e,t,r){if(t[0]=yn(t[0]),t[0]instanceof Jf)return(function(o,s,a,c,l){if(!c)throw new Ve(Ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let p of hg(o))if(p.field.isKeyField())u.push(Hf(s,c.key));else{let m=c.data.field(p.field);if(K2(m))throw new Ve(Ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let g=p.field.canonicalString();throw new Ve(Ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}u.push(m)}return new Zc(u,l)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=nh(n.firestore);return(function(s,a,c,l,u,p){let m=s.explicitOrderBy;if(u.length>m.length)throw new Ve(Ce.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let C=0;C<u.length;C++){let I=u[C];if(m[C].field.isKeyField()){if(typeof I!="string")throw new Ve(Ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof I}`);if(!zT(s)&&I.indexOf("/")!==-1)throw new Ve(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${I}' contains a slash.`);let N=s.path.child(xn.fromString(I));if(!nt.isDocumentKey(N))throw new Ve(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let P=new nt(N);g.push(Hf(a,P))}else{let N=f7(c,l,I);g.push(N)}}return new Zc(g,p)})(n._query,n.firestore._databaseId,i,e,t,r)}}function d8(n,e,t){if(typeof(t=yn(t))=="string"){if(t==="")throw new Ve(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&t.indexOf("/")!==-1)throw new Ve(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(xn.fromString(t));if(!nt.isDocumentKey(r))throw new Ve(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hf(n,new nt(r))}if(t instanceof Gn)return Hf(n,t._key);throw new Ve(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$2(t)}.`)}function f8(n,e){if(!Array.isArray(n)||n.length===0)throw new Ve(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function y7(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ve(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Fg=class{convertValue(e,t="none"){switch(pd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ul(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Cd(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[xg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Er(s.doubleValue));return new ld(o)}convertGeoPoint(e){return new Kc(Er(e.latitude),Er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Y2(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uv(e));default:return null}}convertTimestamp(e){let t=Bl(e);return new hr(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=xn.fromString(e);yt(xV(r),9688,{name:e});let i=new hd(r.get(1),r.get(3)),o=new nt(r.popFirst(5));return i.isEqual(t)||Xr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function sx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var IT=class extends Fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}};var jl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},jo=class n extends Jf{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(rx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:hi("string",jo._jsonSchemaVersion),bundleSource:hi("string","DocumentSnapshot"),bundleName:hi("string"),bundle:hi("string")};var ud=class extends jo{data(e={}){return super.data(e)}},as=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new jl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ud(this._firestore,this._userDataWriter,r.key,r,new jl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ud(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ud(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:QJ(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function QJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:n})}}function ax(n,e){return n instanceof jo&&e instanceof jo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof as&&e instanceof as&&n._firestore===e._firestore&&tx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function cx(n){n=Mn(n,Gn);let e=Mn(n.firestore,kr);return n7(Yi(e),n._key).then(t=>LM(e,n,t))}as._jsonSchemaVersion="firestore/querySnapshot/1.0",as._jsonSchema={type:hi("string",as._jsonSchemaVersion),bundleSource:hi("string","QuerySnapshot"),bundleName:hi("string"),bundle:hi("string")};var Hl=class extends Fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}};function NM(n){n=Mn(n,Gn);let e=Mn(n.firestore,kr),t=Yi(e),r=new Hl(e);return $J(t,n._key).then(i=>new jo(e,r,n._key,i,new jl(i!==null&&i.hasLocalMutations,!0),n.converter))}function PM(n){n=Mn(n,Gn);let e=Mn(n.firestore,kr);return n7(Yi(e),n._key,{source:"server"}).then(t=>LM(e,n,t))}function lx(n){n=Mn(n,Ki);let e=Mn(n.firestore,kr),t=Yi(e),r=new Hl(e);return m7(n._query),r7(t,n._query).then(i=>new as(e,r,n,i))}function kM(n){n=Mn(n,Ki);let e=Mn(n.firestore,kr),t=Yi(e),r=new Hl(e);return HJ(t,n._query).then(i=>new as(e,r,n,i))}function RM(n){n=Mn(n,Ki);let e=Mn(n.firestore,kr),t=Yi(e),r=new Hl(e);return r7(t,n._query,{source:"server"}).then(i=>new as(e,r,n,i))}function gy(n,e,t){n=Mn(n,Gn);let r=Mn(n.firestore,kr),i=sx(n.converter,e,t);return Hg(r,[nx(nh(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Br.none())])}function my(n,e,t,...r){n=Mn(n,Gn);let i=Mn(n.firestore,kr),o=nh(i),s;return s=typeof(e=yn(e))=="string"||e instanceof Ja?xM(o,"updateDoc",n._key,e,t,r):bM(o,"updateDoc",n._key,e),Hg(i,[s.toMutation(n._key,Br.exists(!0))])}function ux(n){return Hg(Mn(n.firestore,kr),[new _d(n._key,Br.none())])}function dx(n,e){let t=Mn(n.firestore,kr),r=th(n),i=sx(n.converter,e);return Hg(t,[nx(nh(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Br.exists(!1))]).then(()=>r)}function $g(n,...e){var t,r,i;n=yn(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||hT(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(hT(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,u;if(n instanceof Gn)l=Mn(n.firestore,kr),u=jg(n._key.path),c={next:p=>{e[s]&&e[s](LM(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Mn(n,Ki);l=Mn(p.firestore,kr),u=p._query;let m=new Hl(l);c={next:g=>{e[s]&&e[s](new as(l,m,p,g))},error:e[s+1],complete:e[s+2]},m7(n._query)}return(function(m,g,C,I){let N=new Og(I),P=new ny(g,N,C);return m.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return JT(yield Lg(m),P)})),()=>{N.Ou(),m.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return eM(yield Lg(m),P)}))}})(Yi(l),u,a,c)}function OM(n,e){return WJ(Yi(n=Mn(n,kr)),hT(e)?e:{next:e})}function Hg(n,e){return(function(r,i){let o=new Ai;return r.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return IJ(yield dM(r),i,o)})),o.promise})(Yi(n),e)}function LM(n,e,t){let r=t.docs.get(e._key),i=new Hl(n);return new jo(n,i,e._key,r,new jl(t.hasPendingWrites,t.fromCache),e.converter)}var XJ={maxAttempts:5};var q2=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nh(e)}set(e,t,r){this._verifyNotCommitted();let i=ad(e,this._firestore),o=sx(i.converter,t,r),s=nx(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Br.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=ad(e,this._firestore),s;return s=typeof(t=yn(t))=="string"||t instanceof Ja?xM(this._dataReader,"WriteBatch.update",o._key,t,r,i):bM(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Br.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=ad(e,this._firestore);return this._mutations=this._mutations.concat(new _d(t._key,Br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(Ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ad(n,e){if((n=yn(n)).firestore!==e)throw new Ve(Ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var ST=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=nh(e)}get(e){let t=ad(e,this._firestore),r=new IT(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return lt(24041);let o=i[0];if(o.isFoundDocument())return new Jf(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Jf(this._firestore,r,t._key,null,t.converter);throw lt(18433,{doc:o})})}set(e,t,r){let i=ad(e,this._firestore),o=sx(i.converter,t,r),s=nx(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=ad(e,this._firestore),s;return s=typeof(t=yn(t))=="string"||t instanceof Ja?xM(this._dataReader,"Transaction.update",o._key,t,r,i):bM(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=ad(e,this._firestore);return this._transaction.delete(t._key),this}};var AT=class extends ST{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=ad(e,this._firestore),r=new Hl(this._firestore);return super.get(e).then(i=>new jo(this._firestore,r,t._key,i._document,new jl(!1,!1),t.converter))}};function FM(n,e,t){n=Mn(n,kr);let r=Object.assign(Object.assign({},XJ),t);return(function(o){if(o.maxAttempts<1)throw new Ve(Ce.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let c=new Ai;return o.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){let l=yield UJ(o);new dT(o.asyncQueue,l,a,s,c).zu()})),c.promise})(Yi(n),i=>e(new AT(n,i)),r)}function VM(){return new ry("deleteField")}function _7(){return new vT("serverTimestamp")}function w7(...n){return new yT("arrayUnion",n)}function b7(...n){return new _T("arrayRemove",n)}function jM(n){return new wT("increment",n)}(function(e,t=!0){(function(i){Vg=i})(A_),Ds(new qi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new kr(new ID(r.getProvider("auth-internal")),new DD(s,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ve(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hd(l.options.projectId,u)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),zn(QF,XF,e),zn(QF,XF,"esm2017")})();var JJ="@firebase/firestore-compat",eee="0.3.53";function HM(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function x7(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function E7(){if(!R8())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}var fx=class n{constructor(e){this._delegate=e}static fromBase64String(e){return E7(),new n(qs.fromBase64String(e))}static fromUint8Array(e){return x7(),new n(qs.fromUint8Array(e))}toBase64(){return E7(),this._delegate.toBase64()}toUint8Array(){return x7(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function BM(n){return tee(n,["next","error","complete"])}function tee(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var UM=class{enableIndexedDbPersistence(e,t){return hM(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return pM(e._delegate)}clearIndexedDbPersistence(e){return gM(e._delegate)}},hx=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof hd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&cs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){ex(this._delegate,e,t,r)}enableNetwork(){return vM(this._delegate)}disableNetwork(){return yM(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PT("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return mM(this._delegate)}onSnapshotsInSync(e){return OM(this._delegate,e)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Kg(this,hy(this._delegate,e))}catch(t){throw Bo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qc(this,th(this._delegate,e))}catch(t){throw Bo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ah(this,fM(this._delegate,e))}catch(t){throw Bo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return FM(this._delegate,t=>e(new px(this,t)))}batch(){return Yi(this._delegate),new gx(new q2(this._delegate,e=>Hg(this._delegate,e)))}loadBundle(e){return _M(this._delegate,e)}namedQuery(e){return wM(this._delegate,e).then(t=>t?new ah(this,t):null)}},Wg=class extends Fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new fx(new qs(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Qc.forKey(t,this.firestore,null)}};function nee(n){DT(n)}var px=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Wg(e)}get(e){let t=ih(e);return this._delegate.get(t).then(r=>new oh(this._firestore,new jo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=ih(e);return r?(HM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ih(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ih(e);return this._delegate.delete(t),this}},gx=class{constructor(e){this._delegate=e}set(e,t,r){let i=ih(e);return r?(HM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ih(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ih(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Gg=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new ud(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Wg(e),t),i.set(t,o)),o}};Gg.INSTANCES=new WeakMap;var Qc=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wg(e)}static forPath(e,t,r){if(e.length%2!==0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Gn(t._delegate,r,new nt(e)))}static forKey(e,t,r){return new n(t,new Gn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Kg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Kg(this.firestore,hy(this._delegate,e))}catch(t){throw Bo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=yn(e),e instanceof Gn?py(this._delegate,e):!1}set(e,t){t=HM("DocumentReference.set",t);try{return t?gy(this._delegate,e,t):gy(this._delegate,e)}catch(r){throw Bo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?my(this._delegate,e):my(this._delegate,e,t,...r)}catch(i){throw Bo(i,"updateDoc()","DocumentReference.update()")}}delete(){return ux(this._delegate)}onSnapshot(...e){let t=C7(e),r=I7(e,i=>new oh(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return $g(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=NM(this._delegate):e?.source==="server"?t=PM(this._delegate):t=cx(this._delegate),t.then(r=>new oh(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Gg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Bo(n,e,t){return n.message=n.message.replace(e,t),n}function C7(n){for(let e of n)if(typeof e=="object"&&!BM(e))return e;return{}}function I7(n,e){var t,r;let i;return BM(n[0])?i=n[0]:BM(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var oh=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ax(this._delegate,e._delegate)}},sh=class extends oh{data(e){let t=this._delegate.data(e);return this._delegate._converter||p8(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},ah=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wg(e)}where(e,t,r){try{return new n(this.firestore,ec(this._delegate,ix(e,t,r)))}catch(i){throw Bo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,ec(this._delegate,ox(e,t)))}catch(r){throw Bo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,ec(this._delegate,IM(e)))}catch(t){throw Bo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,ec(this._delegate,SM(e)))}catch(t){throw Bo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,ec(this._delegate,AM(...e)))}catch(t){throw Bo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,ec(this._delegate,DM(...e)))}catch(t){throw Bo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,ec(this._delegate,TM(...e)))}catch(t){throw Bo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,ec(this._delegate,MM(...e)))}catch(t){throw Bo(t,"endAt()","Query.endAt()")}}isEqual(e){return tx(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=kM(this._delegate):e?.source==="server"?t=RM(this._delegate):t=lx(this._delegate),t.then(r=>new vy(this.firestore,new as(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=C7(e),r=I7(e,i=>new vy(this.firestore,new as(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return $g(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Gg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},zM=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new sh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},vy=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ah(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new zM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new sh(this._firestore,r))})}isEqual(e){return ax(this._delegate,e._delegate)}},Kg=class n extends ah{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Qc(this.firestore,e):null}doc(e){try{return e===void 0?new Qc(this.firestore,th(this._delegate)):new Qc(this.firestore,th(this._delegate,e))}catch(t){throw Bo(t,"doc()","CollectionReference.doc()")}}add(e){return dx(this._delegate,e).then(t=>new Qc(this.firestore,t))}isEqual(e){return py(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Gg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ih(n){return Mn(n,Gn)}var qM=class n{constructor(...e){this._delegate=new Ja(...e)}static documentId(){return new n(Jr.keyField().canonicalString())}isEqual(e){return e=yn(e),e instanceof Ja?this._delegate._internalPath.isEqual(e._internalPath):!1}};var $M=class n{static serverTimestamp(){let e=_7();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=VM();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=w7(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=b7(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=jM(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var ree={Firestore:hx,GeoPoint:Kc,Timestamp:hr,Blob:fx,Transaction:px,WriteBatch:gx,DocumentReference:Qc,DocumentSnapshot:oh,Query:ah,QueryDocumentSnapshot:sh,QuerySnapshot:vy,CollectionReference:Kg,FieldPath:qM,FieldValue:$M,setLogLevel:nee,CACHE_SIZE_UNLIMITED:s7};function iee(n,e){n.INTERNAL.registerComponent(new qi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ree)))}function oee(n){iee(n,(e,t)=>new hx(e,t,new UM)),n.registerVersion(JJ,eee)}oee(bi);function see(n,e=ef){return new Bt(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function S7(n,e){return see(n,e)}function aee(n,e){return S7(n,e).pipe(Au(void 0),sp(),gt(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function KM(n,e){return S7(n,e).pipe(gt(t=>({payload:t,type:"query"})))}var mx=class{ref;afs;injector=Se(qn);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=N7(r,t);return new yx(i,o,this.afs)}snapshotChanges(){return aee(this.ref,this.afs.schedulers.outsideAngular).pipe(Si(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(gt(({payload:t})=>e.idField?Pt(Fe({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return pn(this.ref.get(e)).pipe(Si(this.injector))}};function vx(n,e){return KM(n,e).pipe(Au(void 0),sp(),gt(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function A7(n,e,t){return vx(n,t).pipe(Su((r,i)=>cee(r,i.map(o=>o.payload),e),[]),l1(),gt(r=>r.map(i=>({type:i.type,payload:i}))))}function cee(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=lee(n,r))}),n}function WM(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function lee(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return WM(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return WM(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return WM(n,e.oldIndex,1);break}return n}function D7(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var yx=class{ref;query;afs;injector=Se(qn);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(gt(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Au(void 0),sp(),ai(([r,i])=>i.length>0||!r),gt(([,r])=>r),Si(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Su((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=D7(e);return A7(this.query,t,this.afs.schedulers.outsideAngular).pipe(Si(this.injector))}valueChanges(e={}){return KM(this.query,this.afs.schedulers.outsideAngular).pipe(gt(t=>t.payload.docs.map(r=>e.idField?Pt(Fe({},r.data()),{[e.idField]:r.id}):r.data())),Si(this.injector))}get(e){return pn(this.query.get(e)).pipe(Si(this.injector))}add(e){return this.ref.add(e)}doc(e){return new mx(this.ref.doc(e),this.afs)}},GM=class{query;afs;injector=Se(qn);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?vx(this.query,this.afs.schedulers.outsideAngular).pipe(Si(this.injector)):vx(this.query,this.afs.schedulers.outsideAngular).pipe(gt(t=>t.filter(r=>e.indexOf(r.type)>-1)),ai(t=>t.length>0),Si(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Su((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=D7(e);return A7(this.query,t,this.afs.schedulers.outsideAngular).pipe(Si(this.injector))}valueChanges(e={}){return KM(this.query,this.afs.schedulers.outsideAngular).pipe(gt(r=>r.payload.docs.map(i=>e.idField?Fe({[e.idField]:i.id},i.data()):i.data())),Si(this.injector))}get(e){return pn(this.query.get(e)).pipe(Si(this.injector))}},T7=new Ke("angularfire2.enableFirestorePersistence"),M7=new Ke("angularfire2.firestore.persistenceSettings"),uee=new Ke("angularfire2.firestore.settings"),dee=new Ke("angularfire2.firestore.use-emulator");function N7(n,e=t=>t){return{query:e(n),ref:n}}var YM=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=Se(Ut);constructor(t,r,i,o,s,a,c,l,u,p,m,g,C,I,N,P,Q){this.schedulers=c;let j=Pf(t,a,r),W=u;p&&cD(j,a,m,C,I,N,g,P),[this.firestore,this.persistenceEnabled$]=Xp(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let ae=a.runOutsideAngular(()=>j.firestore());if(o&&ae.settings(o),W&&ae.useEmulator(...W),i&&!Pw(s)){let me=()=>{try{return pn(ae.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(z){return typeof console<"u"&&console.warn(z),ht(!1)}};return[ae,a.runOutsideAngular(me)]}else return[ae,ht(!1)]},[o,W,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=N7(i,r),a=this.ngZone.run(()=>o);return new yx(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new GM(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new mx(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(ze(ed),ze(td,8),ze(T7,8),ze(uee,8),ze(ki),ze(Ut),ze(Qr),ze(M7,8),ze(dee,8),ze(kf,8),ze(nD,8),ze(rD,8),ze(iD,8),ze(oD,8),ze(sD,8),ze(aD,8),ze(is,8))};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),P7=(()=>{class n{constructor(){bi.registerVersion("angularfire",Zr.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:T7,useValue:!0},{provide:M7,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=dr({providers:[YM]})}return n})();var U7="firebasestorage.googleapis.com",z7="storageBucket",hee=120*1e3,pee=600*1e3,gee=1e3;var Rr=class n extends Eu{constructor(e,t,r=0){super(ZM(e),`Firebase Storage: ${t} (${ZM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ZM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Cr=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(Cr||{});function ZM(n){return"storage/"+n}function iN(){let n="An unknown error occurred, please check the error payload for server response.";return new Rr(Cr.UNKNOWN,n)}function mee(n){return new Rr(Cr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function vee(n){return new Rr(Cr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yee(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rr(Cr.UNAUTHENTICATED,n)}function _ee(){return new Rr(Cr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wee(n){return new Rr(Cr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function q7(){return new Rr(Cr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $7(){return new Rr(Cr.CANCELED,"User canceled the upload/download.")}function bee(n){return new Rr(Cr.INVALID_URL,"Invalid URL '"+n+"'.")}function xee(n){return new Rr(Cr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Eee(){return new Rr(Cr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+z7+"' property when initializing the app?")}function H7(){return new Rr(Cr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Cee(){return new Rr(Cr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Iee(){return new Rr(Cr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function See(n){return new Rr(Cr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ch(n){return new Rr(Cr.INVALID_ARGUMENT,n)}function W7(){return new Rr(Cr.APP_DELETED,"The Firebase app was deleted.")}function oN(n){return new Rr(Cr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _y(n,e){return new Rr(Cr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function yy(n){throw new Rr(Cr.INTERNAL_ERROR,"Internal error: "+n)}var Uo=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw xee(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function l(W){W.path_=decodeURIComponent(W.path)}let u="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${p}/${u}/b/${i}/o${m}`,"i"),C={bucket:1,path:3},I=t===U7?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",P=new RegExp(`^https?://${I}/${i}/${N}`,"i"),j=[{regex:a,indices:c,postModify:o},{regex:g,indices:C,postModify:l},{regex:P,indices:{bucket:1,path:2},postModify:l}];for(let W=0;W<j.length;W++){let ae=j[W],me=ae.regex.exec(e);if(me){let z=me[ae.indices.bucket],M=me[ae.indices.path];M||(M=""),r=new n(z,M),ae.postModify(r);break}}if(r==null)throw bee(e);return r}},XM=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Aee(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let l=!1;function u(...N){l||(l=!0,e.apply(null,N))}function p(N){i=setTimeout(()=>{i=null,n(g,c())},N)}function m(){o&&clearTimeout(o)}function g(N,...P){if(l){m();return}if(N){m(),u.call(null,N,...P);return}if(c()||s){m(),u.call(null,N,...P);return}r<64&&(r*=2);let j;a===1?(a=2,j=0):j=(r+Math.random())*1e3,p(j)}let C=!1;function I(N){C||(C=!0,m(),!l&&(i!==null?(N||(a=2),clearTimeout(i),p(0)):N||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,I(!0)},t),I}function Dee(n){n(!1)}function Tee(n){return n!==void 0}function Mee(n){return typeof n=="function"}function Nee(n){return typeof n=="object"&&!Array.isArray(n)}function bx(n){return typeof n=="string"||n instanceof String}function k7(n){return sN()&&n instanceof Blob}function sN(){return typeof Blob<"u"}function JM(n,e,t,r){if(r<e)throw ch(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ch(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ad(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function G7(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Qg=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(Qg||{});function K7(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var eN=class{constructor(e,t,r,i,o,s,a,c,l,u,p,m=!0,g=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,I)=>{this.resolve_=C,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Zg(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Qg.NO_ERROR,c=o.getStatus();if(!a||K7(c,this.additionalRetryCodes_)&&this.retry){let u=o.getErrorCode()===Qg.ABORT;r(!1,new Zg(!1,null,u));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Zg(l,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Tee(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=iN();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?W7():$7();s(c)}else{let c=q7();s(c)}};this.canceled_?t(!1,new Zg(!1,null,!0)):this.backoffId_=Aee(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Dee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Zg=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Pee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function kee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ree(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Oee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Lee(n,e,t,r,i,o,s=!0,a=!1){let c=G7(n.urlParams),l=n.url+c,u=Object.assign({},n.headers);return Ree(u,e),Pee(u,t),kee(u,o),Oee(u,r),new eN(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function Fee(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Vee(...n){let e=Fee();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(sN())return new Blob(n);throw new Rr(Cr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jee(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Bee(n){if(typeof atob>"u")throw See("base-64");return atob(n)}var $s={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},wy=class{constructor(e,t){this.data=e,this.contentType=t||null}};function aN(n,e){switch(n){case $s.RAW:return new wy(Y7(e));case $s.BASE64:case $s.BASE64URL:return new wy(Z7(n,e));case $s.DATA_URL:return new wy(zee(e),qee(e))}throw iN()}function Y7(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Uee(n){let e;try{e=decodeURIComponent(n)}catch{throw _y($s.DATA_URL,"Malformed data URL.")}return Y7(e)}function Z7(n,e){switch(n){case $s.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw _y(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case $s.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw _y(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Bee(e)}catch(i){throw i.message.includes("polyfill")?i:_y(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var wx=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw _y($s.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=$ee(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function zee(n){let e=new wx(n);return e.base64?Z7($s.BASE64,e.rest):Uee(e.rest)}function qee(n){return new wx(n).contentType}function $ee(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var lh=class n{constructor(e,t){let r=0,i="";k7(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(k7(this.data_)){let r=this.data_,i=jee(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(sN()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Vee.apply(null,t))}else{let t=e.map(s=>bx(s)?aN($s.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function cN(n){let e;try{e=JSON.parse(n)}catch{return null}return Nee(e)?e:null}function Hee(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Wee(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Q7(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Gee(n,e){return e}var Zi=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Gee}},_x=null;function Kee(n){return!bx(n)||n.length<2?n:Q7(n)}function Ey(){if(_x)return _x;let n=[];n.push(new Zi("bucket")),n.push(new Zi("generation")),n.push(new Zi("metageneration")),n.push(new Zi("name","fullPath",!0));function e(o,s){return Kee(s)}let t=new Zi("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new Zi("size");return i.xform=r,n.push(i),n.push(new Zi("timeCreated")),n.push(new Zi("updated")),n.push(new Zi("md5Hash",null,!0)),n.push(new Zi("cacheControl",null,!0)),n.push(new Zi("contentDisposition",null,!0)),n.push(new Zi("contentEncoding",null,!0)),n.push(new Zi("contentLanguage",null,!0)),n.push(new Zi("contentType",null,!0)),n.push(new Zi("metadata","customMetadata",!0)),_x=n,_x}function Yee(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new Uo(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function Zee(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return Yee(r,n),r}function X7(n,e,t){let r=cN(e);return r===null?null:Zee(n,r,t)}function Qee(n,e,t,r){let i=cN(e);if(i===null||!bx(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let u=n.bucket,p=n.fullPath,m="/b/"+s(u)+"/o/"+s(p),g=Ad(m,t,r),C=G7({alt:"media",token:l});return g+C})[0]}function lN(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var R7="prefixes",O7="items";function Xee(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[R7])for(let i of t[R7]){let o=i.replace(/\/$/,""),s=n._makeStorageReference(new Uo(e,o));r.prefixes.push(s)}if(t[O7])for(let i of t[O7]){let o=n._makeStorageReference(new Uo(e,i.name));r.items.push(o)}return r}function Jee(n,e,t){let r=cN(t);return r===null?null:Xee(n,e,r)}var nc=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Xc(n){if(!n)throw iN()}function xx(n,e){function t(r,i){let o=X7(n,i,e);return Xc(o!==null),o}return t}function ete(n,e){function t(r,i){let o=Jee(n,e,i);return Xc(o!==null),o}return t}function tte(n,e){function t(r,i){let o=X7(n,i,e);return Xc(o!==null),Qee(o,i,n.host,n._protocol)}return t}function em(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=_ee():i=yee():t.getStatus()===402?i=vee(n.bucket):t.getStatus()===403?i=wee(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Ex(n){let e=em(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=mee(n.path)),o.serverResponse=i.serverResponse,o}return t}function J7(n,e,t){let r=e.fullServerUrl(),i=Ad(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new nc(i,o,xx(n,t),s);return a.errorHandler=Ex(e),a}function nte(n,e,t,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=Ad(s,n.host,n._protocol),c="GET",l=n.maxOperationRetryTime,u=new nc(a,c,ete(n,e.bucket),l);return u.urlParams=o,u.errorHandler=em(e),u}function rte(n,e,t){let r=e.fullServerUrl(),i=Ad(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new nc(i,o,tte(n,t),s);return a.errorHandler=Ex(e),a}function ite(n,e,t,r){let i=e.fullServerUrl(),o=Ad(i,n.host,n._protocol),s="PATCH",a=lN(t,r),c={"Content-Type":"application/json; charset=utf-8"},l=n.maxOperationRetryTime,u=new nc(o,s,xx(n,r),l);return u.headers=c,u.body=a,u.errorHandler=Ex(e),u}function ote(n,e){let t=e.fullServerUrl(),r=Ad(t,n.host,n._protocol),i="DELETE",o=n.maxOperationRetryTime;function s(c,l){}let a=new nc(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=Ex(e),a}function ste(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function ej(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=ste(null,e)),r}function tj(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let j="";for(let W=0;W<2;W++)j=j+Math.random().toString().slice(2);return j}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let l=ej(e,r,i),u=lN(l,t),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+c+"--",g=lh.getBlob(p,r,m);if(g===null)throw H7();let C={name:l.fullPath},I=Ad(o,n.host,n._protocol),N="POST",P=n.maxUploadRetryTime,Q=new nc(I,N,xx(n,t),P);return Q.urlParams=C,Q.headers=s,Q.body=g.uploadData(),Q.errorHandler=em(e),Q}var Xg=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function uN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Xc(!1)}return Xc(!!t&&(e||["active"]).indexOf(t)!==-1),t}function ate(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s=ej(e,r,i),a={name:s.fullPath},c=Ad(o,n.host,n._protocol),l="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},p=lN(s,t),m=n.maxUploadRetryTime;function g(I){uN(I);let N;try{N=I.getResponseHeader("X-Goog-Upload-URL")}catch{Xc(!1)}return Xc(bx(N)),N}let C=new nc(c,l,g,m);return C.urlParams=a,C.headers=u,C.body=p,C.errorHandler=em(e),C}function cte(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function o(l){let u=uN(l,["active","final"]),p=null;try{p=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xc(!1)}p||Xc(!1);let m=Number(p);return Xc(!isNaN(m)),new Xg(m,r.size(),u==="final")}let s="POST",a=n.maxUploadRetryTime,c=new nc(t,s,o,a);return c.headers=i,c.errorHandler=em(e),c}var L7=256*1024;function lte(n,e,t,r,i,o,s,a){let c=new Xg(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw Cee();let l=c.total-c.current,u=l;i>0&&(u=Math.min(u,i));let p=c.current,m=p+u,g="";u===0?g="finalize":l===u?g="upload, finalize":g="upload";let C={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${c.current}`},I=r.slice(p,m);if(I===null)throw H7();function N(W,ae){let me=uN(W,["active","final"]),z=c.current+u,M=r.size(),S;return me==="final"?S=xx(e,o)(W,ae):S=null,new Xg(z,M,me==="final",S)}let P="POST",Q=e.maxUploadRetryTime,j=new nc(t,P,N,Q);return j.headers=C,j.body=I.uploadData(),j.progressCallback=a||null,j.errorHandler=em(n),j}var nj={STATE_CHANGED:"state_changed"},go={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function QM(n){switch(n){case"running":case"pausing":case"canceling":return go.RUNNING;case"paused":return go.PAUSED;case"success":return go.SUCCESS;case"canceled":return go.CANCELED;case"error":return go.ERROR;default:return go.ERROR}}var tN=class{constructor(e,t,r){if(Mee(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function Yg(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var F7=null,nN=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qg.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qg.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qg.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw yy("cannot .send() more than once");if(Fh(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yy("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},rN=class extends nN{initXhr(){this.xhr_.responseType="text"}};function tc(){return F7?F7():new rN}var by=class{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Ey(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Cr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(K7(i.status,[]))if(o)i=q7();else{this.sleepTime=Math.max(this.sleepTime*2,gee),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Cr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=ate(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,tc,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=cte(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,tc,t,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=L7*this._chunkMultiplier,t=new Xg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=lte(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,tc,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){L7*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=J7(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,tc,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=tj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,tc,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=$7(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=QM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let o=new tN(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(QM(this._state)){case go.SUCCESS:Yg(this._resolve.bind(null,this.snapshot))();break;case go.CANCELED:case go.ERROR:let t=this._reject;Yg(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(QM(this._state)){case go.RUNNING:case go.PAUSED:e.next&&Yg(e.next.bind(e,this.snapshot))();break;case go.SUCCESS:e.complete&&Yg(e.complete.bind(e))();break;case go.CANCELED:case go.ERROR:e.error&&Yg(e.error.bind(e,this._error))();break;default:e.error&&Yg(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Jg=class n{constructor(e,t){this._service=e,t instanceof Uo?this._location=t:this._location=Uo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Uo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Q7(this._location.path)}get storage(){return this._service}get parent(){let e=Hee(this._location.path);if(e===null)return null;let t=new Uo(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw oN(e)}};function ute(n,e,t){n._throwIfRoot("uploadBytes");let r=tj(n.storage,n._location,Ey(),new lh(e,!0),t);return n.storage.makeRequestWithTokens(r,tc).then(i=>({metadata:i,ref:n}))}function dte(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new by(n,new lh(e),t)}function fte(n){let e={prefixes:[],items:[]};return rj(n,e).then(()=>e)}function rj(n,e,t){return ee(this,null,function*(){let i=yield ij(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield rj(n,e,i.nextPageToken))})}function ij(n,e){e!=null&&typeof e.maxResults=="number"&&JM("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=nte(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,tc)}function hte(n){n._throwIfRoot("getMetadata");let e=J7(n.storage,n._location,Ey());return n.storage.makeRequestWithTokens(e,tc)}function pte(n,e){n._throwIfRoot("updateMetadata");let t=ite(n.storage,n._location,e,Ey());return n.storage.makeRequestWithTokens(t,tc)}function gte(n){n._throwIfRoot("getDownloadURL");let e=rte(n.storage,n._location,Ey());return n.storage.makeRequestWithTokens(e,tc).then(t=>{if(t===null)throw Iee();return t})}function mte(n){n._throwIfRoot("deleteObject");let e=ote(n.storage,n._location);return n.storage.makeRequestWithTokens(e,tc)}function oj(n,e){let t=Wee(n._location.path,e),r=new Uo(n._location.bucket,t);return new Jg(n.storage,r)}function vte(n){return/^[A-Za-z]+:\/\//.test(n)}function yte(n,e){return new Jg(n,e)}function sj(n,e){if(n instanceof xy){let t=n;if(t._bucket==null)throw Eee();let r=new Jg(t,t._bucket);return e!=null?sj(r,e):r}else return e!==void 0?oj(n,e):n}function _te(n,e){if(e&&vte(e)){if(n instanceof xy)return yte(n,e);throw ch("To use ref(service, url), the first argument must be a Storage instance.")}else return sj(n,e)}function V7(n,e){let t=e?.[z7];return t==null?null:Uo.makeFromBucketSpec(t,n)}function wte(n,e,t,r={}){n.host=`${e}:${t}`;let i=Fh(e);i&&(x_(`https://${n.host}/b`),C_("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:E_(o,n.app.options.projectId))}var xy=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=U7,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hee,this._maxUploadRetryTime=pee,this._requests=new Set,i!=null?this._bucket=Uo.makeFromBucketSpec(i,this._host):this._bucket=V7(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Uo.makeFromBucketSpec(this._url,e):this._bucket=V7(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return ee(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return ee(this,null,function*(){if(S_(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jg(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new XM(W7());{let s=Lee(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return ee(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},j7="@firebase/storage",B7="0.13.14";var aj="storage";function cj(n,e,t){return n=yn(n),ute(n,e,t)}function dN(n,e,t){return n=yn(n),dte(n,e,t)}function fN(n){return n=yn(n),hte(n)}function hN(n,e){return n=yn(n),pte(n,e)}function pN(n,e){return n=yn(n),ij(n,e)}function gN(n){return n=yn(n),fte(n)}function Cx(n){return n=yn(n),gte(n)}function mN(n){return n=yn(n),mte(n)}function Cy(n,e){return n=yn(n),_te(n,e)}function lj(n,e){return oj(n,e)}function uj(n=wc(),e){n=yn(n);let r=Ra(n,aj).getImmediate({identifier:e}),i=b_("storage");return i&&Ix(r,...i),r}function Ix(n,e,t,r={}){wte(n,e,t,r)}function bte(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new xy(t,r,i,e,A_)}function xte(){Ds(new qi(aj,bte,"PUBLIC").setMultipleInstances(!0)),zn(j7,B7,""),zn(j7,B7,"esm2017")}xte();var tm=class{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var Sx=class{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new tm(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new tm(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(typeof t=="function"?o=s=>t(new tm(s,this,this._ref)):o={next:t.next?s=>t.next(new tm(s,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},Ax=class{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new uh(e,this._service))}get items(){return this._delegate.items.map(e=>new uh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var uh=class n{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let t=lj(this._delegate,e);return new n(t,this.storage)}get root(){return new n(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new n(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Sx(dN(this._delegate,e,t),this)}putString(e,t=$s.RAW,r){this._throwIfRoot("putString");let i=aN(t,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new Sx(new by(this._delegate,new lh(i.data,!0),o),this)}listAll(){return gN(this._delegate).then(e=>new Ax(e,this.storage))}list(e){return pN(this._delegate,e||void 0).then(t=>new Ax(t,this.storage))}getMetadata(){return fN(this._delegate)}updateMetadata(e){return hN(this._delegate,e)}getDownloadURL(){return Cx(this._delegate)}delete(){return this._throwIfRoot("delete"),mN(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw oN(e)}};var Dx=class{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(dj(e))throw ch("ref() expected a child path but got a URL, use refFromURL instead.");return new uh(Cy(this._delegate,e),this)}refFromURL(e){if(!dj(e))throw ch("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Uo.makeFromUrl(e,this._delegate.host)}catch{throw ch("refFromUrl() expected a valid full URL but got an invalid one.")}return new uh(Cy(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){Ix(this._delegate,e,t,r)}};function dj(n){return/^[A-Za-z]+:\/\//.test(n)}var Ete="@firebase/storage-compat",Cte="0.3.24";var Ite="storage-compat";function Ste(n,{instanceIdentifier:e}){let t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Dx(t,r)}function Ate(n){let e={TaskState:go,TaskEvent:nj,StringFormat:$s,Storage:Dx,Reference:uh};n.INTERNAL.registerComponent(new qi(Ite,Ste,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(Ete,Cte)}Ate(bi);function Dte(n){return new Bt(e=>{let t=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();t(n.snapshot);let o=n.on("state_changed",t);return n.then(s=>{t(s),i()},s=>{t(n.snapshot),r(s)}),function(){o()}}).pipe(uC(0))}function fj(n){let e=Dte(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(gt(t=>t.bytesTransferred/t.totalBytes*100))}}function Tx(n,e){return{getDownloadURL:()=>ht(void 0).pipe(oo(e.get(Qr).outsideAngular),Jn(()=>n.getDownloadURL()),Si(e)),getMetadata:()=>ht(void 0).pipe(oo(e.get(Qr).outsideAngular),Jn(()=>n.getMetadata()),Si(e)),delete:()=>pn(n.delete()),child:t=>Tx(n.child(t),e),updateMetadata:t=>pn(n.updateMetadata(t)),put:(t,r)=>{let i=n.put(t,r);return fj(i)},putString:(t,r,i)=>{let o=n.putString(t,r,i);return fj(o)},list:t=>pn(n.list(t)),listAll:()=>pn(n.listAll())}}var Tte=new Ke("angularfire2.storageBucket"),Mte=new Ke("angularfire2.storage.maxUploadRetryTime"),Nte=new Ke("angularfire2.storage.maxOperationRetryTime"),Pte=new Ke("angularfire2.storage.use-emulator"),vN=(()=>{class n{storage;injector=Se(qn);constructor(t,r,i,o,s,a,c,l,u,p){let m=Pf(t,s,r);this.storage=Xp(`${m.name}.storage.${i}`,"AngularFireStorage",m.name,()=>{let g=s.runOutsideAngular(()=>m.storage(i||void 0)),C=u;return C&&g.useEmulator(...C),c&&g.setMaxUploadRetryTime(c),l&&g.setMaxOperationRetryTime(l),g},[c,l])}ref(t){return Tx(this.storage.ref(t),this.injector)}refFromURL(t){return Tx(this.storage.refFromURL(t),this.injector)}upload(t,r,i){let o=this.storage.ref(t);return Tx(o,this.injector).put(r,i)}static \u0275fac=function(r){return new(r||n)(ze(ed),ze(td,8),ze(Tte,8),ze(ki),ze(Ut),ze(Qr),ze(Mte,8),ze(Nte,8),ze(Pte,8),ze(is,8))};static \u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var hj=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=dr({})}return n})(),pj=(()=>{class n{constructor(){bi.registerVersion("angularfire",Zr.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=dr({providers:[vN],imports:[hj,hj]})}return n})();var Mx=(()=>{let e=class e{constructor(r,i,o){this.firestore=r,this.auth=i,this.storage=o,this.schedeCollection=this.firestore.collection("schede")}testWrite(){return ee(this,null,function*(){try{try{(yield this.auth.currentUser)||(yield this.auth.signInAnonymously())}catch{}return{ok:!0,id:(yield this.schedeCollection.add({nome:"debug-"+Date.now(),dataCreazione:new Date,idCliente:"debug",esercizi:[]})).id}}catch(r){return console.error("FirebaseService.testWrite error",r),{ok:!1,error:r}}})}getSchede(){return this.schedeCollection.snapshotChanges().pipe(gt(r=>r.map(i=>{let o=i.payload.doc.data(),s=i.payload.doc.id;return Fe({id:s},o)})))}getScheda(r){return this.schedeCollection.doc(r).valueChanges().pipe(gt(i=>i?Pt(Fe({},i),{id:r}):void 0))}addScheda(r){return this.schedeCollection.add(r)}updateScheda(r,i){return this.schedeCollection.doc(r).update(i)}deleteScheda(r){return this.schedeCollection.doc(r).delete()}};e.\u0275fac=function(i){return new(i||e)(ze(YM),ze(kf),ze(vN))},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var gj=(()=>{let e=class e{constructor(r){this.fb=r}testDb(){return ee(this,null,function*(){try{let r=yield this.fb.testWrite();r.ok?alert("Test write OK, id: "+r.id):(alert("Test write FAILED: "+(r.error?.message||r.error)),console.error(r.error))}catch(r){alert("Test write error: see console"),console.error(r)}})}};e.\u0275fac=function(i){return new(i||e)(it(Mx))},e.\u0275cmp=Pr({type:e,selectors:[["app-header"]],standalone:!1,decls:6,vars:0,consts:[[1,"app-header"],[1,"logo"],[2,"margin-left","auto","padding-right","12px"],[1,"test-db-btn",3,"click"]],template:function(i,o){i&1&&(x(0,"header",0)(1,"div",1),q(2,"Prof Ghizz"),D(),x(3,"div",2)(4,"button",3),Me("click",function(){return o.testDb()}),q(5,"Test DB"),D()()())},styles:["[_nghost-%COMP%]{display:block}.app-header[_ngcontent-%COMP%]{height:64px;display:flex;align-items:center;justify-content:flex-start;padding:0 20px;background:#fff;border-bottom:1px solid #e6edf3}.app-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-weight:800;color:#0f2a63;font-size:1.1rem}.app-header[_ngcontent-%COMP%]{position:relative;z-index:1100;pointer-events:auto}"]});let n=e;return n})();var mj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Pr({type:e,selectors:[["app-sidebar"]],standalone:!1,decls:38,vars:0,consts:[["aria-label","Sidebar navigation",1,"app-sidebar"],["routerLink","/","routerLinkActive","active","aria-label","Home","title","Home"],["viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","role","img","aria-hidden","true","focusable","false",1,"side-svg"],["width","24","height","24","fill","none"],["d","M3 10L12 3l9 7v8a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-8z","fill","#fff"],[1,"sr-only"],["routerLink","/anagrafica","routerLinkActive","active","aria-label","Clienti","title","Clienti"],["d","M16 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8zM8 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z","fill","#fff"],["d","M2 20a6 6 0 0 1 6-6h8a6 6 0 0 1 6 6v1H2v-1z","fill","#fff"],["routerLink","/esercizi","routerLinkActive","active","aria-label","Esercizi","title","Esercizi"],["d","M13 2L3 14h7l-1 8L21 10h-7l-1-8z","fill","#fff"],["routerLink","/gestione-schede","routerLinkActive","active","aria-label","Schede","title","Schede"],["x","3","y","3","width","8","height","8","fill","#fff"],["x","13","y","3","width","8","height","8","fill","#fff"],["x","3","y","13","width","8","height","8","fill","#fff"],["x","13","y","13","width","8","height","8","fill","#fff"],["routerLink","/impostazioni","aria-label","Impostazioni","title","Impostazioni"],["d","M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8z","fill","#fff"],["d","M19.4 15a1.9 1.9 0 0 0 .3-.8l.1-1a2 2 0 0 0-1.7-2.2l-.9-.1a1.9 1.9 0 0 0-.8-.3l-.9-.2a2 2 0 0 0-1.4.3l-.8.6a2 2 0 0 0-1 .9l-.5.9c-.2.5-.7.9-1.2.9s-1-.4-1.2-.9l-.5-.9a2 2 0 0 0-1-.9l-.8-.6a2 2 0 0 0-1.4-.3l-.9.2c-.3.1-.6.2-.8.3l-.9.1A2 2 0 0 0 3 13.2l.1 1c.1.3.1.6.3.8l.1.2.4.6c.2.4.7.5 1.1.4l.8-.1c.3 0 .6-.1.9-.2l.6-.3c.4-.2 1-.1 1.4.2l.6.5c.2.2.5.4.9.3l.9-.1c.4 0 .7 0 1.1.1l.9.2c.3.1.6.2.9.2l.6.1c.4.1.8 0 1.1-.2l.6-.4.2-.1.4-.1z","fill","#fff"]],template:function(i,o){i&1&&(x(0,"aside",0)(1,"ul")(2,"li")(3,"a",1),fr(),x(4,"svg",2),bt(5,"rect",3)(6,"path",4),D(),Oo(),x(7,"span",5),q(8,"Home"),D()()(),x(9,"li")(10,"a",6),fr(),x(11,"svg",2),bt(12,"path",7)(13,"path",8),D(),Oo(),x(14,"span",5),q(15,"Clienti"),D()()(),x(16,"li")(17,"a",9),fr(),x(18,"svg",2),bt(19,"path",10),D(),Oo(),x(20,"span",5),q(21,"Esercizi"),D()()(),x(22,"li")(23,"a",11),fr(),x(24,"svg",2),bt(25,"rect",12)(26,"rect",13)(27,"rect",14)(28,"rect",15),D(),Oo(),x(29,"span",5),q(30,"Schede"),D()()(),x(31,"li")(32,"a",16),fr(),x(33,"svg",2),bt(34,"path",17)(35,"path",18),D(),Oo(),x(36,"span",5),q(37,"Impostazioni"),D()()()()())},dependencies:[ba,HA],styles:["[_nghost-%COMP%]{display:block}.app-sidebar[_ngcontent-%COMP%]{width:80px;background:#0b2a63;padding:8px;border-right:1px solid rgba(255,255,255,.06);height:100vh;min-height:110vh;box-sizing:border-box;position:relative;z-index:1100;pointer-events:auto}.app-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:12px 0 0;margin:8px 0 0;display:flex;flex-direction:column;gap:12px;align-items:center}.app-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:10px;padding:4px 6px;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:12px;color:#fff;text-decoration:none;cursor:pointer}.app-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff0f}.app-sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#ffffff1f;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px}.app-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.icon[_ngcontent-%COMP%]{margin-right:8px}.app-sidebar[_ngcontent-%COMP%]   .side-svg[_ngcontent-%COMP%]{width:28px;height:28px;display:block}.app-sidebar[_ngcontent-%COMP%]   .sr-only[_ngcontent-%COMP%]{position:absolute;left:-9999px}.app-sidebar[_ngcontent-%COMP%]   .side-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 8px;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   .side-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.95}"]});let n=e;return n})();var vj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Pr({type:e,selectors:[["app-root"]],standalone:!1,decls:5,vars:0,consts:[[1,"app-shell"],[1,"app-main"]],template:function(i,o){i&1&&(bt(0,"app-header"),x(1,"div",0),bt(2,"app-sidebar"),x(3,"main",1),bt(4,"router-outlet"),D()())},dependencies:[fv,gj,mj],styles:["[_ngcontent-%COMP%]:root{--header-h: 64px;--sidebar-w: 80px;--bg: #f5f8fc;--panel: #ffffff;--border: #e6edf7}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;background:var(--bg)}app-header[_ngcontent-%COMP%], .app-header[_ngcontent-%COMP%]{position:relative;z-index:100;display:block;width:100%;min-height:var(--header-h);background:var(--panel);border-bottom:1px solid var(--border)}.app-shell[_ngcontent-%COMP%]{display:flex;position:relative;z-index:0;min-height:calc(100vh - var(--header-h));isolation:isolate;background:var(--bg)}app-sidebar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%]{position:relative;z-index:10;width:var(--sidebar-w);min-height:calc(100vh - var(--header-h));flex-shrink:0;background:#f8fbff;border-right:1px solid var(--border);overflow:auto;-webkit-overflow-scrolling:touch}.app-main[_ngcontent-%COMP%]{position:relative;z-index:0;flex:1 1 auto;min-width:0;padding:24px;min-height:calc(100vh - var(--header-h));background:var(--bg)}router-outlet[_ngcontent-%COMP%]{display:block;position:relative;z-index:0}.app-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:1200}.app-modal[_ngcontent-%COMP%]{position:relative;z-index:1210;background:#fff;border-radius:12px;box-shadow:0 8px 40px #0000003b;max-width:90vw;width:680px;padding:22px}.app-modal-backdrop.is-hidden[_ngcontent-%COMP%]{pointer-events:none!important;opacity:0!important}.app-shell[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto}@media (max-width: 800px){.app-shell[_ngcontent-%COMP%]{flex-direction:column;min-height:calc(100vh - var(--header-h))}app-sidebar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%]{width:100%;height:auto;min-height:auto;border-right:none;border-bottom:1px solid var(--border)}.app-main[_ngcontent-%COMP%]{min-height:auto;padding:18px}}.safe-content[_ngcontent-%COMP%]{position:relative;z-index:0}"]});let n=e;return n})();var yj="auth",Iy=class{constructor(e){return e}},dh=class{constructor(){return Uc(yj)}};var yN=new Ke("angularfire2.auth-instances");function One(n,e){let t=Ol(yj,n,e);return t&&new Iy(t)}function Lne(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Iy(r)}}var Fne={provide:dh,deps:[[new Nr,yN]]},Vne={provide:Iy,useFactory:One,deps:[[new Nr,yN],js]};function _j(n,...e){return zn("angularfire",Zr.full,"auth"),es([Vne,Fne,{provide:yN,useFactory:Lne(n),multi:!0,deps:[Ut,$n,Qr,Ga,[new Nr,is],...e]}])}var wj=sr(zE,!0);var Nx=function(){return Nx=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Nx.apply(this,arguments)};var Bne={includeMetadataChanges:!1};function _N(n,e){return e===void 0&&(e=Bne),new Bt(function(t){var r=$g(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function bj(n){return _N(n,{includeMetadataChanges:!0})}function xj(n,e){return e===void 0&&(e={}),bj(n).pipe(gt(function(t){return wN(t,e)}))}function wN(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Nx(Nx({},r),(t={},t[e.idField]=n.id,t))}function Ej(n){return _N(n,{includeMetadataChanges:!0}).pipe(gt(function(e){return e.docs}))}function Cj(n,e){return e===void 0&&(e={}),Ej(n).pipe(gt(function(t){return t.map(function(r){return wN(r,e)})}))}var zo=class{constructor(e){return e}},Ij="firestore",bN=class{constructor(){return Uc(Ij)}};var xN=new Ke("angularfire2.firestore-instances");function Une(n,e){let t=Ol(Ij,n,e);return t&&new zo(t)}function zne(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zo(r)}}var qne={provide:bN,deps:[[new Nr,xN]]},$ne={provide:zo,useFactory:Une,deps:[[new Nr,xN],js]};function Sj(n,...e){return zn("angularfire",Zr.full,"fst"),es([$ne,qne,{provide:xN,useFactory:zne(n),multi:!0,deps:[Ut,$n,Qr,Ga,[new Nr,dh],[new Nr,is],...e]}])}var nm=sr(Cj,!0);var Aj=sr(xj,!0);var Dj=sr(dx,!0,2);var mo=sr(hy,!0,2);var Sy=sr(ux,!0,2);var Or=sr(th,!0,2);var Px=sr(cx,!0);var Jc=sr(lx,!0);var Tj=sr(a7,!0);var Mj=sr(ox,!0,2),Ay=sr(ec,!0,2);var el=sr(gy,!0,2);var Gl=sr(my,!0,2);var Dy=sr(ix,!0,2);var rm=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){if(!this.firestore)return ht([]);let r=mo(this.firestore,"users");return nm(r,{idField:"id"}).pipe(gt(i=>i.map(o=>({id:o.id,name:o.name,email:o.email,phone:o.phone,signupDate:o.signupDate||"",avatarUrl:o.avatarUrl||"",status:o.status??"Attivo",birthDate:o.birthDate??"",gender:o.gender??"",address:o.address??"",city:o.city??"",cap:o.cap??"",personalNotes:o.personalNotes??"",subscriptionEnd:o.subscriptionEnd??"",cards:o.cards??[]}))))}getAll(){return ee(this,null,function*(){if(!this.firestore)return[];let r=mo(this.firestore,"users");return(yield Jc(r)).docs.map(o=>{let s=o.data();return{id:o.id,name:s.name,email:s.email,phone:s.phone,signupDate:s.signupDate||"",avatarUrl:s.avatarUrl||"",status:s.status??"Attivo",birthDate:s.birthDate??"",gender:s.gender??"",address:s.address??"",city:s.city??"",cap:s.cap??"",personalNotes:s.personalNotes??"",subscriptionEnd:s.subscriptionEnd??"",cards:s.cards??[]}})})}getById$(r){if(!this.firestore)return ht(void 0);let i=mo(this.firestore,"users");return nm(i,{idField:"id"}).pipe(gt(o=>o.find(s=>s.id===r)))}getById(r){return ee(this,null,function*(){if(!this.firestore)return;let i=Or(this.firestore,`users/${r}`),o=yield Px(i);if(!o.exists())return;let s=o.data();return{id:o.id,name:s.name,email:s.email,phone:s.phone,signupDate:s.signupDate||"",avatarUrl:s.avatarUrl||"",status:s.status??"Attivo",birthDate:s.birthDate??"",gender:s.gender??"",address:s.address??"",city:s.city??"",cap:s.cap??"",personalNotes:s.personalNotes??"",subscriptionEnd:s.subscriptionEnd??"",cards:s.cards??[]}})}add(r){return ee(this,null,function*(){let i=Or(mo(this.firestore,"users")),o={name:r.name,email:r.email,phone:r.phone??"",signupDate:r.signupDate??new Date().toISOString().slice(0,10),avatarUrl:r.avatarUrl??"",status:r.status??"Attivo",birthDate:r.birthDate??"",gender:r.gender??"",address:r.address??"",city:r.city??"",cap:r.cap??"",personalNotes:r.personalNotes??"",subscriptionEnd:r.subscriptionEnd??"",cards:r.cards??[]};if(!this.firestore)throw new Error("Firestore not available - add user");return yield el(i,o),Fe({id:i.id},o)})}};e.\u0275fac=function(i){return new(i||e)(ze(zo))},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Wne(n,e){if(n&1){let t=Vt();x(0,"div",15),Me("click",function(){pe(t);let i=ie();return ge(i.closeScaduteModal())}),D()}}function Gne(n,e){if(n&1&&(x(0,"span"),q(1,"("),x(2,"em"),q(3),D(),q(4,")"),D()),n&2){let t=ie().$implicit;X(3),Yr("Scadenza: ",t.subscriptionEnd)}}function Kne(n,e){if(n&1&&(x(0,"li",25)(1,"strong"),q(2),D(),ut(3,Gne,5,1,"span",22),D()),n&2){let t=e.$implicit;X(2),Kt(t.name),X(),_e("ngIf",t.subscriptionEnd)}}function Yne(n,e){n&1&&(x(0,"li"),q(1," Nessuna tessera scaduta. "),D())}function Zne(n,e){if(n&1){let t=Vt();x(0,"div",16)(1,"div",17),Me("click",function(i){return pe(t),ge(i.stopPropagation())}),x(2,"h3",18)(3,"span",19),q(4,"warning"),D(),q(5," Tessere scadute "),D(),x(6,"ul",20),ut(7,Kne,4,2,"li",21)(8,Yne,2,0,"li",22),D(),x(9,"div",23)(10,"button",24),Me("click",function(){pe(t);let i=ie();return ge(i.closeScaduteModal())}),q(11,"Chiudi"),D()()()()}if(n&2){let t=ie();X(7),_e("ngForOf",t.tessereScadute),X(),_e("ngIf",t.tessereScadute.length===0)}}var Nj=(()=>{let e=class e{constructor(r){this.userService=r,this.activeClients=0,this.tessereAttive=[],this.tessereScadute=[],this.thisWeekCards=0,this.totalExercises=0,this.scaduteModalOpen=!1}ngOnInit(){return ee(this,null,function*(){let r=yield this.userService.getAll(),i=new Date().toISOString().substring(0,10);this.activeClients=r.filter(o=>o.status==="Attivo").length,this.tessereScadute=r.filter(o=>o.subscriptionEnd&&o.subscriptionEnd<=i),this.tessereAttive=r.filter(o=>o.subscriptionEnd&&o.subscriptionEnd>i)})}openScaduteModal(){this.scaduteModalOpen=!0}closeScaduteModal(){this.scaduteModalOpen=!1}};e.\u0275fac=function(i){return new(i||e)(it(rm))},e.\u0275cmp=Pr({type:e,selectors:[["app-home"]],standalone:!1,decls:41,vars:7,consts:[[1,"page","home-page"],[1,"cards"],[1,"card","stat-card"],[1,"stat-label"],[1,"card","stat-card",2,"margin-top","20px"],[1,"tessere-row",2,"display","flex","align-items","center","gap","18px"],[2,"font-size","1rem","font-weight","400"],[1,"tessera-btn","warning-card",2,"display","flex","align-items","center","gap","7px","background","#fff","border","1px solid #ededed","border-radius","8px","padding","7px 16px","cursor","pointer","box-shadow","none",3,"click"],[1,"material-icons",2,"color","#d32f2f","font-size","1.25em"],[2,"font-size","1rem"],[1,"stat-label",2,"margin-left","7px"],[1,"tessera-btn","success-card",2,"display","flex","align-items","center","gap","7px","background","#fff","border","1px solid #ededed","border-radius","8px","padding","7px 16px","box-shadow","none"],[1,"material-icons",2,"color","#318b2b","font-size","1.25em"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-tessera-scaduti",4,"ngIf"],[1,"modal-backdrop",3,"click"],[1,"modal-tessera-scaduti"],[1,"modal-scaduti-box",2,"padding","24px 28px","border-radius","10px","max-width","360px","background","#fff","box-shadow","0 4px 24px -6px #b2b2b2",3,"click"],[2,"color","#d32f2f","font-size","1.15rem","margin-bottom","13px"],[1,"material-icons",2,"font-size","26px","vertical-align","middle","margin-right","6px"],[1,"scaduti-list",2,"margin","0","padding","0","list-style","none"],["style","margin-bottom:9px;",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"text-align","right","margin-top","15px"],[1,"btn","outline",3,"click"],[2,"margin-bottom","9px"]],template:function(i,o){i&1&&(x(0,"div",0)(1,"h2"),q(2,"Dashboard"),D(),x(3,"div",1)(4,"div",2),q(5,"Clienti attivi "),x(6,"span",3)(7,"strong"),q(8),D()()(),x(9,"div",2),q(10,"Schede questa settimana "),x(11,"span",3)(12,"strong"),q(13),D()()(),x(14,"div",2),q(15,"Esercizi totali "),x(16,"span",3)(17,"strong"),q(18),D()()()(),x(19,"div",4)(20,"div",5)(21,"span",6),q(22,"Tessere:"),D(),x(23,"div",7),Me("click",function(){return o.openScaduteModal()}),x(24,"span",8),q(25,"report_problem"),D(),x(26,"span",9),q(27,"Scadute:"),D(),x(28,"span",10)(29,"strong"),q(30),D()()(),x(31,"div",11)(32,"span",12),q(33,"verified_user"),D(),x(34,"span",9),q(35,"Attive:"),D(),x(36,"span",10)(37,"strong"),q(38),D()()()()(),ut(39,Wne,1,0,"div",13)(40,Zne,12,2,"div",14),D()),i&2&&(X(8),Kt(o.activeClients),X(5),Kt(o.thisWeekCards),X(5),Kt(o.totalExercises),X(12),Kt(o.tessereScadute.length),X(8),Kt(o.tessereAttive.length),X(),_e("ngIf",o.scaduteModalOpen),X(),_e("ngIf",o.scaduteModalOpen))},dependencies:[uo,Lo],styles:[".home-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0f2540}.cards[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.card[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:8px;box-shadow:0 2px 8px #14283c0f;flex:1 1 0;min-width:0;display:flex;align-items:center;min-height:58px}.card.stat-card[_ngcontent-%COMP%]{margin-bottom:16px;min-width:0;flex:1 1 0;display:flex;align-items:center}.stat-label[_ngcontent-%COMP%]{margin-left:7px}.tessera-btn[_ngcontent-%COMP%], .tessera-stat[_ngcontent-%COMP%]{background:#fff;border:1px solid #ededed;border-radius:8px;display:flex;align-items:center;gap:7px;padding:7px 16px;font-size:1rem;box-shadow:none}.tessera-btn.warning-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .tessera-stat.warning-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#d32f2f}.tessera-btn.success-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .tessera-stat.success-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#318b2b}"]});let n=e;return n})();var Dd=(()=>{let e=class e{constructor(r){this.afAuth=r,this._ensuring=null}ensureSignedIn(){return ee(this,null,function*(){if(this._ensuring)return this._ensuring;this._ensuring=ee(this,null,function*(){if(!(yield this.afAuth.currentUser))try{yield this.afAuth.signInAnonymously(),yield new Promise(i=>{let o=this.afAuth.authState.subscribe(s=>{s&&(o.unsubscribe(),i())});setTimeout(()=>{o.unsubscribe(),i()},5e3)})}catch(i){console.error("AuthService.ensureSignedIn failed",i)}});try{yield this._ensuring}finally{this._ensuring=null}})}};e.\u0275fac=function(i){return new(i||e)(ze(kf))},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var rc=class{constructor(e){return e}},Pj="storage",CN=class{constructor(){return Uc(Pj)}};var IN=new Ke("angularfire2.storage-instances");function Qne(n,e){let t=Ol(Pj,n,e);return t&&new rc(t)}function Xne(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new rc(r)}}var Jne={provide:CN,deps:[[new Nr,IN]]},ere={provide:rc,useFactory:Qne,deps:[[new Nr,IN],js]};function kj(n,...e){return zn("angularfire",Zr.full,"gcs"),es([ere,Jne,{provide:IN,useFactory:Xne(n),multi:!0,deps:[Ut,$n,Qr,Ga,[new Nr,dh],[new Nr,is],...e]}])}var Kl=sr(Cx,!0);var Rj=sr(uj,!0);var Yl=sr(Cy,!0,2);var Zl=sr(cj,!0);var Oj=n=>["/esercizi",n],tre=n=>({"auto-matched":n});function nre(n,e){if(n&1&&bt(0,"img",40),n&2){let t=ie().$implicit;_e("src",t.image,xr)("alt",t.name)}}function rre(n,e){n&1&&(x(0,"div",41),fr(),x(1,"svg",42),bt(2,"circle",43)(3,"rect",44)(4,"rect",45)(5,"rect",46),D()())}function ire(n,e){if(n&1&&(x(0,"div",32)(1,"div",33),ut(2,nre,1,2,"img",34)(3,rre,6,0,"div",35),D(),x(4,"div",36)(5,"div",37),q(6),D(),x(7,"div",38),q(8),D()(),x(9,"button",39),q(10," Dettaglio "),D()()),n&2){let t=e.$implicit;X(2),_e("ngIf",t.image),X(),_e("ngIf",!t.image),X(3),Kt(t.name),X(2),Kt(t.category),X(),qa("aria-label",Pc("Dettaglio esercizio ",t.name)),_e("routerLink",kc(7,Oj,t.id))}}function ore(n,e){n&1&&(x(0,"div",47),q(1," Nessun esercizio presente "),D())}function sre(n,e){if(n&1){let t=Vt();x(0,"button",48),Me("click",function(){pe(t);let i=ie();return ge(i.openAllExercisesModal())}),q(1," Mostra tutti "),D()}}function are(n,e){if(n&1&&bt(0,"img",40),n&2){let t=ie().$implicit;_e("src",t.image,xr)("alt",t.name)}}function cre(n,e){n&1&&(x(0,"div",62),fr(),x(1,"svg",42),bt(2,"circle",63)(3,"path",64),D()())}function lre(n,e){if(n&1){let t=Vt();x(0,"div",49)(1,"div",33),ut(2,are,1,2,"img",34)(3,cre,4,0,"div",50),x(4,"button",51),Me("click",function(){let i=pe(t).$implicit,o=ie();return ge(o.openEditCategoryModal(i))}),fr(),x(5,"svg",52),bt(6,"path",53)(7,"circle",54),D()()(),Oo(),x(8,"div",55),Me("click",function(){let i=pe(t).$implicit,o=ie();return ge(o.openEditCategoryModal(i))}),x(9,"div",56),q(10),D()(),x(11,"div",57)(12,"button",58),Me("click",function(){let i=pe(t).$implicit,o=ie();return ge(o.confirmRemoveCategory(i))}),q(13," \xD7 "),D(),x(14,"label",59)(15,"input",60),Me("change",function(i){let o=pe(t).$implicit,s=ie();return ge(s.onCategoryToggle(o,i.target.checked))}),D(),bt(16,"span",61),D()()()}if(n&2){let t=e.$implicit;X(2),_e("ngIf",t.image),X(),_e("ngIf",!t.image),X(),qa("aria-label",Pc("Modifica immagine categoria ",t.name)),X(6),Kt(t.name),X(2),qa("aria-label",Pc("Elimina categoria ",t.name)),X(3),_e("checked",t.selected)}}function ure(n,e){n&1&&(x(0,"div",47),q(1," Nessuna categoria trovata "),D())}function dre(n,e){if(n&1){let t=Vt();x(0,"button",68),Me("click",function(){pe(t);let i=ie(2);return ge(i.openAllCategoriesModal())}),q(1," Mostra tutte "),D()}}function fre(n,e){if(n&1){let t=Vt();x(0,"div",65)(1,"button",66),Me("click",function(){pe(t);let i=ie();return ge(i.resetCategorySelections())}),q(2," Azzera "),D(),ut(3,dre,2,0,"button",67),D()}if(n&2){let t=ie();X(3),_e("ngIf",t.categories.length>5)}}function hre(n,e){if(n&1&&(x(0,"span",81),q(1),D()),n&2){let t=ie(2);X(),Yr(" Categoria: ",t.selectedCategoryNames[0]," ")}}function pre(n,e){if(n&1&&bt(0,"img",40),n&2){let t=ie().$implicit;_e("src",t.image,xr)("alt",t.name)}}function gre(n,e){n&1&&(x(0,"div",89),fr(),x(1,"svg",90),bt(2,"circle",91)(3,"rect",44),D()())}function mre(n,e){if(n&1&&(x(0,"div",82)(1,"div",83),ut(2,pre,1,2,"img",34)(3,gre,4,0,"div",84),D(),x(4,"div",85)(5,"div",86),q(6),D(),x(7,"div",87),q(8),D()(),x(9,"a",88),q(10," Dettaglio "),D()()),n&2){let t=e.$implicit;X(2),_e("ngIf",t.image),X(),_e("ngIf",!t.image),X(3),Kt(t.name),X(2),Kt(t.category),X(),qa("aria-label",Pc("Dettaglio esercizio ",t.name)),_e("routerLink",kc(7,Oj,t.id))}}function vre(n,e){n&1&&(x(0,"div",92),q(1,"Nessun esercizio trovato"),D())}function yre(n,e){if(n&1){let t=Vt();x(0,"div",69)(1,"div",70)(2,"div",71)(3,"h3",72),q(4," Tutti gli esercizi "),ut(5,hre,2,1,"span",73),D(),x(6,"button",74),Me("click",function(){pe(t);let i=ie();return ge(i.closeAllExercisesModal())}),q(7,"\xD7"),D()(),x(8,"div",75)(9,"label",76)(10,"input",77),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.exerciseSearch,i)||(o.exerciseSearch=i),ge(i)}),D()()(),x(11,"div",78),ut(12,mre,11,9,"div",79)(13,vre,2,0,"div",80),D()()()}if(n&2){let t=ie();X(5),_e("ngIf",t.selectedCategoryNames.length),X(5),Qe("ngModel",t.exerciseSearch),X(2),_e("ngForOf",t.allExercisesForModal),X(),_e("ngIf",t.allExercisesForModal.length===0)}}function _re(n,e){if(n&1&&bt(0,"img",40),n&2){let t=ie().$implicit;_e("src",t.image,xr)("alt",t.name)}}function wre(n,e){n&1&&(x(0,"div",109),fr(),x(1,"svg",110),bt(2,"circle",111)(3,"path",112),D()())}function bre(n,e){if(n&1){let t=Vt();x(0,"div",98)(1,"div",99),ut(2,_re,1,2,"img",34)(3,wre,4,0,"div",100),x(4,"button",101),Me("click",function(){let i=pe(t).$implicit,o=ie(2);return ge(o.openEditCategoryModal(i))}),fr(),x(5,"svg",102),bt(6,"path",53),D()()(),Oo(),x(7,"div",103)(8,"div",104),q(9),D()(),x(10,"div",105)(11,"button",106),Me("click",function(){let i=pe(t).$implicit,o=ie(2);return ge(o.confirmRemoveCategory(i))}),q(12,"\xD7"),D(),x(13,"label",107)(14,"input",60),Me("change",function(i){let o=pe(t).$implicit,s=ie(2);return ge(s.onCategoryToggle(o,i.target.checked))}),D(),bt(15,"span",108),D()()()}if(n&2){let t=e.$implicit;X(2),_e("ngIf",t.image),X(),_e("ngIf",!t.image),X(),qa("aria-label",Pc("Modifica categoria ",t.name)),X(5),Kt(t.name),X(2),qa("aria-label",Pc("Elimina categoria ",t.name)),X(3),_e("checked",t.selected)}}function xre(n,e){n&1&&(x(0,"div",92),q(1,"Nessuna categoria trovata"),D())}function Ere(n,e){if(n&1){let t=Vt();x(0,"div",69)(1,"div",93)(2,"div",71)(3,"h3",72),q(4," Tutte le categorie "),D(),x(5,"button",74),Me("click",function(){pe(t);let i=ie();return ge(i.closeAllCategoriesModal())}),q(6,"\xD7"),D()(),x(7,"div",75)(8,"label",94)(9,"input",95),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.categorySearch,i)||(o.categorySearch=i),ge(i)}),D()()(),x(10,"div",96),ut(11,bre,16,8,"div",97)(12,xre,2,0,"div",80),D()()()}if(n&2){let t=ie();X(9),Qe("ngModel",t.categorySearch),X(2),_e("ngForOf",t.allCategoriesForModal),X(),_e("ngIf",t.allCategoriesForModal.length===0)}}function Cre(n,e){if(n&1){let t=Vt();x(0,"div",69)(1,"div",113)(2,"div",114)(3,"p",115),q(4,"Sicuro di voler cancellare la categoria?"),D(),x(5,"div",116)(6,"button",117),Me("click",function(){pe(t);let i=ie();return ge(i.removeCategoryConfirmed())}),q(7,"Si"),D(),x(8,"button",118),Me("click",function(){pe(t);let i=ie();return ge(i.closeDeleteCategoryModal())}),q(9,"No"),D()()()()()}}function Ire(n,e){n&1&&(co(0),fr(),x(1,"svg",131),bt(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),D(),lo())}function Sre(n,e){if(n&1&&bt(0,"img",138),n&2){let t=ie(2);_e("src",t.exerciseImage,xr)}}function Are(n,e){if(n&1){let t=Vt();x(0,"button",139),Me("mousedown",function(i){return pe(t),ge(i.preventDefault())})("click",function(){pe(t);let i=ie(2);return ge(i.clearCategoryInput())}),q(1," \xD7 "),D()}}function Dre(n,e){if(n&1){let t=Vt();x(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),ut(6,Ire,8,0,"ng-container",122)(7,Sre,1,1,"ng-template",null,0,ns),D(),x(9,"input",123),Me("change",function(i){pe(t);let o=ie();return ge(o.onExerciseImageChange(i))}),D()()(),x(10,"label",124),q(11," Nome esercizio "),x(12,"input",125),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.exerciseName,i)||(o.exerciseName=i),ge(i)}),Me("keydown.enter",function(){pe(t);let i=ie();return ge(i.saveExercise())}),D()(),x(13,"label",126),q(14," Categoria "),x(15,"div",127)(16,"input",128),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.exerciseCategoryInput,i)||(o.exerciseCategoryInput=i),ge(i)}),Me("input",function(){pe(t);let i=ie();return ge(i.onAutoCategoryInput())})("blur",function(){pe(t);let i=ie();return ge(i.onAutoCategoryBlur())}),D(),ut(17,Are,2,0,"button",129),D()(),x(18,"div",116)(19,"button",130),Me("click",function(){pe(t);let i=ie();return ge(i.saveExercise())}),q(20," Salva "),D(),x(21,"button",118),Me("click",function(){pe(t);let i=ie();return ge(i.closeExerciseModal())}),q(22,"Annulla"),D()()()()()}if(n&2){let t=Ci(8),r=ie();X(6),_e("ngIf",!r.exerciseImage)("ngIfElse",t),X(6),Qe("ngModel",r.exerciseName),X(4),Qe("ngModel",r.exerciseCategoryInput),_e("ngClass",kc(7,tre,r.autoCatMatched)),X(),_e("ngIf",r.exerciseCategoryInput),X(2),_e("disabled",!r.exerciseName.trim()||!r.exerciseCategoryInput.trim())}}function Tre(n,e){n&1&&(co(0),fr(),x(1,"svg",131),bt(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),D(),lo())}function Mre(n,e){if(n&1&&bt(0,"img",142),n&2){let t=ie(2);_e("src",t.categoryImage,xr)}}function Nre(n,e){if(n&1){let t=Vt();x(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),ut(6,Tre,8,0,"ng-container",122)(7,Mre,1,1,"ng-template",null,1,ns),D(),x(9,"input",123),Me("change",function(i){pe(t);let o=ie();return ge(o.onCategoryImageChange(i))}),D()()(),x(10,"label",140),q(11," Nome categoria "),x(12,"input",141),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.categoryName,i)||(o.categoryName=i),ge(i)}),D()(),x(13,"div",116)(14,"button",130),Me("click",function(){pe(t);let i=ie();return ge(i.saveCategory())}),q(15,"Salva"),D(),x(16,"button",118),Me("click",function(){pe(t);let i=ie();return ge(i.closeCategoryModal())}),q(17,"Annulla"),D()()()()()}if(n&2){let t=Ci(8),r=ie();X(6),_e("ngIf",!r.categoryImage)("ngIfElse",t),X(6),Qe("ngModel",r.categoryName),X(2),_e("disabled",!r.categoryName.trim())}}function Pre(n,e){n&1&&(co(0),fr(),x(1,"svg",131),bt(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),D(),lo())}function kre(n,e){if(n&1&&bt(0,"img",142),n&2){let t=ie(2);_e("src",t.editCategoryImage,xr)}}function Rre(n,e){if(n&1){let t=Vt();x(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),ut(6,Pre,8,0,"ng-container",122)(7,kre,1,1,"ng-template",null,2,ns),D(),x(9,"input",123),Me("change",function(i){pe(t);let o=ie();return ge(o.onEditCategoryImageChange(i))}),D()()(),x(10,"label",143),q(11," Nome categoria "),x(12,"input",144),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.editCategoryName,i)||(o.editCategoryName=i),ge(i)}),D()(),x(13,"div",116)(14,"button",130),Me("click",function(){pe(t);let i=ie();return ge(i.saveEditCategory())}),q(15,"Salva"),D(),x(16,"button",118),Me("click",function(){pe(t);let i=ie();return ge(i.closeEditCategoryModal())}),q(17,"Annulla"),D()()()()()}if(n&2){let t=Ci(8),r=ie();X(6),_e("ngIf",!r.editCategoryImage)("ngIfElse",t),X(6),Qe("ngModel",r.editCategoryName),X(2),_e("disabled",!r.editCategoryName.trim())}}var Lj=(()=>{let e=class e{constructor(r,i){this.router=r,this.authService=i,this.firestore=Se(zo),this.storage=Se(rc),this.exercises=[],this.categories=[],this.showExerciseModal=!1,this.showCategoryModal=!1,this.showEditCategoryModal=!1,this.showDeleteCategoryModal=!1,this.showAllExercisesModal=!1,this.showAllCategoriesModal=!1,this.categoryToEdit=null,this.categoryToDelete=null,this.exerciseName="",this.exerciseCategory="",this.exerciseImage="",this.exerciseCategoryInput="",this.showCategoryDropdown=!1,this.categorySuggestions=[],this.highlightedSuggestionIndex=-1,this.allowInlineCreate=!1,this.autoCatMatched=!1,this.categoryName="",this.categoryImage="",this.editCategoryName="",this.editCategoryImage="",this.categorySearch="",this.exerciseSearch=""}ngOnInit(){this.subscribeCollections();let r=this.router.getCurrentNavigation(),i=r?.extras?.state&&r.extras.state.refresh}subscribeCollections(){let r=mo(this.firestore,"exercises");nm(r,{idField:"id"}).subscribe(o=>{this.exercises=o});let i=mo(this.firestore,"categories");nm(i,{idField:"id"}).subscribe(o=>{this.categories=o.map(s=>Pt(Fe({},s),{selected:s.selected??!1}))})}openExerciseModal(){this.showExerciseModal=!0,this.exerciseName="",this.exerciseCategory="",this.exerciseImage="",this.exerciseCategoryInput="",this.autoCatMatched=!1,this.showCategoryDropdown=!1,this.categorySuggestions=[],this.highlightedSuggestionIndex=-1,this.allowInlineCreate=!1}closeExerciseModal(){this.showExerciseModal=!1,this.exerciseName="",this.exerciseCategory="",this.exerciseImage="",this.exerciseCategoryInput="",this.autoCatMatched=!1,this.showCategoryDropdown=!1,this.highlightedSuggestionIndex=-1}onExerciseImageChange(r){let i=r.target.files?.[0];if(!i)return;let o=new FileReader;o.onload=()=>this.exerciseImage=o.result,o.readAsDataURL(i)}onAutoCategoryInput(){this.autoCatMatched=!1;let r=this.exerciseCategoryInput.trim();if(r.length<3)return;let i=this.categories.find(o=>o.name.toLowerCase().startsWith(r.toLowerCase()));i&&(this.exerciseCategoryInput=i.name,this.autoCatMatched=!0)}onAutoCategoryBlur(){let r=this.exerciseCategoryInput.trim();if(r.length<3)return;let i=this.categories.find(o=>o.name.toLowerCase().startsWith(r.toLowerCase()));i&&(this.exerciseCategoryInput=i.name,this.autoCatMatched=!0)}clearCategoryInput(){this.exerciseCategoryInput="",this.autoCatMatched=!1}updateCategorySuggestions(){let r=this.exerciseCategoryInput.trim().toLowerCase();r?(this.categorySuggestions=this.categories.filter(i=>i.name.toLowerCase().includes(r)).sort((i,o)=>i.name.localeCompare(o.name)).slice(0,50),this.allowInlineCreate=!this.categorySuggestions.some(i=>i.name.toLowerCase()===r)):(this.categorySuggestions=this.categories.slice(0,50),this.allowInlineCreate=!1),this.highlightedSuggestionIndex=this.categorySuggestions.length?0:-1,this.showCategoryDropdown=!0}openCategoryDropdown(){this.showCategoryDropdown=!0,this.updateCategorySuggestions()}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown,this.showCategoryDropdown&&this.updateCategorySuggestions()}deferCloseCategoryDropdown(){setTimeout(()=>{this.showCategoryDropdown=!1,this.highlightedSuggestionIndex=-1},170)}selectCategory(r){this.exerciseCategoryInput=r,this.exerciseCategory=r,this.showCategoryDropdown=!1,this.highlightedSuggestionIndex=-1}onCategoryInputKeydown(r){if(!this.showCategoryDropdown&&["ArrowDown","ArrowUp","Enter"].includes(r.key)){this.openCategoryDropdown();return}r.key==="ArrowDown"?(r.preventDefault(),this.categorySuggestions.length&&(this.highlightedSuggestionIndex=(this.highlightedSuggestionIndex+1)%this.categorySuggestions.length)):r.key==="ArrowUp"?(r.preventDefault(),this.categorySuggestions.length&&(this.highlightedSuggestionIndex=(this.highlightedSuggestionIndex-1+this.categorySuggestions.length)%this.categorySuggestions.length)):r.key==="Enter"?this.showCategoryDropdown&&(r.preventDefault(),this.highlightedSuggestionIndex>=0&&this.categorySuggestions.length?this.selectCategory(this.categorySuggestions[this.highlightedSuggestionIndex].name):this.allowInlineCreate&&this.exerciseCategoryInput.trim()?this.createInlineCategory():this.showCategoryDropdown=!1):r.key==="Escape"&&(this.showCategoryDropdown=!1,this.highlightedSuggestionIndex=-1)}createInlineCategory(){return ee(this,null,function*(){let r=this.exerciseCategoryInput.trim();if(!r)return;if(this.categories.some(a=>a.name.toLowerCase()===r.toLowerCase())){this.selectCategory(r);return}let i=crypto.randomUUID(),o={id:i,name:r,image:"",selected:!1};yield this.authService.ensureSignedIn();let s=Or(this.firestore,`categories/${i}`);try{yield el(s,o)}catch(a){console.error("Error creating inline category",a)}this.selectCategory(r),this.allowInlineCreate=!1})}saveExercise(){return ee(this,null,function*(){let r=this.exerciseName.trim(),i=this.exerciseCategoryInput.trim();if(!r||!i)return;let o=i,s=this.categories.find(p=>p.name.toLowerCase()===i.toLowerCase());s?o=s.name:(yield this.createInlineCategory(),o=this.exerciseCategoryInput.trim());let a=crypto.randomUUID(),c=this.exerciseImage||void 0;if(c&&c.startsWith("data:")){let p=`exercises/${a}/${Date.now()}_image`,m=Yl(this.storage,p),g=this.dataURLToBlob(c);yield Zl(m,g),c=yield Kl(m)}let l={id:a,name:r,category:o,image:c};yield this.authService.ensureSignedIn();let u=Or(this.firestore,`exercises/${a}`);try{yield el(u,l)}catch(p){console.error("Error saving exercise",p)}this.closeExerciseModal()})}openCategoryModal(){this.showCategoryModal=!0,this.categoryName="",this.categoryImage=""}closeCategoryModal(){this.showCategoryModal=!1,this.categoryName="",this.categoryImage=""}onCategoryImageChange(r){let i=r.target.files?.[0];if(!i)return;let o=new FileReader;o.onload=()=>this.categoryImage=o.result,o.readAsDataURL(i)}saveCategory(){return ee(this,null,function*(){if(!this.categoryName.trim())return;let r=crypto.randomUUID(),i=this.categoryImage||void 0;if(i&&i.startsWith("data:")){let a=`categories/${r}/${Date.now()}_image`,c=Yl(this.storage,a),l=this.dataURLToBlob(i);yield Zl(c,l),i=yield Kl(c)}let o={id:r,name:this.categoryName.trim(),image:i,selected:!1};yield this.authService.ensureSignedIn();let s=Or(this.firestore,`categories/${r}`);try{yield el(s,o)}catch(a){console.error("Error saving category",a)}this.closeCategoryModal()})}openEditCategoryModal(r){this.categoryToEdit=r,this.editCategoryName=r.name,this.editCategoryImage=r.image||"",this.showEditCategoryModal=!0}closeEditCategoryModal(){this.showEditCategoryModal=!1,this.categoryToEdit=null,this.editCategoryName="",this.editCategoryImage=""}onEditCategoryImageChange(r){let i=r.target.files?.[0];if(!i)return;let o=new FileReader;o.onload=()=>this.editCategoryImage=o.result,o.readAsDataURL(i)}saveEditCategory(){return ee(this,null,function*(){if(!this.categoryToEdit)return;let r=this.categoryToEdit.id,i=this.editCategoryImage||void 0;if(i&&i.startsWith("data:")){let s=`categories/${r}/${Date.now()}_image`,a=Yl(this.storage,s),c=this.dataURLToBlob(i);yield Zl(a,c),i=yield Kl(a)}let o=Or(this.firestore,`categories/${r}`);try{yield Gl(o,{name:this.editCategoryName.trim(),image:i})}catch(s){console.error("Error updating category",s)}this.closeEditCategoryModal(),this.showExerciseModal&&this.updateCategorySuggestions()})}onCategoryToggle(r,i){i?this.categories.forEach(o=>o.selected=o.id===r.id):this.categories.forEach(o=>o.selected=!1),this.categories=[...this.categories]}resetCategorySelections(){this.categories.forEach(r=>r.selected=!1),this.categories=[...this.categories]}confirmRemoveCategory(r){this.categoryToDelete=r,this.showDeleteCategoryModal=!0}closeDeleteCategoryModal(){this.showDeleteCategoryModal=!1,this.categoryToDelete=null}removeCategoryConfirmed(){return ee(this,null,function*(){if(!this.categoryToDelete)return;let r=this.categoryToDelete.id,i=this.categoryToDelete.name,o=Or(this.firestore,`categories/${r}`);try{yield Sy(o)}catch(l){console.error("Error deleting category",l)}let s=mo(this.firestore,"exercises"),a=Ay(s,Dy("category","==",i)),c=yield Jc(a);for(let l of c.docs)try{yield Sy(Or(this.firestore,`exercises/${l.id}`))}catch(u){console.error("Error deleting exercise",l.id,u)}this.exerciseCategoryInput===i&&(this.exerciseCategoryInput="",this.exerciseCategory=""),this.closeDeleteCategoryModal(),this.showExerciseModal&&this.updateCategorySuggestions()})}get selectedCategoryNames(){return this.categories.filter(r=>r.selected).map(r=>r.name)}get filteredExercisesLimited(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(s=>s.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();return o&&(i=i.filter(s=>s.name.toLowerCase().includes(o))),i.slice(0,5)}get filteredCategoriesLimited(){let r=this.categorySearch.trim().toLowerCase();return(r?this.categories.filter(o=>o.name.toLowerCase().includes(r)):this.categories).slice(0,5)}get allExercisesForModal(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(s=>s.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();return o&&(i=i.filter(s=>s.name.toLowerCase().includes(o))),i}get allCategoriesForModal(){let r=this.categorySearch.trim().toLowerCase();return r?this.categories.filter(i=>i.name.toLowerCase().includes(r)):this.categories}openAllExercisesModal(){this.showAllExercisesModal=!0}closeAllExercisesModal(){this.showAllExercisesModal=!1}openAllCategoriesModal(){this.showAllCategoriesModal=!0}closeAllCategoriesModal(){this.showAllCategoriesModal=!1}openDetail(r){this.router.navigate(["/esercizi",r.id],{state:{exercise:r}})}dataURLToBlob(r){let i=r.split(","),o=i[0].match(/:(.*?);/),s=o?o[1]:"application/octet-stream",a=atob(i[1]),c=a.length,l=new Uint8Array(c);for(;c--;)l[c]=a.charCodeAt(c);return new Blob([l],{type:s})}};e.\u0275fac=function(i){return new(i||e)(it(Oi),it(Dd))},e.\u0275cmp=Pr({type:e,selectors:[["app-esercizi"]],standalone:!1,decls:42,vars:14,consts:[["exercisePreviewTpl",""],["categoryPreviewTpl",""],["editCategoryPreviewTpl",""],[1,"esercizi-page"],[1,"esercizi-layout"],[1,"esercizi-card"],[1,"section-header"],[1,"section-title"],["type","button","aria-label","Aggiungi esercizio",1,"top-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24"],["x","2","y","9.5","width","3","height","5","rx","1.2","fill","#2563eb"],["x","19","y","9.5","width","3","height","5","rx","1.2","fill","#2563eb"],["x","6","y","11","width","12","height","2","rx","1","fill","#2563eb"],["x","8","y","10","width","8","height","4","rx","1.6","fill","#e7effd"],[1,"section-divider"],[1,"search-bar-wrapper"],["for","exercise-search",1,"search-bar"],["id","exercise-search","type","text","aria-label","Cerca esercizi","autocomplete","off","placeholder","Cerca esercizi...",3,"ngModelChange","ngModel"],[1,"exercise-list"],["class","card-item",4,"ngFor","ngForOf"],["class","exercise-empty-info",4,"ngIf"],["class","more-btn","type","button",3,"click",4,"ngIf"],[1,"categorie-card"],["type","button","aria-label","Aggiungi categoria",1,"top-btn",3,"click"],["d","M3 12.5 L12 21.2 Q12.6 21.8 13.3 21.25 L21.25 13.3 Q21.8 12.6 21.2 12 L12.5 3 Q12.05 2.55 11.45 3.1 L3.1 11.45 Q2.55 12.05 3 12.5Z","fill","#2563eb","stroke","#1857a7","stroke-width","1"],["cx","8","cy","8","r","2","fill","#fff","stroke","#2563eb","stroke-width","1"],["for","category-search",1,"search-bar"],["id","category-search","type","text","aria-label","Cerca categorie","autocomplete","off","placeholder","Cerca categorie...",3,"ngModelChange","ngModel"],[1,"category-list"],["class","card-item category-row",4,"ngFor","ngForOf"],["class","category-actions-bottom",4,"ngIf"],["class","esercizi-modal-backdrop",4,"ngIf"],[1,"card-item"],[1,"card-img-wrap"],[3,"src","alt",4,"ngIf"],["class","exercise-placeholder",4,"ngIf"],[1,"exercise-text"],[1,"exercise-name"],[1,"exercise-category"],["type","button",1,"exercise-detail-btn",3,"routerLink","aria-label"],[3,"src","alt"],[1,"exercise-placeholder"],["width","64","height","64","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#cfe6fd"],["x","8","y","10","width","8","height","4","rx","1.5","fill","#83b4fa"],["x","4","y","11.5","width","3","height","3","rx","1.2","fill","#2563eb"],["x","17","y","11.5","width","3","height","3","rx","1.2","fill","#2563eb"],[1,"exercise-empty-info"],["type","button",1,"more-btn",3,"click"],[1,"card-item","category-row"],["class","category-placeholder",4,"ngIf"],["type","button",1,"category-edit-img-btn",3,"click","aria-label"],["width","22","height","22","viewBox","0 0 24 24"],["d","M14.06 5.94a2.5 2.5 0 013.54 3.54l-8.585 8.585-4.243.707.707-4.243z","fill","none","stroke","#2563eb","stroke-width","2"],["cx","17.5","cy","6.5","r","1.5","fill","#83b4fa","stroke","#2563eb","stroke-width","1"],[1,"category-text",3,"click"],[1,"category-name"],[1,"category-controls-destra"],["type","button","title","Elimina categoria",1,"category-x-btn2",3,"click","aria-label"],["title","Seleziona categoria per filtrare esercizi",1,"category-checkbox-wrap"],["type","checkbox",3,"change","checked"],[1,"category-checkbox"],[1,"category-placeholder"],["cx","12","cy","12","r","12","fill","#e5fbee"],["d","M9 15l3-6 3 6","stroke","#22c16b","stroke-width","2","fill","none"],[1,"category-actions-bottom"],["type","button",1,"reset-categories-btn",3,"click"],["type","button","class","toggle-categories-btn",3,"click",4,"ngIf"],["type","button",1,"toggle-categories-btn",3,"click"],[1,"esercizi-modal-backdrop"],[1,"esercizi-modal","esercizi-grid-modal"],[1,"grid-modal-header"],[1,"grid-modal-title"],["class","grid-filter-tag",4,"ngIf"],["type","button","aria-label","Chiudi",1,"grid-close-btn",3,"click"],[1,"search-bar-wrapper","modal-search-inline"],["for","exercise-search-modal",1,"search-bar"],["id","exercise-search-modal","type","text","aria-label","Cerca esercizi nella griglia","autocomplete","off","placeholder","Cerca...",3,"ngModelChange","ngModel"],[1,"exercise-grid"],["class","exercise-grid-card",4,"ngFor","ngForOf"],["class","grid-empty",4,"ngIf"],[1,"grid-filter-tag"],[1,"exercise-grid-card"],[1,"grid-img"],["class","grid-placeholder",4,"ngIf"],[1,"grid-info"],[1,"grid-name"],[1,"grid-cat"],[1,"grid-detail-link",3,"routerLink","aria-label"],[1,"grid-placeholder"],["width","48","height","48","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#d9ecfd"],[1,"grid-empty"],[1,"esercizi-modal","categorie-grid-modal"],["for","category-search-modal",1,"search-bar"],["id","category-search-modal","type","text","aria-label","Cerca categorie nella griglia","autocomplete","off","placeholder","Cerca...",3,"ngModelChange","ngModel"],[1,"category-grid"],["class","category-grid-card",4,"ngFor","ngForOf"],[1,"category-grid-card"],[1,"grid-cat-img"],["class","grid-cat-placeholder",4,"ngIf"],["type","button",1,"grid-cat-edit-btn",3,"click","aria-label"],["width","18","height","18","viewBox","0 0 24 24"],[1,"grid-cat-info"],[1,"grid-cat-name"],[1,"grid-cat-actions"],["type","button",1,"grid-cat-delete-btn",3,"click","aria-label"],["title","Seleziona categoria per filtrare esercizi",1,"grid-cat-checkbox-wrap"],[1,"grid-cat-checkbox"],[1,"grid-cat-placeholder"],["width","46","height","46","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#e0f7eb"],["d","M9 15l3-6 3 6","stroke","#18c879","stroke-width","2","fill","none"],[1,"esercizi-modal"],[1,"esercizi-modal-body"],[1,"modal-message"],[1,"modal-actions"],["type","button",1,"modal-yes",3,"click"],["type","button",1,"modal-no",3,"click"],[1,"image-upload-zone"],[1,"input-image-label"],[1,"icon-image-upload-big"],[4,"ngIf","ngIfElse"],["type","file","accept","image/*",3,"change"],["for","exercise-name",1,"field-label"],["id","exercise-name","type","text","placeholder","Nome esercizio","autocomplete","off",3,"ngModelChange","keydown.enter","ngModel"],["for","exercise-category-auto",1,"field-label"],[1,"single-autocat-wrapper"],["id","exercise-category-auto","type","text","placeholder","Digita almeno 3 caratteri","autocomplete","off",3,"ngModelChange","input","blur","ngModel","ngClass"],["type","button","class","clear-cat-btn","aria-label","Pulisci categoria",3,"mousedown","click",4,"ngIf"],["type","button",1,"modal-yes",3,"click","disabled"],["width","180","height","180","viewBox","0 0 180 180","fill","none"],["x","10","y","10","width","160","height","160","rx","25","fill","#F7FBFF","stroke","#b5d9f8","stroke-width","3"],["x","47","y","125","width","86","height","25","rx","10","fill","#d1eaff"],["x","60","y","99","width","63","height","17","rx","7","fill","#bfe1fc"],["cx","66","cy","67","r","13","fill","#83b4fa"],["x","10","y","10","width","160","height","160","rx","25","stroke","#b5d9f8","stroke-width","3"],["points","36,151 80,92 110,135 144,74 168,130","fill","none","stroke","#5ab0fa","stroke-width","4.5","stroke-linecap","round","stroke-linejoin","round"],["alt","Preview immagine esercizio",1,"image-preview",3,"src"],["type","button","aria-label","Pulisci categoria",1,"clear-cat-btn",3,"mousedown","click"],["for","category-name",1,"field-label"],["id","category-name","type","text","placeholder","Nome categoria","autocomplete","off",3,"ngModelChange","ngModel"],["alt","Preview immagine categoria",1,"image-preview",3,"src"],["for","category-edit-name",1,"field-label"],["id","category-edit-name","type","text","placeholder","Nome categoria","autocomplete","off",3,"ngModelChange","ngModel"]],template:function(i,o){i&1&&(x(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),q(5,"ESERCIZI"),D(),x(6,"button",8),Me("click",function(){return o.openExerciseModal()}),fr(),x(7,"svg",9),bt(8,"rect",10)(9,"rect",11)(10,"rect",12)(11,"rect",13),D()()(),Oo(),bt(12,"div",14),x(13,"div",15)(14,"label",16)(15,"input",17),Xe("ngModelChange",function(a){return Je(o.exerciseSearch,a)||(o.exerciseSearch=a),a}),D()()(),x(16,"div",18),ut(17,ire,11,9,"div",19)(18,ore,2,0,"div",20)(19,sre,2,0,"button",21),D()(),x(20,"div",22)(21,"div",6)(22,"span",7),q(23,"CATEGORIE"),D(),x(24,"button",23),Me("click",function(){return o.openCategoryModal()}),fr(),x(25,"svg",9),bt(26,"path",24)(27,"circle",25),D()()(),Oo(),bt(28,"div",14),x(29,"div",15)(30,"label",26)(31,"input",27),Xe("ngModelChange",function(a){return Je(o.categorySearch,a)||(o.categorySearch=a),a}),D()()(),x(32,"div",28),ut(33,lre,17,8,"div",29)(34,ure,2,0,"div",20)(35,fre,4,1,"div",30),D()()(),ut(36,yre,14,4,"div",31)(37,Ere,13,3,"div",31)(38,Cre,10,0,"div",31)(39,Dre,23,9,"div",31)(40,Nre,18,4,"div",31)(41,Rre,18,4,"div",31),D()),i&2&&(X(15),Qe("ngModel",o.exerciseSearch),X(2),_e("ngForOf",o.filteredExercisesLimited),X(),_e("ngIf",o.filteredExercisesLimited.length===0),X(),_e("ngIf",o.exercises.length>5),X(12),Qe("ngModel",o.categorySearch),X(2),_e("ngForOf",o.filteredCategoriesLimited),X(),_e("ngIf",o.filteredCategoriesLimited.length===0),X(),_e("ngIf",o.categories.length),X(),_e("ngIf",o.showAllExercisesModal),X(),_e("ngIf",o.showAllCategoriesModal),X(),_e("ngIf",o.showDeleteCategoryModal),X(),_e("ngIf",o.showExerciseModal),X(),_e("ngIf",o.showCategoryModal),X(),_e("ngIf",o.showEditCategoryModal))},dependencies:[bf,uo,Lo,ba,rs,_a,Rs],styles:['root[_ngcontent-%COMP%]{--green: #18c879;--green-dark: #138554;--text: #153b56;--card: #fff;--radius: 18px;--shadow-card: 0 2px 12px rgba(36,80,144,.06);--primary: #2563eb}body[_ngcontent-%COMP%]{margin:0;font-family:system-ui,sans-serif;background:#f5f8fc}.esercizi-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f8fc;position:relative;z-index:0}.esercizi-layout[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;gap:52px;max-width:1200px;margin:0 auto;padding-top:30px;position:relative;z-index:0;pointer-events:auto}.esercizi-card[_ngcontent-%COMP%], .categorie-card[_ngcontent-%COMP%]{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow-card);min-width:410px;max-width:520px;width:100%;min-height:260px;display:flex;flex-direction:column;box-sizing:border-box;overflow:hidden;position:relative;z-index:0}.esercizi-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff 89%,#f8fdff)}.categorie-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff 89%,#f8fcfa)}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 26px 0}.section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;letter-spacing:.035em;color:#22416f;flex:1}.top-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e7effd 60%,#dbeafe);border:none;border-radius:50%;width:42px;height:42px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 10px #2563eb11;transition:background .14s,transform .14s}.top-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#bfd8fd 40%,#e8f1ff);transform:scale(1.08)}.section-divider[_ngcontent-%COMP%]{width:calc(100% - 52px);margin:0 26px 10px;height:0;position:relative}.section-divider[_ngcontent-%COMP%]:before{content:"";display:block;height:4px;width:100%;background:linear-gradient(90deg,#dadde2,#ececec);border-radius:3px;box-shadow:0 1.5px 6px #0000000d}.search-bar-wrapper[_ngcontent-%COMP%]{padding:0 26px 4px;box-sizing:border-box;width:100%;position:relative;z-index:0;pointer-events:auto}.search-bar[_ngcontent-%COMP%]{display:block;position:relative;width:100%;height:34px;border:1.7px solid #c9d9ec;border-radius:10px;background:#f7fbff;overflow:hidden;transition:border-color .18s,background-color .18s}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;inset:0;padding:0 12px 0 38px;border:none;background:transparent;font-size:.85rem;font-weight:600;color:#1c3554;outline:none}.exercise-list[_ngcontent-%COMP%], .category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:14px 26px 10px;width:100%;box-sizing:border-box}.card-item[_ngcontent-%COMP%]{width:82%;max-width:82%;margin:0 auto;min-height:118px;background:#fff;border-radius:20px;box-shadow:0 3px 12px #24509014;display:flex;align-items:center;gap:16px;padding:14px 18px;position:relative;box-sizing:border-box}.card-img-wrap[_ngcontent-%COMP%]{width:82px;height:82px;border-radius:18px;background:#f2f6fa;display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;overflow:hidden}.card-img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:74px;max-height:74px;object-fit:contain;display:block}.exercise-placeholder[_ngcontent-%COMP%], .category-placeholder[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center}.exercise-text[_ngcontent-%COMP%]{flex:1 1 0;display:flex;flex-direction:column;justify-content:center}.exercise-name[_ngcontent-%COMP%], .category-name[_ngcontent-%COMP%]{font-size:1.04rem;font-weight:800;color:var(--text);margin:0}.exercise-category[_ngcontent-%COMP%]{font-size:.85rem;font-style:italic;color:#3969b1;margin-top:2px}.exercise-detail-btn[_ngcontent-%COMP%]{position:absolute;right:14px;bottom:14px;font-size:.72rem;font-weight:700;background:var(--primary);color:#fff;border:none;border-radius:6px;padding:5px 14px;cursor:pointer;box-shadow:0 1px 4px #2563eb59;transition:background .15s}.exercise-detail-btn[_ngcontent-%COMP%]:hover{background:#184a9b}.category-row[_ngcontent-%COMP%]{padding-right:70px}.category-controls-destra[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;gap:10px}.category-x-btn2[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4d1d1;color:#db3131;width:26px;height:26px;font-size:1rem;font-weight:700;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .15s,color .15s,border-color .15s}.category-x-btn2[_ngcontent-%COMP%]:hover{background:#db3131;color:#fff;border-color:#db3131}.category-checkbox-wrap[_ngcontent-%COMP%]{width:26px;height:26px;position:relative;display:flex;align-items:center;justify-content:center}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;width:26px;height:26px;margin:0;cursor:pointer}.category-checkbox[_ngcontent-%COMP%]{width:22px;height:22px;border:2px solid var(--primary);border-radius:6px;background:#fff;position:relative;display:block;transition:background .15s,border-color .15s}.category-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:6px;top:3px;width:7px;height:12px;border:solid #fff;border-width:0 2.5px 2.5px 0;transform:rotate(45deg);opacity:0;transition:opacity .15s}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .category-checkbox[_ngcontent-%COMP%]{background:var(--primary);border-color:var(--primary)}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .category-checkbox[_ngcontent-%COMP%]:after{opacity:1}.category-actions-bottom[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:14px;margin:18px 0 10px;flex-wrap:wrap}.reset-categories-btn[_ngcontent-%COMP%]{margin:0;padding:8px 22px;border-radius:12px;border:none;background:#f2fcf7;color:var(--green);font-weight:800;font-size:.78rem;cursor:pointer;letter-spacing:.03em;box-shadow:0 1px 4px #00000014;transition:background .15s,color .15s}.reset-categories-btn[_ngcontent-%COMP%]:hover{background:#e7faee;color:var(--green-dark)}.toggle-categories-btn[_ngcontent-%COMP%]{margin:0;padding:8px 22px;border:none;border-radius:12px;background:#eef3fb;color:#194d9a;font-weight:700;font-size:.78rem;cursor:pointer;letter-spacing:.03em;box-shadow:0 1px 4px #00000014;transition:background .15s,color .15s}.toggle-categories-btn[_ngcontent-%COMP%]:hover{background:#dce9fa;color:#0f356b}.exercise-empty-info[_ngcontent-%COMP%]{font-size:.85rem;color:#6b88b7;text-align:center;background:#e9f3fc;border-radius:10px;padding:10px 8px}.more-btn[_ngcontent-%COMP%]{margin:6px auto 4px;background:#eef3fb;color:#1e3a8a;border:none;border-radius:8px;padding:6px 16px;font-size:.75rem;font-weight:700;cursor:pointer;letter-spacing:.04em;transition:background .15s,color .15s;display:inline-block}.more-btn[_ngcontent-%COMP%]:hover, .more-btn[_ngcontent-%COMP%]:focus{background:#dbe9fb;color:#0f2a63}.esercizi-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:1000}.esercizi-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:26px 22px 22px;box-shadow:0 8px 40px #0000003b;width:92vw;max-width:410px;position:relative}.esercizi-modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.image-upload-zone[_ngcontent-%COMP%]{display:flex;justify-content:center}.input-image-label[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;align-items:center}.input-image-label[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.icon-image-upload-big[_ngcontent-%COMP%]{width:180px;height:180px;display:flex;align-items:center;justify-content:center}.image-preview[_ngcontent-%COMP%]{width:172px;height:172px;border-radius:23px;object-fit:contain;background:#f7fbff;border:2.5px solid #b5d9f8}.field-label[_ngcontent-%COMP%]{font-weight:700;color:#22416f;font-size:.9rem;display:flex;flex-direction:column;gap:4px;position:relative}.field-label[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .field-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:4px;padding:9px 12px;border:1.6px solid #d2e3fa;border-radius:8px;font-size:.92rem;background:#f7fbff;color:#234169;outline:none;transition:border-color .15s,background-color .15s}.field-label[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .field-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:#f2f8ff}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}.modal-yes[_ngcontent-%COMP%], .modal-no[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;padding:7px 18px;border:none;border-radius:8px;cursor:pointer}.modal-yes[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.modal-yes[_ngcontent-%COMP%]:hover{background:#184a9b}.modal-no[_ngcontent-%COMP%]{background:#f2f2f2;color:#22416f}.modal-no[_ngcontent-%COMP%]:hover{background:#e4eaf3}.category-autocomplete-label[_ngcontent-%COMP%]{position:relative}.category-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:4px;display:flex;align-items:center;border:1.6px solid #d2e3fa;border-radius:8px;background:#f7fbff;transition:border-color .15s,background-color .15s}.category-input-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);background:#f2f8ff}.category-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;padding:9px 36px 9px 34px;font-size:.92rem;outline:none;font-weight:600;color:#234169}.search-icon[_ngcontent-%COMP%]{position:absolute;left:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:.9}.clear-cat-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:#eef3fb;color:#22416f;border:none;width:24px;height:24px;font-size:16px;line-height:1;border-radius:6px;cursor:pointer;padding:0;font-weight:700}.category-autocomplete-list[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:calc(100% + 4px);z-index:1100;background:#fff;border:1.3px solid #dbeafe;border-radius:8px;box-shadow:0 4px 18px #002e701a;list-style:none;padding:4px 0;margin:0;max-height:220px;overflow-y:auto;animation:_ngcontent-%COMP%_fadeIn .15s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 14px;font-size:.88rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:6px;color:#173a62;transition:background .13s,color .13s;position:relative}.category-autocomplete-list[_ngcontent-%COMP%]   li.highlighted[_ngcontent-%COMP%], .category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#e6f1fe;color:#0f2f59}.category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.no-suggestions):not(.create-suggestion):before{content:"\\1f50d";font-size:.75rem;opacity:.65}.no-suggestions[_ngcontent-%COMP%]{font-style:italic;color:#5b6e83;justify-content:space-between}.create-suggestion[_ngcontent-%COMP%]{background:#f7fbff;justify-content:center}.inline-create-btn[_ngcontent-%COMP%]{background:#2563eb;border:none;color:#fff;padding:4px 10px;font-size:.7rem;font-weight:700;border-radius:14px;cursor:pointer;letter-spacing:.03em;transition:background .15s}.inline-create-btn[_ngcontent-%COMP%]:hover{background:#184a9b}.inline-create-btn[_ngcontent-%COMP%]:disabled{background:#9db8df;cursor:not-allowed}.grid-modal-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:12px}.grid-modal-title[_ngcontent-%COMP%]{font-size:1.12rem;font-weight:700;color:#163a5d;margin:0;display:flex;align-items:center;gap:12px}.grid-filter-tag[_ngcontent-%COMP%]{font-size:.66rem;font-weight:700;background:#e4f1ff;color:#2563eb;padding:3px 8px;border-radius:999px;letter-spacing:.04em}.grid-close-btn[_ngcontent-%COMP%]{background:#eef3fb;border:none;width:30px;height:30px;border-radius:8px;font-size:1.15rem;font-weight:700;color:#1e3962;cursor:pointer;transition:background .15s,color .15s;line-height:1}.grid-close-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.modal-search-inline[_ngcontent-%COMP%]{margin-bottom:6px}.exercise-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:12px 12px;margin-top:4px}.exercise-grid-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2ecf5;border-radius:12px;padding:8px 8px 9px;display:flex;flex-direction:column;align-items:center;gap:5px;position:relative;box-shadow:0 2px 10px #d6e5f826;transition:box-shadow .15s,transform .15s;min-height:135px}.exercise-grid-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #c6d9f84b;transform:translateY(-2px)}.grid-img[_ngcontent-%COMP%]{width:54px;height:54px;border-radius:10px;background:#f2f7fb;display:flex;align-items:center;justify-content:center;overflow:hidden}.grid-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:50px;max-height:50px;object-fit:contain;display:block}.grid-placeholder[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center}.grid-info[_ngcontent-%COMP%]{width:100%;text-align:center;display:flex;flex-direction:column;gap:0;min-height:32px}.grid-name[_ngcontent-%COMP%]{font-size:.62rem;font-weight:700;color:#163a5d;word-break:break-word;line-height:1.08;max-width:100%}.grid-cat[_ngcontent-%COMP%]{font-size:.5rem;font-weight:600;letter-spacing:.05em;color:#2563eb;opacity:.78}.grid-detail-link[_ngcontent-%COMP%]{margin-top:auto;font-size:.52rem;font-weight:700;background:var(--primary);color:#fff;padding:4px 10px 3px;border-radius:5px;text-decoration:none;letter-spacing:.04em;box-shadow:0 1px 3px #2563eb59;transition:background .15s;align-self:flex-end}.grid-detail-link[_ngcontent-%COMP%]:hover{background:#18397a}.categorie-grid-modal[_ngcontent-%COMP%]{max-width:880px;width:94vw;padding:24px 24px 30px;position:relative}.category-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(115px,1fr));gap:12px 12px;margin-top:4px}.category-grid-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e1ebf3;border-radius:12px;padding:8px 8px 10px;display:flex;flex-direction:column;align-items:center;gap:5px;position:relative;box-shadow:0 2px 10px #d6e5f826;transition:box-shadow .15s,transform .15s;min-height:132px}.category-grid-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #c6d9f84b;transform:translateY(-2px)}.grid-cat-img[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:10px;background:#f2fbf4;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.grid-cat-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:48px;max-height:48px;object-fit:contain;display:block}.grid-cat-placeholder[_ngcontent-%COMP%]{width:34px;height:34px;display:flex;align-items:center;justify-content:center}.grid-cat-edit-btn[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]{position:absolute;bottom:6px;right:6px;width:26px;height:26px;padding:2px;border-radius:50%;border:1px solid #cfe0fb;background:#eaf2ff;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:background .15s,border-color .15s,transform .12s,box-shadow .15s}.grid-cat-edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.grid-cat-edit-btn[_ngcontent-%COMP%]:hover, .category-edit-img-btn[_ngcontent-%COMP%]:hover{background:#2563eb;border-color:#1f56c7;transform:translateY(-1px);box-shadow:0 2px 8px #2563eb59}.grid-cat-edit-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#fff}.grid-cat-info[_ngcontent-%COMP%]{width:100%;text-align:center;display:flex;flex-direction:column;gap:0;min-height:28px}.grid-cat-name[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#163a5d;word-break:break-word;line-height:1.08}.grid-cat-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:auto}.grid-cat-delete-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4d1d1;color:#db3131;width:20px;height:20px;border-radius:50%;font-size:.7rem;font-weight:700;cursor:pointer;transition:background .15s,color .15s,border-color .15s;line-height:1;display:flex;align-items:center;justify-content:center}.grid-cat-delete-btn[_ngcontent-%COMP%]:hover{background:#db3131;color:#fff;border-color:#db3131}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]{width:18px;height:18px;position:relative;display:flex;align-items:center;justify-content:center}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;inset:0;cursor:pointer;margin:0}.grid-cat-checkbox[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #2563eb;border-radius:4px;background:#fff;position:relative;display:block;transition:background .15s,border-color .15s}.grid-cat-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:4px;top:2px;width:4px;height:7px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg);opacity:0;transition:opacity .15s}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .grid-cat-checkbox[_ngcontent-%COMP%]{background:#2563eb;border-color:#2563eb}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .grid-cat-checkbox[_ngcontent-%COMP%]:after{opacity:1}.grid-empty[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;font-size:.72rem;font-weight:600;color:#5c6b80;background:#f1f6fb;border:1px dashed #d2e2f1;padding:14px 12px;border-radius:12px}@media (max-width: 1050px){.esercizi-layout[_ngcontent-%COMP%]{flex-direction:column;gap:32px;padding:24px 8px 44px;max-width:97vw}.esercizi-card[_ngcontent-%COMP%], .categorie-card[_ngcontent-%COMP%]{min-width:0;max-width:100%}.card-item[_ngcontent-%COMP%]{width:88%;max-width:88%}}@media (max-width: 660px){.card-item[_ngcontent-%COMP%]{width:94%!important;max-width:94%!important}}@media (max-width: 620px){.exercise-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:10px 10px}.grid-img[_ngcontent-%COMP%]{width:50px;height:50px}.grid-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:46px;max-height:46px}.category-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:10px 10px}.grid-cat-img[_ngcontent-%COMP%]{width:48px;height:48px}.grid-cat-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:44px;max-height:44px}}@media (max-width: 500px){.card-img-wrap[_ngcontent-%COMP%]{width:64px;height:64px}.card-img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:58px;max-height:58px}.exercise-detail-btn[_ngcontent-%COMP%]{font-size:.68rem;padding:5px 12px;bottom:10px;right:10px}.icon-image-upload-big[_ngcontent-%COMP%]{width:140px;height:140px}.image-preview[_ngcontent-%COMP%]{width:132px;height:132px}}.single-autocat-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:4px;display:flex;align-items:center}.single-autocat-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;border:1.7px solid #d2e3fa;border-radius:8px;padding:10px 34px 10px 15px;font-size:.96rem;background:#f7fbff;color:#2563eb;font-weight:700;outline:none;transition:border-color .17s,background .15s,color .15s}.single-autocat-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#2563eb;background:#f2f8ff}.single-autocat-wrapper[_ngcontent-%COMP%]   input.auto-matched[_ngcontent-%COMP%]{color:#1b533e;background:#e6f9f0}.clear-cat-btn[_ngcontent-%COMP%]{position:absolute;right:7px;top:50%;transform:translateY(-50%);background:#eef3fb;color:#22416f;border:none;width:24px;height:24px;font-size:16px;line-height:1;border-radius:6px;cursor:pointer;padding:0;font-weight:700;transition:background .15s,color .15s}.clear-cat-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}']});let n=e;return n})();var Rx=(()=>{let e=class e{compressAndConvertToBase64(r,i=1e3,o=256){return ee(this,null,function*(){let s=document.createElement("img"),a=new FileReader;return new Promise((c,l)=>{a.onload=u=>{s.onload=()=>{let p=document.createElement("canvas");p.width=o,p.height=o,p.getContext("2d")?.drawImage(s,0,0,p.width,p.height);let g=.8,C=p.toDataURL("image/jpeg",g);for(;C.length/1024>i&&g>.1;)g-=.05,C=p.toDataURL("image/jpeg",g);c(C)},s.onerror=l,s.src=u.target.result},a.onerror=l,a.readAsDataURL(r)})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Lre=n=>({active:n}),Fre=(n,e)=>({active:n,inactive:e}),Vre=n=>["/anagrafica",n];function jre(n,e){if(n&1){let t=Vt();x(0,"div",25)(1,"label"),q(2," Stato: "),x(3,"select",26),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.filterStatus,i)||(o.filterStatus=i),ge(i)}),Me("change",function(){pe(t);let i=ie();return ge(i.applyFilters())}),x(4,"option",27),q(5,"Tutti"),D(),x(6,"option",28),q(7,"Attivo"),D(),x(8,"option",29),q(9,"Inattivo"),D()()(),x(10,"label"),q(11," Email: "),x(12,"select",26),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.filterHasEmail,i)||(o.filterHasEmail=i),ge(i)}),Me("change",function(){pe(t);let i=ie();return ge(i.applyFilters())}),x(13,"option",27),q(14,"Tutte"),D(),x(15,"option",30),q(16,"Solo con email"),D(),x(17,"option",31),q(18,"Solo senza email"),D()()(),x(19,"label"),q(20," Tessera: "),x(21,"select",32),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.filterTessera,i)||(o.filterTessera=i),ge(i)}),Me("change",function(){pe(t);let i=ie();return ge(i.applyFilters())}),x(22,"option",27),q(23,"Tutte"),D(),x(24,"option",33),q(25,"Attive"),D(),x(26,"option",34),q(27,"Scadute"),D()()()()}if(n&2){let t=ie();X(3),Qe("ngModel",t.filterStatus),X(9),Qe("ngModel",t.filterHasEmail),X(9),Qe("ngModel",t.filterTessera)}}function Bre(n,e){if(n&1&&bt(0,"img",50),n&2){let t=ie().$implicit;_e("src",t.avatarUrl,xr)("alt",t.name)}}function Ure(n,e){n&1&&(x(0,"span",51),q(1,"person"),D())}function zre(n,e){if(n&1&&(x(0,"tr")(1,"td",35)(2,"div",36)(3,"div",37),ut(4,Bre,1,2,"img",38)(5,Ure,2,0,"ng-template",null,0,ns),D(),x(7,"div",39)(8,"div",40),q(9),D()()()(),x(10,"td",41)(11,"span",42)(12,"span",43),q(13,"event"),D(),q(14),D()(),x(15,"td",44)(16,"span",45),q(17),D()(),x(18,"td",46)(19,"div",47)(20,"span",48),q(21),D()()(),x(22,"td")(23,"a",49)(24,"span",12),q(25,"visibility"),D()()()()),n&2){let t=e.$implicit,r=Ci(6);X(4),_e("ngIf",t.avatarUrl)("ngIfElse",r),X(5),Kt(t.name),X(5),Yr(" ",t.signupDate," "),X(3),Kt(t.email),X(3),_e("ngClass",L0(10,Fre,t.status==="Attivo",t.status!=="Attivo")),X(),Kt(t.status),X(2),qa("aria-label",Pc("Dettaglio ",t.name)),_e("routerLink",kc(13,Vre,t.id))}}function qre(n,e){if(n&1){let t=Vt();x(0,"div",52),Me("click",function(){pe(t);let i=ie();return ge(i.closeModal())}),D()}}function $re(n,e){if(n&1&&(co(0),bt(1,"img",91),lo()),n&2){let t=ie(2);X(),_e("src",t.form.avatar,xr)}}function Hre(n,e){if(n&1){let t=Vt();x(0,"button",92),Me("click",function(){pe(t),ie();let i=Ci(8),o=ie();return ge(o.triggerAvatarInput(i))}),x(1,"span",93),q(2,"photo_camera"),D()()}}function Wre(n,e){n&1&&(x(0,"div",94),q(1," Caricamento immagine in corso... "),D())}function Gre(n,e){if(n&1){let t=Vt();x(0,"div",53)(1,"form",54,1),Me("ngSubmit",function(){pe(t);let i=ie();return ge(i.registerUser())})("click",function(i){return pe(t),ge(i.stopPropagation())}),x(3,"h2"),q(4,"Registra Cliente"),D(),x(5,"div",55)(6,"div",56)(7,"input",57,2),Me("change",function(i){pe(t);let o=ie();return ge(o.onAvatarChange(i))}),D(),ut(9,$re,2,1,"ng-container",58)(10,Hre,3,0,"ng-template",null,3,ns),D(),ut(12,Wre,2,0,"div",59),D(),x(13,"div",60)(14,"div",61)(15,"div",62)(16,"label",63),q(17,"Nome"),D(),x(18,"input",64),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.nome,i)||(o.form.nome=i),ge(i)}),D()(),x(19,"div",62)(20,"label",63),q(21,"Cognome"),D(),x(22,"input",65),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.cognome,i)||(o.form.cognome=i),ge(i)}),D()()(),x(23,"div",61)(24,"div",62)(25,"label",63),q(26,"Email"),D(),x(27,"input",66),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.emailModal,i)||(o.form.emailModal=i),ge(i)}),D()(),x(28,"div",62)(29,"label",63),q(30,"Numero di Telefono"),D(),x(31,"input",67),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.phone,i)||(o.form.phone=i),ge(i)}),D()()(),x(32,"div",61)(33,"div",62)(34,"label",68)(35,"span",43),q(36,"event"),D(),q(37," Data Iscrizione"),D(),x(38,"input",69),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.signupDateModal,i)||(o.form.signupDateModal=i),ge(i)}),D()(),x(39,"div",70)(40,"label",71),q(41,"-"),D(),x(42,"div",72)(43,"label",73)(44,"input",74),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.isActive,i)||(o.form.isActive=i),ge(i)}),D(),bt(45,"span",75),D(),x(46,"span",76),q(47),D()()()(),x(48,"div",61)(49,"div",62)(50,"label",63),q(51,"Scadenza Tessera"),D(),x(52,"input",77),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.tesseraEnd,i)||(o.form.tesseraEnd=i),ge(i)}),D()(),x(53,"div",62)(54,"label",63),q(55,"Data di nascita"),D(),x(56,"input",78),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.birthDate,i)||(o.form.birthDate=i),ge(i)}),D()()(),x(57,"div",61)(58,"div",62)(59,"label",63),q(60,"Genere"),D(),x(61,"select",79),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.gender,i)||(o.form.gender=i),ge(i)}),x(62,"option",27),q(63,"-"),D(),x(64,"option",80),q(65,"Uomo"),D(),x(66,"option",81),q(67,"Donna"),D(),x(68,"option",82),q(69,"Altro"),D()()(),x(70,"div",62)(71,"label",63),q(72,"Indirizzo"),D(),x(73,"input",83),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.address,i)||(o.form.address=i),ge(i)}),D()()(),x(74,"div",61)(75,"div",62)(76,"label",63),q(77,"Citt\xE0"),D(),x(78,"input",84),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.city,i)||(o.form.city=i),ge(i)}),D()(),x(79,"div",62)(80,"label",63),q(81,"CAP"),D(),x(82,"input",85),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.cap,i)||(o.form.cap=i),ge(i)}),D()()(),x(83,"div",61)(84,"div",86)(85,"label",63),q(86,"Note personali"),D(),x(87,"textarea",87),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.personalNotes,i)||(o.form.personalNotes=i),ge(i)}),D()()()(),x(88,"div",88)(89,"button",89),Me("click",function(){pe(t);let i=ie();return ge(i.closeModal())}),q(90,"Annulla"),D(),x(91,"button",90),q(92," Registra Cliente "),D()()()()}if(n&2){let t=Ci(2),r=Ci(11),i=ie();X(9),_e("ngIf",i.form.avatar)("ngIfElse",r),X(3),_e("ngIf",i.avatarLoading),X(6),Qe("ngModel",i.form.nome),X(4),Qe("ngModel",i.form.cognome),X(5),Qe("ngModel",i.form.emailModal),X(4),Qe("ngModel",i.form.phone),X(7),Qe("ngModel",i.form.signupDateModal),X(6),Qe("ngModel",i.form.isActive),X(2),va("active",i.form.isActive)("inactive",!i.form.isActive),X(),Kt(i.form.isActive?"Attivo":"Inattivo"),X(5),Qe("ngModel",i.form.tesseraEnd),X(4),Qe("ngModel",i.form.birthDate),X(5),Qe("ngModel",i.form.gender),X(12),Qe("ngModel",i.form.address),X(5),Qe("ngModel",i.form.city),X(4),Qe("ngModel",i.form.cap),X(5),Qe("ngModel",i.form.personalNotes),X(4),_e("disabled",t.invalid||i.avatarLoading)}}var Fj=(()=>{let e=class e{constructor(r,i){this.userService=r,this.imageService=i,this.searchTerm="",this.showFilters=!1,this.filterStatus="",this.filterHasEmail="",this.filterTessera="",this.users=[],this.filteredUsers=[],this.modalOpen=!1,this.today=new Date().toISOString().slice(0,10),this.form={avatar:"",avatarFile:null,nome:"",cognome:"",emailModal:"",phone:"",signupDateModal:"",isActive:!0,birthDate:"",gender:"",address:"",city:"",cap:"",personalNotes:"",tesseraEnd:""},this.avatarLoading=!1}ngOnInit(){this.usersSub=this.userService.getAll$().subscribe(r=>{this.users=r||[],this.applyFilters()})}ngOnDestroy(){this.usersSub?.unsubscribe()}openModal(){this.modalOpen=!0,this.form={avatar:"",avatarFile:null,nome:"",cognome:"",emailModal:"",phone:"",signupDateModal:"",isActive:!0,birthDate:"",gender:"",address:"",city:"",cap:"",personalNotes:"",tesseraEnd:""}}closeModal(){this.modalOpen=!1}onSearchChange(){this.applyFilters()}toggleFilters(){this.showFilters=!this.showFilters}applyFilters(){let r=[...this.users];if(this.searchTerm){let i=this.searchTerm.toLowerCase();r=r.filter(o=>o.name?.toLowerCase().includes(i)||o.email?.toLowerCase().includes(i))}this.filterStatus&&(r=r.filter(i=>i.status===this.filterStatus)),this.filterHasEmail==="with"?r=r.filter(i=>i.email&&i.email!==""):this.filterHasEmail==="without"&&(r=r.filter(i=>!i.email||i.email==="")),this.filterTessera==="attiva"?r=r.filter(i=>i.tesseraEnd&&i.tesseraEnd>this.today):this.filterTessera==="scaduta"&&(r=r.filter(i=>i.tesseraEnd&&i.tesseraEnd<=this.today)),this.filteredUsers=r}onAvatarChange(r){return ee(this,null,function*(){let i=r.target.files[0];i&&(this.avatarLoading=!0,this.form.avatarFile=i,this.form.avatar=yield this.imageService.compressAndConvertToBase64(i,1e3,256),this.avatarLoading=!1)})}triggerAvatarInput(r){r.click()}registerUser(){return ee(this,null,function*(){this.avatarLoading=!0;let r=this.form.isActive?"Attivo":"Inattivo",i={name:`${this.form.nome} ${this.form.cognome}`.trim(),email:this.form.emailModal,phone:this.form.phone,signupDate:this.form.signupDateModal||new Date().toISOString().slice(0,10),avatarUrl:this.form.avatar,status:r,birthDate:this.form.birthDate,gender:this.form.gender,address:this.form.address,city:this.form.city,cap:this.form.cap,personalNotes:this.form.personalNotes,tesseraEnd:this.form.tesseraEnd,cards:[]};this.userService.add(i).then(()=>{this.avatarLoading=!1,this.closeModal()}).catch(o=>{this.avatarLoading=!1,alert("Errore nel salvataggio: "+o.message)})})}};e.\u0275fac=function(i){return new(i||e)(it(rm),it(Rx))},e.\u0275cmp=Pr({type:e,selectors:[["app-anagrafica"]],standalone:!1,decls:38,vars:8,consts:[["defaultAvatarRow",""],["modalForm","ngForm"],["avatarInput",""],["showIcon",""],[1,"anagrafica-utenti-layout"],[1,"anagrafica-content","align-left"],[1,"actions-header","responsive-header"],[1,"btn","primary",3,"click"],[1,"header-controls"],[1,"searchbar"],["type","text","placeholder","Cerca...",3,"ngModelChange","input","ngModel"],["title","Cerca",1,"icon-btn",3,"click"],[1,"material-icons"],["title","Filtri",1,"icon-btn",3,"click","ngClass"],["class","filters-panel",4,"ngIf"],[1,"table-outer-center"],[1,"user-table"],[2,"width","30%"],[2,"width","16%"],[2,"width","13%"],[2,"width","12%"],[1,"align-left"],[4,"ngFor","ngForOf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-nuovo-utente",4,"ngIf"],[1,"filters-panel"],[3,"ngModelChange","change","ngModel"],["value",""],["value","Attivo"],["value","Inattivo"],["value","with"],["value","without"],[1,"tessera-select",3,"ngModelChange","change","ngModel"],["value","attiva"],["value","scaduta"],[1,"user-cell"],[1,"user-card-row"],[1,"user-avatar"],["class","avatar-img",3,"src","alt",4,"ngIf","ngIfElse"],[1,"user-info-main"],[1,"user-name"],[1,"user-signup"],[1,"user-date"],[1,"material-icons","calendar-icon"],[1,"user-email-table"],[1,"user-email"],[1,"user-status-actions"],[1,"status-action-flex","left-align"],[1,"status-label",3,"ngClass"],["title","Dettaglio",1,"icon-btn",3,"aria-label","routerLink"],[1,"avatar-img",3,"src","alt"],[1,"avatar-placeholder","material-icons"],[1,"modal-backdrop",3,"click"],[1,"modal-nuovo-utente"],[1,"modal-form",3,"ngSubmit","click"],[1,"avatar-modal-section"],[1,"avatar-upload-box"],["type","file","accept","image/*","hidden","",3,"change"],[4,"ngIf","ngIfElse"],["class","avatar-loader","style","margin-left:15px;color:#888;",4,"ngIf"],[1,"modal-fields","modal-fields-2col"],[1,"modal-form-row"],[1,"form-group"],[1,"field-label"],["type","text","placeholder","Nome","name","nome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Cognome","name","cognome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","emailModal","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Numero di Telefono","name","phone",3,"ngModelChange","ngModel"],[1,"field-label","flex-label","calendar-label"],["type","date","name","signupDateModal",3,"ngModelChange","ngModel"],[1,"form-group","form-group-switch"],[1,"field-label",2,"opacity","0","user-select","none"],[1,"modal-stato-switch"],[1,"switch"],["type","checkbox","name","isActive",3,"ngModelChange","ngModel"],[1,"slider"],[1,"modal-stato"],["type","date","name","tesseraEnd",3,"ngModelChange","ngModel"],["type","date","name","birthDate",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value","Uomo"],["value","Donna"],["value","Altro"],["type","text","name","address","placeholder","Indirizzo",3,"ngModelChange","ngModel"],["type","text","name","city","placeholder","Citt\xE0",3,"ngModelChange","ngModel"],["type","text","name","cap","placeholder","CAP",3,"ngModelChange","ngModel"],[1,"form-group",2,"flex","1"],["placeholder","Note personali","name","personalNotes",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button",1,"btn","cancel",3,"click"],["type","submit",1,"btn","primary",3,"disabled"],["alt","Avatar",1,"avatar-img-preview",3,"src"],["type","button",1,"avatar-add-btn",3,"click"],[1,"material-icons","avatar-add"],[1,"avatar-loader",2,"margin-left","15px","color","#888"]],template:function(i,o){i&1&&(x(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),Me("click",function(){return o.openModal()}),q(4,"Cliente"),D(),x(5,"div",8)(6,"div",9)(7,"input",10),Xe("ngModelChange",function(a){return Je(o.searchTerm,a)||(o.searchTerm=a),a}),Me("input",function(){return o.onSearchChange()}),D(),x(8,"button",11),Me("click",function(){return o.onSearchChange()}),x(9,"span",12),q(10,"search"),D()(),x(11,"button",13),Me("click",function(){return o.toggleFilters()}),x(12,"span",12),q(13,"filter_list"),D()()(),ut(14,jre,28,3,"div",14),D()(),x(15,"div",15)(16,"table",16)(17,"colgroup"),bt(18,"col",17)(19,"col",18)(20,"col",18)(21,"col",19)(22,"col",20),D(),x(23,"thead")(24,"tr")(25,"th",21),q(26,"Cliente"),D(),x(27,"th",21),q(28,"Data Iscrizione"),D(),x(29,"th",21),q(30,"Email"),D(),x(31,"th",21),q(32,"Stato"),D(),bt(33,"th"),D()(),x(34,"tbody"),ut(35,zre,26,15,"tr",22),D()()(),ut(36,qre,1,0,"div",23)(37,Gre,93,22,"div",24),D()()),i&2&&(X(7),Qe("ngModel",o.searchTerm),X(4),_e("ngClass",kc(6,Lre,o.showFilters)),X(3),_e("ngIf",o.showFilters),X(21),_e("ngForOf",o.filteredUsers),X(),_e("ngIf",o.modalOpen),X(),_e("ngIf",o.modalOpen))},dependencies:[bf,uo,Lo,ba,Rp,Oc,Lc,rs,Ef,wa,_a,kp,If,Rs,Cf],styles:['[_ngcontent-%COMP%]:root{--primary: #2563eb;--primary-hover: #194fd6;--bg: #f5f8fc;--panel-bg: #ffffff;--panel-shadow: 0 2px 12px rgba(36,80,144,.06);--radius: 10px;--text: #143559}.anagrafica-utenti-layout[_ngcontent-%COMP%]{background:#f6f8fa;min-height:100vh;font-family:Segoe UI,Arial,sans-serif;width:100%;box-sizing:border-box}.anagrafica-content.align-left[_ngcontent-%COMP%]{max-width:1200px;margin:36px auto 40px;padding:0 24px}.actions-header.responsive-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;align-items:center;gap:18px;margin-bottom:22px}.header-controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;position:relative;gap:18px}.searchbar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f8fafd;border-radius:9px;padding:6px 10px;gap:4px;min-width:220px;max-width:360px;width:100%;height:38px;box-shadow:0 0 4px #365fd014;border:1px solid #dae2ec;transition:border-color .18s,box-shadow .18s}.searchbar[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);box-shadow:0 0 0 3px #2563eb1c}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;font-size:.92rem;font-weight:500;padding:4px 6px 4px 2px;width:100%;color:#242f42}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:6px 7px;border-radius:8px;transition:background .13s;display:flex;align-items:center;margin-left:0}.icon-btn[_ngcontent-%COMP%]:hover, .icon-btn[_ngcontent-%COMP%]:focus{background:#eaeef6}.icon-btn.active[_ngcontent-%COMP%]{background:#e0edfd}.material-icons[_ngcontent-%COMP%], .icon-font[_ngcontent-%COMP%]{font-family:Material Icons,Segoe UI Symbol,Arial,sans-serif;font-style:normal;font-weight:400;font-size:22px;display:inline-block;line-height:1;color:var(--primary);vertical-align:middle;letter-spacing:normal;text-transform:none;direction:ltr;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.filters-panel[_ngcontent-%COMP%]{background:#f6fafd;border:1px solid #e1e7f0;border-radius:8px;box-shadow:0 2px 8px #c7d5e333;padding:12px 14px;display:flex;flex-direction:row;gap:20px;align-items:center;z-index:20;position:absolute;top:calc(100% + 8px);right:0;max-width:440px}.filters-panel[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.93rem;color:#232e47;display:flex;align-items:center;gap:7px;font-weight:600;margin-bottom:0}.filters-panel[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #b9c4d4;padding:6px 11px;font-size:.99rem;color:#1e2846;background:#fff;outline:none;margin-left:4px;font-weight:500;transition:border-color .18s}.filters-panel[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.tessera-select[_ngcontent-%COMP%]   option[value=attiva][_ngcontent-%COMP%]{color:#318b2b}.tessera-select[_ngcontent-%COMP%]   option[value=scaduta][_ngcontent-%COMP%]{color:#d32f2f}.table-outer-center[_ngcontent-%COMP%]{display:block;margin-top:14px}.user-table[_ngcontent-%COMP%]{background:#fff;box-shadow:0 5px 35px #d3dbe925;border-spacing:0;border-radius:13px;width:100%;table-layout:fixed;overflow:hidden}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px;font-size:.95rem;background:#fff;vertical-align:middle;word-break:break-word;text-align:left;height:52px}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fbfc;font-weight:700;color:#232e47;border-bottom:2px solid #ececf0}.user-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f1f2f7}.user-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.user-cell[_ngcontent-%COMP%]{vertical-align:middle;padding-top:6px;padding-bottom:6px}.user-card-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;min-height:41px}.user-avatar[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center}.avatar-img[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:41px;height:41px;border-radius:12px;background:#dbe3ef;display:flex;align-items:center;justify-content:center;font-size:22px;color:#b4bed0;object-fit:cover}.user-info-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;min-width:0;width:100%}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#143559;font-size:1.06rem;line-height:1.15}.user-date[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--primary);font-size:.83rem;gap:6px;font-weight:600}.calendar-icon[_ngcontent-%COMP%]{font-size:18px;color:#2177e8}.user-email[_ngcontent-%COMP%]{color:#5f6c7e;font-size:.83rem;word-break:break-all}.user-status-actions[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.status-action-flex.left-align[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.status-label[_ngcontent-%COMP%]{font-weight:600;border-radius:7px;padding:6px 16px;font-size:.83rem;min-width:72px;text-align:center}.status-label.active[_ngcontent-%COMP%]{color:#14b452;background:#e8faee}.status-label.inactive[_ngcontent-%COMP%]{color:#e76c6c;background:#fde8e8}.user-tessera-status[_ngcontent-%COMP%]   .badge-danger[_ngcontent-%COMP%]{color:#d32f2f;background:#fbecec;padding:2px 11px;border-radius:7px;font-weight:700}.user-tessera-status[_ngcontent-%COMP%]   .badge-success[_ngcontent-%COMP%]{color:#318b2b;background:#e9fbe8;padding:2px 11px;border-radius:7px;font-weight:700}.user-tessera-status[_ngcontent-%COMP%]   .badge-neutral[_ngcontent-%COMP%]{color:#888;background:#f0f1f3;padding:2px 11px;border-radius:7px;font-weight:700}a.icon-btn[_ngcontent-%COMP%]{text-decoration:none!important}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:1010;inset:0;background:#17334b33}.modal-nuovo-utente[_ngcontent-%COMP%]{position:fixed;z-index:1020;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:20px;box-shadow:0 6px 32px #21407a33,0 1.5px 3px #21407a29;min-width:380px;max-width:520px;width:96vw;padding:26px 20px 18px;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalpop .18s cubic-bezier(.32,1.56,.66,1)}.modal-form[_ngcontent-%COMP%]{width:100%}.modal-nuovo-utente[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;color:#232e47;margin:0 0 18px;text-align:center}.avatar-modal-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:18px;margin-top:4px}.avatar-upload-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.avatar-add-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0}.avatar-add[_ngcontent-%COMP%]{font-size:34px}.avatar-img-preview[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;object-fit:cover;display:block}.modal-fields-2col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:100%}.modal-form-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:28px;width:100%;margin-bottom:22px}.form-group[_ngcontent-%COMP%]{flex:1 0 0;min-width:0;display:flex;flex-direction:column}.form-group-switch[_ngcontent-%COMP%]{justify-content:flex-end;align-items:flex-end}.modal-fields-2col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-fields-2col[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.9rem;border-radius:7px;border:1.4px solid #d6d9e0;padding:10px 9px;outline:none;background:#f8fafc;color:#223555;transition:border-color .15s,background-color .15s;width:100%}.modal-fields-2col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-fields-2col[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:#f2f7ff}.field-label[_ngcontent-%COMP%]{font-size:.83rem;font-weight:600;color:#1e2a3e;margin:4px 0 6px 1px;letter-spacing:.02em;text-transform:uppercase}.flex-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.modal-stato-switch[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.modal-stato[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:#21af5a;min-width:55px;text-align:right}.modal-stato.inactive[_ngcontent-%COMP%]{color:#e36e6e}.switch[_ngcontent-%COMP%]{display:inline-block;width:48px;height:26px;position:relative}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;inset:0;background:#e4e9f1;border-radius:26px;transition:.2s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#22c55e}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:4px;bottom:3px;border-radius:50%;background:#fff;box-shadow:0 1px 4px #6366f13a;transition:.19s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(20px)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:4px}.btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 15px;border-radius:9px;font-size:.85rem;font-weight:600;cursor:pointer;transition:background .16s}.btn[_ngcontent-%COMP%]:hover{background:var(--primary-hover)}.btn.cancel[_ngcontent-%COMP%]{background:#eef3fb;color:#1e3a8a}.btn.cancel[_ngcontent-%COMP%]:hover{background:#e1ebfb}@keyframes _ngcontent-%COMP%_modalpop{0%{transform:translate(-50%,-53%) scale(.97)}to{transform:translate(-50%,-50%) scale(1)}}@media (max-width: 900px){.actions-header.responsive-header[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:14px}.header-controls[_ngcontent-%COMP%]{justify-content:flex-start}.searchbar[_ngcontent-%COMP%]{max-width:280px}.modal-form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}}@media (max-width: 600px){.searchbar[_ngcontent-%COMP%]{max-width:100%}.filters-panel[_ngcontent-%COMP%]{max-width:98vw}.card-item[_ngcontent-%COMP%]{width:90%}.modal-nuovo-utente[_ngcontent-%COMP%]{min-width:300px}}@media (max-width: 420px){.searchbar[_ngcontent-%COMP%]{min-width:100%;height:36px}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:.84rem}.icon-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}}']});let n=e;return n})();var Kre=n=>["/anagrafica",n];function Yre(n,e){if(n&1){let t=Vt();x(0,"button",33),Me("click",function(){pe(t);let i=ie().$implicit,o=ie();return ge(o.openWhatsApp(i.phone,i.name,i.subscriptionEnd))}),x(1,"span",34),q(2,"chat"),D()()}}function Zre(n,e){n&1&&(x(0,"span",35),q(1,"Abbonamento scaduto"),D())}function Qre(n,e){n&1&&(x(0,"span",35),q(1,"Scheda scaduta"),D())}function Xre(n,e){n&1&&(x(0,"span",36),q(1,"Scheda attiva"),D())}function Jre(n,e){if(n&1&&(x(0,"div",24)(1,"div",25)(2,"div",26),q(3),D(),x(4,"div",27),q(5),D(),ut(6,Yre,3,0,"button",28)(7,Zre,2,0,"span",29)(8,Qre,2,0,"span",29)(9,Xre,2,0,"span",30),D(),x(10,"div",31)(11,"a",32),q(12,"Dettaglio"),D()()()),n&2){let t=e.$implicit,r=ie();X(3),Kt(t.name),X(2),Kt(t.email),X(),_e("ngIf",t.phone&&t.subscriptionEnd),X(),_e("ngIf",t.subscriptionEnd&&t.subscriptionEnd<r.today),X(),_e("ngIf",t.schedaEnd&&r.filterScheda==="scaduta"&&t.schedaEnd<=r.today),X(),_e("ngIf",t.schedaEnd&&r.filterScheda==="attiva"&&t.schedaEnd>r.today),X(2),_e("routerLink",kc(7,Kre,t.id))}}function eie(n,e){if(n&1){let t=Vt();x(0,"div",37),Me("click",function(){pe(t);let i=ie();return ge(i.closeModal())}),D()}}function tie(n,e){if(n&1){let t=Vt();x(0,"div",38)(1,"form",39,0),Me("ngSubmit",function(){pe(t);let i=ie();return ge(i.registerUser())})("click",function(i){return pe(t),ge(i.stopPropagation())}),x(3,"h2"),q(4,"Registra Cliente"),D(),x(5,"div",40)(6,"div",41)(7,"div",42)(8,"label",43),q(9,"Nome"),D(),x(10,"input",44),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.nome,i)||(o.form.nome=i),ge(i)}),D()(),x(11,"div",42)(12,"label",43),q(13,"Cognome"),D(),x(14,"input",45),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.cognome,i)||(o.form.cognome=i),ge(i)}),D()()(),x(15,"div",41)(16,"div",42)(17,"label",43),q(18,"Email"),D(),x(19,"input",46),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.email,i)||(o.form.email=i),ge(i)}),D()(),x(20,"div",42)(21,"label",43),q(22,"Numero di Telefono"),D(),x(23,"input",47),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.phone,i)||(o.form.phone=i),ge(i)}),D()()(),x(24,"div",41)(25,"div",42)(26,"label",43),q(27,"Data Iscrizione"),D(),x(28,"input",48),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.signupDate,i)||(o.form.signupDate=i),ge(i)}),D()(),x(29,"div",42)(30,"label",43),q(31,"Stato"),D(),x(32,"select",49),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.status,i)||(o.form.status=i),ge(i)}),x(33,"option",9),q(34,"-"),D(),x(35,"option",50),q(36,"Attivo"),D(),x(37,"option",51),q(38,"Inattivo"),D()()()(),x(39,"div",41)(40,"div",42)(41,"label",43),q(42,"Indirizzo"),D(),x(43,"input",52),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.address,i)||(o.form.address=i),ge(i)}),D()(),x(44,"div",42)(45,"label",43),q(46,"Citt\xE0"),D(),x(47,"input",53),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.city,i)||(o.form.city=i),ge(i)}),D()()(),x(48,"div",41)(49,"div",42)(50,"label",43),q(51,"Provincia"),D(),x(52,"input",54),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.provincia,i)||(o.form.provincia=i),ge(i)}),D()(),x(53,"div",42)(54,"label",43),q(55,"CAP"),D(),x(56,"input",55),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.cap,i)||(o.form.cap=i),ge(i)}),D()()(),x(57,"div",41)(58,"div",42)(59,"label",43),q(60,"Data di nascita"),D(),x(61,"input",56),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.birthDate,i)||(o.form.birthDate=i),ge(i)}),D()(),x(62,"div",42)(63,"label",43),q(64,"Genere"),D(),x(65,"select",57),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.gender,i)||(o.form.gender=i),ge(i)}),x(66,"option",9),q(67,"-"),D(),x(68,"option",58),q(69,"Uomo"),D(),x(70,"option",59),q(71,"Donna"),D(),x(72,"option",60),q(73,"Altro"),D()()()(),x(74,"div",41)(75,"div",42)(76,"label",43),q(77,"Scadenza Abbonamento"),D(),x(78,"input",61),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.subscriptionEnd,i)||(o.form.subscriptionEnd=i),ge(i)}),D()(),x(79,"div",42)(80,"label",43),q(81,"Scadenza Scheda"),D(),x(82,"input",62),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.schedaEnd,i)||(o.form.schedaEnd=i),ge(i)}),D()()(),x(83,"div",41)(84,"div",63)(85,"label",43),q(86,"Note personali"),D(),x(87,"textarea",64),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.form.personalNotes,i)||(o.form.personalNotes=i),ge(i)}),D()()()(),x(88,"div",65)(89,"button",66),Me("click",function(){pe(t);let i=ie();return ge(i.closeModal())}),q(90,"Annulla"),D(),x(91,"button",67),q(92,"Registra Cliente"),D()()()()}if(n&2){let t=Ci(2),r=ie();X(10),Qe("ngModel",r.form.nome),X(4),Qe("ngModel",r.form.cognome),X(5),Qe("ngModel",r.form.email),X(4),Qe("ngModel",r.form.phone),X(5),Qe("ngModel",r.form.signupDate),X(4),Qe("ngModel",r.form.status),X(11),Qe("ngModel",r.form.address),X(4),Qe("ngModel",r.form.city),X(5),Qe("ngModel",r.form.provincia),X(4),Qe("ngModel",r.form.cap),X(5),Qe("ngModel",r.form.birthDate),X(4),Qe("ngModel",r.form.gender),X(13),Qe("ngModel",r.form.subscriptionEnd),X(4),Qe("ngModel",r.form.schedaEnd),X(5),Qe("ngModel",r.form.personalNotes),X(4),_e("disabled",t.invalid)}}var Vj=(()=>{let e=class e{constructor(r){this.userService=r,this.users=[],this.filteredUsers=[],this.filterExpiredOnly=!1,this.filterTessera="",this.filterScheda="",this.today=new Date().toISOString().substring(0,10),this.modalOpen=!1,this.form={nome:"",cognome:"",email:"",phone:"",signupDate:"",status:"",address:"",city:"",provincia:"",cap:"",birthDate:"",gender:"",subscriptionEnd:"",schedaEnd:"",personalNotes:""}}ngOnInit(){return ee(this,null,function*(){let r=yield this.userService.getAll();this.users=r.sort((i,o)=>{let s=i.subscriptionEnd&&i.subscriptionEnd<=this.today,a=o.subscriptionEnd&&o.subscriptionEnd<=this.today;return s&&!a?-1:!s&&a?1:0}),this.applyFilters()})}applyFilters(){let r=[...this.users];this.filterExpiredOnly&&(r=r.filter(i=>i.subscriptionEnd&&i.subscriptionEnd<=this.today)),this.filterTessera==="attiva"?r=r.filter(i=>i.schedaEnd&&i.schedaEnd>this.today):this.filterTessera==="scaduta"&&(r=r.filter(i=>i.schedaEnd&&i.schedaEnd<=this.today)),this.filterScheda==="scaduta"?r=r.filter(i=>i.schedaEnd&&i.schedaEnd<=this.today):this.filterScheda==="attiva"&&(r=r.filter(i=>i.schedaEnd&&i.schedaEnd>this.today)),this.filteredUsers=r}openModal(){this.modalOpen=!0}closeModal(){this.modalOpen=!1}openWhatsApp(r,i,o){let s=`Ciao ${i}, il tuo abbonamento scade il ${o}!`,a=`https://wa.me/${r.replace(/\D/g,"")}?text=${encodeURIComponent(s)}`;window.open(a,"_blank")}registerUser(){return ee(this,null,function*(){let r={name:`${this.form.nome} ${this.form.cognome}`.trim(),email:this.form.email,phone:this.form.phone,signupDate:this.form.signupDate||new Date().toISOString().slice(0,10),status:this.form.status,address:this.form.address,city:this.form.city,provincia:this.form.provincia,cap:this.form.cap,birthDate:this.form.birthDate,gender:this.form.gender,subscriptionEnd:this.form.subscriptionEnd,schedaEnd:this.form.schedaEnd,personalNotes:this.form.personalNotes};yield this.userService.add(r),this.modalOpen=!1,this.users.unshift(r),this.applyFilters()})}};e.\u0275fac=function(i){return new(i||e)(it(rm))},e.\u0275cmp=Pr({type:e,selectors:[["app-anagrafica-list"]],standalone:!1,decls:38,vars:8,consts:[["modalForm","ngForm"],[1,"page","anagrafica-list"],[2,"display","flex","gap","20px","margin-bottom","15px"],[1,"btn","primary",3,"click"],[2,"display","inline-block"],["type","checkbox",3,"ngModelChange","change","ngModel"],[2,"display","flex","align-items","center","gap","12px"],[2,"font-size","1rem","font-weight","400"],[1,"tessera-combo",3,"ngModelChange","change","ngModel"],["value",""],["value","attiva"],["value","scaduta"],[2,"display","flex","align-items","center","gap","9px"],[2,"display","inline-flex","align-items","center","gap","6px"],["type","radio","name","scheda","value","scaduta",3,"ngModelChange","change","ngModel"],[2,"color","#d32f2f"],["type","radio","name","scheda","value","attiva",3,"ngModelChange","change","ngModel"],[2,"color","#318b2b"],["type","radio","name","scheda","value","",3,"ngModelChange","change","ngModel"],[2,"color","#333"],[1,"list"],["class","row",4,"ngFor","ngForOf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-nuovo-utente",4,"ngIf"],[1,"row"],[1,"left"],[1,"name"],[1,"email"],["class","icon-btn wa-btn","style","margin-left:12px","title","Invia messaggio WhatsApp",3,"click",4,"ngIf"],["class","badge badge-danger","style","margin-left:8px;",4,"ngIf"],["class","badge badge-success","style","margin-left:8px;",4,"ngIf"],[1,"actions"],[1,"btn","small",3,"routerLink"],["title","Invia messaggio WhatsApp",1,"icon-btn","wa-btn",2,"margin-left","12px",3,"click"],[1,"material-icons",2,"color","#25d366"],[1,"badge","badge-danger",2,"margin-left","8px"],[1,"badge","badge-success",2,"margin-left","8px"],[1,"modal-backdrop",3,"click"],[1,"modal-nuovo-utente"],[1,"modal-form",3,"ngSubmit","click"],[1,"modal-fields","modal-fields-2col"],[1,"modal-form-row"],[1,"form-group"],[1,"field-label"],["type","text","placeholder","Nome","name","nome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Cognome","name","cognome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","email","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Numero di Telefono","name","phone",3,"ngModelChange","ngModel"],["type","date","name","signupDate",3,"ngModelChange","ngModel"],["name","status",3,"ngModelChange","ngModel"],["value","Attivo"],["value","Inattivo"],["type","text","placeholder","Indirizzo","name","address",3,"ngModelChange","ngModel"],["type","text","placeholder","Citt\xE0","name","city",3,"ngModelChange","ngModel"],["type","text","placeholder","Provincia","name","provincia",3,"ngModelChange","ngModel"],["type","text","placeholder","CAP","name","cap",3,"ngModelChange","ngModel"],["type","date","name","birthDate",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value","Uomo"],["value","Donna"],["value","Altro"],["type","date","name","subscriptionEnd",3,"ngModelChange","ngModel"],["type","date","name","schedaEnd",3,"ngModelChange","ngModel"],[1,"form-group",2,"flex","1"],["placeholder","Note personali","name","personalNotes",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button",1,"btn","cancel",3,"click"],["type","submit",1,"btn","primary",3,"disabled"]],template:function(i,o){i&1&&(x(0,"div",1)(1,"h2"),q(2,"Lista Utenti"),D(),x(3,"div",2)(4,"button",3),Me("click",function(){return o.openModal()}),q(5,"Cliente"),D(),x(6,"label",4)(7,"input",5),Xe("ngModelChange",function(a){return Je(o.filterExpiredOnly,a)||(o.filterExpiredOnly=a),a}),Me("change",function(){return o.applyFilters()}),D(),q(8," Solo abbonamento scaduto "),D(),x(9,"div",6)(10,"span",7),q(11,"Tessera:"),D(),x(12,"select",8),Xe("ngModelChange",function(a){return Je(o.filterTessera,a)||(o.filterTessera=a),a}),Me("change",function(){return o.applyFilters()}),x(13,"option",9),q(14,"Tutte"),D(),x(15,"option",10),q(16,"Attive"),D(),x(17,"option",11),q(18,"Scadute"),D()()(),x(19,"div",12)(20,"span",7),q(21,"Scheda:"),D(),x(22,"label",13)(23,"input",14),Xe("ngModelChange",function(a){return Je(o.filterScheda,a)||(o.filterScheda=a),a}),Me("change",function(){return o.applyFilters()}),D(),x(24,"span",15),q(25,"Scaduta"),D()(),x(26,"label",13)(27,"input",16),Xe("ngModelChange",function(a){return Je(o.filterScheda,a)||(o.filterScheda=a),a}),Me("change",function(){return o.applyFilters()}),D(),x(28,"span",17),q(29,"Attiva"),D()(),x(30,"label",13)(31,"input",18),Xe("ngModelChange",function(a){return Je(o.filterScheda,a)||(o.filterScheda=a),a}),Me("change",function(){return o.applyFilters()}),D(),x(32,"span",19),q(33,"Tutte"),D()()()(),x(34,"div",20),ut(35,Jre,13,9,"div",21),D(),ut(36,eie,1,0,"div",22)(37,tie,93,16,"div",23),D()),i&2&&(X(7),Qe("ngModel",o.filterExpiredOnly),X(5),Qe("ngModel",o.filterTessera),X(11),Qe("ngModel",o.filterScheda),X(4),Qe("ngModel",o.filterScheda),X(4),Qe("ngModel",o.filterScheda),X(4),_e("ngForOf",o.filteredUsers),X(),_e("ngIf",o.modalOpen),X(),_e("ngIf",o.modalOpen))},dependencies:[uo,Lo,ba,Rp,Oc,Lc,rs,Ef,wa,mA,_a,kp,If,Rs,Cf],styles:[".anagrafica-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin-top:12px}.anagrafica-list[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;padding:12px;border-radius:8px;margin-bottom:10px}.anagrafica-list[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600}.anagrafica-list[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--muted);font-size:13px}.btn.small[_ngcontent-%COMP%]{padding:6px 8px}.anagrafica-list[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400;font-size:15px}.anagrafica-list[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .anagrafica-list[_ngcontent-%COMP%]   select.tessera-combo[_ngcontent-%COMP%]{accent-color:#1742b0;margin-right:6px;margin-left:3px;vertical-align:middle}.anagrafica-list[_ngcontent-%COMP%]   .tessera-combo[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #b9c4d4;padding:5px 9px;font-size:15px;background:#fff;color:#1742b0;font-weight:500;min-width:75px;margin-left:8px;margin-right:6px;vertical-align:middle}.anagrafica-list[_ngcontent-%COMP%]   .filter-bar[_ngcontent-%COMP%]{display:flex;gap:18px;align-items:center;margin-bottom:15px}.anagrafica-list[_ngcontent-%COMP%]   .filter-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}"]});let n=e;return n})();function Vn(n){"@babel/helpers - typeof";return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(n)}var ic=Uint8Array,Hs=Uint16Array,MN=Int32Array,NN=new ic([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),PN=new ic([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jj=new ic([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qj=function(n,e){for(var t=new Hs(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new MN(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},$j=qj(NN,2),nie=$j.b,AN=$j.r;nie[28]=258,AN[258]=28;var Hj=qj(PN,0),mTe=Hj.b,Bj=Hj.r,DN=new Hs(32768);for(Pn=0;Pn<32768;++Pn)Ql=(Pn&43690)>>1|(Pn&21845)<<1,Ql=(Ql&52428)>>2|(Ql&13107)<<2,Ql=(Ql&61680)>>4|(Ql&3855)<<4,DN[Pn]=((Ql&65280)>>8|(Ql&255)<<8)>>1;var Ql,Pn,Ny=function(n,e,t){for(var r=n.length,i=0,o=new Hs(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new Hs(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new Hs(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],u=e-n[i],p=s[n[i]-1]++<<u,m=p|(1<<u)-1;p<=m;++p)a[DN[p]>>c]=l}else for(a=new Hs(r),i=0;i<r;++i)n[i]&&(a[i]=DN[s[n[i]-1]++]>>15-n[i]);return a},fh=new ic(288);for(Pn=0;Pn<144;++Pn)fh[Pn]=8;var Pn;for(Pn=144;Pn<256;++Pn)fh[Pn]=9;var Pn;for(Pn=256;Pn<280;++Pn)fh[Pn]=7;var Pn;for(Pn=280;Pn<288;++Pn)fh[Pn]=8;var Pn,Ox=new ic(32);for(Pn=0;Pn<32;++Pn)Ox[Pn]=5;var Pn,rie=Ny(fh,9,0);var iie=Ny(Ox,5,0);var Wj=function(n){return(n+7)/8|0},oie=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new ic(n.subarray(e,t))};var Xl=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Ty=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},SN=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:Kj,l:0};if(i==1){var s=new ic(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(ae,me){return ae.f-me.f}),t.push({s:-1,f:25001});var a=t[0],c=t[1],l=0,u=1,p=2;for(t[0]={s:-1,f:a.f+c.f,l:a,r:c};u!=i-1;)a=t[t[l].f<t[p].f?l++:p++],c=t[l!=u&&t[l].f<t[p].f?l++:p++],t[u++]={s:-1,f:a.f+c.f,l:a,r:c};for(var m=o[0].s,r=1;r<i;++r)o[r].s>m&&(m=o[r].s);var g=new Hs(m+1),C=TN(t[u-1],g,0);if(C>e){var r=0,I=0,N=C-e,P=1<<N;for(o.sort(function(me,z){return g[z.s]-g[me.s]||me.f-z.f});r<i;++r){var Q=o[r].s;if(g[Q]>e)I+=P-(1<<C-g[Q]),g[Q]=e;else break}for(I>>=N;I>0;){var j=o[r].s;g[j]<e?I-=1<<e-g[j]++-1:++r}for(;r>=0&&I;--r){var W=o[r].s;g[W]==e&&(--g[W],++I)}C=e}return{t:new ic(g),l:C}},TN=function(n,e,t){return n.s==-1?Math.max(TN(n.l,e,t+1),TN(n.r,e,t+1)):e[n.s]=t},Uj=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Hs(++e),r=0,i=n[0],o=1,s=function(c){t[r++]=c},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},My=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Gj=function(n,e,t){var r=t.length,i=Wj(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},zj=function(n,e,t,r,i,o,s,a,c,l,u){Xl(e,u++,t),++i[256];for(var p=SN(i,15),m=p.t,g=p.l,C=SN(o,15),I=C.t,N=C.l,P=Uj(m),Q=P.c,j=P.n,W=Uj(I),ae=W.c,me=W.n,z=new Hs(19),M=0;M<Q.length;++M)++z[Q[M]&31];for(var M=0;M<ae.length;++M)++z[ae[M]&31];for(var S=SN(z,7),V=S.t,b=S.l,A=19;A>4&&!V[jj[A-1]];--A);var T=l+5<<3,te=My(i,fh)+My(o,Ox)+s,be=My(i,m)+My(o,I)+s+14+3*A+My(z,V)+2*z[16]+3*z[17]+7*z[18];if(c>=0&&T<=te&&T<=be)return Gj(e,u,n.subarray(c,c+l));var De,Ae,he,Te;if(Xl(e,u,1+(be<te)),u+=2,be<te){De=Ny(m,g,0),Ae=m,he=Ny(I,N,0),Te=I;var Ge=Ny(V,b,0);Xl(e,u,j-257),Xl(e,u+5,me-1),Xl(e,u+10,A-4),u+=14;for(var M=0;M<A;++M)Xl(e,u+3*M,V[jj[M]]);u+=3*A;for(var Le=[Q,ae],L=0;L<2;++L)for(var G=Le[L],M=0;M<G.length;++M){var J=G[M]&31;Xl(e,u,Ge[J]),u+=V[J],J>15&&(Xl(e,u,G[M]>>5&127),u+=G[M]>>12)}}else De=rie,Ae=fh,he=iie,Te=Ox;for(var M=0;M<a;++M){var re=r[M];if(re>255){var J=re>>18&31;Ty(e,u,De[J+257]),u+=Ae[J+257],J>7&&(Xl(e,u,re>>23&31),u+=NN[J]);var oe=re&31;Ty(e,u,he[oe]),u+=Te[oe],oe>3&&(Ty(e,u,re>>5&8191),u+=PN[oe])}else Ty(e,u,De[re]),u+=Ae[re]}return Ty(e,u,De[256]),u+Ae[256]},sie=new MN([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Kj=new ic(0),aie=function(n,e,t,r,i,o){var s=o.z||n.length,a=new ic(r+s+5*(1+Math.ceil(s/7e3))+i),c=a.subarray(r,a.length-i),l=o.l,u=(o.r||0)&7;if(e){u&&(c[0]=o.r>>3);for(var p=sie[e-1],m=p>>13,g=p&8191,C=(1<<t)-1,I=o.p||new Hs(32768),N=o.h||new Hs(C+1),P=Math.ceil(t/3),Q=2*P,j=function(st){return(n[st]^n[st+1]<<P^n[st+2]<<Q)&C},W=new MN(25e3),ae=new Hs(288),me=new Hs(32),z=0,M=0,S=o.i||0,V=0,b=o.w||0,A=0;S+2<s;++S){var T=j(S),te=S&32767,be=N[T];if(I[te]=be,N[T]=te,b<=S){var De=s-S;if((z>7e3||V>24576)&&(De>423||!l)){u=zj(n,c,0,W,ae,me,M,V,A,S-A,u),V=z=M=0,A=S;for(var Ae=0;Ae<286;++Ae)ae[Ae]=0;for(var Ae=0;Ae<30;++Ae)me[Ae]=0}var he=2,Te=0,Ge=g,Le=te-be&32767;if(De>2&&T==j(S-Le))for(var L=Math.min(m,De)-1,G=Math.min(32767,S),J=Math.min(258,De);Le<=G&&--Ge&&te!=be;){if(n[S+he]==n[S+he-Le]){for(var re=0;re<J&&n[S+re]==n[S+re-Le];++re);if(re>he){if(he=re,Te=Le,re>L)break;for(var oe=Math.min(Le,re-2),ue=0,Ae=0;Ae<oe;++Ae){var xe=S-Le+Ae&32767,Ie=I[xe],Pe=xe-Ie&32767;Pe>ue&&(ue=Pe,be=xe)}}}te=be,be=I[te],Le+=te-be&32767}if(Te){W[V++]=268435456|AN[he]<<18|Bj[Te];var $e=AN[he]&31,et=Bj[Te]&31;M+=NN[$e]+PN[et],++ae[257+$e],++me[et],b=S+he,++z}else W[V++]=n[S],++ae[n[S]]}}for(S=Math.max(S,b);S<s;++S)W[V++]=n[S],++ae[n[S]];u=zj(n,c,l,W,ae,me,M,V,A,S-A,u),l||(o.r=u&7|c[u/8|0]<<3,u-=7,o.h=N,o.p=I,o.i=S,o.w=b)}else{for(var S=o.w||0;S<s+l;S+=65535){var He=S+65535;He>=s&&(c[u/8|0]=l,He=s),u=Gj(c,u+1,n.subarray(S,He))}o.i=s}return oie(a,0,r+Wj(u)+i)};var Yj=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},cie=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new ic(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return aie(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)};var Zj=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var lie=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=Yj();i.p(e.dictionary),Zj(n,2,i.d())}};function Lx(n,e){e||(e={});var t=Yj();t.p(n);var r=cie(n,e,e.dictionary?6:2,4);return lie(r,e),Zj(r,r.length-4,t.d()),r}var uie=typeof TextDecoder<"u"&&new TextDecoder,die=0;try{uie.decode(Kj,{stream:!0}),die=1}catch{}function Qj(n){if(Array.isArray(n))return n}function Xj(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function kN(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Jj(n,e){if(n){if(typeof n=="string")return kN(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?kN(n,e):void 0}}function eB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RN(n,e){return Qj(n)||Xj(n,e)||Jj(n,e)||eB()}function ON(n,e="utf8"){return new TextDecoder(e).decode(n)}var fie=new TextEncoder;function tB(n){return fie.encode(n)}var hie=1024*8,pie=(()=>{let n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),LN={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},Py=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=hie,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);let i=t.offset?t.offset>>>0:0,o=e.byteLength-i,s=i;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){let r=LN[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===pie&&t!=="uint8"&&t!=="int8"){let a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();let c=new LN[t](a.buffer);return this.offset+=r,c.reverse(),c}let s=new LN[t](o);return this.offset+=r,s}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return ON(this.readBytes(e))}decodeText(e=1,t="utf8"){return ON(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(tB(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function lm(n){let e=n.length;for(;--e>=0;)n[e]=0}var gie=0,BB=1,mie=2,vie=3,yie=258,sP=29,Gy=256,jy=Gy+1+sP,sm=30,aP=19,UB=2*jy+1,hh=15,FN=16,_ie=7,cP=256,zB=16,qB=17,$B=18,QN=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),zx=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),wie=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),HB=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bie=512,eu=new Array((jy+2)*2);lm(eu);var Ly=new Array(sm*2);lm(Ly);var By=new Array(bie);lm(By);var Uy=new Array(yie-vie+1);lm(Uy);var lP=new Array(sP);lm(lP);var qx=new Array(sm);lm(qx);function VN(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var WB,GB,KB;function jN(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var YB=n=>n<256?By[n]:By[256+(n>>>7)],zy=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},ls=(n,e,t)=>{n.bi_valid>FN-t?(n.bi_buf|=e<<n.bi_valid&65535,zy(n,n.bi_buf),n.bi_buf=e>>FN-n.bi_valid,n.bi_valid+=t-FN):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},nl=(n,e,t)=>{ls(n,t[e*2],t[e*2+1])},ZB=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},xie=n=>{n.bi_valid===16?(zy(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},Eie=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,u,p,m,g,C,I=0;for(m=0;m<=hh;m++)n.bl_count[m]=0;for(t[n.heap[n.heap_max]*2+1]=0,l=n.heap_max+1;l<UB;l++)u=n.heap[l],m=t[t[u*2+1]*2+1]+1,m>c&&(m=c,I++),t[u*2+1]=m,!(u>r)&&(n.bl_count[m]++,g=0,u>=a&&(g=s[u-a]),C=t[u*2],n.opt_len+=C*(m+g),o&&(n.static_len+=C*(i[u*2+1]+g)));if(I!==0){do{for(m=c-1;n.bl_count[m]===0;)m--;n.bl_count[m]--,n.bl_count[m+1]+=2,n.bl_count[c]--,I-=2}while(I>0);for(m=c;m!==0;m--)for(u=n.bl_count[m];u!==0;)p=n.heap[--l],!(p>r)&&(t[p*2+1]!==m&&(n.opt_len+=(m-t[p*2+1])*t[p*2],t[p*2+1]=m),u--)}},QB=(n,e,t)=>{let r=new Array(hh+1),i=0,o,s;for(o=1;o<=hh;o++)i=i+t[o-1]<<1,r[o]=i;for(s=0;s<=e;s++){let a=n[s*2+1];a!==0&&(n[s*2]=ZB(r[a]++,a))}},Cie=()=>{let n,e,t,r,i,o=new Array(hh+1);for(t=0,r=0;r<sP-1;r++)for(lP[r]=t,n=0;n<1<<QN[r];n++)Uy[t++]=r;for(Uy[t-1]=r,i=0,r=0;r<16;r++)for(qx[r]=i,n=0;n<1<<zx[r];n++)By[i++]=r;for(i>>=7;r<sm;r++)for(qx[r]=i<<7,n=0;n<1<<zx[r]-7;n++)By[256+i++]=r;for(e=0;e<=hh;e++)o[e]=0;for(n=0;n<=143;)eu[n*2+1]=8,n++,o[8]++;for(;n<=255;)eu[n*2+1]=9,n++,o[9]++;for(;n<=279;)eu[n*2+1]=7,n++,o[7]++;for(;n<=287;)eu[n*2+1]=8,n++,o[8]++;for(QB(eu,jy+1,o),n=0;n<sm;n++)Ly[n*2+1]=5,Ly[n*2]=ZB(n,5);WB=new VN(eu,QN,Gy+1,jy,hh),GB=new VN(Ly,zx,0,sm,hh),KB=new VN(new Array(0),wie,0,aP,_ie)},XB=n=>{let e;for(e=0;e<jy;e++)n.dyn_ltree[e*2]=0;for(e=0;e<sm;e++)n.dyn_dtree[e*2]=0;for(e=0;e<aP;e++)n.bl_tree[e*2]=0;n.dyn_ltree[cP*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},JB=n=>{n.bi_valid>8?zy(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},nB=(n,e,t,r)=>{let i=e*2,o=t*2;return n[i]<n[o]||n[i]===n[o]&&r[e]<=r[t]},BN=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&nB(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!nB(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},rB=(n,e,t)=>{let r,i,o=0,s,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+o++]&255,r+=(n.pending_buf[n.sym_buf+o++]&255)<<8,i=n.pending_buf[n.sym_buf+o++],r===0?nl(n,i,e):(s=Uy[i],nl(n,s+Gy+1,e),a=QN[s],a!==0&&(i-=lP[s],ls(n,i,a)),r--,s=YB(r),nl(n,s,t),a=zx[s],a!==0&&(r-=qx[s],ls(n,r,a)));while(o<n.sym_next);nl(n,cP,e)},XN=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,c=-1,l;for(n.heap_len=0,n.heap_max=UB,s=0;s<o;s++)t[s*2]!==0?(n.heap[++n.heap_len]=c=s,n.depth[s]=0):t[s*2+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,t[l*2]=1,n.depth[l]=0,n.opt_len--,i&&(n.static_len-=r[l*2+1]);for(e.max_code=c,s=n.heap_len>>1;s>=1;s--)BN(n,t,s);l=o;do s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],BN(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=a,t[l*2]=t[s*2]+t[a*2],n.depth[l]=(n.depth[s]>=n.depth[a]?n.depth[s]:n.depth[a])+1,t[s*2+1]=t[a*2+1]=l,n.heap[1]=l++,BN(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],Eie(n,e),QB(t,c,n.bl_count)},iB=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)&&(a<l?n.bl_tree[o*2]+=a:o!==0?(o!==i&&n.bl_tree[o*2]++,n.bl_tree[zB*2]++):a<=10?n.bl_tree[qB*2]++:n.bl_tree[$B*2]++,a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},oB=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),r=0;r<=t;r++)if(o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)){if(a<l)do nl(n,o,n.bl_tree);while(--a!==0);else o!==0?(o!==i&&(nl(n,o,n.bl_tree),a--),nl(n,zB,n.bl_tree),ls(n,a-3,2)):a<=10?(nl(n,qB,n.bl_tree),ls(n,a-3,3)):(nl(n,$B,n.bl_tree),ls(n,a-11,7));a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}},Iie=n=>{let e;for(iB(n,n.dyn_ltree,n.l_desc.max_code),iB(n,n.dyn_dtree,n.d_desc.max_code),XN(n,n.bl_desc),e=aP-1;e>=3&&n.bl_tree[HB[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},Sie=(n,e,t,r)=>{let i;for(ls(n,e-257,5),ls(n,t-1,5),ls(n,r-4,4),i=0;i<r;i++)ls(n,n.bl_tree[HB[i]*2+1],3);oB(n,n.dyn_ltree,e-1),oB(n,n.dyn_dtree,t-1)},Aie=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<Gy;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},sB=!1,Die=n=>{sB||(Cie(),sB=!0),n.l_desc=new jN(n.dyn_ltree,WB),n.d_desc=new jN(n.dyn_dtree,GB),n.bl_desc=new jN(n.bl_tree,KB),n.bi_buf=0,n.bi_valid=0,XB(n)},eU=(n,e,t,r)=>{ls(n,(gie<<1)+(r?1:0),3),JB(n),zy(n,t),zy(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},Tie=n=>{ls(n,BB<<1,3),nl(n,cP,eu),xie(n)},Mie=(n,e,t,r)=>{let i,o,s=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=Aie(n)),XN(n,n.l_desc),XN(n,n.d_desc),s=Iie(n),i=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?eU(n,e,t,r):n.strategy===4||o===i?(ls(n,(BB<<1)+(r?1:0),3),rB(n,eu,Ly)):(ls(n,(mie<<1)+(r?1:0),3),Sie(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),rB(n,n.dyn_ltree,n.dyn_dtree)),XB(n),r&&JB(n)},Nie=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(Uy[t]+Gy+1)*2]++,n.dyn_dtree[YB(e)*2]++),n.sym_next===n.sym_end),Pie=Die,kie=eU,Rie=Mie,Oie=Nie,Lie=Tie,Fie={_tr_init:Pie,_tr_stored_block:kie,_tr_flush_block:Rie,_tr_tally:Oie,_tr_align:Lie},Vie=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0},qy=Vie,jie=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},Bie=new Uint32Array(jie()),Uie=(n,e,t,r)=>{let i=Bie,o=r+t;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1},Li=Uie,mh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},um={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:zie,_tr_stored_block:JN,_tr_flush_block:qie,_tr_tally:Nd,_tr_align:$ie}=Fie,{Z_NO_FLUSH:Pd,Z_PARTIAL_FLUSH:Hie,Z_FULL_FLUSH:Wie,Z_FINISH:Ea,Z_BLOCK:aB,Z_OK:Qi,Z_STREAM_END:cB,Z_STREAM_ERROR:rl,Z_DATA_ERROR:Gie,Z_BUF_ERROR:UN,Z_DEFAULT_COMPRESSION:Kie,Z_FILTERED:Yie,Z_HUFFMAN_ONLY:Fx,Z_RLE:Zie,Z_FIXED:Qie,Z_DEFAULT_STRATEGY:Xie,Z_UNKNOWN:Jie,Z_DEFLATED:Wx}=um,eoe=9,toe=15,noe=8,roe=29,ioe=256,eP=ioe+1+roe,ooe=30,soe=19,aoe=2*eP+1,coe=15,En=3,Md=258,il=Md+En+1,loe=32,am=42,uP=57,tP=69,nP=73,rP=91,iP=103,ph=113,Ry=666,qo=1,dm=2,vh=3,fm=4,uoe=3,gh=(n,e)=>(n.msg=mh[e],e),lB=n=>n*2-(n>4?9:0),Td=n=>{let e=n.length;for(;--e>=0;)n[e]=0},doe=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},foe=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,kd=foe,Ws=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},Gs=(n,e)=>{qie(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,Ws(n.strm)},kn=(n,e)=>{n.pending_buf[n.pending++]=e},ky=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},oP=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=qy(n.adler,e,i,t):n.state.wrap===2&&(n.adler=Li(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},tU=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,o,s=n.prev_length,a=n.nice_match,c=n.strstart>n.w_size-il?n.strstart-(n.w_size-il):0,l=n.window,u=n.w_mask,p=n.prev,m=n.strstart+Md,g=l[r+s-1],C=l[r+s];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(l[i+s]!==C||l[i+s-1]!==g||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<m);if(o=Md-(m-r),r=m-Md,o>s){if(n.match_start=e,s=o,o>=a)break;g=l[r+s-1],C=l[r+s]}}while((e=p[e&u])>c&&--t!==0);return s<=n.lookahead?s:n.lookahead},cm=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-il)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),doe(n),r+=e),n.strm.avail_in===0)break;if(t=oP(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=En)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=kd(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=kd(n,n.ins_h,n.window[i+En-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<En)););}while(n.lookahead<il&&n.strm.avail_in!==0)},nU=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,o,s=0,a=n.strm.avail_in;do{if(r=65535,o=n.bi_valid+42>>3,n.strm.avail_out<o||(o=n.strm.avail_out-o,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>o&&(r=o),r<t&&(r===0&&e!==Ea||e===Pd||r!==i+n.strm.avail_in)))break;s=e===Ea&&r===i+n.strm.avail_in?1:0,JN(n,0,0,s),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,Ws(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(oP(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(s===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),s?fm:e!==Pd&&e!==Ea&&n.strm.avail_in===0&&n.strstart===n.block_start?dm:(o=n.window_size-n.strstart,n.strm.avail_in>o&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,o+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),o>n.strm.avail_in&&(o=n.strm.avail_in),o&&(oP(n.strm,n.window,n.strstart,o),n.strstart+=o,n.insert+=o>n.w_size-n.insert?n.w_size-n.insert:o),n.high_water<n.strstart&&(n.high_water=n.strstart),o=n.bi_valid+42>>3,o=n.pending_buf_size-o>65535?65535:n.pending_buf_size-o,t=o>n.w_size?n.w_size:o,i=n.strstart-n.block_start,(i>=t||(i||e===Ea)&&e!==Pd&&n.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,s=e===Ea&&n.strm.avail_in===0&&r===i?1:0,JN(n,n.block_start,r,s),n.block_start+=r,Ws(n.strm)),s?vh:qo)},zN=(n,e)=>{let t,r;for(;;){if(n.lookahead<il){if(cm(n),n.lookahead<il&&e===Pd)return qo;if(n.lookahead===0)break}if(t=0,n.lookahead>=En&&(n.ins_h=kd(n,n.ins_h,n.window[n.strstart+En-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-il&&(n.match_length=tU(n,t)),n.match_length>=En)if(r=Nd(n,n.strstart-n.match_start,n.match_length-En),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=En){n.match_length--;do n.strstart++,n.ins_h=kd(n,n.ins_h,n.window[n.strstart+En-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=kd(n,n.ins_h,n.window[n.strstart+1]);else r=Nd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(Gs(n,!1),n.strm.avail_out===0))return qo}return n.insert=n.strstart<En-1?n.strstart:En-1,e===Ea?(Gs(n,!0),n.strm.avail_out===0?vh:fm):n.sym_next&&(Gs(n,!1),n.strm.avail_out===0)?qo:dm},im=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<il){if(cm(n),n.lookahead<il&&e===Pd)return qo;if(n.lookahead===0)break}if(t=0,n.lookahead>=En&&(n.ins_h=kd(n,n.ins_h,n.window[n.strstart+En-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=En-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-il&&(n.match_length=tU(n,t),n.match_length<=5&&(n.strategy===Yie||n.match_length===En&&n.strstart-n.match_start>4096)&&(n.match_length=En-1)),n.prev_length>=En&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-En,r=Nd(n,n.strstart-1-n.prev_match,n.prev_length-En),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=kd(n,n.ins_h,n.window[n.strstart+En-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=En-1,n.strstart++,r&&(Gs(n,!1),n.strm.avail_out===0))return qo}else if(n.match_available){if(r=Nd(n,0,n.window[n.strstart-1]),r&&Gs(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return qo}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=Nd(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<En-1?n.strstart:En-1,e===Ea?(Gs(n,!0),n.strm.avail_out===0?vh:fm):n.sym_next&&(Gs(n,!1),n.strm.avail_out===0)?qo:dm},hoe=(n,e)=>{let t,r,i,o,s=n.window;for(;;){if(n.lookahead<=Md){if(cm(n),n.lookahead<=Md&&e===Pd)return qo;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=En&&n.strstart>0&&(i=n.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=n.strstart+Md;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);n.match_length=Md-(o-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=En?(t=Nd(n,1,n.match_length-En),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=Nd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(Gs(n,!1),n.strm.avail_out===0))return qo}return n.insert=0,e===Ea?(Gs(n,!0),n.strm.avail_out===0?vh:fm):n.sym_next&&(Gs(n,!1),n.strm.avail_out===0)?qo:dm},poe=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(cm(n),n.lookahead===0)){if(e===Pd)return qo;break}if(n.match_length=0,t=Nd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(Gs(n,!1),n.strm.avail_out===0))return qo}return n.insert=0,e===Ea?(Gs(n,!0),n.strm.avail_out===0?vh:fm):n.sym_next&&(Gs(n,!1),n.strm.avail_out===0)?qo:dm};function tl(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var Oy=[new tl(0,0,0,0,nU),new tl(4,4,8,4,zN),new tl(4,5,16,8,zN),new tl(4,6,32,32,zN),new tl(4,4,16,16,im),new tl(8,16,32,32,im),new tl(8,16,128,128,im),new tl(8,32,128,256,im),new tl(32,128,258,1024,im),new tl(32,258,258,4096,im)],goe=n=>{n.window_size=2*n.w_size,Td(n.head),n.max_lazy_match=Oy[n.level].max_lazy,n.good_match=Oy[n.level].good_length,n.nice_match=Oy[n.level].nice_length,n.max_chain_length=Oy[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=En-1,n.match_available=0,n.ins_h=0};function moe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Wx,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(aoe*2),this.dyn_dtree=new Uint16Array((2*ooe+1)*2),this.bl_tree=new Uint16Array((2*soe+1)*2),Td(this.dyn_ltree),Td(this.dyn_dtree),Td(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(coe+1),this.heap=new Uint16Array(2*eP+1),Td(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*eP+1),Td(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ky=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==am&&e.status!==uP&&e.status!==tP&&e.status!==nP&&e.status!==rP&&e.status!==iP&&e.status!==ph&&e.status!==Ry?1:0},rU=n=>{if(Ky(n))return gh(n,rl);n.total_in=n.total_out=0,n.data_type=Jie;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?uP:e.wrap?am:ph,n.adler=e.wrap===2?0:1,e.last_flush=-2,zie(e),Qi},iU=n=>{let e=rU(n);return e===Qi&&goe(n.state),e},voe=(n,e)=>Ky(n)||n.state.wrap!==2?rl:(n.state.gzhead=e,Qi),oU=(n,e,t,r,i,o)=>{if(!n)return rl;let s=1;if(e===Kie&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>eoe||t!==Wx||r<8||r>15||e<0||e>9||o<0||o>Qie||r===8&&s!==1)return gh(n,rl);r===8&&(r=9);let a=new moe;return n.state=a,a.strm=n,a.status=am,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+En-1)/En),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=t,iU(n)},yoe=(n,e)=>oU(n,e,Wx,toe,noe,Xie),_oe=(n,e)=>{if(Ky(n)||e>aB||e<0)return n?gh(n,rl):rl;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===Ry&&e!==Ea)return gh(n,n.avail_out===0?UN:rl);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(Ws(n),n.avail_out===0)return t.last_flush=-1,Qi}else if(n.avail_in===0&&lB(e)<=lB(r)&&e!==Ea)return gh(n,UN);if(t.status===Ry&&n.avail_in!==0)return gh(n,UN);if(t.status===am&&t.wrap===0&&(t.status=ph),t.status===am){let i=Wx+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=Fx||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,i|=o<<6,t.strstart!==0&&(i|=loe),i+=31-i%31,ky(t,i),t.strstart!==0&&(ky(t,n.adler>>>16),ky(t,n.adler&65535)),n.adler=1,t.status=ph,Ws(n),t.pending!==0)return t.last_flush=-1,Qi}if(t.status===uP){if(n.adler=0,kn(t,31),kn(t,139),kn(t,8),t.gzhead)kn(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),kn(t,t.gzhead.time&255),kn(t,t.gzhead.time>>8&255),kn(t,t.gzhead.time>>16&255),kn(t,t.gzhead.time>>24&255),kn(t,t.level===9?2:t.strategy>=Fx||t.level<2?4:0),kn(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(kn(t,t.gzhead.extra.length&255),kn(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=Li(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=tP;else if(kn(t,0),kn(t,0),kn(t,0),kn(t,0),kn(t,0),kn(t,t.level===9?2:t.strategy>=Fx||t.level<2?4:0),kn(t,uoe),t.status=ph,Ws(n),t.pending!==0)return t.last_flush=-1,Qi}if(t.status===tP){if(t.gzhead.extra){let i=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=Li(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,Ws(n),t.pending!==0)return t.last_flush=-1,Qi;i=0,o-=a}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>i&&(n.adler=Li(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=nP}if(t.status===nP){if(t.gzhead.name){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Li(n.adler,t.pending_buf,t.pending-i,i)),Ws(n),t.pending!==0)return t.last_flush=-1,Qi;i=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,kn(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Li(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=rP}if(t.status===rP){if(t.gzhead.comment){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Li(n.adler,t.pending_buf,t.pending-i,i)),Ws(n),t.pending!==0)return t.last_flush=-1,Qi;i=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,kn(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Li(n.adler,t.pending_buf,t.pending-i,i))}t.status=iP}if(t.status===iP){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Ws(n),t.pending!==0))return t.last_flush=-1,Qi;kn(t,n.adler&255),kn(t,n.adler>>8&255),n.adler=0}if(t.status=ph,Ws(n),t.pending!==0)return t.last_flush=-1,Qi}if(n.avail_in!==0||t.lookahead!==0||e!==Pd&&t.status!==Ry){let i=t.level===0?nU(t,e):t.strategy===Fx?poe(t,e):t.strategy===Zie?hoe(t,e):Oy[t.level].func(t,e);if((i===vh||i===fm)&&(t.status=Ry),i===qo||i===vh)return n.avail_out===0&&(t.last_flush=-1),Qi;if(i===dm&&(e===Hie?$ie(t):e!==aB&&(JN(t,0,0,!1),e===Wie&&(Td(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Ws(n),n.avail_out===0))return t.last_flush=-1,Qi}return e!==Ea?Qi:t.wrap<=0?cB:(t.wrap===2?(kn(t,n.adler&255),kn(t,n.adler>>8&255),kn(t,n.adler>>16&255),kn(t,n.adler>>24&255),kn(t,n.total_in&255),kn(t,n.total_in>>8&255),kn(t,n.total_in>>16&255),kn(t,n.total_in>>24&255)):(ky(t,n.adler>>>16),ky(t,n.adler&65535)),Ws(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Qi:cB)},woe=n=>{if(Ky(n))return rl;let e=n.state.status;return n.state=null,e===ph?gh(n,Gie):Qi},boe=(n,e)=>{let t=e.length;if(Ky(n))return rl;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==am||r.lookahead)return rl;if(i===1&&(n.adler=qy(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Td(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(t-r.w_size,t),0),e=c,t=r.w_size}let o=n.avail_in,s=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,cm(r);r.lookahead>=En;){let c=r.strstart,l=r.lookahead-(En-1);do r.ins_h=kd(r,r.ins_h,r.window[c+En-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=En-1,cm(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=En-1,r.match_available=0,n.next_in=s,n.input=a,n.avail_in=o,r.wrap=i,Qi},xoe=yoe,Eoe=oU,Coe=iU,Ioe=rU,Soe=voe,Aoe=_oe,Doe=woe,Toe=boe,Moe="pako deflate (from Nodeca project)",Fy={deflateInit:xoe,deflateInit2:Eoe,deflateReset:Coe,deflateResetKeep:Ioe,deflateSetHeader:Soe,deflate:Aoe,deflateEnd:Doe,deflateSetDictionary:Toe,deflateInfo:Moe},Noe=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),Poe=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)Noe(t,r)&&(n[r]=t[r])}}return n},koe=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];t.set(s,i),i+=s.length}return t},Gx={assign:Poe,flattenChunks:koe},sU=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{sU=!1}var $y=new Uint8Array(256);for(let n=0;n<256;n++)$y[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;$y[254]=$y[254]=1;var Roe=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},Ooe=(n,e)=>{if(e<65534&&n.subarray&&sU)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},Loe=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,o=new Array(t*2);for(i=0,r=0;r<t;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=$y[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<t;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return Ooe(o,i)},Foe=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+$y[n[t]]>e?t:e},Hy={string2buf:Roe,buf2string:Loe,utf8border:Foe};function Voe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var aU=Voe,cU=Object.prototype.toString,{Z_NO_FLUSH:joe,Z_SYNC_FLUSH:Boe,Z_FULL_FLUSH:Uoe,Z_FINISH:zoe,Z_OK:$x,Z_STREAM_END:qoe,Z_DEFAULT_COMPRESSION:$oe,Z_DEFAULT_STRATEGY:Hoe,Z_DEFLATED:Woe}=um;function Yy(n){this.options=Gx.assign({level:$oe,method:Woe,chunkSize:16384,windowBits:15,memLevel:8,strategy:Hoe},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new aU,this.strm.avail_out=0;let t=Fy.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==$x)throw new Error(mh[t]);if(e.header&&Fy.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=Hy.string2buf(e.dictionary):cU.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=Fy.deflateSetDictionary(this.strm,r),t!==$x)throw new Error(mh[t]);this._dict_set=!0}}Yy.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?zoe:joe,typeof n=="string"?t.input=Hy.string2buf(n):cU.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(o===Boe||o===Uoe)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=Fy.deflate(t,o),i===qoe)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=Fy.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===$x;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Yy.prototype.onData=function(n){this.chunks.push(n)};Yy.prototype.onEnd=function(n){n===$x&&(this.result=Gx.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function dP(n,e){let t=new Yy(e);if(t.push(n,!0),t.err)throw t.msg||mh[t.err];return t.result}function Goe(n,e){return e=e||{},e.raw=!0,dP(n,e)}function Koe(n,e){return e=e||{},e.gzip=!0,dP(n,e)}var Yoe=Yy,Zoe=dP,Qoe=Goe,Xoe=Koe,Joe=um,ese={Deflate:Yoe,deflate:Zoe,deflateRaw:Qoe,gzip:Xoe,constants:Joe},Vx=16209,tse=16191,nse=function(e,t){let r,i,o,s,a,c,l,u,p,m,g,C,I,N,P,Q,j,W,ae,me,z,M,S,V,b=e.state;r=e.next_in,S=e.input,i=r+(e.avail_in-5),o=e.next_out,V=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=b.dmax,l=b.wsize,u=b.whave,p=b.wnext,m=b.window,g=b.hold,C=b.bits,I=b.lencode,N=b.distcode,P=(1<<b.lenbits)-1,Q=(1<<b.distbits)-1;e:do{C<15&&(g+=S[r++]<<C,C+=8,g+=S[r++]<<C,C+=8),j=I[g&P];t:for(;;){if(W=j>>>24,g>>>=W,C-=W,W=j>>>16&255,W===0)V[o++]=j&65535;else if(W&16){ae=j&65535,W&=15,W&&(C<W&&(g+=S[r++]<<C,C+=8),ae+=g&(1<<W)-1,g>>>=W,C-=W),C<15&&(g+=S[r++]<<C,C+=8,g+=S[r++]<<C,C+=8),j=N[g&Q];n:for(;;){if(W=j>>>24,g>>>=W,C-=W,W=j>>>16&255,W&16){if(me=j&65535,W&=15,C<W&&(g+=S[r++]<<C,C+=8,C<W&&(g+=S[r++]<<C,C+=8)),me+=g&(1<<W)-1,me>c){e.msg="invalid distance too far back",b.mode=Vx;break e}if(g>>>=W,C-=W,W=o-s,me>W){if(W=me-W,W>u&&b.sane){e.msg="invalid distance too far back",b.mode=Vx;break e}if(z=0,M=m,p===0){if(z+=l-W,W<ae){ae-=W;do V[o++]=m[z++];while(--W);z=o-me,M=V}}else if(p<W){if(z+=l+p-W,W-=p,W<ae){ae-=W;do V[o++]=m[z++];while(--W);if(z=0,p<ae){W=p,ae-=W;do V[o++]=m[z++];while(--W);z=o-me,M=V}}}else if(z+=p-W,W<ae){ae-=W;do V[o++]=m[z++];while(--W);z=o-me,M=V}for(;ae>2;)V[o++]=M[z++],V[o++]=M[z++],V[o++]=M[z++],ae-=3;ae&&(V[o++]=M[z++],ae>1&&(V[o++]=M[z++]))}else{z=o-me;do V[o++]=V[z++],V[o++]=V[z++],V[o++]=V[z++],ae-=3;while(ae>2);ae&&(V[o++]=V[z++],ae>1&&(V[o++]=V[z++]))}}else if((W&64)===0){j=N[(j&65535)+(g&(1<<W)-1)];continue n}else{e.msg="invalid distance code",b.mode=Vx;break e}break}}else if((W&64)===0){j=I[(j&65535)+(g&(1<<W)-1)];continue t}else if(W&32){b.mode=tse;break e}else{e.msg="invalid literal/length code",b.mode=Vx;break e}break}}while(r<i&&o<a);ae=C>>3,r-=ae,C-=ae<<3,g&=(1<<C)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),b.hold=g,b.bits=C},om=15,uB=852,dB=592,fB=0,qN=1,hB=2,rse=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ise=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ose=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),sse=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ase=(n,e,t,r,i,o,s,a)=>{let c=a.bits,l=0,u=0,p=0,m=0,g=0,C=0,I=0,N=0,P=0,Q=0,j,W,ae,me,z,M=null,S,V=new Uint16Array(om+1),b=new Uint16Array(om+1),A=null,T,te,be;for(l=0;l<=om;l++)V[l]=0;for(u=0;u<r;u++)V[e[t+u]]++;for(g=c,m=om;m>=1&&V[m]===0;m--);if(g>m&&(g=m),m===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(p=1;p<m&&V[p]===0;p++);for(g<p&&(g=p),N=1,l=1;l<=om;l++)if(N<<=1,N-=V[l],N<0)return-1;if(N>0&&(n===fB||m!==1))return-1;for(b[1]=0,l=1;l<om;l++)b[l+1]=b[l]+V[l];for(u=0;u<r;u++)e[t+u]!==0&&(s[b[e[t+u]]++]=u);if(n===fB?(M=A=s,S=20):n===qN?(M=rse,A=ise,S=257):(M=ose,A=sse,S=0),Q=0,u=0,l=p,z=o,C=g,I=0,ae=-1,P=1<<g,me=P-1,n===qN&&P>uB||n===hB&&P>dB)return 1;for(;;){T=l-I,s[u]+1<S?(te=0,be=s[u]):s[u]>=S?(te=A[s[u]-S],be=M[s[u]-S]):(te=96,be=0),j=1<<l-I,W=1<<C,p=W;do W-=j,i[z+(Q>>I)+W]=T<<24|te<<16|be|0;while(W!==0);for(j=1<<l-1;Q&j;)j>>=1;if(j!==0?(Q&=j-1,Q+=j):Q=0,u++,--V[l]===0){if(l===m)break;l=e[t+s[u]]}if(l>g&&(Q&me)!==ae){for(I===0&&(I=g),z+=p,C=l-I,N=1<<C;C+I<m&&(N-=V[C+I],!(N<=0));)C++,N<<=1;if(P+=1<<C,n===qN&&P>uB||n===hB&&P>dB)return 1;ae=Q&me,i[ae]=g<<24|C<<16|z-o|0}}return Q!==0&&(i[z+Q]=l-I<<24|64<<16|0),a.bits=g,0},Vy=ase,cse=0,lU=1,uU=2,{Z_FINISH:pB,Z_BLOCK:lse,Z_TREES:jx,Z_OK:yh,Z_STREAM_END:use,Z_NEED_DICT:dse,Z_STREAM_ERROR:Ca,Z_DATA_ERROR:dU,Z_MEM_ERROR:fU,Z_BUF_ERROR:fse,Z_DEFLATED:gB}=um,Kx=16180,mB=16181,vB=16182,yB=16183,_B=16184,wB=16185,bB=16186,xB=16187,EB=16188,CB=16189,Hx=16190,Jl=16191,$N=16192,IB=16193,HN=16194,SB=16195,AB=16196,DB=16197,TB=16198,Bx=16199,Ux=16200,MB=16201,NB=16202,PB=16203,kB=16204,RB=16205,WN=16206,OB=16207,LB=16208,Ir=16209,hU=16210,pU=16211,hse=852,pse=592,gse=15,mse=gse,FB=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function vse(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var _h=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<Kx||e.mode>pU?1:0},gU=n=>{if(_h(n))return Ca;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Kx,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(hse),e.distcode=e.distdyn=new Int32Array(pse),e.sane=1,e.back=-1,yh},mU=n=>{if(_h(n))return Ca;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,gU(n)},vU=(n,e)=>{let t;if(_h(n))return Ca;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ca:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,mU(n))},yU=(n,e)=>{if(!n)return Ca;let t=new vse;n.state=t,t.strm=n,t.window=null,t.mode=Kx;let r=vU(n,e);return r!==yh&&(n.state=null),r},yse=n=>yU(n,mse),VB=!0,GN,KN,_se=n=>{if(VB){GN=new Int32Array(512),KN=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Vy(lU,n.lens,0,288,GN,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Vy(uU,n.lens,0,32,KN,0,n.work,{bits:5}),VB=!1}n.lencode=GN,n.lenbits=9,n.distcode=KN,n.distbits=5},_U=(n,e,t,r)=>{let i,o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},wse=(n,e)=>{let t,r,i,o,s,a,c,l,u,p,m,g,C,I,N=0,P,Q,j,W,ae,me,z,M,S=new Uint8Array(4),V,b,A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(_h(n)||!n.output||!n.input&&n.avail_in!==0)return Ca;t=n.state,t.mode===Jl&&(t.mode=$N),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,p=a,m=c,M=yh;e:for(;;)switch(t.mode){case Kx:if(t.wrap===0){t.mode=$N;break}for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,S[0]=l&255,S[1]=l>>>8&255,t.check=Li(t.check,S,2,0),l=0,u=0,t.mode=mB;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){n.msg="incorrect header check",t.mode=Ir;break}if((l&15)!==gB){n.msg="unknown compression method",t.mode=Ir;break}if(l>>>=4,u-=4,z=(l&15)+8,t.wbits===0&&(t.wbits=z),z>15||z>t.wbits){n.msg="invalid window size",t.mode=Ir;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=l&512?CB:Jl,l=0,u=0;break;case mB:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==gB){n.msg="unknown compression method",t.mode=Ir;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Ir;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,t.check=Li(t.check,S,2,0)),l=0,u=0,t.mode=vB;case vB:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,S[2]=l>>>16&255,S[3]=l>>>24&255,t.check=Li(t.check,S,4,0)),l=0,u=0,t.mode=yB;case yB:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,t.check=Li(t.check,S,2,0)),l=0,u=0,t.mode=_B;case _B:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,t.check=Li(t.check,S,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=wB;case wB:if(t.flags&1024&&(g=t.length,g>a&&(g=a),g&&(t.head&&(z=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+g),z)),t.flags&512&&t.wrap&4&&(t.check=Li(t.check,r,g,o)),a-=g,o+=g,t.length-=g),t.length))break e;t.length=0,t.mode=bB;case bB:if(t.flags&2048){if(a===0)break e;g=0;do z=r[o+g++],t.head&&z&&t.length<65536&&(t.head.name+=String.fromCharCode(z));while(z&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Li(t.check,r,g,o)),a-=g,o+=g,z)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=xB;case xB:if(t.flags&4096){if(a===0)break e;g=0;do z=r[o+g++],t.head&&z&&t.length<65536&&(t.head.comment+=String.fromCharCode(z));while(z&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Li(t.check,r,g,o)),a-=g,o+=g,z)break e}else t.head&&(t.head.comment=null);t.mode=EB;case EB:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Ir;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Jl;break;case CB:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}n.adler=t.check=FB(l),l=0,u=0,t.mode=Hx;case Hx:if(t.havedict===0)return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,dse;n.adler=t.check=1,t.mode=Jl;case Jl:if(e===lse||e===jx)break e;case $N:if(t.last){l>>>=u&7,u-=u&7,t.mode=WN;break}for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=IB;break;case 1:if(_se(t),t.mode=Bx,e===jx){l>>>=2,u-=2;break e}break;case 2:t.mode=AB;break;case 3:n.msg="invalid block type",t.mode=Ir}l>>>=2,u-=2;break;case IB:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Ir;break}if(t.length=l&65535,l=0,u=0,t.mode=HN,e===jx)break e;case HN:t.mode=SB;case SB:if(g=t.length,g){if(g>a&&(g=a),g>c&&(g=c),g===0)break e;i.set(r.subarray(o,o+g),s),a-=g,o+=g,c-=g,s+=g,t.length-=g;break}t.mode=Jl;break;case AB:for(;u<14;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Ir;break}t.have=0,t.mode=DB;case DB:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.lens[A[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[A[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},M=Vy(cse,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,M){n.msg="invalid code lengths set",t.mode=Ir;break}t.have=0,t.mode=TB;case TB:for(;t.have<t.nlen+t.ndist;){for(;N=t.lencode[l&(1<<t.lenbits)-1],P=N>>>24,Q=N>>>16&255,j=N&65535,!(P<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(j<16)l>>>=P,u-=P,t.lens[t.have++]=j;else{if(j===16){for(b=P+2;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=P,u-=P,t.have===0){n.msg="invalid bit length repeat",t.mode=Ir;break}z=t.lens[t.have-1],g=3+(l&3),l>>>=2,u-=2}else if(j===17){for(b=P+3;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=P,u-=P,z=0,g=3+(l&7),l>>>=3,u-=3}else{for(b=P+7;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=P,u-=P,z=0,g=11+(l&127),l>>>=7,u-=7}if(t.have+g>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Ir;break}for(;g--;)t.lens[t.have++]=z}}if(t.mode===Ir)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Ir;break}if(t.lenbits=9,V={bits:t.lenbits},M=Vy(lU,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,M){n.msg="invalid literal/lengths set",t.mode=Ir;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},M=Vy(uU,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,M){n.msg="invalid distances set",t.mode=Ir;break}if(t.mode=Bx,e===jx)break e;case Bx:t.mode=Ux;case Ux:if(a>=6&&c>=258){n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,nse(n,m),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,t.mode===Jl&&(t.back=-1);break}for(t.back=0;N=t.lencode[l&(1<<t.lenbits)-1],P=N>>>24,Q=N>>>16&255,j=N&65535,!(P<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(Q&&(Q&240)===0){for(W=P,ae=Q,me=j;N=t.lencode[me+((l&(1<<W+ae)-1)>>W)],P=N>>>24,Q=N>>>16&255,j=N&65535,!(W+P<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=W,u-=W,t.back+=W}if(l>>>=P,u-=P,t.back+=P,t.length=j,Q===0){t.mode=RB;break}if(Q&32){t.back=-1,t.mode=Jl;break}if(Q&64){n.msg="invalid literal/length code",t.mode=Ir;break}t.extra=Q&15,t.mode=MB;case MB:if(t.extra){for(b=t.extra;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=NB;case NB:for(;N=t.distcode[l&(1<<t.distbits)-1],P=N>>>24,Q=N>>>16&255,j=N&65535,!(P<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((Q&240)===0){for(W=P,ae=Q,me=j;N=t.distcode[me+((l&(1<<W+ae)-1)>>W)],P=N>>>24,Q=N>>>16&255,j=N&65535,!(W+P<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=W,u-=W,t.back+=W}if(l>>>=P,u-=P,t.back+=P,Q&64){n.msg="invalid distance code",t.mode=Ir;break}t.offset=j,t.extra=Q&15,t.mode=PB;case PB:if(t.extra){for(b=t.extra;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Ir;break}t.mode=kB;case kB:if(c===0)break e;if(g=m-c,t.offset>g){if(g=t.offset-g,g>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Ir;break}g>t.wnext?(g-=t.wnext,C=t.wsize-g):C=t.wnext-g,g>t.length&&(g=t.length),I=t.window}else I=i,C=s-t.offset,g=t.length;g>c&&(g=c),c-=g,t.length-=g;do i[s++]=I[C++];while(--g);t.length===0&&(t.mode=Ux);break;case RB:if(c===0)break e;i[s++]=t.length,c--,t.mode=Ux;break;case WN:if(t.wrap){for(;u<32;){if(a===0)break e;a--,l|=r[o++]<<u,u+=8}if(m-=c,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?Li(t.check,i,m,s-m):qy(t.check,i,m,s-m)),m=c,t.wrap&4&&(t.flags?l:FB(l))!==t.check){n.msg="incorrect data check",t.mode=Ir;break}l=0,u=0}t.mode=OB;case OB:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Ir;break}l=0,u=0}t.mode=LB;case LB:M=use;break e;case Ir:M=dU;break e;case hU:return fU;case pU:default:return Ca}return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,(t.wsize||m!==n.avail_out&&t.mode<Ir&&(t.mode<WN||e!==pB))&&_U(n,n.output,n.next_out,m-n.avail_out),p-=n.avail_in,m-=n.avail_out,n.total_in+=p,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?Li(t.check,i,m,n.next_out-m):qy(t.check,i,m,n.next_out-m)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Jl?128:0)+(t.mode===Bx||t.mode===HN?256:0),(p===0&&m===0||e===pB)&&M===yh&&(M=fse),M},bse=n=>{if(_h(n))return Ca;let e=n.state;return e.window&&(e.window=null),n.state=null,yh},xse=(n,e)=>{if(_h(n))return Ca;let t=n.state;return(t.wrap&2)===0?Ca:(t.head=e,e.done=!1,yh)},Ese=(n,e)=>{let t=e.length,r,i,o;return _h(n)||(r=n.state,r.wrap!==0&&r.mode!==Hx)?Ca:r.mode===Hx&&(i=1,i=qy(i,e,t,0),i!==r.check)?dU:(o=_U(n,e,t,t),o?(r.mode=hU,fU):(r.havedict=1,yh))},Cse=mU,Ise=vU,Sse=gU,Ase=yse,Dse=yU,Tse=wse,Mse=bse,Nse=xse,Pse=Ese,kse="pako inflate (from Nodeca project)",tu={inflateReset:Cse,inflateReset2:Ise,inflateResetKeep:Sse,inflateInit:Ase,inflateInit2:Dse,inflate:Tse,inflateEnd:Mse,inflateGetHeader:Nse,inflateSetDictionary:Pse,inflateInfo:kse};function Rse(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Ose=Rse,wU=Object.prototype.toString,{Z_NO_FLUSH:Lse,Z_FINISH:Fse,Z_OK:Wy,Z_STREAM_END:YN,Z_NEED_DICT:ZN,Z_STREAM_ERROR:Vse,Z_DATA_ERROR:jB,Z_MEM_ERROR:jse}=um;function Zy(n){this.options=Gx.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new aU,this.strm.avail_out=0;let t=tu.inflateInit2(this.strm,e.windowBits);if(t!==Wy)throw new Error(mh[t]);if(this.header=new Ose,tu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Hy.string2buf(e.dictionary):wU.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=tu.inflateSetDictionary(this.strm,e.dictionary),t!==Wy)))throw new Error(mh[t])}Zy.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?Fse:Lse,wU.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=tu.inflate(t,s),o===ZN&&i&&(o=tu.inflateSetDictionary(t,i),o===Wy?o=tu.inflate(t,s):o===jB&&(o=ZN));t.avail_in>0&&o===YN&&t.state.wrap>0&&n[t.next_in]!==0;)tu.inflateReset(t),o=tu.inflate(t,s);switch(o){case Vse:case jB:case ZN:case jse:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===YN))if(this.options.to==="string"){let c=Hy.utf8border(t.output,t.next_out),l=t.next_out-c,u=Hy.buf2string(t.output,c);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Wy&&a===0)){if(o===YN)return o=tu.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Zy.prototype.onData=function(n){this.chunks.push(n)};Zy.prototype.onEnd=function(n){n===Wy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Gx.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function fP(n,e){let t=new Zy(e);if(t.push(n),t.err)throw t.msg||mh[t.err];return t.result}function Bse(n,e){return e=e||{},e.raw=!0,fP(n,e)}var Use=Zy,zse=fP,qse=Bse,$se=fP,Hse=um,Wse={Inflate:Use,inflate:zse,inflateRaw:qse,ungzip:$se,constants:Hse},{Deflate:PTe,deflate:kTe,deflateRaw:RTe,gzip:OTe}=ese,{Inflate:Gse,inflate:Kse,inflateRaw:LTe,ungzip:FTe}=Wse;var hP=Gse,bU=Kse;var EU=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;EU[n]=e}var xU=4294967295;function Yse(n,e,t){let r=n;for(let i=0;i<t;i++)r=EU[(r^e[i])&255]^r>>>8;return r}function Zse(n,e){return(Yse(xU,n,e)^xU)>>>0}function pP(n,e,t){let r=n.readUint32(),i=Zse(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function Yx(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function Zx(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function Qx(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function Xx(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function Jx(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+Qse(e[o-i],t[o],t[o-i])&255}}function Qse(n,e,t){let r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),s=Math.abs(r-t);return i<=o&&i<=s?n:o<=s?e:t}function CU(n,e,t,r,i,o){switch(n){case 0:Yx(e,t,i);break;case 1:Zx(e,t,i,o);break;case 2:Qx(e,t,r,i);break;case 3:Xx(e,t,r,i,o);break;case 4:Jx(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}var Xse=new Uint16Array([255]),Jse=new Uint8Array(Xse.buffer),eae=Jse[0]===255;function IU(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,c=new Uint8Array(r*t*a),l=0;for(let u=0;u<7;u++){let p=s[u],m=Math.ceil((t-p.x)/p.xStep),g=Math.ceil((r-p.y)/p.yStep);if(m<=0||g<=0)continue;let C=m*a,I=new Uint8Array(C);for(let N=0;N<g;N++){let P=e[l++],Q=e.subarray(l,l+C);l+=C;let j=new Uint8Array(C);CU(P,Q,j,I,C,a),I.set(j);for(let W=0;W<m;W++){let ae=p.x+W*p.xStep,me=p.y+N*p.yStep;if(!(ae>=t||me>=r))for(let z=0;z<a;z++)c[(me*t+ae)*a+z]=j[W*a+z]}}}if(o===16){let u=new Uint16Array(c.buffer);if(eae)for(let p=0;p<u.length;p++)u[p]=tae(u[p]);return u}else return c}function tae(n){return(n&255)<<8|n>>8&255}var nae=new Uint16Array([255]),rae=new Uint8Array(nae.buffer),iae=rae[0]===255,oae=new Uint8Array(0);function gP(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*t),c=new Uint8Array(r*a),l=oae,u=0,p,m;for(let g=0;g<r;g++){switch(p=e.subarray(u+1,u+1+a),m=c.subarray(g*a,(g+1)*a),e[u]){case 0:Yx(p,m,a);break;case 1:Zx(p,m,a,s);break;case 2:Qx(p,m,l,a);break;case 3:Xx(p,m,l,a,s);break;case 4:Jx(p,m,l,a,s);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}l=m,u+=a+1}if(o===16){let g=new Uint16Array(c.buffer);if(iae)for(let C=0;C<g.length;C++)g[C]=sae(g[C]);return g}else return c}function sae(n){return(n&255)<<8|n>>8&255}var eE=Uint8Array.of(137,80,78,71,13,10,26,10);function mP(n){if(!SU(n.readBytes(eE.length)))throw new Error("wrong PNG signature")}function SU(n){if(n.length<eE.length)return!1;for(let e=0;e<eE.length;e++)if(n[e]!==eE[e])return!1;return!0}var AU="tEXt",cae=0,DU=new TextDecoder("latin1");function lae(n){if(dae(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var uae=/^[\u0000-\u00FF]*$/;function dae(n){if(!uae.test(n))throw new Error("invalid latin1 text")}function TU(n,e,t){let r=vP(e);n[r]=fae(e,t-r.length-1)}function vP(n){for(n.mark();n.readByte()!==cae;);let e=n.offset;n.reset();let t=DU.decode(n.readBytes(e-n.offset-1));return n.skip(1),lae(t),t}function fae(n,e){return DU.decode(n.readBytes(e))}var $o={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Qy={UNKNOWN:-1,DEFLATE:0},tE={UNKNOWN:-1,ADAPTIVE:0},Xy={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Jy={NONE:0,BACKGROUND:1,PREVIOUS:2},nE={SOURCE:0,OVER:1};var rE=class extends Py{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);let{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new hP,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Qy.UNKNOWN,this._filterMethod=tE.UNKNOWN,this._interlaceMethod=Xy.UNKNOWN,this._colorType=$o.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(mP(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(mP(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){let r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case AU:TU(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?pP(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){let r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?pP(this,e+4,t):this.skip(4)}decodeIHDR(){let e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=hae(this.readUint8());let t=this.readUint8();this._colorType=t;let r;switch(t){case $o.GREYSCALE:r=1;break;case $o.TRUECOLOUR:r=3;break;case $o.INDEXED_COLOUR:r=1;break;case $o.GREYSCALE_ALPHA:r=2;break;case $o.TRUECOLOUR_ALPHA:r=4;break;case $o.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Qy.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);let t=e/3;this._hasPalette=!0;let r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case $o.GREYSCALE:case $o.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case $o.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){let r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case $o.UNKNOWN:case $o.GREYSCALE_ALPHA:case $o.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t=vP(this),r=this.readUint8();if(r!==Qy.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);let i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:bU(i)}}decodepHYs(){let e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){let t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=gP({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{let i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case Jy.NONE:break;case Jy.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){let s=(i*e.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[s+a]=0}break;case Jy.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){let r=1<<this._png.depth,i=(o,s)=>{let a=((o+t.yOffset)*this._png.width+t.xOffset+s)*this._png.channels,c=(o*t.width+s)*this._png.channels;return{index:a,frameIndex:c}};switch(t.blendOp){case nE.SOURCE:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++)e.data[a+l]=t.data[c+l]}break;case nE.OVER:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++){let u=t.data[c+this._png.channels-1]/r,p=l%(this._png.channels-1)===0?1:t.data[c+l],m=Math.floor(u*p+(1-u)*e.data[a+l]);e.data[a+l]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==tE.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Xy.NO_INTERLACE)this._png.data=gP({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Xy.ADAM7)this._png.data=IU({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Jy.NONE,blendOp:nE.SOURCE,data:e}),this._inflator=new hP,this._writingDataChunks=!1}};function hae(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function MU(n,e){return new rE(n,e).decode()}var Yt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function yP(){Yt.console&&typeof Yt.console.log=="function"&&Yt.console.log.apply(Yt.console,arguments)}var ar={log:yP,warn:function(n){Yt.console&&(typeof Yt.console.warn=="function"?Yt.console.warn.apply(Yt.console,arguments):yP.call(null,arguments))},error:function(n){Yt.console&&(typeof Yt.console.error=="function"?Yt.console.error.apply(Yt.console,arguments):yP(n))}};function _P(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){wh(r.response,e,t)},r.onerror=function(){ar.error("could not download file")},r.send()}function NU(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function iE(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var wh=Yt.saveAs||((typeof window>"u"?"undefined":Vn(window))!=="object"||window!==Yt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Yt.URL||Yt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?NU(i.href)?_P(n,e,t):iE(i,i.target="_blank"):iE(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){iE(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(NU(n))_P(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){iE(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Vn(o)!=="object"&&(ar.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return _P(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(Yt.HTMLElement)||Yt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Vn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(n)}else{var c=Yt.URL||Yt.webkitURL,l=c.createObjectURL(n);r?r.location=l:location.href=l,r=null,setTimeout(function(){c.revokeObjectURL(l)},4e4)}});function t9(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),l=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),"#"+a+c+l}}var cE=Yt.atob.bind(Yt),PU=Yt.btoa.bind(Yt);function wP(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=vo(t,r,i,o,e[0],7,-680876936),o=vo(o,t,r,i,e[1],12,-389564586),i=vo(i,o,t,r,e[2],17,606105819),r=vo(r,i,o,t,e[3],22,-1044525330),t=vo(t,r,i,o,e[4],7,-176418897),o=vo(o,t,r,i,e[5],12,1200080426),i=vo(i,o,t,r,e[6],17,-1473231341),r=vo(r,i,o,t,e[7],22,-45705983),t=vo(t,r,i,o,e[8],7,1770035416),o=vo(o,t,r,i,e[9],12,-1958414417),i=vo(i,o,t,r,e[10],17,-42063),r=vo(r,i,o,t,e[11],22,-1990404162),t=vo(t,r,i,o,e[12],7,1804603682),o=vo(o,t,r,i,e[13],12,-40341101),i=vo(i,o,t,r,e[14],17,-1502002290),t=yo(t,r=vo(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=yo(o,t,r,i,e[6],9,-1069501632),i=yo(i,o,t,r,e[11],14,643717713),r=yo(r,i,o,t,e[0],20,-373897302),t=yo(t,r,i,o,e[5],5,-701558691),o=yo(o,t,r,i,e[10],9,38016083),i=yo(i,o,t,r,e[15],14,-660478335),r=yo(r,i,o,t,e[4],20,-405537848),t=yo(t,r,i,o,e[9],5,568446438),o=yo(o,t,r,i,e[14],9,-1019803690),i=yo(i,o,t,r,e[3],14,-187363961),r=yo(r,i,o,t,e[8],20,1163531501),t=yo(t,r,i,o,e[13],5,-1444681467),o=yo(o,t,r,i,e[2],9,-51403784),i=yo(i,o,t,r,e[7],14,1735328473),t=_o(t,r=yo(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=_o(o,t,r,i,e[8],11,-2022574463),i=_o(i,o,t,r,e[11],16,1839030562),r=_o(r,i,o,t,e[14],23,-35309556),t=_o(t,r,i,o,e[1],4,-1530992060),o=_o(o,t,r,i,e[4],11,1272893353),i=_o(i,o,t,r,e[7],16,-155497632),r=_o(r,i,o,t,e[10],23,-1094730640),t=_o(t,r,i,o,e[13],4,681279174),o=_o(o,t,r,i,e[0],11,-358537222),i=_o(i,o,t,r,e[3],16,-722521979),r=_o(r,i,o,t,e[6],23,76029189),t=_o(t,r,i,o,e[9],4,-640364487),o=_o(o,t,r,i,e[12],11,-421815835),i=_o(i,o,t,r,e[15],16,530742520),t=wo(t,r=_o(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=wo(o,t,r,i,e[7],10,1126891415),i=wo(i,o,t,r,e[14],15,-1416354905),r=wo(r,i,o,t,e[5],21,-57434055),t=wo(t,r,i,o,e[12],6,1700485571),o=wo(o,t,r,i,e[3],10,-1894986606),i=wo(i,o,t,r,e[10],15,-1051523),r=wo(r,i,o,t,e[1],21,-2054922799),t=wo(t,r,i,o,e[8],6,1873313359),o=wo(o,t,r,i,e[15],10,-30611744),i=wo(i,o,t,r,e[6],15,-1560198380),r=wo(r,i,o,t,e[13],21,1309151649),t=wo(t,r,i,o,e[4],6,-145523070),o=wo(o,t,r,i,e[11],10,-1120210379),i=wo(i,o,t,r,e[2],15,718787259),r=wo(r,i,o,t,e[9],21,-343485551),n[0]=Od(t,n[0]),n[1]=Od(r,n[1]),n[2]=Od(i,n[2]),n[3]=Od(o,n[3])}function gE(n,e,t,r,i,o){return e=Od(Od(e,n),Od(r,o)),Od(e<<i|e>>>32-i,t)}function vo(n,e,t,r,i,o,s){return gE(e&t|~e&r,n,e,i,o,s)}function yo(n,e,t,r,i,o,s){return gE(e&r|t&~r,n,e,i,o,s)}function _o(n,e,t,r,i,o,s){return gE(e^t^r,n,e,i,o,s)}function wo(n,e,t,r,i,o,s){return gE(t^(e|~r),n,e,i,o,s)}function n9(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)wP(r,pae(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(wP(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,wP(r,i),r}function pae(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var kU="0123456789abcdef".split("");function gae(n){for(var e="",t=0;t<4;t++)e+=kU[n>>8*t+4&15]+kU[n>>8*t&15];return e}function mae(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function SP(n){return n9(n).map(mae).join("")}var vae=(function(n){for(var e=0;e<n.length;e++)n[e]=gae(n[e]);return n.join("")})(n9("hello"))!="5d41402abc4b2a76b9719d911017c592";function Od(n,e){if(vae){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function AP(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var l=0;for(c=0;c<256;c++){var u=a[c];l=(l+u+s.charCodeAt(c))%256,a[c]=a[l],a[l]=u}t=n,r=a}else a=r;var p=e.length,m=0,g=0,C="";for(c=0;c<p;c++)g=(g+(u=a[m=(m+1)%256]))%256,a[m]=a[g],a[g]=u,s=a[(a[m]+a[g])%256],C+=String.fromCharCode(e.charCodeAt(c)^s);return C}var RU={print:4,modify:8,copy:16,"annot-forms":32};function gm(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(RU.perm!==void 0)throw new Error("Invalid permission: "+a);i+=RU[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=SP(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=AP(this.encryptionKey,this.padding)}function mm(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function OU(n){if(Vn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){Yt.console&&ar.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function hE(n){if(!(this instanceof hE))return new hE(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function r9(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function bh(n,e,t,r,i){if(!(this instanceof bh))return new bh(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,r9.call(this,r,i)}function vm(n,e,t,r,i){if(!(this instanceof vm))return new vm(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,r9.call(this,r,i)}function Ct(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,c=16,l="S",u=null;Vn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),l=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=OU;var C="1.3",I=g.__private__.getPdfVersion=function(){return C};g.__private__.setPdfVersion=function(v){C=v};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return N};var P=g.__private__.getPageFormat=function(v){return N[v]};i=i||"a4";var Q="compat",j="advanced",W=Q;function ae(){this.saveGraphicsState(),H(new Mt(Qt,0,0,-Qt,0,Ta()*Qt).toString()+" cm"),this.setFontSize(this.getFontSize()/Qt),l="n",W=j}function me(){this.restoreGraphicsState(),l="S",W=Q}var z=g.__private__.combineFontStyleAndFontWeight=function(v,k){if(v=="bold"&&k=="normal"||v=="bold"&&k==400||v=="normal"&&k=="italic"||v=="bold"&&k=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return k&&(v=k==400||k==="normal"?v==="italic"?"italic":"normal":k!=700&&k!=="bold"||v!=="normal"?(k==700?"bold":k)+""+v:"bold"),v};g.advancedAPI=function(v){var k=W===Q;return k&&ae.call(this),typeof v!="function"||(v(this),k&&me.call(this)),this},g.compatAPI=function(v){var k=W===j;return k&&me.call(this),typeof v!="function"||(v(this),k&&ae.call(this)),this},g.isAdvancedAPI=function(){return W===j};var M,S=function(v){if(W!==j)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=g.roundToPrecision=g.__private__.roundToPrecision=function(v,k){var K=e||k;if(isNaN(v)||isNaN(K))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(K).replace(/0+$/,"")};M=g.hpf=g.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,16)};var b=g.f2=g.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return V(v,2)},A=g.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return V(v,3)},T=g.scale=g.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return W===Q?v*Qt:W===j?v:void 0},te=function(v){return T((function(k){return W===Q?Ta()-k:W===j?k:void 0})(v))};g.__private__.setPrecision=g.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var be,De="00000000000000000000000000000000",Ae=g.__private__.getFileId=function(){return De},he=g.__private__.setFileId=function(v){return De=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():De.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(zr=new gm(u.userPermissions,u.userPassword,u.ownerPassword,De)),De};g.setFileId=function(v){return he(v),this},g.getFileId=function(){return Ae()};var Te=g.__private__.convertDateToPDFDate=function(v){var k=v.getTimezoneOffset(),K=k<0?"+":"-",ne=Math.floor(Math.abs(k/60)),de=Math.abs(k%60),ke=[K,J(ne),"'",J(de),"'"].join("");return["D:",v.getFullYear(),J(v.getMonth()+1),J(v.getDate()),J(v.getHours()),J(v.getMinutes()),J(v.getSeconds()),ke].join("")},Ge=g.__private__.convertPDFDateToDate=function(v){var k=parseInt(v.substr(2,4),10),K=parseInt(v.substr(6,2),10)-1,ne=parseInt(v.substr(8,2),10),de=parseInt(v.substr(10,2),10),ke=parseInt(v.substr(12,2),10),je=parseInt(v.substr(14,2),10);return new Date(k,K,ne,de,ke,je,0)},Le=g.__private__.setCreationDate=function(v){var k;if(v===void 0&&(v=new Date),v instanceof Date)k=Te(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");k=v}return be=k},L=g.__private__.getCreationDate=function(v){var k=be;return v==="jsDate"&&(k=Ge(be)),k};g.setCreationDate=function(v){return Le(v),this},g.getCreationDate=function(v){return L(v)};var G,J=g.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},re=g.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},oe=0,ue=[],xe=[],Ie=0,Pe=[],$e=[],et=!1,He=xe;g.__private__.setCustomOutputDestination=function(v){et=!0,He=v};var st=function(v){et||(He=v)};g.__private__.resetCustomOutputDestination=function(){et=!1,He=xe};var H=g.__private__.out=function(v){return v=v.toString(),Ie+=v.length+1,He.push(v),He},Ze=g.__private__.write=function(v){return H(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Rt=g.__private__.getArrayBuffer=function(v){for(var k=v.length,K=new ArrayBuffer(k),ne=new Uint8Array(K);k--;)ne[k]=v.charCodeAt(k);return K},At=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return At};var Ue=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(v){return Ue=W===j?v/Qt:v,this};var Dt,at=g.__private__.getFontSize=g.getFontSize=function(){return W===Q?Ue:Ue*Qt},Et=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(v){return Et=v,this},g.__private__.getR2L=g.getR2L=function(){return Et};var It,Cn=g.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Dt=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Dt=v}else Dt=parseInt(v,10)};g.__private__.getZoomMode=function(){return Dt};var gn,Wt=g.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');It=v};g.__private__.getPageMode=function(){return It};var Lt=g.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');gn=v};g.__private__.getLayoutMode=function(){return gn},g.__private__.setDisplayMode=g.setDisplayMode=function(v,k,K){return Cn(v),Lt(k),Wt(K),this};var Ft={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(v){if(Object.keys(Ft).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ft[v]},g.__private__.getDocumentProperties=function(){return Ft},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(v){for(var k in Ft)Ft.hasOwnProperty(k)&&v[k]&&(Ft[k]=v[k]);return this},g.__private__.setDocumentProperty=function(v,k){if(Object.keys(Ft).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ft[v]=k};var pt,Qt,xt,Sr,vn,on={},sn={},Kn=[],Nt={},Yn={},Ot={},Zt={},tr=null,en=0,kt=[],In=new OU(g),bo=n.hotfixes||[],gi={},Ho={},fs=[],Mt=function v(k,K,ne,de,ke,je){if(!(this instanceof v))return new v(k,K,ne,de,ke,je);isNaN(k)&&(k=1),isNaN(K)&&(K=0),isNaN(ne)&&(ne=0),isNaN(de)&&(de=1),isNaN(ke)&&(ke=0),isNaN(je)&&(je=0),this._matrix=[k,K,ne,de,ke,je]};Object.defineProperty(Mt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Mt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Mt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Mt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Mt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Mt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Mt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Mt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Mt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Mt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Mt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Mt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Mt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Mt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Mt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Mt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Mt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(v)},Mt.prototype.multiply=function(v){var k=v.sx*this.sx+v.shy*this.shx,K=v.sx*this.shy+v.shy*this.sy,ne=v.shx*this.sx+v.sy*this.shx,de=v.shx*this.shy+v.sy*this.sy,ke=v.tx*this.sx+v.ty*this.shx+this.tx,je=v.tx*this.shy+v.ty*this.sy+this.ty;return new Mt(k,K,ne,de,ke,je)},Mt.prototype.decompose=function(){var v=this.sx,k=this.shy,K=this.shx,ne=this.sy,de=this.tx,ke=this.ty,je=Math.sqrt(v*v+k*k),dt=(v/=je)*K+(k/=je)*ne;K-=v*dt,ne-=k*dt;var vt=Math.sqrt(K*K+ne*ne);return dt/=vt,v*(ne/=vt)<k*(K/=vt)&&(v=-v,k=-k,dt=-dt,je=-je),{scale:new Mt(je,0,0,vt,0,0),translate:new Mt(1,0,0,1,de,ke),rotate:new Mt(v,k,-k,v,0,0),skew:new Mt(1,0,dt,1,0,0)}},Mt.prototype.toString=function(v){return this.join(" ")},Mt.prototype.inversed=function(){var v=this.sx,k=this.shy,K=this.shx,ne=this.sy,de=this.tx,ke=this.ty,je=1/(v*ne-k*K),dt=ne*je,vt=-k*je,jt=-K*je,Gt=v*je;return new Mt(dt,vt,jt,Gt,-dt*de-jt*ke,-vt*de-Gt*ke)},Mt.prototype.applyToPoint=function(v){var k=v.x*this.sx+v.y*this.shx+this.tx,K=v.x*this.shy+v.y*this.sy+this.ty;return new Aa(k,K)},Mt.prototype.applyToRectangle=function(v){var k=this.applyToPoint(v),K=this.applyToPoint(new Aa(v.x+v.w,v.y+v.h));return new su(k.x,k.y,K.x-k.x,K.y-k.y)},Mt.prototype.clone=function(){var v=this.sx,k=this.shy,K=this.shx,ne=this.sy,de=this.tx,ke=this.ty;return new Mt(v,k,K,ne,de,ke)},g.Matrix=Mt;var Ys=g.matrixMult=function(v,k){return k.multiply(v)},pr=new Mt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=pr;var xo=function(v,k){if(!Yn[v]){var K=(k instanceof bh?"Sh":"P")+(Object.keys(Nt).length+1).toString(10);k.id=K,Yn[v]=K,Nt[K]=k,In.publish("addPattern",k)}};g.ShadingPattern=bh,g.TilingPattern=vm,g.addShadingPattern=function(v,k){return S("addShadingPattern()"),xo(v,k),this},g.beginTilingPattern=function(v){S("beginTilingPattern()"),au(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},g.endTilingPattern=function(v,k){S("endTilingPattern()"),k.stream=$e[G].join(`
`),xo(v,k),In.publish("endTilingPattern",k),fs.pop().restore()};var Ti,Zn=g.__private__.newObject=function(){var v=oi();return mi(v,!0),v},oi=g.__private__.newObjectDeferred=function(){return oe++,ue[oe]=function(){return Ie},oe},mi=function(v,k){return k=typeof k=="boolean"&&k,ue[v]=Ie,k&&H(v+" 0 obj"),v},Wo=g.__private__.newAdditionalObject=function(){var v={objId:oi(),content:""};return Pe.push(v),v},cc=oi(),hs=oi(),Eo=g.__private__.decodeColorString=function(v){var k=v.split(" ");if(k.length!==2||k[1]!=="g"&&k[1]!=="G")k.length!==5||k[4]!=="k"&&k[4]!=="K"||(k=[(1-k[0])*(1-k[3]),(1-k[1])*(1-k[3]),(1-k[2])*(1-k[3]),"r"]);else{var K=parseFloat(k[0]);k=[K,K,K,"r"]}for(var ne="#",de=0;de<3;de++)ne+=("0"+Math.floor(255*parseFloat(k[de])).toString(16)).slice(-2);return ne},Go=g.__private__.encodeColorString=function(v){var k;typeof v=="string"&&(v={ch1:v});var K=v.ch1,ne=v.ch2,de=v.ch3,ke=v.ch4,je=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof K=="string"&&K.charAt(0)!=="#"){var dt=new t9(K);if(dt.ok)K=dt.toHex();else if(!/^\d*\.?\d*$/.test(K))throw new Error('Invalid color "'+K+'" passed to jsPDF.encodeColorString.')}if(typeof K=="string"&&/^#[0-9A-Fa-f]{3}$/.test(K)&&(K="#"+K[1]+K[1]+K[2]+K[2]+K[3]+K[3]),typeof K=="string"&&/^#[0-9A-Fa-f]{6}$/.test(K)){var vt=parseInt(K.substr(1),16);K=vt>>16&255,ne=vt>>8&255,de=255&vt}if(ne===void 0||ke===void 0&&K===ne&&ne===de)k=typeof K=="string"?K+" "+je[0]:v.precision===2?b(K/255)+" "+je[0]:A(K/255)+" "+je[0];else if(ke===void 0||Vn(ke)==="object"){if(ke&&!isNaN(ke.a)&&ke.a===0)return["1.","1.","1.",je[1]].join(" ");k=typeof K=="string"?[K,ne,de,je[1]].join(" "):v.precision===2?[b(K/255),b(ne/255),b(de/255),je[1]].join(" "):[A(K/255),A(ne/255),A(de/255),je[1]].join(" ")}else k=typeof K=="string"?[K,ne,de,ke,je[2]].join(" "):v.precision===2?[b(K),b(ne),b(de),b(ke),je[2]].join(" "):[A(K),A(ne),A(de),A(ke),je[2]].join(" ");return k},Co=g.__private__.getFilters=function(){return s},Vi=g.__private__.putStream=function(v){var k=(v=v||{}).data||"",K=v.filters||Co(),ne=v.alreadyAppliedFilters||[],de=v.addLength1||!1,ke=k.length,je=v.objectId,dt=function(Lr){return Lr};if(u!==null&&je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(dt=zr.encryptor(je,0));var vt={};K===!0&&(K=["FlateEncode"]);var jt=v.additionalKeyValues||[],Gt=(vt=Ct.API.processDataByFilters!==void 0?Ct.API.processDataByFilters(k,K):{data:k,reverseChain:[]}).reverseChain+(Array.isArray(ne)?ne.join(" "):ne.toString());if(vt.data.length!==0&&(jt.push({key:"Length",value:vt.data.length}),de===!0&&jt.push({key:"Length1",value:ke})),Gt.length!=0)if(Gt.split("/").length-1==1)jt.push({key:"Filter",value:Gt});else{jt.push({key:"Filter",value:"["+Gt+"]"});for(var _n=0;_n<jt.length;_n+=1)if(jt[_n].key==="DecodeParms"){for(var cr=[],Xn=0;Xn<vt.reverseChain.split("/").length-1;Xn+=1)cr.push("null");cr.push(jt[_n].value),jt[_n].value="["+cr.join(" ")+"]"}}H("<<");for(var jn=0;jn<jt.length;jn++)H("/"+jt[jn].key+" "+jt[jn].value);H(">>"),vt.data.length!==0&&(H("stream"),H(dt(vt.data)),H("endstream"))},Xi=g.__private__.putPage=function(v){var k=v.number,K=v.data,ne=v.objId,de=v.contentsObjId;mi(ne,!0),H("<</Type /Page"),H("/Parent "+v.rootDictionaryObjId+" 0 R"),H("/Resources "+v.resourceDictionaryObjId+" 0 R"),H("/MediaBox ["+parseFloat(M(v.mediaBox.bottomLeftX))+" "+parseFloat(M(v.mediaBox.bottomLeftY))+" "+M(v.mediaBox.topRightX)+" "+M(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&H("/CropBox ["+M(v.cropBox.bottomLeftX)+" "+M(v.cropBox.bottomLeftY)+" "+M(v.cropBox.topRightX)+" "+M(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&H("/BleedBox ["+M(v.bleedBox.bottomLeftX)+" "+M(v.bleedBox.bottomLeftY)+" "+M(v.bleedBox.topRightX)+" "+M(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&H("/TrimBox ["+M(v.trimBox.bottomLeftX)+" "+M(v.trimBox.bottomLeftY)+" "+M(v.trimBox.topRightX)+" "+M(v.trimBox.topRightY)+"]"),v.artBox!==null&&H("/ArtBox ["+M(v.artBox.bottomLeftX)+" "+M(v.artBox.bottomLeftY)+" "+M(v.artBox.topRightX)+" "+M(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&H("/UserUnit "+v.userUnit),In.publish("putPage",{objId:ne,pageContext:kt[k],pageNumber:k,page:K}),H("/Contents "+de+" 0 R"),H(">>"),H("endobj");var ke=K.join(`
`);return W===j&&(ke+=`
Q`),mi(de,!0),Vi({data:ke,filters:Co(),objectId:de}),H("endobj"),ne},ps=g.__private__.putPages=function(){var v,k,K=[];for(v=1;v<=en;v++)kt[v].objId=oi(),kt[v].contentsObjId=oi();for(v=1;v<=en;v++)K.push(Xi({number:v,data:$e[v],objId:kt[v].objId,contentsObjId:kt[v].contentsObjId,mediaBox:kt[v].mediaBox,cropBox:kt[v].cropBox,bleedBox:kt[v].bleedBox,trimBox:kt[v].trimBox,artBox:kt[v].artBox,userUnit:kt[v].userUnit,rootDictionaryObjId:cc,resourceDictionaryObjId:hs}));mi(cc,!0),H("<</Type /Pages");var ne="/Kids [";for(k=0;k<en;k++)ne+=K[k]+" 0 R ";H(ne+"]"),H("/Count "+en),H(">>"),H("endobj"),In.publish("postPutPages")},lc=function(v){In.publish("putFont",{font:v,out:H,newObject:Zn,putStream:Vi}),v.isAlreadyPutted!==!0&&(v.objectNumber=Zn(),H("<<"),H("/Type /Font"),H("/BaseFont /"+mm(v.postScriptName)),H("/Subtype /Type1"),typeof v.encoding=="string"&&H("/Encoding /"+v.encoding),H("/FirstChar 32"),H("/LastChar 255"),H(">>"),H("endobj"))},uc=function(v){v.objectNumber=Zn();var k=[];k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Form"}),k.push({key:"BBox",value:"["+[M(v.x),M(v.y),M(v.x+v.width),M(v.y+v.height)].join(" ")+"]"}),k.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var K=v.pages[1].join(`
`);Vi({data:K,additionalKeyValues:k,objectId:v.objectNumber}),H("endobj")},dc=function(v,k){k||(k=21);var K=Zn(),ne=(function(je,dt){var vt,jt=[],Gt=1/(dt-1);for(vt=0;vt<1;vt+=Gt)jt.push(vt);if(jt.push(1),je[0].offset!=0){var _n={offset:0,color:je[0].color};je.unshift(_n)}if(je[je.length-1].offset!=1){var cr={offset:1,color:je[je.length-1].color};je.push(cr)}for(var Xn="",jn=0,Lr=0;Lr<jt.length;Lr++){for(vt=jt[Lr];vt>je[jn+1].offset;)jn++;var Dr=je[jn].offset,si=(vt-Dr)/(je[jn+1].offset-Dr),Zo=je[jn].color,gr=je[jn+1].color;Xn+=re(Math.round((1-si)*Zo[0]+si*gr[0]).toString(16))+re(Math.round((1-si)*Zo[1]+si*gr[1]).toString(16))+re(Math.round((1-si)*Zo[2]+si*gr[2]).toString(16))}return Xn.trim()})(v.colors,k),de=[];de.push({key:"FunctionType",value:"0"}),de.push({key:"Domain",value:"[0.0 1.0]"}),de.push({key:"Size",value:"["+k+"]"}),de.push({key:"BitsPerSample",value:"8"}),de.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),de.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Vi({data:ne,additionalKeyValues:de,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:K}),H("endobj"),v.objectNumber=Zn(),H("<< /ShadingType "+v.type),H("/ColorSpace /DeviceRGB");var ke="/Coords ["+M(parseFloat(v.coords[0]))+" "+M(parseFloat(v.coords[1]))+" ";v.type===2?ke+=M(parseFloat(v.coords[2]))+" "+M(parseFloat(v.coords[3])):ke+=M(parseFloat(v.coords[2]))+" "+M(parseFloat(v.coords[3]))+" "+M(parseFloat(v.coords[4]))+" "+M(parseFloat(v.coords[5])),H(ke+="]"),v.matrix&&H("/Matrix ["+v.matrix.toString()+"]"),H("/Function "+K+" 0 R"),H("/Extend [true true]"),H(">>"),H("endobj")},cl=function(v,k){var K=oi(),ne=Zn();k.push({resourcesOid:K,objectOid:ne}),v.objectNumber=ne;var de=[];de.push({key:"Type",value:"/Pattern"}),de.push({key:"PatternType",value:"1"}),de.push({key:"PaintType",value:"1"}),de.push({key:"TilingType",value:"1"}),de.push({key:"BBox",value:"["+v.boundingBox.map(M).join(" ")+"]"}),de.push({key:"XStep",value:M(v.xStep)}),de.push({key:"YStep",value:M(v.yStep)}),de.push({key:"Resources",value:K+" 0 R"}),v.matrix&&de.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Vi({data:v.stream,additionalKeyValues:de,objectId:v.objectNumber}),H("endobj")},Ah=function(v){for(var k in v.objectNumber=Zn(),H("<<"),v)switch(k){case"opacity":H("/ca "+b(v[k]));break;case"stroke-opacity":H("/CA "+b(v[k]))}H(">>"),H("endobj")},Fd=function(v){mi(v.resourcesOid,!0),H("<<"),H("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var k in H("/Font <<"),on)on.hasOwnProperty(k)&&(p===!1||p===!0&&m.hasOwnProperty(k))&&H("/"+k+" "+on[k].objectNumber+" 0 R");H(">>")})(),(function(){if(Object.keys(Nt).length>0){for(var k in H("/Shading <<"),Nt)Nt.hasOwnProperty(k)&&Nt[k]instanceof bh&&Nt[k].objectNumber>=0&&H("/"+k+" "+Nt[k].objectNumber+" 0 R");In.publish("putShadingPatternDict"),H(">>")}})(),(function(k){if(Object.keys(Nt).length>0){for(var K in H("/Pattern <<"),Nt)Nt.hasOwnProperty(K)&&Nt[K]instanceof g.TilingPattern&&Nt[K].objectNumber>=0&&Nt[K].objectNumber<k&&H("/"+K+" "+Nt[K].objectNumber+" 0 R");In.publish("putTilingPatternDict"),H(">>")}})(v.objectOid),(function(){if(Object.keys(Ot).length>0){var k;for(k in H("/ExtGState <<"),Ot)Ot.hasOwnProperty(k)&&Ot[k].objectNumber>=0&&H("/"+k+" "+Ot[k].objectNumber+" 0 R");In.publish("putGStateDict"),H(">>")}})(),(function(){for(var k in H("/XObject <<"),gi)gi.hasOwnProperty(k)&&gi[k].objectNumber>=0&&H("/"+k+" "+gi[k].objectNumber+" 0 R");In.publish("putXobjectDict"),H(">>")})(),H(">>"),H("endobj")},ll=function(v){sn[v.fontName]=sn[v.fontName]||{},sn[v.fontName][v.fontStyle]=v.id},Vd=function(v,k,K,ne,de){var ke={id:"F"+(Object.keys(on).length+1).toString(10),postScriptName:v,fontName:k,fontStyle:K,encoding:ne,isStandardFont:de||!1,metadata:{}};return In.publish("addFont",{font:ke,instance:this}),on[ke.id]=ke,ll(ke),ke.id},Ji=g.__private__.pdfEscape=g.pdfEscape=function(v,k){return(function(K,ne){var de,ke,je,dt,vt,jt,Gt,_n,cr;if(je=(ne=ne||{}).sourceEncoding||"Unicode",vt=ne.outputEncoding,(ne.autoencode||vt)&&on[pt].metadata&&on[pt].metadata[je]&&on[pt].metadata[je].encoding&&(dt=on[pt].metadata[je].encoding,!vt&&on[pt].encoding&&(vt=on[pt].encoding),!vt&&dt.codePages&&(vt=dt.codePages[0]),typeof vt=="string"&&(vt=dt[vt]),vt)){for(Gt=!1,jt=[],de=0,ke=K.length;de<ke;de++)(_n=vt[K.charCodeAt(de)])?jt.push(String.fromCharCode(_n)):jt.push(K[de]),jt[de].charCodeAt(0)>>8&&(Gt=!0);K=jt.join("")}for(de=K.length;Gt===void 0&&de!==0;)K.charCodeAt(de-1)>>8&&(Gt=!0),de--;if(!Gt)return K;for(jt=ne.noBOM?[]:[254,255],de=0,ke=K.length;de<ke;de++){if((cr=(_n=K.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+K+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jt.push(cr),jt.push(_n-(cr<<8))}return String.fromCharCode.apply(void 0,jt)})(v,k).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ia=g.__private__.beginPage=function(v){$e[++en]=[],kt[en]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Dh(en),st($e[G])},Zs=function(v,k){var K,ne,de;switch(t=k||t,typeof v=="string"&&(K=P(v.toLowerCase()),Array.isArray(K)&&(ne=K[0],de=K[1])),Array.isArray(v)&&(ne=v[0]*Qt,de=v[1]*Qt),isNaN(ne)&&(ne=i[0],de=i[1]),(ne>14400||de>14400)&&(ar.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ne=Math.min(14400,ne),de=Math.min(14400,de)),i=[ne,de],t.substr(0,1)){case"l":de>ne&&(i=[de,ne]);break;case"p":ne>de&&(i=[de,ne])}Ia(i),qt(ou),H(Js),pl!==0&&H(pl+" J"),Qn!==0&&H(Qn+" j"),In.publish("addPage",{pageNumber:en})},ul=function(v){v>0&&v<=en&&($e.splice(v,1),kt.splice(v,1),en--,G>en&&(G=en),this.setPage(G))},Dh=function(v){v>0&&v<=en&&(G=v)},jd=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return $e.length-1},Bd=function(v,k,K){var ne,de=void 0;return K=K||{},v=v!==void 0?v:on[pt].fontName,k=k!==void 0?k:on[pt].fontStyle,ne=v.toLowerCase(),sn[ne]!==void 0&&sn[ne][k]!==void 0?de=sn[ne][k]:sn[v]!==void 0&&sn[v][k]!==void 0?de=sn[v][k]:K.disableWarning===!1&&ar.warn("Unable to look up font label for font '"+v+"', '"+k+"'. Refer to getFontList() for available fonts."),de||K.noFallback||(de=sn.times[k])==null&&(de=sn.times.normal),de},gs=g.__private__.putInfo=function(){var v=Zn(),k=function(ne){return ne};for(var K in u!==null&&(k=zr.encryptor(v,0)),H("<<"),H("/Producer ("+Ji(k("jsPDF "+Ct.version))+")"),Ft)Ft.hasOwnProperty(K)&&Ft[K]&&H("/"+K.substr(0,1).toUpperCase()+K.substr(1)+" ("+Ji(k(Ft[K]))+")");H("/CreationDate ("+Ji(k(be))+")"),H(">>"),H("endobj")},fc=g.__private__.putCatalog=function(v){var k=(v=v||{}).rootDictionaryObjId||cc;switch(Zn(),H("<<"),H("/Type /Catalog"),H("/Pages "+k+" 0 R"),Dt||(Dt="fullwidth"),Dt){case"fullwidth":H("/OpenAction [3 0 R /FitH null]");break;case"fullheight":H("/OpenAction [3 0 R /FitV null]");break;case"fullpage":H("/OpenAction [3 0 R /Fit]");break;case"original":H("/OpenAction [3 0 R /XYZ null null 1]");break;default:var K=""+Dt;K.substr(K.length-1)==="%"&&(Dt=parseInt(Dt)/100),typeof Dt=="number"&&H("/OpenAction [3 0 R /XYZ null null "+b(Dt)+"]")}switch(gn||(gn="continuous"),gn){case"continuous":H("/PageLayout /OneColumn");break;case"single":H("/PageLayout /SinglePage");break;case"two":case"twoleft":H("/PageLayout /TwoColumnLeft");break;case"tworight":H("/PageLayout /TwoColumnRight")}It&&H("/PageMode /"+It),In.publish("putCatalog"),H(">>"),H("endobj")},Ud=g.__private__.putTrailer=function(){H("trailer"),H("<<"),H("/Size "+(oe+1)),H("/Root "+oe+" 0 R"),H("/Info "+(oe-1)+" 0 R"),u!==null&&H("/Encrypt "+zr.oid+" 0 R"),H("/ID [ <"+De+"> <"+De+"> ]"),H(">>")},Ar=g.__private__.putHeader=function(){H("%PDF-"+C),H("%\xBA\xDF\xAC\xE0")},zd=g.__private__.putXRef=function(){var v="0000000000";H("xref"),H("0 "+(oe+1)),H("0000000000 65535 f ");for(var k=1;k<=oe;k++)typeof ue[k]=="function"?H((v+ue[k]()).slice(-10)+" 00000 n "):ue[k]!==void 0?H((v+ue[k]).slice(-10)+" 00000 n "):H("0000000000 00000 n ")},Qs=g.__private__.buildDocument=function(){var v;oe=0,Ie=0,xe=[],ue=[],Pe=[],cc=oi(),hs=oi(),st(xe),In.publish("buildDocument"),Ar(),ps(),(function(){In.publish("putAdditionalObjects");for(var K=0;K<Pe.length;K++){var ne=Pe[K];mi(ne.objId,!0),H(ne.content),H("endobj")}In.publish("postPutAdditionalObjects")})(),v=[],(function(){for(var K in on)on.hasOwnProperty(K)&&(p===!1||p===!0&&m.hasOwnProperty(K))&&lc(on[K])})(),(function(){var K;for(K in Ot)Ot.hasOwnProperty(K)&&Ah(Ot[K])})(),(function(){for(var K in gi)gi.hasOwnProperty(K)&&uc(gi[K])})(),(function(K){var ne;for(ne in Nt)Nt.hasOwnProperty(ne)&&(Nt[ne]instanceof bh?dc(Nt[ne]):Nt[ne]instanceof vm&&cl(Nt[ne],K))})(v),In.publish("putResources"),v.forEach(Fd),Fd({resourcesOid:hs,objectOid:Number.MAX_SAFE_INTEGER}),In.publish("postPutResources"),u!==null&&(zr.oid=Zn(),H("<<"),H("/Filter /Standard"),H("/V "+zr.v),H("/R "+zr.r),H("/U <"+zr.toHexString(zr.U)+">"),H("/O <"+zr.toHexString(zr.O)+">"),H("/P "+zr.P),H(">>"),H("endobj")),gs(),fc();var k=Ie;return zd(),Ud(),H("startxref"),H(""+k),H("%%EOF"),st($e[G]),xe.join(`
`)},nu=g.__private__.getBlob=function(v){return new Blob([Rt(v)],{type:"application/pdf"})},qd=g.output=g.__private__.output=(Ti=function(v,k){switch(typeof(k=k||{})=="string"?k={filename:k}:k.filename=k.filename||"generated.pdf",v){case void 0:return Qs();case"save":g.save(k.filename);break;case"arraybuffer":return Rt(Qs());case"blob":return nu(Qs());case"bloburi":case"bloburl":if(Yt.URL!==void 0&&typeof Yt.URL.createObjectURL=="function")return Yt.URL&&Yt.URL.createObjectURL(nu(Qs()))||void 0;ar.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var K="",ne=Qs();try{K=PU(ne)}catch{K=PU(unescape(encodeURIComponent(ne)))}return"data:application/pdf;filename="+k.filename+";base64,"+K;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Yt)==="[object Window]"){var de="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';k.pdfObjectUrl&&(de=k.pdfObjectUrl,ke="");var je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+de+'"'+ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(k)+");<\/script></body></html>",dt=Yt.open();return dt!==null&&dt.document.write(je),dt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Yt)==="[object Window]"){var vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(k.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+k.filename+'" width="500px" height="400px" /></body></html>',jt=Yt.open();if(jt!==null){jt.document.write(vt);var Gt=this;jt.document.documentElement.querySelector("#pdfViewer").onload=function(){jt.document.title=k.filename,jt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Gt.output("bloburl"))}}return jt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Yt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _n='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",k)+'"></iframe></body></html>',cr=Yt.open();if(cr!==null&&(cr.document.write(_n),cr.document.title=k.filename),cr||typeof safari>"u")return cr;break;case"datauri":case"dataurl":return Yt.document.location.href=this.output("datauristring",k);default:return null}},Ti.foo=function(){try{return Ti.apply(this,arguments)}catch(K){var v=K.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var k="Error in function "+v.split(`
`)[0].split("<")[0]+": "+K.message;if(!Yt.console)throw new Error(k);Yt.console.error(k,K),Yt.alert&&alert(k)}},Ti.foo.bar=Ti,Ti.foo),Io=function(v){return Array.isArray(bo)===!0&&bo.indexOf(v)>-1};switch(r){case"pt":Qt=1;break;case"mm":Qt=72/25.4;break;case"cm":Qt=72/2.54;break;case"in":Qt=72;break;case"px":Qt=Io("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qt=12;break;case"ex":Qt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Qt=r}var zr=null;Le(),he();var ji=g.__private__.getPageInfo=g.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kt[v].objId,pageNumber:v,pageContext:kt[v]}},Ko=g.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var k in kt)if(kt[k].objId===v)break;return ji(k)},ru=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:kt[G].objId,pageNumber:G,pageContext:kt[G]}};g.addPage=function(){return Zs.apply(this,arguments),this},g.setPage=function(){return Dh.apply(this,arguments),st.call(this,$e[G]),this},g.insertPage=function(v){return this.addPage(),this.movePage(G,v),this},g.movePage=function(v,k){var K,ne;if(v>k){K=$e[v],ne=kt[v];for(var de=v;de>k;de--)$e[de]=$e[de-1],kt[de]=kt[de-1];$e[k]=K,kt[k]=ne,this.setPage(k)}else if(v<k){K=$e[v],ne=kt[v];for(var ke=v;ke<k;ke++)$e[ke]=$e[ke+1],kt[ke]=kt[ke+1];$e[k]=K,kt[k]=ne,this.setPage(k)}return this},g.deletePage=function(){return ul.apply(this,arguments),this},g.__private__.text=g.text=function(v,k,K,ne,de){var ke,je,dt,vt,jt,Gt,_n,cr,Xn,jn=(ne=ne||{}).scope||this;if(typeof v=="number"&&typeof k=="number"&&(typeof K=="string"||Array.isArray(K))){var Lr=K;K=k,k=v,v=Lr}if(arguments[3]instanceof Mt==0?(dt=arguments[4],vt=arguments[5],Vn(_n=arguments[3])==="object"&&_n!==null||(typeof dt=="string"&&(vt=dt,dt=null),typeof _n=="string"&&(vt=_n,_n=null),typeof _n=="number"&&(dt=_n,_n=null),ne={flags:_n,angle:dt,align:vt})):(S("The transform parameter of text() with a Matrix value"),Xn=de),isNaN(k)||isNaN(K)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return jn;var Dr,si="",Zo=typeof ne.lineHeightFactor=="number"?ne.lineHeightFactor:eo,gr=jn.internal.scaleFactor;function ta(On){return On=On.split("	").join(Array(ne.TabLen||9).join(" ")),Ji(On,_n)}function lu(On){for(var nr,$r=On.concat(),vi=[],_l=$r.length;_l--;)typeof(nr=$r.shift())=="string"?vi.push(nr):Array.isArray(On)&&(nr.length===1||nr[1]===void 0&&nr[2]===void 0)?vi.push(nr[0]):vi.push([nr[0],nr[1],nr[2]]);return vi}function _s(On,nr){var $r;if(typeof On=="string")$r=nr(On)[0];else if(Array.isArray(On)){for(var vi,_l,Rm=On.concat(),Oh=[],r_=Rm.length;r_--;)typeof(vi=Rm.shift())=="string"?Oh.push(nr(vi)[0]):Array.isArray(vi)&&typeof vi[0]=="string"&&(_l=nr(vi[0],vi[1],vi[2]),Oh.push([_l[0],_l[1],_l[2]]));$r=Oh}return $r}var f=!1,_=!0;if(typeof v=="string")f=!0;else if(Array.isArray(v)){var E=v.concat();je=[];for(var B,le=E.length;le--;)(typeof(B=E.shift())!="string"||Array.isArray(B)&&typeof B[0]!="string")&&(_=!1);f=_}if(f===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Ee=Ue/jn.internal.scaleFactor,Ye=Ee*(Zo-1);switch(ne.baseline){case"bottom":K-=Ye;break;case"top":K+=Ee-Ye;break;case"hanging":K+=Ee-2*Ye;break;case"middle":K+=Ee/2-Ye}if((Gt=ne.maxWidth||0)>0&&(typeof v=="string"?v=jn.splitTextToSize(v,Gt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(On,nr){return On.concat(jn.splitTextToSize(nr,Gt))},[]))),ke={text:v,x:k,y:K,options:ne,mutex:{pdfEscape:Ji,activeFontKey:pt,fonts:on,activeFontSize:Ue}},In.publish("preProcessText",ke),v=ke.text,dt=(ne=ke.options).angle,Xn instanceof Mt==0&&dt&&typeof dt=="number"){dt*=Math.PI/180,ne.rotationDirection===0&&(dt=-dt),W===j&&(dt=-dt);var Dn=Math.cos(dt),Tr=Math.sin(dt);Xn=new Mt(Dn,Tr,-Tr,Dn,0,0)}else dt&&dt instanceof Mt&&(Xn=dt);W!==j||Xn||(Xn=pr),(jt=ne.charSpace||So)!==void 0&&(si+=M(T(jt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(cr=ne.horizontalScale)!==void 0&&(si+=M(100*cr)+` Tz
`),ne.lang;var $t=-1,lr=ne.renderingMode!==void 0?ne.renderingMode:ne.stroke,Mr=jn.internal.getCurrentPageInfo().pageContext;switch(lr){case 0:case!1:case"fill":$t=0;break;case 1:case!0:case"stroke":$t=1;break;case 2:case"fillThenStroke":$t=2;break;case 3:case"invisible":$t=3;break;case 4:case"fillAndAddForClipping":$t=4;break;case 5:case"strokeAndAddPathForClipping":$t=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":$t=6;break;case 7:case"addToPathForClipping":$t=7}var Ma=Mr.usedRenderingMode!==void 0?Mr.usedRenderingMode:-1;$t!==-1?si+=$t+` Tr
`:Ma!==-1&&(si+=`0 Tr
`),$t!==-1&&(Mr.usedRenderingMode=$t),vt=ne.align||"left";var wr,na=Ue*Zo,vl=jn.internal.pageSize.getWidth(),Dm=on[pt];jt=ne.charSpace||So,Gt=ne.maxWidth||0,_n=Object.assign({autoencode:!0,noBOM:!0},ne.flags);var uu=[],Gd=function(On){return jn.getStringUnitWidth(On,{font:Dm,charSpace:jt,fontSize:Ue,doKerning:!1})*Ue/gr};if(Object.prototype.toString.call(v)==="[object Array]"){var ws;je=lu(v),vt!=="left"&&(wr=je.map(Gd));var bs,du=0;if(vt==="right"){k-=wr[0],v=[],le=je.length;for(var yl=0;yl<le;yl++)yl===0?(bs=Sa(k),ws=Mi(K)):(bs=T(du-wr[yl]),ws=-na),v.push([je[yl],bs,ws]),du=wr[yl]}else if(vt==="center"){k-=wr[0]/2,v=[],le=je.length;for(var fu=0;fu<le;fu++)fu===0?(bs=Sa(k),ws=Mi(K)):(bs=T((du-wr[fu])/2),ws=-na),v.push([je[fu],bs,ws]),du=wr[fu]}else if(vt==="left"){v=[],le=je.length;for(var Tm=0;Tm<le;Tm++)v.push(je[Tm])}else if(vt==="justify"&&Dm.encoding==="Identity-H"){v=[],le=je.length,Gt=Gt!==0?Gt:vl;for(var Rh=0,qr=0;qr<le;qr++)if(ws=qr===0?Mi(K):-na,bs=qr===0?Sa(k):Rh,qr<le-1){var n_=T((Gt-wr[qr])/(je[qr].split(" ").length-1)),mc=je[qr].split(" ");v.push([mc[0]+" ",bs,ws]),Rh=0;for(var vc=1;vc<mc.length;vc++){var Mm=(Gd(mc[vc-1]+" "+mc[vc])-Gd(mc[vc]))*gr+n_;vc==mc.length-1?v.push([mc[vc],Mm,0]):v.push([mc[vc]+" ",Mm,0]),Rh-=Mm}}else v.push([je[qr],bs,ws]);v.push(["",Rh,0])}else{if(vt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],le=je.length,Gt=Gt!==0?Gt:vl,qr=0;qr<le;qr++){ws=qr===0?Mi(K):-na,bs=qr===0?Sa(k):0;var Nm=je[qr].split(" ").length-1,Pm=Nm>0?(Gt-wr[qr])/Nm:0;qr<le-1?uu.push(M(T(Pm))):uu.push(0),v.push([je[qr],bs,ws])}}}(typeof ne.R2L=="boolean"?ne.R2L:Et)===!0&&(v=_s(v,function(On,nr,$r){return[On.split("").reverse().join(""),nr,$r]})),ke={text:v,x:k,y:K,options:ne,mutex:{pdfEscape:Ji,activeFontKey:pt,fonts:on,activeFontSize:Ue}},In.publish("postProcessText",ke),v=ke.text,Dr=ke.mutex.isHex||!1;var km=on[pt].encoding;km!=="WinAnsiEncoding"&&km!=="StandardEncoding"||(v=_s(v,function(On,nr,$r){return[ta(On),nr,$r]})),je=lu(v),v=[];for(var hu,pu,gu,Kd=Array.isArray(je[0])?1:0,mu="",Yd=function(On,nr,$r){var vi="";return $r instanceof Mt?($r=typeof ne.angle=="number"?Ys($r,new Mt(1,0,0,1,On,nr)):Ys(new Mt(1,0,0,1,On,nr),$r),W===j&&($r=Ys(new Mt(1,0,0,-1,0,0),$r)),vi=$r.join(" ")+` Tm
`):vi=M(On)+" "+M(nr)+` Td
`,vi},ra=0;ra<je.length;ra++){switch(mu="",Kd){case 1:gu=(Dr?"<":"(")+je[ra][0]+(Dr?">":")"),hu=parseFloat(je[ra][1]),pu=parseFloat(je[ra][2]);break;case 0:gu=(Dr?"<":"(")+je[ra]+(Dr?">":")"),hu=Sa(k),pu=Mi(K)}uu!==void 0&&uu[ra]!==void 0&&(mu=uu[ra]+` Tw
`),ra===0?v.push(mu+Yd(hu,pu,Xn)+gu):Kd===0?v.push(mu+gu):Kd===1&&v.push(mu+Yd(hu,pu,Xn)+gu)}v=Kd===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var yc=`BT
/`;return yc+=pt+" "+Ue+` Tf
`,yc+=M(Ue*Zo)+` TL
`,yc+=gc+`
`,yc+=si,yc+=v,H(yc+="ET"),m[pt]=!0,jn};var iu=g.__private__.clip=g.clip=function(v){return H(v==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return iu("evenodd")},g.__private__.discardPath=g.discardPath=function(){return H("n"),this};var ms=g.__private__.isValidStyle=function(v){var k=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(k=!0),k};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(v){return ms(v)&&(l=v),this};var Rn=g.__private__.getStyle=g.getStyle=function(v){var k=l;switch(v){case"D":case"S":k="S";break;case"F":k="f";break;case"FD":case"DF":k="B";break;case"f":case"f*":case"B":case"B*":k=v}return k},dl=g.close=function(){return H("h"),this};g.stroke=function(){return H("S"),this},g.fill=function(v){return Xs("f",v),this},g.fillEvenOdd=function(v){return Xs("f*",v),this},g.fillStroke=function(v){return Xs("B",v),this},g.fillStrokeEvenOdd=function(v){return Xs("B*",v),this};var Xs=function(v,k){Vn(k)==="object"?Th(k,v):H(v)},vs=function(v){v===null||W===j&&v===void 0||(v=Rn(v),H(v))};function xm(v,k,K,ne,de){var ke=new vm(k||this.boundingBox,K||this.xStep,ne||this.yStep,this.gState,de||this.matrix);ke.stream=this.stream;var je=v+"$$"+this.cloneIndex+++"$$";return xo(je,ke),ke}var Th=function(v,k){var K=Yn[v.key],ne=Nt[K];if(ne instanceof bh)H("q"),H(Em(k)),ne.gState&&g.setGState(ne.gState),H(v.matrix.toString()+" cm"),H("/"+K+" sh"),H("Q");else if(ne instanceof vm){var de=new Mt(1,0,0,-1,0,Ta());v.matrix&&(de=de.multiply(v.matrix||pr),K=xm.call(ne,v.key,v.boundingBox,v.xStep,v.yStep,de).id),H("q"),H("/Pattern cs"),H("/"+K+" scn"),ne.gState&&g.setGState(ne.gState),H(k),H("Q")}},Em=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},$d=g.moveTo=function(v,k){return H(M(T(v))+" "+M(te(k))+" m"),this},Mh=g.lineTo=function(v,k){return H(M(T(v))+" "+M(te(k))+" l"),this},ys=g.curveTo=function(v,k,K,ne,de,ke){return H([M(T(v)),M(te(k)),M(T(K)),M(te(ne)),M(T(de)),M(te(ke)),"c"].join(" ")),this};g.__private__.line=g.line=function(v,k,K,ne,de){if(isNaN(v)||isNaN(k)||isNaN(K)||isNaN(ne)||!ms(de))throw new Error("Invalid arguments passed to jsPDF.line");return W===Q?this.lines([[K-v,ne-k]],v,k,[1,1],de||"S"):this.lines([[K-v,ne-k]],v,k,[1,1]).stroke()},g.__private__.lines=g.lines=function(v,k,K,ne,de,ke){var je,dt,vt,jt,Gt,_n,cr,Xn,jn,Lr,Dr,si;if(typeof v=="number"&&(si=K,K=k,k=v,v=si),ne=ne||[1,1],ke=ke||!1,isNaN(k)||isNaN(K)||!Array.isArray(v)||!Array.isArray(ne)||!ms(de)||typeof ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($d(k,K),je=ne[0],dt=ne[1],jt=v.length,Lr=k,Dr=K,vt=0;vt<jt;vt++)(Gt=v[vt]).length===2?(Lr=Gt[0]*je+Lr,Dr=Gt[1]*dt+Dr,Mh(Lr,Dr)):(_n=Gt[0]*je+Lr,cr=Gt[1]*dt+Dr,Xn=Gt[2]*je+Lr,jn=Gt[3]*dt+Dr,Lr=Gt[4]*je+Lr,Dr=Gt[5]*dt+Dr,ys(_n,cr,Xn,jn,Lr,Dr));return ke&&dl(),vs(de),this},g.path=function(v){for(var k=0;k<v.length;k++){var K=v[k],ne=K.c;switch(K.op){case"m":$d(ne[0],ne[1]);break;case"l":Mh(ne[0],ne[1]);break;case"c":ys.apply(this,ne);break;case"h":dl()}}return this},g.__private__.rect=g.rect=function(v,k,K,ne,de){if(isNaN(v)||isNaN(k)||isNaN(K)||isNaN(ne)||!ms(de))throw new Error("Invalid arguments passed to jsPDF.rect");return W===Q&&(ne=-ne),H([M(T(v)),M(te(k)),M(T(K)),M(T(ne)),"re"].join(" ")),vs(de),this},g.__private__.triangle=g.triangle=function(v,k,K,ne,de,ke,je){if(isNaN(v)||isNaN(k)||isNaN(K)||isNaN(ne)||isNaN(de)||isNaN(ke)||!ms(je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[K-v,ne-k],[de-K,ke-ne],[v-de,k-ke]],v,k,[1,1],je,!0),this},g.__private__.roundedRect=g.roundedRect=function(v,k,K,ne,de,ke,je){if(isNaN(v)||isNaN(k)||isNaN(K)||isNaN(ne)||isNaN(de)||isNaN(ke)||!ms(je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var dt=4/3*(Math.SQRT2-1);return de=Math.min(de,.5*K),ke=Math.min(ke,.5*ne),this.lines([[K-2*de,0],[de*dt,0,de,ke-ke*dt,de,ke],[0,ne-2*ke],[0,ke*dt,-de*dt,ke,-de,ke],[2*de-K,0],[-de*dt,0,-de,-ke*dt,-de,-ke],[0,2*ke-ne],[0,-ke*dt,de*dt,-ke,de,-ke]],v+de,k,[1,1],je,!0),this},g.__private__.ellipse=g.ellipse=function(v,k,K,ne,de){if(isNaN(v)||isNaN(k)||isNaN(K)||isNaN(ne)||!ms(de))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ke=4/3*(Math.SQRT2-1)*K,je=4/3*(Math.SQRT2-1)*ne;return $d(v+K,k),ys(v+K,k-je,v+ke,k-ne,v,k-ne),ys(v-ke,k-ne,v-K,k-je,v-K,k),ys(v-K,k+je,v-ke,k+ne,v,k+ne),ys(v+ke,k+ne,v+K,k+je,v+K,k),vs(de),this},g.__private__.circle=g.circle=function(v,k,K,ne){if(isNaN(v)||isNaN(k)||isNaN(K)||!ms(ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,k,K,K,ne)},g.setFont=function(v,k,K){return K&&(k=z(k,K)),pt=Bd(v,k,{disableWarning:!1}),this};var fl=g.__private__.getFont=g.getFont=function(){return on[Bd.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var v,k,K={};for(v in sn)if(sn.hasOwnProperty(v))for(k in K[v]=[],sn[v])sn[v].hasOwnProperty(k)&&K[v].push(k);return K},g.addFont=function(v,k,K,ne,de){var ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ke.indexOf(arguments[3])!==-1?de=arguments[3]:arguments[3]&&ke.indexOf(arguments[3])==-1&&(K=z(K,ne)),Vd.call(this,v,k,K,de=de||"Identity-H")};var eo,ou=n.lineWidth||.200025,Nh=g.__private__.getLineWidth=g.getLineWidth=function(){return ou},qt=g.__private__.setLineWidth=g.setLineWidth=function(v){return ou=v,H(M(T(v))+" w"),this};g.__private__.setLineDash=Ct.API.setLineDash=Ct.API.setLineDashPattern=function(v,k){if(v=v||[],k=k||0,isNaN(k)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(K){return M(T(K))}).join(" "),k=M(T(k)),H("["+v+"] "+k+" d"),this};var hc=g.__private__.getLineHeight=g.getLineHeight=function(){return Ue*eo};g.__private__.getLineHeight=g.getLineHeight=function(){return Ue*eo};var Cm=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(eo=v),this},Im=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return eo};Cm(n.lineHeight);var Sa=g.__private__.getHorizontalCoordinate=function(v){return T(v)},Mi=g.__private__.getVerticalCoordinate=function(v){return W===j?v:kt[G].mediaBox.topRightY-kt[G].mediaBox.bottomLeftY-T(v)},Sm=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(v){return M(Sa(v))},Am=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(v){return M(Mi(v))},Js=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Eo(Js)},g.__private__.setStrokeColor=g.setDrawColor=function(v,k,K,ne){return Js=Go({ch1:v,ch2:k,ch3:K,ch4:ne,pdfColorType:"draw",precision:2}),H(Js),this};var pc=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Eo(pc)},g.__private__.setFillColor=g.setFillColor=function(v,k,K,ne){return pc=Go({ch1:v,ch2:k,ch3:K,ch4:ne,pdfColorType:"fill",precision:2}),H(pc),this};var gc=n.textColor||"0 g",hl=g.__private__.getTextColor=g.getTextColor=function(){return Eo(gc)};g.__private__.setTextColor=g.setTextColor=function(v,k,K,ne){return gc=Go({ch1:v,ch2:k,ch3:K,ch4:ne,pdfColorType:"text",precision:3}),this};var So=n.charSpace,Ph=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(So||0)};g.__private__.setCharSpace=g.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return So=v,this};var pl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(v){var k=g.CapJoinStyles[v];if(k===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pl=k,H(k+" J"),this};var Qn=0;g.__private__.setLineJoin=g.setLineJoin=function(v){var k=g.CapJoinStyles[v];if(k===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qn=k,H(k+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return H(M(T(v))+" M"),this},g.GState=hE,g.setGState=function(v){(v=typeof v=="string"?Ot[Zt[v]]:kh(null,v)).equals(tr)||(H("/"+v.id+" gs"),tr=v)};var kh=function(v,k){if(!v||!Zt[v]){var K=!1;for(var ne in Ot)if(Ot.hasOwnProperty(ne)&&Ot[ne].equals(k)){K=!0;break}if(K)k=Ot[ne];else{var de="GS"+(Object.keys(Ot).length+1).toString(10);Ot[de]=k,k.id=de}return v&&(Zt[v]=k.id),In.publish("addGState",k),k}};g.addGState=function(v,k){return kh(v,k),this},g.saveGraphicsState=function(){return H("q"),Kn.push({key:pt,size:Ue,color:gc}),this},g.restoreGraphicsState=function(){H("Q");var v=Kn.pop();return pt=v.key,Ue=v.size,gc=v.color,tr=null,this},g.setCurrentTransformationMatrix=function(v){return H(v.toString()+" cm"),this},g.comment=function(v){return H("#"+v),this};var Aa=function(v,k){var K=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return K},set:function(ke){isNaN(ke)||(K=parseFloat(ke))}});var ne=k||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ne},set:function(ke){isNaN(ke)||(ne=parseFloat(ke))}});var de="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return de},set:function(ke){de=ke.toString()}}),this},su=function(v,k,K,ne){Aa.call(this,v,k),this.type="rect";var de=K||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return de},set:function(je){isNaN(je)||(de=parseFloat(je))}});var ke=ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ke},set:function(je){isNaN(je)||(ke=parseFloat(je))}}),this},gl=function(){this.page=en,this.currentPage=G,this.pages=$e.slice(0),this.pagesContext=kt.slice(0),this.x=xt,this.y=Sr,this.matrix=vn,this.width=cu(G),this.height=Hd(G),this.outputDestination=He,this.id="",this.objectNumber=-1};gl.prototype.restore=function(){en=this.page,G=this.currentPage,kt=this.pagesContext,$e=this.pages,xt=this.x,Sr=this.y,vn=this.matrix,Yo(G,this.width),Da(G,this.height),He=this.outputDestination};var au=function(v,k,K,ne,de){fs.push(new gl),en=G=0,$e=[],xt=v,Sr=k,vn=de,Ia([K,ne])};for(var ea in g.beginFormObject=function(v,k,K,ne,de){return au(v,k,K,ne,de),this},g.endFormObject=function(v){return(function(k){if(Ho[k])fs.pop().restore();else{var K=new gl,ne="Xo"+(Object.keys(gi).length+1).toString(10);K.id=ne,Ho[k]=ne,gi[ne]=K,In.publish("addFormObject",K),fs.pop().restore()}})(v),this},g.doFormObject=function(v,k){var K=gi[Ho[v]];return H("q"),H(k.toString()+" cm"),H("/"+K.id+" Do"),H("Q"),this},g.getFormObject=function(v){var k=gi[Ho[v]];return{x:k.x,y:k.y,width:k.width,height:k.height,matrix:k.matrix}},g.save=function(v,k){return v=v||"generated.pdf",(k=k||{}).returnPromise=k.returnPromise||!1,k.returnPromise===!1?(wh(nu(Qs()),v),typeof wh.unload=="function"&&Yt.setTimeout&&setTimeout(wh.unload,911),this):new Promise(function(K,ne){try{var de=wh(nu(Qs()),v);typeof wh.unload=="function"&&Yt.setTimeout&&setTimeout(wh.unload,911),K(de)}catch(ke){ne(ke.message)}})},Ct.API)Ct.API.hasOwnProperty(ea)&&(ea==="events"&&Ct.API.events.length?(function(v,k){var K,ne,de;for(de=k.length-1;de!==-1;de--)K=k[de][0],ne=k[de][1],v.subscribe.apply(v,[K].concat(typeof ne=="function"?[ne]:ne))})(In,Ct.API.events):g[ea]=Ct.API[ea]);function cu(v){return kt[v].mediaBox.topRightX-kt[v].mediaBox.bottomLeftX}function Yo(v,k){kt[v].mediaBox.topRightX=k+kt[v].mediaBox.bottomLeftX}function Hd(v){return kt[v].mediaBox.topRightY-kt[v].mediaBox.bottomLeftY}function Da(v,k){kt[v].mediaBox.topRightY=k+kt[v].mediaBox.bottomLeftY}var Ao=g.getPageWidth=function(v){return cu(v=v||G)/Qt},Wd=g.setPageWidth=function(v,k){Yo(v,k*Qt)},Ta=g.getPageHeight=function(v){return Hd(v=v||G)/Qt},ml=g.setPageHeight=function(v,k){Da(v,k*Qt)};return g.internal={pdfEscape:Ji,getStyle:Rn,getFont:fl,getFontSize:at,getCharSpace:Ph,getTextColor:hl,getLineHeight:hc,getLineHeightFactor:Im,getLineWidth:Nh,write:Ze,getHorizontalCoordinate:Sa,getVerticalCoordinate:Mi,getCoordinateString:Sm,getVerticalCoordinateString:Am,collections:{},newObject:Zn,newAdditionalObject:Wo,newObjectDeferred:oi,newObjectDeferredBegin:mi,getFilters:Co,putStream:Vi,events:In,scaleFactor:Qt,pageSize:{getWidth:function(){return Ao(G)},setWidth:function(v){Wd(G,v)},getHeight:function(){return Ta(G)},setHeight:function(v){ml(G,v)}},encryptionOptions:u,encryption:zr,getEncryptor:function(v){return u!==null?zr.encryptor(v,0):function(k){return k}},output:qd,getNumberOfPages:jd,get pages(){return $e},out:H,f2:b,f3:A,getPageInfo:ji,getPageInfoByObjId:Ko,getCurrentPageInfo:ru,getPDFVersion:I,Point:Aa,Rectangle:su,Matrix:Mt,hasHotfix:Io},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Ao(G)},set:function(v){Wd(G,v)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ta(G)},set:function(v){ml(G,v)},enumerable:!0,configurable:!0}),(function(v){for(var k=0,K=At.length;k<K;k++){var ne=Vd.call(this,v[k][0],v[k][1],v[k][2],At[k][3],!0);p===!1&&(m[ne]=!0);var de=v[k][0].split("-");ll({id:ne,fontName:de[0],fontStyle:de[1]||""})}In.publish("addFonts",{fonts:on,dictionary:sn})}).call(g,At),pt="F1",Zs(i,t),In.publish("initialized"),g}gm.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},gm.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gm.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},gm.prototype.processOwnerPassword=function(n,e){return AP(SP(e).substr(0,5),n)},gm.prototype.encryptor=function(n,e){var t=SP(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return AP(t,r)}},hE.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Vn(n)!==Vn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Ct.API={events:[]},Ct.version="3.0.4";var Ur=Ct.API,MP=1,Eh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hm=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nn=function(n){return n.toFixed(2)},Rd=function(n){return n.toFixed(5)};Ur.__acroform__={};var us=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},LU=function(n){return n*MP},ol=function(n){var e=new o9,t=mt.internal.getHeight(n)||0,r=mt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(nn(r)),Number(nn(t))],e},yae=Ur.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},_ae=Ur.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},wae=Ur.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ni=Ur.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return wae(n,e-1)},ri=Ur.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yae(n,e-1)},ii=Ur.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _ae(n,e-1)},bae=Ur.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(o+a)||0,c.upperRight_X=t(i+s)||0,c.upperRight_Y=r(o)||0,[Number(nn(c.lowerLeft_X)),Number(nn(c.lowerLeft_Y)),Number(nn(c.upperRight_X)),Number(nn(c.upperRight_Y))]},xae=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=DP(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+nn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=ol(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},DP=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(b){return b.split(`
`)}):i.map(function(b){return[b]});var o=t,s=mt.internal.getHeight(n)||0;s=s<0?-s:s;var a=mt.internal.getWidth(n)||0;a=a<0?-a:a;var c=function(b,A,T){if(b+1<i.length){var te=A+" "+i[b+1][0];return oE(te,n,T).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var l,u,p=oE("3",n,o).height,m=n.multiline?s-o:(s-p)/2,g=m+=2,C=0,I=0,N=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+oE(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var P="",Q=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var W=!1;if(i[j].length!==1&&N!==i[j].length-1){if((p+2)*(Q+2)+2>s)continue e;P+=i[j][N],W=!0,I=j,j--}else{P=(P+=i[j][N]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var ae=parseInt(j),me=c(ae,P,o),z=j>=i.length-1;if(me&&!z){P+=" ",N=0;continue}if(me||z){if(z)I=ae;else if(n.multiline&&(p+2)*(Q+2)+2>s)continue e}else{if(!n.multiline||(p+2)*(Q+2)+2>s)continue e;I=ae}}for(var M="",S=C;S<=I;S++){var V=i[S];if(n.multiline){if(S===I){M+=V[N]+" ",N=(N+1)%V.length;continue}if(S===C){M+=V[V.length-1]+" ";continue}}M+=V[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,u=oE(M,n,o).width,n.textAlign){case"right":l=a-u-2;break;case"center":l=(a-u)/2;break;default:l=2}e+=nn(l)+" "+nn(g)+` Td
`,e+="("+Eh(M)+`) Tj
`,e+=-nn(l)+` 0 Td
`,g=-(o+2),u=0,C=W?I:I+1,Q++,P=""}break}return r.text=e,r.fontSize=o,r},oE=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},Eae={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Cae=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Iae=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(sc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Eae)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");MP=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new s9,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Cae(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],c=[],l=a.Rect;if(a.Rect&&(a.Rect=bae(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=mt.createDefaultAppearanceStream(a),Vn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=l,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=xae(a);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var p="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var g=a.appearanceStreamContent[m];if(p+="/"+m+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var s in g)if(g.hasOwnProperty(s)){var C=g[s];typeof C=="function"&&(C=C.call(i,a)),p+="/"+s+" "+C+" ",i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C)}}else typeof(C=g)=="function"&&(C=C.call(i,a)),p+="/"+s+" "+C,i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}o&&(function(I,N){for(var P in I)if(I.hasOwnProperty(P)){var Q=P,j=I[P];N.internal.newObjectDeferredBegin(j.objId,!0),Vn(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete I[Q]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},i9=Ur.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Vn(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Eh(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bP=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Eh(r(n))+")"},sl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};sl.prototype.toString=function(){return this.objId+" 0 R"},sl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},sl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:i9(i,this.objId,this.scope)}):i instanceof sl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var o9=function(){sl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};us(o9,sl);var s9=function(){sl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Eh(t(n))+")"}},set:function(t){n=t}})};us(s9,sl);var sc=function n(){sl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');e=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ni(e,3)},set:function(P){P?this.F=ri(e,3):this.F=ii(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');t=P}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(P){r=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(P){r[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(P){r[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(P){r[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(P){r[3]=P}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof pE)return;o="FieldObject"+n.FieldNum++}var P=function(Q){return Q};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+Eh(P(o))+")"},set:function(P){o=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(P){o=P}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(P){s=P}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(P){a=P}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(P){c=P}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/MP:l},set:function(P){l=P}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(P){u=P}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof pE||this instanceof xh))return bP(p,this.objId,this.scope)},set:function(P){P=P.toString(),p=P}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Fi==0?bP(m,this.objId,this.scope):m},set:function(P){P=P.toString(),m=this instanceof Fi==0?P.substr(0,1)==="("?hm(P.substr(1,P.length-2)):hm(P):P}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fi==1?hm(m.substr(1,m.length-1)):m},set:function(P){P=P.toString(),m=this instanceof Fi==1?"/"+P:P}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Fi==0?bP(g,this.objId,this.scope):g},set:function(P){P=P.toString(),g=this instanceof Fi==0?P.substr(0,1)==="("?hm(P.substr(1,P.length-2)):hm(P):P}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fi==1?hm(g.substr(1,g.length-1)):g},set:function(P){P=P.toString(),g=this instanceof Fi==1?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(P){P=!!P,I=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(P){C=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,1)},set:function(P){P?this.Ff=ri(this.Ff,1):this.Ff=ii(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,2)},set:function(P){P?this.Ff=ri(this.Ff,2):this.Ff=ii(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,3)},set:function(P){P?this.Ff=ri(this.Ff,3):this.Ff=ii(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');N=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(N){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};us(sc,sl);var ym=function(){sc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return i9(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,s,a){a||(a=1);for(var c,l=[];c=s.exec(o);)l.push(c[a]);return l})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,18)},set:function(t){t?this.Ff=ri(this.Ff,18):this.Ff=ii(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ri(this.Ff,19):this.Ff=ii(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,20)},set:function(t){t?(this.Ff=ri(this.Ff,20),e.sort()):this.Ff=ii(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,22)},set:function(t){t?this.Ff=ri(this.Ff,22):this.Ff=ii(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,23)},set:function(t){t?this.Ff=ri(this.Ff,23):this.Ff=ii(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,27)},set:function(t){t?this.Ff=ri(this.Ff,27):this.Ff=ii(this.Ff,27)}}),this.hasAppearanceStream=!1};us(ym,sc);var _m=function(){ym.call(this),this.fontName="helvetica",this.combo=!1};us(_m,ym);var wm=function(){_m.call(this),this.combo=!0};us(wm,_m);var lE=function(){wm.call(this),this.edit=!0};us(lE,wm);var Fi=function(){sc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,15)},set:function(t){t?this.Ff=ri(this.Ff,15):this.Ff=ii(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,16)},set:function(t){t?this.Ff=ri(this.Ff,16):this.Ff=ii(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,17)},set:function(t){t?this.Ff=ri(this.Ff,17):this.Ff=ii(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,26)},set:function(t){t?this.Ff=ri(this.Ff,26):this.Ff=ii(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Eh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Vn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};us(Fi,sc);var uE=function(){Fi.call(this),this.pushButton=!0};us(uE,Fi);var bm=function(){Fi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};us(bm,Fi);var pE=function(){var n,e;sc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+Eh(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Vn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};us(pE,sc),bm.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},bm.prototype.createOption=function(n){var e=new pE;return e.Parent=this,e.optionName=n,this.Kids.push(e),Sae.call(this.scope,e),e};var dE=function(){Fi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mt.CheckBox.createAppearanceStream()};us(dE,Fi);var xh=function(){sc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,13)},set:function(e){e?this.Ff=ri(this.Ff,13):this.Ff=ii(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,21)},set:function(e){e?this.Ff=ri(this.Ff,21):this.Ff=ii(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,23)},set:function(e){e?this.Ff=ri(this.Ff,23):this.Ff=ii(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,24)},set:function(e){e?this.Ff=ri(this.Ff,24):this.Ff=ii(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,25)},set:function(e){e?this.Ff=ri(this.Ff,25):this.Ff=ii(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,26)},set:function(e){e?this.Ff=ri(this.Ff,26):this.Ff=ii(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};us(xh,sc);var fE=function(){xh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,14)},set:function(n){n?this.Ff=ri(this.Ff,14):this.Ff=ii(this.Ff,14)}}),this.password=!0};us(fE,xh);var mt={CheckBox:{createAppearanceStream:function(){return{N:{On:mt.CheckBox.YesNormal},D:{On:mt.CheckBox.YesPushDown,Off:mt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=DP(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+nn(mt.internal.getWidth(n))+" "+nn(mt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+nn(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=ol(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=mt.internal.getHeight(n),s=mt.internal.getWidth(n),a=DP(n,n.caption);return i.push("1 g"),i.push("0 0 "+nn(s)+" "+nn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+nn(s-1)+" "+nn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+nn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+nn(mt.internal.getWidth(n))+" "+nn(mt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:mt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=mt.RadioButton.Circle.YesNormal,e.D[n]=mt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=ol(n);e.scope=n.scope;var t=[],r=mt.internal.getWidth(n)<=mt.internal.getHeight(n)?mt.internal.getWidth(n)/4:mt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=mt.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Rd(mt.internal.getWidth(n)/2)+" "+Rd(mt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=[],r=mt.internal.getWidth(n)<=mt.internal.getHeight(n)?mt.internal.getWidth(n)/4:mt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*mt.internal.Bezier_C).toFixed(5)),s=Number((r*mt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Rd(mt.internal.getWidth(n)/2)+" "+Rd(mt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Rd(mt.internal.getWidth(n)/2)+" "+Rd(mt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=[],r=mt.internal.getWidth(n)<=mt.internal.getHeight(n)?mt.internal.getWidth(n)/4:mt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*mt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Rd(mt.internal.getWidth(n)/2)+" "+Rd(mt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:mt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=mt.RadioButton.Cross.YesNormal,e.D[n]=mt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=ol(n);e.scope=n.scope;var t=[],r=mt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+nn(mt.internal.getWidth(n)-2)+" "+nn(mt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(nn(r.x1.x)+" "+nn(r.x1.y)+" m"),t.push(nn(r.x2.x)+" "+nn(r.x2.y)+" l"),t.push(nn(r.x4.x)+" "+nn(r.x4.y)+" m"),t.push(nn(r.x3.x)+" "+nn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=mt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+nn(mt.internal.getWidth(n))+" "+nn(mt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+nn(mt.internal.getWidth(n)-2)+" "+nn(mt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(nn(t.x1.x)+" "+nn(t.x1.y)+" m"),r.push(nn(t.x2.x)+" "+nn(t.x2.y)+" l"),r.push(nn(t.x4.x)+" "+nn(t.x4.y)+" m"),r.push(nn(t.x3.x)+" "+nn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+nn(mt.internal.getWidth(n))+" "+nn(mt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};mt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=mt.internal.getWidth(n),t=mt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},mt.internal.getWidth=function(n){var e=0;return Vn(n)==="object"&&(e=LU(n.Rect[2])),e},mt.internal.getHeight=function(n){var e=0;return Vn(n)==="object"&&(e=LU(n.Rect[3])),e};var Sae=Ur.addField=function(n){if(Iae(this,n),!(n instanceof sc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Ur.AcroFormChoiceField=ym,Ur.AcroFormListBox=_m,Ur.AcroFormComboBox=wm,Ur.AcroFormEditBox=lE,Ur.AcroFormButton=Fi,Ur.AcroFormPushButton=uE,Ur.AcroFormRadioButton=bm,Ur.AcroFormCheckBox=dE,Ur.AcroFormTextField=xh,Ur.AcroFormPasswordField=fE,Ur.AcroFormAppearance=mt,Ur.AcroForm={ChoiceField:ym,ListBox:_m,ComboBox:wm,EditBox:lE,Button:Fi,PushButton:uE,RadioButton:bm,CheckBox:dE,TextField:xh,PasswordField:fE,Appearance:mt},Ct.AcroForm={ChoiceField:ym,ListBox:_m,ComboBox:wm,EditBox:lE,Button:Fi,PushButton:uE,RadioButton:bm,CheckBox:dE,TextField:xh,PasswordField:fE,Appearance:mt};var NMe=Ct.AcroForm;function a9(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(b,A){var T,te,be,De,Ae,he=t;if((A=A||t)==="RGBA"||b.data!==void 0&&b.data instanceof Uint8ClampedArray&&"height"in b&&"width"in b)return"RGBA";if(me(b))for(Ae in r)for(be=r[Ae],T=0;T<be.length;T+=1){for(De=!0,te=0;te<be[T].length;te+=1)if(be[T][te]!==void 0&&be[T][te]!==b[te]){De=!1;break}if(De===!0){he=Ae;break}}else for(Ae in r)for(be=r[Ae],T=0;T<be.length;T+=1){for(De=!0,te=0;te<be[T].length;te+=1)if(be[T][te]!==void 0&&be[T][te]!==b.charCodeAt(te)){De=!1;break}if(De===!0){he=Ae;break}}return he===t&&A!==t&&(he=A),he},o=function b(A){for(var T=this.internal.write,te=this.internal.putStream,be=(0,this.internal.getFilters)();be.indexOf("FlateEncode")!==-1;)be.splice(be.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var De=[];if(De.push({key:"Type",value:"/XObject"}),De.push({key:"Subtype",value:"/Image"}),De.push({key:"Width",value:A.width}),De.push({key:"Height",value:A.height}),A.colorSpace===P.INDEXED?De.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(De.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===P.DEVICE_CMYK&&De.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),De.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&De.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)&&A.transparency.length>0){for(var Ae="",he=0,Te=A.transparency.length;he<Te;he++)Ae+=A.transparency[he]+" "+A.transparency[he]+" ";De.push({key:"Mask",value:"["+Ae+"]"})}A.sMask!==void 0&&De.push({key:"SMask",value:A.objectId+1+" 0 R"});var Ge=A.filter!==void 0?["/"+A.filter]:void 0;if(te({data:A.data,additionalKeyValues:De,alreadyAppliedFilters:Ge,objectId:A.objectId}),T("endobj"),"sMask"in A&&A.sMask!==void 0){var Le,L=(Le=A.sMaskBitsPerComponent)!==null&&Le!==void 0?Le:A.bitsPerComponent,G={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:A.sMask};"filter"in A&&(G.decodeParameters="/Predictor ".concat(A.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(A.width),G.filter=A.filter),b.call(this,G)}if(A.colorSpace===P.INDEXED){var J=this.internal.newObject();te({data:M(new Uint8Array(A.palette)),objectId:J}),T("endobj")}},s=function(){var b=this.internal.collections[e+"images"];for(var A in b)o.call(this,b[A])},a=function(){var b,A=this.internal.collections[e+"images"],T=this.internal.write;for(var te in A)T("/I"+(b=A[te]).index,b.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var b=this.internal.collections[e+"images"];return c.call(this),b},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(b){return typeof n["process"+b.toUpperCase()]=="function"},m=function(b){return Vn(b)==="object"&&b.nodeType===1},g=function(b,A){if(b.nodeName==="IMG"&&b.hasAttribute("src")){var T=""+b.getAttribute("src");if(T.indexOf("data:image/")===0)return cE(unescape(T).split("base64,").pop());var te=n.loadFile(T,!0);if(te!==void 0)return te}if(b.nodeName==="CANVAS"){if(b.width===0||b.height===0)throw new Error("Given canvas must have data. Canvas width: "+b.width+", height: "+b.height);var be;switch(A){case"PNG":be="image/png";break;case"WEBP":be="image/webp";break;default:be="image/jpeg"}return cE(b.toDataURL(be,1).split("base64,").pop())}},C=function(b){var A=this.internal.collections[e+"images"];if(A){for(var T in A)if(b===A[T].alias)return A[T]}},I=function(b,A,T){return b||A||(b=-96,A=-96),b<0&&(b=-1*T.width*72/b/this.internal.scaleFactor),A<0&&(A=-1*T.height*72/A/this.internal.scaleFactor),b===0&&(b=A*T.width/T.height),A===0&&(A=b*T.height/T.width),[b,A]},N=function(b,A,T,te,be,De){var Ae=I.call(this,T,te,be),he=this.internal.getCoordinateString,Te=this.internal.getVerticalCoordinateString,Ge=l.call(this);if(T=Ae[0],te=Ae[1],Ge[be.index]=be,De){De*=Math.PI/180;var Le=Math.cos(De),L=Math.sin(De),G=function(re){return re.toFixed(4)},J=[G(Le),G(L),G(-1*L),G(Le),0,0,"cm"]}this.internal.write("q"),De?(this.internal.write([1,"0","0",1,he(b),Te(A+te),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([he(T),"0","0",he(te),"0","0","cm"].join(" "))):this.internal.write([he(T),"0","0",he(te),he(b),Te(A+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+be.index+" Do"),this.internal.write("Q")},P=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Q=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=n.__addimage__.sHashCode=function(b){var A,T,te=0;if(typeof b=="string")for(T=b.length,A=0;A<T;A++)te=(te<<5)-te+b.charCodeAt(A),te|=0;else if(me(b))for(T=b.byteLength/2,A=0;A<T;A++)te=(te<<5)-te+b[A],te|=0;return te},W=n.__addimage__.validateStringAsBase64=function(b){(b=b||"").toString().trim();var A=!0;return b.length===0&&(A=!1),b.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(b.substr(0,b.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(b.substr(-2))===!1&&(A=!1),A},ae=n.__addimage__.extractImageFromDataUrl=function(b){if(b==null||!(b=b.trim()).startsWith("data:"))return null;var A=b.indexOf(",");return A<0?null:b.substring(0,A).trim().endsWith("base64")?b.substring(A+1):null};n.__addimage__.isArrayBuffer=function(b){return b instanceof ArrayBuffer};var me=n.__addimage__.isArrayBufferView=function(b){return b instanceof Int8Array||b instanceof Uint8Array||b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array},z=n.__addimage__.binaryStringToUint8Array=function(b){for(var A=b.length,T=new Uint8Array(A),te=0;te<A;te++)T[te]=b.charCodeAt(te);return T},M=n.__addimage__.arrayBufferToBinaryString=function(b){for(var A="",T=me(b)?b:new Uint8Array(b),te=0;te<T.length;te+=8192)A+=String.fromCharCode.apply(null,T.subarray(te,te+8192));return A};n.addImage=function(){var b,A,T,te,be,De,Ae,he,Te;if(typeof arguments[1]=="number"?(A=t,T=arguments[1],te=arguments[2],be=arguments[3],De=arguments[4],Ae=arguments[5],he=arguments[6],Te=arguments[7]):(A=arguments[1],T=arguments[2],te=arguments[3],be=arguments[4],De=arguments[5],Ae=arguments[6],he=arguments[7],Te=arguments[8]),Vn(b=arguments[0])==="object"&&!m(b)&&"imageData"in b){var Ge=b;b=Ge.imageData,A=Ge.format||A||t,T=Ge.x||T||0,te=Ge.y||te||0,be=Ge.w||Ge.width||be,De=Ge.h||Ge.height||De,Ae=Ge.alias||Ae,he=Ge.compression||he,Te=Ge.rotation||Ge.angle||Te}var Le=this.internal.getFilters();if(he===void 0&&Le.indexOf("FlateEncode")!==-1&&(he="SLOW"),isNaN(T)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var L=S.call(this,b,A,Ae,he);return N.call(this,T,te,be,De,L,Te),this};var S=function(b,A,T,te){var be,De,Ae;if(typeof b=="string"&&i(b)===t){b=unescape(b);var he=V(b,!1);(he!==""||(he=n.loadFile(b,!0))!==void 0)&&(b=he)}if(m(b)&&(b=g(b,A)),A=i(b,A),!p(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((Ae=T)==null||Ae.length===0)&&(T=(function(Te){return typeof Te=="string"||me(Te)?j(Te):me(Te.data)?j(Te.data):null})(b)),(be=C.call(this,T))||(b instanceof Uint8Array||A==="RGBA"||(De=b,b=z(b)),be=this["process"+A.toUpperCase()](b,u.call(this),T,(function(Te){return Te&&typeof Te=="string"&&(Te=Te.toUpperCase()),Te in n.image_compression?Te:Q.NONE})(te),De)),!be)throw new Error("An unknown error occurred whilst processing the image.");return be},V=n.__addimage__.convertBase64ToBinaryString=function(b,A){A=typeof A!="boolean"||A;var T,te="";if(typeof b=="string"){var be;T=(be=ae(b))!==null&&be!==void 0?be:b;try{te=cE(T)}catch(De){if(A)throw W(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+De.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};n.getImageProperties=function(b){var A,T,te="";if(m(b)&&(b=g(b)),typeof b=="string"&&i(b)===t&&((te=V(b,!1))===""&&(te=n.loadFile(b)||""),b=te),T=i(b),!p(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(b instanceof Uint8Array||(b=z(b)),!(A=this["process"+T.toUpperCase()](b)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=T,A}})(Ct.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Ct.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,u=!1,p=0;p<l.length&&!u;p++)switch((r=l[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<l.length;m++){r=l[m];var g=this.internal.pdfEscape,C=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(I.objId),Q=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(P(r.contents))+")",o+=" /Popup "+N.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+g(P(Q))+") >>",I.content=o;var j=I.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(o+=" /Open true"),o+=" >>",N.content=o,this.internal.write(I.objId,"0 R",N.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var W=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(C(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var ae=this.annotations._nameMap[r.options.name];r.options.pageNumber=ae.page,r.options.top=ae.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var me=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+me+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(t),y:l(r),w:c(t+i),h:l(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,c=this.getTextWidth(t),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var u=this.splitTextToSize(t,a).length;s=Math.ceil(l*u)}else a=c,s=l;return this.text(t,r,i,o),i+=.2*l,o.align==="center"&&(r-=c/2),o.align==="right"&&(r-=c),this.link(r,i-l,a,s,o),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(Ct.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(I){return e[I.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},a=n.__arabicParser__.isArabicEndLetter=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(I){return s(I)&&i.indexOf(I.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length>=1};var l=n.__arabicParser__.arabicLetterHasFinalForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(I){var N=0,P=t,Q="",j=0;for(N=0;N<I.length;N+=1)P[I.charCodeAt(N)]!==void 0?(j++,typeof(P=P[I.charCodeAt(N)])=="number"&&(Q+=String.fromCharCode(P),P=t,j=0),N===I.length-1&&(P=t,Q+=I.charAt(N-(j-1)),N-=j-1,j=0)):(P=t,Q+=I.charAt(N-j),N-=j,j=0);return Q};n.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&r[I.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(I,N,P){return s(I)?o(I)===!1?-1:!l(I)||!s(N)&&!s(P)||!s(P)&&a(N)||a(I)&&!s(N)||a(I)&&c(N)||a(I)&&a(N)?0:u(I)&&s(N)&&!a(N)&&s(P)&&l(P)?3:a(I)||!s(P)?1:2:-1},g=function(I){var N=0,P=0,Q=0,j="",W="",ae="",me=(I=I||"").split("\\s+"),z=[];for(N=0;N<me.length;N+=1){for(z.push(""),P=0;P<me[N].length;P+=1)j=me[N][P],W=me[N][P-1],ae=me[N][P+1],s(j)?(Q=m(j,W,ae),z[N]+=Q!==-1?String.fromCharCode(e[j.charCodeAt(0)][Q]):j):z[N]+=j;z[N]=p(z[N])}return z.join(" ")},C=n.__arabicParser__.processArabic=n.processArabic=function(){var I,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(N)){var Q=0;for(P=[],Q=0;Q<N.length;Q+=1)Array.isArray(N[Q])?P.push([g(N[Q][0]),N[Q][1],N[Q][2]]):P.push([g(N[Q])]);I=P}else I=g(N);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};n.events.push(["preProcessText",C])})(Ct.API),Ct.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ct.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(I){c=I}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(I){l=I}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(I){u=I}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(I){p=I}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(I){m=I}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(I){g=I}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(I){C=I}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,l){r.call(this);var u=(l=l||{}).fontSize||this.getFontSize(),p=l.font||this.getFont(),m=l.scaleFactor||this.internal.scaleFactor,g=0,C=0,I=0,N=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var P=l.maxWidth;P>0?typeof c=="string"?c=this.splitTextToSize(c,P):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,W){return j.concat(N.splitTextToSize(W,P))},[])):c=Array.isArray(c)?c:[c];for(var Q=0;Q<c.length;Q++)g<(I=this.getStringUnitWidth(c[Q],{font:p})*u)&&(g=I);return g!==0&&(C=c.length),{w:g/=m,h:Math.max((C*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var l=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===c.lineNumber?(c.x=(l.x||0)+(l.width||0),c.y=l.y||0):l.y+l.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,g&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=l.y+l.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};n.table=function(c,l,u,p,m){if(r.call(this),!u)throw new Error("No data for PDF table.");var g,C,I,N,P=[],Q=[],j=[],W={},ae={},me=[],z=[],M=(m=m||{}).autoSize||!1,S=m.printHeaders!==!1,V=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,b=m.margins||Object.assign({width:this.getPageWidth()},e),A=typeof m.padding=="number"?m.padding:3,T=m.headerBackgroundColor||"#c8c8c8",te=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=b,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=te,this.setFontSize(V),p==null)Q=P=Object.keys(u[0]),j=P.map(function(){return"left"});else if(Array.isArray(p)&&Vn(p[0])==="object")for(P=p.map(function(Ge){return Ge.name}),Q=p.map(function(Ge){return Ge.prompt||Ge.name||""}),j=p.map(function(Ge){return Ge.align||"left"}),g=0;g<p.length;g+=1)ae[p[g].name]=.7499990551181103*p[g].width;else Array.isArray(p)&&typeof p[0]=="string"&&(Q=P=p,j=P.map(function(){return"left"}));if(M||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<P.length;g+=1){for(W[N=P[g]]=u.map(function(Ge){return Ge[N]}),this.setFont(void 0,"bold"),me.push(this.getTextDimensions(Q[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=W[N],this.setFont(void 0,"normal"),I=0;I<C.length;I+=1)me.push(this.getTextDimensions(C[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ae[N]=Math.max.apply(null,me)+A+A,me=[]}if(S){var be={};for(g=0;g<P.length;g+=1)be[P[g]]={},be[P[g]].text=Q[g],be[P[g]].align=j[g];var De=a.call(this,be,ae);z=P.map(function(Ge){return new o(c,l,ae[Ge],De,be[Ge].text,void 0,be[Ge].align)}),this.setTableHeaderRow(z),this.printHeaderRow(1,!1)}var Ae=p.reduce(function(Ge,Le){return Ge[Le.name]=Le.align,Ge},{});for(g=0;g<u.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:u[g]},this);var he=a.call(this,u[g],ae);for(I=0;I<P.length;I+=1){var Te=u[g][P[I]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:I,data:Te},this),s.call(this,new o(c,l,ae[P[I]],he,Te,g+2,Ae[P[I]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=l,this};var a=function(c,l){var u=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(g){var C=c[g];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,l[g]-u-u)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/m+u+u},this).reduce(function(g,C){return Math.max(g,C)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,l){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){u=this.internal.__cell__.tableHeaderRow[g].clone(),l&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(C)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}})(Ct.API);var c9={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},l9=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],TP=a9(l9),u9=[100,200,300,400,500,600,700,800,900],Aae=a9(u9);function xP(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return c9[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof TP[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function FU(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Dae={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},VU={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function jU(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function BU(n){return n.trimLeft()}function Tae(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Mae(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var sE,UU,zU,pm,aE,qU,$U,HU,EP=["times"];function WU(n,e,t,r,i){var o=4,s=KU;switch(i){case Ct.API.image_compression.FAST:o=1,s=GU;break;case Ct.API.image_compression.MEDIUM:o=6,s=YU;break;case Ct.API.image_compression.SLOW:o=9,s=ZU}n=(function(c,l,u,p){for(var m,g=c.length/l,C=new Uint8Array(c.length+g),I=[Nae,GU,KU,YU,ZU],N=0;N<g;N+=1){var P=N*l,Q=c.subarray(P,P+l);if(p)C.set(p(Q,u,m),P+N);else{for(var j=I.length,W=[],ae=0;ae<j;ae+=1)W[ae]=I[ae](Q,u,m);var me=kae(W.concat());C.set(W[me],P+N)}m=Q}return C})(n,e,Math.ceil(t*r/8),s);var a=Lx(n,{level:o});return Ct.API.__addimage__.arrayBufferToBinaryString(a)}function Nae(n){var e=Array.apply([],n);return e.unshift(0),e}function GU(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function KU(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var s=t&&t[o]||0;i[o+1]=n[o]-s+256&255}return i}function YU(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var s=n[o-e]||0,a=t&&t[o]||0;i[o+1]=n[o]+256-(s+a>>>1)&255}return i}function ZU(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var s=Pae(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-s+256&255}return i}function Pae(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function kae(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function CP(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),s=(1<<t)-1;return d9(n,i)>>o&s}function QU(n,e,t,r){var i=t*r,o=Math.floor(i/8),s=16-(i-8*o+r),a=(1<<r)-1,c=(e&a)<<s;(function(l,u,p){if(u+1<l.byteLength)l.setUint16(u,p,!1);else{var m=p>>8&255;l.setUint8(u,m)}})(n,o,d9(n,o)&~(a<<s)&65535|c)}function d9(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function Rae(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<1+(7&i);n[e++],n[e++];var a=null,c=null;o&&(a=e,c=s,e+=3*s);var l=!0,u=[],p=0,m=null,g=0,C=null;for(this.width=t,this.height=r;l&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,C=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var I=n[e++];p=n[e++]|n[e++]<<8,m=n[e++],1&I||(m=null),g=I>>2&7,e++;break;case 254:for(;;){if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var N=n[e++]|n[e++]<<8,P=n[e++]|n[e++]<<8,Q=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,W=n[e++],ae=W>>6&1,me=1<<1+(7&W),z=a,M=c,S=!1;W>>7&&(S=!0,z=e,M=me,e+=3*me);var V=e;for(e++;;){var b;if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}u.push({x:N,y:P,width:Q,height:j,has_local_palette:S,palette_offset:z,palette_size:M,data_offset:V,data_length:e-V,transparent_index:m,interlaced:!!ae,delay:p,disposal:g});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return C},this.frameInfo=function(A){if(A<0||A>=u.length)throw new Error("Frame index out of range.");return u[A]},this.decodeAndBlitFrameBGRA=function(A,T){var te=this.frameInfo(A),be=te.width*te.height,De=new Uint8Array(be);XU(n,te.data_offset,De,be);var Ae=te.palette_offset,he=te.transparent_index;he===null&&(he=256);var Te=te.width,Ge=t-Te,Le=Te,L=4*(te.y*t+te.x),G=4*((te.y+te.height)*t+te.x),J=L,re=4*Ge;te.interlaced===!0&&(re+=4*t*7);for(var oe=8,ue=0,xe=De.length;ue<xe;++ue){var Ie=De[ue];if(Le===0&&(Le=Te,(J+=re)>=G&&(re=4*Ge+4*t*(oe-1),J=L+(Te+Ge)*(oe<<1),oe>>=1)),Ie===he)J+=4;else{var Pe=n[Ae+3*Ie],$e=n[Ae+3*Ie+1],et=n[Ae+3*Ie+2];T[J++]=et,T[J++]=$e,T[J++]=Pe,T[J++]=255}--Le}},this.decodeAndBlitFrameRGBA=function(A,T){var te=this.frameInfo(A),be=te.width*te.height,De=new Uint8Array(be);XU(n,te.data_offset,De,be);var Ae=te.palette_offset,he=te.transparent_index;he===null&&(he=256);var Te=te.width,Ge=t-Te,Le=Te,L=4*(te.y*t+te.x),G=4*((te.y+te.height)*t+te.x),J=L,re=4*Ge;te.interlaced===!0&&(re+=4*t*7);for(var oe=8,ue=0,xe=De.length;ue<xe;++ue){var Ie=De[ue];if(Le===0&&(Le=Te,(J+=re)>=G&&(re=4*Ge+4*t*(oe-1),J=L+(Te+Ge)*(oe<<1),oe>>=1)),Ie===he)J+=4;else{var Pe=n[Ae+3*Ie],$e=n[Ae+3*Ie+1],et=n[Ae+3*Ie+2];T[J++]=Pe,T[J++]=$e,T[J++]=et,T[J++]=255}--Le}}}function XU(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,c=i+1,l=(1<<c)-1,u=0,p=0,m=0,g=n[e++],C=new Int32Array(4096),I=null;;){for(;u<16&&g!==0;)p|=n[e++]<<u,u+=8,g===1?g=n[e++]:--g;if(u<c)break;var N=p&l;if(p>>=c,u-=c,N!==o){if(N===s)break;for(var P=N<a?N:I,Q=0,j=P;j>o;)j=C[j]>>8,++Q;var W=j;if(m+Q+(P!==N?1:0)>r)return void ar.log("Warning, gif stream longer than expected.");t[m++]=W;var ae=m+=Q;for(P!==N&&(t[m++]=W),j=P;Q--;)j=C[j],t[--ae]=255&j,j>>=8;I!==null&&a<4096&&(C[a++]=I<<8|W,a>=l+1&&c<12&&(++c,l=l<<1|1)),I=N}else a=s+1,l=(1<<(c=i+1))-1,I=null}return m!==r&&ar.log("Warning, gif stream shorter than expected."),t}function IP(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),p=new Array(65535),m=new Array(65535),g=new Array(64),C=new Array(64),I=[],N=0,P=7,Q=new Array(64),j=new Array(64),W=new Array(64),ae=new Array(256),me=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],b=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],be=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function De(L,G){for(var J=0,re=0,oe=new Array,ue=1;ue<=16;ue++){for(var xe=1;xe<=L[ue];xe++)oe[G[re]]=[],oe[G[re]][0]=J,oe[G[re]][1]=ue,re++,J++;J*=2}return oe}function Ae(L){for(var G=L[0],J=L[1]-1;J>=0;)G&1<<J&&(N|=1<<P),J--,--P<0&&(N==255?(he(255),he(0)):he(N),P=7,N=0)}function he(L){I.push(L)}function Te(L){he(L>>8&255),he(255&L)}function Ge(L,G,J,re,oe){for(var ue,xe=oe[0],Ie=oe[240],Pe=(function(Ue,Dt){var at,Et,It,Cn,gn,Wt,Lt,Ft,pt,Qt,xt=0;for(pt=0;pt<8;++pt){at=Ue[xt],Et=Ue[xt+1],It=Ue[xt+2],Cn=Ue[xt+3],gn=Ue[xt+4],Wt=Ue[xt+5],Lt=Ue[xt+6];var Sr=at+(Ft=Ue[xt+7]),vn=at-Ft,on=Et+Lt,sn=Et-Lt,Kn=It+Wt,Nt=It-Wt,Yn=Cn+gn,Ot=Cn-gn,Zt=Sr+Yn,tr=Sr-Yn,en=on+Kn,kt=on-Kn;Ue[xt]=Zt+en,Ue[xt+4]=Zt-en;var In=.707106781*(kt+tr);Ue[xt+2]=tr+In,Ue[xt+6]=tr-In;var bo=.382683433*((Zt=Ot+Nt)-(kt=sn+vn)),gi=.5411961*Zt+bo,Ho=1.306562965*kt+bo,fs=.707106781*(en=Nt+sn),Mt=vn+fs,Ys=vn-fs;Ue[xt+5]=Ys+gi,Ue[xt+3]=Ys-gi,Ue[xt+1]=Mt+Ho,Ue[xt+7]=Mt-Ho,xt+=8}for(xt=0,pt=0;pt<8;++pt){at=Ue[xt],Et=Ue[xt+8],It=Ue[xt+16],Cn=Ue[xt+24],gn=Ue[xt+32],Wt=Ue[xt+40],Lt=Ue[xt+48];var pr=at+(Ft=Ue[xt+56]),xo=at-Ft,Ti=Et+Lt,Zn=Et-Lt,oi=It+Wt,mi=It-Wt,Wo=Cn+gn,cc=Cn-gn,hs=pr+Wo,Eo=pr-Wo,Go=Ti+oi,Co=Ti-oi;Ue[xt]=hs+Go,Ue[xt+32]=hs-Go;var Vi=.707106781*(Co+Eo);Ue[xt+16]=Eo+Vi,Ue[xt+48]=Eo-Vi;var Xi=.382683433*((hs=cc+mi)-(Co=Zn+xo)),ps=.5411961*hs+Xi,lc=1.306562965*Co+Xi,uc=.707106781*(Go=mi+Zn),dc=xo+uc,cl=xo-uc;Ue[xt+40]=cl+ps,Ue[xt+24]=cl-ps,Ue[xt+8]=dc+lc,Ue[xt+56]=dc-lc,xt++}for(pt=0;pt<64;++pt)Qt=Ue[pt]*Dt[pt],g[pt]=Qt>0?Qt+.5|0:Qt-.5|0;return g})(L,G),$e=0;$e<64;++$e)C[z[$e]]=Pe[$e];var et=C[0]-J;J=C[0],et==0?Ae(re[0]):(Ae(re[m[ue=32767+et]]),Ae(p[ue]));for(var He=63;He>0&&C[He]==0;)He--;if(He==0)return Ae(xe),J;for(var st,H=1;H<=He;){for(var Ze=H;C[H]==0&&H<=He;)++H;var Rt=H-Ze;if(Rt>=16){st=Rt>>4;for(var At=1;At<=st;++At)Ae(Ie);Rt&=15}ue=32767+C[H],Ae(oe[(Rt<<4)+m[ue]]),Ae(p[ue]),H++}return He!=63&&Ae(xe),J}function Le(L){L=Math.min(Math.max(L,1),100),o!=L&&((function(G){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var oe=s((J[re]*G+50)/100);oe=Math.min(Math.max(oe,1),255),a[z[re]]=oe}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var Ie=s((ue[xe]*G+50)/100);Ie=Math.min(Math.max(Ie,1),255),c[z[xe]]=Ie}for(var Pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],$e=0,et=0;et<8;et++)for(var He=0;He<8;He++)l[$e]=1/(a[z[$e]]*Pe[et]*Pe[He]*8),u[$e]=1/(c[z[$e]]*Pe[et]*Pe[He]*8),$e++})(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),o=L)}this.encode=function(L,G){G&&Le(G),I=new Array,N=0,P=7,Te(65496),Te(65504),Te(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),Te(1),Te(1),he(0),he(0),(function(){Te(65499),Te(132),he(0);for(var Et=0;Et<64;Et++)he(a[Et]);he(1);for(var It=0;It<64;It++)he(c[It])})(),(function(Et,It){Te(65472),Te(17),he(8),Te(It),Te(Et),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1)})(L.width,L.height),(function(){Te(65476),Te(418),he(0);for(var Et=0;Et<16;Et++)he(M[Et+1]);for(var It=0;It<=11;It++)he(S[It]);he(16);for(var Cn=0;Cn<16;Cn++)he(V[Cn+1]);for(var gn=0;gn<=161;gn++)he(b[gn]);he(1);for(var Wt=0;Wt<16;Wt++)he(A[Wt+1]);for(var Lt=0;Lt<=11;Lt++)he(T[Lt]);he(17);for(var Ft=0;Ft<16;Ft++)he(te[Ft+1]);for(var pt=0;pt<=161;pt++)he(be[pt])})(),Te(65498),Te(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var J=0,re=0,oe=0;N=0,P=7,this.encode.displayName="_encode_";for(var ue,xe,Ie,Pe,$e,et,He,st,H,Ze=L.data,Rt=L.width,At=L.height,Ue=4*Rt,Dt=0;Dt<At;){for(ue=0;ue<Ue;){for($e=Ue*Dt+ue,He=-1,st=0,H=0;H<64;H++)et=$e+(st=H>>3)*Ue+(He=4*(7&H)),Dt+st>=At&&(et-=Ue*(Dt+1+st-At)),ue+He>=Ue&&(et-=ue+He-Ue+4),xe=Ze[et++],Ie=Ze[et++],Pe=Ze[et++],Q[H]=(me[xe]+me[Ie+256|0]+me[Pe+512|0]>>16)-128,j[H]=(me[xe+768|0]+me[Ie+1024|0]+me[Pe+1280|0]>>16)-128,W[H]=(me[xe+1280|0]+me[Ie+1536|0]+me[Pe+1792|0]>>16)-128;J=Ge(Q,l,J,e,r),re=Ge(j,u,re,t,i),oe=Ge(W,u,oe,t,i),ue+=32}Dt+=8}if(P>=0){var at=[];at[1]=P+1,at[0]=(1<<P+1)-1,Ae(at)}return Te(65497),new Uint8Array(I)},n=n||50,(function(){for(var L=String.fromCharCode,G=0;G<256;G++)ae[G]=L(G)})(),e=De(M,S),t=De(A,T),r=De(V,b),i=De(te,be),(function(){for(var L=1,G=2,J=1;J<=15;J++){for(var re=L;re<G;re++)m[32767+re]=J,p[32767+re]=[],p[32767+re][1]=J,p[32767+re][0]=re;for(var oe=-(G-1);oe<=-L;oe++)m[32767+oe]=J,p[32767+oe]=[],p[32767+oe][1]=J,p[32767+oe][0]=G-1+oe;L<<=1,G<<=1}})(),(function(){for(var L=0;L<256;L++)me[L]=19595*L,me[L+256|0]=38470*L,me[L+512|0]=7471*L+32768,me[L+768|0]=-11059*L,me[L+1024|0]=-21709*L,me[L+1280|0]=32768*L+8421375,me[L+1536|0]=-27439*L,me[L+1792|0]=-5329*L})(),Le(n)}function oc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function JU(n){function e(S){if(!S)throw Error("assert :P")}function t(S,V,b){for(var A=0;4>A;A++)if(S[V+A]!=b.charCodeAt(A))return!0;return!1}function r(S,V,b,A,T){for(var te=0;te<T;te++)S[V+te]=b[A+te]}function i(S,V,b,A){for(var T=0;T<A;T++)S[V+T]=b}function o(S){return new Int32Array(S)}function s(S,V){for(var b=[],A=0;A<S;A++)b.push(new V);return b}function a(S,V){var b=[];return(function A(T,te,be){for(var De=be[te],Ae=0;Ae<De&&(T.push(be.length>te+1?[]:new V),!(be.length<te+1));Ae++)A(T[Ae],te+1,be)})(b,0,S),b}var c=function(){var S=this;function V(d,h){for(var y=1<<h-1>>>0;d&y;)y>>>=1;return y?(d&y-1)+y:d}function b(d,h,y,w,R){e(!(w%y));do d[h+(w-=y)]=R;while(0<w)}function A(d,h,y,w,R){if(e(2328>=R),512>=R)var O=o(512);else if((O=o(R))==null)return 0;return(function(F,U,$,Y,se,ye){var Z,ce,fe=U,Ne=1<<$,ve=o(16),Re=o(16);for(e(se!=0),e(Y!=null),e(F!=null),e(0<$),ce=0;ce<se;++ce){if(15<Y[ce])return 0;++ve[Y[ce]]}if(ve[0]==se)return 0;for(Re[1]=0,Z=1;15>Z;++Z){if(ve[Z]>1<<Z)return 0;Re[Z+1]=Re[Z]+ve[Z]}for(ce=0;ce<se;++ce)Z=Y[ce],0<Y[ce]&&(ye[Re[Z]++]=ce);if(Re[15]==1)return(Y=new T).g=0,Y.value=ye[0],b(F,fe,1,Ne,Y),Ne;var Oe,We=-1,Be=Ne-1,St=0,ft=1,dn=1,_t=1<<$;for(ce=0,Z=1,se=2;Z<=$;++Z,se<<=1){if(ft+=dn<<=1,0>(dn-=ve[Z]))return 0;for(;0<ve[Z];--ve[Z])(Y=new T).g=Z,Y.value=ye[ce++],b(F,fe+St,se,_t,Y),St=V(St,Z)}for(Z=$+1,se=2;15>=Z;++Z,se<<=1){if(ft+=dn<<=1,0>(dn-=ve[Z]))return 0;for(;0<ve[Z];--ve[Z]){if(Y=new T,(St&Be)!=We){for(fe+=_t,Oe=1<<(We=Z)-$;15>We&&!(0>=(Oe-=ve[We]));)++We,Oe<<=1;Ne+=_t=1<<(Oe=We-$),F[U+(We=St&Be)].g=Oe+$,F[U+We].value=fe-U-We}Y.g=Z-$,Y.value=ye[ce++],b(F,fe+(St>>$),se,_t,Y),St=V(St,Z)}}return ft!=2*Re[15]-1?0:Ne})(d,h,y,w,R,O)}function T(){this.value=this.g=0}function te(){this.value=this.g=0}function be(){this.G=s(5,T),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Gd,te)}function De(d,h,y,w){e(d!=null),e(h!=null),e(2147483648>w),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=h,d.pa=y,d.Jd=h,d.Yc=y+w,d.Zc=4<=w?y+w-4+1:y,xe(d)}function Ae(d,h){for(var y=0;0<h--;)y|=Pe(d,128)<<h;return y}function he(d,h){var y=Ae(d,h);return Ie(d)?-y:y}function Te(d,h,y,w){var R,O=0;for(e(d!=null),e(h!=null),e(4294967288>w),d.Sb=w,d.Ra=0,d.u=0,d.h=0,4<w&&(w=4),R=0;R<w;++R)O+=h[y+R]<<8*R;d.Ra=O,d.bb=w,d.oa=h,d.pa=y}function Ge(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<du-8>>>0,++d.bb,d.u-=8;re(d)&&(d.h=1,d.u=0)}function Le(d,h){if(e(0<=h),!d.h&&h<=bs){var y=J(d)&ws[h];return d.u+=h,Ge(d),y}return d.h=1,d.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(d){return d.Ra>>>(d.u&du-1)>>>0}function re(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>du}function oe(d,h){d.u=h,d.h=re(d)}function ue(d){d.u>=yl&&(e(d.u>=yl),Ge(d))}function xe(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function Ie(d){return Ae(d,1)}function Pe(d,h){var y=d.Ca;0>d.b&&xe(d);var w=d.b,R=y*h>>>8,O=(d.I>>>w>R)+0;for(O?(y-=R,d.I-=R+1<<w>>>0):y=R+1,w=y,R=0;256<=w;)R+=8,w>>=8;return w=7^R+fu[w],d.b-=w,d.Ca=(y<<w)-1,O}function $e(d,h,y){d[h+0]=y>>24&255,d[h+1]=y>>16&255,d[h+2]=y>>8&255,d[h+3]=255&y}function et(d,h){return d[h+0]|d[h+1]<<8}function He(d,h){return et(d,h)|d[h+2]<<16}function st(d,h){return et(d,h)|et(d,h+2)<<16}function H(d,h){var y=1<<h;return e(d!=null),e(0<h),d.X=o(y),d.X==null?0:(d.Mb=32-h,d.Xa=h,1)}function Ze(d,h){e(d!=null),e(h!=null),e(d.Xa==h.Xa),r(h.X,0,d.X,0,1<<h.Xa)}function Rt(){this.X=[],this.Xa=this.Mb=0}function At(d,h,y,w){e(y!=null),e(w!=null);var R=y[0],O=w[0];return R==0&&(R=(d*O+h/2)/h),O==0&&(O=(h*R+d/2)/d),0>=R||0>=O?0:(y[0]=R,w[0]=O,1)}function Ue(d,h){return d+(1<<h)-1>>>h}function Dt(d,h){return((4278255360&d)+(4278255360&h)>>>0&4278255360)+((16711935&d)+(16711935&h)>>>0&16711935)>>>0}function at(d,h){S[h]=function(y,w,R,O,F,U,$){var Y;for(Y=0;Y<F;++Y){var se=S[d](U[$+Y-1],R,O+Y);U[$+Y]=Dt(y[w+Y],se)}}}function Et(){this.ud=this.hd=this.jd=0}function It(d,h){return((4278124286&(d^h))>>>1)+(d&h)>>>0}function Cn(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function gn(d,h){return Cn(d+(d-h+.5>>1))}function Wt(d,h,y){return Math.abs(h-y)-Math.abs(d-y)}function Lt(d,h,y,w,R,O,F){for(w=O[F-1],y=0;y<R;++y)O[F+y]=w=Dt(d[h+y],w)}function Ft(d,h,y,w,R){var O;for(O=0;O<y;++O){var F=d[h+O],U=F>>8&255,$=16711935&($=($=16711935&F)+((U<<16)+U));w[R+O]=(4278255360&F)+$>>>0}}function pt(d,h){h.jd=255&d,h.hd=d>>8&255,h.ud=d>>16&255}function Qt(d,h,y,w,R,O){var F;for(F=0;F<w;++F){var U=h[y+F],$=U>>>8,Y=U,se=255&(se=(se=U>>>16)+((d.jd<<24>>24)*($<<24>>24)>>>5));Y=255&(Y=(Y+=(d.hd<<24>>24)*($<<24>>24)>>>5)+((d.ud<<24>>24)*(se<<24>>24)>>>5)),R[O+F]=(4278255360&U)+(se<<16)+Y}}function xt(d,h,y,w,R){S[h]=function(O,F,U,$,Y,se,ye,Z,ce){for($=ye;$<Z;++$)for(ye=0;ye<ce;++ye)Y[se++]=R(U[w(O[F++])])},S[d]=function(O,F,U,$,Y,se,ye){var Z=8>>O.b,ce=O.Ea,fe=O.K[0],Ne=O.w;if(8>Z)for(O=(1<<O.b)-1,Ne=(1<<Z)-1;F<U;++F){var ve,Re=0;for(ve=0;ve<ce;++ve)ve&O||(Re=w($[Y++])),se[ye++]=R(fe[Re&Ne]),Re>>=Z}else S["VP8LMapColor"+y]($,Y,fe,Ne,se,ye,F,U,ce)}}function Sr(d,h,y,w,R){for(y=h+y;h<y;){var O=d[h++];w[R++]=O>>16&255,w[R++]=O>>8&255,w[R++]=255&O}}function vn(d,h,y,w,R){for(y=h+y;h<y;){var O=d[h++];w[R++]=O>>16&255,w[R++]=O>>8&255,w[R++]=255&O,w[R++]=O>>24&255}}function on(d,h,y,w,R){for(y=h+y;h<y;){var O=(F=d[h++])>>16&240|F>>12&15,F=240&F|F>>28&15;w[R++]=O,w[R++]=F}}function sn(d,h,y,w,R){for(y=h+y;h<y;){var O=(F=d[h++])>>16&248|F>>13&7,F=F>>5&224|F>>3&31;w[R++]=O,w[R++]=F}}function Kn(d,h,y,w,R){for(y=h+y;h<y;){var O=d[h++];w[R++]=255&O,w[R++]=O>>8&255,w[R++]=O>>16&255}}function Nt(d,h,y,w,R,O){if(O==0)for(y=h+y;h<y;)$e(w,((O=d[h++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),R+=32;else r(w,R,d,h,y)}function Yn(d,h){S[h][0]=S[d+"0"],S[h][1]=S[d+"1"],S[h][2]=S[d+"2"],S[h][3]=S[d+"3"],S[h][4]=S[d+"4"],S[h][5]=S[d+"5"],S[h][6]=S[d+"6"],S[h][7]=S[d+"7"],S[h][8]=S[d+"8"],S[h][9]=S[d+"9"],S[h][10]=S[d+"10"],S[h][11]=S[d+"11"],S[h][12]=S[d+"12"],S[h][13]=S[d+"13"],S[h][14]=S[d+"0"],S[h][15]=S[d+"0"]}function Ot(d){return d==EE||d==CE||d==l_||d==IE}function Zt(){this.eb=[],this.size=this.A=this.fb=0}function tr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function en(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zt,this.f.kb=new tr,this.sd=null}function kt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function In(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function bo(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function gi(d,h){var y=d.T,w=h.ba.f.RGBA,R=w.eb,O=w.fb+d.ka*w.A,F=oa[h.ba.S],U=d.y,$=d.O,Y=d.f,se=d.N,ye=d.ea,Z=d.W,ce=h.cc,fe=h.dc,Ne=h.Mc,ve=h.Nc,Re=d.ka,Oe=d.ka+d.T,We=d.U,Be=We+1>>1;for(Re==0?F(U,$,null,null,Y,se,ye,Z,Y,se,ye,Z,R,O,null,null,We):(F(h.ec,h.fc,U,$,ce,fe,Ne,ve,Y,se,ye,Z,R,O-w.A,R,O,We),++y);Re+2<Oe;Re+=2)ce=Y,fe=se,Ne=ye,ve=Z,se+=d.Rc,Z+=d.Rc,O+=2*w.A,F(U,($+=2*d.fa)-d.fa,U,$,ce,fe,Ne,ve,Y,se,ye,Z,R,O-w.A,R,O,We);return $+=d.fa,d.j+Oe<d.o?(r(h.ec,h.fc,U,$,We),r(h.cc,h.dc,Y,se,Be),r(h.Mc,h.Nc,ye,Z,Be),y--):1&Oe||F(U,$,null,null,Y,se,ye,Z,Y,se,ye,Z,R,O+w.A,null,null,We),y}function Ho(d,h,y){var w=d.F,R=[d.J];if(w!=null){var O=d.U,F=h.ba.S,U=F==c_||F==l_;h=h.ba.f.RGBA;var $=[0],Y=d.ka;$[0]=d.T,d.Kb&&(Y==0?--$[0]:(--Y,R[0]-=d.width),d.j+d.ka+d.T==d.o&&($[0]=d.o-d.j-Y));var se=h.eb;Y=h.fb+Y*h.A,d=tk(w,R[0],d.width,O,$,se,Y+(U?0:3),h.A),e(y==$),d&&Ot(F)&&Om(se,Y,U,O,$,h.A)}return 0}function fs(d){var h=d.ma,y=h.ba.S,w=11>y,R=y==s_||y==a_||y==c_||y==xE||y==12||Ot(y);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!vl(h.Oa,d,R?11:12))return 0;if(R&&Ot(y)&&lu(),d.da)alert("todo:use_scaling");else{if(w){if(h.Ib=bo,d.Kb){if(y=d.U+1>>1,h.memory=o(d.U+2*y),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+d.U,h.Mc=h.cc,h.Nc=h.dc+y,h.Ib=gi,lu()}}else alert("todo:EmitYUV");R&&(h.Jb=Ho,w&&gr())}if(w&&!yk){for(d=0;256>d;++d)wz[d]=89858*(d-128)+d_>>u_,Ez[d]=-22014*(d-128)+d_,xz[d]=-45773*(d-128),bz[d]=113618*(d-128)+d_>>u_;for(d=Fm;d<DE;++d)h=76283*(d-16)+d_>>u_,Cz[d-Fm]=gs(h,255),Iz[d-Fm]=gs(h+8>>4,15);yk=1}return 1}function Mt(d){var h=d.ma,y=d.U,w=d.T;return e(!(1&d.ka)),0>=y||0>=w?0:(y=h.Ib(d,h),h.Jb!=null&&h.Jb(d,h,y),h.Dc+=y,1)}function Ys(d){d.ma.memory=null}function pr(d,h,y,w){return Le(d,8)!=47?0:(h[0]=Le(d,14)+1,y[0]=Le(d,14)+1,w[0]=Le(d,1),Le(d,3)!=0?0:!d.h)}function xo(d,h){if(4>d)return d+1;var y=d-2>>1;return(2+(1&d)<<y)+Le(h,y)+1}function Ti(d,h){return 120<h?h-120:1<=(y=((y=sz[h-1])>>4)*d+(8-(15&y)))?y:1;var y}function Zn(d,h,y){var w=J(y),R=d[h+=255&w].g-8;return 0<R&&(oe(y,y.u+8),w=J(y),h+=d[h].value,h+=w&(1<<R)-1),oe(y,y.u+d[h].g),d[h].value}function oi(d,h,y){return y.g+=d.g,y.value+=d.value<<h>>>0,e(8>=y.g),d.g}function mi(d,h,y){var w=d.xc;return e((h=w==0?0:d.vc[d.md*(y>>w)+(h>>w)])<d.Wb),d.Ya[h]}function Wo(d,h,y,w){var R=d.ab,O=d.c*h,F=d.C;h=F+h;var U=y,$=w;for(w=d.Ta,y=d.Ua;0<R--;){var Y=d.gc[R],se=F,ye=h,Z=U,ce=$,fe=($=w,U=y,Y.Ea);switch(e(se<ye),e(ye<=Y.nc),Y.hc){case 2:qr(Z,ce,(ye-se)*fe,$,U);break;case 0:var Ne=se,ve=ye,Re=$,Oe=U,We=(_t=Y).Ea;Ne==0&&(Tm(Z,ce,null,null,1,Re,Oe),Lt(Z,ce+1,0,0,We-1,Re,Oe+1),ce+=We,Oe+=We,++Ne);for(var Be=1<<_t.b,St=Be-1,ft=Ue(We,_t.b),dn=_t.K,_t=_t.w+(Ne>>_t.b)*ft;Ne<ve;){var bn=dn,yi=_t,fn=1;for(Rh(Z,ce,Re,Oe-We,1,Re,Oe);fn<We;){var wt=(fn&~St)+Be;wt>We&&(wt=We),(0,Nm[bn[yi++]>>8&15])(Z,ce+ +fn,Re,Oe+fn-We,wt-fn,Re,Oe+fn),fn=wt}ce+=We,Oe+=We,++Ne&St||(_t+=ft)}ye!=Y.nc&&r($,U-fe,$,U+(ye-se-1)*fe,fe);break;case 1:for(fe=Z,ve=ce,We=(Z=Y.Ea)-(Oe=Z&~(Re=(ce=1<<Y.b)-1)),Ne=Ue(Z,Y.b),Be=Y.K,Y=Y.w+(se>>Y.b)*Ne;se<ye;){for(St=Be,ft=Y,dn=new Et,_t=ve+Oe,bn=ve+Z;ve<_t;)pt(St[ft++],dn),Pm(dn,fe,ve,ce,$,U),ve+=ce,U+=ce;ve<bn&&(pt(St[ft++],dn),Pm(dn,fe,ve,We,$,U),ve+=We,U+=We),++se&Re||(Y+=Ne)}break;case 3:if(Z==$&&ce==U&&0<Y.b){for(ve=$,Z=fe=U+(ye-se)*fe-(Oe=(ye-se)*Ue(Y.Ea,Y.b)),ce=$,Re=U,Ne=[],Oe=(We=Oe)-1;0<=Oe;--Oe)Ne[Oe]=ce[Re+Oe];for(Oe=We-1;0<=Oe;--Oe)ve[Z+Oe]=Ne[Oe];n_(Y,se,ye,$,fe,$,U)}else n_(Y,se,ye,Z,ce,$,U)}U=w,$=y}$!=y&&r(w,y,U,$,O)}function cc(d,h){var y=d.V,w=d.Ba+d.c*d.C,R=h-d.C;if(e(h<=d.l.o),e(16>=R),0<R){var O=d.l,F=d.Ta,U=d.Ua,$=O.width;if(Wo(d,R,y,w),R=U=[U],e((y=d.C)<(w=h)),e(O.v<O.va),w>O.o&&(w=O.o),y<O.j){var Y=O.j-y;y=O.j,R[0]+=Y*$}if(y>=w?y=0:(R[0]+=4*O.v,O.ka=y-O.j,O.U=O.va-O.v,O.T=w-y,y=1),y){if(U=U[0],11>(y=d.ca).S){var se=y.f.RGBA,ye=(w=y.S,R=O.U,O=O.T,Y=se.eb,se.A),Z=O;for(se=se.fb+d.Ma*se.A;0<Z--;){var ce=F,fe=U,Ne=R,ve=Y,Re=se;switch(w){case o_:km(ce,fe,Ne,ve,Re);break;case s_:hu(ce,fe,Ne,ve,Re);break;case EE:hu(ce,fe,Ne,ve,Re),Om(ve,Re,0,Ne,1,0);break;case ck:Kd(ce,fe,Ne,ve,Re);break;case a_:Nt(ce,fe,Ne,ve,Re,1);break;case CE:Nt(ce,fe,Ne,ve,Re,1),Om(ve,Re,0,Ne,1,0);break;case c_:Nt(ce,fe,Ne,ve,Re,0);break;case l_:Nt(ce,fe,Ne,ve,Re,0),Om(ve,Re,1,Ne,1,0);break;case xE:pu(ce,fe,Ne,ve,Re);break;case IE:pu(ce,fe,Ne,ve,Re),ek(ve,Re,Ne,1,0);break;case lk:gu(ce,fe,Ne,ve,Re);break;default:e(0)}U+=$,se+=ye}d.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=y.height)}}d.C=h,e(d.C<=d.i)}function hs(d){var h;if(0<d.ua)return 0;for(h=0;h<d.Wb;++h){var y=d.Ya[h].G,w=d.Ya[h].H;if(0<y[1][w[1]+0].g||0<y[2][w[2]+0].g||0<y[3][w[3]+0].g)return 0}return 1}function Eo(d,h,y,w,R,O){if(d.Z!=0){var F=d.qd,U=d.rd;for(e(yu[d.Z]!=null);h<y;++h)yu[d.Z](F,U,w,R,w,R,O),F=w,U=R,R+=O;d.qd=F,d.rd=U}}function Go(d,h){var y=d.l.ma,w=y.Z==0||y.Z==1?d.l.j:d.C;if(w=d.C<w?w:d.C,e(h<=d.l.o),h>w){var R=d.l.width,O=y.ca,F=y.tb+R*w,U=d.V,$=d.Ba+d.c*w,Y=d.gc;e(d.ab==1),e(Y[0].hc==3),vc(Y[0],w,h,U,$,O,F),Eo(y,w,h,O,F,R)}d.C=d.Ma=h}function Co(d,h,y,w,R,O,F){var U=d.$/w,$=d.$%w,Y=d.m,se=d.s,ye=y+d.$,Z=ye;R=y+w*R;var ce=y+w*O,fe=280+se.ua,Ne=d.Pb?U:16777216,ve=0<se.ua?se.Wa:null,Re=se.wc,Oe=ye<ce?mi(se,$,U):null;e(d.C<O),e(ce<=R);var We=!1;e:for(;;){for(;We||ye<ce;){var Be=0;if(U>=Ne){var St=ye-y;e((Ne=d).Pb),Ne.wd=Ne.m,Ne.xd=St,0<Ne.s.ua&&Ze(Ne.s.Wa,Ne.s.vb),Ne=U+cz}if($&Re||(Oe=mi(se,$,U)),e(Oe!=null),Oe.Qb&&(h[ye]=Oe.qb,We=!0),!We)if(ue(Y),Oe.jc){Be=Y,St=h;var ft=ye,dn=Oe.pd[J(Be)&Gd-1];e(Oe.jc),256>dn.g?(oe(Be,Be.u+dn.g),St[ft]=dn.value,Be=0):(oe(Be,Be.u+dn.g-256),e(256<=dn.value),Be=dn.value),Be==0&&(We=!0)}else Be=Zn(Oe.G[0],Oe.H[0],Y);if(Y.h)break;if(We||256>Be){if(!We)if(Oe.nd)h[ye]=(Oe.qb|Be<<8)>>>0;else{if(ue(Y),We=Zn(Oe.G[1],Oe.H[1],Y),ue(Y),St=Zn(Oe.G[2],Oe.H[2],Y),ft=Zn(Oe.G[3],Oe.H[3],Y),Y.h)break;h[ye]=(ft<<24|We<<16|Be<<8|St)>>>0}if(We=!1,++ye,++$>=w&&($=0,++U,F!=null&&U<=O&&!(U%16)&&F(d,U),ve!=null))for(;Z<ye;)Be=h[Z++],ve.X[(506832829*Be&4294967295)>>>ve.Mb]=Be}else if(280>Be){if(Be=xo(Be-256,Y),St=Zn(Oe.G[4],Oe.H[4],Y),ue(Y),St=Ti(w,St=xo(St,Y)),Y.h)break;if(ye-y<St||R-ye<Be)break e;for(ft=0;ft<Be;++ft)h[ye+ft]=h[ye+ft-St];for(ye+=Be,$+=Be;$>=w;)$-=w,++U,F!=null&&U<=O&&!(U%16)&&F(d,U);if(e(ye<=R),$&Re&&(Oe=mi(se,$,U)),ve!=null)for(;Z<ye;)Be=h[Z++],ve.X[(506832829*Be&4294967295)>>>ve.Mb]=Be}else{if(!(Be<fe))break e;for(We=Be-280,e(ve!=null);Z<ye;)Be=h[Z++],ve.X[(506832829*Be&4294967295)>>>ve.Mb]=Be;Be=ye,e(!(We>>>(St=ve).Xa)),h[Be]=St.X[We],We=!0}We||e(Y.h==re(Y))}if(d.Pb&&Y.h&&ye<R)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Ze(d.s.vb,d.s.Wa);else{if(Y.h)break e;F?.(d,U>O?O:U),d.a=0,d.$=ye-y}return 1}return d.a=3,0}function Vi(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var h=d.Wa;h!=null&&(h.X=null),d.vb=null,e(d!=null)}function Xi(){var d=new jt;return d==null?null:(d.a=0,d.xb=fk,Yn("Predictor","VP8LPredictors"),Yn("Predictor","VP8LPredictors_C"),Yn("PredictorAdd","VP8LPredictorsAdd"),Yn("PredictorAdd","VP8LPredictorsAdd_C"),qr=Ft,Pm=Qt,km=Sr,hu=vn,pu=on,gu=sn,Kd=Kn,S.VP8LMapColor32b=mc,S.VP8LMapColor8b=Mm,d)}function ps(d,h,y,w,R){var O=1,F=[d],U=[h],$=w.m,Y=w.s,se=null,ye=0;e:for(;;){if(y)for(;O&&Le($,1);){var Z=F,ce=U,fe=w,Ne=1,ve=fe.m,Re=fe.gc[fe.ab],Oe=Le(ve,2);if(fe.Oc&1<<Oe)O=0;else{switch(fe.Oc|=1<<Oe,Re.hc=Oe,Re.Ea=Z[0],Re.nc=ce[0],Re.K=[null],++fe.ab,e(4>=fe.ab),Oe){case 0:case 1:Re.b=Le(ve,3)+2,Ne=ps(Ue(Re.Ea,Re.b),Ue(Re.nc,Re.b),0,fe,Re.K),Re.K=Re.K[0];break;case 3:var We,Be=Le(ve,8)+1,St=16<Be?0:4<Be?1:2<Be?2:3;if(Z[0]=Ue(Re.Ea,St),Re.b=St,We=Ne=ps(Be,1,0,fe,Re.K)){var ft,dn=Be,_t=Re,bn=1<<(8>>_t.b),yi=o(bn);if(yi==null)We=0;else{var fn=_t.K[0],wt=_t.w;for(yi[0]=_t.K[0][0],ft=1;ft<1*dn;++ft)yi[ft]=Dt(fn[wt+ft],yi[ft-1]);for(;ft<4*bn;++ft)yi[ft]=0;_t.K[0]=null,_t.K[0]=yi,We=1}}Ne=We;break;case 2:break;default:e(0)}O=Ne}}if(F=F[0],U=U[0],O&&Le($,1)&&!(O=1<=(ye=Le($,4))&&11>=ye)){w.a=3;break e}var rt;if(rt=O)t:{var Hr,rn,Sn,mr=w,Bi=F,Do=U,Fr=ye,to=y,To=mr.m,_i=mr.s,Tn=[null],Bn=1,Vr=0,Un=az[Fr];n:for(;;){if(to&&Le(To,1)){var Ui=Le(To,3)+2,Pa=Ue(Bi,Ui),Wr=Ue(Do,Ui),Qo=Pa*Wr;if(!ps(Pa,Wr,0,mr,Tn))break n;for(Tn=Tn[0],_i.xc=Ui,Hr=0;Hr<Qo;++Hr){var rr=Tn[Hr]>>8&65535;Tn[Hr]=rr,rr>=Bn&&(Bn=rr+1)}}if(To.h)break n;for(rn=0;5>rn;++rn){var wi=uk[rn];!rn&&0<Fr&&(wi+=1<<Fr),Vr<wi&&(Vr=wi)}var Es=s(Bn*Un,T),Mo=Bn,Cs=s(Mo,be);if(Cs==null)var Is=null;else e(65536>=Mo),Is=Cs;var Xo=o(Vr);if(Is==null||Xo==null||Es==null){mr.a=1;break n}var Ss=Es;for(Hr=Sn=0;Hr<Bn;++Hr){var ur=Is[Hr],As=ur.G,ka=ur.H,Zd=0,bl=1,zi=0;for(rn=0;5>rn;++rn){wi=uk[rn],As[rn]=Ss,ka[rn]=Sn,!rn&&0<Fr&&(wi+=1<<Fr);i:{var h_,TE=wi,p_=mr,Vm=Xo,Dz=Ss,Tz=Sn,ME=0,_u=p_.m,Mz=Le(_u,1);if(i(Vm,0,0,TE),Mz){var Nz=Le(_u,1)+1,Pz=Le(_u,1),bk=Le(_u,Pz==0?1:8);Vm[bk]=1,Nz==2&&(Vm[bk=Le(_u,8)]=1);var g_=1}else{var xk=o(19),Ek=Le(_u,4)+4;if(19<Ek){p_.a=3;var m_=0;break i}for(h_=0;h_<Ek;++h_)xk[oz[h_]]=Le(_u,3);var NE=void 0,jm=void 0,Ck=p_,kz=xk,v_=TE,Ik=Vm,PE=0,wu=Ck.m,Sk=8,Ak=s(128,T);r:for(;A(Ak,0,7,kz,19);){if(Le(wu,1)){var Rz=2+2*Le(wu,3);if((NE=2+Le(wu,Rz))>v_)break r}else NE=v_;for(jm=0;jm<v_&&NE--;){ue(wu);var Dk=Ak[0+(127&J(wu))];oe(wu,wu.u+Dk.g);var Lh=Dk.value;if(16>Lh)Ik[jm++]=Lh,Lh!=0&&(Sk=Lh);else{var Oz=Lh==16,Tk=Lh-16,Lz=rz[Tk],Mk=Le(wu,nz[Tk])+Lz;if(jm+Mk>v_)break r;for(var Fz=Oz?Sk:0;0<Mk--;)Ik[jm++]=Fz}}PE=1;break r}PE||(Ck.a=3),g_=PE}(g_=g_&&!_u.h)&&(ME=A(Dz,Tz,8,Vm,TE)),g_&&ME!=0?m_=ME:(p_.a=3,m_=0)}if(m_==0)break n;if(bl&&iz[rn]==1&&(bl=Ss[Sn].g==0),Zd+=Ss[Sn].g,Sn+=m_,3>=rn){var Bm,kE=Xo[0];for(Bm=1;Bm<wi;++Bm)Xo[Bm]>kE&&(kE=Xo[Bm]);zi+=kE}}if(ur.nd=bl,ur.Qb=0,bl&&(ur.qb=(As[3][ka[3]+0].value<<24|As[1][ka[1]+0].value<<16|As[2][ka[2]+0].value)>>>0,Zd==0&&256>As[0][ka[0]+0].value&&(ur.Qb=1,ur.qb+=As[0][ka[0]+0].value<<8)),ur.jc=!ur.Qb&&6>zi,ur.jc){var y_,xl=ur;for(y_=0;y_<Gd;++y_){var bu=y_,xu=xl.pd[bu],__=xl.G[0][xl.H[0]+bu];256<=__.value?(xu.g=__.g+256,xu.value=__.value):(xu.g=0,xu.value=0,bu>>=oi(__,8,xu),bu>>=oi(xl.G[1][xl.H[1]+bu],16,xu),bu>>=oi(xl.G[2][xl.H[2]+bu],0,xu),oi(xl.G[3][xl.H[3]+bu],24,xu))}}}_i.vc=Tn,_i.Wb=Bn,_i.Ya=Is,_i.yc=Es,rt=1;break t}rt=0}if(!(O=rt)){w.a=3;break e}if(0<ye){if(Y.ua=1<<ye,!H(Y.Wa,ye)){w.a=1,O=0;break e}}else Y.ua=0;var RE=w,Nk=F,Vz=U,OE=RE.s,LE=OE.xc;if(RE.c=Nk,RE.i=Vz,OE.md=Ue(Nk,LE),OE.wc=LE==0?-1:(1<<LE)-1,y){w.xb=gz;break e}if((se=o(F*U))==null){w.a=1,O=0;break e}O=(O=Co(w,se,0,F,U,U,null))&&!$.h;break e}return O?(R!=null?R[0]=se:(e(se==null),e(y)),w.$=0,y||Vi(Y)):Vi(Y),O}function lc(d,h){var y=d.c*d.i,w=y+h+16*h;return e(d.c<=h),d.V=o(w),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+y+h,1)}function uc(d,h){var y=d.C,w=h-y,R=d.V,O=d.Ba+d.c*y;for(e(h<=d.l.o);0<w;){var F=16<w?16:w,U=d.l.ma,$=d.l.width,Y=$*F,se=U.ca,ye=U.tb+$*y,Z=d.Ta,ce=d.Ua;Wo(d,F,R,O),nk(Z,ce,se,ye,Y),Eo(U,y,y+F,se,ye,$),w-=F,R+=F*d.c,y+=F}e(y==h),d.C=d.Ma=h}function dc(){this.ub=this.yd=this.td=this.Rb=0}function cl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ah(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Fd(){this.Yb=(function(){var d=[];return(function h(y,w,R){for(var O=R[w],F=0;F<O&&(y.push(R.length>w+1?[]:0),!(R.length<w+1));F++)h(y[F],w+1,R)})(d,0,[3,11]),d})()}function ll(){this.jb=o(3),this.Wc=a([4,8],Fd),this.Xc=a([4,17],Fd)}function Vd(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ji(){this.ld=this.La=this.dd=this.tc=0}function Ia(){this.Na=this.la=0}function Zs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ul(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Dh(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ji),this.Y=0,this.ya=Array(new ul),this.aa=0,this.l=new fc}function jd(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Bd(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new dc,this.Kc=new cl,this.ed=new Vd,this.Qa=new Ah,this.Ic=this.$c=this.Aa=0,this.D=new Dh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,L),this.ia=0,this.pb=s(4,Zs),this.Pa=new ll,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new jd),this.Hd=0,this.rb=Array(new Ia),this.sb=0,this.wa=Array(new Ji),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ul),this.L=this.aa=0,this.gd=a([4,2],Ji),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function gs(d,h){return 0>d?0:d>h?h:d}function fc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ud(){var d=new Bd;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Lm||(Lm=nu)),d}function Ar(d,h,y){return d.a==0&&(d.a=h,d.sc=y,d.cb=0),0}function zd(d,h,y){return 3<=y&&d[h+0]==157&&d[h+1]==1&&d[h+2]==42}function Qs(d,h){if(d==null)return 0;if(d.a=0,d.sc="OK",h==null)return Ar(d,2,"null VP8Io passed to VP8GetHeaders()");var y=h.data,w=h.w,R=h.ha;if(4>R)return Ar(d,7,"Truncated header.");var O=y[w+0]|y[w+1]<<8|y[w+2]<<16,F=d.Od;if(F.Rb=!(1&O),F.td=O>>1&7,F.yd=O>>4&1,F.ub=O>>5,3<F.td)return Ar(d,3,"Incorrect keyframe parameters.");if(!F.yd)return Ar(d,4,"Frame not displayable.");w+=3,R-=3;var U=d.Kc;if(F.Rb){if(7>R)return Ar(d,7,"cannot parse picture header");if(!zd(y,w,R))return Ar(d,3,"Bad code word");U.c=16383&(y[w+4]<<8|y[w+3]),U.Td=y[w+4]>>6,U.i=16383&(y[w+6]<<8|y[w+5]),U.Ud=y[w+6]>>6,w+=7,R-=7,d.za=U.c+15>>4,d.Ub=U.i+15>>4,h.width=U.c,h.height=U.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((O=d.Pa).jb,0,255,O.jb.length),e((O=d.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,i(O.Zb,0,0,O.Zb.length),i(O.Lb,0,0,O.Lb)}if(F.ub>R)return Ar(d,7,"bad partition length");De(O=d.m,y,w,F.ub),w+=F.ub,R-=F.ub,F.Rb&&(U.Ld=Ie(O),U.Kd=Ie(O)),U=d.Qa;var $,Y=d.Pa;if(e(O!=null),e(U!=null),U.Cb=Ie(O),U.Cb){if(U.Bb=Ie(O),Ie(O)){for(U.Fb=Ie(O),$=0;4>$;++$)U.Zb[$]=Ie(O)?he(O,7):0;for($=0;4>$;++$)U.Lb[$]=Ie(O)?he(O,6):0}if(U.Bb)for($=0;3>$;++$)Y.jb[$]=Ie(O)?Ae(O,8):255}else U.Bb=0;if(O.Ka)return Ar(d,3,"cannot parse segment header");if((U=d.ed).zd=Ie(O),U.Tb=Ae(O,6),U.wb=Ae(O,3),U.Pc=Ie(O),U.Pc&&Ie(O)){for(Y=0;4>Y;++Y)Ie(O)&&(U.vd[Y]=he(O,6));for(Y=0;4>Y;++Y)Ie(O)&&(U.od[Y]=he(O,6))}if(d.L=U.Tb==0?0:U.zd?1:2,O.Ka)return Ar(d,3,"cannot parse filter header");var se=R;if(R=$=w,w=$+se,U=se,d.Xb=(1<<Ae(d.m,2))-1,se<3*(Y=d.Xb))y=7;else{for($+=3*Y,U-=3*Y,se=0;se<Y;++se){var ye=y[R+0]|y[R+1]<<8|y[R+2]<<16;ye>U&&(ye=U),De(d.Jc[+se],y,$,ye),$+=ye,U-=ye,R+=3}De(d.Jc[+Y],y,$,U),y=$<w?0:5}if(y!=0)return Ar(d,y,"cannot parse partitions");for(y=Ae($=d.m,7),R=Ie($)?he($,4):0,w=Ie($)?he($,4):0,U=Ie($)?he($,4):0,Y=Ie($)?he($,4):0,$=Ie($)?he($,4):0,se=d.Qa,ye=0;4>ye;++ye){if(se.Cb){var Z=se.Zb[ye];se.Fb||(Z+=y)}else{if(0<ye){d.pb[ye]=d.pb[0];continue}Z=y}var ce=d.pb[ye];ce.Sc[0]=SE[gs(Z+R,127)],ce.Sc[1]=AE[gs(Z+0,127)],ce.Eb[0]=2*SE[gs(Z+w,127)],ce.Eb[1]=101581*AE[gs(Z+U,127)]>>16,8>ce.Eb[1]&&(ce.Eb[1]=8),ce.Qc[0]=SE[gs(Z+Y,117)],ce.Qc[1]=AE[gs(Z+$,127)],ce.lc=Z+$}if(!F.Rb)return Ar(d,4,"Not a key frame.");for(Ie(O),F=d.Pa,y=0;4>y;++y){for(R=0;8>R;++R)for(w=0;3>w;++w)for(U=0;11>U;++U)Y=Pe(O,hz[y][R][w][U])?Ae(O,8):dz[y][R][w][U],F.Wc[y][R].Yb[w][U]=Y;for(R=0;17>R;++R)F.Xc[y][R]=F.Wc[y][pz[R]]}return d.kc=Ie(O),d.kc&&(d.Bd=Ae(O,8)),d.cb=1}function nu(d,h,y,w,R,O,F){var U=h[R].Yb[y];for(y=0;16>R;++R){if(!Pe(d,U[y+0]))return R;for(;!Pe(d,U[y+1]);)if(U=h[++R].Yb[0],y=0,R==16)return 16;var $=h[R+1].Yb;if(Pe(d,U[y+2])){var Y=d,se=0;if(Pe(Y,(Z=U)[(ye=y)+3]))if(Pe(Y,Z[ye+6])){for(U=0,ye=2*(se=Pe(Y,Z[ye+8]))+(Z=Pe(Y,Z[ye+9+se])),se=0,Z=lz[ye];Z[U];++U)se+=se+Pe(Y,Z[U]);se+=3+(8<<ye)}else Pe(Y,Z[ye+7])?(se=7+2*Pe(Y,165),se+=Pe(Y,145)):se=5+Pe(Y,159);else se=Pe(Y,Z[ye+4])?3+Pe(Y,Z[ye+5]):2;U=$[2]}else se=1,U=$[1];$=F+uz[R],0>(Y=d).b&&xe(Y);var ye,Z=Y.b,ce=(ye=Y.Ca>>1)-(Y.I>>Z)>>31;--Y.b,Y.Ca+=ce,Y.Ca|=1,Y.I-=(ye+1&ce)<<Z,O[$]=((se^ce)-ce)*w[(0<R)+0]}return 16}function qd(d){var h=d.rb[d.sb-1];h.la=0,h.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Io(d,h,y,w,R){R=d[h+y+32*w]+(R>>3),d[h+y+32*w]=-256&R?0>R?0:255:R}function zr(d,h,y,w,R,O){Io(d,h,0,y,w+R),Io(d,h,1,y,w+O),Io(d,h,2,y,w-O),Io(d,h,3,y,w-R)}function ji(d){return(20091*d>>16)+d}function Ko(d,h,y,w){var R,O=0,F=o(16);for(R=0;4>R;++R){var U=d[h+0]+d[h+8],$=d[h+0]-d[h+8],Y=(35468*d[h+4]>>16)-ji(d[h+12]),se=ji(d[h+4])+(35468*d[h+12]>>16);F[O+0]=U+se,F[O+1]=$+Y,F[O+2]=$-Y,F[O+3]=U-se,O+=4,h++}for(R=O=0;4>R;++R)U=(d=F[O+0]+4)+F[O+8],$=d-F[O+8],Y=(35468*F[O+4]>>16)-ji(F[O+12]),Io(y,w,0,0,U+(se=ji(F[O+4])+(35468*F[O+12]>>16))),Io(y,w,1,0,$+Y),Io(y,w,2,0,$-Y),Io(y,w,3,0,U-se),O++,w+=32}function ru(d,h,y,w){var R=d[h+0]+4,O=35468*d[h+4]>>16,F=ji(d[h+4]),U=35468*d[h+1]>>16;zr(y,w,0,R+F,d=ji(d[h+1]),U),zr(y,w,1,R+O,d,U),zr(y,w,2,R-O,d,U),zr(y,w,3,R-F,d,U)}function iu(d,h,y,w,R){Ko(d,h,y,w),R&&Ko(d,h+16,y,w+4)}function ms(d,h,y,w){Yd(d,h+0,y,w,1),Yd(d,h+32,y,w+128,1)}function Rn(d,h,y,w){var R;for(d=d[h+0]+4,R=0;4>R;++R)for(h=0;4>h;++h)Io(y,w,h,R,d)}function dl(d,h,y,w){d[h+0]&&On(d,h+0,y,w),d[h+16]&&On(d,h+16,y,w+4),d[h+32]&&On(d,h+32,y,w+128),d[h+48]&&On(d,h+48,y,w+128+4)}function Xs(d,h,y,w){var R,O=o(16);for(R=0;4>R;++R){var F=d[h+0+R]+d[h+12+R],U=d[h+4+R]+d[h+8+R],$=d[h+4+R]-d[h+8+R],Y=d[h+0+R]-d[h+12+R];O[0+R]=F+U,O[8+R]=F-U,O[4+R]=Y+$,O[12+R]=Y-$}for(R=0;4>R;++R)F=(d=O[0+4*R]+3)+O[3+4*R],U=O[1+4*R]+O[2+4*R],$=O[1+4*R]-O[2+4*R],Y=d-O[3+4*R],y[w+0]=F+U>>3,y[w+16]=Y+$>>3,y[w+32]=F-U>>3,y[w+48]=Y-$>>3,w+=64}function vs(d,h,y){var w,R=h-32,O=xs,F=255-d[R-1];for(w=0;w<y;++w){var U,$=O,Y=F+d[h-1];for(U=0;U<y;++U)d[h+U]=$[Y+d[R+U]];h+=32}}function xm(d,h){vs(d,h,4)}function Th(d,h){vs(d,h,8)}function Em(d,h){vs(d,h,16)}function $d(d,h){var y;for(y=0;16>y;++y)r(d,h+32*y,d,h-32,16)}function Mh(d,h){var y;for(y=16;0<y;--y)i(d,h,d[h-1],16),h+=32}function ys(d,h,y){var w;for(w=0;16>w;++w)i(h,y+32*w,d,16)}function fl(d,h){var y,w=16;for(y=0;16>y;++y)w+=d[h-1+32*y]+d[h+y-32];ys(w>>5,d,h)}function eo(d,h){var y,w=8;for(y=0;16>y;++y)w+=d[h-1+32*y];ys(w>>4,d,h)}function ou(d,h){var y,w=8;for(y=0;16>y;++y)w+=d[h+y-32];ys(w>>4,d,h)}function Nh(d,h){ys(128,d,h)}function qt(d,h,y){return d+2*h+y+2>>2}function hc(d,h){var y,w=h-32;for(w=new Uint8Array([qt(d[w-1],d[w+0],d[w+1]),qt(d[w+0],d[w+1],d[w+2]),qt(d[w+1],d[w+2],d[w+3]),qt(d[w+2],d[w+3],d[w+4])]),y=0;4>y;++y)r(d,h+32*y,w,0,w.length)}function Cm(d,h){var y=d[h-1],w=d[h-1+32],R=d[h-1+64],O=d[h-1+96];$e(d,h+0,16843009*qt(d[h-1-32],y,w)),$e(d,h+32,16843009*qt(y,w,R)),$e(d,h+64,16843009*qt(w,R,O)),$e(d,h+96,16843009*qt(R,O,O))}function Im(d,h){var y,w=4;for(y=0;4>y;++y)w+=d[h+y-32]+d[h-1+32*y];for(w>>=3,y=0;4>y;++y)i(d,h+32*y,w,4)}function Sa(d,h){var y=d[h-1+0],w=d[h-1+32],R=d[h-1+64],O=d[h-1-32],F=d[h+0-32],U=d[h+1-32],$=d[h+2-32],Y=d[h+3-32];d[h+0+96]=qt(w,R,d[h-1+96]),d[h+1+96]=d[h+0+64]=qt(y,w,R),d[h+2+96]=d[h+1+64]=d[h+0+32]=qt(O,y,w),d[h+3+96]=d[h+2+64]=d[h+1+32]=d[h+0+0]=qt(F,O,y),d[h+3+64]=d[h+2+32]=d[h+1+0]=qt(U,F,O),d[h+3+32]=d[h+2+0]=qt($,U,F),d[h+3+0]=qt(Y,$,U)}function Mi(d,h){var y=d[h+1-32],w=d[h+2-32],R=d[h+3-32],O=d[h+4-32],F=d[h+5-32],U=d[h+6-32],$=d[h+7-32];d[h+0+0]=qt(d[h+0-32],y,w),d[h+1+0]=d[h+0+32]=qt(y,w,R),d[h+2+0]=d[h+1+32]=d[h+0+64]=qt(w,R,O),d[h+3+0]=d[h+2+32]=d[h+1+64]=d[h+0+96]=qt(R,O,F),d[h+3+32]=d[h+2+64]=d[h+1+96]=qt(O,F,U),d[h+3+64]=d[h+2+96]=qt(F,U,$),d[h+3+96]=qt(U,$,$)}function Sm(d,h){var y=d[h-1+0],w=d[h-1+32],R=d[h-1+64],O=d[h-1-32],F=d[h+0-32],U=d[h+1-32],$=d[h+2-32],Y=d[h+3-32];d[h+0+0]=d[h+1+64]=O+F+1>>1,d[h+1+0]=d[h+2+64]=F+U+1>>1,d[h+2+0]=d[h+3+64]=U+$+1>>1,d[h+3+0]=$+Y+1>>1,d[h+0+96]=qt(R,w,y),d[h+0+64]=qt(w,y,O),d[h+0+32]=d[h+1+96]=qt(y,O,F),d[h+1+32]=d[h+2+96]=qt(O,F,U),d[h+2+32]=d[h+3+96]=qt(F,U,$),d[h+3+32]=qt(U,$,Y)}function Am(d,h){var y=d[h+0-32],w=d[h+1-32],R=d[h+2-32],O=d[h+3-32],F=d[h+4-32],U=d[h+5-32],$=d[h+6-32],Y=d[h+7-32];d[h+0+0]=y+w+1>>1,d[h+1+0]=d[h+0+64]=w+R+1>>1,d[h+2+0]=d[h+1+64]=R+O+1>>1,d[h+3+0]=d[h+2+64]=O+F+1>>1,d[h+0+32]=qt(y,w,R),d[h+1+32]=d[h+0+96]=qt(w,R,O),d[h+2+32]=d[h+1+96]=qt(R,O,F),d[h+3+32]=d[h+2+96]=qt(O,F,U),d[h+3+64]=qt(F,U,$),d[h+3+96]=qt(U,$,Y)}function Js(d,h){var y=d[h-1+0],w=d[h-1+32],R=d[h-1+64],O=d[h-1+96];d[h+0+0]=y+w+1>>1,d[h+2+0]=d[h+0+32]=w+R+1>>1,d[h+2+32]=d[h+0+64]=R+O+1>>1,d[h+1+0]=qt(y,w,R),d[h+3+0]=d[h+1+32]=qt(w,R,O),d[h+3+32]=d[h+1+64]=qt(R,O,O),d[h+3+64]=d[h+2+64]=d[h+0+96]=d[h+1+96]=d[h+2+96]=d[h+3+96]=O}function pc(d,h){var y=d[h-1+0],w=d[h-1+32],R=d[h-1+64],O=d[h-1+96],F=d[h-1-32],U=d[h+0-32],$=d[h+1-32],Y=d[h+2-32];d[h+0+0]=d[h+2+32]=y+F+1>>1,d[h+0+32]=d[h+2+64]=w+y+1>>1,d[h+0+64]=d[h+2+96]=R+w+1>>1,d[h+0+96]=O+R+1>>1,d[h+3+0]=qt(U,$,Y),d[h+2+0]=qt(F,U,$),d[h+1+0]=d[h+3+32]=qt(y,F,U),d[h+1+32]=d[h+3+64]=qt(w,y,F),d[h+1+64]=d[h+3+96]=qt(R,w,y),d[h+1+96]=qt(O,R,w)}function gc(d,h){var y;for(y=0;8>y;++y)r(d,h+32*y,d,h-32,8)}function hl(d,h){var y;for(y=0;8>y;++y)i(d,h,d[h-1],8),h+=32}function So(d,h,y){var w;for(w=0;8>w;++w)i(h,y+32*w,d,8)}function Ph(d,h){var y,w=8;for(y=0;8>y;++y)w+=d[h+y-32]+d[h-1+32*y];So(w>>4,d,h)}function pl(d,h){var y,w=4;for(y=0;8>y;++y)w+=d[h+y-32];So(w>>3,d,h)}function Qn(d,h){var y,w=4;for(y=0;8>y;++y)w+=d[h-1+32*y];So(w>>3,d,h)}function kh(d,h){So(128,d,h)}function Aa(d,h,y){var w=d[h-y],R=d[h+0],O=3*(R-w)+bE[1020+d[h-2*y]-d[h+y]],F=i_[112+(O+4>>3)];d[h-y]=xs[255+w+i_[112+(O+3>>3)]],d[h+0]=xs[255+R-F]}function su(d,h,y,w){var R=d[h+0],O=d[h+y];return ia[255+d[h-2*y]-d[h-y]]>w||ia[255+O-R]>w}function gl(d,h,y,w){return 4*ia[255+d[h-y]-d[h+0]]+ia[255+d[h-2*y]-d[h+y]]<=w}function au(d,h,y,w,R){var O=d[h-3*y],F=d[h-2*y],U=d[h-y],$=d[h+0],Y=d[h+y],se=d[h+2*y],ye=d[h+3*y];return 4*ia[255+U-$]+ia[255+F-Y]>w?0:ia[255+d[h-4*y]-O]<=R&&ia[255+O-F]<=R&&ia[255+F-U]<=R&&ia[255+ye-se]<=R&&ia[255+se-Y]<=R&&ia[255+Y-$]<=R}function ea(d,h,y,w){var R=2*w+1;for(w=0;16>w;++w)gl(d,h+w,y,R)&&Aa(d,h+w,y)}function cu(d,h,y,w){var R=2*w+1;for(w=0;16>w;++w)gl(d,h+w*y,1,R)&&Aa(d,h+w*y,1)}function Yo(d,h,y,w){var R;for(R=3;0<R;--R)ea(d,h+=4*y,y,w)}function Hd(d,h,y,w){var R;for(R=3;0<R;--R)cu(d,h+=4,y,w)}function Da(d,h,y,w,R,O,F,U){for(O=2*O+1;0<R--;){if(au(d,h,y,O,F))if(su(d,h,y,U))Aa(d,h,y);else{var $=d,Y=h,se=y,ye=$[Y-2*se],Z=$[Y-se],ce=$[Y+0],fe=$[Y+se],Ne=$[Y+2*se],ve=27*(Oe=bE[1020+3*(ce-Z)+bE[1020+ye-fe]])+63>>7,Re=18*Oe+63>>7,Oe=9*Oe+63>>7;$[Y-3*se]=xs[255+$[Y-3*se]+Oe],$[Y-2*se]=xs[255+ye+Re],$[Y-se]=xs[255+Z+ve],$[Y+0]=xs[255+ce-ve],$[Y+se]=xs[255+fe-Re],$[Y+2*se]=xs[255+Ne-Oe]}h+=w}}function Ao(d,h,y,w,R,O,F,U){for(O=2*O+1;0<R--;){if(au(d,h,y,O,F))if(su(d,h,y,U))Aa(d,h,y);else{var $=d,Y=h,se=y,ye=$[Y-se],Z=$[Y+0],ce=$[Y+se],fe=i_[112+(4+(Ne=3*(Z-ye))>>3)],Ne=i_[112+(Ne+3>>3)],ve=fe+1>>1;$[Y-2*se]=xs[255+$[Y-2*se]+ve],$[Y-se]=xs[255+ye+Ne],$[Y+0]=xs[255+Z-fe],$[Y+se]=xs[255+ce-ve]}h+=w}}function Wd(d,h,y,w,R,O){Da(d,h,y,1,16,w,R,O)}function Ta(d,h,y,w,R,O){Da(d,h,1,y,16,w,R,O)}function ml(d,h,y,w,R,O){var F;for(F=3;0<F;--F)Ao(d,h+=4*y,y,1,16,w,R,O)}function v(d,h,y,w,R,O){var F;for(F=3;0<F;--F)Ao(d,h+=4,1,y,16,w,R,O)}function k(d,h,y,w,R,O,F,U){Da(d,h,R,1,8,O,F,U),Da(y,w,R,1,8,O,F,U)}function K(d,h,y,w,R,O,F,U){Da(d,h,1,R,8,O,F,U),Da(y,w,1,R,8,O,F,U)}function ne(d,h,y,w,R,O,F,U){Ao(d,h+4*R,R,1,8,O,F,U),Ao(y,w+4*R,R,1,8,O,F,U)}function de(d,h,y,w,R,O,F,U){Ao(d,h+4,1,R,8,O,F,U),Ao(y,w+4,1,R,8,O,F,U)}function ke(){this.ba=new en,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new In,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function je(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function dt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function vt(){this.ua=0,this.Wa=new Rt,this.vb=new Rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new be,this.yc=new T}function jt(){this.xb=this.a=0,this.l=new fc,this.ca=new en,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new vt,this.ab=0,this.gc=s(4,dt),this.Oc=0}function Gt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function _n(d,h,y,w,R,O,F){for(d=d==null?0:d[h+0],h=0;h<F;++h)R[O+h]=d+y[w+h]&255,d=R[O+h]}function cr(d,h,y,w,R,O,F){var U;if(d==null)_n(null,null,y,w,R,O,F);else for(U=0;U<F;++U)R[O+U]=d[h+U]+y[w+U]&255}function Xn(d,h,y,w,R,O,F){if(d==null)_n(null,null,y,w,R,O,F);else{var U,$=d[h+0],Y=$,se=$;for(U=0;U<F;++U)Y=se+($=d[h+U])-Y,se=y[w+U]+(-256&Y?0>Y?0:255:Y)&255,Y=$,R[O+U]=se}}function jn(d,h,y,w){var R=h.width,O=h.o;if(e(d!=null&&h!=null),0>y||0>=w||y+w>O)return null;if(!d.Cc){if(d.ga==null){var F;if(d.ga=new Gt,(F=d.ga==null)||(F=h.width*h.o,e(d.Gb.length==0),d.Gb=o(F),d.Uc=0,d.Gb==null?F=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,F=1),F=!F),!F){F=d.ga;var U=d.Fa,$=d.P,Y=d.qc,se=d.mb,ye=d.nb,Z=$+1,ce=Y-1,fe=F.l;if(e(U!=null&&se!=null&&h!=null),yu[0]=null,yu[1]=_n,yu[2]=cr,yu[3]=Xn,F.ca=se,F.tb=ye,F.c=h.width,F.i=h.height,e(0<F.c&&0<F.i),1>=Y)h=0;else if(F.$a=3&U[$+0],F.Z=U[$+0]>>2&3,F.Lc=U[$+0]>>4&3,$=U[$+0]>>6&3,0>F.$a||1<F.$a||4<=F.Z||1<F.Lc||$)h=0;else if(fe.put=Mt,fe.ac=fs,fe.bc=Ys,fe.ma=F,fe.width=h.width,fe.height=h.height,fe.Da=h.Da,fe.v=h.v,fe.va=h.va,fe.j=h.j,fe.o=h.o,F.$a)e:{e(F.$a==1),h=Xi();t:for(;;){if(h==null){h=0;break e}if(e(F!=null),F.mc=h,h.c=F.c,h.i=F.i,h.l=F.l,h.l.ma=F,h.l.width=F.c,h.l.height=F.i,h.a=0,Te(h.m,U,Z,ce),!ps(F.c,F.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&hs(h.s)?(F.ic=1,U=h.c*h.i,h.Ta=null,h.Ua=0,h.V=o(U),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(F.ic=0,h=lc(h,F.c)),!h))break t;h=1;break e}F.mc=null,h=0}else h=ce>=F.c*F.i;F=!h}if(F)return null;d.ga.Lc!=1?d.Ga=0:w=O-y}e(d.ga!=null),e(y+w<=O);e:{if(h=(U=d.ga).c,O=U.l.o,U.$a==0){if(Z=d.rc,ce=d.Vc,fe=d.Fa,$=d.P+1+y*h,Y=d.mb,se=d.nb+y*h,e($<=d.P+d.qc),U.Z!=0)for(e(yu[U.Z]!=null),F=0;F<w;++F)yu[U.Z](Z,ce,fe,$,Y,se,h),Z=Y,ce=se,se+=h,$+=h;else for(F=0;F<w;++F)r(Y,se,fe,$,h),Z=Y,ce=se,se+=h,$+=h;d.rc=Z,d.Vc=ce}else{if(e(U.mc!=null),h=y+w,e((F=U.mc)!=null),e(h<=F.i),F.C>=h)h=1;else if(U.ic||gr(),U.ic){U=F.V,Z=F.Ba,ce=F.c;var Ne=F.i,ve=(fe=1,$=F.$/ce,Y=F.$%ce,se=F.m,ye=F.s,F.$),Re=ce*Ne,Oe=ce*h,We=ye.wc,Be=ve<Oe?mi(ye,Y,$):null;e(ve<=Re),e(h<=Ne),e(hs(ye));t:for(;;){for(;!se.h&&ve<Oe;){if(Y&We||(Be=mi(ye,Y,$)),e(Be!=null),ue(se),256>(Ne=Zn(Be.G[0],Be.H[0],se)))U[Z+ve]=Ne,++ve,++Y>=ce&&(Y=0,++$<=h&&!($%16)&&Go(F,$));else{if(!(280>Ne)){fe=0;break t}Ne=xo(Ne-256,se);var St,ft=Zn(Be.G[4],Be.H[4],se);if(ue(se),!(ve>=(ft=Ti(ce,ft=xo(ft,se)))&&Re-ve>=Ne)){fe=0;break t}for(St=0;St<Ne;++St)U[Z+ve+St]=U[Z+ve+St-ft];for(ve+=Ne,Y+=Ne;Y>=ce;)Y-=ce,++$<=h&&!($%16)&&Go(F,$);ve<Oe&&Y&We&&(Be=mi(ye,Y,$))}e(se.h==re(se))}Go(F,$>h?h:$);break t}!fe||se.h&&ve<Re?(fe=0,F.a=se.h?5:3):F.$=ve,h=fe}else h=Co(F,F.V,F.Ba,F.c,F.i,h,uc);if(!h){w=0;break e}}y+w>=O&&(d.Cc=1),w=1}if(!w)return null;if(d.Cc&&((w=d.ga)!=null&&(w.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+y*R}function Lr(d,h,y,w,R,O){for(;0<R--;){var F,U=d,$=h+(y?1:0),Y=d,se=h+(y?0:3);for(F=0;F<w;++F){var ye=Y[se+4*F];ye!=255&&(ye*=32897,U[$+4*F+0]=U[$+4*F+0]*ye>>23,U[$+4*F+1]=U[$+4*F+1]*ye>>23,U[$+4*F+2]=U[$+4*F+2]*ye>>23)}h+=O}}function Dr(d,h,y,w,R){for(;0<w--;){var O;for(O=0;O<y;++O){var F=d[h+2*O+0],U=15&(Y=d[h+2*O+1]),$=4369*U,Y=(240&Y|Y>>4)*$>>16;d[h+2*O+0]=(240&F|F>>4)*$>>16&240|(15&F|F<<4)*$>>16>>4&15,d[h+2*O+1]=240&Y|U}h+=R}}function si(d,h,y,w,R,O,F,U){var $,Y,se=255;for(Y=0;Y<R;++Y){for($=0;$<w;++$){var ye=d[h+$];O[F+4*$]=ye,se&=ye}h+=y,F+=U}return se!=255}function Zo(d,h,y,w,R){var O;for(O=0;O<R;++O)y[w+O]=d[h+O]>>8}function gr(){Om=Lr,ek=Dr,tk=si,nk=Zo}function ta(d,h,y){S[d]=function(w,R,O,F,U,$,Y,se,ye,Z,ce,fe,Ne,ve,Re,Oe,We){var Be,St=We-1>>1,ft=U[$+0]|Y[se+0]<<16,dn=ye[Z+0]|ce[fe+0]<<16;e(w!=null);var _t=3*ft+dn+131074>>2;for(h(w[R+0],255&_t,_t>>16,Ne,ve),O!=null&&(_t=3*dn+ft+131074>>2,h(O[F+0],255&_t,_t>>16,Re,Oe)),Be=1;Be<=St;++Be){var bn=U[$+Be]|Y[se+Be]<<16,yi=ye[Z+Be]|ce[fe+Be]<<16,fn=ft+bn+dn+yi+524296,wt=fn+2*(bn+dn)>>3;_t=wt+ft>>1,ft=(fn=fn+2*(ft+yi)>>3)+bn>>1,h(w[R+2*Be-1],255&_t,_t>>16,Ne,ve+(2*Be-1)*y),h(w[R+2*Be-0],255&ft,ft>>16,Ne,ve+(2*Be-0)*y),O!=null&&(_t=fn+dn>>1,ft=wt+yi>>1,h(O[F+2*Be-1],255&_t,_t>>16,Re,Oe+(2*Be-1)*y),h(O[F+2*Be+0],255&ft,ft>>16,Re,Oe+(2*Be+0)*y)),ft=bn,dn=yi}1&We||(_t=3*ft+dn+131074>>2,h(w[R+We-1],255&_t,_t>>16,Ne,ve+(We-1)*y),O!=null&&(_t=3*dn+ft+131074>>2,h(O[F+We-1],255&_t,_t>>16,Re,Oe+(We-1)*y)))}}function lu(){oa[o_]=mz,oa[s_]=hk,oa[ck]=vz,oa[a_]=pk,oa[c_]=gk,oa[xE]=mk,oa[lk]=yz,oa[EE]=hk,oa[CE]=pk,oa[l_]=gk,oa[IE]=mk}function _s(d){return d&~_z?0>d?0:255:d>>vk}function f(d,h){return _s((19077*d>>8)+(26149*h>>8)-14234)}function _(d,h,y){return _s((19077*d>>8)-(6419*h>>8)-(13320*y>>8)+8708)}function E(d,h){return _s((19077*d>>8)+(33050*h>>8)-17685)}function B(d,h,y,w,R){w[R+0]=f(d,y),w[R+1]=_(d,h,y),w[R+2]=E(d,h)}function le(d,h,y,w,R){w[R+0]=E(d,h),w[R+1]=_(d,h,y),w[R+2]=f(d,y)}function Ee(d,h,y,w,R){var O=_(d,h,y);h=O<<3&224|E(d,h)>>3,w[R+0]=248&f(d,y)|O>>5,w[R+1]=h}function Ye(d,h,y,w,R){var O=240&E(d,h)|15;w[R+0]=240&f(d,y)|_(d,h,y)>>4,w[R+1]=O}function Dn(d,h,y,w,R){w[R+0]=255,B(d,h,y,w,R+1)}function Tr(d,h,y,w,R){le(d,h,y,w,R),w[R+3]=255}function $t(d,h,y,w,R){B(d,h,y,w,R),w[R+3]=255}function lr(d,h,y){S[d]=function(w,R,O,F,U,$,Y,se,ye){for(var Z=se+(-2&ye)*y;se!=Z;)h(w[R+0],O[F+0],U[$+0],Y,se),h(w[R+1],O[F+0],U[$+0],Y,se+y),R+=2,++F,++$,se+=2*y;1&ye&&h(w[R+0],O[F+0],U[$+0],Y,se)}}function Mr(d,h,y){return y==0?d==0?h==0?6:5:h==0?4:0:y}function Ma(d,h,y,w,R){switch(d>>>30){case 3:Yd(h,y,w,R,0);break;case 2:ra(h,y,w,R);break;case 1:On(h,y,w,R)}}function wr(d,h){var y,w,R=h.M,O=h.Nb,F=d.oc,U=d.pc+40,$=d.oc,Y=d.pc+584,se=d.oc,ye=d.pc+600;for(y=0;16>y;++y)F[U+32*y-1]=129;for(y=0;8>y;++y)$[Y+32*y-1]=129,se[ye+32*y-1]=129;for(0<R?F[U-1-32]=$[Y-1-32]=se[ye-1-32]=129:(i(F,U-32-1,127,21),i($,Y-32-1,127,9),i(se,ye-32-1,127,9)),w=0;w<d.za;++w){var Z=h.ya[h.aa+w];if(0<w){for(y=-1;16>y;++y)r(F,U+32*y-4,F,U+32*y+12,4);for(y=-1;8>y;++y)r($,Y+32*y-4,$,Y+32*y+4,4),r(se,ye+32*y-4,se,ye+32*y+4,4)}var ce=d.Gd,fe=d.Hd+w,Ne=Z.ad,ve=Z.Hc;if(0<R&&(r(F,U-32,ce[fe].y,0,16),r($,Y-32,ce[fe].f,0,8),r(se,ye-32,ce[fe].ea,0,8)),Z.Za){var Re=F,Oe=U-32+16;for(0<R&&(w>=d.za-1?i(Re,Oe,ce[fe].y[15],4):r(Re,Oe,ce[fe+1].y,0,4)),y=0;4>y;y++)Re[Oe+128+y]=Re[Oe+256+y]=Re[Oe+384+y]=Re[Oe+0+y];for(y=0;16>y;++y,ve<<=2)Re=F,Oe=U+_k[y],Na[Z.Ob[y]](Re,Oe),Ma(ve,Ne,16*+y,Re,Oe)}else if(Re=Mr(w,R,Z.Ob[0]),vu[Re](F,U),ve!=0)for(y=0;16>y;++y,ve<<=2)Ma(ve,Ne,16*+y,F,U+_k[y]);for(y=Z.Gc,Re=Mr(w,R,Z.Dd),wl[Re]($,Y),wl[Re](se,ye),ve=Ne,Re=$,Oe=Y,255&(Z=0|y)&&(170&Z?yc(ve,256,Re,Oe):nr(ve,256,Re,Oe)),Z=se,ve=ye,255&(y>>=8)&&(170&y?yc(Ne,320,Z,ve):nr(Ne,320,Z,ve)),R<d.Ub-1&&(r(ce[fe].y,0,F,U+480,16),r(ce[fe].f,0,$,Y+224,8),r(ce[fe].ea,0,se,ye+224,8)),y=8*O*d.B,ce=d.sa,fe=d.ta+16*w+16*O*d.R,Ne=d.qa,Z=d.ra+8*w+y,ve=d.Ha,Re=d.Ia+8*w+y,y=0;16>y;++y)r(ce,fe+y*d.R,F,U+32*y,16);for(y=0;8>y;++y)r(Ne,Z+y*d.B,$,Y+32*y,8),r(ve,Re+y*d.B,se,ye+32*y,8)}}function na(d,h,y,w,R,O,F,U,$){var Y=[0],se=[0],ye=0,Z=$!=null?$.kd:0,ce=$??new je;if(d==null||12>y)return 7;ce.data=d,ce.w=h,ce.ha=y,h=[h],y=[y],ce.gb=[ce.gb];e:{var fe=h,Ne=y,ve=ce.gb;if(e(d!=null),e(Ne!=null),e(ve!=null),ve[0]=0,12<=Ne[0]&&!t(d,fe[0],"RIFF")){if(t(d,fe[0]+8,"WEBP")){ve=3;break e}var Re=st(d,fe[0]+4);if(12>Re||4294967286<Re){ve=3;break e}if(Z&&Re>Ne[0]-8){ve=7;break e}ve[0]=Re,fe[0]+=12,Ne[0]-=12}ve=0}if(ve!=0)return ve;for(Re=0<ce.gb[0],y=y[0];;){e:{var Oe=d;Ne=h,ve=y;var We=Y,Be=se,St=fe=[0];if((_t=ye=[ye])[0]=0,8>ve[0])ve=7;else{if(!t(Oe,Ne[0],"VP8X")){if(st(Oe,Ne[0]+4)!=10){ve=3;break e}if(18>ve[0]){ve=7;break e}var ft=st(Oe,Ne[0]+8),dn=1+He(Oe,Ne[0]+12);if(2147483648<=dn*(Oe=1+He(Oe,Ne[0]+15))){ve=3;break e}St!=null&&(St[0]=ft),We!=null&&(We[0]=dn),Be!=null&&(Be[0]=Oe),Ne[0]+=18,ve[0]-=18,_t[0]=1}ve=0}}if(ye=ye[0],fe=fe[0],ve!=0)return ve;if(Ne=!!(2&fe),!Re&&ye)return 3;if(O!=null&&(O[0]=!!(16&fe)),F!=null&&(F[0]=Ne),U!=null&&(U[0]=0),F=Y[0],fe=se[0],ye&&Ne&&$==null){ve=0;break}if(4>y){ve=7;break}if(Re&&ye||!Re&&!ye&&!t(d,h[0],"ALPH")){y=[y],ce.na=[ce.na],ce.P=[ce.P],ce.Sa=[ce.Sa];e:{ft=d,ve=h,Re=y;var _t=ce.gb;We=ce.na,Be=ce.P,St=ce.Sa,dn=22,e(ft!=null),e(Re!=null),Oe=ve[0];var bn=Re[0];for(e(We!=null),e(St!=null),We[0]=null,Be[0]=null,St[0]=0;;){if(ve[0]=Oe,Re[0]=bn,8>bn){ve=7;break e}var yi=st(ft,Oe+4);if(4294967286<yi){ve=3;break e}var fn=8+yi+1&-2;if(dn+=fn,0<_t&&dn>_t){ve=3;break e}if(!t(ft,Oe,"VP8 ")||!t(ft,Oe,"VP8L")){ve=0;break e}if(bn[0]<fn){ve=7;break e}t(ft,Oe,"ALPH")||(We[0]=ft,Be[0]=Oe+8,St[0]=yi),Oe+=fn,bn-=fn}}if(y=y[0],ce.na=ce.na[0],ce.P=ce.P[0],ce.Sa=ce.Sa[0],ve!=0)break}y=[y],ce.Ja=[ce.Ja],ce.xa=[ce.xa];e:if(_t=d,ve=h,Re=y,We=ce.gb[0],Be=ce.Ja,St=ce.xa,ft=ve[0],Oe=!t(_t,ft,"VP8 "),dn=!t(_t,ft,"VP8L"),e(_t!=null),e(Re!=null),e(Be!=null),e(St!=null),8>Re[0])ve=7;else{if(Oe||dn){if(_t=st(_t,ft+4),12<=We&&_t>We-12){ve=3;break e}if(Z&&_t>Re[0]-8){ve=7;break e}Be[0]=_t,ve[0]+=8,Re[0]-=8,St[0]=dn}else St[0]=5<=Re[0]&&_t[ft+0]==47&&!(_t[ft+4]>>5),Be[0]=Re[0];ve=0}if(y=y[0],ce.Ja=ce.Ja[0],ce.xa=ce.xa[0],h=h[0],ve!=0)break;if(4294967286<ce.Ja)return 3;if(U==null||Ne||(U[0]=ce.xa?2:1),F=[F],fe=[fe],ce.xa){if(5>y){ve=7;break}U=F,Z=fe,Ne=O,d==null||5>y?d=0:5<=y&&d[h+0]==47&&!(d[h+4]>>5)?(Re=[0],_t=[0],We=[0],Te(Be=new G,d,h,y),pr(Be,Re,_t,We)?(U!=null&&(U[0]=Re[0]),Z!=null&&(Z[0]=_t[0]),Ne!=null&&(Ne[0]=We[0]),d=1):d=0):d=0}else{if(10>y){ve=7;break}U=fe,d==null||10>y||!zd(d,h+3,y-3)?d=0:(Z=d[h+0]|d[h+1]<<8|d[h+2]<<16,Ne=16383&(d[h+7]<<8|d[h+6]),d=16383&(d[h+9]<<8|d[h+8]),1&Z||3<(Z>>1&7)||!(Z>>4&1)||Z>>5>=ce.Ja||!Ne||!d?d=0:(F&&(F[0]=Ne),U&&(U[0]=d),d=1))}if(!d||(F=F[0],fe=fe[0],ye&&(Y[0]!=F||se[0]!=fe)))return 3;$!=null&&($[0]=ce,$.offset=h-$.w,e(4294967286>h-$.w),e($.offset==$.ha-y));break}return ve==0||ve==7&&ye&&$==null?(O!=null&&(O[0]|=ce.na!=null&&0<ce.na.length),w!=null&&(w[0]=F),R!=null&&(R[0]=fe),0):ve}function vl(d,h,y){var w=h.width,R=h.height,O=0,F=0,U=w,$=R;if(h.Da=d!=null&&0<d.Da,h.Da&&(U=d.cd,$=d.bd,O=d.v,F=d.j,11>y||(O&=-2,F&=-2),0>O||0>F||0>=U||0>=$||O+U>w||F+$>R))return 0;if(h.v=O,h.j=F,h.va=O+U,h.o=F+$,h.U=U,h.T=$,h.da=d!=null&&0<d.da,h.da){if(!At(U,$,y=[d.ib],O=[d.hb]))return 0;h.ib=y[0],h.hb=O[0]}return h.ob=d!=null&&d.ob,h.Kb=d==null||!d.Sd,h.da&&(h.ob=h.ib<3*w/4&&h.hb<3*R/4,h.Kb=0),1}function Dm(d){if(d==null)return 2;if(11>d.S){var h=d.f.RGBA;h.fb+=(d.height-1)*h.A,h.A=-h.A}else h=d.f.kb,d=d.height,h.O+=(d-1)*h.fa,h.fa=-h.fa,h.N+=(d-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(d-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(d-1)*h.lb,h.lb=-h.lb);return 0}function uu(d,h,y,w){if(w==null||0>=d||0>=h)return 2;if(y!=null){if(y.Da){var R=y.cd,O=y.bd,F=-2&y.v,U=-2&y.j;if(0>F||0>U||0>=R||0>=O||F+R>d||U+O>h)return 2;d=R,h=O}if(y.da){if(!At(d,h,R=[y.ib],O=[y.hb]))return 2;d=R[0],h=O[0]}}w.width=d,w.height=h;e:{var $=w.width,Y=w.height;if(d=w.S,0>=$||0>=Y||!(d>=o_&&13>d))d=2;else{if(0>=w.Rd&&w.sd==null){F=O=R=h=0;var se=(U=$*wk[d])*Y;if(11>d||(O=(Y+1)/2*(h=($+1)/2),d==12&&(F=(R=$)*Y)),(Y=o(se+2*O+F))==null){d=1;break e}w.sd=Y,11>d?(($=w.f.RGBA).eb=Y,$.fb=0,$.A=U,$.size=se):(($=w.f.kb).y=Y,$.O=0,$.fa=U,$.Fd=se,$.f=Y,$.N=0+se,$.Ab=h,$.Cd=O,$.ea=Y,$.W=0+se+O,$.Db=h,$.Ed=O,d==12&&($.F=Y,$.J=0+se+2*O),$.Tc=F,$.lb=R)}if(h=1,R=w.S,O=w.width,F=w.height,R>=o_&&13>R)if(11>R)d=w.f.RGBA,h&=(U=Math.abs(d.A))*(F-1)+O<=d.size,h&=U>=O*wk[R],h&=d.eb!=null;else{d=w.f.kb,U=(O+1)/2,se=(F+1)/2,$=Math.abs(d.fa),Y=Math.abs(d.Ab);var ye=Math.abs(d.Db),Z=Math.abs(d.lb),ce=Z*(F-1)+O;h&=$*(F-1)+O<=d.Fd,h&=Y*(se-1)+U<=d.Cd,h=(h&=ye*(se-1)+U<=d.Ed)&$>=O&Y>=U&ye>=U,h&=d.y!=null,h&=d.f!=null,h&=d.ea!=null,R==12&&(h&=Z>=O,h&=ce<=d.Tc,h&=d.F!=null)}else h=0;d=h?0:2}}return d!=0||y!=null&&y.fd&&(d=Dm(w)),d}var Gd=64,ws=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],bs=24,du=32,yl=8,fu=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];at("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(d){return d},S.Predictor2=function(d,h,y){return h[y+0]},S.Predictor3=function(d,h,y){return h[y+1]},S.Predictor4=function(d,h,y){return h[y-1]},S.Predictor5=function(d,h,y){return It(It(d,h[y+1]),h[y+0])},S.Predictor6=function(d,h,y){return It(d,h[y-1])},S.Predictor7=function(d,h,y){return It(d,h[y+0])},S.Predictor8=function(d,h,y){return It(h[y-1],h[y+0])},S.Predictor9=function(d,h,y){return It(h[y+0],h[y+1])},S.Predictor10=function(d,h,y){return It(It(d,h[y-1]),It(h[y+0],h[y+1]))},S.Predictor11=function(d,h,y){var w=h[y+0];return 0>=Wt(w>>24&255,d>>24&255,(h=h[y-1])>>24&255)+Wt(w>>16&255,d>>16&255,h>>16&255)+Wt(w>>8&255,d>>8&255,h>>8&255)+Wt(255&w,255&d,255&h)?w:d},S.Predictor12=function(d,h,y){var w=h[y+0];return(Cn((d>>24&255)+(w>>24&255)-((h=h[y-1])>>24&255))<<24|Cn((d>>16&255)+(w>>16&255)-(h>>16&255))<<16|Cn((d>>8&255)+(w>>8&255)-(h>>8&255))<<8|Cn((255&d)+(255&w)-(255&h)))>>>0},S.Predictor13=function(d,h,y){var w=h[y-1];return(gn((d=It(d,h[y+0]))>>24&255,w>>24&255)<<24|gn(d>>16&255,w>>16&255)<<16|gn(d>>8&255,w>>8&255)<<8|gn(255&d,255&w))>>>0};var Tm=S.PredictorAdd0;S.PredictorAdd1=Lt,at("Predictor2","PredictorAdd2"),at("Predictor3","PredictorAdd3"),at("Predictor4","PredictorAdd4"),at("Predictor5","PredictorAdd5"),at("Predictor6","PredictorAdd6"),at("Predictor7","PredictorAdd7"),at("Predictor8","PredictorAdd8"),at("Predictor9","PredictorAdd9"),at("Predictor10","PredictorAdd10"),at("Predictor11","PredictorAdd11"),at("Predictor12","PredictorAdd12"),at("Predictor13","PredictorAdd13");var Rh=S.PredictorAdd2;xt("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),xt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var qr,n_=S.ColorIndexInverseTransform,mc=S.MapARGB,vc=S.VP8LColorIndexInverseTransformAlpha,Mm=S.MapAlpha,Nm=S.VP8LPredictorsAdd=[];Nm.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var Pm,km,hu,pu,gu,Kd,mu,Yd,ra,yc,On,nr,$r,vi,_l,Rm,Oh,r_,KP,YP,ZP,QP,XP,JP,Om,ek,tk,nk,rk=o(511),ik=o(2041),ok=o(225),sk=o(767),ak=0,bE=ik,i_=ok,xs=sk,ia=rk,o_=0,s_=1,ck=2,a_=3,c_=4,xE=5,lk=6,EE=7,CE=8,l_=9,IE=10,nz=[2,3,7],rz=[3,3,11],uk=[280,256,256,256,40],iz=[0,1,1,1,0],oz=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],sz=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],az=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],cz=8,SE=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],AE=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Lm=null,lz=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],uz=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],dk=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],dz=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],fz=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hz=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],pz=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vu=[],Na=[],wl=[],gz=1,fk=2,yu=[],oa=[];ta("UpsampleRgbLinePair",B,3),ta("UpsampleBgrLinePair",le,3),ta("UpsampleRgbaLinePair",$t,4),ta("UpsampleBgraLinePair",Tr,4),ta("UpsampleArgbLinePair",Dn,4),ta("UpsampleRgba4444LinePair",Ye,2),ta("UpsampleRgb565LinePair",Ee,2);var mz=S.UpsampleRgbLinePair,vz=S.UpsampleBgrLinePair,hk=S.UpsampleRgbaLinePair,pk=S.UpsampleBgraLinePair,gk=S.UpsampleArgbLinePair,mk=S.UpsampleRgba4444LinePair,yz=S.UpsampleRgb565LinePair,u_=16,d_=1<<u_-1,Fm=-227,DE=482,vk=6,_z=(256<<vk)-1,yk=0,wz=o(256),bz=o(256),xz=o(256),Ez=o(256),Cz=o(DE-Fm),Iz=o(DE-Fm);lr("YuvToRgbRow",B,3),lr("YuvToBgrRow",le,3),lr("YuvToRgbaRow",$t,4),lr("YuvToBgraRow",Tr,4),lr("YuvToArgbRow",Dn,4),lr("YuvToRgba4444Row",Ye,2),lr("YuvToRgb565Row",Ee,2);var _k=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],f_=[0,2,8],Sz=[8,7,6,4,4,2,2,2,1,1,1,1],Az=1;this.WebPDecodeRGBA=function(d,h,y,w,R){var O=s_,F=new ke,U=new en;F.ba=U,U.S=O,U.width=[U.width],U.height=[U.height];var $=U.width,Y=U.height,se=new kt;if(se==null||d==null)var ye=2;else e(se!=null),ye=na(d,h,y,se.width,se.height,se.Pd,se.Qd,se.format,null);if(ye!=0?$=0:($!=null&&($[0]=se.width[0]),Y!=null&&(Y[0]=se.height[0]),$=1),$){U.width=U.width[0],U.height=U.height[0],w!=null&&(w[0]=U.width),R!=null&&(R[0]=U.height);e:{if(w=new fc,(R=new je).data=d,R.w=h,R.ha=y,R.kd=1,h=[0],e(R!=null),((d=na(R.data,R.w,R.ha,null,null,null,h,null,R))==0||d==7)&&h[0]&&(d=4),(h=d)==0){if(e(F!=null),w.data=R.data,w.w=R.w+R.offset,w.ha=R.ha-R.offset,w.put=Mt,w.ac=fs,w.bc=Ys,w.ma=F,R.xa){if((d=Xi())==null){F=1;break e}if((function(Z,ce){var fe=[0],Ne=[0],ve=[0];t:for(;;){if(Z==null)return 0;if(ce==null)return Z.a=2,0;if(Z.l=ce,Z.a=0,Te(Z.m,ce.data,ce.w,ce.ha),!pr(Z.m,fe,Ne,ve)){Z.a=3;break t}if(Z.xb=fk,ce.width=fe[0],ce.height=Ne[0],!ps(fe[0],Ne[0],1,Z,null))break t;return 1}return e(Z.a!=0),0})(d,w)){if(w=(h=uu(w.width,w.height,F.Oa,F.ba))==0){t:{w=d;n:for(;;){if(w==null){w=0;break t}if(e(w.s.yc!=null),e(w.s.Ya!=null),e(0<w.s.Wb),e((y=w.l)!=null),e((R=y.ma)!=null),w.xb!=0){if(w.ca=R.ba,w.tb=R.tb,e(w.ca!=null),!vl(R.Oa,y,a_)){w.a=2;break n}if(!lc(w,y.width)||y.da)break n;if((y.da||Ot(w.ca.S))&&gr(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&gr()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!H(w.s.vb,w.s.Wa.Xa)){w.a=1;break n}w.xb=0}if(!Co(w,w.V,w.Ba,w.c,w.i,y.o,cc))break n;R.Dc=w.Ma,w=1;break t}e(w.a!=0),w=0}w=!w}w&&(h=d.a)}else h=d.a}else{if((d=new Ud)==null){F=1;break e}if(d.Fa=R.na,d.P=R.P,d.qc=R.Sa,Qs(d,w)){if((h=uu(w.width,w.height,F.Oa,F.ba))==0){if(d.Aa=0,y=F.Oa,e((R=d)!=null),y!=null){if(0<($=0>($=y.Md)?0:100<$?255:255*$/100)){for(Y=se=0;4>Y;++Y)12>(ye=R.pb[Y]).lc&&(ye.ia=$*Sz[0>ye.lc?0:ye.lc]>>3),se|=ye.ia;se&&(alert("todo:VP8InitRandom"),R.ia=1)}R.Ga=y.Id,100<R.Ga?R.Ga=100:0>R.Ga&&(R.Ga=0)}(function(Z,ce){if(Z==null)return 0;if(ce==null)return Ar(Z,2,"NULL VP8Io parameter in VP8Decode().");if(!Z.cb&&!Qs(Z,ce))return 0;if(e(Z.cb),ce.ac==null||ce.ac(ce)){ce.ob&&(Z.L=0);var fe=f_[Z.L];if(Z.L==2?(Z.yb=0,Z.zb=0):(Z.yb=ce.v-fe>>4,Z.zb=ce.j-fe>>4,0>Z.yb&&(Z.yb=0),0>Z.zb&&(Z.zb=0)),Z.Va=ce.o+15+fe>>4,Z.Hb=ce.va+15+fe>>4,Z.Hb>Z.za&&(Z.Hb=Z.za),Z.Va>Z.Ub&&(Z.Va=Z.Ub),0<Z.L){var Ne=Z.ed;for(fe=0;4>fe;++fe){var ve;if(Z.Qa.Cb){var Re=Z.Qa.Lb[fe];Z.Qa.Fb||(Re+=Ne.Tb)}else Re=Ne.Tb;for(ve=0;1>=ve;++ve){var Oe=Z.gd[fe][ve],We=Re;if(Ne.Pc&&(We+=Ne.vd[0],ve&&(We+=Ne.od[0])),0<(We=0>We?0:63<We?63:We)){var Be=We;0<Ne.wb&&(Be=4<Ne.wb?Be>>2:Be>>1)>9-Ne.wb&&(Be=9-Ne.wb),1>Be&&(Be=1),Oe.dd=Be,Oe.tc=2*We+Be,Oe.ld=40<=We?2:15<=We?1:0}else Oe.tc=0;Oe.La=ve}}}fe=0}else Ar(Z,6,"Frame setup failed"),fe=Z.a;if(fe=fe==0){if(fe){Z.$c=0,0<Z.Aa||(Z.Ic=Az);t:{fe=Z.Ic,Ne=4*(Be=Z.za);var St=32*Be,ft=Be+1,dn=0<Z.L?Be*(0<Z.Aa?2:1):0,_t=(Z.Aa==2?2:1)*Be;if((Oe=Ne+832+(ve=3*(16*fe+f_[Z.L])/2*St)+(Re=Z.Fa!=null&&0<Z.Fa.length?Z.Kc.c*Z.Kc.i:0))!=Oe)fe=0;else{if(Oe>Z.Vb){if(Z.Vb=0,Z.Ec=o(Oe),Z.Fc=0,Z.Ec==null){fe=Ar(Z,1,"no memory during frame initialization.");break t}Z.Vb=Oe}Oe=Z.Ec,We=Z.Fc,Z.Ac=Oe,Z.Bc=We,We+=Ne,Z.Gd=s(St,jd),Z.Hd=0,Z.rb=s(ft+1,Ia),Z.sb=1,Z.wa=dn?s(dn,Ji):null,Z.Y=0,Z.D.Nb=0,Z.D.wa=Z.wa,Z.D.Y=Z.Y,0<Z.Aa&&(Z.D.Y+=Be),e(!0),Z.oc=Oe,Z.pc=We,We+=832,Z.ya=s(_t,ul),Z.aa=0,Z.D.ya=Z.ya,Z.D.aa=Z.aa,Z.Aa==2&&(Z.D.aa+=Be),Z.R=16*Be,Z.B=8*Be,Be=(St=f_[Z.L])*Z.R,St=St/2*Z.B,Z.sa=Oe,Z.ta=We+Be,Z.qa=Z.sa,Z.ra=Z.ta+16*fe*Z.R+St,Z.Ha=Z.qa,Z.Ia=Z.ra+8*fe*Z.B+St,Z.$c=0,We+=ve,Z.mb=Re?Oe:null,Z.nb=Re?We:null,e(We+Re<=Z.Fc+Z.Vb),qd(Z),i(Z.Ac,Z.Bc,0,Ne),fe=1}}if(fe){if(ce.ka=0,ce.y=Z.sa,ce.O=Z.ta,ce.f=Z.qa,ce.N=Z.ra,ce.ea=Z.Ha,ce.Vd=Z.Ia,ce.fa=Z.R,ce.Rc=Z.B,ce.F=null,ce.J=0,!ak){for(fe=-255;255>=fe;++fe)rk[255+fe]=0>fe?-fe:fe;for(fe=-1020;1020>=fe;++fe)ik[1020+fe]=-128>fe?-128:127<fe?127:fe;for(fe=-112;112>=fe;++fe)ok[112+fe]=-16>fe?-16:15<fe?15:fe;for(fe=-255;510>=fe;++fe)sk[255+fe]=0>fe?0:255<fe?255:fe;ak=1}mu=Xs,Yd=iu,yc=ms,On=Rn,nr=dl,ra=ru,$r=Wd,vi=Ta,_l=k,Rm=K,Oh=ml,r_=v,KP=ne,YP=de,ZP=ea,QP=cu,XP=Yo,JP=Hd,Na[0]=Im,Na[1]=xm,Na[2]=hc,Na[3]=Cm,Na[4]=Sa,Na[5]=Sm,Na[6]=Mi,Na[7]=Am,Na[8]=pc,Na[9]=Js,vu[0]=fl,vu[1]=Em,vu[2]=$d,vu[3]=Mh,vu[4]=eo,vu[5]=ou,vu[6]=Nh,wl[0]=Ph,wl[1]=Th,wl[2]=gc,wl[3]=hl,wl[4]=Qn,wl[5]=pl,wl[6]=kh,fe=1}else fe=0}fe&&(fe=(function(bn,yi){for(bn.M=0;bn.M<bn.Va;++bn.M){var fn,wt=bn.Jc[bn.M&bn.Xb],rt=bn.m,Hr=bn;for(fn=0;fn<Hr.za;++fn){var rn=rt,Sn=Hr,mr=Sn.Ac,Bi=Sn.Bc+4*fn,Do=Sn.zc,Fr=Sn.ya[Sn.aa+fn];if(Sn.Qa.Bb?Fr.$b=Pe(rn,Sn.Pa.jb[0])?2+Pe(rn,Sn.Pa.jb[2]):Pe(rn,Sn.Pa.jb[1]):Fr.$b=0,Sn.kc&&(Fr.Ad=Pe(rn,Sn.Bd)),Fr.Za=!Pe(rn,145)+0,Fr.Za){var to=Fr.Ob,To=0;for(Sn=0;4>Sn;++Sn){var _i,Tn=Do[0+Sn];for(_i=0;4>_i;++_i){Tn=fz[mr[Bi+_i]][Tn];for(var Bn=dk[Pe(rn,Tn[0])];0<Bn;)Bn=dk[2*Bn+Pe(rn,Tn[Bn])];Tn=-Bn,mr[Bi+_i]=Tn}r(to,To,mr,Bi,4),To+=4,Do[0+Sn]=Tn}}else Tn=Pe(rn,156)?Pe(rn,128)?1:3:Pe(rn,163)?2:0,Fr.Ob[0]=Tn,i(mr,Bi,Tn,4),i(Do,0,Tn,4);Fr.Dd=Pe(rn,142)?Pe(rn,114)?Pe(rn,183)?1:3:2:0}if(Hr.m.Ka)return Ar(bn,7,"Premature end-of-partition0 encountered.");for(;bn.ja<bn.za;++bn.ja){if(Hr=wt,rn=(rt=bn).rb[rt.sb-1],mr=rt.rb[rt.sb+rt.ja],fn=rt.ya[rt.aa+rt.ja],Bi=rt.kc?fn.Ad:0)rn.la=mr.la=0,fn.Za||(rn.Na=mr.Na=0),fn.Hc=0,fn.Gc=0,fn.ia=0;else{var Vr,Un;if(rn=mr,mr=Hr,Bi=rt.Pa.Xc,Do=rt.ya[rt.aa+rt.ja],Fr=rt.pb[Do.$b],Sn=Do.ad,to=0,To=rt.rb[rt.sb-1],Tn=_i=0,i(Sn,to,0,384),Do.Za)var Ui=0,Pa=Bi[3];else{Bn=o(16);var Wr=rn.Na+To.Na;if(Wr=Lm(mr,Bi[1],Wr,Fr.Eb,0,Bn,0),rn.Na=To.Na=(0<Wr)+0,1<Wr)mu(Bn,0,Sn,to);else{var Qo=Bn[0]+3>>3;for(Bn=0;256>Bn;Bn+=16)Sn[to+Bn]=Qo}Ui=1,Pa=Bi[0]}var rr=15&rn.la,wi=15&To.la;for(Bn=0;4>Bn;++Bn){var Es=1&wi;for(Qo=Un=0;4>Qo;++Qo)rr=rr>>1|(Es=(Wr=Lm(mr,Pa,Wr=Es+(1&rr),Fr.Sc,Ui,Sn,to))>Ui)<<7,Un=Un<<2|(3<Wr?3:1<Wr?2:Sn[to+0]!=0),to+=16;rr>>=4,wi=wi>>1|Es<<7,_i=(_i<<8|Un)>>>0}for(Pa=rr,Ui=wi>>4,Vr=0;4>Vr;Vr+=2){for(Un=0,rr=rn.la>>4+Vr,wi=To.la>>4+Vr,Bn=0;2>Bn;++Bn){for(Es=1&wi,Qo=0;2>Qo;++Qo)Wr=Es+(1&rr),rr=rr>>1|(Es=0<(Wr=Lm(mr,Bi[2],Wr,Fr.Qc,0,Sn,to)))<<3,Un=Un<<2|(3<Wr?3:1<Wr?2:Sn[to+0]!=0),to+=16;rr>>=2,wi=wi>>1|Es<<5}Tn|=Un<<4*Vr,Pa|=rr<<4<<Vr,Ui|=(240&wi)<<Vr}rn.la=Pa,To.la=Ui,Do.Hc=_i,Do.Gc=Tn,Do.ia=43690&Tn?0:Fr.ia,Bi=!(_i|Tn)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[fn.$b][fn.Za],rt.wa[rt.Y+rt.ja].La|=!Bi),Hr.Ka)return Ar(bn,7,"Premature end-of-file encountered.")}if(qd(bn),rt=yi,Hr=1,fn=(wt=bn).D,rn=0<wt.L&&wt.M>=wt.zb&&wt.M<=wt.Va,wt.Aa==0)t:{if(fn.M=wt.M,fn.uc=rn,wr(wt,fn),Hr=1,fn=(Un=wt.D).Nb,rn=(Tn=f_[wt.L])*wt.R,mr=Tn/2*wt.B,Bn=16*fn*wt.R,Qo=8*fn*wt.B,Bi=wt.sa,Do=wt.ta-rn+Bn,Fr=wt.qa,Sn=wt.ra-mr+Qo,to=wt.Ha,To=wt.Ia-mr+Qo,wi=(rr=Un.M)==0,_i=rr>=wt.Va-1,wt.Aa==2&&wr(wt,Un),Un.uc)for(Es=(Wr=wt).D.M,e(Wr.D.uc),Un=Wr.yb;Un<Wr.Hb;++Un){Ui=Un,Pa=Es;var Mo=(Cs=(zi=Wr).D).Nb;Vr=zi.R;var Cs=Cs.wa[Cs.Y+Ui],Is=zi.sa,Xo=zi.ta+16*Mo*Vr+16*Ui,Ss=Cs.dd,ur=Cs.tc;if(ur!=0)if(e(3<=ur),zi.L==1)0<Ui&&QP(Is,Xo,Vr,ur+4),Cs.La&&JP(Is,Xo,Vr,ur),0<Pa&&ZP(Is,Xo,Vr,ur+4),Cs.La&&XP(Is,Xo,Vr,ur);else{var As=zi.B,ka=zi.qa,Zd=zi.ra+8*Mo*As+8*Ui,bl=zi.Ha,zi=zi.Ia+8*Mo*As+8*Ui;Mo=Cs.ld,0<Ui&&(vi(Is,Xo,Vr,ur+4,Ss,Mo),Rm(ka,Zd,bl,zi,As,ur+4,Ss,Mo)),Cs.La&&(r_(Is,Xo,Vr,ur,Ss,Mo),YP(ka,Zd,bl,zi,As,ur,Ss,Mo)),0<Pa&&($r(Is,Xo,Vr,ur+4,Ss,Mo),_l(ka,Zd,bl,zi,As,ur+4,Ss,Mo)),Cs.La&&(Oh(Is,Xo,Vr,ur,Ss,Mo),KP(ka,Zd,bl,zi,As,ur,Ss,Mo))}}if(wt.ia&&alert("todo:DitherRow"),rt.put!=null){if(Un=16*rr,rr=16*(rr+1),wi?(rt.y=wt.sa,rt.O=wt.ta+Bn,rt.f=wt.qa,rt.N=wt.ra+Qo,rt.ea=wt.Ha,rt.W=wt.Ia+Qo):(Un-=Tn,rt.y=Bi,rt.O=Do,rt.f=Fr,rt.N=Sn,rt.ea=to,rt.W=To),_i||(rr-=Tn),rr>rt.o&&(rr=rt.o),rt.F=null,rt.J=null,wt.Fa!=null&&0<wt.Fa.length&&Un<rr&&(rt.J=jn(wt,rt,Un,rr-Un),rt.F=wt.mb,rt.F==null&&rt.F.length==0)){Hr=Ar(wt,3,"Could not decode alpha data.");break t}Un<rt.j&&(Tn=rt.j-Un,Un=rt.j,e(!(1&Tn)),rt.O+=wt.R*Tn,rt.N+=wt.B*(Tn>>1),rt.W+=wt.B*(Tn>>1),rt.F!=null&&(rt.J+=rt.width*Tn)),Un<rr&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=Un-rt.j,rt.U=rt.va-rt.v,rt.T=rr-Un,Hr=rt.put(rt))}fn+1!=wt.Ic||_i||(r(wt.sa,wt.ta-rn,Bi,Do+16*wt.R,rn),r(wt.qa,wt.ra-mr,Fr,Sn+8*wt.B,mr),r(wt.Ha,wt.Ia-mr,to,To+8*wt.B,mr))}if(!Hr)return Ar(bn,6,"Output aborted.")}return 1})(Z,ce)),ce.bc!=null&&ce.bc(ce),fe&=1}return fe?(Z.cb=0,fe):0})(d,w)||(h=d.a)}}else h=d.a}h==0&&F.Oa!=null&&F.Oa.fd&&(h=Dm(F.ba))}F=h}O=F!=0?null:11>O?U.f.RGBA.eb:U.f.kb.y}else O=null;return O};var wk=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(S,V){for(var b="",A=0;A<4;A++)b+=String.fromCharCode(S[V++]);return b}function u(S,V){return S[V+0]|S[V+1]<<8}function p(S,V){return(S[V+0]|S[V+1]<<8|S[V+2]<<16)>>>0}function m(S,V){return(S[V+0]|S[V+1]<<8|S[V+2]<<16|S[V+3]<<24)>>>0}new c;var g=[0],C=[0],I=[],N=new c,P=n,Q=(function(S,V){var b={},A=0,T=!1,te=0,be=0;if(b.frames=[],!(function(L,G){for(var J=0;J<4;J++)if(L[G+J]!="RIFF".charCodeAt(J))return!0;return!1})(S,V)){for(m(S,V+=4),V+=8;V<S.length;){var De=l(S,V),Ae=m(S,V+=4);V+=4;var he=Ae+(1&Ae);switch(De){case"VP8 ":case"VP8L":b.frames[A]===void 0&&(b.frames[A]={}),(Le=b.frames[A]).src_off=T?be:V-8,Le.src_size=te+Ae+8,A++,T&&(T=!1,te=0,be=0);break;case"VP8X":(Le=b.header={}).feature_flags=S[V];var Te=V+4;Le.canvas_width=1+p(S,Te),Te+=3,Le.canvas_height=1+p(S,Te),Te+=3;break;case"ALPH":T=!0,te=he+8,be=V-8;break;case"ANIM":(Le=b.header).bgcolor=m(S,V),Te=V+4,Le.loop_count=u(S,Te),Te+=2;break;case"ANMF":var Ge,Le;(Le=b.frames[A]={}).offset_x=2*p(S,V),V+=3,Le.offset_y=2*p(S,V),V+=3,Le.width=1+p(S,V),V+=3,Le.height=1+p(S,V),V+=3,Le.duration=p(S,V),V+=3,Ge=S[V++],Le.dispose=1&Ge,Le.blend=Ge>>1&1}De!="ANMF"&&(V+=he)}return b}})(P,0);Q.response=P,Q.rgbaoutput=!0,Q.dataurl=!1;var j=Q.header?Q.header:null,W=Q.frames?Q.frames:null;if(j){j.loop_counter=j.loop_count,g=[j.canvas_height],C=[j.canvas_width];for(var ae=0;ae<W.length&&W[ae].blend!=0;ae++);}var me=W[0],z=N.WebPDecodeRGBA(P,me.src_off,me.src_size,C,g);me.rgba=z,me.imgwidth=C[0],me.imgheight=g[0];for(var M=0;M<C[0]*g[0]*4;M++)I[M]=z[M];return this.width=C,this.height=g,this.data=I,this}(function(n){var e,t,r,i,o,s,a,c,l,u=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new c,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new s,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new s,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,l=new u}]);var p=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=L;Object.defineProperty(this,"pdf",{get:function(){return G}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(H){J=!!H}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(H){re=!!H}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(H){isNaN(H)||(oe=H)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(H){isNaN(H)||(ue=H)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(H){var Ze;typeof H=="number"?Ze=[H,H,H,H]:((Ze=new Array(4))[0]=H[0],Ze[1]=H.length>=2?H[1]:Ze[0],Ze[2]=H.length>=3?H[2]:Ze[0],Ze[3]=H.length>=4?H[3]:Ze[1]),l.margin=Ze}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(H){xe=H}});var Ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ie},set:function(H){Ie=H}});var Pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pe},set:function(H){Pe=H}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(H){H instanceof u&&(l=H)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(H){l.path=H}});var $e=[];Object.defineProperty(this,"ctxStack",{get:function(){return $e},set:function(H){$e=H}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(H){var Ze;Ze=m(H),this.ctx.fillStyle=Ze.style,this.ctx.isFillTransparent=Ze.a===0,this.ctx.fillOpacity=Ze.a,this.pdf.setFillColor(Ze.r,Ze.g,Ze.b,{a:Ze.a}),this.pdf.setTextColor(Ze.r,Ze.g,Ze.b,{a:Ze.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(H){var Ze=m(H);this.ctx.strokeStyle=Ze.style,this.ctx.isStrokeTransparent=Ze.a===0,this.ctx.strokeOpacity=Ze.a,Ze.a===0?this.pdf.setDrawColor(255,255,255):(Ze.a,this.pdf.setDrawColor(Ze.r,Ze.g,Ze.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(H){["butt","round","square"].indexOf(H)!==-1&&(this.ctx.lineCap=H,this.pdf.setLineCap(H))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(H){isNaN(H)||(this.ctx.lineWidth=H,this.pdf.setLineWidth(H))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(H){["bevel","round","miter"].indexOf(H)!==-1&&(this.ctx.lineJoin=H,this.pdf.setLineJoin(H))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(H){isNaN(H)||(this.ctx.miterLimit=H,this.pdf.setMiterLimit(H))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(H){this.ctx.textBaseline=H}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(H){["right","end","center","left","start"].indexOf(H)!==-1&&(this.ctx.textAlign=H)}});var et=null,He=null,st=null;Object.defineProperty(this,"fontFaces",{get:function(){return st},set:function(H){et=null,He=null,st=H}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(H){var Ze;if(this.ctx.font=H,(Ze=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(H))!==null){var Rt=Ze[1];Ze[2];var At=Ze[3],Ue=Ze[4];Ze[5];var Dt=Ze[6],at=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ue)[2];Ue=Math.floor(at==="px"?parseFloat(Ue)*this.pdf.internal.scaleFactor:at==="em"?parseFloat(Ue)*this.pdf.getFontSize():parseFloat(Ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ue);var Et=(function(xt){var Sr,vn,on=[],sn=xt.trim();if(sn==="")return EP;if(sn in VU)return[VU[sn]];for(;sn!=="";){switch(vn=null,Sr=(sn=BU(sn)).charAt(0)){case'"':case"'":vn=Tae(sn.substring(1),Sr);break;default:vn=Mae(sn)}if(vn===null||(on.push(vn[0]),(sn=BU(vn[1]))!==""&&sn.charAt(0)!==","))return EP;sn=sn.replace(/^,/,"")}return on})(Dt);if(this.fontFaces){var It=(function(xt,Sr){var vn=xt.getFontList(),on=JSON.stringify(vn);if(et===null||He!==on){var sn=(function(Kn){var Nt=[];return Object.keys(Kn).forEach(function(Yn){Kn[Yn].forEach(function(Ot){var Zt=null;switch(Ot){case"bold":Zt={family:Yn,weight:"bold"};break;case"italic":Zt={family:Yn,style:"italic"};break;case"bolditalic":Zt={family:Yn,weight:"bold",style:"italic"};break;case"":case"normal":Zt={family:Yn}}Zt!==null&&(Zt.ref={name:Yn,style:Ot},Nt.push(Zt))})}),Nt})(vn);et=(function(Kn){for(var Nt={},Yn=0;Yn<Kn.length;++Yn){var Ot=xP(Kn[Yn]),Zt=Ot.family,tr=Ot.stretch,en=Ot.style,kt=Ot.weight;Nt[Zt]=Nt[Zt]||{},Nt[Zt][tr]=Nt[Zt][tr]||{},Nt[Zt][tr][en]=Nt[Zt][tr][en]||{},Nt[Zt][tr][en][kt]=Ot}return Nt})(sn.concat(Sr)),He=on}return et})(this.pdf,this.fontFaces),Cn=Et.map(function(xt){return{family:xt,stretch:"normal",weight:At,style:Rt}}),gn=(function(xt,Sr,vn){for(var on=(vn=vn||{}).defaultFontFamily||"times",sn=Object.assign({},Dae,vn.genericFontFamilies||{}),Kn=null,Nt=null,Yn=0;Yn<Sr.length;++Yn)if(sn[(Kn=xP(Sr[Yn])).family]&&(Kn.family=sn[Kn.family]),xt.hasOwnProperty(Kn.family)){Nt=xt[Kn.family];break}if(!(Nt=Nt||xt[on]))throw new Error("Could not find a font-family for the rule '"+jU(Kn)+"' and default family '"+on+"'.");if(Nt=(function(Ot,Zt){if(Zt[Ot])return Zt[Ot];var tr=TP[Ot],en=tr<=TP.normal?-1:1,kt=FU(Zt,l9,tr,en);if(!kt)throw new Error("Could not find a matching font-stretch value for "+Ot);return kt})(Kn.stretch,Nt),Nt=(function(Ot,Zt){if(Zt[Ot])return Zt[Ot];for(var tr=c9[Ot],en=0;en<tr.length;++en)if(Zt[tr[en]])return Zt[tr[en]];throw new Error("Could not find a matching font-style for "+Ot)})(Kn.style,Nt),!(Nt=(function(Ot,Zt){if(Zt[Ot])return Zt[Ot];if(Ot===400&&Zt[500])return Zt[500];if(Ot===500&&Zt[400])return Zt[400];var tr=Aae[Ot],en=FU(Zt,u9,tr,Ot<400?-1:1);if(!en)throw new Error("Could not find a matching font-weight for value "+Ot);return en})(Kn.weight,Nt)))throw new Error("Failed to resolve a font for the rule '"+jU(Kn)+"'.");return Nt})(It,Cn);this.pdf.setFont(gn.ref.name,gn.ref.style)}else{var Wt="";(At==="bold"||parseInt(At,10)>=700||Rt==="bold")&&(Wt="bold"),Rt==="italic"&&(Wt+="italic"),Wt.length===0&&(Wt="normal");for(var Lt="",Ft={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pt=0;pt<Et.length;pt++){if(this.pdf.internal.getFont(Et[pt],Wt,{noFallback:!0,disableWarning:!0})!==void 0){Lt=Et[pt];break}if(Wt==="bolditalic"&&this.pdf.internal.getFont(Et[pt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Lt=Et[pt],Wt="bold";else if(this.pdf.internal.getFont(Et[pt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Lt=Et[pt],Wt="normal";break}}if(Lt===""){for(var Qt=0;Qt<Et.length;Qt++)if(Ft[Et[Qt]]){Lt=Ft[Et[Qt]];break}}Lt=Lt===""?"Times":Lt,this.pdf.setFont(Lt,Wt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(H){this.ctx.globalCompositeOperation=H}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(H){this.ctx.globalAlpha=H}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(H){this.ctx.lineDashOffset=H,Le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(H){this.ctx.lineDash=H,Le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(H){this.ctx.ignoreClearRect=!!H}})};p.prototype.setLineDash=function(L){this.lineDash=L},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){W.call(this,"fill",!1)},p.prototype.stroke=function(){W.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(L,G){if(isNaN(L)||isNaN(G))throw ar.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new s(L,G));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(L,G)},p.prototype.closePath=function(){var L=new s(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&Vn(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){L=new s(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(L.x,L.y)},p.prototype.lineTo=function(L,G){if(isNaN(L)||isNaN(G))throw ar.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new s(L,G));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},p.prototype.quadraticCurveTo=function(L,G,J,re){if(isNaN(J)||isNaN(re)||isNaN(L)||isNaN(G))throw ar.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new s(J,re)),ue=this.ctx.transform.applyToPoint(new s(L,G));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new s(oe.x,oe.y)},p.prototype.bezierCurveTo=function(L,G,J,re,oe,ue){if(isNaN(oe)||isNaN(ue)||isNaN(L)||isNaN(G)||isNaN(J)||isNaN(re))throw ar.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new s(oe,ue)),Ie=this.ctx.transform.applyToPoint(new s(L,G)),Pe=this.ctx.transform.applyToPoint(new s(J,re));this.path.push({type:"bct",x1:Ie.x,y1:Ie.y,x2:Pe.x,y2:Pe.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new s(xe.x,xe.y)},p.prototype.arc=function(L,G,J,re,oe,ue){if(isNaN(L)||isNaN(G)||isNaN(J)||isNaN(re)||isNaN(oe))throw ar.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new s(L,G));L=xe.x,G=xe.y;var Ie=this.ctx.transform.applyToPoint(new s(0,J)),Pe=this.ctx.transform.applyToPoint(new s(0,0));J=Math.sqrt(Math.pow(Ie.x-Pe.x,2)+Math.pow(Ie.y-Pe.y,2))}Math.abs(oe-re)>=2*Math.PI&&(re=0,oe=2*Math.PI),this.path.push({type:"arc",x:L,y:G,radius:J,startAngle:re,endAngle:oe,counterclockwise:ue})},p.prototype.arcTo=function(L,G,J,re,oe){throw new Error("arcTo not implemented.")},p.prototype.rect=function(L,G,J,re){if(isNaN(L)||isNaN(G)||isNaN(J)||isNaN(re))throw ar.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,G),this.lineTo(L+J,G),this.lineTo(L+J,G+re),this.lineTo(L,G+re),this.lineTo(L,G),this.lineTo(L+J,G),this.lineTo(L,G)},p.prototype.fillRect=function(L,G,J,re){if(isNaN(L)||isNaN(G)||isNaN(J)||isNaN(re))throw ar.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,G,J,re),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},p.prototype.strokeRect=function(L,G,J,re){if(isNaN(L)||isNaN(G)||isNaN(J)||isNaN(re))throw ar.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(L,G,J,re),this.stroke())},p.prototype.clearRect=function(L,G,J,re){if(isNaN(L)||isNaN(G)||isNaN(J)||isNaN(re))throw ar.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,G,J,re))},p.prototype.save=function(L){L=typeof L!="boolean"||L;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},p.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(G),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(L){var G,J,re,oe;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))G=0,J=0,re=0,oe=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(ue!==null)G=parseInt(ue[1]),J=parseInt(ue[2]),re=parseInt(ue[3]),oe=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)G=parseInt(ue[1]),J=parseInt(ue[2]),re=parseInt(ue[3]),oe=parseFloat(ue[4]);else{if(oe=1,typeof L=="string"&&L.charAt(0)!=="#"){var xe=new t9(L);L=xe.ok?xe.toHex():"#000000"}L.length===4?(G=L.substring(1,2),G+=G,J=L.substring(2,3),J+=J,re=L.substring(3,4),re+=re):(G=L.substring(1,3),J=L.substring(3,5),re=L.substring(5,7)),G=parseInt(G,16),J=parseInt(J,16),re=parseInt(re,16)}}return{r:G,g:J,b:re,a:oe,style:L}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(L,G,J,re){if(isNaN(G)||isNaN(J)||typeof L!="string")throw ar.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!g.call(this)){var oe=he(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;A.call(this,{text:L,x:G,y:J,scale:ue,angle:oe,align:this.textAlign,maxWidth:re})}},p.prototype.strokeText=function(L,G,J,re){if(isNaN(G)||isNaN(J)||typeof L!="string")throw ar.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){re=isNaN(re)?void 0:re;var oe=he(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;A.call(this,{text:L,x:G,y:J,scale:ue,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:re})}},p.prototype.measureText=function(L){if(typeof L!="string")throw ar.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,J=this.pdf.internal.scaleFactor,re=G.internal.getFontSize(),oe=G.getStringUnitWidth(L)*re/G.internal.scaleFactor;return new function(ue){var xe=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this}({width:oe*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(L,G){if(isNaN(L)||isNaN(G))throw ar.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(L,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(L){if(isNaN(L))throw ar.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new c(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},p.prototype.translate=function(L,G){if(isNaN(L)||isNaN(G))throw ar.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,L,G);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(L,G,J,re,oe,ue){if(isNaN(L)||isNaN(G)||isNaN(J)||isNaN(re)||isNaN(oe)||isNaN(ue))throw ar.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new c(L,G,J,re,oe,ue);this.ctx.transform=this.ctx.transform.multiply(xe)},p.prototype.setTransform=function(L,G,J,re,oe,ue){L=isNaN(L)?1:L,G=isNaN(G)?0:G,J=isNaN(J)?0:J,re=isNaN(re)?1:re,oe=isNaN(oe)?0:oe,ue=isNaN(ue)?0:ue,this.ctx.transform=new c(L,G,J,re,oe,ue)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(L,G,J,re,oe,ue,xe,Ie,Pe){var $e=this.pdf.getImageProperties(L),et=1,He=1,st=1,H=1;re!==void 0&&Ie!==void 0&&(st=Ie/re,H=Pe/oe,et=$e.width/re*Ie/re,He=$e.height/oe*Pe/oe),ue===void 0&&(ue=G,xe=J,G=0,J=0),re!==void 0&&Ie===void 0&&(Ie=re,Pe=oe),re===void 0&&Ie===void 0&&(Ie=$e.width,Pe=$e.height);var Ze=this.ctx.transform.decompose(),Rt=he(Ze.rotate.shx),At=new c,Ue=(At=(At=(At=At.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new a(ue-G*st,xe-J*H,re*et,oe*He));if(this.autoPaging){for(var Dt,at=N.call(this,Ue),Et=[],It=0;It<at.length;It+=1)Et.indexOf(at[It])===-1&&Et.push(at[It]);j(Et);for(var Cn=Et[0],gn=Et[Et.length-1],Wt=Cn;Wt<gn+1;Wt++){this.pdf.setPage(Wt);var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=Wt===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=Wt===1?0:pt+(Wt-2)*Qt;if(this.ctx.clip_path.length!==0){var Sr=this.path;Dt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(Dt,this.posX+this.margin[3],-xt+Ft+this.ctx.prevPageLastElemOffset),ae.call(this,"fill",!0),this.path=Sr}var vn=JSON.parse(JSON.stringify(Ue));vn=Q([vn],this.posX+this.margin[3],-xt+Ft+this.ctx.prevPageLastElemOffset)[0];var on=(Wt>Cn||Wt<gn)&&I.call(this);on&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,Qt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",vn.x,vn.y,vn.w,vn.h,null,null,Rt),on&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(L,"JPEG",Ue.x,Ue.y,Ue.w,Ue.h,null,null,Rt)};var N=function(L,G,J){var re=[];G=G||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":re.push(Math.floor((L.y+oe)/J)+1);break;case"arc":re.push(Math.floor((L.y+oe-L.radius)/J)+1),re.push(Math.floor((L.y+oe+L.radius)/J)+1);break;case"qct":var ue=Te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);re.push(Math.floor((ue.y+oe)/J)+1),re.push(Math.floor((ue.y+ue.h+oe)/J)+1);break;case"bct":var xe=Ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);re.push(Math.floor((xe.y+oe)/J)+1),re.push(Math.floor((xe.y+xe.h+oe)/J)+1);break;case"rect":re.push(Math.floor((L.y+oe)/J)+1),re.push(Math.floor((L.y+L.h+oe)/J)+1)}for(var Ie=0;Ie<re.length;Ie+=1)for(;this.pdf.internal.getNumberOfPages()<re[Ie];)P.call(this);return re},P=function(){var L=this.fillStyle,G=this.strokeStyle,J=this.font,re=this.lineCap,oe=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=G,this.font=J,this.lineCap=re,this.lineWidth=oe,this.lineJoin=ue},Q=function(L,G,J){for(var re=0;re<L.length;re++)switch(L[re].type){case"bct":L[re].x2+=G,L[re].y2+=J;case"qct":L[re].x1+=G,L[re].y1+=J;default:L[re].x+=G,L[re].y+=J}return L},j=function(L){return L.sort(function(G,J){return G-J})},W=function(L,G){var J=this.fillStyle,re=this.strokeStyle,oe=this.lineCap,ue=this.lineWidth,xe=Math.abs(ue*this.ctx.transform.scaleX),Ie=this.lineJoin;if(this.autoPaging){for(var Pe,$e,et=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),st=[],H=0;H<He.length;H++)if(He[H].x!==void 0)for(var Ze=N.call(this,He[H]),Rt=0;Rt<Ze.length;Rt+=1)st.indexOf(Ze[Rt])===-1&&st.push(Ze[Rt]);for(var At=0;At<st.length;At++)for(;this.pdf.internal.getNumberOfPages()<st[At];)P.call(this);j(st);for(var Ue=st[0],Dt=st[st.length-1],at=Ue;at<Dt+1;at++){this.pdf.setPage(at),this.fillStyle=J,this.strokeStyle=re,this.lineCap=oe,this.lineWidth=xe,this.lineJoin=Ie;var Et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],It=at===1?this.posY+this.margin[0]:this.margin[0],Cn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wt=at===1?0:Cn+(at-2)*gn;if(this.ctx.clip_path.length!==0){var Lt=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(Pe,this.posX+this.margin[3],-Wt+It+this.ctx.prevPageLastElemOffset),ae.call(this,L,!0),this.path=Lt}if($e=JSON.parse(JSON.stringify(et)),this.path=Q($e,this.posX+this.margin[3],-Wt+It+this.ctx.prevPageLastElemOffset),G===!1||at===0){var Ft=(at>Ue||at<Dt)&&I.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Et,gn,null).clip().discardPath()),ae.call(this,L,G),Ft&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}this.path=et}else this.lineWidth=xe,ae.call(this,L,G),this.lineWidth=ue},ae=function(L,G){if((L!=="stroke"||G||!C.call(this))&&(L==="stroke"||G||!g.call(this))){for(var J,re,oe=[],ue=this.path,xe=0;xe<ue.length;xe++){var Ie=ue[xe];switch(Ie.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:Ie,deltas:[],abs:[]});break;case"lt":var Pe=oe.length;if(ue[xe-1]&&!isNaN(ue[xe-1].x)&&(J=[Ie.x-ue[xe-1].x,Ie.y-ue[xe-1].y],Pe>0)){for(;Pe>=0;Pe--)if(oe[Pe-1].close!==!0&&oe[Pe-1].begin!==!0){oe[Pe-1].deltas.push(J),oe[Pe-1].abs.push(Ie);break}}break;case"bct":J=[Ie.x1-ue[xe-1].x,Ie.y1-ue[xe-1].y,Ie.x2-ue[xe-1].x,Ie.y2-ue[xe-1].y,Ie.x-ue[xe-1].x,Ie.y-ue[xe-1].y],oe[oe.length-1].deltas.push(J);break;case"qct":var $e=ue[xe-1].x+2/3*(Ie.x1-ue[xe-1].x),et=ue[xe-1].y+2/3*(Ie.y1-ue[xe-1].y),He=Ie.x+2/3*(Ie.x1-Ie.x),st=Ie.y+2/3*(Ie.y1-Ie.y),H=Ie.x,Ze=Ie.y;J=[$e-ue[xe-1].x,et-ue[xe-1].y,He-ue[xe-1].x,st-ue[xe-1].y,H-ue[xe-1].x,Ze-ue[xe-1].y],oe[oe.length-1].deltas.push(J);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(Ie)}}re=G?null:L==="stroke"?"stroke":"fill";for(var Rt=!1,At=0;At<oe.length;At++)if(oe[At].arc)for(var Ue=oe[At].abs,Dt=0;Dt<Ue.length;Dt++){var at=Ue[Dt];at.type==="arc"?M.call(this,at.x,at.y,at.radius,at.startAngle,at.endAngle,at.counterclockwise,void 0,G,!Rt):T.call(this,at.x,at.y),Rt=!0}else if(oe[At].close===!0)this.pdf.internal.out("h"),Rt=!1;else if(oe[At].begin!==!0){var Et=oe[At].start.x,It=oe[At].start.y;te.call(this,oe[At].deltas,Et,It),Rt=!0}re&&S.call(this,re),G&&V.call(this)}},me=function(L){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-J;case"top":return L+G-J;case"hanging":return L+G-2*J;case"middle":return L+G/2-J;default:return L}},z=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(G,J){this.colorStops.push([G,J])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(L,G,J,re,oe,ue,xe,Ie,Pe){for(var $e=De.call(this,J,re,oe,ue),et=0;et<$e.length;et++){var He=$e[et];et===0&&(Pe?b.call(this,He.x1+L,He.y1+G):T.call(this,He.x1+L,He.y1+G)),be.call(this,L,G,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}Ie?V.call(this):S.call(this,xe)},S=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},b=function(L,G){this.pdf.internal.out(t(L)+" "+r(G)+" m")},A=function(L){var G;switch(L.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var J,re,oe,ue=this.pdf.getTextDimensions(L.text),xe=me.call(this,L.y),Ie=z.call(this,xe)-ue.h,Pe=this.ctx.transform.applyToPoint(new s(L.x,xe));if(this.autoPaging){var $e=this.ctx.transform.decompose(),et=new c;et=(et=(et=et.multiply($e.translate)).multiply($e.skew)).multiply($e.scale);for(var He=this.ctx.transform.applyToRectangle(new a(L.x,xe,ue.w,ue.h)),st=et.applyToRectangle(new a(L.x,Ie,ue.w,ue.h)),H=N.call(this,st),Ze=[],Rt=0;Rt<H.length;Rt+=1)Ze.indexOf(H[Rt])===-1&&Ze.push(H[Rt]);j(Ze);for(var At=Ze[0],Ue=Ze[Ze.length-1],Dt=At;Dt<Ue+1;Dt++){this.pdf.setPage(Dt);var at=Dt===1?this.posY+this.margin[0]:this.margin[0],Et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[2],Cn=It-this.margin[0],gn=this.pdf.internal.pageSize.width-this.margin[1],Wt=gn-this.margin[3],Lt=Dt===1?0:Et+(Dt-2)*Cn;if(this.ctx.clip_path.length!==0){var Ft=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(J,this.posX+this.margin[3],-1*Lt+at),ae.call(this,"fill",!0),this.path=Ft}var pt=Q([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-Lt+at+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*L.scale),oe=this.lineWidth,this.lineWidth=oe*L.scale);var Qt=this.autoPaging!=="text";if(Qt||pt.y+pt.h<=It){if(Qt||pt.y>=at&&pt.x<=gn){var xt=Qt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||gn-pt.x)[0],Sr=Q([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-Lt+at+this.ctx.prevPageLastElemOffset)[0],vn=Qt&&(Dt>At||Dt<Ue)&&I.call(this);vn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,Cn,null).clip().discardPath()),this.pdf.text(xt,Sr.x,Sr.y,{angle:L.angle,align:G,renderingMode:L.renderingMode}),vn&&this.pdf.restoreGraphicsState()}}else pt.y<It&&(this.ctx.prevPageLastElemOffset+=It-pt.y);L.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=oe)}}else L.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*L.scale),oe=this.lineWidth,this.lineWidth=oe*L.scale),this.pdf.text(L.text,Pe.x+this.posX,Pe.y+this.posY,{angle:L.angle,align:G,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=oe)},T=function(L,G,J,re){J=J||0,re=re||0,this.pdf.internal.out(t(L+J)+" "+r(G+re)+" l")},te=function(L,G,J){return this.pdf.lines(L,G,J,null,null)},be=function(L,G,J,re,oe,ue,xe,Ie){this.pdf.internal.out([e(i(J+L)),e(o(re+G)),e(i(oe+L)),e(o(ue+G)),e(i(xe+L)),e(o(Ie+G)),"c"].join(" "))},De=function(L,G,J,re){for(var oe=2*Math.PI,ue=Math.PI/2;G>J;)G-=oe;var xe=Math.abs(J-G);xe<oe&&re&&(xe=oe-xe);for(var Ie=[],Pe=re?-1:1,$e=G;xe>1e-5;){var et=$e+Pe*Math.min(xe,ue);Ie.push(Ae.call(this,L,$e,et)),xe-=Math.abs(et-$e),$e=et}return Ie},Ae=function(L,G,J){var re=(J-G)/2,oe=L*Math.cos(re),ue=L*Math.sin(re),xe=oe,Ie=-ue,Pe=xe*xe+Ie*Ie,$e=Pe+xe*oe+Ie*ue,et=4/3*(Math.sqrt(2*Pe*$e)-$e)/(xe*ue-Ie*oe),He=xe-et*Ie,st=Ie+et*xe,H=He,Ze=-st,Rt=re+G,At=Math.cos(Rt),Ue=Math.sin(Rt);return{x1:L*Math.cos(G),y1:L*Math.sin(G),x2:He*At-st*Ue,y2:He*Ue+st*At,x3:H*At-Ze*Ue,y3:H*Ue+Ze*At,x4:L*Math.cos(J),y4:L*Math.sin(J)}},he=function(L){return 180*L/Math.PI},Te=function(L,G,J,re,oe,ue){var xe=L+.5*(J-L),Ie=G+.5*(re-G),Pe=oe+.5*(J-oe),$e=ue+.5*(re-ue),et=Math.min(L,oe,xe,Pe),He=Math.max(L,oe,xe,Pe),st=Math.min(G,ue,Ie,$e),H=Math.max(G,ue,Ie,$e);return new a(et,st,He-et,H-st)},Ge=function(L,G,J,re,oe,ue,xe,Ie){var Pe,$e,et,He,st,H,Ze,Rt,At,Ue,Dt,at,Et,It,Cn=J-L,gn=re-G,Wt=oe-J,Lt=ue-re,Ft=xe-oe,pt=Ie-ue;for($e=0;$e<41;$e++)At=(Ze=(et=L+(Pe=$e/40)*Cn)+Pe*((st=J+Pe*Wt)-et))+Pe*(st+Pe*(oe+Pe*Ft-st)-Ze),Ue=(Rt=(He=G+Pe*gn)+Pe*((H=re+Pe*Lt)-He))+Pe*(H+Pe*(ue+Pe*pt-H)-Rt),$e==0?(Dt=At,at=Ue,Et=At,It=Ue):(Dt=Math.min(Dt,At),at=Math.min(at,Ue),Et=Math.max(Et,At),It=Math.max(It,Ue));return new a(Math.round(Dt),Math.round(at),Math.round(Et-Dt),Math.round(It-at))},Le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,G,J=(L=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:G}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(Ct.API),(function(n){var e=function(s){var a,c,l,u,p,m,g,C,I,N;for(/[^\x00-\xFF]/.test(s),c=[],l=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(p=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(m=(p=((p=((p=((p=(p-(N=p%85))/85)-(I=p%85))/85)-(C=p%85))/85)-(g=p%85))/85)%85,c.push(m+33,g+33,C+33,I+33,N+33)):c.push(122);return(function(P,Q){for(var j=Q;j>0;j--)P.pop()})(c,a.length),String.fromCharCode.apply(String,c)+"~>"},t=function(s){var a,c,l,u,p,m=String,g="length",C=255,I="charCodeAt",N="slice",P="replace";for(s[N](-2),s=s[N](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),l=[],u=0,p=(s+=a="uuuuu"[N](s[g]%5||5))[g];p>u;u+=5)c=52200625*(s[I](u)-33)+614125*(s[I](u+1)-33)+7225*(s[I](u+2)-33)+85*(s[I](u+3)-33)+(s[I](u+4)-33),l.push(C&c>>24,C&c>>16,C&c>>8,C&c);return(function(Q,j){for(var W=j;W>0;W--)Q.pop()})(l,a[g]),m.fromCharCode.apply(m,l)},r=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",l=0;l<s.length;l+=2)c+=String.fromCharCode("0x"+(s[l]+s[l+1]));return c},o=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return(a=Lx(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var c=0,l=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=o(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}})(Ct.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(c,l,u){var p=new XMLHttpRequest,m=0,g=function(C){var I=C.length,N=[],P=String.fromCharCode;for(m=0;m<I;m+=1)N.push(P(255&C.charCodeAt(m)));return N.join("")};if(p.open("GET",c,!l),p.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(p.onload=function(){p.status===200?u(g(this.responseText)):u(void 0)}),p.send(null),l&&p.status===200)return g(p.responseText)})(i,o,s)}catch{}return a})(e,t,r)},n.loadImageFile=n.loadFile})(Ct.API),(function(n){function e(){return(Yt.html2canvas?Promise.resolve(Yt.html2canvas):import("./chunk-3DX2HYX3.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Yt.DOMPurify?Promise.resolve(Yt.DOMPurify):import("./chunk-5XEYTCIL.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var c=Vn(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var l=document.createElement(a);for(var u in c.className&&(l.className=c.className),c.innerHTML&&c.dompurify&&(l.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)l.style[u]=c.style[u];return l},o=function a(c,l){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)l!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||u.appendChild(a(p,l));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},s=function a(c){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return(u=u.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),c){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,c(this.prop.container,l)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=this.opt.jsPDF,u=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var C=u[g],I=C.src.find(function(N){return N.format==="truetype"});I&&l.addFont(I.url,C.ref.name,C.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var c=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||Ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,l,u){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,l,u){return this.setProgress(a?this.progress.val+a:null,c||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,c){var l=this;return this.thenCore(a,c,function(u,p){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return l.updateProgress(null,u),m}).then(u,p).then(function(m){return l.updateProgress(1),m})})},s.prototype.thenCore=function(a,c,l){l=l||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),c&&(c=c.bind(u));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:s.convert(Object.assign({},u),Promise.prototype),m=l.call(p,a,c);return s.convert(m,u.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(l){c=c.thenCore(l)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ct.getPageSize=function(a,c,l){if(Vn(a)==="object"){var u=a;a=u.orientation,c=u.unit||c,l=u.format||l}c=c||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var p,m=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var C,I=0,N=0;if(g.hasOwnProperty(m))I=g[m][1]/p,N=g[m][0]/p;else try{I=l[1],N=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",N>I&&(C=N,N=I,I=C);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",I>N&&(C=N,N=I,I=C)}return{width:N,height:I,unit:c,k:p,orientation:a}},n.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(xP):null;var l=new s(c);return c.worker?l:l.from(a).doCallback()}})(Ct.API),Ct.API.addJS=function(n){return zU=n,this.internal.events.subscribe("postPutResources",function(){sE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(sE+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),UU=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+zU+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){sE!==void 0&&UU!==void 0&&this.internal.out("/Names <</JavaScript "+sE+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var c=a[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(o=0;o<l;o++){var p=t.internal.newObject();u.push(p);var m=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<u.length;o++)t.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var c=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<r.children.length;l++)this.renderItems(r.children[l])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(Ct.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var c,l=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(p){for(var m,g=256*p.charCodeAt(4)+p.charCodeAt(5),C=p.length,I={width:0,height:0,numcomponents:1},N=4;N<C;N+=2){if(N+=g,e.indexOf(p.charCodeAt(N+1))!==-1){m=256*p.charCodeAt(N+5)+p.charCodeAt(N+6),I={width:256*p.charCodeAt(N+7)+p.charCodeAt(N+8),height:m,numcomponents:p.charCodeAt(N+9)};break}g=256*p.charCodeAt(N+2)+p.charCodeAt(N+3)}return I})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:t,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:l,index:r,alias:i}}return u}})(Ct.API),Ct.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=MU(n,{checkCrc:!0}),s=o.width,a=o.height,c=o.channels,l=o.palette,u=o.depth;i=l&&c===1?(function(M){for(var S=M.width,V=M.height,b=M.data,A=M.palette,T=M.depth,te=!1,be=[],De=[],Ae=void 0,he=!1,Te=0,Ge=0;Ge<A.length;Ge++){var Le=RN(A[Ge],4),L=Le[0],G=Le[1],J=Le[2],re=Le[3];be.push(L,G,J),re!=null&&(re===0?(Te++,De.length<1&&De.push(Ge)):re<255&&(he=!0))}if(he||Te>1){te=!0,De=void 0;var oe=S*V;Ae=new Uint8Array(oe);for(var ue=new DataView(b.buffer),xe=0;xe<oe;xe++){var Ie=CP(ue,xe,T),Pe=RN(A[Ie],4)[3];Ae[xe]=Pe}}else Te===0&&(De=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:te?8:void 0,colorBytes:b,alphaBytes:Ae,needSMask:te,palette:be,mask:De}})(o):c===2||c===4?(function(M){for(var S=M.data,V=M.width,b=M.height,A=M.channels,T=M.depth,te=A===2?"DeviceGray":"DeviceRGB",be=A-1,De=V*b,Ae=be,he=De*Ae,Te=1*De,Ge=Math.ceil(he*T/8),Le=Math.ceil(Te*T/8),L=new Uint8Array(Ge),G=new Uint8Array(Le),J=new DataView(S.buffer),re=new DataView(L.buffer),oe=new DataView(G.buffer),ue=!1,xe=0;xe<De;xe++){for(var Ie=xe*A,Pe=0;Pe<Ae;Pe++)QU(re,CP(J,Ie+Pe,T),xe*Ae+Pe,T);var $e=CP(J,Ie+Ae,T);$e<(1<<T)-1&&(ue=!0),QU(oe,$e,1*xe,T)}return{colorSpace:te,colorsPerPixel:be,sMaskBitsPerComponent:ue?T:void 0,colorBytes:L,alphaBytes:G,needSMask:ue}})(o):(function(M){var S=M.data,V=M.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:S instanceof Uint16Array?(function(b){for(var A=b.length,T=new Uint8Array(2*A),te=new DataView(T.buffer,T.byteOffset,T.byteLength),be=0;be<A;be++)te.setUint16(2*be,b[be],!1);return T})(S):S,needSMask:!1}})(o);var p,m,g,C=i,I=C.colorSpace,N=C.colorsPerPixel,P=C.sMaskBitsPerComponent,Q=C.colorBytes,j=C.alphaBytes,W=C.needSMask,ae=C.palette,me=C.mask,z=null;return r!==Ct.API.image_compression.NONE&&typeof Lx=="function"?(z=(function(M){var S;switch(M){case Ct.API.image_compression.FAST:S=11;break;case Ct.API.image_compression.MEDIUM:S=13;break;case Ct.API.image_compression.SLOW:S=14;break;default:S=12}return S})(r),p=this.decode.FLATE_DECODE,m="/Predictor ".concat(z," /Colors ").concat(N," /BitsPerComponent ").concat(u," /Columns ").concat(s),n=WU(Q,Math.ceil(s*N*u/8),N,u,r),W&&(g=WU(j,Math.ceil(s*P/8),1,P,r))):(p=void 0,m=void 0,n=Q,W&&(g=j)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:t,data:n,index:e,filter:p,decodeParameters:m,transparency:me,palette:ae,sMask:g,predictor:z,width:s,height:a,bitsPerComponent:u,sMaskBitsPerComponent:P,colorSpace:I}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new Rae(e),s=o.width,a=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:s,height:a},u=new IP(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)},n.processGIF87A=n.processGIF89A})(Ct.API),oc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},oc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){ar.log("bit decode error:"+t)}},oc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[o>>7-a&1];this.data[s+4*a]=c.blue,this.data[s+4*a+1]=c.green,this.data[s+4*a+2]=c.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},oc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,c=15&o,l=this.palette[a];if(this.data[s]=l.blue,this.data[s+1]=l.green,this.data[s+2]=l.red,this.data[s+3]=255,2*i+1>=this.width)break;l=this.palette[c],this.data[s+4]=l.blue,this.data[s+4+1]=l.green,this.data[s+4+2]=l.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},oc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},oc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,c=(o>>10&e)/e*255|0,l=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=c,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=l}this.pos+=n}},oc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&t)/t*255|0,l=(s>>11)/e*255|0,u=i*this.width*4+4*o;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=a,this.data[u+3]=255}this.pos+=n}},oc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},oc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},oc.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new oc(e,!1),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new IP(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(Ct.API),JU.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new JU(e),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new IP(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(Ct.API),Ct.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,c=0,l=0;l<i;l+=4){var u=r[l],p=r[l+1],m=r[l+2],g=r[l+3];o[a++]=u,o[a++]=p,o[a++]=m,s[c++]=g}var C=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:C,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ct.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},pm=Ct.API,aE=pm.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=l.fof?l.fof:1,p=e.doKerning!==!1,m=0,g=n.length,C=0,I=a[0]||c,N=[];for(t=0;t<g;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?N.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(m=p&&Vn(l[r])==="object"&&!isNaN(parseInt(l[r][C],10))?l[r][C]/u:0,N.push((a[r]||I)/c+m)),C=r;return N},qU=pm.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return pm.processArabic&&(n=pm.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:aE.apply(this,arguments).reduce(function(o,s){return o+s},0)},$U=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var c=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(c,o)),a=0,c=o),a+=e[o],o++;return c!==o&&i.push(n.slice(c,o)),i},HU=function(n,e,t){t||(t={});var r,i,o,s,a,c,l,u=[],p=[u],m=t.textIndent||0,g=0,C=0,I=n.split(" "),N=aE.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?I[0].length+2:t.lineIndent||0){var P=Array(c).join(" "),Q=[];I.map(function(W){(W=W.split(/\s*\n/)).length>1?Q=Q.concat(W.map(function(ae,me){return(me&&ae.length?`
`:"")+ae})):Q.push(W[0])}),I=Q,c=qU.apply(this,[P,t])}for(o=0,s=I.length;o<s;o++){var j=0;if(r=I[o],c&&r[0]==`
`&&(r=r.substr(1),j=1),m+g+(C=(i=aE.apply(this,[r,t])).reduce(function(W,ae){return W+ae},0))>e||j){if(C>e){for(a=$U.apply(this,[r,i,e-(m+g),e]),u.push(a.shift()),u=[a.pop()];a.length;)p.push([a.shift()]);C=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(W,ae){return W+ae},0)}else u=[r];p.push(u),m=C+c,g=N}else u.push(r),m+=g+C,g=N}return l=c?function(W,ae){return(ae?P:"")+W.join(" ")}:function(W){return W.join(" ")},p.map(l)},pm.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var p=this.internal.getFont(u.fontName,u.fontStyle),m="Unicode";return p.metadata[m]?{widths:p.metadata[m].widths||{0:1},kerning:p.metadata[m].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,c,l=[];for(a=0,c=r.length;a<c;a++)l=l.concat(HU.apply(this,[r[a],s,o]));return l},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=n.__fontmetrics__.compress=function(m){var g,C,I,N,P=["{"];for(var Q in m){if(g=m[Q],isNaN(parseInt(Q,10))?C="'"+Q+"'":(Q=parseInt(Q,10),C=(C=s(Q).slice(2)).slice(0,-1)+i[C.slice(-1)]),typeof g=="number")g<0?(I=s(g).slice(3),N="-"):(I=s(g).slice(2),N=""),I=N+I.slice(0,-1)+i[I.slice(-1)];else{if(Vn(g)!=="object")throw new Error("Don't know what to do with value type "+Vn(g)+".");I=a(g)}P.push(C+I)}return P.push("}"),P.join("")},c=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,C,I,N,P={},Q=1,j=P,W=[],ae="",me="",z=m.length-1,M=1;M<z;M+=1)(N=m[M])=="'"?g?(I=g.join(""),g=void 0):g=[]:g?g.push(N):N=="{"?(W.push([j,I]),j={},I=void 0):N=="}"?((C=W.pop())[0][C[1]]=j,I=void 0,j=C[0]):N=="-"?Q=-1:I===void 0?r.hasOwnProperty(N)?(ae+=r[N],I=parseInt(ae,16)*Q,Q=1,ae=""):ae+=N:r.hasOwnProperty(N)?(me+=r[N],j[I]=parseInt(me,16)*Q,Q=1,I=void 0,me=""):me+=N;return P},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var g=m.font,C=p.Unicode[g.postScriptName];C&&(g.metadata.Unicode={},g.metadata.Unicode.widths=C.widths,g.metadata.Unicode.kerning=C.kerning);var I=u.Unicode[g.postScriptName];I&&(g.metadata.Unicode.encoding=I,g.encoding=I.codePages[0])}])})(Ct.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(cE(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(Ct),Ct.API.addSvgAsImage=function(n,e,t,r,i,o,s,a){if(isNaN(e)||isNaN(t))throw ar.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw ar.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var l=c.getContext("2d");l.fillStyle="#fff",l.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Yt.canvg?Promise.resolve(Yt.canvg):import("./chunk-3MQJB5HQ.js")).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(l,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(u)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,s,a)})},Ct.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Ct.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),c=[],l=0,u=0,p=0;function m(C,I){var N,P=!1;for(N=0;N<C.length;N+=1)C[N]===I&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(Vn(n)==="object"){for(i in n)if(o=n[i],m(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&m(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(l=0;l<o.length;l+=1)if(r=!0,o[l].length===1&&typeof o[l][0]=="number")c.push(String(o[l]-1));else if(o[l].length>1){for(u=0;u<o[l].length;u+=1)typeof o[l][u]!="number"&&(r=!1);r===!0&&c.push([o[l][0]-1,o[l][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,I=[];for(C in t)t[C].explicitSet===!0&&(t[C].type==="name"?I.push("/"+C+" /"+t[C].value):I.push("/"+C+" "+t[C].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),l=o.length+s.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ct.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,c=s.metadata.Unicode.widths,l=["","0","00","000","0000"],u=[""],p=0,m=o.length;p<m;++p){if(a=s.metadata.characterToGlyph(o.charCodeAt(p)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(p),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(l[4-a.length],a)}return u.join("")},r=function(o){var s,a,c,l,u,p,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,m=(a=Object.keys(o).sort(function(g,C){return g-C})).length;p<m;p++)s=a[p],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(l=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+l+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",C=0;C<m.length;C++)g+=String.fromCharCode(m[C]);var I=l();u({data:g,addLength1:!0,objectId:I}),c("endobj");var N=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:N}),c("endobj");var P=l();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+mm(a.fontName)),c("/FontFile2 "+I+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var Q=l();c("<<"),c("/Type /Font"),c("/BaseFont /"+mm(a.fontName)),c("/FontDescriptor "+P+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=l(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+N+" 0 R"),c("/BaseFont /"+mm(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+Q+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,m="",g=0;g<p.length;g++)m+=String.fromCharCode(p[g]);var C=l();u({data:m,addLength1:!0,objectId:C}),c("endobj");var I=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:I}),c("endobj");var N=l();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+C+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+mm(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=l();for(var P=0;P<a.metadata.hmtx.widths.length;P++)a.metadata.hmtx.widths[P]=parseInt(a.metadata.hmtx.widths[P]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+mm(a.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",c=o.x,l=o.y,u=o.options||{},p=o.mutex||{},m=p.pdfEscape,g=p.activeFontKey,C=p.fonts,I=g,N="",P=0,Q="",j=C[I].encoding;if(C[I].encoding!=="Identity-H")return{text:a,x:c,y:l,options:u,mutex:p};for(Q=a,I=g,Array.isArray(a)&&(Q=a[0]),P=0;P<Q.length;P+=1)C[I].metadata.hasOwnProperty("cmap")&&(s=C[I].metadata.cmap.unicode.codeMap[Q[P].charCodeAt(0)]),s||Q[P].charCodeAt(0)<256&&C[I].metadata.hasOwnProperty("Unicode")?N+=Q[P]:N+="";var W="";return parseInt(I.slice(1))<14||j==="WinAnsiEncoding"?W=m(N,I).split("").map(function(ae){return ae.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(W=t(N,C[I])),p.isHex=!0,{text:W,x:c,y:l,options:u,mutex:p}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],c={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var l=0;for(l=0;l<s.length;l+=1)Array.isArray(s[l])&&s[l].length===3?a.push([i(Object.assign({},c,{text:s[l][0]})).text,s[l][1],s[l][2]]):a.push(i(Object.assign({},c,{text:s[l]})).text);o.text=a}else o.text=i(Object.assign({},c,{text:s})).text}])})(Ct),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ct.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,c,l,u,p=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Q=!1,j=0;this.__bidiEngine__={};var W=function(b){var A=b.charCodeAt(),T=A>>8,te=I[T];return te!==void 0?p[256*te+(255&A)]:T===252||T===253?"AL":P.test(T)?"L":T===8?"R":"N"},ae=function(b){for(var A,T=0;T<b.length;T++){if((A=W(b.charAt(T)))==="L")return!1;if(A==="R")return!0}return!1},me=function(b,A,T,te){var be,De,Ae,he,Te=A[te];switch(Te){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Q=!1;break;case"N":case"AN":break;case"EN":Q&&(Te="AN");break;case"AL":Q=!0,Te="R";break;case"WS":case"BN":Te="N";break;case"CS":te<1||te+1>=A.length||(be=T[te-1])!=="EN"&&be!=="AN"||(De=A[te+1])!=="EN"&&De!=="AN"?Te="N":Q&&(De="AN"),Te=De===be?De:"N";break;case"ES":Te=(be=te>0?T[te-1]:"B")==="EN"&&te+1<A.length&&A[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&T[te-1]==="EN"){Te="EN";break}if(Q){Te="N";break}for(Ae=te+1,he=A.length;Ae<he&&A[Ae]==="ET";)Ae++;Te=Ae<he&&A[Ae]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(he=A.length,Ae=te+1;Ae<he&&A[Ae]==="NSM";)Ae++;if(Ae<he){var Ge=b[te],Le=Ge>=1425&&Ge<=2303||Ge===64286;if(be=A[Ae],Le&&(be==="R"||be==="AL")){Te="R";break}}}Te=te<1||(be=A[te-1])==="B"?"N":T[te-1];break;case"B":Q=!1,i=!0,Te=j;break;case"S":o=!0,Te="N"}return Te},z=function(b,A,T){var te=b.split("");return T&&M(te,T,{hiLevel:j}),te.reverse(),A&&A.reverse(),te.join("")},M=function(b,A,T){var te,be,De,Ae,he,Te=-1,Ge=b.length,Le=0,L=[],G=j?g:m,J=[];for(Q=!1,i=!1,o=!1,be=0;be<Ge;be++)J[be]=W(b[be]);for(De=0;De<Ge;De++){if(he=Le,L[De]=me(b,J,L,De),te=240&(Le=G[he][C[L[De]]]),Le&=15,A[De]=Ae=G[Le][5],te>0)if(te===16){for(be=Te;be<De;be++)A[be]=1;Te=-1}else Te=-1;if(G[Le][6])Te===-1&&(Te=De);else if(Te>-1){for(be=Te;be<De;be++)A[be]=Ae;Te=-1}J[De]==="B"&&(A[De]=0),T.hiLevel|=Ae}o&&(function(re,oe,ue){for(var xe=0;xe<ue;xe++)if(re[xe]==="S"){oe[xe]=j;for(var Ie=xe-1;Ie>=0&&re[Ie]==="WS";Ie--)oe[Ie]=j}})(J,A,Ge)},S=function(b,A,T,te,be){if(!(be.hiLevel<b)){if(b===1&&j===1&&!i)return A.reverse(),void(T&&T.reverse());for(var De,Ae,he,Te,Ge=A.length,Le=0;Le<Ge;){if(te[Le]>=b){for(he=Le+1;he<Ge&&te[he]>=b;)he++;for(Te=Le,Ae=he-1;Te<Ae;Te++,Ae--)De=A[Te],A[Te]=A[Ae],A[Ae]=De,T&&(De=T[Te],T[Te]=T[Ae],T[Ae]=De);Le=he}Le++}}},V=function(b,A,T){var te=b.split(""),be={hiLevel:j};return T||(T=[]),M(te,T,be),(function(De,Ae,he){if(he.hiLevel!==0&&u)for(var Te,Ge=0;Ge<De.length;Ge++)Ae[Ge]===1&&(Te=N.indexOf(De[Ge]))>=0&&(De[Ge]=N[Te+1])})(te,T,be),S(2,te,A,T,be),S(1,te,A,T,be),te.join("")};return this.__bidiEngine__.doBidiReorder=function(b,A,T){if((function(be,De){if(De)for(var Ae=0;Ae<be.length;Ae++)De[Ae]=Ae;a===void 0&&(a=ae(be)),l===void 0&&(l=ae(be))})(b,A),s||!c||l)if(s&&c&&a^l)j=a?1:0,b=z(b,A,T);else if(!s&&c&&l)j=a?1:0,b=V(b,A,T),b=z(b,A);else if(!s||a||c||l){if(s&&!c&&a^l)b=z(b,A),a?(j=0,b=V(b,A,T)):(j=1,b=V(b,A,T),b=z(b,A));else if(s&&a&&!c&&l)j=1,b=V(b,A,T),b=z(b,A);else if(!s&&!c&&a^l){var te=u;a?(j=1,b=V(b,A,T),j=0,u=!1,b=V(b,A,T),u=te):(j=0,b=V(b,A,T),b=z(b,A),j=1,u=!1,b=V(b,A,T),u=te,b=z(b,A))}}else j=0,b=V(b,A,T);else j=a?1:0,b=V(b,A,T);return b},this.__bidiEngine__.setOptions=function(b){b&&(s=b.isInputVisual,c=b.isOutputVisual,a=b.isInputRtl,l=b.isOutputRtl,u=b.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Ct),Ct.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Ld(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Yae(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Oae(this.contents),this.head=new Fae(this),this.name=new zae(this),this.cmap=new f9(this),this.toUnicode={},this.hhea=new Vae(this),this.maxp=new qae(this),this.hmtx=new $ae(this),this.post=new Bae(this),this.os2=new jae(this),this.loca=new Kae(this),this.glyf=new Hae(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,c,l;for(l=[],s=0,a=(c=this.bbox).length;s<a;s++)e=c[s],l.push(Math.round(e*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var ac,Ld=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),Oae=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,c,l,u,p,m,g,C,I;for(I in g=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(g)/c),s=Math.floor(p/c),u=16*g-p,(i=new Ld).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(s),i.writeShort(u),o=16*g,l=i.pos+o,a=null,C=[],t)for(m=t[I],i.writeString(I),i.writeInt(n(m)),i.writeInt(l),i.writeInt(m.length),C=C.concat(m),I==="head"&&(a=l),l+=m.length;l%4;)C.push(0),l++;return i.write(C),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=h9.call(t);t.length%4;)t.push(0);for(o=new Ld(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),Lae={}.hasOwnProperty,al=function(n,e){for(var t in e)Lae.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};ac=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var Fae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return al(n,ac),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Ld).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),e9=(function(){function n(e,t){var r,i,o,s,a,c,l,u,p,m,g,C,I,N,P,Q,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,o=(function(){var W,ae;for(ae=[],c=W=0;0<=m?W<m:W>m;c=0<=m?++W:--W)ae.push(e.readUInt16());return ae})(),e.pos+=2,I=(function(){var W,ae;for(ae=[],c=W=0;0<=m?W<m:W>m;c=0<=m?++W:--W)ae.push(e.readUInt16());return ae})(),l=(function(){var W,ae;for(ae=[],c=W=0;0<=m?W<m:W>m;c=0<=m?++W:--W)ae.push(e.readUInt16());return ae})(),u=(function(){var W,ae;for(ae=[],c=W=0;0<=m?W<m:W>m;c=0<=m?++W:--W)ae.push(e.readUInt16());return ae})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var W,ae;for(ae=[],c=W=0;0<=i?W<i:W>i;c=0<=i?++W:--W)ae.push(e.readUInt16());return ae})(),c=P=0,j=o.length;P<j;c=++P)for(N=o[c],r=Q=C=I[c];C<=N?Q<=N:Q>=N;r=C<=N?++Q:--Q)u[c]===0?s=r+l[c]:(s=a[u[c]/2+(r-C)-(m-c)]||0)!==0&&(s+=l[c]),this.codeMap[r]=65535&s}e.pos=p}return n.encode=function(e,t){var r,i,o,s,a,c,l,u,p,m,g,C,I,N,P,Q,j,W,ae,me,z,M,S,V,b,A,T,te,be,De,Ae,he,Te,Ge,Le,L,G,J,re,oe,ue,xe,Ie,Pe,$e,et;switch(te=new Ld,s=Object.keys(e).sort(function(He,st){return He-st}),t){case"macroman":for(I=0,N=(function(){var He=[];for(C=0;C<256;++C)He.push(0);return He})(),Q={0:0},o={},be=0,Te=s.length;be<Te;be++)Q[Ie=e[i=s[be]]]==null&&(Q[Ie]=++I),o[i]={old:e[i],new:Q[e[i]]},N[i]=Q[e[i]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(N),{charMap:o,subtable:te.data,maxGlyphID:I+1};case"unicode":for(A=[],p=[],j=0,Q={},r={},P=l=null,De=0,Ge=s.length;De<Ge;De++)Q[ae=e[i=s[De]]]==null&&(Q[ae]=++j),r[i]={old:ae,new:Q[ae]},a=Q[ae]-i,P!=null&&a===l||(P&&p.push(P),A.push(i),l=a),P=i;for(P&&p.push(P),p.push(65535),A.push(65535),V=2*(S=A.length),M=2*Math.pow(Math.log(S)/Math.LN2,2),m=Math.log(M/2)/Math.LN2,z=2*S-M,c=[],me=[],g=[],C=Ae=0,Le=A.length;Ae<Le;C=++Ae){if(b=A[C],u=p[C],b===65535){c.push(0),me.push(0);break}if(b-(T=r[b].new)>=32768)for(c.push(0),me.push(2*(g.length+S-C)),i=he=b;b<=u?he<=u:he>=u;i=b<=u?++he:--he)g.push(r[i].new);else c.push(T-b),me.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*S+2*g.length),te.writeUInt16(0),te.writeUInt16(V),te.writeUInt16(M),te.writeUInt16(m),te.writeUInt16(z),ue=0,L=p.length;ue<L;ue++)i=p[ue],te.writeUInt16(i);for(te.writeUInt16(0),xe=0,G=A.length;xe<G;xe++)i=A[xe],te.writeUInt16(i);for(Pe=0,J=c.length;Pe<J;Pe++)a=c[Pe],te.writeUInt16(a);for($e=0,re=me.length;$e<re;$e++)W=me[$e],te.writeUInt16(W);for(et=0,oe=g.length;et<oe;et++)I=g[et],te.writeUInt16(I);return{charMap:r,subtable:te.data,maxGlyphID:j+1}}},n})(),f9=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return al(n,ac),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new e9(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=e9.encode(e,t),(i=new Ld).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),Vae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return al(n,ac),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),jae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return al(n,ac),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),Bae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return al(n,ac),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,a,c;for(c=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)c.push(e.readUInt32());return c}).call(this)}},n})(),Uae=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return al(n,ac),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,s,a,c,l,u,p,m;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(c={},o=u=0,p=r.length;u<p;o=++u)i=r[o],e.pos=i.offset,l=e.readString(i.length),s=new Uae(l,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),qae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return al(n,ac),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),$ae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return al(n,ac),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,s,a,c;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var l,u;for(u=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)u.push(e.readInt16());return u})(),this.widths=(function(){var l,u,p,m;for(m=[],l=0,u=(p=this.metrics).length;l<u;l++)o=p[l],m.push(o.advance);return m}).call(this),r=this.widths[this.widths.length-1],c=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),h9=[].slice,Hae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return al(n,ac),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,s,a,c,l,u,p;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,s=(a=new Ld(t.read(i))).readShort(),l=a.readShort(),p=a.readShort(),c=a.readShort(),u=a.readShort(),this.cache[e]=s===-1?new Gae(a,l,p,c,u):new Wae(a,s,l,p,c,u),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,s,a,c;for(s=[],o=[],a=0,c=t.length;a<c;a++)i=e[t[a]],o.push(s.length),i&&(s=s.concat(i.encode(r)));return o.push(s.length),{table:s,offsets:o}},n})(),Wae=(function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),Gae=(function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Ld(h9.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),Kae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return al(n,ac),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<r.length;++s)if(r[s]=i,o<t.length&&t[o]==s){++o,r[s]=i;var a=this.offsets[s],c=this.offsets[s+1]-a;c>0&&(i+=c)}for(var l=new Array(4*r.length),u=0;u<r.length;++u)l[4*u+3]=255&r[u],l[4*u+2]=(65280&r[u])>>8,l[4*u+1]=(16711680&r[u])>>16,l[4*u]=(4278190080&r[u])>>24;return l},n})(),Yae=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,c;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in c=this.glyphsFor(t))r=c[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,c,l,u,p,m,g,C,I,N,P;for(i in r=f9.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),g={0:0},P=r.charMap)g[(c=P[i]).old]=c.new;for(C in m=r.maxGlyphID,s)C in g||(g[C]=m++);return u=(function(Q){var j,W;for(j in W={},Q)W[Q[j]]=j;return W})(g),p=Object.keys(u).sort(function(Q,j){return Q-j}),I=(function(){var Q,j,W;for(W=[],Q=0,j=p.length;Q<j;Q++)a=p[Q],W.push(u[a]);return W})(),o=this.font.glyf.encode(s,I,g),l=this.font.loca.encode(o.offsets,I),N={cmap:this.font.cmap.raw(),glyf:o.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},n})();Ct.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+(function(){var a,c,l;for(l=[],a=0,c=t.length;a<c;a++)r=t[a],l.push(e.convert(r));return l})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e})();var mE=(()=>{let e=class e{buildDoc(r,i,o=null){return ee(this,null,function*(){let s=new Ct({unit:"mm",format:"a4",hotfixes:["px_scaling"]}),a=[26,35,126],c=[233,186,0],l=[44,122,70],u=10,p=8.5,m=12,g=s.internal.pageSize.getWidth(),C=s.internal.pageSize.getHeight(),I=14,N=16,P=g-I*2,Q=15;s.setFillColor("#0b4fa3"),s.rect(0,0,g,Q,"F"),s.setFont("Helvetica","bold"),s.setFontSize(15),s.setTextColor("#ffffff"),s.text("fitness&dance",g-I,Q/1.6,{align:"right"}),s.setTextColor("#000000");let j=Q+6,W=38,ae=38,me=0,z=i?.name||"";if(o)try{let oe=yield new Promise(($e,et)=>{let He=new Image;He.onload=()=>$e({w:He.width,h:He.height}),He.onerror=et,He.src=o}),ue=W,xe=ae,Ie=oe.w/oe.h;Ie>1?(xe=ae,ue=Math.min(W,xe*Ie)):(ue=W,xe=Math.min(ae,ue/Ie));let Pe=o;s.addImage(Pe||o,"PNG",I,j,ue,xe,void 0,"FAST"),me=xe}catch{}let M=I+W+12,S=j+6,V=M,b=M+16,A=S;s.setFont("Helvetica","bold"),s.setFontSize(15),s.text(z,M,A),A+=10;let T="-";if(r.dataInizio&&/^\d{4}-\d{2}-\d{2}$/.test(r.dataInizio)){let[oe,ue,xe]=r.dataInizio.split("-");T=`${xe}/${ue}/${oe}`}let te=[{label:"Livello:",value:r.livello??"-"},{label:"Durata:",value:r.durata??"-"},{label:"Inizio:",value:T}];s.setFontSize(12);for(let oe of te)s.setFont("Helvetica","bold"),s.text(oe.label,V,A),s.setFont("Helvetica","normal"),s.text(oe.value,b,A),A+=8;let be=Math.max(me,A-j)+2;j+=be,j+=m;let De=3,Ae=50,he=27,Te=P/De,Ge=14,Le=10,L=P/Ge,G=11,J="bold";for(let oe of r.giorni){if(!oe.esercizi.length)continue;let ue=[];for(let He=0;He<oe.esercizi.length;He+=De)ue.push(oe.esercizi.slice(He,He+De));let xe=ue.map(()=>he+20),Ie=u+xe[0]+3;C-N-j<Ie&&(s.addPage(),j=18),s.setFillColor(...c),s.rect(I,j,P,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text(oe.nome,I+P/2,j+u/1.7,{align:"center"}),s.setTextColor("#000000"),j+=u+3;for(let He=0;He<ue.length;He++){let st=ue[He],H=xe[He];j+H>C-N&&(s.addPage(),j=18);for(let Ze=0;Ze<st.length;Ze++){let Rt=st[Ze],At=I+Ze*Te,Ue=At+(Te-Ae)/2,Dt=j,at;try{Rt.image?.startsWith("data:image/")&&(at=Rt.image)}catch{}try{s.addImage(at||Rt.image,"PNG",Ue,Dt,Ae,he,void 0,"FAST")}catch{}let Et=Dt+he+5;s.setFont("Helvetica",J),s.setFontSize(G),s.setTextColor("#183047"),s.text(Rt.nome||"",At+Te/2,Et,{align:"center"}),Et+=6,s.setFont("Helvetica",J),s.setFontSize(G),s.setTextColor("#000000");let It=`${Rt.serie}x${Rt.ripetizioni} - ${Rt.minuti}' ${Rt.secondi}"`;s.text(It,At+Te/2,Et,{align:"center"})}j+=H}let $e=oe.esercizi.filter(He=>He.note&&He.note.trim().length>0);if($e.length>0){let st=P*.34,H=P-st;j+p+$e.length*8>C-N&&(s.addPage(),j=18),s.setFillColor(...l),s.rect(I,j,P,p,"F"),s.setFont("Helvetica","bold"),s.setFontSize(11.3),s.setTextColor("#ffffff"),s.text("Note esercizi",I+2.5,j+p*.73,{align:"left"}),s.setTextColor("#000000"),j+=p;for(let Ze of $e){j+8>C-N&&(s.addPage(),j=18),s.rect(I,j,st,8,"S"),s.rect(I+st,j,H,8,"S"),s.setFont("Helvetica","bold"),s.setFontSize(10.2),s.text(Ze.nome||"",I+2,j+8*.68,{align:"left"}),s.setFont("Helvetica","normal"),s.setFontSize(9.8);let Rt=H-3;s.text(Ze.note,I+st+2,j+8*.68,{align:"left"}),j+=8}j+=5}j+=6,j+u+oe.esercizi.length*Le>C-N&&(s.addPage(),j=18),s.setFillColor(...a),s.rect(I,j,P,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text("Tracking pesi",I+2.5,j+u/1.7,{align:"left"}),s.setTextColor("#000000"),j+=u+2;let et=j;for(let He=0;He<oe.esercizi.length;He++){et+Le>C-N&&(s.addPage(),et=18);for(let st=0;st<Ge;st++)s.rect(I+st*L,et,L,Le,"S");et+=Le}j=et+6}j+u+18*Le>C-N&&(s.addPage(),j=18),s.setFillColor(...a),s.rect(I,j,P,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text("Note personali",I+2.5,j+u/1.7,{align:"left"}),s.setTextColor("#000000"),j+=u+2;let re=j;for(let oe=0;oe<18;oe++){re+Le>C-N&&(s.addPage(),re=18);for(let ue=0;ue<Ge;ue++)s.rect(I+ue*L,re,L,Le,"S");re+=Le}return s})}buildAndSavePdf(r,i,o=null){return ee(this,null,function*(){let s=yield this.buildDoc(r,i,o),a=(i?.name||"Cliente").replace(/\s+/g,""),c=r.dataInizio||"",l=`scheda-${a}-${c}.pdf`;s.save(l)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Zae=(n,e)=>({active:n,inactive:e});function Qae(n,e){if(n&1&&bt(0,"img",38),n&2){let t=ie(2);_e("src",t.user.avatarUrl,xr)("alt",t.user.name)}}function Xae(n,e){n&1&&(co(0),x(1,"span",39),q(2,"person"),D(),lo())}function Jae(n,e){if(n&1){let t=Vt();x(0,"button",40),Me("click",function(){pe(t);let i=ie(2);return ge(i.openWhatsAppWithMessage())}),fr(),x(1,"svg",41),bt(2,"circle",42)(3,"path",43),D()()}}function ece(n,e){n&1&&(x(0,"span",44),q(1," Tessera scaduta! "),D())}function tce(n,e){if(n&1&&(x(0,"div",45),q(1),D()),n&2){let t=ie(2);X(),Yr("Totale: ",t.filteredCards.length)}}function nce(n,e){if(n&1&&(co(0),q(1),lo()),n&2){let t=ie().$implicit;X(),Yr(" - ",t.time)}}function rce(n,e){if(n&1){let t=Vt();x(0,"div",47)(1,"div",48)(2,"span",49),q(3,"assignment"),D(),x(4,"span",50),q(5),ut(6,nce,2,1,"ng-container",9),D(),x(7,"label",51)(8,"span",52),q(9,"Scadenza Tessera:\xA0"),D(),x(10,"input",53),Me("change",function(i){let o=pe(t).index,s=ie(3);return ge(s.updateCardAbbonamentoEndDate(o,i.target.value))}),D()()(),x(11,"div",54)(12,"button",55),Me("click",function(){let i=pe(t).index,o=ie(3);return ge(o.printCard(i))}),x(13,"span",56),q(14,"print"),D()(),x(15,"button",57),Me("click",function(){let i=pe(t).index,o=ie(3);return ge(o.deleteCard(i))}),x(16,"span",56),q(17,"delete"),D()()()()}if(n&2){let t=e.$implicit;X(5),Yr(" ",t.date),X(),_e("ngIf",t.time),X(4),_e("value",t.abbonamentoEndDate||"")}}function ice(n,e){if(n&1&&(co(0),ut(1,rce,18,3,"div",46),lo()),n&2){let t=ie(2);X(),_e("ngForOf",t.filteredCards)}}function oce(n,e){n&1&&(x(0,"div",58),q(1," Nessuna scheda associata. Salva una scheda dalla pagina Gestione Schede per vederla qui. "),D())}function sce(n,e){if(n&1){let t=Vt();x(0,"div",59),Me("click",function(){pe(t);let i=ie(2);return ge(i.closeDeleteModal())}),D()}}function ace(n,e){if(n&1){let t=Vt();x(0,"div",60)(1,"div",61),Me("click",function(i){return pe(t),ge(i.stopPropagation())}),x(2,"p"),q(3,"Sei sicuro di voler eliminare questo cliente in modo definitivo?"),D(),x(4,"div",62)(5,"button",63),Me("click",function(){pe(t);let i=ie(2);return ge(i.deleteUserCustom())}),q(6,"Elimina"),D(),x(7,"button",22),Me("click",function(){pe(t);let i=ie(2);return ge(i.closeDeleteModal())}),q(8,"Annulla"),D()()()()}}function cce(n,e){if(n&1){let t=Vt();x(0,"div",59),Me("click",function(){pe(t);let i=ie(2);return ge(i.closeEditModal())}),D()}}function lce(n,e){if(n&1&&(co(0),bt(1,"img",94),lo()),n&2){let t=ie(3);X(),_e("src",t.editForm.avatarUrl||(t.user==null?null:t.user.avatarUrl),xr)}}function uce(n,e){n&1&&(x(0,"span",95),q(1," person "),D())}function dce(n,e){n&1&&(x(0,"div",96),q(1,"Caricamento immagine in corso..."),D())}function fce(n,e){if(n&1){let t=Vt();x(0,"div",64)(1,"form",65),Me("ngSubmit",function(){pe(t);let i=ie(2);return ge(i.saveEditModal())})("click",function(i){return pe(t),ge(i.stopPropagation())}),x(2,"h2"),q(3,"Profilo Cliente"),D(),x(4,"div",66)(5,"div",67),Me("click",function(){pe(t);let i=Ci(10),o=ie(2);return ge(o.triggerAvatarInput(i))}),ut(6,lce,2,1,"ng-container",5)(7,uce,2,0,"ng-template",null,2,ns),x(9,"input",68,3),Me("change",function(i){pe(t);let o=ie(2);return ge(o.onAvatarChange(i))}),D()(),ut(11,dce,2,0,"div",69),x(12,"div",70)(13,"div",71)(14,"label"),q(15,"Nome "),x(16,"input",72),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.nome,i)||(o.nome=i),ge(i)}),D()(),x(17,"label"),q(18,"Cognome "),x(19,"input",73),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.cognome,i)||(o.cognome=i),ge(i)}),D()(),x(20,"label"),q(21,"Email "),x(22,"input",74),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.editForm.email,i)||(o.editForm.email=i),ge(i)}),D()(),x(23,"label"),q(24,"Telefono "),x(25,"input",75),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.editForm.phone,i)||(o.editForm.phone=i),ge(i)}),D()(),x(26,"label"),q(27,"Data di nascita "),x(28,"input",76),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.editForm.birthDate,i)||(o.editForm.birthDate=i),ge(i)}),D()(),x(29,"label"),q(30,"Genere "),x(31,"select",77),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.editForm.gender,i)||(o.editForm.gender=i),ge(i)}),x(32,"option",78),q(33,"-"),D(),x(34,"option",79),q(35,"Uomo"),D(),x(36,"option",80),q(37,"Donna"),D(),x(38,"option",81),q(39,"Altro"),D()()(),x(40,"label"),q(41,"Indirizzo "),x(42,"input",82),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.editForm.address,i)||(o.editForm.address=i),ge(i)}),D()(),x(43,"label"),q(44,"Citt\xE0 "),x(45,"input",83),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.editForm.city,i)||(o.editForm.city=i),ge(i)}),D()(),x(46,"label"),q(47,"Provincia "),x(48,"input",84),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.editForm.provincia,i)||(o.editForm.provincia=i),ge(i)}),D()(),x(49,"label"),q(50,"CAP "),x(51,"input",85),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.editForm.cap,i)||(o.editForm.cap=i),ge(i)}),D()(),x(52,"label"),q(53,"Stato "),x(54,"select",86),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.editForm.status,i)||(o.editForm.status=i),ge(i)}),x(55,"option",78),q(56,"-"),D(),x(57,"option",87),q(58,"Attivo"),D(),x(59,"option",88),q(60,"Inattivo"),D()()()(),x(61,"div",89)(62,"label"),q(63,"Note personali "),x(64,"textarea",90),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.editForm.personalNotes,i)||(o.editForm.personalNotes=i),ge(i)}),D()()()()(),x(65,"div",91)(66,"button",92),q(67,"Salva"),D(),x(68,"button",93),Me("click",function(){pe(t);let i=ie(2);return ge(i.closeEditModal())}),q(69,"Annulla"),D()()()()}if(n&2){let t=Ci(8),r=ie(2);X(6),_e("ngIf",r.editForm.avatarUrl||(r.user==null?null:r.user.avatarUrl))("ngIfElse",t),X(5),_e("ngIf",r.avatarLoading),X(5),Qe("ngModel",r.nome),X(3),Qe("ngModel",r.cognome),X(3),Qe("ngModel",r.editForm.email),X(3),Qe("ngModel",r.editForm.phone),X(3),Qe("ngModel",r.editForm.birthDate),X(3),Qe("ngModel",r.editForm.gender),X(11),Qe("ngModel",r.editForm.address),X(3),Qe("ngModel",r.editForm.city),X(3),Qe("ngModel",r.editForm.provincia),X(3),Qe("ngModel",r.editForm.cap),X(3),Qe("ngModel",r.editForm.status),X(10),Qe("ngModel",r.editForm.personalNotes)}}function hce(n,e){if(n&1){let t=Vt();co(0),x(1,"div",6)(2,"div",7),ut(3,Qae,1,2,"img",8)(4,Xae,3,0,"ng-container",9),D(),x(5,"div",10)(6,"div",11)(7,"div")(8,"div",12),q(9),D(),x(10,"div",13),q(11),D(),x(12,"div",14),q(13),ut(14,Jae,4,0,"button",15)(15,ece,2,0,"span",16),D()(),x(16,"div",17)(17,"span",18),q(18),D(),x(19,"div",19),q(20),D()()(),x(21,"div",20)(22,"button",21),Me("click",function(){pe(t);let i=ie();return ge(i.openEditModal())}),q(23,"Modifica Profilo"),D(),x(24,"button",22),Me("click",function(){pe(t);let i=ie();return ge(i.openDeleteModal())}),q(25,"Elimina Cliente"),D()()()(),x(26,"div",23)(27,"div",24)(28,"div",25)(29,"h3"),q(30,"Dettagli Cliente"),D(),x(31,"div",26)(32,"span"),q(33,"Nome"),D(),x(34,"span"),q(35),D()(),x(36,"div",26)(37,"span"),q(38,"Cognome"),D(),x(39,"span"),q(40),D()(),x(41,"div",26)(42,"span"),q(43,"Data di nascita"),D(),x(44,"span"),q(45),D()(),x(46,"div",26)(47,"span"),q(48,"Genere"),D(),x(49,"span"),q(50),D()(),x(51,"div",26)(52,"span"),q(53,"Indirizzo"),D(),x(54,"span"),q(55),D()(),x(56,"div",26)(57,"span"),q(58,"Citt\xE0"),D(),x(59,"span"),q(60),D()(),x(61,"div",26)(62,"span"),q(63,"Provincia"),D(),x(64,"span"),q(65),D()(),x(66,"div",26)(67,"span"),q(68,"CAP"),D(),x(69,"span"),q(70),D()()(),x(71,"div",25)(72,"h3"),q(73,"Tessera"),D(),x(74,"div",26)(75,"span"),q(76,"Scadenza"),D(),x(77,"span")(78,"input",27),Me("change",function(i){pe(t);let o=ie();return ge(o.updateSubscriptionEnd(i.target.value))}),D()()()(),x(79,"div",25)(80,"h3"),q(81,"Note Personali"),D(),x(82,"div",28),q(83),D()()(),x(84,"div",29)(85,"div",25)(86,"div",30)(87,"h3"),q(88,"Schede di Allenamento"),D(),ut(89,tce,2,1,"div",31),x(90,"label",32)(91,"input",33),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.filterExpiredOnly,i)||(o.filterExpiredOnly=i),ge(i)}),D(),q(92," Solo tessere SCADUTE "),D()(),x(93,"div",34),ut(94,ice,2,1,"ng-container",5)(95,oce,2,0,"ng-template",null,1,ns),D()()()(),ut(97,sce,1,0,"div",35)(98,ace,9,0,"div",36)(99,cce,1,0,"div",35)(100,fce,70,15,"div",37),lo()}if(n&2){let t=Ci(96),r=ie();X(3),_e("ngIf",r.user.avatarUrl),X(),_e("ngIf",!r.user.avatarUrl),X(5),Kt(r.user.name),X(2),Kt(r.user.email),X(2),Yr(" Tel: ",r.user.phone||"-"," "),X(),_e("ngIf",r.user.phone&&r.user.subscriptionEnd),X(),_e("ngIf",r.isExpired(r.user.subscriptionEnd)),X(2),_e("ngClass",L0(28,Zae,r.user.status==="Attivo",r.user.status!=="Attivo")),X(),Yr(" ",r.user.status," "),X(2),Yr("Data iscrizione: ",r.user.signupDate),X(15),Kt(r.user.name.split(" ")[0]),X(5),Kt(r.user.name.split(" ").slice(1).join(" ")||"-"),X(5),Kt(r.user.birthDate||"-"),X(5),Kt(r.user.gender||"-"),X(5),Kt(r.user.address||"-"),X(5),Kt(r.user.city||"-"),X(5),Kt(r.user.provincia||"-"),X(5),Kt(r.user.cap||"-"),X(8),_e("value",r.user.subscriptionEnd||""),X(5),Kt(r.user.personalNotes||""),X(6),_e("ngIf",r.filteredCards.length),X(2),Qe("ngModel",r.filterExpiredOnly),X(3),_e("ngIf",r.filteredCards.length>0)("ngIfElse",t),X(3),_e("ngIf",r.showDeleteModal),X(),_e("ngIf",r.showDeleteModal),X(),_e("ngIf",r.showEditModal),X(),_e("ngIf",r.showEditModal)}}function pce(n,e){n&1&&(x(0,"p"),q(1,"Utente non trovato"),D())}var g9=(()=>{let e=class e{constructor(r,i,o,s){this.route=r,this.router=i,this.pdfSchedaService=o,this.authService=s,this.firestore=Se(zo),this.showEditModal=!1,this.showDeleteModal=!1,this.editForm={},this.nome="",this.cognome="",this.userId="",this.avatarLoading=!1,this.filterExpiredOnly=!1,this.today=new Date().toISOString().substring(0,10),this.imageService=Se(Rx)}ngOnInit(){this.route.paramMap.subscribe(r=>{let i=r.get("id");if(!i){this.userId="",this.user=void 0;return}this.userId=i,this.getUser()})}ngOnDestroy(){this.userSub?.unsubscribe()}getUser(){if(!this.userId){this.user=void 0;return}let r=Or(this.firestore,`users/${this.userId}`);this.userSub?.unsubscribe(),this.userSub=Aj(r).subscribe(i=>{if(!i)return;let o=Pt(Fe({},i),{id:this.userId});Array.isArray(o.cards)&&(o.cards=o.cards.sort((s,a)=>{let c=this.parseItDateTime(s.date,s.time);return(this.parseItDateTime(a.date,a.time)?.getTime()||0)-(c?.getTime()||0)})),this.user=o})}parseItDateTime(r,i){if(!r)return;let o=r.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!o)return;let s=Number(o[1]),a=Number(o[2])-1,c=Number(o[3]),l=0,u=0,p=0;if(i){let m=i.match(/^(\d{2}):(\d{2})(?::(\d{2}))?$/);m&&(l=Number(m[1]),u=Number(m[2]),p=m[3]?Number(m[3]):0)}return new Date(c,a,s,l,u,p)}deleteCard(r){return ee(this,null,function*(){if(!this.user||!this.user.id)return;let i=Array.isArray(this.user.cards)?[...this.user.cards]:[];i.splice(r,1);let o=Or(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield Gl(o,{cards:i}),this.user.cards=i}catch(s){console.error("Error deleting card",s)}this.getUser()})}openEditModal(){if(!this.user||!this.user.id)return;this.editForm=Pt(Fe({},this.user),{avatarFile:void 0});let r=(this.user.name||"").trim().split(" ");this.nome=r[0]||"",this.cognome=r.slice(1).join(" ")||"",this.showEditModal=!0}closeEditModal(){this.showEditModal=!1,this.editForm={},this.nome="",this.cognome="",this.avatarLoading=!1}onAvatarChange(r){return ee(this,null,function*(){let i=r.target;if(!i.files||!i.files[0])return;let o=i.files[0];this.avatarLoading=!0,this.editForm.avatarFile=o,this.editForm.avatarUrl=yield this.imageService.compressAndConvertToBase64(o,1e3,256),this.avatarLoading=!1})}triggerAvatarInput(r){r.click()}saveEditModal(){return ee(this,null,function*(){if(!this.user||!this.user.id){alert("ID utente mancante, impossibile aggiornare!");return}let r=`${this.nome||""} ${this.cognome||""}`.trim();if(!r||!this.editForm.email){alert("Compila almeno Nome, Cognome ed Email.");return}let i={name:r,email:this.editForm.email??"",phone:this.editForm.phone??"",birthDate:this.editForm.birthDate??"",gender:this.editForm.gender??"",address:this.editForm.address??"",city:this.editForm.city??"",provincia:this.editForm.provincia??"",cap:this.editForm.cap??"",personalNotes:this.editForm.personalNotes??"",subscriptionEnd:this.editForm.subscriptionEnd??"",avatarUrl:this.editForm.avatarUrl??this.user.avatarUrl??"",signupDate:this.user.signupDate??"",status:this.editForm.status??this.user.status??"",cards:this.user.cards??[]},o=Or(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield Gl(o,i),this.user=Fe(Fe({},this.user),i)}catch(s){console.error("Error updating user",s),alert("Errore aggiornamento utente. Riprova.")}this.closeEditModal()})}printCard(r){return ee(this,null,function*(){if(!(!this.user||!this.user.cards||!this.user.cards[r]))try{yield this.pdfSchedaService.buildAndSavePdf(this.user.cards[r],this.user)}catch(i){console.error("Errore durante la stampa della scheda",i),alert("Errore durante la stampa della scheda")}})}updateCardAbbonamentoEndDate(r,i){return ee(this,null,function*(){if(!this.user||!this.user.cards||!this.user.cards[r]||!this.user.id)return;this.user.cards[r].abbonamentoEndDate=i;let o=Or(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield Gl(o,{cards:this.user.cards})}catch(s){console.error("Errore aggiornamento scadenza tessera scheda",s),alert("Impossibile salvare la nuova scadenza della tessera!")}})}updateSubscriptionEnd(r){return ee(this,null,function*(){if(!this.user?.id)return;let i=Or(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield Gl(i,{subscriptionEnd:r}),this.user.subscriptionEnd=r}catch(o){console.error("Errore aggiornamento scadenza tessera",o),alert("Impossibile salvare la nuova scadenza!")}})}openWhatsAppWithMessage(){if(!this.user?.phone||!this.user?.subscriptionEnd)return;let r=`Ciao ${this.user.name}, la tua tessera scade il giorno ${this.user.subscriptionEnd}. Provvedi al rinnovo.`,i=`https://wa.me/${this.user.phone.replace(/\D/g,"")}?text=${encodeURIComponent(r)}`;window.open(i,"_blank")}openDeleteModal(){this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1}deleteUserCustom(){return ee(this,null,function*(){if(!this.user||!this.user.id)return;let r=Or(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield Sy(r)}catch(i){console.error("Error deleting user",i)}this.closeDeleteModal(),this.router.navigate(["/anagrafica"])})}isExpired(r){return r?r<=this.today:!1}get filteredCards(){return this.user?.cards?this.filterExpiredOnly?this.user.cards.filter(r=>r.abbonamentoEndDate&&r.abbonamentoEndDate<=this.today):this.user.cards:[]}};e.\u0275fac=function(i){return new(i||e)(it(Vs),it(Oi),it(mE),it(Dd))},e.\u0275cmp=Pr({type:e,selectors:[["app-anagrafica-detail"]],standalone:!1,decls:6,vars:2,consts:[["notfound",""],["schedeVuote",""],["emptyAvatar",""],["avatarInput",""],[1,"page","anagrafica-detail"],[4,"ngIf","ngIfElse"],[1,"user-detail-header"],[1,"user-avatar-big"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"user-basic-info"],[1,"user-row-top"],[1,"user-detail-name"],[1,"user-detail-email"],[1,"user-detail-phone"],["class","icon-btn wa-btn","style","margin-left:12px; background:#fff; border:2px solid #25d366; border-radius:50%; padding:4px 7px; box-shadow:0 1px 4px rgba(0,0,0,0.07); width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;","title","Messaggia su WhatsApp",3,"click",4,"ngIf"],["class","badge badge-danger","style","margin-left:8px; background:#ffdede; color:#d32f2f; border-radius:6px; padding:0 8px;",4,"ngIf"],[1,"status-date"],[1,"user-status-label",3,"ngClass"],[1,"user-detail-signup-date"],[1,"user-detail-actions"],[1,"btn",3,"click"],[1,"btn","outline",3,"click"],[1,"user-detail-content"],[1,"user-detail-col"],[1,"user-detail-section"],[1,"personal-info-row"],["type","date",1,"gestabbonamento-date",2,"background","#fff","border","none","outline","none","font-size","1rem","color","#195089",3,"change","value"],[1,"note-box"],[1,"user-detail-col","user-detail-col-wide"],[1,"schede-header"],["class","schede-count",4,"ngIf"],[2,"margin-left","16px","font-weight","400"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"scheda-box"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-confirm-delete",4,"ngIf"],["class","modal-edit-profilo",4,"ngIf"],[3,"src","alt"],[1,"material-icons","avatar-placeholder-big",2,"font-size","72px","border-radius","50%","background","#f4f4f4","color","#bbb"],["title","Messaggia su WhatsApp",1,"icon-btn","wa-btn",2,"margin-left","12px","background","#fff","border","2px solid #25d366","border-radius","50%","padding","4px 7px","box-shadow","0 1px 4px rgba(0,0,0,0.07)","width","40px","height","40px","display","inline-flex","align-items","center","justify-content","center",3,"click"],["width","28","height","28","viewBox","0 0 32 32",2,"vertical-align","middle"],["cx","16","cy","16","r","16","fill","#25d366"],["d","M22 20.7c-.4 0-.8.1-1.2.2-.7.2-1.3.3-2 .3l-.4-.2c-2.7-1.1-5.7-3.9-6.6-6.6l-.1-.4c0-.7.1-1.4.3-2l.2-1.2c.1-.4-.1-.8-.3-1.1-.3-.3-.7-.5-1.1-.5h-2c-.5 0-1 .2-1.3.5-.6.6-.9 1.5-.6 2.4C8.5 17 12.4 20.1 16.6 21.2c.9.3 1.8 0 2.4-.6.3-.3.5-.8.5-1.3v-2c0-.4-.2-.8-.5-1.1-.3-.3-.8-.5-1.2-.3z","fill","#fff"],[1,"badge","badge-danger",2,"margin-left","8px","background","#ffdede","color","#d32f2f","border-radius","6px","padding","0 8px"],[1,"schede-count"],["class","scheda-row",4,"ngFor","ngForOf"],[1,"scheda-row"],[1,"scheda-info-flex","scheda-info",2,"flex-direction","row","align-items","center","gap","10px"],[1,"material-icons","scheda-icon"],[1,"scheda-date",2,"font-weight","600"],[2,"margin-left","14px"],[2,"font-size",".98rem","color","#1742b0"],["type","date",2,"background","#fff","border","none","outline","none","font-size","1rem","color","#1742b0",3,"change","value"],[1,"scheda-actions-inline"],["title","Stampa PDF",1,"btn","small",3,"click"],[1,"material-icons","small-icon"],["title","Elimina",1,"btn","small","outline",3,"click"],[1,"scheda-empty"],[1,"modal-backdrop",3,"click"],[1,"modal-confirm-delete"],[1,"modal-confirm-content",3,"click"],[1,"modal-confirm-actions"],[1,"btn","danger",3,"click"],[1,"modal-edit-profilo"],["autocomplete","off",3,"ngSubmit","click"],[1,"modal-edit-flex"],[1,"modal-avatar-box",3,"click"],["type","file","accept","image/*","hidden","",3,"change"],["class","avatar-loader","style","margin-left:15px;color:#888;",4,"ngIf"],[1,"modal-fields-note-wrap"],[1,"modal-fields-grid"],["type","text","name","nome","required","",3,"ngModelChange","ngModel"],["type","text","name","cognome","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","name","phone",3,"ngModelChange","ngModel"],["type","date","name","birthDate",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Uomo"],["value","Donna"],["value","Altro"],["type","text","name","address",3,"ngModelChange","ngModel"],["type","text","name","city",3,"ngModelChange","ngModel"],["type","text","name","provincia",3,"ngModelChange","ngModel"],["type","text","name","cap",3,"ngModelChange","ngModel"],["name","status",3,"ngModelChange","ngModel"],["value","Attivo"],["value","Inattivo"],[1,"modal-field-note-row"],["name","personalNotes","rows","4",3,"ngModelChange","ngModel"],[1,"modal-edit-actions"],["type","submit",1,"btn"],["type","button",1,"btn","outline",3,"click"],["alt","Avatar",1,"avatar-img-preview",2,"width","72px","height","72px","border-radius","50%","object-fit","cover","cursor","pointer","box-shadow","0 0 8px #eee",3,"src"],[1,"material-icons",2,"font-size","60px","width","72px","height","72px","border-radius","50%","background","#f4f4f4","color","#9b9b9b","display","inline-flex","align-items","center","justify-content","center","cursor","pointer"],[1,"avatar-loader",2,"margin-left","15px","color","#888"]],template:function(i,o){if(i&1&&(x(0,"div",4)(1,"h2"),q(2,"Cliente"),D(),ut(3,hce,101,31,"ng-container",5)(4,pce,2,0,"ng-template",null,0,ns),D()),i&2){let s=Ci(5);X(3),_e("ngIf",o.user)("ngIfElse",s)}},dependencies:[bf,uo,Lo,Rp,Oc,Lc,rs,Ef,wa,_a,kp,If,Rs,Cf],styles:[".page.anagrafica-detail[_ngcontent-%COMP%]{max-width:1160px;margin:32px auto;padding:24px 20px 32px;background:#f8fafc;border-radius:16px;box-shadow:0 5px 35px #d3dbe925}h2[_ngcontent-%COMP%]{font-size:1.54rem;font-weight:600;margin-bottom:28px}.user-detail-header[_ngcontent-%COMP%]{display:flex;gap:26px;align-items:flex-start;background:#fff;border-radius:14px;margin-bottom:28px;box-shadow:0 2px 12px #c7d5e12a;padding:22px 28px 15px 22px}.user-avatar-big[_ngcontent-%COMP%], .modal-avatar-box[_ngcontent-%COMP%]{width:96px;height:96px;border-radius:50%;background:#e9f2fb;display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;cursor:pointer}.user-avatar-big[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .modal-avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:94px;height:94px;border-radius:50%;object-fit:cover}.avatar-placeholder-big[_ngcontent-%COMP%]{font-size:58px;color:#bdcbe1}.user-basic-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:flex-start}.user-row-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:15px}.user-detail-name[_ngcontent-%COMP%]{font-size:1.19rem;font-weight:700;color:#132c4c}.user-detail-email[_ngcontent-%COMP%]{color:#577296;font-size:1rem;margin-top:7px}.user-detail-phone[_ngcontent-%COMP%]{font-size:.98rem;color:#3f4760;margin-top:6px}.status-date[_ngcontent-%COMP%]{text-align:right}.user-status-label[_ngcontent-%COMP%]{display:inline-block;background:#e8faee;color:#1cb164;font-weight:600;border-radius:7px;padding:6px 22px;font-size:1.06rem;min-width:74px;text-align:center;margin-bottom:5px}.user-status-label.inactive[_ngcontent-%COMP%]{color:#e76c6c;background:#fde8e8}.user-detail-signup-date[_ngcontent-%COMP%]{color:#7b90ad;font-size:.96rem;margin-top:7px}.user-detail-actions[_ngcontent-%COMP%]{margin-top:14px}.btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;padding:8px 14px;border-radius:6px;margin-right:9px;font-size:1rem;font-weight:500;cursor:pointer;transition:background .18s;box-shadow:0 2px 6px #365fd214}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{background:#1742b0}.btn.outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #cbd8e6;color:#2563eb}.btn.small[_ngcontent-%COMP%]{font-size:.97rem;padding:7px 10px;margin-right:7px;margin-top:7px;margin-bottom:0}.btn.danger[_ngcontent-%COMP%]{background:#ee4555;color:#fff;border:none}.btn.danger[_ngcontent-%COMP%]:hover, .btn.danger[_ngcontent-%COMP%]:focus{background:#ad1125}.user-detail-content[_ngcontent-%COMP%]{display:flex;gap:30px;margin-top:16px}.user-detail-col[_ngcontent-%COMP%]{flex:1.1;min-width:270px;display:flex;flex-direction:column;gap:28px}.user-detail-col-wide[_ngcontent-%COMP%]{flex:2}.user-detail-section[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 1.5px 6px #d7dbe333;padding:18px 20px 19px 22px;margin-bottom:4px}.user-detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.09rem;font-weight:600;margin-bottom:18px}.personal-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.01rem;padding:2.5px 0;color:#495879;border-bottom:1px solid #f1f5fa}.personal-info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.personal-info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#253157;font-weight:500}.note-box[_ngcontent-%COMP%]{background:#f6fbff;border:1px solid #e1e8ee;border-radius:7px;color:#6d7c96;font-size:.99rem;padding:11px 15px;min-height:54px;margin-bottom:2px}.schede-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:8px}.schede-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.schede-count[_ngcontent-%COMP%]{color:#607997;font-size:.95rem}.scheda-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:13px}.scheda-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fafdfe;border:1px solid #c8e8fd;border-radius:10px;padding:11px 16px 8px}.scheda-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.scheda-title[_ngcontent-%COMP%]{font-size:1.06rem;font-weight:600;color:#195089}.scheda-date[_ngcontent-%COMP%]{font-size:.97rem;color:#607997;margin-top:5px}.scheda-actions-inline[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:6px}.scheda-actions-inline[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}.scheda-empty[_ngcontent-%COMP%]{background:#f6fbff;border:1px dashed #cbd8e6;border-radius:8px;padding:14px 12px;color:#607997;text-align:center}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:#17334b44}.modal-confirm-delete[_ngcontent-%COMP%]{position:fixed;z-index:1050;top:50%;left:50%;transform:translate(-50%,-50%);min-width:340px;max-width:95vw;background:#fff;border-radius:14px;box-shadow:0 8px 44px #0d1d3325;padding:32px 34px 22px;display:flex;flex-direction:column;align-items:stretch}.modal-confirm-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.modal-confirm-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.12rem;margin-bottom:22px;text-align:center;color:#18325a}.modal-confirm-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:22px}.modal-edit-profilo[_ngcontent-%COMP%]{position:fixed;z-index:1010;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:18px;box-shadow:0 10px 40px #1d2c4522;min-width:650px;max-width:980px;padding:32px 34px 22px 32px;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalpop .18s cubic-bezier(.32,1.56,.66,1) 1}@keyframes _ngcontent-%COMP%_modalpop{0%{transform:translate(-50%,-56%) scale(.98)}to{transform:translate(-50%,-50%) scale(1)}}.modal-edit-profilo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;margin-bottom:18px}.modal-edit-flex[_ngcontent-%COMP%]{display:flex;gap:32px;align-items:flex-start}.modal-avatar-box[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;margin-right:32px;margin-top:7px;cursor:pointer;width:88px;height:88px;border-radius:50%;box-shadow:0 2px 9px #2463eb0f;background:#f8fafc}.modal-avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2.5px solid #e0e5f7}.modal-fields-note-wrap[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.modal-fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px 20px}.modal-fields-grid[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.97rem;color:#143349;gap:5px}.modal-fields-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-fields-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 10px;border-radius:7px;border:1.3px solid #dce1eb;background:#f8fafc;color:#102039;font-size:1rem}.modal-fields-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-fields-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-field-note-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:1.3px solid #2563eb;background:#f6faff}.modal-field-note-row[_ngcontent-%COMP%]{grid-column:1/-1;margin-top:18px;display:flex;flex-direction:column}.modal-field-note-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.99rem;color:#143349}.modal-field-note-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:92px;resize:vertical;padding:10px;border-radius:8px;border:1.2px solid #dce1eb;background:#f8fafc;color:#102039;font-size:1rem}.modal-edit-actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end;gap:14px}.scheda-info-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.scheda-icon[_ngcontent-%COMP%]{color:#2563eb;font-size:28px;flex-shrink:0}.small-icon[_ngcontent-%COMP%]{font-size:20px!important;vertical-align:middle;margin-right:0!important}@media (max-width: 900px){.modal-edit-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.modal-avatar-box[_ngcontent-%COMP%]{margin:0 auto 20px}.modal-fields-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]});let n=e;return n})();function gce(n,e){if(n&1&&(x(0,"div",42),q(1),D()),n&2){let t=ie();X(),Yr(" ",t.savedMsgText,`
`)}}function mce(n,e){if(n&1&&bt(0,"img",43),n&2){let t=ie();_e("src",t.cliente==null?null:t.cliente.avatarUrl,xr)}}function vce(n,e){n&1&&(x(0,"div",44),q(1,"\u{1F464}"),D())}function yce(n,e){n&1&&(co(0),fr(),x(1,"svg",45),bt(2,"rect",46),x(3,"g"),bt(4,"rect",47)(5,"circle",48)(6,"path",49),D()(),lo())}function _ce(n,e){if(n&1&&bt(0,"img",50),n&2){let t=ie();_e("src",t.logoPreviewUrl,xr)}}function wce(n,e){if(n&1){let t=Vt();x(0,"div",54),Me("click",function(){pe(t);let i=ie().index,o=ie();return ge(o.setGiorno(i))})("dblclick",function(){pe(t);let i=ie().$implicit,o=ie();return ge(o.enableTabEdit(i))}),q(1),D()}if(n&2){let t=ie().$implicit;X(),Yr(" ",t.nome," ")}}function bce(n,e){if(n&1){let t=Vt();x(0,"input",55),Xe("ngModelChange",function(i){pe(t);let o=ie().$implicit;return Je(o.nome,i)||(o.nome=i),ge(i)}),Me("blur",function(){pe(t);let i=ie().$implicit,o=ie();return ge(o.disableTabEdit(i))})("keydown.enter",function(){pe(t);let i=ie().$implicit,o=ie();return ge(o.disableTabEdit(i))}),D()}if(n&2){let t=ie().$implicit;Qe("ngModel",t.nome)}}function xce(n,e){if(n&1&&(x(0,"div",51),ut(1,wce,2,1,"div",52)(2,bce,1,1,"input",53),D()),n&2){let t=e.$implicit,r=e.index,i=ie();va("active",r===i.giornoAttivoIndex),X(),_e("ngIf",!t.editing),X(),_e("ngIf",t.editing)}}function Ece(n,e){n&1&&(x(0,"div",56),q(1," Aggiungi un esercizio dalla colonna destra "),D())}function Cce(n,e){if(n&1&&bt(0,"img",74),n&2){let t=ie().$implicit;_e("alt",O0(t.nome))("src",t.image,xr)}}function Ice(n,e){n&1&&(x(0,"div",75),q(1,"\u{1F3CB}\uFE0F"),D())}function Sce(n,e){if(n&1){let t=Vt();x(0,"div",59)(1,"div",60)(2,"div",61),ut(3,Cce,1,3,"img",62)(4,Ice,2,0,"div",63),D(),x(5,"div",64),q(6),D(),x(7,"div",65)(8,"button",66),Me("click",function(){let i=pe(t).index,o=ie(2);return ge(o.moveExerciseUp(i))}),q(9,"\u2191"),D(),x(10,"button",67),Me("click",function(){let i=pe(t).index,o=ie(2);return ge(o.moveExerciseDown(i))}),q(11,"\u2193"),D(),x(12,"button",68),Me("click",function(){let i=pe(t).index,o=ie(2);return ge(o.resetExercise(i))}),q(13,"\u27F3"),D(),x(14,"button",69),Me("click",function(){let i=pe(t).index,o=ie(2);return ge(o.rimuoviEsercizio(i))}),q(15,"\xD7"),D()()(),x(16,"div",70)(17,"label"),q(18,"Serie "),x(19,"input",71),Xe("ngModelChange",function(i){let o=pe(t).$implicit;return Je(o.serie,i)||(o.serie=i),ge(i)}),D()(),x(20,"label"),q(21,"Ripetizioni "),x(22,"input",71),Xe("ngModelChange",function(i){let o=pe(t).$implicit;return Je(o.ripetizioni,i)||(o.ripetizioni=i),ge(i)}),D()(),x(23,"label"),q(24,"Min "),x(25,"input",72),Xe("ngModelChange",function(i){let o=pe(t).$implicit;return Je(o.minuti,i)||(o.minuti=i),ge(i)}),D()(),x(26,"label"),q(27,"Sec "),x(28,"input",72),Xe("ngModelChange",function(i){let o=pe(t).$implicit;return Je(o.secondi,i)||(o.secondi=i),ge(i)}),D()()(),x(29,"textarea",73),Xe("ngModelChange",function(i){let o=pe(t).$implicit;return Je(o.note,i)||(o.note=i),ge(i)}),Me("blur",function(){pe(t);let i=ie(2);return ge(i.persistSchedule())}),D()()}if(n&2){let t=e.$implicit,r=e.index,i=ie(2);X(3),_e("ngIf",t.image),X(),_e("ngIf",!t.image),X(2),Kt(t.nome),X(2),_e("disabled",i.currentExercisePage*i.pageSize+r===0),X(2),_e("disabled",i.currentExercisePage*i.pageSize+r===i.scheda.giorni[i.giornoAttivoIndex].esercizi.length-1),X(9),Qe("ngModel",t.serie),X(3),Qe("ngModel",t.ripetizioni),X(3),Qe("ngModel",t.minuti),X(3),Qe("ngModel",t.secondi),X(),Qe("ngModel",t.note)}}function Ace(n,e){if(n&1&&(x(0,"div",57),ut(1,Sce,30,10,"div",58),D()),n&2){let t=ie();X(),_e("ngForOf",t.pagedExercises)}}function Dce(n,e){if(n&1){let t=Vt();x(0,"div",76)(1,"button",77),Me("click",function(){pe(t);let i=ie();return ge(i.goToPrevExercisePage())}),fr(),x(2,"svg",78),bt(3,"circle",79)(4,"path",80),D()(),Oo(),x(5,"span",81),q(6),D(),x(7,"button",77),Me("click",function(){pe(t);let i=ie();return ge(i.goToNextExercisePage())}),fr(),x(8,"svg",78),bt(9,"circle",79)(10,"path",82),D()()()}if(n&2){let t=ie();X(),_e("disabled",t.currentExercisePage<=0),X(5),xw(" ",t.currentExercisePage+1," / ",t.totalExercisePages||1," "),X(),_e("disabled",t.currentExercisePage>=t.totalExercisePages-1)}}function Tce(n,e){if(n&1&&(x(0,"option",83),q(1),D()),n&2){let t=e.$implicit;_e("value",t.name),X(),Kt(t.name)}}function Mce(n,e){if(n&1&&bt(0,"img",74),n&2){let t=ie().$implicit;_e("alt",O0(t.name))("src",t.image,xr)}}function Nce(n,e){n&1&&(x(0,"div",90),q(1,"\u{1F3CB}\uFE0F"),D())}function Pce(n,e){if(n&1){let t=Vt();x(0,"div",84),Me("click",function(){let i=pe(t).$implicit,o=ie();return ge(o.aggiungiEsercizioAlGiorno(i))}),x(1,"div",85),ut(2,Mce,1,3,"img",62)(3,Nce,2,0,"div",86),D(),x(4,"div",87)(5,"div",88),q(6),D(),x(7,"div",89),q(8),D()()()}if(n&2){let t=e.$implicit;X(2),_e("ngIf",t.image),X(),_e("ngIf",!t.image),X(3),Kt(t.name),X(2),Kt(t.category)}}function kce(n,e){n&1&&(x(0,"div",91),q(1,"Nessun esercizio"),D())}function Rce(n,e){if(n&1&&bt(0,"img",74),n&2){let t=ie().$implicit;_e("alt",O0(t.name))("src",t.avatarUrl,xr)}}function Oce(n,e){n&1&&(x(0,"span"),q(1,"\u{1F464}"),D())}function Lce(n,e){if(n&1&&(x(0,"div",107),q(1),D()),n&2){let t=ie().$implicit;X(),Kt(t.email)}}function Fce(n,e){if(n&1){let t=Vt();x(0,"div",101),Me("click",function(){let i=pe(t).$implicit,o=ie(2);return ge(o.selectUser(i))}),x(1,"div",102),ut(2,Rce,1,3,"img",62)(3,Oce,2,0,"span",15),D(),x(4,"div",103)(5,"div",104),q(6),D(),ut(7,Lce,2,1,"div",105),x(8,"div",106),q(9),D()()()}if(n&2){let t=e.$implicit;X(2),_e("ngIf",t.avatarUrl),X(),_e("ngIf",!t.avatarUrl),X(3),Kt(t.name),X(),_e("ngIf",t.email),X(),va("inactive",t.status!=="Attivo"),X(),Kt(t.status)}}function Vce(n,e){n&1&&(x(0,"div",108),q(1,"Nessun utente"),D())}function jce(n,e){if(n&1){let t=Vt();x(0,"div",92)(1,"div",93)(2,"div",94)(3,"div",95),q(4,"Seleziona Cliente"),D(),x(5,"button",96),Me("click",function(){pe(t);let i=ie();return ge(i.closeUserPicker())}),q(6,"\xD7"),D()(),x(7,"input",97),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.userSearch,i)||(o.userSearch=i),ge(i)}),Me("input",function(){pe(t);let i=ie();return ge(i.filterUsers())}),D(),x(8,"div",98),ut(9,Fce,10,7,"div",99),F0(10,"slice"),ut(11,Vce,2,0,"div",100),D()()()}if(n&2){let t=ie();X(7),Qe("ngModel",t.userSearch),X(2),_e("ngForOf",V0(10,3,t.filteredUserList,0,3)),X(2),_e("ngIf",t.filteredUserList.length===0)}}function Bce(n,e){if(n&1){let t=Vt();x(0,"div",109)(1,"div",110)(2,"div",111)(3,"div",112),q(4,"Condividi Scheda"),D(),x(5,"button",113),Me("click",function(){pe(t);let i=ie();return ge(i.closeShareModal())}),q(6,"\xD7"),D()(),x(7,"div",114)(8,"div",115)(9,"button",116),Me("click",function(){pe(t);let i=ie();return ge(i.shareEmail("gmail"))}),x(10,"span",117),q(11,"G"),D(),x(12,"span",118),q(13,"Gmail"),D()(),x(14,"button",116),Me("click",function(){pe(t);let i=ie();return ge(i.shareEmail("outlook"))}),x(15,"span",119),q(16,"O"),D(),x(17,"span",118),q(18,"Outlook"),D()(),x(19,"button",116),Me("click",function(){pe(t);let i=ie();return ge(i.copyShareLink())}),x(20,"span",120),q(21,"\u{1F517}"),D(),x(22,"span",118),q(23,"Copia Link"),D()()(),x(24,"div",121),bt(25,"input",122),x(26,"button",123),Me("click",function(){pe(t);let i=ie();return ge(i.copyShareLink())}),q(27,"Copia"),D()()()()()}if(n&2){let t=ie();X(25),_e("value",t.generatedLink)}}var m9=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.pdfSchedaService=i,this.authService=o,this.firestore=Se(zo),this.storage=Se(rc),this.cliente=null,this.scheda={stato:"In preparazione",livello:"Intermedio",durata:"4 Settimane",dataInizio:"",orario:"",giorni:[{nome:"Giorno 1",esercizi:[]}],logoPreviewUrl:null},this.logoPreviewUrl=null,this.giornoAttivoIndex=0,this.esercizi=[],this.categorie=[],this.eserciziFiltrati=[],this.searchTerm="",this.filterCategoria="",this.allUsers=[],this.filteredUserList=[],this.userSearch="",this.showUserPicker=!1,this.shareModalOpen=!1,this.generatedLink="",this.oggi=new Date().toISOString().split("T")[0],this._pdfBlob=null,this._pdfFileName="",this.pdfBlobUrl=null,this.currentExercisePage=0,this.pageSize=3,this.showSavedMsg=!1,this.savedMsgText="Scheda salvata"}get pagedExercises(){let r=this.scheda.giorni[this.giornoAttivoIndex].esercizi,i=this.currentExercisePage*this.pageSize;return r.slice(i,i+this.pageSize)}get totalExercisePages(){let r=this.scheda.giorni[this.giornoAttivoIndex].esercizi;return Math.max(1,Math.ceil(r.length/this.pageSize))}goToPrevExercisePage(){this.currentExercisePage>0&&this.currentExercisePage--}goToNextExercisePage(){this.currentExercisePage<this.totalExercisePages-1&&this.currentExercisePage++}ngOnInit(){return ee(this,null,function*(){yield this.loadUsers(),yield this.loadSelectedUser(),yield this.loadExercises(),yield this.loadCategories(),yield this.loadExistingSchedule(),this.filtraEsercizi(),this.filterUsers(),this.scheda.dataInizio||(this.scheda.dataInizio=this.oggi),this.scheda.orario||(this.scheda.orario=this.normalizeTimeToHMS(new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))),this.generateLink(),this.logoPreviewUrl=this.scheda.logoPreviewUrl||null})}loadUsers(){return ee(this,null,function*(){let r=mo(this.firestore,"users"),i=yield Jc(r);this.allUsers=i.docs.map(o=>Fe({id:o.id},o.data()))})}loadSelectedUser(){return ee(this,null,function*(){this.cliente=this.allUsers[0]||null,this.cliente&&(this.scheda.userId=this.cliente.id)})}loadExercises(){return ee(this,null,function*(){let r=mo(this.firestore,"exercises"),i=yield Jc(r);this.esercizi=i.docs.map(o=>Fe({id:o.id},o.data()))})}loadCategories(){return ee(this,null,function*(){let r=mo(this.firestore,"categories"),i=yield Jc(r);this.categorie=i.docs.map(o=>Fe({id:o.id,selected:!1},o.data()))})}loadExistingSchedule(){return ee(this,null,function*(){if(!this.cliente)return;let r=mo(this.firestore,"schede"),i=Ay(r,Dy("userId","==",this.cliente.id),Mj("createdAt","asc")),s=(yield Jc(i)).docs.map(a=>Fe({id:a.id},a.data()));s.length>0&&(this.scheda=s[s.length-1],(!this.scheda.giorni||this.scheda.giorni.length===0)&&(this.scheda.giorni=[{nome:"Giorno 1",esercizi:[]}]),this.logoPreviewUrl=this.scheda.logoPreviewUrl||null,this.scheda.orario||(this.scheda.orario=this.normalizeTimeToHMS(new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))))})}filterUsers(){let r=this.userSearch.toLowerCase().trim();this.filteredUserList=this.allUsers.filter(i=>i.name.toLowerCase().includes(r)||(i.email||"").toLowerCase().includes(r))}openUserPicker(){this.showUserPicker=!0,this.userSearch="",this.filterUsers()}closeUserPicker(){this.showUserPicker=!1}selectUser(r){return ee(this,null,function*(){this.cliente=r,this.scheda.userId=r.id,this.closeUserPicker(),yield this.loadExistingSchedule(),this.generateLink(),this.currentExercisePage=0})}enableTabEdit(r){r.editing=!0,setTimeout(()=>{let i=document.querySelectorAll(".tab-edit"),o=i[i.length-1];o?.focus(),o?.select()},0)}disableTabEdit(r){r.editing=!1,this.persistSchedule()}setGiorno(r){this.giornoAttivoIndex=r,this.currentExercisePage=0}aggiungiGiorno(){let r=this.scheda.giorni.length+1;this.scheda.giorni.push({nome:"Giorno "+r,esercizi:[]}),this.giornoAttivoIndex=this.scheda.giorni.length-1,this.currentExercisePage=0,this.persistSchedule()}rimuoviGiorno(){this.scheda.giorni.length!==1&&(this.scheda.giorni.splice(this.giornoAttivoIndex,1),this.giornoAttivoIndex>=this.scheda.giorni.length&&(this.giornoAttivoIndex=this.scheda.giorni.length-1),this.currentExercisePage=0,this.persistSchedule())}createScheduleExercise(r){return{id:r.id,nome:r.name,image:r.image,categoria:r.category,serie:3,ripetizioni:10,minuti:0,secondi:0,caricoKg:0,note:""}}aggiungiEsercizioAlGiorno(r){this.scheda.giorni[this.giornoAttivoIndex].esercizi.push(this.createScheduleExercise(r)),this.persistSchedule()}rimuoviEsercizio(r){this.scheda.giorni[this.giornoAttivoIndex].esercizi.splice(r+this.currentExercisePage*this.pageSize,1),this.currentExercisePage>0&&this.pagedExercises.length===0&&this.goToPrevExercisePage(),this.persistSchedule()}filtraEsercizi(){let r=this.searchTerm.toLowerCase().trim();this.eserciziFiltrati=this.esercizi.filter(i=>{let o=i.name.toLowerCase().includes(r),s=this.filterCategoria?i.category===this.filterCategoria:!0;return o&&s})}salvaScheda(){return ee(this,null,function*(){yield this.authService.ensureSignedIn(),this.scheda.logoPreviewUrl=this.logoPreviewUrl;let r=new Date;this.scheda.orario=this.normalizeTimeToHMS(r.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"})),this.scheda.dataInizio=r.toISOString().split("T")[0],yield this.persistSchedule(),this.generateLink(),yield this.appendCardToUser(this.scheda.dataInizio,this.scheda.orario),this.showSavedMsg=!0,this.savedMsgText="Scheda salvata",setTimeout(()=>{this.showSavedMsg=!1},2500)})}normalizeTimeToHMS(r){if(!r)return"";let i=r.match(/^(\d{2}):(\d{2})(?::(\d{2}))?$/);if(!i)return r;let o=i[3]??"00";return`${i[1]}:${i[2]}:${o}`}appendCardToUser(r,i){return ee(this,null,function*(){if(!this.cliente||!this.scheda)return;yield this.authService.ensureSignedIn();let o=this.computeScheduleTitle(),s=this.formatDateIT(r),a=this.normalizeTimeToHMS(i),c={title:o,date:s,time:a},l=Or(this.firestore,`users/${this.cliente.id}`);try{let p=(yield Jc(Ay(mo(this.firestore,"users"),Dy("id","==",this.cliente.id)))).docs[0]?.data(),m=Array.isArray(p?.cards)?p.cards:[];yield Gl(l,{cards:[c,...m]})}catch(u){console.error("Error appending card to user",u)}})}computeScheduleTitle(){let r=this.scheda.giorni?.[this.giornoAttivoIndex]?.nome||"Scheda allenamento",i=this.scheda.livello||"",o=this.scheda.stato||"",s=i?`${r} \u2022 ${i}`:r;return o?`${s} \u2022 ${o}`:s}formatDateIT(r){if(!r)return null;let i=r.match(/^(\d{4})-(\d{2})-(\d{2})$/);return i?`${i[3]}/${i[2]}/${i[1]}`:null}persistSchedule(){return ee(this,null,function*(){if(!this.cliente)return;yield this.authService.ensureSignedIn(),this.scheda.logoPreviewUrl=this.logoPreviewUrl;let r=Pt(Fe({},this.scheda),{userId:this.cliente.id,createdAt:Date.now()});if(this.scheda.id){let i=Or(this.firestore,`schede/${this.scheda.id}`);try{yield el(i,r,{merge:!0})}catch(o){console.error("Error updating schedule",o)}}else{let i=mo(this.firestore,"schede");try{let o=yield Dj(i,r);this.scheda.id=o.id}catch(o){console.error("Error creating schedule",o)}}})}apriSchedaPerUser(r){this.router.navigate(["/gestione-schede"],{state:{selectedUserId:r}})}anteprimaPdf(){return ee(this,null,function*(){let i=(yield this.pdfSchedaService.buildDoc(this.scheda,this.cliente,this.logoPreviewUrl)).output("blob");if(this.pdfBlobUrl)try{URL.revokeObjectURL(this.pdfBlobUrl)}catch{}this.pdfBlobUrl=URL.createObjectURL(i),window.open(this.pdfBlobUrl,"_blank")})}stampa(){return ee(this,null,function*(){yield this.pdfSchedaService.buildAndSavePdf(this.scheda,this.cliente,this.logoPreviewUrl)})}openShareModal(){this.generateLink(),this.shareModalOpen=!0}closeShareModal(){this.shareModalOpen=!1}generateLink(){if(!this.cliente){this.generatedLink="";return}let r=location.origin,i=encodeURIComponent(JSON.stringify({cliente:this.cliente.name,stato:this.scheda.stato,livello:this.scheda.livello,durata:this.scheda.durata,inizio:this.scheda.dataInizio,giorni:this.scheda.giorni.map(o=>({nome:o.nome,esercizi:o.esercizi.map(s=>({nome:s.nome,serie:s.serie,ripetizioni:s.ripetizioni,min:s.minuti,sec:s.secondi,note:s.note}))}))}));this.generatedLink=`${r}/scheda-share?data=${i}`}shareEmail(r){if(!this.cliente)return;let i="Scheda Allenamento",o=[`Ciao ${this.cliente.name}`,`Livello: ${this.scheda.livello}`,`Durata: ${this.scheda.durata}`,`Inizio: ${this.scheda.dataInizio}`,"",...this.scheda.giorni.map(l=>l.nome+": "+l.esercizi.map(u=>`${u.nome} ${u.serie}x${u.ripetizioni}`).join(", ")),"",`Link scheda: ${this.generatedLink}`],s=encodeURIComponent(o.join(`
`)),a=encodeURIComponent(i),c="";r==="gmail"?c=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(this.cliente.email)}&su=${a}&body=${s}`:c=`https://outlook.office.com/mail/deeplink/compose?to=${encodeURIComponent(this.cliente.email)}&subject=${a}&body=${s}`,window.open(c,"_blank")}copyShareLink(){this.generatedLink&&navigator.clipboard.writeText(this.generatedLink).catch(()=>{})}moveExerciseUp(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;o!==0&&([i[o-1],i[o]]=[i[o],i[o-1]],this.persistSchedule())}moveExerciseDown(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;o!==i.length-1&&([i[o+1],i[o]]=[i[o],i[o+1]],this.persistSchedule())}resetExercise(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;i[o].serie=3,i[o].ripetizioni=10,i[o].minuti=0,i[o].secondi=0,i[o].note="",this.persistSchedule()}onLogoSelect(r){return ee(this,null,function*(){let i=r.target;if(i.files&&i.files[0]){let o=i.files[0],s=`logos/${this.scheda.userId||"generic"}/${Date.now()}_logo`,a=Yl(this.storage,s);try{yield Zl(a,o);let c=yield Kl(a);this.logoPreviewUrl=c||null,this.scheda.logoPreviewUrl=this.logoPreviewUrl,yield this.persistSchedule()}catch(c){console.error("Error uploading logo or persisting schedule",c)}}})}getScaledImageData(r,i=40,o=30){return ee(this,null,function*(){if(r)return yield new Promise(s=>{let a=new Image;a.onload=()=>{let c=document.createElement("canvas");c.width=i*2,c.height=o*2;let l=c.getContext("2d");l.fillStyle="#ffffff",l.fillRect(0,0,c.width,c.height);let u=a.width/a.height,p=c.width/c.height,m,g;u>p?(g=c.height,m=g*u):(m=c.width,g=m/u),l.drawImage(a,(c.width-m)/2,(c.height-g)/2,m,g),s(c.toDataURL("image/jpeg",.9))},a.onerror=()=>s(void 0),a.crossOrigin="anonymous",a.src=r})})}wrapText(r,i,o){if(!i)return[];let s=i.split(/\s+/),a=[],c="";for(let l of s){let u=c?c+" "+l:l;r.getTextWidth(u)>o&&c?(a.push(c),c=l):c=u}return c&&a.push(c),a}safeString(r){return(r||"").trim().replace(/\s+/g,"")}getScaledImageDataForPdfHQ(r,i=40,o=30){return ee(this,null,function*(){if(r)return yield new Promise(s=>{let a=new window.Image;a.crossOrigin="anonymous",a.onload=()=>{let l=document.createElement("canvas");l.width=Math.round(i*4),l.height=Math.round(o*4);let u=l.getContext("2d",{alpha:!1});if(!u)return s(void 0);u.imageSmoothingEnabled=!0,u.imageSmoothingQuality="high",u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);let p=l.width/l.height,m=a.width/a.height,g=0,C=0,I=a.width,N=a.height;m>p?(I=a.height*p,g=(a.width-I)/2):(N=a.width/p,C=(a.height-N)/2),u.drawImage(a,g,C,I,N,0,0,l.width,l.height),s(l.toDataURL("image/png",1))},a.onerror=()=>s(void 0),a.src=r})})}};e.\u0275fac=function(i){return new(i||e)(it(Oi),it(mE),it(Dd))},e.\u0275cmp=Pr({type:e,selectors:[["app-gestione-schede"]],standalone:!1,decls:76,vars:31,consts:[["class","save-toast",4,"ngIf"],[1,"schede-page"],[1,"col-left","section-box"],[1,"avatar-block",3,"click"],["alt","Cliente",3,"src",4,"ngIf"],["class","avatar-placeholder",4,"ngIf"],[1,"cliente-name"],[1,"cliente-info"],[1,"info-row"],[1,"label"],[3,"ngModelChange","ngModel"],["type","text","placeholder","es. 8 Settimane",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"logo-uploader"],["for","logoInput",1,"logo-upload-box"],[4,"ngIf"],["alt","Logo anteprima","class","logo-preview-img",3,"src",4,"ngIf"],["type","file","id","logoInput","accept","image/*","hidden","",3,"change"],[1,"left-actions"],[1,"btn","primary",3,"click"],[1,"btn","outline",3,"click"],[1,"btn","share",3,"click","disabled"],[1,"col-center","section-box"],[1,"giorni-tabs"],["class","tab-item",3,"active",4,"ngFor","ngForOf"],[1,"tab-add",3,"click"],["title","Rimuovi giorno",1,"tab-remove",3,"click","disabled"],[1,"giorno-contenuto"],["class","empty-drop",4,"ngIf"],["class","exercise-list",4,"ngIf"],["class","exercise-pagination-mini",4,"ngIf"],[1,"col-right","section-box"],[1,"search-box"],["type","text","placeholder","Cerca esercizi...",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"esercizi-scroll"],["class","big-ex-card",3,"click",4,"ngFor","ngForOf"],["class","empty-right",4,"ngIf"],["class","user-picker-backdrop",4,"ngIf"],["class","share-backdrop",4,"ngIf"],[1,"save-toast"],["alt","Cliente",3,"src"],[1,"avatar-placeholder"],["width","75","height","75","viewBox","0 0 75 75","fill","none"],["x","3","y","3","width","69","height","69","rx","16","fill","#F4F8FB","stroke","#b9cddd","stroke-width","2.3"],["x","17","y","23","width","41","height","30","rx","5","fill","#E8F0FA","stroke","#b9cddd","stroke-width","1.6"],["cx","29","cy","37","r","5.5","fill","#b9cddd"],["d","M19 53l12-12c2-2 5.6-2 7.6 0l15 15c1.9 1.9 5 1.6 6.8-.4l8-10.5","stroke","#2563eb","stroke-width","2","fill","none"],["alt","Logo anteprima",1,"logo-preview-img",3,"src"],[1,"tab-item"],["class","tab-label",3,"click","dblclick",4,"ngIf"],["class","tab-edit",3,"ngModel","ngModelChange","blur","keydown.enter",4,"ngIf"],[1,"tab-label",3,"click","dblclick"],[1,"tab-edit",3,"ngModelChange","blur","keydown.enter","ngModel"],[1,"empty-drop"],[1,"exercise-list"],["class","exercise-card",4,"ngFor","ngForOf"],[1,"exercise-card"],[1,"ex-top"],[1,"ex-img"],[3,"src","alt",4,"ngIf"],["class","ex-placeholder",4,"ngIf"],[1,"ex-title"],[1,"ex-controls"],["title","Sposta su",1,"btn-icon","move",3,"click","disabled"],["title","Sposta gi\xF9",1,"btn-icon","move",3,"click","disabled"],["title","Reset valori",1,"btn-icon","reset",3,"click"],[1,"btn-icon","remove",3,"click"],[1,"ex-fields"],["type","number","min","1",3,"ngModelChange","ngModel"],["type","number","min","0",3,"ngModelChange","ngModel"],["rows","2","placeholder","Note",1,"ex-note",3,"ngModelChange","blur","ngModel"],[3,"src","alt"],[1,"ex-placeholder"],[1,"exercise-pagination-mini"],[1,"page-arrow-mini",3,"click","disabled"],["viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","transparent"],["d","M15.5 19 9.5 12l6-7","fill","none","stroke","white","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[1,"page-indicator-mini"],["d","M8.5 5 14.5 12l-6 7","fill","none","stroke","white","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[3,"value"],[1,"big-ex-card",3,"click"],[1,"big-img"],["class","big-placeholder",4,"ngIf"],[1,"big-info"],[1,"big-name"],[1,"big-cat"],[1,"big-placeholder"],[1,"empty-right"],[1,"user-picker-backdrop"],[1,"user-picker-modal"],[1,"picker-header"],[1,"picker-title"],[1,"picker-close",3,"click"],["type","text","placeholder","Cerca nome o email...",1,"picker-search",3,"ngModelChange","input","ngModel"],[1,"picker-list"],["class","picker-item",3,"click",4,"ngFor","ngForOf"],["class","picker-empty",4,"ngIf"],[1,"picker-item",3,"click"],[1,"pi-avatar"],[1,"pi-data"],[1,"pi-name"],["class","pi-email",4,"ngIf"],[1,"pi-status"],[1,"pi-email"],[1,"picker-empty"],[1,"share-backdrop"],[1,"share-modal"],[1,"share-header"],[1,"share-title"],[1,"share-close",3,"click"],[1,"share-body"],[1,"share-options"],[1,"share-option",3,"click"],[1,"share-icon","gmail"],[1,"share-label"],[1,"share-icon","outlook"],[1,"share-icon","link"],[1,"share-link-box"],["type","text","readonly","",3,"value"],[1,"btn","mini",3,"click"]],template:function(i,o){i&1&&(ut(0,gce,2,1,"div",0),x(1,"div",1)(2,"aside",2)(3,"div",3),Me("click",function(){return o.openUserPicker()}),ut(4,mce,1,1,"img",4)(5,vce,2,0,"div",5),D(),x(6,"div",6),q(7),D(),x(8,"div",7)(9,"div",8)(10,"span",9),q(11,"Stato"),D(),x(12,"select",10),Xe("ngModelChange",function(a){return Je(o.scheda.stato,a)||(o.scheda.stato=a),a}),x(13,"option"),q(14,"In preparazione"),D(),x(15,"option"),q(16,"Attiva"),D(),x(17,"option"),q(18,"Completata"),D(),x(19,"option"),q(20,"Sospesa"),D()()(),x(21,"div",8)(22,"span",9),q(23,"Livello"),D(),x(24,"select",10),Xe("ngModelChange",function(a){return Je(o.scheda.livello,a)||(o.scheda.livello=a),a}),x(25,"option"),q(26,"Principiante"),D(),x(27,"option"),q(28,"Intermedio"),D(),x(29,"option"),q(30,"Avanzato"),D()()(),x(31,"div",8)(32,"span",9),q(33,"Durata"),D(),x(34,"input",11),Xe("ngModelChange",function(a){return Je(o.scheda.durata,a)||(o.scheda.durata=a),a}),D()(),x(35,"div",8)(36,"span",9),q(37,"Inizio"),D(),x(38,"input",12),Xe("ngModelChange",function(a){return Je(o.scheda.dataInizio,a)||(o.scheda.dataInizio=a),a}),D()()(),x(39,"div",13)(40,"label",14),ut(41,yce,7,0,"ng-container",15)(42,_ce,1,1,"img",16),x(43,"input",17),Me("change",function(a){return o.onLogoSelect(a)}),D()()(),x(44,"div",18)(45,"button",19),Me("click",function(){return o.salvaScheda()}),q(46,"Salva Scheda"),D(),x(47,"button",20),Me("click",function(){return o.anteprimaPdf()}),q(48,"Stampa PDF"),D(),x(49,"button",21),Me("click",function(){return o.openShareModal()}),q(50,"Condividi Link"),D()()(),x(51,"section",22)(52,"div",23),ut(53,xce,3,4,"div",24),x(54,"button",25),Me("click",function(){return o.aggiungiGiorno()}),q(55,"+ Giorno"),D(),x(56,"button",26),Me("click",function(){return o.rimuoviGiorno()}),q(57," \u2013 Giorno "),D()(),x(58,"div",27),ut(59,Ece,2,0,"div",28)(60,Ace,2,1,"div",29)(61,Dce,11,4,"div",30),D()(),x(62,"aside",31)(63,"div",32)(64,"input",33),Xe("ngModelChange",function(a){return Je(o.searchTerm,a)||(o.searchTerm=a),a}),Me("input",function(){return o.filtraEsercizi()}),D(),x(65,"select",34),Xe("ngModelChange",function(a){return Je(o.filterCategoria,a)||(o.filterCategoria=a),a}),Me("change",function(){return o.filtraEsercizi()}),x(66,"option",35),q(67,"Tutte le categorie"),D(),ut(68,Tce,2,2,"option",36),F0(69,"slice"),D()(),x(70,"div",37),ut(71,Pce,9,4,"div",38),F0(72,"slice"),ut(73,kce,2,0,"div",39),D()()(),ut(74,jce,12,7,"div",40)(75,Bce,28,1,"div",41)),i&2&&(_e("ngIf",o.showSavedMsg),X(4),_e("ngIf",o.cliente==null?null:o.cliente.avatarUrl),X(),_e("ngIf",!(o.cliente!=null&&o.cliente.avatarUrl)),X(2),Kt((o.cliente==null?null:o.cliente.name)||"Seleziona cliente"),X(5),Qe("ngModel",o.scheda.stato),X(12),Qe("ngModel",o.scheda.livello),X(10),Qe("ngModel",o.scheda.durata),X(4),Qe("ngModel",o.scheda.dataInizio),X(3),_e("ngIf",!o.logoPreviewUrl),X(),_e("ngIf",o.logoPreviewUrl),X(7),_e("disabled",!o.cliente),X(4),_e("ngForOf",o.scheda.giorni),X(3),_e("disabled",o.scheda.giorni.length===1),X(3),_e("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length===0),X(),_e("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length>0),X(),_e("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length>0),X(3),Qe("ngModel",o.searchTerm),X(),Qe("ngModel",o.filterCategoria),X(3),_e("ngForOf",V0(69,23,o.categorie,0,3)),X(3),_e("ngForOf",V0(72,27,o.eserciziFiltrati,0,3)),X(2),_e("ngIf",o.eserciziFiltrati.length===0),X(),_e("ngIf",o.showUserPicker),X(),_e("ngIf",o.shareModalOpen))},dependencies:[uo,Lo,Oc,Lc,rs,gA,wa,_a,vA,Rs,ZS],styles:["body[_ngcontent-%COMP%]{background:#f5f8fc;color:#173453;font-family:Segoe UI,Arial,sans-serif}.schede-page[_ngcontent-%COMP%]{display:grid;grid-template-columns:280px 1fr 320px;gap:26px;padding:26px 30px 40px;background:#f5f8fc;min-height:100vh;box-sizing:border-box}.save-toast[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:24px;background:#1cb164;color:#fff;font-weight:700;border-radius:10px;padding:10px 14px;box-shadow:0 6px 18px #1cb16447;z-index:3000;letter-spacing:.02em}.section-box[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:18px 16px 20px;box-shadow:0 3px 14px #193c6e14;display:flex;flex-direction:column;gap:18px}.bordered[_ngcontent-%COMP%]{border-radius:8px;background:#f9fbfe}.col-left[_ngcontent-%COMP%], .col-center[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.col-left[_ngcontent-%COMP%]{align-items:center;background:#183d81;border-radius:14px}.col-left[_ngcontent-%COMP%]   .section-box[_ngcontent-%COMP%], .col-left.section-box[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.col-left[_ngcontent-%COMP%]   .cliente-name[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .bordered[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{background:#f5f9ff;color:#183d81;border:none}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]:hover{background:#1d4fb8;color:#fff}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#194065}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.outline[_ngcontent-%COMP%]:hover{background:#dbe9fb}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.share[_ngcontent-%COMP%]{background:#fbf7ef;color:#965d00;border:1px solid #e9d7b2}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.share[_ngcontent-%COMP%]:hover{background:#f6e9cf}.col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;background:#eef6ff}.avatar-block[_ngcontent-%COMP%]{width:92px;height:92px;border-radius:20px;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer;background:#eef3fb;border:none;transition:box-shadow .15s,transform .15s,border-color .15s;margin-left:auto;margin-right:auto}.avatar-block[_ngcontent-%COMP%]:hover{box-shadow:0 4px 14px #2563eb59;transform:translateY(-3px)}.avatar-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.avatar-placeholder[_ngcontent-%COMP%]{font-size:40px;opacity:.55}.cliente-name[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem;font-weight:800;letter-spacing:.03em;margin-left:auto;margin-right:auto;text-align:center;display:block;border:none}.cliente-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:14px 12px;border:none}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:70px;font-size:.68rem;font-weight:700;color:#173453}.info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{flex:1;padding:6px 8px;font-size:.7rem;background:#f1f6fb;font-weight:600;color:#173453;outline:none;transition:background-color .15s;border:none}.info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;box-sizing:border-box}.logo-uploader[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:18px}.logo-upload-box[_ngcontent-%COMP%]{width:110px;height:110px;border:2px dashed #b9cddd;border-radius:18px;background:#f8fafc;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:border-color .15s,background .15s;text-align:center}.logo-upload-box[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#f1faff}.logo-upload-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.logo-preview-img[_ngcontent-%COMP%]{width:104px;height:104px;object-fit:contain;border-radius:12px;display:block}.left-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.btn[_ngcontent-%COMP%]{border:none;padding:12px 18px;border-radius:12px;font-size:.72rem;font-weight:800;letter-spacing:.05em;cursor:pointer;transition:background .16s,box-shadow .16s,transform .12s;display:inline-flex;align-items:center;justify-content:center}.btn.primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none}.btn.primary[_ngcontent-%COMP%]:hover{background:#1d4fb8;color:#fff}.btn.primary[disabled][_ngcontent-%COMP%], .btn.primary[_ngcontent-%COMP%]:disabled{background:#e3e9f8;color:#173453;cursor:not-allowed;box-shadow:none;opacity:1}.btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#194065}.btn.outline[_ngcontent-%COMP%]:hover{background:#dbe9fb}.btn.share[_ngcontent-%COMP%]{background:#fbf7ef;color:#965d00;border:1px solid #e9d7b2}.btn.share[_ngcontent-%COMP%]:hover{background:#f6e9cf}.btn.mini[_ngcontent-%COMP%]{background:#eef3fb;color:#173453;padding:6px 10px;font-size:.6rem}.btn.mini[_ngcontent-%COMP%]:hover{background:#dbe9fb}.giorni-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px;flex-wrap:wrap;border:none}.tab-remove[_ngcontent-%COMP%]{background:#fbefee;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;margin-left:0;cursor:pointer;transition:background .15s;border:none}.tab-remove[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.tab-remove[_ngcontent-%COMP%]:hover:not([disabled]){background:#ffe3e3}.tab-item[_ngcontent-%COMP%]{background:#eef3fb;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;letter-spacing:.05em;cursor:pointer;transition:background .15s,color .15s;border:none}.tab-item.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.tab-item[_ngcontent-%COMP%]:hover:not(.active){background:#dbe9fb}.tab-label[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.tab-edit[_ngcontent-%COMP%]{width:100px;padding:6px 8px;font-size:.66rem;border-radius:8px;outline:none;border:none}.tab-edit[_ngcontent-%COMP%]:focus{background:#eef6ff}.tab-add[_ngcontent-%COMP%]{background:#f2fbf7;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;transition:background .15s;border:none;color:#067a45}.tab-add[_ngcontent-%COMP%]:hover{background:#e4f9ee}.giorno-contenuto[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:20px;border:none}.empty-drop[_ngcontent-%COMP%]{padding:26px 22px;text-align:center;font-size:.7rem;font-weight:700;color:#4b647d;border:none}.exercise-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;border:none}.exercise-card[_ngcontent-%COMP%]{background:#fff;padding:18px 16px 16px;border-radius:16px;display:flex;flex-direction:column;gap:14px;box-shadow:0 3px 12px #193c6e0f;transition:box-shadow .15s,transform .12s;border:none}.exercise-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #193c6e24;transform:translateY(-2px)}.exercise-pagination-mini[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;margin-top:10px;margin-bottom:4px}.page-arrow-mini[_ngcontent-%COMP%]{background:#2563eb;border:none;border-radius:50%;width:28px;height:28px;color:#fff;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 8px #2563eb1a;transition:background .14s,box-shadow .14s,transform .11s;outline:none;padding:0}.page-arrow-mini[disabled][_ngcontent-%COMP%]{background:#eaf0fa;color:#bed2f6;cursor:not-allowed;box-shadow:none}.page-arrow-mini[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:13px;height:13px;display:block;margin:auto}.page-indicator-mini[_ngcontent-%COMP%]{font-size:.93rem;font-weight:700;color:#2563eb;min-width:38px;text-align:center;letter-spacing:.01em}.ex-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;border:none}.ex-img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:18px;background:#f1f5fa;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;border:none}.ex-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.ex-placeholder[_ngcontent-%COMP%]{font-size:28px;opacity:.55}.ex-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:800;color:#173453;flex:1;letter-spacing:.03em;border:none}.ex-controls[_ngcontent-%COMP%]{display:flex;gap:4px;border:none}.btn-icon.move[_ngcontent-%COMP%], .btn-icon.reset[_ngcontent-%COMP%], .btn-icon.remove[_ngcontent-%COMP%]{background:#fff;color:#2563eb;width:32px;height:32px;font-size:1rem;font-weight:700;border-radius:12px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;transition:background .15s,color .15s;padding:0;border:none}.btn-icon.remove[_ngcontent-%COMP%]{color:#dc2626}.btn-icon.remove[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.btn-icon.move[disabled][_ngcontent-%COMP%], .btn-icon.reset[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.btn-icon.move[_ngcontent-%COMP%]:hover:not([disabled]){background:#eef6ff}.btn-icon.reset[_ngcontent-%COMP%]:hover:not([disabled]){background:#e0f0ff}.ex-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;max-width:600px}.ex-fields[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:.58rem;font-weight:700;letter-spacing:.05em;color:#173453}.ex-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;border-radius:10px;font-size:.66rem;font-weight:600;background:#f7fafc;color:#102f4d;outline:none;transition:background-color .15s;height:32px;box-sizing:border-box;border:none}.ex-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#eef6ff}.ex-note[_ngcontent-%COMP%]{width:80%;padding:10px 12px;border-radius:12px;font-size:.66rem;font-weight:600;background:#f8fbff;color:#173453;resize:vertical;outline:none;transition:background-color .15s;display:block;border:none}.ex-note[_ngcontent-%COMP%]:focus{background:#eef6ff}.search-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:14px;border:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border-radius:12px;background:#f7fbff;font-size:.7rem;font-weight:600;color:#173453;outline:none;transition:background-color .15s;border:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{background:#eef6ff}.esercizi-scroll[_ngcontent-%COMP%]{flex:1;overflow:auto;display:flex;flex-direction:column;gap:14px;padding:14px;border:none}.big-ex-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px 18px;display:flex;align-items:center;gap:18px;cursor:pointer;transition:box-shadow .15s,transform .12s,background .15s;min-height:96px;border:none}.big-ex-card[_ngcontent-%COMP%]:hover{background:#f0f6ff;box-shadow:0 4px 14px #2563eb38;transform:translateY(-3px)}.big-img[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:16px;background:#f0f4fa;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;border:none}.big-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.big-placeholder[_ngcontent-%COMP%]{font-size:30px;opacity:.55}.big-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.big-name[_ngcontent-%COMP%]{font-size:.76rem;font-weight:800;color:#173453;letter-spacing:.03em}.big-cat[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#2563eb;opacity:.85;letter-spacing:.05em}.empty-right[_ngcontent-%COMP%]{background:#f1f6fb;border-radius:16px;padding:18px 16px;text-align:center;font-size:.68rem;font-weight:600;color:#516b87;border:none}.user-picker-backdrop[_ngcontent-%COMP%], .share-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f234173;display:flex;align-items:center;justify-content:center;z-index:3000;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.user-picker-modal[_ngcontent-%COMP%], .share-modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;border:2px solid #d9e5f1;box-shadow:0 18px 50px #0f23414d;padding:24px 24px 26px;max-width:420px;width:100%;max-height:85vh;display:flex;flex-direction:column;gap:14px;overflow:auto}.user-picker-modal[_ngcontent-%COMP%]{width:380px}.share-modal[_ngcontent-%COMP%]{width:420px}.picker-header[_ngcontent-%COMP%], .share-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.picker-title[_ngcontent-%COMP%], .share-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:800;color:#173453}.picker-close[_ngcontent-%COMP%], .share-close[_ngcontent-%COMP%]{background:#f0f5fa;border:1px solid #d9e5f1;width:36px;height:36px;font-size:18px;font-weight:700;border-radius:12px;cursor:pointer;transition:background .15s,color .15s}.picker-close[_ngcontent-%COMP%]:hover, .share-close[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.picker-search[_ngcontent-%COMP%]{padding:10px 12px;border:1.8px solid #b9cddd;border-radius:12px;background:#f7fbff;font-size:.68rem;font-weight:600;color:#173453;outline:none;margin-bottom:8px}.picker-list[_ngcontent-%COMP%]{overflow:auto;flex:1;display:flex;flex-direction:column;gap:10px}.picker-item[_ngcontent-%COMP%]{display:flex;gap:14px;background:#f8fbff;border:1px solid #d9e5f1;border-radius:14px;padding:12px 14px;cursor:pointer;transition:background .15s,box-shadow .15s,transform .12s}.picker-item[_ngcontent-%COMP%]:hover{background:#edf5ff;box-shadow:0 3px 12px #2563eb38;transform:translateY(-2px)}.pi-avatar[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:14px;background:#eef3fb;border:1px solid #d9e5f1;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}.pi-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.pi-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.pi-name[_ngcontent-%COMP%]{font-size:.68rem;font-weight:800;color:#173453}.pi-email[_ngcontent-%COMP%]{font-size:.58rem;font-weight:600;color:#375d80}.pi-status[_ngcontent-%COMP%]{font-size:.56rem;font-weight:700;color:#16a34a}.pi-status.inactive[_ngcontent-%COMP%]{color:#dc2626}.picker-empty[_ngcontent-%COMP%]{text-align:center;font-size:.62rem;font-weight:700;color:#4b647d;padding:16px 10px;border:1px dashed #b9cddd;border-radius:12px}.share-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.share-options[_ngcontent-%COMP%]{display:flex;gap:14px;flex-wrap:wrap}.share-option[_ngcontent-%COMP%]{flex:1 1 110px;background:#f8fbff;border:1.6px solid #b9cddd;border-radius:16px;padding:14px 12px;display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer;transition:background .15s,box-shadow .15s,transform .12s;font-size:.62rem;font-weight:700;color:#173453}.share-option[_ngcontent-%COMP%]:hover{background:#edf5ff;box-shadow:0 3px 12px #2563eb38;transform:translateY(-2px)}.share-icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:800}.share-icon.gmail[_ngcontent-%COMP%]{background:#ffebe6;color:#d93025}.share-icon.outlook[_ngcontent-%COMP%]{background:#e6f0ff;color:#2563eb}.share-icon.link[_ngcontent-%COMP%]{background:#e9f7ff;color:#0d5f8c}.share-link-box[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.share-link-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1.6px solid #b9cddd;border-radius:12px;background:#f7fbff;font-size:.64rem;font-weight:600;color:#173453;outline:none}@media (max-width:1180px){.schede-page[_ngcontent-%COMP%]{grid-template-columns:260px 1fr 300px}}@media (max-width:980px){.schede-page[_ngcontent-%COMP%]{grid-template-columns:1fr}.col-left[_ngcontent-%COMP%], .col-center[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{width:100%}}@media (max-width:560px){.schede-page[_ngcontent-%COMP%]{padding:20px 16px 34px}.exercise-card[_ngcontent-%COMP%]{padding:16px 14px 14px}.big-ex-card[_ngcontent-%COMP%]{padding:14px 16px;min-height:88px}.avatar-block[_ngcontent-%COMP%]{width:78px;height:78px}.giorni-tabs[_ngcontent-%COMP%]{gap:8px}.tab-item[_ngcontent-%COMP%], .tab-add[_ngcontent-%COMP%]{padding:7px 12px;font-size:.6rem}}"]});let n=e;return n})();var Uce=["fileInput"];function zce(n,e){if(n&1&&bt(0,"img",29),n&2){let t=ie(2);_e("src",t.editForm.media||t.editForm.image,xr)}}function qce(n,e){n&1&&(x(0,"div",30),bt(1,"span",31),D())}function $ce(n,e){if(n&1){let t=Vt();x(0,"button",32),Me("click",function(){pe(t);let i=ie(2);return ge(i.enableEdit())}),q(1,"Modifica"),D()}}function Hce(n,e){if(n&1){let t=Vt();x(0,"button",32),Me("click",function(){pe(t);let i=ie(2);return ge(i.saveExercise())}),q(1,"Salva Esercizio"),D()}}function Wce(n,e){if(n&1){let t=Vt();x(0,"button",13),Me("click",function(){pe(t);let i=ie(2);return ge(i.cancelEdit())}),q(1,"Annulla"),D()}}function Gce(n,e){if(n&1){let t=Vt();x(0,"button",35),Me("click",function(){pe(t);let i=ie().index,o=ie(2);return ge(o.removeMuscle(i))}),q(1,"\xD7"),D()}}function Kce(n,e){if(n&1&&(x(0,"span",33),q(1),ut(2,Gce,2,0,"button",34),D()),n&2){let t=e.$implicit,r=ie(2);X(),Yr(" ",t," "),X(),_e("ngIf",r.editMode)}}function Yce(n,e){if(n&1){let t=Vt();x(0,"div",36)(1,"input",37),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.newMuscle,i)||(o.newMuscle=i),ge(i)}),Me("keydown.enter",function(){pe(t);let i=ie(2);return ge(i.addMuscle())}),D(),x(2,"button",38),Me("click",function(){pe(t);let i=ie(2);return ge(i.addMuscle())}),q(3,"Aggiungi"),D()()}if(n&2){let t=ie(2);X(),Qe("ngModel",t.newMuscle)}}function Zce(n,e){if(n&1&&(x(0,"div",39),q(1),D()),n&2){let t=ie(2);X(),Kt(t.notes||"Nessuna nota")}}function Qce(n,e){if(n&1){let t=Vt();x(0,"textarea",40),Xe("ngModelChange",function(i){pe(t);let o=ie(2);return Je(o.notes,i)||(o.notes=i),ge(i)}),D()}if(n&2){let t=ie(2);Qe("ngModel",t.notes)}}function Xce(n,e){if(n&1){let t=Vt();x(0,"div",3)(1,"div",4)(2,"div",5),Me("click",function(){pe(t);let i=ie();return ge(i.onMediaBoxClick())}),ut(3,zce,1,1,"img",6)(4,qce,2,0,"div",7),x(5,"input",8,1),Me("change",function(i){pe(t);let o=ie();return ge(o.onMediaChange(i))}),D()()(),x(7,"div",9)(8,"div",10),ut(9,$ce,2,0,"button",11)(10,Hce,2,0,"button",11)(11,Wce,2,0,"button",12),x(12,"button",13),Me("click",function(){pe(t);let i=ie();return ge(i.backToList())}),q(13,"Indietro"),D()(),x(14,"h2"),q(15,"Esercizio"),D(),x(16,"div",14)(17,"label"),q(18,"Nome"),D(),x(19,"input",15),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.editForm.name,i)||(o.editForm.name=i),ge(i)}),D()(),x(20,"div",14)(21,"label"),q(22,"Categoria"),D(),x(23,"input",15),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.editForm.category,i)||(o.editForm.category=i),ge(i)}),D()(),x(24,"div",14)(25,"label"),q(26,"Descrizione Tecnica"),D(),x(27,"textarea",16),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.editForm.description,i)||(o.editForm.description=i),ge(i)}),D()(),x(28,"div",17)(29,"label"),q(30,"Muscoli Coinvolti"),D(),x(31,"div",18),ut(32,Kce,3,2,"span",19),D(),ut(33,Yce,4,1,"div",20),D(),x(34,"div",14)(35,"label"),q(36,"Difficolt\xE0"),D(),x(37,"select",21),Xe("ngModelChange",function(i){pe(t);let o=ie();return Je(o.editForm.difficulty,i)||(o.editForm.difficulty=i),ge(i)}),x(38,"option",22),q(39,"Facile"),D(),x(40,"option",23),q(41,"Intermedio"),D(),x(42,"option",24),q(43,"Difficile"),D()()()(),x(44,"aside",25)(45,"div",26)(46,"h4"),q(47,"Note Personali"),D(),ut(48,Zce,2,1,"div",27)(49,Qce,1,1,"textarea",28),D()()()}if(n&2){let t=ie();X(2),va("clickable",t.editMode),X(),_e("ngIf",t.editForm.media||t.editForm.image),X(),_e("ngIf",!(t.editForm.media||t.editForm.image)),X(5),_e("ngIf",!t.editMode),X(),_e("ngIf",t.editMode),X(),_e("ngIf",t.editMode),X(8),Qe("ngModel",t.editForm.name),_e("readonly",!t.editMode),X(4),Qe("ngModel",t.editForm.category),_e("readonly",!t.editMode),X(4),Qe("ngModel",t.editForm.description),_e("readonly",!t.editMode),X(5),_e("ngForOf",t.editForm.muscles),X(),_e("ngIf",t.editMode),X(4),Qe("ngModel",t.editForm.difficulty),_e("disabled",!t.editMode),X(11),_e("ngIf",!t.editMode),X(),_e("ngIf",t.editMode)}}function Jce(n,e){if(n&1){let t=Vt();x(0,"div",9)(1,"h2"),q(2,"Esercizio"),D(),x(3,"p"),q(4,"Elemento non trovato."),D(),x(5,"button",13),Me("click",function(){pe(t);let i=ie();return ge(i.backToList())}),q(6,"Indietro"),D()()}}var v9=(()=>{let e=class e{constructor(r,i,o){this.route=r,this.router=i,this.authService=o,this.firestore=Se(zo),this.storage=Se(rc),this.exercise=null,this.editMode=!1,this.editForm={},this.notes="",this.newMuscle=""}ngOnInit(){return ee(this,null,function*(){let i=this.router.getCurrentNavigation()?.extras?.state;if(i?.exercise)this.exercise=i.exercise,this.editForm=Fe({},this.exercise);else{let s=(this.route.snapshot.paramMap.get("id")??"").toString();if(!s)this.exercise=null;else{let a=Or(this.firestore,`exercises/${s}`),c=yield Px(a);this.exercise=c.exists()?c.data():null,this.exercise&&(this.exercise.id=s,this.editForm=Fe({},this.exercise))}}this.notes="Nessuna nota"})}enableEdit(){this.exercise&&(this.editMode=!0,this.editForm=Fe({},this.exercise))}cancelEdit(){this.editMode=!1,this.editForm=this.exercise?Fe({},this.exercise):{}}saveExercise(){return ee(this,null,function*(){if(!this.exercise)return;let r=this.editForm.media;if(r&&r.startsWith("data:")){let a=`exercises/${this.exercise.id}/${Date.now()}_media`,c=Yl(this.storage,a),l=this.dataURLToBlob(r);try{yield this.authService.ensureSignedIn(),yield Zl(c,l),r=yield Kl(c)}catch(u){console.error("Error uploading media",u)}}let i=this.editForm.image;if(i&&i.startsWith("data:")){let a=`exercises/${this.exercise.id}/${Date.now()}_image`,c=Yl(this.storage,a),l=this.dataURLToBlob(i);try{yield this.authService.ensureSignedIn(),yield Zl(c,l),i=yield Kl(c)}catch(u){console.error("Error uploading image",u)}}let o=Pt(Fe(Fe({},this.exercise),this.editForm),{image:r||i||this.exercise.image,media:r||this.exercise.media}),s=Or(this.firestore,`exercises/${o.id}`);try{yield this.authService.ensureSignedIn(),yield el(s,o,{merge:!0})}catch(a){console.error("Error saving exercise details",a)}this.exercise=o,this.editMode=!1,this.router.navigate(["/esercizi"],{state:{refresh:!0}})})}backToList(){this.router.navigate(["/esercizi"])}onMediaBoxClick(){this.editMode&&this.fileInputRef?.nativeElement?.click()}onMediaChange(r){if(!this.editMode)return;let i=r.target.files?.[0];if(!i)return;let o=new FileReader;o.onload=()=>this.editForm.media=o.result,o.readAsDataURL(i)}addMuscle(){let r=(this.newMuscle||"").trim();if(!r)return;let i=Array.isArray(this.editForm.muscles)?this.editForm.muscles:[];this.editForm.muscles=[...i,r],this.newMuscle=""}removeMuscle(r){Array.isArray(this.editForm.muscles)&&(this.editForm.muscles=this.editForm.muscles.filter((i,o)=>o!==r))}dataURLToBlob(r){let i=r.split(","),o=i[0].match(/:(.*?);/),s=o?o[1]:"application/octet-stream",a=atob(i[1]),c=a.length,l=new Uint8Array(c);for(;c--;)l[c]=a.charCodeAt(c);return new Blob([l],{type:s})}};e.\u0275fac=function(i){return new(i||e)(it(Vs),it(Oi),it(Dd))},e.\u0275cmp=Pr({type:e,selectors:[["app-dettaglio-esercizi"]],viewQuery:function(i,o){if(i&1&&RS(Uce,5),i&2){let s;k0(s=R0())&&(o.fileInputRef=s.first)}},standalone:!1,decls:3,vars:2,consts:[["notFound",""],["fileInput",""],["class","dettaglio-esercizi-layout",4,"ngIf","ngIfElse"],[1,"dettaglio-esercizi-layout"],[1,"left-media"],[1,"media-box",3,"click"],["alt","Immagine esercizio",3,"src",4,"ngIf"],["class","media-placeholder",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],[1,"center-form"],[1,"top-actions"],["type","button","class","btn",3,"click",4,"ngIf"],["type","button","class","btn outline",3,"click",4,"ngIf"],["type","button",1,"btn","outline",3,"click"],[1,"form-row"],["type","text",3,"ngModelChange","ngModel","readonly"],["rows","5",3,"ngModelChange","ngModel","readonly"],[1,"form-row","small-tags"],[1,"tags"],["class","tag",4,"ngFor","ngForOf"],["class","tag-add",4,"ngIf"],[3,"ngModelChange","ngModel","disabled"],["value","Facile"],["value","Intermedio"],["value","Difficile"],[1,"right-side"],[1,"notes"],["class","note-card",4,"ngIf"],["class","note-textarea","rows","6","placeholder","Scrivi le tue note...",3,"ngModel","ngModelChange",4,"ngIf"],["alt","Immagine esercizio",3,"src"],[1,"media-placeholder"],[1,"placeholder-icon"],["type","button",1,"btn",3,"click"],[1,"tag"],["type","button","class","tag-remove","aria-label","Rimuovi",3,"click",4,"ngIf"],["type","button","aria-label","Rimuovi",1,"tag-remove",3,"click"],[1,"tag-add"],["type","text","placeholder","Aggiungi muscolo...",3,"ngModelChange","keydown.enter","ngModel"],["type","button",1,"btn","small",3,"click"],[1,"note-card"],["rows","6","placeholder","Scrivi le tue note...",1,"note-textarea",3,"ngModelChange","ngModel"]],template:function(i,o){if(i&1&&ut(0,Xce,50,19,"div",2)(1,Jce,7,0,"ng-template",null,0,ns),i&2){let s=Ci(2);_e("ngIf",o.exercise)("ngIfElse",s)}},dependencies:[uo,Lo,Oc,Lc,rs,wa,_a,Rs],styles:["[_ngcontent-%COMP%]:root{--primary: #2563eb;--panel: #fff;--panel-border: #e7ecf9;--bg: #f5f8fc;--text: #193455}.dettaglio-esercizi-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr 260px;gap:22px;padding:18px 30px;background:var(--bg)}.left-media[_ngcontent-%COMP%]{background:var(--panel);border-radius:12px;padding:14px;border:1px solid var(--panel-border)}.media-box[_ngcontent-%COMP%]{height:220px;display:flex;align-items:center;justify-content:center;background:#fafbfd;border-radius:12px;margin-bottom:10px;overflow:hidden;position:relative;transition:box-shadow .15s,transform .12s}.media-box.clickable[_ngcontent-%COMP%]{cursor:pointer}.media-box.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 2px 10px #2563eb2e;transform:translateY(-1px)}.media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;display:block}.media-placeholder[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:14px;background:#eef3fb;border:1px solid #d7e4f6;position:relative}.placeholder-icon[_ngcontent-%COMP%]{width:100%;height:100%;display:inline-block;background:linear-gradient(#9bb8e0,#9bb8e0) center 40%/36% 14% no-repeat,linear-gradient(#9bb8e0,#9bb8e0) center 60%/60% 28% no-repeat;border-radius:12px}.center-form[_ngcontent-%COMP%]{background:var(--panel);padding:18px;border-radius:12px;border:1px solid var(--panel-border)}.center-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:var(--text)}.top-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-bottom:12px}.form-row[_ngcontent-%COMP%]{margin-bottom:12px;display:flex;flex-direction:column}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#294860;margin-bottom:6px}.form-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:9px 11px;border-radius:8px;border:1px solid #dbe9fb;font-size:.98rem}.tags[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.tag[_ngcontent-%COMP%]{background:#e6f2ff;padding:6px 8px;border-radius:20px;color:#1b355b;font-weight:700;display:inline-flex;align-items:center;gap:6px}.tag-remove[_ngcontent-%COMP%]{background:#fff;border:1px solid #cfe0fb;color:#274162;width:18px;height:18px;border-radius:50%;font-size:12px;line-height:1;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.tag-remove[_ngcontent-%COMP%]:hover{background:var(--primary);color:#fff;border-color:#1f56c7}.tag-add[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:8px}.tag-add[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;border-radius:8px;border:1px solid #dbe9fb}.right-side[_ngcontent-%COMP%]{background:var(--panel);border-radius:12px;padding:14px;border:1px solid var(--panel-border)}.notes[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#294860}.note-card[_ngcontent-%COMP%]{padding:10px;background:#fbfbfd;border-radius:8px;border:1px solid #e7ecf9;color:#193455}.note-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:8px;border:1px solid #dbe9fb}.btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 14px;border-radius:10px;font-size:.95rem;font-weight:700;cursor:pointer;transition:background .16s}.btn[_ngcontent-%COMP%]:hover{background:#194fd6}.btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#1e3a8a;border:1px solid #d7e4f6}.btn.outline[_ngcontent-%COMP%]:hover{background:#e1ebfb}.btn.small[_ngcontent-%COMP%]{padding:6px 12px;font-size:.85rem}@media (max-width: 980px){.dettaglio-esercizi-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]});let n=e;return n})();var ele=[{path:"",component:Nj},{path:"esercizi",component:Lj},{path:"esercizi/:id",component:v9},{path:"anagrafica",component:Fj},{path:"anagrafica/list",component:Vj},{path:"anagrafica/:id",component:g9},{path:"gestione-schede",component:m9},{path:"**",redirectTo:""}],y9=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=yr({type:e}),e.\u0275inj=dr({imports:[Zp.forRoot(ele),Zp]});let n=e;return n})();var NP={production:!1,firebase:{apiKey:"AIzaSyCQgTWYANjjhTl5n3se4MLhYAkGX_um2ag",authDomain:"gymcardsapp.firebaseapp.com",projectId:"gymcardsapp",storageBucket:"gymcardsapp.firebasestorage.app",messagingSenderId:"30373311778",appId:"1:30373311778:web:d599488bdb7feda34f617b",measurementId:"G-3CM91FP0WL"}};var b9="@firebase/installations",OP="0.6.18";var x9=1e4,E9=`w:${OP}`,C9="FIS_v2",tle="https://firebaseinstallations.googleapis.com/v1",nle=3600*1e3,rle="installations",ile="Installations";var ole={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ih=new jh(rle,ile,ole);function I9(n){return n instanceof Eu&&n.code.includes("request-failed")}function S9({projectId:n}){return`${tle}/projects/${n}/installations`}function A9(n){return{token:n.token,requestStatus:2,expiresIn:ale(n.expiresIn),creationTime:Date.now()}}function D9(n,e){return ee(this,null,function*(){let r=(yield e.json()).error;return Ih.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function T9({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function sle(n,{refreshToken:e}){let t=T9(n);return t.append("Authorization",cle(e)),t}function M9(n){return ee(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function ale(n){return Number(n.replace("s","000"))}function cle(n){return`${C9} ${n}`}function lle(r,i){return ee(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=S9(n),s=T9(n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let c={fid:t,authVersion:C9,appId:n.appId,sdkVersion:E9},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield M9(()=>fetch(o,l));if(u.ok){let p=yield u.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:A9(p.authToken)}}else throw yield D9("Create Installation",u)})}function N9(n){return new Promise(e=>{setTimeout(e,n)})}function ule(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var dle=/^[cdef][\w-]{21}$/,RP="";function fle(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=hle(n);return dle.test(t)?t:RP}catch{return RP}}function hle(n){return ule(n).substr(0,22)}function yE(n){return`${n.appName}!${n.appId}`}var P9=new Map;function k9(n,e){let t=yE(n);R9(t,e),ple(t,e)}function R9(n,e){let t=P9.get(n);if(t)for(let r of t)r(e)}function ple(n,e){let t=gle();t&&t.postMessage({key:n,fid:e}),mle()}var Ch=null;function gle(){return!Ch&&"BroadcastChannel"in self&&(Ch=new BroadcastChannel("[Firebase] FID Change"),Ch.onmessage=n=>{R9(n.data.key,n.data.fid)}),Ch}function mle(){P9.size===0&&Ch&&(Ch.close(),Ch=null)}var vle="firebase-installations-database",yle=1,Sh="firebase-installations-store",PP=null;function LP(){return PP||(PP=jk(vle,yle,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Sh)}}})),PP}function vE(n,e){return ee(this,null,function*(){let t=yE(n),i=(yield LP()).transaction(Sh,"readwrite"),o=i.objectStore(Sh),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&k9(n,e.fid),e})}function O9(n){return ee(this,null,function*(){let e=yE(n),r=(yield LP()).transaction(Sh,"readwrite");yield r.objectStore(Sh).delete(e),yield r.done})}function _E(n,e){return ee(this,null,function*(){let t=yE(n),i=(yield LP()).transaction(Sh,"readwrite"),o=i.objectStore(Sh),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&k9(n,a.fid),a})}function FP(n){return ee(this,null,function*(){let e,t=yield _E(n.appConfig,r=>{let i=_le(r),o=wle(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===RP?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function _le(n){let e=n||{fid:fle(),registrationStatus:0};return L9(e)}function wle(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Ih.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=ble(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:xle(n)}:{installationEntry:e}}function ble(n,e){return ee(this,null,function*(){try{let t=yield lle(n,e);return vE(n.appConfig,t)}catch(t){throw I9(t)&&t.customData.serverCode===409?yield O9(n.appConfig):yield vE(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function xle(n){return ee(this,null,function*(){let e=yield _9(n.appConfig);for(;e.registrationStatus===1;)yield N9(100),e=yield _9(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield FP(n);return r||t}return e})}function _9(n){return _E(n,e=>{if(!e)throw Ih.create("installation-not-found");return L9(e)})}function L9(n){return Ele(n)?{fid:n.fid,registrationStatus:0}:n}function Ele(n){return n.registrationStatus===1&&n.registrationTime+x9<Date.now()}function Cle(r,i){return ee(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=Ile(n,t),s=sle(n,t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let c={installation:{sdkVersion:E9,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield M9(()=>fetch(o,l));if(u.ok){let p=yield u.json();return A9(p)}else throw yield D9("Generate Auth Token",u)})}function Ile(n,{fid:e}){return`${S9(n)}/${e}/authTokens:generate`}function VP(n,e=!1){return ee(this,null,function*(){let t,r=yield _E(n.appConfig,o=>{if(!F9(o))throw Ih.create("not-registered");let s=o.authToken;if(!e&&Dle(s))return o;if(s.requestStatus===1)return t=Sle(n,e),o;{if(!navigator.onLine)throw Ih.create("app-offline");let a=Mle(o);return t=Ale(n,a),a}});return t?yield t:r.authToken})}function Sle(n,e){return ee(this,null,function*(){let t=yield w9(n.appConfig);for(;t.authToken.requestStatus===1;)yield N9(100),t=yield w9(n.appConfig);let r=t.authToken;return r.requestStatus===0?VP(n,e):r})}function w9(n){return _E(n,e=>{if(!F9(e))throw Ih.create("not-registered");let t=e.authToken;return Nle(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Ale(n,e){return ee(this,null,function*(){try{let t=yield Cle(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield vE(n.appConfig,r),t}catch(t){if(I9(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield O9(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield vE(n.appConfig,r)}throw t}})}function F9(n){return n!==void 0&&n.registrationStatus===2}function Dle(n){return n.requestStatus===2&&!Tle(n)}function Tle(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+nle}function Mle(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Nle(n){return n.requestStatus===1&&n.requestTime+x9<Date.now()}function Ple(n){return ee(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield FP(e);return r?r.catch(console.error):VP(e).catch(console.error),t.fid})}function kle(n,e=!1){return ee(this,null,function*(){let t=n;return yield Rle(t),(yield VP(t,e)).token})}function Rle(n){return ee(this,null,function*(){let{registrationPromise:e}=yield FP(n);e&&(yield e)})}function Ole(n){if(!n||!n.options)throw kP("App Configuration");if(!n.name)throw kP("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw kP(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function kP(n){return Ih.create("missing-app-config-values",{valueName:n})}var V9="installations",Lle="installations-internal",Fle=n=>{let e=n.getProvider("app").getImmediate(),t=Ole(e),r=Ra(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Vle=n=>{let e=n.getProvider("app").getImmediate(),t=Ra(e,V9).getImmediate();return{getId:()=>Ple(t),getToken:i=>kle(t,i)}};function jle(){Ds(new qi(V9,Fle,"PUBLIC")),Ds(new qi(Lle,Vle,"PRIVATE"))}jle();zn(b9,OP);zn(b9,OP,"esm2017");var wE="analytics",Ble="firebase_id",Ule="origin",zle=60*1e3,qle="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",HP="https://www.googletagmanager.com/gtag/js";var ds=new Uh("@firebase/analytics");var $le={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ks=new jh("analytics","Analytics",$le);function Hle(n){if(!n.startsWith(HP)){let e=Ks.create("invalid-gtag-resource",{gtagURL:n});return ds.warn(e.message),""}return n}function H9(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Wle(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Gle(n,e){let t=Wle("firebase-js-sdk-policy",{createScriptURL:Hle}),r=document.createElement("script"),i=`${HP}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Kle(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function Yle(n,e,t,r,i,o){return ee(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield H9(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){ds.error(a)}n("config",i,o)})}function Zle(n,e,t,r,i){return ee(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield H9(t);for(let c of s){let l=a.find(p=>p.measurementId===c),u=l&&e[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){ds.error(o)}})}function Qle(n,e,t,r){function i(o,...s){return ee(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield Zle(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield Yle(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,l]=s;n("get",a,c,l)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){ds.error(a)}})}return i}function Xle(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=Qle(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function Jle(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(HP)&&t.src.includes(n))return t;return null}var eue=30,tue=1e3,BP=class{constructor(e={},t=tue){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},W9=new BP;function nue(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function rue(n){return ee(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:nue(r)},o=qle.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Ks.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function iue(r){return ee(this,arguments,function*(n,e=W9,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Ks.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Ks.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new UP;return setTimeout(()=>ee(null,null,function*(){c.abort()}),t!==void 0?t:zle),G9({appId:i,apiKey:o,measurementId:s},a,c,e)})}function G9(o,s,a){return ee(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=W9){var c;let{appId:l,measurementId:u}=n;try{yield oue(r,e)}catch(p){if(u)return ds.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:u};throw p}try{let p=yield rue(n);return i.deleteThrottleMetadata(l),p}catch(p){let m=p;if(!sue(m)){if(i.deleteThrottleMetadata(l),u)return ds.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:u};throw p}let g=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?I_(t,i.intervalMillis,eue):I_(t,i.intervalMillis),C={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return i.setThrottleMetadata(l,C),ds.debug(`Calling attemptFetch again in ${g} millis`),G9(n,C,r,i)}})}function oue(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Ks.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sue(n){if(!(n instanceof Eu)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var UP=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var zP;function aue(n,e,t,r,i){return ee(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}var qP;function cue(n){qP=n}function lue(n){zP=n}function uue(){return ee(this,null,function*(){if(Vh())try{yield Fk()}catch(n){return ds.warn(Ks.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return ds.warn(Ks.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function due(n,e,t,r,i,o,s){return ee(this,null,function*(){var a;let c=iue(n);c.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&ds.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>ds.error(g)),e.push(c);let l=uue().then(g=>{if(g)return r.getId()}),[u,p]=yield Promise.all([c,l]);Jle(o)||Gle(o,u.measurementId),qP&&(i("consent","default",qP),cue(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[Ule]="firebase",m.update=!0,p!=null&&(m[Ble]=p),i("config",u.measurementId,m),zP&&(i("set",zP),lue(void 0)),u.measurementId})}var $P=class{constructor(e){this.app=e}_delete(){return delete e_[this.app.options.appId],Promise.resolve()}},e_={},j9=[],B9={},jP="dataLayer",fue="gtag",U9,K9,z9=!1;function hue(){let n=[];if(Lk()&&n.push("This is a browser extension environment."),Vk()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ks.create("invalid-analytics-context",{errorInfo:e});ds.warn(t.message)}}function pue(n,e,t){hue();let r=n.options.appId;if(!r)throw Ks.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ds.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ks.create("no-api-key");if(e_[r]!=null)throw Ks.create("already-exists",{id:r});if(!z9){Kle(jP);let{wrappedGtag:o,gtagCore:s}=Xle(e_,j9,B9,jP,fue);K9=o,U9=s,z9=!0}return e_[r]=due(n,j9,B9,e,U9,jP,t),new $P(n)}function Y9(n=wc()){n=yn(n);let e=Ra(n,wE);return e.isInitialized()?e.getImmediate():Z9(n)}function Z9(n,e={}){let t=Ra(n,wE);if(t.isInitialized()){let i=t.getImmediate();if(Bh(e,t.getOptions()))return i;throw Ks.create("already-initialized")}return t.initialize({options:e})}function Q9(n,e,t,r){n=yn(n),aue(K9,e_[n.app.options.appId],e,t,r).catch(i=>ds.error(i))}var q9="@firebase/analytics",$9="0.10.17";function gue(){Ds(new qi(wE,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return pue(r,i,t)},"PUBLIC")),Ds(new qi("analytics-internal",n,"PRIVATE")),zn(q9,$9),zn(q9,$9,"esm2017");function n(e){try{let t=e.getProvider(wE).getImmediate();return{logEvent:(r,i,o)=>Q9(t,r,i,o)}}catch(t){throw Ks.create("interop-component-reg-failed",{reason:t})}}}gue();var t_=class{constructor(e){return e}},X9="analytics",WP=class{constructor(){return Uc(X9)}};var J9=sr(Y9,!0);var JNe=Math.floor(Math.random()*(2**32-1))-2**31;var GP=new Ke("angularfire2.analytics-instances");function mue(n,e,t){if(!eA(t))return null;let r=Ol(X9,n,e);return r&&new t_(r)}function vue(n){return(e,t,r)=>{if(!eA(r))return null;let i=e.runOutsideAngular(()=>n(t));return new t_(i)}}var yue={provide:WP,deps:[[new Nr,GP]]},_ue={provide:t_,useFactory:mue,deps:[[new Nr,GP],js,ki]};function ez(n,...e){return zn("angularfire",Zr.full,"analytics"),es([_ue,yue,{provide:GP,useFactory:vue(n),multi:!0,deps:[Ut,$n,ki,Qr,Ga,...e]}])}var tz=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=yr({type:e,bootstrap:[vj]}),e.\u0275inj=dr({providers:[Mx,kF(()=>RF(NP.firebase)),_j(()=>wj()),Sj(()=>Tj()),kj(()=>Rj()),ez(()=>J9())],imports:[uA,z0,y9,Zp,PL,GF.initializeApp(NP.firebase),KF,P7,pj]});let n=e;return n})();lA().bootstrapModule(tz).catch(n=>console.error(n));
