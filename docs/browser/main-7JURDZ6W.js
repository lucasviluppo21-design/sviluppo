import{A as Vh,B as Uk,C as Ts,D as ka,E as x_,F as E_,G as zk,H as wc,I as C_,J as Hn,K as jE,L as bi,a as Rk,b as m_,c as Ok,d as Fk,e as Lk,f as OE,g as v_,h as FE,i as Rh,j as y_,k as __,l as w_,m as Lm,n as Vk,o as LE,p as VE,q as Oh,r as jk,s as Bk,t as yu,u as Fh,v as Lh,w as b_,x as wn,y as Ui,z as _c}from"./chunk-FW3GKGTX.js";import{a as Oe,b as Ft,f as RE,g as ee}from"./chunk-WTI2L5DI.js";var BE;function I_(){return BE}function bc(n){let e=BE;return BE=n,e}var $k=Symbol("NotFound");function jh(n){return n===$k||n?.name==="\u0275NotFound"}var to=null,S_=!1,UE=1,Kz=null,no=Symbol("SIGNAL");function pn(n){let e=to;return to=n,e}function M_(){return to}var Bh={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Uh(n){if(S_)throw new Error("");if(to===null)return;to.consumerOnSignalRead(n);let e=to.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=to.recomputing;if(r&&(t=e!==void 0?e.nextProducer:to.producers,t!==void 0&&t.producer===n)){to.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===to&&(!r||Zz(i,to)))return;let o=$h(to),s={producer:n,consumer:to,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};to.producersTail=s,e!==void 0?e.nextProducer=s:to.producers=s,o&&Wk(n,s)}function qk(){UE++}function N_(n){if(!($h(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===UE)){if(!n.producerMustRecompute(n)&&!Bm(n)){T_(n);return}n.producerRecomputeValue(n),T_(n)}}function zE(n){if(n.consumers===void 0)return;let e=S_;S_=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Yz(r)}}finally{S_=e}}function $E(){return to?.consumerAllowSignalWrites!==!1}function Yz(n){n.dirty=!0,zE(n),n.consumerMarkedDirty?.(n)}function T_(n){n.dirty=!1,n.lastCleanEpoch=UE}function zh(n){return n&&Hk(n),pn(n)}function Hk(n){n.producersTail=void 0,n.recomputing=!0}function jm(n,e){pn(e),n&&Gk(n)}function Gk(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if($h(n))do t=qE(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Bm(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(N_(t),r!==t.version))return!0}return!1}function Um(n){if($h(n)){let e=n.producers;for(;e!==void 0;)e=qE(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Wk(n,e){let t=n.consumersTail,r=$h(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Wk(i.producer,i)}function qE(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!$h(e)){let o=e.producers;for(;o!==void 0;)o=qE(o)}return t}function $h(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function P_(n){Kz?.(n)}function Zz(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function k_(n,e){return Object.is(n,e)}function R_(n,e){let t=Object.create(Qz);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(N_(t),Uh(t),t.value===Vm)throw t.error;return t.value};return r[no]=t,P_(t),r}var A_=Symbol("UNSET"),D_=Symbol("COMPUTING"),Vm=Symbol("ERRORED"),Qz=Ft(Oe({},Bh),{value:A_,dirty:!0,error:null,equal:k_,kind:"computed",producerMustRecompute(n){return n.value===A_||n.value===D_},producerRecomputeValue(n){if(n.value===D_)throw new Error("");let e=n.value;n.value=D_;let t=zh(n),r,i=!1;try{r=n.computation(),pn(null),i=e!==A_&&e!==Vm&&r!==Vm&&n.equal(e,r)}catch(o){r=Vm,n.error=o}finally{jm(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Xz(){throw new Error}var Kk=Xz;function Yk(n){Kk(n)}function HE(n){Kk=n}var Jz=null;function GE(n,e){let t=Object.create(O_);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Zk(t);return r[no]=t,P_(t),[r,s=>qh(t,s),s=>WE(t,s)]}function Zk(n){return Uh(n),n.value}function qh(n,e){$E()||Yk(n),n.equal(n.value,e)||(n.value=e,e$(n))}function WE(n,e){$E()||Yk(n),qh(n,e(n.value))}var O_=Ft(Oe({},Bh),{equal:k_,value:void 0,kind:"signal"});function e$(n){n.version++,qk(),zE(n),Jz?.(n)}function Xt(n){return typeof n=="function"}function Hh(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var F_=Hh(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Zd(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Br=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Xt(r))try{r()}catch(o){e=o instanceof F_?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Qk(o)}catch(s){e=e??[],s instanceof F_?e=[...e,...s.errors]:e.push(s)}}if(e)throw new F_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Qk(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Zd(t,e)}remove(e){let{_finalizers:t}=this;t&&Zd(t,e),e instanceof n&&e._removeParent(this)}};Br.EMPTY=(()=>{let n=new Br;return n.closed=!0,n})();var KE=Br.EMPTY;function L_(n){return n instanceof Br||n&&"closed"in n&&Xt(n.remove)&&Xt(n.add)&&Xt(n.unsubscribe)}function Qk(n){Xt(n)?n():n.unsubscribe()}var Ra={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gh={setTimeout(n,e,...t){let{delegate:r}=Gh;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Gh;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function V_(n){Gh.setTimeout(()=>{let{onUnhandledError:e}=Ra;if(e)e(n);else throw n})}function Qd(){}var Xk=YE("C",void 0,void 0);function Jk(n){return YE("E",void 0,n)}function eR(n){return YE("N",n,void 0)}function YE(n,e,t){return{kind:n,value:e,error:t}}var Xd=null;function Wh(n){if(Ra.useDeprecatedSynchronousErrorHandling){let e=!Xd;if(e&&(Xd={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Xd;if(Xd=null,t)throw r}}else n()}function tR(n){Ra.useDeprecatedSynchronousErrorHandling&&Xd&&(Xd.errorThrown=!0,Xd.error=n)}var Jd=class extends Br{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,L_(e)&&e.add(this)):this.destination=r$}static create(e,t,r){return new Oa(e,t,r)}next(e){this.isStopped?QE(eR(e),this):this._next(e)}error(e){this.isStopped?QE(Jk(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?QE(Xk,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},t$=Function.prototype.bind;function ZE(n,e){return t$.call(n,e)}var XE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){j_(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){j_(r)}else j_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){j_(t)}}},Oa=class extends Jd{constructor(e,t,r){super();let i;if(Xt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ra.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ZE(e.next,o),error:e.error&&ZE(e.error,o),complete:e.complete&&ZE(e.complete,o)}):i=e}this.destination=new XE(i)}};function j_(n){Ra.useDeprecatedSynchronousErrorHandling?tR(n):V_(n)}function n$(n){throw n}function QE(n,e){let{onStoppedNotification:t}=Ra;t&&Gh.setTimeout(()=>t(n,e))}var r$={closed:!0,next:Qd,error:n$,complete:Qd};var Kh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function No(n){return n}function B_(...n){return JE(n)}function JE(n){return n.length===0?No:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var kt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=o$(t)?t:new Oa(t,r,i);return Wh(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=nR(r),new r((i,o)=>{let s=new Oa({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Kh](){return this}pipe(...t){return JE(t)(this)}toPromise(t){return t=nR(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function nR(n){var e;return(e=n??Ra.Promise)!==null&&e!==void 0?e:Promise}function i$(n){return n&&Xt(n.next)&&Xt(n.error)&&Xt(n.complete)}function o$(n){return n&&n instanceof Jd||i$(n)&&L_(n)}function eC(n){return Xt(n?.lift)}function cn(n){return e=>{if(eC(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ln(n,e,t,r,i){return new tC(n,e,t,r,i)}var tC=class extends Jd{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Yh(){return cn((n,e)=>{let t=null;n._refCount++;let r=ln(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Zh=class extends kt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,eC(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Br;let t=this.getSubject();e.add(this.source.subscribe(ln(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Br.EMPTY)}return e}refCount(){return Yh()(this)}};var rR=Hh(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var kn=(()=>{class n extends kt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new U_(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new rR}next(t){Wh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Wh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Wh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?KE:(this.currentObservers=null,o.push(t),new Br(()=>{this.currentObservers=null,Zd(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new kt;return t.source=this,t}}return n.create=(e,t)=>new U_(e,t),n})(),U_=class extends kn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:KE}};var zi=class extends kn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zm={now(){return(zm.delegate||Date).now()},delegate:void 0};var $m=class extends kn{constructor(e=1/0,t=1/0,r=zm){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var z_=class extends Br{constructor(e,t){super()}schedule(e,t=0){return this}};var qm={setInterval(n,e,...t){let{delegate:r}=qm;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=qm;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Qh=class extends z_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return qm.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&qm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Zd(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Xh=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Xh.now=zm.now;var Jh=class extends Xh{constructor(e,t=Xh.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ef=new Jh(Qh);var $_=class extends Qh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var q_=class extends Jh{};var nC=new q_($_);var ro=new kt(n=>n.complete());function iR(n){return n&&Xt(n.schedule)}function rC(n){return n[n.length-1]}function H_(n){return Xt(rC(n))?n.pop():void 0}function xc(n){return iR(rC(n))?n.pop():void 0}function oR(n,e){return typeof rC(n)=="number"?n.pop():e}var G_=n=>n&&typeof n.length=="number"&&typeof n!="function";function W_(n){return Xt(n?.then)}function K_(n){return Xt(n[Kh])}function Y_(n){return Symbol.asyncIterator&&Xt(n?.[Symbol.asyncIterator])}function Z_(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function s$(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Q_=s$();function X_(n){return Xt(n?.[Q_])}function J_(n){return Ok(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield m_(t.read());if(i)return yield m_(void 0);yield yield m_(r)}}finally{t.releaseLock()}})}function e1(n){return Xt(n?.getReader)}function vr(n){if(n instanceof kt)return n;if(n!=null){if(K_(n))return a$(n);if(G_(n))return c$(n);if(W_(n))return l$(n);if(Y_(n))return sR(n);if(X_(n))return u$(n);if(e1(n))return d$(n)}throw Z_(n)}function a$(n){return new kt(e=>{let t=n[Kh]();if(Xt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function c$(n){return new kt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function l$(n){return new kt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,V_)})}function u$(n){return new kt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function sR(n){return new kt(e=>{f$(n,e).catch(t=>e.error(t))})}function d$(n){return sR(J_(n))}function f$(n,e){var t,r,i,o;return Rk(this,void 0,void 0,function*(){try{for(t=Fk(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Jo(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function io(n,e=0){return cn((t,r)=>{t.subscribe(ln(r,i=>Jo(r,n,()=>r.next(i),e),()=>Jo(r,n,()=>r.complete(),e),i=>Jo(r,n,()=>r.error(i),e)))})}function sa(n,e=0){return cn((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function aR(n,e){return vr(n).pipe(sa(e),io(e))}function cR(n,e){return vr(n).pipe(sa(e),io(e))}function lR(n,e){return new kt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function uR(n,e){return new kt(t=>{let r;return Jo(t,e,()=>{r=n[Q_](),Jo(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Xt(r?.return)&&r.return()})}function t1(n,e){if(!n)throw new Error("Iterable cannot be null");return new kt(t=>{Jo(t,e,()=>{let r=n[Symbol.asyncIterator]();Jo(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function dR(n,e){return t1(J_(n),e)}function fR(n,e){if(n!=null){if(K_(n))return aR(n,e);if(G_(n))return lR(n,e);if(W_(n))return cR(n,e);if(Y_(n))return t1(n,e);if(X_(n))return uR(n,e);if(e1(n))return dR(n,e)}throw Z_(n)}function gn(n,e){return e?fR(n,e):vr(n)}function dt(...n){let e=xc(n);return gn(n,e)}function ep(n,e){let t=Xt(n)?n:()=>n,r=i=>i.error(t());return new kt(e?i=>e.schedule(r,0,i):r)}function iC(n){return!!n&&(n instanceof kt||Xt(n.lift)&&Xt(n.subscribe))}var Fa=Hh(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function oC(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Oa({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Fa)}});n.subscribe(o)})}function rt(n,e){return cn((t,r)=>{let i=0;t.subscribe(ln(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:h$}=Array;function p$(n,e){return h$(e)?n(...e):n(e)}function n1(n){return rt(e=>p$(n,e))}var{isArray:g$}=Array,{getPrototypeOf:m$,prototype:v$,keys:y$}=Object;function r1(n){if(n.length===1){let e=n[0];if(g$(e))return{args:e,keys:null};if(_$(e)){let t=y$(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function _$(n){return n&&typeof n=="object"&&m$(n)===v$}function i1(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Hm(...n){let e=xc(n),t=H_(n),{args:r,keys:i}=r1(n);if(r.length===0)return gn([],e);let o=new kt(w$(r,e,i?s=>i1(i,s):No));return t?o.pipe(n1(t)):o}function w$(n,e,t=No){return r=>{hR(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)hR(e,()=>{let l=gn(n[c],e),u=!1;l.subscribe(ln(r,p=>{o[c]=p,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function hR(n,e,t){n?Jo(t,n,e):e()}function pR(n,e,t,r,i,o,s,a){let c=[],l=0,u=0,p=!1,v=()=>{p&&!c.length&&!l&&e.complete()},g=C=>l<r?E(C):c.push(C),E=C=>{o&&e.next(C),l++;let M=!1;vr(t(C,u++)).subscribe(ln(e,N=>{i?.(N),o?g(N):e.next(N)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let N=c.shift();s?Jo(e,s,()=>E(N)):E(N)}v()}catch(N){e.error(N)}}))};return n.subscribe(ln(e,g,()=>{p=!0,v()})),()=>{a?.()}}function Kr(n,e,t=1/0){return Xt(e)?Kr((r,i)=>rt((o,s)=>e(r,o,i,s))(vr(n(r,i))),t):(typeof e=="number"&&(t=e),cn((r,i)=>pR(r,i,n,t)))}function Ec(n=1/0){return Kr(No,n)}function gR(){return Ec(1)}function tp(...n){return gR()(gn(n,xc(n)))}function Gm(n){return new kt(e=>{vr(n()).subscribe(e)})}function sC(...n){let e=H_(n),{args:t,keys:r}=r1(n),i=new kt(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let p=!1;vr(t[u]).subscribe(ln(o,v=>{p||(p=!0,l--),a[u]=v},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?i1(r,a):a),o.complete())}))}});return e?i.pipe(n1(e)):i}function aC(...n){let e=xc(n),t=oR(n,1/0),r=n;return r.length?r.length===1?vr(r[0]):Ec(t)(gn(r,e)):ro}var El=new kt(Qd);function Pr(n,e){return cn((t,r)=>{let i=0;t.subscribe(ln(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Cl(n){return cn((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ln(t,void 0,void 0,s=>{o=vr(n(s,Cl(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function mR(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(ln(s,u=>{let p=l++;c=a?n(c,u,p):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function _u(n,e){return Xt(e)?Kr(n,e,1):Kr(n,1)}function cC(n,e=ef){return cn((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+n,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}t.subscribe(ln(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function wu(n){return cn((e,t)=>{let r=!1;e.subscribe(ln(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Po(n){return n<=0?()=>ro:cn((e,t)=>{let r=0;e.subscribe(ln(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function o1(n,e=No){return n=n??b$,cn((t,r)=>{let i,o=!0;t.subscribe(ln(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function b$(n,e){return n===e}function s1(n=x$){return cn((e,t)=>{let r=!1;e.subscribe(ln(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function x$(){return new Fa}function Wm(n){return cn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function La(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Pr((i,o)=>n(i,o,r)):No,Po(1),t?wu(e):s1(()=>new Fa))}function np(n){return n<=0?()=>ro:cn((e,t)=>{let r=[];e.subscribe(ln(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function lC(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Pr((i,o)=>n(i,o,r)):No,np(1),t?wu(e):s1(()=>new Fa))}function rp(){return cn((n,e)=>{let t,r=!1;n.subscribe(ln(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function bu(n,e){return cn(mR(n,e,arguments.length>=2,!0))}function vR(n={}){let{connector:e=()=>new kn,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,u=!1,p=!1,v=()=>{a?.unsubscribe(),a=void 0},g=()=>{v(),s=c=void 0,u=p=!1},E=()=>{let C=s;g(),C?.unsubscribe()};return cn((C,M)=>{l++,!p&&!u&&v();let N=c=c??e();M.add(()=>{l--,l===0&&!p&&!u&&(a=uC(E,i))}),N.subscribe(M),!s&&l>0&&(s=new Oa({next:Q=>N.next(Q),error:Q=>{p=!0,v(),a=uC(g,t,Q),N.error(Q)},complete:()=>{u=!0,v(),a=uC(g,r),N.complete()}}),vr(C).subscribe(s))})(o)}}function uC(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Oa({next:()=>{r.unsubscribe(),n()}});return vr(e(...t)).subscribe(r)}function a1(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,vR({connector:()=>new $m(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function xu(...n){let e=xc(n);return cn((t,r)=>{(e?tp(n,t,e):tp(n,t)).subscribe(r)})}function Mn(n,e){return cn((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ln(r,c=>{i?.unsubscribe();let l=0,u=o++;vr(n(c,u)).subscribe(i=ln(r,p=>r.next(e?e(c,p,u,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function c1(n,e){return Xt(e)?Mn(()=>n,e):Mn(()=>n)}function l1(n){return cn((e,t)=>{vr(n).subscribe(ln(t,()=>t.complete(),Qd)),!t.closed&&e.subscribe(t)})}function xi(n,e,t){let r=Xt(n)||e||t?{next:n,error:e,complete:t}:n;return r?cn((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ln(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):No}function yR(n){let e=pn(null);try{return n()}finally{pn(e)}}var Eu=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Qm=new Eu("20.3.15");var h1="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",tt=class extends Error{code;constructor(e,t){super(Cc(e,t)),this.code=e}};function E$(n){return`NG0${Math.abs(n)}`}function Cc(n,e){return`${E$(n)}${e?": "+e:""}`}var Ns=globalThis;function jn(n){for(let e in n)if(n[e]===jn)return e;throw Error("")}function bR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Sl(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Sl).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function EC(n,e){return n?e?`${n} ${e}`:n:e||""}var C$=jn({__forward_ref__:jn});function es(n){return n.__forward_ref__=es,n.toString=function(){return Sl(this())},n}function $i(n){return CC(n)?n():n}function CC(n){return typeof n=="function"&&n.hasOwnProperty(C$)&&n.__forward_ref__===es}function Ze(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function er(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xm(n){return I$(n,p1)}function IC(n){return Xm(n)!==null}function I$(n,e){return n.hasOwnProperty(e)&&n[e]||null}function S$(n){let e=n?.[p1]??null;return e||null}function fC(n){return n&&n.hasOwnProperty(d1)?n[d1]:null}var p1=jn({\u0275prov:jn}),d1=jn({\u0275inj:jn}),We=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Ze({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function SC(n){return n&&!!n.\u0275providers}var AC=jn({\u0275cmp:jn}),DC=jn({\u0275dir:jn}),TC=jn({\u0275pipe:jn}),MC=jn({\u0275mod:jn}),Ym=jn({\u0275fac:jn}),sf=jn({__NG_ELEMENT_ID__:jn}),_R=jn({__NG_ENV_ID__:jn});function Su(n){return typeof n=="string"?n:n==null?"":String(n)}function xR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Su(n)}var ER=jn({ngErrorCode:jn}),A$=jn({ngErrorMessage:jn}),D$=jn({ngTokenPath:jn});function NC(n,e){return CR("",-200,e)}function g1(n,e){throw new tt(-201,!1)}function CR(n,e,t){let r=new tt(e,n);return r[ER]=e,r[A$]=n,t&&(r[D$]=t),r}function T$(n){return n[ER]}var hC;function IR(){return hC}function ko(n){let e=hC;return hC=n,e}function PC(n,e,t){let r=Xm(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;g1(n,"Injector")}var M$={},tf=M$,pC="__NG_DI_FLAG__",gC=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=nf(t)||0;try{return this.injector.get(e,r&8?null:tf,r)}catch(i){if(jh(i))return i;throw i}}};function N$(n,e=0){let t=I_();if(t===void 0)throw new tt(-203,!1);if(t===null)return PC(n,void 0,e);{let r=P$(e),i=t.retrieve(n,r);if(jh(i)){if(r.optional)return null;throw i}return i}}function Be(n,e=0){return(IR()||N$)($i(n),e)}function Ae(n,e){return Be(n,nf(e))}function nf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function P$(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function mC(n){let e=[];for(let t=0;t<n.length;t++){let r=$i(n[t]);if(Array.isArray(r)){if(r.length===0)throw new tt(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=k$(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Be(i,o))}else e.push(Be(r))}return e}function SR(n,e){return n[pC]=e,n.prototype[pC]=e,n}function k$(n){return n[pC]}function Cu(n,e){let t=n.hasOwnProperty(Ym);return t?n[Ym]:null}function AR(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function DR(n){return n.flat(Number.POSITIVE_INFINITY)}function m1(n,e){n.forEach(t=>Array.isArray(t)?m1(t,e):e(t))}function kC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Jm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function TR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function MR(n,e,t){let r=op(n,e);return r>=0?n[r|1]=t:(r=~r,TR(n,r,e,t)),r}function v1(n,e){let t=op(n,e);if(t>=0)return n[t|1]}function op(n,e){return R$(n,e,1)}function R$(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Au={},Ms=[],Du=new We(""),RC=new We("",-1),OC=new We(""),Zm=class{get(e,t=tf){if(t===tf){let i=CR("",-201);throw i.name="\u0275NotFound",i}return t}};function FC(n){return n[MC]||null}function Dl(n){return n[AC]||null}function LC(n){return n[DC]||null}function NR(n){return n[TC]||null}function oo(n){return{\u0275providers:n}}function PR(...n){return{\u0275providers:VC(!0,n),\u0275fromNgModule:!0}}function VC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return m1(e,s=>{let a=s;f1(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&kR(i,o),t}function kR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];jC(i,o=>{e(o,r)})}}function f1(n,e,t,r){if(n=$i(n),!n)return!1;let i=null,o=fC(n),s=!o&&Dl(n);if(!o&&!s){let c=n.ngModule;if(o=fC(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)f1(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{m1(o.imports,u=>{f1(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&kR(l,e)}if(!a){let l=Cu(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ms},i),e({provide:OC,useValue:i,multi:!0},i),e({provide:Du,useValue:()=>Be(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;jC(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function jC(n,e){for(let t of n)SC(t)&&(t=t.\u0275providers),Array.isArray(t)?jC(t,e):e(t)}var O$=jn({provide:String,useValue:jn});function RR(n){return n!==null&&typeof n=="object"&&O$ in n}function F$(n){return!!(n&&n.useExisting)}function L$(n){return!!(n&&n.useFactory)}function rf(n){return typeof n=="function"}function OR(n){return!!n.useClass}var e0=new We(""),u1={},wR={},dC;function t0(){return dC===void 0&&(dC=new Zm),dC}var Gn=class{},of=class extends Gn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,yC(e,s=>this.processProvider(s)),this.records.set(RC,ip(void 0,this)),i.has("environment")&&this.records.set(Gn,ip(void 0,this));let o=this.records.get(e0);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(OC,Ms,{self:!0}))}retrieve(e,t){let r=nf(t)||0;try{return this.get(e,tf,r)}catch(i){if(jh(i))return i;throw i}}destroy(){Km(this),this._destroyed=!0;let e=pn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pn(e)}}onDestroy(e){return Km(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Km(this);let t=bc(this),r=ko(void 0),i;try{return e()}finally{bc(t),ko(r)}}get(e,t=tf,r){if(Km(this),e.hasOwnProperty(_R))return e[_R](this);let i=nf(r),o,s=bc(this),a=ko(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=z$(e)&&Xm(e);u&&this.injectableDefInScope(u)?l=ip(vC(e),u1):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?t0():this.parent;return t=i&8&&t===tf?null:t,c.get(e,t)}catch(c){let l=T$(c);throw l===-200||l===-201?new tt(l,null):c}finally{ko(a),bc(s)}}resolveInjectorInitializers(){let e=pn(null),t=bc(this),r=ko(void 0),i;try{let o=this.get(Du,Ms,{self:!0});for(let s of o)s()}finally{bc(t),ko(r),pn(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Sl(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=$i(e);let t=rf(e)?e:$i(e&&e.provide),r=j$(e);if(!rf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ip(void 0,u1,!0),i.factory=()=>mC(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=pn(null);try{if(t.value===wR)throw NC(Sl(e));return t.value===u1&&(t.value=wR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&U$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{pn(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=$i(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function vC(n){let e=Xm(n),t=e!==null?e.factory:Cu(n);if(t!==null)return t;if(n instanceof We)throw new tt(204,!1);if(n instanceof Function)return V$(n);throw new tt(204,!1)}function V$(n){if(n.length>0)throw new tt(204,!1);let t=S$(n);return t!==null?()=>t.factory(n):()=>new n}function j$(n){if(RR(n))return ip(void 0,n.useValue);{let e=BC(n);return ip(e,u1)}}function BC(n,e,t){let r;if(rf(n)){let i=$i(n);return Cu(i)||vC(i)}else if(RR(n))r=()=>$i(n.useValue);else if(L$(n))r=()=>n.useFactory(...mC(n.deps||[]));else if(F$(n))r=(i,o)=>Be($i(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=$i(n&&(n.useClass||n.provide));if(B$(n))r=()=>new i(...mC(n.deps));else return Cu(i)||vC(i)}return r}function Km(n){if(n.destroyed)throw new tt(205,!1)}function ip(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function B$(n){return!!n.deps}function U$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function z$(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function yC(n,e){for(let t of n)Array.isArray(t)?yC(t,e):t&&SC(t)?yC(t.\u0275providers,e):e(t)}function ci(n,e){let t;n instanceof of?(Km(n),t=n):t=new gC(n);let r,i=bc(t),o=ko(void 0);try{return e()}finally{bc(i),ko(o)}}function UC(){return IR()!==void 0||I_()!=null}var ja=0,Gt=1,Jt=2,Mi=3,aa=4,ca=5,n0=6,sp=7,so=8,Tu=9,Ic=10,br=11,ap=12,zC=13,af=14,la=15,Mu=16,cf=17,Sc=18,r0=19,$C=20,Il=21,y1=22,i0=23,Ps=24,lf=25,o0=26,qi=27,FR=1;var Nu=7,s0=8,uf=9,Ro=10;function Ac(n){return Array.isArray(n)&&typeof n[FR]=="object"}function Ba(n){return Array.isArray(n)&&n[FR]===!0}function qC(n){return(n.flags&4)!==0}function Tl(n){return n.componentOffset>-1}function cp(n){return(n.flags&1)===1}function Dc(n){return!!n.template}function lp(n){return(n[Jt]&512)!==0}function df(n){return(n[Jt]&256)===256}var HC="svg",LR="math";function ua(n){for(;Array.isArray(n);)n=n[ja];return n}function GC(n,e){return ua(e[n])}function da(n,e){return ua(e[n.index])}function _1(n,e){return n.data[e]}function WC(n,e){return n[e]}function KC(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function fa(n,e){let t=e[n];return Ac(t)?t:t[ja]}function VR(n){return(n[Jt]&4)===4}function w1(n){return(n[Jt]&128)===128}function jR(n){return Ba(n[Mi])}function a0(n,e){return e==null?null:n[e]}function YC(n){n[cf]=0}function ZC(n){n[Jt]&1024||(n[Jt]|=1024,w1(n)&&up(n))}function BR(n,e){for(;n>0;)e=e[af],n--;return e}function c0(n){return!!(n[Jt]&9216||n[Ps]?.dirty)}function b1(n){n[Ic].changeDetectionScheduler?.notify(8),n[Jt]&64&&(n[Jt]|=1024),c0(n)&&up(n)}function up(n){n[Ic].changeDetectionScheduler?.notify(0);let e=Iu(n);for(;e!==null&&!(e[Jt]&8192||(e[Jt]|=8192,!w1(e)));)e=Iu(e)}function QC(n,e){if(df(n))throw new tt(911,!1);n[Il]===null&&(n[Il]=[]),n[Il].push(e)}function UR(n,e){if(n[Il]===null)return;let t=n[Il].indexOf(e);t!==-1&&n[Il].splice(t,1)}function Iu(n){let e=n[Mi];return Ba(e)?e[Mi]:e}function XC(n){return n[sp]??=[]}function JC(n){return n.cleanup??=[]}function zR(n,e,t,r){let i=XC(e);i.push(t),n.firstCreatePass&&JC(n).push(r,i.length-1)}var un={lFrame:oO(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _C=!1;function $R(){return un.lFrame.elementDepthCount}function qR(){un.lFrame.elementDepthCount++}function HR(){un.lFrame.elementDepthCount--}function x1(){return un.bindingsEnabled}function GR(){return un.skipHydrationRootTNode!==null}function WR(n){return un.skipHydrationRootTNode===n}function KR(){un.skipHydrationRootTNode=null}function mn(){return un.lFrame.lView}function Ei(){return un.lFrame.tView}function Ee(n){return un.lFrame.contextLView=n,n[so]}function Ce(n){return un.lFrame.contextLView=null,n}function Ni(){let n=eI();for(;n!==null&&n.type===64;)n=n.parent;return n}function eI(){return un.lFrame.currentTNode}function YR(){let n=un.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function dp(n,e){let t=un.lFrame;t.currentTNode=n,t.isParent=e}function tI(){return un.lFrame.isParent}function ZR(){un.lFrame.isParent=!1}function QR(){return un.lFrame.contextLView}function nI(){return _C}function rI(n){let e=_C;return _C=n,e}function E1(){let n=un.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function XR(){return un.lFrame.bindingIndex}function JR(n){return un.lFrame.bindingIndex=n}function ff(){return un.lFrame.bindingIndex++}function iI(n){let e=un.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function eO(){return un.lFrame.inI18n}function tO(n,e){let t=un.lFrame;t.bindingIndex=t.bindingRootIndex=n,C1(e)}function nO(){return un.lFrame.currentDirectiveIndex}function C1(n){un.lFrame.currentDirectiveIndex=n}function rO(n){let e=un.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function oI(){return un.lFrame.currentQueryIndex}function I1(n){un.lFrame.currentQueryIndex=n}function $$(n){let e=n[Gt];return e.type===2?e.declTNode:e.type===1?n[ca]:null}function sI(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=$$(o),i===null||(o=o[af],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=un.lFrame=iO();return r.currentTNode=e,r.lView=n,!0}function S1(n){let e=iO(),t=n[Gt];un.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function iO(){let n=un.lFrame,e=n===null?null:n.child;return e===null?oO(n):e}function oO(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function sO(){let n=un.lFrame;return un.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var aI=sO;function A1(){let n=sO();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function aO(n){return(un.lFrame.contextLView=BR(n,un.lFrame.contextLView))[so]}function Pu(){return un.lFrame.selectedIndex}function ku(n){un.lFrame.selectedIndex=n}function l0(){let n=un.lFrame;return _1(n.tView,n.selectedIndex)}function fr(){un.lFrame.currentNamespace=HC}function Oo(){q$()}function q$(){un.lFrame.currentNamespace=null}function cO(){return un.lFrame.currentNamespace}var lO=!0;function D1(){return lO}function u0(n){lO=n}function wC(n,e=null,t=null,r){let i=cI(n,e,t,r);return i.resolveInjectorInitializers(),i}function cI(n,e=null,t=null,r,i=new Set){let o=[t||Ms,PR(n)];return r=r||(typeof n=="object"?void 0:Sl(n)),new of(o,e||t0(),r||null,i)}var Bn=class n{static THROW_IF_NOT_FOUND=tf;static NULL=new Zm;static create(e,t){if(Array.isArray(e))return wC({name:""},t,e,"");{let r=e.name??"";return wC({name:r},e.parent,e.providers,r)}}static \u0275prov=Ze({token:n,providedIn:"any",factory:()=>Be(RC)});static __NG_ELEMENT_ID__=-1},li=new We(""),ha=(()=>{class n{static __NG_ELEMENT_ID__=H$;static __NG_ENV_ID__=t=>t}return n})(),bC=class extends ha{_lView;constructor(e){super(),this._lView=e}get destroyed(){return df(this._lView)}onDestroy(e){let t=this._lView;return QC(t,e),()=>UR(t,e)}};function H$(){return new bC(mn())}var Va=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ts=new We("",{providedIn:"root",factory:()=>{let n=Ae(Gn),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Va),e.handleError(t))}}}),uO={provide:Du,useValue:()=>void Ae(Va),multi:!0};function lI(n){return typeof n=="function"&&n[no]!==void 0}function pa(n,e){let[t,r,i]=GE(n,e?.equal),o=t,s=o[no];return o.set=r,o.update=i,o.asReadonly=dO.bind(o),o}function dO(){let n=this[no];if(n.readonlyFn===void 0){let e=()=>this();e[no]=n,n.readonlyFn=e}return n.readonlyFn}function uI(n){return lI(n)&&typeof n.set=="function"}var T1=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=G$}return n})();function G$(){return new T1(mn(),Ni())}var Al=class{},M1=new We("",{providedIn:"root",factory:()=>!1});var dI=new We(""),fI=new We(""),Tc=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new zi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new kt(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new n})}return n})(),fp=(()=>{class n{internalPendingTasks=Ae(Tc);scheduler=Ae(Al);errorHandler=Ae(ts);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new n})}return n})();function d0(...n){}var hI=(()=>{class n{static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new xC})}return n})(),xC=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function yp(n){return{toString:n}.toString()}var N1="__parameters__";function X$(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function J$(n,e,t){return yp(()=>{let r=X$(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let p=c.hasOwnProperty(N1)?c[N1]:Object.defineProperty(c,N1,{value:[]})[N1];for(;p.length<=u;)p.push(null);return(p[u]=p[u]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var kr=SR(J$("Optional"),8);function $O(n){let e=Ns.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function eq(n){return typeof n=="function"}var j1=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function qO(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Pc=(()=>{let n=()=>HO;return n.ngInherit=!0,n})();function HO(n){return n.type.prototype.ngOnChanges&&(n.setInput=nq),tq}function tq(){let n=WO(this),e=n?.current;if(e){let t=n.previous;if(t===Au)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function nq(n,e,t,r,i){let o=this.declaredInputs[r],s=WO(n)||rq(n,{previous:Au,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new j1(l&&l.currentValue,t,c===Au),qO(n,e,i,t)}var GO="__ngSimpleChanges__";function WO(n){return n[GO]||null}function rq(n,e){return n[GO]=e}var fO=[];var sr=function(n,e=null,t){for(let r=0;r<fO.length;r++){let i=fO[r];i(n,e,t)}};function iq(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=HO(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function KO(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function O1(n,e,t){YO(n,e,3,t)}function F1(n,e,t,r){(n[Jt]&3)===t&&YO(n,e,t,r)}function pI(n,e){let t=n[Jt];(t&3)===e&&(t&=16383,t+=1,n[Jt]=t)}function YO(n,e,t,r){let i=r!==void 0?n[cf]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[cf]+=65536),(a<o||o==-1)&&(oq(n,t,e,c),n[cf]=(n[cf]&4294901760)+c+2),c++}function hO(n,e){sr(4,n,e);let t=pn(null);try{e.call(n)}finally{pn(t),sr(5,n,e)}}function oq(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Jt]>>14<n[cf]>>16&&(n[Jt]&3)===e&&(n[Jt]+=16384,hO(a,o)):hO(a,o)}var pp=-1,pf=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function sq(n){return(n.flags&8)!==0}function aq(n){return(n.flags&16)!==0}function cq(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];lq(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function ZO(n){return n===3||n===4||n===6}function lq(n){return n.charCodeAt(0)===64}function p0(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?pO(n,t,i,null,e[++r]):pO(n,t,i,null,null))}}return n}function pO(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function QO(n){return n!==pp}function B1(n){return n&32767}function uq(n){return n>>16}function U1(n,e){let t=uq(n),r=e;for(;t>0;)r=r[af],t--;return r}var CI=!0;function z1(n){let e=CI;return CI=n,e}var dq=256,XO=dq-1,JO=5,fq=0,Mc={};function hq(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(sf)&&(r=t[sf]),r==null&&(r=t[sf]=fq++);let i=r&XO,o=1<<i;e.data[n+(i>>JO)]|=o}function $1(n,e){let t=e3(n,e);if(t!==-1)return t;let r=e[Gt];r.firstCreatePass&&(n.injectorIndex=e.length,gI(r.data,n),gI(e,null),gI(r.blueprint,null));let i=KI(n,e),o=n.injectorIndex;if(QO(i)){let s=B1(i),a=U1(i,e),c=a[Gt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function gI(n,e){n.push(0,0,0,0,0,0,0,0,e)}function e3(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function KI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=o3(i),r===null)return pp;if(t++,i=i[af],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return pp}function II(n,e,t){hq(n,e,t)}function pq(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(ZO(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function t3(n,e,t){if(t&8||n!==void 0)return n;g1(e,"NodeInjector")}function n3(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Tu],o=ko(void 0);try{return i?i.get(e,r,t&8):PC(e,r,t&8)}finally{ko(o)}}return t3(r,e,t)}function r3(n,e,t,r=0,i){if(n!==null){if(e[Jt]&2048&&!(r&2)){let s=yq(n,e,t,r,Mc);if(s!==Mc)return s}let o=i3(n,e,t,r,Mc);if(o!==Mc)return o}return n3(e,t,r,i)}function i3(n,e,t,r,i){let o=mq(t);if(typeof o=="function"){if(!sI(e,n,r))return r&1?t3(i,t,r):n3(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))g1(t);else return s}finally{aI()}}else if(typeof o=="number"){let s=null,a=e3(n,e),c=pp,l=r&1?e[la][ca]:null;for((a===-1||r&4)&&(c=a===-1?KI(n,e):e[a+8],c===pp||!mO(r,!1)?a=-1:(s=e[Gt],a=B1(c),e=U1(c,e)));a!==-1;){let u=e[Gt];if(gO(o,a,u.data)){let p=gq(a,e,t,s,r,l);if(p!==Mc)return p}c=e[a+8],c!==pp&&mO(r,e[Gt].data[a+8]===l)&&gO(o,a,e)?(s=u,a=B1(c),e=U1(c,e)):a=-1}}return i}function gq(n,e,t,r,i,o){let s=e[Gt],a=s.data[n+8],c=r==null?Tl(a)&&CI:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=L1(a,s,t,c,l);return u!==null?g0(e,s,u,a,i):Mc}function L1(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,p=r?a:a+u,v=i?a+u:l;for(let g=p;g<v;g++){let E=s[g];if(g<c&&t===E||g>=c&&E.type===t)return g}if(i){let g=s[c];if(g&&Dc(g)&&g.type===t)return c}return null}function g0(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof pf){let a=o;if(a.resolving){let g=xR(s[t]);throw NC(g)}let c=z1(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,p=a.injectImpl?ko(a.injectImpl):null,v=sI(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&iq(t,s[t],e)}finally{p!==null&&ko(p),z1(c),a.resolving=!1,aI()}}return o}function mq(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(sf)?n[sf]:void 0;return typeof e=="number"?e>=0?e&XO:vq:e}function gO(n,e,t){let r=1<<n;return!!(t[e+(n>>JO)]&r)}function mO(n,e){return!(n&2)&&!(n&1&&e)}var hf=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return r3(this._tNode,this._lView,e,nf(r),t)}};function vq(){return new hf(Ni(),mn())}function ga(n){return yp(()=>{let e=n.prototype.constructor,t=e[Ym]||SI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ym]||SI(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function SI(n){return CC(n)?()=>{let e=SI($i(n));return e&&e()}:Cu(n)}function yq(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Jt]&2048&&!lp(s);){let a=i3(o,s,t,r|2,Mc);if(a!==Mc)return a;let c=o.parent;if(!c){let l=s[$C];if(l){let u=l.get(t,Mc,r);if(u!==Mc)return u}c=o3(s),s=s[af]}o=c}return i}function o3(n){let e=n[Gt],t=e.type;return t===2?e.declTNode:t===1?n[ca]:null}function b0(n){return pq(Ni(),n)}function _q(){return _p(Ni(),mn())}function _p(n,e){return new ao(da(n,e))}var ao=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=_q}return n})();function wq(n){return n instanceof ao?n.nativeElement:n}function bq(){return this._results[Symbol.iterator]()}var q1=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new kn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=DR(e);(this._changesDetected=!AR(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=bq};function s3(n){return(n.flags&128)===128}var YI=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(YI||{}),a3=new Map,xq=0;function Eq(){return xq++}function Cq(n){a3.set(n[r0],n)}function AI(n){a3.delete(n[r0])}var vO="__ngContext__";function gp(n,e){Ac(e)?(n[vO]=e[r0],Cq(e)):n[vO]=e}function c3(n){return u3(n[ap])}function l3(n){return u3(n[aa])}function u3(n){for(;n!==null&&!Ba(n);)n=n[aa];return n}var DI;function ZI(n){DI=n}function d3(){if(DI!==void 0)return DI;if(typeof document<"u")return document;throw new tt(210,!1)}var nw=new We("",{providedIn:"root",factory:()=>Iq}),Iq="ng",rw=new We(""),Pi=new We("",{providedIn:"platform",factory:()=>"unknown"});var iw=new We("",{providedIn:"root",factory:()=>d3().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Sq="h",Aq="b";var f3=!1,h3=new We("",{providedIn:"root",factory:()=>f3});var QI=new We("");var Dq=(n,e,t,r)=>{};function Tq(n,e,t,r){Dq(n,e,t,r)}function XI(n){return(n.flags&32)===32}var Mq=()=>null;function p3(n,e,t=!1){return Mq(n,e,t)}function g3(n,e){let t=n.contentQueries;if(t!==null){let r=pn(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];I1(o),a.contentQueries(2,e[s],s)}}}finally{pn(r)}}}function TI(n,e,t){I1(0);let r=pn(null);try{e(n,t)}finally{pn(r)}}function JI(n,e,t){if(qC(e)){let r=pn(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{pn(r)}}}var Ml=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Ml||{});var P1;function Nq(){if(P1===void 0&&(P1=null,Ns.trustedTypes))try{P1=Ns.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return P1}function yO(n){return Nq()?.createScriptURL(n)||n}var H1=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${h1})`}};function x0(n){return n instanceof H1?n.changingThisBreaksApplicationSecurity:n}function eS(n,e){let t=m3(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${h1})`)}return t===e}function m3(n){return n instanceof H1&&n.getTypeName()||null}var Pq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function v3(n){return n=String(n),n.match(Pq)?n:"unsafe:"+n}var kq=/^>|^->|<!--|-->|--!>|<!-$/g,Rq=/(<|>)/g,Oq="\u200B$1\u200B";function Fq(n){return n.replace(kq,e=>e.replace(Rq,Oq))}function Lq(n,e){return n.createText(e)}function Vq(n,e,t){n.setValue(e,t)}function jq(n,e){return n.createComment(Fq(e))}function y3(n,e,t){return n.createElement(e,t)}function G1(n,e,t,r,i){n.insertBefore(e,t,r,i)}function _3(n,e,t){n.appendChild(e,t)}function _O(n,e,t,r,i){r!==null?G1(n,e,t,r,i):_3(n,e,t)}function Bq(n,e,t,r){n.removeChild(null,e,t,r)}function Uq(n,e,t){n.setAttribute(e,"style",t)}function zq(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function w3(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&cq(n,e,r),i!==null&&zq(n,e,i),o!==null&&Uq(n,e,o)}var ow=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(ow||{});function xr(n){let e=x3();return e?e.sanitize(ow.URL,n)||"":eS(n,"URL")?x0(n):v3(Su(n))}function b3(n){let e=x3();if(e)return yO(e.sanitize(ow.RESOURCE_URL,n)||"");if(eS(n,"ResourceURL"))return yO(x0(n));throw new tt(904,!1)}function $q(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?b3:xr}function tS(n,e,t){return $q(e,t)(n)}function x3(){let n=mn();return n&&n[Ic].sanitizer}function E3(n){return n instanceof Function?n():n}function qq(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var C3="ng-template";function Hq(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&qq(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(nS(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function nS(n){return n.type===4&&n.value!==C3}function Gq(n,e,t){let r=n.type===4&&!t?C3:n.value;return e===r}function Wq(n,e,t){let r=4,i=n.attrs,o=i!==null?Zq(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ua(r)&&!Ua(c))return!1;if(s&&Ua(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Gq(n,c,t)||c===""&&e.length===1){if(Ua(r))return!1;s=!0}}else if(r&8){if(i===null||!Hq(n,i,c,t)){if(Ua(r))return!1;s=!0}}else{let l=e[++a],u=Kq(c,i,nS(n),t);if(u===-1){if(Ua(r))return!1;s=!0;continue}if(l!==""){let p;if(u>o?p="":p=i[u+1].toLowerCase(),r&2&&l!==p){if(Ua(r))return!1;s=!0}}}}return Ua(r)||s}function Ua(n){return(n&1)===0}function Kq(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Qq(e,n)}function Yq(n,e,t=!1){for(let r=0;r<e.length;r++)if(Wq(n,e[r],t))return!0;return!1}function Zq(n){for(let e=0;e<n.length;e++){let t=n[e];if(ZO(t))return e}return n.length}function Qq(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function wO(n,e){return n?":not("+e.trim()+")":e}function Xq(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ua(s)&&(e+=wO(o,i),i=""),r=s,o=o||!Ua(r);t++}return i!==""&&(e+=wO(o,i)),e}function Jq(n){return n.map(Xq).join(",")}function eH(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Ua(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var ma={};function rS(n,e,t,r,i,o,s,a,c,l,u){let p=qi+r,v=p+i,g=tH(p,v),E=typeof l=="function"?l():l;return g[Gt]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:u}}function tH(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ma);return t}function nH(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=rS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function iS(n,e,t,r,i,o,s,a,c,l,u){let p=e.blueprint.slice();return p[ja]=i,p[Jt]=r|4|128|8|64|1024,(l!==null||n&&n[Jt]&2048)&&(p[Jt]|=2048),YC(p),p[Mi]=p[af]=n,p[so]=t,p[Ic]=s||n&&n[Ic],p[br]=a||n&&n[br],p[Tu]=c||n&&n[Tu]||null,p[ca]=o,p[r0]=Eq(),p[n0]=u,p[$C]=l,p[la]=e.type==2?n[la]:p,p}function rH(n,e,t){let r=da(e,n),i=nH(t),o=n[Ic].rendererFactory,s=oS(n,iS(n,i,null,I3(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function I3(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function S3(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function oS(n,e){return n[ap]?n[zC][aa]=e:n[ap]=e,n[zC]=e,e}function X(n=1){A3(Ei(),mn(),Pu()+n,!1)}function A3(n,e,t,r){if(!r)if((e[Jt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&O1(e,o,t)}else{let o=n.preOrderHooks;o!==null&&F1(e,o,0,t)}ku(t)}var sw=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(sw||{});function MI(n,e,t,r){let i=pn(null);try{let[o,s,a]=n.inputs[t],c=null;(s&sw.SignalBased)!==0&&(c=e[o][no]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):qO(e,c,o,r)}finally{pn(i)}}var Nc=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Nc||{}),iH;function sS(n,e){return iH(n,e)}var mp=new Set,aw=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(aw||{}),_f=new We(""),bO=new Set;function wp(n){bO.has(n)||(bO.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var D3=!1,NI=class extends kn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,UC()&&(this.destroyRef=Ae(ha,{optional:!0})??void 0,this.pendingTasks=Ae(Tc,{optional:!0})??void 0)}emit(e){let t=pn(null);try{super.next(e)}finally{pn(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Br&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Yr=NI;function T3(n){let e,t;function r(){n=d0;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function xO(n){return queueMicrotask(()=>n()),()=>{n=d0}}var aS="isAngularZone",W1=aS+"_ID",oH=0,jt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Yr(!1);onMicrotaskEmpty=new Yr(!1);onStable=new Yr(!1);onError=new Yr(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=D3}=e;if(typeof Zone>"u")throw new tt(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,cH(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(aS)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new tt(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new tt(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,sH,d0,d0);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},sH={};function cS(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function aH(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){T3(()=>{n.callbackScheduled=!1,PI(n),n.isCheckStableRunning=!0,cS(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),PI(n)}function cH(n){let e=()=>{aH(n)},t=oH++;n._inner=n._inner.fork({name:"angular",properties:{[aS]:!0,[W1]:t,[W1+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(lH(c))return r.invokeTask(o,s,a,c);try{return EO(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),CO(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return EO(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uH(c)&&e(),CO(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,PI(n),cS(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function PI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function EO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CO(n){n._nesting--,cS(n)}var m0=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Yr;onMicrotaskEmpty=new Yr;onStable=new Yr;onError=new Yr;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function lH(n){return M3(n,"__ignore_ng_zone__")}function uH(n){return M3(n,"__scheduler_tick__")}function M3(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function N3(n="zone.js",e){return n==="noop"?new m0:n==="zone.js"?new jt(e):n}var lS=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new n})}return n})(),P3=[0,1,2,3],k3=(()=>{class n{ngZone=Ae(jt);scheduler=Ae(Al);errorHandler=Ae(Va,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Ae(_f,{optional:!0})}execute(){let t=this.sequences.size>0;t&&sr(16),this.executing=!0;for(let r of P3)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&sr(17)}register(t){let{view:r}=t;r!==void 0?((r[lf]??=[]).push(t),up(r),r[Jt]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(aw.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new n})}return n})(),K1=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[lf];e&&(this.view[lf]=e.filter(t=>t!==this))}};function E0(n,e){let t=e?.injector??Ae(Bn);return wp("NgAfterNextRender"),fH(n,t,e,!0)}function dH(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function fH(n,e,t,r){let i=e.get(lS);i.impl??=e.get(k3);let o=e.get(_f,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ha):null,a=e.get(T1,null,{optional:!0}),c=new K1(i.impl,dH(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var hH=new We("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function R3(n,e,t){let r=n.get(hH);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function pH(n,e){for(let[t,r]of e)R3(n,r.animateFns)}function IO(n,e,t,r){let i=n?.[o0]?.enter;e!==null&&i&&i.has(t.index)&&pH(r,i)}function hp(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;Ba(i)?c=i:Ac(i)&&(l=!0,i=i[ja]);let u=ua(i);n===0&&r!==null?(IO(a,r,o,t),s==null?_3(e,r,u):G1(e,r,u,s||null,!0)):n===1&&r!==null?(IO(a,r,o,t),G1(e,r,u,s||null,!0)):n===2?SO(a,o,t,p=>{Bq(e,u,l,p)}):n===3&&SO(a,o,t,()=>{e.destroyNode(u)}),c!=null&&AH(e,n,t,c,o,r,s)}}function gH(n,e){O3(n,e),e[ja]=null,e[ca]=null}function mH(n,e,t,r,i,o){r[ja]=i,r[ca]=e,cw(n,r,t,1,i,o)}function O3(n,e){e[Ic].changeDetectionScheduler?.notify(9),cw(n,e,e[br],2,null,null)}function vH(n){let e=n[ap];if(!e)return mI(n[Gt],n);for(;e;){let t=null;if(Ac(e))t=e[ap];else{let r=e[Ro];r&&(t=r)}if(!t){for(;e&&!e[aa]&&e!==n;)Ac(e)&&mI(e[Gt],e),e=e[Mi];e===null&&(e=n),Ac(e)&&mI(e[Gt],e),t=e&&e[aa]}e=t}}function uS(n,e){let t=n[uf],r=t.indexOf(e);t.splice(r,1)}function F3(n,e){if(df(e))return;let t=e[br];t.destroyNode&&cw(n,e,t,3,null,null),vH(e)}function mI(n,e){if(df(e))return;let t=pn(null);try{e[Jt]&=-129,e[Jt]|=256,e[Ps]&&Um(e[Ps]),wH(n,e),_H(n,e),e[Gt].type===1&&e[br].destroy();let r=e[Mu];if(r!==null&&Ba(e[Mi])){r!==e[Mi]&&uS(r,e);let i=e[Sc];i!==null&&i.detachView(n)}AI(e)}finally{pn(t)}}function SO(n,e,t,r){let i=n?.[o0];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&mp.add(n),R3(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),yH(n,r)}else n&&mp.delete(n),r(!1)},i)}function yH(n,e){let t=n[o0]?.running;if(t){t.then(()=>{n[o0].running=void 0,mp.delete(n),e(!0)});return}e(!1)}function _H(n,e){let t=n.cleanup,r=e[sp];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[sp]=null);let i=e[Il];if(i!==null){e[Il]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[i0];if(o!==null){e[i0]=null;for(let s of o)s.destroy()}}function wH(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof pf)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];sr(4,a,c);try{c.call(a)}finally{sr(5,a,c)}}else{sr(4,i,o);try{o.call(i)}finally{sr(5,i,o)}}}}}function bH(n,e,t){return xH(n,e.parent,t)}function xH(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ja];if(Tl(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ml.None||i===Ml.Emulated)return null}return da(r,t)}function EH(n,e,t){return IH(n,e,t)}function CH(n,e,t){return n.type&40?da(n,t):null}var IH=CH,AO;function dS(n,e,t,r){let i=bH(n,r,e),o=e[br],s=r.parent||e[ca],a=EH(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)_O(o,i,t[c],a,!1);else _O(o,i,t,a,!1);AO!==void 0&&AO(o,r,e,t,i)}function f0(n,e){if(e!==null){let t=e.type;if(t&3)return da(e,n);if(t&4)return kI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return f0(n,r);{let i=n[e.index];return Ba(i)?kI(-1,i):ua(i)}}else{if(t&128)return f0(n,e.next);if(t&32)return sS(e,n)()||ua(n[e.index]);{let r=L3(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Iu(n[la]);return f0(i,r)}else return f0(n,e.next)}}}return null}function L3(n,e){if(e!==null){let r=n[la][ca],i=e.projection;return r.projection[i]}return null}function kI(n,e){let t=Ro+n+1;if(t<e.length){let r=e[t],i=r[Gt].firstChild;if(i!==null)return f0(r,i)}return e[Nu]}function fS(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Tu];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&gp(ua(c),r),t.flags|=2),!XI(t))if(l&8)fS(n,e,t.child,r,i,o,!1),hp(e,n,a,i,c,t,o,r);else if(l&32){let u=sS(t,r),p;for(;p=u();)hp(e,n,a,i,p,t,o,r);hp(e,n,a,i,c,t,o,r)}else l&16?SH(n,e,r,t,i,o):hp(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function cw(n,e,t,r,i,o){fS(t,r,n.firstChild,e,i,o,!1)}function SH(n,e,t,r,i,o){let s=t[la],c=s[ca].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];hp(e,n,t[Tu],i,u,r,o,t)}else{let l=c,u=s[Mi];s3(r)&&(l.flags|=128),fS(n,e,l,u,i,o,!0)}}function AH(n,e,t,r,i,o,s){let a=r[Nu],c=ua(r);a!==c&&hp(e,n,t,o,a,i,s);for(let l=Ro;l<r.length;l++){let u=r[l];cw(u[Gt],u,n,e,o,a)}}function DH(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Nc.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Nc.Important),n.setStyle(t,r,i,o))}}function V3(n,e,t,r,i){let o=Pu(),s=r&2;try{ku(-1),s&&e.length>qi&&A3(n,e,qi,!1),sr(s?2:0,i,t),t(r,i)}finally{ku(o),sr(s?3:1,i,t)}}function lw(n,e,t){RH(n,e,t),(t.flags&64)===64&&OH(n,e,t)}function hS(n,e,t=da){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function TH(n,e,t,r){let o=r.get(h3,f3)||t===Ml.ShadowDom,s=n.selectRootElement(e,o);return MH(s),s}function MH(n){NH(n)}var NH=()=>null;function PH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function j3(n,e,t,r,i,o){let s=e[Gt];if(uw(n,s,e,t,r)){Tl(n)&&B3(e,n.index);return}n.type&3&&(t=PH(t)),kH(n,e,t,r,i,o)}function kH(n,e,t,r,i,o){if(n.type&3){let s=da(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function B3(n,e){let t=fa(e,n);t[Jt]&16||(t[Jt]|=64)}function RH(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Tl(t)&&rH(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||$1(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=g0(e,n,s,t);if(gp(c,e),o!==null&&VH(e,s-r,c,a,t,o),Dc(a)){let l=fa(t.index,e);l[so]=g0(e,n,s,t)}}}function OH(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=nO();try{ku(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];C1(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&FH(c,l)}}finally{ku(-1),C1(s)}}function FH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function pS(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Yq(e,o.selectors,!1)&&(r??=[],Dc(o)?r.unshift(o):r.push(o))}return r}function LH(n,e,t,r,i,o){let s=da(n,e);U3(e[br],s,o,n.value,t,r,i)}function U3(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Su(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function VH(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];MI(r,t,c,l)}}function z3(n,e,t,r,i){let o=qi+t,s=e[Gt],a=i(s,e,n,r,t);e[o]=a,dp(n,!0);let c=n.type===2;return c?(w3(e[br],a,n),($R()===0||cp(n))&&gp(a,e),qR()):gp(a,e),D1()&&(!c||!XI(n))&&dS(s,e,a,n),n}function $3(n){let e=n;return tI()?ZR():(e=e.parent,dp(e,!1)),e}function jH(n,e){let t=n[Tu];if(!t)return;let r;try{r=t.get(ts,null)}catch{r=null}r?.(e)}function uw(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],p=e.data[l];MI(p,t[l],u,i),a=!0}if(o)for(let c of o){let l=t[c],u=e.data[c];MI(u,l,r,i),a=!0}return a}function BH(n,e){let t=fa(e,n),r=t[Gt];UH(r,t);let i=t[ja];i!==null&&t[n0]===null&&(t[n0]=p3(i,t[Tu])),sr(18),gS(r,t,t[so]),sr(19,t[so])}function UH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function gS(n,e,t){S1(e);try{let r=n.viewQuery;r!==null&&TI(1,r,t);let i=n.template;i!==null&&V3(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Sc]?.finishViewCreation(n),n.staticContentQueries&&g3(n,e),n.staticViewQueries&&TI(2,n.viewQuery,t);let o=n.components;o!==null&&zH(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Jt]&=-5,A1()}}function zH(n,e){for(let t=0;t<e.length;t++)BH(n,e[t])}function $H(n,e,t,r){let i=pn(null);try{let o=e.tView,a=n[Jt]&4096?4096:16,c=iS(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Mu]=l;let u=n[Sc];return u!==null&&(c[Sc]=u.createEmbeddedView(o)),gS(o,c,t),c}finally{pn(i)}}function DO(n,e){return!e||e.firstChild===null||s3(n)}function v0(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ua(o)),Ba(o)&&q3(o,r);let s=t.type;if(s&8)v0(n,e,t.child,r);else if(s&32){let a=sS(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=L3(e,t);if(Array.isArray(a))r.push(...a);else{let c=Iu(e[la]);v0(c[Gt],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function q3(n,e){for(let t=Ro;t<n.length;t++){let r=n[t],i=r[Gt].firstChild;i!==null&&v0(r[Gt],r,i,e)}n[Nu]!==n[ja]&&e.push(n[Nu])}function H3(n){if(n[lf]!==null){for(let e of n[lf])e.impl.addSequence(e);n[lf].length=0}}var G3=[];function qH(n){return n[Ps]??HH(n)}function HH(n){let e=G3.pop()??Object.create(WH);return e.lView=n,e}function GH(n){n.lView[Ps]!==n&&(n.lView=null,G3.push(n))}var WH=Ft(Oe({},Bh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{up(n.lView)},consumerOnSignalRead(){this.lView[Ps]=this}});function KH(n){let e=n[Ps]??Object.create(YH);return e.lView=n,e}var YH=Ft(Oe({},Bh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Iu(n.lView);for(;e&&!W3(e[Gt]);)e=Iu(e);e&&ZC(e)},consumerOnSignalRead(){this.lView[Ps]=this}});function W3(n){return n.type!==2}function K3(n){if(n[i0]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[i0])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Jt]&8192)}}var ZH=100;function Y3(n,e=0){let r=n[Ic].rendererFactory,i=!1;i||r.begin?.();try{QH(n,e)}finally{i||r.end?.()}}function QH(n,e){let t=nI();try{rI(!0),RI(n,e);let r=0;for(;c0(n);){if(r===ZH)throw new tt(103,!1);r++,RI(n,1)}}finally{rI(t)}}function XH(n,e,t,r){if(df(e))return;let i=e[Jt],o=!1,s=!1;S1(e);let a=!0,c=null,l=null;o||(W3(n)?(l=qH(e),c=zh(l)):M_()===null?(a=!1,l=KH(e),c=zh(l)):e[Ps]&&(Um(e[Ps]),e[Ps]=null));try{YC(e),JR(n.bindingStartIndex),t!==null&&V3(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let g=n.preOrderCheckHooks;g!==null&&O1(e,g,null)}else{let g=n.preOrderHooks;g!==null&&F1(e,g,0,null),pI(e,0)}if(s||JH(e),K3(e),Z3(e,0),n.contentQueries!==null&&g3(n,e),!o)if(u){let g=n.contentCheckHooks;g!==null&&O1(e,g)}else{let g=n.contentHooks;g!==null&&F1(e,g,1),pI(e,1)}tG(n,e);let p=n.components;p!==null&&X3(e,p,0);let v=n.viewQuery;if(v!==null&&TI(2,v,r),!o)if(u){let g=n.viewCheckHooks;g!==null&&O1(e,g)}else{let g=n.viewHooks;g!==null&&F1(e,g,2),pI(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[y1]){for(let g of e[y1])g();e[y1]=null}o||(H3(e),e[Jt]&=-73)}catch(u){throw o||up(e),u}finally{l!==null&&(jm(l,c),a&&GH(l)),A1()}}function Z3(n,e){for(let t=c3(n);t!==null;t=l3(t))for(let r=Ro;r<t.length;r++){let i=t[r];Q3(i,e)}}function JH(n){for(let e=c3(n);e!==null;e=l3(e)){if(!(e[Jt]&2))continue;let t=e[uf];for(let r=0;r<t.length;r++){let i=t[r];ZC(i)}}}function eG(n,e,t){sr(18);let r=fa(e,n);Q3(r,t),sr(19,r[so])}function Q3(n,e){w1(n)&&RI(n,e)}function RI(n,e){let r=n[Gt],i=n[Jt],o=n[Ps],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Bm(o)),s||=!1,o&&(o.dirty=!1),n[Jt]&=-9217,s)XH(r,n,r.template,n[so]);else if(i&8192){let a=pn(null);try{K3(n),Z3(n,1);let c=r.components;c!==null&&X3(n,c,1),H3(n)}finally{pn(a)}}}function X3(n,e,t){for(let r=0;r<e.length;r++)eG(n,e[r],t)}function tG(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ku(~i);else{let o=i,s=t[++r],a=t[++r];tO(s,o);let c=e[o];sr(24,c),a(2,c),sr(25,c)}}}finally{ku(-1)}}function mS(n,e){let t=nI()?64:1088;for(n[Ic].changeDetectionScheduler?.notify(e);n;){n[Jt]|=t;let r=Iu(n);if(lp(n)&&!r)return n;n=r}return null}function J3(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function nG(n,e,t,r=!0){let i=e[Gt];if(rG(i,e,n,t),r){let s=kI(t,n),a=e[br],c=a.parentNode(n[Nu]);c!==null&&mH(i,n[ca],a,e,c,s)}let o=e[n0];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function OI(n,e){if(n.length<=Ro)return;let t=Ro+e,r=n[t];if(r){let i=r[Mu];i!==null&&i!==n&&uS(i,r),e>0&&(n[t-1][aa]=r[aa]);let o=Jm(n,Ro+e);gH(r[Gt],r);let s=o[Sc];s!==null&&s.detachView(o[Gt]),r[Mi]=null,r[aa]=null,r[Jt]&=-129}return r}function rG(n,e,t,r){let i=Ro+r,o=t.length;r>0&&(t[i-1][aa]=e),r<o-Ro?(e[aa]=t[i],kC(t,Ro+r,e)):(t.push(e),e[aa]=null),e[Mi]=t;let s=e[Mu];s!==null&&t!==s&&e4(s,e);let a=e[Sc];a!==null&&a.insertView(n),b1(e),e[Jt]|=128}function e4(n,e){let t=n[uf],r=e[Mi];if(Ac(r))n[Jt]|=2;else{let i=r[Mi][la];e[la]!==i&&(n[Jt]|=2)}t===null?n[uf]=[e]:t.push(e)}var Ru=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Gt];return v0(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[so]}set context(e){this._lView[so]=e}get destroyed(){return df(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Mi];if(Ba(e)){let t=e[s0],r=t?t.indexOf(this):-1;r>-1&&(OI(e,r),Jm(t,r))}this._attachedToViewContainer=!1}F3(this._lView[Gt],this._lView)}onDestroy(e){QC(this._lView,e)}markForCheck(){mS(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Jt]&=-129}reattach(){b1(this._lView),this._lView[Jt]|=128}detectChanges(){this._lView[Jt]|=1024,Y3(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new tt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=lp(this._lView),t=this._lView[Mu];t!==null&&!e&&uS(t,this._lView),O3(this._lView[Gt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new tt(902,!1);this._appRef=e;let t=lp(this._lView),r=this._lView[Mu];r!==null&&!t&&e4(r,this._lView),b1(this._lView)}};var Ou=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=iG;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=$H(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Ru(o)}}return n})();function iG(){return dw(Ni(),mn())}function dw(n,e){return n.type&4?new Ou(e,n,_p(n,e)):null}function vS(n,e,t,r,i){let o=n.data[e];if(o===null)o=oG(n,e,t,r,i),eO()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=YR();o.injectorIndex=s===null?-1:s.injectorIndex}return dp(o,!0),o}function oG(n,e,t,r,i){let o=eI(),s=tI(),a=s?o:o&&o.parent,c=n.data[e]=aG(n,a,t,e,r,i);return sG(n,c,o,s),c}function sG(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function aG(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return GR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var oye=new RegExp(`^(\\d+)*(${Aq}|${Sq})*(.*)`);var cG=()=>null;function TO(n,e){return cG(n,e)}var t4=class{},fw=class{},FI=class{resolveComponentFactory(e){throw new tt(917,!1)}},C0=class{static NULL=new FI},gf=class{},va=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>lG()}return n})();function lG(){let n=mn(),e=Ni(),t=fa(e.index,n);return(Ac(t)?t:n)[br]}var n4=(()=>{class n{static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>null})}return n})();var V1={},LI=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,V1,r);return i!==V1||t===V1?i:this.parentInjector.get(e,t,r)}};function MO(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=EC(i,a);else if(o==2){let c=a,l=e[++s];r=EC(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ot(n,e=0){let t=mn();if(t===null)return Be(n,e);let r=Ni();return r3(r,t,$i(n),e)}function yS(){let n="invalid";throw new Error(n)}function r4(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}fG(n,e,t,a,o,c,l)}o!==null&&r!==null&&uG(t,r,o)}function uG(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new tt(-301,!1);r.push(e[i],o)}}function dG(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function fG(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let v=0;v<a;v++){let g=r[v];!c&&Dc(g)&&(c=!0,dG(n,t,v)),II($1(t,e),n,g.type)}yG(t,n.data.length,a);for(let v=0;v<a;v++){let g=r[v];g.providersResolver&&g.providersResolver(g)}let l=!1,u=!1,p=S3(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let v=0;v<a;v++){let g=r[v];if(t.mergedAttrs=p0(t.mergedAttrs,g.hostAttrs),pG(n,t,e,p,g),vG(p,g,i),s!==null&&s.has(g)){let[C,M]=s.get(g);t.directiveToIndex.set(g.type,[p,C+t.directiveStart,M+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,p);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let E=g.type.prototype;!l&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),p++}hG(n,t,o)}function hG(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))NO(0,e,i,r),NO(1,e,i,r),kO(e,r,!1);else{let o=t.get(i);PO(0,e,o,r),PO(1,e,o,r),kO(e,r,!0)}}}function NO(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),i4(e,o)}}function PO(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),i4(e,s)}}function i4(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function kO(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||nS(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function pG(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Cu(i.type,!0)),s=new pf(o,Dc(i),ot,null);n.blueprint[r]=s,t[r]=s,gG(n,e,r,S3(n,t,i.hostVars,ma),i)}function gG(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;mG(s)!=a&&s.push(a),s.push(t,r,o)}}function mG(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function vG(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Dc(e)&&(t[""]=n)}}function yG(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function _S(n,e,t,r,i,o,s,a){let c=e[Gt],l=c.consts,u=a0(l,s),p=vS(c,n,t,r,u);return o&&r4(c,e,p,a0(l,a),i),p.mergedAttrs=p0(p.mergedAttrs,p.attrs),p.attrs!==null&&MO(p,p.attrs,!1),p.mergedAttrs!==null&&MO(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function wS(n,e){KO(n,e),qC(e)&&n.queries.elementEnd(e)}function bS(n){return s4(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function o4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function s4(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xS(n,e,t){return n[e]=t}function za(n,e,t){if(t===ma)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function ES(n,e,t,r){let i=za(n,e,t);return za(n,e+1,r)||i}function _G(n,e,t,r,i){let o=ES(n,e,t,r);return za(n,e+2,i)||o}function vI(n,e,t){return function r(i){let o=Tl(n)?fa(n.index,e):e;mS(o,5);let s=e[so],a=RO(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=RO(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function RO(n,e,t,r){let i=pn(null);try{return sr(6,e,t),t(r)!==!1}catch(o){return jH(n,o),!1}finally{sr(7,e,t),pn(i)}}function wG(n,e,t,r,i,o,s,a){let c=cp(n),l=!1,u=null;if(!r&&c&&(u=xG(e,t,o,n.index)),u!==null){let p=u.__ngLastListenerFn__||u;p.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let p=da(n,t),v=r?r(p):p;Tq(t,v,o,a);let g=i.listen(v,o,a);if(!bG(o)){let E=r?C=>r(ua(C[n.index])):n.index;a4(E,e,t,o,a,g,!1)}}return l}function bG(n){return n.startsWith("animation")||n.startsWith("transition")}function xG(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[sp],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function a4(n,e,t,r,i,o,s){let a=e.firstCreatePass?JC(e):null,c=XC(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function OO(n,e,t,r,i,o){let s=e[t],a=e[Gt],l=a.data[t].outputs[r],p=s[l].subscribe(o);a4(n.index,a,e,i,o,p,!0)}var VI=Symbol("BINDING");var Y1=class extends C0{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Dl(e);return new mf(t,this.ngModule)}};function EG(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&sw.SignalBased)!==0};return i&&(o.transform=i),o})}function CG(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function IG(n,e,t){let r=e instanceof Gn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new LI(t,r):t}function SG(n){let e=n.get(gf,null);if(e===null)throw new tt(407,!1);let t=n.get(n4,null),r=n.get(Al,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function AG(n,e){let t=c4(n);return y3(e,t,t==="svg"?HC:t==="math"?LR:null)}function c4(n){return(n.selectors[0][0]||"div").toLowerCase()}var mf=class extends fw{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=EG(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=CG(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Jq(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){sr(22);let a=pn(null);try{let c=this.componentDef,l=DG(r,c,s,o),u=IG(c,i||this.ngModule,e),p=SG(u),v=p.rendererFactory.createRenderer(null,c),g=r?TH(v,r,c.encapsulation,u):AG(c,v),E=s?.some(FO)||o?.some(N=>typeof N!="function"&&N.bindings.some(FO)),C=iS(null,l,null,512|I3(c),null,null,p,v,u,null,p3(g,u,!0));C[qi]=g,S1(C);let M=null;try{let N=_S(qi,C,2,"#host",()=>l.directiveRegistry,!0,0);w3(v,g,N),gp(g,C),lw(l,C,N),JI(l,N,C),wS(l,N),t!==void 0&&MG(N,this.ngContentSelectors,t),M=fa(N.index,C),C[so]=M[so],gS(l,C,null)}catch(N){throw M!==null&&AI(M),AI(C),N}finally{sr(23),A1()}return new Z1(this.componentType,C,!!E)}finally{pn(a)}}};function DG(n,e,t,r){let i=n?["ng-version","20.3.15"]:eH(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[VI].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let p=r[u];if(typeof p!="function")for(let v of p.bindings){a+=v[VI].requiredVars;let g=u+1;v.create&&(v.targetIdx=g,(o??=[]).push(v)),v.update&&(v.targetIdx=g,(s??=[]).push(v))}}let c=[e];if(r)for(let u of r){let p=typeof u=="function"?u:u.type,v=LC(p);c.push(v)}return rS(0,null,TG(o,s),1,a,c,null,null,null,[i],null)}function TG(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function FO(n){let e=n[VI].kind;return e==="input"||e==="twoWay"}var Z1=class extends t4{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=_1(t[Gt],qi),this.location=_p(this._tNode,t),this.instance=fa(this._tNode.index,t)[so],this.hostView=this.changeDetectorRef=new Ru(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=uw(r,i[Gt],i,e,t);this.previousInputValues.set(e,t);let s=fa(r.index,i);mS(s,1)}get injector(){return new hf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function MG(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Nl=(()=>{class n{static __NG_ELEMENT_ID__=NG}return n})();function NG(){let n=Ni();return u4(n,mn())}var PG=Nl,l4=class extends PG{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return _p(this._hostTNode,this._hostLView)}get injector(){return new hf(this._hostTNode,this._hostLView)}get parentInjector(){let e=KI(this._hostTNode,this._hostLView);if(QO(e)){let t=U1(e,this._hostLView),r=B1(e),i=t[Gt].data[r+8];return new hf(i,t)}else return new hf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=LO(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ro}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=TO(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,DO(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!eq(e),l;if(c)l=t;else{let M=t||{};l=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,a=M.bindings}let u=c?e:new mf(Dl(e)),p=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(c?p:this.parentInjector).get(Gn,null);N&&(o=N)}let v=Dl(u.componentType??{}),g=TO(this._lContainer,v?.id??null),E=g?.firstChild??null,C=u.create(p,i,E,o,s,a);return this.insertImpl(C.hostView,l,DO(this._hostTNode,g)),C}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(jR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Mi],l=new l4(c,c[ca],c[Mi]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return nG(s,i,o,r),e.attachToViewContainerRef(),kC(yI(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=LO(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=OI(this._lContainer,t);r&&(Jm(yI(this._lContainer),t),F3(r[Gt],r))}detach(e){let t=this._adjustIndex(e,-1),r=OI(this._lContainer,t);return r&&Jm(yI(this._lContainer),t)!=null?new Ru(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function LO(n){return n[s0]}function yI(n){return n[s0]||(n[s0]=[])}function u4(n,e){let t,r=e[n.index];return Ba(r)?t=r:(t=J3(r,e,null,n),e[n.index]=t,oS(e,t)),RG(t,e,n,r),new l4(t,n,e)}function kG(n,e){let t=n[br],r=t.createComment(""),i=da(e,n),o=t.parentNode(i);return G1(t,o,r,t.nextSibling(i),!1),r}var RG=LG,OG=()=>!1;function FG(n,e,t){return OG(n,e,t)}function LG(n,e,t,r){if(n[Nu])return;let i;t.type&8?i=ua(r):i=kG(e,t),n[Nu]=i}var jI=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},BI=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)CS(e,t).matches!==null&&this.queries[t].setDirty()}},Q1=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=HG(e):this.predicate=e}},UI=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},zI=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,VG(t,o)),this.matchTNodeWithReadOption(e,t,L1(t,e,o,!1,!1))}else r===Ou?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,L1(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ao||i===Nl||i===Ou&&t.type&4)this.addMatch(t.index,-2);else{let o=L1(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function VG(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function jG(n,e){return n.type&11?_p(n,e):n.type&4?dw(n,e):null}function BG(n,e,t,r){return t===-1?jG(e,n):t===-2?UG(n,e,r):g0(n,n[Gt],t,e)}function UG(n,e,t){if(t===ao)return _p(e,n);if(t===Ou)return dw(e,n);if(t===Nl)return u4(e,n)}function d4(n,e,t,r){let i=e[Sc].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(BG(e,u,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function $I(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=d4(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let p=Ro;p<u.length;p++){let v=u[p];v[Mu]===v[Mi]&&$I(v[Gt],v,l,r)}if(u[uf]!==null){let p=u[uf];for(let v=0;v<p.length;v++){let g=p[v];$I(g[Gt],g,l,r)}}}}}return r}function zG(n,e){return n[Sc].queries[e].queryList}function f4(n,e,t){let r=new q1((t&4)===4);return zR(n,e,r,r.destroy),(e[Sc]??=new BI).queries.push(new jI(r))-1}function $G(n,e,t){let r=Ei();return r.firstCreatePass&&(h4(r,new Q1(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),f4(r,mn(),e)}function qG(n,e,t,r){let i=Ei();if(i.firstCreatePass){let o=Ni();h4(i,new Q1(e,t,r),o.index),GG(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return f4(i,mn(),t)}function HG(n){return n.split(",").map(e=>e.trim())}function h4(n,e,t){n.queries===null&&(n.queries=new UI),n.queries.track(new zI(e,t))}function GG(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function CS(n,e){return n.queries.getByIndex(e)}function WG(n,e){let t=n[Gt],r=CS(t,e);return r.crossesNgTemplate?$I(t,n,e,[]):d4(t,n,r,e)}function p4(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(a=>YG(i,a)))}return o}return X1.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((p,v)=>{a.push(""),s.push(r(p).then(g=>{a[l+v]=g,u.splice(u.indexOf(p),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>ZG(o));e.push(c)}),g4(),Promise.all(e).then(()=>{})}var X1=new Map,KG=new Set;function g4(){let n=X1;return X1=new Map,n}function m4(){return X1.size===0}function YG(n,e){return typeof e=="string"?e:e.status!==void 0&&e.status!==200?Promise.reject(new tt(918,!1)):e.text()}function ZG(n){KG.delete(n)}var vf=class{},hw=class{};var y0=class extends vf{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Y1(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=FC(e);this._bootstrapComponents=E3(o.bootstrap),this._r3Injector=cI(e,t,[{provide:vf,useValue:this},{provide:C0,useValue:this.componentFactoryResolver},...r],Sl(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},_0=class extends hw{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new y0(this.moduleType,e,[])}};function v4(n,e,t){return new y0(n,e,t,!1)}var J1=class extends vf{injector;componentFactoryResolver=new Y1(this);instance=null;constructor(e){super();let t=new of([...e.providers,{provide:vf,useValue:this},{provide:C0,useValue:this.componentFactoryResolver}],e.parent||t0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function bp(n,e,t=null){return new J1({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var QG=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=VC(!1,t.type),i=r.length>0?bp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ze({token:n,providedIn:"environment",factory:()=>new n(Be(Gn))})}return n})();function Rr(n){return yp(()=>{let e=y4(n),t=Ft(Oe({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===YI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(QG).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ml.Emulated,styles:n.styles||Ms,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&wp("NgStandalone"),_4(t);let r=n.dependencies;return t.directiveDefs=VO(r,XG),t.pipeDefs=VO(r,NR),t.id=tW(t),t})}function XG(n){return Dl(n)||LC(n)}function ar(n){return yp(()=>({type:n.type,bootstrap:n.bootstrap||Ms,declarations:n.declarations||Ms,imports:n.imports||Ms,exports:n.exports||Ms,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function JG(n,e){if(n==null)return Au;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=sw.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function eW(n){if(n==null)return Au;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function tr(n){return yp(()=>{let e=y4(n);return _4(e),e})}function pw(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function y4(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Au,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ms,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:JG(n.inputs,e),outputs:eW(n.outputs),debugInfo:null}}function _4(n){n.features?.forEach(e=>e(n))}function VO(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function tW(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nW(n){return Object.getPrototypeOf(n.prototype).constructor}function Fo(n){let e=nW(n.type),t=!0,r=[n];for(;e;){let i;if(Dc(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new tt(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=_I(n.inputs),s.declaredInputs=_I(n.declaredInputs),s.outputs=_I(n.outputs);let a=i.hostBindings;a&&aW(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&oW(n,c),l&&sW(n,l),rW(n,i),bR(n.outputs,i.outputs),Dc(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Fo&&(t=!1)}}e=Object.getPrototypeOf(e)}iW(r)}function rW(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function iW(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=p0(i.hostAttrs,t=p0(t,i.hostAttrs))}}function _I(n){return n===Au?{}:n===Ms?[]:n}function oW(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function sW(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function aW(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function cW(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=p0(n.mergedAttrs,n.attrs);let u=n.tView=rS(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),dp(n,!1);let c=uW(t,e,n,r);D1()&&dS(t,e,c,n),gp(c,e);let l=J3(c,e,c,n);e[r+qi]=l,oS(e,l),FG(l,n,e)}function lW(n,e,t,r,i,o,s,a,c,l,u){let p=t+qi,v;return e.firstCreatePass?(v=vS(e,p,4,s||null,a||null),x1()&&r4(e,n,v,a0(e.consts,l),pS),KO(e,v)):v=e.data[p],cW(v,n,e,t,r,i,o,c),cp(v)&&lw(e,n,v),l!=null&&hS(n,v,u),v}function st(n,e,t,r,i,o,s,a){let c=mn(),l=Ei(),u=a0(l.consts,o);return lW(c,l,n,e,t,r,i,u,void 0,s,a),st}var uW=dW;function dW(n,e,t,r){return u0(!0),e[br].createComment("")}var IS=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var gw=new We(""),xp=new We(""),I0=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,UC()&&(this._destroyRef=Ae(ha,{optional:!0})??void 0),SS||(w4(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{jt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(Be(jt),Be(S0),Be(xp))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),S0=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return SS?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function w4(n){SS=n}var SS;function Fu(n){return!!n&&typeof n.then=="function"}function AS(n){return!!n&&typeof n.subscribe=="function"}var DS=new We("");function Ep(n){return oo([{provide:DS,multi:!0,useValue:n}])}var TS=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Ae(DS,{optional:!0})??[];injector=Ae(Bn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ci(this.injector,i);if(Fu(o))t.push(o);else if(AS(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mw=new We("");function b4(){HE(()=>{let n="";throw new tt(600,n)})}function x4(n){return n.isBoundToModule}var fW=10;function MS(n,e){return Array.isArray(e)?e.reduce(MS,n):Oe(Oe({},n),e)}var ns=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Ae(ts);afterRenderManager=Ae(lS);zonelessEnabled=Ae(M1);rootEffectScheduler=Ae(hI);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new kn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Ae(Tc);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(rt(t=>!t))}constructor(){Ae(_f,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Ae(Gn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Bn.NULL){return this._injector.get(jt).run(()=>{sr(10);let s=t instanceof fw;if(!this._injector.get(TS).done){let E="";throw new tt(405,E)}let c;s?c=t:c=this._injector.get(C0).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=x4(c)?void 0:this._injector.get(vf),u=r||c.selector,p=c.create(i,[],u,l),v=p.location.nativeElement,g=p.injector.get(gw,null);return g?.registerApplication(v),p.onDestroy(()=>{this.detachView(p.hostView),h0(this.components,p),g?.unregisterApplication(v)}),this._loadComponent(p),sr(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){sr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(aw.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new tt(101,!1);let t=pn(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,pn(t),this.afterTick.next(),sr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(gf,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<fW;)sr(14),this.synchronizeOnce(),sr(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!c0(i))continue;let o=r&&!this.zonelessEnabled?0:1;Y3(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>c0(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;h0(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(mw,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>h0(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new tt(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function h0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ya(n,e){let t=mn(),r=ff();if(za(t,r,e)){let i=Ei(),o=l0();if(uw(o,i,t,n,e))Tl(o)&&B3(t,o.index);else{let a=da(o,t);U3(t[br],a,null,o.value,n,e,null)}}return ya}function wf(n,e,t,r){let i=mn(),o=ff();if(za(i,o,e)){let s=Ei(),a=l0();LH(a,i,n,e,t,r)}return wf}var fye=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ve(n,e,t){let r=mn(),i=ff();if(za(r,i,e)){let o=Ei(),s=l0();j3(s,r,n,e,r[br],t)}return ve}function jO(n,e,t,r,i){uw(e,n,t,i?"class":"style",r)}function A(n,e,t,r){let i=mn(),o=i[Gt],s=n+qi,a=o.firstCreatePass?_S(s,i,2,e,pS,x1(),t,r):o.data[s];if(z3(a,i,n,e,hW),cp(a)){let c=i[Gt];lw(c,i,a),JI(c,a,i)}return r!=null&&hS(i,a),A}function R(){let n=Ei(),e=Ni(),t=$3(e);return n.firstCreatePass&&wS(n,t),WR(t)&&KR(),HR(),t.classesWithoutHost!=null&&sq(t)&&jO(n,t,mn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&aq(t)&&jO(n,t,mn(),t.stylesWithoutHost,!1),R}function bt(n,e,t,r){return A(n,e,t,r),R(),bt}var hW=(n,e,t,r,i)=>(u0(!0),y3(e[br],r,cO()));function co(n,e,t){let r=mn(),i=r[Gt],o=n+qi,s=i.firstCreatePass?_S(o,r,8,"ng-container",pS,x1(),e,t):i.data[o];if(z3(s,r,n,"ng-container",pW),cp(s)){let a=r[Gt];lw(a,r,s),JI(a,s,r)}return t!=null&&hS(r,s),co}function lo(){let n=Ei(),e=Ni(),t=$3(e);return n.firstCreatePass&&wS(n,t),lo}var pW=(n,e,t,r,i)=>(u0(!0),jq(e[br],""));function Bt(){return mn()}var A0="en-US";var gW=A0;function E4(n){typeof n=="string"&&(gW=n.toLowerCase().replace(/_/g,"-"))}function Fe(n,e,t){let r=mn(),i=Ei(),o=Ni();return C4(i,r,r[br],o,n,e,t),Fe}function C4(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=vI(r,e,o),wG(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let p=0;p<u.length;p+=2){let v=u[p],g=u[p+1];c??=vI(r,e,o),OO(r,e,v,g,i,c)}if(l&&l.length)for(let p of l)c??=vI(r,e,o),OO(r,e,p,i,i,c)}}function ce(n=1){return aO(n)}function NS(n,e,t,r){qG(n,e,t,r)}function PS(n,e,t){$G(n,e,t)}function D0(n){let e=mn(),t=Ei(),r=oI();I1(r+1);let i=CS(t,r);if(n.dirty&&VR(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=WG(e,r);n.reset(o,wq),n.notifyOnChanges()}return!0}return!1}function T0(){return zG(mn(),oI())}function Hi(n){let e=QR();return WC(e,qi+n)}function k1(n,e){return n<<17|e<<2}function yf(n){return n>>17&32767}function mW(n){return(n&2)==2}function vW(n,e){return n&131071|e<<17}function qI(n){return n|2}function vp(n){return(n&131068)>>2}function wI(n,e){return n&-131069|e<<2}function yW(n){return(n&1)===1}function HI(n){return n|1}function _W(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=yf(s),c=vp(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let p=t;u=p[1],(u===null||op(p,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let v=yf(n[a+1]);n[r+1]=k1(v,a),v!==0&&(n[v+1]=wI(n[v+1],r)),n[a+1]=vW(n[a+1],r)}else n[r+1]=k1(a,0),a!==0&&(n[a+1]=wI(n[a+1],r)),a=r;else n[r+1]=k1(c,0),a===0?a=r:n[c+1]=wI(n[c+1],r),c=r;l&&(n[r+1]=qI(n[r+1])),BO(n,u,r,!0),BO(n,u,r,!1),wW(e,u,n,r,o),s=k1(a,c),o?e.classBindings=s:e.styleBindings=s}function wW(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&op(o,e)>=0&&(t[r+1]=HI(t[r+1]))}function BO(n,e,t,r){let i=n[t+1],o=e===null,s=r?yf(i):vp(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];bW(c,e)&&(a=!0,n[s+1]=r?HI(l):qI(l)),s=r?yf(l):vp(l)}a&&(n[t+1]=r?qI(i):HI(i))}function bW(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?op(n,e)>=0:!1}function rs(n,e){return xW(n,e,null,!0),rs}function xW(n,e,t,r){let i=mn(),o=Ei(),s=iI(2);if(o.firstUpdatePass&&CW(o,n,s,r),e!==ma&&za(i,s,e)){let a=o.data[Pu()];TW(o,a,i,i[br],n,i[s+1]=MW(e,t),r,s)}}function EW(n,e){return e>=n.expandoStartIndex}function CW(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Pu()],s=EW(n,t);NW(o,r)&&e===null&&!s&&(e=!1),e=IW(i,o,e,r),_W(i,o,e,t,s,r)}}function IW(n,e,t,r){let i=rO(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=bI(null,n,e,t,r),t=w0(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=bI(i,n,e,t,r),o===null){let c=SW(n,e,r);c!==void 0&&Array.isArray(c)&&(c=bI(null,n,e,c[1],r),c=w0(c,e.attrs,r),AW(n,e,r,c))}else o=DW(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function SW(n,e,t){let r=t?e.classBindings:e.styleBindings;if(vp(r)!==0)return n[yf(r)]}function AW(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[yf(i)]=r}function DW(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=w0(r,s,t)}return w0(r,e.attrs,t)}function bI(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=w0(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function w0(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),MR(n,s,t?!0:e[++o]))}return n===void 0?null:n}function TW(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=yW(l)?UO(c,e,t,i,vp(l),s):void 0;if(!ew(u)){ew(o)||mW(l)&&(o=UO(c,null,t,i,a,s));let p=GC(Pu(),t);DH(r,s,p,i,o)}}function UO(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,p=u===null,v=t[i+1];v===ma&&(v=p?Ms:void 0);let g=p?v1(v,r):u===r?v:void 0;if(l&&!ew(g)&&(g=v1(c,r)),ew(g)&&(a=g,s))return a;let E=n[i+1];i=s?yf(E):vp(E)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=v1(c,r))}return a}function ew(n){return n!==void 0}function MW(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Sl(x0(n)))),n}function NW(n,e){return(n.flags&(e?8:16))!==0}function Z(n,e=""){let t=mn(),r=Ei(),i=n+qi,o=r.firstCreatePass?vS(r,i,1,e,null):r.data[i],s=PW(r,t,o,e,n);t[i]=s,D1()&&dS(r,t,s,o),dp(o,!1)}var PW=(n,e,t,r,i)=>(u0(!0),Lq(e[br],r));function I4(n,e,t,r=""){return za(n,ff(),t)?e+Su(t)+r:ma}function kW(n,e,t,r,i,o=""){let s=XR(),a=ES(n,s,t,i);return iI(2),a?e+Su(t)+r+Su(i)+o:ma}function Zt(n){return yr("",n),Zt}function yr(n,e,t){let r=mn(),i=I4(r,n,e,t);return i!==ma&&S4(r,Pu(),i),yr}function vw(n,e,t,r,i){let o=mn(),s=kW(o,n,e,t,r,i);return s!==ma&&S4(o,Pu(),s),vw}function S4(n,e,t){let r=GC(e,n);Vq(n[br],r,t)}function vt(n,e,t){uI(e)&&(e=e());let r=mn(),i=ff();if(za(r,i,e)){let o=Ei(),s=l0();j3(s,r,n,e,r[br],t)}return vt}function xt(n,e){let t=uI(n);return t&&n.set(e),t}function yt(n,e){let t=mn(),r=Ei(),i=Ni();return C4(r,t,t[br],i,n,e),yt}function bf(n){return za(mn(),ff(),n)?Su(n):ma}function kc(n,e,t=""){return I4(mn(),n,e,t)}function RW(n,e,t){let r=Ei();if(r.firstCreatePass){let i=Dc(n);GI(t,r.data,r.blueprint,i,!0),GI(e,r.data,r.blueprint,i,!1)}}function GI(n,e,t,r,i){if(n=$i(n),Array.isArray(n))for(let o=0;o<n.length;o++)GI(n[o],e,t,r,i);else{let o=Ei(),s=mn(),a=Ni(),c=rf(n)?n:$i(n.provide),l=BC(n),u=a.providerIndexes&1048575,p=a.directiveStart,v=a.providerIndexes>>20;if(rf(n)||!n.multi){let g=new pf(l,i,ot,null),E=EI(c,e,i?u:u+v,p);E===-1?(II($1(a,s),o,c),xI(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[E]=g,s[E]=g)}else{let g=EI(c,e,u+v,p),E=EI(c,e,u,u+v),C=g>=0&&t[g],M=E>=0&&t[E];if(i&&!M||!i&&!C){II($1(a,s),o,c);let N=LW(i?FW:OW,t.length,i,r,l,n);!i&&M&&(t[E].providerFactory=N),xI(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(N),s.push(N)}else{let N=A4(t[i?E:g],l,!i&&r);xI(o,n,g>-1?g:E,N)}!i&&r&&M&&t[E].componentProviders++}}}function xI(n,e,t,r){let i=rf(e),o=OR(e);if(i||o){let c=(o?$i(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function A4(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function EI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function OW(n,e,t,r,i){return WI(this.multi,[])}function FW(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=g0(r,r[Gt],this.providerFactory.index,i);s=c.slice(0,a),WI(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],WI(o,s);return s}function WI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function LW(n,e,t,r,i,o){let s=new pf(n,t,ot,null);return s.multi=[],s.index=e,s.componentProviders=0,A4(s,i,r&&!t),s}function $a(n,e=[]){return t=>{t.providersResolver=(r,i)=>RW(r,i?i(n):n,e)}}function Rc(n,e,t,r){return VW(mn(),E1(),n,e,t,r)}function M0(n,e,t,r,i){return jW(mn(),E1(),n,e,t,r,i)}function kS(n,e){let t=n[e];return t===ma?void 0:t}function VW(n,e,t,r,i,o){let s=e+t;return za(n,s,i)?xS(n,s+1,o?r.call(o,i):r(i)):kS(n,s+1)}function jW(n,e,t,r,i,o,s){let a=e+t;return ES(n,a,i,o)?xS(n,a+2,s?r.call(s,i,o):r(i,o)):kS(n,a+2)}function BW(n,e,t,r,i,o,s,a){let c=e+t;return _G(n,c,i,o,s)?xS(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):kS(n,c+3)}function N0(n,e){let t=Ei(),r,i=n+qi;t.firstCreatePass?(r=UW(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Cu(r.type,!0)),s,a=ko(ot);try{let c=z1(!1),l=o();return z1(c),KC(t,mn(),i,l),l}finally{ko(a)}}function UW(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function P0(n,e,t,r,i){let o=n+qi,s=mn(),a=WC(s,o);return zW(s,o)?BW(s,E1(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function zW(n,e){return n[Gt].data[e].pure}function is(n,e){return dw(n,e)}var R1=null;function D4(n){R1!==null&&(n.defaultEncapsulation!==R1.defaultEncapsulation||n.preserveWhitespaces!==R1.preserveWhitespaces)||(R1=n)}var tw=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},RS=(()=>{class n{compileModuleSync(t){return new _0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=FC(t),o=E3(i.declarations).reduce((s,a)=>{let c=Dl(a);return c&&s.push(new mf(c)),s},[]);return new tw(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),T4=new We("");var $W=(()=>{class n{zone=Ae(jt);changeDetectionScheduler=Ae(Al);applicationRef=Ae(ns);applicationErrorHandler=Ae(ts);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function M4({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new jt(Ft(Oe({},OS()),{scheduleInRootZone:t})),[{provide:jt,useFactory:n},{provide:Du,multi:!0,useFactory:()=>{let r=Ae($W,{optional:!0});return()=>r.initialize()}},{provide:Du,multi:!0,useFactory:()=>{let r=Ae(qW);return()=>{r.initialize()}}},e===!0?{provide:dI,useValue:!0}:[],{provide:fI,useValue:t??D3},{provide:ts,useFactory:()=>{let r=Ae(jt),i=Ae(Gn),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Va),o.handleError(s))})}}}]}function OS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var qW=(()=>{class n{subscription=new Br;initialized=!1;zone=Ae(jt);pendingTasks=Ae(Tc);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{jt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{jt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var N4=(()=>{class n{applicationErrorHandler=Ae(ts);appRef=Ae(ns);taskService=Ae(Tc);ngZone=Ae(jt);zonelessEnabled=Ae(M1);tracing=Ae(_f,{optional:!0});disableScheduling=Ae(dI,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Br;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(W1):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Ae(fI,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof m0||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?xO:T3;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(W1+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,xO(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HW(){return typeof $localize<"u"&&$localize.locale||A0}var yw=new We("",{providedIn:"root",factory:()=>Ae(yw,{optional:!0,skipSelf:!0})||HW()});function ki(n){return yR(n)}function Cp(n,e){return R_(n,e?.equal)}var P4=class{[no];constructor(e){this[no]=e}destroy(){this[no].destroy()}};var j4=Symbol("InputSignalNode#UNSET"),iK=Ft(Oe({},O_),{transformFn:void 0,applyValueToInputSignal(n,e){qh(n,e)}});function B4(n,e){let t=Object.create(iK);t.value=n,t.transformFn=e?.transform;function r(){if(Uh(t),t.value===j4){let i=null;throw new tt(-950,i)}return t.value}return r[no]=t,r}var _w=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>b0(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},oK=new We("");oK.__NG_ELEMENT_ID__=n=>{let e=Ni();if(e===null)throw new tt(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new tt(204,!1)};function k4(n,e){return B4(n,e)}function sK(n){return B4(j4,n)}var U4=(k4.required=sK,k4);function aK(n,e,t){let r=new _0(t);return Promise.resolve(r)}function R4(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var ww=new We(""),cK=new We("");function k0(n){return!n.moduleRef}function lK(n){let e=k0(n)?n.r3Injector:n.moduleRef.injector,t=e.get(jt);return t.run(()=>{k0(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ts),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),k0(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ww);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ww);s.add(o),n.moduleRef.onDestroy(()=>{h0(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return dK(r,t,()=>{let o=e.get(Tc),s=o.add(),a=e.get(TS);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(yw,A0);if(E4(c||A0),!e.get(cK,!0))return k0(n)?e.get(ns):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(k0(n)){let u=e.get(ns);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return z4?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var z4;function O4(){z4=uK}function uK(n,e){let t=n.injector.get(ns);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new tt(-403,!1);e.push(n)}function dK(n,e,t){try{let r=t();return Fu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var $4=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>N3(r?.ngZone,Ft(Oe({},OS({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[M4({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Al,useExisting:N4},uO],c=v4(t.moduleType,this.injector,a);return O4(),lK({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=MS({},r);return O4(),aK(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new tt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(ww,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(Be(Bn))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),BS=null;function fK(n){if(zS())throw new tt(400,!1);b4(),BS=n;let e=n.get($4);return gK(n),e}function US(n,e,t=[]){let r=`Platform: ${e}`,i=new We(r);return(o=[])=>{let s=zS();if(!s){let a=[...t,...o,{provide:i,useValue:!0}];s=n?.(a)??fK(hK(a,r))}return pK(i)}}function hK(n=[],e){return Bn.create({name:e,providers:[{provide:e0,useValue:"platform"},{provide:ww,useValue:new Set([()=>BS=null])},...n]})}function pK(n){let e=zS();if(!e)throw new tt(-401,!1);return e}function zS(){return BS?.get($4)??null}function gK(n){let e=n.get(rw,null);ci(n,()=>{e?.forEach(t=>t())})}function Lu(){return!1}var Oc=(()=>{class n{static __NG_ELEMENT_ID__=mK}return n})();function mK(n){return vK(Ni(),mn(),(n&16)===16)}function vK(n,e,t){if(Tl(n)&&!t){let r=fa(n.index,e);return new Ru(r,r)}else if(n.type&175){let r=e[la];return new Ru(r,e)}return null}var FS=class{constructor(){}supports(e){return bS(e)}create(e){return new LS(e)}},yK=(n,e)=>e,LS=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||yK}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<F4(r,i,o)?t:r,a=F4(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let v=0;v<l;v++){let g=v<o.length?o[v]:o[v]=0,E=g+v;u<=E&&E<l&&(o[v]=g+1)}let p=s.previousIndex;o[p]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!bS(e))throw new tt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,o4(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new VS(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new bw),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new bw),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},VS=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},jS=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},bw=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new jS,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function F4(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function L4(){return new $S([new FS])}var $S=(()=>{class n{factories;static \u0275prov=Ze({token:n,providedIn:"root",factory:L4});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=Ae(n,{optional:!0,skipSelf:!0});return n.create(t,r||L4())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new tt(901,!1)}}return n})();var q4=US(null,"core",[]),H4=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(Be(ns))};static \u0275mod=ar({type:n});static \u0275inj=er({})}return n})();function Vu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function G4(n){let e=Dl(n);if(!e)return null;let t=new mf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Y4=null;function ks(){return Y4}function qS(n){Y4??=n}var R0=class{},O0=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Ae(Z4),providedIn:"platform"})}return n})(),HS=new We(""),Z4=(()=>{class n extends O0{_location;_history;_doc=Ae(li);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ks().getBaseHref(this._doc)}onPopState(t){let r=ks().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ks().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function xw(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function W4(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function qa(n){return n&&n[0]!=="?"?`?${n}`:n}var Ha=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Ae(Cw),providedIn:"root"})}return n})(),Ew=new We(""),Cw=(()=>{class n extends Ha{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ae(li).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+qa(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+qa(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+qa(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Be(O0),Be(Ew,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ju=(()=>{class n{_subject=new kn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=bK(W4(K4(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qa(r))}normalize(t){return n.stripTrailingSlash(wK(this._basePath,K4(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qa(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qa(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=qa;static joinWithSlash=xw;static stripTrailingSlash=W4;static \u0275fac=function(r){return new(r||n)(Be(Ha))};static \u0275prov=Ze({token:n,factory:()=>_K(),providedIn:"root"})}return n})();function _K(){return new ju(Be(Ha))}function wK(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function K4(n){return n.replace(/\/index.html$/,"")}function bK(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var WS=(()=>{class n extends Ha{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=xw(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+qa(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+qa(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Be(O0),Be(Ew,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})();var GS=/\s+/,Q4=[],xf=(()=>{class n{_ngEl;_renderer;initialClasses=Q4;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(GS):Q4}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(GS):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(GS).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(ot(ao),ot(va))};static \u0275dir=tr({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Iw=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},uo=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Iw(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),X4(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);X4(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ot(Nl),ot(Ou),ot($S))};static \u0275dir=tr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function X4(n,e){n.context.$implicit=e.item}var Rs=(()=>{class n{_viewContainer;_context=new Sw;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){J4(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){J4(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ot(Nl),ot(Ou))};static \u0275dir=tr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Sw=class{$implicit=null;ngIf=null};function J4(n,e){if(n&&!n.createEmbeddedView)throw new tt(2020,!1)}function xK(n,e){return new tt(2100,!1)}var KS=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw xK(n,t);return t.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=pw({name:"slice",type:n,pure:!1})}return n})();var Pl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ar({type:n});static \u0275inj=er({})}return n})();function YS(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var F0=class{};var QS="browser",EK="server";function XS(n){return n===QS}function Aw(n){return n===EK}var eF=(()=>{class n{static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new ZS(Ae(li),window)})}return n})(),ZS=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Ft(Oe({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=CK(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Cc(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Ft(Oe({},t),{left:i-s[0],top:o-s[1]}))}};function CK(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var L0=class{_doc;constructor(e){this._doc=e}manager},Dw=(()=>{class n extends L0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Be(li))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),Mw=new We(""),rA=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Dw));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Dw);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new tt(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Be(Mw),Be(jt))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),JS="ng-app-id";function tF(n){for(let e of n)e.remove()}function nF(n,e){let t=e.createElement("style");return t.textContent=n,t}function IK(n,e,t,r){let i=n.head?.querySelectorAll(`style[${JS}="${e}"],link[${JS}="${e}"]`);if(i)for(let o of i)o.removeAttribute(JS),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function tA(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var iA=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,IK(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,nF);r?.forEach(i=>this.addUsage(i,this.external,tA))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(tF(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])tF(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,nF(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,tA(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Be(li),Be(nw),Be(iw,8),Be(Pi))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),eA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},oA=/%COMP%/g;var iF="%COMP%",SK=`_nghost-${iF}`,AK=`_ngcontent-${iF}`,DK=!0,TK=new We("",{providedIn:"root",factory:()=>DK});function MK(n){return AK.replace(oA,n)}function NK(n){return SK.replace(oA,n)}function oF(n,e){return e.map(t=>t.replace(oA,n))}var sA=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new V0(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Tw?i.applyToHost(t):i instanceof j0&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,p=this.platformIsServer,v=this.tracingService;switch(r.encapsulation){case Ml.Emulated:o=new Tw(c,l,r,this.appId,u,s,a,p,v);break;case Ml.ShadowDom:return new nA(c,l,t,r,s,a,this.nonce,p,v);default:o=new j0(c,l,r,u,s,a,p,v);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Be(rA),Be(iA),Be(nw),Be(TK),Be(li),Be(jt),Be(iw),Be(_f,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),V0=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(eA[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(rF(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(rF(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new tt(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=eA[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=eA[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Nc.DashCase|Nc.Important)?e.style.setProperty(t,r,i&Nc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Nc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=ks().getGlobalEventTarget(this.doc,e),!e))throw new tt(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function rF(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var nA=class extends V0{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=oF(i.id,u);for(let v of u){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=v,this.shadowRoot.appendChild(g)}let p=i.getExternalStyles?.();if(p)for(let v of p){let g=tA(v,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},j0=class extends V0{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?oF(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&mp.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Tw=class extends j0{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,l,u),this.contentAttr=MK(u),this.hostAttr=NK(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Nw=class n extends R0{supportsDOMEvents=!0;static makeCurrent(){qS(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=PK();return t==null?null:kK(t)}resetBaseElement(){B0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return YS(document.cookie,e)}},B0=null;function PK(){return B0=B0||document.head.querySelector("base"),B0?B0.getAttribute("href"):null}function kK(n){return new URL(n,document.baseURI).pathname}var Pw=class{addToWindow(e){Ns.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new tt(5103,!1);return o},Ns.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ns.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Ns.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Ns.frameworkStabilizers||(Ns.frameworkStabilizers=[]),Ns.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?ks().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},RK=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),sF=["alt","control","meta","shift"],OK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},aF=(()=>{class n extends L0{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ks().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),sF.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=OK[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),sF.forEach(s=>{if(s!==i){let a=FK[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Be(li))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})();function LK(){Nw.makeCurrent()}function VK(){return new Va}function jK(){return ZI(document),document}var BK=[{provide:Pi,useValue:QS},{provide:rw,useValue:LK,multi:!0},{provide:li,useFactory:jK}],aA=US(q4,"browser",BK);var UK=[{provide:xp,useClass:Pw},{provide:gw,useClass:I0,deps:[jt,S0,xp]},{provide:I0,useClass:I0,deps:[jt,S0,xp]}],zK=[{provide:e0,useValue:"root"},{provide:Va,useFactory:VK},{provide:Mw,useClass:Dw,multi:!0,deps:[li]},{provide:Mw,useClass:aF,multi:!0,deps:[li]},sA,iA,rA,{provide:gf,useExisting:sA},{provide:F0,useClass:RK},[]],cA=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ar({type:n});static \u0275inj=er({providers:[...zK,...UK],imports:[Pl,H4]})}return n})();var cF=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Be(li))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _F=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ot(va),ot(ao))};static \u0275dir=tr({type:n})}return n})(),W0=(()=>{class n extends _F{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=tr({type:n,features:[Fo]})}return n})(),Dp=new We(""),$K={provide:Dp,useExisting:es(()=>dA),multi:!0},dA=(()=>{class n extends W0{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=tr({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[$a([$K]),Fo]})}return n})(),qK={provide:Dp,useExisting:es(()=>_a),multi:!0};function HK(){let n=ks()?ks().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var GK=new We(""),_a=(()=>{class n extends _F{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!HK())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ot(va),ot(ao),ot(GK,8))};static \u0275dir=tr({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Fe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[$a([qK]),Fo]})}return n})();function WK(n){return n==null||KK(n)===0}function KK(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Uw=new We(""),wF=new We("");function YK(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function ZK(n){return WK(n.value)?{required:!0}:null}function uF(n){return null}function bF(n){return n!=null}function xF(n){return Fu(n)?gn(n):n}function EF(n){let e={};return n.forEach(t=>{e=t!=null?Oe(Oe({},e),t):e}),Object.keys(e).length===0?null:e}function CF(n,e){return e.map(t=>t(n))}function QK(n){return!n.validate}function IF(n){return n.map(e=>QK(e)?e:t=>e.validate(t))}function XK(n){if(!n)return null;let e=n.filter(bF);return e.length==0?null:function(t){return EF(CF(t,e))}}function fA(n){return n!=null?XK(IF(n)):null}function JK(n){if(!n)return null;let e=n.filter(bF);return e.length==0?null:function(t){let r=CF(t,e).map(xF);return sC(r).pipe(rt(EF))}}function hA(n){return n!=null?JK(IF(n)):null}function dF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function eY(n){return n._rawValidators}function tY(n){return n._rawAsyncValidators}function lA(n){return n?Array.isArray(n)?n:[n]:[]}function Rw(n,e){return Array.isArray(n)?n.includes(e):n===e}function fF(n,e){let t=lA(e);return lA(n).forEach(i=>{Rw(t,i)||t.push(i)}),t}function hF(n,e){return lA(e).filter(t=>!Rw(n,t))}var Ow=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ap=class extends Ow{name;get formDirective(){return null}get path(){return null}},G0=class extends Ow{_parent=null;name=null;valueAccessor=null},Fw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},nY={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},zCe=Ft(Oe({},nY),{"[class.ng-submitted]":"isSubmitted"}),Fc=(()=>{class n extends Fw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ot(G0,2))};static \u0275dir=tr({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&rs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Fo]})}return n})(),zw=(()=>{class n extends Fw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ot(Ap,10))};static \u0275dir=tr({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&rs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Fo]})}return n})();var U0="VALID",kw="INVALID",Ip="PENDING",z0="DISABLED",Uu=class{},Lw=class extends Uu{value;source;constructor(e,t){super(),this.value=e,this.source=t}},q0=class extends Uu{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},H0=class extends Uu{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Sp=class extends Uu{status;source;constructor(e,t){super(),this.status=e,this.source=t}},uA=class extends Uu{source;constructor(e){super(),this.source=e}},Vw=class extends Uu{source;constructor(e){super(),this.source=e}};function SF(n){return($w(n)?n.validators:n)||null}function rY(n){return Array.isArray(n)?fA(n):n||null}function AF(n,e){return($w(e)?e.asyncValidators:n)||null}function iY(n){return Array.isArray(n)?hA(n):n||null}function $w(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function oY(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new tt(1e3,"");if(!r[t])throw new tt(1001,"")}function sY(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new tt(1002,"")})}var jw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ki(this.statusReactive)}set status(e){ki(()=>this.statusReactive.set(e))}_status=Cp(()=>this.statusReactive());statusReactive=pa(void 0);get valid(){return this.status===U0}get invalid(){return this.status===kw}get pending(){return this.status==Ip}get disabled(){return this.status===z0}get enabled(){return this.status!==z0}errors;get pristine(){return ki(this.pristineReactive)}set pristine(e){ki(()=>this.pristineReactive.set(e))}_pristine=Cp(()=>this.pristineReactive());pristineReactive=pa(!0);get dirty(){return!this.pristine}get touched(){return ki(this.touchedReactive)}set touched(e){ki(()=>this.touchedReactive.set(e))}_touched=Cp(()=>this.touchedReactive());touchedReactive=pa(!1);get untouched(){return!this.touched}_events=new kn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hF(e,this._rawAsyncValidators))}hasValidator(e){return Rw(this._rawValidators,e)}hasAsyncValidator(e){return Rw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ft(Oe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new H0(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new H0(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ft(Oe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new q0(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new q0(!0,r))}markAsPending(e={}){this.status=Ip;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sp(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ft(Oe({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=z0,this.errors=null,this._forEachChild(i=>{i.disable(Ft(Oe({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Lw(this.value,r)),this._events.next(new Sp(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ft(Oe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=U0,this._forEachChild(r=>{r.enable(Ft(Oe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ft(Oe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===U0||this.status===Ip)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Lw(this.value,t)),this._events.next(new Sp(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ft(Oe({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?z0:U0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ip,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=xF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Sp(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Yr,this.statusChanges=new Yr}_calculateStatus(){return this._allControlsDisabled()?z0:this.errors?kw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ip)?Ip:this._anyControlsHaveStatus(kw)?kw:U0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new q0(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new H0(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$w(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=rY(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=iY(this._rawAsyncValidators)}},Bw=class extends jw{constructor(e,t,r){super(SF(t),AF(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){sY(this,!0,e),Object.keys(e).forEach(r=>{oY(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Vw(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var pA=new We("",{providedIn:"root",factory:()=>gA}),gA="always";function aY(n,e){return[...e.path,n]}function DF(n,e,t=gA){TF(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),lY(n,e),dY(n,e),uY(n,e),cY(n,e)}function pF(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function cY(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function TF(n,e){let t=eY(n);e.validator!==null?n.setValidators(dF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=tY(n);e.asyncValidator!==null?n.setAsyncValidators(dF(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();pF(e._rawValidators,i),pF(e._rawAsyncValidators,i)}function lY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&MF(n,e)})}function uY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&MF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function MF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function dY(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function fY(n,e){n==null,TF(n,e)}function hY(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function pY(n){return Object.getPrototypeOf(n.constructor)===W0}function gY(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function mY(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===_a?t=o:pY(o)?r=o:i=o}),i||r||t||null}var vY={provide:Ap,useExisting:es(()=>K0)},$0=Promise.resolve(),K0=(()=>{class n extends Ap{callSetDisabledState;get submitted(){return ki(this.submittedReactive)}_submitted=Cp(()=>this.submittedReactive());submittedReactive=pa(!1);_directives=new Set;form;ngSubmit=new Yr;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Bw({},fA(t),hA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$0.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),DF(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$0.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$0.then(()=>{let r=this._findContainer(t.path),i=new Bw({});fY(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$0.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){$0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),gY(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new uA(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ot(Uw,10),ot(wF,10),ot(pA,8))};static \u0275dir=tr({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Fe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[$a([vY]),Fo]})}return n})();function gF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var yY=class extends jw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(SF(t),AF(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$w(t)&&(t.nonNullable||t.initialValueIsDefault)&&(mF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Vw(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){mF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _Y={provide:G0,useExisting:es(()=>Ga)},vF=Promise.resolve(),Ga=(()=>{class n extends G0{_changeDetectorRef;callSetDisabledState;control=new yY;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Yr;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mY(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),hY(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){DF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){vF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Vu(r);vF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?aY(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ot(Ap,9),ot(Uw,10),ot(wF,10),ot(Dp,10),ot(Oc,8),ot(pA,8))};static \u0275dir=tr({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[$a([_Y]),Fo,Pc]})}return n})();var qw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=tr({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),wY={provide:Dp,useExisting:es(()=>mA),multi:!0},mA=(()=>{class n extends W0{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=tr({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[$a([wY]),Fo]})}return n})();var bY={provide:Dp,useExisting:es(()=>Lc),multi:!0};function NF(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function xY(n){return n.split(":")[0]}var Lc=(()=>{class n extends W0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=Ae(ns).injector;destroyRef=Ae(ha);cdr=Ae(Oc);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,E0({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=NF(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=xY(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=tr({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Fe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[$a([bY]),Fo]})}return n})(),zu=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(NF(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(ot(ao),ot(va),ot(Lc,9))};static \u0275dir=tr({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),EY={provide:Dp,useExisting:es(()=>PF),multi:!0};function yF(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function CY(n){return n.split(":")[0]}var PF=(()=>{class n extends W0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=CY(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=tr({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[$a([EY]),Fo]})}return n})(),$u=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(yF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(yF(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ot(ao),ot(va),ot(PF,9))};static \u0275dir=tr({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function IY(n){return typeof n=="number"?n:parseFloat(n)}var kF=(()=>{class n{_validator=uF;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):uF,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tr({type:n,features:[Pc]})}return n})();var SY={provide:Uw,useExisting:es(()=>vA),multi:!0},vA=(()=>{class n extends kF{min;inputName="min";normalizeInput=t=>IY(t);createValidator=t=>YK(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=tr({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&wf("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[$a([SY]),Fo]})}return n})(),AY={provide:Uw,useExisting:es(()=>Y0),multi:!0};var Y0=(()=>{class n extends kF{required;inputName="required";normalizeInput=Vu;createValidator=t=>ZK;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275dir=tr({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&wf("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[$a([AY]),Fo]})}return n})();var DY=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ar({type:n});static \u0275inj=er({})}return n})();var Tp=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:pA,useValue:t.callSetDisabledState??gA}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ar({type:n});static \u0275inj=er({imports:[DY]})}return n})();var nn="primary",lv=Symbol("RouteTitle"),xA=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function If(n){return new xA(n)}function UF(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function TY(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vc(n[t],e[t]))return!1;return!0}function Vc(n,e){let t=n?EA(n):void 0,r=e?EA(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!zF(n[i],e[i]))return!1;return!0}function EA(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function $F(n){return n.length>0?n[n.length-1]:null}function kl(n){return iC(n)?n:Fu(n)?gn(Promise.resolve(n)):dt(n)}var MY={exact:HF,subset:GF},qF={exact:NY,subset:PY,ignored:()=>!0};function RF(n,e,t){return MY[t.paths](n.root,e.root,t.matrixParams)&&qF[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function NY(n,e){return Vc(n,e)}function HF(n,e,t){if(!Ef(n.segments,e.segments)||!Ww(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!HF(n.children[r],e.children[r],t))return!1;return!0}function PY(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zF(n[t],e[t]))}function GF(n,e,t){return WF(n,e,e.segments,t)}function WF(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ef(i,t)||e.hasChildren()||!Ww(i,t,r))}else if(n.segments.length===t.length){if(!Ef(n.segments,t)||!Ww(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!GF(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ef(n.segments,i)||!Ww(n.segments,i,r)||!n.children[nn]?!1:WF(n.children[nn],e,o,r)}}function Ww(n,e,t){return e.every((r,i)=>qF[t](n[i].parameters,r.parameters))}var Bc=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Rn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=If(this.queryParams),this._queryParamMap}toString(){return OY.serialize(this)}},Rn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kw(this)}},qu=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=If(this.parameters),this._parameterMap}toString(){return YF(this)}};function kY(n,e){return Ef(n,e)&&n.every((t,r)=>Vc(t.parameters,e[r].parameters))}function Ef(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function RY(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===nn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==nn&&(t=t.concat(e(i,r)))}),t}var Sf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>new Hu,providedIn:"root"})}return n})(),Hu=class{parse(e){let t=new IA(e);return new Bc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Q0(e.root,!0)}`,r=VY(e.queryParams),i=typeof e.fragment=="string"?`#${FY(e.fragment)}`:"";return`${t}${r}${i}`}},OY=new Hu;function Kw(n){return n.segments.map(e=>YF(e)).join("/")}function Q0(n,e){if(!n.hasChildren())return Kw(n);if(e){let t=n.children[nn]?Q0(n.children[nn],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==nn&&r.push(`${i}:${Q0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=RY(n,(r,i)=>i===nn?[Q0(n.children[nn],!1)]:[`${i}:${Q0(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[nn]!=null?`${Kw(n)}/${t[0]}`:`${Kw(n)}/(${t.join("//")})`}}function KF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hw(n){return KF(n).replace(/%3B/gi,";")}function FY(n){return encodeURI(n)}function CA(n){return KF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yw(n){return decodeURIComponent(n)}function OF(n){return Yw(n.replace(/\+/g,"%20"))}function YF(n){return`${CA(n.path)}${LY(n.parameters)}`}function LY(n){return Object.entries(n).map(([e,t])=>`;${CA(e)}=${CA(t)}`).join("")}function VY(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Hw(t)}=${Hw(i)}`).join("&"):`${Hw(t)}=${Hw(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var jY=/^[^\/()?;#]+/;function yA(n){let e=n.match(jY);return e?e[0]:""}var BY=/^[^\/()?;=#]+/;function UY(n){let e=n.match(BY);return e?e[0]:""}var zY=/^[^=?&#]+/;function $Y(n){let e=n.match(zY);return e?e[0]:""}var qY=/^[^&#]+/;function HY(n){let e=n.match(qY);return e?e[0]:""}var IA=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rn([],{}):new Rn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[nn]=new Rn(e,t)),r}parseSegment(){let e=yA(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new tt(4009,!1);return this.capture(e),new qu(Yw(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=UY(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=yA(this.remaining);i&&(r=i,this.capture(r))}e[Yw(t)]=Yw(r)}parseQueryParam(e){let t=$Y(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=HY(this.remaining);s&&(r=s,this.capture(r))}let i=OF(t),o=OF(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=yA(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new tt(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=nn);let s=this.parseChildren();t[o??nn]=Object.keys(s).length===1&&s[nn]?s[nn]:new Rn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new tt(4011,!1)}};function ZF(n){return n.segments.length>0?new Rn([],{[nn]:n}):n}function QF(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=QF(i);if(r===nn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Rn(n.segments,e);return GY(t)}function GY(n){if(n.numberOfChildren===1&&n.children[nn]){let e=n.children[nn];return new Rn(n.segments.concat(e.segments),e.children)}return n}function Gu(n){return n instanceof Bc}function XF(n,e,t=null,r=null){let i=JF(n);return eL(i,e,t,r)}function JF(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Rn(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=ZF(r);return e??i}function eL(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return _A(i,i,i,t,r);let o=WY(e);if(o.toRoot())return _A(i,i,new Rn([],{}),t,r);let s=KY(o,i,n),a=s.processChildren?J0(s.segmentGroup,s.index,o.commands):nL(s.segmentGroup,s.index,o.commands);return _A(i,s.segmentGroup,a,t,r)}function Zw(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function tv(n){return typeof n=="object"&&n!=null&&n.outlets}function _A(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=tL(n,e,t);let a=ZF(QF(s));return new Bc(a,o,i)}function tL(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=tL(o,e,t)}),new Rn(n.segments,r)}var Qw=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Zw(r[0]))throw new tt(4003,!1);let i=r.find(tv);if(i&&i!==$F(r))throw new tt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function WY(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Qw(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Qw(t,e,r)}var Pp=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function KY(n,e,t){if(n.isAbsolute)return new Pp(e,!0,0);if(!t)return new Pp(e,!1,NaN);if(t.parent===null)return new Pp(t,!0,0);let r=Zw(n.commands[0])?0:1,i=t.segments.length-1+r;return YY(t,i,n.numberOfDoubleDots)}function YY(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new tt(4005,!1);i=r.segments.length}return new Pp(r,!1,i-o)}function ZY(n){return tv(n[0])?n[0].outlets:{[nn]:n}}function nL(n,e,t){if(n??=new Rn([],{}),n.segments.length===0&&n.hasChildren())return J0(n,e,t);let r=QY(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Rn(n.segments.slice(0,r.pathIndex),{});return o.children[nn]=new Rn(n.segments.slice(r.pathIndex),n.children),J0(o,0,i)}else return r.match&&i.length===0?new Rn(n.segments,{}):r.match&&!n.hasChildren()?SA(n,e,t):r.match?J0(n,0,i):SA(n,e,t)}function J0(n,e,t){if(t.length===0)return new Rn(n.segments,{});{let r=ZY(t),i={};if(Object.keys(r).some(o=>o!==nn)&&n.children[nn]&&n.numberOfChildren===1&&n.children[nn].segments.length===0){let o=J0(n.children[nn],e,t);return new Rn(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=nL(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Rn(n.segments,i)}}function QY(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(tv(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!LF(c,l,s))return o;r+=2}else{if(!LF(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function SA(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(tv(o)){let c=XY(o.outlets);return new Rn(r,c)}if(i===0&&Zw(t[0])){let c=n.segments[e];r.push(new qu(c.path,FF(t[0]))),i++;continue}let s=tv(o)?o.outlets[nn]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Zw(a)?(r.push(new qu(s,FF(a))),i+=2):(r.push(new qu(s,{})),i++)}return new Rn(r,{})}function XY(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=SA(new Rn([],{}),0,r))}),e}function FF(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function LF(n,e,t){return n==t.path&&Vc(e,t.parameters)}var kp="imperative",Ci=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ci||{}),Fs=class{id;url;constructor(e,t){this.id=e,this.url=t}},Wu=class extends Fs{type=Ci.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ls=class extends Fs{urlAfterRedirects;type=Ci.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Lo=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Lo||{}),Op=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Op||{}),jc=class extends Fs{reason;code;type=Ci.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Uc=class extends Fs{reason;code;type=Ci.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Fp=class extends Fs{error;target;type=Ci.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},nv=class extends Fs{urlAfterRedirects;state;type=Ci.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xw=class extends Fs{urlAfterRedirects;state;type=Ci.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jw=class extends Fs{urlAfterRedirects;state;shouldActivate;type=Ci.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},eb=class extends Fs{urlAfterRedirects;state;type=Ci.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tb=class extends Fs{urlAfterRedirects;state;type=Ci.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nb=class{route;type=Ci.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},rb=class{route;type=Ci.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ib=class{snapshot;type=Ci.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ob=class{snapshot;type=Ci.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sb=class{snapshot;type=Ci.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ab=class{snapshot;type=Ci.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lp=class{routerEvent;position;anchor;type=Ci.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},rv=class{},Vp=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function JY(n){return!(n instanceof rv)&&!(n instanceof Vp)}function eZ(n,e){return n.providers&&!n._injector&&(n._injector=bp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Wa(n){return n.outlet||nn}function tZ(n,e){let t=n.filter(r=>Wa(r)===e);return t.push(...n.filter(r=>Wa(r)!==e)),t}function Up(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var cb=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Up(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Af(this.rootInjector)}},Af=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new cb(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Be(Gn))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lb=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=AA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=AA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=DA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return DA(e,this._root).map(t=>t.value)}};function AA(n,e){if(n===e.value)return e;for(let t of e.children){let r=AA(n,t);if(r)return r}return null}function DA(n,e){if(n===e.value)return[e];for(let t of e.children){let r=DA(n,t);if(r.length)return r.unshift(e),r}return[]}var Os=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Np(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var iv=class extends lb{snapshot;constructor(e,t){super(e),this.snapshot=t,FA(this,e)}toString(){return this.snapshot.toString()}};function rL(n){let e=nZ(n),t=new zi([new qu("",{})]),r=new zi({}),i=new zi({}),o=new zi({}),s=new zi(""),a=new Vs(t,r,o,s,i,nn,n,e.root);return a.snapshot=e.root,new iv(new Os(a,[]),e)}function nZ(n){let e={},t={},r={},o=new Cf([],e,r,"",t,nn,n,null,{});return new ov("",new Os(o,[]))}var Vs=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(rt(l=>l[lv]))??dt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(rt(e=>If(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(rt(e=>If(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ub(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Oe(Oe({},e.params),n.params),data:Oe(Oe({},e.data),n.data),resolve:Oe(Oe(Oe(Oe({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Oe({},n.params),data:Oe({},n.data),resolve:Oe(Oe({},n.data),n._resolvedData??{})},i&&oL(i)&&(r.resolve[lv]=i.title),r}var Cf=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[lv]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=If(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=If(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ov=class extends lb{url;constructor(e,t){super(t),this.url=e,FA(this,t)}toString(){return iL(this._root)}};function FA(n,e){e.value._routerState=n,e.children.forEach(t=>FA(n,t))}function iL(n){let e=n.children.length>0?` { ${n.children.map(iL).join(", ")} } `:"";return`${n.value}${e}`}function wA(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vc(e.params,t.params)||n.paramsSubject.next(t.params),TY(e.url,t.url)||n.urlSubject.next(t.url),Vc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function TA(n,e){let t=Vc(n.params,e.params)&&kY(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||TA(n.parent,e.parent))}function oL(n){return typeof n.title=="string"||n.title===null}var sL=new We(""),uv=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=nn;activateEvents=new Yr;deactivateEvents=new Yr;attachEvents=new Yr;detachEvents=new Yr;routerOutletData=U4();parentContexts=Ae(Af);location=Ae(Nl);changeDetector=Ae(Oc);inputBinder=Ae(dv,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new tt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new tt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new tt(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new tt(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new MA(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tr({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Pc]})}return n})(),MA=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Vs?this.route:e===Af?this.childContexts:e===sL?this.outletData:this.parent.get(e,t)}},dv=new We(""),LA=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Hm([r.queryParams,r.params,r.data]).pipe(Mn(([o,s,a],c)=>(a=Oe(Oe(Oe({},o),s),a),c===0?dt(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=G4(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),VA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Rr({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&bt(0,"router-outlet")},dependencies:[uv],encapsulation:2})}return n})();function jA(n){let e=n.children&&n.children.map(jA),t=e?Ft(Oe({},n),{children:e}):Oe({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==nn&&(t.component=VA),t}function rZ(n,e,t){let r=sv(n,e._root,t?t._root:void 0);return new iv(r,e)}function sv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=iZ(n,e,t);return new Os(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>sv(n,a)),s}}let r=oZ(e.value),i=e.children.map(o=>sv(n,o));return new Os(r,i)}}function iZ(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return sv(n,r,i);return sv(n,r)})}function oZ(n){return new Vs(new zi(n.url),new zi(n.params),new zi(n.queryParams),new zi(n.fragment),new zi(n.data),n.outlet,n.component,n)}var jp=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},aL="ngNavigationCancelingError";function db(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Gu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=cL(!1,Lo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function cL(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[aL]=!0,t.cancellationCode=e,t}function sZ(n){return lL(n)&&Gu(n.url)}function lL(n){return!!n&&n[aL]}var aZ=(n,e,t,r)=>rt(i=>(new NA(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),NA=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Np(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Np(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Np(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Np(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ab(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ob(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(wA(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),wA(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},fb=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Rp=class{component;route;constructor(e,t){this.component=e,this.route=t}};function cZ(n,e,t){let r=n._root,i=e?e._root:null;return X0(r,i,t,[r.value])}function lZ(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function zp(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!IC(n)?n:e.get(n):r}function X0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Np(e);return n.children.forEach(s=>{uZ(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ev(a,t.getContext(s),i)),i}function uZ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=dZ(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new fb(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?X0(n,e,a?a.children:null,r,i):X0(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Rp(a.outlet.component,s))}else s&&ev(e,a,i),i.canActivateChecks.push(new fb(r)),o.component?X0(n,null,a?a.children:null,r,i):X0(n,null,t,r,i);return i}function dZ(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ef(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ef(n.url,e.url)||!Vc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!TA(n,e)||!Vc(n.queryParams,e.queryParams);case"paramsChange":default:return!TA(n,e)}}function ev(n,e,t){let r=Np(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ev(s,e.children.getContext(o),t):ev(s,null,t):ev(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Rp(e.outlet.component,i)):t.canDeactivateChecks.push(new Rp(null,i)):t.canDeactivateChecks.push(new Rp(null,i))}function fv(n){return typeof n=="function"}function fZ(n){return typeof n=="boolean"}function hZ(n){return n&&fv(n.canLoad)}function pZ(n){return n&&fv(n.canActivate)}function gZ(n){return n&&fv(n.canActivateChild)}function mZ(n){return n&&fv(n.canDeactivate)}function vZ(n){return n&&fv(n.canMatch)}function uL(n){return n instanceof Fa||n?.name==="EmptyError"}var Gw=Symbol("INITIAL_VALUE");function Bp(){return Mn(n=>Hm(n.map(e=>e.pipe(Po(1),xu(Gw)))).pipe(rt(e=>{for(let t of e)if(t!==!0){if(t===Gw)return Gw;if(t===!1||yZ(t))return t}return!0}),Pr(e=>e!==Gw),Po(1)))}function yZ(n){return Gu(n)||n instanceof jp}function _Z(n,e){return Kr(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?dt(Ft(Oe({},t),{guardsResult:!0})):wZ(s,r,i,n).pipe(Kr(a=>a&&fZ(a)?bZ(r,o,n,e):dt(a)),rt(a=>Ft(Oe({},t),{guardsResult:a})))})}function wZ(n,e,t,r){return gn(n).pipe(Kr(i=>SZ(i.component,i.route,t,e,r)),La(i=>i!==!0,!0))}function bZ(n,e,t,r){return gn(e).pipe(_u(i=>tp(EZ(i.route.parent,r),xZ(i.route,r),IZ(n,i.path,t),CZ(n,i.route,t))),La(i=>i!==!0,!0))}function xZ(n,e){return n!==null&&e&&e(new sb(n)),dt(!0)}function EZ(n,e){return n!==null&&e&&e(new ib(n)),dt(!0)}function CZ(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return dt(!0);let i=r.map(o=>Gm(()=>{let s=Up(e)??t,a=zp(o,s),c=pZ(a)?a.canActivate(e,n):ci(s,()=>a(e,n));return kl(c).pipe(La())}));return dt(i).pipe(Bp())}function IZ(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>lZ(s)).filter(s=>s!==null).map(s=>Gm(()=>{let a=s.guards.map(c=>{let l=Up(s.node)??t,u=zp(c,l),p=gZ(u)?u.canActivateChild(r,n):ci(l,()=>u(r,n));return kl(p).pipe(La())});return dt(a).pipe(Bp())}));return dt(o).pipe(Bp())}function SZ(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return dt(!0);let s=o.map(a=>{let c=Up(e)??i,l=zp(a,c),u=mZ(l)?l.canDeactivate(n,e,t,r):ci(c,()=>l(n,e,t,r));return kl(u).pipe(La())});return dt(s).pipe(Bp())}function AZ(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return dt(!0);let o=i.map(s=>{let a=zp(s,n),c=hZ(a)?a.canLoad(e,t):ci(n,()=>a(e,t));return kl(c)});return dt(o).pipe(Bp(),dL(r))}function dL(n){return B_(xi(e=>{if(typeof e!="boolean")throw db(n,e)}),rt(e=>e===!0))}function DZ(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return dt(!0);let o=i.map(s=>{let a=zp(s,n),c=vZ(a)?a.canMatch(e,t):ci(n,()=>a(e,t));return kl(c)});return dt(o).pipe(Bp(),dL(r))}var av=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},cv=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Mp(n){return ep(new av(n))}function TZ(n){return ep(new tt(4e3,!1))}function MZ(n){return ep(cL(!1,Lo.GuardRejected))}var PA=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return dt(r);if(i.numberOfChildren>1||!i.children[nn])return TZ(`${e.redirectTo}`);i=i.children[nn]}}applyRedirectCommands(e,t,r,i,o){return NZ(t,i,o).pipe(rt(s=>{if(s instanceof Bc)throw new cv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new cv(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Bc(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Rn(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new tt(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function NZ(n,e,t){if(typeof n=="string")return dt(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:p}=e;return kl(ci(t,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var kA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PZ(n,e,t,r,i){let o=fL(n,e,t);return o.matched?(r=eZ(e,r),DZ(r,e,t,i).pipe(rt(s=>s===!0?o:Oe({},kA)))):dt(o)}function fL(n,e,t){if(e.path==="**")return kZ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Oe({},kA):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||UF)(t,n,e);if(!i)return Oe({},kA);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Oe(Oe({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function kZ(n){return{matched:!0,parameters:n.length>0?$F(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function VF(n,e,t,r){return t.length>0&&FZ(n,t,r)?{segmentGroup:new Rn(e,OZ(r,new Rn(t,n.children))),slicedSegments:[]}:t.length===0&&LZ(n,t,r)?{segmentGroup:new Rn(n.segments,RZ(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Rn(n.segments,n.children),slicedSegments:t}}function RZ(n,e,t,r){let i={};for(let o of t)if(pb(n,e,o)&&!r[Wa(o)]){let s=new Rn([],{});i[Wa(o)]=s}return Oe(Oe({},r),i)}function OZ(n,e){let t={};t[nn]=e;for(let r of n)if(r.path===""&&Wa(r)!==nn){let i=new Rn([],{});t[Wa(r)]=i}return t}function FZ(n,e,t){return t.some(r=>pb(n,e,r)&&Wa(r)!==nn)}function LZ(n,e,t){return t.some(r=>pb(n,e,r))}function pb(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function VZ(n,e,t){return e.length===0&&!n.children[t]}var RA=class{};function jZ(n,e,t,r,i,o,s="emptyOnly"){return new OA(n,e,t,r,i,s,o).recognize()}var BZ=31,OA=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new PA(this.urlSerializer,this.urlTree)}noMatchError(e){return new tt(4002,`'${e.segmentGroup}'`)}recognize(){let e=VF(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(rt(({children:t,rootSnapshot:r})=>{let i=new Os(r,t),o=new ov("",i),s=XF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Cf([],Object.freeze({}),Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),nn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,nn,t).pipe(rt(r=>({children:r,rootSnapshot:t})),Cl(r=>{if(r instanceof cv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof av?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(rt(s=>s instanceof Os?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return gn(o).pipe(_u(s=>{let a=r.children[s],c=tZ(t,s);return this.processSegmentGroup(e,c,a,s,i)}),bu((s,a)=>(s.push(...a),s)),wu(null),lC(),Kr(s=>{if(s===null)return Mp(r);let a=hL(s);return UZ(a),dt(a)}))}processSegment(e,t,r,i,o,s,a){return gn(t).pipe(_u(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Cl(l=>{if(l instanceof av)return dt(null);throw l}))),La(c=>!!c),Cl(c=>{if(uL(c))return VZ(r,i,o)?dt(new RA):Mp(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Wa(r)!==s&&(s===nn||!pb(i,o,r))?Mp(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Mp(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:p,remainingSegments:v}=fL(t,i,o);if(!c)return Mp(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>BZ&&(this.allowRedirects=!1));let g=new Cf(o,l,Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,jF(i),Wa(i),i.component??i._loadedComponent??null,i,BF(i)),E=ub(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(E.params),g.data=Object.freeze(E.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,p,g,e).pipe(Mn(M=>this.applyRedirects.lineralizeSegments(i,M)),Kr(M=>this.processSegment(e,r,t,M.concat(v),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=PZ(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Mn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Mn(({routes:l})=>{let u=r._loadedInjector??e,{parameters:p,consumedSegments:v,remainingSegments:g}=c,E=new Cf(v,p,Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,jF(r),Wa(r),r.component??r._loadedComponent??null,r,BF(r)),C=ub(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(C.params),E.data=Object.freeze(C.data);let{segmentGroup:M,slicedSegments:N}=VF(t,v,g,l);if(N.length===0&&M.hasChildren())return this.processChildren(u,l,M,E).pipe(rt(j=>new Os(E,j)));if(l.length===0&&N.length===0)return dt(new Os(E,[]));let Q=Wa(r)===o;return this.processSegment(u,l,M,N,Q?nn:o,!0,E).pipe(rt(j=>new Os(E,j instanceof Os?[j]:[])))}))):Mp(t)))}getChildConfig(e,t,r){return t.children?dt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?dt({routes:t._loadedRoutes,injector:t._loadedInjector}):AZ(e,t,r,this.urlSerializer).pipe(Kr(i=>i?this.configLoader.loadChildren(e,t).pipe(xi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):MZ(t))):dt({routes:[],injector:e})}};function UZ(n){n.sort((e,t)=>e.value.outlet===nn?-1:t.value.outlet===nn?1:e.value.outlet.localeCompare(t.value.outlet))}function zZ(n){let e=n.value.routeConfig;return e&&e.path===""}function hL(n){let e=[],t=new Set;for(let r of n){if(!zZ(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=hL(r.children);e.push(new Os(r.value,i))}return e.filter(r=>!t.has(r))}function jF(n){return n.data||{}}function BF(n){return n.resolve||{}}function $Z(n,e,t,r,i,o){return Kr(s=>jZ(n,e,t,r,s.extractedUrl,i,o).pipe(rt(({state:a,tree:c})=>Ft(Oe({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function qZ(n,e){return Kr(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dt(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of pL(c))s.add(l);let a=0;return gn(s).pipe(_u(c=>o.has(c)?HZ(c,r,n,e):(c.data=ub(c,c.parent,n).resolve,dt(void 0))),xi(()=>a++),np(1),Kr(c=>a===s.size?dt(t):ro))})}function pL(n){let e=n.children.map(t=>pL(t)).flat();return[n,...e]}function HZ(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!oL(i)&&(o[lv]=i.title),Gm(()=>(n.data=ub(n,n.parent,t).resolve,GZ(o,n,e,r).pipe(rt(s=>(n._resolvedData=s,n.data=Oe(Oe({},n.data),s),null)))))}function GZ(n,e,t,r){let i=EA(n);if(i.length===0)return dt({});let o={};return gn(i).pipe(Kr(s=>WZ(n[s],e,t,r).pipe(La(),xi(a=>{if(a instanceof jp)throw db(new Hu,a);o[s]=a}))),np(1),rt(()=>o),Cl(s=>uL(s)?ro:ep(s)))}function WZ(n,e,t,r){let i=Up(e)??r,o=zp(n,i),s=o.resolve?o.resolve(e,t):ci(i,()=>o(e,t));return kl(s)}function bA(n){return Mn(e=>{let t=n(e);return t?gn(t).pipe(rt(()=>e)):dt(e)})}var BA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===nn);return r}getResolvedTitleForRoute(t){return t.data[lv]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Ae(gL),providedIn:"root"})}return n})(),gL=(()=>{class n extends BA{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Be(cF))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ku=new We("",{providedIn:"root",factory:()=>({})}),$p=new We(""),gb=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Ae(RS);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return dt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=kl(ci(t,()=>r.loadComponent())).pipe(rt(vL),Mn(yL),xi(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Wm(()=>{this.componentLoaders.delete(r)})),o=new Zh(i,()=>new kn).pipe(Yh());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return dt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=mL(r,this.compiler,t,this.onLoadEndListener).pipe(Wm(()=>{this.childrenLoaders.delete(r)})),s=new Zh(o,()=>new kn).pipe(Yh());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mL(n,e,t,r){return kl(ci(t,()=>n.loadChildren())).pipe(rt(vL),Mn(yL),Kr(i=>i instanceof hw||Array.isArray(i)?dt(i):gn(e.compileModuleAsync(i))),rt(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get($p,[],{optional:!0,self:!0}).flat()),{routes:s.map(jA),injector:o}}))}function KZ(n){return n&&typeof n=="object"&&"default"in n}function vL(n){return KZ(n)?n.default:n}function yL(n){return dt(n)}var mb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Ae(YZ),providedIn:"root"})}return n})(),YZ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UA=new We(""),zA=new We("");function _L(n,e,t){let r=n.get(zA),i=n.get(li);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),ZZ(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&ci(n,()=>c({transition:a,from:e,to:t})),s}function ZZ(n){return new Promise(e=>{E0({read:()=>setTimeout(e)},{injector:n})})}var $A=new We(""),vb=(()=>{class n{currentNavigation=pa(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new kn;transitionAbortWithErrorSubject=new kn;configLoader=Ae(gb);environmentInjector=Ae(Gn);destroyRef=Ae(ha);urlSerializer=Ae(Sf);rootContexts=Ae(Af);location=Ae(ju);inputBindingEnabled=Ae(dv,{optional:!0})!==null;titleStrategy=Ae(BA);options=Ae(Ku,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Ae(mb);createViewTransition=Ae(UA,{optional:!0});navigationErrorHandler=Ae($A,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>dt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new nb(i)),r=i=>this.events.next(new rb(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;ki(()=>{this.transitions?.next(Ft(Oe({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new zi(null),this.transitions.pipe(Pr(r=>r!==null),Mn(r=>{let i=!1;return dt(r).pipe(Mn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Lo.SupersededByNewNavigation),ro;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Ft(Oe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Uc(o.id,this.urlSerializer.serialize(o.rawUrl),"",Op.IgnoredSameUrlNavigation)),o.resolve(!1),ro;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return dt(o).pipe(Mn(c=>(this.events.next(new Wu(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?ro:Promise.resolve(c))),$Z(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),xi(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new nv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:p,extras:v}=o,g=new Wu(c,this.urlSerializer.serialize(l),u,p);this.events.next(g);let E=rL(this.rootComponentType).snapshot;return this.currentTransition=r=Ft(Oe({},o),{targetSnapshot:E,urlAfterRedirects:l,extras:Ft(Oe({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(C=>(C.finalUrl=l,C)),dt(r)}else return this.events.next(new Uc(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Op.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ro}),xi(o=>{let s=new Xw(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),rt(o=>(this.currentTransition=r=Ft(Oe({},o),{guards:cZ(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),_Z(this.environmentInjector,o=>this.events.next(o)),xi(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw db(this.urlSerializer,o.guardsResult);let s=new Jw(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Pr(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Lo.GuardRejected),!1)),bA(o=>{if(o.guards.canActivateChecks.length!==0)return dt(o).pipe(xi(s=>{let a=new eb(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Mn(s=>{let a=!1;return dt(s).pipe(qZ(this.paramsInheritanceStrategy,this.environmentInjector),xi({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Lo.NoDataFromResolver)}}))}),xi(s=>{let a=new tb(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),bA(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Up(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(xi(u=>{a.component=u}),rt(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Hm(s(o.targetSnapshot.root)).pipe(wu(null),Po(1))}),bA(()=>this.afterPreactivation()),Mn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?gn(a).pipe(rt(()=>r)):dt(r)}),rt(o=>{let s=rZ(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Ft(Oe({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),xi(()=>{this.events.next(new rv)}),aZ(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Po(1),l1(new kt(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Pr(()=>!i&&!r.targetRouterState),xi(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Lo.Aborted)}))),xi({next:o=>{i=!0,this.lastSuccessfulNavigation=ki(this.currentNavigation),this.events.next(new Ls(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),l1(this.transitionAbortWithErrorSubject.pipe(xi(o=>{throw o}))),Wm(()=>{i||this.cancelNavigationTransition(r,"",Lo.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Cl(o=>{if(this.destroyed)return r.resolve(!1),ro;if(i=!0,lL(o))this.events.next(new jc(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),sZ(o)?this.events.next(new Vp(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Fp(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=ci(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof jp){let{message:c,cancellationCode:l}=db(this.urlSerializer,a);this.events.next(new jc(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Vp(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return ro}))}))}cancelNavigationTransition(t,r,i){let o=new jc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ki(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QZ(n){return n!==kp}var wL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Ae(XZ),providedIn:"root"})}return n})(),hb=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},XZ=(()=>{class n extends hb{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bL=(()=>{class n{urlSerializer=Ae(Sf);options=Ae(Ku,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Ae(ju);urlHandlingStrategy=Ae(mb);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Bc;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Bc?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=rL(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Ae(JZ),providedIn:"root"})}return n})(),JZ=(()=>{class n extends bL{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Wu?this.updateStateMemento():t instanceof Uc?this.commitTransition(r):t instanceof nv?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof rv?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof jc&&t.code!==Lo.SupersededByNewNavigation&&t.code!==Lo.Redirect?this.restoreHistory(r):t instanceof Fp?this.restoreHistory(r,!0):t instanceof Ls&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Oe(Oe({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=Oe(Oe({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ga(n)))(i||n)}})();static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yb(n,e){n.events.pipe(Pr(t=>t instanceof Ls||t instanceof jc||t instanceof Fp||t instanceof Uc),rt(t=>t instanceof Ls||t instanceof Uc?0:(t instanceof jc?t.code===Lo.Redirect||t.code===Lo.SupersededByNewNavigation:!1)?2:1),Pr(t=>t!==2),Po(1)).subscribe(()=>{e()})}var eQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fo=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Ae(IS);stateManager=Ae(bL);options=Ae(Ku,{optional:!0})||{};pendingTasks=Ae(Tc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Ae(vb);urlSerializer=Ae(Sf);location=Ae(ju);urlHandlingStrategy=Ae(mb);injector=Ae(Gn);_events=new kn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Ae(wL);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Ae($p,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Ae(dv,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Br;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=ki(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof jc&&r.code!==Lo.Redirect&&r.code!==Lo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ls)this.navigated=!0;else if(r instanceof Vp){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Oe({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||QZ(i.source)},s);this.scheduleNavigation(a,kp,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}JY(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),kp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Oe({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(ts)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ki(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(jA),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=Oe(Oe({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let p;try{let v=i?i.snapshot:this.routerState.snapshot.root;p=JF(v)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return eL(p,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Gu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,kp,null,r)}navigate(t,r={skipLocationChange:!1}){return nQ(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Cc(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Oe({},eQ):r===!1?i=Oe({},tQ):i=r,Gu(t))return RF(this.currentUrlTree,t,i);let o=this.parseUrl(t);return RF(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,v)=>{a=p,c=v});let u=this.pendingTasks.add();return yb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nQ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new tt(4008,!1)}var wa=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=pa(null);get href(){return ki(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new kn;applicationErrorHandler=Ae(ts);options=Ae(Ku,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(Ae(new _w("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Ls&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Gu(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Gu(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ot(fo),ot(Vs),b0("tabindex"),ot(va),ot(ao),ot(Ha))};static \u0275dir=tr({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Fe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&wf("href",i.reactiveHref(),tS)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Vu],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Vu],replaceUrl:[2,"replaceUrl","replaceUrl",Vu],routerLink:"routerLink"},features:[Pc]})}return n})(),HA=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Yr;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Ls&&this.update()})}ngAfterContentInit(){dt(this.links.changes,dt(null)).pipe(Ec()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=gn(t).pipe(Ec()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=rQ(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(ot(fo),ot(ao),ot(va),ot(Oc),ot(wa,8))};static \u0275dir=tr({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&NS(o,wa,5),r&2){let s;D0(s=T0())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Pc]})}return n})();function rQ(n){return!!n.paths}var hv=class{};var xL=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Pr(t=>t instanceof Ls),_u(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=bp(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return gn(i).pipe(Ec())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=dt(null);let o=i.pipe(Kr(s=>s===null?dt(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return gn([o,s]).pipe(Ec())}else return o})}static \u0275fac=function(r){return new(r||n)(Be(fo),Be(Gn),Be(hv),Be(gb))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EL=new We(""),iQ=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=kp;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Wu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ls?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Uc&&t.code===Op.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Lp))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>ee(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Lp(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){yS()};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})();function oQ(n){return n.routerState.root}function pv(n,e){return{\u0275kind:n,\u0275providers:e}}function sQ(){let n=Ae(Bn);return e=>{let t=n.get(ns);if(e!==t.components[0])return;let r=n.get(fo),i=n.get(CL);n.get(GA)===1&&r.initialNavigation(),n.get(AL,null,{optional:!0})?.setUpPreloading(),n.get(EL,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var CL=new We("",{factory:()=>new kn}),GA=new We("",{providedIn:"root",factory:()=>1});function IL(){let n=[{provide:QI,useValue:!0},{provide:GA,useValue:0},Ep(()=>{let e=Ae(Bn);return e.get(HS,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(fo),o=e.get(CL);yb(i,()=>{r(!0)}),e.get(vb).afterPreactivation=()=>(r(!0),o.closed?dt(void 0):o),i.initialNavigation()}))})];return pv(2,n)}function SL(){let n=[Ep(()=>{Ae(fo).setUpLocationChangeListener()}),{provide:GA,useValue:2}];return pv(3,n)}var AL=new We("");function DL(n){return pv(0,[{provide:AL,useExisting:xL},{provide:hv,useExisting:n}])}function TL(){return pv(8,[LA,{provide:dv,useExisting:LA}])}function ML(n){wp("NgRouterViewTransitions");let e=[{provide:UA,useValue:_L},{provide:zA,useValue:Oe({skipNextTransition:!!n?.skipInitialTransition},n)}];return pv(9,e)}var NL=[ju,{provide:Sf,useClass:Hu},fo,Af,{provide:Vs,useFactory:oQ,deps:[fo]},gb,[]],Yu=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[NL,[],{provide:$p,multi:!0,useValue:t},[],r?.errorHandler?{provide:$A,useValue:r.errorHandler}:[],{provide:Ku,useValue:r||{}},r?.useHash?cQ():lQ(),aQ(),r?.preloadingStrategy?DL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?uQ(r):[],r?.bindToComponentInputs?TL().\u0275providers:[],r?.enableViewTransitions?ML().\u0275providers:[],dQ()]}}static forChild(t){return{ngModule:n,providers:[{provide:$p,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ar({type:n});static \u0275inj=er({})}return n})();function aQ(){return{provide:EL,useFactory:()=>{let n=Ae(eF),e=Ae(jt),t=Ae(Ku),r=Ae(vb),i=Ae(Sf);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iQ(i,r,n,e,t)}}}function cQ(){return{provide:Ha,useClass:WS}}function lQ(){return{provide:Ha,useClass:Cw}}function uQ(n){return[n.initialNavigation==="disabled"?SL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?IL().\u0275providers:[]]}var qA=new We("");function dQ(){return[{provide:qA,useFactory:sQ},{provide:mw,multi:!0,useExisting:qA}]}var gv={production:!1,version:"1.0",firebase:{apiKey:"AIzaSyCcUiX0VhFp0onLlKVknBHmUfMLAUEmFb8",authDomain:"profghizzapp-7cd59.firebaseapp.com",projectId:"profghizzapp-7cd59",storageBucket:"profghizzapp-7cd59.firebasestorage.app",messagingSenderId:"142548255598",appId:"1:142548255598:web:963e0aecd134f7d7afb77f",measurementId:"G-B77VGH8SVQ"}};var PL=(()=>{let e=class e{constructor(){this.appVersion=gv.version}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Rr({type:e,selectors:[["app-header"]],standalone:!1,decls:6,vars:1,consts:[[1,"app-header"],[1,"logo"],[1,"header-actions"],[1,"version-badge"]],template:function(i,o){i&1&&(A(0,"header",0)(1,"div",1),Z(2,"Prof Ghizz"),R(),A(3,"nav",2)(4,"span",3),Z(5),R()()()),i&2&&(X(5),yr("v",o.appVersion))},styles:["[_nghost-%COMP%]{display:block}.app-header[_ngcontent-%COMP%]{height:64px;display:flex;align-items:center;justify-content:flex-start;padding:0 20px;background:#fff;border-bottom:1px solid #e6edf3;position:relative;z-index:1100;pointer-events:auto}.app-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-weight:800;color:#0f2a63;font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:auto;display:inline-flex;align-items:center;gap:10px}.open-browser[_ngcontent-%COMP%]{color:#0f2a63;text-decoration:none;font-weight:600;padding:6px 8px;border-radius:6px;transition:background-color .2s ease,color .2s ease}.open-browser[_ngcontent-%COMP%]:hover{background:#f3f7fa;color:#0b1e49}.install-btn[_ngcontent-%COMP%]{background:#1976d2;color:#fff;border:0;border-radius:6px;padding:8px 12px;font-weight:600;cursor:pointer;box-shadow:0 1px 2px #0c154014;transition:background-color .2s ease,box-shadow .2s ease,transform .02s ease-in}.install-btn[_ngcontent-%COMP%]:hover{background:#165fa8;box-shadow:0 2px 6px #0c15401f}.install-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.app-state[_ngcontent-%COMP%]{font-size:12px;font-weight:700;background:#2e7d32;color:#fff;padding:4px 8px;border-radius:999px;box-shadow:0 1px 2px #0c154014}"]});let n=e;return n})();var kL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Rr({type:e,selectors:[["app-sidebar"]],standalone:!1,decls:38,vars:0,consts:[["aria-label","Sidebar navigation",1,"app-sidebar"],["routerLink","/","routerLinkActive","active","aria-label","Home","title","Home"],["viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","role","img","aria-hidden","true","focusable","false",1,"side-svg"],["width","24","height","24","fill","none"],["d","M3 10L12 3l9 7v8a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-8z","fill","#fff"],[1,"sr-only"],["routerLink","/anagrafica","routerLinkActive","active","aria-label","Clienti","title","Clienti"],["d","M16 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8zM8 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z","fill","#fff"],["d","M2 20a6 6 0 0 1 6-6h8a6 6 0 0 1 6 6v1H2v-1z","fill","#fff"],["routerLink","/esercizi","routerLinkActive","active","aria-label","Esercizi","title","Esercizi"],["d","M13 2L3 14h7l-1 8L21 10h-7l-1-8z","fill","#fff"],["routerLink","/gestione-schede","routerLinkActive","active","aria-label","Schede","title","Schede"],["x","3","y","3","width","8","height","8","fill","#fff"],["x","13","y","3","width","8","height","8","fill","#fff"],["x","3","y","13","width","8","height","8","fill","#fff"],["x","13","y","13","width","8","height","8","fill","#fff"],["routerLink","/impostazioni","aria-label","Impostazioni","title","Impostazioni"],["d","M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8z","fill","#fff"],["d","M19.4 15a1.9 1.9 0 0 0 .3-.8l.1-1a2 2 0 0 0-1.7-2.2l-.9-.1a1.9 1.9 0 0 0-.8-.3l-.9-.2a2 2 0 0 0-1.4.3l-.8.6a2 2 0 0 0-1 .9l-.5.9c-.2.5-.7.9-1.2.9s-1-.4-1.2-.9l-.5-.9a2 2 0 0 0-1-.9l-.8-.6a2 2 0 0 0-1.4-.3l-.9.2c-.3.1-.6.2-.8.3l-.9.1A2 2 0 0 0 3 13.2l.1 1c.1.3.1.6.3.8l.1.2.4.6c.2.4.7.5 1.1.4l.8-.1c.3 0 .6-.1.9-.2l.6-.3c.4-.2 1-.1 1.4.2l.6.5c.2.2.5.4.9.3l.9-.1c.4 0 .7 0 1.1.1l.9.2c.3.1.6.2.9.2l.6.1c.4.1.8 0 1.1-.2l.6-.4.2-.1.4-.1z","fill","#fff"]],template:function(i,o){i&1&&(A(0,"aside",0)(1,"ul")(2,"li")(3,"a",1),fr(),A(4,"svg",2),bt(5,"rect",3)(6,"path",4),R(),Oo(),A(7,"span",5),Z(8,"Home"),R()()(),A(9,"li")(10,"a",6),fr(),A(11,"svg",2),bt(12,"path",7)(13,"path",8),R(),Oo(),A(14,"span",5),Z(15,"Clienti"),R()()(),A(16,"li")(17,"a",9),fr(),A(18,"svg",2),bt(19,"path",10),R(),Oo(),A(20,"span",5),Z(21,"Esercizi"),R()()(),A(22,"li")(23,"a",11),fr(),A(24,"svg",2),bt(25,"rect",12)(26,"rect",13)(27,"rect",14)(28,"rect",15),R(),Oo(),A(29,"span",5),Z(30,"Schede"),R()()(),A(31,"li")(32,"a",16),fr(),A(33,"svg",2),bt(34,"path",17)(35,"path",18),R(),Oo(),A(36,"span",5),Z(37,"Impostazioni"),R()()()()())},dependencies:[wa,HA],styles:["[_nghost-%COMP%]{display:block}.app-sidebar[_ngcontent-%COMP%]{width:80px;background:#0b2a63;padding:8px;border-right:1px solid rgba(255,255,255,.06);height:100vh;min-height:110vh;box-sizing:border-box;position:relative;z-index:1100;pointer-events:auto}.app-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:12px 0 0;margin:8px 0 0;display:flex;flex-direction:column;gap:12px;align-items:center}.app-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:10px;padding:4px 6px;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:12px;color:#fff;text-decoration:none;cursor:pointer}.app-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff0f}.app-sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#ffffff1f;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px}.app-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.icon[_ngcontent-%COMP%]{margin-right:8px}.app-sidebar[_ngcontent-%COMP%]   .side-svg[_ngcontent-%COMP%]{width:28px;height:28px;display:block}.app-sidebar[_ngcontent-%COMP%]   .sr-only[_ngcontent-%COMP%]{position:absolute;left:-9999px}.app-sidebar[_ngcontent-%COMP%]   .side-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 8px;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   .side-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.95}"]});let n=e;return n})();var RL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Rr({type:e,selectors:[["app-root"]],standalone:!1,decls:5,vars:0,consts:[[1,"app-shell"],[1,"app-main"]],template:function(i,o){i&1&&(bt(0,"app-header"),A(1,"div",0),bt(2,"app-sidebar"),A(3,"main",1),bt(4,"router-outlet"),R()())},dependencies:[uv,PL,kL],styles:["[_ngcontent-%COMP%]:root{--header-h: 64px;--sidebar-w: 80px;--bg: #f5f8fc;--panel: #ffffff;--border: #e6edf7}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;background:var(--bg)}app-header[_ngcontent-%COMP%], .app-header[_ngcontent-%COMP%]{position:relative;z-index:100;display:block;width:100%;min-height:var(--header-h);background:var(--panel);border-bottom:1px solid var(--border)}.app-shell[_ngcontent-%COMP%]{display:flex;position:relative;z-index:0;min-height:calc(100vh - var(--header-h));isolation:isolate;background:var(--bg)}app-sidebar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%]{position:relative;z-index:10;width:var(--sidebar-w);min-height:calc(100vh - var(--header-h));flex-shrink:0;background:#f8fbff;border-right:1px solid var(--border);overflow:auto;-webkit-overflow-scrolling:touch}.app-main[_ngcontent-%COMP%]{position:relative;z-index:0;flex:1 1 auto;min-width:0;padding:24px;min-height:calc(100vh - var(--header-h));background:var(--bg)}router-outlet[_ngcontent-%COMP%]{display:block;position:relative;z-index:0}.app-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:1200}.app-modal[_ngcontent-%COMP%]{position:relative;z-index:1210;background:#fff;border-radius:12px;box-shadow:0 8px 40px #0000003b;max-width:90vw;width:680px;padding:22px}.app-modal-backdrop.is-hidden[_ngcontent-%COMP%]{pointer-events:none!important;opacity:0!important}.app-shell[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto}@media (max-width: 800px){.app-shell[_ngcontent-%COMP%]{flex-direction:column;min-height:calc(100vh - var(--header-h))}app-sidebar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%]{width:100%;height:auto;min-height:auto;border-right:none;border-bottom:1px solid var(--border)}.app-main[_ngcontent-%COMP%]{min-height:auto;padding:18px}}.safe-content[_ngcontent-%COMP%]{position:relative;z-index:0}"]});let n=e;return n})();var pQ="firebase",gQ="11.10.0";Hn(pQ,gQ,"app");function Ii(n){n===void 0&&(n=Ae(Bn));let e=n.get(fp);return t=>new kt(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Zr=new Eu("ANGULARFIRE2_VERSION");function Rl(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var zc=(n,e)=>{let t=e?[e]:C_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},qp=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(qp||{}),OL=Lu()&&typeof Zone<"u"?qp.WARN:qp.SILENT;var _b=class{zone;delegate;constructor(e,t=nC){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Qr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Ae(jt);this.outsideAngular=t.runOutsideAngular(()=>new _b(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new _b(typeof Zone>"u"?void 0:Zone.current,ef))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FL=!1;function mQ(n,e){!FL&&(OL>qp.SILENT||Lu())&&(FL=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),OL>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function vQ(n){let e=Ae(jt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Df(n){let e=Ae(jt,{optional:!0});return e?e.run(()=>n()):n()}var yQ=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ci(t,()=>Df(()=>n.apply(void 0,r)))),Er=(n,e,t)=>(t||=e?qp.WARN:qp.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=Ae(Qr),s=Ae(fp),a=Ae(Gn)}catch{return mQ(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Df(()=>s.add())),i[l]=yQ(i[l],r,a));let c=vQ(()=>n.apply(this,i));return e?c instanceof kt?c.pipe(sa(o.outsideAngular),io(o.insideAngular),Ii(a)):c instanceof Promise?Df(()=>{let l=s.add();return new Promise((u,p)=>{c.then(v=>ci(a,()=>Df(()=>u(v))),v=>ci(a,()=>Df(()=>p(v)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Df(()=>c):c instanceof kt?c.pipe(sa(o.outsideAngular),io(o.insideAngular)):Df(()=>c)});var js=class{constructor(e){return e}},Ka=class{constructor(){return C_()}};function _Q(n){return n&&n.length===1?n[0]:new js(wc())}var KA=new We("angularfire2._apps"),wQ={provide:js,useFactory:_Q,deps:[[new kr,KA]]},bQ={provide:Ka,deps:[[new kr,KA]]};function xQ(n){return(e,t)=>{let r=t.get(Pi);Hn("angularfire",Zr.full,"core"),Hn("angularfire",Zr.full,"app"),Hn("angular",Qm.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new js(i)}}function LL(n,...e){return oo([wQ,bQ,{provide:KA,useFactory:xQ(n),multi:!0,deps:[jt,Bn,Qr,...e]}])}var VL=Er(zk,!0);var EQ=new Map,CQ={activated:!1,tokenObservers:[]},IQ={initialized:!1,enabled:!1};function Ya(n){return EQ.get(n)||Object.assign({},CQ)}function zL(){return IQ}var SQ="https://content-firebaseappcheck.googleapis.com/v1";var AQ="exchangeDebugToken",jL={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},pSe=1440*60*1e3;var QA=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return ee(this,null,function*(){this.stop();try{this.pending=new FE,this.pending.promise.catch(t=>{}),yield DQ(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new FE,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function DQ(n){return new Promise(e=>{setTimeout(e,n)})}var TQ={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Qu=new Fh("appCheck","AppCheck",TQ);function $L(n){if(!Ya(n).activated)throw Qu.create("use-before-activation",{appName:n.name})}function qL(r,i){return ee(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let g=yield s.getHeartbeatsHeader();g&&(o["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(g){throw Qu.create("fetch-network-error",{originalErrorMessage:g?.message})}if(c.status!==200)throw Qu.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(g){throw Qu.create("fetch-parse-error",{originalErrorMessage:g?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Qu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(u[1])*1e3,v=Date.now();return{token:l.token,expireTimeMillis:v+p,issuedAtTimeMillis:v}})}function HL(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${SQ}/projects/${t}/apps/${r}:${AQ}?key=${i}`,body:{debug_token:e}}}var MQ="firebase-app-check-database",NQ=1,XA="firebase-app-check-store";var wb=null;function PQ(){return wb||(wb=new Promise((n,e)=>{try{let t=indexedDB.open(MQ,NQ);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Qu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(XA,{keyPath:"compositeKey"})}}}catch(t){e(Qu.create("storage-open",{originalErrorMessage:t?.message}))}}),wb)}function kQ(n,e){return RQ(OQ(n),e)}function RQ(n,e){return ee(this,null,function*(){let r=(yield PQ()).transaction(XA,"readwrite"),o=r.objectStore(XA).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Qu.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function OQ(n){return`${n.options.appId}-${n.name}`}var mv=new Vh("@firebase/app-check");function YA(n,e){return Oh()?kQ(n,e).catch(t=>{mv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function GL(){return zL().enabled}function WL(){return ee(this,null,function*(){let n=zL();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var FQ={error:"UNKNOWN_ERROR"};function LQ(n){return Lk.encodeString(JSON.stringify(n),!1)}function JA(n,e=!1,t=!1){return ee(this,null,function*(){let r=n.app;$L(r);let i=Ya(r),o=i.token,s;if(o&&!vv(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(vv(l)?o=l:yield YA(r,void 0))}if(!e&&o&&vv(o))return{token:o.token};let a=!1;if(GL())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=qL(HL(r,yield WL()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield YA(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?mv.warn(l.message):t&&mv.error(l),ZA(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Ya(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?mv.warn(l.message):t&&mv.error(l),s=l}let c;return o?s?vv(o)?c={token:o.token,internalError:s}:c=ZA(s):(c={token:o.token},i.token=o,yield YA(r,o)):c=ZA(s),a&&UQ(r,c),c})}function VQ(n){return ee(this,null,function*(){let e=n.app;$L(e);let{provider:t}=Ya(e);if(GL()){let r=yield WL(),{token:i}=yield qL(HL(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function jQ(n,e,t,r){let{app:i}=n,o=Ya(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&vv(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),BL(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>BL(n))}function KL(n,e){let t=Ya(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function BL(n){let{app:e}=n,t=Ya(e),r=t.tokenRefresher;r||(r=BQ(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function BQ(n){let{app:e}=n;return new QA(()=>ee(null,null,function*(){let t=Ya(e),r;if(t.token?r=yield JA(n,!0):r=yield JA(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Ya(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},jL.RETRIAL_MIN_WAIT,jL.RETRIAL_MAX_WAIT)}function UQ(n,e){let t=Ya(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function vv(n){return n.expireTimeMillis-Date.now()>0}function ZA(n){return{token:LQ(FQ),error:n}}var eD=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ya(this.app);for(let t of e)KL(this.app,t.next);return Promise.resolve()}};function zQ(n,e){return new eD(n,e)}function $Q(n){return{getToken:e=>JA(n,e),getLimitedUseToken:()=>VQ(n),addTokenListener:e=>jQ(n,"INTERNAL",e),removeTokenListener:e=>KL(n.app,e)}}var qQ="@firebase/app-check",HQ="0.10.1";var GQ="app-check",UL="app-check-internal";function WQ(){Ts(new Ui(GQ,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return zQ(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(UL).initialize()})),Ts(new Ui(UL,n=>{let e=n.getProvider("app-check").getImmediate();return $Q(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Hn(qQ,HQ)}WQ();var KQ="app-check";var os=class{constructor(){return zc(KQ)}};var YQ=["localhost","0.0.0.0","127.0.0.1"],ASe=typeof window<"u"&&YQ.includes(window.location.hostname);var YL="auth",yv=class{constructor(e){return e}},Tf=class{constructor(){return zc(YL)}};var nD=new We("angularfire2.auth-instances");function KX(n,e){let t=Rl(YL,n,e);return t&&new yv(t)}function YX(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new yv(r)}}var ZX={provide:Tf,deps:[[new kr,nD]]},QX={provide:yv,useFactory:KX,deps:[[new kr,nD],js]};function ZL(n,...e){return Hn("angularfire",Zr.full,"auth"),oo([QX,ZX,{provide:nD,useFactory:YX(n),multi:!0,deps:[jt,Bn,Qr,Ka,[new kr,os],...e]}])}var QL=Er(jE,!0);var XL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},JL={};var Ol,rD;(function(){var n;function e(z,T){function I(){}I.prototype=T.prototype,z.D=T.prototype,z.prototype=new I,z.prototype.constructor=z,z.C=function(V,b,S){for(var D=Array(arguments.length-2),te=2;te<arguments.length;te++)D[te-2]=arguments[te];return T.prototype[b].apply(V,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(z,T,I){I||(I=0);var V=Array(16);if(typeof T=="string")for(var b=0;16>b;++b)V[b]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(b=0;16>b;++b)V[b]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=z.g[0],I=z.g[1],b=z.g[2];var S=z.g[3],D=T+(S^I&(b^S))+V[0]+3614090360&4294967295;T=I+(D<<7&4294967295|D>>>25),D=S+(b^T&(I^b))+V[1]+3905402710&4294967295,S=T+(D<<12&4294967295|D>>>20),D=b+(I^S&(T^I))+V[2]+606105819&4294967295,b=S+(D<<17&4294967295|D>>>15),D=I+(T^b&(S^T))+V[3]+3250441966&4294967295,I=b+(D<<22&4294967295|D>>>10),D=T+(S^I&(b^S))+V[4]+4118548399&4294967295,T=I+(D<<7&4294967295|D>>>25),D=S+(b^T&(I^b))+V[5]+1200080426&4294967295,S=T+(D<<12&4294967295|D>>>20),D=b+(I^S&(T^I))+V[6]+2821735955&4294967295,b=S+(D<<17&4294967295|D>>>15),D=I+(T^b&(S^T))+V[7]+4249261313&4294967295,I=b+(D<<22&4294967295|D>>>10),D=T+(S^I&(b^S))+V[8]+1770035416&4294967295,T=I+(D<<7&4294967295|D>>>25),D=S+(b^T&(I^b))+V[9]+2336552879&4294967295,S=T+(D<<12&4294967295|D>>>20),D=b+(I^S&(T^I))+V[10]+4294925233&4294967295,b=S+(D<<17&4294967295|D>>>15),D=I+(T^b&(S^T))+V[11]+2304563134&4294967295,I=b+(D<<22&4294967295|D>>>10),D=T+(S^I&(b^S))+V[12]+1804603682&4294967295,T=I+(D<<7&4294967295|D>>>25),D=S+(b^T&(I^b))+V[13]+4254626195&4294967295,S=T+(D<<12&4294967295|D>>>20),D=b+(I^S&(T^I))+V[14]+2792965006&4294967295,b=S+(D<<17&4294967295|D>>>15),D=I+(T^b&(S^T))+V[15]+1236535329&4294967295,I=b+(D<<22&4294967295|D>>>10),D=T+(b^S&(I^b))+V[1]+4129170786&4294967295,T=I+(D<<5&4294967295|D>>>27),D=S+(I^b&(T^I))+V[6]+3225465664&4294967295,S=T+(D<<9&4294967295|D>>>23),D=b+(T^I&(S^T))+V[11]+643717713&4294967295,b=S+(D<<14&4294967295|D>>>18),D=I+(S^T&(b^S))+V[0]+3921069994&4294967295,I=b+(D<<20&4294967295|D>>>12),D=T+(b^S&(I^b))+V[5]+3593408605&4294967295,T=I+(D<<5&4294967295|D>>>27),D=S+(I^b&(T^I))+V[10]+38016083&4294967295,S=T+(D<<9&4294967295|D>>>23),D=b+(T^I&(S^T))+V[15]+3634488961&4294967295,b=S+(D<<14&4294967295|D>>>18),D=I+(S^T&(b^S))+V[4]+3889429448&4294967295,I=b+(D<<20&4294967295|D>>>12),D=T+(b^S&(I^b))+V[9]+568446438&4294967295,T=I+(D<<5&4294967295|D>>>27),D=S+(I^b&(T^I))+V[14]+3275163606&4294967295,S=T+(D<<9&4294967295|D>>>23),D=b+(T^I&(S^T))+V[3]+4107603335&4294967295,b=S+(D<<14&4294967295|D>>>18),D=I+(S^T&(b^S))+V[8]+1163531501&4294967295,I=b+(D<<20&4294967295|D>>>12),D=T+(b^S&(I^b))+V[13]+2850285829&4294967295,T=I+(D<<5&4294967295|D>>>27),D=S+(I^b&(T^I))+V[2]+4243563512&4294967295,S=T+(D<<9&4294967295|D>>>23),D=b+(T^I&(S^T))+V[7]+1735328473&4294967295,b=S+(D<<14&4294967295|D>>>18),D=I+(S^T&(b^S))+V[12]+2368359562&4294967295,I=b+(D<<20&4294967295|D>>>12),D=T+(I^b^S)+V[5]+4294588738&4294967295,T=I+(D<<4&4294967295|D>>>28),D=S+(T^I^b)+V[8]+2272392833&4294967295,S=T+(D<<11&4294967295|D>>>21),D=b+(S^T^I)+V[11]+1839030562&4294967295,b=S+(D<<16&4294967295|D>>>16),D=I+(b^S^T)+V[14]+4259657740&4294967295,I=b+(D<<23&4294967295|D>>>9),D=T+(I^b^S)+V[1]+2763975236&4294967295,T=I+(D<<4&4294967295|D>>>28),D=S+(T^I^b)+V[4]+1272893353&4294967295,S=T+(D<<11&4294967295|D>>>21),D=b+(S^T^I)+V[7]+4139469664&4294967295,b=S+(D<<16&4294967295|D>>>16),D=I+(b^S^T)+V[10]+3200236656&4294967295,I=b+(D<<23&4294967295|D>>>9),D=T+(I^b^S)+V[13]+681279174&4294967295,T=I+(D<<4&4294967295|D>>>28),D=S+(T^I^b)+V[0]+3936430074&4294967295,S=T+(D<<11&4294967295|D>>>21),D=b+(S^T^I)+V[3]+3572445317&4294967295,b=S+(D<<16&4294967295|D>>>16),D=I+(b^S^T)+V[6]+76029189&4294967295,I=b+(D<<23&4294967295|D>>>9),D=T+(I^b^S)+V[9]+3654602809&4294967295,T=I+(D<<4&4294967295|D>>>28),D=S+(T^I^b)+V[12]+3873151461&4294967295,S=T+(D<<11&4294967295|D>>>21),D=b+(S^T^I)+V[15]+530742520&4294967295,b=S+(D<<16&4294967295|D>>>16),D=I+(b^S^T)+V[2]+3299628645&4294967295,I=b+(D<<23&4294967295|D>>>9),D=T+(b^(I|~S))+V[0]+4096336452&4294967295,T=I+(D<<6&4294967295|D>>>26),D=S+(I^(T|~b))+V[7]+1126891415&4294967295,S=T+(D<<10&4294967295|D>>>22),D=b+(T^(S|~I))+V[14]+2878612391&4294967295,b=S+(D<<15&4294967295|D>>>17),D=I+(S^(b|~T))+V[5]+4237533241&4294967295,I=b+(D<<21&4294967295|D>>>11),D=T+(b^(I|~S))+V[12]+1700485571&4294967295,T=I+(D<<6&4294967295|D>>>26),D=S+(I^(T|~b))+V[3]+2399980690&4294967295,S=T+(D<<10&4294967295|D>>>22),D=b+(T^(S|~I))+V[10]+4293915773&4294967295,b=S+(D<<15&4294967295|D>>>17),D=I+(S^(b|~T))+V[1]+2240044497&4294967295,I=b+(D<<21&4294967295|D>>>11),D=T+(b^(I|~S))+V[8]+1873313359&4294967295,T=I+(D<<6&4294967295|D>>>26),D=S+(I^(T|~b))+V[15]+4264355552&4294967295,S=T+(D<<10&4294967295|D>>>22),D=b+(T^(S|~I))+V[6]+2734768916&4294967295,b=S+(D<<15&4294967295|D>>>17),D=I+(S^(b|~T))+V[13]+1309151649&4294967295,I=b+(D<<21&4294967295|D>>>11),D=T+(b^(I|~S))+V[4]+4149444226&4294967295,T=I+(D<<6&4294967295|D>>>26),D=S+(I^(T|~b))+V[11]+3174756917&4294967295,S=T+(D<<10&4294967295|D>>>22),D=b+(T^(S|~I))+V[2]+718787259&4294967295,b=S+(D<<15&4294967295|D>>>17),D=I+(S^(b|~T))+V[9]+3951481745&4294967295,z.g[0]=z.g[0]+T&4294967295,z.g[1]=z.g[1]+(b+(D<<21&4294967295|D>>>11))&4294967295,z.g[2]=z.g[2]+b&4294967295,z.g[3]=z.g[3]+S&4294967295}r.prototype.u=function(z,T){T===void 0&&(T=z.length);for(var I=T-this.blockSize,V=this.B,b=this.h,S=0;S<T;){if(b==0)for(;S<=I;)i(this,z,S),S+=this.blockSize;if(typeof z=="string"){for(;S<T;)if(V[b++]=z.charCodeAt(S++),b==this.blockSize){i(this,V),b=0;break}}else for(;S<T;)if(V[b++]=z[S++],b==this.blockSize){i(this,V),b=0;break}}this.h=b,this.o+=T},r.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var T=1;T<z.length-8;++T)z[T]=0;var I=8*this.o;for(T=z.length-8;T<z.length;++T)z[T]=I&255,I/=256;for(this.u(z),z=Array(16),T=I=0;4>T;++T)for(var V=0;32>V;V+=8)z[I++]=this.g[T]>>>V&255;return z};function o(z,T){var I=a;return Object.prototype.hasOwnProperty.call(I,z)?I[z]:I[z]=T(z)}function s(z,T){this.h=T;for(var I=[],V=!0,b=z.length-1;0<=b;b--){var S=z[b]|0;V&&S==T||(I[b]=S,V=!1)}this.g=I}var a={};function c(z){return-128<=z&&128>z?o(z,function(T){return new s([T|0],0>T?-1:0)}):new s([z|0],0>z?-1:0)}function l(z){if(isNaN(z)||!isFinite(z))return p;if(0>z)return M(l(-z));for(var T=[],I=1,V=0;z>=I;V++)T[V]=z/I|0,I*=4294967296;return new s(T,0)}function u(z,T){if(z.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(z.charAt(0)=="-")return M(u(z.substring(1),T));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(T,8)),V=p,b=0;b<z.length;b+=8){var S=Math.min(8,z.length-b),D=parseInt(z.substring(b,b+S),T);8>S?(S=l(Math.pow(T,S)),V=V.j(S).add(l(D))):(V=V.j(I),V=V.add(l(D)))}return V}var p=c(0),v=c(1),g=c(16777216);n=s.prototype,n.m=function(){if(C(this))return-M(this).m();for(var z=0,T=1,I=0;I<this.g.length;I++){var V=this.i(I);z+=(0<=V?V:4294967296+V)*T,T*=4294967296}return z},n.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(E(this))return"0";if(C(this))return"-"+M(this).toString(z);for(var T=l(Math.pow(z,6)),I=this,V="";;){var b=H(I,T).g;I=N(I,b.j(T));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(z);if(I=b,E(I))return S+V;for(;6>S.length;)S="0"+S;V=S+V}},n.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function E(z){if(z.h!=0)return!1;for(var T=0;T<z.g.length;T++)if(z.g[T]!=0)return!1;return!0}function C(z){return z.h==-1}n.l=function(z){return z=N(this,z),C(z)?-1:E(z)?0:1};function M(z){for(var T=z.g.length,I=[],V=0;V<T;V++)I[V]=~z.g[V];return new s(I,~z.h).add(v)}n.abs=function(){return C(this)?M(this):this},n.add=function(z){for(var T=Math.max(this.g.length,z.g.length),I=[],V=0,b=0;b<=T;b++){var S=V+(this.i(b)&65535)+(z.i(b)&65535),D=(S>>>16)+(this.i(b)>>>16)+(z.i(b)>>>16);V=D>>>16,S&=65535,D&=65535,I[b]=D<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function N(z,T){return z.add(M(T))}n.j=function(z){if(E(this)||E(z))return p;if(C(this))return C(z)?M(this).j(M(z)):M(M(this).j(z));if(C(z))return M(this.j(M(z)));if(0>this.l(g)&&0>z.l(g))return l(this.m()*z.m());for(var T=this.g.length+z.g.length,I=[],V=0;V<2*T;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(var b=0;b<z.g.length;b++){var S=this.i(V)>>>16,D=this.i(V)&65535,te=z.i(b)>>>16,we=z.i(b)&65535;I[2*V+2*b]+=D*we,Q(I,2*V+2*b),I[2*V+2*b+1]+=S*we,Q(I,2*V+2*b+1),I[2*V+2*b+1]+=D*te,Q(I,2*V+2*b+1),I[2*V+2*b+2]+=S*te,Q(I,2*V+2*b+2)}for(V=0;V<T;V++)I[V]=I[2*V+1]<<16|I[2*V];for(V=T;V<2*T;V++)I[V]=0;return new s(I,0)};function Q(z,T){for(;(z[T]&65535)!=z[T];)z[T+1]+=z[T]>>>16,z[T]&=65535,T++}function j(z,T){this.g=z,this.h=T}function H(z,T){if(E(T))throw Error("division by zero");if(E(z))return new j(p,p);if(C(z))return T=H(M(z),T),new j(M(T.g),M(T.h));if(C(T))return T=H(z,M(T)),new j(M(T.g),T.h);if(30<z.g.length){if(C(z)||C(T))throw Error("slowDivide_ only works with positive integers.");for(var I=v,V=T;0>=V.l(z);)I=oe(I),V=oe(V);var b=pe(I,1),S=pe(V,1);for(V=pe(V,2),I=pe(I,2);!E(V);){var D=S.add(V);0>=D.l(z)&&(b=b.add(I),S=D),V=pe(V,1),I=pe(I,1)}return T=N(z,b.j(T)),new j(b,T)}for(b=p;0<=z.l(T);){for(I=Math.max(1,Math.floor(z.m()/T.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),S=l(I),D=S.j(T);C(D)||0<D.l(z);)I-=V,S=l(I),D=S.j(T);E(S)&&(S=v),b=b.add(S),z=N(z,D)}return new j(b,z)}n.A=function(z){return H(this,z).h},n.and=function(z){for(var T=Math.max(this.g.length,z.g.length),I=[],V=0;V<T;V++)I[V]=this.i(V)&z.i(V);return new s(I,this.h&z.h)},n.or=function(z){for(var T=Math.max(this.g.length,z.g.length),I=[],V=0;V<T;V++)I[V]=this.i(V)|z.i(V);return new s(I,this.h|z.h)},n.xor=function(z){for(var T=Math.max(this.g.length,z.g.length),I=[],V=0;V<T;V++)I[V]=this.i(V)^z.i(V);return new s(I,this.h^z.h)};function oe(z){for(var T=z.g.length+1,I=[],V=0;V<T;V++)I[V]=z.i(V)<<1|z.i(V-1)>>>31;return new s(I,z.h)}function pe(z,T){var I=T>>5;T%=32;for(var V=z.g.length-I,b=[],S=0;S<V;S++)b[S]=0<T?z.i(S+I)>>>T|z.i(S+I+1)<<32-T:z.i(S+I);return new s(b,z.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rD=JL.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=u,Ol=JL.Integer=s}).apply(typeof XL<"u"?XL:typeof self<"u"?self:typeof window<"u"?window:{});var bb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fl={};var iD,XX,Hp,oD,_v,xb,sD,aD,cD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,x){return f==Array.prototype||f==Object.prototype||(f[_]=x.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof bb=="object"&&bb];for(var _=0;_<f.length;++_){var x=f[_];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function i(f,_){if(_)e:{var x=r;f=f.split(".");for(var B=0;B<f.length-1;B++){var le=f[B];if(!(le in x))break e;x=x[le]}f=f[f.length-1],B=x[f],_=_(B),_!=B&&_!=null&&e(x,f,{configurable:!0,writable:!0,value:_})}}function o(f,_){f instanceof String&&(f+="");var x=0,B=!1,le={next:function(){if(!B&&x<f.length){var be=x++;return{value:_(be,f[be]),done:!1}}return B=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}i("Array.prototype.values",function(f){return f||function(){return o(this,function(_,x){return x})}});var s=s||{},a=this||self;function c(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function l(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function u(f,_,x){return f.call.apply(f.bind,arguments)}function p(f,_,x){if(!f)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,B),f.apply(_,le)}}return function(){return f.apply(_,arguments)}}function v(f,_,x){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:p,v.apply(null,arguments)}function g(f,_){var x=Array.prototype.slice.call(arguments,1);return function(){var B=x.slice();return B.push.apply(B,arguments),f.apply(this,B)}}function E(f,_){function x(){}x.prototype=_.prototype,f.aa=_.prototype,f.prototype=new x,f.prototype.constructor=f,f.Qb=function(B,le,be){for(var Ye=Array(arguments.length-2),Dn=2;Dn<arguments.length;Dn++)Ye[Dn-2]=arguments[Dn];return _.prototype[le].apply(B,Ye)}}function C(f){let _=f.length;if(0<_){let x=Array(_);for(let B=0;B<_;B++)x[B]=f[B];return x}return[]}function M(f,_){for(let x=1;x<arguments.length;x++){let B=arguments[x];if(c(B)){let le=f.length||0,be=B.length||0;f.length=le+be;for(let Ye=0;Ye<be;Ye++)f[le+Ye]=B[Ye]}else f.push(B)}}class N{constructor(_,x){this.i=_,this.j=x,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function Q(f){return/^[\s\xa0]*$/.test(f)}function j(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function H(f){return H[" "](f),f}H[" "]=function(){};var oe=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function pe(f,_,x){for(let B in f)_.call(x,f[B],B,f)}function z(f,_){for(let x in f)_.call(void 0,f[x],x,f)}function T(f){let _={};for(let x in f)_[x]=f[x];return _}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,_){let x,B;for(let le=1;le<arguments.length;le++){B=arguments[le];for(x in B)f[x]=B[x];for(let be=0;be<I.length;be++)x=I[be],Object.prototype.hasOwnProperty.call(B,x)&&(f[x]=B[x])}}function b(f){var _=1;f=f.split(":");let x=[];for(;0<_&&f.length;)x.push(f.shift()),_--;return f.length&&x.push(f.join(":")),x}function S(f){a.setTimeout(()=>{throw f},0)}function D(){var f=Me;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class te{constructor(){this.h=this.g=null}add(_,x){let B=we.get();B.set(_,x),this.h?this.h.next=B:this.g=B,this.h=B}}var we=new N(()=>new De,f=>f.reset());class De{constructor(){this.next=this.g=this.h=null}set(_,x){this.h=_,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,he=!1,Me=new te,Ke=()=>{let f=a.Promise.resolve(void 0);Se=()=>{f.then(Le)}};var Le=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(x){S(x)}var _=we;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}he=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let x=()=>{};a.addEventListener("test",x,_),a.removeEventListener("test",x,_)}catch{}return f})();function re(f,_){if(G.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var x=this.type=f.type,B=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(oe){e:{try{H(_.nodeName);var le=!0;break e}catch{}le=!1}le||(_=null)}}else x=="mouseover"?_=f.fromElement:x=="mouseout"&&(_=f.toElement);this.relatedTarget=_,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ae[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&re.aa.h.call(this)}}E(re,G);var ae={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function _e(f,_,x,B,le){this.listener=f,this.proxy=null,this.src=_,this.type=x,this.capture=!!B,this.ha=le,this.key=++Ie,this.da=this.fa=!1}function Te(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ze(f){this.src=f,this.g={},this.h=0}ze.prototype.add=function(f,_,x,B,le){var be=f.toString();f=this.g[be],f||(f=this.g[be]=[],this.h++);var Ye=Je(f,_,B,le);return-1<Ye?(_=f[Ye],x||(_.fa=!1)):(_=new _e(_,this.src,be,!!B,le),_.fa=x,f.push(_)),_};function Qe(f,_){var x=_.type;if(x in f.g){var B=f.g[x],le=Array.prototype.indexOf.call(B,_,void 0),be;(be=0<=le)&&Array.prototype.splice.call(B,le,1),be&&(Te(_),f.g[x].length==0&&(delete f.g[x],f.h--))}}function Je(f,_,x,B){for(var le=0;le<f.length;++le){var be=f[le];if(!be.da&&be.listener==_&&be.capture==!!x&&be.ha==B)return le}return-1}var lt="closure_lm_"+(1e6*Math.random()|0),q={};function He(f,_,x,B,le){if(B&&B.once)return je(f,_,x,B,le);if(Array.isArray(_)){for(var be=0;be<_.length;be++)He(f,_[be],x,B,le);return null}return x=Ut(x),f&&f[fe]?f.K(_,x,l(B)?!!B.capture:!!B,le):Nt(f,_,x,!1,B,le)}function Nt(f,_,x,B,le,be){if(!_)throw Error("Invalid event type");var Ye=l(le)?!!le.capture:!!le,Dn=yn(f);if(Dn||(f[lt]=Dn=new ze(f)),x=Dn.add(_,x,B,Ye,be),x.proxy)return x;if(B=St(),x.proxy=B,B.src=f,B.listener=x,f.addEventListener)J||(le=Ye),le===void 0&&(le=!1),f.addEventListener(_.toString(),B,le);else if(f.attachEvent)f.attachEvent(Dt(_.toString()),B);else if(f.addListener&&f.removeListener)f.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return x}function St(){function f(x){return _.call(f.src,f.listener,x)}let _=It;return f}function je(f,_,x,B,le){if(Array.isArray(_)){for(var be=0;be<_.length;be++)je(f,_[be],x,B,le);return null}return x=Ut(x),f&&f[fe]?f.L(_,x,l(B)?!!B.capture:!!B,le):Nt(f,_,x,!0,B,le)}function pt(f,_,x,B,le){if(Array.isArray(_))for(var be=0;be<_.length;be++)pt(f,_[be],x,B,le);else B=l(B)?!!B.capture:!!B,x=Ut(x),f&&f[fe]?(f=f.i,_=String(_).toString(),_ in f.g&&(be=f.g[_],x=Je(be,x,B,le),-1<x&&(Te(be[x]),Array.prototype.splice.call(be,x,1),be.length==0&&(delete f.g[_],f.h--)))):f&&(f=yn(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Je(_,x,B,le)),(x=-1<f?_[f]:null)&&it(x))}function it(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[fe])Qe(_.i,f);else{var x=f.type,B=f.proxy;_.removeEventListener?_.removeEventListener(x,B,f.capture):_.detachEvent?_.detachEvent(Dt(x),B):_.addListener&&_.removeListener&&_.removeListener(B),(x=yn(_))?(Qe(x,f),x.h==0&&(x.src=null,_[lt]=null)):Te(f)}}}function Dt(f){return f in q?q[f]:q[f]="on"+f}function It(f,_){if(f.da)f=!0;else{_=new re(_,this);var x=f.listener,B=f.ha||f.src;f.fa&&it(f),f=x.call(B,_)}return f}function yn(f){return f=f[lt],f instanceof ze?f:null}var en="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ut(f){return typeof f=="function"?f:(f[en]||(f[en]=function(_){return f.handleEvent(_)}),f[en])}function Lt(){F.call(this),this.i=new ze(this),this.M=this,this.F=null}E(Lt,F),Lt.prototype[fe]=!0,Lt.prototype.removeEventListener=function(f,_,x,B){pt(this,f,_,x,B)};function Vt(f,_){var x,B=f.F;if(B)for(x=[];B;B=B.F)x.push(B);if(f=f.M,B=_.type||_,typeof _=="string")_=new G(_,f);else if(_ instanceof G)_.target=_.target||f;else{var le=_;_=new G(B,f),V(_,le)}if(le=!0,x)for(var be=x.length-1;0<=be;be--){var Ye=_.g=x[be];le=ft(Ye,B,!0,_)&&le}if(Ye=_.g=f,le=ft(Ye,B,!0,_)&&le,le=ft(Ye,B,!1,_)&&le,x)for(be=0;be<x.length;be++)Ye=_.g=x[be],le=ft(Ye,B,!1,_)&&le}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var x=f.g[_],B=0;B<x.length;B++)Te(x[B]);delete f.g[_],f.h--}}this.F=null},Lt.prototype.K=function(f,_,x,B){return this.i.add(String(f),_,!1,x,B)},Lt.prototype.L=function(f,_,x,B){return this.i.add(String(f),_,!0,x,B)};function ft(f,_,x,B){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var le=!0,be=0;be<_.length;++be){var Ye=_[be];if(Ye&&!Ye.da&&Ye.capture==x){var Dn=Ye.listener,Mr=Ye.ha||Ye.src;Ye.fa&&Qe(f.i,Ye),le=Dn.call(Mr,B)!==!1&&le}}return le&&!B.defaultPrevented}function Qt(f,_,x){if(typeof f=="function")x&&(f=v(f,x));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(f,_||0)}function Et(f){f.g=Qt(()=>{f.g=null,f.i&&(f.i=!1,Et(f))},f.l);let _=f.h;f.h=null,f.m.apply(null,_)}class Ar extends F{constructor(_,x){super(),this.m=_,this.l=x,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(f){F.call(this),this.h=f,this.g={}}E(vn,F);var sn=[];function an(f){pe(f.g,function(_,x){this.g.hasOwnProperty(x)&&it(_)},f),f.g={}}vn.prototype.N=function(){vn.aa.N.call(this),an(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yn=a.JSON.stringify,Pt=a.JSON.parse,Zn=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Ot(){}Ot.prototype.h=null;function Yt(f){return f.h||(f.h=f.i())}function rr(){}var tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rt(){G.call(this,"d")}E(Rt,G);function In(){G.call(this,"c")}E(In,G);var bo={},gi=null;function Ho(){return gi=gi||new Lt}bo.La="serverreachability";function hs(f){G.call(this,bo.La,f)}E(hs,G);function Mt(f){let _=Ho();Vt(_,new hs(_))}bo.STAT_EVENT="statevent";function Ys(f,_){G.call(this,bo.STAT_EVENT,f),this.stat=_}E(Ys,G);function pr(f){let _=Ho();Vt(_,new Ys(_,f))}bo.Ma="timingevent";function xo(f,_){G.call(this,bo.Ma,f),this.size=_}E(xo,G);function Di(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},_)}function Qn(){this.g=!0}Qn.prototype.xa=function(){this.g=!1};function si(f,_,x,B,le,be){f.info(function(){if(f.g)if(be)for(var Ye="",Dn=be.split("&"),Mr=0;Mr<Dn.length;Mr++){var Ht=Dn[Mr].split("=");if(1<Ht.length){var ur=Ht[0];Ht=Ht[1];var Nr=ur.split("_");Ye=2<=Nr.length&&Nr[1]=="type"?Ye+(ur+"="+Ht+"&"):Ye+(ur+"=redacted&")}}else Ye=null;else Ye=be;return"XMLHTTP REQ ("+B+") [attempt "+le+"]: "+_+`
`+x+`
`+Ye})}function mi(f,_,x,B,le,be,Ye){f.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+le+"]: "+_+`
`+x+`
`+be+" "+Ye})}function Go(f,_,x,B){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+ps(f,x)+(B?" "+B:"")})}function cc(f,_){f.info(function(){return"TIMEOUT: "+_})}Qn.prototype.info=function(){};function ps(f,_){if(!f.g)return _;if(!_)return null;try{var x=JSON.parse(_);if(x){for(f=0;f<x.length;f++)if(Array.isArray(x[f])){var B=x[f];if(!(2>B.length)){var le=B[1];if(Array.isArray(le)&&!(1>le.length)){var be=le[0];if(be!="noop"&&be!="stop"&&be!="close")for(var Ye=1;Ye<le.length;Ye++)le[Ye]=""}}}}return Yn(x)}catch{return _}}var Eo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Co;function Fi(){}E(Fi,Ot),Fi.prototype.g=function(){return new XMLHttpRequest},Fi.prototype.i=function(){return{}},Co=new Fi;function Qi(f,_,x,B){this.j=f,this.i=_,this.l=x,this.R=B||1,this.U=new vn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gs}function gs(){this.i=null,this.g="",this.h=!1}var lc={},uc={};function dc(f,_,x){f.L=1,f.v=dl(Ko(_)),f.m=x,f.P=!0,cl(f,null)}function cl(f,_){f.F=Date.now(),ll(f),f.A=Ko(f.v);var x=f.A,B=f.R;Array.isArray(B)||(B=[String(B)]),qt(x.i,"t",B),f.C=0,x=f.j.J,f.h=new gs,f.g=Tr(f.j,x?_:null,!f.m),0<f.O&&(f.M=new Ar(v(f.Y,f,f.g),f.O)),_=f.U,x=f.g,B=f.ca;var le="readystatechange";Array.isArray(le)||(le&&(sn[0]=le.toString()),le=sn);for(var be=0;be<le.length;be++){var Ye=He(x,le[be],B||_.handleEvent,!1,_.h||_);if(!Ye)break;_.g[Ye.key]=Ye}_=f.H?T(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),Mt(),si(f.i,f.u,f.A,f.l,f.R,f.m)}Qi.prototype.ca=function(f){f=f.target;let _=this.M;_&&Yo(f)==3?_.j():this.Y(f)},Qi.prototype.Y=function(f){try{if(f==this.g)e:{let Nr=Yo(this.g);var _=this.g.Ba();let Ta=this.g.Z();if(!(3>Nr)&&(Nr!=3||this.g&&(this.h.h||this.g.oa()||qd(this.g)))){this.J||Nr!=4||_==7||(_==8||0>=Ta?Mt(3):Mt(2)),Xi(this);var x=this.g.Z();this.X=x;t:if(Ch(this)){var B=qd(this.g);f="";var le=B.length,be=Yo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zs(this),Ca(this);var Ye="";break t}this.h.i=new a.TextDecoder}for(_=0;_<le;_++)this.h.h=!0,f+=this.h.i.decode(B[_],{stream:!(be&&_==le-1)});B.length=0,this.h.g+=f,this.C=0,Ye=this.h.g}else Ye=this.g.oa();if(this.o=x==200,mi(this.i,this.u,this.A,this.l,this.R,Nr,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Dn,Mr=this.g;if((Dn=Mr.g?Mr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Dn)){var Ht=Dn;break t}}Ht=null}if(x=Ht)Go(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ul(this,x);else{this.o=!1,this.s=3,pr(12),Zs(this),Ca(this);break e}}if(this.P){x=!0;let wr;for(;!this.J&&this.C<Ye.length;)if(wr=Fd(this,Ye),wr==uc){Nr==4&&(this.s=4,pr(14),x=!1),Go(this.i,this.l,null,"[Incomplete Response]");break}else if(wr==lc){this.s=4,pr(15),Go(this.i,this.l,Ye,"[Invalid Chunk]"),x=!1;break}else Go(this.i,this.l,wr,null),ul(this,wr);if(Ch(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nr!=4||Ye.length!=0||this.h.h||(this.s=1,pr(16),x=!1),this.o=this.o&&x,!x)Go(this.i,this.l,Ye,"[Invalid Chunked Response]"),Zs(this),Ca(this);else if(0<Ye.length&&!this.W){this.W=!0;var ur=this.j;ur.g==this&&ur.ba&&!ur.M&&(ur.j.info("Great, no buffering proxy detected. Bytes received: "+Ye.length),gt(ur),ur.M=!0,pr(11))}}else Go(this.i,this.l,Ye,null),ul(this,Ye);Nr==4&&Zs(this),this.o&&!this.J&&(Nr==4?_n(this.j,this):(this.o=!1,ll(this)))}else Aa(this.g),x==400&&0<Ye.indexOf("Unknown SID")?(this.s=3,pr(12)):(this.s=0,pr(13)),Zs(this),Ca(this)}}}catch{}finally{}};function Ch(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Fd(f,_){var x=f.C,B=_.indexOf(`
`,x);return B==-1?uc:(x=Number(_.substring(x,B)),isNaN(x)?lc:(B+=1,B+x>_.length?uc:(_=_.slice(B,B+x),f.C=B+x,_)))}Qi.prototype.cancel=function(){this.J=!0,Zs(this)};function ll(f){f.S=Date.now()+f.I,Ld(f,f.I)}function Ld(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Di(v(f.ba,f),_)}function Xi(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Qi.prototype.ba=function(){this.B=null;let f=Date.now();0<=f-this.S?(cc(this.i,this.A),this.L!=2&&(Mt(),pr(17)),Zs(this),this.s=2,Ca(this)):Ld(this,this.S-f)};function Ca(f){f.j.G==0||f.J||_n(f.j,f)}function Zs(f){Xi(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,an(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function ul(f,_){try{var x=f.j;if(x.G!=0&&(x.g==f||fc(x.h,f))){if(!f.K&&fc(x.h,f)&&x.G==3){try{var B=x.Da.g.parse(_)}catch{B=null}if(Array.isArray(B)&&B.length==3){var le=B;if(le[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<f.F)Wt(x),ml(x);else break e;ct(x),pr(18)}}else x.za=le[1],0<x.za-x.T&&37500>le[2]&&x.F&&x.v==0&&!x.C&&(x.C=Di(v(x.Za,x),6e3));if(1>=ms(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Jn(x,11)}else if((f.K||x.g==f)&&Wt(x),!Q(_))for(le=x.Da.g.parse(_),_=0;_<le.length;_++){let Ht=le[_];if(x.T=Ht[0],Ht=Ht[1],x.G==2)if(Ht[0]=="c"){x.K=Ht[1],x.ia=Ht[2];let ur=Ht[3];ur!=null&&(x.la=ur,x.j.info("VER="+x.la));let Nr=Ht[4];Nr!=null&&(x.Aa=Nr,x.j.info("SVER="+x.Aa));let Ta=Ht[5];Ta!=null&&typeof Ta=="number"&&0<Ta&&(B=1.5*Ta,x.L=B,x.j.info("backChannelRequestTimeoutMs_="+B)),B=x;let wr=f.g;if(wr){let na=wr.g?wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var be=B.h;be.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(Bd(be,be.h),be.h=null))}if(B.D){let vl=wr.g?wr.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(B.ya=vl,Ln(B.I,B.D,vl))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-f.F,x.j.info("Handshake RTT: "+x.R+"ms")),B=x;var Ye=f;if(B.qa=Lr(B,B.J?B.ia:null,B.W),Ye.K){Dr(B.h,Ye);var Dn=Ye,Mr=B.L;Mr&&(Dn.I=Mr),Dn.B&&(Xi(Dn),ll(Dn)),B.g=Ye}else Ue(B);0<x.i.length&&P(x)}else Ht[0]!="stop"&&Ht[0]!="close"||Jn(x,7);else x.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Jn(x,7):Da(x):Ht[0]!="noop"&&x.l&&x.l.ta(Ht),x.v=0)}}Mt(4)}catch{}}var Ih=class{constructor(f,_){this.g=f,this.map=_}};function Vd(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jd(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ms(f){return f.h?1:f.g?f.g.size:0}function fc(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Bd(f,_){f.g?f.g.add(_):f.h=_}function Dr(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Vd.prototype.cancel=function(){if(this.i=Ud(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function Ud(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(let x of f.g.values())_=_.concat(x.D);return _}return C(f.i)}function Qs(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var _=[],x=f.length,B=0;B<x;B++)_.push(f[B]);return _}_=[],x=0;for(B in f)_[x++]=f[B];return _}function Ql(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var _=[];f=f.length;for(var x=0;x<f;x++)_.push(x);return _}_=[],x=0;for(let B in f)_[x++]=B;return _}}}function zd(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var x=Ql(f),B=Qs(f),le=B.length,be=0;be<le;be++)_.call(void 0,B[be],x&&x[be],f)}var Io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $r(f,_){if(f){f=f.split("&");for(var x=0;x<f.length;x++){var B=f[x].indexOf("="),le=null;if(0<=B){var be=f[x].substring(0,B);le=f[x].substring(B+1)}else be=f[x];_(be,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Li(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Li){this.h=f.h,Xl(this,f.j),this.o=f.o,this.g=f.g,Jl(this,f.s),this.l=f.l;var _=f.i,x=new fl;x.i=_.i,_.g&&(x.g=new Map(_.g),x.h=_.h),vs(this,x),this.m=f.m}else f&&(_=String(f).match(Io))?(this.h=!1,Xl(this,_[1]||"",!0),this.o=Xs(_[2]||""),this.g=Xs(_[3]||"",!0),Jl(this,_[4]),this.l=Xs(_[5]||"",!0),vs(this,_[6]||"",!0),this.m=Xs(_[7]||"")):(this.h=!1,this.i=new fl(null,this.h))}Li.prototype.toString=function(){var f=[],_=this.j;_&&f.push(ys(_,Sh,!0),":");var x=this.g;return(x||_=="file")&&(f.push("//"),(_=this.o)&&f.push(ys(_,Sh,!0),"@"),f.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&f.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&f.push("/"),f.push(ys(x,x.charAt(0)=="/"?$d:_m,!0))),(x=this.i.toString())&&f.push("?",x),(x=this.m)&&f.push("#",ys(x,_s)),f.join("")};function Ko(f){return new Li(f)}function Xl(f,_,x){f.j=x?Xs(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Jl(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function vs(f,_,x){_ instanceof fl?(f.i=_,wm(f.i,f.h)):(x||(_=ys(_,Ah)),f.i=new fl(_,f.h))}function Ln(f,_,x){f.i.set(_,x)}function dl(f){return Ln(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Xs(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ys(f,_,x){return typeof f=="string"?(f=encodeURI(f).replace(_,ym),x&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ym(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Sh=/[#\/\?@]/g,_m=/[#\?:]/g,$d=/[#\?]/g,Ah=/[#\?@]/g,_s=/#/g;function fl(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function Ji(f){f.g||(f.g=new Map,f.h=0,f.i&&$r(f.i,function(_,x){f.add(decodeURIComponent(_.replace(/\+/g," ")),x)}))}n=fl.prototype,n.add=function(f,_){Ji(this),this.i=null,f=hc(this,f);var x=this.g.get(f);return x||this.g.set(f,x=[]),x.push(_),this.h+=1,this};function eu(f,_){Ji(f),_=hc(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Dh(f,_){return Ji(f),_=hc(f,_),f.g.has(_)}n.forEach=function(f,_){Ji(this),this.g.forEach(function(x,B){x.forEach(function(le){f.call(_,le,B,this)},this)},this)},n.na=function(){Ji(this);let f=Array.from(this.g.values()),_=Array.from(this.g.keys()),x=[];for(let B=0;B<_.length;B++){let le=f[B];for(let be=0;be<le.length;be++)x.push(_[B])}return x},n.V=function(f){Ji(this);let _=[];if(typeof f=="string")Dh(this,f)&&(_=_.concat(this.g.get(hc(this,f))));else{f=Array.from(this.g.values());for(let x=0;x<f.length;x++)_=_.concat(f[x])}return _},n.set=function(f,_){return Ji(this),this.i=null,f=hc(this,f),Dh(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function qt(f,_,x){eu(f,_),0<x.length&&(f.i=null,f.g.set(hc(f,_),C(x)),f.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],_=Array.from(this.g.keys());for(var x=0;x<_.length;x++){var B=_[x];let be=encodeURIComponent(String(B)),Ye=this.V(B);for(B=0;B<Ye.length;B++){var le=be;Ye[B]!==""&&(le+="="+encodeURIComponent(String(Ye[B]))),f.push(le)}}return this.i=f.join("&")};function hc(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function wm(f,_){_&&!f.j&&(Ji(f),f.i=null,f.g.forEach(function(x,B){var le=B.toLowerCase();B!=le&&(eu(this,B),qt(this,le,x))},f)),f.j=_}function bm(f,_){let x=new Qn;if(a.Image){let B=new Image;B.onload=g(Ti,x,"TestLoadImage: loaded",!0,_,B),B.onerror=g(Ti,x,"TestLoadImage: error",!1,_,B),B.onabort=g(Ti,x,"TestLoadImage: abort",!1,_,B),B.ontimeout=g(Ti,x,"TestLoadImage: timeout",!1,_,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=f}else _(!1)}function Ia(f,_){let x=new Qn,B=new AbortController,le=setTimeout(()=>{B.abort(),Ti(x,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:B.signal}).then(be=>{clearTimeout(le),be.ok?Ti(x,"TestPingServer: ok",!0,_):Ti(x,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(le),Ti(x,"TestPingServer: error",!1,_)})}function Ti(f,_,x,B,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),B(x)}catch{}}function xm(){this.g=new Zn}function Em(f,_,x){let B=x||"";try{zd(f,function(le,be){let Ye=le;l(le)&&(Ye=Yn(le)),_.push(B+be+"="+encodeURIComponent(Ye))})}catch(le){throw _.push(B+"type="+encodeURIComponent("_badmap")),le}}function Js(f){this.l=f.Ub||null,this.j=f.eb||!1}E(Js,Ot),Js.prototype.g=function(){return new pc(this.l,this.j)},Js.prototype.i=(function(f){return function(){return f}})({});function pc(f,_){Lt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(pc,Lt),n=pc.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,So(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hl(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,So(this)),this.g&&(this.readyState=3,So(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function gc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?hl(this):So(this),this.readyState==3&&gc(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,hl(this))},n.Qa=function(f){this.g&&(this.response=f,hl(this))},n.ga=function(){this.g&&hl(this)};function hl(f){f.readyState=4,f.l=null,f.j=null,f.v=null,So(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],_=this.h.entries();for(var x=_.next();!x.done;)x=x.value,f.push(x[0]+": "+x[1]),x=_.next();return f.join(`\r
`)};function So(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Th(f){let _="";return pe(f,function(x,B){_+=B,_+=":",_+=x,_+=`\r
`}),_}function pl(f,_,x){e:{for(B in x){var B=!1;break e}B=!0}B||(x=Th(x),typeof f=="string"?x!=null&&encodeURIComponent(String(x)):Ln(f,_,x))}function Xn(f){Lt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Xn,Lt);var Mh=/^https?$/i,Sa=["POST","PUT"];n=Xn.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,x,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Co.g(),this.v=this.o?Yt(this.o):Yt(Co),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(be){tu(this,be);return}if(f=x||"",x=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var le in B)x.set(le,B[le]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(let be of B.keys())x.set(be,B.get(be));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(x.keys()).find(be=>be.toLowerCase()=="content-type"),le=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Sa,_,void 0))||B||le||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[be,Ye]of x)this.g.setRequestHeader(be,Ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ru(this),this.u=!0,this.g.send(f),this.u=!1}catch(be){tu(this,be)}};function tu(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,gl(f),ea(f)}function gl(f){f.A||(f.A=!0,Vt(f,"complete"),Vt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Vt(this,"complete"),Vt(this,"abort"),ea(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ea(this,!0)),Xn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?nu(this):this.bb())},n.bb=function(){nu(this)};function nu(f){if(f.h&&typeof s<"u"&&(!f.v[1]||Yo(f)!=4||f.Z()!=2)){if(f.u&&Yo(f)==4)Qt(f.Ea,0,f);else if(Vt(f,"readystatechange"),Yo(f)==4){f.h=!1;try{let Ye=f.Z();e:switch(Ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var x;if(!(x=_)){var B;if(B=Ye===0){var le=String(f.D).match(Io)[1]||null;!le&&a.self&&a.self.location&&(le=a.self.location.protocol.slice(0,-1)),B=!Mh.test(le?le.toLowerCase():"")}x=B}if(x)Vt(f,"complete"),Vt(f,"success");else{f.m=6;try{var be=2<Yo(f)?f.g.statusText:""}catch{be=""}f.l=be+" ["+f.Z()+"]",gl(f)}}finally{ea(f)}}}}function ea(f,_){if(f.g){ru(f);let x=f.g,B=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Vt(f,"ready");try{x.onreadystatechange=B}catch{}}}function ru(f){f.I&&(a.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Yo(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Yo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Pt(_)}};function qd(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Aa(f){let _={};f=(f.g&&2<=Yo(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<f.length;B++){if(Q(f[B]))continue;var x=b(f[B]);let le=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();let be=_[le]||[];_[le]=be,be.push(x)}z(_,function(B){return B.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ao(f,_,x){return x&&x.internalChannelParams&&x.internalChannelParams[f]||_}function Hd(f){this.Aa=0,this.i=[],this.j=new Qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ao("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ao("baseRetryDelayMs",5e3,f),this.cb=Ao("retryDelaySeedMs",1e4,f),this.Wa=Ao("forwardChannelMaxRetries",2,f),this.wa=Ao("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Vd(f&&f.concurrentRequestLimit),this.Da=new xm,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Hd.prototype,n.la=8,n.G=1,n.connect=function(f,_,x,B){pr(0),this.W=f,this.H=_||{},x&&B!==void 0&&(this.H.OSID=x,this.H.OAID=B),this.F=this.X,this.I=Lr(this,null,this.W),P(this)};function Da(f){if(m(f),f.G==3){var _=f.U++,x=Ko(f.I);if(Ln(x,"SID",f.K),Ln(x,"RID",_),Ln(x,"TYPE","terminate"),ue(f,x),_=new Qi(f,f.j,_),_.L=2,_.v=dl(Ko(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!x&&a.Image&&(new Image().src=_.v,x=!0),x||(_.g=Tr(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ll(_)}zn(f)}function ml(f){f.g&&(gt(f),f.g.cancel(),f.g=null)}function m(f){ml(f),f.u&&(a.clearTimeout(f.u),f.u=null),Wt(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function P(f){if(!jd(f.h)&&!f.s){f.s=!0;var _=f.Ga;Se||Ke(),he||(Se(),he=!0),Me.add(_,f),f.B=0}}function W(f,_){return ms(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Di(v(f.Ga,f,_),lr(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;let le=new Qi(this,this.j,f),be=this.o;if(this.S&&(be?(be=T(be),V(be,this.S)):be=this.S),this.m!==null||this.O||(le.H=be,be=null),this.P)e:{for(var _=0,x=0;x<this.i.length;x++){t:{var B=this.i[x];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(_+=B,4096<_){_=x;break e}if(_===4096||x===this.i.length-1){_=x+1;break e}}_=1e3}else _=1e3;_=Pe(this,le,_),x=Ko(this.I),Ln(x,"RID",f),Ln(x,"CVER",22),this.D&&Ln(x,"X-HTTP-Session-Id",this.D),ue(this,x),be&&(this.O?_="headers="+encodeURIComponent(String(Th(be)))+"&"+_:this.m&&pl(x,this.m,be)),Bd(this.h,le),this.Ua&&Ln(x,"TYPE","init"),this.P?(Ln(x,"$req",_),Ln(x,"SID","null"),le.T=!0,dc(le,x,null)):dc(le,x,_),this.G=2}}else this.G==3&&(f?ne(this,f):this.i.length==0||jd(this.h)||ne(this))};function ne(f,_){var x;_?x=_.l:x=f.U++;let B=Ko(f.I);Ln(B,"SID",f.K),Ln(B,"RID",x),Ln(B,"AID",f.T),ue(f,B),f.m&&f.o&&pl(B,f.m,f.o),x=new Qi(f,f.j,x,f.B+1),f.m===null&&(x.H=f.o),_&&(f.i=_.D.concat(f.i)),_=Pe(f,x,1e3),x.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Bd(f.h,x),dc(x,B,_)}function ue(f,_){f.H&&pe(f.H,function(x,B){Ln(_,B,x)}),f.l&&zd({},function(x,B){Ln(_,B,x)})}function Pe(f,_,x){x=Math.min(f.i.length,x);var B=f.l?v(f.l.Na,f.l,f):null;e:{var le=f.i;let be=-1;for(;;){let Ye=["count="+x];be==-1?0<x?(be=le[0].g,Ye.push("ofs="+be)):be=0:Ye.push("ofs="+be);let Dn=!0;for(let Mr=0;Mr<x;Mr++){let Ht=le[Mr].g,ur=le[Mr].map;if(Ht-=be,0>Ht)be=Math.max(0,le[Mr].g-100),Dn=!1;else try{Em(ur,Ye,"req"+Ht+"_")}catch{B&&B(ur)}}if(Dn){B=Ye.join("&");break e}}}return f=f.i.splice(0,x),_.D=f,B}function Ue(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;Se||Ke(),he||(Se(),he=!0),Me.add(_,f),f.v=0}}function ct(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Di(v(f.Fa,f),lr(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,zt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Di(v(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pr(10),ml(this),zt(this))};function gt(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function zt(f){f.g=new Qi(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Ko(f.qa);Ln(_,"RID","rpc"),Ln(_,"SID",f.K),Ln(_,"AID",f.T),Ln(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ln(_,"TO",f.ja),Ln(_,"TYPE","xmlhttp"),ue(f,_),f.m&&f.o&&pl(_,f.m,f.o),f.L&&(f.g.I=f.L);var x=f.g;f=f.ia,x.L=1,x.v=dl(Ko(_)),x.m=null,x.P=!0,cl(x,f)}n.Za=function(){this.C!=null&&(this.C=null,ml(this),ct(this),pr(19))};function Wt(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function _n(f,_){var x=null;if(f.g==_){Wt(f),gt(f),f.g=null;var B=2}else if(fc(f.h,_))x=_.D,Dr(f.h,_),B=1;else return;if(f.G!=0){if(_.o)if(B==1){x=_.m?_.m.length:0,_=Date.now()-_.F;var le=f.B;B=Ho(),Vt(B,new xo(B,x)),P(f)}else Ue(f);else if(le=_.s,le==3||le==0&&0<_.X||!(B==1&&W(f,_)||B==2&&ct(f)))switch(x&&0<x.length&&(_=f.h,_.i=_.i.concat(x)),le){case 1:Jn(f,5);break;case 4:Jn(f,10);break;case 3:Jn(f,6);break;default:Jn(f,2)}}}function lr(f,_){let x=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(x*=2),x*_}function Jn(f,_){if(f.j.info("Error code "+_),_==2){var x=v(f.fb,f),B=f.Xa;let le=!B;B=new Li(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xl(B,"https"),dl(B),le?bm(B.toString(),x):Ia(B.toString(),x)}else pr(2);f.G=0,f.l&&f.l.sa(_),zn(f),m(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),pr(2)):(this.j.info("Failed to ping google.com"),pr(1))};function zn(f){if(f.G=0,f.ka=[],f.l){let _=Ud(f.h);(_.length!=0||f.i.length!=0)&&(M(f.ka,_),M(f.ka,f.i),f.h.i.length=0,C(f.i),f.i.length=0),f.l.ra()}}function Lr(f,_,x){var B=x instanceof Li?Ko(x):new Li(x);if(B.g!="")_&&(B.g=_+"."+B.g),Jl(B,B.s);else{var le=a.location;B=le.protocol,_=_?_+"."+le.hostname:le.hostname,le=+le.port;var be=new Li(null);B&&Xl(be,B),_&&(be.g=_),le&&Jl(be,le),x&&(be.l=x),B=be}return x=f.D,_=f.ya,x&&_&&Ln(B,x,_),Ln(B,"VER",f.la),ue(f,B),B}function Tr(f,_,x){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new Xn(new Js({eb:x})):new Xn(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ai(){}n=ai.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Zo(){}Zo.prototype.g=function(f,_){return new gr(f,_)};function gr(f,_){Lt.call(this),this.g=new Hd(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!Q(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!Q(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new ws(this)}E(gr,Lt),gr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gr.prototype.close=function(){Da(this.g)},gr.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var x={};x.__data__=f,f=x}else this.u&&(x={},x.__data__=Yn(f),f=x);_.i.push(new Ih(_.Ya++,f)),_.G==3&&P(_)},gr.prototype.N=function(){this.g.l=null,delete this.j,Da(this.g),delete this.g,gr.aa.N.call(this)};function ta(f){Rt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(let x in _){f=x;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}E(ta,Rt);function iu(){In.call(this),this.status=1}E(iu,In);function ws(f){this.g=f}E(ws,ai),ws.prototype.ua=function(){Vt(this.g,"a")},ws.prototype.ta=function(f){Vt(this.g,new ta(f))},ws.prototype.sa=function(f){Vt(this.g,new iu)},ws.prototype.ra=function(){Vt(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,gr.prototype.send=gr.prototype.o,gr.prototype.open=gr.prototype.m,gr.prototype.close=gr.prototype.close,cD=Fl.createWebChannelTransport=function(){return new Zo},aD=Fl.getStatEventTarget=function(){return Ho()},sD=Fl.Event=bo,xb=Fl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Eo.NO_ERROR=0,Eo.TIMEOUT=8,Eo.HTTP_ERROR=6,_v=Fl.ErrorCode=Eo,Wo.COMPLETE="complete",oD=Fl.EventType=Wo,rr.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,Hp=Fl.WebChannel=rr,XX=Fl.FetchXmlHttpFactory=Js,Xn.prototype.listenOnce=Xn.prototype.L,Xn.prototype.getLastError=Xn.prototype.Ka,Xn.prototype.getLastErrorCode=Xn.prototype.Ba,Xn.prototype.getStatus=Xn.prototype.Z,Xn.prototype.getResponseJson=Xn.prototype.Oa,Xn.prototype.getResponseText=Xn.prototype.oa,Xn.prototype.send=Xn.prototype.ea,Xn.prototype.setWithCredentials=Xn.prototype.Ha,iD=Fl.XhrIo=Xn}).apply(typeof bb<"u"?bb:typeof self<"u"?self:typeof window<"u"?window:{});var e6="@firebase/firestore",t6="4.8.0";var fi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};fi.UNAUTHENTICATED=new fi(null),fi.GOOGLE_CREDENTIALS=new fi("google-credentials-uid"),fi.FIRST_PARTY=new fi("first-party-uid"),fi.MOCK_USER=new fi("mock-user");var Mg="11.10.0";var ad=new Vh("@firebase/firestore");function Xp(){return ad.logLevel}function bT(n){ad.setLogLevel(n)}function qe(n,...e){if(ad.logLevel<=_c.DEBUG){let t=e.map(xT);ad.debug(`Firestore (${Mg}): ${n}`,...t)}}function Xr(n,...e){if(ad.logLevel<=_c.ERROR){let t=e.map(xT);ad.error(`Firestore (${Mg}): ${n}`,...t)}}function ls(n,...e){if(ad.logLevel<=_c.WARN){let t=e.map(xT);ad.warn(`Firestore (${Mg}): ${n}`,...t)}}function xT(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function at(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,m8(n,r,t)}function m8(n,e,t){let r=`FIRESTORE (${Mg}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Xr(r),new Error(r)}function mt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||m8(e,i,r)}function v8(n,e){n||at(57014,e)}function nt(n,e){return n}var xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ve=class extends yu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Si=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Fb=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},mD=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fi.UNAUTHENTICATED))}shutdown(){}},vD=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},yD=class{constructor(e){this.t=e,this.currentUser=fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Si,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>ee(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Si)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new Fb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new fi(e)}},_D=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},wD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new _D(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Lb=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},bD=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,x_(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);let r=o=>{o.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,qe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Lb(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Lb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function JX(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function ET(){return new TextEncoder}var Rv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=JX(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function $t(n,e){return n<e?-1:n>e?1:0}function xD(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return $t(r,i);{let o=ET(),s=eJ(o.encode(n6(n,t)),o.encode(n6(e,t)));return s!==0?s:$t(r,i)}}t+=r>65535?2:1}return $t(n.length,e.length)}function n6(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function eJ(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return $t(n[t],e[t]);return $t(n.length,e.length)}function ag(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function y8(n){return n+"\0"}var r6="__name__",Vb=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&at(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&at(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return $t(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):xD(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ol.fromString(e.substring(4,e.length-2))}},En=class n extends Vb{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},tJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Jr=class n extends Vb{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return tJ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===r6}static keyField(){return new n([r6])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ve(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ve(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ve(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Xe=class n{constructor(e){this.path=e}static fromPath(e){return new n(En.fromString(e))}static fromName(e){return new n(En.fromString(e).popFirst(5))}static empty(){return new n(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&En.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new En(e.slice()))}};function CT(n,e,t){if(!t)throw new Ve(xe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IT(n,e,t,r){if(e===!0&&r===!0)throw new Ve(xe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function i6(n){if(!Xe.isDocumentKey(n))throw new Ve(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function o6(n){if(Xe.isDocumentKey(n))throw new Ve(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function V2(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":at(12329,{type:typeof n})}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=V2(n);throw new Ve(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function w8(n,e){if(e<=0)throw new Ve(xe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function hi(n,e){let t={typeString:n};return e&&(t.value=e),t}function oy(n,e){if(!_8(n))throw new Ve(xe.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Ve(xe.INVALID_ARGUMENT,t);return!0}var s6=-62135596800,a6=1e6,hr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*a6);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<s6)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(oy(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-s6;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};hr._jsonSchemaVersion="firestore/timestamp/1.0",hr._jsonSchema={type:hi("string",hr._jsonSchemaVersion),seconds:hi("number"),nanoseconds:hi("number")};var Tt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new hr(0,0))}static max(){return new n(new hr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var cg=-1,lg=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function ED(n){return n.fields.find(e=>e.kind===2)}function Nf(n){return n.fields.filter(e=>e.kind!==2)}lg.UNKNOWN_ID=-1;var ig=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Ov=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,ba.min())}};function b8(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(r===1e9?new hr(t+1,0):new hr(t,r));return new ba(i,Xe.empty(),e)}function x8(n){return new ba(n.readTime,n.key,cg)}var ba=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Tt.min(),Xe.empty(),cg)}static max(){return new n(Tt.max(),Xe.empty(),cg)}};function ST(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Xe.comparator(n.documentKey,e.documentKey),t!==0?t:$t(n.largestBatchId,e.largestBatchId))}var E8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function yd(n){return ee(this,null,function*(){if(n.code!==xe.FAILED_PRECONDITION||n.message!==E8)throw n;qe("LocalStore","Unexpectedly lost primary lease")})}var ye=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Bs="SimpleDb",Bb=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new jf(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Si,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new jf(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=AT(r.target.error);this.S.reject(new jf(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(qe(Bs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new ID(t)}},cd=class n{static delete(e){return qe(Bs,"Removing database:",e),kf(OE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Oh())return!1;if(n.F())return!0;let e=Lm(),t=n.M(e),r=0<t&&t<10,i=C8(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(Lm())===12.2&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return ee(this,null,function*(){return this.db||(qe(Bs,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new jf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new Ve(xe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Ve(xe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new jf(e,s))},i.onupgradeneeded=o=>{qe(Bs,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{qe(Bs,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(ls('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,i){return ee(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=Bb.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),ye.reject(l))).toPromise();return c.catch(()=>{}),yield a.D,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(qe(Bs,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function C8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var CD=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return kf(this.$.delete())}},jf=class extends Ve{constructor(e,t){super(xe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function _d(n){return n.name==="IndexedDbTransactionError"}var ID=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(qe(Bs,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(qe(Bs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),kf(r)}add(e){return qe(Bs,"ADD",this.store.name,e,e),kf(this.store.add(e))}get(e){return kf(this.store.get(e)).next(t=>(t===void 0&&(t=null),qe(Bs,"GET",this.store.name,e,t),t))}delete(e){return qe(Bs,"DELETE",this.store.name,e),kf(this.store.delete(e))}count(){return qe(Bs,"COUNT",this.store.name),kf(this.store.count())}j(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new ye((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,c)=>{s.push(c)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new ye((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,t){qe(Bs,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Z=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}ee(e){let t=this.cursor({});return new ye((r,i)=>{t.onerror=o=>{let s=AT(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new ye((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new CD(a),l=t(a.primaryKey,a.value,c);if(l instanceof ye){let u=l.catch(p=>(c.done(),ye.reject(p)));r.push(u)}c.isDone?i():c.W===null?a.continue():a.continue(c.W)}}).next(()=>ye.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function kf(n){return new ye((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=AT(r.target.error);t(i)}})}var c6=!1;function AT(n){let e=cd.M(Lm());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return c6||(c6=!0,setTimeout(()=>{throw r},0)),r}}return n}var Sv="IndexBackfiller",SD=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){qe(Sv,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>ee(this,null,function*(){this.task=null;try{let t=yield this.te.re();qe(Sv,`Documents written: ${t}`)}catch(t){_d(t)?qe(Sv,"Ignoring IndexedDB error during index backfill: ",t):yield yd(t)}yield this.ne(6e4)}))}},AD=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return ee(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let r=new Set,i=t,o=!0;return ye.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return qe(Sv,`Processing collection: ${s}`),this.se(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(a=>(qe(Sv,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}oe(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=x8(o);ST(s,r)>0&&(r=s)}),new ba(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Us=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),id=-1;function sy(n){return n==null}function Fv(n){return n===0&&1/n==-1/0}function I8(n){return typeof n=="number"&&Number.isInteger(n)&&!Fv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Ub="";function go(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=l6(e)),e=nJ(n.get(t),e);return l6(e)}function nJ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Ub:t+="";break;default:t+=o}}return t}function l6(n){return n+Ub+""}function qc(n){let e=n.length;if(mt(e>=2,64408,{path:n}),e===2)return mt(n.charAt(0)===Ub&&n.charAt(1)==="",56145,{path:n}),En.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Ub,o);switch((s<0||s>t)&&at(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:at(61167,{path:n})}o=s+2}return new En(r)}var Pf="remoteDocuments",ay="owner",Gp="owner",Lv="mutationQueues",rJ="userId",Za="mutations",u6="batchId",Lf="userMutationsIndex",d6=["userId","batchId"];function Db(n,e){return[n,go(e)]}function S8(n,e,t){return[n,go(e),t]}var iJ={},ug="documentMutations",zb="remoteDocumentsV14",oJ=["prefixPath","collectionGroup","readTime","documentId"],Tb="documentKeyIndex",sJ=["prefixPath","collectionGroup","documentId"],A8="collectionGroupIndex",aJ=["collectionGroup","readTime","prefixPath","documentId"],Vv="remoteDocumentGlobal",DD="remoteDocumentGlobalKey",dg="targets",D8="queryTargetsIndex",cJ=["canonicalId","targetId"],fg="targetDocuments",lJ=["targetId","path"],DT="documentTargetsIndex",uJ=["path","targetId"],$b="targetGlobalKey",Bf="targetGlobal",jv="collectionParents",dJ=["collectionId","parent"],hg="clientMetadata",fJ="clientId",j2="bundles",hJ="bundleId",B2="namedQueries",pJ="name",TT="indexConfiguration",gJ="indexId",TD="collectionGroupIndex",mJ="collectionGroup",Av="indexState",vJ=["indexId","uid"],T8="sequenceNumberIndex",yJ=["uid","sequenceNumber"],Dv="indexEntries",_J=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],M8="documentKeyIndex",wJ=["indexId","uid","orderedDocumentKey"],U2="documentOverlays",bJ=["userId","collectionPath","documentId"],MD="collectionPathOverlayIndex",xJ=["userId","collectionPath","largestBatchId"],N8="collectionGroupOverlayIndex",EJ=["userId","collectionGroup","largestBatchId"],MT="globals",CJ="name",P8=[Lv,Za,ug,Pf,dg,ay,Bf,fg,hg,Vv,jv,j2,B2],IJ=[...P8,U2],k8=[Lv,Za,ug,zb,dg,ay,Bf,fg,hg,Vv,jv,j2,B2,U2],R8=k8,NT=[...R8,TT,Av,Dv],SJ=NT,O8=[...NT,MT],AJ=O8;var Bv=class extends jb{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function Ai(n,e){let t=nt(n);return cd.N(t.ce,e)}function f6(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wd(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function F8(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var _r=class n{constructor(e,t){this.comparator=e,this.root=t||Gc.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gc.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rg(this.root,e,this.comparator,!1)}getReverseIterator(){return new rg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rg(this.root,e,this.comparator,!0)}},rg=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gc=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw at(27949);return e+(this.isRed()?0:1)}};Gc.EMPTY=null,Gc.RED=!0,Gc.BLACK=!1;Gc.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Gc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var nr=class n{constructor(e){this.comparator=e,this.data=new _r(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qb(this.data.getIterator())}getIteratorFrom(e){return new qb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},qb=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Wp(n){return n.hasNext()?n.getNext():void 0}var zs=class n{constructor(e){this.fields=e,e.sort(Jr.comparator)}static empty(){return new n([])}unionWith(e){let t=new nr(Jr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ag(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hb=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function L8(){return typeof atob<"u"}var ti=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Hb("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ti.EMPTY_BYTE_STRING=new ti("");var DJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jl(n){if(mt(!!n,39018),typeof n=="string"){let e=0,t=DJ.exec(n);if(mt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cr(n.seconds),nanos:Cr(n.nanos)}}function Cr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bl(n){return typeof n=="string"?ti.fromBase64String(n):ti.fromUint8Array(n)}var V8="server_timestamp",j8="__type__",B8="__previous_value__",U8="__local_write_time__";function z2(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[j8])===null||t===void 0?void 0:t.stringValue)===V8}function $2(n){let e=n.mapValue.fields[B8];return z2(e)?$2(e):e}function Uv(n){let e=jl(n.mapValue.fields[U8].timestampValue);return new hr(e.seconds,e.nanos)}var ND=class{constructor(e,t,r,i,o,s,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},Gb="(default)",ld=class n{constructor(e,t){this.projectId=e,this.database=t||Gb}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Gb}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var PT="__type__",z8="__max__",nd={mapValue:{fields:{__type__:{stringValue:z8}}}},kT="__vector__",pg="value",Mb={nullValue:"NULL_VALUE"};function ud(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?z2(n)?4:$8(n)?9007199254740991:q2(n)?10:11:at(28295,{value:n})}function Zc(n,e){if(n===e)return!0;let t=ud(n);if(t!==ud(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uv(n).isEqual(Uv(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=jl(i.timestampValue),a=jl(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Bl(i.bytesValue).isEqual(Bl(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Cr(i.geoPointValue.latitude)===Cr(o.geoPointValue.latitude)&&Cr(i.geoPointValue.longitude)===Cr(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Cr(i.integerValue)===Cr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Cr(i.doubleValue),a=Cr(o.doubleValue);return s===a?Fv(s)===Fv(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return ag(n.arrayValue.values||[],e.arrayValue.values||[],Zc);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(f6(s)!==f6(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Zc(s[c],a[c])))return!1;return!0})(n,e);default:return at(52216,{left:n})}}function zv(n,e){return(n.values||[]).find(t=>Zc(t,e))!==void 0}function dd(n,e){if(n===e)return 0;let t=ud(n),r=ud(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Cr(o.integerValue||o.doubleValue),c=Cr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return h6(n.timestampValue,e.timestampValue);case 4:return h6(Uv(n),Uv(e));case 5:return xD(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Bl(o),c=Bl(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=$t(a[l],c[l]);if(u!==0)return u}return $t(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=$t(Cr(o.latitude),Cr(s.latitude));return a!==0?a:$t(Cr(o.longitude),Cr(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return p6(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,l,u;let p=o.fields||{},v=s.fields||{},g=(a=p[pg])===null||a===void 0?void 0:a.arrayValue,E=(c=v[pg])===null||c===void 0?void 0:c.arrayValue,C=$t(((l=g?.values)===null||l===void 0?void 0:l.length)||0,((u=E?.values)===null||u===void 0?void 0:u.length)||0);return C!==0?C:p6(g,E)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===nd.mapValue&&s===nd.mapValue)return 0;if(o===nd.mapValue)return 1;if(s===nd.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let p=0;p<c.length&&p<u.length;++p){let v=xD(c[p],u[p]);if(v!==0)return v;let g=dd(a[c[p]],l[u[p]]);if(g!==0)return g}return $t(c.length,u.length)})(n.mapValue,e.mapValue);default:throw at(23264,{le:t})}}function h6(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $t(n,e);let t=jl(n),r=jl(e),i=$t(t.seconds,r.seconds);return i!==0?i:$t(t.nanos,r.nanos)}function p6(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=dd(t[i],r[i]);if(o)return o}return $t(t.length,r.length)}function gg(n){return PD(n)}function PD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=jl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Bl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=PD(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${PD(t.fields[s])}`;return i+"}"})(n.mapValue):at(61005,{value:n})}function Nb(n){switch(ud(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=$2(n);return e?16+Nb(e):16;case 5:return 2*n.stringValue.length;case 6:return Bl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Nb(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return wd(r.fields,(o,s)=>{i+=o.length+Nb(s)}),i})(n.mapValue);default:throw at(13486,{value:n})}}function Uf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kD(n){return!!n&&"integerValue"in n}function $v(n){return!!n&&"arrayValue"in n}function g6(n){return!!n&&"nullValue"in n}function m6(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pb(n){return!!n&&"mapValue"in n}function q2(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[PT])===null||t===void 0?void 0:t.stringValue)===kT}function Tv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return wd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Tv(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $8(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===z8}var q8={mapValue:{fields:{[PT]:{stringValue:kT},[pg]:{arrayValue:{}}}}};function TJ(n){return"nullValue"in n?Mb:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Uf(ld.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?q2(n)?q8:{mapValue:{}}:at(35942,{value:n})}function MJ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Uf(ld.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?q8:"mapValue"in n?q2(n)?{mapValue:{}}:nd:at(61959,{value:n})}function v6(n,e){let t=dd(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function y6(n,e){let t=dd(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var po=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Pb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tv(t)}setAll(e){let t=Jr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Tv(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Pb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Pb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){wd(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Tv(this.value))}};function H8(n){let e=[];return wd(n.fields,(t,r)=>{let i=new Jr([t]);if(Pb(r)){let o=H8(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new zs(e)}var pi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Tt.min(),Tt.min(),Tt.min(),po.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Tt.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Tt.min(),Tt.min(),po.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Tt.min(),Tt.min(),po.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=po.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=po.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Qc=class{constructor(e,t){this.position=e,this.inclusive=t}};function _6(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Xe.comparator(Xe.fromName(s.referenceValue),t.key):r=dd(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function w6(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zc(n.position[t],e.position[t]))return!1;return!0}var zf=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function NJ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Wb=class{},bn=class n extends Wb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new FD(e,t,r):t==="array-contains"?new jD(e,r):t==="in"?new Kb(e,r):t==="not-in"?new BD(e,r):t==="array-contains-any"?new UD(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new LD(e,r):new VD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(dd(t,this.value)):t!==null&&ud(this.value)===ud(t)&&this.matchesComparison(dd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Wn=class n extends Wb{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return mg(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function mg(n){return n.op==="and"}function RD(n){return n.op==="or"}function RT(n){return G8(n)&&mg(n)}function G8(n){for(let e of n.filters)if(e instanceof Wn)return!1;return!0}function OD(n){if(n instanceof bn)return n.field.canonicalString()+n.op.toString()+gg(n.value);if(RT(n))return n.filters.map(e=>OD(e)).join(",");{let e=n.filters.map(t=>OD(t)).join(",");return`${n.op}(${e})`}}function W8(n,e){return n instanceof bn?(function(r,i){return i instanceof bn&&r.op===i.op&&r.field.isEqual(i.field)&&Zc(r.value,i.value)})(n,e):n instanceof Wn?(function(r,i){return i instanceof Wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&W8(s,i.filters[a]),!0):!1})(n,e):void at(19439)}function K8(n,e){let t=n.filters.concat(e);return Wn.create(t,n.op)}function Y8(n){return n instanceof bn?(function(t){return`${t.field.canonicalString()} ${t.op} ${gg(t.value)}`})(n):n instanceof Wn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Y8).join(" ,")+"}"})(n):"Filter"}var FD=class extends bn{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){let t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}},LD=class extends bn{constructor(e,t){super(e,"in",t),this.keys=Z8("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},VD=class extends bn{constructor(e,t){super(e,"not-in",t),this.keys=Z8("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Z8(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}var jD=class extends bn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return $v(t)&&zv(t.arrayValue,this.value)}},Kb=class extends bn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&zv(this.value.arrayValue,t)}},BD=class extends bn{constructor(e,t){super(e,"not-in",t)}matches(e){if(zv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zv(this.value.arrayValue,t)}},UD=class extends bn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!$v(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zv(this.value.arrayValue,r))}};var zD=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function $D(n,e=null,t=[],r=[],i=null,o=null,s=null){return new zD(n,e,t,r,i,o,s)}function $f(n){let e=nt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>OD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),sy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gg(r)).join(",")),e.Pe=t}return e.Pe}function cy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NJ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!W8(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!w6(n.startAt,e.startAt)&&w6(n.endAt,e.endAt)}function Yb(n){return Xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Zb(n,e){return n.filters.filter(t=>t instanceof bn&&t.field.isEqual(e))}function b6(n,e,t){let r=Mb,i=!0;for(let o of Zb(n,e)){let s=Mb,a=!0;switch(o.op){case"<":case"<=":s=TJ(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Mb}v6({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];v6({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function x6(n,e,t){let r=nd,i=!0;for(let o of Zb(n,e)){let s=nd,a=!0;switch(o.op){case">=":case">":s=MJ(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=nd}y6({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];y6({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Qa=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Q8(n,e,t,r,i,o,s,a){return new Qa(n,e,t,r,i,o,s,a)}function Ng(n){return new Qa(n)}function E6(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OT(n){return n.collectionGroup!==null}function og(n){let e=nt(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new nr(Jr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new zf(o,r))}),t.has(Jr.keyField().canonicalString())||e.Te.push(new zf(Jr.keyField(),r))}return e.Te}function Vo(n){let e=nt(n);return e.Ie||(e.Ie=PJ(e,og(n))),e.Ie}function PJ(n,e){if(n.limitType==="F")return $D(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new zf(i.field,o)});let t=n.endAt?new Qc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Qc(n.startAt.position,n.startAt.inclusive):null;return $D(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function qD(n,e){let t=n.filters.concat([e]);return new Qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qb(n,e,t){return new Qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ly(n,e){return cy(Vo(n),Vo(e))&&n.limitType===e.limitType}function X8(n){return`${$f(Vo(n))}|lt:${n.limitType}`}function Jp(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Y8(i)).join(", ")}]`),sy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>gg(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>gg(i)).join(",")),`Target(${r})`})(Vo(n))}; limitType=${n.limitType})`}function uy(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Xe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of og(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=_6(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,og(r),i)||r.endAt&&!(function(s,a,c){let l=_6(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,og(r),i))})(n,e)}function J8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eV(n){return(e,t)=>{let r=!1;for(let i of og(n)){let o=kJ(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function kJ(n,e,t){let r=n.field.isKeyField()?Xe.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?dd(c,l):at(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at(19790,{direction:n.dir})}}var Xa=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wd(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return F8(this.inner)}size(){return this.innerSize}};var RJ=new _r(Xe.comparator);function as(){return RJ}var tV=new _r(Xe.comparator);function Cv(...n){let e=tV;for(let t of n)e=e.insert(t.key,t);return e}function nV(n){let e=tV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hc(){return Mv()}function rV(){return Mv()}function Mv(){return new Xa(n=>n.toString(),(n,e)=>n.isEqual(e))}var OJ=new _r(Xe.comparator),FJ=new nr(Xe.comparator);function dn(...n){let e=FJ;for(let t of n)e=e.add(t);return e}var LJ=new nr($t);function FT(){return LJ}function LT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fv(e)?"-0":e}}function iV(n){return{integerValue:""+n}}function oV(n,e){return I8(e)?iV(e):LT(n,e)}var vg=class{constructor(){this._=void 0}};function VJ(n,e,t){return n instanceof fd?(function(i,o){let s={fields:{[j8]:{stringValue:V8},[U8]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&z2(o)&&(o=$2(o)),o&&(s.fields[B8]=o),{mapValue:s}})(t,e):n instanceof Ul?aV(n,e):n instanceof zl?cV(n,e):(function(i,o){let s=sV(i,o),a=C6(s)+C6(i.Ee);return kD(s)&&kD(i.Ee)?iV(a):LT(i.serializer,a)})(n,e)}function jJ(n,e,t){return n instanceof Ul?aV(n,e):n instanceof zl?cV(n,e):t}function sV(n,e){return n instanceof hd?(function(r){return kD(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var fd=class extends vg{},Ul=class extends vg{constructor(e){super(),this.elements=e}};function aV(n,e){let t=lV(e);for(let r of n.elements)t.some(i=>Zc(i,r))||t.push(r);return{arrayValue:{values:t}}}var zl=class extends vg{constructor(e){super(),this.elements=e}};function cV(n,e){let t=lV(e);for(let r of n.elements)t=t.filter(i=>!Zc(i,r));return{arrayValue:{values:t}}}var hd=class extends vg{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function C6(n){return Cr(n.integerValue||n.doubleValue)}function lV(n){return $v(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var qf=class{constructor(e,t){this.field=e,this.transform=t}};function BJ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ul&&i instanceof Ul||r instanceof zl&&i instanceof zl?ag(r.elements,i.elements,Zc):r instanceof hd&&i instanceof hd?Zc(r.Ee,i.Ee):r instanceof fd&&i instanceof fd})(n.transform,e.transform)}var HD=class{constructor(e,t){this.version=e,this.transformResults=t}},Ur=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kb(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var yg=class{};function uV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gd(n.key,Ur.none()):new pd(n.key,n.data,Ur.none());{let t=n.data,r=po.empty(),i=new nr(Jr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ja(n.key,r,new zs(i.toArray()),Ur.none())}}function UJ(n,e,t){n instanceof pd?(function(i,o,s){let a=i.value.clone(),c=S6(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Ja?(function(i,o,s){if(!kb(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=S6(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(dV(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Nv(n,e,t,r){return n instanceof pd?(function(o,s,a,c){if(!kb(o.precondition,s))return a;let l=o.value.clone(),u=A6(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ja?(function(o,s,a,c){if(!kb(o.precondition,s))return a;let l=A6(o.fieldTransforms,c,s),u=s.data;return u.setAll(dV(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return kb(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function zJ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=sV(r.transform,i||null);o!=null&&(t===null&&(t=po.empty()),t.set(r.field,o))}return t||null}function I6(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ag(r,i,(o,s)=>BJ(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var pd=class extends yg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ja=class extends yg{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function dV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function S6(n,e,t){let r=new Map;mt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,jJ(s,a,t[i]))}return r}function A6(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,VJ(o,s,e))}return r}var gd=class extends yg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},qv=class extends yg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Hv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&UJ(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Nv(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Nv(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=rV();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=uV(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&ag(this.mutations,e.mutations,(t,r)=>I6(t,r))&&ag(this.baseMutations,e.baseMutations,(t,r)=>I6(t,r))}},GD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){mt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return OJ})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Gv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var WD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ui,An;function fV(n){switch(n){case xe.OK:return at(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return at(15467,{code:n})}}function hV(n){if(n===void 0)return Xr("GRPC error has no .code"),xe.UNKNOWN;switch(n){case ui.OK:return xe.OK;case ui.CANCELLED:return xe.CANCELLED;case ui.UNKNOWN:return xe.UNKNOWN;case ui.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case ui.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case ui.INTERNAL:return xe.INTERNAL;case ui.UNAVAILABLE:return xe.UNAVAILABLE;case ui.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case ui.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case ui.NOT_FOUND:return xe.NOT_FOUND;case ui.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case ui.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case ui.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case ui.ABORTED:return xe.ABORTED;case ui.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case ui.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case ui.DATA_LOSS:return xe.DATA_LOSS;default:return at(39323,{code:n})}}(An=ui||(ui={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";var D6=null;var $J=new Ol([4294967295,4294967295],0);function T6(n){let e=ET().encode(n),t=new rD;return t.update(e),new Uint8Array(t.digest())}function M6(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ol([t,r],0),new Ol([i,o],0)]}var KD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vf(`Invalid padding: ${t}`);if(r<0)throw new Vf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Vf(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ol.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Ol.fromNumber(r)));return i.compare($J)===1&&(i=new Ol([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=T6(e),[r,i]=M6(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=T6(e),[r,i]=M6(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Vf=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Kv.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Tt.min(),i,new _r($t),as(),dn())}},Kv=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,dn(),dn(),dn())}};var sg=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Xb=class{constructor(e,t){this.targetId=e,this.De=t}},Jb=class{constructor(e,t,r=ti.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},e2=class{constructor(){this.ve=0,this.Ce=N6(),this.Fe=ti.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=dn(),t=dn(),r=dn();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at(38017,{changeType:o})}}),new Kv(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=N6()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},YD=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=as(),this.je=Eb(),this.Je=Eb(),this.He=new _r($t)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:at(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(Yb(o))if(r===0){let s=new Xe(o.path);this.Xe(t,s,pi.newNoDocument(s,Tt.min()))}else mt(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}D6?.ct((function(u,p,v,g,E){var C,M,N,Q,j,H;let oe={localCacheCount:u,existenceFilterCount:p.count,databaseId:v.database,projectId:v.projectId},pe=p.unchangedNames;return pe&&(oe.bloomFilter={applied:E===0,hashCount:(C=pe?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(Q=(N=(M=pe?.bits)===null||M===void 0?void 0:M.bitmap)===null||N===void 0?void 0:N.length)!==null&&Q!==void 0?Q:0,padding:(H=(j=pe?.bits)===null||j===void 0?void 0:j.padding)!==null&&H!==void 0?H:0,mightContain:z=>{var T;return(T=g?.mightContain(z))!==null&&T!==void 0&&T}}),oe})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Bl(r).toUint8Array()}catch(c){if(c instanceof Hb)return ls("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new KD(s,i,o)}catch(c){return ls(c instanceof Vf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&Yb(a.target)){let c=new Xe(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,pi.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=dn();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Wv(e,t,this.He,this.ze,r);return this.ze=as(),this.je=Eb(),this.Je=Eb(),this.He=new _r($t),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new e2,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new nr($t),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new nr($t),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||qe("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new e2),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Eb(){return new _r(Xe.comparator)}function N6(){return new _r(Xe.comparator)}var qJ={asc:"ASCENDING",desc:"DESCENDING"},HJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GJ={and:"AND",or:"OR"},ZD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function QD(n,e){return n.useProto3Json||sy(e)?e:{value:e}}function _g(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WJ(n,e){return _g(n,e.toTimestamp())}function ei(n){return mt(!!n,49232),Tt.fromTimestamp((function(t){let r=jl(t);return new hr(r.seconds,r.nanos)})(n))}function VT(n,e){return XD(n,e).canonicalString()}function XD(n,e){let t=(function(i){return new En(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function gV(n){let e=En.fromString(n);return mt(IV(e),10190,{key:e.toString()}),e}function Yv(n,e){return VT(n.databaseId,e.path)}function Wc(n,e){let t=gV(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(yV(t))}function mV(n,e){return VT(n.databaseId,e)}function vV(n){let e=gV(n);return e.length===4?En.emptyPath():yV(e)}function JD(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yV(n){return mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function P6(n,e,t){return{name:Yv(n,e),fields:t.value.mapValue.fields}}function _V(n,e,t){let r=Wc(n,e.name),i=ei(e.updateTime),o=e.createTime?ei(e.createTime):Tt.min(),s=new po({mapValue:{fields:e.fields}}),a=pi.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function KJ(n,e){return"found"in e?(function(r,i){mt(!!i.found,43571),i.found.name,i.found.updateTime;let o=Wc(r,i.found.name),s=ei(i.found.updateTime),a=i.found.createTime?ei(i.found.createTime):Tt.min(),c=new po({mapValue:{fields:i.found.fields}});return pi.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){mt(!!i.missing,3894),mt(!!i.readTime,22933);let o=Wc(r,i.missing),s=ei(i.readTime);return pi.newNoDocument(o,s)})(n,e):at(7234,{result:e})}function YJ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:at(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,u){return l.useProto3Json?(mt(u===void 0||typeof u=="string",58123),ti.fromBase64String(u||"")):(mt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ti.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let u=l.code===void 0?xe.UNKNOWN:hV(l.code);return new Ve(u,l.message||"")})(s);t=new Jb(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Wc(n,r.document.name),o=ei(r.document.updateTime),s=r.document.createTime?ei(r.document.createTime):Tt.min(),a=new po({mapValue:{fields:r.document.fields}}),c=pi.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new sg(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Wc(n,r.document),o=r.readTime?ei(r.readTime):Tt.min(),s=pi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new sg([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Wc(n,r.document),o=r.removedTargetIds||[];t=new sg([],o,i,null)}else{if(!("filter"in e))return at(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new WD(i,o),a=r.targetId;t=new Xb(a,s)}}return t}function Zv(n,e){let t;if(e instanceof pd)t={update:P6(n,e.key,e.value)};else if(e instanceof gd)t={delete:Yv(n,e.key)};else if(e instanceof Ja)t={update:P6(n,e.key,e.data),updateMask:tee(e.fieldMask)};else{if(!(e instanceof qv))return at(16599,{Rt:e.type});t={verify:Yv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof fd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ul)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hd)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw at(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:WJ(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:at(27497)})(n,e.precondition)),t}function e5(n,e){let t=e.currentDocument?(function(o){return o.updateTime!==void 0?Ur.updateTime(ei(o.updateTime)):o.exists!==void 0?Ur.exists(o.exists):Ur.none()})(e.currentDocument):Ur.none(),r=e.updateTransforms?e.updateTransforms.map(i=>(function(s,a){let c=null;if("setToServerValue"in a)mt(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new fd;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new Ul(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new zl(u)}else"increment"in a?c=new hd(s,a.increment):at(16584,{proto:a});let l=Jr.fromServerFormat(a.fieldPath);return new qf(l,c)})(n,i)):[];if(e.update){e.update.name;let i=Wc(n,e.update.name),o=new po({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=(function(c){let l=c.fieldPaths||[];return new zs(l.map(u=>Jr.fromServerFormat(u)))})(e.updateMask);return new Ja(i,o,s,t,r)}return new pd(i,o,t,r)}if(e.delete){let i=Wc(n,e.delete);return new gd(i,t)}if(e.verify){let i=Wc(n,e.verify);return new qv(i,t)}return at(1463,{proto:e})}function ZJ(n,e){return n&&n.length>0?(mt(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?ei(i.updateTime):ei(o);return s.isEqual(Tt.min())&&(s=ei(o)),new HD(s,i.transformResults||[])})(t,e))):[]}function wV(n,e){return{documents:[mV(n,e.path)]}}function bV(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=mV(n,i);let o=(function(l){if(l.length!==0)return CV(Wn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(u=>(function(v){return{field:eg(v.field),direction:XJ(v.dir)}})(u))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=QD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function xV(n){let e=vV(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){mt(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=(function(p){let v=EV(p);return v instanceof Wn&&RT(v)?v.getFilters():[v]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(v=>(function(E){return new zf(tg(E.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let v;return v=typeof p=="object"?p.value:p,sy(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(p){let v=!!p.before,g=p.values||[];return new Qc(g,v)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let v=!p.before,g=p.values||[];return new Qc(g,v)})(t.endAt)),Q8(e,i,s,o,a,"F",c,l)}function QJ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function EV(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=tg(t.unaryFilter.field);return bn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=tg(t.unaryFilter.field);return bn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=tg(t.unaryFilter.field);return bn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=tg(t.unaryFilter.field);return bn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}})(n):n.fieldFilter!==void 0?(function(t){return bn.create(tg(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wn.create(t.compositeFilter.filters.map(r=>EV(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return at(1026)}})(t.compositeFilter.op))})(n):at(30097,{filter:n})}function XJ(n){return qJ[n]}function JJ(n){return HJ[n]}function eee(n){return GJ[n]}function eg(n){return{fieldPath:n.canonicalString()}}function tg(n){return Jr.fromServerFormat(n.fieldPath)}function CV(n){return n instanceof bn?(function(t){if(t.op==="=="){if(m6(t.value))return{unaryFilter:{field:eg(t.field),op:"IS_NAN"}};if(g6(t.value))return{unaryFilter:{field:eg(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(m6(t.value))return{unaryFilter:{field:eg(t.field),op:"IS_NOT_NAN"}};if(g6(t.value))return{unaryFilter:{field:eg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eg(t.field),op:JJ(t.op),value:t.value}}})(n):n instanceof Wn?(function(t){let r=t.getFilters().map(i=>CV(i));return r.length===1?r[0]:{compositeFilter:{op:eee(t.op),filters:r}}})(n):at(54877,{filter:n})}function tee(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IV(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var wg=class n{constructor(e,t,r,i,o=Tt.min(),s=Tt.min(),a=ti.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var t2=class{constructor(e){this.gt=e}};function nee(n,e){let t;if(e.document)t=_V(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=Xe.fromSegments(e.noDocument.path),i=Gf(e.noDocument.readTime);t=pi.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at(56709);{let r=Xe.fromSegments(e.unknownDocument.path),i=Gf(e.unknownDocument.version);t=pi.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){let o=new hr(i[0],i[1]);return Tt.fromTimestamp(o)})(e.readTime)),t}function k6(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:n2(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:Yv(o,s.key),fields:s.data.value.mapValue.fields,updateTime:_g(o,s.version.toTimestamp()),createTime:_g(o,s.createTime.toTimestamp())}})(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hf(e.version)};else{if(!e.isUnknownDocument())return at(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Hf(e.version)}}return r}function n2(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hf(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gf(n){let e=new hr(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Rf(n,e){let t=(e.baseMutations||[]).map(o=>e5(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>e5(n.gt,o)),i=hr.fromMillis(e.localWriteTimeMs);return new Hv(e.batchId,i,t,r)}function Iv(n){let e=Gf(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Gf(n.lastLimboFreeSnapshotVersion):Tt.min(),r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){let s=o.documents.length;return mt(s===1,1966,{count:s}),Vo(Ng(vV(o.documents[0])))})(n.query):(function(o){return Vo(xV(o))})(n.query),new wg(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ti.fromBase64String(n.resumeToken))}function SV(n,e){let t=Hf(e.snapshotVersion),r=Hf(e.lastLimboFreeSnapshotVersion),i;i=Yb(e.target)?wV(n.gt,e.target):bV(n.gt,e.target).Vt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$f(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function jT(n){let e=xV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Qb(e,e.limit,"L"):e}function lD(n,e){return new Gv(e.largestBatchId,e5(n.gt,e.overlayMutation))}function R6(n,e){let t=e.path.lastSegment();return[n,go(e.path.popLast()),t]}function O6(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Hf(r.readTime),documentKey:go(r.documentKey.path),largestBatchId:r.largestBatchId}}var t5=class{getBundleMetadata(e,t){return F6(e).get(t).next(r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Gf(o.createTime),version:o.version}})(r)})}saveBundleMetadata(e,t){return F6(e).put((function(i){return{bundleId:i.id,createTime:Hf(ei(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return L6(e).get(t).next(r=>{if(r)return(function(o){return{name:o.name,query:jT(o.bundledQuery),readTime:Gf(o.readTime)}})(r)})}saveNamedQuery(e,t){return L6(e).put((function(i){return{name:i.name,readTime:Hf(ei(i.readTime)),bundledQuery:i.bundledQuery}})(t))}};function F6(n){return Ai(n,j2)}function L6(n){return Ai(n,B2)}var r2=class n{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return wv(e).get(R6(this.userId,t)).next(r=>r?lD(this.serializer,r):null)}getOverlays(e,t){let r=Hc();return ye.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Gv(t,s);i.push(this.wt(e,a))}),ye.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(go(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(wv(e).Y(MD,a))}),ye.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Hc(),o=go(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return wv(e).j(MD,s).next(a=>{for(let c of a){let l=lD(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Hc(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wv(e).X({index:N8,range:a},(c,l,u)=>{let p=lD(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):u.done()}).next(()=>o)}wt(e,t){return wv(e).put((function(i,o,s){let[a,c,l]=R6(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Zv(i.gt,s.mutation)}})(this.serializer,this.userId,t))}};function wv(n){return Ai(n,U2)}var n5=class{St(e){return Ai(e,MT)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?ti.fromUint8Array(r):ti.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Ll=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Cr(e.integerValue));else if("doubleValue"in e){let r=Cr(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Fv(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=jl(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Bl(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?$8(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):q2(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):at(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=pg,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Cr(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Xe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Ll.Ut=new Ll;var Kp=255;function ree(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function V6(n){let e=64-(function(r){let i=0;for(let o=0;o<8;++o){let s=ree(255&r[o]);if(i+=s,s!==8)break}return i})(n);return Math.ceil(e/8)}var r5=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{let i=t.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{let i=t.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){let t=this.Xt(e),r=V6(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}tn(e){let t=this.Xt(e),r=V6(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}nn(){this.rn(Kp),this.rn(255)}sn(){this._n(Kp),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=(function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===Kp?(this.rn(Kp),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===Kp?(this._n(Kp),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},i5=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},o5=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},Of=class{constructor(){this.un=new r5,this.cn=new i5(this.un),this.ln=new o5(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var Ff=class n{constructor(e,t,r,i){this.Pn=e,this.Tn=t,this.In=r,this.dn=i}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:Rb(this.In),directionalValue:Rb(this.dn),orderedDocumentKey:Rb(t),documentKey:r.path.toArray()}}Rn(e,t,r){let i=this.An(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function Xu(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=j6(n.In,e.In),t!==0?t:(t=j6(n.dn,e.dn),t!==0?t:Xe.comparator(n.Tn,e.Tn)))}function j6(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Rb(n){return VE()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function B6(n){return typeof n!="string"?n:(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}var i2=class{constructor(e){this.Vn=new nr((t,r)=>Jr.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(mt(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=ED(e);if(t!==void 0&&!this.yn(t))return!1;let r=Nf(e),i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.wn(a,c)||!this.Sn(this.mn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new nr(Jr.comparator),t=[];for(let r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ig(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ig(r.field,0))}for(let r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ig(r.field,r.dir==="asc"?0:1)));return new lg(lg.UNKNOWN_ID,this.collectionId,t,Ov.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function AV(n){var e,t;if(mt(n instanceof bn||n instanceof Wn,20012),n instanceof bn){if(n instanceof Kb){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>bn.create(n.field,"==",o)))||[];return Wn.create(i,"or")}return n}let r=n.filters.map(i=>AV(i));return Wn.create(r,n.op)}function iee(n){if(n.getFilters().length===0)return[];let e=c5(AV(n));return mt(DV(e),7391),s5(e)||a5(e)?[e]:e.getFilters()}function s5(n){return n instanceof bn}function a5(n){return n instanceof Wn&&RT(n)}function DV(n){return s5(n)||a5(n)||(function(t){if(t instanceof Wn&&RD(t)){for(let r of t.getFilters())if(!s5(r)&&!a5(r))return!1;return!0}return!1})(n)}function c5(n){if(mt(n instanceof bn||n instanceof Wn,34018),n instanceof bn)return n;if(n.filters.length===1)return c5(n.filters[0]);let e=n.filters.map(r=>c5(r)),t=Wn.create(e,n.op);return t=o2(t),DV(t)?t:(mt(t instanceof Wn,64498),mt(mg(t),40251),mt(t.filters.length>1,57927),t.filters.reduce((r,i)=>BT(r,i)))}function BT(n,e){let t;return mt(n instanceof bn||n instanceof Wn,38388),mt(e instanceof bn||e instanceof Wn,25473),t=n instanceof bn?e instanceof bn?(function(i,o){return Wn.create([i,o],"and")})(n,e):U6(n,e):e instanceof bn?U6(e,n):(function(i,o){if(mt(i.filters.length>0&&o.filters.length>0,48005),mg(i)&&mg(o))return K8(i,o.getFilters());let s=RD(i)?i:o,a=RD(i)?o:i,c=s.filters.map(l=>BT(l,a));return Wn.create(c,"or")})(n,e),o2(t)}function U6(n,e){if(mg(e))return K8(e,n.getFilters());{let t=e.filters.map(r=>BT(n,r));return Wn.create(t,"or")}}function o2(n){if(mt(n instanceof bn||n instanceof Wn,11850),n instanceof bn)return n;let e=n.getFilters();if(e.length===1)return o2(e[0]);if(G8(n))return n;let t=e.map(i=>o2(i)),r=[];return t.forEach(i=>{i instanceof bn?r.push(i):i instanceof Wn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Wn.create(r,n.op)}var l5=class{constructor(){this.Dn=new Qv}addToCollectionParentIndex(e,t){return this.Dn.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(ba.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(ba.min())}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}},Qv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nr(En.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nr(En.comparator)).toArray()}};var z6="IndexedDbIndexManager",Cb=new Uint8Array(0),u5=class{constructor(e,t){this.databaseId=t,this.vn=new Qv,this.Cn=new Xa(r=>$f(r),(r,i)=>cy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:go(i)};return $6(e).put(o)}return ye.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[y8(t),""],!1,!0);return $6(e).j(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(qc(s.parent))}return r})}addFieldIndex(e,t){let r=bv(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}})(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Zp(e);return o.next(a=>{s.put(O6(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=bv(e),i=Zp(e),o=Yp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=bv(e),r=Yp(e),i=Zp(e);return t.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,t){return ye.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new i2(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Yp(e),i=!0,o=new Map;return ye.forEach(this.Fn(t),s=>this.Mn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=dn(),a=[];return ye.forEach(o,(c,l)=>{qe(z6,`Using index ${(function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`})(c)} to execute ${$f(t)}`);let u=(function(j,H){let oe=ED(H);if(oe===void 0)return null;for(let pe of Zb(j,oe.fieldPath))switch(pe.op){case"array-contains-any":return pe.value.arrayValue.values||[];case"array-contains":return[pe.value]}return null})(l,c),p=(function(j,H){let oe=new Map;for(let pe of Nf(H))for(let z of Zb(j,pe.fieldPath))switch(z.op){case"==":case"in":oe.set(pe.fieldPath.canonicalString(),z.value);break;case"not-in":case"!=":return oe.set(pe.fieldPath.canonicalString(),z.value),Array.from(oe.values())}return null})(l,c),v=(function(j,H){let oe=[],pe=!0;for(let z of Nf(H)){let T=z.kind===0?b6(j,z.fieldPath,j.startAt):x6(j,z.fieldPath,j.startAt);oe.push(T.value),pe&&(pe=T.inclusive)}return new Qc(oe,pe)})(l,c),g=(function(j,H){let oe=[],pe=!0;for(let z of Nf(H)){let T=z.kind===0?x6(j,z.fieldPath,j.endAt):b6(j,z.fieldPath,j.endAt);oe.push(T.value),pe&&(pe=T.inclusive)}return new Qc(oe,pe)})(l,c),E=this.xn(c,l,v),C=this.xn(c,l,g),M=this.On(c,l,p),N=this.Nn(c.indexId,u,E,v.inclusive,C,g.inclusive,M);return ye.forEach(N,Q=>r.H(Q,t.limit).next(j=>{j.forEach(H=>{let oe=Xe.fromSegments(H.documentKey);s.has(oe)||(s=s.add(oe),a.push(oe))})}))}).next(()=>a)}return ye.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=iee(Wn.create(e.filters,"and")).map(r=>$D(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),u=[];for(let p=0;p<c;++p){let v=t?this.Bn(t[p/l]):Cb,g=this.Ln(e,v,r[p%l],i),E=this.kn(e,v,o[p%l],s),C=a.map(M=>this.Ln(e,v,M,!0));u.push(...this.createRange(g,E,C))}return u}Ln(e,t,r,i){let o=new Ff(e,Xe.empty(),t,r);return i?o:o.En()}kn(e,t,r,i){let o=new Ff(e,Xe.empty(),t,r);return i?o.En():o}Mn(e,t){let r=new i2(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.pn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Fn(t);return ye.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<(function(c){let l=new nr(Jr.comparator),u=!1;for(let p of c.filters)for(let v of p.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?u=!0:l=l.add(v.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(u?1:0)})(o)&&(r=1):r=0})).next(()=>(function(s){return s.limit!==null})(t)&&i.length>1&&r===2?1:r)}qn(e,t){let r=new Of;for(let i of Nf(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.hn(i.kind);Ll.Ut.bt(o,s)}return r.an()}Bn(e){let t=new Of;return Ll.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let r=new Of;return Ll.Ut.bt(Uf(this.databaseId,t),r.hn((function(o){let s=Nf(o);return s.length===0?0:s[s.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let i=[];i.push(new Of);let o=0;for(let s of Nf(e)){let a=r[o++];for(let c of i)if(this.$n(t,s.fieldPath)&&$v(a))i=this.Un(i,s,a);else{let l=c.hn(s.kind);Ll.Ut.bt(a,l)}}return this.Kn(i)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Of;c.seed(a.an()),Ll.Ut.bt(s,c.hn(t.kind)),o.push(c)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof bn&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=bv(e),i=Zp(e);return(t?r.j(TD,IDBKeyRange.bound(t,t)):r.j()).next(o=>{let s=[];return ye.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push((function(u,p){let v=p?new Ov(p.sequenceNumber,new ba(Gf(p.readTime),new Xe(qc(p.documentKey)),p.largestBatchId)):Ov.empty(),g=u.fields.map(([E,C])=>new ig(Jr.fromServerFormat(E),C));return new lg(u.indexId,u.collectionGroup,g,v)})(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=bv(e),o=Zp(e);return this.Wn(e).next(s=>i.j(TD,IDBKeyRange.bound(t,t)).next(a=>ye.forEach(a,c=>o.put(O6(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return ye.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?ye.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),ye.forEach(a,c=>this.Gn(e,i,c).next(l=>{let u=this.zn(o,c);return l.isEqual(u)?ye.resolve():this.jn(e,o,c,l,u)}))))})}Jn(e,t,r,i){return Yp(e).put(i.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,i){return Yp(e).delete(i.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){let i=Yp(e),o=new nr(Xu);return i.X({index:M8,range:IDBKeyRange.only([r.indexId,this.uid,Rb(this.Qn(r,t))])},(s,a)=>{o=o.add(new Ff(r.indexId,t,B6(a.arrayValue),B6(a.directionalValue)))}).next(()=>o)}zn(e,t){let r=new nr(Xu),i=this.qn(t,e);if(i==null)return r;let o=ED(t);if(o!=null){let s=e.data.field(o.fieldPath);if($v(s))for(let a of s.arrayValue.values||[])r=r.add(new Ff(t.indexId,e.key,this.Bn(a),i))}else r=r.add(new Ff(t.indexId,e.key,Cb,i));return r}jn(e,t,r,i,o){qe(z6,"Updating index entries for document '%s'",t.key);let s=[];return(function(c,l,u,p,v){let g=c.getIterator(),E=l.getIterator(),C=Wp(g),M=Wp(E);for(;C||M;){let N=!1,Q=!1;if(C&&M){let j=u(C,M);j<0?Q=!0:j>0&&(N=!0)}else C!=null?Q=!0:N=!0;N?(p(M),M=Wp(E)):Q?(v(C),C=Wp(g)):(C=Wp(g),M=Wp(E))}})(i,o,Xu,a=>{s.push(this.Jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),ye.waitFor(s)}Wn(e){let t=1;return Zp(e).X({index:T8,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Xu(s,a)).filter((s,a,c)=>!a||Xu(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Xu(s,e),c=Xu(s,t);if(a===0)i[0]=e.En();else if(a>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];let a=i[s].Rn(this.uid,Cb,Xe.empty()),c=i[s+1].Rn(this.uid,Cb,Xe.empty());o.push(IDBKeyRange.bound(a,c))}return o}Yn(e,t){return Xu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(q6)}getMinOffset(e,t){return ye.mapArray(this.Fn(t),r=>this.Mn(e,r).next(i=>i||at(44426))).next(q6)}};function $6(n){return Ai(n,jv)}function Yp(n){return Ai(n,Dv)}function bv(n){return Ai(n,TT)}function Zp(n){return Ai(n,Av)}function q6(n){mt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;ST(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ba(e.readTime,e.documentKey,t)}var H6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TV=41943040,ss=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function MV(n,e,t){let r=n.store(Za),i=n.store(ug),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.X({range:s},(u,p,v)=>(a++,v.delete()));o.push(c.next(()=>{mt(a===1,47070,{batchId:t.batchId})}));let l=[];for(let u of t.mutations){let p=S8(e,u.key.path,t.batchId);o.push(i.delete(p)),l.push(u.key)}return ye.waitFor(o).next(()=>l)}function s2(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at(14731);e=n.noDocument}return JSON.stringify(e).length}ss.DEFAULT_COLLECTION_PERCENTILE=10,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ss.DEFAULT=new ss(TV,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ss.DISABLED=new ss(-1,0,0);var a2=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,t,r,i){mt(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).X({index:Lf,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=ng(e),s=Ju(e);return s.add({}).next(a=>{mt(typeof a=="number",49019);let c=new Hv(a,t,r,i),l=(function(g,E,C){let M=C.baseMutations.map(Q=>Zv(g.gt,Q)),N=C.mutations.map(Q=>Zv(g.gt,Q));return{userId:E,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:M,mutations:N}})(this.serializer,this.userId,c),u=[],p=new nr((v,g)=>$t(v.canonicalString(),g.canonicalString()));for(let v of i){let g=S8(this.userId,v.key.path,a);p=p.add(v.key.path.popLast()),u.push(s.put(l)),u.push(o.put(g,iJ))}return p.forEach(v=>{u.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Zn[a]=c.keys()}),ye.waitFor(u).next(()=>c)})}lookupMutationBatch(e,t){return Ju(e).get(t).next(r=>r?(mt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Rf(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?ye.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ju(e).X({index:Lf,range:i},(s,a,c)=>{a.userId===this.userId&&(mt(a.batchId>=r,47524,{er:r}),o=Rf(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=id;return Ju(e).X({index:Lf,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,id],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).j(Lf,t).next(r=>r.map(i=>Rf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Db(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ng(e).X({range:i},(s,a,c)=>{let[l,u,p]=s,v=qc(u);if(l===this.userId&&t.path.isEqual(v))return Ju(e).get(p).next(g=>{if(!g)throw at(61480,{tr:s,batchId:p});mt(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:p}),o.push(Rf(this.serializer,g))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nr($t),i=[];return t.forEach(o=>{let s=Db(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ng(e).X({range:a},(l,u,p)=>{let[v,g,E]=l,C=qc(g);v===this.userId&&o.path.isEqual(C)?r=r.add(E):p.done()});i.push(c)}),ye.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Db(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new nr($t);return ng(e).X({range:s},(c,l,u)=>{let[p,v,g]=c,E=qc(v);p===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(g)):u.done()}).next(()=>this.nr(e,a))}nr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Ju(e).get(o).next(s=>{if(s===null)throw at(35274,{batchId:o});mt(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Rf(this.serializer,s))}))}),ye.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return MV(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),ye.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ye.resolve();let r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return ng(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=qc(o[1]);i.push(c)}else a.done()}).next(()=>{mt(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return NV(e,this.userId,t)}sr(e){return PV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:id,lastStreamToken:""})}};function NV(n,e,t){let r=Db(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ng(n).X({range:o,Z:!0},(a,c,l)=>{let[u,p,v]=a;u===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Ju(n){return Ai(n,Za)}function ng(n){return Ai(n,ug)}function PV(n){return Ai(n,Lv)}var bg=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var d5=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let r=new bg(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>Tt.fromTimestamp(new hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.lr(e,i)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Qp(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(mt(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Qp(e).X((s,a)=>{let c=Iv(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>ye.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Qp(e).X((r,i)=>{let o=Iv(i);t(o)})}cr(e){return G6(e).get($b).next(t=>(mt(t!==null,2888),t))}lr(e,t){return G6(e).put($b,t)}hr(e,t){return Qp(e).put(SV(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=$f(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Qp(e).X({range:i,index:D8},(s,a,c)=>{let l=Iv(a);cy(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=td(e);return t.forEach(s=>{let a=go(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),ye.waitFor(i)}removeMatchingKeys(e,t,r){let i=td(e);return ye.forEach(t,o=>{let s=go(o.path);return ye.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=td(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=td(e),o=dn();return i.X({range:r,Z:!0},(s,a,c)=>{let l=qc(s[1]),u=new Xe(l);o=o.add(u)}).next(()=>o)}containsKey(e,t){let r=go(t.path),i=IDBKeyRange.bound([r],[y8(r)],!1,!0),o=0;return td(e).X({index:DT,Z:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Et(e,t){return Qp(e).get(t).next(r=>r?Iv(r):null)}};function Qp(n){return Ai(n,dg)}function G6(n){return Ai(n,Bf)}function td(n){return Ai(n,fg)}var W6="LruGarbageCollector",oee=1048576;function K6([n,e],[t,r]){let i=$t(n,t);return i===0?$t(e,r):i}var f5=class{constructor(e){this.Tr=e,this.buffer=new nr(K6),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();K6(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},c2=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){qe(W6,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>ee(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){_d(t)?qe(W6,"Ignoring IndexedDB error during garbage collection: ",t):yield yd(t)}yield this.Rr(3e5)}))}},h5=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ye.resolve(Us.ue);let r=new f5(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(H6)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H6):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Xp()<=_c.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function kV(n,e){return new h5(n,e)}var p5=class{constructor(e,t){this.db=e,this.garbageCollector=kV(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,i)=>t(i))}addReference(e,t,r){return Ib(e,r)}removeReference(e,t,r){return Ib(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ib(e,t)}Sr(e,t){return(function(i,o){let s=!1;return PV(i).ee(a=>NV(i,a,o).next(c=>(c&&(s=!0),ye.resolve(!c)))).next(()=>s)})(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.wr(e,(s,a)=>{if(a<=t){let c=this.Sr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Tt.min()),td(e).delete((function(p){return[0,go(p.path)]})(s))))});i.push(c)}}).next(()=>ye.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ib(e,t)}wr(e,t){let r=td(e),i,o=Us.ue;return r.X({index:DT},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Us.ue&&t(new Xe(qc(i)),o),o=l,i=c):o=Us.ue}).next(()=>{o!==Us.ue&&t(new Xe(qc(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Ib(n,e){return td(n).put((function(r,i){return{targetId:0,path:go(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}var l2=class{constructor(){this.changes=new Xa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var g5=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Mf(e).put(r)}removeEntry(e,t,r){return Mf(e).delete((function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],n2(s),a[a.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=pi.newInvalidDocument(t);return Mf(e).X({index:Tb,range:IDBKeyRange.only(xv(t))},(i,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:pi.newInvalidDocument(t)};return Mf(e).X({index:Tb,range:IDBKeyRange.only(xv(t))},(i,o)=>{r={document:this.Dr(t,o),size:s2(o)}}).next(()=>r)}getEntries(e,t){let r=as();return this.Cr(e,t,(i,o)=>{let s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,t){let r=as(),i=new _r(Xe.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Dr(o,s);r=r.insert(o,a),i=i.insert(o,s2(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,t,r){if(t.isEmpty())return ye.resolve();let i=new nr(Q6);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(xv(i.first()),xv(i.last())),s=i.getIterator(),a=s.getNext();return Mf(e).X({index:Tb,range:o},(c,l,u)=>{let p=Xe.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Q6(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?u.G(xv(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),n2(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mf(e).j(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let u=as();for(let p of l){let v=this.Dr(Xe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);v.isFoundDocument()&&(uy(t,v)||i.has(v.key))&&(u=u.insert(v.key,v))}return u})}getAllFromCollectionGroup(e,t,r,i){let o=as(),s=Z6(t,r),a=Z6(t,ba.max());return Mf(e).X({index:A8,range:IDBKeyRange.bound(s,a,!0)},(c,l,u)=>{let p=this.Dr(Xe.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&u.done()}).next(()=>o)}newChangeBuffer(e){return new m5(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Y6(e).get(DD).next(t=>(mt(!!t,20021),t))}br(e,t){return Y6(e).put(DD,t)}Dr(e,t){if(t){let r=nee(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Tt.min())))return r}return pi.newInvalidDocument(e)}};function RV(n){return new g5(n)}var m5=class extends l2{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Xa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new nr((o,s)=>$t(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=k6(this.Or.serializer,s);i=i.add(o.path.popLast());let l=s2(c);r+=l-a.size,t.push(this.Or.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=k6(this.Or.serializer,s.convertToNoDocument(Tt.min()));t.push(this.Or.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),ye.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function Y6(n){return Ai(n,Vv)}function Mf(n){return Ai(n,zb)}function xv(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Z6(n,e){let t=e.documentKey.path.toArray();return[n,n2(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Q6(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=$t(t[o],r[o]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}var v5=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var u2=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Nv(r.mutation,i,zs.empty(),hr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,dn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=dn()){let i=Hc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Cv();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Hc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,dn()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=as(),s=Mv(),a=(function(){return Mv()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Ja)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),Nv(u.mutation,l,u.mutation.getFieldMask(),hr.now())):s.set(l.key,zs.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),t.forEach((l,u)=>{var p;return a.set(l,new v5(u,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Mv(),i=new _r((s,a)=>s-a),o=dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||zs.empty();u=a.applyToLocalView(l,u),r.set(c,u);let p=(i.get(a.batchId)||dn()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,p=rV();u.forEach(v=>{if(!o.has(v)){let g=uV(t.get(v),r.get(v));g!==null&&p.set(v,g),o=o.add(v)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return ye.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Xe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ye.resolve(Hc()),a=cg,c=o;return s.next(l=>ye.forEach(l,(u,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(u)?ye.resolve():this.remoteDocumentCache.getEntry(e,u).next(v=>{c=c.insert(u,v)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,dn())).next(u=>({batchId:a,changes:nV(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=Cv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Cv();return this.indexManager.getCollectionParents(e,o).next(a=>ye.forEach(a,c=>{let l=(function(p,v){return new Qa(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((p,v)=>{s=s.insert(p,v)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,pi.newInvalidDocument(u)))});let a=Cv();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&Nv(u.mutation,l,zs.empty(),hr.now()),uy(t,l)&&(a=a.insert(c,l))}),a})}};var y5=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ye.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ei(i.createTime)}})(t)),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:jT(i.bundledQuery),readTime:ei(i.readTime)}})(t)),ye.resolve()}};var _5=class{constructor(){this.overlays=new _r(Xe.comparator),this.kr=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Hc();return ye.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),ye.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){let i=Hc(),o=t.length+1,s=new Xe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new _r((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=Hc(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Hc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return ye.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Gv(t,r));let o=this.kr.get(t);o===void 0&&(o=dn(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var w5=class{constructor(){this.sessionToken=ti.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ye.resolve()}};var Xv=class{constructor(){this.qr=new nr(di.Qr),this.$r=new nr(di.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new di(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new di(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Xe(new En([])),r=new di(t,e),i=new di(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Xe(new En([])),r=new di(t,e),i=new di(t,e+1),o=dn();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new di(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},di=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Xe.comparator(e.key,t.key)||$t(e.Hr,t.Hr)}static Ur(e,t){return $t(e.Hr,t.Hr)||Xe.comparator(e.key,t.key)}};var b5=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new nr(di.Qr)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Hv(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new di(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ye.resolve(s)}lookupMutationBatch(e,t){return ye.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return ye.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?id:this.er-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new di(t,0),i=new di(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),ye.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nr($t);return t.forEach(i=>{let o=new di(i,0),s=new di(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),ye.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Xe.isDocumentKey(o)||(o=o.child(""));let s=new di(new Xe(o),0),a=new nr($t);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),ye.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){mt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ye.forEach(t.mutations,i=>{let o=new di(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new di(t,0),i=this.Yr.firstAfterOrEqual(r);return ye.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var x5=class{constructor(e){this.ni=e,this.docs=(function(){return new _r(Xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():pi.newInvalidDocument(t))}getEntries(e,t){let r=as();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pi.newInvalidDocument(i))}),ye.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=as(),s=t.path,a=new Xe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||ST(x8(u),r)<=0||(i.has(u.key)||uy(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return ye.resolve(o)}getAllFromCollectionGroup(e,t,r,i){at(9500)}ri(e,t){return ye.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new E5(this)}getSize(e){return ye.resolve(this.size)}},E5=class extends l2{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),ye.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var C5=class{constructor(e){this.persistence=e,this.ii=new Xa(t=>$f(t),cy),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.si=0,this.oi=new Xv,this.targetCount=0,this._i=bg.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),ye.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new bg(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.hr(t),ye.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ye.waitFor(o).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),ye.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ye.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this.oi.containsKey(t))}};var Jv=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Us(0),this.ci=!1,this.ci=!0,this.li=new w5,this.referenceDelegate=e(this),this.hi=new C5(this),this.indexManager=new l5,this.remoteDocumentCache=(function(i){return new x5(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new t2(t),this.Ti=new y5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new b5(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);let i=new I5(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return ye.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},I5=class extends jb{constructor(e){super(),this.currentSequenceNumber=e}},d2=class n{constructor(e){this.persistence=e,this.Ai=new Xv,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw at(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.mi,r=>{let i=Xe.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Tt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ye.or([()=>ye.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},f2=class n{constructor(e,t){this.persistence=e,this.gi=new Xa(r=>go(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=kV(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return ye.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return ye.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?ye.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Tt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ye.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ye.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ye.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nb(e.data.value)),t}Sr(e,t,r){return ye.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return ye.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var S5=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new Bb("createOrUpgrade",t);r<1&&i>=1&&((function(c){c.createObjectStore(ay)})(e),(function(c){c.createObjectStore(Lv,{keyPath:rJ}),c.createObjectStore(Za,{keyPath:u6,autoIncrement:!0}).createIndex(Lf,d6,{unique:!0}),c.createObjectStore(ug)})(e),X6(e),(function(c){c.createObjectStore(Pf)})(e));let s=ye.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(fg),c.deleteObjectStore(dg),c.deleteObjectStore(Bf)})(e),X6(e)),s=s.next(()=>(function(c){let l=c.store(Bf),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return l.put($b,u)})(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>(function(c,l){return l.store(Za).j().next(p=>{c.deleteObjectStore(Za),c.createObjectStore(Za,{keyPath:u6,autoIncrement:!0}).createIndex(Lf,d6,{unique:!0});let v=l.store(Za),g=p.map(E=>v.put(E));return ye.waitFor(g)})})(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(hg,{keyPath:fJ})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>((function(c){c.createObjectStore(Vv)})(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(j2,{keyPath:hJ})})(e),(function(c){c.createObjectStore(B2,{keyPath:pJ})})(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore(U2,{keyPath:bJ});l.createIndex(MD,xJ,{unique:!1}),l.createIndex(N8,EJ,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>(function(c){let l=c.createObjectStore(zb,{keyPath:oJ});l.createIndex(Tb,sJ),l.createIndex(A8,aJ)})(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(Pf))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>(function(c){c.createObjectStore(TT,{keyPath:gJ,autoIncrement:!0}).createIndex(TD,mJ,{unique:!1}),c.createObjectStore(Av,{keyPath:vJ}).createIndex(T8,yJ,{unique:!1}),c.createObjectStore(Dv,{keyPath:_J}).createIndex(M8,wJ,{unique:!1})})(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(Av).clear()}).next(()=>{t.objectStore(Dv).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(MT,{keyPath:CJ})})(e)})),r<18&&i>=18&&VE()&&(s=s.next(()=>{t.objectStore(Av).clear()}).next(()=>{t.objectStore(Dv).clear()})),s}yi(e){let t=0;return e.store(Pf).X((r,i)=>{t+=s2(i)}).next(()=>{let r={byteSize:t};return e.store(Vv).put(DD,r)})}pi(e){let t=e.store(Lv),r=e.store(Za);return t.j().next(i=>ye.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,id],[o.userId,o.lastAcknowledgedBatchId]);return r.j(Lf,s).next(a=>ye.forEach(a,c=>{mt(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let l=Rf(this.serializer,c);return MV(e,o.userId,l).next(()=>{})}))}))}wi(e){let t=e.store(fg),r=e.store(Pf);return e.store(Bf).get($b).next(i=>{let o=[];return r.X((s,a)=>{let c=new En(s),l=(function(p){return[0,go(p)]})(c);o.push(t.get(l).next(u=>u?ye.resolve():(p=>t.put({targetId:0,path:go(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>ye.waitFor(o))})}Si(e,t){e.createObjectStore(jv,{keyPath:dJ});let r=t.store(jv),i=new Qv,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:go(c)})}};return t.store(Pf).X({Z:!0},(s,a)=>{let c=new En(s);return o(c.popLast())}).next(()=>t.store(ug).X({Z:!0},([s,a,c],l)=>{let u=qc(a);return o(u.popLast())}))}bi(e){let t=e.store(dg);return t.X((r,i)=>{let o=Iv(i),s=SV(this.serializer,o);return t.put(s)})}Di(e,t){let r=t.store(Pf),i=[];return r.X((o,s)=>{let a=t.store(zb),c=(function(p){return p.document?new Xe(En.fromString(p.document.name).popFirst(5)):p.noDocument?Xe.fromSegments(p.noDocument.path):p.unknownDocument?Xe.fromSegments(p.unknownDocument.path):at(36783)})(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>ye.waitFor(i))}Ci(e,t){let r=t.store(Za),i=RV(this.serializer),o=new Jv(d2.Vi,this.serializer.gt);return r.j().next(s=>{let a=new Map;return s.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:dn();Rf(this.serializer,c).keys().forEach(p=>u=u.add(p)),a.set(c.userId,u)}),ye.forEach(a,(c,l)=>{let u=new fi(l),p=r2.yt(this.serializer,u),v=o.getIndexManager(u),g=a2.yt(u,this.serializer,v,o.referenceDelegate);return new u2(i,g,p,v).recalculateAndSaveOverlaysForDocumentKeys(new Bv(t,Us.ue),c).next()})})}};function X6(n){n.createObjectStore(fg,{keyPath:lJ}).createIndex(DT,uJ,{unique:!0}),n.createObjectStore(dg,{keyPath:"targetId"}).createIndex(D8,cJ,{unique:!0}),n.createObjectStore(Bf)}var ed="IndexedDbPersistence",uD=18e5,dD=5e3,fD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",OV="main",A5=class n{constructor(e,t,r,i,o,s,a,c,l,u,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=s,this.document=a,this.Mi=l,this.xi=u,this.Oi=p,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=v=>Promise.resolve(),!n.C())throw new Ve(xe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new p5(this,i),this.Qi=t+OV,this.serializer=new t2(c),this.$i=new cd(this.Qi,this.Oi,new S5(this.serializer)),this.li=new n5,this.hi=new d5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=RV(this.serializer),this.Ti=new t5,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,u===!1&&Xr(ed,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(xe.FAILED_PRECONDITION,fD);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new Us(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>ee(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>ee(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(_d(e))return qe(ed,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qe(ed,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return Ev(e).get(Gp).next(t=>ye.resolve(this.Xi(t)))}es(e){return Sb(e).delete(this.clientId)}ts(){return ee(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,uD)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Ai(t,hg);return r.j().next(i=>{let o=this.rs(i,uD),s=i.filter(a=>o.indexOf(a)===-1);return ye.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?ye.resolve(!0):Ev(e).get(Gp).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,dD)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new Ve(xe.FAILED_PRECONDITION,fD);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sb(e).j().next(r=>this.rs(r,dD).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&qe(ed,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return ee(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[ay,hg],e=>{let t=new Bv(e,Us.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>Sb(e).j().next(t=>this.rs(t,uD).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return a2.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new u5(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return r2.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){qe(ed,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=(function(c){return c===18?AJ:c===17?O8:c===16?SJ:c===15?NT:c===14?R8:c===13?k8:c===12?IJ:c===11?P8:void at(60245)})(this.Oi),s;return this.$i.runTransaction(e,i,o,a=>(s=new Bv(a,this.ui?this.ui.next():Us.ue),t==="readwrite-primary"?this.Ji(s).next(c=>!!c||this.Hi(s)).next(c=>{if(!c)throw Xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new Ve(xe.FAILED_PRECONDITION,E8);return r(s)}).next(c=>this.Zi(s).next(()=>c)):this.Ts(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ts(e){return Ev(e).get(Gp).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,dD)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ve(xe.FAILED_PRECONDITION,fD)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ev(e).put(Gp,t)}static C(){return cd.C()}Yi(e){let t=Ev(e);return t.get(Gp).next(r=>this.Xi(r)?(qe(ed,"Releasing primary lease."),t.delete(Gp)):ye.resolve())}ns(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Xr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;LE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return qe(ed,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xr(ed,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Xr("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ev(n){return Ai(n,ay)}function Sb(n){return Ai(n,hg)}function UT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var D5=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=dn(),i=dn();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var T5=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var h2=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return LE()?8:C8(Lm())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new T5;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Xp()<=_c.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",Jp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ye.resolve()):(Xp()<=_c.DEBUG&&qe("QueryEngine","Query:",Jp(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Xp()<=_c.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",Jp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vo(t))):ye.resolve())}ps(e,t){if(E6(t))return ye.resolve(null);let r=Vo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Qb(t,null,"F"),r=Vo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=dn(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,Qb(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return E6(t)||i.isEqual(Tt.min())?ye.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?ye.resolve(null):(Xp()<=_c.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jp(t)),this.vs(e,s,t,b8(i,cg)).next(a=>a))})}bs(e,t){let r=new nr(eV(e));return t.forEach((i,o)=>{uy(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Xp()<=_c.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",Jp(t)),this.gs.getDocumentsMatchingQuery(e,t,ba.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var zT="LocalStore",see=3e8,M5=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new _r($t),this.Ms=new Xa(o=>$f(o),cy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function FV(n,e,t,r){return new M5(n,e,t,r)}function LV(n,e){return ee(this,null,function*(){let t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=dn();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function aee(n,e){let t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let p=l.batch,v=p.keys(),g=ye.resolve();return v.forEach(E=>{g=g.next(()=>u.getEntry(c,E)).next(C=>{let M=l.docVersions.get(E);mt(M!==null,48541),C.version.compareTo(M)<0&&(p.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),u.addEntry(C)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=dn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function VV(n){let e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function cee(n,e){let t=nt(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((u,p)=>{let v=i.get(p);if(!v)return;a.push(t.hi.removeMatchingKeys(o,u.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,u.addedDocuments,p)));let g=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(ti.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(p,g),(function(C,M,N){return C.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=see?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(v,g,u)&&a.push(t.hi.updateTargetData(o,g))});let c=as(),l=dn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(jV(o,s,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!r.isEqual(Tt.min())){let u=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return ye.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function jV(n,e,t){let r=dn(),i=dn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=as();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Tt.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):qe(zT,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function lee(n,e){let t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=id),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xg(n,e){let t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,ye.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new wg(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function Eg(n,e,t){return ee(this,null,function*(){let r=nt(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!_d(s))throw s;qe(zT,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function p2(n,e,t){let r=nt(n),i=Tt.min(),o=dn();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,u){let p=nt(c),v=p.Ms.get(u);return v!==void 0?ye.resolve(p.Fs.get(v)):p.hi.getTargetData(l,u)})(r,s,Vo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Tt.min(),t?o:dn())).next(a=>(zV(r,J8(e),a),{documents:a,qs:o})))}function BV(n,e){let t=nt(n),r=nt(t.hi),i=t.Fs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function UV(n,e){let t=nt(n),r=t.xs.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Os.getAllFromCollectionGroup(i,e,b8(r,cg),Number.MAX_SAFE_INTEGER)).then(i=>(zV(t,e,i),i))}function zV(n,e,t){let r=n.xs.get(e)||Tt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}function uee(n,e,t,r){return ee(this,null,function*(){let i=nt(n),o=dn(),s=as();for(let l of t){let u=e.Qs(l.metadata.name);l.document&&(o=o.add(u));let p=e.$s(l);p.setReadTime(e.Us(l.metadata.readTime)),s=s.insert(u,p)}let a=i.Os.newChangeBuffer({trackRemovals:!0}),c=yield xg(i,(function(u){return Vo(Ng(En.fromString(`__bundle__/docs/${u}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>jV(l,a,s).next(u=>(a.apply(l),u)).next(u=>i.hi.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.hi.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,u.Ls,u.ks)).next(()=>u.Ls)))})}function dee(r,i){return ee(this,arguments,function*(n,e,t=dn()){let o=yield xg(n,Vo(jT(e.bundledQuery))),s=nt(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=ei(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Ti.saveNamedQuery(a,e);let l=o.withResumeToken(ti.EMPTY_BYTE_STRING,c);return s.Fs=s.Fs.insert(l.targetId,l),s.hi.updateTargetData(a,l).next(()=>s.hi.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.hi.addMatchingKeys(a,t,o.targetId)).next(()=>s.Ti.saveNamedQuery(a,e))})})}var $V="firestore_clients";function J6(n,e){return`${$V}_${n}_${e}`}var qV="firestore_mutations";function e8(n,e,t){let r=`${qV}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var HV="firestore_targets";function hD(n,e){return`${HV}_${n}_${e}`}var $c="SharedClientState",g2=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ks(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new Ve(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Xr($c,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Pv=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new Ve(r.error.code,r.error.message))),o?new n(e,r.state,i):(Xr($c,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},m2=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=FT();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=I8(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Xr($c,`Failed to parse client data for instance '${e}': ${t}`),null)}},N5=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Xr($c,`Failed to parse online state: ${e}`),null)}},ey=class{constructor(){this.activeTargetIds=FT()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},kv=class{constructor(e,t,r,i,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new _r($t),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=J6(this.persistenceKey,this.js),this.eo=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new ey),this.no=new RegExp(`^${$V}_${s}_([^_]*)$`),this.ro=new RegExp(`^${qV}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${HV}_${s}_(\\d+)$`),this.so=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.oo=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return ee(this,null,function*(){let e=yield this.syncEngine.Ps();for(let r of e){if(r===this.js)continue;let i=this.getItem(J6(this.persistenceKey,r));if(i){let o=m2.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();let t=this.storage.getItem(this.so);if(t){let r=this.ao(t);r&&this.uo(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(hD(this.persistenceKey,e));if(i){let o=Pv.Ks(e,i);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hD(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return qe($c,"READ",e,t),t}setItem(e,t){qe($c,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){qe($c,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if(qe($c,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>ee(this,null,function*(){if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){let r=this.Ao(t.key);return this.Ro(r,null)}{let r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){let r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){let r=(function(o){let s=Us.ue;if(o!=null)try{let a=JSON.parse(o);mt(typeof a=="number",30636,{wo:o}),s=a}catch(a){Xr($c,"Failed to read sequence number from WebStorage",a)}return s})(t.newValue);r!==Us.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){let r=this.So(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){let i=new g2(this.currentUser,e,t,r),o=e8(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){let t=e8(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){let t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){let i=hD(this.persistenceKey,e),o=new Pv(e,t,r);this.setItem(i,o.Ws())}Eo(e){let t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){let t=this.no.exec(e);return t?t[1]:null}Vo(e,t){let r=this.Ao(e);return m2.Ks(r,t)}mo(e,t){let r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return g2.Ks(new fi(o),i,t)}po(e,t){let r=this.io.exec(e),i=Number(r[1]);return Pv.Ks(i,t)}ao(e){return N5.Ks(e)}So(e){return JSON.parse(e)}fo(e){return ee(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);qe($c,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Ys.insert(e,t):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Co(s,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=FT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},v2=class{constructor(){this.Fo=new ey,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ey,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var P5=class{xo(e){}shutdown(){}};var t8="ConnectivityMonitor",y2=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){qe(t8,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){qe(t8,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ab=null;function k5(){return Ab===null?Ab=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ab++,"0x"+Ab.toString(16)}var pD="RestConnection",fee={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},R5=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Gb?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=k5(),a=this.Go(e,t.toUriEncodedString());qe(pD,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),u=Rh(l);return this.jo(e,a,c,r,u).then(p=>(qe(pD,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ls(pD,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mg})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=fee[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var O5=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var ho="WebChannelConnection",F5=class extends R5{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=k5();return new Promise((a,c)=>{let l=new iD;l.setWithCredentials(!0),l.listenOnce(oD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _v.NO_ERROR:let p=l.getResponseJson();qe(ho,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case _v.TIMEOUT:qe(ho,`RPC '${e}' ${s} timed out`),c(new Ve(xe.DEADLINE_EXCEEDED,"Request time out"));break;case _v.HTTP_ERROR:let v=l.getStatus();if(qe(ho,`RPC '${e}' ${s} failed with status:`,v,"response text:",l.getResponseText()),v>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let E=g?.error;if(E&&E.status&&E.message){let C=(function(N){let Q=N.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(Q)>=0?Q:xe.UNKNOWN})(E.status);c(new Ve(C,E.message))}else c(new Ve(xe.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Ve(xe.UNAVAILABLE,"Connection failed."));break;default:at(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{qe(ho,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);qe(ho,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}P_(e,t,r){let i=k5(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cD(),a=aD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");qe(ho,`Creating RPC '${e}' stream ${i}: ${u}`,c);let p=s.createWebChannel(u,c);this.T_(p);let v=!1,g=!1,E=new O5({Ho:M=>{g?qe(ho,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(v||(qe(ho,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),qe(ho,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),C=(M,N,Q)=>{M.listen(N,j=>{try{Q(j)}catch(H){setTimeout(()=>{throw H},0)}})};return C(p,Hp.EventType.OPEN,()=>{g||(qe(ho,`RPC '${e}' stream ${i} transport opened.`),E.s_())}),C(p,Hp.EventType.CLOSE,()=>{g||(g=!0,qe(ho,`RPC '${e}' stream ${i} transport closed`),E.__(),this.I_(p))}),C(p,Hp.EventType.ERROR,M=>{g||(g=!0,ls(ho,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),E.__(new Ve(xe.UNAVAILABLE,"The operation could not be completed")))}),C(p,Hp.EventType.MESSAGE,M=>{var N;if(!g){let Q=M.data[0];mt(!!Q,16349);let j=Q,H=j?.error||((N=j[0])===null||N===void 0?void 0:N.error);if(H){qe(ho,`RPC '${e}' stream ${i} received error:`,H);let oe=H.status,pe=(function(I){let V=ui[I];if(V!==void 0)return hV(V)})(oe),z=H.message;pe===void 0&&(pe=xe.INTERNAL,z="Unknown error status: "+oe+" with message "+H.message),g=!0,E.__(new Ve(pe,z)),p.close()}else qe(ho,`RPC '${e}' stream ${i} received:`,Q),E.a_(Q)}}),C(a,sD.STAT_EVENT,M=>{M.stat===xb.PROXY?qe(ho,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===xb.NOPROXY&&qe(ho,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function GV(){return typeof window<"u"?window:null}function Ob(){return typeof document<"u"?document:null}function dy(n){return new ZD(n,!0)}var ty=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var n8="PersistentStream",_2=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ty(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return ee(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return ee(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return ee(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===xe.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new Ve(xe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>ee(this,null,function*(){this.state=0,this.start()}))}G_(e){return qe(n8,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(qe(n8,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},L5=class extends _2{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=YJ(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Tt.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Tt.min():s.readTime?ei(s.readTime):Tt.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=JD(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=Yb(c)?{documents:wV(o,c)}:{query:bV(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=pV(o,s.resumeToken);let l=QD(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Tt.min())>0){a.readTime=_g(o,s.snapshotVersion.toTimestamp());let l=QD(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=QJ(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=JD(this.serializer),t.removeTarget=e,this.k_(t)}},V5=class extends _2{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=ZJ(e.writeResults,e.commitTime),r=ei(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=JD(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Zv(this.serializer,r))};this.k_(t)}};var j5=class{},B5=class extends j5{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ve(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,XD(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(xe.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,XD(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(xe.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},U5=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Xr(t),this._a=!1):qe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Wf="RemoteStore",z5=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>ee(this,null,function*(){bd(this)&&(qe(Wf,"Restarting streams for network reachability change."),yield(function(c){return ee(this,null,function*(){let l=nt(c);l.Ia.add(4),yield Pg(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield fy(l)})})(this))}))}),this.Aa=new U5(r,i)}};function fy(n){return ee(this,null,function*(){if(bd(n))for(let e of n.da)yield e(!0)})}function Pg(n){return ee(this,null,function*(){for(let e of n.da)yield e(!1)})}function H2(n,e){let t=nt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),HT(t)?qT(t):Rg(t).x_()&&$T(t,e))}function Cg(n,e){let t=nt(n),r=Rg(t);t.Ta.delete(e),r.x_()&&WV(t,e),t.Ta.size===0&&(r.x_()?r.B_():bd(t)&&t.Aa.set("Unknown"))}function $T(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rg(n).H_(e)}function WV(n,e){n.Ra.$e(e),Rg(n).Y_(e)}function qT(n){n.Ra=new YD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Rg(n).start(),n.Aa.aa()}function HT(n){return bd(n)&&!Rg(n).M_()&&n.Ta.size>0}function bd(n){return nt(n).Ia.size===0}function KV(n){n.Ra=void 0}function hee(n){return ee(this,null,function*(){n.Aa.set("Online")})}function pee(n){return ee(this,null,function*(){n.Ta.forEach((e,t)=>{$T(n,e)})})}function gee(n,e){return ee(this,null,function*(){KV(n),HT(n)?(n.Aa.la(e),qT(n)):n.Aa.set("Unknown")})}function mee(n,e,t){return ee(this,null,function*(){if(n.Aa.set("Online"),e instanceof Jb&&e.state===2&&e.cause)try{yield(function(i,o){return ee(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){qe(Wf,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield w2(n,r)}else if(e instanceof sg?n.Ra.Ye(e):e instanceof Xb?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Tt.min()))try{let r=yield VV(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.Ta.get(l);u&&o.Ta.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.Ta.get(c);if(!u)return;o.Ta.set(c,u.withResumeToken(ti.EMPTY_BYTE_STRING,u.snapshotVersion)),WV(o,c);let p=new wg(u.target,c,l,u.sequenceNumber);$T(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){qe(Wf,"Failed to raise snapshot:",r),yield w2(n,r)}})}function w2(n,e,t){return ee(this,null,function*(){if(!_d(e))throw e;n.Ia.add(1),yield Pg(n),n.Aa.set("Offline"),t||(t=()=>VV(n.localStore)),n.asyncQueue.enqueueRetryable(()=>ee(null,null,function*(){qe(Wf,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield fy(n)}))})}function YV(n,e){return e().catch(t=>w2(n,t,e))}function kg(n){return ee(this,null,function*(){let e=nt(n),t=md(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:id;for(;vee(e);)try{let i=yield lee(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,yee(e,i)}catch(i){yield w2(e,i)}ZV(e)&&QV(e)})}function vee(n){return bd(n)&&n.Pa.length<10}function yee(n,e){n.Pa.push(e);let t=md(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function ZV(n){return bd(n)&&!md(n).M_()&&n.Pa.length>0}function QV(n){md(n).start()}function _ee(n){return ee(this,null,function*(){md(n).na()})}function wee(n){return ee(this,null,function*(){let e=md(n);for(let t of n.Pa)e.X_(t.mutations)})}function bee(n,e,t){return ee(this,null,function*(){let r=n.Pa.shift(),i=GD.from(r,e,t);yield YV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield kg(n)})}function xee(n,e){return ee(this,null,function*(){e&&md(n).Z_&&(yield(function(r,i){return ee(this,null,function*(){if((function(s){return fV(s)&&s!==xe.ABORTED})(i.code)){let o=r.Pa.shift();md(r).N_(),yield YV(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield kg(r)}})})(n,e)),ZV(n)&&QV(n)})}function r8(n,e){return ee(this,null,function*(){let t=nt(n);t.asyncQueue.verifyOperationInProgress(),qe(Wf,"RemoteStore received new credentials");let r=bd(t);t.Ia.add(3),yield Pg(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield fy(t)})}function $5(n,e){return ee(this,null,function*(){let t=nt(n);e?(t.Ia.delete(2),yield fy(t)):e||(t.Ia.add(2),yield Pg(t),t.Aa.set("Unknown"))})}function Rg(n){return n.Va||(n.Va=(function(t,r,i){let o=nt(t);return o.ia(),new L5(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:hee.bind(null,n),e_:pee.bind(null,n),n_:gee.bind(null,n),J_:mee.bind(null,n)}),n.da.push(e=>ee(null,null,function*(){e?(n.Va.N_(),HT(n)?qT(n):n.Aa.set("Unknown")):(yield n.Va.stop(),KV(n))}))),n.Va}function md(n){return n.ma||(n.ma=(function(t,r,i){let o=nt(t);return o.ia(),new V5(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:_ee.bind(null,n),n_:xee.bind(null,n),ea:wee.bind(null,n),ta:bee.bind(null,n)}),n.da.push(e=>ee(null,null,function*(){e?(n.ma.N_(),yield kg(n)):(yield n.ma.stop(),n.Pa.length>0&&(qe(Wf,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var q5=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Og(n,e){if(Xr("AsyncQueue",`${e}: ${n}`),_d(n))return new Ve(xe.UNAVAILABLE,`${e}: ${n}`);throw n}var b2=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=Cv(),this.sortedSet=new _r(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var x2=class{constructor(){this.fa=new _r(Xe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):at(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ig=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,b2.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ly(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var H5=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},G5=class{constructor(){this.queries=i8(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=nt(t),o=i.queries;i.queries=i8(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new Ve(xe.ABORTED,"Firestore shutting down"))}};function i8(){return new Xa(n=>X8(n),ly)}function GT(n,e){return ee(this,null,function*(){let t=nt(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new H5,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Og(s,`Initialization of query '${Jp(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&KT(t)})}function WT(n,e){return ee(this,null,function*(){let t=nt(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Eee(n,e){let t=nt(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&KT(t)}function Cee(n,e,t){let r=nt(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function KT(n){n.Da.forEach(e=>{e.next()})}var W5,o8;(o8=W5||(W5={})).Fa="default",o8.Cache="cache";var ny=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ig(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ig.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==W5.Cache}};var K5=class{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}};var E2=class{constructor(e){this.serializer=e}Qs(e){return Wc(this.serializer,e)}$s(e){return e.metadata.exists?_V(this.serializer,e.document,!1):pi.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return ei(e)}},Y5=class{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=XV(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=En.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){let t=new Map,r=new E2(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Qs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||dn()).add(o);t.set(s,a)}}return t}za(e){return ee(this,null,function*(){let t=yield uee(e,new E2(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(let i of this.Ua)yield dee(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}})}};function XV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var C2=class{constructor(e){this.key=e}},I2=class{constructor(e){this.key=e}},S2=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=dn(),this.mutatedKeys=dn(),this.Xa=eV(e),this.eu=new b2(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new x2,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,p)=>{let v=i.get(u),g=uy(this.query,p)?p:null,E=!!v&&this.mutatedKeys.has(v.key),C=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),M=!1;v&&g?v.data.isEqual(g.data)?E!==C&&(r.track({type:3,doc:g}),M=!0):this.iu(v,g)||(r.track({type:2,doc:g}),M=!0,(c&&this.Xa(g,c)>0||l&&this.Xa(g,l)<0)&&(a=!0)):!v&&g?(r.track({type:0,doc:g}),M=!0):v&&!g&&(r.track({type:1,doc:v}),M=!0,(c||l)&&(a=!0)),M&&(g?(s=s.add(g),o=C?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((u,p)=>(function(g,E){let C=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{At:M})}};return C(g)-C(E)})(u.type,p.type)||this.Xa(u.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new Ig(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new x2,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=dn(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new I2(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new C2(r))}),t}uu(e){this.Ha=e.qs,this.Za=dn();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ig.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},xd="SyncEngine",Z5=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Q5=class{constructor(e){this.key=e,this.lu=!1}},X5=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Xa(a=>X8(a),ly),this.Tu=new Map,this.Iu=new Set,this.du=new _r(Xe.comparator),this.Eu=new Map,this.Au=new Xv,this.Ru={},this.Vu=new Map,this.mu=bg.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Iee(n,e,t=!0){return ee(this,null,function*(){let r=G2(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield JV(r,e,t,!0),i})}function See(n,e){return ee(this,null,function*(){let t=G2(n);yield JV(t,e,!0,!1)})}function JV(n,e,t,r){return ee(this,null,function*(){let i=yield xg(n.localStore,Vo(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield YT(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&H2(n.remoteStore,i),a})}function YT(n,e,t,r,i){return ee(this,null,function*(){n.gu=(p,v,g)=>(function(C,M,N,Q){return ee(this,null,function*(){let j=M.view.nu(N);j.Ds&&(j=yield p2(C.localStore,M.query,!1).then(({documents:z})=>M.view.nu(z,j)));let H=Q&&Q.targetChanges.get(M.targetId),oe=Q&&Q.targetMismatches.get(M.targetId)!=null,pe=M.view.applyChanges(j,C.isPrimaryClient,H,oe);return J5(C,M.targetId,pe._u),pe.snapshot})})(n,p,v,g);let o=yield p2(n.localStore,e,!0),s=new S2(e,o.qs),a=s.nu(o.documents),c=Kv.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);J5(n,t,l._u);let u=new Z5(e,t,s);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function Aee(n,e,t){return ee(this,null,function*(){let r=nt(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ly(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Eg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Cg(r.remoteStore,i.targetId),Sg(r,i.targetId)}).catch(yd))):(Sg(r,i.targetId),yield Eg(r.localStore,i.targetId,!0))})}function Dee(n,e){return ee(this,null,function*(){let t=nt(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Cg(t.remoteStore,r.targetId))})}function Tee(n,e,t){return ee(this,null,function*(){let r=JT(n);try{let i=yield(function(s,a){let c=nt(s),l=hr.now(),u=a.reduce((g,E)=>g.add(E.key),dn()),p,v;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=as(),C=dn();return c.Os.getEntries(g,u).next(M=>{E=M,E.forEach((N,Q)=>{Q.isValidDocument()||(C=C.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,E)).next(M=>{p=M;let N=[];for(let Q of a){let j=zJ(Q,p.get(Q.key).overlayedDocument);j!=null&&N.push(new Ja(Q.key,j,H8(j.value.mapValue),Ur.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,N,a)}).next(M=>{v=M;let N=M.applyToLocalDocumentSet(p,C);return c.documentOverlayCache.saveOverlays(g,M.batchId,N)})}).then(()=>({batchId:v.batchId,changes:nV(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new _r($t)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Hl(r,i.changes),yield kg(r.remoteStore)}catch(i){let o=Og(i,"Failed to persist write");t.reject(o)}})}function e7(n,e){return ee(this,null,function*(){let t=nt(n);try{let r=yield cee(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?mt(s.lu,14607):i.removedDocuments.size>0&&(mt(s.lu,42227),s.lu=!1))}),yield Hl(t,r,e)}catch(r){yield yd(r)}})}function s8(n,e,t){let r=nt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=nt(s);c.onlineState=a;let l=!1;c.queries.forEach((u,p)=>{for(let v of p.wa)v.va(a)&&(l=!0)}),l&&KT(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Mee(n,e,t){return ee(this,null,function*(){let r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new _r(Xe.comparator);s=s.insert(o,pi.newNoDocument(o,Tt.min()));let a=dn().add(o),c=new Wv(Tt.min(),new Map,new _r($t),s,a);yield e7(r,c),r.du=r.du.remove(o),r.Eu.delete(e),XT(r)}else yield Eg(r.localStore,e,!1).then(()=>Sg(r,e,t)).catch(yd)})}function Nee(n,e){return ee(this,null,function*(){let t=nt(n),r=e.batch.batchId;try{let i=yield aee(t.localStore,e);QT(t,r,null),ZT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Hl(t,i)}catch(i){yield yd(i)}})}function Pee(n,e,t){return ee(this,null,function*(){let r=nt(n);try{let i=yield(function(s,a){let c=nt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(mt(p!==null,37113),u=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(r.localStore,e);QT(r,e,t),ZT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Hl(r,i)}catch(i){yield yd(i)}})}function kee(n,e){return ee(this,null,function*(){let t=nt(n);bd(t.remoteStore)||qe(xd,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield(function(s){let a=nt(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))})(t.localStore);if(r===id)return void e.resolve();let i=t.Vu.get(r)||[];i.push(e),t.Vu.set(r,i)}catch(r){let i=Og(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function ZT(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function QT(n,e,t){let r=nt(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Sg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||t7(n,r)})}function t7(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Cg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),XT(n))}function J5(n,e,t){for(let r of t)r instanceof C2?(n.Au.addReference(r.key,e),Ree(n,r)):r instanceof I2?(qe(xd,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||t7(n,r.key)):at(19791,{yu:r})}function Ree(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(qe(xd,"New document in limbo: "+t),n.Iu.add(r),XT(n))}function XT(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Xe(En.fromString(e)),r=n.mu.next();n.Eu.set(r,new Q5(t)),n.du=n.du.insert(t,r),H2(n.remoteStore,new wg(Vo(Ng(t.path)),r,"TargetPurposeLimboResolution",Us.ue))}}function Hl(n,e,t){return ee(this,null,function*(){let r=nt(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=D5.Es(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,l){return ee(this,null,function*(){let u=nt(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>ye.forEach(l,v=>ye.forEach(v.Is,g=>u.persistence.referenceDelegate.addReference(p,v.targetId,g)).next(()=>ye.forEach(v.ds,g=>u.persistence.referenceDelegate.removeReference(p,v.targetId,g)))))}catch(p){if(!_d(p))throw p;qe(zT,"Failed to update sequence numbers: "+p)}for(let p of l){let v=p.targetId;if(!p.fromCache){let g=u.Fs.get(v),E=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(E);u.Fs=u.Fs.insert(v,C)}}})})(r.localStore,o))})}function Oee(n,e){return ee(this,null,function*(){let t=nt(n);if(!t.currentUser.isEqual(e)){qe(xd,"User change. New user:",e.toKey());let r=yield LV(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Ve(xe.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Hl(t,r.Bs)}})}function Fee(n,e){let t=nt(n),r=t.Eu.get(e);if(r&&r.lu)return dn().add(r.key);{let i=dn(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function Lee(n,e){return ee(this,null,function*(){let t=nt(n),r=yield p2(t.localStore,e.query,!0),i=e.view.uu(r);return t.isPrimaryClient&&J5(t,e.targetId,i._u),i})}function Vee(n,e){return ee(this,null,function*(){let t=nt(n);return UV(t.localStore,e).then(r=>Hl(t,r))})}function jee(n,e,t,r){return ee(this,null,function*(){let i=nt(n),o=yield(function(a,c){let l=nt(a),u=nt(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>u.Xn(p,c).next(v=>v?l.localDocuments.getDocuments(p,v):ye.resolve(null)))})(i.localStore,e);o!==null?(t==="pending"?yield kg(i.remoteStore):t==="acknowledged"||t==="rejected"?(QT(i,e,r||null),ZT(i,e),(function(a,c){nt(nt(a).mutationQueue).rr(c)})(i.localStore,e)):at(6720,"Unknown batchState",{wu:t}),yield Hl(i,o)):qe(xd,"Cannot apply mutation batch with id: "+e)})}function Bee(n,e){return ee(this,null,function*(){let t=nt(n);if(G2(t),JT(t),e===!0&&t.fu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield a8(t,r.toArray());t.fu=!0,yield $5(t.remoteStore,!0);for(let o of i)H2(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){let r=[],i=Promise.resolve();t.Tu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Sg(t,s),Eg(t.localStore,s,!0))),Cg(t.remoteStore,s)}),yield i,yield a8(t,r),(function(s){let a=nt(s);a.Eu.forEach((c,l)=>{Cg(a.remoteStore,l)}),a.Au.jr(),a.Eu=new Map,a.du=new _r(Xe.comparator)})(t),t.fu=!1,yield $5(t.remoteStore,!1)}})}function a8(n,e,t){return ee(this,null,function*(){let r=nt(n),i=[],o=[];for(let s of e){let a,c=r.Tu.get(s);if(c&&c.length!==0){a=yield xg(r.localStore,Vo(c[0]));for(let l of c){let u=r.Pu.get(l),p=yield Lee(r,u);p.snapshot&&o.push(p.snapshot)}}else{let l=yield BV(r.localStore,s);a=yield xg(r.localStore,l),yield YT(r,n7(l),s,!1,a.resumeToken)}i.push(a)}return r.hu.J_(o),i})}function n7(n){return Q8(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Uee(n){return(function(t){return nt(nt(t).persistence).Ps()})(nt(n).localStore)}function zee(n,e,t,r){return ee(this,null,function*(){let i=nt(n);if(i.fu)return void qe(xd,"Ignoring unexpected query state notification.");let o=i.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield UV(i.localStore,J8(o[0])),a=Wv.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ti.EMPTY_BYTE_STRING);yield Hl(i,s,a);break}case"rejected":yield Eg(i.localStore,e,!0),Sg(i,e,r);break;default:at(64155,t)}})}function $ee(n,e,t){return ee(this,null,function*(){let r=G2(n);if(r.fu){for(let i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){qe(xd,"Adding an already active target "+i);continue}let o=yield BV(r.localStore,i),s=yield xg(r.localStore,o);yield YT(r,n7(o),s.targetId,!1,s.resumeToken),H2(r.remoteStore,s)}for(let i of t)r.Tu.has(i)&&(yield Eg(r.localStore,i,!1).then(()=>{Cg(r.remoteStore,i),Sg(r,i)}).catch(yd))}})}function G2(n){let e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=e7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mee.bind(null,e),e.hu.J_=Eee.bind(null,e.eventManager),e.hu.pu=Cee.bind(null,e.eventManager),e}function JT(n){let e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pee.bind(null,e),e}function qee(n,e,t){let r=nt(n);(function(o,s,a){return ee(this,null,function*(){try{let c=yield s.getMetadata();if(yield(function(g,E){let C=nt(g),M=ei(E.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",N=>C.Ti.getBundleMetadata(N,E.id)).then(N=>!!N&&N.createTime.compareTo(M)>=0)})(o.localStore,c))return yield s.close(),a._completeWith((function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(XV(c));let l=new Y5(c,s.serializer),u=yield s.Su();for(;u;){let v=yield l.Wa(u);v&&a._updateProgress(v),u=yield s.Su()}let p=yield l.za(o.localStore);return yield Hl(o,p.Ja,void 0),yield(function(g,E){let C=nt(g);return C.persistence.runTransaction("Save bundle","readwrite",M=>C.Ti.saveBundleMetadata(M,E))})(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.ja)}catch(c){return ls(xd,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var eM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return ee(this,null,function*(){this.serializer=dy(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return FV(this.persistence,new h2,t.initialUser,this.serializer)}Du(t){return new Jv(d2.Vi,this.serializer)}bu(t){return new v2}terminate(){return ee(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),eT=class extends eM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){mt(this.persistence.referenceDelegate instanceof f2,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new c2(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?ss.withCacheSize(this.cacheSizeBytes):ss.DEFAULT;return new Jv(r=>f2.Vi(r,t),this.serializer)}},A2=class n extends eM{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return ee(this,null,function*(){yield RE(n.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield JT(this.Mu.syncEngine),yield kg(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return FV(this.persistence,new h2,e.initialUser,this.serializer)}Cu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new c2(r,e.asyncQueue,t)}Fu(e,t){let r=new AD(t,this.persistence);return new SD(e.asyncQueue,r)}Du(e){let t=UT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ss.withCacheSize(this.cacheSizeBytes):ss.DEFAULT;return new A5(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,GV(),Ob(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new v2}},tT=class n extends A2{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return ee(this,null,function*(){yield RE(n.prototype,this,"initialize").call(this,e);let t=this.Mu.syncEngine;this.sharedClientState instanceof kv&&(this.sharedClientState.syncEngine={Do:jee.bind(null,t),vo:zee.bind(null,t),Co:$ee.bind(null,t),Ps:Uee.bind(null,t),bo:Vee.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.ji(r=>ee(this,null,function*(){yield Bee(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}bu(e){let t=GV();if(!kv.C(t))throw new Ve(xe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=UT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kv(t,e.asyncQueue,r,e.clientId,e.initialUser)}},tM=(()=>{class n{initialize(t,r){return ee(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>s8(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oee.bind(null,this.syncEngine),yield $5(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new G5})()}createDatastore(t){let r=dy(t.databaseInfo.databaseId),i=(function(s){return new F5(s)})(t.databaseInfo);return(function(s,a,c,l){return new B5(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new z5(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>s8(this.syncEngine,r,0),(function(){return y2.C()?new y2:new P5})())}createSyncEngine(t,r){return(function(o,s,a,c,l,u,p){let v=new X5(o,s,a,c,l,u);return p&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return ee(this,null,function*(){var t,r;yield(function(o){return ee(this,null,function*(){let s=nt(o);qe(Wf,"RemoteStore shutting down."),s.Ia.add(5),yield Pg(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function c8(n,e=10240){let t=0;return{read(){return ee(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return ee(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ag=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var nT=class{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new Si,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}getMetadata(){return ee(this,null,function*(){return this.metadata.promise})}Su(){return ee(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return ee(this,null,function*(){let e=yield this.ku();if(e===null)return null;let t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);let i=yield this.Qu(r);return new K5(JSON.parse(i),e.length+r)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return ee(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Qu(e){return ee(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");let t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return ee(this,null,function*(){let e=yield this.Nu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var rT=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return ee(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ve(xe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield(function(i,o){return ee(this,null,function*(){let s=nt(i),a={documents:o.map(p=>Yv(s.serializer,p))},c=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,En.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let v=KJ(s.serializer,p);l.set(v.key.toString(),v)});let u=[];return o.forEach(p=>{let v=l.get(p.toString());mt(!!v,55234,{key:p}),u.push(v)}),u})})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return ee(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=Xe.fromPath(r);this.mutations.push(new qv(i,this.precondition(i)))}),yield(function(r,i){return ee(this,null,function*(){let o=nt(r),s={writes:i.map(a=>Zv(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,En.emptyPath(),s)})})(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at(50498,{Wu:e.constructor.name});t=Tt.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ve(xe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tt.min())?Ur.exists(!1):Ur.updateTime(t):Ur.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Ve(xe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(t)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var iT=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new ty(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>ee(this,null,function*(){let e=new rT(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!sy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!fV(t)}return!1}};var vd="FirestoreClient",oT=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=fi.UNAUTHENTICATED,this.clientId=Rv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>ee(this,null,function*(){qe(vd,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(qe(vd,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>ee(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Og(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function gD(n,e){return ee(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),qe(vd,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>ee(null,null,function*(){r.isEqual(i)||(yield LV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{ls("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{qe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ls("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function l8(n,e){return ee(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield nM(n);qe(vd,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>r8(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>r8(e.remoteStore,i)),n._onlineComponents=e})}function nM(n){return ee(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe(vd,"Using user provided OfflineComponentProvider");try{yield gD(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===xe.FAILED_PRECONDITION||i.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ls("Error using user provided cache. Falling back to memory cache: "+t),yield gD(n,new eM)}}else qe(vd,"Using default OfflineComponentProvider"),yield gD(n,new eT(void 0));return n._offlineComponents})}function W2(n){return ee(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe(vd,"Using user provided OnlineComponentProvider"),yield l8(n,n._uninitializedComponentsProvider._online)):(qe(vd,"Using default OnlineComponentProvider"),yield l8(n,new tM))),n._onlineComponents})}function r7(n){return nM(n).then(e=>e.persistence)}function rM(n){return nM(n).then(e=>e.localStore)}function i7(n){return W2(n).then(e=>e.remoteStore)}function iM(n){return W2(n).then(e=>e.syncEngine)}function Hee(n){return W2(n).then(e=>e.datastore)}function Dg(n){return ee(this,null,function*(){let e=yield W2(n),t=e.eventManager;return t.onListen=Iee.bind(null,e.syncEngine),t.onUnlisten=Aee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=See.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Dee.bind(null,e.syncEngine),t})}function Gee(n){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){let e=yield r7(n),t=yield i7(n);return e.setNetworkEnabled(!0),(function(i){let o=nt(i);return o.Ia.delete(0),fy(o)})(t)}))}function Wee(n){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){let e=yield r7(n),t=yield i7(n);return e.setNetworkEnabled(!1),(function(i){return ee(this,null,function*(){let o=nt(i);o.Ia.add(0),yield Pg(o),o.Aa.set("Offline")})})(t)}))}function Kee(n,e){let t=new Si;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o,s){return ee(this,null,function*(){try{let a=yield(function(l,u){let p=nt(l);return p.persistence.runTransaction("read document","readonly",v=>p.localDocuments.getDocument(v,u))})(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new Ve(xe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Og(a,`Failed to get document '${o} from cache`);s.reject(c)}})})(yield rM(n),e,t)})),t.promise}function o7(n,e,t={}){let r=new Si;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(o,s,a,c,l){let u=new Ag({next:v=>{u.Ou(),s.enqueueAndForget(()=>WT(o,p));let g=v.docs.has(a);!g&&v.fromCache?l.reject(new Ve(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&v.fromCache&&c&&c.source==="server"?l.reject(new Ve(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(v)},error:v=>l.reject(v)}),p=new ny(Ng(a.path),u,{includeMetadataChanges:!0,ka:!0});return GT(o,p)})(yield Dg(n),n.asyncQueue,e,t,r)})),r.promise}function Yee(n,e){let t=new Si;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o,s){return ee(this,null,function*(){try{let a=yield p2(i,o,!0),c=new S2(o,a.qs),l=c.nu(a.documents),u=c.applyChanges(l,!1);s.resolve(u.snapshot)}catch(a){let c=Og(a,`Failed to execute query '${o} against cache`);s.reject(c)}})})(yield rM(n),e,t)})),t.promise}function s7(n,e,t={}){let r=new Si;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(o,s,a,c,l){let u=new Ag({next:v=>{u.Ou(),s.enqueueAndForget(()=>WT(o,p)),v.fromCache&&c.source==="server"?l.reject(new Ve(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(v)},error:v=>l.reject(v)}),p=new ny(a,u,{includeMetadataChanges:!0,ka:!0});return GT(o,p)})(yield Dg(n),n.asyncQueue,e,t,r)})),r.promise}function Zee(n,e){let t=new Ag(e);return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o){nt(i).Da.add(o),o.next()})(yield Dg(n),t)})),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o){nt(i).Da.delete(o)})(yield Dg(n),t)}))}}function Qee(n,e,t,r){let i=(function(s,a){let c;return c=typeof s=="string"?ET().encode(s):s,(function(u,p){return new nT(u,p)})((function(u,p){if(u instanceof Uint8Array)return c8(u,p);if(u instanceof ArrayBuffer)return c8(new Uint8Array(u),p);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(t,dy(e));n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){qee(yield iM(n),i,r)}))}function Xee(n,e){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){return(function(r,i){let o=nt(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))})(yield rM(n),e)}))}function a7(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var u8=new Map;var c7="firestore.googleapis.com",d8=!0,D2=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c7,this.ssl=d8}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:d8;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oee)throw new Ve(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a7((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Kf=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new mD;switch(r.type){case"firstParty":return new wD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ve(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return ee(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=u8.get(t);r&&(qe("ComponentProvider","Removing Datastore"),u8.delete(t),r.terminate())})(this),Promise.resolve()}};function K2(n,e,t,r={}){var i;n=Pn(n,Kf);let o=Rh(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(y_(`https://${c}`),w_("Firestore",!0)),s.host!==c7&&s.host!==c&&ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Lh(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,p;if(typeof r.mockUserToken=="string")u=r.mockUserToken,p=fi.MOCK_USER;else{u=__(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ve(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new fi(v)}n._authCredentials=new vD(new Fb(u,p))}}var Gi=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Kn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(oy(t,n._jsonSchema))return new n(e,r||null,new Xe(En.fromString(t.referencePath)))}};Kn._jsonSchemaVersion="firestore/documentReference/1.0",Kn._jsonSchema={type:hi("string",Kn._jsonSchemaVersion),referencePath:hi("string")};var Kc=class n extends Gi{constructor(e,t,r){super(e,t,Ng(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new Xe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function hy(n,e,...t){if(n=wn(n),CT("collection","path",e),n instanceof Kf){let r=En.fromString(e,...t);return o6(r),new Kc(n,null,r)}{if(!(n instanceof Kn||n instanceof Kc))throw new Ve(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(En.fromString(e,...t));return o6(r),new Kc(n.firestore,null,r)}}function oM(n,e){if(n=Pn(n,Kf),CT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(n,null,(function(r){return new Qa(En.emptyPath(),r)})(e))}function Qf(n,e,...t){if(n=wn(n),arguments.length===1&&(e=Rv.newId()),CT("doc","path",e),n instanceof Kf){let r=En.fromString(e,...t);return i6(r),new Kn(n,null,new Xe(r))}{if(!(n instanceof Kn||n instanceof Kc))throw new Ve(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(En.fromString(e,...t));return i6(r),new Kn(n.firestore,n instanceof Kc?n.converter:null,new Xe(r))}}function py(n,e){return n=wn(n),e=wn(e),(n instanceof Kn||n instanceof Kc)&&(e instanceof Kn||e instanceof Kc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Y2(n,e){return n=wn(n),e=wn(e),n instanceof Gi&&e instanceof Gi&&n.firestore===e.firestore&&ly(n._query,e._query)&&n.converter===e.converter}var f8="AsyncQueue",T2=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ty(this,"async_queue_retry"),this.oc=()=>{let r=Ob();r&&qe(f8,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Ob();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Ob();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Si;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return ee(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!_d(e))throw e;qe(f8,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Xr("INTERNAL UNHANDLED ERROR: ",h8(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=q5.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&at(47125,{hc:h8(this.tc)})}verifyOperationInProgress(){}Pc(){return ee(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function h8(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function sT(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var aT=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Si,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var l7=-1,Or=class extends Kf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new T2,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return ee(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new T2(e),this._firestoreClient=void 0,yield e}})}};function u7(n,e){let t=typeof n=="object"?n:wc(),r=typeof n=="string"?n:e||Gb,i=ka(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=v_("firestore");o&&K2(i,...o)}return i}function Wi(n){if(n._terminated)throw new Ve(xe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||d7(n),n._firestoreClient}function d7(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,l,u){return new ND(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,a7(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new oT(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}function sM(n,e){ls("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return f7(n,tM.provider,{build:r=>new A2(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function aM(n){return ee(this,null,function*(){ls("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();f7(n,tM.provider,{build:t=>new tT(t,e.cacheSizeBytes)})})}function f7(n,e,t){if((n=Pn(n,Or))._firestoreClient||n._terminated)throw new Ve(xe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ve(xe.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},d7(n)}function cM(n){if(n._initialized&&!n._terminated)throw new Ve(xe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Si;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>ee(null,null,function*(){try{yield(function(r){return ee(this,null,function*(){if(!cd.C())return Promise.resolve();let i=r+OV;yield cd.delete(i)})})(UT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function lM(n){return(function(t){let r=new Si;return t.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return kee(yield iM(t),r)})),r.promise})(Wi(n=Pn(n,Or)))}function uM(n){return Gee(Wi(n=Pn(n,Or)))}function dM(n){return Wee(Wi(n=Pn(n,Or)))}function fM(n,e){let t=Wi(n=Pn(n,Or)),r=new aT;return Qee(t,n._databaseId,e,r),r}function hM(n,e){return Xee(Wi(n=Pn(n,Or)),e).then(t=>t?new Gi(n,null,t.query):null)}var $s=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ti.fromBase64String(e))}catch(t){throw new Ve(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(oy(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};$s._jsonSchemaVersion="firestore/bytes/1.0",$s._jsonSchema={type:hi("string",$s._jsonSchemaVersion),bytes:hi("string")};var ec=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $l=class{constructor(e){this._methodName=e}};var Yc=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(oy(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Yc._jsonSchemaVersion="firestore/geoPoint/1.0",Yc._jsonSchema={type:hi("string",Yc._jsonSchemaVersion),latitude:hi("number"),longitude:hi("number")};var od=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(oy(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Ve(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};od._jsonSchemaVersion="firestore/vectorValue/1.0",od._jsonSchema={type:hi("string",od._jsonSchemaVersion),vectorValues:hi("object")};var Jee=/^__.*__$/,cT=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ja(e,this.data,this.fieldMask,t,this.fieldTransforms):new pd(e,this.data,t,this.fieldTransforms)}},M2=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ja(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function h7(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{Ec:n})}}var N2=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return P2(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(h7(this.Ec)&&Jee.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},lT=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||dy(e)}Dc(e,t,r,i=!1){return new N2({Ec:e,methodName:t,bc:r,path:Jr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Xf(n){let e=n._freezeSettings(),t=dy(n._databaseId);return new lT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Z2(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);mM("Data must be an object, but it was:",s,r);let a=m7(r,s),c,l;if(o.merge)c=new zs(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let p of o.mergeFields){let v=pT(e,p,t);if(!s.contains(v))throw new Ve(xe.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);y7(u,v)||u.push(v)}c=new zs(u),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new cT(new po(a),c,l)}var ry=class n extends $l{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function p7(n,e,t){return new N2({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var uT=class n extends $l{_toFieldTransform(e){return new qf(e.path,new fd)}isEqual(e){return e instanceof n}},dT=class n extends $l{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=p7(this,e,!0),r=this.vc.map(o=>Jf(o,t)),i=new Ul(r);return new qf(e.path,i)}isEqual(e){return e instanceof n&&Lh(this.vc,e.vc)}},fT=class n extends $l{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=p7(this,e,!0),r=this.vc.map(o=>Jf(o,t)),i=new zl(r);return new qf(e.path,i)}isEqual(e){return e instanceof n&&Lh(this.vc,e.vc)}},hT=class n extends $l{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new hd(e.serializer,oV(e.serializer,this.Cc));return new qf(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function pM(n,e,t,r){let i=n.Dc(1,e,t);mM("Data must be an object, but it was:",i,r);let o=[],s=po.empty();wd(r,(c,l)=>{let u=vM(e,c,t);l=wn(l);let p=i.gc(u);if(l instanceof ry)o.push(u);else{let v=Jf(l,p);v!=null&&(o.push(u),s.set(u,v))}});let a=new zs(o);return new M2(s,a,i.fieldTransforms)}function gM(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[pT(e,r,t)],c=[i];if(o.length%2!=0)throw new Ve(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)a.push(pT(e,o[v])),c.push(o[v+1]);let l=[],u=po.empty();for(let v=a.length-1;v>=0;--v)if(!y7(l,a[v])){let g=a[v],E=c[v];E=wn(E);let C=s.gc(g);if(E instanceof ry)l.push(g);else{let M=Jf(E,C);M!=null&&(l.push(g),u.set(g,M))}}let p=new zs(l);return new M2(u,p,s.fieldTransforms)}function g7(n,e,t,r=!1){return Jf(t,n.Dc(r?4:3,e))}function Jf(n,e){if(v7(n=wn(n)))return mM("Unsupported field value:",e,n),m7(n,e);if(n instanceof $l)return(function(r,i){if(!h7(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=Jf(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=hr.fromDate(r);return{timestampValue:_g(i.serializer,o)}}if(r instanceof hr){let o=new hr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_g(i.serializer,o)}}if(r instanceof Yc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $s)return{bytesValue:pV(i.serializer,r._byteString)};if(r instanceof Kn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:VT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof od)return(function(s,a){return{mapValue:{fields:{[PT]:{stringValue:kT},[pg]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return LT(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${V2(r)}`)})(n,e)}function m7(n,e){let t={};return F8(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wd(n,(r,i)=>{let o=Jf(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function v7(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof hr||n instanceof Yc||n instanceof $s||n instanceof Kn||n instanceof $l||n instanceof od)}function mM(n,e,t){if(!v7(t)||!_8(t)){let r=V2(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function pT(n,e,t){if((e=wn(e))instanceof ec)return e._internalPath;if(typeof e=="string")return vM(n,e);throw P2("Field path arguments must be of type string or ",n,!1,void 0,t)}var ete=new RegExp("[~\\*/\\[\\]]");function vM(n,e,t){if(e.search(ete)>=0)throw P2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ec(...e.split("."))._internalPath}catch{throw P2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function P2(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Ve(xe.INVALID_ARGUMENT,a+n+c)}function y7(n,e){return n.some(t=>t.isEqual(e))}var Yf=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Q2("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},gT=class extends Yf{data(){return super.data()}};function Q2(n,e){return typeof e=="string"?vM(n,e):e instanceof ec?e._internalPath:e._delegate._internalPath}function _7(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ve(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var iy=class{},Zf=class extends iy{};function tc(n,e,...t){let r=[];e instanceof iy&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof mT).length,a=o.filter(c=>c instanceof k2).length;if(s>1||s>0&&a>0)throw new Ve(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var k2=class n extends Zf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return b7(e._query,t),new Gi(e.firestore,e.converter,qD(e._query,t))}_parse(e){let t=Xf(e.firestore);return(function(o,s,a,c,l,u,p){let v;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ve(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){g8(p,u);let E=[];for(let C of p)E.push(p8(c,o,C));v={arrayValue:{values:E}}}else v=p8(c,o,p)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||g8(p,u),v=g7(a,s,p,u==="in"||u==="not-in");return bn.create(l,u,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function X2(n,e,t){let r=e,i=Q2("where",n);return k2._create(i,r,t)}var mT=class n extends iy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Wn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)b7(s,c),s=qD(s,c)})(e._query,t),new Gi(e.firestore,e.converter,qD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var vT=class n extends Zf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new Ve(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ve(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zf(o,s)})(e._query,this._field,this._direction);return new Gi(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Qa(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function J2(n,e="asc"){let t=e,r=Q2("orderBy",n);return vT._create(r,t)}var R2=class n extends Zf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Gi(e.firestore,e.converter,Qb(e._query,this._limit,this._limitType))}};function yM(n){return w8("limit",n),R2._create("limit",n,"F")}function _M(n){return w8("limitToLast",n),R2._create("limitToLast",n,"L")}var O2=class n extends Zf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=w7(e,this.type,this._docOrFields,this._inclusive);return new Gi(e.firestore,e.converter,(function(i,o){return new Qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function wM(...n){return O2._create("startAt",n,!0)}function bM(...n){return O2._create("startAfter",n,!1)}var F2=class n extends Zf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=w7(e,this.type,this._docOrFields,this._inclusive);return new Gi(e.firestore,e.converter,(function(i,o){return new Qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,t))}};function xM(...n){return F2._create("endBefore",n,!1)}function EM(...n){return F2._create("endAt",n,!0)}function w7(n,e,t,r){if(t[0]=wn(t[0]),t[0]instanceof Yf)return(function(o,s,a,c,l){if(!c)throw new Ve(xe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let p of og(o))if(p.field.isKeyField())u.push(Uf(s,c.key));else{let v=c.data.field(p.field);if(z2(v))throw new Ve(xe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){let g=p.field.canonicalString();throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}u.push(v)}return new Qc(u,l)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Xf(n.firestore);return(function(s,a,c,l,u,p){let v=s.explicitOrderBy;if(u.length>v.length)throw new Ve(xe.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let E=0;E<u.length;E++){let C=u[E];if(v[E].field.isKeyField()){if(typeof C!="string")throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!OT(s)&&C.indexOf("/")!==-1)throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);let M=s.path.child(En.fromString(C));if(!Xe.isDocumentKey(M))throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let N=new Xe(M);g.push(Uf(a,N))}else{let M=g7(c,l,C);g.push(M)}}return new Qc(g,p)})(n._query,n.firestore._databaseId,i,e,t,r)}}function p8(n,e,t){if(typeof(t=wn(t))=="string"){if(t==="")throw new Ve(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OT(e)&&t.indexOf("/")!==-1)throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(En.fromString(t));if(!Xe.isDocumentKey(r))throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uf(n,new Xe(r))}if(t instanceof Kn)return Uf(n,t._key);throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${V2(t)}.`)}function g8(n,e){if(!Array.isArray(n)||n.length===0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b7(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ve(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Tg=class{convertValue(e,t="none"){switch(ud(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw at(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return wd(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[pg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Cr(s.doubleValue));return new od(o)}convertGeoPoint(e){return new Yc(Cr(e.latitude),Cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=$2(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uv(e));default:return null}}convertTimestamp(e){let t=jl(e);return new hr(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=En.fromString(e);mt(IV(r),9688,{name:e});let i=new ld(r.get(1),r.get(3)),o=new Xe(r.popFirst(5));return i.isEqual(t)||Xr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function ex(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var yT=class extends Tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}};var Vl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},jo=class n extends Yf{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new sd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Q2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:hi("string",jo._jsonSchemaVersion),bundleSource:hi("string","DocumentSnapshot"),bundleName:hi("string"),bundle:hi("string")};var sd=class extends jo{data(e={}){return super.data(e)}},cs=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new sd(this._firestore,this._userDataWriter,r.key,r,new Vl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new sd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new sd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:tte(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function tte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:n})}}function tx(n,e){return n instanceof jo&&e instanceof jo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof cs&&e instanceof cs&&n._firestore===e._firestore&&Y2(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function nx(n){n=Pn(n,Kn);let e=Pn(n.firestore,Or);return o7(Wi(e),n._key).then(t=>TM(e,n,t))}cs._jsonSchemaVersion="firestore/querySnapshot/1.0",cs._jsonSchema={type:hi("string",cs._jsonSchemaVersion),bundleSource:hi("string","QuerySnapshot"),bundleName:hi("string"),bundle:hi("string")};var ql=class extends Tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}};function CM(n){n=Pn(n,Kn);let e=Pn(n.firestore,Or),t=Wi(e),r=new ql(e);return Kee(t,n._key).then(i=>new jo(e,r,n._key,i,new Vl(i!==null&&i.hasLocalMutations,!0),n.converter))}function IM(n){n=Pn(n,Kn);let e=Pn(n.firestore,Or);return o7(Wi(e),n._key,{source:"server"}).then(t=>TM(e,n,t))}function rx(n){n=Pn(n,Gi);let e=Pn(n.firestore,Or),t=Wi(e),r=new ql(e);return _7(n._query),s7(t,n._query).then(i=>new cs(e,r,n,i))}function SM(n){n=Pn(n,Gi);let e=Pn(n.firestore,Or),t=Wi(e),r=new ql(e);return Yee(t,n._query).then(i=>new cs(e,r,n,i))}function AM(n){n=Pn(n,Gi);let e=Pn(n.firestore,Or),t=Wi(e),r=new ql(e);return s7(t,n._query,{source:"server"}).then(i=>new cs(e,r,n,i))}function gy(n,e,t){n=Pn(n,Kn);let r=Pn(n.firestore,Or),i=ex(n.converter,e,t);return Lg(r,[Z2(Xf(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ur.none())])}function my(n,e,t,...r){n=Pn(n,Kn);let i=Pn(n.firestore,Or),o=Xf(i),s;return s=typeof(e=wn(e))=="string"||e instanceof ec?gM(o,"updateDoc",n._key,e,t,r):pM(o,"updateDoc",n._key,e),Lg(i,[s.toMutation(n._key,Ur.exists(!0))])}function ix(n){return Lg(Pn(n.firestore,Or),[new gd(n._key,Ur.none())])}function ox(n,e){let t=Pn(n.firestore,Or),r=Qf(n),i=ex(n.converter,e);return Lg(t,[Z2(Xf(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}function Fg(n,...e){var t,r,i;n=wn(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||sT(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sT(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,u;if(n instanceof Kn)l=Pn(n.firestore,Or),u=Ng(n._key.path),c={next:p=>{e[s]&&e[s](TM(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Pn(n,Gi);l=Pn(p.firestore,Or),u=p._query;let v=new ql(l);c={next:g=>{e[s]&&e[s](new cs(l,v,p,g))},error:e[s+1],complete:e[s+2]},_7(n._query)}return(function(v,g,E,C){let M=new Ag(C),N=new ny(g,M,E);return v.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return GT(yield Dg(v),N)})),()=>{M.Ou(),v.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return WT(yield Dg(v),N)}))}})(Wi(l),u,a,c)}function DM(n,e){return Zee(Wi(n=Pn(n,Or)),sT(e)?e:{next:e})}function Lg(n,e){return(function(r,i){let o=new Si;return r.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return Tee(yield iM(r),i,o)})),o.promise})(Wi(n),e)}function TM(n,e,t){let r=t.docs.get(e._key),i=new ql(n);return new jo(n,i,e._key,r,new Vl(t.hasPendingWrites,t.fromCache),e.converter)}var nte={maxAttempts:5};var L2=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xf(e)}set(e,t,r){this._verifyNotCommitted();let i=rd(e,this._firestore),o=ex(i.converter,t,r),s=Z2(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ur.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=rd(e,this._firestore),s;return s=typeof(t=wn(t))=="string"||t instanceof ec?gM(this._dataReader,"WriteBatch.update",o._key,t,r,i):pM(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=rd(e,this._firestore);return this._mutations=this._mutations.concat(new gd(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function rd(n,e){if((n=wn(n)).firestore!==e)throw new Ve(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var _T=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xf(e)}get(e){let t=rd(e,this._firestore),r=new yT(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return at(24041);let o=i[0];if(o.isFoundDocument())return new Yf(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Yf(this._firestore,r,t._key,null,t.converter);throw at(18433,{doc:o})})}set(e,t,r){let i=rd(e,this._firestore),o=ex(i.converter,t,r),s=Z2(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=rd(e,this._firestore),s;return s=typeof(t=wn(t))=="string"||t instanceof ec?gM(this._dataReader,"Transaction.update",o._key,t,r,i):pM(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=rd(e,this._firestore);return this._transaction.delete(t._key),this}};var wT=class extends _T{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=rd(e,this._firestore),r=new ql(this._firestore);return super.get(e).then(i=>new jo(this._firestore,r,t._key,i._document,new Vl(!1,!1),t.converter))}};function MM(n,e,t){n=Pn(n,Or);let r=Object.assign(Object.assign({},nte),t);return(function(o){if(o.maxAttempts<1)throw new Ve(xe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let c=new Si;return o.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){let l=yield Hee(o);new iT(o.asyncQueue,l,a,s,c).zu()})),c.promise})(Wi(n),i=>e(new wT(n,i)),r)}function NM(){return new ry("deleteField")}function x7(){return new uT("serverTimestamp")}function E7(...n){return new dT("arrayUnion",n)}function C7(...n){return new fT("arrayRemove",n)}function PM(n){return new hT("increment",n)}(function(e,t=!0){(function(i){Mg=i})(E_),Ts(new Ui("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Or(new yD(r.getProvider("auth-internal")),new bD(s,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ve(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ld(l.options.projectId,u)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Hn(e6,t6,e),Hn(e6,t6,"esm2017")})();var sx=function(){return sx=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},sx.apply(this,arguments)};var ite={includeMetadataChanges:!1};function kM(n,e){return e===void 0&&(e=ite),new kt(function(t){var r=Fg(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function I7(n){return kM(n,{includeMetadataChanges:!0})}function S7(n,e){return e===void 0&&(e={}),I7(n).pipe(rt(function(t){return RM(t,e)}))}function RM(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:sx(sx({},r),(t={},t[e.idField]=n.id,t))}function A7(n){return kM(n,{includeMetadataChanges:!0}).pipe(rt(function(e){return e.docs}))}function D7(n,e){return e===void 0&&(e={}),A7(n).pipe(rt(function(t){return t.map(function(r){return RM(r,e)})}))}var Bo=class{constructor(e){return e}},T7="firestore",OM=class{constructor(){return zc(T7)}};var FM=new We("angularfire2.firestore-instances");function ote(n,e){let t=Rl(T7,n,e);return t&&new Bo(t)}function ste(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bo(r)}}var ate={provide:OM,deps:[[new kr,FM]]},cte={provide:Bo,useFactory:ote,deps:[[new kr,FM],js]};function M7(n,...e){return Hn("angularfire",Zr.full,"fst"),oo([cte,ate,{provide:FM,useFactory:ste(n),multi:!0,deps:[jt,Bn,Qr,Ka,[new kr,Tf],[new kr,os],...e]}])}var Ed=Er(D7,!0);var N7=Er(S7,!0);var P7=Er(ox,!0,2);var Ki=Er(hy,!0,2);var Vg=Er(ix,!0,2);var ni=Er(Qf,!0,2);var ax=Er(nx,!0);var eh=Er(rx,!0);var k7=Er(u7,!0);var R7=Er(J2,!0,2),O7=Er(tc,!0,2);var Cd=Er(gy,!0,2);var nc=Er(my,!0,2);var F7=Er(X2,!0,2);var jg=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){if(!this.firestore)return dt([]);let r=Ki(this.firestore,"users");return Ed(r,{idField:"id"}).pipe(rt(i=>i.map(o=>({id:o.id,name:o.name,email:o.email,phone:o.phone,signupDate:o.signupDate||"",avatarUrl:o.avatarUrl||"",status:o.status??"Attivo",birthDate:o.birthDate??"",gender:o.gender??"",address:o.address??"",city:o.city??"",cap:o.cap??"",personalNotes:o.personalNotes??"",subscriptionEnd:o.subscriptionEnd??"",cards:o.cards??[]}))))}getAll(){return ee(this,null,function*(){if(!this.firestore)return[];let r=Ki(this.firestore,"users");return(yield eh(r)).docs.map(o=>{let s=o.data();return{id:o.id,name:s.name,email:s.email,phone:s.phone,signupDate:s.signupDate||"",avatarUrl:s.avatarUrl||"",status:s.status??"Attivo",birthDate:s.birthDate??"",gender:s.gender??"",address:s.address??"",city:s.city??"",cap:s.cap??"",personalNotes:s.personalNotes??"",subscriptionEnd:s.subscriptionEnd??"",cards:s.cards??[]}})})}getById$(r){if(!this.firestore)return dt(void 0);let i=Ki(this.firestore,"users");return Ed(i,{idField:"id"}).pipe(rt(o=>o.find(s=>s.id===r)))}getById(r){return ee(this,null,function*(){if(!this.firestore)return;let i=ni(this.firestore,`users/${r}`),o=yield ax(i);if(!o.exists())return;let s=o.data();return{id:o.id,name:s.name,email:s.email,phone:s.phone,signupDate:s.signupDate||"",avatarUrl:s.avatarUrl||"",status:s.status??"Attivo",birthDate:s.birthDate??"",gender:s.gender??"",address:s.address??"",city:s.city??"",cap:s.cap??"",personalNotes:s.personalNotes??"",subscriptionEnd:s.subscriptionEnd??"",cards:s.cards??[]}})}add(r){return ee(this,null,function*(){let i=ni(Ki(this.firestore,"users")),o={name:r.name,email:r.email,phone:r.phone??"",signupDate:r.signupDate??new Date().toISOString().slice(0,10),avatarUrl:r.avatarUrl??"",status:r.status??"Attivo",birthDate:r.birthDate??"",gender:r.gender??"",address:r.address??"",city:r.city??"",cap:r.cap??"",personalNotes:r.personalNotes??"",subscriptionEnd:r.subscriptionEnd??"",cards:r.cards??[]};if(!this.firestore)throw new Error("Firestore not available - add user");return yield Cd(i,o),Oe({id:i.id},o)})}};e.\u0275fac=function(i){return new(i||e)(Be(Bo))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function lte(n,e){if(n&1){let t=Bt();A(0,"div",15),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeScaduteModal())}),R()}}function ute(n,e){if(n&1&&(A(0,"span"),Z(1,"("),A(2,"em"),Z(3),R(),Z(4,")"),R()),n&2){let t=ce().$implicit;X(3),yr("Scadenza: ",t.subscriptionEnd)}}function dte(n,e){if(n&1&&(A(0,"li",25)(1,"strong"),Z(2),R(),st(3,ute,5,1,"span",22),R()),n&2){let t=e.$implicit;X(2),Zt(t.name),X(),ve("ngIf",t.subscriptionEnd)}}function fte(n,e){n&1&&(A(0,"li"),Z(1," Nessuna tessera scaduta. "),R())}function hte(n,e){if(n&1){let t=Bt();A(0,"div",16)(1,"div",17),Fe("click",function(i){return Ee(t),Ce(i.stopPropagation())}),A(2,"h3",18)(3,"span",19),Z(4,"warning"),R(),Z(5," Tessere scadute "),R(),A(6,"ul",20),st(7,dte,4,2,"li",21)(8,fte,2,0,"li",22),R(),A(9,"div",23)(10,"button",24),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeScaduteModal())}),Z(11,"Chiudi"),R()()()()}if(n&2){let t=ce();X(7),ve("ngForOf",t.tessereScadute),X(),ve("ngIf",t.tessereScadute.length===0)}}var L7=(()=>{let e=class e{constructor(r){this.userService=r,this.activeClients=0,this.tessereAttive=[],this.tessereScadute=[],this.thisWeekCards=0,this.totalExercises=0,this.scaduteModalOpen=!1}ngOnInit(){return ee(this,null,function*(){let r=yield this.userService.getAll(),i=new Date().toISOString().substring(0,10);this.activeClients=r.filter(o=>o.status==="Attivo").length,this.tessereScadute=r.filter(o=>o.subscriptionEnd&&o.subscriptionEnd<=i),this.tessereAttive=r.filter(o=>o.subscriptionEnd&&o.subscriptionEnd>i)})}openScaduteModal(){this.scaduteModalOpen=!0}closeScaduteModal(){this.scaduteModalOpen=!1}};e.\u0275fac=function(i){return new(i||e)(ot(jg))},e.\u0275cmp=Rr({type:e,selectors:[["app-home"]],standalone:!1,decls:41,vars:7,consts:[[1,"page","home-page"],[1,"cards"],[1,"card","stat-card"],[1,"stat-label"],[1,"card","stat-card",2,"margin-top","20px"],[1,"tessere-row",2,"display","flex","align-items","center","gap","18px"],[2,"font-size","1rem","font-weight","400"],[1,"tessera-btn","warning-card",2,"display","flex","align-items","center","gap","7px","background","#fff","border","1px solid #ededed","border-radius","8px","padding","7px 16px","cursor","pointer","box-shadow","none",3,"click"],[1,"material-icons",2,"color","#d32f2f","font-size","1.25em"],[2,"font-size","1rem"],[1,"stat-label",2,"margin-left","7px"],[1,"tessera-btn","success-card",2,"display","flex","align-items","center","gap","7px","background","#fff","border","1px solid #ededed","border-radius","8px","padding","7px 16px","box-shadow","none"],[1,"material-icons",2,"color","#318b2b","font-size","1.25em"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-tessera-scaduti",4,"ngIf"],[1,"modal-backdrop",3,"click"],[1,"modal-tessera-scaduti"],[1,"modal-scaduti-box",2,"padding","24px 28px","border-radius","10px","max-width","360px","background","#fff","box-shadow","0 4px 24px -6px #b2b2b2",3,"click"],[2,"color","#d32f2f","font-size","1.15rem","margin-bottom","13px"],[1,"material-icons",2,"font-size","26px","vertical-align","middle","margin-right","6px"],[1,"scaduti-list",2,"margin","0","padding","0","list-style","none"],["style","margin-bottom:9px;",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"text-align","right","margin-top","15px"],[1,"btn","outline",3,"click"],[2,"margin-bottom","9px"]],template:function(i,o){i&1&&(A(0,"div",0)(1,"h2"),Z(2,"Dashboard"),R(),A(3,"div",1)(4,"div",2),Z(5,"Clienti attivi "),A(6,"span",3)(7,"strong"),Z(8),R()()(),A(9,"div",2),Z(10,"Schede questa settimana "),A(11,"span",3)(12,"strong"),Z(13),R()()(),A(14,"div",2),Z(15,"Esercizi totali "),A(16,"span",3)(17,"strong"),Z(18),R()()()(),A(19,"div",4)(20,"div",5)(21,"span",6),Z(22,"Tessere:"),R(),A(23,"div",7),Fe("click",function(){return o.openScaduteModal()}),A(24,"span",8),Z(25,"report_problem"),R(),A(26,"span",9),Z(27,"Scadute:"),R(),A(28,"span",10)(29,"strong"),Z(30),R()()(),A(31,"div",11)(32,"span",12),Z(33,"verified_user"),R(),A(34,"span",9),Z(35,"Attive:"),R(),A(36,"span",10)(37,"strong"),Z(38),R()()()()(),st(39,lte,1,0,"div",13)(40,hte,12,2,"div",14),R()),i&2&&(X(8),Zt(o.activeClients),X(5),Zt(o.thisWeekCards),X(5),Zt(o.totalExercises),X(12),Zt(o.tessereScadute.length),X(8),Zt(o.tessereAttive.length),X(),ve("ngIf",o.scaduteModalOpen),X(),ve("ngIf",o.scaduteModalOpen))},dependencies:[uo,Rs],styles:[".home-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0f2540}.cards[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.card[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:8px;box-shadow:0 2px 8px #14283c0f;flex:1 1 0;min-width:0;display:flex;align-items:center;min-height:58px}.card.stat-card[_ngcontent-%COMP%]{margin-bottom:16px;min-width:0;flex:1 1 0;display:flex;align-items:center}.stat-label[_ngcontent-%COMP%]{margin-left:7px}.tessera-btn[_ngcontent-%COMP%], .tessera-stat[_ngcontent-%COMP%]{background:#fff;border:1px solid #ededed;border-radius:8px;display:flex;align-items:center;gap:7px;padding:7px 16px;font-size:1rem;box-shadow:none}.tessera-btn.warning-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .tessera-stat.warning-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#d32f2f}.tessera-btn.success-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .tessera-stat.success-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#318b2b}"]});let n=e;return n})();var cx=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){let r=Ki(this.firestore,"exercises");return Ed(r,{idField:"id"})}getAll(){return ee(this,null,function*(){let r=Ki(this.firestore,"exercises");return yield oC(Ed(r,{idField:"id"}))})}create(r){return ee(this,null,function*(){let i=Ki(this.firestore,"exercises"),o=ni(i),s=Oe({},r);return yield Cd(o,s),Oe({id:o.id},s)})}update(r,i){return ee(this,null,function*(){yield nc(ni(this.firestore,`exercises/${r}`),i)})}delete(r){return ee(this,null,function*(){yield Vg(ni(this.firestore,`exercises/${r}`))})}};e.\u0275fac=function(i){return new(i||e)(Be(Bo))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var j7=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){let r=Ki(this.firestore,"categories");return Ed(r,{idField:"id"}).pipe(rt(i=>i.map(o=>({id:o.id,name:o.name,image:o.image}))))}create(r){return ee(this,null,function*(){let i=crypto.randomUUID(),o={id:i,name:r.name,image:r.image};return yield Cd(ni(this.firestore,`categories/${i}`),o),o})}update(r,i){return ee(this,null,function*(){yield nc(ni(this.firestore,`categories/${r}`),i)})}delete(r){return ee(this,null,function*(){yield Vg(ni(this.firestore,`categories/${r}`))})}};e.\u0275fac=function(i){return new(i||e)(Be(Bo))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Bg=(()=>{let e=class e{compressAndConvertToBase64(r,i=1e3,o=256){return ee(this,null,function*(){let s=document.createElement("img"),a=new FileReader;return new Promise((c,l)=>{a.onload=u=>{s.onload=()=>{let p=document.createElement("canvas");p.width=o,p.height=o,p.getContext("2d")?.drawImage(s,0,0,p.width,p.height);let g=.8,E=p.toDataURL("image/jpeg",g);for(;E.length/1024>i&&g>.1;)g-=.05,E=p.toDataURL("image/jpeg",g);c(E)},s.onerror=l,s.src=u.target.result},a.onerror=l,a.readAsDataURL(r)})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var U7=n=>["/esercizi",n],gte=n=>({"auto-matched":n});function mte(n,e){if(n&1&&bt(0,"img",40),n&2){let t=ce().$implicit;ve("src",t.image,xr)("alt",t.name)}}function vte(n,e){n&1&&(A(0,"div",41),fr(),A(1,"svg",42),bt(2,"circle",43)(3,"rect",44)(4,"rect",45)(5,"rect",46),R()())}function yte(n,e){if(n&1&&(A(0,"div",32)(1,"div",33),st(2,mte,1,2,"img",34)(3,vte,6,0,"div",35),R(),A(4,"div",36)(5,"div",37),Z(6),R(),A(7,"div",38),Z(8),R()(),A(9,"button",39),Z(10," Dettaglio "),R()()),n&2){let t=e.$implicit;X(2),ve("ngIf",t.image),X(),ve("ngIf",!t.image),X(3),Zt(t.name),X(2),Zt(t.category),X(),ya("aria-label",kc("Dettaglio esercizio ",t.name)),ve("routerLink",Rc(7,U7,t.id))}}function _te(n,e){n&1&&(A(0,"div",47),Z(1," Nessun esercizio presente "),R())}function wte(n,e){if(n&1){let t=Bt();A(0,"button",48),Fe("click",function(){Ee(t);let i=ce();return Ce(i.openAllExercisesModal())}),Z(1," Mostra tutti "),R()}}function bte(n,e){if(n&1&&bt(0,"img",40),n&2){let t=ce().$implicit;ve("src",t.image,xr)("alt",t.name)}}function xte(n,e){n&1&&(A(0,"div",62),fr(),A(1,"svg",42),bt(2,"circle",63)(3,"path",64),R()())}function Ete(n,e){if(n&1){let t=Bt();A(0,"div",49)(1,"div",33),st(2,bte,1,2,"img",34)(3,xte,4,0,"div",50),A(4,"button",51),Fe("click",function(){let i=Ee(t).$implicit,o=ce();return Ce(o.openEditCategoryModal(i))}),fr(),A(5,"svg",52),bt(6,"path",53)(7,"circle",54),R()()(),Oo(),A(8,"div",55),Fe("click",function(){let i=Ee(t).$implicit,o=ce();return Ce(o.openEditCategoryModal(i))}),A(9,"div",56),Z(10),R()(),A(11,"div",57)(12,"button",58),Fe("click",function(){let i=Ee(t).$implicit,o=ce();return Ce(o.confirmRemoveCategory(i))}),Z(13," \xD7 "),R(),A(14,"label",59)(15,"input",60),Fe("change",function(i){let o=Ee(t).$implicit,s=ce();return Ce(s.onCategoryToggle(o,i.target.checked))}),R(),bt(16,"span",61),R()()()}if(n&2){let t=e.$implicit;X(2),ve("ngIf",t.image),X(),ve("ngIf",!t.image),X(),ya("aria-label",kc("Modifica immagine categoria ",t.name)),X(6),Zt(t.name),X(2),ya("aria-label",kc("Elimina categoria ",t.name)),X(3),ve("checked",t.selected)}}function Cte(n,e){n&1&&(A(0,"div",47),Z(1," Nessuna categoria trovata "),R())}function Ite(n,e){if(n&1){let t=Bt();A(0,"button",68),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.openAllCategoriesModal())}),Z(1," Mostra tutte "),R()}}function Ste(n,e){if(n&1){let t=Bt();A(0,"div",65)(1,"button",66),Fe("click",function(){Ee(t);let i=ce();return Ce(i.resetCategorySelections())}),Z(2," Azzera "),R(),st(3,Ite,2,0,"button",67),R()}if(n&2){let t=ce();X(3),ve("ngIf",t.categories.length>5)}}function Ate(n,e){if(n&1&&(A(0,"span",81),Z(1),R()),n&2){let t=ce(2);X(),yr(" Categoria: ",t.selectedCategoryNames[0]," ")}}function Dte(n,e){if(n&1&&bt(0,"img",40),n&2){let t=ce().$implicit;ve("src",t.image,xr)("alt",t.name)}}function Tte(n,e){n&1&&(A(0,"div",89),fr(),A(1,"svg",90),bt(2,"circle",91)(3,"rect",44),R()())}function Mte(n,e){if(n&1&&(A(0,"div",82)(1,"div",83),st(2,Dte,1,2,"img",34)(3,Tte,4,0,"div",84),R(),A(4,"div",85)(5,"div",86),Z(6),R(),A(7,"div",87),Z(8),R()(),A(9,"a",88),Z(10," Dettaglio "),R()()),n&2){let t=e.$implicit;X(2),ve("ngIf",t.image),X(),ve("ngIf",!t.image),X(3),Zt(t.name),X(2),Zt(t.category),X(),ya("aria-label",kc("Dettaglio esercizio ",t.name)),ve("routerLink",Rc(7,U7,t.id))}}function Nte(n,e){n&1&&(A(0,"div",92),Z(1,"Nessun esercizio trovato"),R())}function Pte(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",70)(2,"div",71)(3,"h3",72),Z(4," Tutti gli esercizi "),st(5,Ate,2,1,"span",73),R(),A(6,"button",74),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeAllExercisesModal())}),Z(7,"\xD7"),R()(),A(8,"div",75)(9,"label",76)(10,"input",77),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.exerciseSearch,i)||(o.exerciseSearch=i),Ce(i)}),R()()(),A(11,"div",78),st(12,Mte,11,9,"div",79)(13,Nte,2,0,"div",80),R()()()}if(n&2){let t=ce();X(5),ve("ngIf",t.selectedCategoryNames.length),X(5),vt("ngModel",t.exerciseSearch),X(2),ve("ngForOf",t.allExercisesForModal),X(),ve("ngIf",t.allExercisesForModal.length===0)}}function kte(n,e){if(n&1&&bt(0,"img",40),n&2){let t=ce().$implicit;ve("src",t.image,xr)("alt",t.name)}}function Rte(n,e){n&1&&(A(0,"div",109),fr(),A(1,"svg",110),bt(2,"circle",111)(3,"path",112),R()())}function Ote(n,e){if(n&1){let t=Bt();A(0,"div",98)(1,"div",99),st(2,kte,1,2,"img",34)(3,Rte,4,0,"div",100),A(4,"button",101),Fe("click",function(){let i=Ee(t).$implicit,o=ce(2);return Ce(o.openEditCategoryModal(i))}),fr(),A(5,"svg",102),bt(6,"path",53),R()()(),Oo(),A(7,"div",103)(8,"div",104),Z(9),R()(),A(10,"div",105)(11,"button",106),Fe("click",function(){let i=Ee(t).$implicit,o=ce(2);return Ce(o.confirmRemoveCategory(i))}),Z(12,"\xD7"),R(),A(13,"label",107)(14,"input",60),Fe("change",function(i){let o=Ee(t).$implicit,s=ce(2);return Ce(s.onCategoryToggle(o,i.target.checked))}),R(),bt(15,"span",108),R()()()}if(n&2){let t=e.$implicit;X(2),ve("ngIf",t.image),X(),ve("ngIf",!t.image),X(),ya("aria-label",kc("Modifica categoria ",t.name)),X(5),Zt(t.name),X(2),ya("aria-label",kc("Elimina categoria ",t.name)),X(3),ve("checked",t.selected)}}function Fte(n,e){n&1&&(A(0,"div",92),Z(1,"Nessuna categoria trovata"),R())}function Lte(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",93)(2,"div",71)(3,"h3",72),Z(4," Tutte le categorie "),R(),A(5,"button",74),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeAllCategoriesModal())}),Z(6,"\xD7"),R()(),A(7,"div",75)(8,"label",94)(9,"input",95),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.categorySearch,i)||(o.categorySearch=i),Ce(i)}),R()()(),A(10,"div",96),st(11,Ote,16,8,"div",97)(12,Fte,2,0,"div",80),R()()()}if(n&2){let t=ce();X(9),vt("ngModel",t.categorySearch),X(2),ve("ngForOf",t.allCategoriesForModal),X(),ve("ngIf",t.allCategoriesForModal.length===0)}}function Vte(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",113)(2,"div",114)(3,"p",115),Z(4,"Sicuro di voler cancellare la categoria?"),R(),A(5,"div",116)(6,"button",117),Fe("click",function(){Ee(t);let i=ce();return Ce(i.removeCategoryConfirmed())}),Z(7,"Si"),R(),A(8,"button",118),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeDeleteCategoryModal())}),Z(9,"No"),R()()()()()}}function jte(n,e){n&1&&(co(0),fr(),A(1,"svg",131),bt(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),R(),lo())}function Bte(n,e){if(n&1&&bt(0,"img",138),n&2){let t=ce(2);ve("src",t.exerciseImage,xr)}}function Ute(n,e){if(n&1){let t=Bt();A(0,"button",139),Fe("mousedown",function(i){return Ee(t),Ce(i.preventDefault())})("click",function(){Ee(t);let i=ce(2);return Ce(i.clearCategoryInput())}),Z(1," \xD7 "),R()}}function zte(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),st(6,jte,8,0,"ng-container",122)(7,Bte,1,1,"ng-template",null,0,is),R(),A(9,"input",123),Fe("change",function(i){Ee(t);let o=ce();return Ce(o.onExerciseImageChange(i))}),R()()(),A(10,"label",124),Z(11," Nome esercizio "),A(12,"input",125),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.exerciseName,i)||(o.exerciseName=i),Ce(i)}),Fe("keydown.enter",function(){Ee(t);let i=ce();return Ce(i.saveExercise())}),R()(),A(13,"label",126),Z(14," Categoria "),A(15,"div",127)(16,"input",128),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.exerciseCategoryInput,i)||(o.exerciseCategoryInput=i),Ce(i)}),Fe("input",function(){Ee(t);let i=ce();return Ce(i.onAutoCategoryInput())})("blur",function(){Ee(t);let i=ce();return Ce(i.onAutoCategoryBlur())}),R(),st(17,Ute,2,0,"button",129),R()(),A(18,"div",116)(19,"button",130),Fe("click",function(){Ee(t);let i=ce();return Ce(i.saveExercise())}),Z(20," Salva "),R(),A(21,"button",118),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeExerciseModal())}),Z(22,"Annulla"),R()()()()()}if(n&2){let t=Hi(8),r=ce();X(6),ve("ngIf",!r.exerciseImage)("ngIfElse",t),X(6),vt("ngModel",r.exerciseName),X(4),vt("ngModel",r.exerciseCategoryInput),ve("ngClass",Rc(7,gte,r.autoCatMatched)),X(),ve("ngIf",r.exerciseCategoryInput),X(2),ve("disabled",!r.exerciseName.trim()||!r.exerciseCategoryInput.trim())}}function $te(n,e){n&1&&(co(0),fr(),A(1,"svg",131),bt(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),R(),lo())}function qte(n,e){if(n&1&&bt(0,"img",142),n&2){let t=ce(2);ve("src",t.categoryImage,xr)}}function Hte(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),st(6,$te,8,0,"ng-container",122)(7,qte,1,1,"ng-template",null,1,is),R(),A(9,"input",123),Fe("change",function(i){Ee(t);let o=ce();return Ce(o.onCategoryImageChange(i))}),R()()(),A(10,"label",140),Z(11," Nome categoria "),A(12,"input",141),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.categoryName,i)||(o.categoryName=i),Ce(i)}),R()(),A(13,"div",116)(14,"button",130),Fe("click",function(){Ee(t);let i=ce();return Ce(i.saveCategory())}),Z(15,"Salva"),R(),A(16,"button",118),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeCategoryModal())}),Z(17,"Annulla"),R()()()()()}if(n&2){let t=Hi(8),r=ce();X(6),ve("ngIf",!r.categoryImage)("ngIfElse",t),X(6),vt("ngModel",r.categoryName),X(2),ve("disabled",!r.categoryName.trim())}}function Gte(n,e){n&1&&(co(0),fr(),A(1,"svg",131),bt(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),R(),lo())}function Wte(n,e){if(n&1&&bt(0,"img",142),n&2){let t=ce(2);ve("src",t.editCategoryImage,xr)}}function Kte(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),st(6,Gte,8,0,"ng-container",122)(7,Wte,1,1,"ng-template",null,2,is),R(),A(9,"input",123),Fe("change",function(i){Ee(t);let o=ce();return Ce(o.onEditCategoryImageChange(i))}),R()()(),A(10,"label",143),Z(11," Nome categoria "),A(12,"input",144),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.editCategoryName,i)||(o.editCategoryName=i),Ce(i)}),R()(),A(13,"div",116)(14,"button",130),Fe("click",function(){Ee(t);let i=ce();return Ce(i.saveEditCategory())}),Z(15,"Salva"),R(),A(16,"button",118),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeEditCategoryModal())}),Z(17,"Annulla"),R()()()()()}if(n&2){let t=Hi(8),r=ce();X(6),ve("ngIf",!r.editCategoryImage)("ngIfElse",t),X(6),vt("ngModel",r.editCategoryName),X(2),ve("disabled",!r.editCategoryName.trim())}}var lx=(()=>{let e=class e{constructor(r,i,o){this.eserciziService=r,this.categorieService=i,this.imageService=o,this.exercises=[],this.categories=[],this.subscriptions=[],this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null,this.exerciseSearch="",this.categoryName="",this.categoryImageFile=null,this.categoryImage=null,this.categorySearch="",this.showExerciseModal=!1,this.showCategoryModal=!1,this.showEditCategoryModal=!1,this.showDeleteCategoryModal=!1,this.showAllExercisesModal=!1,this.showAllCategoriesModal=!1,this.categoryToEdit=null,this.categoryToDelete=null,this.editCategoryName="",this.editCategoryImageFile=null,this.editCategoryImage=null,this.autoCatMatched=!1}ngOnInit(){this.loadExercises(),this.loadCategories()}ngOnDestroy(){this.subscriptions.forEach(r=>r.unsubscribe())}loadExercises(){let r=this.eserciziService.getAll$().subscribe(i=>{this.exercises=i});this.subscriptions.push(r)}loadCategories(){let r=this.categorieService.getAll$().subscribe(i=>{this.categories=i.map(o=>Ft(Oe({},o),{selected:!1}))});this.subscriptions.push(r)}onExerciseImageChange(r){let i=r.target.files?.[0]||null;this.exerciseImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,256).then(o=>this.exerciseImage=o):this.exerciseImage=null}onCategoryImageChange(r){let i=r.target.files?.[0]||null;this.categoryImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,128).then(o=>this.categoryImage=o):this.categoryImage=null}onEditCategoryImageChange(r){let i=r.target.files?.[0]||null;this.editCategoryImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,128).then(o=>this.editCategoryImage=o):this.editCategoryImage=null}saveExercise(){return ee(this,null,function*(){let r=this.exerciseImage??void 0,i={name:this.exerciseName.trim(),category:this.exerciseCategoryInput.trim(),image:r};yield this.eserciziService.create(i),this.closeExerciseModal(),this.loadExercises()})}saveCategory(){return ee(this,null,function*(){let r=this.categoryImage??void 0,i={name:this.categoryName.trim(),image:r};yield this.categorieService.create(i),this.closeCategoryModal(),this.loadCategories()})}saveEditCategory(){return ee(this,null,function*(){if(!this.categoryToEdit)return;let r=this.categoryToEdit.name,i=this.editCategoryName.trim(),o=this.editCategoryImage??this.categoryToEdit.image,s={name:i,image:o};yield this.categorieService.update(this.categoryToEdit.id,s);let c=(yield this.eserciziService.getAll()).filter(l=>l.category===r);for(let l of c)yield this.eserciziService.update(l.id,{category:i});this.closeEditCategoryModal(),this.loadCategories(),this.loadExercises()})}openExerciseModal(){this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null,this.showExerciseModal=!0}closeExerciseModal(){this.showExerciseModal=!1,this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null}openCategoryModal(){this.categoryName="",this.categoryImageFile=null,this.categoryImage=null,this.showCategoryModal=!0}closeCategoryModal(){this.showCategoryModal=!1,this.categoryName="",this.categoryImageFile=null,this.categoryImage=null}openEditCategoryModal(r){this.categoryToEdit=r,this.editCategoryName=r.name,this.editCategoryImage=r.image||null,this.editCategoryImageFile=null,this.showEditCategoryModal=!0}closeEditCategoryModal(){this.showEditCategoryModal=!1,this.categoryToEdit=null,this.editCategoryName="",this.editCategoryImage=null,this.editCategoryImageFile=null}openAllExercisesModal(){this.showAllExercisesModal=!0}closeAllExercisesModal(){this.showAllExercisesModal=!1}openAllCategoriesModal(){this.showAllCategoriesModal=!0}closeAllCategoriesModal(){this.showAllCategoriesModal=!1}confirmRemoveCategory(r){this.categoryToDelete=r,this.showDeleteCategoryModal=!0}closeDeleteCategoryModal(){this.categoryToDelete=null,this.showDeleteCategoryModal=!1}removeCategoryConfirmed(){return ee(this,null,function*(){this.categoryToDelete&&(yield this.categorieService.delete(this.categoryToDelete.id),this.closeDeleteCategoryModal(),this.loadCategories())})}onAutoCategoryInput(){this.autoCatMatched=!1;let r=this.exerciseCategoryInput.trim();if(r.length<3)return;let i=this.categories.find(o=>o.name.toLowerCase().startsWith(r.toLowerCase()));i&&(this.exerciseCategoryInput=i.name,this.autoCatMatched=!0)}onAutoCategoryBlur(){this.onAutoCategoryInput()}clearCategoryInput(){this.exerciseCategoryInput="",this.autoCatMatched=!1}onCategoryToggle(r,i){i?this.categories.forEach(o=>o.selected=o.id===r.id):this.categories.forEach(o=>o.selected=!1),this.categories=[...this.categories]}resetCategorySelections(){this.categories.forEach(r=>r.selected=!1),this.categories=[...this.categories]}get selectedCategoryNames(){return this.categories.filter(r=>r.selected).map(r=>r.name)}get filteredExercisesLimited(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(s=>s.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();return o&&(i=i.filter(s=>s.name.toLowerCase().includes(o))),i.slice(0,5)}get allExercisesForModal(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(s=>s.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();return o&&(i=i.filter(s=>s.name.toLowerCase().includes(o))),i}get filteredCategoriesLimited(){let r=this.categorySearch.trim().toLowerCase();return(r?this.categories.filter(o=>o.name.toLowerCase().includes(r)):this.categories).slice(0,5)}get allCategoriesForModal(){let r=this.categorySearch.trim().toLowerCase();return r?this.categories.filter(i=>i.name.toLowerCase().includes(r)):this.categories}};e.\u0275fac=function(i){return new(i||e)(ot(cx),ot(j7),ot(Bg))},e.\u0275cmp=Rr({type:e,selectors:[["app-esercizi"]],decls:42,vars:14,consts:[["exercisePreviewTpl",""],["categoryPreviewTpl",""],["editCategoryPreviewTpl",""],[1,"esercizi-page"],[1,"esercizi-layout"],[1,"esercizi-card"],[1,"section-header"],[1,"section-title"],["type","button","aria-label","Aggiungi esercizio",1,"top-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24"],["x","2","y","9.5","width","3","height","5","rx","1.2","fill","#2563eb"],["x","19","y","9.5","width","3","height","5","rx","1.2","fill","#2563eb"],["x","6","y","11","width","12","height","2","rx","1","fill","#2563eb"],["x","8","y","10","width","8","height","4","rx","1.6","fill","#e7effd"],[1,"section-divider"],[1,"search-bar-wrapper"],["for","exercise-search",1,"search-bar"],["id","exercise-search","type","text","aria-label","Cerca esercizi","autocomplete","off","placeholder","Cerca esercizi...",3,"ngModelChange","ngModel"],[1,"exercise-list"],["class","card-item",4,"ngFor","ngForOf"],["class","exercise-empty-info",4,"ngIf"],["class","more-btn","type","button",3,"click",4,"ngIf"],[1,"categorie-card"],["type","button","aria-label","Aggiungi categoria",1,"top-btn",3,"click"],["d","M3 12.5 L12 21.2 Q12.6 21.8 13.3 21.25 L21.25 13.3 Q21.8 12.6 21.2 12 L12.5 3 Q12.05 2.55 11.45 3.1 L3.1 11.45 Q2.55 12.05 3 12.5Z","fill","#2563eb","stroke","#1857a7","stroke-width","1"],["cx","8","cy","8","r","2","fill","#fff","stroke","#2563eb","stroke-width","1"],["for","category-search",1,"search-bar"],["id","category-search","type","text","aria-label","Cerca categorie","autocomplete","off","placeholder","Cerca categorie...",3,"ngModelChange","ngModel"],[1,"category-list"],["class","card-item category-row",4,"ngFor","ngForOf"],["class","category-actions-bottom",4,"ngIf"],["class","esercizi-modal-backdrop",4,"ngIf"],[1,"card-item"],[1,"card-img-wrap"],[3,"src","alt",4,"ngIf"],["class","exercise-placeholder",4,"ngIf"],[1,"exercise-text"],[1,"exercise-name"],[1,"exercise-category"],["type","button",1,"exercise-detail-btn",3,"routerLink","aria-label"],[3,"src","alt"],[1,"exercise-placeholder"],["width","64","height","64","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#cfe6fd"],["x","8","y","10","width","8","height","4","rx","1.5","fill","#83b4fa"],["x","4","y","11.5","width","3","height","3","rx","1.2","fill","#2563eb"],["x","17","y","11.5","width","3","height","3","rx","1.2","fill","#2563eb"],[1,"exercise-empty-info"],["type","button",1,"more-btn",3,"click"],[1,"card-item","category-row"],["class","category-placeholder",4,"ngIf"],["type","button",1,"category-edit-img-btn",3,"click","aria-label"],["width","22","height","22","viewBox","0 0 24 24"],["d","M14.06 5.94a2.5 2.5 0 013.54 3.54l-8.585 8.585-4.243.707.707-4.243z","fill","none","stroke","#2563eb","stroke-width","2"],["cx","17.5","cy","6.5","r","1.5","fill","#83b4fa","stroke","#2563eb","stroke-width","1"],[1,"category-text",3,"click"],[1,"category-name"],[1,"category-controls-destra"],["type","button","title","Elimina categoria",1,"category-x-btn2",3,"click","aria-label"],["title","Seleziona categoria per filtrare esercizi",1,"category-checkbox-wrap"],["type","checkbox",3,"change","checked"],[1,"category-checkbox"],[1,"category-placeholder"],["cx","12","cy","12","r","12","fill","#e5fbee"],["d","M9 15l3-6 3 6","stroke","#22c16b","stroke-width","2","fill","none"],[1,"category-actions-bottom"],["type","button",1,"reset-categories-btn",3,"click"],["type","button","class","toggle-categories-btn",3,"click",4,"ngIf"],["type","button",1,"toggle-categories-btn",3,"click"],[1,"esercizi-modal-backdrop"],[1,"esercizi-modal","esercizi-grid-modal"],[1,"grid-modal-header"],[1,"grid-modal-title"],["class","grid-filter-tag",4,"ngIf"],["type","button","aria-label","Chiudi",1,"grid-close-btn",3,"click"],[1,"search-bar-wrapper","modal-search-inline"],["for","exercise-search-modal",1,"search-bar"],["id","exercise-search-modal","type","text","aria-label","Cerca esercizi nella griglia","autocomplete","off","placeholder","Cerca...",3,"ngModelChange","ngModel"],[1,"exercise-grid"],["class","exercise-grid-card",4,"ngFor","ngForOf"],["class","grid-empty",4,"ngIf"],[1,"grid-filter-tag"],[1,"exercise-grid-card"],[1,"grid-img"],["class","grid-placeholder",4,"ngIf"],[1,"grid-info"],[1,"grid-name"],[1,"grid-cat"],[1,"grid-detail-link",3,"routerLink","aria-label"],[1,"grid-placeholder"],["width","48","height","48","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#d9ecfd"],[1,"grid-empty"],[1,"esercizi-modal","categorie-grid-modal"],["for","category-search-modal",1,"search-bar"],["id","category-search-modal","type","text","aria-label","Cerca categorie nella griglia","autocomplete","off","placeholder","Cerca...",3,"ngModelChange","ngModel"],[1,"category-grid"],["class","category-grid-card",4,"ngFor","ngForOf"],[1,"category-grid-card"],[1,"grid-cat-img"],["class","grid-cat-placeholder",4,"ngIf"],["type","button",1,"grid-cat-edit-btn",3,"click","aria-label"],["width","18","height","18","viewBox","0 0 24 24"],[1,"grid-cat-info"],[1,"grid-cat-name"],[1,"grid-cat-actions"],["type","button",1,"grid-cat-delete-btn",3,"click","aria-label"],["title","Seleziona categoria per filtrare esercizi",1,"grid-cat-checkbox-wrap"],[1,"grid-cat-checkbox"],[1,"grid-cat-placeholder"],["width","46","height","46","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#e0f7eb"],["d","M9 15l3-6 3 6","stroke","#18c879","stroke-width","2","fill","none"],[1,"esercizi-modal"],[1,"esercizi-modal-body"],[1,"modal-message"],[1,"modal-actions"],["type","button",1,"modal-yes",3,"click"],["type","button",1,"modal-no",3,"click"],[1,"image-upload-zone"],[1,"input-image-label"],[1,"icon-image-upload-big"],[4,"ngIf","ngIfElse"],["type","file","accept","image/*",3,"change"],["for","exercise-name",1,"field-label"],["id","exercise-name","type","text","placeholder","Nome esercizio","autocomplete","off",3,"ngModelChange","keydown.enter","ngModel"],["for","exercise-category-auto",1,"field-label"],[1,"single-autocat-wrapper"],["id","exercise-category-auto","type","text","placeholder","Digita almeno 3 caratteri","autocomplete","off",3,"ngModelChange","input","blur","ngModel","ngClass"],["type","button","class","clear-cat-btn","aria-label","Pulisci categoria",3,"mousedown","click",4,"ngIf"],["type","button",1,"modal-yes",3,"click","disabled"],["width","180","height","180","viewBox","0 0 180 180","fill","none"],["x","10","y","10","width","160","height","160","rx","25","fill","#F7FBFF","stroke","#b5d9f8","stroke-width","3"],["x","47","y","125","width","86","height","25","rx","10","fill","#d1eaff"],["x","60","y","99","width","63","height","17","rx","7","fill","#bfe1fc"],["cx","66","cy","67","r","13","fill","#83b4fa"],["x","10","y","10","width","160","height","160","rx","25","stroke","#b5d9f8","stroke-width","3"],["points","36,151 80,92 110,135 144,74 168,130","fill","none","stroke","#5ab0fa","stroke-width","4.5","stroke-linecap","round","stroke-linejoin","round"],["alt","Preview immagine esercizio",1,"image-preview",3,"src"],["type","button","aria-label","Pulisci categoria",1,"clear-cat-btn",3,"mousedown","click"],["for","category-name",1,"field-label"],["id","category-name","type","text","placeholder","Nome categoria","autocomplete","off",3,"ngModelChange","ngModel"],["alt","Preview immagine categoria",1,"image-preview",3,"src"],["for","category-edit-name",1,"field-label"],["id","category-edit-name","type","text","placeholder","Nome categoria","autocomplete","off",3,"ngModelChange","ngModel"]],template:function(i,o){i&1&&(A(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),Z(5,"ESERCIZI"),R(),A(6,"button",8),Fe("click",function(){return o.openExerciseModal()}),fr(),A(7,"svg",9),bt(8,"rect",10)(9,"rect",11)(10,"rect",12)(11,"rect",13),R()()(),Oo(),bt(12,"div",14),A(13,"div",15)(14,"label",16)(15,"input",17),yt("ngModelChange",function(a){return xt(o.exerciseSearch,a)||(o.exerciseSearch=a),a}),R()()(),A(16,"div",18),st(17,yte,11,9,"div",19)(18,_te,2,0,"div",20)(19,wte,2,0,"button",21),R()(),A(20,"div",22)(21,"div",6)(22,"span",7),Z(23,"CATEGORIE"),R(),A(24,"button",23),Fe("click",function(){return o.openCategoryModal()}),fr(),A(25,"svg",9),bt(26,"path",24)(27,"circle",25),R()()(),Oo(),bt(28,"div",14),A(29,"div",15)(30,"label",26)(31,"input",27),yt("ngModelChange",function(a){return xt(o.categorySearch,a)||(o.categorySearch=a),a}),R()()(),A(32,"div",28),st(33,Ete,17,8,"div",29)(34,Cte,2,0,"div",20)(35,Ste,4,1,"div",30),R()()(),st(36,Pte,14,4,"div",31)(37,Lte,13,3,"div",31)(38,Vte,10,0,"div",31)(39,zte,23,9,"div",31)(40,Hte,18,4,"div",31)(41,Kte,18,4,"div",31),R()),i&2&&(X(15),vt("ngModel",o.exerciseSearch),X(2),ve("ngForOf",o.filteredExercisesLimited),X(),ve("ngIf",o.filteredExercisesLimited.length===0),X(),ve("ngIf",o.exercises.length>5),X(12),vt("ngModel",o.categorySearch),X(2),ve("ngForOf",o.filteredCategoriesLimited),X(),ve("ngIf",o.filteredCategoriesLimited.length===0),X(),ve("ngIf",o.categories.length),X(),ve("ngIf",o.showAllExercisesModal),X(),ve("ngIf",o.showAllCategoriesModal),X(),ve("ngIf",o.showDeleteCategoryModal),X(),ve("ngIf",o.showExerciseModal),X(),ve("ngIf",o.showCategoryModal),X(),ve("ngIf",o.showEditCategoryModal))},dependencies:[Pl,xf,uo,Rs,Tp,_a,Fc,Ga,Yu,wa],styles:['root[_ngcontent-%COMP%]{--green: #18c879;--green-dark: #138554;--text: #153b56;--card: #fff;--radius: 18px;--shadow-card: 0 2px 12px rgba(36,80,144,.06);--primary: #2563eb}body[_ngcontent-%COMP%]{margin:0;font-family:system-ui,sans-serif;background:#f5f8fc}.esercizi-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f8fc;position:relative;z-index:0}.esercizi-layout[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;gap:52px;max-width:1200px;margin:0 auto;padding-top:30px;position:relative;z-index:0;pointer-events:auto}.esercizi-card[_ngcontent-%COMP%], .categorie-card[_ngcontent-%COMP%]{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow-card);min-width:410px;max-width:520px;width:100%;min-height:260px;display:flex;flex-direction:column;box-sizing:border-box;overflow:hidden;position:relative;z-index:0}.esercizi-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff 89%,#f8fdff)}.categorie-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff 89%,#f8fcfa)}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 26px 0}.section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;letter-spacing:.035em;color:#22416f;flex:1}.top-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e7effd 60%,#dbeafe);border:none;border-radius:50%;width:42px;height:42px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 10px #2563eb11;transition:background .14s,transform .14s}.top-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#bfd8fd 40%,#e8f1ff);transform:scale(1.08)}.section-divider[_ngcontent-%COMP%]{width:calc(100% - 52px);margin:0 26px 10px;height:0;position:relative}.section-divider[_ngcontent-%COMP%]:before{content:"";display:block;height:4px;width:100%;background:linear-gradient(90deg,#dadde2,#ececec);border-radius:3px;box-shadow:0 1.5px 6px #0000000d}.search-bar-wrapper[_ngcontent-%COMP%]{padding:0 26px 4px;box-sizing:border-box;width:100%;position:relative;z-index:0;pointer-events:auto}.search-bar[_ngcontent-%COMP%]{display:block;position:relative;width:100%;height:34px;border:1.7px solid #c9d9ec;border-radius:10px;background:#f7fbff;overflow:hidden;transition:border-color .18s,background-color .18s}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;inset:0;padding:0 12px 0 38px;border:none;background:transparent;font-size:.85rem;font-weight:600;color:#1c3554;outline:none}.exercise-list[_ngcontent-%COMP%], .category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:14px 26px 10px;width:100%;box-sizing:border-box}.card-item[_ngcontent-%COMP%]{width:82%;max-width:82%;margin:0 auto;min-height:118px;background:#fff;border-radius:20px;box-shadow:0 3px 12px #24509014;display:flex;align-items:center;gap:16px;padding:14px 18px;position:relative;box-sizing:border-box}.card-img-wrap[_ngcontent-%COMP%]{width:82px;height:82px;border-radius:18px;background:#f2f6fa;display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;overflow:hidden}.card-img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:74px;max-height:74px;object-fit:contain;display:block}.exercise-placeholder[_ngcontent-%COMP%], .category-placeholder[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center}.exercise-text[_ngcontent-%COMP%]{flex:1 1 0;display:flex;flex-direction:column;justify-content:center}.exercise-name[_ngcontent-%COMP%], .category-name[_ngcontent-%COMP%]{font-size:1.04rem;font-weight:800;color:var(--text);margin:0}.exercise-category[_ngcontent-%COMP%]{font-size:.85rem;font-style:italic;color:#3969b1;margin-top:2px}.exercise-detail-btn[_ngcontent-%COMP%]{position:absolute;right:14px;bottom:14px;font-size:.72rem;font-weight:700;background:var(--primary);color:#fff;border:none;border-radius:6px;padding:5px 14px;cursor:pointer;box-shadow:0 1px 4px #2563eb59;transition:background .15s}.exercise-detail-btn[_ngcontent-%COMP%]:hover{background:#184a9b}.category-row[_ngcontent-%COMP%]{padding-right:70px}.category-controls-destra[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;gap:10px}.category-x-btn2[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4d1d1;color:#db3131;width:26px;height:26px;font-size:1rem;font-weight:700;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .15s,color .15s,border-color .15s}.category-x-btn2[_ngcontent-%COMP%]:hover{background:#db3131;color:#fff;border-color:#db3131}.category-checkbox-wrap[_ngcontent-%COMP%]{width:26px;height:26px;position:relative;display:flex;align-items:center;justify-content:center}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;width:26px;height:26px;margin:0;cursor:pointer}.category-checkbox[_ngcontent-%COMP%]{width:22px;height:22px;border:2px solid var(--primary);border-radius:6px;background:#fff;position:relative;display:block;transition:background .15s,border-color .15s}.category-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:6px;top:3px;width:7px;height:12px;border:solid #fff;border-width:0 2.5px 2.5px 0;transform:rotate(45deg);opacity:0;transition:opacity .15s}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .category-checkbox[_ngcontent-%COMP%]{background:var(--primary);border-color:var(--primary)}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .category-checkbox[_ngcontent-%COMP%]:after{opacity:1}.category-actions-bottom[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:14px;margin:18px 0 10px;flex-wrap:wrap}.reset-categories-btn[_ngcontent-%COMP%]{margin:0;padding:8px 22px;border-radius:12px;border:none;background:#f2fcf7;color:var(--green);font-weight:800;font-size:.78rem;cursor:pointer;letter-spacing:.03em;box-shadow:0 1px 4px #00000014;transition:background .15s,color .15s}.reset-categories-btn[_ngcontent-%COMP%]:hover{background:#e7faee;color:var(--green-dark)}.toggle-categories-btn[_ngcontent-%COMP%]{margin:0;padding:8px 22px;border:none;border-radius:12px;background:#eef3fb;color:#194d9a;font-weight:700;font-size:.78rem;cursor:pointer;letter-spacing:.03em;box-shadow:0 1px 4px #00000014;transition:background .15s,color .15s}.toggle-categories-btn[_ngcontent-%COMP%]:hover{background:#dce9fa;color:#0f356b}.exercise-empty-info[_ngcontent-%COMP%]{font-size:.85rem;color:#6b88b7;text-align:center;background:#e9f3fc;border-radius:10px;padding:10px 8px}.more-btn[_ngcontent-%COMP%]{margin:6px auto 4px;background:#eef3fb;color:#1e3a8a;border:none;border-radius:8px;padding:6px 16px;font-size:.75rem;font-weight:700;cursor:pointer;letter-spacing:.04em;transition:background .15s,color .15s;display:inline-block}.more-btn[_ngcontent-%COMP%]:hover, .more-btn[_ngcontent-%COMP%]:focus{background:#dbe9fb;color:#0f2a63}.esercizi-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:1000}.esercizi-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:26px 22px 22px;box-shadow:0 8px 40px #0000003b;width:92vw;max-width:410px;position:relative}.esercizi-modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.image-upload-zone[_ngcontent-%COMP%]{display:flex;justify-content:center}.input-image-label[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;align-items:center}.input-image-label[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.icon-image-upload-big[_ngcontent-%COMP%]{width:180px;height:180px;display:flex;align-items:center;justify-content:center}.image-preview[_ngcontent-%COMP%]{width:172px;height:172px;border-radius:23px;object-fit:contain;background:#f7fbff;border:2.5px solid #b5d9f8}.field-label[_ngcontent-%COMP%]{font-weight:700;color:#22416f;font-size:.9rem;display:flex;flex-direction:column;gap:4px;position:relative}.field-label[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .field-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:4px;padding:9px 12px;border:1.6px solid #d2e3fa;border-radius:8px;font-size:.92rem;background:#f7fbff;color:#234169;outline:none;transition:border-color .15s,background-color .15s}.field-label[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .field-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:#f2f8ff}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}.modal-yes[_ngcontent-%COMP%], .modal-no[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;padding:7px 18px;border:none;border-radius:8px;cursor:pointer}.modal-yes[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.modal-yes[_ngcontent-%COMP%]:hover{background:#184a9b}.modal-no[_ngcontent-%COMP%]{background:#f2f2f2;color:#22416f}.modal-no[_ngcontent-%COMP%]:hover{background:#e4eaf3}.category-autocomplete-label[_ngcontent-%COMP%]{position:relative}.category-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:4px;display:flex;align-items:center;border:1.6px solid #d2e3fa;border-radius:8px;background:#f7fbff;transition:border-color .15s,background-color .15s}.category-input-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);background:#f2f8ff}.category-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;padding:9px 36px 9px 34px;font-size:.92rem;outline:none;font-weight:600;color:#234169}.search-icon[_ngcontent-%COMP%]{position:absolute;left:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:.9}.clear-cat-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:#eef3fb;color:#22416f;border:none;width:24px;height:24px;font-size:16px;line-height:1;border-radius:6px;cursor:pointer;padding:0;font-weight:700}.category-autocomplete-list[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:calc(100% + 4px);z-index:1100;background:#fff;border:1.3px solid #dbeafe;border-radius:8px;box-shadow:0 4px 18px #002e701a;list-style:none;padding:4px 0;margin:0;max-height:220px;overflow-y:auto;animation:_ngcontent-%COMP%_fadeIn .15s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 14px;font-size:.88rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:6px;color:#173a62;transition:background .13s,color .13s;position:relative}.category-autocomplete-list[_ngcontent-%COMP%]   li.highlighted[_ngcontent-%COMP%], .category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#e6f1fe;color:#0f2f59}.category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.no-suggestions):not(.create-suggestion):before{content:"\\1f50d";font-size:.75rem;opacity:.65}.no-suggestions[_ngcontent-%COMP%]{font-style:italic;color:#5b6e83;justify-content:space-between}.create-suggestion[_ngcontent-%COMP%]{background:#f7fbff;justify-content:center}.inline-create-btn[_ngcontent-%COMP%]{background:#2563eb;border:none;color:#fff;padding:4px 10px;font-size:.7rem;font-weight:700;border-radius:14px;cursor:pointer;letter-spacing:.03em;transition:background .15s}.inline-create-btn[_ngcontent-%COMP%]:hover{background:#184a9b}.inline-create-btn[_ngcontent-%COMP%]:disabled{background:#9db8df;cursor:not-allowed}.grid-modal-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:12px}.grid-modal-title[_ngcontent-%COMP%]{font-size:1.12rem;font-weight:700;color:#163a5d;margin:0;display:flex;align-items:center;gap:12px}.grid-filter-tag[_ngcontent-%COMP%]{font-size:.66rem;font-weight:700;background:#e4f1ff;color:#2563eb;padding:3px 8px;border-radius:999px;letter-spacing:.04em}.grid-close-btn[_ngcontent-%COMP%]{background:#eef3fb;border:none;width:30px;height:30px;border-radius:8px;font-size:1.15rem;font-weight:700;color:#1e3962;cursor:pointer;transition:background .15s,color .15s;line-height:1}.grid-close-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.modal-search-inline[_ngcontent-%COMP%]{margin-bottom:6px}.exercise-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:12px 12px;margin-top:4px}.exercise-grid-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2ecf5;border-radius:12px;padding:8px 8px 9px;display:flex;flex-direction:column;align-items:center;gap:5px;position:relative;box-shadow:0 2px 10px #d6e5f826;transition:box-shadow .15s,transform .15s;min-height:135px}.exercise-grid-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #c6d9f84b;transform:translateY(-2px)}.grid-img[_ngcontent-%COMP%]{width:54px;height:54px;border-radius:10px;background:#f2f7fb;display:flex;align-items:center;justify-content:center;overflow:hidden}.grid-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:50px;max-height:50px;object-fit:contain;display:block}.grid-placeholder[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center}.grid-info[_ngcontent-%COMP%]{width:100%;text-align:center;display:flex;flex-direction:column;gap:0;min-height:32px}.grid-name[_ngcontent-%COMP%]{font-size:.62rem;font-weight:700;color:#163a5d;word-break:break-word;line-height:1.08;max-width:100%}.grid-cat[_ngcontent-%COMP%]{font-size:.5rem;font-weight:600;letter-spacing:.05em;color:#2563eb;opacity:.78}.grid-detail-link[_ngcontent-%COMP%]{margin-top:auto;font-size:.52rem;font-weight:700;background:var(--primary);color:#fff;padding:4px 10px 3px;border-radius:5px;text-decoration:none;letter-spacing:.04em;box-shadow:0 1px 3px #2563eb59;transition:background .15s;align-self:flex-end}.grid-detail-link[_ngcontent-%COMP%]:hover{background:#18397a}.categorie-grid-modal[_ngcontent-%COMP%]{max-width:880px;width:94vw;padding:24px 24px 30px;position:relative}.category-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(115px,1fr));gap:12px 12px;margin-top:4px}.category-grid-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e1ebf3;border-radius:12px;padding:8px 8px 10px;display:flex;flex-direction:column;align-items:center;gap:5px;position:relative;box-shadow:0 2px 10px #d6e5f826;transition:box-shadow .15s,transform .15s;min-height:132px}.category-grid-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #c6d9f84b;transform:translateY(-2px)}.grid-cat-img[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:10px;background:#f2fbf4;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.grid-cat-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:48px;max-height:48px;object-fit:contain;display:block}.grid-cat-placeholder[_ngcontent-%COMP%]{width:34px;height:34px;display:flex;align-items:center;justify-content:center}.grid-cat-edit-btn[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]{position:absolute;bottom:6px;right:6px;width:26px;height:26px;padding:2px;border-radius:50%;border:1px solid #cfe0fb;background:#eaf2ff;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:background .15s,border-color .15s,transform .12s,box-shadow .15s}.grid-cat-edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.grid-cat-edit-btn[_ngcontent-%COMP%]:hover, .category-edit-img-btn[_ngcontent-%COMP%]:hover{background:#2563eb;border-color:#1f56c7;transform:translateY(-1px);box-shadow:0 2px 8px #2563eb59}.grid-cat-edit-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#fff}.grid-cat-info[_ngcontent-%COMP%]{width:100%;text-align:center;display:flex;flex-direction:column;gap:0;min-height:28px}.grid-cat-name[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#163a5d;word-break:break-word;line-height:1.08}.grid-cat-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:auto}.grid-cat-delete-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4d1d1;color:#db3131;width:20px;height:20px;border-radius:50%;font-size:.7rem;font-weight:700;cursor:pointer;transition:background .15s,color .15s,border-color .15s;line-height:1;display:flex;align-items:center;justify-content:center}.grid-cat-delete-btn[_ngcontent-%COMP%]:hover{background:#db3131;color:#fff;border-color:#db3131}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]{width:18px;height:18px;position:relative;display:flex;align-items:center;justify-content:center}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;inset:0;cursor:pointer;margin:0}.grid-cat-checkbox[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #2563eb;border-radius:4px;background:#fff;position:relative;display:block;transition:background .15s,border-color .15s}.grid-cat-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:4px;top:2px;width:4px;height:7px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg);opacity:0;transition:opacity .15s}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .grid-cat-checkbox[_ngcontent-%COMP%]{background:#2563eb;border-color:#2563eb}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .grid-cat-checkbox[_ngcontent-%COMP%]:after{opacity:1}.grid-empty[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;font-size:.72rem;font-weight:600;color:#5c6b80;background:#f1f6fb;border:1px dashed #d2e2f1;padding:14px 12px;border-radius:12px}@media (max-width: 1050px){.esercizi-layout[_ngcontent-%COMP%]{flex-direction:column;gap:32px;padding:24px 8px 44px;max-width:97vw}.esercizi-card[_ngcontent-%COMP%], .categorie-card[_ngcontent-%COMP%]{min-width:0;max-width:100%}.card-item[_ngcontent-%COMP%]{width:88%;max-width:88%}}@media (max-width: 660px){.card-item[_ngcontent-%COMP%]{width:94%!important;max-width:94%!important}}@media (max-width: 620px){.exercise-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:10px 10px}.grid-img[_ngcontent-%COMP%]{width:50px;height:50px}.grid-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:46px;max-height:46px}.category-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:10px 10px}.grid-cat-img[_ngcontent-%COMP%]{width:48px;height:48px}.grid-cat-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:44px;max-height:44px}}@media (max-width: 500px){.card-img-wrap[_ngcontent-%COMP%]{width:64px;height:64px}.card-img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:58px;max-height:58px}.exercise-detail-btn[_ngcontent-%COMP%]{font-size:.68rem;padding:5px 12px;bottom:10px;right:10px}.icon-image-upload-big[_ngcontent-%COMP%]{width:140px;height:140px}.image-preview[_ngcontent-%COMP%]{width:132px;height:132px}}.single-autocat-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:4px;display:flex;align-items:center}.single-autocat-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;border:1.7px solid #d2e3fa;border-radius:8px;padding:10px 34px 10px 15px;font-size:.96rem;background:#f7fbff;color:#2563eb;font-weight:700;outline:none;transition:border-color .17s,background .15s,color .15s}.single-autocat-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#2563eb;background:#f2f8ff}.single-autocat-wrapper[_ngcontent-%COMP%]   input.auto-matched[_ngcontent-%COMP%]{color:#1b533e;background:#e6f9f0}.clear-cat-btn[_ngcontent-%COMP%]{position:absolute;right:7px;top:50%;transform:translateY(-50%);background:#eef3fb;color:#22416f;border:none;width:24px;height:24px;font-size:16px;line-height:1;border-radius:6px;cursor:pointer;padding:0;font-weight:700;transition:background .15s,color .15s}.clear-cat-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}']});let n=e;return n})();var Yte=n=>({active:n}),Zte=(n,e)=>({active:n,inactive:e}),Qte=n=>["/anagrafica",n];function Xte(n,e){if(n&1&&bt(0,"img",42),n&2){let t=ce().$implicit;ve("src",t.avatarUrl,xr)("alt",t.name)}}function Jte(n,e){n&1&&(A(0,"span",43),Z(1,"person"),R())}function ene(n,e){if(n&1&&(A(0,"tr")(1,"td",27)(2,"div",28)(3,"div",29),st(4,Xte,1,2,"img",30)(5,Jte,2,0,"ng-template",null,0,is),R(),A(7,"div",31)(8,"div",32),Z(9),R()()()(),A(10,"td",33)(11,"span",34)(12,"span",35),Z(13,"event"),R(),Z(14),R()(),A(15,"td",36)(16,"span",37),Z(17),R()(),A(18,"td",38)(19,"div",39)(20,"span",40),Z(21),R()()(),A(22,"td")(23,"a",41)(24,"span",12),Z(25,"visibility"),R()()()()),n&2){let t=e.$implicit,r=Hi(6);X(4),ve("ngIf",t.avatarUrl)("ngIfElse",r),X(5),Zt(t.name),X(5),yr(" ",t.signupDate," "),X(3),Zt(t.email),X(3),ve("ngClass",M0(10,Zte,t.status==="Attivo",t.status!=="Attivo")),X(),Zt(t.status),X(2),ya("aria-label",kc("Dettaglio ",t.name)),ve("routerLink",Rc(13,Qte,t.id))}}function tne(n,e){if(n&1){let t=Bt();A(0,"aside",44)(1,"div",45),Z(2,"Filtri"),R(),A(3,"label",46)(4,"span",47),Z(5,"Stato"),R(),A(6,"select",48),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.filterStatus,i)||(o.filterStatus=i),Ce(i)}),Fe("change",function(){Ee(t);let i=ce();return Ce(i.applyFilters())}),A(7,"option",49),Z(8,"Tutti"),R(),A(9,"option",50),Z(10,"Attivo"),R(),A(11,"option",51),Z(12,"Inattivo"),R()()(),A(13,"label",46)(14,"span",47),Z(15,"Email"),R(),A(16,"select",48),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.filterHasEmail,i)||(o.filterHasEmail=i),Ce(i)}),Fe("change",function(){Ee(t);let i=ce();return Ce(i.applyFilters())}),A(17,"option",49),Z(18,"Tutte"),R(),A(19,"option",52),Z(20,"Solo con email"),R(),A(21,"option",53),Z(22,"Solo senza email"),R()()(),A(23,"label",46)(24,"span",47),Z(25,"Tessera"),R(),A(26,"select",54),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.filterTessera,i)||(o.filterTessera=i),Ce(i)}),Fe("change",function(){Ee(t);let i=ce();return Ce(i.applyFilters())}),A(27,"option",49),Z(28,"Tutte"),R(),A(29,"option",55),Z(30,"Attive"),R(),A(31,"option",56),Z(32,"Scadute"),R()()()()}if(n&2){let t=ce();X(6),vt("ngModel",t.filterStatus),X(10),vt("ngModel",t.filterHasEmail),X(10),vt("ngModel",t.filterTessera)}}function nne(n,e){if(n&1){let t=Bt();A(0,"div",57),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeModal())}),R()}}function rne(n,e){if(n&1&&(co(0),bt(1,"img",85),lo()),n&2){let t=ce(2);X(),ve("src",t.form.avatar,xr)}}function ine(n,e){if(n&1){let t=Bt();A(0,"button",86),Fe("click",function(){Ee(t),ce();let i=Hi(8),o=ce();return Ce(o.triggerAvatarInput(i))}),A(1,"span",87),Z(2,"photo_camera"),R()()}}function one(n,e){n&1&&(A(0,"div",88),Z(1," Caricamento immagine in corso... "),R())}function sne(n,e){if(n&1){let t=Bt();A(0,"div",58)(1,"form",59,1),Fe("ngSubmit",function(){Ee(t);let i=ce();return Ce(i.registerUser())})("click",function(i){return Ee(t),Ce(i.stopPropagation())}),A(3,"h2"),Z(4,"Registra Cliente"),R(),A(5,"div",60)(6,"div",61)(7,"input",62,2),Fe("change",function(i){Ee(t);let o=ce();return Ce(o.onAvatarChange(i))}),R(),st(9,rne,2,1,"ng-container",63)(10,ine,3,0,"ng-template",null,3,is),R(),st(12,one,2,0,"div",64),R(),A(13,"div",65)(14,"div",66)(15,"div",67)(16,"label",68),Z(17,"Nome"),R(),A(18,"input",69),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.form.nome,i)||(o.form.nome=i),Ce(i)}),R()(),A(19,"div",67)(20,"label",68),Z(21,"Cognome"),R(),A(22,"input",70),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.form.cognome,i)||(o.form.cognome=i),Ce(i)}),R()()(),A(23,"div",66)(24,"div",67)(25,"label",68),Z(26,"Email"),R(),A(27,"input",71),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.form.emailModal,i)||(o.form.emailModal=i),Ce(i)}),R()(),A(28,"div",67)(29,"label",68),Z(30,"Numero di Telefono"),R(),A(31,"input",72),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.form.phone,i)||(o.form.phone=i),Ce(i)}),R()()(),A(32,"div",66)(33,"div",67)(34,"label",73)(35,"span",35),Z(36,"event"),R(),Z(37," Data Iscrizione "),R(),A(38,"input",74),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.form.signupDateModal,i)||(o.form.signupDateModal=i),Ce(i)}),R()(),A(39,"div",75)(40,"label",76),Z(41,"-"),R(),A(42,"div",77)(43,"label",78)(44,"input",79),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.form.isActive,i)||(o.form.isActive=i),Ce(i)}),R(),bt(45,"span",80),R(),A(46,"span",81),Z(47),R()()()()(),A(48,"div",82)(49,"button",83),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeModal())}),Z(50,"Annulla"),R(),A(51,"button",84),Z(52,"Registra Cliente"),R()()()()}if(n&2){let t=Hi(2),r=Hi(11),i=ce();X(9),ve("ngIf",i.form.avatar)("ngIfElse",r),X(3),ve("ngIf",i.avatarLoading),X(6),vt("ngModel",i.form.nome),X(4),vt("ngModel",i.form.cognome),X(5),vt("ngModel",i.form.emailModal),X(4),vt("ngModel",i.form.phone),X(7),vt("ngModel",i.form.signupDateModal),X(6),vt("ngModel",i.form.isActive),X(2),rs("active",i.form.isActive)("inactive",!i.form.isActive),X(),yr(" ",i.form.isActive?"Attivo":"Inattivo"," "),X(4),ve("disabled",t.invalid||i.avatarLoading)}}var z7=(()=>{let e=class e{constructor(r,i){this.userService=r,this.imageService=i,this.searchTerm="",this.showFilters=!1,this.filterStatus="",this.filterHasEmail="",this.filterTessera="",this.users=[],this.filteredUsers=[],this.modalOpen=!1,this.today=new Date().toISOString().slice(0,10),this.form={avatar:"",avatarFile:null,nome:"",cognome:"",emailModal:"",phone:"",signupDateModal:"",isActive:!0},this.avatarLoading=!1}ngOnInit(){this.usersSub=this.userService.getAll$().subscribe(r=>{this.users=r||[],this.applyFilters()})}ngOnDestroy(){this.usersSub?.unsubscribe()}openModal(){this.modalOpen=!0,this.form={avatar:"",avatarFile:null,nome:"",cognome:"",emailModal:"",phone:"",signupDateModal:"",isActive:!0}}closeModal(){this.modalOpen=!1}onSearchChange(){this.applyFilters()}toggleFilters(){this.showFilters=!this.showFilters}matchesSearch(r,i){if(!i)return!0;let o=i.toLowerCase();return r.name?.toLowerCase().includes(o)||r.email?.toLowerCase().includes(o)||!1}hasEmail(r){return!!(r.email&&r.email.trim()!=="")}getTesseraFine(r){let i=(r.subscriptionEnd||r.tesseraEnd||"").trim();return i.length===10?i:""}applyFilters(){let r=[...this.users];this.searchTerm&&(r=r.filter(i=>this.matchesSearch(i,this.searchTerm))),this.filterStatus&&(r=r.filter(i=>i.status===this.filterStatus)),this.filterHasEmail==="with"?r=r.filter(i=>this.hasEmail(i)):this.filterHasEmail==="without"&&(r=r.filter(i=>!this.hasEmail(i))),this.filterTessera==="attiva"?r=r.filter(i=>{let o=this.getTesseraFine(i);return o!==""&&o>this.today}):this.filterTessera==="scaduta"&&(r=r.filter(i=>{let o=this.getTesseraFine(i);return o!==""&&o<=this.today})),this.filteredUsers=r}onAvatarChange(r){return ee(this,null,function*(){let i=r.target.files?.[0];i&&(this.avatarLoading=!0,this.form.avatarFile=i,this.form.avatar=yield this.imageService.compressAndConvertToBase64(i,1e3,256),this.avatarLoading=!1)})}triggerAvatarInput(r){r.click()}registerUser(){return ee(this,null,function*(){this.avatarLoading=!0;let r=this.form.isActive?"Attivo":"Inattivo",i={name:`${this.form.nome} ${this.form.cognome}`.trim(),email:this.form.emailModal,phone:this.form.phone,signupDate:this.form.signupDateModal||new Date().toISOString().slice(0,10),avatarUrl:this.form.avatar,status:r,cards:[]};try{yield this.userService.add(i),this.avatarLoading=!1,this.closeModal(),this.applyFilters()}catch(o){this.avatarLoading=!1,alert("Errore nel salvataggio: "+(o?.message||o))}})}};e.\u0275fac=function(i){return new(i||e)(ot(jg),ot(Bg))},e.\u0275cmp=Rr({type:e,selectors:[["app-anagrafica"]],standalone:!1,decls:40,vars:12,consts:[["defaultAvatarRow",""],["modalForm","ngForm"],["avatarInput",""],["showIcon",""],[1,"anagrafica-utenti-layout"],[1,"anagrafica-content","align-left"],[1,"actions-header","responsive-header"],[1,"btn","primary",3,"click"],[1,"header-controls"],[1,"searchbar"],["type","text","placeholder","Cerca...",3,"ngModelChange","input","ngModel"],["title","Cerca",1,"icon-btn",3,"click"],[1,"material-icons"],["title","Filtri",1,"icon-btn",3,"click","ngClass","aria-expanded"],[1,"list-layout"],[1,"list-main"],[1,"table-outer-center"],[1,"user-table"],[2,"width","30%"],[2,"width","16%"],[2,"width","13%"],[2,"width","12%"],[1,"align-left"],[4,"ngFor","ngForOf"],["class","filters-aside",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-nuovo-utente",4,"ngIf"],[1,"user-cell"],[1,"user-card-row"],[1,"user-avatar"],["class","avatar-img",3,"src","alt",4,"ngIf","ngIfElse"],[1,"user-info-main"],[1,"user-name"],[1,"user-signup"],[1,"user-date"],[1,"material-icons","calendar-icon"],[1,"user-email-table"],[1,"user-email"],[1,"user-status-actions"],[1,"status-action-flex","left-align"],[1,"status-label",3,"ngClass"],["title","Dettaglio",1,"icon-btn",3,"aria-label","routerLink"],[1,"avatar-img",3,"src","alt"],[1,"avatar-placeholder","material-icons"],[1,"filters-aside"],[1,"filters-title"],[1,"filter-group"],[1,"filter-label"],[3,"ngModelChange","change","ngModel"],["value",""],["value","Attivo"],["value","Inattivo"],["value","with"],["value","without"],[1,"tessera-select",3,"ngModelChange","change","ngModel"],["value","attiva"],["value","scaduta"],[1,"modal-backdrop",3,"click"],[1,"modal-nuovo-utente"],[1,"modal-form",3,"ngSubmit","click"],[1,"avatar-modal-section"],[1,"avatar-upload-box"],["type","file","accept","image/*","hidden","",3,"change"],[4,"ngIf","ngIfElse"],["class","avatar-loader","style","margin-left:15px;color:#888;",4,"ngIf"],[1,"modal-fields","modal-fields-2col"],[1,"modal-form-row"],[1,"form-group"],[1,"field-label"],["type","text","placeholder","Nome","name","nome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Cognome","name","cognome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","emailModal","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Numero di Telefono","name","phone",3,"ngModelChange","ngModel"],[1,"field-label","flex-label","calendar-label"],["type","date","name","signupDateModal",3,"ngModelChange","ngModel"],[1,"form-group","form-group-switch"],[1,"field-label",2,"opacity","0","user-select","none"],[1,"modal-stato-switch"],[1,"switch"],["type","checkbox","name","isActive",3,"ngModelChange","ngModel"],[1,"slider"],[1,"modal-stato"],[1,"modal-actions"],["type","button",1,"btn","cancel",3,"click"],["type","submit",1,"btn","primary",3,"disabled"],["alt","Avatar",1,"avatar-img-preview",3,"src"],["type","button",1,"avatar-add-btn",3,"click"],[1,"material-icons","avatar-add"],[1,"avatar-loader",2,"margin-left","15px","color","#888"]],template:function(i,o){i&1&&(A(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),Fe("click",function(){return o.openModal()}),Z(4,"Cliente"),R(),A(5,"div",8)(6,"div",9)(7,"input",10),yt("ngModelChange",function(a){return xt(o.searchTerm,a)||(o.searchTerm=a),a}),Fe("input",function(){return o.onSearchChange()}),R(),A(8,"button",11),Fe("click",function(){return o.onSearchChange()}),A(9,"span",12),Z(10,"search"),R()(),A(11,"button",13),Fe("click",function(){return o.toggleFilters()}),A(12,"span",12),Z(13,"filter_list"),R()()()()(),A(14,"div",14)(15,"div",15)(16,"div",16)(17,"table",17)(18,"colgroup"),bt(19,"col",18)(20,"col",19)(21,"col",19)(22,"col",20)(23,"col",21),R(),A(24,"thead")(25,"tr")(26,"th",22),Z(27,"Cliente"),R(),A(28,"th",22),Z(29,"Data Iscrizione"),R(),A(30,"th",22),Z(31,"Email"),R(),A(32,"th",22),Z(33,"Stato"),R(),bt(34,"th"),R()(),A(35,"tbody"),st(36,ene,26,15,"tr",23),R()()()(),st(37,tne,33,3,"aside",24),R(),st(38,nne,1,0,"div",25)(39,sne,53,15,"div",26),R()()),i&2&&(X(7),vt("ngModel",o.searchTerm),X(4),ya("aria-expanded",bf(o.showFilters)),ve("ngClass",Rc(10,Yte,o.showFilters)),X(3),rs("has-filters",o.showFilters),X(22),ve("ngForOf",o.filteredUsers),X(),ve("ngIf",o.showFilters),X(),ve("ngIf",o.modalOpen),X(),ve("ngIf",o.modalOpen))},dependencies:[xf,uo,Rs,qw,zu,$u,_a,dA,Lc,Fc,zw,Y0,Ga,K0,wa],styles:['[_ngcontent-%COMP%]:root{--primary: #2563eb;--primary-hover: #194fd6;--bg: #f5f8fc;--panel-bg: #ffffff;--panel-shadow: 0 2px 12px rgba(36,80,144,.06);--radius: 10px;--text: #143559}.anagrafica-utenti-layout[_ngcontent-%COMP%]{background:#f6f8fa;min-height:100vh;font-family:Segoe UI,Arial,sans-serif;width:100%;box-sizing:border-box}.anagrafica-content.align-left[_ngcontent-%COMP%]{max-width:1200px;margin:36px auto 40px;padding:0 24px}.actions-header.responsive-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;align-items:center;gap:18px;margin-bottom:18px}.header-controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:18px}.searchbar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f8fafd;border-radius:9px;padding:6px 10px;gap:4px;min-width:220px;max-width:360px;width:100%;height:38px;box-shadow:0 0 4px #365fd014;border:1px solid #dae2ec;transition:border-color .18s,box-shadow .18s}.searchbar[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);box-shadow:0 0 0 3px #2563eb1c}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;font-size:.92rem;font-weight:500;padding:4px 6px 4px 2px;width:100%;color:#242f42}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:6px 7px;border-radius:8px;transition:background .13s;display:flex;align-items:center;margin-left:0}.icon-btn[_ngcontent-%COMP%]:hover, .icon-btn[_ngcontent-%COMP%]:focus{background:#eaeef6}.icon-btn.active[_ngcontent-%COMP%], .icon-btn[aria-expanded=true][_ngcontent-%COMP%]{background:#e8f0ff}.material-icons[_ngcontent-%COMP%], .icon-font[_ngcontent-%COMP%]{font-family:Material Icons,Segoe UI Symbol,Arial,sans-serif;font-style:normal;font-weight:400;font-size:22px;display:inline-block;line-height:1;color:var(--primary);vertical-align:middle;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.list-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:18px;align-items:start}.list-layout.has-filters[_ngcontent-%COMP%]{grid-template-columns:1fr 260px}.filters-aside[_ngcontent-%COMP%]{align-self:start;background:transparent;border:none;box-shadow:none;padding:4px 0;display:flex;flex-direction:column;gap:12px}.filters-title[_ngcontent-%COMP%]{font-weight:700;color:#143559;margin-bottom:2px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.filter-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#345;letter-spacing:.02em}.filters-aside[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:36px;line-height:36px;padding:0 12px;border-radius:8px;border:1px solid #ccdaeb;background:#fff;color:#132a4a;font-weight:600;font-size:.95rem;outline:none;transition:border-color .18s,box-shadow .18s}.filters-aside[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #2563eb26}.tessera-select[_ngcontent-%COMP%]   option[value=attiva][_ngcontent-%COMP%]{color:#318b2b}.tessera-select[_ngcontent-%COMP%]   option[value=scaduta][_ngcontent-%COMP%]{color:#d32f2f}.table-outer-center[_ngcontent-%COMP%]{display:block}.user-table[_ngcontent-%COMP%]{background:#fff;box-shadow:0 5px 35px #d3dbe925;border-spacing:0;border-radius:13px;width:100%;table-layout:fixed;overflow:hidden}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px;font-size:.95rem;background:#fff;vertical-align:middle;word-break:break-word;text-align:left;height:52px}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fbfc;font-weight:700;color:#232e47;border-bottom:2px solid #ececf0}.user-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f1f2f7}.user-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.user-cell[_ngcontent-%COMP%]{vertical-align:middle;padding-top:6px;padding-bottom:6px}.user-card-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;min-height:41px}.user-avatar[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center}.avatar-img[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:41px;height:41px;border-radius:12px;background:#dbe3ef;display:flex;align-items:center;justify-content:center;font-size:22px;color:#b4bed0;object-fit:cover}.user-info-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;min-width:0;width:100%}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#143559;font-size:1.06rem;line-height:1.15}.user-date[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--primary);font-size:.83rem;gap:6px;font-weight:600}.calendar-icon[_ngcontent-%COMP%]{font-size:18px;color:#2177e8}.user-email[_ngcontent-%COMP%]{color:#5f6c7e;font-size:.83rem;word-break:break-all}.user-status-actions[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.status-action-flex.left-align[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.status-label[_ngcontent-%COMP%]{font-weight:600;border-radius:7px;padding:6px 16px;font-size:.83rem;min-width:72px;text-align:center}.status-label.active[_ngcontent-%COMP%]{color:#14b452;background:#e8faee}.status-label.inactive[_ngcontent-%COMP%]{color:#e76c6c;background:#fde8e8}a.icon-btn[_ngcontent-%COMP%]{text-decoration:none!important}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:1010;inset:0;background:#17334b33}.modal-nuovo-utente[_ngcontent-%COMP%]{position:fixed;z-index:1020;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:20px;box-shadow:0 6px 32px #21407a33,0 1.5px 3px #21407a29;min-width:380px;max-width:520px;width:96vw;padding:26px 20px 18px;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalpop .18s cubic-bezier(.32,1.56,.66,1)}.modal-form[_ngcontent-%COMP%]{width:100%}.modal-nuovo-utente[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;color:#232e47;margin:0 0 18px;text-align:center}.avatar-modal-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:18px;margin-top:4px}.avatar-upload-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.avatar-add-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0}.avatar-add[_ngcontent-%COMP%]{font-size:34px}.avatar-img-preview[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;object-fit:cover;display:block}.modal-fields-2col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:100%}.modal-form-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:28px;width:100%;margin-bottom:22px}.form-group[_ngcontent-%COMP%]{flex:1 0 0;min-width:0;display:flex;flex-direction:column}.form-group-switch[_ngcontent-%COMP%]{justify-content:flex-end;align-items:flex-end}.modal-fields-2col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-fields-2col[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.9rem;border-radius:7px;border:1.4px solid #d6d9e0;padding:10px 9px;outline:none;background:#f8fafc;color:#223555;transition:border-color .15s,background-color .15s;width:100%}.modal-fields-2col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-fields-2col[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:#f2f7ff}.field-label[_ngcontent-%COMP%]{font-size:.83rem;font-weight:600;color:#1e2a3e;margin:4px 0 6px 1px;letter-spacing:.02em;text-transform:uppercase}.flex-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.modal-stato-switch[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.modal-stato[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:#21af5a;min-width:55px;text-align:right}.modal-stato.inactive[_ngcontent-%COMP%]{color:#e36e6e}.switch[_ngcontent-%COMP%]{display:inline-block;width:48px;height:26px;position:relative}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;inset:0;background:#e4e9f1;border-radius:26px;transition:.2s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#22c55e}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:4px;bottom:3px;border-radius:50%;background:#fff;box-shadow:0 1px 4px #6366f13a;transition:.19s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(20px)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:4px}.btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 15px;border-radius:9px;font-size:.85rem;font-weight:600;cursor:pointer;transition:background .16s}.btn[_ngcontent-%COMP%]:hover{background:var(--primary-hover)}.btn.cancel[_ngcontent-%COMP%]{background:#eef3fb;color:#1e3a8a}.btn.cancel[_ngcontent-%COMP%]:hover{background:#e1ebfb}@keyframes _ngcontent-%COMP%_modalpop{0%{transform:translate(-50%,-53%) scale(.97)}to{transform:translate(-50%,-50%) scale(1)}}@media (max-width: 980px){.list-layout.has-filters[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-aside[_ngcontent-%COMP%]{order:-1}}@media (max-width: 600px){.searchbar[_ngcontent-%COMP%]{max-width:100%}.modal-nuovo-utente[_ngcontent-%COMP%]{min-width:300px}}@media (max-width: 420px){.searchbar[_ngcontent-%COMP%]{min-width:100%;height:36px}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:.84rem}.icon-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}}']});let n=e;return n})();var ane=n=>["/anagrafica",n];function cne(n,e){if(n&1&&(A(0,"div",3)(1,"div",4)(2,"div",5),Z(3),R(),A(4,"div",6),Z(5),R()(),A(6,"div",7)(7,"a",8),Z(8,"Dettaglio"),R()()()),n&2){let t=e.$implicit;X(3),Zt(t.name),X(2),Zt(t.email),X(2),ve("routerLink",Rc(3,ane,t.id))}}var $7=(()=>{let e=class e{constructor(r){this.userService=r,this.users=[],this.filteredUsers=[]}ngOnInit(){return ee(this,null,function*(){let r=yield this.userService.getAll();this.users=r,this.filteredUsers=[...this.users]})}};e.\u0275fac=function(i){return new(i||e)(ot(jg))},e.\u0275cmp=Rr({type:e,selectors:[["app-anagrafica-list"]],standalone:!1,decls:5,vars:1,consts:[[1,"page","anagrafica-list"],[1,"list"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"left"],[1,"name"],[1,"email"],[1,"actions"],[1,"btn","small",3,"routerLink"]],template:function(i,o){i&1&&(A(0,"div",0)(1,"h2"),Z(2,"Lista Utenti"),R(),A(3,"div",1),st(4,cne,9,5,"div",2),R()()),i&2&&(X(4),ve("ngForOf",o.filteredUsers))},dependencies:[uo,wa],styles:[".anagrafica-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin-top:12px}.anagrafica-list[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;padding:12px;border-radius:8px;margin-bottom:10px}.anagrafica-list[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600}.anagrafica-list[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--muted);font-size:13px}.btn.small[_ngcontent-%COMP%]{padding:6px 8px}.anagrafica-list[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400;font-size:15px}.anagrafica-list[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .anagrafica-list[_ngcontent-%COMP%]   select.tessera-combo[_ngcontent-%COMP%]{accent-color:#1742b0;margin-right:6px;margin-left:3px;vertical-align:middle}.anagrafica-list[_ngcontent-%COMP%]   .tessera-combo[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #b9c4d4;padding:5px 9px;font-size:15px;background:#fff;color:#1742b0;font-weight:500;min-width:75px;margin-left:8px;margin-right:6px;vertical-align:middle}.anagrafica-list[_ngcontent-%COMP%]   .filter-bar[_ngcontent-%COMP%]{display:flex;gap:18px;align-items:center;margin-bottom:15px}.anagrafica-list[_ngcontent-%COMP%]   .filter-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}"]});let n=e;return n})();function Un(n){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(n)}var rc=Uint8Array,qs=Uint16Array,$M=Int32Array,qM=new rc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),HM=new rc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),q7=new rc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),K7=function(n,e){for(var t=new qs(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new $M(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},Y7=K7(qM,2),lne=Y7.b,BM=Y7.r;lne[28]=258,BM[258]=28;var Z7=K7(HM,0),s5e=Z7.b,H7=Z7.r,UM=new qs(32768);for(On=0;On<32768;++On)Gl=(On&43690)>>1|(On&21845)<<1,Gl=(Gl&52428)>>2|(Gl&13107)<<2,Gl=(Gl&61680)>>4|(Gl&3855)<<4,UM[On]=((Gl&65280)>>8|(Gl&255)<<8)>>1;var Gl,On,_y=function(n,e,t){for(var r=n.length,i=0,o=new qs(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new qs(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new qs(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],u=e-n[i],p=s[n[i]-1]++<<u,v=p|(1<<u)-1;p<=v;++p)a[UM[p]>>c]=l}else for(a=new qs(r),i=0;i<r;++i)n[i]&&(a[i]=UM[s[n[i]-1]++]>>15-n[i]);return a},th=new rc(288);for(On=0;On<144;++On)th[On]=8;var On;for(On=144;On<256;++On)th[On]=9;var On;for(On=256;On<280;++On)th[On]=7;var On;for(On=280;On<288;++On)th[On]=8;var On,ux=new rc(32);for(On=0;On<32;++On)ux[On]=5;var On,une=_y(th,9,0);var dne=_y(ux,5,0);var Q7=function(n){return(n+7)/8|0},fne=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new rc(n.subarray(e,t))};var Wl=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},vy=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},jM=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:J7,l:0};if(i==1){var s=new rc(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(oe,pe){return oe.f-pe.f}),t.push({s:-1,f:25001});var a=t[0],c=t[1],l=0,u=1,p=2;for(t[0]={s:-1,f:a.f+c.f,l:a,r:c};u!=i-1;)a=t[t[l].f<t[p].f?l++:p++],c=t[l!=u&&t[l].f<t[p].f?l++:p++],t[u++]={s:-1,f:a.f+c.f,l:a,r:c};for(var v=o[0].s,r=1;r<i;++r)o[r].s>v&&(v=o[r].s);var g=new qs(v+1),E=zM(t[u-1],g,0);if(E>e){var r=0,C=0,M=E-e,N=1<<M;for(o.sort(function(pe,z){return g[z.s]-g[pe.s]||pe.f-z.f});r<i;++r){var Q=o[r].s;if(g[Q]>e)C+=N-(1<<E-g[Q]),g[Q]=e;else break}for(C>>=M;C>0;){var j=o[r].s;g[j]<e?C-=1<<e-g[j]++-1:++r}for(;r>=0&&C;--r){var H=o[r].s;g[H]==e&&(--g[H],++C)}E=e}return{t:new rc(g),l:E}},zM=function(n,e,t){return n.s==-1?Math.max(zM(n.l,e,t+1),zM(n.r,e,t+1)):e[n.s]=t},G7=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new qs(++e),r=0,i=n[0],o=1,s=function(c){t[r++]=c},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},yy=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},X7=function(n,e,t){var r=t.length,i=Q7(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},W7=function(n,e,t,r,i,o,s,a,c,l,u){Wl(e,u++,t),++i[256];for(var p=jM(i,15),v=p.t,g=p.l,E=jM(o,15),C=E.t,M=E.l,N=G7(v),Q=N.c,j=N.n,H=G7(C),oe=H.c,pe=H.n,z=new qs(19),T=0;T<Q.length;++T)++z[Q[T]&31];for(var T=0;T<oe.length;++T)++z[oe[T]&31];for(var I=jM(z,7),V=I.t,b=I.l,S=19;S>4&&!V[q7[S-1]];--S);var D=l+5<<3,te=yy(i,th)+yy(o,ux)+s,we=yy(i,v)+yy(o,C)+s+14+3*S+yy(z,V)+2*z[16]+3*z[17]+7*z[18];if(c>=0&&D<=te&&D<=we)return X7(e,u,n.subarray(c,c+l));var De,Se,he,Me;if(Wl(e,u,1+(we<te)),u+=2,we<te){De=_y(v,g,0),Se=v,he=_y(C,M,0),Me=C;var Ke=_y(V,b,0);Wl(e,u,j-257),Wl(e,u+5,pe-1),Wl(e,u+10,S-4),u+=14;for(var T=0;T<S;++T)Wl(e,u+3*T,V[q7[T]]);u+=3*S;for(var Le=[Q,oe],F=0;F<2;++F)for(var G=Le[F],T=0;T<G.length;++T){var J=G[T]&31;Wl(e,u,Ke[J]),u+=V[J],J>15&&(Wl(e,u,G[T]>>5&127),u+=G[T]>>12)}}else De=une,Se=th,he=dne,Me=ux;for(var T=0;T<a;++T){var re=r[T];if(re>255){var J=re>>18&31;vy(e,u,De[J+257]),u+=Se[J+257],J>7&&(Wl(e,u,re>>23&31),u+=qM[J]);var ae=re&31;vy(e,u,he[ae]),u+=Me[ae],ae>3&&(vy(e,u,re>>5&8191),u+=HM[ae])}else vy(e,u,De[re]),u+=Se[re]}return vy(e,u,De[256]),u+Se[256]},hne=new $M([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),J7=new rc(0),pne=function(n,e,t,r,i,o){var s=o.z||n.length,a=new rc(r+s+5*(1+Math.ceil(s/7e3))+i),c=a.subarray(r,a.length-i),l=o.l,u=(o.r||0)&7;if(e){u&&(c[0]=o.r>>3);for(var p=hne[e-1],v=p>>13,g=p&8191,E=(1<<t)-1,C=o.p||new qs(32768),M=o.h||new qs(E+1),N=Math.ceil(t/3),Q=2*N,j=function(lt){return(n[lt]^n[lt+1]<<N^n[lt+2]<<Q)&E},H=new $M(25e3),oe=new qs(288),pe=new qs(32),z=0,T=0,I=o.i||0,V=0,b=o.w||0,S=0;I+2<s;++I){var D=j(I),te=I&32767,we=M[D];if(C[te]=we,M[D]=te,b<=I){var De=s-I;if((z>7e3||V>24576)&&(De>423||!l)){u=W7(n,c,0,H,oe,pe,T,V,S,I-S,u),V=z=T=0,S=I;for(var Se=0;Se<286;++Se)oe[Se]=0;for(var Se=0;Se<30;++Se)pe[Se]=0}var he=2,Me=0,Ke=g,Le=te-we&32767;if(De>2&&D==j(I-Le))for(var F=Math.min(v,De)-1,G=Math.min(32767,I),J=Math.min(258,De);Le<=G&&--Ke&&te!=we;){if(n[I+he]==n[I+he-Le]){for(var re=0;re<J&&n[I+re]==n[I+re-Le];++re);if(re>he){if(he=re,Me=Le,re>F)break;for(var ae=Math.min(Le,re-2),fe=0,Se=0;Se<ae;++Se){var Ie=I-Le+Se&32767,_e=C[Ie],Te=Ie-_e&32767;Te>fe&&(fe=Te,we=Ie)}}}te=we,we=C[te],Le+=te-we&32767}if(Me){H[V++]=268435456|BM[he]<<18|H7[Me];var ze=BM[he]&31,Qe=H7[Me]&31;T+=qM[ze]+HM[Qe],++oe[257+ze],++pe[Qe],b=I+he,++z}else H[V++]=n[I],++oe[n[I]]}}for(I=Math.max(I,b);I<s;++I)H[V++]=n[I],++oe[n[I]];u=W7(n,c,l,H,oe,pe,T,V,S,I-S,u),l||(o.r=u&7|c[u/8|0]<<3,u-=7,o.h=M,o.p=C,o.i=I,o.w=b)}else{for(var I=o.w||0;I<s+l;I+=65535){var Je=I+65535;Je>=s&&(c[u/8|0]=l,Je=s),u=X7(c,u+1,n.subarray(I,Je))}o.i=s}return fne(a,0,r+Q7(u)+i)};var ej=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},gne=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new rc(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return pne(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)};var tj=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var mne=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=ej();i.p(e.dictionary),tj(n,2,i.d())}};function dx(n,e){e||(e={});var t=ej();t.p(n);var r=gne(n,e,e.dictionary?6:2,4);return mne(r,e),tj(r,r.length-4,t.d()),r}var vne=typeof TextDecoder<"u"&&new TextDecoder,yne=0;try{vne.decode(J7,{stream:!0}),yne=1}catch{}function nj(n){if(Array.isArray(n))return n}function rj(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function GM(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ij(n,e){if(n){if(typeof n=="string")return GM(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?GM(n,e):void 0}}function oj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WM(n,e){return nj(n)||rj(n,e)||ij(n,e)||oj()}function KM(n,e="utf8"){return new TextDecoder(e).decode(n)}var _ne=new TextEncoder;function sj(n){return _ne.encode(n)}var wne=1024*8,bne=(()=>{let n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),YM={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},wy=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=wne,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);let i=t.offset?t.offset>>>0:0,o=e.byteLength-i,s=i;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){let r=YM[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===bne&&t!=="uint8"&&t!=="int8"){let a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();let c=new YM[t](a.buffer);return this.offset+=r,c.reverse(),c}let s=new YM[t](o);return this.offset+=r,s}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return KM(this.readBytes(e))}decodeText(e=1,t="utf8"){return KM(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(sj(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function Gg(n){let e=n.length;for(;--e>=0;)n[e]=0}var xne=0,Hj=1,Ene=2,Cne=3,Ine=258,_N=29,Oy=256,Ay=Oy+1+_N,$g=30,wN=19,Gj=2*Ay+1,nh=15,ZM=16,Sne=7,bN=256,Wj=16,Kj=17,Yj=18,uN=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),vx=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ane=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Zj=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dne=512,Yl=new Array((Ay+2)*2);Gg(Yl);var Cy=new Array($g*2);Gg(Cy);var Dy=new Array(Dne);Gg(Dy);var Ty=new Array(Ine-Cne+1);Gg(Ty);var xN=new Array(_N);Gg(xN);var yx=new Array($g);Gg(yx);function QM(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var Qj,Xj,Jj;function XM(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var eB=n=>n<256?Dy[n]:Dy[256+(n>>>7)],My=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},us=(n,e,t)=>{n.bi_valid>ZM-t?(n.bi_buf|=e<<n.bi_valid&65535,My(n,n.bi_buf),n.bi_buf=e>>ZM-n.bi_valid,n.bi_valid+=t-ZM):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},Jc=(n,e,t)=>{us(n,t[e*2],t[e*2+1])},tB=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},Tne=n=>{n.bi_valid===16?(My(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},Mne=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,u,p,v,g,E,C=0;for(v=0;v<=nh;v++)n.bl_count[v]=0;for(t[n.heap[n.heap_max]*2+1]=0,l=n.heap_max+1;l<Gj;l++)u=n.heap[l],v=t[t[u*2+1]*2+1]+1,v>c&&(v=c,C++),t[u*2+1]=v,!(u>r)&&(n.bl_count[v]++,g=0,u>=a&&(g=s[u-a]),E=t[u*2],n.opt_len+=E*(v+g),o&&(n.static_len+=E*(i[u*2+1]+g)));if(C!==0){do{for(v=c-1;n.bl_count[v]===0;)v--;n.bl_count[v]--,n.bl_count[v+1]+=2,n.bl_count[c]--,C-=2}while(C>0);for(v=c;v!==0;v--)for(u=n.bl_count[v];u!==0;)p=n.heap[--l],!(p>r)&&(t[p*2+1]!==v&&(n.opt_len+=(v-t[p*2+1])*t[p*2],t[p*2+1]=v),u--)}},nB=(n,e,t)=>{let r=new Array(nh+1),i=0,o,s;for(o=1;o<=nh;o++)i=i+t[o-1]<<1,r[o]=i;for(s=0;s<=e;s++){let a=n[s*2+1];a!==0&&(n[s*2]=tB(r[a]++,a))}},Nne=()=>{let n,e,t,r,i,o=new Array(nh+1);for(t=0,r=0;r<_N-1;r++)for(xN[r]=t,n=0;n<1<<uN[r];n++)Ty[t++]=r;for(Ty[t-1]=r,i=0,r=0;r<16;r++)for(yx[r]=i,n=0;n<1<<vx[r];n++)Dy[i++]=r;for(i>>=7;r<$g;r++)for(yx[r]=i<<7,n=0;n<1<<vx[r]-7;n++)Dy[256+i++]=r;for(e=0;e<=nh;e++)o[e]=0;for(n=0;n<=143;)Yl[n*2+1]=8,n++,o[8]++;for(;n<=255;)Yl[n*2+1]=9,n++,o[9]++;for(;n<=279;)Yl[n*2+1]=7,n++,o[7]++;for(;n<=287;)Yl[n*2+1]=8,n++,o[8]++;for(nB(Yl,Ay+1,o),n=0;n<$g;n++)Cy[n*2+1]=5,Cy[n*2]=tB(n,5);Qj=new QM(Yl,uN,Oy+1,Ay,nh),Xj=new QM(Cy,vx,0,$g,nh),Jj=new QM(new Array(0),Ane,0,wN,Sne)},rB=n=>{let e;for(e=0;e<Ay;e++)n.dyn_ltree[e*2]=0;for(e=0;e<$g;e++)n.dyn_dtree[e*2]=0;for(e=0;e<wN;e++)n.bl_tree[e*2]=0;n.dyn_ltree[bN*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},iB=n=>{n.bi_valid>8?My(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},aj=(n,e,t,r)=>{let i=e*2,o=t*2;return n[i]<n[o]||n[i]===n[o]&&r[e]<=r[t]},JM=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&aj(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!aj(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},cj=(n,e,t)=>{let r,i,o=0,s,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+o++]&255,r+=(n.pending_buf[n.sym_buf+o++]&255)<<8,i=n.pending_buf[n.sym_buf+o++],r===0?Jc(n,i,e):(s=Ty[i],Jc(n,s+Oy+1,e),a=uN[s],a!==0&&(i-=xN[s],us(n,i,a)),r--,s=eB(r),Jc(n,s,t),a=vx[s],a!==0&&(r-=yx[s],us(n,r,a)));while(o<n.sym_next);Jc(n,bN,e)},dN=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,c=-1,l;for(n.heap_len=0,n.heap_max=Gj,s=0;s<o;s++)t[s*2]!==0?(n.heap[++n.heap_len]=c=s,n.depth[s]=0):t[s*2+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,t[l*2]=1,n.depth[l]=0,n.opt_len--,i&&(n.static_len-=r[l*2+1]);for(e.max_code=c,s=n.heap_len>>1;s>=1;s--)JM(n,t,s);l=o;do s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],JM(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=a,t[l*2]=t[s*2]+t[a*2],n.depth[l]=(n.depth[s]>=n.depth[a]?n.depth[s]:n.depth[a])+1,t[s*2+1]=t[a*2+1]=l,n.heap[1]=l++,JM(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],Mne(n,e),nB(t,c,n.bl_count)},lj=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)&&(a<l?n.bl_tree[o*2]+=a:o!==0?(o!==i&&n.bl_tree[o*2]++,n.bl_tree[Wj*2]++):a<=10?n.bl_tree[Kj*2]++:n.bl_tree[Yj*2]++,a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},uj=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),r=0;r<=t;r++)if(o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)){if(a<l)do Jc(n,o,n.bl_tree);while(--a!==0);else o!==0?(o!==i&&(Jc(n,o,n.bl_tree),a--),Jc(n,Wj,n.bl_tree),us(n,a-3,2)):a<=10?(Jc(n,Kj,n.bl_tree),us(n,a-3,3)):(Jc(n,Yj,n.bl_tree),us(n,a-11,7));a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}},Pne=n=>{let e;for(lj(n,n.dyn_ltree,n.l_desc.max_code),lj(n,n.dyn_dtree,n.d_desc.max_code),dN(n,n.bl_desc),e=wN-1;e>=3&&n.bl_tree[Zj[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},kne=(n,e,t,r)=>{let i;for(us(n,e-257,5),us(n,t-1,5),us(n,r-4,4),i=0;i<r;i++)us(n,n.bl_tree[Zj[i]*2+1],3);uj(n,n.dyn_ltree,e-1),uj(n,n.dyn_dtree,t-1)},Rne=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<Oy;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},dj=!1,One=n=>{dj||(Nne(),dj=!0),n.l_desc=new XM(n.dyn_ltree,Qj),n.d_desc=new XM(n.dyn_dtree,Xj),n.bl_desc=new XM(n.bl_tree,Jj),n.bi_buf=0,n.bi_valid=0,rB(n)},oB=(n,e,t,r)=>{us(n,(xne<<1)+(r?1:0),3),iB(n),My(n,t),My(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},Fne=n=>{us(n,Hj<<1,3),Jc(n,bN,Yl),Tne(n)},Lne=(n,e,t,r)=>{let i,o,s=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=Rne(n)),dN(n,n.l_desc),dN(n,n.d_desc),s=Pne(n),i=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?oB(n,e,t,r):n.strategy===4||o===i?(us(n,(Hj<<1)+(r?1:0),3),cj(n,Yl,Cy)):(us(n,(Ene<<1)+(r?1:0),3),kne(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),cj(n,n.dyn_ltree,n.dyn_dtree)),rB(n),r&&iB(n)},Vne=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(Ty[t]+Oy+1)*2]++,n.dyn_dtree[eB(e)*2]++),n.sym_next===n.sym_end),jne=One,Bne=oB,Une=Lne,zne=Vne,$ne=Fne,qne={_tr_init:jne,_tr_stored_block:Bne,_tr_flush_block:Une,_tr_tally:zne,_tr_align:$ne},Hne=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0},Ny=Hne,Gne=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},Wne=new Uint32Array(Gne()),Kne=(n,e,t,r)=>{let i=Wne,o=r+t;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1},Ri=Kne,oh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Wg={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Yne,_tr_stored_block:fN,_tr_flush_block:Zne,_tr_tally:Ad,_tr_align:Qne}=qne,{Z_NO_FLUSH:Dd,Z_PARTIAL_FLUSH:Xne,Z_FULL_FLUSH:Jne,Z_FINISH:xa,Z_BLOCK:fj,Z_OK:Yi,Z_STREAM_END:hj,Z_STREAM_ERROR:el,Z_DATA_ERROR:ere,Z_BUF_ERROR:eN,Z_DEFAULT_COMPRESSION:tre,Z_FILTERED:nre,Z_HUFFMAN_ONLY:fx,Z_RLE:rre,Z_FIXED:ire,Z_DEFAULT_STRATEGY:ore,Z_UNKNOWN:sre,Z_DEFLATED:bx}=Wg,are=9,cre=15,lre=8,ure=29,dre=256,hN=dre+1+ure,fre=30,hre=19,pre=2*hN+1,gre=15,Cn=3,Sd=258,tl=Sd+Cn+1,mre=32,qg=42,EN=57,pN=69,gN=73,mN=91,vN=103,rh=113,xy=666,Uo=1,Kg=2,sh=3,Yg=4,vre=3,ih=(n,e)=>(n.msg=oh[e],e),pj=n=>n*2-(n>4?9:0),Id=n=>{let e=n.length;for(;--e>=0;)n[e]=0},yre=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},_re=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,Td=_re,Hs=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},Gs=(n,e)=>{Zne(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,Hs(n.strm)},Fn=(n,e)=>{n.pending_buf[n.pending++]=e},by=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},yN=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=Ny(n.adler,e,i,t):n.state.wrap===2&&(n.adler=Ri(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},sB=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,o,s=n.prev_length,a=n.nice_match,c=n.strstart>n.w_size-tl?n.strstart-(n.w_size-tl):0,l=n.window,u=n.w_mask,p=n.prev,v=n.strstart+Sd,g=l[r+s-1],E=l[r+s];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(l[i+s]!==E||l[i+s-1]!==g||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<v);if(o=Sd-(v-r),r=v-Sd,o>s){if(n.match_start=e,s=o,o>=a)break;g=l[r+s-1],E=l[r+s]}}while((e=p[e&u])>c&&--t!==0);return s<=n.lookahead?s:n.lookahead},Hg=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-tl)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),yre(n),r+=e),n.strm.avail_in===0)break;if(t=yN(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=Cn)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=Td(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=Td(n,n.ins_h,n.window[i+Cn-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<Cn)););}while(n.lookahead<tl&&n.strm.avail_in!==0)},aB=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,o,s=0,a=n.strm.avail_in;do{if(r=65535,o=n.bi_valid+42>>3,n.strm.avail_out<o||(o=n.strm.avail_out-o,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>o&&(r=o),r<t&&(r===0&&e!==xa||e===Dd||r!==i+n.strm.avail_in)))break;s=e===xa&&r===i+n.strm.avail_in?1:0,fN(n,0,0,s),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,Hs(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(yN(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(s===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),s?Yg:e!==Dd&&e!==xa&&n.strm.avail_in===0&&n.strstart===n.block_start?Kg:(o=n.window_size-n.strstart,n.strm.avail_in>o&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,o+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),o>n.strm.avail_in&&(o=n.strm.avail_in),o&&(yN(n.strm,n.window,n.strstart,o),n.strstart+=o,n.insert+=o>n.w_size-n.insert?n.w_size-n.insert:o),n.high_water<n.strstart&&(n.high_water=n.strstart),o=n.bi_valid+42>>3,o=n.pending_buf_size-o>65535?65535:n.pending_buf_size-o,t=o>n.w_size?n.w_size:o,i=n.strstart-n.block_start,(i>=t||(i||e===xa)&&e!==Dd&&n.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,s=e===xa&&n.strm.avail_in===0&&r===i?1:0,fN(n,n.block_start,r,s),n.block_start+=r,Hs(n.strm)),s?sh:Uo)},tN=(n,e)=>{let t,r;for(;;){if(n.lookahead<tl){if(Hg(n),n.lookahead<tl&&e===Dd)return Uo;if(n.lookahead===0)break}if(t=0,n.lookahead>=Cn&&(n.ins_h=Td(n,n.ins_h,n.window[n.strstart+Cn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-tl&&(n.match_length=sB(n,t)),n.match_length>=Cn)if(r=Ad(n,n.strstart-n.match_start,n.match_length-Cn),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=Cn){n.match_length--;do n.strstart++,n.ins_h=Td(n,n.ins_h,n.window[n.strstart+Cn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=Td(n,n.ins_h,n.window[n.strstart+1]);else r=Ad(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(Gs(n,!1),n.strm.avail_out===0))return Uo}return n.insert=n.strstart<Cn-1?n.strstart:Cn-1,e===xa?(Gs(n,!0),n.strm.avail_out===0?sh:Yg):n.sym_next&&(Gs(n,!1),n.strm.avail_out===0)?Uo:Kg},Ug=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<tl){if(Hg(n),n.lookahead<tl&&e===Dd)return Uo;if(n.lookahead===0)break}if(t=0,n.lookahead>=Cn&&(n.ins_h=Td(n,n.ins_h,n.window[n.strstart+Cn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=Cn-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-tl&&(n.match_length=sB(n,t),n.match_length<=5&&(n.strategy===nre||n.match_length===Cn&&n.strstart-n.match_start>4096)&&(n.match_length=Cn-1)),n.prev_length>=Cn&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-Cn,r=Ad(n,n.strstart-1-n.prev_match,n.prev_length-Cn),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=Td(n,n.ins_h,n.window[n.strstart+Cn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=Cn-1,n.strstart++,r&&(Gs(n,!1),n.strm.avail_out===0))return Uo}else if(n.match_available){if(r=Ad(n,0,n.window[n.strstart-1]),r&&Gs(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return Uo}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=Ad(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<Cn-1?n.strstart:Cn-1,e===xa?(Gs(n,!0),n.strm.avail_out===0?sh:Yg):n.sym_next&&(Gs(n,!1),n.strm.avail_out===0)?Uo:Kg},wre=(n,e)=>{let t,r,i,o,s=n.window;for(;;){if(n.lookahead<=Sd){if(Hg(n),n.lookahead<=Sd&&e===Dd)return Uo;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=Cn&&n.strstart>0&&(i=n.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=n.strstart+Sd;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);n.match_length=Sd-(o-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=Cn?(t=Ad(n,1,n.match_length-Cn),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=Ad(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(Gs(n,!1),n.strm.avail_out===0))return Uo}return n.insert=0,e===xa?(Gs(n,!0),n.strm.avail_out===0?sh:Yg):n.sym_next&&(Gs(n,!1),n.strm.avail_out===0)?Uo:Kg},bre=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(Hg(n),n.lookahead===0)){if(e===Dd)return Uo;break}if(n.match_length=0,t=Ad(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(Gs(n,!1),n.strm.avail_out===0))return Uo}return n.insert=0,e===xa?(Gs(n,!0),n.strm.avail_out===0?sh:Yg):n.sym_next&&(Gs(n,!1),n.strm.avail_out===0)?Uo:Kg};function Xc(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var Ey=[new Xc(0,0,0,0,aB),new Xc(4,4,8,4,tN),new Xc(4,5,16,8,tN),new Xc(4,6,32,32,tN),new Xc(4,4,16,16,Ug),new Xc(8,16,32,32,Ug),new Xc(8,16,128,128,Ug),new Xc(8,32,128,256,Ug),new Xc(32,128,258,1024,Ug),new Xc(32,258,258,4096,Ug)],xre=n=>{n.window_size=2*n.w_size,Id(n.head),n.max_lazy_match=Ey[n.level].max_lazy,n.good_match=Ey[n.level].good_length,n.nice_match=Ey[n.level].nice_length,n.max_chain_length=Ey[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=Cn-1,n.match_available=0,n.ins_h=0};function Ere(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=bx,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(pre*2),this.dyn_dtree=new Uint16Array((2*fre+1)*2),this.bl_tree=new Uint16Array((2*hre+1)*2),Id(this.dyn_ltree),Id(this.dyn_dtree),Id(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(gre+1),this.heap=new Uint16Array(2*hN+1),Id(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*hN+1),Id(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Fy=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==qg&&e.status!==EN&&e.status!==pN&&e.status!==gN&&e.status!==mN&&e.status!==vN&&e.status!==rh&&e.status!==xy?1:0},cB=n=>{if(Fy(n))return ih(n,el);n.total_in=n.total_out=0,n.data_type=sre;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?EN:e.wrap?qg:rh,n.adler=e.wrap===2?0:1,e.last_flush=-2,Yne(e),Yi},lB=n=>{let e=cB(n);return e===Yi&&xre(n.state),e},Cre=(n,e)=>Fy(n)||n.state.wrap!==2?el:(n.state.gzhead=e,Yi),uB=(n,e,t,r,i,o)=>{if(!n)return el;let s=1;if(e===tre&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>are||t!==bx||r<8||r>15||e<0||e>9||o<0||o>ire||r===8&&s!==1)return ih(n,el);r===8&&(r=9);let a=new Ere;return n.state=a,a.strm=n,a.status=qg,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Cn-1)/Cn),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=t,lB(n)},Ire=(n,e)=>uB(n,e,bx,cre,lre,ore),Sre=(n,e)=>{if(Fy(n)||e>fj||e<0)return n?ih(n,el):el;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===xy&&e!==xa)return ih(n,n.avail_out===0?eN:el);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(Hs(n),n.avail_out===0)return t.last_flush=-1,Yi}else if(n.avail_in===0&&pj(e)<=pj(r)&&e!==xa)return ih(n,eN);if(t.status===xy&&n.avail_in!==0)return ih(n,eN);if(t.status===qg&&t.wrap===0&&(t.status=rh),t.status===qg){let i=bx+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=fx||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,i|=o<<6,t.strstart!==0&&(i|=mre),i+=31-i%31,by(t,i),t.strstart!==0&&(by(t,n.adler>>>16),by(t,n.adler&65535)),n.adler=1,t.status=rh,Hs(n),t.pending!==0)return t.last_flush=-1,Yi}if(t.status===EN){if(n.adler=0,Fn(t,31),Fn(t,139),Fn(t,8),t.gzhead)Fn(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Fn(t,t.gzhead.time&255),Fn(t,t.gzhead.time>>8&255),Fn(t,t.gzhead.time>>16&255),Fn(t,t.gzhead.time>>24&255),Fn(t,t.level===9?2:t.strategy>=fx||t.level<2?4:0),Fn(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Fn(t,t.gzhead.extra.length&255),Fn(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=Ri(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=pN;else if(Fn(t,0),Fn(t,0),Fn(t,0),Fn(t,0),Fn(t,0),Fn(t,t.level===9?2:t.strategy>=fx||t.level<2?4:0),Fn(t,vre),t.status=rh,Hs(n),t.pending!==0)return t.last_flush=-1,Yi}if(t.status===pN){if(t.gzhead.extra){let i=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=Ri(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,Hs(n),t.pending!==0)return t.last_flush=-1,Yi;i=0,o-=a}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>i&&(n.adler=Ri(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=gN}if(t.status===gN){if(t.gzhead.name){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Ri(n.adler,t.pending_buf,t.pending-i,i)),Hs(n),t.pending!==0)return t.last_flush=-1,Yi;i=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,Fn(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Ri(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=mN}if(t.status===mN){if(t.gzhead.comment){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Ri(n.adler,t.pending_buf,t.pending-i,i)),Hs(n),t.pending!==0)return t.last_flush=-1,Yi;i=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,Fn(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Ri(n.adler,t.pending_buf,t.pending-i,i))}t.status=vN}if(t.status===vN){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Hs(n),t.pending!==0))return t.last_flush=-1,Yi;Fn(t,n.adler&255),Fn(t,n.adler>>8&255),n.adler=0}if(t.status=rh,Hs(n),t.pending!==0)return t.last_flush=-1,Yi}if(n.avail_in!==0||t.lookahead!==0||e!==Dd&&t.status!==xy){let i=t.level===0?aB(t,e):t.strategy===fx?bre(t,e):t.strategy===rre?wre(t,e):Ey[t.level].func(t,e);if((i===sh||i===Yg)&&(t.status=xy),i===Uo||i===sh)return n.avail_out===0&&(t.last_flush=-1),Yi;if(i===Kg&&(e===Xne?Qne(t):e!==fj&&(fN(t,0,0,!1),e===Jne&&(Id(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Hs(n),n.avail_out===0))return t.last_flush=-1,Yi}return e!==xa?Yi:t.wrap<=0?hj:(t.wrap===2?(Fn(t,n.adler&255),Fn(t,n.adler>>8&255),Fn(t,n.adler>>16&255),Fn(t,n.adler>>24&255),Fn(t,n.total_in&255),Fn(t,n.total_in>>8&255),Fn(t,n.total_in>>16&255),Fn(t,n.total_in>>24&255)):(by(t,n.adler>>>16),by(t,n.adler&65535)),Hs(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Yi:hj)},Are=n=>{if(Fy(n))return el;let e=n.state.status;return n.state=null,e===rh?ih(n,ere):Yi},Dre=(n,e)=>{let t=e.length;if(Fy(n))return el;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==qg||r.lookahead)return el;if(i===1&&(n.adler=Ny(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Id(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(t-r.w_size,t),0),e=c,t=r.w_size}let o=n.avail_in,s=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,Hg(r);r.lookahead>=Cn;){let c=r.strstart,l=r.lookahead-(Cn-1);do r.ins_h=Td(r,r.ins_h,r.window[c+Cn-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=Cn-1,Hg(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Cn-1,r.match_available=0,n.next_in=s,n.input=a,n.avail_in=o,r.wrap=i,Yi},Tre=Ire,Mre=uB,Nre=lB,Pre=cB,kre=Cre,Rre=Sre,Ore=Are,Fre=Dre,Lre="pako deflate (from Nodeca project)",Iy={deflateInit:Tre,deflateInit2:Mre,deflateReset:Nre,deflateResetKeep:Pre,deflateSetHeader:kre,deflate:Rre,deflateEnd:Ore,deflateSetDictionary:Fre,deflateInfo:Lre},Vre=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),jre=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)Vre(t,r)&&(n[r]=t[r])}}return n},Bre=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];t.set(s,i),i+=s.length}return t},xx={assign:jre,flattenChunks:Bre},dB=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{dB=!1}var Py=new Uint8Array(256);for(let n=0;n<256;n++)Py[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Py[254]=Py[254]=1;var Ure=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},zre=(n,e)=>{if(e<65534&&n.subarray&&dB)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},$re=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,o=new Array(t*2);for(i=0,r=0;r<t;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=Py[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<t;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return zre(o,i)},qre=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Py[n[t]]>e?t:e},ky={string2buf:Ure,buf2string:$re,utf8border:qre};function Hre(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var fB=Hre,hB=Object.prototype.toString,{Z_NO_FLUSH:Gre,Z_SYNC_FLUSH:Wre,Z_FULL_FLUSH:Kre,Z_FINISH:Yre,Z_OK:_x,Z_STREAM_END:Zre,Z_DEFAULT_COMPRESSION:Qre,Z_DEFAULT_STRATEGY:Xre,Z_DEFLATED:Jre}=Wg;function Ly(n){this.options=xx.assign({level:Qre,method:Jre,chunkSize:16384,windowBits:15,memLevel:8,strategy:Xre},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fB,this.strm.avail_out=0;let t=Iy.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==_x)throw new Error(oh[t]);if(e.header&&Iy.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=ky.string2buf(e.dictionary):hB.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=Iy.deflateSetDictionary(this.strm,r),t!==_x)throw new Error(oh[t]);this._dict_set=!0}}Ly.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?Yre:Gre,typeof n=="string"?t.input=ky.string2buf(n):hB.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(o===Wre||o===Kre)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=Iy.deflate(t,o),i===Zre)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=Iy.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===_x;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Ly.prototype.onData=function(n){this.chunks.push(n)};Ly.prototype.onEnd=function(n){n===_x&&(this.result=xx.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function CN(n,e){let t=new Ly(e);if(t.push(n,!0),t.err)throw t.msg||oh[t.err];return t.result}function eie(n,e){return e=e||{},e.raw=!0,CN(n,e)}function tie(n,e){return e=e||{},e.gzip=!0,CN(n,e)}var nie=Ly,rie=CN,iie=eie,oie=tie,sie=Wg,aie={Deflate:nie,deflate:rie,deflateRaw:iie,gzip:oie,constants:sie},hx=16209,cie=16191,lie=function(e,t){let r,i,o,s,a,c,l,u,p,v,g,E,C,M,N,Q,j,H,oe,pe,z,T,I,V,b=e.state;r=e.next_in,I=e.input,i=r+(e.avail_in-5),o=e.next_out,V=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=b.dmax,l=b.wsize,u=b.whave,p=b.wnext,v=b.window,g=b.hold,E=b.bits,C=b.lencode,M=b.distcode,N=(1<<b.lenbits)-1,Q=(1<<b.distbits)-1;e:do{E<15&&(g+=I[r++]<<E,E+=8,g+=I[r++]<<E,E+=8),j=C[g&N];t:for(;;){if(H=j>>>24,g>>>=H,E-=H,H=j>>>16&255,H===0)V[o++]=j&65535;else if(H&16){oe=j&65535,H&=15,H&&(E<H&&(g+=I[r++]<<E,E+=8),oe+=g&(1<<H)-1,g>>>=H,E-=H),E<15&&(g+=I[r++]<<E,E+=8,g+=I[r++]<<E,E+=8),j=M[g&Q];n:for(;;){if(H=j>>>24,g>>>=H,E-=H,H=j>>>16&255,H&16){if(pe=j&65535,H&=15,E<H&&(g+=I[r++]<<E,E+=8,E<H&&(g+=I[r++]<<E,E+=8)),pe+=g&(1<<H)-1,pe>c){e.msg="invalid distance too far back",b.mode=hx;break e}if(g>>>=H,E-=H,H=o-s,pe>H){if(H=pe-H,H>u&&b.sane){e.msg="invalid distance too far back",b.mode=hx;break e}if(z=0,T=v,p===0){if(z+=l-H,H<oe){oe-=H;do V[o++]=v[z++];while(--H);z=o-pe,T=V}}else if(p<H){if(z+=l+p-H,H-=p,H<oe){oe-=H;do V[o++]=v[z++];while(--H);if(z=0,p<oe){H=p,oe-=H;do V[o++]=v[z++];while(--H);z=o-pe,T=V}}}else if(z+=p-H,H<oe){oe-=H;do V[o++]=v[z++];while(--H);z=o-pe,T=V}for(;oe>2;)V[o++]=T[z++],V[o++]=T[z++],V[o++]=T[z++],oe-=3;oe&&(V[o++]=T[z++],oe>1&&(V[o++]=T[z++]))}else{z=o-pe;do V[o++]=V[z++],V[o++]=V[z++],V[o++]=V[z++],oe-=3;while(oe>2);oe&&(V[o++]=V[z++],oe>1&&(V[o++]=V[z++]))}}else if((H&64)===0){j=M[(j&65535)+(g&(1<<H)-1)];continue n}else{e.msg="invalid distance code",b.mode=hx;break e}break}}else if((H&64)===0){j=C[(j&65535)+(g&(1<<H)-1)];continue t}else if(H&32){b.mode=cie;break e}else{e.msg="invalid literal/length code",b.mode=hx;break e}break}}while(r<i&&o<a);oe=E>>3,r-=oe,E-=oe<<3,g&=(1<<E)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),b.hold=g,b.bits=E},zg=15,gj=852,mj=592,vj=0,nN=1,yj=2,uie=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),die=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fie=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),hie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),pie=(n,e,t,r,i,o,s,a)=>{let c=a.bits,l=0,u=0,p=0,v=0,g=0,E=0,C=0,M=0,N=0,Q=0,j,H,oe,pe,z,T=null,I,V=new Uint16Array(zg+1),b=new Uint16Array(zg+1),S=null,D,te,we;for(l=0;l<=zg;l++)V[l]=0;for(u=0;u<r;u++)V[e[t+u]]++;for(g=c,v=zg;v>=1&&V[v]===0;v--);if(g>v&&(g=v),v===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(p=1;p<v&&V[p]===0;p++);for(g<p&&(g=p),M=1,l=1;l<=zg;l++)if(M<<=1,M-=V[l],M<0)return-1;if(M>0&&(n===vj||v!==1))return-1;for(b[1]=0,l=1;l<zg;l++)b[l+1]=b[l]+V[l];for(u=0;u<r;u++)e[t+u]!==0&&(s[b[e[t+u]]++]=u);if(n===vj?(T=S=s,I=20):n===nN?(T=uie,S=die,I=257):(T=fie,S=hie,I=0),Q=0,u=0,l=p,z=o,E=g,C=0,oe=-1,N=1<<g,pe=N-1,n===nN&&N>gj||n===yj&&N>mj)return 1;for(;;){D=l-C,s[u]+1<I?(te=0,we=s[u]):s[u]>=I?(te=S[s[u]-I],we=T[s[u]-I]):(te=96,we=0),j=1<<l-C,H=1<<E,p=H;do H-=j,i[z+(Q>>C)+H]=D<<24|te<<16|we|0;while(H!==0);for(j=1<<l-1;Q&j;)j>>=1;if(j!==0?(Q&=j-1,Q+=j):Q=0,u++,--V[l]===0){if(l===v)break;l=e[t+s[u]]}if(l>g&&(Q&pe)!==oe){for(C===0&&(C=g),z+=p,E=l-C,M=1<<E;E+C<v&&(M-=V[E+C],!(M<=0));)E++,M<<=1;if(N+=1<<E,n===nN&&N>gj||n===yj&&N>mj)return 1;oe=Q&pe,i[oe]=g<<24|E<<16|z-o|0}}return Q!==0&&(i[z+Q]=l-C<<24|64<<16|0),a.bits=g,0},Sy=pie,gie=0,pB=1,gB=2,{Z_FINISH:_j,Z_BLOCK:mie,Z_TREES:px,Z_OK:ah,Z_STREAM_END:vie,Z_NEED_DICT:yie,Z_STREAM_ERROR:Ea,Z_DATA_ERROR:mB,Z_MEM_ERROR:vB,Z_BUF_ERROR:_ie,Z_DEFLATED:wj}=Wg,Ex=16180,bj=16181,xj=16182,Ej=16183,Cj=16184,Ij=16185,Sj=16186,Aj=16187,Dj=16188,Tj=16189,wx=16190,Kl=16191,rN=16192,Mj=16193,iN=16194,Nj=16195,Pj=16196,kj=16197,Rj=16198,gx=16199,mx=16200,Oj=16201,Fj=16202,Lj=16203,Vj=16204,jj=16205,oN=16206,Bj=16207,Uj=16208,Ir=16209,yB=16210,_B=16211,wie=852,bie=592,xie=15,Eie=xie,zj=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Cie(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ch=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<Ex||e.mode>_B?1:0},wB=n=>{if(ch(n))return Ea;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Ex,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(wie),e.distcode=e.distdyn=new Int32Array(bie),e.sane=1,e.back=-1,ah},bB=n=>{if(ch(n))return Ea;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,wB(n)},xB=(n,e)=>{let t;if(ch(n))return Ea;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ea:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,bB(n))},EB=(n,e)=>{if(!n)return Ea;let t=new Cie;n.state=t,t.strm=n,t.window=null,t.mode=Ex;let r=xB(n,e);return r!==ah&&(n.state=null),r},Iie=n=>EB(n,Eie),$j=!0,sN,aN,Sie=n=>{if($j){sN=new Int32Array(512),aN=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Sy(pB,n.lens,0,288,sN,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Sy(gB,n.lens,0,32,aN,0,n.work,{bits:5}),$j=!1}n.lencode=sN,n.lenbits=9,n.distcode=aN,n.distbits=5},CB=(n,e,t,r)=>{let i,o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Aie=(n,e)=>{let t,r,i,o,s,a,c,l,u,p,v,g,E,C,M=0,N,Q,j,H,oe,pe,z,T,I=new Uint8Array(4),V,b,S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ch(n)||!n.output||!n.input&&n.avail_in!==0)return Ea;t=n.state,t.mode===Kl&&(t.mode=rN),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,p=a,v=c,T=ah;e:for(;;)switch(t.mode){case Ex:if(t.wrap===0){t.mode=rN;break}for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,I[0]=l&255,I[1]=l>>>8&255,t.check=Ri(t.check,I,2,0),l=0,u=0,t.mode=bj;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){n.msg="incorrect header check",t.mode=Ir;break}if((l&15)!==wj){n.msg="unknown compression method",t.mode=Ir;break}if(l>>>=4,u-=4,z=(l&15)+8,t.wbits===0&&(t.wbits=z),z>15||z>t.wbits){n.msg="invalid window size",t.mode=Ir;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=l&512?Tj:Kl,l=0,u=0;break;case bj:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==wj){n.msg="unknown compression method",t.mode=Ir;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Ir;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,t.check=Ri(t.check,I,2,0)),l=0,u=0,t.mode=xj;case xj:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,I[2]=l>>>16&255,I[3]=l>>>24&255,t.check=Ri(t.check,I,4,0)),l=0,u=0,t.mode=Ej;case Ej:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,t.check=Ri(t.check,I,2,0)),l=0,u=0,t.mode=Cj;case Cj:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,t.check=Ri(t.check,I,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=Ij;case Ij:if(t.flags&1024&&(g=t.length,g>a&&(g=a),g&&(t.head&&(z=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+g),z)),t.flags&512&&t.wrap&4&&(t.check=Ri(t.check,r,g,o)),a-=g,o+=g,t.length-=g),t.length))break e;t.length=0,t.mode=Sj;case Sj:if(t.flags&2048){if(a===0)break e;g=0;do z=r[o+g++],t.head&&z&&t.length<65536&&(t.head.name+=String.fromCharCode(z));while(z&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Ri(t.check,r,g,o)),a-=g,o+=g,z)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Aj;case Aj:if(t.flags&4096){if(a===0)break e;g=0;do z=r[o+g++],t.head&&z&&t.length<65536&&(t.head.comment+=String.fromCharCode(z));while(z&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Ri(t.check,r,g,o)),a-=g,o+=g,z)break e}else t.head&&(t.head.comment=null);t.mode=Dj;case Dj:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Ir;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Kl;break;case Tj:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}n.adler=t.check=zj(l),l=0,u=0,t.mode=wx;case wx:if(t.havedict===0)return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,yie;n.adler=t.check=1,t.mode=Kl;case Kl:if(e===mie||e===px)break e;case rN:if(t.last){l>>>=u&7,u-=u&7,t.mode=oN;break}for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=Mj;break;case 1:if(Sie(t),t.mode=gx,e===px){l>>>=2,u-=2;break e}break;case 2:t.mode=Pj;break;case 3:n.msg="invalid block type",t.mode=Ir}l>>>=2,u-=2;break;case Mj:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Ir;break}if(t.length=l&65535,l=0,u=0,t.mode=iN,e===px)break e;case iN:t.mode=Nj;case Nj:if(g=t.length,g){if(g>a&&(g=a),g>c&&(g=c),g===0)break e;i.set(r.subarray(o,o+g),s),a-=g,o+=g,c-=g,s+=g,t.length-=g;break}t.mode=Kl;break;case Pj:for(;u<14;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Ir;break}t.have=0,t.mode=kj;case kj:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.lens[S[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[S[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},T=Sy(gie,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,T){n.msg="invalid code lengths set",t.mode=Ir;break}t.have=0,t.mode=Rj;case Rj:for(;t.have<t.nlen+t.ndist;){for(;M=t.lencode[l&(1<<t.lenbits)-1],N=M>>>24,Q=M>>>16&255,j=M&65535,!(N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(j<16)l>>>=N,u-=N,t.lens[t.have++]=j;else{if(j===16){for(b=N+2;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=N,u-=N,t.have===0){n.msg="invalid bit length repeat",t.mode=Ir;break}z=t.lens[t.have-1],g=3+(l&3),l>>>=2,u-=2}else if(j===17){for(b=N+3;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=N,u-=N,z=0,g=3+(l&7),l>>>=3,u-=3}else{for(b=N+7;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=N,u-=N,z=0,g=11+(l&127),l>>>=7,u-=7}if(t.have+g>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Ir;break}for(;g--;)t.lens[t.have++]=z}}if(t.mode===Ir)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Ir;break}if(t.lenbits=9,V={bits:t.lenbits},T=Sy(pB,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,T){n.msg="invalid literal/lengths set",t.mode=Ir;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},T=Sy(gB,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,T){n.msg="invalid distances set",t.mode=Ir;break}if(t.mode=gx,e===px)break e;case gx:t.mode=mx;case mx:if(a>=6&&c>=258){n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,lie(n,v),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,t.mode===Kl&&(t.back=-1);break}for(t.back=0;M=t.lencode[l&(1<<t.lenbits)-1],N=M>>>24,Q=M>>>16&255,j=M&65535,!(N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(Q&&(Q&240)===0){for(H=N,oe=Q,pe=j;M=t.lencode[pe+((l&(1<<H+oe)-1)>>H)],N=M>>>24,Q=M>>>16&255,j=M&65535,!(H+N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=H,u-=H,t.back+=H}if(l>>>=N,u-=N,t.back+=N,t.length=j,Q===0){t.mode=jj;break}if(Q&32){t.back=-1,t.mode=Kl;break}if(Q&64){n.msg="invalid literal/length code",t.mode=Ir;break}t.extra=Q&15,t.mode=Oj;case Oj:if(t.extra){for(b=t.extra;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Fj;case Fj:for(;M=t.distcode[l&(1<<t.distbits)-1],N=M>>>24,Q=M>>>16&255,j=M&65535,!(N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((Q&240)===0){for(H=N,oe=Q,pe=j;M=t.distcode[pe+((l&(1<<H+oe)-1)>>H)],N=M>>>24,Q=M>>>16&255,j=M&65535,!(H+N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=H,u-=H,t.back+=H}if(l>>>=N,u-=N,t.back+=N,Q&64){n.msg="invalid distance code",t.mode=Ir;break}t.offset=j,t.extra=Q&15,t.mode=Lj;case Lj:if(t.extra){for(b=t.extra;u<b;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Ir;break}t.mode=Vj;case Vj:if(c===0)break e;if(g=v-c,t.offset>g){if(g=t.offset-g,g>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Ir;break}g>t.wnext?(g-=t.wnext,E=t.wsize-g):E=t.wnext-g,g>t.length&&(g=t.length),C=t.window}else C=i,E=s-t.offset,g=t.length;g>c&&(g=c),c-=g,t.length-=g;do i[s++]=C[E++];while(--g);t.length===0&&(t.mode=mx);break;case jj:if(c===0)break e;i[s++]=t.length,c--,t.mode=mx;break;case oN:if(t.wrap){for(;u<32;){if(a===0)break e;a--,l|=r[o++]<<u,u+=8}if(v-=c,n.total_out+=v,t.total+=v,t.wrap&4&&v&&(n.adler=t.check=t.flags?Ri(t.check,i,v,s-v):Ny(t.check,i,v,s-v)),v=c,t.wrap&4&&(t.flags?l:zj(l))!==t.check){n.msg="incorrect data check",t.mode=Ir;break}l=0,u=0}t.mode=Bj;case Bj:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Ir;break}l=0,u=0}t.mode=Uj;case Uj:T=vie;break e;case Ir:T=mB;break e;case yB:return vB;case _B:default:return Ea}return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,(t.wsize||v!==n.avail_out&&t.mode<Ir&&(t.mode<oN||e!==_j))&&CB(n,n.output,n.next_out,v-n.avail_out),p-=n.avail_in,v-=n.avail_out,n.total_in+=p,n.total_out+=v,t.total+=v,t.wrap&4&&v&&(n.adler=t.check=t.flags?Ri(t.check,i,v,n.next_out-v):Ny(t.check,i,v,n.next_out-v)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Kl?128:0)+(t.mode===gx||t.mode===iN?256:0),(p===0&&v===0||e===_j)&&T===ah&&(T=_ie),T},Die=n=>{if(ch(n))return Ea;let e=n.state;return e.window&&(e.window=null),n.state=null,ah},Tie=(n,e)=>{if(ch(n))return Ea;let t=n.state;return(t.wrap&2)===0?Ea:(t.head=e,e.done=!1,ah)},Mie=(n,e)=>{let t=e.length,r,i,o;return ch(n)||(r=n.state,r.wrap!==0&&r.mode!==wx)?Ea:r.mode===wx&&(i=1,i=Ny(i,e,t,0),i!==r.check)?mB:(o=CB(n,e,t,t),o?(r.mode=yB,vB):(r.havedict=1,ah))},Nie=bB,Pie=xB,kie=wB,Rie=Iie,Oie=EB,Fie=Aie,Lie=Die,Vie=Tie,jie=Mie,Bie="pako inflate (from Nodeca project)",Zl={inflateReset:Nie,inflateReset2:Pie,inflateResetKeep:kie,inflateInit:Rie,inflateInit2:Oie,inflate:Fie,inflateEnd:Lie,inflateGetHeader:Vie,inflateSetDictionary:jie,inflateInfo:Bie};function Uie(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var zie=Uie,IB=Object.prototype.toString,{Z_NO_FLUSH:$ie,Z_FINISH:qie,Z_OK:Ry,Z_STREAM_END:cN,Z_NEED_DICT:lN,Z_STREAM_ERROR:Hie,Z_DATA_ERROR:qj,Z_MEM_ERROR:Gie}=Wg;function Vy(n){this.options=xx.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fB,this.strm.avail_out=0;let t=Zl.inflateInit2(this.strm,e.windowBits);if(t!==Ry)throw new Error(oh[t]);if(this.header=new zie,Zl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=ky.string2buf(e.dictionary):IB.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Zl.inflateSetDictionary(this.strm,e.dictionary),t!==Ry)))throw new Error(oh[t])}Vy.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?qie:$ie,IB.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=Zl.inflate(t,s),o===lN&&i&&(o=Zl.inflateSetDictionary(t,i),o===Ry?o=Zl.inflate(t,s):o===qj&&(o=lN));t.avail_in>0&&o===cN&&t.state.wrap>0&&n[t.next_in]!==0;)Zl.inflateReset(t),o=Zl.inflate(t,s);switch(o){case Hie:case qj:case lN:case Gie:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===cN))if(this.options.to==="string"){let c=ky.utf8border(t.output,t.next_out),l=t.next_out-c,u=ky.buf2string(t.output,c);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Ry&&a===0)){if(o===cN)return o=Zl.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Vy.prototype.onData=function(n){this.chunks.push(n)};Vy.prototype.onEnd=function(n){n===Ry&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=xx.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function IN(n,e){let t=new Vy(e);if(t.push(n),t.err)throw t.msg||oh[t.err];return t.result}function Wie(n,e){return e=e||{},e.raw=!0,IN(n,e)}var Kie=Vy,Yie=IN,Zie=Wie,Qie=IN,Xie=Wg,Jie={Inflate:Kie,inflate:Yie,inflateRaw:Zie,ungzip:Qie,constants:Xie},{Deflate:x5e,deflate:E5e,deflateRaw:C5e,gzip:I5e}=aie,{Inflate:eoe,inflate:toe,inflateRaw:S5e,ungzip:A5e}=Jie;var SN=eoe,SB=toe;var DB=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;DB[n]=e}var AB=4294967295;function noe(n,e,t){let r=n;for(let i=0;i<t;i++)r=DB[(r^e[i])&255]^r>>>8;return r}function roe(n,e){return(noe(AB,n,e)^AB)>>>0}function AN(n,e,t){let r=n.readUint32(),i=roe(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function Cx(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function Ix(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function Sx(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function Ax(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function Dx(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+ioe(e[o-i],t[o],t[o-i])&255}}function ioe(n,e,t){let r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),s=Math.abs(r-t);return i<=o&&i<=s?n:o<=s?e:t}function TB(n,e,t,r,i,o){switch(n){case 0:Cx(e,t,i);break;case 1:Ix(e,t,i,o);break;case 2:Sx(e,t,r,i);break;case 3:Ax(e,t,r,i,o);break;case 4:Dx(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}var ooe=new Uint16Array([255]),soe=new Uint8Array(ooe.buffer),aoe=soe[0]===255;function MB(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,c=new Uint8Array(r*t*a),l=0;for(let u=0;u<7;u++){let p=s[u],v=Math.ceil((t-p.x)/p.xStep),g=Math.ceil((r-p.y)/p.yStep);if(v<=0||g<=0)continue;let E=v*a,C=new Uint8Array(E);for(let M=0;M<g;M++){let N=e[l++],Q=e.subarray(l,l+E);l+=E;let j=new Uint8Array(E);TB(N,Q,j,C,E,a),C.set(j);for(let H=0;H<v;H++){let oe=p.x+H*p.xStep,pe=p.y+M*p.yStep;if(!(oe>=t||pe>=r))for(let z=0;z<a;z++)c[(pe*t+oe)*a+z]=j[H*a+z]}}}if(o===16){let u=new Uint16Array(c.buffer);if(aoe)for(let p=0;p<u.length;p++)u[p]=coe(u[p]);return u}else return c}function coe(n){return(n&255)<<8|n>>8&255}var loe=new Uint16Array([255]),uoe=new Uint8Array(loe.buffer),doe=uoe[0]===255,foe=new Uint8Array(0);function DN(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*t),c=new Uint8Array(r*a),l=foe,u=0,p,v;for(let g=0;g<r;g++){switch(p=e.subarray(u+1,u+1+a),v=c.subarray(g*a,(g+1)*a),e[u]){case 0:Cx(p,v,a);break;case 1:Ix(p,v,a,s);break;case 2:Sx(p,v,l,a);break;case 3:Ax(p,v,l,a,s);break;case 4:Dx(p,v,l,a,s);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}l=v,u+=a+1}if(o===16){let g=new Uint16Array(c.buffer);if(doe)for(let E=0;E<g.length;E++)g[E]=hoe(g[E]);return g}else return c}function hoe(n){return(n&255)<<8|n>>8&255}var Tx=Uint8Array.of(137,80,78,71,13,10,26,10);function TN(n){if(!NB(n.readBytes(Tx.length)))throw new Error("wrong PNG signature")}function NB(n){if(n.length<Tx.length)return!1;for(let e=0;e<Tx.length;e++)if(n[e]!==Tx[e])return!1;return!0}var PB="tEXt",goe=0,kB=new TextDecoder("latin1");function moe(n){if(yoe(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var voe=/^[\u0000-\u00FF]*$/;function yoe(n){if(!voe.test(n))throw new Error("invalid latin1 text")}function RB(n,e,t){let r=MN(e);n[r]=_oe(e,t-r.length-1)}function MN(n){for(n.mark();n.readByte()!==goe;);let e=n.offset;n.reset();let t=kB.decode(n.readBytes(e-n.offset-1));return n.skip(1),moe(t),t}function _oe(n,e){return kB.decode(n.readBytes(e))}var zo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},jy={UNKNOWN:-1,DEFLATE:0},Mx={UNKNOWN:-1,ADAPTIVE:0},By={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Uy={NONE:0,BACKGROUND:1,PREVIOUS:2},Nx={SOURCE:0,OVER:1};var Px=class extends wy{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);let{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new SN,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=jy.UNKNOWN,this._filterMethod=Mx.UNKNOWN,this._interlaceMethod=By.UNKNOWN,this._colorType=zo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(TN(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(TN(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){let r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case PB:RB(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?AN(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){let r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?AN(this,e+4,t):this.skip(4)}decodeIHDR(){let e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=woe(this.readUint8());let t=this.readUint8();this._colorType=t;let r;switch(t){case zo.GREYSCALE:r=1;break;case zo.TRUECOLOUR:r=3;break;case zo.INDEXED_COLOUR:r=1;break;case zo.GREYSCALE_ALPHA:r=2;break;case zo.TRUECOLOUR_ALPHA:r=4;break;case zo.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==jy.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);let t=e/3;this._hasPalette=!0;let r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case zo.GREYSCALE:case zo.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case zo.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){let r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case zo.UNKNOWN:case zo.GREYSCALE_ALPHA:case zo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t=MN(this),r=this.readUint8();if(r!==jy.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);let i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:SB(i)}}decodepHYs(){let e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){let t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=DN({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{let i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case Uy.NONE:break;case Uy.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){let s=(i*e.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[s+a]=0}break;case Uy.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){let r=1<<this._png.depth,i=(o,s)=>{let a=((o+t.yOffset)*this._png.width+t.xOffset+s)*this._png.channels,c=(o*t.width+s)*this._png.channels;return{index:a,frameIndex:c}};switch(t.blendOp){case Nx.SOURCE:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++)e.data[a+l]=t.data[c+l]}break;case Nx.OVER:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++){let u=t.data[c+this._png.channels-1]/r,p=l%(this._png.channels-1)===0?1:t.data[c+l],v=Math.floor(u*p+(1-u)*e.data[a+l]);e.data[a+l]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Mx.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===By.NO_INTERLACE)this._png.data=DN({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===By.ADAM7)this._png.data=MB({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Uy.NONE,blendOp:Nx.SOURCE,data:e}),this._inflator=new SN,this._writingDataChunks=!1}};function woe(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function OB(n,e){return new Px(n,e).decode()}var Kt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function NN(){Kt.console&&typeof Kt.console.log=="function"&&Kt.console.log.apply(Kt.console,arguments)}var cr={log:NN,warn:function(n){Kt.console&&(typeof Kt.console.warn=="function"?Kt.console.warn.apply(Kt.console,arguments):NN.call(null,arguments))},error:function(n){Kt.console&&(typeof Kt.console.error=="function"?Kt.console.error.apply(Kt.console,arguments):NN(n))}};function PN(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){lh(r.response,e,t)},r.onerror=function(){cr.error("could not download file")},r.send()}function FB(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function kx(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var lh=Kt.saveAs||((typeof window>"u"?"undefined":Un(window))!=="object"||window!==Kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Kt.URL||Kt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?FB(i.href)?PN(n,e,t):kx(i,i.target="_blank"):kx(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){kx(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(FB(n))PN(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){kx(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Un(o)!=="object"&&(cr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return PN(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(Kt.HTMLElement)||Kt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Un(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(n)}else{var c=Kt.URL||Kt.webkitURL,l=c.createObjectURL(n);r?r.location=l:location.href=l,r=null,setTimeout(function(){c.revokeObjectURL(l)},4e4)}});function s9(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),l=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),"#"+a+c+l}}var Lx=Kt.atob.bind(Kt),LB=Kt.btoa.bind(Kt);function kN(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=mo(t,r,i,o,e[0],7,-680876936),o=mo(o,t,r,i,e[1],12,-389564586),i=mo(i,o,t,r,e[2],17,606105819),r=mo(r,i,o,t,e[3],22,-1044525330),t=mo(t,r,i,o,e[4],7,-176418897),o=mo(o,t,r,i,e[5],12,1200080426),i=mo(i,o,t,r,e[6],17,-1473231341),r=mo(r,i,o,t,e[7],22,-45705983),t=mo(t,r,i,o,e[8],7,1770035416),o=mo(o,t,r,i,e[9],12,-1958414417),i=mo(i,o,t,r,e[10],17,-42063),r=mo(r,i,o,t,e[11],22,-1990404162),t=mo(t,r,i,o,e[12],7,1804603682),o=mo(o,t,r,i,e[13],12,-40341101),i=mo(i,o,t,r,e[14],17,-1502002290),t=vo(t,r=mo(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=vo(o,t,r,i,e[6],9,-1069501632),i=vo(i,o,t,r,e[11],14,643717713),r=vo(r,i,o,t,e[0],20,-373897302),t=vo(t,r,i,o,e[5],5,-701558691),o=vo(o,t,r,i,e[10],9,38016083),i=vo(i,o,t,r,e[15],14,-660478335),r=vo(r,i,o,t,e[4],20,-405537848),t=vo(t,r,i,o,e[9],5,568446438),o=vo(o,t,r,i,e[14],9,-1019803690),i=vo(i,o,t,r,e[3],14,-187363961),r=vo(r,i,o,t,e[8],20,1163531501),t=vo(t,r,i,o,e[13],5,-1444681467),o=vo(o,t,r,i,e[2],9,-51403784),i=vo(i,o,t,r,e[7],14,1735328473),t=yo(t,r=vo(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=yo(o,t,r,i,e[8],11,-2022574463),i=yo(i,o,t,r,e[11],16,1839030562),r=yo(r,i,o,t,e[14],23,-35309556),t=yo(t,r,i,o,e[1],4,-1530992060),o=yo(o,t,r,i,e[4],11,1272893353),i=yo(i,o,t,r,e[7],16,-155497632),r=yo(r,i,o,t,e[10],23,-1094730640),t=yo(t,r,i,o,e[13],4,681279174),o=yo(o,t,r,i,e[0],11,-358537222),i=yo(i,o,t,r,e[3],16,-722521979),r=yo(r,i,o,t,e[6],23,76029189),t=yo(t,r,i,o,e[9],4,-640364487),o=yo(o,t,r,i,e[12],11,-421815835),i=yo(i,o,t,r,e[15],16,530742520),t=_o(t,r=yo(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=_o(o,t,r,i,e[7],10,1126891415),i=_o(i,o,t,r,e[14],15,-1416354905),r=_o(r,i,o,t,e[5],21,-57434055),t=_o(t,r,i,o,e[12],6,1700485571),o=_o(o,t,r,i,e[3],10,-1894986606),i=_o(i,o,t,r,e[10],15,-1051523),r=_o(r,i,o,t,e[1],21,-2054922799),t=_o(t,r,i,o,e[8],6,1873313359),o=_o(o,t,r,i,e[15],10,-30611744),i=_o(i,o,t,r,e[6],15,-1560198380),r=_o(r,i,o,t,e[13],21,1309151649),t=_o(t,r,i,o,e[4],6,-145523070),o=_o(o,t,r,i,e[11],10,-1120210379),i=_o(i,o,t,r,e[2],15,718787259),r=_o(r,i,o,t,e[9],21,-343485551),n[0]=Nd(t,n[0]),n[1]=Nd(r,n[1]),n[2]=Nd(i,n[2]),n[3]=Nd(o,n[3])}function qx(n,e,t,r,i,o){return e=Nd(Nd(e,n),Nd(r,o)),Nd(e<<i|e>>>32-i,t)}function mo(n,e,t,r,i,o,s){return qx(e&t|~e&r,n,e,i,o,s)}function vo(n,e,t,r,i,o,s){return qx(e&r|t&~r,n,e,i,o,s)}function yo(n,e,t,r,i,o,s){return qx(e^t^r,n,e,i,o,s)}function _o(n,e,t,r,i,o,s){return qx(t^(e|~r),n,e,i,o,s)}function a9(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)kN(r,boe(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(kN(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,kN(r,i),r}function boe(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var VB="0123456789abcdef".split("");function xoe(n){for(var e="",t=0;t<4;t++)e+=VB[n>>8*t+4&15]+VB[n>>8*t&15];return e}function Eoe(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function jN(n){return a9(n).map(Eoe).join("")}var Coe=(function(n){for(var e=0;e<n.length;e++)n[e]=xoe(n[e]);return n.join("")})(a9("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nd(n,e){if(Coe){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function BN(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var l=0;for(c=0;c<256;c++){var u=a[c];l=(l+u+s.charCodeAt(c))%256,a[c]=a[l],a[l]=u}t=n,r=a}else a=r;var p=e.length,v=0,g=0,E="";for(c=0;c<p;c++)g=(g+(u=a[v=(v+1)%256]))%256,a[v]=a[g],a[g]=u,s=a[(a[v]+a[g])%256],E+=String.fromCharCode(e.charCodeAt(c)^s);return E}var jB={print:4,modify:8,copy:16,"annot-forms":32};function Xg(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(jB.perm!==void 0)throw new Error("Invalid permission: "+a);i+=jB[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=jN(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=BN(this.encryptionKey,this.padding)}function Jg(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function BB(n){if(Un(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){Kt.console&&cr.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function zx(n){if(!(this instanceof zx))return new zx(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function c9(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function uh(n,e,t,r,i){if(!(this instanceof uh))return new uh(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,c9.call(this,r,i)}function em(n,e,t,r,i){if(!(this instanceof em))return new em(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,c9.call(this,r,i)}function Ct(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,c=16,l="S",u=null;Un(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),l=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,v={},g={internal:{},__private__:{}};g.__private__.PubSub=BB;var E="1.3",C=g.__private__.getPdfVersion=function(){return E};g.__private__.setPdfVersion=function(m){E=m};var M={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return M};var N=g.__private__.getPageFormat=function(m){return M[m]};i=i||"a4";var Q="compat",j="advanced",H=Q;function oe(){this.saveGraphicsState(),q(new Mt(Qt,0,0,-Qt,0,Da()*Qt).toString()+" cm"),this.setFontSize(this.getFontSize()/Qt),l="n",H=j}function pe(){this.restoreGraphicsState(),l="S",H=Q}var z=g.__private__.combineFontStyleAndFontWeight=function(m,P){if(m=="bold"&&P=="normal"||m=="bold"&&P==400||m=="normal"&&P=="italic"||m=="bold"&&P=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return P&&(m=P==400||P==="normal"?m==="italic"?"italic":"normal":P!=700&&P!=="bold"||m!=="normal"?(P==700?"bold":P)+""+m:"bold"),m};g.advancedAPI=function(m){var P=H===Q;return P&&oe.call(this),typeof m!="function"||(m(this),P&&pe.call(this)),this},g.compatAPI=function(m){var P=H===j;return P&&pe.call(this),typeof m!="function"||(m(this),P&&oe.call(this)),this},g.isAdvancedAPI=function(){return H===j};var T,I=function(m){if(H!==j)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=g.roundToPrecision=g.__private__.roundToPrecision=function(m,P){var W=e||P;if(isNaN(m)||isNaN(W))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(W).replace(/0+$/,"")};T=g.hpf=g.__private__.hpf=typeof c=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return V(m,c)}:c==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return V(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return V(m,16)};var b=g.f2=g.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return V(m,2)},S=g.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return V(m,3)},D=g.scale=g.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return H===Q?m*Qt:H===j?m:void 0},te=function(m){return D((function(P){return H===Q?Da()-P:H===j?P:void 0})(m))};g.__private__.setPrecision=g.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(e=parseInt(m,10))};var we,De="00000000000000000000000000000000",Se=g.__private__.getFileId=function(){return De},he=g.__private__.setFileId=function(m){return De=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():De.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&($r=new Xg(u.userPermissions,u.userPassword,u.ownerPassword,De)),De};g.setFileId=function(m){return he(m),this},g.getFileId=function(){return Se()};var Me=g.__private__.convertDateToPDFDate=function(m){var P=m.getTimezoneOffset(),W=P<0?"+":"-",ne=Math.floor(Math.abs(P/60)),ue=Math.abs(P%60),Pe=[W,J(ne),"'",J(ue),"'"].join("");return["D:",m.getFullYear(),J(m.getMonth()+1),J(m.getDate()),J(m.getHours()),J(m.getMinutes()),J(m.getSeconds()),Pe].join("")},Ke=g.__private__.convertPDFDateToDate=function(m){var P=parseInt(m.substr(2,4),10),W=parseInt(m.substr(6,2),10)-1,ne=parseInt(m.substr(8,2),10),ue=parseInt(m.substr(10,2),10),Pe=parseInt(m.substr(12,2),10),Ue=parseInt(m.substr(14,2),10);return new Date(P,W,ne,ue,Pe,Ue,0)},Le=g.__private__.setCreationDate=function(m){var P;if(m===void 0&&(m=new Date),m instanceof Date)P=Me(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");P=m}return we=P},F=g.__private__.getCreationDate=function(m){var P=we;return m==="jsDate"&&(P=Ke(we)),P};g.setCreationDate=function(m){return Le(m),this},g.getCreationDate=function(m){return F(m)};var G,J=g.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},re=g.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},ae=0,fe=[],Ie=[],_e=0,Te=[],ze=[],Qe=!1,Je=Ie;g.__private__.setCustomOutputDestination=function(m){Qe=!0,Je=m};var lt=function(m){Qe||(Je=m)};g.__private__.resetCustomOutputDestination=function(){Qe=!1,Je=Ie};var q=g.__private__.out=function(m){return m=m.toString(),_e+=m.length+1,Je.push(m),Je},He=g.__private__.write=function(m){return q(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},Nt=g.__private__.getArrayBuffer=function(m){for(var P=m.length,W=new ArrayBuffer(P),ne=new Uint8Array(W);P--;)ne[P]=m.charCodeAt(P);return W},St=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return St};var je=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(m){return je=H===j?m/Qt:m,this};var pt,it=g.__private__.getFontSize=g.getFontSize=function(){return H===Q?je:je*Qt},Dt=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(m){return Dt=m,this},g.__private__.getR2L=g.getR2L=function(){return Dt};var It,yn=g.__private__.setZoomMode=function(m){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))pt=m;else if(isNaN(m)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');pt=m}else pt=parseInt(m,10)};g.__private__.getZoomMode=function(){return pt};var en,Ut=g.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');It=m};g.__private__.getPageMode=function(){return It};var Lt=g.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');en=m};g.__private__.getLayoutMode=function(){return en},g.__private__.setDisplayMode=g.setDisplayMode=function(m,P,W){return yn(m),Lt(P),Ut(W),this};var Vt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(m){if(Object.keys(Vt).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vt[m]},g.__private__.getDocumentProperties=function(){return Vt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(m){for(var P in Vt)Vt.hasOwnProperty(P)&&m[P]&&(Vt[P]=m[P]);return this},g.__private__.setDocumentProperty=function(m,P){if(Object.keys(Vt).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vt[m]=P};var ft,Qt,Et,Ar,vn,sn={},an={},Yn=[],Pt={},Zn={},Ot={},Yt={},rr=null,tn=0,Rt=[],In=new BB(g),bo=n.hotfixes||[],gi={},Ho={},hs=[],Mt=function m(P,W,ne,ue,Pe,Ue){if(!(this instanceof m))return new m(P,W,ne,ue,Pe,Ue);isNaN(P)&&(P=1),isNaN(W)&&(W=0),isNaN(ne)&&(ne=0),isNaN(ue)&&(ue=1),isNaN(Pe)&&(Pe=0),isNaN(Ue)&&(Ue=0),this._matrix=[P,W,ne,ue,Pe,Ue]};Object.defineProperty(Mt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Mt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Mt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Mt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Mt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Mt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Mt.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Mt.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Mt.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Mt.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Mt.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Mt.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Mt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Mt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Mt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Mt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Mt.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(m)},Mt.prototype.multiply=function(m){var P=m.sx*this.sx+m.shy*this.shx,W=m.sx*this.shy+m.shy*this.sy,ne=m.shx*this.sx+m.sy*this.shx,ue=m.shx*this.shy+m.sy*this.sy,Pe=m.tx*this.sx+m.ty*this.shx+this.tx,Ue=m.tx*this.shy+m.ty*this.sy+this.ty;return new Mt(P,W,ne,ue,Pe,Ue)},Mt.prototype.decompose=function(){var m=this.sx,P=this.shy,W=this.shx,ne=this.sy,ue=this.tx,Pe=this.ty,Ue=Math.sqrt(m*m+P*P),ct=(m/=Ue)*W+(P/=Ue)*ne;W-=m*ct,ne-=P*ct;var gt=Math.sqrt(W*W+ne*ne);return ct/=gt,m*(ne/=gt)<P*(W/=gt)&&(m=-m,P=-P,ct=-ct,Ue=-Ue),{scale:new Mt(Ue,0,0,gt,0,0),translate:new Mt(1,0,0,1,ue,Pe),rotate:new Mt(m,P,-P,m,0,0),skew:new Mt(1,0,ct,1,0,0)}},Mt.prototype.toString=function(m){return this.join(" ")},Mt.prototype.inversed=function(){var m=this.sx,P=this.shy,W=this.shx,ne=this.sy,ue=this.tx,Pe=this.ty,Ue=1/(m*ne-P*W),ct=ne*Ue,gt=-P*Ue,zt=-W*Ue,Wt=m*Ue;return new Mt(ct,gt,zt,Wt,-ct*ue-zt*Pe,-gt*ue-Wt*Pe)},Mt.prototype.applyToPoint=function(m){var P=m.x*this.sx+m.y*this.shx+this.tx,W=m.x*this.shy+m.y*this.sy+this.ty;return new Sa(P,W)},Mt.prototype.applyToRectangle=function(m){var P=this.applyToPoint(m),W=this.applyToPoint(new Sa(m.x+m.w,m.y+m.h));return new tu(P.x,P.y,W.x-P.x,W.y-P.y)},Mt.prototype.clone=function(){var m=this.sx,P=this.shy,W=this.shx,ne=this.sy,ue=this.tx,Pe=this.ty;return new Mt(m,P,W,ne,ue,Pe)},g.Matrix=Mt;var Ys=g.matrixMult=function(m,P){return P.multiply(m)},pr=new Mt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=pr;var xo=function(m,P){if(!Zn[m]){var W=(P instanceof uh?"Sh":"P")+(Object.keys(Pt).length+1).toString(10);P.id=W,Zn[m]=W,Pt[W]=P,In.publish("addPattern",P)}};g.ShadingPattern=uh,g.TilingPattern=em,g.addShadingPattern=function(m,P){return I("addShadingPattern()"),xo(m,P),this},g.beginTilingPattern=function(m){I("beginTilingPattern()"),nu(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},g.endTilingPattern=function(m,P){I("endTilingPattern()"),P.stream=ze[G].join(`
`),xo(m,P),In.publish("endTilingPattern",P),hs.pop().restore()};var Di,Qn=g.__private__.newObject=function(){var m=si();return mi(m,!0),m},si=g.__private__.newObjectDeferred=function(){return ae++,fe[ae]=function(){return _e},ae},mi=function(m,P){return P=typeof P=="boolean"&&P,fe[m]=_e,P&&q(m+" 0 obj"),m},Go=g.__private__.newAdditionalObject=function(){var m={objId:si(),content:""};return Te.push(m),m},cc=si(),ps=si(),Eo=g.__private__.decodeColorString=function(m){var P=m.split(" ");if(P.length!==2||P[1]!=="g"&&P[1]!=="G")P.length!==5||P[4]!=="k"&&P[4]!=="K"||(P=[(1-P[0])*(1-P[3]),(1-P[1])*(1-P[3]),(1-P[2])*(1-P[3]),"r"]);else{var W=parseFloat(P[0]);P=[W,W,W,"r"]}for(var ne="#",ue=0;ue<3;ue++)ne+=("0"+Math.floor(255*parseFloat(P[ue])).toString(16)).slice(-2);return ne},Wo=g.__private__.encodeColorString=function(m){var P;typeof m=="string"&&(m={ch1:m});var W=m.ch1,ne=m.ch2,ue=m.ch3,Pe=m.ch4,Ue=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof W=="string"&&W.charAt(0)!=="#"){var ct=new s9(W);if(ct.ok)W=ct.toHex();else if(!/^\d*\.?\d*$/.test(W))throw new Error('Invalid color "'+W+'" passed to jsPDF.encodeColorString.')}if(typeof W=="string"&&/^#[0-9A-Fa-f]{3}$/.test(W)&&(W="#"+W[1]+W[1]+W[2]+W[2]+W[3]+W[3]),typeof W=="string"&&/^#[0-9A-Fa-f]{6}$/.test(W)){var gt=parseInt(W.substr(1),16);W=gt>>16&255,ne=gt>>8&255,ue=255&gt}if(ne===void 0||Pe===void 0&&W===ne&&ne===ue)P=typeof W=="string"?W+" "+Ue[0]:m.precision===2?b(W/255)+" "+Ue[0]:S(W/255)+" "+Ue[0];else if(Pe===void 0||Un(Pe)==="object"){if(Pe&&!isNaN(Pe.a)&&Pe.a===0)return["1.","1.","1.",Ue[1]].join(" ");P=typeof W=="string"?[W,ne,ue,Ue[1]].join(" "):m.precision===2?[b(W/255),b(ne/255),b(ue/255),Ue[1]].join(" "):[S(W/255),S(ne/255),S(ue/255),Ue[1]].join(" ")}else P=typeof W=="string"?[W,ne,ue,Pe,Ue[2]].join(" "):m.precision===2?[b(W),b(ne),b(ue),b(Pe),Ue[2]].join(" "):[S(W),S(ne),S(ue),S(Pe),Ue[2]].join(" ");return P},Co=g.__private__.getFilters=function(){return s},Fi=g.__private__.putStream=function(m){var P=(m=m||{}).data||"",W=m.filters||Co(),ne=m.alreadyAppliedFilters||[],ue=m.addLength1||!1,Pe=P.length,Ue=m.objectId,ct=function(Lr){return Lr};if(u!==null&&Ue===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ct=$r.encryptor(Ue,0));var gt={};W===!0&&(W=["FlateEncode"]);var zt=m.additionalKeyValues||[],Wt=(gt=Ct.API.processDataByFilters!==void 0?Ct.API.processDataByFilters(P,W):{data:P,reverseChain:[]}).reverseChain+(Array.isArray(ne)?ne.join(" "):ne.toString());if(gt.data.length!==0&&(zt.push({key:"Length",value:gt.data.length}),ue===!0&&zt.push({key:"Length1",value:Pe})),Wt.length!=0)if(Wt.split("/").length-1==1)zt.push({key:"Filter",value:Wt});else{zt.push({key:"Filter",value:"["+Wt+"]"});for(var _n=0;_n<zt.length;_n+=1)if(zt[_n].key==="DecodeParms"){for(var lr=[],Jn=0;Jn<gt.reverseChain.split("/").length-1;Jn+=1)lr.push("null");lr.push(zt[_n].value),zt[_n].value="["+lr.join(" ")+"]"}}q("<<");for(var zn=0;zn<zt.length;zn++)q("/"+zt[zn].key+" "+zt[zn].value);q(">>"),gt.data.length!==0&&(q("stream"),q(ct(gt.data)),q("endstream"))},Qi=g.__private__.putPage=function(m){var P=m.number,W=m.data,ne=m.objId,ue=m.contentsObjId;mi(ne,!0),q("<</Type /Page"),q("/Parent "+m.rootDictionaryObjId+" 0 R"),q("/Resources "+m.resourceDictionaryObjId+" 0 R"),q("/MediaBox ["+parseFloat(T(m.mediaBox.bottomLeftX))+" "+parseFloat(T(m.mediaBox.bottomLeftY))+" "+T(m.mediaBox.topRightX)+" "+T(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&q("/CropBox ["+T(m.cropBox.bottomLeftX)+" "+T(m.cropBox.bottomLeftY)+" "+T(m.cropBox.topRightX)+" "+T(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&q("/BleedBox ["+T(m.bleedBox.bottomLeftX)+" "+T(m.bleedBox.bottomLeftY)+" "+T(m.bleedBox.topRightX)+" "+T(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&q("/TrimBox ["+T(m.trimBox.bottomLeftX)+" "+T(m.trimBox.bottomLeftY)+" "+T(m.trimBox.topRightX)+" "+T(m.trimBox.topRightY)+"]"),m.artBox!==null&&q("/ArtBox ["+T(m.artBox.bottomLeftX)+" "+T(m.artBox.bottomLeftY)+" "+T(m.artBox.topRightX)+" "+T(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&q("/UserUnit "+m.userUnit),In.publish("putPage",{objId:ne,pageContext:Rt[P],pageNumber:P,page:W}),q("/Contents "+ue+" 0 R"),q(">>"),q("endobj");var Pe=W.join(`
`);return H===j&&(Pe+=`
Q`),mi(ue,!0),Fi({data:Pe,filters:Co(),objectId:ue}),q("endobj"),ne},gs=g.__private__.putPages=function(){var m,P,W=[];for(m=1;m<=tn;m++)Rt[m].objId=si(),Rt[m].contentsObjId=si();for(m=1;m<=tn;m++)W.push(Qi({number:m,data:ze[m],objId:Rt[m].objId,contentsObjId:Rt[m].contentsObjId,mediaBox:Rt[m].mediaBox,cropBox:Rt[m].cropBox,bleedBox:Rt[m].bleedBox,trimBox:Rt[m].trimBox,artBox:Rt[m].artBox,userUnit:Rt[m].userUnit,rootDictionaryObjId:cc,resourceDictionaryObjId:ps}));mi(cc,!0),q("<</Type /Pages");var ne="/Kids [";for(P=0;P<tn;P++)ne+=W[P]+" 0 R ";q(ne+"]"),q("/Count "+tn),q(">>"),q("endobj"),In.publish("postPutPages")},lc=function(m){In.publish("putFont",{font:m,out:q,newObject:Qn,putStream:Fi}),m.isAlreadyPutted!==!0&&(m.objectNumber=Qn(),q("<<"),q("/Type /Font"),q("/BaseFont /"+Jg(m.postScriptName)),q("/Subtype /Type1"),typeof m.encoding=="string"&&q("/Encoding /"+m.encoding),q("/FirstChar 32"),q("/LastChar 255"),q(">>"),q("endobj"))},uc=function(m){m.objectNumber=Qn();var P=[];P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Form"}),P.push({key:"BBox",value:"["+[T(m.x),T(m.y),T(m.x+m.width),T(m.y+m.height)].join(" ")+"]"}),P.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var W=m.pages[1].join(`
`);Fi({data:W,additionalKeyValues:P,objectId:m.objectNumber}),q("endobj")},dc=function(m,P){P||(P=21);var W=Qn(),ne=(function(Ue,ct){var gt,zt=[],Wt=1/(ct-1);for(gt=0;gt<1;gt+=Wt)zt.push(gt);if(zt.push(1),Ue[0].offset!=0){var _n={offset:0,color:Ue[0].color};Ue.unshift(_n)}if(Ue[Ue.length-1].offset!=1){var lr={offset:1,color:Ue[Ue.length-1].color};Ue.push(lr)}for(var Jn="",zn=0,Lr=0;Lr<zt.length;Lr++){for(gt=zt[Lr];gt>Ue[zn+1].offset;)zn++;var Tr=Ue[zn].offset,ai=(gt-Tr)/(Ue[zn+1].offset-Tr),Zo=Ue[zn].color,gr=Ue[zn+1].color;Jn+=re(Math.round((1-ai)*Zo[0]+ai*gr[0]).toString(16))+re(Math.round((1-ai)*Zo[1]+ai*gr[1]).toString(16))+re(Math.round((1-ai)*Zo[2]+ai*gr[2]).toString(16))}return Jn.trim()})(m.colors,P),ue=[];ue.push({key:"FunctionType",value:"0"}),ue.push({key:"Domain",value:"[0.0 1.0]"}),ue.push({key:"Size",value:"["+P+"]"}),ue.push({key:"BitsPerSample",value:"8"}),ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fi({data:ne,additionalKeyValues:ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:W}),q("endobj"),m.objectNumber=Qn(),q("<< /ShadingType "+m.type),q("/ColorSpace /DeviceRGB");var Pe="/Coords ["+T(parseFloat(m.coords[0]))+" "+T(parseFloat(m.coords[1]))+" ";m.type===2?Pe+=T(parseFloat(m.coords[2]))+" "+T(parseFloat(m.coords[3])):Pe+=T(parseFloat(m.coords[2]))+" "+T(parseFloat(m.coords[3]))+" "+T(parseFloat(m.coords[4]))+" "+T(parseFloat(m.coords[5])),q(Pe+="]"),m.matrix&&q("/Matrix ["+m.matrix.toString()+"]"),q("/Function "+W+" 0 R"),q("/Extend [true true]"),q(">>"),q("endobj")},cl=function(m,P){var W=si(),ne=Qn();P.push({resourcesOid:W,objectOid:ne}),m.objectNumber=ne;var ue=[];ue.push({key:"Type",value:"/Pattern"}),ue.push({key:"PatternType",value:"1"}),ue.push({key:"PaintType",value:"1"}),ue.push({key:"TilingType",value:"1"}),ue.push({key:"BBox",value:"["+m.boundingBox.map(T).join(" ")+"]"}),ue.push({key:"XStep",value:T(m.xStep)}),ue.push({key:"YStep",value:T(m.yStep)}),ue.push({key:"Resources",value:W+" 0 R"}),m.matrix&&ue.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),Fi({data:m.stream,additionalKeyValues:ue,objectId:m.objectNumber}),q("endobj")},Ch=function(m){for(var P in m.objectNumber=Qn(),q("<<"),m)switch(P){case"opacity":q("/ca "+b(m[P]));break;case"stroke-opacity":q("/CA "+b(m[P]))}q(">>"),q("endobj")},Fd=function(m){mi(m.resourcesOid,!0),q("<<"),q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var P in q("/Font <<"),sn)sn.hasOwnProperty(P)&&(p===!1||p===!0&&v.hasOwnProperty(P))&&q("/"+P+" "+sn[P].objectNumber+" 0 R");q(">>")})(),(function(){if(Object.keys(Pt).length>0){for(var P in q("/Shading <<"),Pt)Pt.hasOwnProperty(P)&&Pt[P]instanceof uh&&Pt[P].objectNumber>=0&&q("/"+P+" "+Pt[P].objectNumber+" 0 R");In.publish("putShadingPatternDict"),q(">>")}})(),(function(P){if(Object.keys(Pt).length>0){for(var W in q("/Pattern <<"),Pt)Pt.hasOwnProperty(W)&&Pt[W]instanceof g.TilingPattern&&Pt[W].objectNumber>=0&&Pt[W].objectNumber<P&&q("/"+W+" "+Pt[W].objectNumber+" 0 R");In.publish("putTilingPatternDict"),q(">>")}})(m.objectOid),(function(){if(Object.keys(Ot).length>0){var P;for(P in q("/ExtGState <<"),Ot)Ot.hasOwnProperty(P)&&Ot[P].objectNumber>=0&&q("/"+P+" "+Ot[P].objectNumber+" 0 R");In.publish("putGStateDict"),q(">>")}})(),(function(){for(var P in q("/XObject <<"),gi)gi.hasOwnProperty(P)&&gi[P].objectNumber>=0&&q("/"+P+" "+gi[P].objectNumber+" 0 R");In.publish("putXobjectDict"),q(">>")})(),q(">>"),q("endobj")},ll=function(m){an[m.fontName]=an[m.fontName]||{},an[m.fontName][m.fontStyle]=m.id},Ld=function(m,P,W,ne,ue){var Pe={id:"F"+(Object.keys(sn).length+1).toString(10),postScriptName:m,fontName:P,fontStyle:W,encoding:ne,isStandardFont:ue||!1,metadata:{}};return In.publish("addFont",{font:Pe,instance:this}),sn[Pe.id]=Pe,ll(Pe),Pe.id},Xi=g.__private__.pdfEscape=g.pdfEscape=function(m,P){return(function(W,ne){var ue,Pe,Ue,ct,gt,zt,Wt,_n,lr;if(Ue=(ne=ne||{}).sourceEncoding||"Unicode",gt=ne.outputEncoding,(ne.autoencode||gt)&&sn[ft].metadata&&sn[ft].metadata[Ue]&&sn[ft].metadata[Ue].encoding&&(ct=sn[ft].metadata[Ue].encoding,!gt&&sn[ft].encoding&&(gt=sn[ft].encoding),!gt&&ct.codePages&&(gt=ct.codePages[0]),typeof gt=="string"&&(gt=ct[gt]),gt)){for(Wt=!1,zt=[],ue=0,Pe=W.length;ue<Pe;ue++)(_n=gt[W.charCodeAt(ue)])?zt.push(String.fromCharCode(_n)):zt.push(W[ue]),zt[ue].charCodeAt(0)>>8&&(Wt=!0);W=zt.join("")}for(ue=W.length;Wt===void 0&&ue!==0;)W.charCodeAt(ue-1)>>8&&(Wt=!0),ue--;if(!Wt)return W;for(zt=ne.noBOM?[]:[254,255],ue=0,Pe=W.length;ue<Pe;ue++){if((lr=(_n=W.charCodeAt(ue))>>8)>>8)throw new Error("Character at position "+ue+" of string '"+W+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zt.push(lr),zt.push(_n-(lr<<8))}return String.fromCharCode.apply(void 0,zt)})(m,P).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ca=g.__private__.beginPage=function(m){ze[++tn]=[],Rt[tn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},Ih(tn),lt(ze[G])},Zs=function(m,P){var W,ne,ue;switch(t=P||t,typeof m=="string"&&(W=N(m.toLowerCase()),Array.isArray(W)&&(ne=W[0],ue=W[1])),Array.isArray(m)&&(ne=m[0]*Qt,ue=m[1]*Qt),isNaN(ne)&&(ne=i[0],ue=i[1]),(ne>14400||ue>14400)&&(cr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ne=Math.min(14400,ne),ue=Math.min(14400,ue)),i=[ne,ue],t.substr(0,1)){case"l":ue>ne&&(i=[ue,ne]);break;case"p":ne>ue&&(i=[ue,ne])}Ca(i),qt(eu),q(Js),pl!==0&&q(pl+" J"),Xn!==0&&q(Xn+" j"),In.publish("addPage",{pageNumber:tn})},ul=function(m){m>0&&m<=tn&&(ze.splice(m,1),Rt.splice(m,1),tn--,G>tn&&(G=tn),this.setPage(G))},Ih=function(m){m>0&&m<=tn&&(G=m)},Vd=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return ze.length-1},jd=function(m,P,W){var ne,ue=void 0;return W=W||{},m=m!==void 0?m:sn[ft].fontName,P=P!==void 0?P:sn[ft].fontStyle,ne=m.toLowerCase(),an[ne]!==void 0&&an[ne][P]!==void 0?ue=an[ne][P]:an[m]!==void 0&&an[m][P]!==void 0?ue=an[m][P]:W.disableWarning===!1&&cr.warn("Unable to look up font label for font '"+m+"', '"+P+"'. Refer to getFontList() for available fonts."),ue||W.noFallback||(ue=an.times[P])==null&&(ue=an.times.normal),ue},ms=g.__private__.putInfo=function(){var m=Qn(),P=function(ne){return ne};for(var W in u!==null&&(P=$r.encryptor(m,0)),q("<<"),q("/Producer ("+Xi(P("jsPDF "+Ct.version))+")"),Vt)Vt.hasOwnProperty(W)&&Vt[W]&&q("/"+W.substr(0,1).toUpperCase()+W.substr(1)+" ("+Xi(P(Vt[W]))+")");q("/CreationDate ("+Xi(P(we))+")"),q(">>"),q("endobj")},fc=g.__private__.putCatalog=function(m){var P=(m=m||{}).rootDictionaryObjId||cc;switch(Qn(),q("<<"),q("/Type /Catalog"),q("/Pages "+P+" 0 R"),pt||(pt="fullwidth"),pt){case"fullwidth":q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":q("/OpenAction [3 0 R /Fit]");break;case"original":q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var W=""+pt;W.substr(W.length-1)==="%"&&(pt=parseInt(pt)/100),typeof pt=="number"&&q("/OpenAction [3 0 R /XYZ null null "+b(pt)+"]")}switch(en||(en="continuous"),en){case"continuous":q("/PageLayout /OneColumn");break;case"single":q("/PageLayout /SinglePage");break;case"two":case"twoleft":q("/PageLayout /TwoColumnLeft");break;case"tworight":q("/PageLayout /TwoColumnRight")}It&&q("/PageMode /"+It),In.publish("putCatalog"),q(">>"),q("endobj")},Bd=g.__private__.putTrailer=function(){q("trailer"),q("<<"),q("/Size "+(ae+1)),q("/Root "+ae+" 0 R"),q("/Info "+(ae-1)+" 0 R"),u!==null&&q("/Encrypt "+$r.oid+" 0 R"),q("/ID [ <"+De+"> <"+De+"> ]"),q(">>")},Dr=g.__private__.putHeader=function(){q("%PDF-"+E),q("%\xBA\xDF\xAC\xE0")},Ud=g.__private__.putXRef=function(){var m="0000000000";q("xref"),q("0 "+(ae+1)),q("0000000000 65535 f ");for(var P=1;P<=ae;P++)typeof fe[P]=="function"?q((m+fe[P]()).slice(-10)+" 00000 n "):fe[P]!==void 0?q((m+fe[P]).slice(-10)+" 00000 n "):q("0000000000 00000 n ")},Qs=g.__private__.buildDocument=function(){var m;ae=0,_e=0,Ie=[],fe=[],Te=[],cc=si(),ps=si(),lt(Ie),In.publish("buildDocument"),Dr(),gs(),(function(){In.publish("putAdditionalObjects");for(var W=0;W<Te.length;W++){var ne=Te[W];mi(ne.objId,!0),q(ne.content),q("endobj")}In.publish("postPutAdditionalObjects")})(),m=[],(function(){for(var W in sn)sn.hasOwnProperty(W)&&(p===!1||p===!0&&v.hasOwnProperty(W))&&lc(sn[W])})(),(function(){var W;for(W in Ot)Ot.hasOwnProperty(W)&&Ch(Ot[W])})(),(function(){for(var W in gi)gi.hasOwnProperty(W)&&uc(gi[W])})(),(function(W){var ne;for(ne in Pt)Pt.hasOwnProperty(ne)&&(Pt[ne]instanceof uh?dc(Pt[ne]):Pt[ne]instanceof em&&cl(Pt[ne],W))})(m),In.publish("putResources"),m.forEach(Fd),Fd({resourcesOid:ps,objectOid:Number.MAX_SAFE_INTEGER}),In.publish("postPutResources"),u!==null&&($r.oid=Qn(),q("<<"),q("/Filter /Standard"),q("/V "+$r.v),q("/R "+$r.r),q("/U <"+$r.toHexString($r.U)+">"),q("/O <"+$r.toHexString($r.O)+">"),q("/P "+$r.P),q(">>"),q("endobj")),ms(),fc();var P=_e;return Ud(),Bd(),q("startxref"),q(""+P),q("%%EOF"),lt(ze[G]),Ie.join(`
`)},Ql=g.__private__.getBlob=function(m){return new Blob([Nt(m)],{type:"application/pdf"})},zd=g.output=g.__private__.output=(Di=function(m,P){switch(typeof(P=P||{})=="string"?P={filename:P}:P.filename=P.filename||"generated.pdf",m){case void 0:return Qs();case"save":g.save(P.filename);break;case"arraybuffer":return Nt(Qs());case"blob":return Ql(Qs());case"bloburi":case"bloburl":if(Kt.URL!==void 0&&typeof Kt.URL.createObjectURL=="function")return Kt.URL&&Kt.URL.createObjectURL(Ql(Qs()))||void 0;cr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var W="",ne=Qs();try{W=LB(ne)}catch{W=LB(unescape(encodeURIComponent(ne)))}return"data:application/pdf;filename="+P.filename+";base64,"+W;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';P.pdfObjectUrl&&(ue=P.pdfObjectUrl,Pe="");var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ue+'"'+Pe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(P)+");<\/script></body></html>",ct=Kt.open();return ct!==null&&ct.document.write(Ue),ct}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(P.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+P.filename+'" width="500px" height="400px" /></body></html>',zt=Kt.open();if(zt!==null){zt.document.write(gt);var Wt=this;zt.document.documentElement.querySelector("#pdfViewer").onload=function(){zt.document.title=P.filename,zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wt.output("bloburl"))}}return zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _n='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",P)+'"></iframe></body></html>',lr=Kt.open();if(lr!==null&&(lr.document.write(_n),lr.document.title=P.filename),lr||typeof safari>"u")return lr;break;case"datauri":case"dataurl":return Kt.document.location.href=this.output("datauristring",P);default:return null}},Di.foo=function(){try{return Di.apply(this,arguments)}catch(W){var m=W.stack||"";~m.indexOf(" at ")&&(m=m.split(" at ")[1]);var P="Error in function "+m.split(`
`)[0].split("<")[0]+": "+W.message;if(!Kt.console)throw new Error(P);Kt.console.error(P,W),Kt.alert&&alert(P)}},Di.foo.bar=Di,Di.foo),Io=function(m){return Array.isArray(bo)===!0&&bo.indexOf(m)>-1};switch(r){case"pt":Qt=1;break;case"mm":Qt=72/25.4;break;case"cm":Qt=72/2.54;break;case"in":Qt=72;break;case"px":Qt=Io("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qt=12;break;case"ex":Qt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Qt=r}var $r=null;Le(),he();var Li=g.__private__.getPageInfo=g.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Rt[m].objId,pageNumber:m,pageContext:Rt[m]}},Ko=g.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var P in Rt)if(Rt[P].objId===m)break;return Li(P)},Xl=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Rt[G].objId,pageNumber:G,pageContext:Rt[G]}};g.addPage=function(){return Zs.apply(this,arguments),this},g.setPage=function(){return Ih.apply(this,arguments),lt.call(this,ze[G]),this},g.insertPage=function(m){return this.addPage(),this.movePage(G,m),this},g.movePage=function(m,P){var W,ne;if(m>P){W=ze[m],ne=Rt[m];for(var ue=m;ue>P;ue--)ze[ue]=ze[ue-1],Rt[ue]=Rt[ue-1];ze[P]=W,Rt[P]=ne,this.setPage(P)}else if(m<P){W=ze[m],ne=Rt[m];for(var Pe=m;Pe<P;Pe++)ze[Pe]=ze[Pe+1],Rt[Pe]=Rt[Pe+1];ze[P]=W,Rt[P]=ne,this.setPage(P)}return this},g.deletePage=function(){return ul.apply(this,arguments),this},g.__private__.text=g.text=function(m,P,W,ne,ue){var Pe,Ue,ct,gt,zt,Wt,_n,lr,Jn,zn=(ne=ne||{}).scope||this;if(typeof m=="number"&&typeof P=="number"&&(typeof W=="string"||Array.isArray(W))){var Lr=W;W=P,P=m,m=Lr}if(arguments[3]instanceof Mt==0?(ct=arguments[4],gt=arguments[5],Un(_n=arguments[3])==="object"&&_n!==null||(typeof ct=="string"&&(gt=ct,ct=null),typeof _n=="string"&&(gt=_n,_n=null),typeof _n=="number"&&(ct=_n,_n=null),ne={flags:_n,angle:ct,align:gt})):(I("The transform parameter of text() with a Matrix value"),Jn=ue),isNaN(P)||isNaN(W)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return zn;var Tr,ai="",Zo=typeof ne.lineHeightFactor=="number"?ne.lineHeightFactor:Ji,gr=zn.internal.scaleFactor;function ta(Vn){return Vn=Vn.split("	").join(Array(ne.TabLen||9).join(" ")),Xi(Vn,_n)}function iu(Vn){for(var ir,Hr=Vn.concat(),vi=[],_l=Hr.length;_l--;)typeof(ir=Hr.shift())=="string"?vi.push(ir):Array.isArray(Vn)&&(ir.length===1||ir[1]===void 0&&ir[2]===void 0)?vi.push(ir[0]):vi.push([ir[0],ir[1],ir[2]]);return vi}function ws(Vn,ir){var Hr;if(typeof Vn=="string")Hr=ir(Vn)[0];else if(Array.isArray(Vn)){for(var vi,_l,Mm=Vn.concat(),Ph=[],Jy=Mm.length;Jy--;)typeof(vi=Mm.shift())=="string"?Ph.push(ir(vi)[0]):Array.isArray(vi)&&typeof vi[0]=="string"&&(_l=ir(vi[0],vi[1],vi[2]),Ph.push([_l[0],_l[1],_l[2]]));Hr=Ph}return Hr}var f=!1,_=!0;if(typeof m=="string")f=!0;else if(Array.isArray(m)){var x=m.concat();Ue=[];for(var B,le=x.length;le--;)(typeof(B=x.shift())!="string"||Array.isArray(B)&&typeof B[0]!="string")&&(_=!1);f=_}if(f===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var be=je/zn.internal.scaleFactor,Ye=be*(Zo-1);switch(ne.baseline){case"bottom":W-=Ye;break;case"top":W+=be-Ye;break;case"hanging":W+=be-2*Ye;break;case"middle":W+=be/2-Ye}if((Wt=ne.maxWidth||0)>0&&(typeof m=="string"?m=zn.splitTextToSize(m,Wt):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(Vn,ir){return Vn.concat(zn.splitTextToSize(ir,Wt))},[]))),Pe={text:m,x:P,y:W,options:ne,mutex:{pdfEscape:Xi,activeFontKey:ft,fonts:sn,activeFontSize:je}},In.publish("preProcessText",Pe),m=Pe.text,ct=(ne=Pe.options).angle,Jn instanceof Mt==0&&ct&&typeof ct=="number"){ct*=Math.PI/180,ne.rotationDirection===0&&(ct=-ct),H===j&&(ct=-ct);var Dn=Math.cos(ct),Mr=Math.sin(ct);Jn=new Mt(Dn,Mr,-Mr,Dn,0,0)}else ct&&ct instanceof Mt&&(Jn=ct);H!==j||Jn||(Jn=pr),(zt=ne.charSpace||So)!==void 0&&(ai+=T(D(zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(lr=ne.horizontalScale)!==void 0&&(ai+=T(100*lr)+` Tz
`),ne.lang;var Ht=-1,ur=ne.renderingMode!==void 0?ne.renderingMode:ne.stroke,Nr=zn.internal.getCurrentPageInfo().pageContext;switch(ur){case 0:case!1:case"fill":Ht=0;break;case 1:case!0:case"stroke":Ht=1;break;case 2:case"fillThenStroke":Ht=2;break;case 3:case"invisible":Ht=3;break;case 4:case"fillAndAddForClipping":Ht=4;break;case 5:case"strokeAndAddPathForClipping":Ht=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ht=6;break;case 7:case"addToPathForClipping":Ht=7}var Ta=Nr.usedRenderingMode!==void 0?Nr.usedRenderingMode:-1;Ht!==-1?ai+=Ht+` Tr
`:Ta!==-1&&(ai+=`0 Tr
`),Ht!==-1&&(Nr.usedRenderingMode=Ht),gt=ne.align||"left";var wr,na=je*Zo,vl=zn.internal.pageSize.getWidth(),Cm=sn[ft];zt=ne.charSpace||So,Wt=ne.maxWidth||0,_n=Object.assign({autoencode:!0,noBOM:!0},ne.flags);var ou=[],Gd=function(Vn){return zn.getStringUnitWidth(Vn,{font:Cm,charSpace:zt,fontSize:je,doKerning:!1})*je/gr};if(Object.prototype.toString.call(m)==="[object Array]"){var bs;Ue=iu(m),gt!=="left"&&(wr=Ue.map(Gd));var xs,su=0;if(gt==="right"){P-=wr[0],m=[],le=Ue.length;for(var yl=0;yl<le;yl++)yl===0?(xs=Ia(P),bs=Ti(W)):(xs=D(su-wr[yl]),bs=-na),m.push([Ue[yl],xs,bs]),su=wr[yl]}else if(gt==="center"){P-=wr[0]/2,m=[],le=Ue.length;for(var au=0;au<le;au++)au===0?(xs=Ia(P),bs=Ti(W)):(xs=D((su-wr[au])/2),bs=-na),m.push([Ue[au],xs,bs]),su=wr[au]}else if(gt==="left"){m=[],le=Ue.length;for(var Im=0;Im<le;Im++)m.push(Ue[Im])}else if(gt==="justify"&&Cm.encoding==="Identity-H"){m=[],le=Ue.length,Wt=Wt!==0?Wt:vl;for(var Nh=0,qr=0;qr<le;qr++)if(bs=qr===0?Ti(W):-na,xs=qr===0?Ia(P):Nh,qr<le-1){var Xy=D((Wt-wr[qr])/(Ue[qr].split(" ").length-1)),mc=Ue[qr].split(" ");m.push([mc[0]+" ",xs,bs]),Nh=0;for(var vc=1;vc<mc.length;vc++){var Sm=(Gd(mc[vc-1]+" "+mc[vc])-Gd(mc[vc]))*gr+Xy;vc==mc.length-1?m.push([mc[vc],Sm,0]):m.push([mc[vc]+" ",Sm,0]),Nh-=Sm}}else m.push([Ue[qr],xs,bs]);m.push(["",Nh,0])}else{if(gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],le=Ue.length,Wt=Wt!==0?Wt:vl,qr=0;qr<le;qr++){bs=qr===0?Ti(W):-na,xs=qr===0?Ia(P):0;var Am=Ue[qr].split(" ").length-1,Dm=Am>0?(Wt-wr[qr])/Am:0;qr<le-1?ou.push(T(D(Dm))):ou.push(0),m.push([Ue[qr],xs,bs])}}}(typeof ne.R2L=="boolean"?ne.R2L:Dt)===!0&&(m=ws(m,function(Vn,ir,Hr){return[Vn.split("").reverse().join(""),ir,Hr]})),Pe={text:m,x:P,y:W,options:ne,mutex:{pdfEscape:Xi,activeFontKey:ft,fonts:sn,activeFontSize:je}},In.publish("postProcessText",Pe),m=Pe.text,Tr=Pe.mutex.isHex||!1;var Tm=sn[ft].encoding;Tm!=="WinAnsiEncoding"&&Tm!=="StandardEncoding"||(m=ws(m,function(Vn,ir,Hr){return[ta(Vn),ir,Hr]})),Ue=iu(m),m=[];for(var cu,lu,uu,Wd=Array.isArray(Ue[0])?1:0,du="",Kd=function(Vn,ir,Hr){var vi="";return Hr instanceof Mt?(Hr=typeof ne.angle=="number"?Ys(Hr,new Mt(1,0,0,1,Vn,ir)):Ys(new Mt(1,0,0,1,Vn,ir),Hr),H===j&&(Hr=Ys(new Mt(1,0,0,-1,0,0),Hr)),vi=Hr.join(" ")+` Tm
`):vi=T(Vn)+" "+T(ir)+` Td
`,vi},ra=0;ra<Ue.length;ra++){switch(du="",Wd){case 1:uu=(Tr?"<":"(")+Ue[ra][0]+(Tr?">":")"),cu=parseFloat(Ue[ra][1]),lu=parseFloat(Ue[ra][2]);break;case 0:uu=(Tr?"<":"(")+Ue[ra]+(Tr?">":")"),cu=Ia(P),lu=Ti(W)}ou!==void 0&&ou[ra]!==void 0&&(du=ou[ra]+` Tw
`),ra===0?m.push(du+Kd(cu,lu,Jn)+uu):Wd===0?m.push(du+uu):Wd===1&&m.push(du+Kd(cu,lu,Jn)+uu)}m=Wd===0?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var yc=`BT
/`;return yc+=ft+" "+je+` Tf
`,yc+=T(je*Zo)+` TL
`,yc+=gc+`
`,yc+=ai,yc+=m,q(yc+="ET"),v[ft]=!0,zn};var Jl=g.__private__.clip=g.clip=function(m){return q(m==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Jl("evenodd")},g.__private__.discardPath=g.discardPath=function(){return q("n"),this};var vs=g.__private__.isValidStyle=function(m){var P=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(P=!0),P};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(m){return vs(m)&&(l=m),this};var Ln=g.__private__.getStyle=g.getStyle=function(m){var P=l;switch(m){case"D":case"S":P="S";break;case"F":P="f";break;case"FD":case"DF":P="B";break;case"f":case"f*":case"B":case"B*":P=m}return P},dl=g.close=function(){return q("h"),this};g.stroke=function(){return q("S"),this},g.fill=function(m){return Xs("f",m),this},g.fillEvenOdd=function(m){return Xs("f*",m),this},g.fillStroke=function(m){return Xs("B",m),this},g.fillStrokeEvenOdd=function(m){return Xs("B*",m),this};var Xs=function(m,P){Un(P)==="object"?Sh(P,m):q(m)},ys=function(m){m===null||H===j&&m===void 0||(m=Ln(m),q(m))};function ym(m,P,W,ne,ue){var Pe=new em(P||this.boundingBox,W||this.xStep,ne||this.yStep,this.gState,ue||this.matrix);Pe.stream=this.stream;var Ue=m+"$$"+this.cloneIndex+++"$$";return xo(Ue,Pe),Pe}var Sh=function(m,P){var W=Zn[m.key],ne=Pt[W];if(ne instanceof uh)q("q"),q(_m(P)),ne.gState&&g.setGState(ne.gState),q(m.matrix.toString()+" cm"),q("/"+W+" sh"),q("Q");else if(ne instanceof em){var ue=new Mt(1,0,0,-1,0,Da());m.matrix&&(ue=ue.multiply(m.matrix||pr),W=ym.call(ne,m.key,m.boundingBox,m.xStep,m.yStep,ue).id),q("q"),q("/Pattern cs"),q("/"+W+" scn"),ne.gState&&g.setGState(ne.gState),q(P),q("Q")}},_m=function(m){switch(m){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},$d=g.moveTo=function(m,P){return q(T(D(m))+" "+T(te(P))+" m"),this},Ah=g.lineTo=function(m,P){return q(T(D(m))+" "+T(te(P))+" l"),this},_s=g.curveTo=function(m,P,W,ne,ue,Pe){return q([T(D(m)),T(te(P)),T(D(W)),T(te(ne)),T(D(ue)),T(te(Pe)),"c"].join(" ")),this};g.__private__.line=g.line=function(m,P,W,ne,ue){if(isNaN(m)||isNaN(P)||isNaN(W)||isNaN(ne)||!vs(ue))throw new Error("Invalid arguments passed to jsPDF.line");return H===Q?this.lines([[W-m,ne-P]],m,P,[1,1],ue||"S"):this.lines([[W-m,ne-P]],m,P,[1,1]).stroke()},g.__private__.lines=g.lines=function(m,P,W,ne,ue,Pe){var Ue,ct,gt,zt,Wt,_n,lr,Jn,zn,Lr,Tr,ai;if(typeof m=="number"&&(ai=W,W=P,P=m,m=ai),ne=ne||[1,1],Pe=Pe||!1,isNaN(P)||isNaN(W)||!Array.isArray(m)||!Array.isArray(ne)||!vs(ue)||typeof Pe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($d(P,W),Ue=ne[0],ct=ne[1],zt=m.length,Lr=P,Tr=W,gt=0;gt<zt;gt++)(Wt=m[gt]).length===2?(Lr=Wt[0]*Ue+Lr,Tr=Wt[1]*ct+Tr,Ah(Lr,Tr)):(_n=Wt[0]*Ue+Lr,lr=Wt[1]*ct+Tr,Jn=Wt[2]*Ue+Lr,zn=Wt[3]*ct+Tr,Lr=Wt[4]*Ue+Lr,Tr=Wt[5]*ct+Tr,_s(_n,lr,Jn,zn,Lr,Tr));return Pe&&dl(),ys(ue),this},g.path=function(m){for(var P=0;P<m.length;P++){var W=m[P],ne=W.c;switch(W.op){case"m":$d(ne[0],ne[1]);break;case"l":Ah(ne[0],ne[1]);break;case"c":_s.apply(this,ne);break;case"h":dl()}}return this},g.__private__.rect=g.rect=function(m,P,W,ne,ue){if(isNaN(m)||isNaN(P)||isNaN(W)||isNaN(ne)||!vs(ue))throw new Error("Invalid arguments passed to jsPDF.rect");return H===Q&&(ne=-ne),q([T(D(m)),T(te(P)),T(D(W)),T(D(ne)),"re"].join(" ")),ys(ue),this},g.__private__.triangle=g.triangle=function(m,P,W,ne,ue,Pe,Ue){if(isNaN(m)||isNaN(P)||isNaN(W)||isNaN(ne)||isNaN(ue)||isNaN(Pe)||!vs(Ue))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[W-m,ne-P],[ue-W,Pe-ne],[m-ue,P-Pe]],m,P,[1,1],Ue,!0),this},g.__private__.roundedRect=g.roundedRect=function(m,P,W,ne,ue,Pe,Ue){if(isNaN(m)||isNaN(P)||isNaN(W)||isNaN(ne)||isNaN(ue)||isNaN(Pe)||!vs(Ue))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ct=4/3*(Math.SQRT2-1);return ue=Math.min(ue,.5*W),Pe=Math.min(Pe,.5*ne),this.lines([[W-2*ue,0],[ue*ct,0,ue,Pe-Pe*ct,ue,Pe],[0,ne-2*Pe],[0,Pe*ct,-ue*ct,Pe,-ue,Pe],[2*ue-W,0],[-ue*ct,0,-ue,-Pe*ct,-ue,-Pe],[0,2*Pe-ne],[0,-Pe*ct,ue*ct,-Pe,ue,-Pe]],m+ue,P,[1,1],Ue,!0),this},g.__private__.ellipse=g.ellipse=function(m,P,W,ne,ue){if(isNaN(m)||isNaN(P)||isNaN(W)||isNaN(ne)||!vs(ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pe=4/3*(Math.SQRT2-1)*W,Ue=4/3*(Math.SQRT2-1)*ne;return $d(m+W,P),_s(m+W,P-Ue,m+Pe,P-ne,m,P-ne),_s(m-Pe,P-ne,m-W,P-Ue,m-W,P),_s(m-W,P+Ue,m-Pe,P+ne,m,P+ne),_s(m+Pe,P+ne,m+W,P+Ue,m+W,P),ys(ue),this},g.__private__.circle=g.circle=function(m,P,W,ne){if(isNaN(m)||isNaN(P)||isNaN(W)||!vs(ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,P,W,W,ne)},g.setFont=function(m,P,W){return W&&(P=z(P,W)),ft=jd(m,P,{disableWarning:!1}),this};var fl=g.__private__.getFont=g.getFont=function(){return sn[jd.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var m,P,W={};for(m in an)if(an.hasOwnProperty(m))for(P in W[m]=[],an[m])an[m].hasOwnProperty(P)&&W[m].push(P);return W},g.addFont=function(m,P,W,ne,ue){var Pe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pe.indexOf(arguments[3])!==-1?ue=arguments[3]:arguments[3]&&Pe.indexOf(arguments[3])==-1&&(W=z(W,ne)),Ld.call(this,m,P,W,ue=ue||"Identity-H")};var Ji,eu=n.lineWidth||.200025,Dh=g.__private__.getLineWidth=g.getLineWidth=function(){return eu},qt=g.__private__.setLineWidth=g.setLineWidth=function(m){return eu=m,q(T(D(m))+" w"),this};g.__private__.setLineDash=Ct.API.setLineDash=Ct.API.setLineDashPattern=function(m,P){if(m=m||[],P=P||0,isNaN(P)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(W){return T(D(W))}).join(" "),P=T(D(P)),q("["+m+"] "+P+" d"),this};var hc=g.__private__.getLineHeight=g.getLineHeight=function(){return je*Ji};g.__private__.getLineHeight=g.getLineHeight=function(){return je*Ji};var wm=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(Ji=m),this},bm=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Ji};wm(n.lineHeight);var Ia=g.__private__.getHorizontalCoordinate=function(m){return D(m)},Ti=g.__private__.getVerticalCoordinate=function(m){return H===j?m:Rt[G].mediaBox.topRightY-Rt[G].mediaBox.bottomLeftY-D(m)},xm=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(m){return T(Ia(m))},Em=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(m){return T(Ti(m))},Js=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Eo(Js)},g.__private__.setStrokeColor=g.setDrawColor=function(m,P,W,ne){return Js=Wo({ch1:m,ch2:P,ch3:W,ch4:ne,pdfColorType:"draw",precision:2}),q(Js),this};var pc=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Eo(pc)},g.__private__.setFillColor=g.setFillColor=function(m,P,W,ne){return pc=Wo({ch1:m,ch2:P,ch3:W,ch4:ne,pdfColorType:"fill",precision:2}),q(pc),this};var gc=n.textColor||"0 g",hl=g.__private__.getTextColor=g.getTextColor=function(){return Eo(gc)};g.__private__.setTextColor=g.setTextColor=function(m,P,W,ne){return gc=Wo({ch1:m,ch2:P,ch3:W,ch4:ne,pdfColorType:"text",precision:3}),this};var So=n.charSpace,Th=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(So||0)};g.__private__.setCharSpace=g.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return So=m,this};var pl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(m){var P=g.CapJoinStyles[m];if(P===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pl=P,q(P+" J"),this};var Xn=0;g.__private__.setLineJoin=g.setLineJoin=function(m){var P=g.CapJoinStyles[m];if(P===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xn=P,q(P+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return q(T(D(m))+" M"),this},g.GState=zx,g.setGState=function(m){(m=typeof m=="string"?Ot[Yt[m]]:Mh(null,m)).equals(rr)||(q("/"+m.id+" gs"),rr=m)};var Mh=function(m,P){if(!m||!Yt[m]){var W=!1;for(var ne in Ot)if(Ot.hasOwnProperty(ne)&&Ot[ne].equals(P)){W=!0;break}if(W)P=Ot[ne];else{var ue="GS"+(Object.keys(Ot).length+1).toString(10);Ot[ue]=P,P.id=ue}return m&&(Yt[m]=P.id),In.publish("addGState",P),P}};g.addGState=function(m,P){return Mh(m,P),this},g.saveGraphicsState=function(){return q("q"),Yn.push({key:ft,size:je,color:gc}),this},g.restoreGraphicsState=function(){q("Q");var m=Yn.pop();return ft=m.key,je=m.size,gc=m.color,rr=null,this},g.setCurrentTransformationMatrix=function(m){return q(m.toString()+" cm"),this},g.comment=function(m){return q("#"+m),this};var Sa=function(m,P){var W=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return W},set:function(Pe){isNaN(Pe)||(W=parseFloat(Pe))}});var ne=P||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ne},set:function(Pe){isNaN(Pe)||(ne=parseFloat(Pe))}});var ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ue},set:function(Pe){ue=Pe.toString()}}),this},tu=function(m,P,W,ne){Sa.call(this,m,P),this.type="rect";var ue=W||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ue},set:function(Ue){isNaN(Ue)||(ue=parseFloat(Ue))}});var Pe=ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pe},set:function(Ue){isNaN(Ue)||(Pe=parseFloat(Ue))}}),this},gl=function(){this.page=tn,this.currentPage=G,this.pages=ze.slice(0),this.pagesContext=Rt.slice(0),this.x=Et,this.y=Ar,this.matrix=vn,this.width=ru(G),this.height=qd(G),this.outputDestination=Je,this.id="",this.objectNumber=-1};gl.prototype.restore=function(){tn=this.page,G=this.currentPage,Rt=this.pagesContext,ze=this.pages,Et=this.x,Ar=this.y,vn=this.matrix,Yo(G,this.width),Aa(G,this.height),Je=this.outputDestination};var nu=function(m,P,W,ne,ue){hs.push(new gl),tn=G=0,ze=[],Et=m,Ar=P,vn=ue,Ca([W,ne])};for(var ea in g.beginFormObject=function(m,P,W,ne,ue){return nu(m,P,W,ne,ue),this},g.endFormObject=function(m){return(function(P){if(Ho[P])hs.pop().restore();else{var W=new gl,ne="Xo"+(Object.keys(gi).length+1).toString(10);W.id=ne,Ho[P]=ne,gi[ne]=W,In.publish("addFormObject",W),hs.pop().restore()}})(m),this},g.doFormObject=function(m,P){var W=gi[Ho[m]];return q("q"),q(P.toString()+" cm"),q("/"+W.id+" Do"),q("Q"),this},g.getFormObject=function(m){var P=gi[Ho[m]];return{x:P.x,y:P.y,width:P.width,height:P.height,matrix:P.matrix}},g.save=function(m,P){return m=m||"generated.pdf",(P=P||{}).returnPromise=P.returnPromise||!1,P.returnPromise===!1?(lh(Ql(Qs()),m),typeof lh.unload=="function"&&Kt.setTimeout&&setTimeout(lh.unload,911),this):new Promise(function(W,ne){try{var ue=lh(Ql(Qs()),m);typeof lh.unload=="function"&&Kt.setTimeout&&setTimeout(lh.unload,911),W(ue)}catch(Pe){ne(Pe.message)}})},Ct.API)Ct.API.hasOwnProperty(ea)&&(ea==="events"&&Ct.API.events.length?(function(m,P){var W,ne,ue;for(ue=P.length-1;ue!==-1;ue--)W=P[ue][0],ne=P[ue][1],m.subscribe.apply(m,[W].concat(typeof ne=="function"?[ne]:ne))})(In,Ct.API.events):g[ea]=Ct.API[ea]);function ru(m){return Rt[m].mediaBox.topRightX-Rt[m].mediaBox.bottomLeftX}function Yo(m,P){Rt[m].mediaBox.topRightX=P+Rt[m].mediaBox.bottomLeftX}function qd(m){return Rt[m].mediaBox.topRightY-Rt[m].mediaBox.bottomLeftY}function Aa(m,P){Rt[m].mediaBox.topRightY=P+Rt[m].mediaBox.bottomLeftY}var Ao=g.getPageWidth=function(m){return ru(m=m||G)/Qt},Hd=g.setPageWidth=function(m,P){Yo(m,P*Qt)},Da=g.getPageHeight=function(m){return qd(m=m||G)/Qt},ml=g.setPageHeight=function(m,P){Aa(m,P*Qt)};return g.internal={pdfEscape:Xi,getStyle:Ln,getFont:fl,getFontSize:it,getCharSpace:Th,getTextColor:hl,getLineHeight:hc,getLineHeightFactor:bm,getLineWidth:Dh,write:He,getHorizontalCoordinate:Ia,getVerticalCoordinate:Ti,getCoordinateString:xm,getVerticalCoordinateString:Em,collections:{},newObject:Qn,newAdditionalObject:Go,newObjectDeferred:si,newObjectDeferredBegin:mi,getFilters:Co,putStream:Fi,events:In,scaleFactor:Qt,pageSize:{getWidth:function(){return Ao(G)},setWidth:function(m){Hd(G,m)},getHeight:function(){return Da(G)},setHeight:function(m){ml(G,m)}},encryptionOptions:u,encryption:$r,getEncryptor:function(m){return u!==null?$r.encryptor(m,0):function(P){return P}},output:zd,getNumberOfPages:Vd,get pages(){return ze},out:q,f2:b,f3:S,getPageInfo:Li,getPageInfoByObjId:Ko,getCurrentPageInfo:Xl,getPDFVersion:C,Point:Sa,Rectangle:tu,Matrix:Mt,hasHotfix:Io},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Ao(G)},set:function(m){Hd(G,m)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Da(G)},set:function(m){ml(G,m)},enumerable:!0,configurable:!0}),(function(m){for(var P=0,W=St.length;P<W;P++){var ne=Ld.call(this,m[P][0],m[P][1],m[P][2],St[P][3],!0);p===!1&&(v[ne]=!0);var ue=m[P][0].split("-");ll({id:ne,fontName:ue[0],fontStyle:ue[1]||""})}In.publish("addFonts",{fonts:sn,dictionary:an})}).call(g,St),ft="F1",Zs(i,t),In.publish("initialized"),g}Xg.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Xg.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Xg.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Xg.prototype.processOwnerPassword=function(n,e){return BN(jN(e).substr(0,5),n)},Xg.prototype.encryptor=function(n,e){var t=jN(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return BN(t,r)}},zx.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Un(n)!==Un(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Ct.API={events:[]},Ct.version="3.0.4";var zr=Ct.API,$N=1,fh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zg=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rn=function(n){return n.toFixed(2)},Md=function(n){return n.toFixed(5)};zr.__acroform__={};var ds=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},UB=function(n){return n*$N},nl=function(n){var e=new u9,t=ht.internal.getHeight(n)||0,r=ht.internal.getWidth(n)||0;return e.BBox=[0,0,Number(rn(r)),Number(rn(t))],e},Ioe=zr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},Soe=zr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},Aoe=zr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ri=zr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Aoe(n,e-1)},ii=zr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Ioe(n,e-1)},oi=zr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Soe(n,e-1)},Doe=zr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(o+a)||0,c.upperRight_X=t(i+s)||0,c.upperRight_Y=r(o)||0,[Number(rn(c.lowerLeft_X)),Number(rn(c.lowerLeft_Y)),Number(rn(c.upperRight_X)),Number(rn(c.upperRight_Y))]},Toe=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=UN(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+rn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=nl(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},UN=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(b){return b.split(`
`)}):i.map(function(b){return[b]});var o=t,s=ht.internal.getHeight(n)||0;s=s<0?-s:s;var a=ht.internal.getWidth(n)||0;a=a<0?-a:a;var c=function(b,S,D){if(b+1<i.length){var te=S+" "+i[b+1][0];return Rx(te,n,D).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var l,u,p=Rx("3",n,o).height,v=n.multiline?s-o:(s-p)/2,g=v+=2,E=0,C=0,M=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Rx(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var N="",Q=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var H=!1;if(i[j].length!==1&&M!==i[j].length-1){if((p+2)*(Q+2)+2>s)continue e;N+=i[j][M],H=!0,C=j,j--}else{N=(N+=i[j][M]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var oe=parseInt(j),pe=c(oe,N,o),z=j>=i.length-1;if(pe&&!z){N+=" ",M=0;continue}if(pe||z){if(z)C=oe;else if(n.multiline&&(p+2)*(Q+2)+2>s)continue e}else{if(!n.multiline||(p+2)*(Q+2)+2>s)continue e;C=oe}}for(var T="",I=E;I<=C;I++){var V=i[I];if(n.multiline){if(I===C){T+=V[M]+" ",M=(M+1)%V.length;continue}if(I===E){T+=V[V.length-1]+" ";continue}}T+=V[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,u=Rx(T,n,o).width,n.textAlign){case"right":l=a-u-2;break;case"center":l=(a-u)/2;break;default:l=2}e+=rn(l)+" "+rn(g)+` Td
`,e+="("+fh(T)+`) Tj
`,e+=-rn(l)+` 0 Td
`,g=-(o+2),u=0,E=H?C:C+1,Q++,N=""}break}return r.text=e,r.fontSize=o,r},Rx=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},Moe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Noe=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Poe=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(oc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Moe)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");$N=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new d9,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Noe(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],c=[],l=a.Rect;if(a.Rect&&(a.Rect=Doe(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ht.createDefaultAppearanceStream(a),Un(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=l,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=Toe(a);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var g=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var s in g)if(g.hasOwnProperty(s)){var E=g[s];typeof E=="function"&&(E=E.call(i,a)),p+="/"+s+" "+E+" ",i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E)}}else typeof(E=g)=="function"&&(E=E.call(i,a)),p+="/"+s+" "+E,i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}o&&(function(C,M){for(var N in C)if(C.hasOwnProperty(N)){var Q=N,j=C[N];M.internal.newObjectDeferredBegin(j.objId,!0),Un(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete C[Q]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},l9=zr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Un(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+fh(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},RN=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+fh(r(n))+")"},rl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};rl.prototype.toString=function(){return this.objId+" 0 R"},rl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},rl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:l9(i,this.objId,this.scope)}):i instanceof rl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var u9=function(){rl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ds(u9,rl);var d9=function(){rl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+fh(t(n))+")"}},set:function(t){n=t}})};ds(d9,rl);var oc=function n(){rl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ri(e,3)},set:function(N){N?this.F=ii(e,3):this.F=oi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');t=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof $x)return;o="FieldObject"+n.FieldNum++}var N=function(Q){return Q};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+fh(N(o))+")"},set:function(N){o=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(N){o=N}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(N){s=N}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(N){a=N}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/$N:l},set:function(N){l=N}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(N){u=N}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof $x||this instanceof dh))return RN(p,this.objId,this.scope)},set:function(N){N=N.toString(),p=N}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Oi==0?RN(v,this.objId,this.scope):v},set:function(N){N=N.toString(),v=this instanceof Oi==0?N.substr(0,1)==="("?Zg(N.substr(1,N.length-2)):Zg(N):N}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oi==1?Zg(v.substr(1,v.length-1)):v},set:function(N){N=N.toString(),v=this instanceof Oi==1?"/"+N:N}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Oi==0?RN(g,this.objId,this.scope):g},set:function(N){N=N.toString(),g=this instanceof Oi==0?N.substr(0,1)==="("?Zg(N.substr(1,N.length-2)):Zg(N):N}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oi==1?Zg(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof Oi==1?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(N){N=!!N,C=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(N){E=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,1)},set:function(N){N?this.Ff=ii(this.Ff,1):this.Ff=oi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,2)},set:function(N){N?this.Ff=ii(this.Ff,2):this.Ff=oi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,3)},set:function(N){N?this.Ff=ii(this.Ff,3):this.Ff=oi(this.Ff,3)}});var M=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(M!==null)return M},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');M=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(M){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:M=2;break;case"center":case 1:M=1;break;default:M=0}}})};ds(oc,rl);var tm=function(){oc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return l9(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,s,a){a||(a=1);for(var c,l=[];c=s.exec(o);)l.push(c[a]);return l})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,18)},set:function(t){t?this.Ff=ii(this.Ff,18):this.Ff=oi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ii(this.Ff,19):this.Ff=oi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,20)},set:function(t){t?(this.Ff=ii(this.Ff,20),e.sort()):this.Ff=oi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,22)},set:function(t){t?this.Ff=ii(this.Ff,22):this.Ff=oi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,23)},set:function(t){t?this.Ff=ii(this.Ff,23):this.Ff=oi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,27)},set:function(t){t?this.Ff=ii(this.Ff,27):this.Ff=oi(this.Ff,27)}}),this.hasAppearanceStream=!1};ds(tm,oc);var nm=function(){tm.call(this),this.fontName="helvetica",this.combo=!1};ds(nm,tm);var rm=function(){nm.call(this),this.combo=!0};ds(rm,nm);var Vx=function(){rm.call(this),this.edit=!0};ds(Vx,rm);var Oi=function(){oc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,15)},set:function(t){t?this.Ff=ii(this.Ff,15):this.Ff=oi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,16)},set:function(t){t?this.Ff=ii(this.Ff,16):this.Ff=oi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,17)},set:function(t){t?this.Ff=ii(this.Ff,17):this.Ff=oi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,26)},set:function(t){t?this.Ff=ii(this.Ff,26):this.Ff=oi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+fh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Un(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ds(Oi,oc);var jx=function(){Oi.call(this),this.pushButton=!0};ds(jx,Oi);var im=function(){Oi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ds(im,Oi);var $x=function(){var n,e;oc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+fh(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Un(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ht.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ds($x,oc),im.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},im.prototype.createOption=function(n){var e=new $x;return e.Parent=this,e.optionName=n,this.Kids.push(e),koe.call(this.scope,e),e};var Bx=function(){Oi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ht.CheckBox.createAppearanceStream()};ds(Bx,Oi);var dh=function(){oc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,13)},set:function(e){e?this.Ff=ii(this.Ff,13):this.Ff=oi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,21)},set:function(e){e?this.Ff=ii(this.Ff,21):this.Ff=oi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,23)},set:function(e){e?this.Ff=ii(this.Ff,23):this.Ff=oi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,24)},set:function(e){e?this.Ff=ii(this.Ff,24):this.Ff=oi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,25)},set:function(e){e?this.Ff=ii(this.Ff,25):this.Ff=oi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,26)},set:function(e){e?this.Ff=ii(this.Ff,26):this.Ff=oi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ds(dh,oc);var Ux=function(){dh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,14)},set:function(n){n?this.Ff=ii(this.Ff,14):this.Ff=oi(this.Ff,14)}}),this.password=!0};ds(Ux,dh);var ht={CheckBox:{createAppearanceStream:function(){return{N:{On:ht.CheckBox.YesNormal},D:{On:ht.CheckBox.YesPushDown,Off:ht.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=nl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=UN(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+rn(ht.internal.getWidth(n))+" "+rn(ht.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+rn(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=nl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=ht.internal.getHeight(n),s=ht.internal.getWidth(n),a=UN(n,n.caption);return i.push("1 g"),i.push("0 0 "+rn(s)+" "+rn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+rn(s-1)+" "+rn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+rn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=nl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(ht.internal.getWidth(n))+" "+rn(ht.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:ht.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=ht.RadioButton.Circle.YesNormal,e.D[n]=ht.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=nl(n);e.scope=n.scope;var t=[],r=ht.internal.getWidth(n)<=ht.internal.getHeight(n)?ht.internal.getWidth(n)/4:ht.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=ht.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Md(ht.internal.getWidth(n)/2)+" "+Md(ht.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=nl(n);e.scope=n.scope;var t=[],r=ht.internal.getWidth(n)<=ht.internal.getHeight(n)?ht.internal.getWidth(n)/4:ht.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*ht.internal.Bezier_C).toFixed(5)),s=Number((r*ht.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Md(ht.internal.getWidth(n)/2)+" "+Md(ht.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Md(ht.internal.getWidth(n)/2)+" "+Md(ht.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=nl(n);e.scope=n.scope;var t=[],r=ht.internal.getWidth(n)<=ht.internal.getHeight(n)?ht.internal.getWidth(n)/4:ht.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*ht.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Md(ht.internal.getWidth(n)/2)+" "+Md(ht.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:ht.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=ht.RadioButton.Cross.YesNormal,e.D[n]=ht.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=nl(n);e.scope=n.scope;var t=[],r=ht.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+rn(ht.internal.getWidth(n)-2)+" "+rn(ht.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(rn(r.x1.x)+" "+rn(r.x1.y)+" m"),t.push(rn(r.x2.x)+" "+rn(r.x2.y)+" l"),t.push(rn(r.x4.x)+" "+rn(r.x4.y)+" m"),t.push(rn(r.x3.x)+" "+rn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=nl(n);e.scope=n.scope;var t=ht.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+rn(ht.internal.getWidth(n))+" "+rn(ht.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+rn(ht.internal.getWidth(n)-2)+" "+rn(ht.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(rn(t.x1.x)+" "+rn(t.x1.y)+" m"),r.push(rn(t.x2.x)+" "+rn(t.x2.y)+" l"),r.push(rn(t.x4.x)+" "+rn(t.x4.y)+" m"),r.push(rn(t.x3.x)+" "+rn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=nl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(ht.internal.getWidth(n))+" "+rn(ht.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};ht.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=ht.internal.getWidth(n),t=ht.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},ht.internal.getWidth=function(n){var e=0;return Un(n)==="object"&&(e=UB(n.Rect[2])),e},ht.internal.getHeight=function(n){var e=0;return Un(n)==="object"&&(e=UB(n.Rect[3])),e};var koe=zr.addField=function(n){if(Poe(this,n),!(n instanceof oc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};zr.AcroFormChoiceField=tm,zr.AcroFormListBox=nm,zr.AcroFormComboBox=rm,zr.AcroFormEditBox=Vx,zr.AcroFormButton=Oi,zr.AcroFormPushButton=jx,zr.AcroFormRadioButton=im,zr.AcroFormCheckBox=Bx,zr.AcroFormTextField=dh,zr.AcroFormPasswordField=Ux,zr.AcroFormAppearance=ht,zr.AcroForm={ChoiceField:tm,ListBox:nm,ComboBox:rm,EditBox:Vx,Button:Oi,PushButton:jx,RadioButton:im,CheckBox:Bx,TextField:dh,PasswordField:Ux,Appearance:ht},Ct.AcroForm={ChoiceField:tm,ListBox:nm,ComboBox:rm,EditBox:Vx,Button:Oi,PushButton:jx,RadioButton:im,CheckBox:Bx,TextField:dh,PasswordField:Ux,Appearance:ht};var bTe=Ct.AcroForm;function f9(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(b,S){var D,te,we,De,Se,he=t;if((S=S||t)==="RGBA"||b.data!==void 0&&b.data instanceof Uint8ClampedArray&&"height"in b&&"width"in b)return"RGBA";if(pe(b))for(Se in r)for(we=r[Se],D=0;D<we.length;D+=1){for(De=!0,te=0;te<we[D].length;te+=1)if(we[D][te]!==void 0&&we[D][te]!==b[te]){De=!1;break}if(De===!0){he=Se;break}}else for(Se in r)for(we=r[Se],D=0;D<we.length;D+=1){for(De=!0,te=0;te<we[D].length;te+=1)if(we[D][te]!==void 0&&we[D][te]!==b.charCodeAt(te)){De=!1;break}if(De===!0){he=Se;break}}return he===t&&S!==t&&(he=S),he},o=function b(S){for(var D=this.internal.write,te=this.internal.putStream,we=(0,this.internal.getFilters)();we.indexOf("FlateEncode")!==-1;)we.splice(we.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var De=[];if(De.push({key:"Type",value:"/XObject"}),De.push({key:"Subtype",value:"/Image"}),De.push({key:"Width",value:S.width}),De.push({key:"Height",value:S.height}),S.colorSpace===N.INDEXED?De.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(De.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===N.DEVICE_CMYK&&De.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),De.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&De.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)&&S.transparency.length>0){for(var Se="",he=0,Me=S.transparency.length;he<Me;he++)Se+=S.transparency[he]+" "+S.transparency[he]+" ";De.push({key:"Mask",value:"["+Se+"]"})}S.sMask!==void 0&&De.push({key:"SMask",value:S.objectId+1+" 0 R"});var Ke=S.filter!==void 0?["/"+S.filter]:void 0;if(te({data:S.data,additionalKeyValues:De,alreadyAppliedFilters:Ke,objectId:S.objectId}),D("endobj"),"sMask"in S&&S.sMask!==void 0){var Le,F=(Le=S.sMaskBitsPerComponent)!==null&&Le!==void 0?Le:S.bitsPerComponent,G={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:S.sMask};"filter"in S&&(G.decodeParameters="/Predictor ".concat(S.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(S.width),G.filter=S.filter),b.call(this,G)}if(S.colorSpace===N.INDEXED){var J=this.internal.newObject();te({data:T(new Uint8Array(S.palette)),objectId:J}),D("endobj")}},s=function(){var b=this.internal.collections[e+"images"];for(var S in b)o.call(this,b[S])},a=function(){var b,S=this.internal.collections[e+"images"],D=this.internal.write;for(var te in S)D("/I"+(b=S[te]).index,b.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var b=this.internal.collections[e+"images"];return c.call(this),b},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(b){return typeof n["process"+b.toUpperCase()]=="function"},v=function(b){return Un(b)==="object"&&b.nodeType===1},g=function(b,S){if(b.nodeName==="IMG"&&b.hasAttribute("src")){var D=""+b.getAttribute("src");if(D.indexOf("data:image/")===0)return Lx(unescape(D).split("base64,").pop());var te=n.loadFile(D,!0);if(te!==void 0)return te}if(b.nodeName==="CANVAS"){if(b.width===0||b.height===0)throw new Error("Given canvas must have data. Canvas width: "+b.width+", height: "+b.height);var we;switch(S){case"PNG":we="image/png";break;case"WEBP":we="image/webp";break;default:we="image/jpeg"}return Lx(b.toDataURL(we,1).split("base64,").pop())}},E=function(b){var S=this.internal.collections[e+"images"];if(S){for(var D in S)if(b===S[D].alias)return S[D]}},C=function(b,S,D){return b||S||(b=-96,S=-96),b<0&&(b=-1*D.width*72/b/this.internal.scaleFactor),S<0&&(S=-1*D.height*72/S/this.internal.scaleFactor),b===0&&(b=S*D.width/D.height),S===0&&(S=b*D.height/D.width),[b,S]},M=function(b,S,D,te,we,De){var Se=C.call(this,D,te,we),he=this.internal.getCoordinateString,Me=this.internal.getVerticalCoordinateString,Ke=l.call(this);if(D=Se[0],te=Se[1],Ke[we.index]=we,De){De*=Math.PI/180;var Le=Math.cos(De),F=Math.sin(De),G=function(re){return re.toFixed(4)},J=[G(Le),G(F),G(-1*F),G(Le),0,0,"cm"]}this.internal.write("q"),De?(this.internal.write([1,"0","0",1,he(b),Me(S+te),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([he(D),"0","0",he(te),"0","0","cm"].join(" "))):this.internal.write([he(D),"0","0",he(te),he(b),Me(S+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+we.index+" Do"),this.internal.write("Q")},N=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Q=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=n.__addimage__.sHashCode=function(b){var S,D,te=0;if(typeof b=="string")for(D=b.length,S=0;S<D;S++)te=(te<<5)-te+b.charCodeAt(S),te|=0;else if(pe(b))for(D=b.byteLength/2,S=0;S<D;S++)te=(te<<5)-te+b[S],te|=0;return te},H=n.__addimage__.validateStringAsBase64=function(b){(b=b||"").toString().trim();var S=!0;return b.length===0&&(S=!1),b.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(b.substr(0,b.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(b.substr(-2))===!1&&(S=!1),S},oe=n.__addimage__.extractImageFromDataUrl=function(b){if(b==null||!(b=b.trim()).startsWith("data:"))return null;var S=b.indexOf(",");return S<0?null:b.substring(0,S).trim().endsWith("base64")?b.substring(S+1):null};n.__addimage__.isArrayBuffer=function(b){return b instanceof ArrayBuffer};var pe=n.__addimage__.isArrayBufferView=function(b){return b instanceof Int8Array||b instanceof Uint8Array||b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array},z=n.__addimage__.binaryStringToUint8Array=function(b){for(var S=b.length,D=new Uint8Array(S),te=0;te<S;te++)D[te]=b.charCodeAt(te);return D},T=n.__addimage__.arrayBufferToBinaryString=function(b){for(var S="",D=pe(b)?b:new Uint8Array(b),te=0;te<D.length;te+=8192)S+=String.fromCharCode.apply(null,D.subarray(te,te+8192));return S};n.addImage=function(){var b,S,D,te,we,De,Se,he,Me;if(typeof arguments[1]=="number"?(S=t,D=arguments[1],te=arguments[2],we=arguments[3],De=arguments[4],Se=arguments[5],he=arguments[6],Me=arguments[7]):(S=arguments[1],D=arguments[2],te=arguments[3],we=arguments[4],De=arguments[5],Se=arguments[6],he=arguments[7],Me=arguments[8]),Un(b=arguments[0])==="object"&&!v(b)&&"imageData"in b){var Ke=b;b=Ke.imageData,S=Ke.format||S||t,D=Ke.x||D||0,te=Ke.y||te||0,we=Ke.w||Ke.width||we,De=Ke.h||Ke.height||De,Se=Ke.alias||Se,he=Ke.compression||he,Me=Ke.rotation||Ke.angle||Me}var Le=this.internal.getFilters();if(he===void 0&&Le.indexOf("FlateEncode")!==-1&&(he="SLOW"),isNaN(D)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var F=I.call(this,b,S,Se,he);return M.call(this,D,te,we,De,F,Me),this};var I=function(b,S,D,te){var we,De,Se;if(typeof b=="string"&&i(b)===t){b=unescape(b);var he=V(b,!1);(he!==""||(he=n.loadFile(b,!0))!==void 0)&&(b=he)}if(v(b)&&(b=g(b,S)),S=i(b,S),!p(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((Se=D)==null||Se.length===0)&&(D=(function(Me){return typeof Me=="string"||pe(Me)?j(Me):pe(Me.data)?j(Me.data):null})(b)),(we=E.call(this,D))||(b instanceof Uint8Array||S==="RGBA"||(De=b,b=z(b)),we=this["process"+S.toUpperCase()](b,u.call(this),D,(function(Me){return Me&&typeof Me=="string"&&(Me=Me.toUpperCase()),Me in n.image_compression?Me:Q.NONE})(te),De)),!we)throw new Error("An unknown error occurred whilst processing the image.");return we},V=n.__addimage__.convertBase64ToBinaryString=function(b,S){S=typeof S!="boolean"||S;var D,te="";if(typeof b=="string"){var we;D=(we=oe(b))!==null&&we!==void 0?we:b;try{te=Lx(D)}catch(De){if(S)throw H(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+De.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};n.getImageProperties=function(b){var S,D,te="";if(v(b)&&(b=g(b)),typeof b=="string"&&i(b)===t&&((te=V(b,!1))===""&&(te=n.loadFile(b)||""),b=te),D=i(b),!p(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(b instanceof Uint8Array||(b=z(b)),!(S=this["process"+D.toUpperCase()](b)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=D,S}})(Ct.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Ct.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,u=!1,p=0;p<l.length&&!u;p++)switch((r=l[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var v=0;v<l.length;v++){r=l[v];var g=this.internal.pdfEscape,E=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),M=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(C.objId),Q=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(N(r.contents))+")",o+=" /Popup "+M.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+g(N(Q))+") >>",C.content=o;var j=C.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(o+=" /Open true"),o+=" >>",M.content=o,this.internal.write(C.objId,"0 R",M.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var H=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(E(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+H+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var oe=this.annotations._nameMap[r.options.name];r.options.pageNumber=oe.page,r.options.top=oe.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(E(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var pe=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+pe+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(t),y:l(r),w:c(t+i),h:l(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,c=this.getTextWidth(t),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var u=this.splitTextToSize(t,a).length;s=Math.ceil(l*u)}else a=c,s=l;return this.text(t,r,i,o),i+=.2*l,o.align==="center"&&(r-=c/2),o.align==="right"&&(r-=c),this.link(r,i-l,a,s,o),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(Ct.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(C){return e[C.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},a=n.__arabicParser__.isArabicEndLetter=function(C){return s(C)&&o(C)&&e[C.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(C){return s(C)&&i.indexOf(C.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return s(C)&&o(C)&&e[C.charCodeAt(0)].length>=1};var l=n.__arabicParser__.arabicLetterHasFinalForm=function(C){return s(C)&&o(C)&&e[C.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(C){return s(C)&&o(C)&&e[C.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(C){return s(C)&&o(C)&&e[C.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(C){var M=0,N=t,Q="",j=0;for(M=0;M<C.length;M+=1)N[C.charCodeAt(M)]!==void 0?(j++,typeof(N=N[C.charCodeAt(M)])=="number"&&(Q+=String.fromCharCode(N),N=t,j=0),M===C.length-1&&(N=t,Q+=C.charAt(M-(j-1)),M-=j-1,j=0)):(N=t,Q+=C.charAt(M-j),M-=j,j=0);return Q};n.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&r[C.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(C,M,N){return s(C)?o(C)===!1?-1:!l(C)||!s(M)&&!s(N)||!s(N)&&a(M)||a(C)&&!s(M)||a(C)&&c(M)||a(C)&&a(M)?0:u(C)&&s(M)&&!a(M)&&s(N)&&l(N)?3:a(C)||!s(N)?1:2:-1},g=function(C){var M=0,N=0,Q=0,j="",H="",oe="",pe=(C=C||"").split("\\s+"),z=[];for(M=0;M<pe.length;M+=1){for(z.push(""),N=0;N<pe[M].length;N+=1)j=pe[M][N],H=pe[M][N-1],oe=pe[M][N+1],s(j)?(Q=v(j,H,oe),z[M]+=Q!==-1?String.fromCharCode(e[j.charCodeAt(0)][Q]):j):z[M]+=j;z[M]=p(z[M])}return z.join(" ")},E=n.__arabicParser__.processArabic=n.processArabic=function(){var C,M=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(M)){var Q=0;for(N=[],Q=0;Q<M.length;Q+=1)Array.isArray(M[Q])?N.push([g(M[Q][0]),M[Q][1],M[Q][2]]):N.push([g(M[Q])]);C=N}else C=g(M);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};n.events.push(["preProcessText",E])})(Ct.API),Ct.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ct.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(C){c=C}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(C){l=C}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(C){u=C}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(C){p=C}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(C){v=C}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(C){g=C}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(C){E=C}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,l){r.call(this);var u=(l=l||{}).fontSize||this.getFontSize(),p=l.font||this.getFont(),v=l.scaleFactor||this.internal.scaleFactor,g=0,E=0,C=0,M=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var N=l.maxWidth;N>0?typeof c=="string"?c=this.splitTextToSize(c,N):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,H){return j.concat(M.splitTextToSize(H,N))},[])):c=Array.isArray(c)?c:[c];for(var Q=0;Q<c.length;Q++)g<(C=this.getStringUnitWidth(c[Q],{font:p})*u)&&(g=C);return g!==0&&(E=c.length),{w:g/=v,h:Math.max((E*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var l=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===c.lineNumber?(c.x=(l.x||0)+(l.width||0),c.y=l.y||0):l.y+l.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,g&&v&&(this.printHeaderRow(c.lineNumber,!0),c.y+=v[0].height)):c.y=l.y+l.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};n.table=function(c,l,u,p,v){if(r.call(this),!u)throw new Error("No data for PDF table.");var g,E,C,M,N=[],Q=[],j=[],H={},oe={},pe=[],z=[],T=(v=v||{}).autoSize||!1,I=v.printHeaders!==!1,V=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,b=v.margins||Object.assign({width:this.getPageWidth()},e),S=typeof v.padding=="number"?v.padding:3,D=v.headerBackgroundColor||"#c8c8c8",te=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=b,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=te,this.setFontSize(V),p==null)Q=N=Object.keys(u[0]),j=N.map(function(){return"left"});else if(Array.isArray(p)&&Un(p[0])==="object")for(N=p.map(function(Ke){return Ke.name}),Q=p.map(function(Ke){return Ke.prompt||Ke.name||""}),j=p.map(function(Ke){return Ke.align||"left"}),g=0;g<p.length;g+=1)oe[p[g].name]=.7499990551181103*p[g].width;else Array.isArray(p)&&typeof p[0]=="string"&&(Q=N=p,j=N.map(function(){return"left"}));if(T||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<N.length;g+=1){for(H[M=N[g]]=u.map(function(Ke){return Ke[M]}),this.setFont(void 0,"bold"),pe.push(this.getTextDimensions(Q[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=H[M],this.setFont(void 0,"normal"),C=0;C<E.length;C+=1)pe.push(this.getTextDimensions(E[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);oe[M]=Math.max.apply(null,pe)+S+S,pe=[]}if(I){var we={};for(g=0;g<N.length;g+=1)we[N[g]]={},we[N[g]].text=Q[g],we[N[g]].align=j[g];var De=a.call(this,we,oe);z=N.map(function(Ke){return new o(c,l,oe[Ke],De,we[Ke].text,void 0,we[Ke].align)}),this.setTableHeaderRow(z),this.printHeaderRow(1,!1)}var Se=p.reduce(function(Ke,Le){return Ke[Le.name]=Le.align,Ke},{});for(g=0;g<u.length;g+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:g,data:u[g]},this);var he=a.call(this,u[g],oe);for(C=0;C<N.length;C+=1){var Me=u[g][N[C]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:g,col:C,data:Me},this),s.call(this,new o(c,l,oe[N[C]],he,Me,g+2,Se[N[C]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=l,this};var a=function(c,l){var u=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(c).map(function(g){var E=c[g];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,l[g]-u-u)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/v+u+u},this).reduce(function(g,E){return Math.max(g,E)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,l){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){u=this.internal.__cell__.tableHeaderRow[g].clone(),l&&(u.y=this.internal.__cell__.margins.top||0,v.push(u)),u.lineNumber=c;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(E)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),t=!1}})(Ct.API);var h9={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},p9=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],zN=f9(p9),g9=[100,200,300,400,500,600,700,800,900],Roe=f9(g9);function ON(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return h9[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof zN[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function zB(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Ooe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$B={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function qB(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function HB(n){return n.trimLeft()}function Foe(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Loe(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Ox,GB,WB,Qg,Fx,KB,YB,ZB,FN=["times"];function QB(n,e,t,r,i){var o=4,s=JB;switch(i){case Ct.API.image_compression.FAST:o=1,s=XB;break;case Ct.API.image_compression.MEDIUM:o=6,s=e9;break;case Ct.API.image_compression.SLOW:o=9,s=t9}n=(function(c,l,u,p){for(var v,g=c.length/l,E=new Uint8Array(c.length+g),C=[Voe,XB,JB,e9,t9],M=0;M<g;M+=1){var N=M*l,Q=c.subarray(N,N+l);if(p)E.set(p(Q,u,v),N+M);else{for(var j=C.length,H=[],oe=0;oe<j;oe+=1)H[oe]=C[oe](Q,u,v);var pe=Boe(H.concat());E.set(H[pe],N+M)}v=Q}return E})(n,e,Math.ceil(t*r/8),s);var a=dx(n,{level:o});return Ct.API.__addimage__.arrayBufferToBinaryString(a)}function Voe(n){var e=Array.apply([],n);return e.unshift(0),e}function XB(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function JB(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var s=t&&t[o]||0;i[o+1]=n[o]-s+256&255}return i}function e9(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var s=n[o-e]||0,a=t&&t[o]||0;i[o+1]=n[o]+256-(s+a>>>1)&255}return i}function t9(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var s=joe(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-s+256&255}return i}function joe(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function Boe(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function LN(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),s=(1<<t)-1;return m9(n,i)>>o&s}function n9(n,e,t,r){var i=t*r,o=Math.floor(i/8),s=16-(i-8*o+r),a=(1<<r)-1,c=(e&a)<<s;(function(l,u,p){if(u+1<l.byteLength)l.setUint16(u,p,!1);else{var v=p>>8&255;l.setUint8(u,v)}})(n,o,m9(n,o)&~(a<<s)&65535|c)}function m9(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function Uoe(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<1+(7&i);n[e++],n[e++];var a=null,c=null;o&&(a=e,c=s,e+=3*s);var l=!0,u=[],p=0,v=null,g=0,E=null;for(this.width=t,this.height=r;l&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,E=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var C=n[e++];p=n[e++]|n[e++]<<8,v=n[e++],1&C||(v=null),g=C>>2&7,e++;break;case 254:for(;;){if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var M=n[e++]|n[e++]<<8,N=n[e++]|n[e++]<<8,Q=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,H=n[e++],oe=H>>6&1,pe=1<<1+(7&H),z=a,T=c,I=!1;H>>7&&(I=!0,z=e,T=pe,e+=3*pe);var V=e;for(e++;;){var b;if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}u.push({x:M,y:N,width:Q,height:j,has_local_palette:I,palette_offset:z,palette_size:T,data_offset:V,data_length:e-V,transparent_index:v,interlaced:!!oe,delay:p,disposal:g});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return E},this.frameInfo=function(S){if(S<0||S>=u.length)throw new Error("Frame index out of range.");return u[S]},this.decodeAndBlitFrameBGRA=function(S,D){var te=this.frameInfo(S),we=te.width*te.height,De=new Uint8Array(we);r9(n,te.data_offset,De,we);var Se=te.palette_offset,he=te.transparent_index;he===null&&(he=256);var Me=te.width,Ke=t-Me,Le=Me,F=4*(te.y*t+te.x),G=4*((te.y+te.height)*t+te.x),J=F,re=4*Ke;te.interlaced===!0&&(re+=4*t*7);for(var ae=8,fe=0,Ie=De.length;fe<Ie;++fe){var _e=De[fe];if(Le===0&&(Le=Me,(J+=re)>=G&&(re=4*Ke+4*t*(ae-1),J=F+(Me+Ke)*(ae<<1),ae>>=1)),_e===he)J+=4;else{var Te=n[Se+3*_e],ze=n[Se+3*_e+1],Qe=n[Se+3*_e+2];D[J++]=Qe,D[J++]=ze,D[J++]=Te,D[J++]=255}--Le}},this.decodeAndBlitFrameRGBA=function(S,D){var te=this.frameInfo(S),we=te.width*te.height,De=new Uint8Array(we);r9(n,te.data_offset,De,we);var Se=te.palette_offset,he=te.transparent_index;he===null&&(he=256);var Me=te.width,Ke=t-Me,Le=Me,F=4*(te.y*t+te.x),G=4*((te.y+te.height)*t+te.x),J=F,re=4*Ke;te.interlaced===!0&&(re+=4*t*7);for(var ae=8,fe=0,Ie=De.length;fe<Ie;++fe){var _e=De[fe];if(Le===0&&(Le=Me,(J+=re)>=G&&(re=4*Ke+4*t*(ae-1),J=F+(Me+Ke)*(ae<<1),ae>>=1)),_e===he)J+=4;else{var Te=n[Se+3*_e],ze=n[Se+3*_e+1],Qe=n[Se+3*_e+2];D[J++]=Te,D[J++]=ze,D[J++]=Qe,D[J++]=255}--Le}}}function r9(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,c=i+1,l=(1<<c)-1,u=0,p=0,v=0,g=n[e++],E=new Int32Array(4096),C=null;;){for(;u<16&&g!==0;)p|=n[e++]<<u,u+=8,g===1?g=n[e++]:--g;if(u<c)break;var M=p&l;if(p>>=c,u-=c,M!==o){if(M===s)break;for(var N=M<a?M:C,Q=0,j=N;j>o;)j=E[j]>>8,++Q;var H=j;if(v+Q+(N!==M?1:0)>r)return void cr.log("Warning, gif stream longer than expected.");t[v++]=H;var oe=v+=Q;for(N!==M&&(t[v++]=H),j=N;Q--;)j=E[j],t[--oe]=255&j,j>>=8;C!==null&&a<4096&&(E[a++]=C<<8|H,a>=l+1&&c<12&&(++c,l=l<<1|1)),C=M}else a=s+1,l=(1<<(c=i+1))-1,C=null}return v!==r&&cr.log("Warning, gif stream shorter than expected."),t}function VN(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),p=new Array(65535),v=new Array(65535),g=new Array(64),E=new Array(64),C=[],M=0,N=7,Q=new Array(64),j=new Array(64),H=new Array(64),oe=new Array(256),pe=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],b=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],we=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function De(F,G){for(var J=0,re=0,ae=new Array,fe=1;fe<=16;fe++){for(var Ie=1;Ie<=F[fe];Ie++)ae[G[re]]=[],ae[G[re]][0]=J,ae[G[re]][1]=fe,re++,J++;J*=2}return ae}function Se(F){for(var G=F[0],J=F[1]-1;J>=0;)G&1<<J&&(M|=1<<N),J--,--N<0&&(M==255?(he(255),he(0)):he(M),N=7,M=0)}function he(F){C.push(F)}function Me(F){he(F>>8&255),he(255&F)}function Ke(F,G,J,re,ae){for(var fe,Ie=ae[0],_e=ae[240],Te=(function(je,pt){var it,Dt,It,yn,en,Ut,Lt,Vt,ft,Qt,Et=0;for(ft=0;ft<8;++ft){it=je[Et],Dt=je[Et+1],It=je[Et+2],yn=je[Et+3],en=je[Et+4],Ut=je[Et+5],Lt=je[Et+6];var Ar=it+(Vt=je[Et+7]),vn=it-Vt,sn=Dt+Lt,an=Dt-Lt,Yn=It+Ut,Pt=It-Ut,Zn=yn+en,Ot=yn-en,Yt=Ar+Zn,rr=Ar-Zn,tn=sn+Yn,Rt=sn-Yn;je[Et]=Yt+tn,je[Et+4]=Yt-tn;var In=.707106781*(Rt+rr);je[Et+2]=rr+In,je[Et+6]=rr-In;var bo=.382683433*((Yt=Ot+Pt)-(Rt=an+vn)),gi=.5411961*Yt+bo,Ho=1.306562965*Rt+bo,hs=.707106781*(tn=Pt+an),Mt=vn+hs,Ys=vn-hs;je[Et+5]=Ys+gi,je[Et+3]=Ys-gi,je[Et+1]=Mt+Ho,je[Et+7]=Mt-Ho,Et+=8}for(Et=0,ft=0;ft<8;++ft){it=je[Et],Dt=je[Et+8],It=je[Et+16],yn=je[Et+24],en=je[Et+32],Ut=je[Et+40],Lt=je[Et+48];var pr=it+(Vt=je[Et+56]),xo=it-Vt,Di=Dt+Lt,Qn=Dt-Lt,si=It+Ut,mi=It-Ut,Go=yn+en,cc=yn-en,ps=pr+Go,Eo=pr-Go,Wo=Di+si,Co=Di-si;je[Et]=ps+Wo,je[Et+32]=ps-Wo;var Fi=.707106781*(Co+Eo);je[Et+16]=Eo+Fi,je[Et+48]=Eo-Fi;var Qi=.382683433*((ps=cc+mi)-(Co=Qn+xo)),gs=.5411961*ps+Qi,lc=1.306562965*Co+Qi,uc=.707106781*(Wo=mi+Qn),dc=xo+uc,cl=xo-uc;je[Et+40]=cl+gs,je[Et+24]=cl-gs,je[Et+8]=dc+lc,je[Et+56]=dc-lc,Et++}for(ft=0;ft<64;++ft)Qt=je[ft]*pt[ft],g[ft]=Qt>0?Qt+.5|0:Qt-.5|0;return g})(F,G),ze=0;ze<64;++ze)E[z[ze]]=Te[ze];var Qe=E[0]-J;J=E[0],Qe==0?Se(re[0]):(Se(re[v[fe=32767+Qe]]),Se(p[fe]));for(var Je=63;Je>0&&E[Je]==0;)Je--;if(Je==0)return Se(Ie),J;for(var lt,q=1;q<=Je;){for(var He=q;E[q]==0&&q<=Je;)++q;var Nt=q-He;if(Nt>=16){lt=Nt>>4;for(var St=1;St<=lt;++St)Se(_e);Nt&=15}fe=32767+E[q],Se(ae[(Nt<<4)+v[fe]]),Se(p[fe]),q++}return Je!=63&&Se(Ie),J}function Le(F){F=Math.min(Math.max(F,1),100),o!=F&&((function(G){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var ae=s((J[re]*G+50)/100);ae=Math.min(Math.max(ae,1),255),a[z[re]]=ae}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ie=0;Ie<64;Ie++){var _e=s((fe[Ie]*G+50)/100);_e=Math.min(Math.max(_e,1),255),c[z[Ie]]=_e}for(var Te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ze=0,Qe=0;Qe<8;Qe++)for(var Je=0;Je<8;Je++)l[ze]=1/(a[z[ze]]*Te[Qe]*Te[Je]*8),u[ze]=1/(c[z[ze]]*Te[Qe]*Te[Je]*8),ze++})(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),o=F)}this.encode=function(F,G){G&&Le(G),C=new Array,M=0,N=7,Me(65496),Me(65504),Me(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),Me(1),Me(1),he(0),he(0),(function(){Me(65499),Me(132),he(0);for(var Dt=0;Dt<64;Dt++)he(a[Dt]);he(1);for(var It=0;It<64;It++)he(c[It])})(),(function(Dt,It){Me(65472),Me(17),he(8),Me(It),Me(Dt),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1)})(F.width,F.height),(function(){Me(65476),Me(418),he(0);for(var Dt=0;Dt<16;Dt++)he(T[Dt+1]);for(var It=0;It<=11;It++)he(I[It]);he(16);for(var yn=0;yn<16;yn++)he(V[yn+1]);for(var en=0;en<=161;en++)he(b[en]);he(1);for(var Ut=0;Ut<16;Ut++)he(S[Ut+1]);for(var Lt=0;Lt<=11;Lt++)he(D[Lt]);he(17);for(var Vt=0;Vt<16;Vt++)he(te[Vt+1]);for(var ft=0;ft<=161;ft++)he(we[ft])})(),Me(65498),Me(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var J=0,re=0,ae=0;M=0,N=7,this.encode.displayName="_encode_";for(var fe,Ie,_e,Te,ze,Qe,Je,lt,q,He=F.data,Nt=F.width,St=F.height,je=4*Nt,pt=0;pt<St;){for(fe=0;fe<je;){for(ze=je*pt+fe,Je=-1,lt=0,q=0;q<64;q++)Qe=ze+(lt=q>>3)*je+(Je=4*(7&q)),pt+lt>=St&&(Qe-=je*(pt+1+lt-St)),fe+Je>=je&&(Qe-=fe+Je-je+4),Ie=He[Qe++],_e=He[Qe++],Te=He[Qe++],Q[q]=(pe[Ie]+pe[_e+256|0]+pe[Te+512|0]>>16)-128,j[q]=(pe[Ie+768|0]+pe[_e+1024|0]+pe[Te+1280|0]>>16)-128,H[q]=(pe[Ie+1280|0]+pe[_e+1536|0]+pe[Te+1792|0]>>16)-128;J=Ke(Q,l,J,e,r),re=Ke(j,u,re,t,i),ae=Ke(H,u,ae,t,i),fe+=32}pt+=8}if(N>=0){var it=[];it[1]=N+1,it[0]=(1<<N+1)-1,Se(it)}return Me(65497),new Uint8Array(C)},n=n||50,(function(){for(var F=String.fromCharCode,G=0;G<256;G++)oe[G]=F(G)})(),e=De(T,I),t=De(S,D),r=De(V,b),i=De(te,we),(function(){for(var F=1,G=2,J=1;J<=15;J++){for(var re=F;re<G;re++)v[32767+re]=J,p[32767+re]=[],p[32767+re][1]=J,p[32767+re][0]=re;for(var ae=-(G-1);ae<=-F;ae++)v[32767+ae]=J,p[32767+ae]=[],p[32767+ae][1]=J,p[32767+ae][0]=G-1+ae;F<<=1,G<<=1}})(),(function(){for(var F=0;F<256;F++)pe[F]=19595*F,pe[F+256|0]=38470*F,pe[F+512|0]=7471*F+32768,pe[F+768|0]=-11059*F,pe[F+1024|0]=-21709*F,pe[F+1280|0]=32768*F+8421375,pe[F+1536|0]=-27439*F,pe[F+1792|0]=-5329*F})(),Le(n)}function ic(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function i9(n){function e(I){if(!I)throw Error("assert :P")}function t(I,V,b){for(var S=0;4>S;S++)if(I[V+S]!=b.charCodeAt(S))return!0;return!1}function r(I,V,b,S,D){for(var te=0;te<D;te++)I[V+te]=b[S+te]}function i(I,V,b,S){for(var D=0;D<S;D++)I[V+D]=b}function o(I){return new Int32Array(I)}function s(I,V){for(var b=[],S=0;S<I;S++)b.push(new V);return b}function a(I,V){var b=[];return(function S(D,te,we){for(var De=we[te],Se=0;Se<De&&(D.push(we.length>te+1?[]:new V),!(we.length<te+1));Se++)S(D[Se],te+1,we)})(b,0,I),b}var c=function(){var I=this;function V(d,h){for(var y=1<<h-1>>>0;d&y;)y>>>=1;return y?(d&y-1)+y:d}function b(d,h,y,w,k){e(!(w%y));do d[h+(w-=y)]=k;while(0<w)}function S(d,h,y,w,k){if(e(2328>=k),512>=k)var O=o(512);else if((O=o(k))==null)return 0;return(function(L,U,$,K,ie,me){var Y,se,de=U,Ne=1<<$,ge=o(16),ke=o(16);for(e(ie!=0),e(K!=null),e(L!=null),e(0<$),se=0;se<ie;++se){if(15<K[se])return 0;++ge[K[se]]}if(ge[0]==ie)return 0;for(ke[1]=0,Y=1;15>Y;++Y){if(ge[Y]>1<<Y)return 0;ke[Y+1]=ke[Y]+ge[Y]}for(se=0;se<ie;++se)Y=K[se],0<K[se]&&(me[ke[Y]++]=se);if(ke[15]==1)return(K=new D).g=0,K.value=me[0],b(L,de,1,Ne,K),Ne;var Re,Ge=-1,$e=Ne-1,At=0,ut=1,fn=1,_t=1<<$;for(se=0,Y=1,ie=2;Y<=$;++Y,ie<<=1){if(ut+=fn<<=1,0>(fn-=ge[Y]))return 0;for(;0<ge[Y];--ge[Y])(K=new D).g=Y,K.value=me[se++],b(L,de+At,ie,_t,K),At=V(At,Y)}for(Y=$+1,ie=2;15>=Y;++Y,ie<<=1){if(ut+=fn<<=1,0>(fn-=ge[Y]))return 0;for(;0<ge[Y];--ge[Y]){if(K=new D,(At&$e)!=Ge){for(de+=_t,Re=1<<(Ge=Y)-$;15>Ge&&!(0>=(Re-=ge[Ge]));)++Ge,Re<<=1;Ne+=_t=1<<(Re=Ge-$),L[U+(Ge=At&$e)].g=Re+$,L[U+Ge].value=de-U-Ge}K.g=Y-$,K.value=me[se++],b(L,de+(At>>$),ie,_t,K),At=V(At,Y)}}return ut!=2*ke[15]-1?0:Ne})(d,h,y,w,k,O)}function D(){this.value=this.g=0}function te(){this.value=this.g=0}function we(){this.G=s(5,D),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Gd,te)}function De(d,h,y,w){e(d!=null),e(h!=null),e(2147483648>w),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=h,d.pa=y,d.Jd=h,d.Yc=y+w,d.Zc=4<=w?y+w-4+1:y,Ie(d)}function Se(d,h){for(var y=0;0<h--;)y|=Te(d,128)<<h;return y}function he(d,h){var y=Se(d,h);return _e(d)?-y:y}function Me(d,h,y,w){var k,O=0;for(e(d!=null),e(h!=null),e(4294967288>w),d.Sb=w,d.Ra=0,d.u=0,d.h=0,4<w&&(w=4),k=0;k<w;++k)O+=h[y+k]<<8*k;d.Ra=O,d.bb=w,d.oa=h,d.pa=y}function Ke(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<su-8>>>0,++d.bb,d.u-=8;re(d)&&(d.h=1,d.u=0)}function Le(d,h){if(e(0<=h),!d.h&&h<=xs){var y=J(d)&bs[h];return d.u+=h,Ke(d),y}return d.h=1,d.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(d){return d.Ra>>>(d.u&su-1)>>>0}function re(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>su}function ae(d,h){d.u=h,d.h=re(d)}function fe(d){d.u>=yl&&(e(d.u>=yl),Ke(d))}function Ie(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function _e(d){return Se(d,1)}function Te(d,h){var y=d.Ca;0>d.b&&Ie(d);var w=d.b,k=y*h>>>8,O=(d.I>>>w>k)+0;for(O?(y-=k,d.I-=k+1<<w>>>0):y=k+1,w=y,k=0;256<=w;)k+=8,w>>=8;return w=7^k+au[w],d.b-=w,d.Ca=(y<<w)-1,O}function ze(d,h,y){d[h+0]=y>>24&255,d[h+1]=y>>16&255,d[h+2]=y>>8&255,d[h+3]=255&y}function Qe(d,h){return d[h+0]|d[h+1]<<8}function Je(d,h){return Qe(d,h)|d[h+2]<<16}function lt(d,h){return Qe(d,h)|Qe(d,h+2)<<16}function q(d,h){var y=1<<h;return e(d!=null),e(0<h),d.X=o(y),d.X==null?0:(d.Mb=32-h,d.Xa=h,1)}function He(d,h){e(d!=null),e(h!=null),e(d.Xa==h.Xa),r(h.X,0,d.X,0,1<<h.Xa)}function Nt(){this.X=[],this.Xa=this.Mb=0}function St(d,h,y,w){e(y!=null),e(w!=null);var k=y[0],O=w[0];return k==0&&(k=(d*O+h/2)/h),O==0&&(O=(h*k+d/2)/d),0>=k||0>=O?0:(y[0]=k,w[0]=O,1)}function je(d,h){return d+(1<<h)-1>>>h}function pt(d,h){return((4278255360&d)+(4278255360&h)>>>0&4278255360)+((16711935&d)+(16711935&h)>>>0&16711935)>>>0}function it(d,h){I[h]=function(y,w,k,O,L,U,$){var K;for(K=0;K<L;++K){var ie=I[d](U[$+K-1],k,O+K);U[$+K]=pt(y[w+K],ie)}}}function Dt(){this.ud=this.hd=this.jd=0}function It(d,h){return((4278124286&(d^h))>>>1)+(d&h)>>>0}function yn(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function en(d,h){return yn(d+(d-h+.5>>1))}function Ut(d,h,y){return Math.abs(h-y)-Math.abs(d-y)}function Lt(d,h,y,w,k,O,L){for(w=O[L-1],y=0;y<k;++y)O[L+y]=w=pt(d[h+y],w)}function Vt(d,h,y,w,k){var O;for(O=0;O<y;++O){var L=d[h+O],U=L>>8&255,$=16711935&($=($=16711935&L)+((U<<16)+U));w[k+O]=(4278255360&L)+$>>>0}}function ft(d,h){h.jd=255&d,h.hd=d>>8&255,h.ud=d>>16&255}function Qt(d,h,y,w,k,O){var L;for(L=0;L<w;++L){var U=h[y+L],$=U>>>8,K=U,ie=255&(ie=(ie=U>>>16)+((d.jd<<24>>24)*($<<24>>24)>>>5));K=255&(K=(K+=(d.hd<<24>>24)*($<<24>>24)>>>5)+((d.ud<<24>>24)*(ie<<24>>24)>>>5)),k[O+L]=(4278255360&U)+(ie<<16)+K}}function Et(d,h,y,w,k){I[h]=function(O,L,U,$,K,ie,me,Y,se){for($=me;$<Y;++$)for(me=0;me<se;++me)K[ie++]=k(U[w(O[L++])])},I[d]=function(O,L,U,$,K,ie,me){var Y=8>>O.b,se=O.Ea,de=O.K[0],Ne=O.w;if(8>Y)for(O=(1<<O.b)-1,Ne=(1<<Y)-1;L<U;++L){var ge,ke=0;for(ge=0;ge<se;++ge)ge&O||(ke=w($[K++])),ie[me++]=k(de[ke&Ne]),ke>>=Y}else I["VP8LMapColor"+y]($,K,de,Ne,ie,me,L,U,se)}}function Ar(d,h,y,w,k){for(y=h+y;h<y;){var O=d[h++];w[k++]=O>>16&255,w[k++]=O>>8&255,w[k++]=255&O}}function vn(d,h,y,w,k){for(y=h+y;h<y;){var O=d[h++];w[k++]=O>>16&255,w[k++]=O>>8&255,w[k++]=255&O,w[k++]=O>>24&255}}function sn(d,h,y,w,k){for(y=h+y;h<y;){var O=(L=d[h++])>>16&240|L>>12&15,L=240&L|L>>28&15;w[k++]=O,w[k++]=L}}function an(d,h,y,w,k){for(y=h+y;h<y;){var O=(L=d[h++])>>16&248|L>>13&7,L=L>>5&224|L>>3&31;w[k++]=O,w[k++]=L}}function Yn(d,h,y,w,k){for(y=h+y;h<y;){var O=d[h++];w[k++]=255&O,w[k++]=O>>8&255,w[k++]=O>>16&255}}function Pt(d,h,y,w,k,O){if(O==0)for(y=h+y;h<y;)ze(w,((O=d[h++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),k+=32;else r(w,k,d,h,y)}function Zn(d,h){I[h][0]=I[d+"0"],I[h][1]=I[d+"1"],I[h][2]=I[d+"2"],I[h][3]=I[d+"3"],I[h][4]=I[d+"4"],I[h][5]=I[d+"5"],I[h][6]=I[d+"6"],I[h][7]=I[d+"7"],I[h][8]=I[d+"8"],I[h][9]=I[d+"9"],I[h][10]=I[d+"10"],I[h][11]=I[d+"11"],I[h][12]=I[d+"12"],I[h][13]=I[d+"13"],I[h][14]=I[d+"0"],I[h][15]=I[d+"0"]}function Ot(d){return d==wE||d==bE||d==o_||d==xE}function Yt(){this.eb=[],this.size=this.A=this.fb=0}function rr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function tn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Yt,this.f.kb=new rr,this.sd=null}function Rt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function In(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function bo(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function gi(d,h){var y=d.T,w=h.ba.f.RGBA,k=w.eb,O=w.fb+d.ka*w.A,L=oa[h.ba.S],U=d.y,$=d.O,K=d.f,ie=d.N,me=d.ea,Y=d.W,se=h.cc,de=h.dc,Ne=h.Mc,ge=h.Nc,ke=d.ka,Re=d.ka+d.T,Ge=d.U,$e=Ge+1>>1;for(ke==0?L(U,$,null,null,K,ie,me,Y,K,ie,me,Y,k,O,null,null,Ge):(L(h.ec,h.fc,U,$,se,de,Ne,ge,K,ie,me,Y,k,O-w.A,k,O,Ge),++y);ke+2<Re;ke+=2)se=K,de=ie,Ne=me,ge=Y,ie+=d.Rc,Y+=d.Rc,O+=2*w.A,L(U,($+=2*d.fa)-d.fa,U,$,se,de,Ne,ge,K,ie,me,Y,k,O-w.A,k,O,Ge);return $+=d.fa,d.j+Re<d.o?(r(h.ec,h.fc,U,$,Ge),r(h.cc,h.dc,K,ie,$e),r(h.Mc,h.Nc,me,Y,$e),y--):1&Re||L(U,$,null,null,K,ie,me,Y,K,ie,me,Y,k,O+w.A,null,null,Ge),y}function Ho(d,h,y){var w=d.F,k=[d.J];if(w!=null){var O=d.U,L=h.ba.S,U=L==i_||L==o_;h=h.ba.f.RGBA;var $=[0],K=d.ka;$[0]=d.T,d.Kb&&(K==0?--$[0]:(--K,k[0]-=d.width),d.j+d.ka+d.T==d.o&&($[0]=d.o-d.j-K));var ie=h.eb;K=h.fb+K*h.A,d=rk(w,k[0],d.width,O,$,ie,K+(U?0:3),h.A),e(y==$),d&&Ot(L)&&Nm(ie,K,U,O,$,h.A)}return 0}function hs(d){var h=d.ma,y=h.ba.S,w=11>y,k=y==n_||y==r_||y==i_||y==_E||y==12||Ot(y);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!vl(h.Oa,d,k?11:12))return 0;if(k&&Ot(y)&&iu(),d.da)alert("todo:use_scaling");else{if(w){if(h.Ib=bo,d.Kb){if(y=d.U+1>>1,h.memory=o(d.U+2*y),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+d.U,h.Mc=h.cc,h.Nc=h.dc+y,h.Ib=gi,iu()}}else alert("todo:EmitYUV");k&&(h.Jb=Ho,w&&gr())}if(w&&!wk){for(d=0;256>d;++d)Tz[d]=89858*(d-128)+a_>>s_,Pz[d]=-22014*(d-128)+a_,Nz[d]=-45773*(d-128),Mz[d]=113618*(d-128)+a_>>s_;for(d=km;d<IE;++d)h=76283*(d-16)+a_>>s_,kz[d-km]=ms(h,255),Rz[d-km]=ms(h+8>>4,15);wk=1}return 1}function Mt(d){var h=d.ma,y=d.U,w=d.T;return e(!(1&d.ka)),0>=y||0>=w?0:(y=h.Ib(d,h),h.Jb!=null&&h.Jb(d,h,y),h.Dc+=y,1)}function Ys(d){d.ma.memory=null}function pr(d,h,y,w){return Le(d,8)!=47?0:(h[0]=Le(d,14)+1,y[0]=Le(d,14)+1,w[0]=Le(d,1),Le(d,3)!=0?0:!d.h)}function xo(d,h){if(4>d)return d+1;var y=d-2>>1;return(2+(1&d)<<y)+Le(h,y)+1}function Di(d,h){return 120<h?h-120:1<=(y=((y=gz[h-1])>>4)*d+(8-(15&y)))?y:1;var y}function Qn(d,h,y){var w=J(y),k=d[h+=255&w].g-8;return 0<k&&(ae(y,y.u+8),w=J(y),h+=d[h].value,h+=w&(1<<k)-1),ae(y,y.u+d[h].g),d[h].value}function si(d,h,y){return y.g+=d.g,y.value+=d.value<<h>>>0,e(8>=y.g),d.g}function mi(d,h,y){var w=d.xc;return e((h=w==0?0:d.vc[d.md*(y>>w)+(h>>w)])<d.Wb),d.Ya[h]}function Go(d,h,y,w){var k=d.ab,O=d.c*h,L=d.C;h=L+h;var U=y,$=w;for(w=d.Ta,y=d.Ua;0<k--;){var K=d.gc[k],ie=L,me=h,Y=U,se=$,de=($=w,U=y,K.Ea);switch(e(ie<me),e(me<=K.nc),K.hc){case 2:qr(Y,se,(me-ie)*de,$,U);break;case 0:var Ne=ie,ge=me,ke=$,Re=U,Ge=(_t=K).Ea;Ne==0&&(Im(Y,se,null,null,1,ke,Re),Lt(Y,se+1,0,0,Ge-1,ke,Re+1),se+=Ge,Re+=Ge,++Ne);for(var $e=1<<_t.b,At=$e-1,ut=je(Ge,_t.b),fn=_t.K,_t=_t.w+(Ne>>_t.b)*ut;Ne<ge;){var xn=fn,yi=_t,hn=1;for(Nh(Y,se,ke,Re-Ge,1,ke,Re);hn<Ge;){var wt=(hn&~At)+$e;wt>Ge&&(wt=Ge),(0,Am[xn[yi++]>>8&15])(Y,se+ +hn,ke,Re+hn-Ge,wt-hn,ke,Re+hn),hn=wt}se+=Ge,Re+=Ge,++Ne&At||(_t+=ut)}me!=K.nc&&r($,U-de,$,U+(me-ie-1)*de,de);break;case 1:for(de=Y,ge=se,Ge=(Y=K.Ea)-(Re=Y&~(ke=(se=1<<K.b)-1)),Ne=je(Y,K.b),$e=K.K,K=K.w+(ie>>K.b)*Ne;ie<me;){for(At=$e,ut=K,fn=new Dt,_t=ge+Re,xn=ge+Y;ge<_t;)ft(At[ut++],fn),Dm(fn,de,ge,se,$,U),ge+=se,U+=se;ge<xn&&(ft(At[ut++],fn),Dm(fn,de,ge,Ge,$,U),ge+=Ge,U+=Ge),++ie&ke||(K+=Ne)}break;case 3:if(Y==$&&se==U&&0<K.b){for(ge=$,Y=de=U+(me-ie)*de-(Re=(me-ie)*je(K.Ea,K.b)),se=$,ke=U,Ne=[],Re=(Ge=Re)-1;0<=Re;--Re)Ne[Re]=se[ke+Re];for(Re=Ge-1;0<=Re;--Re)ge[Y+Re]=Ne[Re];Xy(K,ie,me,$,de,$,U)}else Xy(K,ie,me,Y,se,$,U)}U=w,$=y}$!=y&&r(w,y,U,$,O)}function cc(d,h){var y=d.V,w=d.Ba+d.c*d.C,k=h-d.C;if(e(h<=d.l.o),e(16>=k),0<k){var O=d.l,L=d.Ta,U=d.Ua,$=O.width;if(Go(d,k,y,w),k=U=[U],e((y=d.C)<(w=h)),e(O.v<O.va),w>O.o&&(w=O.o),y<O.j){var K=O.j-y;y=O.j,k[0]+=K*$}if(y>=w?y=0:(k[0]+=4*O.v,O.ka=y-O.j,O.U=O.va-O.v,O.T=w-y,y=1),y){if(U=U[0],11>(y=d.ca).S){var ie=y.f.RGBA,me=(w=y.S,k=O.U,O=O.T,K=ie.eb,ie.A),Y=O;for(ie=ie.fb+d.Ma*ie.A;0<Y--;){var se=L,de=U,Ne=k,ge=K,ke=ie;switch(w){case t_:Tm(se,de,Ne,ge,ke);break;case n_:cu(se,de,Ne,ge,ke);break;case wE:cu(se,de,Ne,ge,ke),Nm(ge,ke,0,Ne,1,0);break;case uk:Wd(se,de,Ne,ge,ke);break;case r_:Pt(se,de,Ne,ge,ke,1);break;case bE:Pt(se,de,Ne,ge,ke,1),Nm(ge,ke,0,Ne,1,0);break;case i_:Pt(se,de,Ne,ge,ke,0);break;case o_:Pt(se,de,Ne,ge,ke,0),Nm(ge,ke,1,Ne,1,0);break;case _E:lu(se,de,Ne,ge,ke);break;case xE:lu(se,de,Ne,ge,ke),nk(ge,ke,Ne,1,0);break;case dk:uu(se,de,Ne,ge,ke);break;default:e(0)}U+=$,ie+=me}d.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=y.height)}}d.C=h,e(d.C<=d.i)}function ps(d){var h;if(0<d.ua)return 0;for(h=0;h<d.Wb;++h){var y=d.Ya[h].G,w=d.Ya[h].H;if(0<y[1][w[1]+0].g||0<y[2][w[2]+0].g||0<y[3][w[3]+0].g)return 0}return 1}function Eo(d,h,y,w,k,O){if(d.Z!=0){var L=d.qd,U=d.rd;for(e(hu[d.Z]!=null);h<y;++h)hu[d.Z](L,U,w,k,w,k,O),L=w,U=k,k+=O;d.qd=L,d.rd=U}}function Wo(d,h){var y=d.l.ma,w=y.Z==0||y.Z==1?d.l.j:d.C;if(w=d.C<w?w:d.C,e(h<=d.l.o),h>w){var k=d.l.width,O=y.ca,L=y.tb+k*w,U=d.V,$=d.Ba+d.c*w,K=d.gc;e(d.ab==1),e(K[0].hc==3),vc(K[0],w,h,U,$,O,L),Eo(y,w,h,O,L,k)}d.C=d.Ma=h}function Co(d,h,y,w,k,O,L){var U=d.$/w,$=d.$%w,K=d.m,ie=d.s,me=y+d.$,Y=me;k=y+w*k;var se=y+w*O,de=280+ie.ua,Ne=d.Pb?U:16777216,ge=0<ie.ua?ie.Wa:null,ke=ie.wc,Re=me<se?mi(ie,$,U):null;e(d.C<O),e(se<=k);var Ge=!1;e:for(;;){for(;Ge||me<se;){var $e=0;if(U>=Ne){var At=me-y;e((Ne=d).Pb),Ne.wd=Ne.m,Ne.xd=At,0<Ne.s.ua&&He(Ne.s.Wa,Ne.s.vb),Ne=U+vz}if($&ke||(Re=mi(ie,$,U)),e(Re!=null),Re.Qb&&(h[me]=Re.qb,Ge=!0),!Ge)if(fe(K),Re.jc){$e=K,At=h;var ut=me,fn=Re.pd[J($e)&Gd-1];e(Re.jc),256>fn.g?(ae($e,$e.u+fn.g),At[ut]=fn.value,$e=0):(ae($e,$e.u+fn.g-256),e(256<=fn.value),$e=fn.value),$e==0&&(Ge=!0)}else $e=Qn(Re.G[0],Re.H[0],K);if(K.h)break;if(Ge||256>$e){if(!Ge)if(Re.nd)h[me]=(Re.qb|$e<<8)>>>0;else{if(fe(K),Ge=Qn(Re.G[1],Re.H[1],K),fe(K),At=Qn(Re.G[2],Re.H[2],K),ut=Qn(Re.G[3],Re.H[3],K),K.h)break;h[me]=(ut<<24|Ge<<16|$e<<8|At)>>>0}if(Ge=!1,++me,++$>=w&&($=0,++U,L!=null&&U<=O&&!(U%16)&&L(d,U),ge!=null))for(;Y<me;)$e=h[Y++],ge.X[(506832829*$e&4294967295)>>>ge.Mb]=$e}else if(280>$e){if($e=xo($e-256,K),At=Qn(Re.G[4],Re.H[4],K),fe(K),At=Di(w,At=xo(At,K)),K.h)break;if(me-y<At||k-me<$e)break e;for(ut=0;ut<$e;++ut)h[me+ut]=h[me+ut-At];for(me+=$e,$+=$e;$>=w;)$-=w,++U,L!=null&&U<=O&&!(U%16)&&L(d,U);if(e(me<=k),$&ke&&(Re=mi(ie,$,U)),ge!=null)for(;Y<me;)$e=h[Y++],ge.X[(506832829*$e&4294967295)>>>ge.Mb]=$e}else{if(!($e<de))break e;for(Ge=$e-280,e(ge!=null);Y<me;)$e=h[Y++],ge.X[(506832829*$e&4294967295)>>>ge.Mb]=$e;$e=me,e(!(Ge>>>(At=ge).Xa)),h[$e]=At.X[Ge],Ge=!0}Ge||e(K.h==re(K))}if(d.Pb&&K.h&&me<k)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&He(d.s.vb,d.s.Wa);else{if(K.h)break e;L?.(d,U>O?O:U),d.a=0,d.$=me-y}return 1}return d.a=3,0}function Fi(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var h=d.Wa;h!=null&&(h.X=null),d.vb=null,e(d!=null)}function Qi(){var d=new zt;return d==null?null:(d.a=0,d.xb=pk,Zn("Predictor","VP8LPredictors"),Zn("Predictor","VP8LPredictors_C"),Zn("PredictorAdd","VP8LPredictorsAdd"),Zn("PredictorAdd","VP8LPredictorsAdd_C"),qr=Vt,Dm=Qt,Tm=Ar,cu=vn,lu=sn,uu=an,Wd=Yn,I.VP8LMapColor32b=mc,I.VP8LMapColor8b=Sm,d)}function gs(d,h,y,w,k){var O=1,L=[d],U=[h],$=w.m,K=w.s,ie=null,me=0;e:for(;;){if(y)for(;O&&Le($,1);){var Y=L,se=U,de=w,Ne=1,ge=de.m,ke=de.gc[de.ab],Re=Le(ge,2);if(de.Oc&1<<Re)O=0;else{switch(de.Oc|=1<<Re,ke.hc=Re,ke.Ea=Y[0],ke.nc=se[0],ke.K=[null],++de.ab,e(4>=de.ab),Re){case 0:case 1:ke.b=Le(ge,3)+2,Ne=gs(je(ke.Ea,ke.b),je(ke.nc,ke.b),0,de,ke.K),ke.K=ke.K[0];break;case 3:var Ge,$e=Le(ge,8)+1,At=16<$e?0:4<$e?1:2<$e?2:3;if(Y[0]=je(ke.Ea,At),ke.b=At,Ge=Ne=gs($e,1,0,de,ke.K)){var ut,fn=$e,_t=ke,xn=1<<(8>>_t.b),yi=o(xn);if(yi==null)Ge=0;else{var hn=_t.K[0],wt=_t.w;for(yi[0]=_t.K[0][0],ut=1;ut<1*fn;++ut)yi[ut]=pt(hn[wt+ut],yi[ut-1]);for(;ut<4*xn;++ut)yi[ut]=0;_t.K[0]=null,_t.K[0]=yi,Ge=1}}Ne=Ge;break;case 2:break;default:e(0)}O=Ne}}if(L=L[0],U=U[0],O&&Le($,1)&&!(O=1<=(me=Le($,4))&&11>=me)){w.a=3;break e}var et;if(et=O)t:{var Gr,on,Sn,mr=w,Vi=L,Do=U,Vr=me,eo=y,To=mr.m,_i=mr.s,Tn=[null],$n=1,jr=0,qn=mz[Vr];n:for(;;){if(eo&&Le(To,1)){var ji=Le(To,3)+2,Na=je(Vi,ji),Wr=je(Do,ji),Qo=Na*Wr;if(!gs(Na,Wr,0,mr,Tn))break n;for(Tn=Tn[0],_i.xc=ji,Gr=0;Gr<Qo;++Gr){var or=Tn[Gr]>>8&65535;Tn[Gr]=or,or>=$n&&($n=or+1)}}if(To.h)break n;for(on=0;5>on;++on){var wi=fk[on];!on&&0<Vr&&(wi+=1<<Vr),jr<wi&&(jr=wi)}var Cs=s($n*qn,D),Mo=$n,Is=s(Mo,we);if(Is==null)var Ss=null;else e(65536>=Mo),Ss=Is;var Xo=o(jr);if(Ss==null||Xo==null||Cs==null){mr.a=1;break n}var As=Cs;for(Gr=Sn=0;Gr<$n;++Gr){var dr=Ss[Gr],Ds=dr.G,Pa=dr.H,Yd=0,bl=1,Bi=0;for(on=0;5>on;++on){wi=fk[on],Ds[on]=As,Pa[on]=Sn,!on&&0<Vr&&(wi+=1<<Vr);i:{var l_,SE=wi,u_=mr,Rm=Xo,Lz=As,Vz=Sn,AE=0,pu=u_.m,jz=Le(pu,1);if(i(Rm,0,0,SE),jz){var Bz=Le(pu,1)+1,Uz=Le(pu,1),Ek=Le(pu,Uz==0?1:8);Rm[Ek]=1,Bz==2&&(Rm[Ek=Le(pu,8)]=1);var d_=1}else{var Ck=o(19),Ik=Le(pu,4)+4;if(19<Ik){u_.a=3;var f_=0;break i}for(l_=0;l_<Ik;++l_)Ck[pz[l_]]=Le(pu,3);var DE=void 0,Om=void 0,Sk=u_,zz=Ck,h_=SE,Ak=Rm,TE=0,gu=Sk.m,Dk=8,Tk=s(128,D);r:for(;S(Tk,0,7,zz,19);){if(Le(gu,1)){var $z=2+2*Le(gu,3);if((DE=2+Le(gu,$z))>h_)break r}else DE=h_;for(Om=0;Om<h_&&DE--;){fe(gu);var Mk=Tk[0+(127&J(gu))];ae(gu,gu.u+Mk.g);var kh=Mk.value;if(16>kh)Ak[Om++]=kh,kh!=0&&(Dk=kh);else{var qz=kh==16,Nk=kh-16,Hz=fz[Nk],Pk=Le(gu,dz[Nk])+Hz;if(Om+Pk>h_)break r;for(var Gz=qz?Dk:0;0<Pk--;)Ak[Om++]=Gz}}TE=1;break r}TE||(Sk.a=3),d_=TE}(d_=d_&&!pu.h)&&(AE=S(Lz,Vz,8,Rm,SE)),d_&&AE!=0?f_=AE:(u_.a=3,f_=0)}if(f_==0)break n;if(bl&&hz[on]==1&&(bl=As[Sn].g==0),Yd+=As[Sn].g,Sn+=f_,3>=on){var Fm,ME=Xo[0];for(Fm=1;Fm<wi;++Fm)Xo[Fm]>ME&&(ME=Xo[Fm]);Bi+=ME}}if(dr.nd=bl,dr.Qb=0,bl&&(dr.qb=(Ds[3][Pa[3]+0].value<<24|Ds[1][Pa[1]+0].value<<16|Ds[2][Pa[2]+0].value)>>>0,Yd==0&&256>Ds[0][Pa[0]+0].value&&(dr.Qb=1,dr.qb+=Ds[0][Pa[0]+0].value<<8)),dr.jc=!dr.Qb&&6>Bi,dr.jc){var p_,xl=dr;for(p_=0;p_<Gd;++p_){var mu=p_,vu=xl.pd[mu],g_=xl.G[0][xl.H[0]+mu];256<=g_.value?(vu.g=g_.g+256,vu.value=g_.value):(vu.g=0,vu.value=0,mu>>=si(g_,8,vu),mu>>=si(xl.G[1][xl.H[1]+mu],16,vu),mu>>=si(xl.G[2][xl.H[2]+mu],0,vu),si(xl.G[3][xl.H[3]+mu],24,vu))}}}_i.vc=Tn,_i.Wb=$n,_i.Ya=Ss,_i.yc=Cs,et=1;break t}et=0}if(!(O=et)){w.a=3;break e}if(0<me){if(K.ua=1<<me,!q(K.Wa,me)){w.a=1,O=0;break e}}else K.ua=0;var NE=w,kk=L,Wz=U,PE=NE.s,kE=PE.xc;if(NE.c=kk,NE.i=Wz,PE.md=je(kk,kE),PE.wc=kE==0?-1:(1<<kE)-1,y){w.xb=Cz;break e}if((ie=o(L*U))==null){w.a=1,O=0;break e}O=(O=Co(w,ie,0,L,U,U,null))&&!$.h;break e}return O?(k!=null?k[0]=ie:(e(ie==null),e(y)),w.$=0,y||Fi(K)):Fi(K),O}function lc(d,h){var y=d.c*d.i,w=y+h+16*h;return e(d.c<=h),d.V=o(w),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+y+h,1)}function uc(d,h){var y=d.C,w=h-y,k=d.V,O=d.Ba+d.c*y;for(e(h<=d.l.o);0<w;){var L=16<w?16:w,U=d.l.ma,$=d.l.width,K=$*L,ie=U.ca,me=U.tb+$*y,Y=d.Ta,se=d.Ua;Go(d,L,k,O),ik(Y,se,ie,me,K),Eo(U,y,y+L,ie,me,$),w-=L,k+=L*d.c,y+=L}e(y==h),d.C=d.Ma=h}function dc(){this.ub=this.yd=this.td=this.Rb=0}function cl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ch(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Fd(){this.Yb=(function(){var d=[];return(function h(y,w,k){for(var O=k[w],L=0;L<O&&(y.push(k.length>w+1?[]:0),!(k.length<w+1));L++)h(y[L],w+1,k)})(d,0,[3,11]),d})()}function ll(){this.jb=o(3),this.Wc=a([4,8],Fd),this.Xc=a([4,17],Fd)}function Ld(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Xi(){this.ld=this.La=this.dd=this.tc=0}function Ca(){this.Na=this.la=0}function Zs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ul(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ih(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xi),this.Y=0,this.ya=Array(new ul),this.aa=0,this.l=new fc}function Vd(){this.y=o(16),this.f=o(8),this.ea=o(8)}function jd(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new dc,this.Kc=new cl,this.ed=new Ld,this.Qa=new Ch,this.Ic=this.$c=this.Aa=0,this.D=new Ih,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,F),this.ia=0,this.pb=s(4,Zs),this.Pa=new ll,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vd),this.Hd=0,this.rb=Array(new Ca),this.sb=0,this.wa=Array(new Xi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ul),this.L=this.aa=0,this.gd=a([4,2],Xi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ms(d,h){return 0>d?0:d>h?h:d}function fc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bd(){var d=new jd;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Pm||(Pm=Ql)),d}function Dr(d,h,y){return d.a==0&&(d.a=h,d.sc=y,d.cb=0),0}function Ud(d,h,y){return 3<=y&&d[h+0]==157&&d[h+1]==1&&d[h+2]==42}function Qs(d,h){if(d==null)return 0;if(d.a=0,d.sc="OK",h==null)return Dr(d,2,"null VP8Io passed to VP8GetHeaders()");var y=h.data,w=h.w,k=h.ha;if(4>k)return Dr(d,7,"Truncated header.");var O=y[w+0]|y[w+1]<<8|y[w+2]<<16,L=d.Od;if(L.Rb=!(1&O),L.td=O>>1&7,L.yd=O>>4&1,L.ub=O>>5,3<L.td)return Dr(d,3,"Incorrect keyframe parameters.");if(!L.yd)return Dr(d,4,"Frame not displayable.");w+=3,k-=3;var U=d.Kc;if(L.Rb){if(7>k)return Dr(d,7,"cannot parse picture header");if(!Ud(y,w,k))return Dr(d,3,"Bad code word");U.c=16383&(y[w+4]<<8|y[w+3]),U.Td=y[w+4]>>6,U.i=16383&(y[w+6]<<8|y[w+5]),U.Ud=y[w+6]>>6,w+=7,k-=7,d.za=U.c+15>>4,d.Ub=U.i+15>>4,h.width=U.c,h.height=U.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((O=d.Pa).jb,0,255,O.jb.length),e((O=d.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,i(O.Zb,0,0,O.Zb.length),i(O.Lb,0,0,O.Lb)}if(L.ub>k)return Dr(d,7,"bad partition length");De(O=d.m,y,w,L.ub),w+=L.ub,k-=L.ub,L.Rb&&(U.Ld=_e(O),U.Kd=_e(O)),U=d.Qa;var $,K=d.Pa;if(e(O!=null),e(U!=null),U.Cb=_e(O),U.Cb){if(U.Bb=_e(O),_e(O)){for(U.Fb=_e(O),$=0;4>$;++$)U.Zb[$]=_e(O)?he(O,7):0;for($=0;4>$;++$)U.Lb[$]=_e(O)?he(O,6):0}if(U.Bb)for($=0;3>$;++$)K.jb[$]=_e(O)?Se(O,8):255}else U.Bb=0;if(O.Ka)return Dr(d,3,"cannot parse segment header");if((U=d.ed).zd=_e(O),U.Tb=Se(O,6),U.wb=Se(O,3),U.Pc=_e(O),U.Pc&&_e(O)){for(K=0;4>K;++K)_e(O)&&(U.vd[K]=he(O,6));for(K=0;4>K;++K)_e(O)&&(U.od[K]=he(O,6))}if(d.L=U.Tb==0?0:U.zd?1:2,O.Ka)return Dr(d,3,"cannot parse filter header");var ie=k;if(k=$=w,w=$+ie,U=ie,d.Xb=(1<<Se(d.m,2))-1,ie<3*(K=d.Xb))y=7;else{for($+=3*K,U-=3*K,ie=0;ie<K;++ie){var me=y[k+0]|y[k+1]<<8|y[k+2]<<16;me>U&&(me=U),De(d.Jc[+ie],y,$,me),$+=me,U-=me,k+=3}De(d.Jc[+K],y,$,U),y=$<w?0:5}if(y!=0)return Dr(d,y,"cannot parse partitions");for(y=Se($=d.m,7),k=_e($)?he($,4):0,w=_e($)?he($,4):0,U=_e($)?he($,4):0,K=_e($)?he($,4):0,$=_e($)?he($,4):0,ie=d.Qa,me=0;4>me;++me){if(ie.Cb){var Y=ie.Zb[me];ie.Fb||(Y+=y)}else{if(0<me){d.pb[me]=d.pb[0];continue}Y=y}var se=d.pb[me];se.Sc[0]=EE[ms(Y+k,127)],se.Sc[1]=CE[ms(Y+0,127)],se.Eb[0]=2*EE[ms(Y+w,127)],se.Eb[1]=101581*CE[ms(Y+U,127)]>>16,8>se.Eb[1]&&(se.Eb[1]=8),se.Qc[0]=EE[ms(Y+K,117)],se.Qc[1]=CE[ms(Y+$,127)],se.lc=Y+$}if(!L.Rb)return Dr(d,4,"Not a key frame.");for(_e(O),L=d.Pa,y=0;4>y;++y){for(k=0;8>k;++k)for(w=0;3>w;++w)for(U=0;11>U;++U)K=Te(O,xz[y][k][w][U])?Se(O,8):wz[y][k][w][U],L.Wc[y][k].Yb[w][U]=K;for(k=0;17>k;++k)L.Xc[y][k]=L.Wc[y][Ez[k]]}return d.kc=_e(O),d.kc&&(d.Bd=Se(O,8)),d.cb=1}function Ql(d,h,y,w,k,O,L){var U=h[k].Yb[y];for(y=0;16>k;++k){if(!Te(d,U[y+0]))return k;for(;!Te(d,U[y+1]);)if(U=h[++k].Yb[0],y=0,k==16)return 16;var $=h[k+1].Yb;if(Te(d,U[y+2])){var K=d,ie=0;if(Te(K,(Y=U)[(me=y)+3]))if(Te(K,Y[me+6])){for(U=0,me=2*(ie=Te(K,Y[me+8]))+(Y=Te(K,Y[me+9+ie])),ie=0,Y=yz[me];Y[U];++U)ie+=ie+Te(K,Y[U]);ie+=3+(8<<me)}else Te(K,Y[me+7])?(ie=7+2*Te(K,165),ie+=Te(K,145)):ie=5+Te(K,159);else ie=Te(K,Y[me+4])?3+Te(K,Y[me+5]):2;U=$[2]}else ie=1,U=$[1];$=L+_z[k],0>(K=d).b&&Ie(K);var me,Y=K.b,se=(me=K.Ca>>1)-(K.I>>Y)>>31;--K.b,K.Ca+=se,K.Ca|=1,K.I-=(me+1&se)<<Y,O[$]=((ie^se)-se)*w[(0<k)+0]}return 16}function zd(d){var h=d.rb[d.sb-1];h.la=0,h.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Io(d,h,y,w,k){k=d[h+y+32*w]+(k>>3),d[h+y+32*w]=-256&k?0>k?0:255:k}function $r(d,h,y,w,k,O){Io(d,h,0,y,w+k),Io(d,h,1,y,w+O),Io(d,h,2,y,w-O),Io(d,h,3,y,w-k)}function Li(d){return(20091*d>>16)+d}function Ko(d,h,y,w){var k,O=0,L=o(16);for(k=0;4>k;++k){var U=d[h+0]+d[h+8],$=d[h+0]-d[h+8],K=(35468*d[h+4]>>16)-Li(d[h+12]),ie=Li(d[h+4])+(35468*d[h+12]>>16);L[O+0]=U+ie,L[O+1]=$+K,L[O+2]=$-K,L[O+3]=U-ie,O+=4,h++}for(k=O=0;4>k;++k)U=(d=L[O+0]+4)+L[O+8],$=d-L[O+8],K=(35468*L[O+4]>>16)-Li(L[O+12]),Io(y,w,0,0,U+(ie=Li(L[O+4])+(35468*L[O+12]>>16))),Io(y,w,1,0,$+K),Io(y,w,2,0,$-K),Io(y,w,3,0,U-ie),O++,w+=32}function Xl(d,h,y,w){var k=d[h+0]+4,O=35468*d[h+4]>>16,L=Li(d[h+4]),U=35468*d[h+1]>>16;$r(y,w,0,k+L,d=Li(d[h+1]),U),$r(y,w,1,k+O,d,U),$r(y,w,2,k-O,d,U),$r(y,w,3,k-L,d,U)}function Jl(d,h,y,w,k){Ko(d,h,y,w),k&&Ko(d,h+16,y,w+4)}function vs(d,h,y,w){Kd(d,h+0,y,w,1),Kd(d,h+32,y,w+128,1)}function Ln(d,h,y,w){var k;for(d=d[h+0]+4,k=0;4>k;++k)for(h=0;4>h;++h)Io(y,w,h,k,d)}function dl(d,h,y,w){d[h+0]&&Vn(d,h+0,y,w),d[h+16]&&Vn(d,h+16,y,w+4),d[h+32]&&Vn(d,h+32,y,w+128),d[h+48]&&Vn(d,h+48,y,w+128+4)}function Xs(d,h,y,w){var k,O=o(16);for(k=0;4>k;++k){var L=d[h+0+k]+d[h+12+k],U=d[h+4+k]+d[h+8+k],$=d[h+4+k]-d[h+8+k],K=d[h+0+k]-d[h+12+k];O[0+k]=L+U,O[8+k]=L-U,O[4+k]=K+$,O[12+k]=K-$}for(k=0;4>k;++k)L=(d=O[0+4*k]+3)+O[3+4*k],U=O[1+4*k]+O[2+4*k],$=O[1+4*k]-O[2+4*k],K=d-O[3+4*k],y[w+0]=L+U>>3,y[w+16]=K+$>>3,y[w+32]=L-U>>3,y[w+48]=K-$>>3,w+=64}function ys(d,h,y){var w,k=h-32,O=Es,L=255-d[k-1];for(w=0;w<y;++w){var U,$=O,K=L+d[h-1];for(U=0;U<y;++U)d[h+U]=$[K+d[k+U]];h+=32}}function ym(d,h){ys(d,h,4)}function Sh(d,h){ys(d,h,8)}function _m(d,h){ys(d,h,16)}function $d(d,h){var y;for(y=0;16>y;++y)r(d,h+32*y,d,h-32,16)}function Ah(d,h){var y;for(y=16;0<y;--y)i(d,h,d[h-1],16),h+=32}function _s(d,h,y){var w;for(w=0;16>w;++w)i(h,y+32*w,d,16)}function fl(d,h){var y,w=16;for(y=0;16>y;++y)w+=d[h-1+32*y]+d[h+y-32];_s(w>>5,d,h)}function Ji(d,h){var y,w=8;for(y=0;16>y;++y)w+=d[h-1+32*y];_s(w>>4,d,h)}function eu(d,h){var y,w=8;for(y=0;16>y;++y)w+=d[h+y-32];_s(w>>4,d,h)}function Dh(d,h){_s(128,d,h)}function qt(d,h,y){return d+2*h+y+2>>2}function hc(d,h){var y,w=h-32;for(w=new Uint8Array([qt(d[w-1],d[w+0],d[w+1]),qt(d[w+0],d[w+1],d[w+2]),qt(d[w+1],d[w+2],d[w+3]),qt(d[w+2],d[w+3],d[w+4])]),y=0;4>y;++y)r(d,h+32*y,w,0,w.length)}function wm(d,h){var y=d[h-1],w=d[h-1+32],k=d[h-1+64],O=d[h-1+96];ze(d,h+0,16843009*qt(d[h-1-32],y,w)),ze(d,h+32,16843009*qt(y,w,k)),ze(d,h+64,16843009*qt(w,k,O)),ze(d,h+96,16843009*qt(k,O,O))}function bm(d,h){var y,w=4;for(y=0;4>y;++y)w+=d[h+y-32]+d[h-1+32*y];for(w>>=3,y=0;4>y;++y)i(d,h+32*y,w,4)}function Ia(d,h){var y=d[h-1+0],w=d[h-1+32],k=d[h-1+64],O=d[h-1-32],L=d[h+0-32],U=d[h+1-32],$=d[h+2-32],K=d[h+3-32];d[h+0+96]=qt(w,k,d[h-1+96]),d[h+1+96]=d[h+0+64]=qt(y,w,k),d[h+2+96]=d[h+1+64]=d[h+0+32]=qt(O,y,w),d[h+3+96]=d[h+2+64]=d[h+1+32]=d[h+0+0]=qt(L,O,y),d[h+3+64]=d[h+2+32]=d[h+1+0]=qt(U,L,O),d[h+3+32]=d[h+2+0]=qt($,U,L),d[h+3+0]=qt(K,$,U)}function Ti(d,h){var y=d[h+1-32],w=d[h+2-32],k=d[h+3-32],O=d[h+4-32],L=d[h+5-32],U=d[h+6-32],$=d[h+7-32];d[h+0+0]=qt(d[h+0-32],y,w),d[h+1+0]=d[h+0+32]=qt(y,w,k),d[h+2+0]=d[h+1+32]=d[h+0+64]=qt(w,k,O),d[h+3+0]=d[h+2+32]=d[h+1+64]=d[h+0+96]=qt(k,O,L),d[h+3+32]=d[h+2+64]=d[h+1+96]=qt(O,L,U),d[h+3+64]=d[h+2+96]=qt(L,U,$),d[h+3+96]=qt(U,$,$)}function xm(d,h){var y=d[h-1+0],w=d[h-1+32],k=d[h-1+64],O=d[h-1-32],L=d[h+0-32],U=d[h+1-32],$=d[h+2-32],K=d[h+3-32];d[h+0+0]=d[h+1+64]=O+L+1>>1,d[h+1+0]=d[h+2+64]=L+U+1>>1,d[h+2+0]=d[h+3+64]=U+$+1>>1,d[h+3+0]=$+K+1>>1,d[h+0+96]=qt(k,w,y),d[h+0+64]=qt(w,y,O),d[h+0+32]=d[h+1+96]=qt(y,O,L),d[h+1+32]=d[h+2+96]=qt(O,L,U),d[h+2+32]=d[h+3+96]=qt(L,U,$),d[h+3+32]=qt(U,$,K)}function Em(d,h){var y=d[h+0-32],w=d[h+1-32],k=d[h+2-32],O=d[h+3-32],L=d[h+4-32],U=d[h+5-32],$=d[h+6-32],K=d[h+7-32];d[h+0+0]=y+w+1>>1,d[h+1+0]=d[h+0+64]=w+k+1>>1,d[h+2+0]=d[h+1+64]=k+O+1>>1,d[h+3+0]=d[h+2+64]=O+L+1>>1,d[h+0+32]=qt(y,w,k),d[h+1+32]=d[h+0+96]=qt(w,k,O),d[h+2+32]=d[h+1+96]=qt(k,O,L),d[h+3+32]=d[h+2+96]=qt(O,L,U),d[h+3+64]=qt(L,U,$),d[h+3+96]=qt(U,$,K)}function Js(d,h){var y=d[h-1+0],w=d[h-1+32],k=d[h-1+64],O=d[h-1+96];d[h+0+0]=y+w+1>>1,d[h+2+0]=d[h+0+32]=w+k+1>>1,d[h+2+32]=d[h+0+64]=k+O+1>>1,d[h+1+0]=qt(y,w,k),d[h+3+0]=d[h+1+32]=qt(w,k,O),d[h+3+32]=d[h+1+64]=qt(k,O,O),d[h+3+64]=d[h+2+64]=d[h+0+96]=d[h+1+96]=d[h+2+96]=d[h+3+96]=O}function pc(d,h){var y=d[h-1+0],w=d[h-1+32],k=d[h-1+64],O=d[h-1+96],L=d[h-1-32],U=d[h+0-32],$=d[h+1-32],K=d[h+2-32];d[h+0+0]=d[h+2+32]=y+L+1>>1,d[h+0+32]=d[h+2+64]=w+y+1>>1,d[h+0+64]=d[h+2+96]=k+w+1>>1,d[h+0+96]=O+k+1>>1,d[h+3+0]=qt(U,$,K),d[h+2+0]=qt(L,U,$),d[h+1+0]=d[h+3+32]=qt(y,L,U),d[h+1+32]=d[h+3+64]=qt(w,y,L),d[h+1+64]=d[h+3+96]=qt(k,w,y),d[h+1+96]=qt(O,k,w)}function gc(d,h){var y;for(y=0;8>y;++y)r(d,h+32*y,d,h-32,8)}function hl(d,h){var y;for(y=0;8>y;++y)i(d,h,d[h-1],8),h+=32}function So(d,h,y){var w;for(w=0;8>w;++w)i(h,y+32*w,d,8)}function Th(d,h){var y,w=8;for(y=0;8>y;++y)w+=d[h+y-32]+d[h-1+32*y];So(w>>4,d,h)}function pl(d,h){var y,w=4;for(y=0;8>y;++y)w+=d[h+y-32];So(w>>3,d,h)}function Xn(d,h){var y,w=4;for(y=0;8>y;++y)w+=d[h-1+32*y];So(w>>3,d,h)}function Mh(d,h){So(128,d,h)}function Sa(d,h,y){var w=d[h-y],k=d[h+0],O=3*(k-w)+yE[1020+d[h-2*y]-d[h+y]],L=e_[112+(O+4>>3)];d[h-y]=Es[255+w+e_[112+(O+3>>3)]],d[h+0]=Es[255+k-L]}function tu(d,h,y,w){var k=d[h+0],O=d[h+y];return ia[255+d[h-2*y]-d[h-y]]>w||ia[255+O-k]>w}function gl(d,h,y,w){return 4*ia[255+d[h-y]-d[h+0]]+ia[255+d[h-2*y]-d[h+y]]<=w}function nu(d,h,y,w,k){var O=d[h-3*y],L=d[h-2*y],U=d[h-y],$=d[h+0],K=d[h+y],ie=d[h+2*y],me=d[h+3*y];return 4*ia[255+U-$]+ia[255+L-K]>w?0:ia[255+d[h-4*y]-O]<=k&&ia[255+O-L]<=k&&ia[255+L-U]<=k&&ia[255+me-ie]<=k&&ia[255+ie-K]<=k&&ia[255+K-$]<=k}function ea(d,h,y,w){var k=2*w+1;for(w=0;16>w;++w)gl(d,h+w,y,k)&&Sa(d,h+w,y)}function ru(d,h,y,w){var k=2*w+1;for(w=0;16>w;++w)gl(d,h+w*y,1,k)&&Sa(d,h+w*y,1)}function Yo(d,h,y,w){var k;for(k=3;0<k;--k)ea(d,h+=4*y,y,w)}function qd(d,h,y,w){var k;for(k=3;0<k;--k)ru(d,h+=4,y,w)}function Aa(d,h,y,w,k,O,L,U){for(O=2*O+1;0<k--;){if(nu(d,h,y,O,L))if(tu(d,h,y,U))Sa(d,h,y);else{var $=d,K=h,ie=y,me=$[K-2*ie],Y=$[K-ie],se=$[K+0],de=$[K+ie],Ne=$[K+2*ie],ge=27*(Re=yE[1020+3*(se-Y)+yE[1020+me-de]])+63>>7,ke=18*Re+63>>7,Re=9*Re+63>>7;$[K-3*ie]=Es[255+$[K-3*ie]+Re],$[K-2*ie]=Es[255+me+ke],$[K-ie]=Es[255+Y+ge],$[K+0]=Es[255+se-ge],$[K+ie]=Es[255+de-ke],$[K+2*ie]=Es[255+Ne-Re]}h+=w}}function Ao(d,h,y,w,k,O,L,U){for(O=2*O+1;0<k--;){if(nu(d,h,y,O,L))if(tu(d,h,y,U))Sa(d,h,y);else{var $=d,K=h,ie=y,me=$[K-ie],Y=$[K+0],se=$[K+ie],de=e_[112+(4+(Ne=3*(Y-me))>>3)],Ne=e_[112+(Ne+3>>3)],ge=de+1>>1;$[K-2*ie]=Es[255+$[K-2*ie]+ge],$[K-ie]=Es[255+me+Ne],$[K+0]=Es[255+Y-de],$[K+ie]=Es[255+se-ge]}h+=w}}function Hd(d,h,y,w,k,O){Aa(d,h,y,1,16,w,k,O)}function Da(d,h,y,w,k,O){Aa(d,h,1,y,16,w,k,O)}function ml(d,h,y,w,k,O){var L;for(L=3;0<L;--L)Ao(d,h+=4*y,y,1,16,w,k,O)}function m(d,h,y,w,k,O){var L;for(L=3;0<L;--L)Ao(d,h+=4,1,y,16,w,k,O)}function P(d,h,y,w,k,O,L,U){Aa(d,h,k,1,8,O,L,U),Aa(y,w,k,1,8,O,L,U)}function W(d,h,y,w,k,O,L,U){Aa(d,h,1,k,8,O,L,U),Aa(y,w,1,k,8,O,L,U)}function ne(d,h,y,w,k,O,L,U){Ao(d,h+4*k,k,1,8,O,L,U),Ao(y,w+4*k,k,1,8,O,L,U)}function ue(d,h,y,w,k,O,L,U){Ao(d,h+4,1,k,8,O,L,U),Ao(y,w+4,1,k,8,O,L,U)}function Pe(){this.ba=new tn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new In,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ue(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ct(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function gt(){this.ua=0,this.Wa=new Nt,this.vb=new Nt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new we,this.yc=new D}function zt(){this.xb=this.a=0,this.l=new fc,this.ca=new tn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new gt,this.ab=0,this.gc=s(4,ct),this.Oc=0}function Wt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function _n(d,h,y,w,k,O,L){for(d=d==null?0:d[h+0],h=0;h<L;++h)k[O+h]=d+y[w+h]&255,d=k[O+h]}function lr(d,h,y,w,k,O,L){var U;if(d==null)_n(null,null,y,w,k,O,L);else for(U=0;U<L;++U)k[O+U]=d[h+U]+y[w+U]&255}function Jn(d,h,y,w,k,O,L){if(d==null)_n(null,null,y,w,k,O,L);else{var U,$=d[h+0],K=$,ie=$;for(U=0;U<L;++U)K=ie+($=d[h+U])-K,ie=y[w+U]+(-256&K?0>K?0:255:K)&255,K=$,k[O+U]=ie}}function zn(d,h,y,w){var k=h.width,O=h.o;if(e(d!=null&&h!=null),0>y||0>=w||y+w>O)return null;if(!d.Cc){if(d.ga==null){var L;if(d.ga=new Wt,(L=d.ga==null)||(L=h.width*h.o,e(d.Gb.length==0),d.Gb=o(L),d.Uc=0,d.Gb==null?L=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,L=1),L=!L),!L){L=d.ga;var U=d.Fa,$=d.P,K=d.qc,ie=d.mb,me=d.nb,Y=$+1,se=K-1,de=L.l;if(e(U!=null&&ie!=null&&h!=null),hu[0]=null,hu[1]=_n,hu[2]=lr,hu[3]=Jn,L.ca=ie,L.tb=me,L.c=h.width,L.i=h.height,e(0<L.c&&0<L.i),1>=K)h=0;else if(L.$a=3&U[$+0],L.Z=U[$+0]>>2&3,L.Lc=U[$+0]>>4&3,$=U[$+0]>>6&3,0>L.$a||1<L.$a||4<=L.Z||1<L.Lc||$)h=0;else if(de.put=Mt,de.ac=hs,de.bc=Ys,de.ma=L,de.width=h.width,de.height=h.height,de.Da=h.Da,de.v=h.v,de.va=h.va,de.j=h.j,de.o=h.o,L.$a)e:{e(L.$a==1),h=Qi();t:for(;;){if(h==null){h=0;break e}if(e(L!=null),L.mc=h,h.c=L.c,h.i=L.i,h.l=L.l,h.l.ma=L,h.l.width=L.c,h.l.height=L.i,h.a=0,Me(h.m,U,Y,se),!gs(L.c,L.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&ps(h.s)?(L.ic=1,U=h.c*h.i,h.Ta=null,h.Ua=0,h.V=o(U),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(L.ic=0,h=lc(h,L.c)),!h))break t;h=1;break e}L.mc=null,h=0}else h=se>=L.c*L.i;L=!h}if(L)return null;d.ga.Lc!=1?d.Ga=0:w=O-y}e(d.ga!=null),e(y+w<=O);e:{if(h=(U=d.ga).c,O=U.l.o,U.$a==0){if(Y=d.rc,se=d.Vc,de=d.Fa,$=d.P+1+y*h,K=d.mb,ie=d.nb+y*h,e($<=d.P+d.qc),U.Z!=0)for(e(hu[U.Z]!=null),L=0;L<w;++L)hu[U.Z](Y,se,de,$,K,ie,h),Y=K,se=ie,ie+=h,$+=h;else for(L=0;L<w;++L)r(K,ie,de,$,h),Y=K,se=ie,ie+=h,$+=h;d.rc=Y,d.Vc=se}else{if(e(U.mc!=null),h=y+w,e((L=U.mc)!=null),e(h<=L.i),L.C>=h)h=1;else if(U.ic||gr(),U.ic){U=L.V,Y=L.Ba,se=L.c;var Ne=L.i,ge=(de=1,$=L.$/se,K=L.$%se,ie=L.m,me=L.s,L.$),ke=se*Ne,Re=se*h,Ge=me.wc,$e=ge<Re?mi(me,K,$):null;e(ge<=ke),e(h<=Ne),e(ps(me));t:for(;;){for(;!ie.h&&ge<Re;){if(K&Ge||($e=mi(me,K,$)),e($e!=null),fe(ie),256>(Ne=Qn($e.G[0],$e.H[0],ie)))U[Y+ge]=Ne,++ge,++K>=se&&(K=0,++$<=h&&!($%16)&&Wo(L,$));else{if(!(280>Ne)){de=0;break t}Ne=xo(Ne-256,ie);var At,ut=Qn($e.G[4],$e.H[4],ie);if(fe(ie),!(ge>=(ut=Di(se,ut=xo(ut,ie)))&&ke-ge>=Ne)){de=0;break t}for(At=0;At<Ne;++At)U[Y+ge+At]=U[Y+ge+At-ut];for(ge+=Ne,K+=Ne;K>=se;)K-=se,++$<=h&&!($%16)&&Wo(L,$);ge<Re&&K&Ge&&($e=mi(me,K,$))}e(ie.h==re(ie))}Wo(L,$>h?h:$);break t}!de||ie.h&&ge<ke?(de=0,L.a=ie.h?5:3):L.$=ge,h=de}else h=Co(L,L.V,L.Ba,L.c,L.i,h,uc);if(!h){w=0;break e}}y+w>=O&&(d.Cc=1),w=1}if(!w)return null;if(d.Cc&&((w=d.ga)!=null&&(w.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+y*k}function Lr(d,h,y,w,k,O){for(;0<k--;){var L,U=d,$=h+(y?1:0),K=d,ie=h+(y?0:3);for(L=0;L<w;++L){var me=K[ie+4*L];me!=255&&(me*=32897,U[$+4*L+0]=U[$+4*L+0]*me>>23,U[$+4*L+1]=U[$+4*L+1]*me>>23,U[$+4*L+2]=U[$+4*L+2]*me>>23)}h+=O}}function Tr(d,h,y,w,k){for(;0<w--;){var O;for(O=0;O<y;++O){var L=d[h+2*O+0],U=15&(K=d[h+2*O+1]),$=4369*U,K=(240&K|K>>4)*$>>16;d[h+2*O+0]=(240&L|L>>4)*$>>16&240|(15&L|L<<4)*$>>16>>4&15,d[h+2*O+1]=240&K|U}h+=k}}function ai(d,h,y,w,k,O,L,U){var $,K,ie=255;for(K=0;K<k;++K){for($=0;$<w;++$){var me=d[h+$];O[L+4*$]=me,ie&=me}h+=y,L+=U}return ie!=255}function Zo(d,h,y,w,k){var O;for(O=0;O<k;++O)y[w+O]=d[h+O]>>8}function gr(){Nm=Lr,nk=Tr,rk=ai,ik=Zo}function ta(d,h,y){I[d]=function(w,k,O,L,U,$,K,ie,me,Y,se,de,Ne,ge,ke,Re,Ge){var $e,At=Ge-1>>1,ut=U[$+0]|K[ie+0]<<16,fn=me[Y+0]|se[de+0]<<16;e(w!=null);var _t=3*ut+fn+131074>>2;for(h(w[k+0],255&_t,_t>>16,Ne,ge),O!=null&&(_t=3*fn+ut+131074>>2,h(O[L+0],255&_t,_t>>16,ke,Re)),$e=1;$e<=At;++$e){var xn=U[$+$e]|K[ie+$e]<<16,yi=me[Y+$e]|se[de+$e]<<16,hn=ut+xn+fn+yi+524296,wt=hn+2*(xn+fn)>>3;_t=wt+ut>>1,ut=(hn=hn+2*(ut+yi)>>3)+xn>>1,h(w[k+2*$e-1],255&_t,_t>>16,Ne,ge+(2*$e-1)*y),h(w[k+2*$e-0],255&ut,ut>>16,Ne,ge+(2*$e-0)*y),O!=null&&(_t=hn+fn>>1,ut=wt+yi>>1,h(O[L+2*$e-1],255&_t,_t>>16,ke,Re+(2*$e-1)*y),h(O[L+2*$e+0],255&ut,ut>>16,ke,Re+(2*$e+0)*y)),ut=xn,fn=yi}1&Ge||(_t=3*ut+fn+131074>>2,h(w[k+Ge-1],255&_t,_t>>16,Ne,ge+(Ge-1)*y),O!=null&&(_t=3*fn+ut+131074>>2,h(O[L+Ge-1],255&_t,_t>>16,ke,Re+(Ge-1)*y)))}}function iu(){oa[t_]=Iz,oa[n_]=gk,oa[uk]=Sz,oa[r_]=mk,oa[i_]=vk,oa[_E]=yk,oa[dk]=Az,oa[wE]=gk,oa[bE]=mk,oa[o_]=vk,oa[xE]=yk}function ws(d){return d&~Dz?0>d?0:255:d>>_k}function f(d,h){return ws((19077*d>>8)+(26149*h>>8)-14234)}function _(d,h,y){return ws((19077*d>>8)-(6419*h>>8)-(13320*y>>8)+8708)}function x(d,h){return ws((19077*d>>8)+(33050*h>>8)-17685)}function B(d,h,y,w,k){w[k+0]=f(d,y),w[k+1]=_(d,h,y),w[k+2]=x(d,h)}function le(d,h,y,w,k){w[k+0]=x(d,h),w[k+1]=_(d,h,y),w[k+2]=f(d,y)}function be(d,h,y,w,k){var O=_(d,h,y);h=O<<3&224|x(d,h)>>3,w[k+0]=248&f(d,y)|O>>5,w[k+1]=h}function Ye(d,h,y,w,k){var O=240&x(d,h)|15;w[k+0]=240&f(d,y)|_(d,h,y)>>4,w[k+1]=O}function Dn(d,h,y,w,k){w[k+0]=255,B(d,h,y,w,k+1)}function Mr(d,h,y,w,k){le(d,h,y,w,k),w[k+3]=255}function Ht(d,h,y,w,k){B(d,h,y,w,k),w[k+3]=255}function ur(d,h,y){I[d]=function(w,k,O,L,U,$,K,ie,me){for(var Y=ie+(-2&me)*y;ie!=Y;)h(w[k+0],O[L+0],U[$+0],K,ie),h(w[k+1],O[L+0],U[$+0],K,ie+y),k+=2,++L,++$,ie+=2*y;1&me&&h(w[k+0],O[L+0],U[$+0],K,ie)}}function Nr(d,h,y){return y==0?d==0?h==0?6:5:h==0?4:0:y}function Ta(d,h,y,w,k){switch(d>>>30){case 3:Kd(h,y,w,k,0);break;case 2:ra(h,y,w,k);break;case 1:Vn(h,y,w,k)}}function wr(d,h){var y,w,k=h.M,O=h.Nb,L=d.oc,U=d.pc+40,$=d.oc,K=d.pc+584,ie=d.oc,me=d.pc+600;for(y=0;16>y;++y)L[U+32*y-1]=129;for(y=0;8>y;++y)$[K+32*y-1]=129,ie[me+32*y-1]=129;for(0<k?L[U-1-32]=$[K-1-32]=ie[me-1-32]=129:(i(L,U-32-1,127,21),i($,K-32-1,127,9),i(ie,me-32-1,127,9)),w=0;w<d.za;++w){var Y=h.ya[h.aa+w];if(0<w){for(y=-1;16>y;++y)r(L,U+32*y-4,L,U+32*y+12,4);for(y=-1;8>y;++y)r($,K+32*y-4,$,K+32*y+4,4),r(ie,me+32*y-4,ie,me+32*y+4,4)}var se=d.Gd,de=d.Hd+w,Ne=Y.ad,ge=Y.Hc;if(0<k&&(r(L,U-32,se[de].y,0,16),r($,K-32,se[de].f,0,8),r(ie,me-32,se[de].ea,0,8)),Y.Za){var ke=L,Re=U-32+16;for(0<k&&(w>=d.za-1?i(ke,Re,se[de].y[15],4):r(ke,Re,se[de+1].y,0,4)),y=0;4>y;y++)ke[Re+128+y]=ke[Re+256+y]=ke[Re+384+y]=ke[Re+0+y];for(y=0;16>y;++y,ge<<=2)ke=L,Re=U+bk[y],Ma[Y.Ob[y]](ke,Re),Ta(ge,Ne,16*+y,ke,Re)}else if(ke=Nr(w,k,Y.Ob[0]),fu[ke](L,U),ge!=0)for(y=0;16>y;++y,ge<<=2)Ta(ge,Ne,16*+y,L,U+bk[y]);for(y=Y.Gc,ke=Nr(w,k,Y.Dd),wl[ke]($,K),wl[ke](ie,me),ge=Ne,ke=$,Re=K,255&(Y=0|y)&&(170&Y?yc(ge,256,ke,Re):ir(ge,256,ke,Re)),Y=ie,ge=me,255&(y>>=8)&&(170&y?yc(Ne,320,Y,ge):ir(Ne,320,Y,ge)),k<d.Ub-1&&(r(se[de].y,0,L,U+480,16),r(se[de].f,0,$,K+224,8),r(se[de].ea,0,ie,me+224,8)),y=8*O*d.B,se=d.sa,de=d.ta+16*w+16*O*d.R,Ne=d.qa,Y=d.ra+8*w+y,ge=d.Ha,ke=d.Ia+8*w+y,y=0;16>y;++y)r(se,de+y*d.R,L,U+32*y,16);for(y=0;8>y;++y)r(Ne,Y+y*d.B,$,K+32*y,8),r(ge,ke+y*d.B,ie,me+32*y,8)}}function na(d,h,y,w,k,O,L,U,$){var K=[0],ie=[0],me=0,Y=$!=null?$.kd:0,se=$??new Ue;if(d==null||12>y)return 7;se.data=d,se.w=h,se.ha=y,h=[h],y=[y],se.gb=[se.gb];e:{var de=h,Ne=y,ge=se.gb;if(e(d!=null),e(Ne!=null),e(ge!=null),ge[0]=0,12<=Ne[0]&&!t(d,de[0],"RIFF")){if(t(d,de[0]+8,"WEBP")){ge=3;break e}var ke=lt(d,de[0]+4);if(12>ke||4294967286<ke){ge=3;break e}if(Y&&ke>Ne[0]-8){ge=7;break e}ge[0]=ke,de[0]+=12,Ne[0]-=12}ge=0}if(ge!=0)return ge;for(ke=0<se.gb[0],y=y[0];;){e:{var Re=d;Ne=h,ge=y;var Ge=K,$e=ie,At=de=[0];if((_t=me=[me])[0]=0,8>ge[0])ge=7;else{if(!t(Re,Ne[0],"VP8X")){if(lt(Re,Ne[0]+4)!=10){ge=3;break e}if(18>ge[0]){ge=7;break e}var ut=lt(Re,Ne[0]+8),fn=1+Je(Re,Ne[0]+12);if(2147483648<=fn*(Re=1+Je(Re,Ne[0]+15))){ge=3;break e}At!=null&&(At[0]=ut),Ge!=null&&(Ge[0]=fn),$e!=null&&($e[0]=Re),Ne[0]+=18,ge[0]-=18,_t[0]=1}ge=0}}if(me=me[0],de=de[0],ge!=0)return ge;if(Ne=!!(2&de),!ke&&me)return 3;if(O!=null&&(O[0]=!!(16&de)),L!=null&&(L[0]=Ne),U!=null&&(U[0]=0),L=K[0],de=ie[0],me&&Ne&&$==null){ge=0;break}if(4>y){ge=7;break}if(ke&&me||!ke&&!me&&!t(d,h[0],"ALPH")){y=[y],se.na=[se.na],se.P=[se.P],se.Sa=[se.Sa];e:{ut=d,ge=h,ke=y;var _t=se.gb;Ge=se.na,$e=se.P,At=se.Sa,fn=22,e(ut!=null),e(ke!=null),Re=ge[0];var xn=ke[0];for(e(Ge!=null),e(At!=null),Ge[0]=null,$e[0]=null,At[0]=0;;){if(ge[0]=Re,ke[0]=xn,8>xn){ge=7;break e}var yi=lt(ut,Re+4);if(4294967286<yi){ge=3;break e}var hn=8+yi+1&-2;if(fn+=hn,0<_t&&fn>_t){ge=3;break e}if(!t(ut,Re,"VP8 ")||!t(ut,Re,"VP8L")){ge=0;break e}if(xn[0]<hn){ge=7;break e}t(ut,Re,"ALPH")||(Ge[0]=ut,$e[0]=Re+8,At[0]=yi),Re+=hn,xn-=hn}}if(y=y[0],se.na=se.na[0],se.P=se.P[0],se.Sa=se.Sa[0],ge!=0)break}y=[y],se.Ja=[se.Ja],se.xa=[se.xa];e:if(_t=d,ge=h,ke=y,Ge=se.gb[0],$e=se.Ja,At=se.xa,ut=ge[0],Re=!t(_t,ut,"VP8 "),fn=!t(_t,ut,"VP8L"),e(_t!=null),e(ke!=null),e($e!=null),e(At!=null),8>ke[0])ge=7;else{if(Re||fn){if(_t=lt(_t,ut+4),12<=Ge&&_t>Ge-12){ge=3;break e}if(Y&&_t>ke[0]-8){ge=7;break e}$e[0]=_t,ge[0]+=8,ke[0]-=8,At[0]=fn}else At[0]=5<=ke[0]&&_t[ut+0]==47&&!(_t[ut+4]>>5),$e[0]=ke[0];ge=0}if(y=y[0],se.Ja=se.Ja[0],se.xa=se.xa[0],h=h[0],ge!=0)break;if(4294967286<se.Ja)return 3;if(U==null||Ne||(U[0]=se.xa?2:1),L=[L],de=[de],se.xa){if(5>y){ge=7;break}U=L,Y=de,Ne=O,d==null||5>y?d=0:5<=y&&d[h+0]==47&&!(d[h+4]>>5)?(ke=[0],_t=[0],Ge=[0],Me($e=new G,d,h,y),pr($e,ke,_t,Ge)?(U!=null&&(U[0]=ke[0]),Y!=null&&(Y[0]=_t[0]),Ne!=null&&(Ne[0]=Ge[0]),d=1):d=0):d=0}else{if(10>y){ge=7;break}U=de,d==null||10>y||!Ud(d,h+3,y-3)?d=0:(Y=d[h+0]|d[h+1]<<8|d[h+2]<<16,Ne=16383&(d[h+7]<<8|d[h+6]),d=16383&(d[h+9]<<8|d[h+8]),1&Y||3<(Y>>1&7)||!(Y>>4&1)||Y>>5>=se.Ja||!Ne||!d?d=0:(L&&(L[0]=Ne),U&&(U[0]=d),d=1))}if(!d||(L=L[0],de=de[0],me&&(K[0]!=L||ie[0]!=de)))return 3;$!=null&&($[0]=se,$.offset=h-$.w,e(4294967286>h-$.w),e($.offset==$.ha-y));break}return ge==0||ge==7&&me&&$==null?(O!=null&&(O[0]|=se.na!=null&&0<se.na.length),w!=null&&(w[0]=L),k!=null&&(k[0]=de),0):ge}function vl(d,h,y){var w=h.width,k=h.height,O=0,L=0,U=w,$=k;if(h.Da=d!=null&&0<d.Da,h.Da&&(U=d.cd,$=d.bd,O=d.v,L=d.j,11>y||(O&=-2,L&=-2),0>O||0>L||0>=U||0>=$||O+U>w||L+$>k))return 0;if(h.v=O,h.j=L,h.va=O+U,h.o=L+$,h.U=U,h.T=$,h.da=d!=null&&0<d.da,h.da){if(!St(U,$,y=[d.ib],O=[d.hb]))return 0;h.ib=y[0],h.hb=O[0]}return h.ob=d!=null&&d.ob,h.Kb=d==null||!d.Sd,h.da&&(h.ob=h.ib<3*w/4&&h.hb<3*k/4,h.Kb=0),1}function Cm(d){if(d==null)return 2;if(11>d.S){var h=d.f.RGBA;h.fb+=(d.height-1)*h.A,h.A=-h.A}else h=d.f.kb,d=d.height,h.O+=(d-1)*h.fa,h.fa=-h.fa,h.N+=(d-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(d-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(d-1)*h.lb,h.lb=-h.lb);return 0}function ou(d,h,y,w){if(w==null||0>=d||0>=h)return 2;if(y!=null){if(y.Da){var k=y.cd,O=y.bd,L=-2&y.v,U=-2&y.j;if(0>L||0>U||0>=k||0>=O||L+k>d||U+O>h)return 2;d=k,h=O}if(y.da){if(!St(d,h,k=[y.ib],O=[y.hb]))return 2;d=k[0],h=O[0]}}w.width=d,w.height=h;e:{var $=w.width,K=w.height;if(d=w.S,0>=$||0>=K||!(d>=t_&&13>d))d=2;else{if(0>=w.Rd&&w.sd==null){L=O=k=h=0;var ie=(U=$*xk[d])*K;if(11>d||(O=(K+1)/2*(h=($+1)/2),d==12&&(L=(k=$)*K)),(K=o(ie+2*O+L))==null){d=1;break e}w.sd=K,11>d?(($=w.f.RGBA).eb=K,$.fb=0,$.A=U,$.size=ie):(($=w.f.kb).y=K,$.O=0,$.fa=U,$.Fd=ie,$.f=K,$.N=0+ie,$.Ab=h,$.Cd=O,$.ea=K,$.W=0+ie+O,$.Db=h,$.Ed=O,d==12&&($.F=K,$.J=0+ie+2*O),$.Tc=L,$.lb=k)}if(h=1,k=w.S,O=w.width,L=w.height,k>=t_&&13>k)if(11>k)d=w.f.RGBA,h&=(U=Math.abs(d.A))*(L-1)+O<=d.size,h&=U>=O*xk[k],h&=d.eb!=null;else{d=w.f.kb,U=(O+1)/2,ie=(L+1)/2,$=Math.abs(d.fa),K=Math.abs(d.Ab);var me=Math.abs(d.Db),Y=Math.abs(d.lb),se=Y*(L-1)+O;h&=$*(L-1)+O<=d.Fd,h&=K*(ie-1)+U<=d.Cd,h=(h&=me*(ie-1)+U<=d.Ed)&$>=O&K>=U&me>=U,h&=d.y!=null,h&=d.f!=null,h&=d.ea!=null,k==12&&(h&=Y>=O,h&=se<=d.Tc,h&=d.F!=null)}else h=0;d=h?0:2}}return d!=0||y!=null&&y.fd&&(d=Cm(w)),d}var Gd=64,bs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xs=24,su=32,yl=8,au=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];it("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(d){return d},I.Predictor2=function(d,h,y){return h[y+0]},I.Predictor3=function(d,h,y){return h[y+1]},I.Predictor4=function(d,h,y){return h[y-1]},I.Predictor5=function(d,h,y){return It(It(d,h[y+1]),h[y+0])},I.Predictor6=function(d,h,y){return It(d,h[y-1])},I.Predictor7=function(d,h,y){return It(d,h[y+0])},I.Predictor8=function(d,h,y){return It(h[y-1],h[y+0])},I.Predictor9=function(d,h,y){return It(h[y+0],h[y+1])},I.Predictor10=function(d,h,y){return It(It(d,h[y-1]),It(h[y+0],h[y+1]))},I.Predictor11=function(d,h,y){var w=h[y+0];return 0>=Ut(w>>24&255,d>>24&255,(h=h[y-1])>>24&255)+Ut(w>>16&255,d>>16&255,h>>16&255)+Ut(w>>8&255,d>>8&255,h>>8&255)+Ut(255&w,255&d,255&h)?w:d},I.Predictor12=function(d,h,y){var w=h[y+0];return(yn((d>>24&255)+(w>>24&255)-((h=h[y-1])>>24&255))<<24|yn((d>>16&255)+(w>>16&255)-(h>>16&255))<<16|yn((d>>8&255)+(w>>8&255)-(h>>8&255))<<8|yn((255&d)+(255&w)-(255&h)))>>>0},I.Predictor13=function(d,h,y){var w=h[y-1];return(en((d=It(d,h[y+0]))>>24&255,w>>24&255)<<24|en(d>>16&255,w>>16&255)<<16|en(d>>8&255,w>>8&255)<<8|en(255&d,255&w))>>>0};var Im=I.PredictorAdd0;I.PredictorAdd1=Lt,it("Predictor2","PredictorAdd2"),it("Predictor3","PredictorAdd3"),it("Predictor4","PredictorAdd4"),it("Predictor5","PredictorAdd5"),it("Predictor6","PredictorAdd6"),it("Predictor7","PredictorAdd7"),it("Predictor8","PredictorAdd8"),it("Predictor9","PredictorAdd9"),it("Predictor10","PredictorAdd10"),it("Predictor11","PredictorAdd11"),it("Predictor12","PredictorAdd12"),it("Predictor13","PredictorAdd13");var Nh=I.PredictorAdd2;Et("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var qr,Xy=I.ColorIndexInverseTransform,mc=I.MapARGB,vc=I.VP8LColorIndexInverseTransformAlpha,Sm=I.MapAlpha,Am=I.VP8LPredictorsAdd=[];Am.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Dm,Tm,cu,lu,uu,Wd,du,Kd,ra,yc,Vn,ir,Hr,vi,_l,Mm,Ph,Jy,ZP,QP,XP,JP,ek,tk,Nm,nk,rk,ik,ok=o(511),sk=o(2041),ak=o(225),ck=o(767),lk=0,yE=sk,e_=ak,Es=ck,ia=ok,t_=0,n_=1,uk=2,r_=3,i_=4,_E=5,dk=6,wE=7,bE=8,o_=9,xE=10,dz=[2,3,7],fz=[3,3,11],fk=[280,256,256,256,40],hz=[0,1,1,1,0],pz=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],gz=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],mz=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vz=8,EE=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],CE=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Pm=null,yz=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_z=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],hk=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],wz=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],bz=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xz=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ez=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],fu=[],Ma=[],wl=[],Cz=1,pk=2,hu=[],oa=[];ta("UpsampleRgbLinePair",B,3),ta("UpsampleBgrLinePair",le,3),ta("UpsampleRgbaLinePair",Ht,4),ta("UpsampleBgraLinePair",Mr,4),ta("UpsampleArgbLinePair",Dn,4),ta("UpsampleRgba4444LinePair",Ye,2),ta("UpsampleRgb565LinePair",be,2);var Iz=I.UpsampleRgbLinePair,Sz=I.UpsampleBgrLinePair,gk=I.UpsampleRgbaLinePair,mk=I.UpsampleBgraLinePair,vk=I.UpsampleArgbLinePair,yk=I.UpsampleRgba4444LinePair,Az=I.UpsampleRgb565LinePair,s_=16,a_=1<<s_-1,km=-227,IE=482,_k=6,Dz=(256<<_k)-1,wk=0,Tz=o(256),Mz=o(256),Nz=o(256),Pz=o(256),kz=o(IE-km),Rz=o(IE-km);ur("YuvToRgbRow",B,3),ur("YuvToBgrRow",le,3),ur("YuvToRgbaRow",Ht,4),ur("YuvToBgraRow",Mr,4),ur("YuvToArgbRow",Dn,4),ur("YuvToRgba4444Row",Ye,2),ur("YuvToRgb565Row",be,2);var bk=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],c_=[0,2,8],Oz=[8,7,6,4,4,2,2,2,1,1,1,1],Fz=1;this.WebPDecodeRGBA=function(d,h,y,w,k){var O=n_,L=new Pe,U=new tn;L.ba=U,U.S=O,U.width=[U.width],U.height=[U.height];var $=U.width,K=U.height,ie=new Rt;if(ie==null||d==null)var me=2;else e(ie!=null),me=na(d,h,y,ie.width,ie.height,ie.Pd,ie.Qd,ie.format,null);if(me!=0?$=0:($!=null&&($[0]=ie.width[0]),K!=null&&(K[0]=ie.height[0]),$=1),$){U.width=U.width[0],U.height=U.height[0],w!=null&&(w[0]=U.width),k!=null&&(k[0]=U.height);e:{if(w=new fc,(k=new Ue).data=d,k.w=h,k.ha=y,k.kd=1,h=[0],e(k!=null),((d=na(k.data,k.w,k.ha,null,null,null,h,null,k))==0||d==7)&&h[0]&&(d=4),(h=d)==0){if(e(L!=null),w.data=k.data,w.w=k.w+k.offset,w.ha=k.ha-k.offset,w.put=Mt,w.ac=hs,w.bc=Ys,w.ma=L,k.xa){if((d=Qi())==null){L=1;break e}if((function(Y,se){var de=[0],Ne=[0],ge=[0];t:for(;;){if(Y==null)return 0;if(se==null)return Y.a=2,0;if(Y.l=se,Y.a=0,Me(Y.m,se.data,se.w,se.ha),!pr(Y.m,de,Ne,ge)){Y.a=3;break t}if(Y.xb=pk,se.width=de[0],se.height=Ne[0],!gs(de[0],Ne[0],1,Y,null))break t;return 1}return e(Y.a!=0),0})(d,w)){if(w=(h=ou(w.width,w.height,L.Oa,L.ba))==0){t:{w=d;n:for(;;){if(w==null){w=0;break t}if(e(w.s.yc!=null),e(w.s.Ya!=null),e(0<w.s.Wb),e((y=w.l)!=null),e((k=y.ma)!=null),w.xb!=0){if(w.ca=k.ba,w.tb=k.tb,e(w.ca!=null),!vl(k.Oa,y,r_)){w.a=2;break n}if(!lc(w,y.width)||y.da)break n;if((y.da||Ot(w.ca.S))&&gr(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&gr()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!q(w.s.vb,w.s.Wa.Xa)){w.a=1;break n}w.xb=0}if(!Co(w,w.V,w.Ba,w.c,w.i,y.o,cc))break n;k.Dc=w.Ma,w=1;break t}e(w.a!=0),w=0}w=!w}w&&(h=d.a)}else h=d.a}else{if((d=new Bd)==null){L=1;break e}if(d.Fa=k.na,d.P=k.P,d.qc=k.Sa,Qs(d,w)){if((h=ou(w.width,w.height,L.Oa,L.ba))==0){if(d.Aa=0,y=L.Oa,e((k=d)!=null),y!=null){if(0<($=0>($=y.Md)?0:100<$?255:255*$/100)){for(K=ie=0;4>K;++K)12>(me=k.pb[K]).lc&&(me.ia=$*Oz[0>me.lc?0:me.lc]>>3),ie|=me.ia;ie&&(alert("todo:VP8InitRandom"),k.ia=1)}k.Ga=y.Id,100<k.Ga?k.Ga=100:0>k.Ga&&(k.Ga=0)}(function(Y,se){if(Y==null)return 0;if(se==null)return Dr(Y,2,"NULL VP8Io parameter in VP8Decode().");if(!Y.cb&&!Qs(Y,se))return 0;if(e(Y.cb),se.ac==null||se.ac(se)){se.ob&&(Y.L=0);var de=c_[Y.L];if(Y.L==2?(Y.yb=0,Y.zb=0):(Y.yb=se.v-de>>4,Y.zb=se.j-de>>4,0>Y.yb&&(Y.yb=0),0>Y.zb&&(Y.zb=0)),Y.Va=se.o+15+de>>4,Y.Hb=se.va+15+de>>4,Y.Hb>Y.za&&(Y.Hb=Y.za),Y.Va>Y.Ub&&(Y.Va=Y.Ub),0<Y.L){var Ne=Y.ed;for(de=0;4>de;++de){var ge;if(Y.Qa.Cb){var ke=Y.Qa.Lb[de];Y.Qa.Fb||(ke+=Ne.Tb)}else ke=Ne.Tb;for(ge=0;1>=ge;++ge){var Re=Y.gd[de][ge],Ge=ke;if(Ne.Pc&&(Ge+=Ne.vd[0],ge&&(Ge+=Ne.od[0])),0<(Ge=0>Ge?0:63<Ge?63:Ge)){var $e=Ge;0<Ne.wb&&($e=4<Ne.wb?$e>>2:$e>>1)>9-Ne.wb&&($e=9-Ne.wb),1>$e&&($e=1),Re.dd=$e,Re.tc=2*Ge+$e,Re.ld=40<=Ge?2:15<=Ge?1:0}else Re.tc=0;Re.La=ge}}}de=0}else Dr(Y,6,"Frame setup failed"),de=Y.a;if(de=de==0){if(de){Y.$c=0,0<Y.Aa||(Y.Ic=Fz);t:{de=Y.Ic,Ne=4*($e=Y.za);var At=32*$e,ut=$e+1,fn=0<Y.L?$e*(0<Y.Aa?2:1):0,_t=(Y.Aa==2?2:1)*$e;if((Re=Ne+832+(ge=3*(16*de+c_[Y.L])/2*At)+(ke=Y.Fa!=null&&0<Y.Fa.length?Y.Kc.c*Y.Kc.i:0))!=Re)de=0;else{if(Re>Y.Vb){if(Y.Vb=0,Y.Ec=o(Re),Y.Fc=0,Y.Ec==null){de=Dr(Y,1,"no memory during frame initialization.");break t}Y.Vb=Re}Re=Y.Ec,Ge=Y.Fc,Y.Ac=Re,Y.Bc=Ge,Ge+=Ne,Y.Gd=s(At,Vd),Y.Hd=0,Y.rb=s(ut+1,Ca),Y.sb=1,Y.wa=fn?s(fn,Xi):null,Y.Y=0,Y.D.Nb=0,Y.D.wa=Y.wa,Y.D.Y=Y.Y,0<Y.Aa&&(Y.D.Y+=$e),e(!0),Y.oc=Re,Y.pc=Ge,Ge+=832,Y.ya=s(_t,ul),Y.aa=0,Y.D.ya=Y.ya,Y.D.aa=Y.aa,Y.Aa==2&&(Y.D.aa+=$e),Y.R=16*$e,Y.B=8*$e,$e=(At=c_[Y.L])*Y.R,At=At/2*Y.B,Y.sa=Re,Y.ta=Ge+$e,Y.qa=Y.sa,Y.ra=Y.ta+16*de*Y.R+At,Y.Ha=Y.qa,Y.Ia=Y.ra+8*de*Y.B+At,Y.$c=0,Ge+=ge,Y.mb=ke?Re:null,Y.nb=ke?Ge:null,e(Ge+ke<=Y.Fc+Y.Vb),zd(Y),i(Y.Ac,Y.Bc,0,Ne),de=1}}if(de){if(se.ka=0,se.y=Y.sa,se.O=Y.ta,se.f=Y.qa,se.N=Y.ra,se.ea=Y.Ha,se.Vd=Y.Ia,se.fa=Y.R,se.Rc=Y.B,se.F=null,se.J=0,!lk){for(de=-255;255>=de;++de)ok[255+de]=0>de?-de:de;for(de=-1020;1020>=de;++de)sk[1020+de]=-128>de?-128:127<de?127:de;for(de=-112;112>=de;++de)ak[112+de]=-16>de?-16:15<de?15:de;for(de=-255;510>=de;++de)ck[255+de]=0>de?0:255<de?255:de;lk=1}du=Xs,Kd=Jl,yc=vs,Vn=Ln,ir=dl,ra=Xl,Hr=Hd,vi=Da,_l=P,Mm=W,Ph=ml,Jy=m,ZP=ne,QP=ue,XP=ea,JP=ru,ek=Yo,tk=qd,Ma[0]=bm,Ma[1]=ym,Ma[2]=hc,Ma[3]=wm,Ma[4]=Ia,Ma[5]=xm,Ma[6]=Ti,Ma[7]=Em,Ma[8]=pc,Ma[9]=Js,fu[0]=fl,fu[1]=_m,fu[2]=$d,fu[3]=Ah,fu[4]=Ji,fu[5]=eu,fu[6]=Dh,wl[0]=Th,wl[1]=Sh,wl[2]=gc,wl[3]=hl,wl[4]=Xn,wl[5]=pl,wl[6]=Mh,de=1}else de=0}de&&(de=(function(xn,yi){for(xn.M=0;xn.M<xn.Va;++xn.M){var hn,wt=xn.Jc[xn.M&xn.Xb],et=xn.m,Gr=xn;for(hn=0;hn<Gr.za;++hn){var on=et,Sn=Gr,mr=Sn.Ac,Vi=Sn.Bc+4*hn,Do=Sn.zc,Vr=Sn.ya[Sn.aa+hn];if(Sn.Qa.Bb?Vr.$b=Te(on,Sn.Pa.jb[0])?2+Te(on,Sn.Pa.jb[2]):Te(on,Sn.Pa.jb[1]):Vr.$b=0,Sn.kc&&(Vr.Ad=Te(on,Sn.Bd)),Vr.Za=!Te(on,145)+0,Vr.Za){var eo=Vr.Ob,To=0;for(Sn=0;4>Sn;++Sn){var _i,Tn=Do[0+Sn];for(_i=0;4>_i;++_i){Tn=bz[mr[Vi+_i]][Tn];for(var $n=hk[Te(on,Tn[0])];0<$n;)$n=hk[2*$n+Te(on,Tn[$n])];Tn=-$n,mr[Vi+_i]=Tn}r(eo,To,mr,Vi,4),To+=4,Do[0+Sn]=Tn}}else Tn=Te(on,156)?Te(on,128)?1:3:Te(on,163)?2:0,Vr.Ob[0]=Tn,i(mr,Vi,Tn,4),i(Do,0,Tn,4);Vr.Dd=Te(on,142)?Te(on,114)?Te(on,183)?1:3:2:0}if(Gr.m.Ka)return Dr(xn,7,"Premature end-of-partition0 encountered.");for(;xn.ja<xn.za;++xn.ja){if(Gr=wt,on=(et=xn).rb[et.sb-1],mr=et.rb[et.sb+et.ja],hn=et.ya[et.aa+et.ja],Vi=et.kc?hn.Ad:0)on.la=mr.la=0,hn.Za||(on.Na=mr.Na=0),hn.Hc=0,hn.Gc=0,hn.ia=0;else{var jr,qn;if(on=mr,mr=Gr,Vi=et.Pa.Xc,Do=et.ya[et.aa+et.ja],Vr=et.pb[Do.$b],Sn=Do.ad,eo=0,To=et.rb[et.sb-1],Tn=_i=0,i(Sn,eo,0,384),Do.Za)var ji=0,Na=Vi[3];else{$n=o(16);var Wr=on.Na+To.Na;if(Wr=Pm(mr,Vi[1],Wr,Vr.Eb,0,$n,0),on.Na=To.Na=(0<Wr)+0,1<Wr)du($n,0,Sn,eo);else{var Qo=$n[0]+3>>3;for($n=0;256>$n;$n+=16)Sn[eo+$n]=Qo}ji=1,Na=Vi[0]}var or=15&on.la,wi=15&To.la;for($n=0;4>$n;++$n){var Cs=1&wi;for(Qo=qn=0;4>Qo;++Qo)or=or>>1|(Cs=(Wr=Pm(mr,Na,Wr=Cs+(1&or),Vr.Sc,ji,Sn,eo))>ji)<<7,qn=qn<<2|(3<Wr?3:1<Wr?2:Sn[eo+0]!=0),eo+=16;or>>=4,wi=wi>>1|Cs<<7,_i=(_i<<8|qn)>>>0}for(Na=or,ji=wi>>4,jr=0;4>jr;jr+=2){for(qn=0,or=on.la>>4+jr,wi=To.la>>4+jr,$n=0;2>$n;++$n){for(Cs=1&wi,Qo=0;2>Qo;++Qo)Wr=Cs+(1&or),or=or>>1|(Cs=0<(Wr=Pm(mr,Vi[2],Wr,Vr.Qc,0,Sn,eo)))<<3,qn=qn<<2|(3<Wr?3:1<Wr?2:Sn[eo+0]!=0),eo+=16;or>>=2,wi=wi>>1|Cs<<5}Tn|=qn<<4*jr,Na|=or<<4<<jr,ji|=(240&wi)<<jr}on.la=Na,To.la=ji,Do.Hc=_i,Do.Gc=Tn,Do.ia=43690&Tn?0:Vr.ia,Vi=!(_i|Tn)}if(0<et.L&&(et.wa[et.Y+et.ja]=et.gd[hn.$b][hn.Za],et.wa[et.Y+et.ja].La|=!Vi),Gr.Ka)return Dr(xn,7,"Premature end-of-file encountered.")}if(zd(xn),et=yi,Gr=1,hn=(wt=xn).D,on=0<wt.L&&wt.M>=wt.zb&&wt.M<=wt.Va,wt.Aa==0)t:{if(hn.M=wt.M,hn.uc=on,wr(wt,hn),Gr=1,hn=(qn=wt.D).Nb,on=(Tn=c_[wt.L])*wt.R,mr=Tn/2*wt.B,$n=16*hn*wt.R,Qo=8*hn*wt.B,Vi=wt.sa,Do=wt.ta-on+$n,Vr=wt.qa,Sn=wt.ra-mr+Qo,eo=wt.Ha,To=wt.Ia-mr+Qo,wi=(or=qn.M)==0,_i=or>=wt.Va-1,wt.Aa==2&&wr(wt,qn),qn.uc)for(Cs=(Wr=wt).D.M,e(Wr.D.uc),qn=Wr.yb;qn<Wr.Hb;++qn){ji=qn,Na=Cs;var Mo=(Is=(Bi=Wr).D).Nb;jr=Bi.R;var Is=Is.wa[Is.Y+ji],Ss=Bi.sa,Xo=Bi.ta+16*Mo*jr+16*ji,As=Is.dd,dr=Is.tc;if(dr!=0)if(e(3<=dr),Bi.L==1)0<ji&&JP(Ss,Xo,jr,dr+4),Is.La&&tk(Ss,Xo,jr,dr),0<Na&&XP(Ss,Xo,jr,dr+4),Is.La&&ek(Ss,Xo,jr,dr);else{var Ds=Bi.B,Pa=Bi.qa,Yd=Bi.ra+8*Mo*Ds+8*ji,bl=Bi.Ha,Bi=Bi.Ia+8*Mo*Ds+8*ji;Mo=Is.ld,0<ji&&(vi(Ss,Xo,jr,dr+4,As,Mo),Mm(Pa,Yd,bl,Bi,Ds,dr+4,As,Mo)),Is.La&&(Jy(Ss,Xo,jr,dr,As,Mo),QP(Pa,Yd,bl,Bi,Ds,dr,As,Mo)),0<Na&&(Hr(Ss,Xo,jr,dr+4,As,Mo),_l(Pa,Yd,bl,Bi,Ds,dr+4,As,Mo)),Is.La&&(Ph(Ss,Xo,jr,dr,As,Mo),ZP(Pa,Yd,bl,Bi,Ds,dr,As,Mo))}}if(wt.ia&&alert("todo:DitherRow"),et.put!=null){if(qn=16*or,or=16*(or+1),wi?(et.y=wt.sa,et.O=wt.ta+$n,et.f=wt.qa,et.N=wt.ra+Qo,et.ea=wt.Ha,et.W=wt.Ia+Qo):(qn-=Tn,et.y=Vi,et.O=Do,et.f=Vr,et.N=Sn,et.ea=eo,et.W=To),_i||(or-=Tn),or>et.o&&(or=et.o),et.F=null,et.J=null,wt.Fa!=null&&0<wt.Fa.length&&qn<or&&(et.J=zn(wt,et,qn,or-qn),et.F=wt.mb,et.F==null&&et.F.length==0)){Gr=Dr(wt,3,"Could not decode alpha data.");break t}qn<et.j&&(Tn=et.j-qn,qn=et.j,e(!(1&Tn)),et.O+=wt.R*Tn,et.N+=wt.B*(Tn>>1),et.W+=wt.B*(Tn>>1),et.F!=null&&(et.J+=et.width*Tn)),qn<or&&(et.O+=et.v,et.N+=et.v>>1,et.W+=et.v>>1,et.F!=null&&(et.J+=et.v),et.ka=qn-et.j,et.U=et.va-et.v,et.T=or-qn,Gr=et.put(et))}hn+1!=wt.Ic||_i||(r(wt.sa,wt.ta-on,Vi,Do+16*wt.R,on),r(wt.qa,wt.ra-mr,Vr,Sn+8*wt.B,mr),r(wt.Ha,wt.Ia-mr,eo,To+8*wt.B,mr))}if(!Gr)return Dr(xn,6,"Output aborted.")}return 1})(Y,se)),se.bc!=null&&se.bc(se),de&=1}return de?(Y.cb=0,de):0})(d,w)||(h=d.a)}}else h=d.a}h==0&&L.Oa!=null&&L.Oa.fd&&(h=Cm(L.ba))}L=h}O=L!=0?null:11>O?U.f.RGBA.eb:U.f.kb.y}else O=null;return O};var xk=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(I,V){for(var b="",S=0;S<4;S++)b+=String.fromCharCode(I[V++]);return b}function u(I,V){return I[V+0]|I[V+1]<<8}function p(I,V){return(I[V+0]|I[V+1]<<8|I[V+2]<<16)>>>0}function v(I,V){return(I[V+0]|I[V+1]<<8|I[V+2]<<16|I[V+3]<<24)>>>0}new c;var g=[0],E=[0],C=[],M=new c,N=n,Q=(function(I,V){var b={},S=0,D=!1,te=0,we=0;if(b.frames=[],!(function(F,G){for(var J=0;J<4;J++)if(F[G+J]!="RIFF".charCodeAt(J))return!0;return!1})(I,V)){for(v(I,V+=4),V+=8;V<I.length;){var De=l(I,V),Se=v(I,V+=4);V+=4;var he=Se+(1&Se);switch(De){case"VP8 ":case"VP8L":b.frames[S]===void 0&&(b.frames[S]={}),(Le=b.frames[S]).src_off=D?we:V-8,Le.src_size=te+Se+8,S++,D&&(D=!1,te=0,we=0);break;case"VP8X":(Le=b.header={}).feature_flags=I[V];var Me=V+4;Le.canvas_width=1+p(I,Me),Me+=3,Le.canvas_height=1+p(I,Me),Me+=3;break;case"ALPH":D=!0,te=he+8,we=V-8;break;case"ANIM":(Le=b.header).bgcolor=v(I,V),Me=V+4,Le.loop_count=u(I,Me),Me+=2;break;case"ANMF":var Ke,Le;(Le=b.frames[S]={}).offset_x=2*p(I,V),V+=3,Le.offset_y=2*p(I,V),V+=3,Le.width=1+p(I,V),V+=3,Le.height=1+p(I,V),V+=3,Le.duration=p(I,V),V+=3,Ke=I[V++],Le.dispose=1&Ke,Le.blend=Ke>>1&1}De!="ANMF"&&(V+=he)}return b}})(N,0);Q.response=N,Q.rgbaoutput=!0,Q.dataurl=!1;var j=Q.header?Q.header:null,H=Q.frames?Q.frames:null;if(j){j.loop_counter=j.loop_count,g=[j.canvas_height],E=[j.canvas_width];for(var oe=0;oe<H.length&&H[oe].blend!=0;oe++);}var pe=H[0],z=M.WebPDecodeRGBA(N,pe.src_off,pe.src_size,E,g);pe.rgba=z,pe.imgwidth=E[0],pe.imgheight=g[0];for(var T=0;T<E[0]*g[0]*4;T++)C[T]=z[T];return this.width=E,this.height=g,this.data=C,this}(function(n){var e,t,r,i,o,s,a,c,l,u=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new s,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new s,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,l=new u}]);var p=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=F;Object.defineProperty(this,"pdf",{get:function(){return G}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(q){J=!!q}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(q){re=!!q}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(q){isNaN(q)||(ae=q)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(q){isNaN(q)||(fe=q)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(q){var He;typeof q=="number"?He=[q,q,q,q]:((He=new Array(4))[0]=q[0],He[1]=q.length>=2?q[1]:He[0],He[2]=q.length>=3?q[2]:He[0],He[3]=q.length>=4?q[3]:He[1]),l.margin=He}});var Ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ie},set:function(q){Ie=q}});var _e=0;Object.defineProperty(this,"lastBreak",{get:function(){return _e},set:function(q){_e=q}});var Te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Te},set:function(q){Te=q}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(q){q instanceof u&&(l=q)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(q){l.path=q}});var ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return ze},set:function(q){ze=q}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(q){var He;He=v(q),this.ctx.fillStyle=He.style,this.ctx.isFillTransparent=He.a===0,this.ctx.fillOpacity=He.a,this.pdf.setFillColor(He.r,He.g,He.b,{a:He.a}),this.pdf.setTextColor(He.r,He.g,He.b,{a:He.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(q){var He=v(q);this.ctx.strokeStyle=He.style,this.ctx.isStrokeTransparent=He.a===0,this.ctx.strokeOpacity=He.a,He.a===0?this.pdf.setDrawColor(255,255,255):(He.a,this.pdf.setDrawColor(He.r,He.g,He.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(q){["butt","round","square"].indexOf(q)!==-1&&(this.ctx.lineCap=q,this.pdf.setLineCap(q))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(q){isNaN(q)||(this.ctx.lineWidth=q,this.pdf.setLineWidth(q))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(q){["bevel","round","miter"].indexOf(q)!==-1&&(this.ctx.lineJoin=q,this.pdf.setLineJoin(q))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(q){isNaN(q)||(this.ctx.miterLimit=q,this.pdf.setMiterLimit(q))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(q){this.ctx.textBaseline=q}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(q){["right","end","center","left","start"].indexOf(q)!==-1&&(this.ctx.textAlign=q)}});var Qe=null,Je=null,lt=null;Object.defineProperty(this,"fontFaces",{get:function(){return lt},set:function(q){Qe=null,Je=null,lt=q}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(q){var He;if(this.ctx.font=q,(He=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(q))!==null){var Nt=He[1];He[2];var St=He[3],je=He[4];He[5];var pt=He[6],it=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(je)[2];je=Math.floor(it==="px"?parseFloat(je)*this.pdf.internal.scaleFactor:it==="em"?parseFloat(je)*this.pdf.getFontSize():parseFloat(je)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(je);var Dt=(function(Et){var Ar,vn,sn=[],an=Et.trim();if(an==="")return FN;if(an in $B)return[$B[an]];for(;an!=="";){switch(vn=null,Ar=(an=HB(an)).charAt(0)){case'"':case"'":vn=Foe(an.substring(1),Ar);break;default:vn=Loe(an)}if(vn===null||(sn.push(vn[0]),(an=HB(vn[1]))!==""&&an.charAt(0)!==","))return FN;an=an.replace(/^,/,"")}return sn})(pt);if(this.fontFaces){var It=(function(Et,Ar){var vn=Et.getFontList(),sn=JSON.stringify(vn);if(Qe===null||Je!==sn){var an=(function(Yn){var Pt=[];return Object.keys(Yn).forEach(function(Zn){Yn[Zn].forEach(function(Ot){var Yt=null;switch(Ot){case"bold":Yt={family:Zn,weight:"bold"};break;case"italic":Yt={family:Zn,style:"italic"};break;case"bolditalic":Yt={family:Zn,weight:"bold",style:"italic"};break;case"":case"normal":Yt={family:Zn}}Yt!==null&&(Yt.ref={name:Zn,style:Ot},Pt.push(Yt))})}),Pt})(vn);Qe=(function(Yn){for(var Pt={},Zn=0;Zn<Yn.length;++Zn){var Ot=ON(Yn[Zn]),Yt=Ot.family,rr=Ot.stretch,tn=Ot.style,Rt=Ot.weight;Pt[Yt]=Pt[Yt]||{},Pt[Yt][rr]=Pt[Yt][rr]||{},Pt[Yt][rr][tn]=Pt[Yt][rr][tn]||{},Pt[Yt][rr][tn][Rt]=Ot}return Pt})(an.concat(Ar)),Je=sn}return Qe})(this.pdf,this.fontFaces),yn=Dt.map(function(Et){return{family:Et,stretch:"normal",weight:St,style:Nt}}),en=(function(Et,Ar,vn){for(var sn=(vn=vn||{}).defaultFontFamily||"times",an=Object.assign({},Ooe,vn.genericFontFamilies||{}),Yn=null,Pt=null,Zn=0;Zn<Ar.length;++Zn)if(an[(Yn=ON(Ar[Zn])).family]&&(Yn.family=an[Yn.family]),Et.hasOwnProperty(Yn.family)){Pt=Et[Yn.family];break}if(!(Pt=Pt||Et[sn]))throw new Error("Could not find a font-family for the rule '"+qB(Yn)+"' and default family '"+sn+"'.");if(Pt=(function(Ot,Yt){if(Yt[Ot])return Yt[Ot];var rr=zN[Ot],tn=rr<=zN.normal?-1:1,Rt=zB(Yt,p9,rr,tn);if(!Rt)throw new Error("Could not find a matching font-stretch value for "+Ot);return Rt})(Yn.stretch,Pt),Pt=(function(Ot,Yt){if(Yt[Ot])return Yt[Ot];for(var rr=h9[Ot],tn=0;tn<rr.length;++tn)if(Yt[rr[tn]])return Yt[rr[tn]];throw new Error("Could not find a matching font-style for "+Ot)})(Yn.style,Pt),!(Pt=(function(Ot,Yt){if(Yt[Ot])return Yt[Ot];if(Ot===400&&Yt[500])return Yt[500];if(Ot===500&&Yt[400])return Yt[400];var rr=Roe[Ot],tn=zB(Yt,g9,rr,Ot<400?-1:1);if(!tn)throw new Error("Could not find a matching font-weight for value "+Ot);return tn})(Yn.weight,Pt)))throw new Error("Failed to resolve a font for the rule '"+qB(Yn)+"'.");return Pt})(It,yn);this.pdf.setFont(en.ref.name,en.ref.style)}else{var Ut="";(St==="bold"||parseInt(St,10)>=700||Nt==="bold")&&(Ut="bold"),Nt==="italic"&&(Ut+="italic"),Ut.length===0&&(Ut="normal");for(var Lt="",Vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ft=0;ft<Dt.length;ft++){if(this.pdf.internal.getFont(Dt[ft],Ut,{noFallback:!0,disableWarning:!0})!==void 0){Lt=Dt[ft];break}if(Ut==="bolditalic"&&this.pdf.internal.getFont(Dt[ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Lt=Dt[ft],Ut="bold";else if(this.pdf.internal.getFont(Dt[ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Lt=Dt[ft],Ut="normal";break}}if(Lt===""){for(var Qt=0;Qt<Dt.length;Qt++)if(Vt[Dt[Qt]]){Lt=Vt[Dt[Qt]];break}}Lt=Lt===""?"Times":Lt,this.pdf.setFont(Lt,Ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(q){this.ctx.globalCompositeOperation=q}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(q){this.ctx.globalAlpha=q}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(q){this.ctx.lineDashOffset=q,Le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(q){this.ctx.lineDash=q,Le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(q){this.ctx.ignoreClearRect=!!q}})};p.prototype.setLineDash=function(F){this.lineDash=F},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){H.call(this,"fill",!1)},p.prototype.stroke=function(){H.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(F,G){if(isNaN(F)||isNaN(G))throw cr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new s(F,G));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(F,G)},p.prototype.closePath=function(){var F=new s(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&Un(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){F=new s(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(F.x,F.y)},p.prototype.lineTo=function(F,G){if(isNaN(F)||isNaN(G))throw cr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new s(F,G));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),H.call(this,null,!0)},p.prototype.quadraticCurveTo=function(F,G,J,re){if(isNaN(J)||isNaN(re)||isNaN(F)||isNaN(G))throw cr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new s(J,re)),fe=this.ctx.transform.applyToPoint(new s(F,G));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new s(ae.x,ae.y)},p.prototype.bezierCurveTo=function(F,G,J,re,ae,fe){if(isNaN(ae)||isNaN(fe)||isNaN(F)||isNaN(G)||isNaN(J)||isNaN(re))throw cr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ie=this.ctx.transform.applyToPoint(new s(ae,fe)),_e=this.ctx.transform.applyToPoint(new s(F,G)),Te=this.ctx.transform.applyToPoint(new s(J,re));this.path.push({type:"bct",x1:_e.x,y1:_e.y,x2:Te.x,y2:Te.y,x:Ie.x,y:Ie.y}),this.ctx.lastPoint=new s(Ie.x,Ie.y)},p.prototype.arc=function(F,G,J,re,ae,fe){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(re)||isNaN(ae))throw cr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var Ie=this.ctx.transform.applyToPoint(new s(F,G));F=Ie.x,G=Ie.y;var _e=this.ctx.transform.applyToPoint(new s(0,J)),Te=this.ctx.transform.applyToPoint(new s(0,0));J=Math.sqrt(Math.pow(_e.x-Te.x,2)+Math.pow(_e.y-Te.y,2))}Math.abs(ae-re)>=2*Math.PI&&(re=0,ae=2*Math.PI),this.path.push({type:"arc",x:F,y:G,radius:J,startAngle:re,endAngle:ae,counterclockwise:fe})},p.prototype.arcTo=function(F,G,J,re,ae){throw new Error("arcTo not implemented.")},p.prototype.rect=function(F,G,J,re){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(re))throw cr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,G),this.lineTo(F+J,G),this.lineTo(F+J,G+re),this.lineTo(F,G+re),this.lineTo(F,G),this.lineTo(F+J,G),this.lineTo(F,G)},p.prototype.fillRect=function(F,G,J,re){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(re))throw cr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,G,J,re),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},p.prototype.strokeRect=function(F,G,J,re){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(re))throw cr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(F,G,J,re),this.stroke())},p.prototype.clearRect=function(F,G,J,re){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(re))throw cr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,G,J,re))},p.prototype.save=function(F){F=typeof F!="boolean"||F;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},p.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(G),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(F){var G,J,re,ae;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))G=0,J=0,re=0,ae=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(fe!==null)G=parseInt(fe[1]),J=parseInt(fe[2]),re=parseInt(fe[3]),ae=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)G=parseInt(fe[1]),J=parseInt(fe[2]),re=parseInt(fe[3]),ae=parseFloat(fe[4]);else{if(ae=1,typeof F=="string"&&F.charAt(0)!=="#"){var Ie=new s9(F);F=Ie.ok?Ie.toHex():"#000000"}F.length===4?(G=F.substring(1,2),G+=G,J=F.substring(2,3),J+=J,re=F.substring(3,4),re+=re):(G=F.substring(1,3),J=F.substring(3,5),re=F.substring(5,7)),G=parseInt(G,16),J=parseInt(J,16),re=parseInt(re,16)}}return{r:G,g:J,b:re,a:ae,style:F}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(F,G,J,re){if(isNaN(G)||isNaN(J)||typeof F!="string")throw cr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!g.call(this)){var ae=he(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;S.call(this,{text:F,x:G,y:J,scale:fe,angle:ae,align:this.textAlign,maxWidth:re})}},p.prototype.strokeText=function(F,G,J,re){if(isNaN(G)||isNaN(J)||typeof F!="string")throw cr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){re=isNaN(re)?void 0:re;var ae=he(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;S.call(this,{text:F,x:G,y:J,scale:fe,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:re})}},p.prototype.measureText=function(F){if(typeof F!="string")throw cr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,J=this.pdf.internal.scaleFactor,re=G.internal.getFontSize(),ae=G.getStringUnitWidth(F)*re/G.internal.scaleFactor;return new function(fe){var Ie=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ie}}),this}({width:ae*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(F,G){if(isNaN(F)||isNaN(G))throw cr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(F,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(F){if(isNaN(F))throw cr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},p.prototype.translate=function(F,G){if(isNaN(F)||isNaN(G))throw cr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,F,G);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(F,G,J,re,ae,fe){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(re)||isNaN(ae)||isNaN(fe))throw cr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ie=new c(F,G,J,re,ae,fe);this.ctx.transform=this.ctx.transform.multiply(Ie)},p.prototype.setTransform=function(F,G,J,re,ae,fe){F=isNaN(F)?1:F,G=isNaN(G)?0:G,J=isNaN(J)?0:J,re=isNaN(re)?1:re,ae=isNaN(ae)?0:ae,fe=isNaN(fe)?0:fe,this.ctx.transform=new c(F,G,J,re,ae,fe)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(F,G,J,re,ae,fe,Ie,_e,Te){var ze=this.pdf.getImageProperties(F),Qe=1,Je=1,lt=1,q=1;re!==void 0&&_e!==void 0&&(lt=_e/re,q=Te/ae,Qe=ze.width/re*_e/re,Je=ze.height/ae*Te/ae),fe===void 0&&(fe=G,Ie=J,G=0,J=0),re!==void 0&&_e===void 0&&(_e=re,Te=ae),re===void 0&&_e===void 0&&(_e=ze.width,Te=ze.height);var He=this.ctx.transform.decompose(),Nt=he(He.rotate.shx),St=new c,je=(St=(St=(St=St.multiply(He.translate)).multiply(He.skew)).multiply(He.scale)).applyToRectangle(new a(fe-G*lt,Ie-J*q,re*Qe,ae*Je));if(this.autoPaging){for(var pt,it=M.call(this,je),Dt=[],It=0;It<it.length;It+=1)Dt.indexOf(it[It])===-1&&Dt.push(it[It]);j(Dt);for(var yn=Dt[0],en=Dt[Dt.length-1],Ut=yn;Ut<en+1;Ut++){this.pdf.setPage(Ut);var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=Ut===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Et=Ut===1?0:ft+(Ut-2)*Qt;if(this.ctx.clip_path.length!==0){var Ar=this.path;pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(pt,this.posX+this.margin[3],-Et+Vt+this.ctx.prevPageLastElemOffset),oe.call(this,"fill",!0),this.path=Ar}var vn=JSON.parse(JSON.stringify(je));vn=Q([vn],this.posX+this.margin[3],-Et+Vt+this.ctx.prevPageLastElemOffset)[0];var sn=(Ut>yn||Ut<en)&&C.call(this);sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,Qt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",vn.x,vn.y,vn.w,vn.h,null,null,Nt),sn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(F,"JPEG",je.x,je.y,je.w,je.h,null,null,Nt)};var M=function(F,G,J){var re=[];G=G||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":re.push(Math.floor((F.y+ae)/J)+1);break;case"arc":re.push(Math.floor((F.y+ae-F.radius)/J)+1),re.push(Math.floor((F.y+ae+F.radius)/J)+1);break;case"qct":var fe=Me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);re.push(Math.floor((fe.y+ae)/J)+1),re.push(Math.floor((fe.y+fe.h+ae)/J)+1);break;case"bct":var Ie=Ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);re.push(Math.floor((Ie.y+ae)/J)+1),re.push(Math.floor((Ie.y+Ie.h+ae)/J)+1);break;case"rect":re.push(Math.floor((F.y+ae)/J)+1),re.push(Math.floor((F.y+F.h+ae)/J)+1)}for(var _e=0;_e<re.length;_e+=1)for(;this.pdf.internal.getNumberOfPages()<re[_e];)N.call(this);return re},N=function(){var F=this.fillStyle,G=this.strokeStyle,J=this.font,re=this.lineCap,ae=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=G,this.font=J,this.lineCap=re,this.lineWidth=ae,this.lineJoin=fe},Q=function(F,G,J){for(var re=0;re<F.length;re++)switch(F[re].type){case"bct":F[re].x2+=G,F[re].y2+=J;case"qct":F[re].x1+=G,F[re].y1+=J;default:F[re].x+=G,F[re].y+=J}return F},j=function(F){return F.sort(function(G,J){return G-J})},H=function(F,G){var J=this.fillStyle,re=this.strokeStyle,ae=this.lineCap,fe=this.lineWidth,Ie=Math.abs(fe*this.ctx.transform.scaleX),_e=this.lineJoin;if(this.autoPaging){for(var Te,ze,Qe=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),lt=[],q=0;q<Je.length;q++)if(Je[q].x!==void 0)for(var He=M.call(this,Je[q]),Nt=0;Nt<He.length;Nt+=1)lt.indexOf(He[Nt])===-1&&lt.push(He[Nt]);for(var St=0;St<lt.length;St++)for(;this.pdf.internal.getNumberOfPages()<lt[St];)N.call(this);j(lt);for(var je=lt[0],pt=lt[lt.length-1],it=je;it<pt+1;it++){this.pdf.setPage(it),this.fillStyle=J,this.strokeStyle=re,this.lineCap=ae,this.lineWidth=Ie,this.lineJoin=_e;var Dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],It=it===1?this.posY+this.margin[0]:this.margin[0],yn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],en=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=it===1?0:yn+(it-2)*en;if(this.ctx.clip_path.length!==0){var Lt=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(Te,this.posX+this.margin[3],-Ut+It+this.ctx.prevPageLastElemOffset),oe.call(this,F,!0),this.path=Lt}if(ze=JSON.parse(JSON.stringify(Qe)),this.path=Q(ze,this.posX+this.margin[3],-Ut+It+this.ctx.prevPageLastElemOffset),G===!1||it===0){var Vt=(it>je||it<pt)&&C.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,en,null).clip().discardPath()),oe.call(this,F,G),Vt&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}this.path=Qe}else this.lineWidth=Ie,oe.call(this,F,G),this.lineWidth=fe},oe=function(F,G){if((F!=="stroke"||G||!E.call(this))&&(F==="stroke"||G||!g.call(this))){for(var J,re,ae=[],fe=this.path,Ie=0;Ie<fe.length;Ie++){var _e=fe[Ie];switch(_e.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:_e,deltas:[],abs:[]});break;case"lt":var Te=ae.length;if(fe[Ie-1]&&!isNaN(fe[Ie-1].x)&&(J=[_e.x-fe[Ie-1].x,_e.y-fe[Ie-1].y],Te>0)){for(;Te>=0;Te--)if(ae[Te-1].close!==!0&&ae[Te-1].begin!==!0){ae[Te-1].deltas.push(J),ae[Te-1].abs.push(_e);break}}break;case"bct":J=[_e.x1-fe[Ie-1].x,_e.y1-fe[Ie-1].y,_e.x2-fe[Ie-1].x,_e.y2-fe[Ie-1].y,_e.x-fe[Ie-1].x,_e.y-fe[Ie-1].y],ae[ae.length-1].deltas.push(J);break;case"qct":var ze=fe[Ie-1].x+2/3*(_e.x1-fe[Ie-1].x),Qe=fe[Ie-1].y+2/3*(_e.y1-fe[Ie-1].y),Je=_e.x+2/3*(_e.x1-_e.x),lt=_e.y+2/3*(_e.y1-_e.y),q=_e.x,He=_e.y;J=[ze-fe[Ie-1].x,Qe-fe[Ie-1].y,Je-fe[Ie-1].x,lt-fe[Ie-1].y,q-fe[Ie-1].x,He-fe[Ie-1].y],ae[ae.length-1].deltas.push(J);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(_e)}}re=G?null:F==="stroke"?"stroke":"fill";for(var Nt=!1,St=0;St<ae.length;St++)if(ae[St].arc)for(var je=ae[St].abs,pt=0;pt<je.length;pt++){var it=je[pt];it.type==="arc"?T.call(this,it.x,it.y,it.radius,it.startAngle,it.endAngle,it.counterclockwise,void 0,G,!Nt):D.call(this,it.x,it.y),Nt=!0}else if(ae[St].close===!0)this.pdf.internal.out("h"),Nt=!1;else if(ae[St].begin!==!0){var Dt=ae[St].start.x,It=ae[St].start.y;te.call(this,ae[St].deltas,Dt,It),Nt=!0}re&&I.call(this,re),G&&V.call(this)}},pe=function(F){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-J;case"top":return F+G-J;case"hanging":return F+G-2*J;case"middle":return F+G/2-J;default:return F}},z=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(G,J){this.colorStops.push([G,J])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(F,G,J,re,ae,fe,Ie,_e,Te){for(var ze=De.call(this,J,re,ae,fe),Qe=0;Qe<ze.length;Qe++){var Je=ze[Qe];Qe===0&&(Te?b.call(this,Je.x1+F,Je.y1+G):D.call(this,Je.x1+F,Je.y1+G)),we.call(this,F,G,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}_e?V.call(this):I.call(this,Ie)},I=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},b=function(F,G){this.pdf.internal.out(t(F)+" "+r(G)+" m")},S=function(F){var G;switch(F.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var J,re,ae,fe=this.pdf.getTextDimensions(F.text),Ie=pe.call(this,F.y),_e=z.call(this,Ie)-fe.h,Te=this.ctx.transform.applyToPoint(new s(F.x,Ie));if(this.autoPaging){var ze=this.ctx.transform.decompose(),Qe=new c;Qe=(Qe=(Qe=Qe.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale);for(var Je=this.ctx.transform.applyToRectangle(new a(F.x,Ie,fe.w,fe.h)),lt=Qe.applyToRectangle(new a(F.x,_e,fe.w,fe.h)),q=M.call(this,lt),He=[],Nt=0;Nt<q.length;Nt+=1)He.indexOf(q[Nt])===-1&&He.push(q[Nt]);j(He);for(var St=He[0],je=He[He.length-1],pt=St;pt<je+1;pt++){this.pdf.setPage(pt);var it=pt===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[2],yn=It-this.margin[0],en=this.pdf.internal.pageSize.width-this.margin[1],Ut=en-this.margin[3],Lt=pt===1?0:Dt+(pt-2)*yn;if(this.ctx.clip_path.length!==0){var Vt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(J,this.posX+this.margin[3],-1*Lt+it),oe.call(this,"fill",!0),this.path=Vt}var ft=Q([JSON.parse(JSON.stringify(lt))],this.posX+this.margin[3],-Lt+it+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*F.scale),ae=this.lineWidth,this.lineWidth=ae*F.scale);var Qt=this.autoPaging!=="text";if(Qt||ft.y+ft.h<=It){if(Qt||ft.y>=it&&ft.x<=en){var Et=Qt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||en-ft.x)[0],Ar=Q([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-Lt+it+this.ctx.prevPageLastElemOffset)[0],vn=Qt&&(pt>St||pt<je)&&C.call(this);vn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,yn,null).clip().discardPath()),this.pdf.text(Et,Ar.x,Ar.y,{angle:F.angle,align:G,renderingMode:F.renderingMode}),vn&&this.pdf.restoreGraphicsState()}}else ft.y<It&&(this.ctx.prevPageLastElemOffset+=It-ft.y);F.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=ae)}}else F.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*F.scale),ae=this.lineWidth,this.lineWidth=ae*F.scale),this.pdf.text(F.text,Te.x+this.posX,Te.y+this.posY,{angle:F.angle,align:G,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=ae)},D=function(F,G,J,re){J=J||0,re=re||0,this.pdf.internal.out(t(F+J)+" "+r(G+re)+" l")},te=function(F,G,J){return this.pdf.lines(F,G,J,null,null)},we=function(F,G,J,re,ae,fe,Ie,_e){this.pdf.internal.out([e(i(J+F)),e(o(re+G)),e(i(ae+F)),e(o(fe+G)),e(i(Ie+F)),e(o(_e+G)),"c"].join(" "))},De=function(F,G,J,re){for(var ae=2*Math.PI,fe=Math.PI/2;G>J;)G-=ae;var Ie=Math.abs(J-G);Ie<ae&&re&&(Ie=ae-Ie);for(var _e=[],Te=re?-1:1,ze=G;Ie>1e-5;){var Qe=ze+Te*Math.min(Ie,fe);_e.push(Se.call(this,F,ze,Qe)),Ie-=Math.abs(Qe-ze),ze=Qe}return _e},Se=function(F,G,J){var re=(J-G)/2,ae=F*Math.cos(re),fe=F*Math.sin(re),Ie=ae,_e=-fe,Te=Ie*Ie+_e*_e,ze=Te+Ie*ae+_e*fe,Qe=4/3*(Math.sqrt(2*Te*ze)-ze)/(Ie*fe-_e*ae),Je=Ie-Qe*_e,lt=_e+Qe*Ie,q=Je,He=-lt,Nt=re+G,St=Math.cos(Nt),je=Math.sin(Nt);return{x1:F*Math.cos(G),y1:F*Math.sin(G),x2:Je*St-lt*je,y2:Je*je+lt*St,x3:q*St-He*je,y3:q*je+He*St,x4:F*Math.cos(J),y4:F*Math.sin(J)}},he=function(F){return 180*F/Math.PI},Me=function(F,G,J,re,ae,fe){var Ie=F+.5*(J-F),_e=G+.5*(re-G),Te=ae+.5*(J-ae),ze=fe+.5*(re-fe),Qe=Math.min(F,ae,Ie,Te),Je=Math.max(F,ae,Ie,Te),lt=Math.min(G,fe,_e,ze),q=Math.max(G,fe,_e,ze);return new a(Qe,lt,Je-Qe,q-lt)},Ke=function(F,G,J,re,ae,fe,Ie,_e){var Te,ze,Qe,Je,lt,q,He,Nt,St,je,pt,it,Dt,It,yn=J-F,en=re-G,Ut=ae-J,Lt=fe-re,Vt=Ie-ae,ft=_e-fe;for(ze=0;ze<41;ze++)St=(He=(Qe=F+(Te=ze/40)*yn)+Te*((lt=J+Te*Ut)-Qe))+Te*(lt+Te*(ae+Te*Vt-lt)-He),je=(Nt=(Je=G+Te*en)+Te*((q=re+Te*Lt)-Je))+Te*(q+Te*(fe+Te*ft-q)-Nt),ze==0?(pt=St,it=je,Dt=St,It=je):(pt=Math.min(pt,St),it=Math.min(it,je),Dt=Math.max(Dt,St),It=Math.max(It,je));return new a(Math.round(pt),Math.round(it),Math.round(Dt-pt),Math.round(It-it))},Le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,G,J=(F=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:G}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(Ct.API),(function(n){var e=function(s){var a,c,l,u,p,v,g,E,C,M;for(/[^\x00-\xFF]/.test(s),c=[],l=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(p=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(v=(p=((p=((p=((p=(p-(M=p%85))/85)-(C=p%85))/85)-(E=p%85))/85)-(g=p%85))/85)%85,c.push(v+33,g+33,E+33,C+33,M+33)):c.push(122);return(function(N,Q){for(var j=Q;j>0;j--)N.pop()})(c,a.length),String.fromCharCode.apply(String,c)+"~>"},t=function(s){var a,c,l,u,p,v=String,g="length",E=255,C="charCodeAt",M="slice",N="replace";for(s[M](-2),s=s[M](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),l=[],u=0,p=(s+=a="uuuuu"[M](s[g]%5||5))[g];p>u;u+=5)c=52200625*(s[C](u)-33)+614125*(s[C](u+1)-33)+7225*(s[C](u+2)-33)+85*(s[C](u+3)-33)+(s[C](u+4)-33),l.push(E&c>>24,E&c>>16,E&c>>8,E&c);return(function(Q,j){for(var H=j;H>0;H--)Q.pop()})(l,a[g]),v.fromCharCode.apply(v,l)},r=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",l=0;l<s.length;l+=2)c+=String.fromCharCode("0x"+(s[l]+s[l+1]));return c},o=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return(a=dx(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var c=0,l=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=o(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}})(Ct.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(c,l,u){var p=new XMLHttpRequest,v=0,g=function(E){var C=E.length,M=[],N=String.fromCharCode;for(v=0;v<C;v+=1)M.push(N(255&E.charCodeAt(v)));return M.join("")};if(p.open("GET",c,!l),p.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(p.onload=function(){p.status===200?u(g(this.responseText)):u(void 0)}),p.send(null),l&&p.status===200)return g(p.responseText)})(i,o,s)}catch{}return a})(e,t,r)},n.loadImageFile=n.loadFile})(Ct.API),(function(n){function e(){return(Kt.html2canvas?Promise.resolve(Kt.html2canvas):import("./chunk-3DX2HYX3.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Kt.DOMPurify?Promise.resolve(Kt.DOMPurify):import("./chunk-5XEYTCIL.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var c=Un(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var l=document.createElement(a);for(var u in c.className&&(l.className=c.className),c.innerHTML&&c.dompurify&&(l.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)l.style[u]=c.style[u];return l},o=function a(c,l){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)l!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||u.appendChild(a(p,l));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},s=function a(c){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return(u=u.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),c){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,c(this.prop.container,l)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=this.opt.jsPDF,u=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var E=u[g],C=E.src.find(function(M){return M.format==="truetype"});C&&l.addFont(C.url,E.ref.name,E.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,l.context2d.save(!0),c(this.prop.container,v)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var c=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||Ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,l,u){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,l,u){return this.setProgress(a?this.progress.val+a:null,c||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,c){var l=this;return this.thenCore(a,c,function(u,p){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(v){return l.updateProgress(null,u),v}).then(u,p).then(function(v){return l.updateProgress(1),v})})},s.prototype.thenCore=function(a,c,l){l=l||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),c&&(c=c.bind(u));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:s.convert(Object.assign({},u),Promise.prototype),v=l.call(p,a,c);return s.convert(v,u.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(l){c=c.thenCore(l)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ct.getPageSize=function(a,c,l){if(Un(a)==="object"){var u=a;a=u.orientation,c=u.unit||c,l=u.format||l}c=c||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var p,v=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var E,C=0,M=0;if(g.hasOwnProperty(v))C=g[v][1]/p,M=g[v][0]/p;else try{C=l[1],M=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",M>C&&(E=M,M=C,C=E);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",C>M&&(E=M,M=C,C=E)}return{width:M,height:C,unit:c,k:p,orientation:a}},n.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(ON):null;var l=new s(c);return c.worker?l:l.from(a).doCallback()}})(Ct.API),Ct.API.addJS=function(n){return WB=n,this.internal.events.subscribe("postPutResources",function(){Ox=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ox+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),GB=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+WB+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ox!==void 0&&GB!==void 0&&this.internal.out("/Names <</JavaScript "+Ox+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var c=a[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(o=0;o<l;o++){var p=t.internal.newObject();u.push(p);var v=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<u.length;o++)t.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var c=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<r.children.length;l++)this.renderItems(r.children[l])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(Ct.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var c,l=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(p){for(var v,g=256*p.charCodeAt(4)+p.charCodeAt(5),E=p.length,C={width:0,height:0,numcomponents:1},M=4;M<E;M+=2){if(M+=g,e.indexOf(p.charCodeAt(M+1))!==-1){v=256*p.charCodeAt(M+5)+p.charCodeAt(M+6),C={width:256*p.charCodeAt(M+7)+p.charCodeAt(M+8),height:v,numcomponents:p.charCodeAt(M+9)};break}g=256*p.charCodeAt(M+2)+p.charCodeAt(M+3)}return C})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:t,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:l,index:r,alias:i}}return u}})(Ct.API),Ct.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=OB(n,{checkCrc:!0}),s=o.width,a=o.height,c=o.channels,l=o.palette,u=o.depth;i=l&&c===1?(function(T){for(var I=T.width,V=T.height,b=T.data,S=T.palette,D=T.depth,te=!1,we=[],De=[],Se=void 0,he=!1,Me=0,Ke=0;Ke<S.length;Ke++){var Le=WM(S[Ke],4),F=Le[0],G=Le[1],J=Le[2],re=Le[3];we.push(F,G,J),re!=null&&(re===0?(Me++,De.length<1&&De.push(Ke)):re<255&&(he=!0))}if(he||Me>1){te=!0,De=void 0;var ae=I*V;Se=new Uint8Array(ae);for(var fe=new DataView(b.buffer),Ie=0;Ie<ae;Ie++){var _e=LN(fe,Ie,D),Te=WM(S[_e],4)[3];Se[Ie]=Te}}else Me===0&&(De=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:te?8:void 0,colorBytes:b,alphaBytes:Se,needSMask:te,palette:we,mask:De}})(o):c===2||c===4?(function(T){for(var I=T.data,V=T.width,b=T.height,S=T.channels,D=T.depth,te=S===2?"DeviceGray":"DeviceRGB",we=S-1,De=V*b,Se=we,he=De*Se,Me=1*De,Ke=Math.ceil(he*D/8),Le=Math.ceil(Me*D/8),F=new Uint8Array(Ke),G=new Uint8Array(Le),J=new DataView(I.buffer),re=new DataView(F.buffer),ae=new DataView(G.buffer),fe=!1,Ie=0;Ie<De;Ie++){for(var _e=Ie*S,Te=0;Te<Se;Te++)n9(re,LN(J,_e+Te,D),Ie*Se+Te,D);var ze=LN(J,_e+Se,D);ze<(1<<D)-1&&(fe=!0),n9(ae,ze,1*Ie,D)}return{colorSpace:te,colorsPerPixel:we,sMaskBitsPerComponent:fe?D:void 0,colorBytes:F,alphaBytes:G,needSMask:fe}})(o):(function(T){var I=T.data,V=T.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?(function(b){for(var S=b.length,D=new Uint8Array(2*S),te=new DataView(D.buffer,D.byteOffset,D.byteLength),we=0;we<S;we++)te.setUint16(2*we,b[we],!1);return D})(I):I,needSMask:!1}})(o);var p,v,g,E=i,C=E.colorSpace,M=E.colorsPerPixel,N=E.sMaskBitsPerComponent,Q=E.colorBytes,j=E.alphaBytes,H=E.needSMask,oe=E.palette,pe=E.mask,z=null;return r!==Ct.API.image_compression.NONE&&typeof dx=="function"?(z=(function(T){var I;switch(T){case Ct.API.image_compression.FAST:I=11;break;case Ct.API.image_compression.MEDIUM:I=13;break;case Ct.API.image_compression.SLOW:I=14;break;default:I=12}return I})(r),p=this.decode.FLATE_DECODE,v="/Predictor ".concat(z," /Colors ").concat(M," /BitsPerComponent ").concat(u," /Columns ").concat(s),n=QB(Q,Math.ceil(s*M*u/8),M,u,r),H&&(g=QB(j,Math.ceil(s*N/8),1,N,r))):(p=void 0,v=void 0,n=Q,H&&(g=j)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:t,data:n,index:e,filter:p,decodeParameters:v,transparency:pe,palette:oe,sMask:g,predictor:z,width:s,height:a,bitsPerComponent:u,sMaskBitsPerComponent:N,colorSpace:C}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new Uoe(e),s=o.width,a=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:s,height:a},u=new VN(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)},n.processGIF87A=n.processGIF89A})(Ct.API),ic.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ic.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){cr.log("bit decode error:"+t)}},ic.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[o>>7-a&1];this.data[s+4*a]=c.blue,this.data[s+4*a+1]=c.green,this.data[s+4*a+2]=c.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},ic.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,c=15&o,l=this.palette[a];if(this.data[s]=l.blue,this.data[s+1]=l.green,this.data[s+2]=l.red,this.data[s+3]=255,2*i+1>=this.width)break;l=this.palette[c],this.data[s+4]=l.blue,this.data[s+4+1]=l.green,this.data[s+4+2]=l.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},ic.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},ic.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,c=(o>>10&e)/e*255|0,l=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=c,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=l}this.pos+=n}},ic.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&t)/t*255|0,l=(s>>11)/e*255|0,u=i*this.width*4+4*o;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=a,this.data[u+3]=255}this.pos+=n}},ic.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},ic.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},ic.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new ic(e,!1),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new VN(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(Ct.API),i9.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new i9(e),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new VN(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(Ct.API),Ct.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,c=0,l=0;l<i;l+=4){var u=r[l],p=r[l+1],v=r[l+2],g=r[l+3];o[a++]=u,o[a++]=p,o[a++]=v,s[c++]=g}var E=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:E,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ct.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qg=Ct.API,Fx=Qg.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=l.fof?l.fof:1,p=e.doKerning!==!1,v=0,g=n.length,E=0,C=a[0]||c,M=[];for(t=0;t<g;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?M.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(v=p&&Un(l[r])==="object"&&!isNaN(parseInt(l[r][E],10))?l[r][E]/u:0,M.push((a[r]||C)/c+v)),E=r;return M},KB=Qg.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Qg.processArabic&&(n=Qg.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Fx.apply(this,arguments).reduce(function(o,s){return o+s},0)},YB=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var c=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(c,o)),a=0,c=o),a+=e[o],o++;return c!==o&&i.push(n.slice(c,o)),i},ZB=function(n,e,t){t||(t={});var r,i,o,s,a,c,l,u=[],p=[u],v=t.textIndent||0,g=0,E=0,C=n.split(" "),M=Fx.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?C[0].length+2:t.lineIndent||0){var N=Array(c).join(" "),Q=[];C.map(function(H){(H=H.split(/\s*\n/)).length>1?Q=Q.concat(H.map(function(oe,pe){return(pe&&oe.length?`
`:"")+oe})):Q.push(H[0])}),C=Q,c=KB.apply(this,[N,t])}for(o=0,s=C.length;o<s;o++){var j=0;if(r=C[o],c&&r[0]==`
`&&(r=r.substr(1),j=1),v+g+(E=(i=Fx.apply(this,[r,t])).reduce(function(H,oe){return H+oe},0))>e||j){if(E>e){for(a=YB.apply(this,[r,i,e-(v+g),e]),u.push(a.shift()),u=[a.pop()];a.length;)p.push([a.shift()]);E=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(H,oe){return H+oe},0)}else u=[r];p.push(u),v=E+c,g=M}else u.push(r),v+=g+E,g=M}return l=c?function(H,oe){return(oe?N:"")+H.join(" ")}:function(H){return H.join(" ")},p.map(l)},Qg.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var p=this.internal.getFont(u.fontName,u.fontStyle),v="Unicode";return p.metadata[v]?{widths:p.metadata[v].widths||{0:1},kerning:p.metadata[v].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,c,l=[];for(a=0,c=r.length;a<c;a++)l=l.concat(ZB.apply(this,[r[a],s,o]));return l},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var s=function(v){return"0x"+parseInt(v,10).toString(16)},a=n.__fontmetrics__.compress=function(v){var g,E,C,M,N=["{"];for(var Q in v){if(g=v[Q],isNaN(parseInt(Q,10))?E="'"+Q+"'":(Q=parseInt(Q,10),E=(E=s(Q).slice(2)).slice(0,-1)+i[E.slice(-1)]),typeof g=="number")g<0?(C=s(g).slice(3),M="-"):(C=s(g).slice(2),M=""),C=M+C.slice(0,-1)+i[C.slice(-1)];else{if(Un(g)!=="object")throw new Error("Don't know what to do with value type "+Un(g)+".");C=a(g)}N.push(E+C)}return N.push("}"),N.join("")},c=n.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,E,C,M,N={},Q=1,j=N,H=[],oe="",pe="",z=v.length-1,T=1;T<z;T+=1)(M=v[T])=="'"?g?(C=g.join(""),g=void 0):g=[]:g?g.push(M):M=="{"?(H.push([j,C]),j={},C=void 0):M=="}"?((E=H.pop())[0][E[1]]=j,C=void 0,j=E[0]):M=="-"?Q=-1:C===void 0?r.hasOwnProperty(M)?(oe+=r[M],C=parseInt(oe,16)*Q,Q=1,oe=""):oe+=M:r.hasOwnProperty(M)?(pe+=r[M],j[C]=parseInt(pe,16)*Q,Q=1,C=void 0,pe=""):pe+=M;return N},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(v){var g=v.font,E=p.Unicode[g.postScriptName];E&&(g.metadata.Unicode={},g.metadata.Unicode.widths=E.widths,g.metadata.Unicode.kerning=E.kerning);var C=u.Unicode[g.postScriptName];C&&(g.metadata.Unicode.encoding=C,g.encoding=C.codePages[0])}])})(Ct.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Lx(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(Ct),Ct.API.addSvgAsImage=function(n,e,t,r,i,o,s,a){if(isNaN(e)||isNaN(t))throw cr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw cr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var l=c.getContext("2d");l.fillStyle="#fff",l.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Kt.canvg?Promise.resolve(Kt.canvg):import("./chunk-3MQJB5HQ.js")).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(l,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(u)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,s,a)})},Ct.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Ct.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),c=[],l=0,u=0,p=0;function v(E,C){var M,N=!1;for(M=0;M<E.length;M+=1)E[M]===C&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(Un(n)==="object"){for(i in n)if(o=n[i],v(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&v(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(l=0;l<o.length;l+=1)if(r=!0,o[l].length===1&&typeof o[l][0]=="number")c.push(String(o[l]-1));else if(o[l].length>1){for(u=0;u<o[l].length;u+=1)typeof o[l][u]!="number"&&(r=!1);r===!0&&c.push([o[l][0]-1,o[l][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,C=[];for(E in t)t[E].explicitSet===!0&&(t[E].type==="name"?C.push("/"+E+" /"+t[E].value):C.push("/"+E+" "+t[E].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),l=o.length+s.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ct.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,c=s.metadata.Unicode.widths,l=["","0","00","000","0000"],u=[""],p=0,v=o.length;p<v;++p){if(a=s.metadata.characterToGlyph(o.charCodeAt(p)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(p),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(l[4-a.length],a)}return u.join("")},r=function(o){var s,a,c,l,u,p,v;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,v=(a=Object.keys(o).sort(function(g,E){return g-E})).length;p<v;p++)s=a[p],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(l=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+l+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",E=0;E<v.length;E++)g+=String.fromCharCode(v[E]);var C=l();u({data:g,addLength1:!0,objectId:C}),c("endobj");var M=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:M}),c("endobj");var N=l();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Jg(a.fontName)),c("/FontFile2 "+C+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var Q=l();c("<<"),c("/Type /Font"),c("/BaseFont /"+Jg(a.fontName)),c("/FontDescriptor "+N+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=l(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+M+" 0 R"),c("/BaseFont /"+Jg(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+Q+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",g=0;g<p.length;g++)v+=String.fromCharCode(p[g]);var E=l();u({data:v,addLength1:!0,objectId:E}),c("endobj");var C=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:C}),c("endobj");var M=l();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+E+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+Jg(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=l();for(var N=0;N<a.metadata.hmtx.widths.length;N++)a.metadata.hmtx.widths[N]=parseInt(a.metadata.hmtx.widths[N]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+Jg(a.fontName)+"/FontDescriptor "+M+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",c=o.x,l=o.y,u=o.options||{},p=o.mutex||{},v=p.pdfEscape,g=p.activeFontKey,E=p.fonts,C=g,M="",N=0,Q="",j=E[C].encoding;if(E[C].encoding!=="Identity-H")return{text:a,x:c,y:l,options:u,mutex:p};for(Q=a,C=g,Array.isArray(a)&&(Q=a[0]),N=0;N<Q.length;N+=1)E[C].metadata.hasOwnProperty("cmap")&&(s=E[C].metadata.cmap.unicode.codeMap[Q[N].charCodeAt(0)]),s||Q[N].charCodeAt(0)<256&&E[C].metadata.hasOwnProperty("Unicode")?M+=Q[N]:M+="";var H="";return parseInt(C.slice(1))<14||j==="WinAnsiEncoding"?H=v(M,C).split("").map(function(oe){return oe.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(H=t(M,E[C])),p.isHex=!0,{text:H,x:c,y:l,options:u,mutex:p}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],c={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var l=0;for(l=0;l<s.length;l+=1)Array.isArray(s[l])&&s[l].length===3?a.push([i(Object.assign({},c,{text:s[l][0]})).text,s[l][1],s[l][2]]):a.push(i(Object.assign({},c,{text:s[l]})).text);o.text=a}else o.text=i(Object.assign({},c,{text:s})).text}])})(Ct),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ct.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,c,l,u,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},M=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Q=!1,j=0;this.__bidiEngine__={};var H=function(b){var S=b.charCodeAt(),D=S>>8,te=C[D];return te!==void 0?p[256*te+(255&S)]:D===252||D===253?"AL":N.test(D)?"L":D===8?"R":"N"},oe=function(b){for(var S,D=0;D<b.length;D++){if((S=H(b.charAt(D)))==="L")return!1;if(S==="R")return!0}return!1},pe=function(b,S,D,te){var we,De,Se,he,Me=S[te];switch(Me){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Q=!1;break;case"N":case"AN":break;case"EN":Q&&(Me="AN");break;case"AL":Q=!0,Me="R";break;case"WS":case"BN":Me="N";break;case"CS":te<1||te+1>=S.length||(we=D[te-1])!=="EN"&&we!=="AN"||(De=S[te+1])!=="EN"&&De!=="AN"?Me="N":Q&&(De="AN"),Me=De===we?De:"N";break;case"ES":Me=(we=te>0?D[te-1]:"B")==="EN"&&te+1<S.length&&S[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&D[te-1]==="EN"){Me="EN";break}if(Q){Me="N";break}for(Se=te+1,he=S.length;Se<he&&S[Se]==="ET";)Se++;Me=Se<he&&S[Se]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(he=S.length,Se=te+1;Se<he&&S[Se]==="NSM";)Se++;if(Se<he){var Ke=b[te],Le=Ke>=1425&&Ke<=2303||Ke===64286;if(we=S[Se],Le&&(we==="R"||we==="AL")){Me="R";break}}}Me=te<1||(we=S[te-1])==="B"?"N":D[te-1];break;case"B":Q=!1,i=!0,Me=j;break;case"S":o=!0,Me="N"}return Me},z=function(b,S,D){var te=b.split("");return D&&T(te,D,{hiLevel:j}),te.reverse(),S&&S.reverse(),te.join("")},T=function(b,S,D){var te,we,De,Se,he,Me=-1,Ke=b.length,Le=0,F=[],G=j?g:v,J=[];for(Q=!1,i=!1,o=!1,we=0;we<Ke;we++)J[we]=H(b[we]);for(De=0;De<Ke;De++){if(he=Le,F[De]=pe(b,J,F,De),te=240&(Le=G[he][E[F[De]]]),Le&=15,S[De]=Se=G[Le][5],te>0)if(te===16){for(we=Me;we<De;we++)S[we]=1;Me=-1}else Me=-1;if(G[Le][6])Me===-1&&(Me=De);else if(Me>-1){for(we=Me;we<De;we++)S[we]=Se;Me=-1}J[De]==="B"&&(S[De]=0),D.hiLevel|=Se}o&&(function(re,ae,fe){for(var Ie=0;Ie<fe;Ie++)if(re[Ie]==="S"){ae[Ie]=j;for(var _e=Ie-1;_e>=0&&re[_e]==="WS";_e--)ae[_e]=j}})(J,S,Ke)},I=function(b,S,D,te,we){if(!(we.hiLevel<b)){if(b===1&&j===1&&!i)return S.reverse(),void(D&&D.reverse());for(var De,Se,he,Me,Ke=S.length,Le=0;Le<Ke;){if(te[Le]>=b){for(he=Le+1;he<Ke&&te[he]>=b;)he++;for(Me=Le,Se=he-1;Me<Se;Me++,Se--)De=S[Me],S[Me]=S[Se],S[Se]=De,D&&(De=D[Me],D[Me]=D[Se],D[Se]=De);Le=he}Le++}}},V=function(b,S,D){var te=b.split(""),we={hiLevel:j};return D||(D=[]),T(te,D,we),(function(De,Se,he){if(he.hiLevel!==0&&u)for(var Me,Ke=0;Ke<De.length;Ke++)Se[Ke]===1&&(Me=M.indexOf(De[Ke]))>=0&&(De[Ke]=M[Me+1])})(te,D,we),I(2,te,S,D,we),I(1,te,S,D,we),te.join("")};return this.__bidiEngine__.doBidiReorder=function(b,S,D){if((function(we,De){if(De)for(var Se=0;Se<we.length;Se++)De[Se]=Se;a===void 0&&(a=oe(we)),l===void 0&&(l=oe(we))})(b,S),s||!c||l)if(s&&c&&a^l)j=a?1:0,b=z(b,S,D);else if(!s&&c&&l)j=a?1:0,b=V(b,S,D),b=z(b,S);else if(!s||a||c||l){if(s&&!c&&a^l)b=z(b,S),a?(j=0,b=V(b,S,D)):(j=1,b=V(b,S,D),b=z(b,S));else if(s&&a&&!c&&l)j=1,b=V(b,S,D),b=z(b,S);else if(!s&&!c&&a^l){var te=u;a?(j=1,b=V(b,S,D),j=0,u=!1,b=V(b,S,D),u=te):(j=0,b=V(b,S,D),b=z(b,S),j=1,u=!1,b=V(b,S,D),u=te,b=z(b,S))}}else j=0,b=V(b,S,D);else j=a?1:0,b=V(b,S,D);return b},this.__bidiEngine__.setOptions=function(b){b&&(s=b.isInputVisual,c=b.isOutputVisual,a=b.isInputRtl,l=b.isOutputRtl,u=b.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Ct),Ct.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Pd(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new nse(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new zoe(this.contents),this.head=new qoe(this),this.name=new Yoe(this),this.cmap=new v9(this),this.toUnicode={},this.hhea=new Hoe(this),this.maxp=new Zoe(this),this.hmtx=new Qoe(this),this.post=new Woe(this),this.os2=new Goe(this),this.loca=new tse(this),this.glyf=new Xoe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,c,l;for(l=[],s=0,a=(c=this.bbox).length;s<a;s++)e=c[s],l.push(Math.round(e*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var sc,Pd=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),zoe=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,c,l,u,p,v,g,E,C;for(C in g=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(g)/c),s=Math.floor(p/c),u=16*g-p,(i=new Pd).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(s),i.writeShort(u),o=16*g,l=i.pos+o,a=null,E=[],t)for(v=t[C],i.writeString(C),i.writeInt(n(v)),i.writeInt(l),i.writeInt(v.length),E=E.concat(v),C==="head"&&(a=l),l+=v.length;l%4;)E.push(0),l++;return i.write(E),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=y9.call(t);t.length%4;)t.push(0);for(o=new Pd(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),$oe={}.hasOwnProperty,il=function(n,e){for(var t in e)$oe.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};sc=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var qoe=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return il(n,sc),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Pd).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),o9=(function(){function n(e,t){var r,i,o,s,a,c,l,u,p,v,g,E,C,M,N,Q,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),v=g/2,e.pos+=6,o=(function(){var H,oe;for(oe=[],c=H=0;0<=v?H<v:H>v;c=0<=v?++H:--H)oe.push(e.readUInt16());return oe})(),e.pos+=2,C=(function(){var H,oe;for(oe=[],c=H=0;0<=v?H<v:H>v;c=0<=v?++H:--H)oe.push(e.readUInt16());return oe})(),l=(function(){var H,oe;for(oe=[],c=H=0;0<=v?H<v:H>v;c=0<=v?++H:--H)oe.push(e.readUInt16());return oe})(),u=(function(){var H,oe;for(oe=[],c=H=0;0<=v?H<v:H>v;c=0<=v?++H:--H)oe.push(e.readUInt16());return oe})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var H,oe;for(oe=[],c=H=0;0<=i?H<i:H>i;c=0<=i?++H:--H)oe.push(e.readUInt16());return oe})(),c=N=0,j=o.length;N<j;c=++N)for(M=o[c],r=Q=E=C[c];E<=M?Q<=M:Q>=M;r=E<=M?++Q:--Q)u[c]===0?s=r+l[c]:(s=a[u[c]/2+(r-E)-(v-c)]||0)!==0&&(s+=l[c]),this.codeMap[r]=65535&s}e.pos=p}return n.encode=function(e,t){var r,i,o,s,a,c,l,u,p,v,g,E,C,M,N,Q,j,H,oe,pe,z,T,I,V,b,S,D,te,we,De,Se,he,Me,Ke,Le,F,G,J,re,ae,fe,Ie,_e,Te,ze,Qe;switch(te=new Pd,s=Object.keys(e).sort(function(Je,lt){return Je-lt}),t){case"macroman":for(C=0,M=(function(){var Je=[];for(E=0;E<256;++E)Je.push(0);return Je})(),Q={0:0},o={},we=0,Me=s.length;we<Me;we++)Q[_e=e[i=s[we]]]==null&&(Q[_e]=++C),o[i]={old:e[i],new:Q[e[i]]},M[i]=Q[e[i]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(M),{charMap:o,subtable:te.data,maxGlyphID:C+1};case"unicode":for(S=[],p=[],j=0,Q={},r={},N=l=null,De=0,Ke=s.length;De<Ke;De++)Q[oe=e[i=s[De]]]==null&&(Q[oe]=++j),r[i]={old:oe,new:Q[oe]},a=Q[oe]-i,N!=null&&a===l||(N&&p.push(N),S.push(i),l=a),N=i;for(N&&p.push(N),p.push(65535),S.push(65535),V=2*(I=S.length),T=2*Math.pow(Math.log(I)/Math.LN2,2),v=Math.log(T/2)/Math.LN2,z=2*I-T,c=[],pe=[],g=[],E=Se=0,Le=S.length;Se<Le;E=++Se){if(b=S[E],u=p[E],b===65535){c.push(0),pe.push(0);break}if(b-(D=r[b].new)>=32768)for(c.push(0),pe.push(2*(g.length+I-E)),i=he=b;b<=u?he<=u:he>=u;i=b<=u?++he:--he)g.push(r[i].new);else c.push(D-b),pe.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*I+2*g.length),te.writeUInt16(0),te.writeUInt16(V),te.writeUInt16(T),te.writeUInt16(v),te.writeUInt16(z),fe=0,F=p.length;fe<F;fe++)i=p[fe],te.writeUInt16(i);for(te.writeUInt16(0),Ie=0,G=S.length;Ie<G;Ie++)i=S[Ie],te.writeUInt16(i);for(Te=0,J=c.length;Te<J;Te++)a=c[Te],te.writeUInt16(a);for(ze=0,re=pe.length;ze<re;ze++)H=pe[ze],te.writeUInt16(H);for(Qe=0,ae=g.length;Qe<ae;Qe++)C=g[Qe],te.writeUInt16(C);return{charMap:r,subtable:te.data,maxGlyphID:j+1}}},n})(),v9=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return il(n,sc),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new o9(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=o9.encode(e,t),(i=new Pd).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),Hoe=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return il(n,sc),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),Goe=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return il(n,sc),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),Woe=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return il(n,sc),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,a,c;for(c=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)c.push(e.readUInt32());return c}).call(this)}},n})(),Koe=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Yoe=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return il(n,sc),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,s,a,c,l,u,p,v;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(c={},o=u=0,p=r.length;u<p;o=++u)i=r[o],e.pos=i.offset,l=e.readString(i.length),s=new Koe(l,i),c[v=i.nameID]==null&&(c[v]=[]),c[i.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),Zoe=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return il(n,sc),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),Qoe=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return il(n,sc),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,s,a,c;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var l,u;for(u=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)u.push(e.readInt16());return u})(),this.widths=(function(){var l,u,p,v;for(v=[],l=0,u=(p=this.metrics).length;l<u;l++)o=p[l],v.push(o.advance);return v}).call(this),r=this.widths[this.widths.length-1],c=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),y9=[].slice,Xoe=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return il(n,sc),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,s,a,c,l,u,p;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,s=(a=new Pd(t.read(i))).readShort(),l=a.readShort(),p=a.readShort(),c=a.readShort(),u=a.readShort(),this.cache[e]=s===-1?new ese(a,l,p,c,u):new Joe(a,s,l,p,c,u),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,s,a,c;for(s=[],o=[],a=0,c=t.length;a<c;a++)i=e[t[a]],o.push(s.length),i&&(s=s.concat(i.encode(r)));return o.push(s.length),{table:s,offsets:o}},n})(),Joe=(function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),ese=(function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Pd(y9.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),tse=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return il(n,sc),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<r.length;++s)if(r[s]=i,o<t.length&&t[o]==s){++o,r[s]=i;var a=this.offsets[s],c=this.offsets[s+1]-a;c>0&&(i+=c)}for(var l=new Array(4*r.length),u=0;u<r.length;++u)l[4*u+3]=255&r[u],l[4*u+2]=(65280&r[u])>>8,l[4*u+1]=(16711680&r[u])>>16,l[4*u]=(4278190080&r[u])>>24;return l},n})(),nse=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,c;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in c=this.glyphsFor(t))r=c[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,c,l,u,p,v,g,E,C,M,N;for(i in r=v9.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),g={0:0},N=r.charMap)g[(c=N[i]).old]=c.new;for(E in v=r.maxGlyphID,s)E in g||(g[E]=v++);return u=(function(Q){var j,H;for(j in H={},Q)H[Q[j]]=j;return H})(g),p=Object.keys(u).sort(function(Q,j){return Q-j}),C=(function(){var Q,j,H;for(H=[],Q=0,j=p.length;Q<j;Q++)a=p[Q],H.push(u[a]);return H})(),o=this.font.glyf.encode(s,C,g),l=this.font.loca.encode(o.offsets,C),M={cmap:this.font.cmap.raw(),glyf:o.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(M["OS/2"]=this.font.os2.raw()),this.font.directory.encode(M)},n})();Ct.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+(function(){var a,c,l;for(l=[],a=0,c=t.length;a<c;a++)r=t[a],l.push(e.convert(r));return l})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e})();var Hx=(()=>{let e=class e{buildDoc(r,i,o=null){return ee(this,null,function*(){let s=new Ct({unit:"mm",format:"a4",hotfixes:["px_scaling"]}),a=[26,35,126],c=[233,186,0],l=[44,122,70],u=10,p=8.5,v=12,g=s.internal.pageSize.getWidth(),E=s.internal.pageSize.getHeight(),C=14,M=16,N=g-C*2,Q=15;s.setFillColor("#0b4fa3"),s.rect(0,0,g,Q,"F"),s.setFont("Helvetica","bold"),s.setFontSize(15),s.setTextColor("#ffffff"),s.text("fitness&dance",g-C,Q/1.6,{align:"right"}),s.setTextColor("#000000");let j=Q+6,H=38,oe=38,pe=0,z=i?.name||"";if(o)try{let _e=yield new Promise((lt,q)=>{let He=new Image;He.onload=()=>lt({w:He.width,h:He.height}),He.onerror=q,He.src=o}),Te=H,ze=oe,Qe=_e.w/_e.h;Qe>1?(ze=oe,Te=Math.min(H,ze*Qe)):(Te=H,ze=Math.min(oe,Te/Qe));let Je=o;s.addImage(Je||o,"PNG",C,j,Te,ze,void 0,"FAST"),pe=ze}catch{}let T=C+H+12,I=j+6,V=T,b=T+16,S=I;s.setFont("Helvetica","bold"),s.setFontSize(15),s.text(z,T,S),S+=10;let D="-";if(r.dataInizio&&/^\d{4}-\d{2}-\d{2}$/.test(r.dataInizio)){let[_e,Te,ze]=r.dataInizio.split("-");D=`${ze}/${Te}/${_e}`}let te=[{label:"Livello:",value:r.livello??"-"},{label:"Durata:",value:r.durata??"-"},{label:"Inizio:",value:D}];s.setFontSize(12);for(let _e of te)s.setFont("Helvetica","bold"),s.text(_e.label,V,S),s.setFont("Helvetica","normal"),s.text(_e.value,b,S),S+=8;let we=Math.max(pe,S-j)+2;j+=we,j+=v;let De=3,Se=50,he=27,Me=N/De,Ke=14,Le=10,F=N/Ke,G=11,J="bold";for(let _e of r.giorni){if(!_e.esercizi.length)continue;let Te=[];for(let He=0;He<_e.esercizi.length;He+=De)Te.push(_e.esercizi.slice(He,He+De));let ze=Te.map(()=>he+20),Qe=u+ze[0]+3;E-M-j<Qe&&(s.addPage(),j=18),s.setFillColor(...c),s.rect(C,j,N,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text(_e.nome,C+N/2,j+u/1.7,{align:"center"}),s.setTextColor("#000000"),j+=u+3;for(let He=0;He<Te.length;He++){let Nt=Te[He],St=ze[He];j+St>E-M&&(s.addPage(),j=18);for(let je=0;je<Nt.length;je++){let pt=Nt[je],it=C+je*Me,Dt=it+(Me-Se)/2,It=j,yn;try{pt.image?.startsWith("data:image/")&&(yn=pt.image)}catch{}try{s.addImage(yn||pt.image,"PNG",Dt,It,Se,he,void 0,"FAST")}catch{}let en=It+he+5;s.setFont("Helvetica",J),s.setFontSize(G),s.setTextColor("#183047"),s.text(pt.nome||"",it+Me/2,en,{align:"center"}),en+=6,s.setFont("Helvetica",J),s.setFontSize(G),s.setTextColor("#000000");let Ut=`${pt.serie}x${pt.ripetizioni} - ${pt.minuti}' ${pt.secondi}"`;s.text(Ut,it+Me/2,en,{align:"center"})}j+=St}let lt=_e.esercizi.filter(He=>He.note&&He.note.trim().length>0);if(lt.length>0){let Nt=N*.34,St=N-Nt;j+p+lt.length*8>E-M&&(s.addPage(),j=18),s.setFillColor(...l),s.rect(C,j,N,p,"F"),s.setFont("Helvetica","bold"),s.setFontSize(11.3),s.setTextColor("#ffffff"),s.text("Note esercizi",C+2.5,j+p*.73,{align:"left"}),s.setTextColor("#000000"),j+=p;for(let je of lt)j+8>E-M&&(s.addPage(),j=18),s.rect(C,j,Nt,8,"S"),s.rect(C+Nt,j,St,8,"S"),s.setFont("Helvetica","bold"),s.setFontSize(10.2),s.text(je.nome||"",C+2,j+8*.68,{align:"left"}),s.setFont("Helvetica","normal"),s.setFontSize(9.8),s.text(je.note,C+Nt+2,j+8*.68,{align:"left"}),j+=8;j+=5}j+=6,j+u+_e.esercizi.length*Le>E-M&&(s.addPage(),j=18),s.setFillColor(...a),s.rect(C,j,N,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text("Tracking pesi",C+2.5,j+u/1.7,{align:"left"}),s.setTextColor("#000000"),j+=u+2;let q=j;for(let He=0;He<_e.esercizi.length;He++){q+Le>E-M&&(s.addPage(),q=18);for(let Nt=0;Nt<Ke;Nt++)s.rect(C+Nt*F,q,F,Le,"S");q+=Le}j=q+6}j+u+126>E-M&&(s.addPage(),j=18),s.setFillColor(...a),s.rect(C,j,N,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text("Note personali",C+2.5,j+u/1.7,{align:"left"}),s.setTextColor("#000000"),j+=u+2;let re=i?.personalNotes??r?.personalNotes??"",ae=typeof re=="string"&&re.trim()?re.split(`
`):[],fe=18;s.setFont("Helvetica","normal"),s.setFontSize(11);let Ie=7;for(let _e=0;_e<fe;_e++)j+Ie>E-M&&(s.addPage(),j=18),s.line(C,j,C+N,j),ae[_e]&&s.text(ae[_e],C+2.5,j+Ie*.68,{align:"left"}),j+=Ie;return s.line(C,j,C+N,j),s})}buildProfGhizzDoc(r,i,o=null){return ee(this,null,function*(){let s=new Ct({unit:"mm",format:"a4",hotfixes:["px_scaling"]}),a=s.internal.pageSize.getWidth(),c=16,l=18;s.setFont("Helvetica","bold"),s.setFontSize(18),s.text("Prof Ghizz Personal Template",a/2,l,{align:"center"}),l+=12,s.setFontSize(13.2),s.setFont("Helvetica","normal"),s.text(`Cliente: ${i?.name||""}`,c,l),l+=8,s.text(`Inizio: ${r?.dataInizio||""}`,c,l),l+=12,s.setFontSize(12),s.setFont("Helvetica","bold"),s.text("Esercizi Profilati",c,l),l+=10;for(let u of r.giorni){l>265&&(s.addPage(),l=18),s.setFont("Helvetica","bold"),s.text(u.nome,c,l),l+=7;for(let p of u.esercizi)l>275&&(s.addPage(),l=18),s.setFont("Helvetica","normal"),s.text(`- ${p.nome}`,c+4,l),l+=6,s.setFont("Helvetica","italic"),s.text("ProfGhizz Campo 1: _______________________________",c+12,l),l+=6,s.text("ProfGhizz Campo 2: _______________________________",c+12,l),l+=8;l+=5}return l+=4,s.setFontSize(12),s.setFont("Helvetica","bold"),s.text("Note:",c,l),l+=7,s.setFont("Helvetica","normal"),s.text(i?.personalNotes||r?.personalNotes||"",c+2,l,{maxWidth:a-2*c}),s})}buildAndSavePdf(r,i,o=null){return ee(this,null,function*(){let s=yield this.buildDoc(r,i,o),a=(i?.name||"Cliente").replace(/\s+/g,""),c=r.dataInizio||"",l=`scheda-${a}-${c}.pdf`;s.save(l)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var rse="firebase",ise="11.10.0";bi.registerVersion(rse,ise,"app-compat");var ose=["ngOnDestroy"],b9=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(ose.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let p=u?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Gx=class{constructor(e){return e}},kd=new We("angularfire2.app.options"),Rd=new We("angularfire2.app.name");function hh(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=bi.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>bi.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;sse("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Gx(s)}var sse=(n,...e)=>{Lu()&&typeof console<"u"&&console[n](...e)},ase={provide:Gx,useFactory:hh,deps:[kd,jt,[new kr,Rd]]},x9=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:kd,useValue:t},{provide:Rd,useValue:r}]}}constructor(t){bi.registerVersion("angularfire",Zr.full,"core"),bi.registerVersion("angularfire",Zr.full,"app-compat"),bi.registerVersion("angular",Qm.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Be(Pi))};static \u0275mod=ar({type:n});static \u0275inj=er({providers:[ase]})}return n})();function om(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return cse(i,s)||(w9("error",`${e} was already initialized on the ${t} Firebase App with different settings.${lse?" You may need to reload as Firebase is not HMR aware.":""}`),w9("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function cse(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var lse=typeof module<"u"&&!!module.hot,w9=(n,...e)=>{Lu()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var qN=new We("angularfire2.auth.use-emulator"),HN=new We("angularfire2.auth.settings"),GN=new We("angularfire2.auth.tenant-id"),WN=new We("angularfire2.auth.langugage-code"),KN=new We("angularfire2.auth.use-device-language"),YN=new We("angularfire.auth.persistence"),ZN=(n,e,t,r,i,o,s,a)=>om(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),ph=(()=>{class n{injector=Ae(Gn);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,u,p,v,g){let E=new kn,C=dt(void 0).pipe(io(s.outsideAngular),Mn(()=>o.runOutsideAngular(()=>import("./chunk-BL37SGO3.js"))),rt(()=>hh(t,o,r)),rt(M=>ZN(M,o,a,l,u,p,c,v)),a1({bufferSize:1,refCount:!1}));if(Aw(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{C.pipe(La()).subscribe();let M=C.pipe(Mn(j=>j.getRedirectResult().then(H=>H,()=>null)),Ii(this.injector),a1({bufferSize:1,refCount:!1})),N=C.pipe(Mn(j=>new kt(H=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(oe=>H.next(oe),oe=>H.error(oe),()=>H.complete()))})))),Q=C.pipe(Mn(j=>new kt(H=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(oe=>H.next(oe),oe=>H.error(oe),()=>H.complete()))}))));this.authState=M.pipe(c1(N),sa(s.outsideAngular),io(s.insideAngular)),this.user=M.pipe(c1(Q),sa(s.outsideAngular),io(s.insideAngular)),this.idToken=this.user.pipe(Mn(j=>j?gn(j.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(Mn(j=>j?gn(j.getIdTokenResult()):dt(null))),this.credential=aC(M,E,this.authState.pipe(Pr(j=>!j))).pipe(rt(j=>j?.user?j:null),sa(s.outsideAngular),io(s.insideAngular))}return b9(this,C,o,{spy:{apply:(M,N,Q)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&Q.then(j=>E.next(j))}}})}static \u0275fac=function(r){return new(r||n)(Be(kd),Be(Rd,8),Be(Pi),Be(jt),Be(Qr),Be(qN,8),Be(HN,8),Be(GN,8),Be(WN,8),Be(KN,8),Be(YN,8),Be(os,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),E9=(()=>{class n{constructor(){bi.registerVersion("angularfire",Zr.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ar({type:n});static \u0275inj=er({providers:[ph]})}return n})();var Wx=(()=>{let e=class e{constructor(r){this.afAuth=r,this._ensuring=null}ensureSignedIn(){return ee(this,null,function*(){if(this._ensuring)return this._ensuring;this._ensuring=ee(this,null,function*(){if(!(yield this.afAuth.currentUser))try{yield this.afAuth.signInAnonymously(),yield new Promise(i=>{let o=this.afAuth.authState.subscribe(s=>{s&&(o.unsubscribe(),i())});setTimeout(()=>{o.unsubscribe(),i()},5e3)})}catch(i){console.error("AuthService.ensureSignedIn failed",i)}});try{yield this._ensuring}finally{this._ensuring=null}})}};e.\u0275fac=function(i){return new(i||e)(Be(ph))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var use=(n,e)=>({active:n,inactive:e});function dse(n,e){if(n&1&&bt(0,"img",36),n&2){let t=ce(2);ve("src",t.user.avatarUrl,xr)("alt",t.user.name)}}function fse(n,e){n&1&&(co(0),A(1,"span",37),Z(2,"person"),R(),lo())}function hse(n,e){if(n&1){let t=Bt();A(0,"button",38),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.openWhatsAppWithMessage())}),fr(),A(1,"svg",39),bt(2,"circle",40)(3,"path",41),R()()}}function pse(n,e){n&1&&(A(0,"span",42),Z(1," Tessera scaduta! "),R())}function gse(n,e){if(n&1&&(A(0,"div",43),Z(1),R()),n&2){let t=ce(2);X(),yr("Totale: ",t.filteredCards.length)}}function mse(n,e){if(n&1&&(co(0),Z(1),lo()),n&2){let t=ce().$implicit;X(),yr(" - ",t.time)}}function vse(n,e){if(n&1){let t=Bt();A(0,"div",45)(1,"div",46)(2,"span",47),Z(3,"assignment"),R(),A(4,"span",48),Z(5),st(6,mse,2,1,"ng-container",9),R()(),A(7,"div",49)(8,"button",50),Fe("click",function(){let i=Ee(t).index,o=ce(3);return Ce(o.printCard(i))}),A(9,"span",51),Z(10,"print"),R()(),A(11,"button",52),Fe("click",function(){let i=Ee(t).index,o=ce(3);return Ce(o.deleteCard(i))}),A(12,"span",51),Z(13,"delete"),R()()()()}if(n&2){let t=e.$implicit;X(5),yr(" ",t.date),X(),ve("ngIf",t.time)}}function yse(n,e){if(n&1&&(co(0),st(1,vse,14,2,"div",44),lo()),n&2){let t=ce(2);X(),ve("ngForOf",t.filteredCards)}}function _se(n,e){n&1&&(A(0,"div",53),Z(1," Nessuna scheda associata. Salva una scheda dalla pagina Gestione Schede per vederla qui. "),R())}function wse(n,e){if(n&1){let t=Bt();A(0,"div",54),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.closeDeleteModal())}),R()}}function bse(n,e){if(n&1){let t=Bt();A(0,"div",55)(1,"div",56),Fe("click",function(i){return Ee(t),Ce(i.stopPropagation())}),A(2,"p"),Z(3,"Sei sicuro di voler eliminare questo cliente in modo definitivo?"),R(),A(4,"div",57)(5,"button",58),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.deleteUserCustom())}),Z(6,"Elimina"),R(),A(7,"button",22),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.closeDeleteModal())}),Z(8,"Annulla"),R()()()()}}function xse(n,e){if(n&1){let t=Bt();A(0,"div",54),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.closeEditModal())}),R()}}function Ese(n,e){if(n&1&&(co(0),bt(1,"img",89),lo()),n&2){let t=ce(3);X(),ve("src",t.editForm.avatarUrl||(t.user==null?null:t.user.avatarUrl),xr)}}function Cse(n,e){n&1&&(A(0,"span",90),Z(1," person "),R())}function Ise(n,e){n&1&&(A(0,"div",91),Z(1,"Caricamento immagine in corso..."),R())}function Sse(n,e){if(n&1){let t=Bt();A(0,"div",59)(1,"form",60),Fe("ngSubmit",function(){Ee(t);let i=ce(2);return Ce(i.saveEditModal())})("click",function(i){return Ee(t),Ce(i.stopPropagation())}),A(2,"h2"),Z(3,"Profilo Cliente"),R(),A(4,"div",61)(5,"div",62),Fe("click",function(){Ee(t);let i=Hi(10),o=ce(2);return Ce(o.triggerAvatarInput(i))}),st(6,Ese,2,1,"ng-container",5)(7,Cse,2,0,"ng-template",null,2,is),A(9,"input",63,3),Fe("change",function(i){Ee(t);let o=ce(2);return Ce(o.onAvatarChange(i))}),R()(),st(11,Ise,2,0,"div",64),A(12,"div",65)(13,"div",66)(14,"label"),Z(15,"Nome "),A(16,"input",67),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.nome,i)||(o.nome=i),Ce(i)}),R()(),A(17,"label"),Z(18,"Cognome "),A(19,"input",68),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.cognome,i)||(o.cognome=i),Ce(i)}),R()(),A(20,"label"),Z(21,"Email "),A(22,"input",69),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.email,i)||(o.editForm.email=i),Ce(i)}),R()(),A(23,"label"),Z(24,"Telefono "),A(25,"input",70),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.phone,i)||(o.editForm.phone=i),Ce(i)}),R()(),A(26,"label"),Z(27,"Data di nascita "),A(28,"input",71),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.birthDate,i)||(o.editForm.birthDate=i),Ce(i)}),R()(),A(29,"label"),Z(30,"Genere "),A(31,"select",72),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.gender,i)||(o.editForm.gender=i),Ce(i)}),A(32,"option",73),Z(33,"-"),R(),A(34,"option",74),Z(35,"Uomo"),R(),A(36,"option",75),Z(37,"Donna"),R(),A(38,"option",76),Z(39,"Altro"),R()()(),A(40,"label"),Z(41,"Indirizzo "),A(42,"input",77),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.address,i)||(o.editForm.address=i),Ce(i)}),R()(),A(43,"label"),Z(44,"Citt\xE0 "),A(45,"input",78),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.city,i)||(o.editForm.city=i),Ce(i)}),R()(),A(46,"label"),Z(47,"Provincia "),A(48,"input",79),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.provincia,i)||(o.editForm.provincia=i),Ce(i)}),R()(),A(49,"label"),Z(50,"CAP "),A(51,"input",80),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.cap,i)||(o.editForm.cap=i),Ce(i)}),R()(),A(52,"label"),Z(53,"Stato "),A(54,"select",81),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.status,i)||(o.editForm.status=i),Ce(i)}),A(55,"option",73),Z(56,"-"),R(),A(57,"option",82),Z(58,"Attivo"),R(),A(59,"option",83),Z(60,"Inattivo"),R()()()(),A(61,"div",84)(62,"label"),Z(63,"Note personali "),A(64,"textarea",85),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.personalNotes,i)||(o.editForm.personalNotes=i),Ce(i)}),R()()()()(),A(65,"div",86)(66,"button",87),Z(67,"Salva"),R(),A(68,"button",88),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.closeEditModal())}),Z(69,"Annulla"),R()()()()}if(n&2){let t=Hi(8),r=ce(2);X(6),ve("ngIf",r.editForm.avatarUrl||(r.user==null?null:r.user.avatarUrl))("ngIfElse",t),X(5),ve("ngIf",r.avatarLoading),X(5),vt("ngModel",r.nome),X(3),vt("ngModel",r.cognome),X(3),vt("ngModel",r.editForm.email),X(3),vt("ngModel",r.editForm.phone),X(3),vt("ngModel",r.editForm.birthDate),X(3),vt("ngModel",r.editForm.gender),X(11),vt("ngModel",r.editForm.address),X(3),vt("ngModel",r.editForm.city),X(3),vt("ngModel",r.editForm.provincia),X(3),vt("ngModel",r.editForm.cap),X(3),vt("ngModel",r.editForm.status),X(10),vt("ngModel",r.editForm.personalNotes)}}function Ase(n,e){if(n&1){let t=Bt();co(0),A(1,"div",6)(2,"div",7),st(3,dse,1,2,"img",8)(4,fse,3,0,"ng-container",9),R(),A(5,"div",10)(6,"div",11)(7,"div")(8,"div",12),Z(9),R(),A(10,"div",13),Z(11),R(),A(12,"div",14),Z(13),st(14,hse,4,0,"button",15)(15,pse,2,0,"span",16),R()(),A(16,"div",17)(17,"span",18),Z(18),R(),A(19,"div",19),Z(20),R()()(),A(21,"div",20)(22,"button",21),Fe("click",function(){Ee(t);let i=ce();return Ce(i.openEditModal())}),Z(23,"Modifica Profilo"),R(),A(24,"button",22),Fe("click",function(){Ee(t);let i=ce();return Ce(i.openDeleteModal())}),Z(25,"Elimina Cliente"),R()()()(),A(26,"div",23)(27,"div",24)(28,"div",25)(29,"h3"),Z(30,"Dettagli Cliente"),R(),A(31,"div",26)(32,"span"),Z(33,"Nome"),R(),A(34,"span"),Z(35),R()(),A(36,"div",26)(37,"span"),Z(38,"Cognome"),R(),A(39,"span"),Z(40),R()(),A(41,"div",26)(42,"span"),Z(43,"Data di nascita"),R(),A(44,"span"),Z(45),R()(),A(46,"div",26)(47,"span"),Z(48,"Genere"),R(),A(49,"span"),Z(50),R()(),A(51,"div",26)(52,"span"),Z(53,"Indirizzo"),R(),A(54,"span"),Z(55),R()(),A(56,"div",26)(57,"span"),Z(58,"Citt\xE0"),R(),A(59,"span"),Z(60),R()(),A(61,"div",26)(62,"span"),Z(63,"Provincia"),R(),A(64,"span"),Z(65),R()(),A(66,"div",26)(67,"span"),Z(68,"CAP"),R(),A(69,"span"),Z(70),R()()(),A(71,"div",25)(72,"h3"),Z(73,"Tessera"),R(),A(74,"div",26)(75,"span"),Z(76,"Scadenza"),R(),A(77,"span")(78,"input",27),Fe("change",function(i){Ee(t);let o=ce();return Ce(o.updateSubscriptionEnd(i.target.value))}),R()()()(),A(79,"div",25)(80,"h3"),Z(81,"Note Personali"),R(),A(82,"div",28),Z(83),R()()(),A(84,"div",29)(85,"div",25)(86,"div",30)(87,"h3"),Z(88,"Schede di Allenamento"),R(),st(89,gse,2,1,"div",31),R(),A(90,"div",32),st(91,yse,2,1,"ng-container",5)(92,_se,2,0,"ng-template",null,1,is),R()()()(),st(94,wse,1,0,"div",33)(95,bse,9,0,"div",34)(96,xse,1,0,"div",33)(97,Sse,70,15,"div",35),lo()}if(n&2){let t=Hi(93),r=ce();X(3),ve("ngIf",r.user.avatarUrl),X(),ve("ngIf",!r.user.avatarUrl),X(5),Zt(r.user.name),X(2),Zt(r.user.email),X(2),yr(" Tel: ",r.user.phone||"-"," "),X(),ve("ngIf",r.user.phone&&r.user.subscriptionEnd),X(),ve("ngIf",r.isExpired(r.user.subscriptionEnd)),X(2),ve("ngClass",M0(27,use,r.user.status==="Attivo",r.user.status!=="Attivo")),X(),yr(" ",r.user.status," "),X(2),yr("Data iscrizione: ",r.user.signupDate),X(15),Zt(r.user.name.split(" ")[0]),X(5),Zt(r.user.name.split(" ").slice(1).join(" ")||"-"),X(5),Zt(r.user.birthDate||"-"),X(5),Zt(r.user.gender||"-"),X(5),Zt(r.user.address||"-"),X(5),Zt(r.user.city||"-"),X(5),Zt(r.user.provincia||"-"),X(5),Zt(r.user.cap||"-"),X(8),ve("value",r.user.subscriptionEnd||""),X(5),Zt(r.user.personalNotes||""),X(6),ve("ngIf",r.filteredCards.length),X(2),ve("ngIf",r.filteredCards.length>0)("ngIfElse",t),X(3),ve("ngIf",r.showDeleteModal),X(),ve("ngIf",r.showDeleteModal),X(),ve("ngIf",r.showEditModal),X(),ve("ngIf",r.showEditModal)}}function Dse(n,e){n&1&&(A(0,"p"),Z(1,"Utente non trovato"),R())}var I9=(()=>{let e=class e{constructor(r,i,o,s){this.route=r,this.router=i,this.pdfSchedaService=o,this.authService=s,this.firestore=Ae(Bo),this.imageService=Ae(Bg),this.showEditModal=!1,this.showDeleteModal=!1,this.editForm={},this.nome="",this.cognome="",this.userId="",this.avatarLoading=!1,this.filterExpiredOnly=!1,this.today=new Date().toISOString().substring(0,10)}ngOnInit(){this.route.paramMap.subscribe(r=>{let i=r.get("id");if(!i){this.userId="",this.user=void 0;return}this.userId=i,this.getUser()})}ngOnDestroy(){this.userSub?.unsubscribe()}getUser(){if(!this.userId){this.user=void 0;return}let r=ni(this.firestore,`users/${this.userId}`);this.userSub?.unsubscribe(),this.userSub=N7(r).subscribe(i=>{if(!i)return;let o=Ft(Oe({},i),{id:this.userId});Array.isArray(o.cards)&&(o.cards=o.cards.sort((s,a)=>{let c=this.parseItDateTime(s.date,s.time);return(this.parseItDateTime(a.date,a.time)?.getTime()||0)-(c?.getTime()||0)})),this.user=o})}parseItDateTime(r,i){if(!r)return;let o=r.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!o)return;let s=Number(o[1]),a=Number(o[2])-1,c=Number(o[3]),l=0,u=0,p=0;if(i){let v=i.match(/^(\d{2}):(\d{2})(?::(\d{2}))?$/);v&&(l=Number(v[1]),u=Number(v[2]),p=v[3]?Number(v[3]):0)}return new Date(c,a,s,l,u,p)}isExpired(r){return r?r<=this.today:!1}deleteCard(r){return ee(this,null,function*(){if(!this.user||!this.user.id)return;let i=Array.isArray(this.user.cards)?[...this.user.cards]:[];i.splice(r,1);let o=ni(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield nc(o,{cards:i}),this.user.cards=i}catch(s){console.error("Error deleting card",s)}this.getUser()})}openEditModal(){if(!this.user||!this.user.id)return;this.editForm=Ft(Oe({},this.user),{avatarFile:void 0});let r=(this.user.name||"").trim().split(" ");this.nome=r[0]||"",this.cognome=r.slice(1).join(" ")||"",this.showEditModal=!0}closeEditModal(){this.showEditModal=!1,this.editForm={},this.nome="",this.cognome="",this.avatarLoading=!1}onAvatarChange(r){return ee(this,null,function*(){let i=r.target;if(!i.files||!i.files[0])return;let o=i.files[0];this.avatarLoading=!0,this.editForm.avatarFile=o,this.editForm.avatarUrl=yield this.imageService.compressAndConvertToBase64(o,1e3,256),this.avatarLoading=!1})}triggerAvatarInput(r){r.click()}saveEditModal(){return ee(this,null,function*(){if(!this.user||!this.user.id){alert("ID utente mancante, impossibile aggiornare!");return}let r=`${this.nome||""} ${this.cognome||""}`.trim();if(!r||!this.editForm.email){alert("Compila almeno Nome, Cognome ed Email.");return}let i={name:r,email:this.editForm.email??"",phone:this.editForm.phone??"",birthDate:this.editForm.birthDate??"",gender:this.editForm.gender??"",address:this.editForm.address??"",city:this.editForm.city??"",provincia:this.editForm.provincia??"",cap:this.editForm.cap??"",personalNotes:this.editForm.personalNotes??"",subscriptionEnd:this.editForm.subscriptionEnd??"",avatarUrl:this.editForm.avatarUrl??this.user.avatarUrl??"",signupDate:this.user.signupDate??"",status:this.editForm.status??this.user.status??"",cards:this.user.cards??[]},o=ni(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield nc(o,i),this.user=Oe(Oe({},this.user),i)}catch(s){console.error("Error updating user",s),alert("Errore aggiornamento utente. Riprova.")}this.closeEditModal()})}printCard(r){return ee(this,null,function*(){if(!this.user||!this.user.cards||!this.user.cards[r])return;let i=this.user.cards[r];if(i.pdfBase64&&i.pdfBase64.length>0)try{let o=atob(i.pdfBase64),s=new Array(o.length);for(let u=0;u<o.length;u++)s[u]=o.charCodeAt(u);let a=new Uint8Array(s),c=new Blob([a],{type:"application/pdf"}),l=URL.createObjectURL(c);window.open(l,"_blank"),setTimeout(()=>URL.revokeObjectURL(l),6e4);return}catch(o){console.error("Errore apertura PDF da base64, fallback al builder",o)}try{yield this.pdfSchedaService.buildAndSavePdf(i,this.user)}catch(o){console.error("Errore durante la stampa della scheda",o),alert("Errore durante la stampa della scheda")}})}updateCardAbbonamentoEndDate(r,i){return ee(this,null,function*(){if(!this.user||!this.user.cards||!this.user.cards[r]||!this.user.id)return;this.user.cards[r].abbonamentoEndDate=i;let o=ni(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield nc(o,{cards:this.user.cards})}catch(s){console.error("Errore aggiornamento scadenza tessera scheda",s),alert("Impossibile salvare la nuova scadenza della tessera!")}})}updateSubscriptionEnd(r){return ee(this,null,function*(){if(!this.user?.id)return;let i=ni(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield nc(i,{subscriptionEnd:r}),this.user.subscriptionEnd=r}catch(o){console.error("Errore aggiornamento scadenza tessera",o),alert("Impossibile salvare la nuova scadenza!")}})}openWhatsAppWithMessage(){if(!this.user?.phone||!this.user?.subscriptionEnd)return;let r=`Ciao ${this.user.name}, la tua tessera scade il giorno ${this.user.subscriptionEnd}. Provvedi al rinnovo.`,i=`https://wa.me/${this.user.phone.replace(/\D/g,"")}?text=${encodeURIComponent(r)}`;window.open(i,"_blank")}openDeleteModal(){this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1}deleteUserCustom(){return ee(this,null,function*(){if(!this.user||!this.user.id)return;let r=ni(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield Vg(r)}catch(i){console.error("Error deleting user",i)}this.closeDeleteModal(),this.router.navigate(["/anagrafica"])})}get filteredCards(){return this.user?.cards?this.filterExpiredOnly?this.user.cards.filter(r=>r.abbonamentoEndDate&&r.abbonamentoEndDate<=this.today):this.user.cards:[]}};e.\u0275fac=function(i){return new(i||e)(ot(Vs),ot(fo),ot(Hx),ot(Wx))},e.\u0275cmp=Rr({type:e,selectors:[["app-anagrafica-detail"]],standalone:!1,decls:6,vars:2,consts:[["notfound",""],["schedeVuote",""],["emptyAvatar",""],["avatarInput",""],[1,"page","anagrafica-detail"],[4,"ngIf","ngIfElse"],[1,"user-detail-header"],[1,"user-avatar-big"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"user-basic-info"],[1,"user-row-top"],[1,"user-detail-name"],[1,"user-detail-email"],[1,"user-detail-phone"],["class","icon-btn wa-btn","style","margin-left:12px; background:#fff; border:2px solid #25d366; border-radius:50%; padding:4px 7px; box-shadow:0 1px 4px rgba(0,0,0,0.07); width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;","title","Messaggia su WhatsApp",3,"click",4,"ngIf"],["class","badge badge-danger","style","margin-left:8px; background:#ffdede; color:#d32f2f; border-radius:6px; padding:0 8px;",4,"ngIf"],[1,"status-date"],[1,"user-status-label",3,"ngClass"],[1,"user-detail-signup-date"],[1,"user-detail-actions"],[1,"btn",3,"click"],[1,"btn","outline",3,"click"],[1,"user-detail-content"],[1,"user-detail-col"],[1,"user-detail-section"],[1,"personal-info-row"],["type","date",1,"gestabbonamento-date",2,"background","#fff","border","none","outline","none","font-size","1rem","color","#195089",3,"change","value"],[1,"note-box"],[1,"user-detail-col","user-detail-col-wide"],[1,"schede-header"],["class","schede-count",4,"ngIf"],[1,"scheda-box"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-confirm-delete",4,"ngIf"],["class","modal-edit-profilo",4,"ngIf"],[3,"src","alt"],[1,"material-icons","avatar-placeholder-big",2,"font-size","72px","border-radius","50%","background","#f4f4f4","color","#bbb"],["title","Messaggia su WhatsApp",1,"icon-btn","wa-btn",2,"margin-left","12px","background","#fff","border","2px solid #25d366","border-radius","50%","padding","4px 7px","box-shadow","0 1px 4px rgba(0,0,0,0.07)","width","40px","height","40px","display","inline-flex","align-items","center","justify-content","center",3,"click"],["width","28","height","28","viewBox","0 0 32 32",2,"vertical-align","middle"],["cx","16","cy","16","r","16","fill","#25d366"],["d","M22 20.7c-.4 0-.8.1-1.2.2-.7.2-1.3.3-2 .3l-.4-.2c-2.7-1.1-5.7-3.9-6.6-6.6l-.1-.4c0-.7.1-1.4.3-2l.2-1.2c.1-.4-.1-.8-.3-1.1-.3-.3-.7-.5-1.1-.5h-2c-.5 0-1 .2-1.3.5-.6.6-.9 1.5-.6 2.4C8.5 17 12.4 20.1 16.6 21.2c.9.3 1.8 0 2.4-.6.3-.3.5-.8.5-1.3v-2c0-.4-.2-.8-.5-.1-.3-.3-.8-.5-1.2-.3z","fill","#fff"],[1,"badge","badge-danger",2,"margin-left","8px","background","#ffdede","color","#d32f2f","border-radius","6px","padding","0 8px"],[1,"schede-count"],["class","scheda-row",4,"ngFor","ngForOf"],[1,"scheda-row"],[1,"scheda-info-flex","scheda-info",2,"flex-direction","row","align-items","center","gap","10px"],[1,"material-icons","scheda-icon"],[1,"scheda-date",2,"font-weight","600"],[1,"scheda-actions-inline"],["title","Stampa PDF",1,"btn","small",3,"click"],[1,"material-icons","small-icon"],["title","Elimina",1,"btn","small","outline",3,"click"],[1,"scheda-empty"],[1,"modal-backdrop",3,"click"],[1,"modal-confirm-delete"],[1,"modal-confirm-content",3,"click"],[1,"modal-confirm-actions"],[1,"btn","danger",3,"click"],[1,"modal-edit-profilo"],["autocomplete","off",3,"ngSubmit","click"],[1,"modal-edit-flex"],[1,"modal-avatar-box",3,"click"],["type","file","accept","image/*","hidden","",3,"change"],["class","avatar-loader","style","margin-left:15px;color:#888;",4,"ngIf"],[1,"modal-fields-note-wrap"],[1,"modal-fields-grid"],["type","text","name","nome","required","",3,"ngModelChange","ngModel"],["type","text","name","cognome","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","name","phone",3,"ngModelChange","ngModel"],["type","date","name","birthDate",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Uomo"],["value","Donna"],["value","Altro"],["type","text","name","address",3,"ngModelChange","ngModel"],["type","text","name","city",3,"ngModelChange","ngModel"],["type","text","name","provincia",3,"ngModelChange","ngModel"],["type","text","name","cap",3,"ngModelChange","ngModel"],["name","status",3,"ngModelChange","ngModel"],["value","Attivo"],["value","Inattivo"],[1,"modal-field-note-row"],["name","personalNotes","rows","4",3,"ngModelChange","ngModel"],[1,"modal-edit-actions"],["type","submit",1,"btn"],["type","button",1,"btn","outline",3,"click"],["alt","Avatar",1,"avatar-img-preview",2,"width","72px","height","72px","border-radius","50%","object-fit","cover","cursor","pointer","box-shadow","0 0 8px #eee",3,"src"],[1,"material-icons",2,"font-size","60px","width","72px","height","72px","border-radius","50%","background","#f4f4f4","color","#9b9b9b","display","inline-flex","align-items","center","justify-content","center","cursor","pointer"],[1,"avatar-loader",2,"margin-left","15px","color","#888"]],template:function(i,o){if(i&1&&(A(0,"div",4)(1,"h2"),Z(2,"Cliente"),R(),st(3,Ase,98,30,"ng-container",5)(4,Dse,2,0,"ng-template",null,0,is),R()),i&2){let s=Hi(5);X(3),ve("ngIf",o.user)("ngIfElse",s)}},dependencies:[xf,uo,Rs,qw,zu,$u,_a,Lc,Fc,zw,Y0,Ga,K0],styles:[".page.anagrafica-detail[_ngcontent-%COMP%]{max-width:1160px;margin:32px auto;padding:24px 20px 32px;background:#f8fafc;border-radius:16px;box-shadow:0 5px 35px #d3dbe925}h2[_ngcontent-%COMP%]{font-size:1.54rem;font-weight:600;margin-bottom:28px}.user-detail-header[_ngcontent-%COMP%]{display:flex;gap:26px;align-items:flex-start;background:#fff;border-radius:14px;margin-bottom:28px;box-shadow:0 2px 12px #c7d5e12a;padding:22px 28px 15px 22px}.user-avatar-big[_ngcontent-%COMP%], .modal-avatar-box[_ngcontent-%COMP%]{width:96px;height:96px;border-radius:50%;background:#e9f2fb;display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;cursor:pointer}.user-avatar-big[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .modal-avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:94px;height:94px;border-radius:50%;object-fit:cover}.avatar-placeholder-big[_ngcontent-%COMP%]{font-size:58px;color:#bdcbe1}.user-basic-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:flex-start}.user-row-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:15px}.user-detail-name[_ngcontent-%COMP%]{font-size:1.19rem;font-weight:700;color:#132c4c}.user-detail-email[_ngcontent-%COMP%]{color:#577296;font-size:1rem;margin-top:7px}.user-detail-phone[_ngcontent-%COMP%]{font-size:.98rem;color:#3f4760;margin-top:6px}.status-date[_ngcontent-%COMP%]{text-align:right}.user-status-label[_ngcontent-%COMP%]{display:inline-block;background:#e8faee;color:#1cb164;font-weight:600;border-radius:7px;padding:6px 22px;font-size:1.06rem;min-width:74px;text-align:center;margin-bottom:5px}.user-status-label.inactive[_ngcontent-%COMP%]{color:#e76c6c;background:#fde8e8}.user-detail-signup-date[_ngcontent-%COMP%]{color:#7b90ad;font-size:.96rem;margin-top:7px}.user-detail-actions[_ngcontent-%COMP%]{margin-top:14px}.btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;padding:8px 14px;border-radius:6px;margin-right:9px;font-size:1rem;font-weight:500;cursor:pointer;transition:background .18s;box-shadow:0 2px 6px #365fd214}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{background:#1742b0}.btn.outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #cbd8e6;color:#2563eb}.btn.small[_ngcontent-%COMP%]{font-size:.97rem;padding:7px 10px;margin-right:7px;margin-top:7px;margin-bottom:0}.btn.danger[_ngcontent-%COMP%]{background:#ee4555;color:#fff;border:none}.btn.danger[_ngcontent-%COMP%]:hover, .btn.danger[_ngcontent-%COMP%]:focus{background:#ad1125}.user-detail-content[_ngcontent-%COMP%]{display:flex;gap:30px;margin-top:16px}.user-detail-col[_ngcontent-%COMP%]{flex:1.1;min-width:270px;display:flex;flex-direction:column;gap:28px}.user-detail-col-wide[_ngcontent-%COMP%]{flex:2}.user-detail-section[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 1.5px 6px #d7dbe333;padding:18px 20px 19px 22px;margin-bottom:4px}.user-detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.09rem;font-weight:600;margin-bottom:18px}.personal-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.01rem;padding:2.5px 0;color:#495879;border-bottom:1px solid #f1f5fa}.personal-info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.personal-info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#253157;font-weight:500}.note-box[_ngcontent-%COMP%]{background:#f6fbff;border:1px solid #e1e8ee;border-radius:7px;color:#6d7c96;font-size:.99rem;padding:11px 15px;min-height:54px;margin-bottom:2px}.schede-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:8px}.schede-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.schede-count[_ngcontent-%COMP%]{color:#607997;font-size:.95rem}.scheda-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:13px}.scheda-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fafdfe;border:1px solid #c8e8fd;border-radius:10px;padding:11px 16px 8px}.scheda-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.scheda-title[_ngcontent-%COMP%]{font-size:1.06rem;font-weight:600;color:#195089}.scheda-date[_ngcontent-%COMP%]{font-size:.97rem;color:#607997;margin-top:5px}.scheda-actions-inline[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:6px}.scheda-actions-inline[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}.scheda-empty[_ngcontent-%COMP%]{background:#f6fbff;border:1px dashed #cbd8e6;border-radius:8px;padding:14px 12px;color:#607997;text-align:center}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:#17334b44}.modal-confirm-delete[_ngcontent-%COMP%]{position:fixed;z-index:1050;top:50%;left:50%;transform:translate(-50%,-50%);min-width:340px;max-width:95vw;background:#fff;border-radius:14px;box-shadow:0 8px 44px #0d1d3325;padding:32px 34px 22px;display:flex;flex-direction:column;align-items:stretch}.modal-confirm-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.modal-confirm-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.12rem;margin-bottom:22px;text-align:center;color:#18325a}.modal-confirm-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:22px}.modal-edit-profilo[_ngcontent-%COMP%]{position:fixed;z-index:1010;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:18px;box-shadow:0 10px 40px #1d2c4522;min-width:650px;max-width:980px;padding:32px 34px 22px 32px;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalpop .18s cubic-bezier(.32,1.56,.66,1) 1}@keyframes _ngcontent-%COMP%_modalpop{0%{transform:translate(-50%,-56%) scale(.98)}to{transform:translate(-50%,-50%) scale(1)}}.modal-edit-profilo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;margin-bottom:18px}.modal-edit-flex[_ngcontent-%COMP%]{display:flex;gap:32px;align-items:flex-start}.modal-avatar-box[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;margin-right:32px;margin-top:7px;cursor:pointer;width:88px;height:88px;border-radius:50%;box-shadow:0 2px 9px #2463eb0f;background:#f8fafc}.modal-avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2.5px solid #e0e5f7}.modal-fields-note-wrap[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.modal-fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px 20px}.modal-fields-grid[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.97rem;color:#143349;gap:5px}.modal-fields-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-fields-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 10px;border-radius:7px;border:1.3px solid #dce1eb;background:#f8fafc;color:#102039;font-size:1rem}.modal-fields-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-fields-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-field-note-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:1.3px solid #2563eb;background:#f6faff}.modal-field-note-row[_ngcontent-%COMP%]{grid-column:1/-1;margin-top:18px;display:flex;flex-direction:column}.modal-field-note-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.99rem;color:#143349}.modal-field-note-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:92px;resize:vertical;padding:10px;border-radius:8px;border:1.2px solid #dce1eb;background:#f8fafc;color:#102039;font-size:1rem}.modal-edit-actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end;gap:14px}.scheda-info-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.scheda-icon[_ngcontent-%COMP%]{color:#2563eb;font-size:28px;flex-shrink:0}.small-icon[_ngcontent-%COMP%]{font-size:20px!important;vertical-align:middle;margin-right:0!important}@media (max-width: 900px){.modal-edit-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.modal-avatar-box[_ngcontent-%COMP%]{margin:0 auto 20px}.modal-fields-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]});let n=e;return n})();function Tse(n,e){if(n&1&&(A(0,"div",48),Z(1),R()),n&2){let t=ce();X(),yr(" ",t.savedMsgText,`
`)}}function Mse(n,e){if(n&1&&bt(0,"img",49),n&2){let t=ce();ve("src",t.cliente==null?null:t.cliente.avatarUrl,xr)}}function Nse(n,e){n&1&&(A(0,"div",50),Z(1,"\u{1F464}"),R())}function Pse(n,e){n&1&&(co(0),fr(),A(1,"svg",51),bt(2,"rect",52),A(3,"g"),bt(4,"rect",53)(5,"circle",54)(6,"path",55),R()(),lo())}function kse(n,e){if(n&1&&bt(0,"img",56),n&2){let t=ce();ve("src",t.logoPreviewUrl,xr)}}function Rse(n,e){if(n&1){let t=Bt();A(0,"div",60),Fe("click",function(){Ee(t);let i=ce().index,o=ce();return Ce(o.setGiorno(i))})("dblclick",function(){Ee(t);let i=ce().$implicit,o=ce();return Ce(o.enableTabEdit(i))}),Z(1),R()}if(n&2){let t=ce().$implicit;X(),yr(" ",t.nome," ")}}function Ose(n,e){if(n&1){let t=Bt();A(0,"input",61),yt("ngModelChange",function(i){Ee(t);let o=ce().$implicit;return xt(o.nome,i)||(o.nome=i),Ce(i)}),Fe("blur",function(){Ee(t);let i=ce().$implicit,o=ce();return Ce(o.disableTabEdit(i))})("keydown.enter",function(){Ee(t);let i=ce().$implicit,o=ce();return Ce(o.disableTabEdit(i))}),R()}if(n&2){let t=ce().$implicit;vt("ngModel",t.nome)}}function Fse(n,e){if(n&1&&(A(0,"div",57),st(1,Rse,2,1,"div",58)(2,Ose,1,1,"input",59),R()),n&2){let t=e.$implicit,r=e.index,i=ce();rs("active",r===i.giornoAttivoIndex),X(),ve("ngIf",!t.editing),X(),ve("ngIf",t.editing)}}function Lse(n,e){if(n&1){let t=Bt();A(0,"div",65),Fe("click",function(){let i=Ee(t).index,o=ce(2);return Ce(o.setSettimana(i))}),Z(1),R()}if(n&2){let t=e.$implicit,r=e.index,i=ce(2);rs("active",r===i.settimanaAttivaIndex),X(),yr(" ",t.nome," ")}}function Vse(n,e){if(n&1){let t=Bt();A(0,"div",62),st(1,Lse,2,3,"div",63),A(2,"button",30),Fe("click",function(){Ee(t);let i=ce();return Ce(i.aggiungiSettimana())}),Z(3,"+ Settimana"),R(),A(4,"button",64),Fe("click",function(){Ee(t);let i=ce();return Ce(i.rimuoviSettimana())}),Z(5," \u2013 Settimana "),R()()}if(n&2){let t=ce();X(),ve("ngForOf",t.settimane),X(3),ve("disabled",t.settimane.length===1)}}function jse(n,e){n&1&&(A(0,"div",66),Z(1," Aggiungi un esercizio dalla colonna destra "),R())}function Bse(n,e){if(n&1&&bt(0,"img",84),n&2){let t=ce().$implicit;ve("alt",bf(t.nome))("src",t.image,xr)}}function Use(n,e){n&1&&(A(0,"div",85),Z(1,"\u{1F3CB}\uFE0F"),R())}function zse(n,e){if(n&1){let t=Bt();A(0,"label"),Z(1,"Kg "),A(2,"input",86),yt("ngModelChange",function(i){Ee(t);let o=ce().$implicit;return xt(o.caricoKg,i)||(o.caricoKg=i),Ce(i)}),R()()}if(n&2){let t=ce().$implicit;X(2),vt("ngModel",t.caricoKg)}}function $se(n,e){if(n&1){let t=Bt();A(0,"div",69)(1,"div",70)(2,"div",71),st(3,Bse,1,3,"img",72)(4,Use,2,0,"div",73),R(),A(5,"div",74),Z(6),R(),A(7,"div",75)(8,"button",76),Fe("click",function(){let i=Ee(t).index,o=ce(2);return Ce(o.moveExerciseUp(i))}),Z(9,"\u2191"),R(),A(10,"button",77),Fe("click",function(){let i=Ee(t).index,o=ce(2);return Ce(o.moveExerciseDown(i))}),Z(11,"\u2193"),R(),A(12,"button",78),Fe("click",function(){let i=Ee(t).index,o=ce(2);return Ce(o.resetExercise(i))}),Z(13,"\u27F3"),R(),A(14,"button",79),Fe("click",function(){let i=Ee(t).index,o=ce(2);return Ce(o.rimuoviEsercizio(i))}),Z(15,"\xD7"),R()()(),A(16,"div",80)(17,"label"),Z(18,"Serie "),A(19,"input",81),yt("ngModelChange",function(i){let o=Ee(t).$implicit;return xt(o.serie,i)||(o.serie=i),Ce(i)}),R()(),A(20,"label"),Z(21,"Ripetizioni "),A(22,"input",81),yt("ngModelChange",function(i){let o=Ee(t).$implicit;return xt(o.ripetizioni,i)||(o.ripetizioni=i),Ce(i)}),R()(),A(23,"label"),Z(24,"Min "),A(25,"input",82),yt("ngModelChange",function(i){let o=Ee(t).$implicit;return xt(o.minuti,i)||(o.minuti=i),Ce(i)}),R()(),A(26,"label"),Z(27,"Sec "),A(28,"input",82),yt("ngModelChange",function(i){let o=Ee(t).$implicit;return xt(o.secondi,i)||(o.secondi=i),Ce(i)}),R()(),st(29,zse,3,1,"label",15),R(),A(30,"textarea",83),yt("ngModelChange",function(i){let o=Ee(t).$implicit;return xt(o.note,i)||(o.note=i),Ce(i)}),Fe("blur",function(){Ee(t);let i=ce(2);return Ce(i.persistSchedule())}),R()()}if(n&2){let t=e.$implicit,r=e.index,i=ce(2);X(3),ve("ngIf",t.image),X(),ve("ngIf",!t.image),X(2),Zt(t.nome),X(2),ve("disabled",i.currentExercisePage*i.pageSize+r===0),X(2),ve("disabled",i.currentExercisePage*i.pageSize+r===i.scheda.giorni[i.giornoAttivoIndex].esercizi.length-1),X(9),vt("ngModel",t.serie),X(3),vt("ngModel",t.ripetizioni),X(3),vt("ngModel",t.minuti),X(3),vt("ngModel",t.secondi),X(),ve("ngIf",i.templateType==="profghizztemplate"),X(),vt("ngModel",t.note)}}function qse(n,e){if(n&1&&(A(0,"div",67),st(1,$se,31,11,"div",68),R()),n&2){let t=ce();X(),ve("ngForOf",t.pagedExercises)}}function Hse(n,e){if(n&1){let t=Bt();A(0,"div",87)(1,"button",88),Fe("click",function(){Ee(t);let i=ce();return Ce(i.goToPrevExercisePage())}),fr(),A(2,"svg",89),bt(3,"circle",90)(4,"path",91),R()(),Oo(),A(5,"span",92),Z(6),R(),A(7,"button",88),Fe("click",function(){Ee(t);let i=ce();return Ce(i.goToNextExercisePage())}),fr(),A(8,"svg",89),bt(9,"circle",90)(10,"path",93),R()()()}if(n&2){let t=ce();X(),ve("disabled",t.currentExercisePage<=0),X(5),vw(" ",t.currentExercisePage+1," / ",t.totalExercisePages||1," "),X(),ve("disabled",t.currentExercisePage>=t.totalExercisePages-1)}}function Gse(n,e){if(n&1&&(A(0,"option",94),Z(1),R()),n&2){let t=e.$implicit;ve("value",t.name),X(),Zt(t.name)}}function Wse(n,e){if(n&1&&bt(0,"img",84),n&2){let t=ce().$implicit;ve("alt",bf(t.name))("src",t.image,xr)}}function Kse(n,e){n&1&&(A(0,"div",101),Z(1,"\u{1F3CB}\uFE0F"),R())}function Yse(n,e){if(n&1){let t=Bt();A(0,"div",95),Fe("click",function(){let i=Ee(t).$implicit,o=ce();return Ce(o.aggiungiEsercizioAlGiorno(i))}),A(1,"div",96),st(2,Wse,1,3,"img",72)(3,Kse,2,0,"div",97),R(),A(4,"div",98)(5,"div",99),Z(6),R(),A(7,"div",100),Z(8),R()()()}if(n&2){let t=e.$implicit;X(2),ve("ngIf",t.image),X(),ve("ngIf",!t.image),X(3),Zt(t.name),X(2),Zt(t.category)}}function Zse(n,e){n&1&&(A(0,"div",102),Z(1,"Nessun esercizio"),R())}function Qse(n,e){if(n&1&&bt(0,"img",84),n&2){let t=ce().$implicit;ve("alt",bf(t.name))("src",t.avatarUrl,xr)}}function Xse(n,e){n&1&&(A(0,"span"),Z(1,"\u{1F464}"),R())}function Jse(n,e){if(n&1&&(A(0,"div",118),Z(1),R()),n&2){let t=ce().$implicit;X(),Zt(t.email)}}function eae(n,e){if(n&1){let t=Bt();A(0,"div",112),Fe("click",function(){let i=Ee(t).$implicit,o=ce(2);return Ce(o.selectUser(i))}),A(1,"div",113),st(2,Qse,1,3,"img",72)(3,Xse,2,0,"span",15),R(),A(4,"div",114)(5,"div",115),Z(6),R(),st(7,Jse,2,1,"div",116),A(8,"div",117),Z(9),R()()()}if(n&2){let t=e.$implicit;X(2),ve("ngIf",t.avatarUrl),X(),ve("ngIf",!t.avatarUrl),X(3),Zt(t.name),X(),ve("ngIf",t.email),X(),rs("inactive",t.status!=="Attivo"),X(),Zt(t.status)}}function tae(n,e){n&1&&(A(0,"div",119),Z(1,"Nessun utente"),R())}function nae(n,e){if(n&1){let t=Bt();A(0,"div",103)(1,"div",104)(2,"div",105)(3,"div",106),Z(4,"Seleziona Cliente"),R(),A(5,"button",107),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeUserPicker())}),Z(6,"\xD7"),R()(),A(7,"input",108),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.userSearch,i)||(o.userSearch=i),Ce(i)}),Fe("input",function(){Ee(t);let i=ce();return Ce(i.filterUsers())}),R(),A(8,"div",109),st(9,eae,10,7,"div",110),N0(10,"slice"),st(11,tae,2,0,"div",111),R()()()}if(n&2){let t=ce();X(7),vt("ngModel",t.userSearch),X(2),ve("ngForOf",P0(10,3,t.filteredUserList,0,3)),X(2),ve("ngIf",t.filteredUserList.length===0)}}function rae(n,e){if(n&1){let t=Bt();A(0,"div",120)(1,"div",121)(2,"div",122)(3,"div",123),Z(4,"Condividi Scheda"),R(),A(5,"button",124),Fe("click",function(){Ee(t);let i=ce();return Ce(i.closeShareModal())}),Z(6,"\xD7"),R()(),A(7,"div",125)(8,"div",126)(9,"button",127),Fe("click",function(){Ee(t);let i=ce();return Ce(i.shareEmail("gmail"))}),A(10,"span",128),Z(11,"G"),R(),A(12,"span",129),Z(13,"Gmail"),R()(),A(14,"button",127),Fe("click",function(){Ee(t);let i=ce();return Ce(i.shareEmail("outlook"))}),A(15,"span",130),Z(16,"O"),R(),A(17,"span",129),Z(18,"Outlook"),R()(),A(19,"button",127),Fe("click",function(){Ee(t);let i=ce();return Ce(i.copyShareLink())}),A(20,"span",131),Z(21,"\u{1F517}"),R(),A(22,"span",129),Z(23,"Copia Link"),R()()(),A(24,"div",132),bt(25,"input",133),A(26,"button",134),Fe("click",function(){Ee(t);let i=ce();return Ce(i.copyShareLink())}),Z(27,"Copia"),R()()()()()}if(n&2){let t=ce();X(25),ve("value",t.generatedLink)}}var S9=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.pdfSchedaService=i,this.authService=o,this.firestore=Ae(Bo),this.cliente=null,this.scheda={stato:"In preparazione",livello:"Intermedio",durata:"4 Settimane",dataInizio:"",orario:"",giorni:[{nome:"Giorno 1",esercizi:[]}],templateType:"fitnessanddance",settimane:[{nome:"Settimana 1"}]},this.logoPreviewUrl=null,this.tempLogoFile=null,this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0,this.esercizi=[],this.categorie=[],this.eserciziFiltrati=[],this.searchTerm="",this.filterCategoria="",this.allUsers=[],this.filteredUserList=[],this.userSearch="",this.showUserPicker=!1,this.shareModalOpen=!1,this.generatedLink="",this.oggi=new Date().toISOString().split("T")[0],this.pdfBlobUrl=null,this.currentExercisePage=0,this.pageSize=3,this.showSavedMsg=!1,this.savedMsgText="Scheda salvata",this.templateType="fitnessanddance",this.settimane=[{nome:"Settimana 1"}]}get pagedExercises(){let r=this.scheda.giorni[this.giornoAttivoIndex].esercizi,i=this.currentExercisePage*this.pageSize;return r.slice(i,i+this.pageSize)}get totalExercisePages(){let r=this.scheda.giorni[this.giornoAttivoIndex].esercizi;return Math.max(1,Math.ceil(r.length/this.pageSize))}goToPrevExercisePage(){this.currentExercisePage>0&&this.currentExercisePage--}goToNextExercisePage(){this.currentExercisePage<this.totalExercisePages-1&&this.currentExercisePage++}ngOnInit(){this.initStandard()}initStandard(){return ee(this,null,function*(){yield this.loadUsers(),yield this.loadSelectedUser(),yield this.loadExercises(),yield this.loadCategories(),yield this.loadExistingSchedule(),this.filtraEsercizi(),this.filterUsers(),this.scheda.dataInizio||(this.scheda.dataInizio=this.oggi),this.scheda.orario||(this.scheda.orario=this.normalizeTimeToHMS(new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))),this.generateLink(),this.scheda.templateType=this.templateType,(!this.scheda.settimane||this.scheda.settimane.length===0)&&(this.scheda.settimane=[{nome:"Settimana 1"}]),this.settimane=this.scheda.settimane,this.templateType==="profghizztemplate"&&(this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0)})}onTemplateTypeChange(r){this.templateType=r,this.scheda.templateType=r,r==="profghizztemplate"&&(!this.scheda.settimane||this.scheda.settimane.length===0)&&(this.scheda.settimane=[{nome:"Settimana 1"}],this.settimane=this.scheda.settimane,this.settimanaAttivaIndex=0)}setSettimana(r){this.settimanaAttivaIndex=r}aggiungiSettimana(){let r=this.settimane.length+1;this.settimane.push({nome:"Settimana "+r}),this.scheda.settimane=this.settimane,this.settimanaAttivaIndex=this.settimane.length-1,this.persistSchedule()}rimuoviSettimana(){this.settimane.length!==1&&(this.settimane.splice(this.settimanaAttivaIndex,1),this.settimanaAttivaIndex>=this.settimane.length&&(this.settimanaAttivaIndex=this.settimane.length-1),this.scheda.settimane=this.settimane,this.persistSchedule())}loadUsers(){return ee(this,null,function*(){let r=Ki(this.firestore,"users"),i=yield eh(r);this.allUsers=i.docs.map(o=>Oe({id:o.id},o.data()))})}loadSelectedUser(){return ee(this,null,function*(){this.cliente=this.allUsers[0]||null,this.cliente&&(this.scheda.userId=this.cliente.id)})}loadExercises(){return ee(this,null,function*(){let r=Ki(this.firestore,"exercises"),i=yield eh(r);this.esercizi=i.docs.map(o=>Oe({id:o.id},o.data()))})}loadCategories(){return ee(this,null,function*(){let r=Ki(this.firestore,"categories"),i=yield eh(r);this.categorie=i.docs.map(o=>Oe({id:o.id,selected:!1},o.data()))})}loadExistingSchedule(){return ee(this,null,function*(){if(!this.cliente)return;let r=Ki(this.firestore,"schede"),i=O7(r,F7("userId","==",this.cliente.id),R7("createdAt","asc")),s=(yield eh(i)).docs.map(a=>Oe({id:a.id},a.data()));s.length>0&&(this.scheda=s[s.length-1],(!this.scheda.giorni||this.scheda.giorni.length===0)&&(this.scheda.giorni=[{nome:"Giorno 1",esercizi:[]}]),this.scheda.templateType=this.scheda.templateType||"fitnessanddance",this.templateType=this.scheda.templateType,(!this.scheda.settimane||this.scheda.settimane.length===0)&&(this.scheda.settimane=[{nome:"Settimana 1"}]),this.settimane=this.scheda.settimane)})}filterUsers(){let r=this.userSearch.toLowerCase().trim();this.filteredUserList=this.allUsers.filter(i=>(i.name||"").toLowerCase().includes(r)||(i.email||"").toLowerCase().includes(r))}openUserPicker(){this.showUserPicker=!0,this.userSearch="",this.filterUsers()}closeUserPicker(){this.showUserPicker=!1}selectUser(r){return ee(this,null,function*(){this.cliente=r,this.scheda.userId=r.id,this.closeUserPicker(),yield this.loadExistingSchedule(),this.generateLink(),this.currentExercisePage=0})}enableTabEdit(r){r.editing=!0,setTimeout(()=>{let i=document.querySelectorAll(".tab-edit"),o=i[i.length-1];o?.focus(),o?.select()},0)}disableTabEdit(r){r.editing=!1,this.persistSchedule()}setGiorno(r){this.giornoAttivoIndex=r,this.currentExercisePage=0}aggiungiGiorno(){let r=this.scheda.giorni.length+1;this.scheda.giorni.push({nome:"Giorno "+r,esercizi:[]}),this.giornoAttivoIndex=this.scheda.giorni.length-1,this.currentExercisePage=0,this.persistSchedule()}rimuoviGiorno(){this.scheda.giorni.length!==1&&(this.scheda.giorni.splice(this.giornoAttivoIndex,1),this.giornoAttivoIndex>=this.scheda.giorni.length&&(this.giornoAttivoIndex=this.scheda.giorni.length-1),this.currentExercisePage=0,this.persistSchedule())}aggiungiEsercizioAlGiorno(r){let i=this.scheda.giorni[this.giornoAttivoIndex];this.templateType==="profghizztemplate"?i.esercizi.push({id:r.id,nome:r.name,image:r.image,categoria:r.category,serie:3,ripetizioni:10,minuti:0,secondi:0,caricoKg:0,note:"",profGhizzField1:"",profGhizzField2:""}):i.esercizi.push({id:r.id,nome:r.name,image:r.image,categoria:r.category,serie:3,ripetizioni:10,minuti:0,secondi:0,caricoKg:0,note:""}),this.persistSchedule()}rimuoviEsercizio(r){this.scheda.giorni[this.giornoAttivoIndex].esercizi.splice(r+this.currentExercisePage*this.pageSize,1),this.currentExercisePage>0&&this.pagedExercises.length===0&&this.goToPrevExercisePage(),this.persistSchedule()}filtraEsercizi(){let r=this.searchTerm.toLowerCase().trim();this.eserciziFiltrati=this.esercizi.filter(i=>{let o=(i.name||"").toLowerCase().includes(r),s=this.filterCategoria?i.category===this.filterCategoria:!0;return o&&s})}salvaScheda(){return ee(this,null,function*(){yield this.authService.ensureSignedIn();let r=new Date;this.scheda.orario=this.normalizeTimeToHMS(r.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"})),this.scheda.dataInizio=r.toISOString().split("T")[0],this.scheda.templateType=this.templateType,this.scheda.settimane=this.settimane,yield this.persistSchedule();let i=yield this.buildPdfBase64();yield this.appendCardToUser(this.scheda.dataInizio,this.scheda.orario,i),this.generateLink(),this.showSavedMsg=!0,this.savedMsgText="Scheda salvata",setTimeout(()=>{this.showSavedMsg=!1},2500)})}normalizeTimeToHMS(r){if(!r)return"";let i=r.match(/^(\d{2}):(\d{2})(?::(\d{2}))?$/);if(!i)return r;let o=i[3]??"00";return`${i[1]}:${i[2]}:${o}`}buildPdfBase64(){return ee(this,null,function*(){try{return this.scheda.templateType==="profghizztemplate"?(yield this.pdfSchedaService.buildProfGhizzDoc(this.scheda,this.cliente,this.logoPreviewUrl)).output("datauristring").split(",")[1]||"":(yield this.pdfSchedaService.buildDoc(this.scheda,this.cliente,this.logoPreviewUrl)).output("datauristring").split(",")[1]||""}catch{return""}})}appendCardToUser(r,i,o){return ee(this,null,function*(){if(!this.cliente||!this.scheda)return;yield this.authService.ensureSignedIn();let s=this.computeScheduleTitle(),a=this.formatDateIT(r),c=this.normalizeTimeToHMS(i),l=85e4,u={title:s,date:a||"",time:c};o&&o.length<=l&&(u.pdfBase64=o);let p=ni(this.firestore,`users/${this.cliente.id}`);try{let v=yield ax(p),E=[...v.exists()&&Array.isArray(v.data().cards)?v.data().cards:[],u];yield nc(p,{cards:E}),this.cliente&&(this.cliente.cards=E)}catch(v){console.error("Error appending card to user",v)}})}computeScheduleTitle(){let r=this.scheda.giorni?.[this.giornoAttivoIndex]?.nome||"Scheda allenamento",i=this.scheda.livello||"",o=this.scheda.stato||"",s=i?`${r} \u2022 ${i}`:r;return o?`${s} \u2022 ${o}`:s}formatDateIT(r){if(!r)return null;let i=r.match(/^(\d{4})-(\d{2})-(\d{2})$/);return i?`${i[3]}/${i[2]}/${i[1]}`:null}persistSchedule(){return ee(this,null,function*(){if(!this.cliente)return;yield this.authService.ensureSignedIn();let r=Ft(Oe({},this.scheda),{userId:this.cliente.id,createdAt:Date.now(),templateType:this.templateType,settimane:this.settimane});if(this.scheda.id){let i=ni(this.firestore,`schede/${this.scheda.id}`);try{yield Cd(i,r,{merge:!0})}catch(o){console.error("Error updating schedule",o)}}else{let i=Ki(this.firestore,"schede");try{let o=yield P7(i,r);this.scheda.id=o.id}catch(o){console.error("Error creating schedule",o)}}})}apriSchedaPerUser(r){this.router.navigate(["/gestione-schede"],{state:{selectedUserId:r}})}anteprimaPdf(){return ee(this,null,function*(){let r;this.scheda.templateType==="profghizztemplate"?r=yield this.pdfSchedaService.buildProfGhizzDoc(this.scheda,this.cliente,this.logoPreviewUrl):r=yield this.pdfSchedaService.buildDoc(this.scheda,this.cliente,this.logoPreviewUrl);let i=r.output("blob");if(this.pdfBlobUrl)try{URL.revokeObjectURL(this.pdfBlobUrl)}catch{}this.pdfBlobUrl=URL.createObjectURL(i),window.open(this.pdfBlobUrl,"_blank")})}openShareModal(){this.generateLink(),this.shareModalOpen=!0}closeShareModal(){this.shareModalOpen=!1}generateLink(){if(!this.cliente){this.generatedLink="";return}let r=location.origin,i=encodeURIComponent(JSON.stringify({cliente:this.cliente.name,stato:this.scheda.stato,livello:this.scheda.livello,durata:this.scheda.durata,inizio:this.scheda.dataInizio,giorni:this.scheda.giorni.map(o=>({nome:o.nome,esercizi:o.esercizi.map(s=>({nome:s.nome,serie:s.serie,ripetizioni:s.ripetizioni,min:s.minuti,sec:s.secondi,note:s.note}))}))}));this.generatedLink=`${r}/scheda-share?data=${i}`}copyShareLink(){this.generatedLink&&navigator.clipboard.writeText(this.generatedLink).catch(()=>{})}moveExerciseUp(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;o!==0&&([i[o-1],i[o]]=[i[o],i[o-1]],this.persistSchedule())}moveExerciseDown(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;o!==i.length-1&&([i[o+1],i[o]]=[i[o],i[o+1]],this.persistSchedule())}resetExercise(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;i[o].serie=3,i[o].ripetizioni=10,i[o].minuti=0,i[o].secondi=0,i[o].caricoKg=0,i[o].note="",i[o].profGhizzField1="",i[o].profGhizzField2="",this.persistSchedule()}onLogoSelect(r){let i=r.target;if(!i.files||!i.files[0])return;let o=i.files[0];this.tempLogoFile=o;let s=new FileReader;s.onload=()=>{this.logoPreviewUrl=s.result},s.readAsDataURL(o)}};e.\u0275fac=function(i){return new(i||e)(ot(fo),ot(Hx),ot(Wx))},e.\u0275cmp=Rr({type:e,selectors:[["app-gestione-schede"]],standalone:!1,decls:85,vars:33,consts:[["class","save-toast",4,"ngIf"],[1,"schede-page"],[1,"col-left","section-box"],[1,"avatar-block",3,"click"],["alt","Cliente",3,"src",4,"ngIf"],["class","avatar-placeholder",4,"ngIf"],[1,"cliente-name"],[1,"cliente-info"],[1,"info-row"],[1,"label"],[3,"ngModelChange","ngModel"],["type","text","placeholder","es. 8 Settimane",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"logo-uploader"],["for","logoInput",1,"logo-upload-box"],[4,"ngIf"],["alt","Logo anteprima","class","logo-preview-img",3,"src",4,"ngIf"],["type","file","id","logoInput","accept","image/*","hidden","",3,"change"],[1,"left-actions"],[1,"btn","primary",3,"click"],[1,"btn","outline",3,"click"],[1,"btn","share",3,"click","disabled"],[1,"col-center","section-box"],[1,"row-template-select-compact","small"],["for","templateTypeSel",1,"label-template-type-compact"],["id","templateTypeSel",1,"select-template-type-compact",3,"ngModelChange","change","ngModel"],["value","fitnessanddance"],["value","profghizztemplate"],[1,"giorni-tabs"],["class","tab-item",3,"active",4,"ngFor","ngForOf"],[1,"tab-add",3,"click"],["title","Rimuovi giorno",1,"tab-remove",3,"click","disabled"],["class","settimane-tabs",4,"ngIf"],[1,"giorno-contenuto"],["class","empty-drop",4,"ngIf"],["class","exercise-list",4,"ngIf"],["class","exercise-pagination-mini",4,"ngIf"],[1,"col-right","section-box"],[1,"search-box"],["type","text","placeholder","Cerca esercizi...",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"esercizi-scroll"],["class","big-ex-card",3,"click",4,"ngFor","ngForOf"],["class","empty-right",4,"ngIf"],["class","user-picker-backdrop",4,"ngIf"],["class","share-backdrop",4,"ngIf"],[1,"save-toast"],["alt","Cliente",3,"src"],[1,"avatar-placeholder"],["width","75","height","75","viewBox","0 0 75 75","fill","none"],["x","3","y","3","width","69","height","69","rx","16","fill","#F4F8FB","stroke","#b9cddd","stroke-width","2.3"],["x","17","y","23","width","41","height","30","rx","5","fill","#E8F0FA","stroke","#b9cddd","stroke-width","1.6"],["cx","29","cy","37","r","5.5","fill","#b9cddd"],["d","M19 53l12-12c2-2 5.6-2 7.6 0l15 15c1.9 1.9 5 1.6 6.8-.4l8-10.5","stroke","#2563eb","stroke-width","2","fill","none"],["alt","Logo anteprima",1,"logo-preview-img",3,"src"],[1,"tab-item"],["class","tab-label",3,"click","dblclick",4,"ngIf"],["class","tab-edit",3,"ngModel","ngModelChange","blur","keydown.enter",4,"ngIf"],[1,"tab-label",3,"click","dblclick"],[1,"tab-edit",3,"ngModelChange","blur","keydown.enter","ngModel"],[1,"settimane-tabs"],["class","tab-item",3,"active","click",4,"ngFor","ngForOf"],["title","Rimuovi settimana",1,"tab-remove",3,"click","disabled"],[1,"tab-item",3,"click"],[1,"empty-drop"],[1,"exercise-list"],["class","exercise-card",4,"ngFor","ngForOf"],[1,"exercise-card"],[1,"ex-top"],[1,"ex-img"],[3,"src","alt",4,"ngIf"],["class","ex-placeholder",4,"ngIf"],[1,"ex-title"],[1,"ex-controls"],["title","Sposta su",1,"btn-icon","move",3,"click","disabled"],["title","Sposta gi\xF9",1,"btn-icon","move",3,"click","disabled"],["title","Reset valori",1,"btn-icon","reset",3,"click"],[1,"btn-icon","remove",3,"click"],[1,"ex-fields"],["type","number","min","1",3,"ngModelChange","ngModel"],["type","number","min","0",3,"ngModelChange","ngModel"],["rows","2","placeholder","Note",1,"ex-note",3,"ngModelChange","blur","ngModel"],[3,"src","alt"],[1,"ex-placeholder"],["type","number","min","0","step","0.1",3,"ngModelChange","ngModel"],[1,"exercise-pagination-mini"],[1,"page-arrow-mini",3,"click","disabled"],["viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","transparent"],["d","M15.5 19 9.5 12l6-7","fill","none","stroke","white","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[1,"page-indicator-mini"],["d","M8.5 5 14.5 12l-6 7","fill","none","stroke","white","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[3,"value"],[1,"big-ex-card",3,"click"],[1,"big-img"],["class","big-placeholder",4,"ngIf"],[1,"big-info"],[1,"big-name"],[1,"big-cat"],[1,"big-placeholder"],[1,"empty-right"],[1,"user-picker-backdrop"],[1,"user-picker-modal"],[1,"picker-header"],[1,"picker-title"],[1,"picker-close",3,"click"],["type","text","placeholder","Cerca nome o email...",1,"picker-search",3,"ngModelChange","input","ngModel"],[1,"picker-list"],["class","picker-item",3,"click",4,"ngFor","ngForOf"],["class","picker-empty",4,"ngIf"],[1,"picker-item",3,"click"],[1,"pi-avatar"],[1,"pi-data"],[1,"pi-name"],["class","pi-email",4,"ngIf"],[1,"pi-status"],[1,"pi-email"],[1,"picker-empty"],[1,"share-backdrop"],[1,"share-modal"],[1,"share-header"],[1,"share-title"],[1,"share-close",3,"click"],[1,"share-body"],[1,"share-options"],[1,"share-option",3,"click"],[1,"share-icon","gmail"],[1,"share-label"],[1,"share-icon","outlook"],[1,"share-icon","link"],[1,"share-link-box"],["type","text","readonly","",3,"value"],[1,"btn","mini",3,"click"]],template:function(i,o){i&1&&(st(0,Tse,2,1,"div",0),A(1,"div",1)(2,"aside",2)(3,"div",3),Fe("click",function(){return o.openUserPicker()}),st(4,Mse,1,1,"img",4)(5,Nse,2,0,"div",5),R(),A(6,"div",6),Z(7),R(),A(8,"div",7)(9,"div",8)(10,"span",9),Z(11,"Stato"),R(),A(12,"select",10),yt("ngModelChange",function(a){return xt(o.scheda.stato,a)||(o.scheda.stato=a),a}),A(13,"option"),Z(14,"In preparazione"),R(),A(15,"option"),Z(16,"Attiva"),R(),A(17,"option"),Z(18,"Completata"),R(),A(19,"option"),Z(20,"Sospesa"),R()()(),A(21,"div",8)(22,"span",9),Z(23,"Livello"),R(),A(24,"select",10),yt("ngModelChange",function(a){return xt(o.scheda.livello,a)||(o.scheda.livello=a),a}),A(25,"option"),Z(26,"Principiante"),R(),A(27,"option"),Z(28,"Intermedio"),R(),A(29,"option"),Z(30,"Avanzato"),R()()(),A(31,"div",8)(32,"span",9),Z(33,"Durata"),R(),A(34,"input",11),yt("ngModelChange",function(a){return xt(o.scheda.durata,a)||(o.scheda.durata=a),a}),R()(),A(35,"div",8)(36,"span",9),Z(37,"Inizio"),R(),A(38,"input",12),yt("ngModelChange",function(a){return xt(o.scheda.dataInizio,a)||(o.scheda.dataInizio=a),a}),R()()(),A(39,"div",13)(40,"label",14),st(41,Pse,7,0,"ng-container",15)(42,kse,1,1,"img",16),A(43,"input",17),Fe("change",function(a){return o.onLogoSelect(a)}),R()()(),A(44,"div",18)(45,"button",19),Fe("click",function(){return o.salvaScheda()}),Z(46,"Salva Scheda"),R(),A(47,"button",20),Fe("click",function(){return o.anteprimaPdf()}),Z(48,"Stampa PDF"),R(),A(49,"button",21),Fe("click",function(){return o.openShareModal()}),Z(50,"Condividi Link"),R()()(),A(51,"section",22)(52,"div",23)(53,"label",24),Z(54,"Template"),R(),A(55,"select",25),yt("ngModelChange",function(a){return xt(o.templateType,a)||(o.templateType=a),a}),Fe("change",function(){return o.onTemplateTypeChange(o.templateType)}),A(56,"option",26),Z(57,"Palestra"),R(),A(58,"option",27),Z(59,"Atleta"),R()()(),A(60,"div",28),st(61,Fse,3,4,"div",29),A(62,"button",30),Fe("click",function(){return o.aggiungiGiorno()}),Z(63,"+ Giorno"),R(),A(64,"button",31),Fe("click",function(){return o.rimuoviGiorno()}),Z(65," \u2013 Giorno "),R()(),st(66,Vse,6,2,"div",32),A(67,"div",33),st(68,jse,2,0,"div",34)(69,qse,2,1,"div",35)(70,Hse,11,4,"div",36),R()(),A(71,"aside",37)(72,"div",38)(73,"input",39),yt("ngModelChange",function(a){return xt(o.searchTerm,a)||(o.searchTerm=a),a}),Fe("input",function(){return o.filtraEsercizi()}),R(),A(74,"select",40),yt("ngModelChange",function(a){return xt(o.filterCategoria,a)||(o.filterCategoria=a),a}),Fe("change",function(){return o.filtraEsercizi()}),A(75,"option",41),Z(76,"Tutte le categorie"),R(),st(77,Gse,2,2,"option",42),N0(78,"slice"),R()(),A(79,"div",43),st(80,Yse,9,4,"div",44),N0(81,"slice"),st(82,Zse,2,0,"div",45),R()()(),st(83,nae,12,7,"div",46)(84,rae,28,1,"div",47)),i&2&&(ve("ngIf",o.showSavedMsg),X(4),ve("ngIf",o.cliente==null?null:o.cliente.avatarUrl),X(),ve("ngIf",!(o.cliente!=null&&o.cliente.avatarUrl)),X(2),Zt((o.cliente==null?null:o.cliente.name)||"Seleziona cliente"),X(5),vt("ngModel",o.scheda.stato),X(12),vt("ngModel",o.scheda.livello),X(10),vt("ngModel",o.scheda.durata),X(4),vt("ngModel",o.scheda.dataInizio),X(3),ve("ngIf",!o.logoPreviewUrl),X(),ve("ngIf",o.logoPreviewUrl),X(7),ve("disabled",!o.cliente),X(6),vt("ngModel",o.templateType),X(6),ve("ngForOf",o.scheda.giorni),X(3),ve("disabled",o.scheda.giorni.length===1),X(2),ve("ngIf",o.templateType==="profghizztemplate"),X(2),ve("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length===0),X(),ve("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length>0),X(),ve("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length>0),X(3),vt("ngModel",o.searchTerm),X(),vt("ngModel",o.filterCategoria),X(3),ve("ngForOf",P0(78,25,o.categorie,0,3)),X(3),ve("ngForOf",P0(81,29,o.eserciziFiltrati,0,3)),X(2),ve("ngIf",o.eserciziFiltrati.length===0),X(),ve("ngIf",o.showUserPicker),X(),ve("ngIf",o.shareModalOpen))},dependencies:[uo,Rs,zu,$u,_a,mA,Lc,Fc,vA,Ga,KS],styles:["body[_ngcontent-%COMP%]{background:#f5f8fc;color:#173453;font-family:Segoe UI,Arial,sans-serif}.schede-page[_ngcontent-%COMP%]{display:grid;grid-template-columns:280px 1fr 320px;gap:26px;padding:26px 30px 40px;background:#f5f8fc;min-height:100vh;box-sizing:border-box}.save-toast[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:24px;background:#1cb164;color:#fff;font-weight:700;border-radius:10px;padding:10px 14px;box-shadow:0 6px 18px #1cb16447;z-index:3000;letter-spacing:.02em}.section-box[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:18px 16px 20px;box-shadow:0 3px 14px #193c6e14;display:flex;flex-direction:column;gap:18px}.bordered[_ngcontent-%COMP%]{border-radius:8px;background:#f9fbfe}.col-left[_ngcontent-%COMP%], .col-center[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.col-left[_ngcontent-%COMP%]{align-items:center;background:#183d81;border-radius:14px}.col-left[_ngcontent-%COMP%]   .section-box[_ngcontent-%COMP%], .col-left.section-box[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.col-left[_ngcontent-%COMP%]   .cliente-name[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .bordered[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{background:#f5f9ff;color:#183d81;border:none}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]:hover{background:#1d4fb8;color:#fff}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#194065}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.outline[_ngcontent-%COMP%]:hover{background:#dbe9fb}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.share[_ngcontent-%COMP%]{background:#fbf7ef;color:#965d00;border:1px solid #e9d7b2}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.share[_ngcontent-%COMP%]:hover{background:#f6e9cf}.col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;background:#eef6ff}.avatar-block[_ngcontent-%COMP%]{width:92px;height:92px;border-radius:20px;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer;background:#eef3fb;border:none;transition:box-shadow .15s,transform .15s,border-color .15s;margin-left:auto;margin-right:auto}.avatar-block[_ngcontent-%COMP%]:hover{box-shadow:0 4px 14px #2563eb59;transform:translateY(-3px)}.avatar-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.avatar-placeholder[_ngcontent-%COMP%]{font-size:40px;opacity:.55}.cliente-name[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem;font-weight:800;letter-spacing:.03em;margin-left:auto;margin-right:auto;text-align:center;display:block;border:none}.cliente-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:14px 12px;border:none}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:70px;font-size:.68rem;font-weight:700;color:#173453}.info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{flex:1;padding:6px 8px;font-size:.7rem;background:#f1f6fb;font-weight:600;color:#173453;outline:none;transition:background-color .15s;border:none}.info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;box-sizing:border-box}.logo-uploader[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:18px}.logo-upload-box[_ngcontent-%COMP%]{width:110px;height:110px;border:2px dashed #b9cddd;border-radius:18px;background:#f8fafc;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:border-color .15s,background .15s;text-align:center}.logo-upload-box[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#f1faff}.logo-upload-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.logo-preview-img[_ngcontent-%COMP%]{width:104px;height:104px;object-fit:contain;border-radius:12px;display:block}.left-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.btn[_ngcontent-%COMP%]{border:none;padding:12px 18px;border-radius:12px;font-size:.72rem;font-weight:800;letter-spacing:.05em;cursor:pointer;transition:background .16s,box-shadow .16s,transform .12s;display:inline-flex;align-items:center;justify-content:center}.btn.primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none}.btn.primary[_ngcontent-%COMP%]:hover{background:#1d4fb8;color:#fff}.btn.primary[disabled][_ngcontent-%COMP%], .btn.primary[_ngcontent-%COMP%]:disabled{background:#e3e9f8;color:#173453;cursor:not-allowed;box-shadow:none;opacity:1}.btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#194065}.btn.outline[_ngcontent-%COMP%]:hover{background:#dbe9fb}.btn.share[_ngcontent-%COMP%]{background:#fbf7ef;color:#965d00;border:1px solid #e9d7b2}.btn.share[_ngcontent-%COMP%]:hover{background:#f6e9cf}.btn.mini[_ngcontent-%COMP%]{background:#eef3fb;color:#173453;padding:6px 10px;font-size:.6rem}.btn.mini[_ngcontent-%COMP%]:hover{background:#dbe9fb}.row-template-select-compact.small[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px;gap:5px;padding:0}.label-template-type-compact[_ngcontent-%COMP%]{font-size:.69rem;font-weight:900;color:#1c355d;margin-right:0;min-width:0;display:inline-block;letter-spacing:.01em}.select-template-type-compact[_ngcontent-%COMP%]{font-size:.74rem;height:24px;padding:0 10px;border-radius:8px;border:1.5px solid #2563eb;font-weight:800;color:#1742b0;background:#f7faff;outline:none;transition:border-color .14s;min-width:86px;box-shadow:none}.select-template-type-compact[_ngcontent-%COMP%]:focus{border-color:#1d6ceb;background:#eaf3ff}.giorni-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px;flex-wrap:wrap;border:none}.tab-remove[_ngcontent-%COMP%]{background:#fbefee;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;margin-left:0;cursor:pointer;transition:background .15s;border:none}.tab-remove[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.tab-remove[_ngcontent-%COMP%]:hover:not([disabled]){background:#ffe3e3}.tab-item[_ngcontent-%COMP%]{background:#eef3fb;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;letter-spacing:.05em;cursor:pointer;transition:background .15s,color .15s;border:none}.tab-item.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.tab-item[_ngcontent-%COMP%]:hover:not(.active){background:#dbe9fb}.tab-label[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.tab-edit[_ngcontent-%COMP%]{width:100px;padding:6px 8px;font-size:.66rem;border-radius:8px;outline:none;border:none}.tab-edit[_ngcontent-%COMP%]:focus{background:#eef6ff}.tab-add[_ngcontent-%COMP%]{background:#f2fbf7;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;transition:background .15s;border:none;color:#067a45}.tab-add[_ngcontent-%COMP%]:hover{background:#e4f9ee}.settimane-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:8px 14px;flex-wrap:wrap;margin-bottom:12px;margin-top:-10px}.settimane-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{background:#eef3fb;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;letter-spacing:.05em;cursor:pointer;border:none;transition:background .15s,color .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.settimane-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]:hover:not(.active){background:#dbe9fb}.settimane-tabs[_ngcontent-%COMP%]   .tab-add[_ngcontent-%COMP%]{background:#f2fbf7;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;color:#067a45;border:none;transition:background .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-add[_ngcontent-%COMP%]:hover{background:#e4f9ee}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[_ngcontent-%COMP%]{background:#fbefee;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;color:#cb1b2b;border:none;margin-left:0;transition:background .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[_ngcontent-%COMP%]:hover:not([disabled]){background:#ffe3e3}.giorno-contenuto[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:20px;border:none}.empty-drop[_ngcontent-%COMP%]{padding:26px 22px;text-align:center;font-size:.7rem;font-weight:700;color:#4b647d;border:none}.exercise-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;border:none}.exercise-card[_ngcontent-%COMP%]{background:#fff;padding:18px 16px 16px;border-radius:16px;display:flex;flex-direction:column;gap:14px;box-shadow:0 3px 12px #193c6e0f;transition:box-shadow .15s,transform .12s;border:none}.exercise-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #193c6e24;transform:translateY(-2px)}.exercise-pagination-mini[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;margin-top:10px;margin-bottom:4px}.page-arrow-mini[_ngcontent-%COMP%]{background:#2563eb;border:none;border-radius:50%;width:28px;height:28px;color:#fff;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 8px #2563eb1a;transition:background .14s,box-shadow .14s,transform .11s;outline:none;padding:0}.page-arrow-mini[disabled][_ngcontent-%COMP%]{background:#eaf0fa;color:#bed2f6;cursor:not-allowed;box-shadow:none}.page-arrow-mini[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:13px;height:13px;display:block;margin:auto}.page-indicator-mini[_ngcontent-%COMP%]{font-size:.93rem;font-weight:700;color:#2563eb;min-width:38px;text-align:center;letter-spacing:.01em}.ex-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;border:none}.ex-img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:18px;background:#f1f5fa;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;border:none}.ex-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.ex-placeholder[_ngcontent-%COMP%]{font-size:28px;opacity:.55}.ex-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:800;color:#173453;flex:1;letter-spacing:.03em;border:none}.ex-controls[_ngcontent-%COMP%]{display:flex;gap:4px;border:none}.btn-icon.move[_ngcontent-%COMP%], .btn-icon.reset[_ngcontent-%COMP%], .btn-icon.remove[_ngcontent-%COMP%]{background:#fff;color:#2563eb;width:32px;height:32px;font-size:1rem;font-weight:700;border-radius:12px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;transition:background .15s,color .15s;padding:0;border:none}.btn-icon.remove[_ngcontent-%COMP%]{color:#dc2626}.btn-icon.remove[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.btn-icon.move[disabled][_ngcontent-%COMP%], .btn-icon.reset[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.btn-icon.move[_ngcontent-%COMP%]:hover:not([disabled]){background:#eef6ff}.btn-icon.reset[_ngcontent-%COMP%]:hover:not([disabled]){background:#e0f0ff}.ex-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;max-width:600px}.ex-fields[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:.58rem;font-weight:700;letter-spacing:.05em;color:#173453}.ex-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;border-radius:10px;font-size:.66rem;font-weight:600;background:#f7fafc;color:#102f4d;outline:none;transition:background-color .15s;height:32px;box-sizing:border-box;border:none}.ex-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#eef6ff}.ex-note[_ngcontent-%COMP%]{width:80%;padding:10px 12px;border-radius:12px;font-size:.66rem;font-weight:600;background:#f8fbff;color:#173453;resize:vertical;outline:none;transition:background-color .15s;display:block;border:none}.ex-note[_ngcontent-%COMP%]:focus{background:#eef6ff}.search-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:14px;border:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border-radius:12px;background:#f7fbff;font-size:.7rem;font-weight:600;color:#173453;outline:none;transition:background-color .15s;border:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{background:#eef6ff}.esercizi-scroll[_ngcontent-%COMP%]{flex:1;overflow:auto;display:flex;flex-direction:column;gap:14px;padding:14px;border:none}.big-ex-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px 18px;display:flex;align-items:center;gap:18px;cursor:pointer;transition:box-shadow .15s,transform .12s,background .15s;min-height:96px;border:none}.big-ex-card[_ngcontent-%COMP%]:hover{background:#f0f6ff;box-shadow:0 4px 14px #2563eb38;transform:translateY(-3px)}.big-img[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:16px;background:#f0f4fa;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;border:none}.big-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.big-placeholder[_ngcontent-%COMP%]{font-size:30px;opacity:.55}.big-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.big-name[_ngcontent-%COMP%]{font-size:.76rem;font-weight:800;color:#173453;letter-spacing:.03em}.big-cat[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#2563eb;opacity:.85;letter-spacing:.05em}.empty-right[_ngcontent-%COMP%]{background:#f1f6fb;border-radius:16px;padding:18px 16px;text-align:center;font-size:.68rem;font-weight:600;color:#516b87;border:none}.user-picker-backdrop[_ngcontent-%COMP%], .share-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f234173;display:flex;align-items:center;justify-content:center;z-index:3000;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.user-picker-modal[_ngcontent-%COMP%], .share-modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;border:2px solid #d9e5f1;box-shadow:0 18px 50px #0f23414d;padding:24px 24px 26px;max-width:420px;width:100%;max-height:85vh;display:flex;flex-direction:column;gap:14px;overflow:auto}.user-picker-modal[_ngcontent-%COMP%]{width:380px}.share-modal[_ngcontent-%COMP%]{width:420px}.picker-header[_ngcontent-%COMP%], .share-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.picker-title[_ngcontent-%COMP%], .share-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:800;color:#173453}.picker-close[_ngcontent-%COMP%], .share-close[_ngcontent-%COMP%]{background:#f0f5fa;border:1px solid #d9e5f1;width:36px;height:36px;font-size:18px;font-weight:700;border-radius:12px;cursor:pointer;transition:background .15s,color .15s}.picker-close[_ngcontent-%COMP%]:hover, .share-close[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.picker-search[_ngcontent-%COMP%]{padding:10px 12px;border:1.8px solid #b9cddd;border-radius:12px;background:#f7fbff;font-size:.68rem;font-weight:600;color:#173453;outline:none;margin-bottom:8px}.picker-list[_ngcontent-%COMP%]{overflow:auto;flex:1;display:flex;flex-direction:column;gap:10px}.picker-item[_ngcontent-%COMP%]{display:flex;gap:14px;background:#f8fbff;border:1px solid #d9e5f1;border-radius:14px;padding:12px 14px;cursor:pointer;transition:background .15s,box-shadow .15s,transform .12s}.picker-item[_ngcontent-%COMP%]:hover{background:#edf5ff;box-shadow:0 3px 12px #2563eb38;transform:translateY(-2px)}.pi-avatar[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:14px;background:#eef3fb;border:1px solid #d9e5f1;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}.pi-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.pi-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.pi-name[_ngcontent-%COMP%]{font-size:.68rem;font-weight:800;color:#173453}.pi-email[_ngcontent-%COMP%]{font-size:.58rem;font-weight:600;color:#375d80}.pi-status[_ngcontent-%COMP%]{font-size:.56rem;font-weight:700;color:#16a34a}.pi-status.inactive[_ngcontent-%COMP%]{color:#dc2626}.picker-empty[_ngcontent-%COMP%]{text-align:center;font-size:.62rem;font-weight:700;color:#4b647d;padding:16px 10px;border:1px dashed #b9cddd;border-radius:12px}.share-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.share-options[_ngcontent-%COMP%]{display:flex;gap:14px;flex-wrap:wrap}.share-option[_ngcontent-%COMP%]{flex:1 1 110px;background:#f8fbff;border:1.6px solid #b9cddd;border-radius:16px;padding:14px 12px;display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer;transition:background .15s,box-shadow .15s,transform .12s;font-size:.62rem;font-weight:700;color:#173453}.share-option[_ngcontent-%COMP%]:hover{background:#edf5ff;box-shadow:0 3px 12px #2563eb38;transform:translateY(-2px)}.share-icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:800}.share-icon.gmail[_ngcontent-%COMP%]{background:#ffebe6;color:#d93025}.share-icon.outlook[_ngcontent-%COMP%]{background:#e6f0ff;color:#2563eb}.share-icon.link[_ngcontent-%COMP%]{background:#e9f7ff;color:#0d5f8c}.share-link-box[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.share-link-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1.6px solid #b9cddd;border-radius:12px;background:#f7fbff;font-size:.64rem;font-weight:600;color:#173453;outline:none}@media (max-width:1180px){.schede-page[_ngcontent-%COMP%]{grid-template-columns:260px 1fr 300px}}@media (max-width:980px){.schede-page[_ngcontent-%COMP%]{grid-template-columns:1fr}.col-left[_ngcontent-%COMP%], .col-center[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{width:100%}}@media (max-width:560px){.schede-page[_ngcontent-%COMP%]{padding:20px 16px 34px}.exercise-card[_ngcontent-%COMP%]{padding:16px 14px 14px}.big-ex-card[_ngcontent-%COMP%]{padding:14px 16px;min-height:88px}.avatar-block[_ngcontent-%COMP%]{width:78px;height:78px}.giorni-tabs[_ngcontent-%COMP%]{gap:8px}.tab-item[_ngcontent-%COMP%], .tab-add[_ngcontent-%COMP%]{padding:7px 12px;font-size:.6rem}}"]});let n=e;return n})();var iae=["fileInput"];function oae(n,e){if(n&1&&bt(0,"img",33),n&2){let t=ce(2);ve("src",t.editForm.media||t.editForm.image,xr)}}function sae(n,e){n&1&&(A(0,"div",34),bt(1,"span",35),R())}function aae(n,e){if(n&1){let t=Bt();A(0,"button",36),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.enableEdit())}),Z(1,"Modifica"),R()}}function cae(n,e){if(n&1){let t=Bt();A(0,"button",36),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.saveExercise())}),Z(1,"Salva Esercizio"),R()}}function lae(n,e){if(n&1){let t=Bt();A(0,"button",13),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.cancelEdit())}),Z(1,"Annulla"),R()}}function uae(n,e){if(n&1){let t=Bt();A(0,"button",39),Fe("click",function(){Ee(t);let i=ce().index,o=ce(2);return Ce(o.removeMuscle(i))}),Z(1,"\xD7"),R()}}function dae(n,e){if(n&1&&(A(0,"span",37),Z(1),st(2,uae,2,0,"button",38),R()),n&2){let t=e.$implicit,r=ce(2);X(),yr(" ",t," "),X(),ve("ngIf",r.editMode)}}function fae(n,e){if(n&1){let t=Bt();A(0,"div",40)(1,"input",41),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.newMuscle,i)||(o.newMuscle=i),Ce(i)}),Fe("keydown.enter",function(){Ee(t);let i=ce(2);return Ce(i.addMuscle())}),R(),A(2,"button",42),Fe("click",function(){Ee(t);let i=ce(2);return Ce(i.addMuscle())}),Z(3,"Aggiungi"),R()()}if(n&2){let t=ce(2);X(),vt("ngModel",t.newMuscle)}}function hae(n,e){if(n&1&&(A(0,"div",43),Z(1),R()),n&2){let t=ce(2);X(),Zt(t.editForm.notes||"Nessuna nota")}}function pae(n,e){if(n&1){let t=Bt();A(0,"textarea",44),yt("ngModelChange",function(i){Ee(t);let o=ce(2);return xt(o.editForm.notes,i)||(o.editForm.notes=i),Ce(i)}),R()}if(n&2){let t=ce(2);vt("ngModel",t.editForm.notes)}}function gae(n,e){if(n&1){let t=Bt();A(0,"div",3)(1,"div",4)(2,"div",5),Fe("click",function(){Ee(t);let i=ce();return Ce(i.onMediaBoxClick())}),st(3,oae,1,1,"img",6)(4,sae,2,0,"div",7),A(5,"input",8,1),Fe("change",function(i){Ee(t);let o=ce();return Ce(o.onMediaChange(i))}),R()()(),A(7,"div",9)(8,"div",10),st(9,aae,2,0,"button",11)(10,cae,2,0,"button",11)(11,lae,2,0,"button",12),A(12,"button",13),Fe("click",function(){Ee(t);let i=ce();return Ce(i.backToList())}),Z(13,"Indietro"),R()(),A(14,"h2"),Z(15,"Esercizio"),R(),A(16,"div",14)(17,"label"),Z(18,"Nome"),R(),A(19,"input",15),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.editForm.name,i)||(o.editForm.name=i),Ce(i)}),R()(),A(20,"div",14)(21,"label"),Z(22,"Categoria"),R(),A(23,"input",15),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.editForm.category,i)||(o.editForm.category=i),Ce(i)}),R()(),A(24,"div",14)(25,"label"),Z(26,"Posizionamento"),R(),A(27,"textarea",16),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.editForm.posizionamento,i)||(o.editForm.posizionamento=i),Ce(i)}),R()(),A(28,"div",14)(29,"label"),Z(30,"Esecuzione"),R(),A(31,"textarea",17),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.editForm.esecuzione,i)||(o.editForm.esecuzione=i),Ce(i)}),R()(),A(32,"div",14)(33,"label"),Z(34,"Ritorno"),R(),A(35,"textarea",18),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.editForm.ritorno,i)||(o.editForm.ritorno=i),Ce(i)}),R()(),A(36,"div",14)(37,"label"),Z(38,"Accorgimenti tecnici"),R(),A(39,"textarea",19),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.editForm.accorgimenti,i)||(o.editForm.accorgimenti=i),Ce(i)}),R()(),A(40,"div",14)(41,"label"),Z(42,"Obiettivo"),R(),A(43,"textarea",20),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.editForm.obiettivo,i)||(o.editForm.obiettivo=i),Ce(i)}),R()(),A(44,"div",21)(45,"label"),Z(46,"Muscoli Coinvolti"),R(),A(47,"div",22),st(48,dae,3,2,"span",23),R(),st(49,fae,4,1,"div",24),R(),A(50,"div",14)(51,"label"),Z(52,"Difficolt\xE0"),R(),A(53,"select",25),yt("ngModelChange",function(i){Ee(t);let o=ce();return xt(o.editForm.difficulty,i)||(o.editForm.difficulty=i),Ce(i)}),A(54,"option",26),Z(55,"Facile"),R(),A(56,"option",27),Z(57,"Intermedio"),R(),A(58,"option",28),Z(59,"Difficile"),R()()()(),A(60,"aside",29)(61,"div",30)(62,"h4"),Z(63,"Note Personali"),R(),st(64,hae,2,1,"div",31)(65,pae,1,1,"textarea",32),R()()()}if(n&2){let t=ce();X(2),rs("clickable",t.editMode),X(),ve("ngIf",t.editForm.media||t.editForm.image),X(),ve("ngIf",!(t.editForm.media||t.editForm.image)),X(5),ve("ngIf",!t.editMode),X(),ve("ngIf",t.editMode),X(),ve("ngIf",t.editMode),X(8),vt("ngModel",t.editForm.name),ve("readonly",!t.editMode),X(4),vt("ngModel",t.editForm.category),ve("readonly",!t.editMode),X(4),vt("ngModel",t.editForm.posizionamento),ve("readonly",!t.editMode),X(4),vt("ngModel",t.editForm.esecuzione),ve("readonly",!t.editMode),X(4),vt("ngModel",t.editForm.ritorno),ve("readonly",!t.editMode),X(4),vt("ngModel",t.editForm.accorgimenti),ve("readonly",!t.editMode),X(4),vt("ngModel",t.editForm.obiettivo),ve("readonly",!t.editMode),X(5),ve("ngForOf",t.editForm.muscles),X(),ve("ngIf",t.editMode),X(4),vt("ngModel",t.editForm.difficulty),ve("disabled",!t.editMode),X(11),ve("ngIf",!t.editMode),X(),ve("ngIf",t.editMode)}}function mae(n,e){if(n&1){let t=Bt();A(0,"div",9)(1,"h2"),Z(2,"Esercizio"),R(),A(3,"p"),Z(4,"Elemento non trovato."),R(),A(5,"button",13),Fe("click",function(){Ee(t);let i=ce();return Ce(i.backToList())}),Z(6,"Indietro"),R()()}}var Kx=(()=>{let e=class e{constructor(r,i,o){this.route=r,this.router=i,this.eserciziService=o,this.exerciseId=null,this.exercise=null,this.editMode=!1,this.editForm={name:"",category:"",posizionamento:"",esecuzione:"",ritorno:"",accorgimenti:"",obiettivo:"",description:"",muscles:[],difficulty:"Intermedio",image:void 0,media:null,notes:""},this.newMuscle="",this.loading=!0,this.notFound=!1}ngOnInit(){return ee(this,null,function*(){if(this.exerciseId=this.route.snapshot.paramMap.get("id"),!this.exerciseId){this.exercise=null,this.notFound=!0,this.loading=!1;return}try{let i=(yield this.eserciziService.getAll()).find(o=>o.id===this.exerciseId);i?(this.exercise=i,this.populateForm(i)):(this.exercise=null,this.notFound=!0)}catch{this.exercise=null,this.notFound=!0}this.loading=!1})}populateForm(r){this.editForm={name:r.name,category:r.category,posizionamento:r.posizionamento??"",esecuzione:r.esecuzione??"",ritorno:r.ritorno??"",accorgimenti:r.accorgimenti??"",obiettivo:r.obiettivo??"",description:r.description??"",muscles:r.muscles??[],difficulty:r.difficulty??"Intermedio",image:r.image??void 0,media:null,notes:r.notes??""}}backToList(){this.router.navigate(["/esercizi"])}enableEdit(){this.editMode=!0}cancelEdit(){this.exercise&&this.populateForm(this.exercise),this.editMode=!1}saveExercise(){return ee(this,null,function*(){if(!this.exercise)return;let r={name:this.editForm.name,category:this.editForm.category,posizionamento:this.editForm.posizionamento??"",esecuzione:this.editForm.esecuzione??"",ritorno:this.editForm.ritorno??"",accorgimenti:this.editForm.accorgimenti??"",obiettivo:this.editForm.obiettivo??"",description:this.editForm.description,muscles:this.editForm.muscles,difficulty:this.editForm.difficulty,image:this.editForm.image??void 0,notes:this.editForm.notes??""};yield this.eserciziService.update(this.exercise.id,r),this.exercise=Oe(Oe({},this.exercise),r),this.editMode=!1})}addMuscle(){let r=this.newMuscle.trim();r&&(this.editForm.muscles.push(r),this.newMuscle="")}removeMuscle(r){this.editForm.muscles.splice(r,1)}onMediaBoxClick(){this.editMode&&this.fileInputRef?.nativeElement?.click()}onMediaChange(r){let i=r.target.files?.[0]||null;if(!i)return;let o=new FileReader;o.onload=()=>{this.editForm.media=o.result},o.readAsDataURL(i)}};e.\u0275fac=function(i){return new(i||e)(ot(Vs),ot(fo),ot(cx))},e.\u0275cmp=Rr({type:e,selectors:[["app-dettaglio-esercizi"]],viewQuery:function(i,o){if(i&1&&PS(iae,5),i&2){let s;D0(s=T0())&&(o.fileInputRef=s.first)}},decls:3,vars:2,consts:[["notFound",""],["fileInput",""],["class","dettaglio-esercizi-layout",4,"ngIf","ngIfElse"],[1,"dettaglio-esercizi-layout"],[1,"left-media"],[1,"media-box",3,"click"],["alt","Immagine esercizio",3,"src",4,"ngIf"],["class","media-placeholder",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],[1,"center-form"],[1,"top-actions"],["type","button","class","btn",3,"click",4,"ngIf"],["type","button","class","btn outline",3,"click",4,"ngIf"],["type","button",1,"btn","outline",3,"click"],[1,"form-row"],["type","text",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come posizionarsi per l'esercizio",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come eseguire correttamente l'esercizio",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come tornare alla posizione iniziale",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Consigli tecnici e correzioni",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Scopo o obiettivo dell'esercizio",3,"ngModelChange","ngModel","readonly"],[1,"form-row","small-tags"],[1,"tags"],["class","tag",4,"ngFor","ngForOf"],["class","tag-add",4,"ngIf"],[3,"ngModelChange","ngModel","disabled"],["value","Facile"],["value","Intermedio"],["value","Difficile"],[1,"right-side"],[1,"notes"],["class","note-card",4,"ngIf"],["class","note-textarea","rows","6","placeholder","Scrivi le tue note...",3,"ngModel","ngModelChange",4,"ngIf"],["alt","Immagine esercizio",3,"src"],[1,"media-placeholder"],[1,"placeholder-icon"],["type","button",1,"btn",3,"click"],[1,"tag"],["type","button","class","tag-remove","aria-label","Rimuovi",3,"click",4,"ngIf"],["type","button","aria-label","Rimuovi",1,"tag-remove",3,"click"],[1,"tag-add"],["type","text","placeholder","Aggiungi muscolo...",3,"ngModelChange","keydown.enter","ngModel"],["type","button",1,"btn","small",3,"click"],[1,"note-card"],["rows","6","placeholder","Scrivi le tue note...",1,"note-textarea",3,"ngModelChange","ngModel"]],template:function(i,o){if(i&1&&st(0,gae,66,27,"div",2)(1,mae,7,0,"ng-template",null,0,is),i&2){let s=Hi(2);ve("ngIf",o.exercise)("ngIfElse",s)}},dependencies:[Pl,uo,Rs,Tp,zu,$u,_a,Lc,Fc,Ga,Yu],styles:["[_ngcontent-%COMP%]:root{--primary: #2563eb;--panel: #fff;--panel-border: #e7ecf9;--bg: #f5f8fc;--text: #193455}.dettaglio-esercizi-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr 260px;gap:22px;padding:18px 30px;background:var(--bg)}.left-media[_ngcontent-%COMP%]{background:var(--panel);border-radius:12px;padding:14px;border:1px solid var(--panel-border)}.media-box[_ngcontent-%COMP%]{height:220px;display:flex;align-items:center;justify-content:center;background:#fafbfd;border-radius:12px;margin-bottom:10px;overflow:hidden;position:relative;transition:box-shadow .15s,transform .12s}.media-box.clickable[_ngcontent-%COMP%]{cursor:pointer}.media-box.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 2px 10px #2563eb2e;transform:translateY(-1px)}.media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;display:block}.media-placeholder[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:14px;background:#eef3fb;border:1px solid #d7e4f6;position:relative}.placeholder-icon[_ngcontent-%COMP%]{width:100%;height:100%;display:inline-block;background:linear-gradient(#9bb8e0,#9bb8e0) center 40%/36% 14% no-repeat,linear-gradient(#9bb8e0,#9bb8e0) center 60%/60% 28% no-repeat;border-radius:12px}.center-form[_ngcontent-%COMP%]{background:var(--panel);padding:18px;border-radius:12px;border:1px solid var(--panel-border)}.center-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:var(--text)}.top-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-bottom:12px}.form-row[_ngcontent-%COMP%]{margin-bottom:12px;display:flex;flex-direction:column}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#294860;margin-bottom:6px}.form-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:9px 11px;border-radius:8px;border:1px solid #dbe9fb;font-size:.98rem}.tags[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.tag[_ngcontent-%COMP%]{background:#e6f2ff;padding:6px 8px;border-radius:20px;color:#1b355b;font-weight:700;display:inline-flex;align-items:center;gap:6px}.tag-remove[_ngcontent-%COMP%]{background:#fff;border:1px solid #cfe0fb;color:#274162;width:18px;height:18px;border-radius:50%;font-size:12px;line-height:1;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.tag-remove[_ngcontent-%COMP%]:hover{background:var(--primary);color:#fff;border-color:#1f56c7}.tag-add[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:8px}.tag-add[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;border-radius:8px;border:1px solid #dbe9fb}.right-side[_ngcontent-%COMP%]{background:var(--panel);border-radius:12px;padding:14px;border:1px solid var(--panel-border)}.notes[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#294860}.note-card[_ngcontent-%COMP%]{padding:10px;background:#fbfbfd;border-radius:8px;border:1px solid #e7ecf9;color:#193455}.note-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:8px;border:1px solid #dbe9fb}.btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 14px;border-radius:10px;font-size:.95rem;font-weight:700;cursor:pointer;transition:background .16s}.btn[_ngcontent-%COMP%]:hover{background:#194fd6}.btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#1e3a8a;border:1px solid #d7e4f6}.btn.outline[_ngcontent-%COMP%]:hover{background:#e1ebfb}.btn.small[_ngcontent-%COMP%]{padding:6px 12px;font-size:.85rem}@media (max-width: 980px){.dettaglio-esercizi-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]});let n=e;return n})();var vae=[{path:"",component:L7},{path:"esercizi",component:lx},{path:"esercizi/:id",component:Kx},{path:"anagrafica",component:z7},{path:"anagrafica/list",component:$7},{path:"anagrafica/:id",component:I9},{path:"gestione-schede",component:S9},{path:"**",redirectTo:""}],A9=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ar({type:e}),e.\u0275inj=er({imports:[Yu.forRoot(vae),Yu]});let n=e;return n})();var yae="@firebase/firestore-compat",_ae="0.3.53";function rP(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function D9(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function T9(){if(!L8())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Yx=class n{constructor(e){this._delegate=e}static fromBase64String(e){return T9(),new n($s.fromBase64String(e))}static fromUint8Array(e){return D9(),new n($s.fromUint8Array(e))}toBase64(){return T9(),this._delegate.toBase64()}toUint8Array(){return D9(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function XN(n){return wae(n,["next","error","complete"])}function wae(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var JN=class{enableIndexedDbPersistence(e,t){return sM(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return aM(e._delegate)}clearIndexedDbPersistence(e){return cM(e._delegate)}},Zx=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ld||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ls("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){K2(this._delegate,e,t,r)}enableNetwork(){return uM(this._delegate)}disableNetwork(){return dM(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,IT("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return lM(this._delegate)}onSnapshotsInSync(e){return DM(this._delegate,e)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cm(this,hy(this._delegate,e))}catch(t){throw $o(t,"collection()","Firestore.collection()")}}doc(e){try{return new ol(this,Qf(this._delegate,e))}catch(t){throw $o(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new yh(this,oM(this._delegate,e))}catch(t){throw $o(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return MM(this._delegate,t=>e(new Qx(this,t)))}batch(){return Wi(this._delegate),new Xx(new L2(this._delegate,e=>Lg(this._delegate,e)))}loadBundle(e){return fM(this._delegate,e)}namedQuery(e){return hM(this._delegate,e).then(t=>t?new yh(this,t):null)}},sm=class extends Tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yx(new $s(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return ol.forKey(t,this.firestore,null)}};function bae(n){bT(n)}var Qx=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sm(e)}get(e){let t=gh(e);return this._delegate.get(t).then(r=>new mh(this._firestore,new jo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=gh(e);return r?(rP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=gh(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=gh(e);return this._delegate.delete(t),this}},Xx=class{constructor(e){this._delegate=e}set(e,t,r){let i=gh(e);return r?(rP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=gh(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=gh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},am=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new sd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new sm(e),t),i.set(t,o)),o}};am.INSTANCES=new WeakMap;var ol=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sm(e)}static forPath(e,t,r){if(e.length%2!==0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Kn(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new n(t,new Kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new cm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cm(this.firestore,hy(this._delegate,e))}catch(t){throw $o(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=wn(e),e instanceof Kn?py(this._delegate,e):!1}set(e,t){t=rP("DocumentReference.set",t);try{return t?gy(this._delegate,e,t):gy(this._delegate,e)}catch(r){throw $o(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?my(this._delegate,e):my(this._delegate,e,t,...r)}catch(i){throw $o(i,"updateDoc()","DocumentReference.update()")}}delete(){return ix(this._delegate)}onSnapshot(...e){let t=M9(e),r=N9(e,i=>new mh(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Fg(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=CM(this._delegate):e?.source==="server"?t=IM(this._delegate):t=nx(this._delegate),t.then(r=>new mh(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(am.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function $o(n,e,t){return n.message=n.message.replace(e,t),n}function M9(n){for(let e of n)if(typeof e=="object"&&!XN(e))return e;return{}}function N9(n,e){var t,r;let i;return XN(n[0])?i=n[0]:XN(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var mh=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ol(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return tx(this._delegate,e._delegate)}},vh=class extends mh{data(e){let t=this._delegate.data(e);return this._delegate._converter||v8(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},yh=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sm(e)}where(e,t,r){try{return new n(this.firestore,tc(this._delegate,X2(e,t,r)))}catch(i){throw $o(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,tc(this._delegate,J2(e,t)))}catch(r){throw $o(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,tc(this._delegate,yM(e)))}catch(t){throw $o(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,tc(this._delegate,_M(e)))}catch(t){throw $o(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,tc(this._delegate,wM(...e)))}catch(t){throw $o(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,tc(this._delegate,bM(...e)))}catch(t){throw $o(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,tc(this._delegate,xM(...e)))}catch(t){throw $o(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,tc(this._delegate,EM(...e)))}catch(t){throw $o(t,"endAt()","Query.endAt()")}}isEqual(e){return Y2(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=SM(this._delegate):e?.source==="server"?t=AM(this._delegate):t=rx(this._delegate),t.then(r=>new zy(this.firestore,new cs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=M9(e),r=N9(e,i=>new zy(this.firestore,new cs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Fg(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(am.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},eP=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},zy=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new yh(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new eP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new vh(this._firestore,r))})}isEqual(e){return tx(this._delegate,e._delegate)}},cm=class n extends yh{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ol(this.firestore,e):null}doc(e){try{return e===void 0?new ol(this.firestore,Qf(this._delegate)):new ol(this.firestore,Qf(this._delegate,e))}catch(t){throw $o(t,"doc()","CollectionReference.doc()")}}add(e){return ox(this._delegate,e).then(t=>new ol(this.firestore,t))}isEqual(e){return py(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(am.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function gh(n){return Pn(n,Kn)}var tP=class n{constructor(...e){this._delegate=new ec(...e)}static documentId(){return new n(Jr.keyField().canonicalString())}isEqual(e){return e=wn(e),e instanceof ec?this._delegate._internalPath.isEqual(e._internalPath):!1}};var nP=class n{static serverTimestamp(){let e=x7();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=NM();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=E7(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=C7(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=PM(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var xae={Firestore:Zx,GeoPoint:Yc,Timestamp:hr,Blob:Yx,Transaction:Qx,WriteBatch:Xx,DocumentReference:ol,DocumentSnapshot:mh,Query:yh,QueryDocumentSnapshot:vh,QuerySnapshot:zy,CollectionReference:cm,FieldPath:tP,FieldValue:nP,setLogLevel:bae,CACHE_SIZE_UNLIMITED:l7};function Eae(n,e){n.INTERNAL.registerComponent(new Ui("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},xae)))}function Cae(n){Eae(n,(e,t)=>new Zx(e,t,new JN)),n.registerVersion(yae,_ae)}Cae(bi);function Iae(n,e=ef){return new kt(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function P9(n,e){return Iae(n,e)}function Sae(n,e){return P9(n,e).pipe(xu(void 0),rp(),rt(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function sP(n,e){return P9(n,e).pipe(rt(t=>({payload:t,type:"query"})))}var Jx=class{ref;afs;injector=Ae(Gn);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=L9(r,t);return new tE(i,o,this.afs)}snapshotChanges(){return Sae(this.ref,this.afs.schedulers.outsideAngular).pipe(Ii(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(rt(({payload:t})=>e.idField?Ft(Oe({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return gn(this.ref.get(e)).pipe(Ii(this.injector))}};function eE(n,e){return sP(n,e).pipe(xu(void 0),rp(),rt(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function k9(n,e,t){return eE(n,t).pipe(bu((r,i)=>Aae(r,i.map(o=>o.payload),e),[]),o1(),rt(r=>r.map(i=>({type:i.type,payload:i}))))}function Aae(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=Dae(n,r))}),n}function iP(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function Dae(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return iP(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return iP(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return iP(n,e.oldIndex,1);break}return n}function R9(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var tE=class{ref;query;afs;injector=Ae(Gn);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=eE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(rt(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(xu(void 0),rp(),Pr(([r,i])=>i.length>0||!r),rt(([,r])=>r),Ii(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(bu((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=R9(e);return k9(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ii(this.injector))}valueChanges(e={}){return sP(this.query,this.afs.schedulers.outsideAngular).pipe(rt(t=>t.payload.docs.map(r=>e.idField?Ft(Oe({},r.data()),{[e.idField]:r.id}):r.data())),Ii(this.injector))}get(e){return gn(this.query.get(e)).pipe(Ii(this.injector))}add(e){return this.ref.add(e)}doc(e){return new Jx(this.ref.doc(e),this.afs)}},oP=class{query;afs;injector=Ae(Gn);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?eE(this.query,this.afs.schedulers.outsideAngular).pipe(Ii(this.injector)):eE(this.query,this.afs.schedulers.outsideAngular).pipe(rt(t=>t.filter(r=>e.indexOf(r.type)>-1)),Pr(t=>t.length>0),Ii(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(bu((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=R9(e);return k9(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ii(this.injector))}valueChanges(e={}){return sP(this.query,this.afs.schedulers.outsideAngular).pipe(rt(r=>r.payload.docs.map(i=>e.idField?Oe({[e.idField]:i.id},i.data()):i.data())),Ii(this.injector))}get(e){return gn(this.query.get(e)).pipe(Ii(this.injector))}},O9=new We("angularfire2.enableFirestorePersistence"),F9=new We("angularfire2.firestore.persistenceSettings"),Tae=new We("angularfire2.firestore.settings"),Mae=new We("angularfire2.firestore.use-emulator");function L9(n,e=t=>t){return{query:e(n),ref:n}}var aP=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=Ae(jt);constructor(t,r,i,o,s,a,c,l,u,p,v,g,E,C,M,N,Q){this.schedulers=c;let j=hh(t,a,r),H=u;p&&ZN(j,a,v,E,C,M,g,N),[this.firestore,this.persistenceEnabled$]=om(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let oe=a.runOutsideAngular(()=>j.firestore());if(o&&oe.settings(o),H&&oe.useEmulator(...H),i&&!Aw(s)){let pe=()=>{try{return gn(oe.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(z){return typeof console<"u"&&console.warn(z),dt(!1)}};return[oe,a.runOutsideAngular(pe)]}else return[oe,dt(!1)]},[o,H,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=L9(i,r),a=this.ngZone.run(()=>o);return new tE(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new oP(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new Jx(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Be(kd),Be(Rd,8),Be(O9,8),Be(Tae,8),Be(Pi),Be(jt),Be(Qr),Be(F9,8),Be(Mae,8),Be(ph,8),Be(qN,8),Be(HN,8),Be(GN,8),Be(WN,8),Be(KN,8),Be(YN,8),Be(os,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),V9=(()=>{class n{constructor(){bi.registerVersion("angularfire",Zr.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:O9,useValue:!0},{provide:F9,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ar({type:n});static \u0275inj=er({providers:[aP]})}return n})();var W9="firebasestorage.googleapis.com",K9="storageBucket",Pae=120*1e3,kae=600*1e3,Rae=1e3;var Fr=class n extends yu{constructor(e,t,r=0){super(cP(e),`Firebase Storage: ${t} (${cP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Sr=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(Sr||{});function cP(n){return"storage/"+n}function mP(){let n="An unknown error occurred, please check the error payload for server response.";return new Fr(Sr.UNKNOWN,n)}function Oae(n){return new Fr(Sr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Fae(n){return new Fr(Sr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Lae(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Fr(Sr.UNAUTHENTICATED,n)}function Vae(){return new Fr(Sr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function jae(n){return new Fr(Sr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Y9(){return new Fr(Sr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Z9(){return new Fr(Sr.CANCELED,"User canceled the upload/download.")}function Bae(n){return new Fr(Sr.INVALID_URL,"Invalid URL '"+n+"'.")}function Uae(n){return new Fr(Sr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function zae(){return new Fr(Sr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+K9+"' property when initializing the app?")}function Q9(){return new Fr(Sr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $ae(){return new Fr(Sr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function qae(){return new Fr(Sr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Hae(n){return new Fr(Sr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _h(n){return new Fr(Sr.INVALID_ARGUMENT,n)}function X9(){return new Fr(Sr.APP_DELETED,"The Firebase app was deleted.")}function vP(n){return new Fr(Sr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qy(n,e){return new Fr(Sr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function $y(n){throw new Fr(Sr.INTERNAL_ERROR,"Internal error: "+n)}var qo=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw Uae(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function l(H){H.path_=decodeURIComponent(H.path)}let u="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",g=new RegExp(`^https?://${p}/${u}/b/${i}/o${v}`,"i"),E={bucket:1,path:3},C=t===W9?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",N=new RegExp(`^https?://${C}/${i}/${M}`,"i"),j=[{regex:a,indices:c,postModify:o},{regex:g,indices:E,postModify:l},{regex:N,indices:{bucket:1,path:2},postModify:l}];for(let H=0;H<j.length;H++){let oe=j[H],pe=oe.regex.exec(e);if(pe){let z=pe[oe.indices.bucket],T=pe[oe.indices.path];T||(T=""),r=new n(z,T),oe.postModify(r);break}}if(r==null)throw Bae(e);return r}},uP=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Gae(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let l=!1;function u(...M){l||(l=!0,e.apply(null,M))}function p(M){i=setTimeout(()=>{i=null,n(g,c())},M)}function v(){o&&clearTimeout(o)}function g(M,...N){if(l){v();return}if(M){v(),u.call(null,M,...N);return}if(c()||s){v(),u.call(null,M,...N);return}r<64&&(r*=2);let j;a===1?(a=2,j=0):j=(r+Math.random())*1e3,p(j)}let E=!1;function C(M){E||(E=!0,v(),!l&&(i!==null?(M||(a=2),clearTimeout(i),p(0)):M||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,C(!0)},t),C}function Wae(n){n(!1)}function Kae(n){return n!==void 0}function Yae(n){return typeof n=="function"}function Zae(n){return typeof n=="object"&&!Array.isArray(n)}function iE(n){return typeof n=="string"||n instanceof String}function j9(n){return yP()&&n instanceof Blob}function yP(){return typeof Blob<"u"}function dP(n,e,t,r){if(r<e)throw _h(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw _h(`Invalid value for '${n}'. Expected ${t} or less.`)}function Od(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function J9(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var dm=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(dm||{});function eU(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var fP=class{constructor(e,t,r,i,o,s,a,c,l,u,p,v=!0,g=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=p,this.retry=v,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,C)=>{this.resolve_=E,this.reject_=C,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new um(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===dm.NO_ERROR,c=o.getStatus();if(!a||eU(c,this.additionalRetryCodes_)&&this.retry){let u=o.getErrorCode()===dm.ABORT;r(!1,new um(!1,null,u));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new um(l,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Kae(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=mP();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?X9():Z9();s(c)}else{let c=Y9();s(c)}};this.canceled_?t(!1,new um(!1,null,!0)):this.backoffId_=Gae(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Wae(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},um=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Qae(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Xae(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Jae(n,e){e&&(n["X-Firebase-GMPID"]=e)}function ece(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function tce(n,e,t,r,i,o,s=!0,a=!1){let c=J9(n.urlParams),l=n.url+c,u=Object.assign({},n.headers);return Jae(u,e),Qae(u,t),Xae(u,o),ece(u,r),new fP(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function nce(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rce(...n){let e=nce();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(yP())return new Blob(n);throw new Fr(Sr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ice(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function oce(n){if(typeof atob>"u")throw Hae("base-64");return atob(n)}var Ws={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Hy=class{constructor(e,t){this.data=e,this.contentType=t||null}};function _P(n,e){switch(n){case Ws.RAW:return new Hy(tU(e));case Ws.BASE64:case Ws.BASE64URL:return new Hy(nU(n,e));case Ws.DATA_URL:return new Hy(ace(e),cce(e))}throw mP()}function tU(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sce(n){let e;try{e=decodeURIComponent(n)}catch{throw qy(Ws.DATA_URL,"Malformed data URL.")}return tU(e)}function nU(n,e){switch(n){case Ws.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw qy(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ws.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw qy(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=oce(e)}catch(i){throw i.message.includes("polyfill")?i:qy(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var rE=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw qy(Ws.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=lce(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function ace(n){let e=new rE(n);return e.base64?nU(Ws.BASE64,e.rest):sce(e.rest)}function cce(n){return new rE(n).contentType}function lce(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var fm=class n{constructor(e,t){let r=0,i="";j9(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(j9(this.data_)){let r=this.data_,i=ice(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(yP()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(rce.apply(null,t))}else{let t=e.map(s=>iE(s)?_P(Ws.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function wP(n){let e;try{e=JSON.parse(n)}catch{return null}return Zae(e)?e:null}function uce(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function dce(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function rU(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function fce(n,e){return e}var Zi=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||fce}},nE=null;function hce(n){return!iE(n)||n.length<2?n:rU(n)}function oE(){if(nE)return nE;let n=[];n.push(new Zi("bucket")),n.push(new Zi("generation")),n.push(new Zi("metageneration")),n.push(new Zi("name","fullPath",!0));function e(o,s){return hce(s)}let t=new Zi("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new Zi("size");return i.xform=r,n.push(i),n.push(new Zi("timeCreated")),n.push(new Zi("updated")),n.push(new Zi("md5Hash",null,!0)),n.push(new Zi("cacheControl",null,!0)),n.push(new Zi("contentDisposition",null,!0)),n.push(new Zi("contentEncoding",null,!0)),n.push(new Zi("contentLanguage",null,!0)),n.push(new Zi("contentType",null,!0)),n.push(new Zi("metadata","customMetadata",!0)),nE=n,nE}function pce(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new qo(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function gce(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return pce(r,n),r}function iU(n,e,t){let r=wP(e);return r===null?null:gce(n,r,t)}function mce(n,e,t,r){let i=wP(e);if(i===null||!iE(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let u=n.bucket,p=n.fullPath,v="/b/"+s(u)+"/o/"+s(p),g=Od(v,t,r),E=J9({alt:"media",token:l});return g+E})[0]}function bP(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var B9="prefixes",U9="items";function vce(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[B9])for(let i of t[B9]){let o=i.replace(/\/$/,""),s=n._makeStorageReference(new qo(e,o));r.prefixes.push(s)}if(t[U9])for(let i of t[U9]){let o=n._makeStorageReference(new qo(e,i.name));r.items.push(o)}return r}function yce(n,e,t){let r=wP(t);return r===null?null:vce(n,e,r)}var ac=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function al(n){if(!n)throw mP()}function sE(n,e){function t(r,i){let o=iU(n,i,e);return al(o!==null),o}return t}function _ce(n,e){function t(r,i){let o=yce(n,e,i);return al(o!==null),o}return t}function wce(n,e){function t(r,i){let o=iU(n,i,e);return al(o!==null),mce(o,i,n.host,n._protocol)}return t}function gm(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Vae():i=Lae():t.getStatus()===402?i=Fae(n.bucket):t.getStatus()===403?i=jae(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function aE(n){let e=gm(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=Oae(n.path)),o.serverResponse=i.serverResponse,o}return t}function oU(n,e,t){let r=e.fullServerUrl(),i=Od(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new ac(i,o,sE(n,t),s);return a.errorHandler=aE(e),a}function bce(n,e,t,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=Od(s,n.host,n._protocol),c="GET",l=n.maxOperationRetryTime,u=new ac(a,c,_ce(n,e.bucket),l);return u.urlParams=o,u.errorHandler=gm(e),u}function xce(n,e,t){let r=e.fullServerUrl(),i=Od(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new ac(i,o,wce(n,t),s);return a.errorHandler=aE(e),a}function Ece(n,e,t,r){let i=e.fullServerUrl(),o=Od(i,n.host,n._protocol),s="PATCH",a=bP(t,r),c={"Content-Type":"application/json; charset=utf-8"},l=n.maxOperationRetryTime,u=new ac(o,s,sE(n,r),l);return u.headers=c,u.body=a,u.errorHandler=aE(e),u}function Cce(n,e){let t=e.fullServerUrl(),r=Od(t,n.host,n._protocol),i="DELETE",o=n.maxOperationRetryTime;function s(c,l){}let a=new ac(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=aE(e),a}function Ice(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function sU(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=Ice(null,e)),r}function Sce(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let j="";for(let H=0;H<2;H++)j=j+Math.random().toString().slice(2);return j}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let l=sU(e,r,i),u=bP(l,t),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,v=`\r
--`+c+"--",g=fm.getBlob(p,r,v);if(g===null)throw Q9();let E={name:l.fullPath},C=Od(o,n.host,n._protocol),M="POST",N=n.maxUploadRetryTime,Q=new ac(C,M,sE(n,t),N);return Q.urlParams=E,Q.headers=s,Q.body=g.uploadData(),Q.errorHandler=gm(e),Q}var hm=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function xP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{al(!1)}return al(!!t&&(e||["active"]).indexOf(t)!==-1),t}function Ace(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s=sU(e,r,i),a={name:s.fullPath},c=Od(o,n.host,n._protocol),l="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},p=bP(s,t),v=n.maxUploadRetryTime;function g(C){xP(C);let M;try{M=C.getResponseHeader("X-Goog-Upload-URL")}catch{al(!1)}return al(iE(M)),M}let E=new ac(c,l,g,v);return E.urlParams=a,E.headers=u,E.body=p,E.errorHandler=gm(e),E}function Dce(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function o(l){let u=xP(l,["active","final"]),p=null;try{p=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{al(!1)}p||al(!1);let v=Number(p);return al(!isNaN(v)),new hm(v,r.size(),u==="final")}let s="POST",a=n.maxUploadRetryTime,c=new ac(t,s,o,a);return c.headers=i,c.errorHandler=gm(e),c}var z9=256*1024;function Tce(n,e,t,r,i,o,s,a){let c=new hm(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw $ae();let l=c.total-c.current,u=l;i>0&&(u=Math.min(u,i));let p=c.current,v=p+u,g="";u===0?g="finalize":l===u?g="upload, finalize":g="upload";let E={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${c.current}`},C=r.slice(p,v);if(C===null)throw Q9();function M(H,oe){let pe=xP(H,["active","final"]),z=c.current+u,T=r.size(),I;return pe==="final"?I=sE(e,o)(H,oe):I=null,new hm(z,T,pe==="final",I)}let N="POST",Q=e.maxUploadRetryTime,j=new ac(t,N,M,Q);return j.headers=E,j.body=C.uploadData(),j.progressCallback=a||null,j.errorHandler=gm(n),j}var aU={STATE_CHANGED:"state_changed"},wo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lP(n){switch(n){case"running":case"pausing":case"canceling":return wo.RUNNING;case"paused":return wo.PAUSED;case"success":return wo.SUCCESS;case"canceled":return wo.CANCELED;case"error":return wo.ERROR;default:return wo.ERROR}}var hP=class{constructor(e,t,r){if(Yae(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function lm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var $9=null,pP=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw $y("cannot .send() more than once");if(Rh(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $y("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $y("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $y("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $y("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},gP=class extends pP{initXhr(){this.xhr_.responseType="text"}};function sl(){return $9?$9():new gP}var Gy=class{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=oE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Sr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(eU(i.status,[]))if(o)i=Y9();else{this.sleepTime=Math.max(this.sleepTime*2,Rae),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Sr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=Ace(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,sl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=Dce(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,sl,t,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=z9*this._chunkMultiplier,t=new hm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=Tce(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,sl,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){z9*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=oU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,sl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=Sce(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,sl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Z9(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=lP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let o=new hP(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(lP(this._state)){case wo.SUCCESS:lm(this._resolve.bind(null,this.snapshot))();break;case wo.CANCELED:case wo.ERROR:let t=this._reject;lm(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(lP(this._state)){case wo.RUNNING:case wo.PAUSED:e.next&&lm(e.next.bind(e,this.snapshot))();break;case wo.SUCCESS:e.complete&&lm(e.complete.bind(e))();break;case wo.CANCELED:case wo.ERROR:e.error&&lm(e.error.bind(e,this._error))();break;default:e.error&&lm(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var pm=class n{constructor(e,t){this._service=e,t instanceof qo?this._location=t:this._location=qo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new qo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rU(this._location.path)}get storage(){return this._service}get parent(){let e=uce(this._location.path);if(e===null)return null;let t=new qo(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw vP(e)}};function Mce(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Gy(n,new fm(e),t)}function Nce(n){let e={prefixes:[],items:[]};return cU(n,e).then(()=>e)}function cU(n,e,t){return ee(this,null,function*(){let i=yield lU(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield cU(n,e,i.nextPageToken))})}function lU(n,e){e!=null&&typeof e.maxResults=="number"&&dP("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=bce(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,sl)}function Pce(n){n._throwIfRoot("getMetadata");let e=oU(n.storage,n._location,oE());return n.storage.makeRequestWithTokens(e,sl)}function kce(n,e){n._throwIfRoot("updateMetadata");let t=Ece(n.storage,n._location,e,oE());return n.storage.makeRequestWithTokens(t,sl)}function Rce(n){n._throwIfRoot("getDownloadURL");let e=xce(n.storage,n._location,oE());return n.storage.makeRequestWithTokens(e,sl).then(t=>{if(t===null)throw qae();return t})}function Oce(n){n._throwIfRoot("deleteObject");let e=Cce(n.storage,n._location);return n.storage.makeRequestWithTokens(e,sl)}function uU(n,e){let t=dce(n._location.path,e),r=new qo(n._location.bucket,t);return new pm(n.storage,r)}function Fce(n){return/^[A-Za-z]+:\/\//.test(n)}function Lce(n,e){return new pm(n,e)}function dU(n,e){if(n instanceof Wy){let t=n;if(t._bucket==null)throw zae();let r=new pm(t,t._bucket);return e!=null?dU(r,e):r}else return e!==void 0?uU(n,e):n}function Vce(n,e){if(e&&Fce(e)){if(n instanceof Wy)return Lce(n,e);throw _h("To use ref(service, url), the first argument must be a Storage instance.")}else return dU(n,e)}function q9(n,e){let t=e?.[K9];return t==null?null:qo.makeFromBucketSpec(t,n)}function jce(n,e,t,r={}){n.host=`${e}:${t}`;let i=Rh(e);i&&(y_(`https://${n.host}/b`),w_("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:__(o,n.app.options.projectId))}var Wy=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=W9,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Pae,this._maxUploadRetryTime=kae,this._requests=new Set,i!=null?this._bucket=qo.makeFromBucketSpec(i,this._host):this._bucket=q9(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qo.makeFromBucketSpec(this._url,e):this._bucket=q9(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return ee(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return ee(this,null,function*(){if(x_(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pm(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new uP(X9());{let s=tce(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return ee(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},H9="@firebase/storage",G9="0.13.14";var fU="storage";function EP(n,e,t){return n=wn(n),Mce(n,e,t)}function CP(n){return n=wn(n),Pce(n)}function IP(n,e){return n=wn(n),kce(n,e)}function SP(n,e){return n=wn(n),lU(n,e)}function AP(n){return n=wn(n),Nce(n)}function DP(n){return n=wn(n),Rce(n)}function TP(n){return n=wn(n),Oce(n)}function cE(n,e){return n=wn(n),Vce(n,e)}function hU(n,e){return uU(n,e)}function pU(n=wc(),e){n=wn(n);let r=ka(n,fU).getImmediate({identifier:e}),i=v_("storage");return i&&lE(r,...i),r}function lE(n,e,t,r={}){jce(n,e,t,r)}function Bce(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Wy(t,r,i,e,E_)}function Uce(){Ts(new Ui(fU,Bce,"PUBLIC").setMultipleInstances(!0)),Hn(H9,G9,""),Hn(H9,G9,"esm2017")}Uce();var mm=class{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var uE=class{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new mm(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new mm(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(typeof t=="function"?o=s=>t(new mm(s,this,this._ref)):o={next:t.next?s=>t.next(new mm(s,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},dE=class{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new wh(e,this._service))}get items(){return this._delegate.items.map(e=>new wh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var wh=class n{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let t=hU(this._delegate,e);return new n(t,this.storage)}get root(){return new n(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new n(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new uE(EP(this._delegate,e,t),this)}putString(e,t=Ws.RAW,r){this._throwIfRoot("putString");let i=_P(t,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new uE(new Gy(this._delegate,new fm(i.data,!0),o),this)}listAll(){return AP(this._delegate).then(e=>new dE(e,this.storage))}list(e){return SP(this._delegate,e||void 0).then(t=>new dE(t,this.storage))}getMetadata(){return CP(this._delegate)}updateMetadata(e){return IP(this._delegate,e)}getDownloadURL(){return DP(this._delegate)}delete(){return this._throwIfRoot("delete"),TP(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw vP(e)}};var fE=class{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(gU(e))throw _h("ref() expected a child path but got a URL, use refFromURL instead.");return new wh(cE(this._delegate,e),this)}refFromURL(e){if(!gU(e))throw _h("refFromURL() expected a full URL but got a child path, use ref() instead.");try{qo.makeFromUrl(e,this._delegate.host)}catch{throw _h("refFromUrl() expected a valid full URL but got an invalid one.")}return new wh(cE(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){lE(this._delegate,e,t,r)}};function gU(n){return/^[A-Za-z]+:\/\//.test(n)}var zce="@firebase/storage-compat",$ce="0.3.24";var qce="storage-compat";function Hce(n,{instanceIdentifier:e}){let t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new fE(t,r)}function Gce(n){let e={TaskState:wo,TaskEvent:aU,StringFormat:Ws,Storage:fE,Reference:wh};n.INTERNAL.registerComponent(new Ui(qce,Hce,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(zce,$ce)}Gce(bi);function Wce(n){return new kt(e=>{let t=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();t(n.snapshot);let o=n.on("state_changed",t);return n.then(s=>{t(s),i()},s=>{t(n.snapshot),r(s)}),function(){o()}}).pipe(cC(0))}function mU(n){let e=Wce(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(rt(t=>t.bytesTransferred/t.totalBytes*100))}}function hE(n,e){return{getDownloadURL:()=>dt(void 0).pipe(io(e.get(Qr).outsideAngular),Mn(()=>n.getDownloadURL()),Ii(e)),getMetadata:()=>dt(void 0).pipe(io(e.get(Qr).outsideAngular),Mn(()=>n.getMetadata()),Ii(e)),delete:()=>gn(n.delete()),child:t=>hE(n.child(t),e),updateMetadata:t=>gn(n.updateMetadata(t)),put:(t,r)=>{let i=n.put(t,r);return mU(i)},putString:(t,r,i)=>{let o=n.putString(t,r,i);return mU(o)},list:t=>gn(n.list(t)),listAll:()=>gn(n.listAll())}}var Kce=new We("angularfire2.storageBucket"),Yce=new We("angularfire2.storage.maxUploadRetryTime"),Zce=new We("angularfire2.storage.maxOperationRetryTime"),Qce=new We("angularfire2.storage.use-emulator"),MP=(()=>{class n{storage;injector=Ae(Gn);constructor(t,r,i,o,s,a,c,l,u,p){let v=hh(t,s,r);this.storage=om(`${v.name}.storage.${i}`,"AngularFireStorage",v.name,()=>{let g=s.runOutsideAngular(()=>v.storage(i||void 0)),E=u;return E&&g.useEmulator(...E),c&&g.setMaxUploadRetryTime(c),l&&g.setMaxOperationRetryTime(l),g},[c,l])}ref(t){return hE(this.storage.ref(t),this.injector)}refFromURL(t){return hE(this.storage.refFromURL(t),this.injector)}upload(t,r,i){let o=this.storage.ref(t);return hE(o,this.injector).put(r,i)}static \u0275fac=function(r){return new(r||n)(Be(kd),Be(Rd,8),Be(Kce,8),Be(Pi),Be(jt),Be(Qr),Be(Yce,8),Be(Zce,8),Be(Qce,8),Be(os,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var vU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ar({type:n});static \u0275inj=er({})}return n})(),yU=(()=>{class n{constructor(){bi.registerVersion("angularfire",Zr.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ar({type:n});static \u0275inj=er({providers:[MP],imports:[vU,vU]})}return n})();var _U=(()=>{let e=class e{constructor(r,i,o){this.firestore=r,this.auth=i,this.storage=o,this.schedeCollection=this.firestore.collection("schede")}testWrite(){return ee(this,null,function*(){try{try{(yield this.auth.currentUser)||(yield this.auth.signInAnonymously())}catch{}return{ok:!0,id:(yield this.schedeCollection.add({nome:"debug-"+Date.now(),dataCreazione:new Date,idCliente:"debug",esercizi:[]})).id}}catch(r){return console.error("FirebaseService.testWrite error",r),{ok:!1,error:r}}})}getSchede(){return this.schedeCollection.snapshotChanges().pipe(rt(r=>r.map(i=>{let o=i.payload.doc.data(),s=i.payload.doc.id;return Oe({id:s},o)})))}getScheda(r){return this.schedeCollection.doc(r).valueChanges().pipe(rt(i=>i?Ft(Oe({},i),{id:r}):void 0))}addScheda(r){return this.schedeCollection.add(r)}updateScheda(r,i){return this.schedeCollection.doc(r).update(i)}deleteScheda(r){return this.schedeCollection.doc(r).delete()}};e.\u0275fac=function(i){return new(i||e)(Be(aP),Be(ph),Be(MP))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ky=class{constructor(e){return e}},wU="storage",NP=class{constructor(){return zc(wU)}};var PP=new We("angularfire2.storage-instances");function Jce(n,e){let t=Rl(wU,n,e);return t&&new Ky(t)}function ele(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ky(r)}}var tle={provide:NP,deps:[[new kr,PP]]},nle={provide:Ky,useFactory:Jce,deps:[[new kr,PP],js]};function bU(n,...e){return Hn("angularfire",Zr.full,"gcs"),oo([nle,tle,{provide:PP,useFactory:ele(n),multi:!0,deps:[jt,Bn,Qr,Ka,[new kr,Tf],[new kr,os],...e]}])}var xU=Er(pU,!0);var IU="@firebase/installations",FP="0.6.18";var SU=1e4,AU=`w:${FP}`,DU="FIS_v2",rle="https://firebaseinstallations.googleapis.com/v1",ile=3600*1e3,ole="installations",sle="Installations";var ale={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xh=new Fh(ole,sle,ale);function TU(n){return n instanceof yu&&n.code.includes("request-failed")}function MU({projectId:n}){return`${rle}/projects/${n}/installations`}function NU(n){return{token:n.token,requestStatus:2,expiresIn:lle(n.expiresIn),creationTime:Date.now()}}function PU(n,e){return ee(this,null,function*(){let r=(yield e.json()).error;return xh.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function kU({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function cle(n,{refreshToken:e}){let t=kU(n);return t.append("Authorization",ule(e)),t}function RU(n){return ee(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function lle(n){return Number(n.replace("s","000"))}function ule(n){return`${DU} ${n}`}function dle(r,i){return ee(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=MU(n),s=kU(n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let c={fid:t,authVersion:DU,appId:n.appId,sdkVersion:AU},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield RU(()=>fetch(o,l));if(u.ok){let p=yield u.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:NU(p.authToken)}}else throw yield PU("Create Installation",u)})}function OU(n){return new Promise(e=>{setTimeout(e,n)})}function fle(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var hle=/^[cdef][\w-]{21}$/,OP="";function ple(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=gle(n);return hle.test(t)?t:OP}catch{return OP}}function gle(n){return fle(n).substr(0,22)}function gE(n){return`${n.appName}!${n.appId}`}var FU=new Map;function LU(n,e){let t=gE(n);VU(t,e),mle(t,e)}function VU(n,e){let t=FU.get(n);if(t)for(let r of t)r(e)}function mle(n,e){let t=vle();t&&t.postMessage({key:n,fid:e}),yle()}var bh=null;function vle(){return!bh&&"BroadcastChannel"in self&&(bh=new BroadcastChannel("[Firebase] FID Change"),bh.onmessage=n=>{VU(n.data.key,n.data.fid)}),bh}function yle(){FU.size===0&&bh&&(bh.close(),bh=null)}var _le="firebase-installations-database",wle=1,Eh="firebase-installations-store",kP=null;function LP(){return kP||(kP=Uk(_le,wle,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Eh)}}})),kP}function pE(n,e){return ee(this,null,function*(){let t=gE(n),i=(yield LP()).transaction(Eh,"readwrite"),o=i.objectStore(Eh),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&LU(n,e.fid),e})}function jU(n){return ee(this,null,function*(){let e=gE(n),r=(yield LP()).transaction(Eh,"readwrite");yield r.objectStore(Eh).delete(e),yield r.done})}function mE(n,e){return ee(this,null,function*(){let t=gE(n),i=(yield LP()).transaction(Eh,"readwrite"),o=i.objectStore(Eh),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&LU(n,a.fid),a})}function VP(n){return ee(this,null,function*(){let e,t=yield mE(n.appConfig,r=>{let i=ble(r),o=xle(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===OP?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function ble(n){let e=n||{fid:ple(),registrationStatus:0};return BU(e)}function xle(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(xh.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Ele(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Cle(n)}:{installationEntry:e}}function Ele(n,e){return ee(this,null,function*(){try{let t=yield dle(n,e);return pE(n.appConfig,t)}catch(t){throw TU(t)&&t.customData.serverCode===409?yield jU(n.appConfig):yield pE(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function Cle(n){return ee(this,null,function*(){let e=yield EU(n.appConfig);for(;e.registrationStatus===1;)yield OU(100),e=yield EU(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield VP(n);return r||t}return e})}function EU(n){return mE(n,e=>{if(!e)throw xh.create("installation-not-found");return BU(e)})}function BU(n){return Ile(n)?{fid:n.fid,registrationStatus:0}:n}function Ile(n){return n.registrationStatus===1&&n.registrationTime+SU<Date.now()}function Sle(r,i){return ee(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=Ale(n,t),s=cle(n,t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let c={installation:{sdkVersion:AU,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield RU(()=>fetch(o,l));if(u.ok){let p=yield u.json();return NU(p)}else throw yield PU("Generate Auth Token",u)})}function Ale(n,{fid:e}){return`${MU(n)}/${e}/authTokens:generate`}function jP(n,e=!1){return ee(this,null,function*(){let t,r=yield mE(n.appConfig,o=>{if(!UU(o))throw xh.create("not-registered");let s=o.authToken;if(!e&&Mle(s))return o;if(s.requestStatus===1)return t=Dle(n,e),o;{if(!navigator.onLine)throw xh.create("app-offline");let a=Ple(o);return t=Tle(n,a),a}});return t?yield t:r.authToken})}function Dle(n,e){return ee(this,null,function*(){let t=yield CU(n.appConfig);for(;t.authToken.requestStatus===1;)yield OU(100),t=yield CU(n.appConfig);let r=t.authToken;return r.requestStatus===0?jP(n,e):r})}function CU(n){return mE(n,e=>{if(!UU(e))throw xh.create("not-registered");let t=e.authToken;return kle(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Tle(n,e){return ee(this,null,function*(){try{let t=yield Sle(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield pE(n.appConfig,r),t}catch(t){if(TU(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield jU(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield pE(n.appConfig,r)}throw t}})}function UU(n){return n!==void 0&&n.registrationStatus===2}function Mle(n){return n.requestStatus===2&&!Nle(n)}function Nle(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+ile}function Ple(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function kle(n){return n.requestStatus===1&&n.requestTime+SU<Date.now()}function Rle(n){return ee(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield VP(e);return r?r.catch(console.error):jP(e).catch(console.error),t.fid})}function Ole(n,e=!1){return ee(this,null,function*(){let t=n;return yield Fle(t),(yield jP(t,e)).token})}function Fle(n){return ee(this,null,function*(){let{registrationPromise:e}=yield VP(n);e&&(yield e)})}function Lle(n){if(!n||!n.options)throw RP("App Configuration");if(!n.name)throw RP("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw RP(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function RP(n){return xh.create("missing-app-config-values",{valueName:n})}var zU="installations",Vle="installations-internal",jle=n=>{let e=n.getProvider("app").getImmediate(),t=Lle(e),r=ka(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Ble=n=>{let e=n.getProvider("app").getImmediate(),t=ka(e,zU).getImmediate();return{getId:()=>Rle(t),getToken:i=>Ole(t,i)}};function Ule(){Ts(new Ui(zU,jle,"PUBLIC")),Ts(new Ui(Vle,Ble,"PRIVATE"))}Ule();Hn(IU,FP);Hn(IU,FP,"esm2017");var vE="analytics",zle="firebase_id",$le="origin",qle=60*1e3,Hle="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",GP="https://www.googletagmanager.com/gtag/js";var fs=new Vh("@firebase/analytics");var Gle={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ks=new Fh("analytics","Analytics",Gle);function Wle(n){if(!n.startsWith(GP)){let e=Ks.create("invalid-gtag-resource",{gtagURL:n});return fs.warn(e.message),""}return n}function YU(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Kle(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Yle(n,e){let t=Kle("firebase-js-sdk-policy",{createScriptURL:Wle}),r=document.createElement("script"),i=`${GP}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Zle(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function Qle(n,e,t,r,i,o){return ee(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield YU(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){fs.error(a)}n("config",i,o)})}function Xle(n,e,t,r,i){return ee(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield YU(t);for(let c of s){let l=a.find(p=>p.measurementId===c),u=l&&e[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){fs.error(o)}})}function Jle(n,e,t,r){function i(o,...s){return ee(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield Xle(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield Qle(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,l]=s;n("get",a,c,l)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){fs.error(a)}})}return i}function eue(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=Jle(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function tue(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(GP)&&t.src.includes(n))return t;return null}var nue=30,rue=1e3,UP=class{constructor(e={},t=rue){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},ZU=new UP;function iue(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function oue(n){return ee(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:iue(r)},o=Hle.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Ks.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function sue(r){return ee(this,arguments,function*(n,e=ZU,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Ks.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Ks.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new zP;return setTimeout(()=>ee(null,null,function*(){c.abort()}),t!==void 0?t:qle),QU({appId:i,apiKey:o,measurementId:s},a,c,e)})}function QU(o,s,a){return ee(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=ZU){var c;let{appId:l,measurementId:u}=n;try{yield aue(r,e)}catch(p){if(u)return fs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:u};throw p}try{let p=yield oue(n);return i.deleteThrottleMetadata(l),p}catch(p){let v=p;if(!cue(v)){if(i.deleteThrottleMetadata(l),u)return fs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:l,measurementId:u};throw p}let g=Number((c=v?.customData)===null||c===void 0?void 0:c.httpStatus)===503?b_(t,i.intervalMillis,nue):b_(t,i.intervalMillis),E={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return i.setThrottleMetadata(l,E),fs.debug(`Calling attemptFetch again in ${g} millis`),QU(n,E,r,i)}})}function aue(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Ks.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function cue(n){if(!(n instanceof yu)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var zP=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var $P;function lue(n,e,t,r,i){return ee(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}var qP;function uue(n){qP=n}function due(n){$P=n}function fue(){return ee(this,null,function*(){if(Oh())try{yield jk()}catch(n){return fs.warn(Ks.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return fs.warn(Ks.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function hue(n,e,t,r,i,o,s){return ee(this,null,function*(){var a;let c=sue(n);c.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&fs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>fs.error(g)),e.push(c);let l=fue().then(g=>{if(g)return r.getId()}),[u,p]=yield Promise.all([c,l]);tue(o)||Yle(o,u.measurementId),qP&&(i("consent","default",qP),uue(void 0)),i("js",new Date);let v=(a=s?.config)!==null&&a!==void 0?a:{};return v[$le]="firebase",v.update=!0,p!=null&&(v[zle]=p),i("config",u.measurementId,v),$P&&(i("set",$P),due(void 0)),u.measurementId})}var HP=class{constructor(e){this.app=e}_delete(){return delete Yy[this.app.options.appId],Promise.resolve()}},Yy={},$U=[],qU={},BP="dataLayer",pue="gtag",HU,XU,GU=!1;function gue(){let n=[];if(Vk()&&n.push("This is a browser extension environment."),Bk()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ks.create("invalid-analytics-context",{errorInfo:e});fs.warn(t.message)}}function mue(n,e,t){gue();let r=n.options.appId;if(!r)throw Ks.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)fs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ks.create("no-api-key");if(Yy[r]!=null)throw Ks.create("already-exists",{id:r});if(!GU){Zle(BP);let{wrappedGtag:o,gtagCore:s}=eue(Yy,$U,qU,BP,pue);XU=o,HU=s,GU=!0}return Yy[r]=hue(n,$U,qU,e,HU,BP,t),new HP(n)}function JU(n=wc()){n=wn(n);let e=ka(n,vE);return e.isInitialized()?e.getImmediate():ez(n)}function ez(n,e={}){let t=ka(n,vE);if(t.isInitialized()){let i=t.getImmediate();if(Lh(e,t.getOptions()))return i;throw Ks.create("already-initialized")}return t.initialize({options:e})}function tz(n,e,t,r){n=wn(n),lue(XU,Yy[n.app.options.appId],e,t,r).catch(i=>fs.error(i))}var WU="@firebase/analytics",KU="0.10.17";function vue(){Ts(new Ui(vE,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return mue(r,i,t)},"PUBLIC")),Ts(new Ui("analytics-internal",n,"PRIVATE")),Hn(WU,KU),Hn(WU,KU,"esm2017");function n(e){try{let t=e.getProvider(vE).getImmediate();return{logEvent:(r,i,o)=>tz(t,r,i,o)}}catch(t){throw Ks.create("interop-component-reg-failed",{reason:t})}}}vue();var Zy=class{constructor(e){return e}},nz="analytics",WP=class{constructor(){return zc(nz)}};var rz=Er(JU,!0);var bPe=Math.floor(Math.random()*(2**32-1))-2**31;var KP=new We("angularfire2.analytics-instances");function yue(n,e,t){if(!XS(t))return null;let r=Rl(nz,n,e);return r&&new Zy(r)}function _ue(n){return(e,t,r)=>{if(!XS(r))return null;let i=e.runOutsideAngular(()=>n(t));return new Zy(i)}}var wue={provide:WP,deps:[[new kr,KP]]},bue={provide:Zy,useFactory:yue,deps:[[new kr,KP],js,Pi]};function iz(n,...e){return Hn("angularfire",Zr.full,"analytics"),oo([bue,wue,{provide:KP,useFactory:_ue(n),multi:!0,deps:[jt,Bn,Pi,Qr,Ka,...e]}])}var YP="Service workers are disabled or not supported by this browser",vm=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new kt(r=>r.error(new tt(5601,!1)));else{let r=null,i=new kn;this.worker=new kt(l=>(r!==null&&l.next(r),i.subscribe(u=>l.next(u))));let o=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Mn(()=>e.getRegistration().then(l=>{if(!l)throw new tt(5601,!1);return l})));let s=new kn;this.events=s.asObservable();let a=l=>{let{data:u}=l;u?.type&&s.next(u)};e.addEventListener("message",a),t?.get(ns,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(Po(1)).subscribe(i=>{i.postMessage(Oe({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Pr(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Po(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Pr(i=>i.nonce===e),Po(1),rt(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},sz=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new kn;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=El,this.notificationClicks=El,this.notificationCloses=El,this.pushSubscriptionChanges=El,this.subscription=El;return}this.messages=this.sw.eventsOfType("PUSH").pipe(rt(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(rt(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(rt(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(rt(i=>i.data)),this.pushManager=this.sw.registration.pipe(rt(i=>i.pushManager));let r=this.pushManager.pipe(Mn(i=>i.getSubscription()));this.subscription=new kt(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(YP));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Mn(c=>c.subscribe(r)),Po(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(YP));let t=r=>{if(r===null)throw new tt(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new tt(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(Po(1),Mn(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(Be(vm))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),az=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=El,this.unrecoverable=El;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(YP));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new tt(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(Be(vm))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})();var cz=new We("");function xue(){let n=Ae(Qy);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=Ae(cz),t=Ae(jt),r=Ae(ns);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=oz(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),oz(+a[0])]);break;default:throw new tt(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error(Cc(5604,!1)))})})}function oz(n){return new Promise(e=>setTimeout(e,n))}function Eue(n,e){return new vm(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var Qy=class{enabled;updateViaCache;type;scope;registrationStrategy};function Cue(n,e={}){return oo([sz,az,{provide:cz,useValue:n},{provide:Qy,useValue:e},{provide:vm,useFactory:Eue,deps:[Qy,Bn]},Ep(xue)])}var lz=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[Cue(t,r)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ar({type:n});static \u0275inj=er({providers:[sz,az]})}return n})();var uz=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ar({type:e,bootstrap:[RL]}),e.\u0275inj=er({providers:[_U,LL(()=>VL(gv.firebase)),ZL(()=>QL()),M7(()=>k7()),bU(()=>xU()),iz(()=>rz())],imports:[cA,Pl,Tp,A9,lx,Kx,x9.initializeApp(gv.firebase),E9,V9,yU,lz.register("ngsw-worker.js",{enabled:!Lu(),registrationStrategy:"registerWhenStable:30000"})]});let n=e;return n})();aA().bootstrapModule(uz).catch(n=>console.error(n));
