import{A as vp,B as XO,C as zs,D as $a,E as x1,F as C1,G as JO,H as Fc,I as E1,J as Gn,K as Pi,L as tI,a as $O,b as m1,c as GO,d as WO,e as KO,f as ZE,g as v1,h as XE,i as hp,j as _1,k as y1,l as w1,m as A0,n as YO,o as JE,p as eI,q as pp,r as QO,s as ZO,t as $u,u as gp,v as mp,w as b1,x as bn,y as eo,z as Oc}from"./chunk-WLKSXRLX.js";import{a as Oe,b as Rt,c as rr,e as EG,f as QE,g as te}from"./chunk-WTI2L5DI.js";var BH=rr((wFe,jH)=>{"use strict";jH.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var of=rr(Jh=>{"use strict";var VR,age=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Jh.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Jh.getSymbolTotalCodewords=function(e){return age[e]};Jh.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Jh.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');VR=e};Jh.isKanjiModeEnabled=function(){return typeof VR<"u"};Jh.toSJIS=function(e){return VR(e)}});var CE=rr(Oa=>{"use strict";Oa.L={bit:1};Oa.M={bit:0};Oa.Q={bit:3};Oa.H={bit:2};function cge(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return Oa.L;case"m":case"medium":return Oa.M;case"q":case"quartile":return Oa.Q;case"h":case"high":return Oa.H;default:throw new Error("Unknown EC Level: "+n)}}Oa.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};Oa.from=function(e,t){if(Oa.isValid(e))return e;try{return cge(e)}catch{return t}}});var qH=rr((CFe,zH)=>{"use strict";function UH(){this.buffer=[],this.length=0}UH.prototype={get:function(n){let e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};zH.exports=UH});var $H=rr((EFe,HH)=>{"use strict";function Hy(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}Hy.prototype.set=function(n,e,t,r){let i=n*this.size+e;this.data[i]=t,r&&(this.reservedBit[i]=!0)};Hy.prototype.get=function(n,e){return this.data[n*this.size+e]};Hy.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};Hy.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};HH.exports=Hy});var GH=rr(EE=>{"use strict";var lge=of().getSymbolSize;EE.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,r=lge(e),i=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let s=1;s<t-1;s++)o[s]=o[s-1]-i;return o.push(6),o.reverse()};EE.getPositions=function(e){let t=[],r=EE.getRowColCoords(e),i=r.length;for(let o=0;o<i;o++)for(let s=0;s<i;s++)o===0&&s===0||o===0&&s===i-1||o===i-1&&s===0||t.push([r[o],r[s]]);return t}});var YH=rr(KH=>{"use strict";var uge=of().getSymbolSize,WH=7;KH.getPositions=function(e){let t=uge(e);return[[0,0],[t-WH,0],[0,t-WH]]}});var QH=rr(vr=>{"use strict";vr.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var ep={N1:3,N2:3,N3:40,N4:10};vr.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};vr.from=function(e){return vr.isValid(e)?parseInt(e,10):void 0};vr.getPenaltyN1=function(e){let t=e.size,r=0,i=0,o=0,s=null,a=null;for(let c=0;c<t;c++){i=o=0,s=a=null;for(let l=0;l<t;l++){let u=e.get(c,l);u===s?i++:(i>=5&&(r+=ep.N1+(i-5)),s=u,i=1),u=e.get(l,c),u===a?o++:(o>=5&&(r+=ep.N1+(o-5)),a=u,o=1)}i>=5&&(r+=ep.N1+(i-5)),o>=5&&(r+=ep.N1+(o-5))}return r};vr.getPenaltyN2=function(e){let t=e.size,r=0;for(let i=0;i<t-1;i++)for(let o=0;o<t-1;o++){let s=e.get(i,o)+e.get(i,o+1)+e.get(i+1,o)+e.get(i+1,o+1);(s===4||s===0)&&r++}return r*ep.N2};vr.getPenaltyN3=function(e){let t=e.size,r=0,i=0,o=0;for(let s=0;s<t;s++){i=o=0;for(let a=0;a<t;a++)i=i<<1&2047|e.get(s,a),a>=10&&(i===1488||i===93)&&r++,o=o<<1&2047|e.get(a,s),a>=10&&(o===1488||o===93)&&r++}return r*ep.N3};vr.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let o=0;o<r;o++)t+=e.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*ep.N4};function dge(n,e,t){switch(n){case vr.Patterns.PATTERN000:return(e+t)%2===0;case vr.Patterns.PATTERN001:return e%2===0;case vr.Patterns.PATTERN010:return t%3===0;case vr.Patterns.PATTERN011:return(e+t)%3===0;case vr.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case vr.Patterns.PATTERN101:return e*t%2+e*t%3===0;case vr.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case vr.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}vr.applyMask=function(e,t){let r=t.size;for(let i=0;i<r;i++)for(let o=0;o<r;o++)t.isReserved(o,i)||t.xor(o,i,dge(e,o,i))};vr.getBestMask=function(e,t){let r=Object.keys(vr.Patterns).length,i=0,o=1/0;for(let s=0;s<r;s++){t(s),vr.applyMask(s,e);let a=vr.getPenaltyN1(e)+vr.getPenaltyN2(e)+vr.getPenaltyN3(e)+vr.getPenaltyN4(e);vr.applyMask(s,e),a<o&&(o=a,i=s)}return i}});var BR=rr(jR=>{"use strict";var sf=CE(),IE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],SE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];jR.getBlocksCount=function(e,t){switch(t){case sf.L:return IE[(e-1)*4+0];case sf.M:return IE[(e-1)*4+1];case sf.Q:return IE[(e-1)*4+2];case sf.H:return IE[(e-1)*4+3];default:return}};jR.getTotalCodewordsCount=function(e,t){switch(t){case sf.L:return SE[(e-1)*4+0];case sf.M:return SE[(e-1)*4+1];case sf.Q:return SE[(e-1)*4+2];case sf.H:return SE[(e-1)*4+3];default:return}}});var ZH=rr(DE=>{"use strict";var $y=new Uint8Array(512),AE=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)$y[t]=e,AE[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)$y[t]=$y[t-255]})();DE.log=function(e){if(e<1)throw new Error("log("+e+")");return AE[e]};DE.exp=function(e){return $y[e]};DE.mul=function(e,t){return e===0||t===0?0:$y[AE[e]+AE[t]]}});var XH=rr(Gy=>{"use strict";var UR=ZH();Gy.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++)r[i+o]^=UR.mul(e[i],t[o]);return r};Gy.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let i=r[0];for(let s=0;s<t.length;s++)r[s]^=UR.mul(t[s],i);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};Gy.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=Gy.mul(t,new Uint8Array([1,UR.exp(r)]));return t}});var t$=rr((NFe,e$)=>{"use strict";var JH=XH();function zR(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}zR.prototype.initialize=function(e){this.degree=e,this.genPoly=JH.generateECPolynomial(this.degree)};zR.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=JH.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){let o=new Uint8Array(this.degree);return o.set(r,i),o}return r};e$.exports=zR});var qR=rr(n$=>{"use strict";n$.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var HR=rr(Cu=>{"use strict";var r$="[0-9]+",fge="[A-Z $%*+\\-./:]+",Wy="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Wy=Wy.replace(/u/g,"\\u");var hge="(?:(?![A-Z0-9 $%*+\\-./:]|"+Wy+`)(?:.|[\r
]))+`;Cu.KANJI=new RegExp(Wy,"g");Cu.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Cu.BYTE=new RegExp(hge,"g");Cu.NUMERIC=new RegExp(r$,"g");Cu.ALPHANUMERIC=new RegExp(fge,"g");var pge=new RegExp("^"+Wy+"$"),gge=new RegExp("^"+r$+"$"),mge=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Cu.testKanji=function(e){return pge.test(e)};Cu.testNumeric=function(e){return gge.test(e)};Cu.testAlphanumeric=function(e){return mge.test(e)}});var af=rr(Ii=>{"use strict";var vge=qR(),$R=HR();Ii.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};Ii.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};Ii.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};Ii.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};Ii.MIXED={bit:-1};Ii.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!vge.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};Ii.getBestModeForData=function(e){return $R.testNumeric(e)?Ii.NUMERIC:$R.testAlphanumeric(e)?Ii.ALPHANUMERIC:$R.testKanji(e)?Ii.KANJI:Ii.BYTE};Ii.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};Ii.isValid=function(e){return e&&e.bit&&e.ccBits};function _ge(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return Ii.NUMERIC;case"alphanumeric":return Ii.ALPHANUMERIC;case"kanji":return Ii.KANJI;case"byte":return Ii.BYTE;default:throw new Error("Unknown mode: "+n)}}Ii.from=function(e,t){if(Ii.isValid(e))return e;try{return _ge(e)}catch{return t}}});var c$=rr(tp=>{"use strict";var TE=of(),yge=BR(),i$=CE(),cf=af(),GR=qR(),s$=7973,o$=TE.getBCHDigit(s$);function wge(n,e,t){for(let r=1;r<=40;r++)if(e<=tp.getCapacity(r,t,n))return r}function a$(n,e){return cf.getCharCountIndicator(n,e)+4}function bge(n,e){let t=0;return n.forEach(function(r){let i=a$(r.mode,e);t+=i+r.getBitsLength()}),t}function xge(n,e){for(let t=1;t<=40;t++)if(bge(n,t)<=tp.getCapacity(t,e,cf.MIXED))return t}tp.from=function(e,t){return GR.isValid(e)?parseInt(e,10):t};tp.getCapacity=function(e,t,r){if(!GR.isValid(e))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=cf.BYTE);let i=TE.getSymbolTotalCodewords(e),o=yge.getTotalCodewordsCount(e,t),s=(i-o)*8;if(r===cf.MIXED)return s;let a=s-a$(r,e);switch(r){case cf.NUMERIC:return Math.floor(a/10*3);case cf.ALPHANUMERIC:return Math.floor(a/11*2);case cf.KANJI:return Math.floor(a/13);case cf.BYTE:default:return Math.floor(a/8)}};tp.getBestVersionForData=function(e,t){let r,i=i$.from(t,i$.M);if(Array.isArray(e)){if(e.length>1)return xge(e,i);if(e.length===0)return 1;r=e[0]}else r=e;return wge(r.mode,r.getLength(),i)};tp.getEncodedBits=function(e){if(!GR.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;TE.getBCHDigit(t)-o$>=0;)t^=s$<<TE.getBCHDigit(t)-o$;return e<<12|t}});var f$=rr(d$=>{"use strict";var WR=of(),u$=1335,Cge=21522,l$=WR.getBCHDigit(u$);d$.getEncodedBits=function(e,t){let r=e.bit<<3|t,i=r<<10;for(;WR.getBCHDigit(i)-l$>=0;)i^=u$<<WR.getBCHDigit(i)-l$;return(r<<10|i)^Cge}});var p$=rr((LFe,h$)=>{"use strict";var Ege=af();function n0(n){this.mode=Ege.NUMERIC,this.data=n.toString()}n0.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};n0.prototype.getLength=function(){return this.data.length};n0.prototype.getBitsLength=function(){return n0.getBitsLength(this.data.length)};n0.prototype.write=function(e){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),e.put(i,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),i=parseInt(r,10),e.put(i,o*3+1))};h$.exports=n0});var m$=rr((VFe,g$)=>{"use strict";var Ige=af(),KR=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r0(n){this.mode=Ige.ALPHANUMERIC,this.data=n}r0.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};r0.prototype.getLength=function(){return this.data.length};r0.prototype.getBitsLength=function(){return r0.getBitsLength(this.data.length)};r0.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=KR.indexOf(this.data[t])*45;r+=KR.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(KR.indexOf(this.data[t]),6)};g$.exports=r0});var _$=rr((jFe,v$)=>{"use strict";var Sge=af();function i0(n){this.mode=Sge.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}i0.getBitsLength=function(e){return e*8};i0.prototype.getLength=function(){return this.data.length};i0.prototype.getBitsLength=function(){return i0.getBitsLength(this.data.length)};i0.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};v$.exports=i0});var w$=rr((BFe,y$)=>{"use strict";var Age=af(),Dge=of();function o0(n){this.mode=Age.KANJI,this.data=n}o0.getBitsLength=function(e){return e*13};o0.prototype.getLength=function(){return this.data.length};o0.prototype.getBitsLength=function(){return o0.getBitsLength(this.data.length)};o0.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=Dge.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};y$.exports=o0});var b$=rr((UFe,YR)=>{"use strict";var Ky={single_source_shortest_paths:function(n,e,t){var r={},i={};i[e]=0;var o=Ky.PriorityQueue.make();o.push(e,0);for(var s,a,c,l,u,h,m,g,x;!o.empty();){s=o.pop(),a=s.value,l=s.cost,u=n[a]||{};for(c in u)u.hasOwnProperty(c)&&(h=u[c],m=l+h,g=i[c],x=typeof i[c]>"u",(x||g>m)&&(i[c]=m,o.push(c,m),r[c]=a))}if(typeof t<"u"&&typeof i[t]>"u"){var I=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(I)}return r},extract_shortest_path_from_predecessor_list:function(n,e){for(var t=[],r=e,i;r;)t.push(r),i=n[r],r=n[r];return t.reverse(),t},find_path:function(n,e,t){var r=Ky.single_source_shortest_paths(n,e,t);return Ky.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(n){var e=Ky.PriorityQueue,t={},r;n=n||{};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.queue=[],t.sorter=n.sorter||e.default_sorter,t},default_sorter:function(n,e){return n.cost-e.cost},push:function(n,e){var t={value:n,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof YR<"u"&&(YR.exports=Ky)});var T$=rr(s0=>{"use strict";var zn=af(),E$=p$(),I$=m$(),S$=_$(),A$=w$(),Yy=HR(),ME=of(),Tge=b$();function x$(n){return unescape(encodeURIComponent(n)).length}function Qy(n,e,t){let r=[],i;for(;(i=n.exec(t))!==null;)r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function D$(n){let e=Qy(Yy.NUMERIC,zn.NUMERIC,n),t=Qy(Yy.ALPHANUMERIC,zn.ALPHANUMERIC,n),r,i;return ME.isKanjiModeEnabled()?(r=Qy(Yy.BYTE,zn.BYTE,n),i=Qy(Yy.KANJI,zn.KANJI,n)):(r=Qy(Yy.BYTE_KANJI,zn.BYTE,n),i=[]),e.concat(t,r,i).sort(function(s,a){return s.index-a.index}).map(function(s){return{data:s.data,mode:s.mode,length:s.length}})}function QR(n,e){switch(e){case zn.NUMERIC:return E$.getBitsLength(n);case zn.ALPHANUMERIC:return I$.getBitsLength(n);case zn.KANJI:return A$.getBitsLength(n);case zn.BYTE:return S$.getBitsLength(n)}}function Mge(n){return n.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function Nge(n){let e=[];for(let t=0;t<n.length;t++){let r=n[t];switch(r.mode){case zn.NUMERIC:e.push([r,{data:r.data,mode:zn.ALPHANUMERIC,length:r.length},{data:r.data,mode:zn.BYTE,length:r.length}]);break;case zn.ALPHANUMERIC:e.push([r,{data:r.data,mode:zn.BYTE,length:r.length}]);break;case zn.KANJI:e.push([r,{data:r.data,mode:zn.BYTE,length:x$(r.data)}]);break;case zn.BYTE:e.push([{data:r.data,mode:zn.BYTE,length:x$(r.data)}])}}return e}function Pge(n,e){let t={},r={start:{}},i=["start"];for(let o=0;o<n.length;o++){let s=n[o],a=[];for(let c=0;c<s.length;c++){let l=s[c],u=""+o+c;a.push(u),t[u]={node:l,lastCount:0},r[u]={};for(let h=0;h<i.length;h++){let m=i[h];t[m]&&t[m].node.mode===l.mode?(r[m][u]=QR(t[m].lastCount+l.length,l.mode)-QR(t[m].lastCount,l.mode),t[m].lastCount+=l.length):(t[m]&&(t[m].lastCount=l.length),r[m][u]=QR(l.length,l.mode)+4+zn.getCharCountIndicator(l.mode,e))}}i=a}for(let o=0;o<i.length;o++)r[i[o]].end=0;return{map:r,table:t}}function C$(n,e){let t,r=zn.getBestModeForData(n);if(t=zn.from(e,r),t!==zn.BYTE&&t.bit<r.bit)throw new Error('"'+n+'" cannot be encoded with mode '+zn.toString(t)+`.
 Suggested mode is: `+zn.toString(r));switch(t===zn.KANJI&&!ME.isKanjiModeEnabled()&&(t=zn.BYTE),t){case zn.NUMERIC:return new E$(n);case zn.ALPHANUMERIC:return new I$(n);case zn.KANJI:return new A$(n);case zn.BYTE:return new S$(n)}}s0.fromArray=function(e){return e.reduce(function(t,r){return typeof r=="string"?t.push(C$(r,null)):r.data&&t.push(C$(r.data,r.mode)),t},[])};s0.fromString=function(e,t){let r=D$(e,ME.isKanjiModeEnabled()),i=Nge(r),o=Pge(i,t),s=Tge.find_path(o.map,"start","end"),a=[];for(let c=1;c<s.length-1;c++)a.push(o.table[s[c]].node);return s0.fromArray(Mge(a))};s0.rawSplit=function(e){return s0.fromArray(D$(e,ME.isKanjiModeEnabled()))}});var N$=rr(M$=>{"use strict";var PE=of(),ZR=CE(),kge=qH(),Rge=$H(),Oge=GH(),Fge=YH(),eO=QH(),tO=BR(),Lge=t$(),NE=c$(),Vge=f$(),jge=af(),XR=T$();function Bge(n,e){let t=n.size,r=Fge.getPositions(e);for(let i=0;i<r.length;i++){let o=r[i][0],s=r[i][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||t<=o+a))for(let c=-1;c<=7;c++)s+c<=-1||t<=s+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?n.set(o+a,s+c,!0,!0):n.set(o+a,s+c,!1,!0))}}function Uge(n){let e=n.size;for(let t=8;t<e-8;t++){let r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function zge(n,e){let t=Oge.getPositions(e);for(let r=0;r<t.length;r++){let i=t[r][0],o=t[r][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?n.set(i+s,o+a,!0,!0):n.set(i+s,o+a,!1,!0)}}function qge(n,e){let t=n.size,r=NE.getEncodedBits(e),i,o,s;for(let a=0;a<18;a++)i=Math.floor(a/3),o=a%3+t-8-3,s=(r>>a&1)===1,n.set(i,o,s,!0),n.set(o,i,s,!0)}function JR(n,e,t){let r=n.size,i=Vge.getEncodedBits(e,t),o,s;for(o=0;o<15;o++)s=(i>>o&1)===1,o<6?n.set(o,8,s,!0):o<8?n.set(o+1,8,s,!0):n.set(r-15+o,8,s,!0),o<8?n.set(8,r-o-1,s,!0):o<9?n.set(8,15-o-1+1,s,!0):n.set(8,15-o-1,s,!0);n.set(r-8,8,1,!0)}function Hge(n,e){let t=n.size,r=-1,i=t-1,o=7,s=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!n.isReserved(i,a-c)){let l=!1;s<e.length&&(l=(e[s]>>>o&1)===1),n.set(i,a-c,l),o--,o===-1&&(s++,o=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function $ge(n,e,t){let r=new kge;t.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),jge.getCharCountIndicator(c.mode,n)),c.write(r)});let i=PE.getSymbolTotalCodewords(n),o=tO.getTotalCodewordsCount(n,e),s=(i-o)*8;for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let a=(s-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return Gge(r,n,e)}function Gge(n,e,t){let r=PE.getSymbolTotalCodewords(e),i=tO.getTotalCodewordsCount(e,t),o=r-i,s=tO.getBlocksCount(e,t),a=r%s,c=s-a,l=Math.floor(r/s),u=Math.floor(o/s),h=u+1,m=l-u,g=new Lge(m),x=0,I=new Array(s),M=new Array(s),P=0,Y=new Uint8Array(n.buffer);for(let q=0;q<s;q++){let N=q<c?u:h;I[q]=Y.slice(x,x+N),M[q]=g.encode(I[q]),x+=N,P=Math.max(P,N)}let B=new Uint8Array(r),K=0,oe,he;for(oe=0;oe<P;oe++)for(he=0;he<s;he++)oe<I[he].length&&(B[K++]=I[he][oe]);for(oe=0;oe<m;oe++)for(he=0;he<s;he++)B[K++]=M[he][oe];return B}function Wge(n,e,t,r){let i;if(Array.isArray(n))i=XR.fromArray(n);else if(typeof n=="string"){let l=e;if(!l){let u=XR.rawSplit(n);l=NE.getBestVersionForData(u,t)}i=XR.fromString(n,l||40)}else throw new Error("Invalid data");let o=NE.getBestVersionForData(i,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let s=$ge(e,t,i),a=PE.getSymbolSize(e),c=new Rge(a);return Bge(c,e),Uge(c),zge(c,e),JR(c,t,0),e>=7&&qge(c,e),Hge(c,s),isNaN(r)&&(r=eO.getBestMask(c,JR.bind(null,c,t))),eO.applyMask(r,c),JR(c,t,r),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:r,segments:i}}M$.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=ZR.M,i,o;return typeof t<"u"&&(r=ZR.from(t.errorCorrectionLevel,ZR.M),i=NE.from(t.version),o=eO.from(t.maskPattern),t.toSJISFunc&&PE.setToSJISFunction(t.toSJISFunc)),Wge(e,i,r,o)}});var nO=rr(np=>{"use strict";function P$(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let e=n.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+n);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}np.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:P$(e.color.dark||"#000000ff"),light:P$(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};np.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};np.getImageWidth=function(e,t){let r=np.getScale(e,t);return Math.floor((e+t.margin*2)*r)};np.qrToImageData=function(e,t,r){let i=t.modules.size,o=t.modules.data,s=np.getScale(i,r),a=Math.floor((i+r.margin*2)*s),c=r.margin*s,l=[r.color.light,r.color.dark];for(let u=0;u<a;u++)for(let h=0;h<a;h++){let m=(u*a+h)*4,g=r.color.light;if(u>=c&&h>=c&&u<a-c&&h<a-c){let x=Math.floor((u-c)/s),I=Math.floor((h-c)/s);g=l[o[x*i+I]?1:0]}e[m++]=g.r,e[m++]=g.g,e[m++]=g.b,e[m]=g.a}}});var k$=rr(kE=>{"use strict";var rO=nO();function Kge(n,e,t){n.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function Yge(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}kE.render=function(e,t,r){let i=r,o=t;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),t||(o=Yge()),i=rO.getOptions(i);let s=rO.getImageWidth(e.modules.size,i),a=o.getContext("2d"),c=a.createImageData(s,s);return rO.qrToImageData(c.data,e,i),Kge(a,o,s),a.putImageData(c,0,0),o};kE.renderToDataURL=function(e,t,r){let i=r;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),i||(i={});let o=kE.render(e,t,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}});var F$=rr(O$=>{"use strict";var Qge=nO();function R$(n,e){let t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function iO(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function Zge(n,e,t){let r="",i=0,o=!1,s=0;for(let a=0;a<n.length;a++){let c=Math.floor(a%e),l=Math.floor(a/e);!c&&!o&&(o=!0),n[a]?(s++,a>0&&c>0&&n[a-1]||(r+=o?iO("M",c+t,.5+l+t):iO("m",i,0),i=0,o=!1),c+1<e&&n[a+1]||(r+=iO("h",s),s=0)):i++}return r}O$.render=function(e,t,r){let i=Qge.getOptions(t),o=e.modules.size,s=e.modules.data,a=o+i.margin*2,c=i.color.light.a?"<path "+R$(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+R$(i.color.dark,"stroke")+' d="'+Zge(s,o,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,m),m}});var V$=rr(Zy=>{"use strict";var Xge=BH(),oO=N$(),L$=k$(),Jge=F$();function sO(n,e,t,r,i){let o=[].slice.call(arguments,1),s=o.length,a=typeof o[s-1]=="function";if(!a&&!Xge())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(i=t,t=e,e=r=void 0):s===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=e,e=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(t=e,e=r=void 0):s===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(c,l){try{let u=oO.create(t,r);c(n(u,e,r))}catch(u){l(u)}})}try{let c=oO.create(t,r);i(null,n(c,e,r))}catch(c){i(c)}}Zy.create=oO.create;Zy.toCanvas=sO.bind(null,L$.render);Zy.toDataURL=sO.bind(null,L$.renderToDataURL);Zy.toString=sO.bind(null,function(n,e,t){return Jge.render(n,t)})});var nI;function I1(){return nI}function Lc(n){let e=nI;return nI=n,e}var e3=Symbol("NotFound");function _p(n){return n===e3||n?.name==="\u0275NotFound"}var _o=null,S1=!1,rI=1,IG=null,yo=Symbol("SIGNAL");function gn(n){let e=_o;return _o=n,e}function M1(){return _o}var yp={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function wp(n){if(S1)throw new Error("");if(_o===null)return;_o.consumerOnSignalRead(n);let e=_o.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=_o.recomputing;if(r&&(t=e!==void 0?e.nextProducer:_o.producers,t!==void 0&&t.producer===n)){_o.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===_o&&(!r||AG(i,_o)))return;let o=xp(_o),s={producer:n,consumer:_o,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};_o.producersTail=s,e!==void 0?e.nextProducer=s:_o.producers=s,o&&i3(n,s)}function t3(){rI++}function N1(n){if(!(xp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===rI)){if(!n.producerMustRecompute(n)&&!M0(n)){T1(n);return}n.producerRecomputeValue(n),T1(n)}}function iI(n){if(n.consumers===void 0)return;let e=S1;S1=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||SG(r)}}finally{S1=e}}function oI(){return _o?.consumerAllowSignalWrites!==!1}function SG(n){n.dirty=!0,iI(n),n.consumerMarkedDirty?.(n)}function T1(n){n.dirty=!1,n.lastCleanEpoch=rI}function bp(n){return n&&n3(n),gn(n)}function n3(n){n.producersTail=void 0,n.recomputing=!0}function T0(n,e){gn(e),n&&r3(n)}function r3(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(xp(n))do t=sI(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function M0(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(N1(t),r!==t.version))return!0}return!1}function N0(n){if(xp(n)){let e=n.producers;for(;e!==void 0;)e=sI(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function i3(n,e){let t=n.consumersTail,r=xp(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)i3(i.producer,i)}function sI(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!xp(e)){let o=e.producers;for(;o!==void 0;)o=sI(o)}return t}function xp(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function P1(n){IG?.(n)}function AG(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function k1(n,e){return Object.is(n,e)}function R1(n,e){let t=Object.create(DG);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(N1(t),wp(t),t.value===D0)throw t.error;return t.value};return r[yo]=t,P1(t),r}var A1=Symbol("UNSET"),D1=Symbol("COMPUTING"),D0=Symbol("ERRORED"),DG=Rt(Oe({},yp),{value:A1,dirty:!0,error:null,equal:k1,kind:"computed",producerMustRecompute(n){return n.value===A1||n.value===D1},producerRecomputeValue(n){if(n.value===D1)throw new Error("");let e=n.value;n.value=D1;let t=bp(n),r,i=!1;try{r=n.computation(),gn(null),i=e!==A1&&e!==D0&&r!==D0&&n.equal(e,r)}catch(o){r=D0,n.error=o}finally{T0(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function TG(){throw new Error}var o3=TG;function s3(n){o3(n)}function aI(n){o3=n}var MG=null;function cI(n,e){let t=Object.create(O1);t.value=n,e!==void 0&&(t.equal=e);let r=()=>a3(t);return r[yo]=t,P1(t),[r,s=>Cp(t,s),s=>lI(t,s)]}function a3(n){return wp(n),n.value}function Cp(n,e){oI()||s3(n),n.equal(n.value,e)||(n.value=e,NG(n))}function lI(n,e){oI()||s3(n),Cp(n,e(n.value))}var O1=Rt(Oe({},yp),{equal:k1,value:void 0,kind:"signal"});function NG(n){n.version++,t3(),iI(n),MG?.(n)}function Jt(n){return typeof n=="function"}function Ep(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var F1=Ep(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Cf(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Gr=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Jt(r))try{r()}catch(o){e=o instanceof F1?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{c3(o)}catch(s){e=e??[],s instanceof F1?e=[...e,...s.errors]:e.push(s)}}if(e)throw new F1(e)}}add(e){var t;if(e&&e!==this)if(this.closed)c3(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Cf(t,e)}remove(e){let{_finalizers:t}=this;t&&Cf(t,e),e instanceof n&&e._removeParent(this)}};Gr.EMPTY=(()=>{let n=new Gr;return n.closed=!0,n})();var uI=Gr.EMPTY;function L1(n){return n instanceof Gr||n&&"closed"in n&&Jt(n.remove)&&Jt(n.add)&&Jt(n.unsubscribe)}function c3(n){Jt(n)?n():n.unsubscribe()}var Ga={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ip={setTimeout(n,e,...t){let{delegate:r}=Ip;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ip;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function V1(n){Ip.setTimeout(()=>{let{onUnhandledError:e}=Ga;if(e)e(n);else throw n})}function Ef(){}var l3=dI("C",void 0,void 0);function u3(n){return dI("E",void 0,n)}function d3(n){return dI("N",n,void 0)}function dI(n,e,t){return{kind:n,value:e,error:t}}var If=null;function Sp(n){if(Ga.useDeprecatedSynchronousErrorHandling){let e=!If;if(e&&(If={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=If;if(If=null,t)throw r}}else n()}function f3(n){Ga.useDeprecatedSynchronousErrorHandling&&If&&(If.errorThrown=!0,If.error=n)}var Sf=class extends Gr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,L1(e)&&e.add(this)):this.destination=RG}static create(e,t,r){return new Wa(e,t,r)}next(e){this.isStopped?hI(d3(e),this):this._next(e)}error(e){this.isStopped?hI(u3(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hI(l3,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},PG=Function.prototype.bind;function fI(n,e){return PG.call(n,e)}var pI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){j1(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){j1(r)}else j1(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){j1(t)}}},Wa=class extends Sf{constructor(e,t,r){super();let i;if(Jt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ga.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fI(e.next,o),error:e.error&&fI(e.error,o),complete:e.complete&&fI(e.complete,o)}):i=e}this.destination=new pI(i)}};function j1(n){Ga.useDeprecatedSynchronousErrorHandling?f3(n):V1(n)}function kG(n){throw n}function hI(n,e){let{onStoppedNotification:t}=Ga;t&&Ip.setTimeout(()=>t(n,e))}var RG={closed:!0,next:Ef,error:kG,complete:Ef};var Ap=typeof Symbol=="function"&&Symbol.observable||"@@observable";function zo(n){return n}function B1(...n){return gI(n)}function gI(n){return n.length===0?zo:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ot=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=FG(t)?t:new Wa(t,r,i);return Sp(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=h3(r),new r((i,o)=>{let s=new Wa({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ap](){return this}pipe(...t){return gI(t)(this)}toPromise(t){return t=h3(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function h3(n){var e;return(e=n??Ga.Promise)!==null&&e!==void 0?e:Promise}function OG(n){return n&&Jt(n.next)&&Jt(n.error)&&Jt(n.complete)}function FG(n){return n&&n instanceof Sf||OG(n)&&L1(n)}function mI(n){return Jt(n?.lift)}function ln(n){return e=>{if(mI(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function un(n,e,t,r,i){return new vI(n,e,t,r,i)}var vI=class extends Sf{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Dp(){return ln((n,e)=>{let t=null;n._refCount++;let r=un(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Tp=class extends Ot{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,mI(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Gr;let t=this.getSubject();e.add(this.source.subscribe(un(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Gr.EMPTY)}return e}refCount(){return Dp()(this)}};var p3=Ep(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var kn=(()=>{class n extends Ot{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new U1(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new p3}next(t){Sp(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Sp(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Sp(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?uI:(this.currentObservers=null,o.push(t),new Gr(()=>{this.currentObservers=null,Cf(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ot;return t.source=this,t}}return n.create=(e,t)=>new U1(e,t),n})(),U1=class extends kn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:uI}};var to=class extends kn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var P0={now(){return(P0.delegate||Date).now()},delegate:void 0};var k0=class extends kn{constructor(e=1/0,t=1/0,r=P0){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var z1=class extends Gr{constructor(e,t){super()}schedule(e,t=0){return this}};var R0={setInterval(n,e,...t){let{delegate:r}=R0;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=R0;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Mp=class extends z1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return R0.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&R0.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Cf(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Np=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Np.now=P0.now;var Pp=class extends Np{constructor(e,t=Np.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Af=new Pp(Mp);var q1=class extends Mp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var H1=class extends Pp{};var _I=new H1(q1);var wo=new Ot(n=>n.complete());function g3(n){return n&&Jt(n.schedule)}function yI(n){return n[n.length-1]}function $1(n){return Jt(yI(n))?n.pop():void 0}function Vc(n){return g3(yI(n))?n.pop():void 0}function m3(n,e){return typeof yI(n)=="number"?n.pop():e}var G1=n=>n&&typeof n.length=="number"&&typeof n!="function";function W1(n){return Jt(n?.then)}function K1(n){return Jt(n[Ap])}function Y1(n){return Symbol.asyncIterator&&Jt(n?.[Symbol.asyncIterator])}function Q1(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function LG(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Z1=LG();function X1(n){return Jt(n?.[Z1])}function J1(n){return GO(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield m1(t.read());if(i)return yield m1(void 0);yield yield m1(r)}}finally{t.releaseLock()}})}function ew(n){return Jt(n?.getReader)}function br(n){if(n instanceof Ot)return n;if(n!=null){if(K1(n))return VG(n);if(G1(n))return jG(n);if(W1(n))return BG(n);if(Y1(n))return v3(n);if(X1(n))return UG(n);if(ew(n))return zG(n)}throw Q1(n)}function VG(n){return new Ot(e=>{let t=n[Ap]();if(Jt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jG(n){return new Ot(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function BG(n){return new Ot(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,V1)})}function UG(n){return new Ot(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function v3(n){return new Ot(e=>{qG(n,e).catch(t=>e.error(t))})}function zG(n){return v3(J1(n))}function qG(n,e){var t,r,i,o;return $O(this,void 0,void 0,function*(){try{for(t=WO(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function hs(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function bo(n,e=0){return ln((t,r)=>{t.subscribe(un(r,i=>hs(r,n,()=>r.next(i),e),()=>hs(r,n,()=>r.complete(),e),i=>hs(r,n,()=>r.error(i),e)))})}function ma(n,e=0){return ln((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function _3(n,e){return br(n).pipe(ma(e),bo(e))}function y3(n,e){return br(n).pipe(ma(e),bo(e))}function w3(n,e){return new Ot(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function b3(n,e){return new Ot(t=>{let r;return hs(t,e,()=>{r=n[Z1](),hs(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Jt(r?.return)&&r.return()})}function tw(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ot(t=>{hs(t,e,()=>{let r=n[Symbol.asyncIterator]();hs(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function x3(n,e){return tw(J1(n),e)}function C3(n,e){if(n!=null){if(K1(n))return _3(n,e);if(G1(n))return w3(n,e);if(W1(n))return y3(n,e);if(Y1(n))return tw(n,e);if(X1(n))return b3(n,e);if(ew(n))return x3(n,e)}throw Q1(n)}function mn(n,e){return e?C3(n,e):br(n)}function mt(...n){let e=Vc(n);return mn(n,e)}function kp(n,e){let t=Jt(n)?n:()=>n,r=i=>i.error(t());return new Ot(e?i=>e.schedule(r,0,i):r)}function wI(n){return!!n&&(n instanceof Ot||Jt(n.lift)&&Jt(n.subscribe))}var Ka=Ep(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function bI(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Wa({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Ka)}});n.subscribe(o)})}function ut(n,e){return ln((t,r)=>{let i=0;t.subscribe(un(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:HG}=Array;function $G(n,e){return HG(e)?n(...e):n(e)}function nw(n){return ut(e=>$G(n,e))}var{isArray:GG}=Array,{getPrototypeOf:WG,prototype:KG,keys:YG}=Object;function rw(n){if(n.length===1){let e=n[0];if(GG(e))return{args:e,keys:null};if(QG(e)){let t=YG(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function QG(n){return n&&typeof n=="object"&&WG(n)===KG}function iw(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function O0(...n){let e=Vc(n),t=$1(n),{args:r,keys:i}=rw(n);if(r.length===0)return mn([],e);let o=new Ot(ZG(r,e,i?s=>iw(i,s):zo));return t?o.pipe(nw(t)):o}function ZG(n,e,t=zo){return r=>{E3(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)E3(e,()=>{let l=mn(n[c],e),u=!1;l.subscribe(un(r,h=>{o[c]=h,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function E3(n,e,t){n?hs(t,n,e):e()}function I3(n,e,t,r,i,o,s,a){let c=[],l=0,u=0,h=!1,m=()=>{h&&!c.length&&!l&&e.complete()},g=I=>l<r?x(I):c.push(I),x=I=>{o&&e.next(I),l++;let M=!1;br(t(I,u++)).subscribe(un(e,P=>{i?.(P),o?g(P):e.next(P)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let P=c.shift();s?hs(e,s,()=>x(P)):x(P)}m()}catch(P){e.error(P)}}))};return n.subscribe(un(e,g,()=>{h=!0,m()})),()=>{a?.()}}function ti(n,e,t=1/0){return Jt(e)?ti((r,i)=>ut((o,s)=>e(r,o,i,s))(br(n(r,i))),t):(typeof e=="number"&&(t=e),ln((r,i)=>I3(r,i,n,t)))}function jc(n=1/0){return ti(zo,n)}function S3(){return jc(1)}function Rp(...n){return S3()(mn(n,Vc(n)))}function F0(n){return new Ot(e=>{br(n()).subscribe(e)})}function xI(...n){let e=$1(n),{args:t,keys:r}=rw(n),i=new Ot(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let h=!1;br(t[u]).subscribe(un(o,m=>{h||(h=!0,l--),a[u]=m},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(r?iw(r,a):a),o.complete())}))}});return e?i.pipe(nw(e)):i}function CI(...n){let e=Vc(n),t=m3(n,1/0),r=n;return r.length?r.length===1?br(r[0]):jc(t)(mn(r,e)):wo}var Ul=new Ot(Ef);function xr(n,e){return ln((t,r)=>{let i=0;t.subscribe(un(r,o=>n.call(e,o,i++)&&r.next(o)))})}function zl(n){return ln((e,t)=>{let r=null,i=!1,o;r=e.subscribe(un(t,void 0,void 0,s=>{o=br(n(s,zl(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function A3(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(un(s,u=>{let h=l++;c=a?n(c,u,h):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Gu(n,e){return Jt(e)?ti(n,e,1):ti(n,1)}function EI(n,e=Af){return ln((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+n,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}t.subscribe(un(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Wu(n){return ln((e,t)=>{let r=!1;e.subscribe(un(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function no(n){return n<=0?()=>wo:ln((e,t)=>{let r=0;e.subscribe(un(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ow(n,e=zo){return n=n??XG,ln((t,r)=>{let i,o=!0;t.subscribe(un(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function XG(n,e){return n===e}function sw(n=JG){return ln((e,t)=>{let r=!1;e.subscribe(un(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function JG(){return new Ka}function L0(n){return ln((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ya(n,e){let t=arguments.length>=2;return r=>r.pipe(n?xr((i,o)=>n(i,o,r)):zo,no(1),t?Wu(e):sw(()=>new Ka))}function Op(n){return n<=0?()=>wo:ln((e,t)=>{let r=[];e.subscribe(un(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function II(n,e){let t=arguments.length>=2;return r=>r.pipe(n?xr((i,o)=>n(i,o,r)):zo,Op(1),t?Wu(e):sw(()=>new Ka))}function Fp(){return ln((n,e)=>{let t,r=!1;n.subscribe(un(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Ku(n,e){return ln(A3(n,e,arguments.length>=2,!0))}function D3(n={}){let{connector:e=()=>new kn,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,u=!1,h=!1,m=()=>{a?.unsubscribe(),a=void 0},g=()=>{m(),s=c=void 0,u=h=!1},x=()=>{let I=s;g(),I?.unsubscribe()};return ln((I,M)=>{l++,!h&&!u&&m();let P=c=c??e();M.add(()=>{l--,l===0&&!h&&!u&&(a=SI(x,i))}),P.subscribe(M),!s&&l>0&&(s=new Wa({next:Y=>P.next(Y),error:Y=>{h=!0,m(),a=SI(g,t,Y),P.error(Y)},complete:()=>{u=!0,m(),a=SI(g,r),P.complete()}}),br(I).subscribe(s))})(o)}}function SI(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Wa({next:()=>{r.unsubscribe(),n()}});return br(e(...t)).subscribe(r)}function aw(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,D3({connector:()=>new k0(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Yu(...n){let e=Vc(n);return ln((t,r)=>{(e?Rp(n,t,e):Rp(n,t)).subscribe(r)})}function Nn(n,e){return ln((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(un(r,c=>{i?.unsubscribe();let l=0,u=o++;br(n(c,u)).subscribe(i=un(r,h=>r.next(e?e(c,h,u,l++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function cw(n,e){return Jt(e)?Nn(()=>n,e):Nn(()=>n)}function lw(n){return ln((e,t)=>{br(n).subscribe(un(t,()=>t.complete(),Ef)),!t.closed&&e.subscribe(t)})}function ki(n,e,t){let r=Jt(n)||e||t?{next:n,error:e,complete:t}:n;return r?ln((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(un(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):zo}function T3(n){let e=gn(null);try{return n()}finally{gn(e)}}var Hl=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},U0=new Hl("20.3.15");var hw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Je=class extends Error{code;constructor(e,t){super(Za(e,t)),this.code=e}};function eW(n){return`NG0${Math.abs(n)}`}function Za(n,e){return`${eW(n)}${e?": "+e:""}`}var mi=globalThis;function Bn(n){for(let e in n)if(n[e]===Bn)return e;throw Error("")}function P3(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function $l(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map($l).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function pw(n,e){return n?e?`${n} ${e}`:n:e||""}var tW=Bn({__forward_ref__:Bn});function ps(n){return n.__forward_ref__=ps,n.toString=function(){return $l(this())},n}function ro(n){return jI(n)?n():n}function jI(n){return typeof n=="function"&&n.hasOwnProperty(tW)&&n.__forward_ref__===ps}function Ze(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ir(n){return{providers:n.providers||[],imports:n.imports||[]}}function z0(n){return nW(n,gw)}function BI(n){return z0(n)!==null}function nW(n,e){return n.hasOwnProperty(e)&&n[e]||null}function rW(n){let e=n?.[gw]??null;return e||null}function DI(n){return n&&n.hasOwnProperty(dw)?n[dw]:null}var gw=Bn({\u0275prov:Bn}),dw=Bn({\u0275inj:Bn}),Ye=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Ze({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function UI(n){return n&&!!n.\u0275providers}var zI=Bn({\u0275cmp:Bn}),qI=Bn({\u0275dir:Bn}),HI=Bn({\u0275pipe:Bn}),$I=Bn({\u0275mod:Bn}),j0=Bn({\u0275fac:Bn}),Pf=Bn({__NG_ELEMENT_ID__:Bn}),M3=Bn({__NG_ENV_ID__:Bn});function Xu(n){return typeof n=="string"?n:n==null?"":String(n)}function k3(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Xu(n)}var R3=Bn({ngErrorCode:Bn}),iW=Bn({ngErrorMessage:Bn}),oW=Bn({ngTokenPath:Bn});function GI(n,e){return O3("",-200,e)}function mw(n,e){throw new Je(-201,!1)}function O3(n,e,t){let r=new Je(e,n);return r[R3]=e,r[iW]=n,t&&(r[oW]=t),r}function sW(n){return n[R3]}var TI;function F3(){return TI}function qo(n){let e=TI;return TI=n,e}function WI(n,e,t){let r=z0(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;mw(n,"Injector")}var aW={},Df=aW,MI="__NG_DI_FLAG__",NI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Tf(t)||0;try{return this.injector.get(e,r&8?null:Df,r)}catch(i){if(_p(i))return i;throw i}}};function cW(n,e=0){let t=I1();if(t===void 0)throw new Je(-203,!1);if(t===null)return WI(n,void 0,e);{let r=lW(e),i=t.retrieve(n,r);if(_p(i)){if(r.optional)return null;throw i}return i}}function Ve(n,e=0){return(F3()||cW)(ro(n),e)}function Te(n,e){return Ve(n,Tf(e))}function Tf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function lW(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function PI(n){let e=[];for(let t=0;t<n.length;t++){let r=ro(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Je(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=uW(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Ve(i,o))}else e.push(Ve(r))}return e}function L3(n,e){return n[MI]=e,n.prototype[MI]=e,n}function uW(n){return n[MI]}function Qu(n,e){let t=n.hasOwnProperty(j0);return t?n[j0]:null}function V3(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function j3(n){return n.flat(Number.POSITIVE_INFINITY)}function vw(n,e){n.forEach(t=>Array.isArray(t)?vw(t,e):e(t))}function KI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function q0(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function B3(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function _w(n,e,t){let r=Vp(n,e);return r>=0?n[r|1]=t:(r=~r,B3(n,r,e,t)),r}function yw(n,e){let t=Vp(n,e);if(t>=0)return n[t|1]}function Vp(n,e){return dW(n,e,1)}function dW(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ju={},Ho=[],Wl=new Ye(""),YI=new Ye("",-1),QI=new Ye(""),B0=class{get(e,t=Df){if(t===Df){let i=O3("",-201);throw i.name="\u0275NotFound",i}return t}};function ZI(n){return n[$I]||null}function Kl(n){return n[zI]||null}function XI(n){return n[qI]||null}function U3(n){return n[HI]||null}function io(n){return{\u0275providers:n}}function z3(...n){return{\u0275providers:JI(!0,n),\u0275fromNgModule:!0}}function JI(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return vw(e,s=>{let a=s;fw(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&q3(i,o),t}function q3(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];eS(i,o=>{e(o,r)})}}function fw(n,e,t,r){if(n=ro(n),!n)return!1;let i=null,o=DI(n),s=!o&&Kl(n);if(!o&&!s){let c=n.ngModule;if(o=DI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)fw(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{vw(o.imports,u=>{fw(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&q3(l,e)}if(!a){let l=Qu(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ho},i),e({provide:QI,useValue:i,multi:!0},i),e({provide:Wl,useValue:()=>Ve(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;eS(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function eS(n,e){for(let t of n)UI(t)&&(t=t.\u0275providers),Array.isArray(t)?eS(t,e):e(t)}var fW=Bn({provide:String,useValue:Bn});function H3(n){return n!==null&&typeof n=="object"&&fW in n}function hW(n){return!!(n&&n.useExisting)}function pW(n){return!!(n&&n.useFactory)}function Mf(n){return typeof n=="function"}function $3(n){return!!n.useClass}var H0=new Ye(""),uw={},N3={},AI;function $0(){return AI===void 0&&(AI=new B0),AI}var Wn=class{},Nf=class extends Wn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,RI(e,s=>this.processProvider(s)),this.records.set(YI,Lp(void 0,this)),i.has("environment")&&this.records.set(Wn,Lp(void 0,this));let o=this.records.get(H0);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(QI,Ho,{self:!0}))}retrieve(e,t){let r=Tf(t)||0;try{return this.get(e,Df,r)}catch(i){if(_p(i))return i;throw i}}destroy(){V0(this),this._destroyed=!0;let e=gn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),gn(e)}}onDestroy(e){return V0(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){V0(this);let t=Lc(this),r=qo(void 0),i;try{return e()}finally{Lc(t),qo(r)}}get(e,t=Df,r){if(V0(this),e.hasOwnProperty(M3))return e[M3](this);let i=Tf(r),o,s=Lc(this),a=qo(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=yW(e)&&z0(e);u&&this.injectableDefInScope(u)?l=Lp(kI(e),uw):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?$0():this.parent;return t=i&8&&t===Df?null:t,c.get(e,t)}catch(c){let l=sW(c);throw l===-200||l===-201?new Je(l,null):c}finally{qo(a),Lc(s)}}resolveInjectorInitializers(){let e=gn(null),t=Lc(this),r=qo(void 0),i;try{let o=this.get(Wl,Ho,{self:!0});for(let s of o)s()}finally{Lc(t),qo(r),gn(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push($l(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ro(e);let t=Mf(e)?e:ro(e&&e.provide),r=mW(e);if(!Mf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Lp(void 0,uw,!0),i.factory=()=>PI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=gn(null);try{if(t.value===N3)throw GI($l(e));return t.value===uw&&(t.value=N3,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&_W(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{gn(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ro(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function kI(n){let e=z0(n),t=e!==null?e.factory:Qu(n);if(t!==null)return t;if(n instanceof Ye)throw new Je(204,!1);if(n instanceof Function)return gW(n);throw new Je(204,!1)}function gW(n){if(n.length>0)throw new Je(204,!1);let t=rW(n);return t!==null?()=>t.factory(n):()=>new n}function mW(n){if(H3(n))return Lp(void 0,n.useValue);{let e=tS(n);return Lp(e,uw)}}function tS(n,e,t){let r;if(Mf(n)){let i=ro(n);return Qu(i)||kI(i)}else if(H3(n))r=()=>ro(n.useValue);else if(pW(n))r=()=>n.useFactory(...PI(n.deps||[]));else if(hW(n))r=(i,o)=>Ve(ro(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ro(n&&(n.useClass||n.provide));if(vW(n))r=()=>new i(...PI(n.deps));else return Qu(i)||kI(i)}return r}function V0(n){if(n.destroyed)throw new Je(205,!1)}function Lp(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function vW(n){return!!n.deps}function _W(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function yW(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function RI(n,e){for(let t of n)Array.isArray(t)?RI(t,e):t&&UI(t)?RI(t.\u0275providers,e):e(t)}function vi(n,e){let t;n instanceof Nf?(V0(n),t=n):t=new NI(n);let r,i=Lc(t),o=qo(void 0);try{return e()}finally{Lc(i),qo(o)}}function nS(){return F3()!==void 0||I1()!=null}var Xa=0,Ht=1,en=2,qi=3,va=4,_a=5,G0=6,jp=7,xo=8,ed=9,Bc=10,Cr=11,Bp=12,rS=13,kf=14,ya=15,td=16,Rf=17,Uc=18,W0=19,iS=20,ql=21,ww=22,K0=23,qs=24,Of=25,Y0=26,Ri=27,G3=1;var nd=7,Q0=8,Ff=9,$o=10;function zc(n){return Array.isArray(n)&&typeof n[G3]=="object"}function Ja(n){return Array.isArray(n)&&n[G3]===!0}function oS(n){return(n.flags&4)!==0}function Yl(n){return n.componentOffset>-1}function Up(n){return(n.flags&1)===1}function qc(n){return!!n.template}function zp(n){return(n[en]&512)!==0}function Lf(n){return(n[en]&256)===256}var sS="svg",W3="math";function wa(n){for(;Array.isArray(n);)n=n[Xa];return n}function aS(n,e){return wa(e[n])}function ba(n,e){return wa(e[n.index])}function bw(n,e){return n.data[e]}function xw(n,e){return n[e]}function cS(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function xa(n,e){let t=e[n];return zc(t)?t:t[Xa]}function K3(n){return(n[en]&4)===4}function Cw(n){return(n[en]&128)===128}function Y3(n){return Ja(n[qi])}function Vf(n,e){return e==null?null:n[e]}function lS(n){n[Rf]=0}function uS(n){n[en]&1024||(n[en]|=1024,Cw(n)&&qp(n))}function Q3(n,e){for(;n>0;)e=e[kf],n--;return e}function Z0(n){return!!(n[en]&9216||n[qs]?.dirty)}function Ew(n){n[Bc].changeDetectionScheduler?.notify(8),n[en]&64&&(n[en]|=1024),Z0(n)&&qp(n)}function qp(n){n[Bc].changeDetectionScheduler?.notify(0);let e=Zu(n);for(;e!==null&&!(e[en]&8192||(e[en]|=8192,!Cw(e)));)e=Zu(e)}function dS(n,e){if(Lf(n))throw new Je(911,!1);n[ql]===null&&(n[ql]=[]),n[ql].push(e)}function Z3(n,e){if(n[ql]===null)return;let t=n[ql].indexOf(e);t!==-1&&n[ql].splice(t,1)}function Zu(n){let e=n[qi];return Ja(e)?e[qi]:e}function fS(n){return n[jp]??=[]}function hS(n){return n.cleanup??=[]}function X3(n,e,t,r){let i=fS(e);i.push(t),n.firstCreatePass&&hS(n).push(r,i.length-1)}var dn={lFrame:f4(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var OI=!1;function J3(){return dn.lFrame.elementDepthCount}function e4(){dn.lFrame.elementDepthCount++}function pS(){dn.lFrame.elementDepthCount--}function Iw(){return dn.bindingsEnabled}function t4(){return dn.skipHydrationRootTNode!==null}function gS(n){return dn.skipHydrationRootTNode===n}function mS(){dn.skipHydrationRootTNode=null}function sn(){return dn.lFrame.lView}function _i(){return dn.lFrame.tView}function pe(n){return dn.lFrame.contextLView=n,n[xo]}function ge(n){return dn.lFrame.contextLView=null,n}function Oi(){let n=vS();for(;n!==null&&n.type===64;)n=n.parent;return n}function vS(){return dn.lFrame.currentTNode}function n4(){let n=dn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Hp(n,e){let t=dn.lFrame;t.currentTNode=n,t.isParent=e}function _S(){return dn.lFrame.isParent}function r4(){dn.lFrame.isParent=!1}function i4(){return dn.lFrame.contextLView}function yS(){return OI}function wS(n){let e=OI;return OI=n,e}function X0(){let n=dn.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function o4(){return dn.lFrame.bindingIndex}function s4(n){return dn.lFrame.bindingIndex=n}function jf(){return dn.lFrame.bindingIndex++}function Sw(n){let e=dn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function a4(){return dn.lFrame.inI18n}function c4(n,e){let t=dn.lFrame;t.bindingIndex=t.bindingRootIndex=n,Aw(e)}function l4(){return dn.lFrame.currentDirectiveIndex}function Aw(n){dn.lFrame.currentDirectiveIndex=n}function u4(n){let e=dn.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function bS(){return dn.lFrame.currentQueryIndex}function Dw(n){dn.lFrame.currentQueryIndex=n}function wW(n){let e=n[Ht];return e.type===2?e.declTNode:e.type===1?n[_a]:null}function xS(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=wW(o),i===null||(o=o[kf],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=dn.lFrame=d4();return r.currentTNode=e,r.lView=n,!0}function Tw(n){let e=d4(),t=n[Ht];dn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function d4(){let n=dn.lFrame,e=n===null?null:n.child;return e===null?f4(n):e}function f4(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function h4(){let n=dn.lFrame;return dn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var CS=h4;function Mw(){let n=h4();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function p4(n){return(dn.lFrame.contextLView=Q3(n,dn.lFrame.contextLView))[xo]}function Ql(){return dn.lFrame.selectedIndex}function rd(n){dn.lFrame.selectedIndex=n}function J0(){let n=dn.lFrame;return bw(n.tView,n.selectedIndex)}function Sr(){dn.lFrame.currentNamespace=sS}function Go(){bW()}function bW(){dn.lFrame.currentNamespace=null}function g4(){return dn.lFrame.currentNamespace}var m4=!0;function Nw(){return m4}function ev(n){m4=n}function FI(n,e=null,t=null,r){let i=ES(n,e,t,r);return i.resolveInjectorInitializers(),i}function ES(n,e=null,t=null,r,i=new Set){let o=[t||Ho,z3(n)];return r=r||(typeof n=="object"?void 0:$l(n)),new Nf(o,e||$0(),r||null,i)}var Rn=class n{static THROW_IF_NOT_FOUND=Df;static NULL=new B0;static create(e,t){if(Array.isArray(e))return FI({name:""},t,e,"");{let r=e.name??"";return FI({name:r},e.parent,e.providers,r)}}static \u0275prov=Ze({token:n,providedIn:"any",factory:()=>Ve(YI)});static __NG_ELEMENT_ID__=-1},ni=new Ye(""),Ca=(()=>{class n{static __NG_ELEMENT_ID__=xW;static __NG_ENV_ID__=t=>t}return n})(),LI=class extends Ca{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Lf(this._lView)}onDestroy(e){let t=this._lView;return dS(t,e),()=>Z3(t,e)}};function xW(){return new LI(sn())}var Qa=class{_console=console;handleError(e){this._console.error("ERROR",e)}},gs=new Ye("",{providedIn:"root",factory:()=>{let n=Te(Wn),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Qa),e.handleError(t))}}}),v4={provide:Wl,useValue:()=>void Te(Qa),multi:!0};function IS(n){return typeof n=="function"&&n[yo]!==void 0}function Ea(n,e){let[t,r,i]=cI(n,e?.equal),o=t,s=o[yo];return o.set=r,o.update=i,o.asReadonly=_4.bind(o),o}function _4(){let n=this[yo];if(n.readonlyFn===void 0){let e=()=>this();e[yo]=n,n.readonlyFn=e}return n.readonlyFn}function SS(n){return IS(n)&&typeof n.set=="function"}var Pw=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=CW}return n})();function CW(){return new Pw(sn(),Oi())}var Gl=class{},tv=new Ye("",{providedIn:"root",factory:()=>!1});var AS=new Ye(""),DS=new Ye(""),Hc=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new to(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ot(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new n})}return n})(),$p=(()=>{class n{internalPendingTasks=Te(Hc);scheduler=Te(Gl);errorHandler=Te(gs);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new n})}return n})();function nv(...n){}var TS=(()=>{class n{static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new VI})}return n})(),VI=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Xp(n){return{toString:n}.toString()}var kw="__parameters__";function TW(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function MW(n,e,t){return Xp(()=>{let r=TW(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let h=c.hasOwnProperty(kw)?c[kw]:Object.defineProperty(c,kw,{value:[]})[kw];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ar=L3(MW("Optional"),8);function J4(n){let e=mi.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function NW(n){return typeof n=="function"}var Hw=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function eF(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Sa=(()=>{let n=()=>tF;return n.ngInherit=!0,n})();function tF(n){return n.type.prototype.ngOnChanges&&(n.setInput=kW),PW}function PW(){let n=rF(this),e=n?.current;if(e){let t=n.previous;if(t===Ju)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function kW(n,e,t,r,i){let o=this.declaredInputs[r],s=rF(n)||RW(n,{previous:Ju,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Hw(l&&l.currentValue,t,c===Ju),eF(n,e,i,t)}var nF="__ngSimpleChanges__";function rF(n){return n[nF]||null}function RW(n,e){return n[nF]=e}var y4=[];var lr=function(n,e=null,t){for(let r=0;r<y4.length;r++){let i=y4[r];i(n,e,t)}};function OW(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=tF(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function iF(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Bw(n,e,t){oF(n,e,3,t)}function Uw(n,e,t,r){(n[en]&3)===t&&oF(n,e,t,r)}function MS(n,e){let t=n[en];(t&3)===e&&(t&=16383,t+=1,n[en]=t)}function oF(n,e,t,r){let i=r!==void 0?n[Rf]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Rf]+=65536),(a<o||o==-1)&&(FW(n,t,e,c),n[Rf]=(n[Rf]&4294901760)+c+2),c++}function w4(n,e){lr(4,n,e);let t=gn(null);try{e.call(n)}finally{gn(t),lr(5,n,e)}}function FW(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[en]>>14<n[Rf]>>16&&(n[en]&3)===e&&(n[en]+=16384,w4(a,o)):w4(a,o)}var Wp=-1,Uf=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function LW(n){return(n.flags&8)!==0}function VW(n){return(n.flags&16)!==0}function jW(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];BW(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function sF(n){return n===3||n===4||n===6}function BW(n){return n.charCodeAt(0)===64}function Kp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?b4(n,t,i,null,e[++r]):b4(n,t,i,null,null))}}return n}function b4(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function aF(n){return n!==Wp}function $w(n){return n&32767}function UW(n){return n>>16}function Gw(n,e){let t=UW(n),r=e;for(;t>0;)r=r[kf],t--;return r}var BS=!0;function Ww(n){let e=BS;return BS=n,e}var zW=256,cF=zW-1,lF=5,qW=0,$c={};function HW(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Pf)&&(r=t[Pf]),r==null&&(r=t[Pf]=qW++);let i=r&cF,o=1<<i;e.data[n+(i>>lF)]|=o}function Kw(n,e){let t=uF(n,e);if(t!==-1)return t;let r=e[Ht];r.firstCreatePass&&(n.injectorIndex=e.length,NS(r.data,n),NS(e,null),NS(r.blueprint,null));let i=yA(n,e),o=n.injectorIndex;if(aF(i)){let s=$w(i),a=Gw(i,e),c=a[Ht].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function NS(n,e){n.push(0,0,0,0,0,0,0,0,e)}function uF(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function yA(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=gF(i),r===null)return Wp;if(t++,i=i[kf],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Wp}function US(n,e,t){HW(n,e,t)}function $W(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(sF(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function dF(n,e,t){if(t&8||n!==void 0)return n;mw(e,"NodeInjector")}function fF(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ed],o=qo(void 0);try{return i?i.get(e,r,t&8):WI(e,r,t&8)}finally{qo(o)}}return dF(r,e,t)}function hF(n,e,t,r=0,i){if(n!==null){if(e[en]&2048&&!(r&2)){let s=YW(n,e,t,r,$c);if(s!==$c)return s}let o=pF(n,e,t,r,$c);if(o!==$c)return o}return fF(e,t,r,i)}function pF(n,e,t,r,i){let o=WW(t);if(typeof o=="function"){if(!xS(e,n,r))return r&1?dF(i,t,r):fF(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))mw(t);else return s}finally{CS()}}else if(typeof o=="number"){let s=null,a=uF(n,e),c=Wp,l=r&1?e[ya][_a]:null;for((a===-1||r&4)&&(c=a===-1?yA(n,e):e[a+8],c===Wp||!C4(r,!1)?a=-1:(s=e[Ht],a=$w(c),e=Gw(c,e)));a!==-1;){let u=e[Ht];if(x4(o,a,u.data)){let h=GW(a,e,t,s,r,l);if(h!==$c)return h}c=e[a+8],c!==Wp&&C4(r,e[Ht].data[a+8]===l)&&x4(o,a,e)?(s=u,a=$w(c),e=Gw(c,e)):a=-1}}return i}function GW(n,e,t,r,i,o){let s=e[Ht],a=s.data[n+8],c=r==null?Yl(a)&&BS:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=zw(a,s,t,c,l);return u!==null?sv(e,s,u,a,i):$c}function zw(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,h=r?a:a+u,m=i?a+u:l;for(let g=h;g<m;g++){let x=s[g];if(g<c&&t===x||g>=c&&x.type===t)return g}if(i){let g=s[c];if(g&&qc(g)&&g.type===t)return c}return null}function sv(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Uf){let a=o;if(a.resolving){let g=k3(s[t]);throw GI(g)}let c=Ww(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,h=a.injectImpl?qo(a.injectImpl):null,m=xS(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&OW(t,s[t],e)}finally{h!==null&&qo(h),Ww(c),a.resolving=!1,CS()}}return o}function WW(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Pf)?n[Pf]:void 0;return typeof e=="number"?e>=0?e&cF:KW:e}function x4(n,e,t){let r=1<<n;return!!(t[e+(n>>lF)]&r)}function C4(n,e){return!(n&2)&&!(n&1&&e)}var Bf=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return hF(this._tNode,this._lView,e,Tf(r),t)}};function KW(){return new Bf(Oi(),sn())}function Aa(n){return Xp(()=>{let e=n.prototype.constructor,t=e[j0]||zS(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[j0]||zS(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function zS(n){return jI(n)?()=>{let e=zS(ro(n));return e&&e()}:Qu(n)}function YW(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[en]&2048&&!zp(s);){let a=pF(o,s,t,r|2,$c);if(a!==$c)return a;let c=o.parent;if(!c){let l=s[iS];if(l){let u=l.get(t,$c,r);if(u!==$c)return u}c=gF(s),s=s[kf]}o=c}return i}function gF(n){let e=n[Ht],t=e.type;return t===2?e.declTNode:t===1?n[_a]:null}function fv(n){return $W(Oi(),n)}function QW(){return Jp(Oi(),sn())}function Jp(n,e){return new oo(ba(n,e))}var oo=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=QW}return n})();function ZW(n){return n instanceof oo?n.nativeElement:n}function XW(){return this._results[Symbol.iterator]()}var Yw=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new kn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=j3(e);(this._changesDetected=!V3(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=XW};function mF(n){return(n.flags&128)===128}var wA=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(wA||{}),vF=new Map,JW=0;function eK(){return JW++}function tK(n){vF.set(n[W0],n)}function qS(n){vF.delete(n[W0])}var E4="__ngContext__";function Yp(n,e){zc(e)?(n[E4]=e[W0],tK(e)):n[E4]=e}function _F(n){return wF(n[Bp])}function yF(n){return wF(n[va])}function wF(n){for(;n!==null&&!Ja(n);)n=n[va];return n}var HS;function bA(n){HS=n}function bF(){if(HS!==void 0)return HS;if(typeof document<"u")return document;throw new Je(210,!1)}var ab=new Ye("",{providedIn:"root",factory:()=>nK}),nK="ng",cb=new Ye(""),Hi=new Ye("",{providedIn:"platform",factory:()=>"unknown"});var lb=new Ye("",{providedIn:"root",factory:()=>bF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rK="h",iK="b";var xF=!1,CF=new Ye("",{providedIn:"root",factory:()=>xF});var ub=new Ye("");var oK=(n,e,t,r)=>{};function sK(n,e,t,r){oK(n,e,t,r)}function xA(n){return(n.flags&32)===32}var aK=()=>null;function EF(n,e,t=!1){return aK(n,e,t)}function IF(n,e){let t=n.contentQueries;if(t!==null){let r=gn(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Dw(o),a.contentQueries(2,e[s],s)}}}finally{gn(r)}}}function $S(n,e,t){Dw(0);let r=gn(null);try{e(n,t)}finally{gn(r)}}function CA(n,e,t){if(oS(e)){let r=gn(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{gn(r)}}}var Zl=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Zl||{});var Rw;function cK(){if(Rw===void 0&&(Rw=null,mi.trustedTypes))try{Rw=mi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Rw}function db(n){return cK()?.createHTML(n)||n}var Ow;function lK(){if(Ow===void 0&&(Ow=null,mi.trustedTypes))try{Ow=mi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ow}function I4(n){return lK()?.createScriptURL(n)||n}var Xl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hw})`}},GS=class extends Xl{getTypeName(){return"HTML"}},WS=class extends Xl{getTypeName(){return"Style"}},KS=class extends Xl{getTypeName(){return"Script"}},YS=class extends Xl{getTypeName(){return"URL"}},QS=class extends Xl{getTypeName(){return"ResourceURL"}};function Da(n){return n instanceof Xl?n.changingThisBreaksApplicationSecurity:n}function eu(n,e){let t=SF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${hw})`)}return t===e}function SF(n){return n instanceof Xl&&n.getTypeName()||null}function EA(n){return new GS(n)}function IA(n){return new WS(n)}function SA(n){return new KS(n)}function AA(n){return new YS(n)}function DA(n){return new QS(n)}function uK(n){let e=new XS(n);return dK()?new ZS(e):e}var ZS=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(db(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},XS=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=db(e),t}};function dK(){try{return!!new window.DOMParser().parseFromString(db(""),"text/html")}catch{return!1}}var fK=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function hv(n){return n=String(n),n.match(fK)?n:"unsafe:"+n}function tu(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function pv(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var AF=tu("area,br,col,hr,img,wbr"),DF=tu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),TF=tu("rp,rt"),hK=pv(TF,DF),pK=pv(DF,tu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gK=pv(TF,tu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),S4=pv(AF,pK,gK,hK),MF=tu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mK=tu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vK=tu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),_K=pv(MF,mK,vK),yK=tu("script,style,template"),JS=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=xK(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=bK(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=A4(e).toLowerCase();if(!S4.hasOwnProperty(t))return this.sanitizedSomething=!0,!yK.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!_K.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;MF[a]&&(c=hv(c)),this.buf.push(" ",s,'="',D4(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=A4(e).toLowerCase();S4.hasOwnProperty(t)&&!AF.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(D4(e))}};function wK(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function bK(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw NF(e);return e}function xK(n){let e=n.firstChild;if(e&&wK(n,e))throw NF(e);return e}function A4(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function NF(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var CK=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,EK=/([^\#-~ |!])/g;function D4(n){return n.replace(/&/g,"&amp;").replace(CK,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(EK,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Fw;function TA(n,e){let t=null;try{Fw=Fw||uK(n);let r=e?String(e):"";t=Fw.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Fw.getInertBodyElement(r)}while(r!==o);let a=new JS().sanitizeChildren(T4(t)||t);return db(a)}finally{if(t){let r=T4(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function T4(n){return"content"in n&&IK(n)?n.content:null}function IK(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var SK=/^>|^->|<!--|-->|--!>|<!-$/g,AK=/(<|>)/g,DK="\u200B$1\u200B";function TK(n){return n.replace(SK,e=>e.replace(AK,DK))}function MK(n,e){return n.createText(e)}function NK(n,e,t){n.setValue(e,t)}function PK(n,e){return n.createComment(TK(e))}function PF(n,e,t){return n.createElement(e,t)}function Qw(n,e,t,r,i){n.insertBefore(e,t,r,i)}function kF(n,e,t){n.appendChild(e,t)}function M4(n,e,t,r,i){r!==null?Qw(n,e,t,r,i):kF(n,e,t)}function kK(n,e,t,r){n.removeChild(null,e,t,r)}function RK(n,e,t){n.setAttribute(e,"style",t)}function OK(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function RF(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&jW(n,e,r),i!==null&&OK(n,e,i),o!==null&&RK(n,e,o)}var rc=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(rc||{});function ur(n){let e=FF();return e?e.sanitize(rc.URL,n)||"":eu(n,"URL")?Da(n):hv(Xu(n))}function OF(n){let e=FF();if(e)return I4(e.sanitize(rc.RESOURCE_URL,n)||"");if(eu(n,"ResourceURL"))return I4(Da(n));throw new Je(904,!1)}function FK(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?OF:ur}function MA(n,e,t){return FK(e,t)(n)}function FF(){let n=sn();return n&&n[Bc].sanitizer}function LF(n){return n instanceof Function?n():n}function LK(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var VF="ng-template";function VK(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&LK(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(NA(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function NA(n){return n.type===4&&n.value!==VF}function jK(n,e,t){let r=n.type===4&&!t?VF:n.value;return e===r}function BK(n,e,t){let r=4,i=n.attrs,o=i!==null?qK(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!ec(r)&&!ec(c))return!1;if(s&&ec(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!jK(n,c,t)||c===""&&e.length===1){if(ec(r))return!1;s=!0}}else if(r&8){if(i===null||!VK(n,i,c,t)){if(ec(r))return!1;s=!0}}else{let l=e[++a],u=UK(c,i,NA(n),t);if(u===-1){if(ec(r))return!1;s=!0;continue}if(l!==""){let h;if(u>o?h="":h=i[u+1].toLowerCase(),r&2&&l!==h){if(ec(r))return!1;s=!0}}}}return ec(r)||s}function ec(n){return(n&1)===0}function UK(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return HK(e,n)}function zK(n,e,t=!1){for(let r=0;r<e.length;r++)if(BK(n,e[r],t))return!0;return!1}function qK(n){for(let e=0;e<n.length;e++){let t=n[e];if(sF(t))return e}return n.length}function HK(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function N4(n,e){return n?":not("+e.trim()+")":e}function $K(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ec(s)&&(e+=N4(o,i),i=""),r=s,o=o||!ec(r);t++}return i!==""&&(e+=N4(o,i)),e}function GK(n){return n.map($K).join(",")}function WK(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ec(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var ms={};function PA(n,e,t,r,i,o,s,a,c,l,u){let h=Ri+r,m=h+i,g=KK(h,m),x=typeof l=="function"?l():l;return g[Ht]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:x,incompleteFirstPass:!1,ssrId:u}}function KK(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ms);return t}function YK(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=PA(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function kA(n,e,t,r,i,o,s,a,c,l,u){let h=e.blueprint.slice();return h[Xa]=i,h[en]=r|4|128|8|64|1024,(l!==null||n&&n[en]&2048)&&(h[en]|=2048),lS(h),h[qi]=h[kf]=n,h[xo]=t,h[Bc]=s||n&&n[Bc],h[Cr]=a||n&&n[Cr],h[ed]=c||n&&n[ed]||null,h[_a]=o,h[W0]=eK(),h[G0]=u,h[iS]=l,h[ya]=e.type==2?n[ya]:h,h}function QK(n,e,t){let r=ba(e,n),i=YK(t),o=n[Bc].rendererFactory,s=RA(n,kA(n,i,null,jF(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function jF(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function BF(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function RA(n,e){return n[Bp]?n[rS][va]=e:n[Bp]=e,n[rS]=e,e}function H(n=1){UF(_i(),sn(),Ql()+n,!1)}function UF(n,e,t,r){if(!r)if((e[en]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Bw(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Uw(e,o,0,t)}rd(t)}var fb=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(fb||{});function eA(n,e,t,r){let i=gn(null);try{let[o,s,a]=n.inputs[t],c=null;(s&fb.SignalBased)!==0&&(c=e[o][yo]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):eF(e,c,o,r)}finally{gn(i)}}var nc=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(nc||{}),ZK;function OA(n,e){return ZK(n,e)}var Qp=new Set,hb=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(hb||{}),Gf=new Ye(""),P4=new Set;function eg(n){P4.has(n)||(P4.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var zF=!1,tA=class extends kn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,nS()&&(this.destroyRef=Te(Ca,{optional:!0})??void 0,this.pendingTasks=Te(Hc,{optional:!0})??void 0)}emit(e){let t=gn(null);try{super.next(e)}finally{gn(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Gr&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},jr=tA;function qF(n){let e,t;function r(){n=nv;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function k4(n){return queueMicrotask(()=>n()),()=>{n=nv}}var FA="isAngularZone",Zw=FA+"_ID",XK=0,Ut=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new jr(!1);onMicrotaskEmpty=new jr(!1);onStable=new jr(!1);onError=new jr(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=zF}=e;if(typeof Zone>"u")throw new Je(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tY(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(FA)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Je(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Je(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,JK,nv,nv);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},JK={};function LA(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function eY(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){qF(()=>{n.callbackScheduled=!1,nA(n),n.isCheckStableRunning=!0,LA(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),nA(n)}function tY(n){let e=()=>{eY(n)},t=XK++;n._inner=n._inner.fork({name:"angular",properties:{[FA]:!0,[Zw]:t,[Zw+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(nY(c))return r.invokeTask(o,s,a,c);try{return R4(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),O4(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return R4(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!rY(c)&&e(),O4(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,nA(n),LA(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function nA(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function R4(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function O4(n){n._nesting--,LA(n)}var av=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new jr;onMicrotaskEmpty=new jr;onStable=new jr;onError=new jr;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function nY(n){return HF(n,"__ignore_ng_zone__")}function rY(n){return HF(n,"__scheduler_tick__")}function HF(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function $F(n="zone.js",e){return n==="noop"?new av:n==="zone.js"?new Ut(e):n}var VA=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new n})}return n})(),GF=[0,1,2,3],WF=(()=>{class n{ngZone=Te(Ut);scheduler=Te(Gl);errorHandler=Te(Qa,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Te(Gf,{optional:!0})}execute(){let t=this.sequences.size>0;t&&lr(16),this.executing=!0;for(let r of GF)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&lr(17)}register(t){let{view:r}=t;r!==void 0?((r[Of]??=[]).push(t),qp(r),r[en]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(hb.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new n})}return n})(),Xw=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Of];e&&(this.view[Of]=e.filter(t=>t!==this))}};function gv(n,e){let t=e?.injector??Te(Rn);return eg("NgAfterNextRender"),oY(n,t,e,!0)}function iY(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function oY(n,e,t,r){let i=e.get(VA);i.impl??=e.get(WF);let o=e.get(Gf,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Ca):null,a=e.get(Pw,null,{optional:!0}),c=new Xw(i.impl,iY(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var sY=new Ye("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function KF(n,e,t){let r=n.get(sY);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function aY(n,e){for(let[t,r]of e)KF(n,r.animateFns)}function F4(n,e,t,r){let i=n?.[Y0]?.enter;e!==null&&i&&i.has(t.index)&&aY(r,i)}function Gp(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;Ja(i)?c=i:zc(i)&&(l=!0,i=i[Xa]);let u=wa(i);n===0&&r!==null?(F4(a,r,o,t),s==null?kF(e,r,u):Qw(e,r,u,s||null,!0)):n===1&&r!==null?(F4(a,r,o,t),Qw(e,r,u,s||null,!0)):n===2?L4(a,o,t,h=>{kK(e,u,l,h)}):n===3&&L4(a,o,t,()=>{e.destroyNode(u)}),c!=null&&wY(e,n,t,c,o,r,s)}}function cY(n,e){YF(n,e),e[Xa]=null,e[_a]=null}function lY(n,e,t,r,i,o){r[Xa]=i,r[_a]=e,pb(n,r,t,1,i,o)}function YF(n,e){e[Bc].changeDetectionScheduler?.notify(9),pb(n,e,e[Cr],2,null,null)}function uY(n){let e=n[Bp];if(!e)return PS(n[Ht],n);for(;e;){let t=null;if(zc(e))t=e[Bp];else{let r=e[$o];r&&(t=r)}if(!t){for(;e&&!e[va]&&e!==n;)zc(e)&&PS(e[Ht],e),e=e[qi];e===null&&(e=n),zc(e)&&PS(e[Ht],e),t=e&&e[va]}e=t}}function jA(n,e){let t=n[Ff],r=t.indexOf(e);t.splice(r,1)}function QF(n,e){if(Lf(e))return;let t=e[Cr];t.destroyNode&&pb(n,e,t,3,null,null),uY(e)}function PS(n,e){if(Lf(e))return;let t=gn(null);try{e[en]&=-129,e[en]|=256,e[qs]&&N0(e[qs]),hY(n,e),fY(n,e),e[Ht].type===1&&e[Cr].destroy();let r=e[td];if(r!==null&&Ja(e[qi])){r!==e[qi]&&jA(r,e);let i=e[Uc];i!==null&&i.detachView(n)}qS(e)}finally{gn(t)}}function L4(n,e,t,r){let i=n?.[Y0];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Qp.add(n),KF(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),dY(n,r)}else n&&Qp.delete(n),r(!1)},i)}function dY(n,e){let t=n[Y0]?.running;if(t){t.then(()=>{n[Y0].running=void 0,Qp.delete(n),e(!0)});return}e(!1)}function fY(n,e){let t=n.cleanup,r=e[jp];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[jp]=null);let i=e[ql];if(i!==null){e[ql]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[K0];if(o!==null){e[K0]=null;for(let s of o)s.destroy()}}function hY(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Uf)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];lr(4,a,c);try{c.call(a)}finally{lr(5,a,c)}}else{lr(4,i,o);try{o.call(i)}finally{lr(5,i,o)}}}}}function pY(n,e,t){return gY(n,e.parent,t)}function gY(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Xa];if(Yl(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Zl.None||i===Zl.Emulated)return null}return ba(r,t)}function mY(n,e,t){return _Y(n,e,t)}function vY(n,e,t){return n.type&40?ba(n,t):null}var _Y=vY,V4;function BA(n,e,t,r){let i=pY(n,r,e),o=e[Cr],s=r.parent||e[_a],a=mY(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)M4(o,i,t[c],a,!1);else M4(o,i,t,a,!1);V4!==void 0&&V4(o,r,e,t,i)}function rv(n,e){if(e!==null){let t=e.type;if(t&3)return ba(e,n);if(t&4)return rA(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return rv(n,r);{let i=n[e.index];return Ja(i)?rA(-1,i):wa(i)}}else{if(t&128)return rv(n,e.next);if(t&32)return OA(e,n)()||wa(n[e.index]);{let r=ZF(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zu(n[ya]);return rv(i,r)}else return rv(n,e.next)}}}return null}function ZF(n,e){if(e!==null){let r=n[ya][_a],i=e.projection;return r.projection[i]}return null}function rA(n,e){let t=$o+n+1;if(t<e.length){let r=e[t],i=r[Ht].firstChild;if(i!==null)return rv(r,i)}return e[nd]}function UA(n,e,t,r,i,o,s){for(;t!=null;){let a=r[ed];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&Yp(wa(c),r),t.flags|=2),!xA(t))if(l&8)UA(n,e,t.child,r,i,o,!1),Gp(e,n,a,i,c,t,o,r);else if(l&32){let u=OA(t,r),h;for(;h=u();)Gp(e,n,a,i,h,t,o,r);Gp(e,n,a,i,c,t,o,r)}else l&16?yY(n,e,r,t,i,o):Gp(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function pb(n,e,t,r,i,o){UA(t,r,n.firstChild,e,i,o,!1)}function yY(n,e,t,r,i,o){let s=t[ya],c=s[_a].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Gp(e,n,t[ed],i,u,r,o,t)}else{let l=c,u=s[qi];mF(r)&&(l.flags|=128),UA(n,e,l,u,i,o,!0)}}function wY(n,e,t,r,i,o,s){let a=r[nd],c=wa(r);a!==c&&Gp(e,n,t,o,a,i,s);for(let l=$o;l<r.length;l++){let u=r[l];pb(u[Ht],u,n,e,o,a)}}function bY(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:nc.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=nc.Important),n.setStyle(t,r,i,o))}}function XF(n,e,t,r,i){let o=Ql(),s=r&2;try{rd(-1),s&&e.length>Ri&&UF(n,e,Ri,!1),lr(s?2:0,i,t),t(r,i)}finally{rd(o),lr(s?3:1,i,t)}}function gb(n,e,t){AY(n,e,t),(t.flags&64)===64&&DY(n,e,t)}function mb(n,e,t=ba){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function xY(n,e,t,r){let o=r.get(CF,xF)||t===Zl.ShadowDom,s=n.selectRootElement(e,o);return CY(s),s}function CY(n){EY(n)}var EY=()=>null;function IY(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function JF(n,e,t,r,i,o){let s=e[Ht];if(vb(n,s,e,t,r)){Yl(n)&&eL(e,n.index);return}n.type&3&&(t=IY(t)),SY(n,e,t,r,i,o)}function SY(n,e,t,r,i,o){if(n.type&3){let s=ba(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function eL(n,e){let t=xa(e,n);t[en]&16||(t[en]|=64)}function AY(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Yl(t)&&QK(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Kw(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=sv(e,n,s,t);if(Yp(c,e),o!==null&&NY(e,s-r,c,a,t,o),qc(a)){let l=xa(t.index,e);l[xo]=sv(e,n,s,t)}}}function DY(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=l4();try{rd(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Aw(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&TY(c,l)}}finally{rd(-1),Aw(s)}}function TY(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function zA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];zK(e,o.selectors,!1)&&(r??=[],qc(o)?r.unshift(o):r.push(o))}return r}function MY(n,e,t,r,i,o){let s=ba(n,e);tL(e[Cr],s,o,n.value,t,r,i)}function tL(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Xu(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function NY(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];eA(r,t,c,l)}}function qA(n,e,t,r,i){let o=Ri+t,s=e[Ht],a=i(s,e,n,r,t);e[o]=a,Hp(n,!0);let c=n.type===2;return c?(RF(e[Cr],a,n),(J3()===0||Up(n))&&Yp(a,e),e4()):Yp(a,e),Nw()&&(!c||!xA(n))&&BA(s,e,a,n),n}function HA(n){let e=n;return _S()?r4():(e=e.parent,Hp(e,!1)),e}function PY(n,e){let t=n[ed];if(!t)return;let r;try{r=t.get(gs,null)}catch{r=null}r?.(e)}function vb(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],h=e.data[l];eA(h,t[l],u,i),a=!0}if(o)for(let c of o){let l=t[c],u=e.data[c];eA(u,l,r,i),a=!0}return a}function kY(n,e){let t=xa(e,n),r=t[Ht];RY(r,t);let i=t[Xa];i!==null&&t[G0]===null&&(t[G0]=EF(i,t[ed])),lr(18),$A(r,t,t[xo]),lr(19,t[xo])}function RY(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $A(n,e,t){Tw(e);try{let r=n.viewQuery;r!==null&&$S(1,r,t);let i=n.template;i!==null&&XF(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Uc]?.finishViewCreation(n),n.staticContentQueries&&IF(n,e),n.staticViewQueries&&$S(2,n.viewQuery,t);let o=n.components;o!==null&&OY(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[en]&=-5,Mw()}}function OY(n,e){for(let t=0;t<e.length;t++)kY(n,e[t])}function FY(n,e,t,r){let i=gn(null);try{let o=e.tView,a=n[en]&4096?4096:16,c=kA(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[td]=l;let u=n[Uc];return u!==null&&(c[Uc]=u.createEmbeddedView(o)),$A(o,c,t),c}finally{gn(i)}}function j4(n,e){return!e||e.firstChild===null||mF(n)}function cv(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(wa(o)),Ja(o)&&nL(o,r);let s=t.type;if(s&8)cv(n,e,t.child,r);else if(s&32){let a=OA(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=ZF(e,t);if(Array.isArray(a))r.push(...a);else{let c=Zu(e[ya]);cv(c[Ht],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function nL(n,e){for(let t=$o;t<n.length;t++){let r=n[t],i=r[Ht].firstChild;i!==null&&cv(r[Ht],r,i,e)}n[nd]!==n[Xa]&&e.push(n[nd])}function rL(n){if(n[Of]!==null){for(let e of n[Of])e.impl.addSequence(e);n[Of].length=0}}var iL=[];function LY(n){return n[qs]??VY(n)}function VY(n){let e=iL.pop()??Object.create(BY);return e.lView=n,e}function jY(n){n.lView[qs]!==n&&(n.lView=null,iL.push(n))}var BY=Rt(Oe({},yp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{qp(n.lView)},consumerOnSignalRead(){this.lView[qs]=this}});function UY(n){let e=n[qs]??Object.create(zY);return e.lView=n,e}var zY=Rt(Oe({},yp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Zu(n.lView);for(;e&&!oL(e[Ht]);)e=Zu(e);e&&uS(e)},consumerOnSignalRead(){this.lView[qs]=this}});function oL(n){return n.type!==2}function sL(n){if(n[K0]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[K0])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[en]&8192)}}var qY=100;function aL(n,e=0){let r=n[Bc].rendererFactory,i=!1;i||r.begin?.();try{HY(n,e)}finally{i||r.end?.()}}function HY(n,e){let t=yS();try{wS(!0),iA(n,e);let r=0;for(;Z0(n);){if(r===qY)throw new Je(103,!1);r++,iA(n,1)}}finally{wS(t)}}function $Y(n,e,t,r){if(Lf(e))return;let i=e[en],o=!1,s=!1;Tw(e);let a=!0,c=null,l=null;o||(oL(n)?(l=LY(e),c=bp(l)):M1()===null?(a=!1,l=UY(e),c=bp(l)):e[qs]&&(N0(e[qs]),e[qs]=null));try{lS(e),s4(n.bindingStartIndex),t!==null&&XF(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let g=n.preOrderCheckHooks;g!==null&&Bw(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Uw(e,g,0,null),MS(e,0)}if(s||GY(e),sL(e),cL(e,0),n.contentQueries!==null&&IF(n,e),!o)if(u){let g=n.contentCheckHooks;g!==null&&Bw(e,g)}else{let g=n.contentHooks;g!==null&&Uw(e,g,1),MS(e,1)}KY(n,e);let h=n.components;h!==null&&uL(e,h,0);let m=n.viewQuery;if(m!==null&&$S(2,m,r),!o)if(u){let g=n.viewCheckHooks;g!==null&&Bw(e,g)}else{let g=n.viewHooks;g!==null&&Uw(e,g,2),MS(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ww]){for(let g of e[ww])g();e[ww]=null}o||(rL(e),e[en]&=-73)}catch(u){throw o||qp(e),u}finally{l!==null&&(T0(l,c),a&&jY(l)),Mw()}}function cL(n,e){for(let t=_F(n);t!==null;t=yF(t))for(let r=$o;r<t.length;r++){let i=t[r];lL(i,e)}}function GY(n){for(let e=_F(n);e!==null;e=yF(e)){if(!(e[en]&2))continue;let t=e[Ff];for(let r=0;r<t.length;r++){let i=t[r];uS(i)}}}function WY(n,e,t){lr(18);let r=xa(e,n);lL(r,t),lr(19,r[xo])}function lL(n,e){Cw(n)&&iA(n,e)}function iA(n,e){let r=n[Ht],i=n[en],o=n[qs],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&M0(o)),s||=!1,o&&(o.dirty=!1),n[en]&=-9217,s)$Y(r,n,r.template,n[xo]);else if(i&8192){let a=gn(null);try{sL(n),cL(n,1);let c=r.components;c!==null&&uL(n,c,1),rL(n)}finally{gn(a)}}}function uL(n,e,t){for(let r=0;r<e.length;r++)WY(n,e[r],t)}function KY(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)rd(~i);else{let o=i,s=t[++r],a=t[++r];c4(s,o);let c=e[o];lr(24,c),a(2,c),lr(25,c)}}}finally{rd(-1)}}function GA(n,e){let t=yS()?64:1088;for(n[Bc].changeDetectionScheduler?.notify(e);n;){n[en]|=t;let r=Zu(n);if(zp(n)&&!r)return n;n=r}return null}function dL(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function YY(n,e,t,r=!0){let i=e[Ht];if(QY(i,e,n,t),r){let s=rA(t,n),a=e[Cr],c=a.parentNode(n[nd]);c!==null&&lY(i,n[_a],a,e,c,s)}let o=e[G0];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function oA(n,e){if(n.length<=$o)return;let t=$o+e,r=n[t];if(r){let i=r[td];i!==null&&i!==n&&jA(i,r),e>0&&(n[t-1][va]=r[va]);let o=q0(n,$o+e);cY(r[Ht],r);let s=o[Uc];s!==null&&s.detachView(o[Ht]),r[qi]=null,r[va]=null,r[en]&=-129}return r}function QY(n,e,t,r){let i=$o+r,o=t.length;r>0&&(t[i-1][va]=e),r<o-$o?(e[va]=t[i],KI(t,$o+r,e)):(t.push(e),e[va]=null),e[qi]=t;let s=e[td];s!==null&&t!==s&&fL(s,e);let a=e[Uc];a!==null&&a.insertView(n),Ew(e),e[en]|=128}function fL(n,e){let t=n[Ff],r=e[qi];if(zc(r))n[en]|=2;else{let i=r[qi][ya];e[ya]!==i&&(n[en]|=2)}t===null?n[Ff]=[e]:t.push(e)}var id=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Ht];return cv(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[xo]}set context(e){this._lView[xo]=e}get destroyed(){return Lf(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[qi];if(Ja(e)){let t=e[Q0],r=t?t.indexOf(this):-1;r>-1&&(oA(e,r),q0(t,r))}this._attachedToViewContainer=!1}QF(this._lView[Ht],this._lView)}onDestroy(e){dS(this._lView,e)}markForCheck(){GA(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[en]&=-129}reattach(){Ew(this._lView),this._lView[en]|=128}detectChanges(){this._lView[en]|=1024,aL(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=zp(this._lView),t=this._lView[td];t!==null&&!e&&jA(t,this._lView),YF(this._lView[Ht],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Je(902,!1);this._appRef=e;let t=zp(this._lView),r=this._lView[td];r!==null&&!t&&fL(r,this._lView),Ew(this._lView)}};var od=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=ZY;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=FY(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new id(o)}}return n})();function ZY(){return _b(Oi(),sn())}function _b(n,e){return n.type&4?new od(e,n,Jp(n,e)):null}function yb(n,e,t,r,i){let o=n.data[e];if(o===null)o=XY(n,e,t,r,i),a4()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=n4();o.injectorIndex=s===null?-1:s.injectorIndex}return Hp(o,!0),o}function XY(n,e,t,r,i){let o=vS(),s=_S(),a=s?o:o&&o.parent,c=n.data[e]=eQ(n,a,t,e,r,i);return JY(n,c,o,s),c}function JY(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function eQ(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return t4()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var O2e=new RegExp(`^(\\d+)*(${iK}|${rK})*(.*)`);var tQ=()=>null;function B4(n,e){return tQ(n,e)}var hL=class{},wb=class{},sA=class{resolveComponentFactory(e){throw new Je(917,!1)}},mv=class{static NULL=new sA},zf=class{},Wo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>nQ()}return n})();function nQ(){let n=sn(),e=Oi(),t=xa(e.index,n);return(zc(t)?t:n)[Cr]}var pL=(()=>{class n{static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>null})}return n})();var qw={},aA=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,qw,r);return i!==qw||t===qw?i:this.parentInjector.get(e,t,r)}};function Jw(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=pw(i,a);else if(o==2){let c=a,l=e[++s];r=pw(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function tt(n,e=0){let t=sn();if(t===null)return Ve(n,e);let r=Oi();return hF(r,t,ro(n),e)}function WA(){let n="invalid";throw new Error(n)}function gL(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}oQ(n,e,t,a,o,c,l)}o!==null&&r!==null&&rQ(t,r,o)}function rQ(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Je(-301,!1);r.push(e[i],o)}}function iQ(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function oQ(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let m=0;m<a;m++){let g=r[m];!c&&qc(g)&&(c=!0,iQ(n,t,m)),US(Kw(t,e),n,g.type)}dQ(t,n.data.length,a);for(let m=0;m<a;m++){let g=r[m];g.providersResolver&&g.providersResolver(g)}let l=!1,u=!1,h=BF(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let g=r[m];if(t.mergedAttrs=Kp(t.mergedAttrs,g.hostAttrs),aQ(n,t,e,h,g),uQ(h,g,i),s!==null&&s.has(g)){let[I,M]=s.get(g);t.directiveToIndex.set(g.type,[h,I+t.directiveStart,M+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,h);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let x=g.type.prototype;!l&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(x.ngOnChanges||x.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),h++}sQ(n,t,o)}function sQ(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))U4(0,e,i,r),U4(1,e,i,r),q4(e,r,!1);else{let o=t.get(i);z4(0,e,o,r),z4(1,e,o,r),q4(e,r,!0)}}}function U4(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),mL(e,o)}}function z4(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),mL(e,s)}}function mL(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function q4(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||NA(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function aQ(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Qu(i.type,!0)),s=new Uf(o,qc(i),tt,null);n.blueprint[r]=s,t[r]=s,cQ(n,e,r,BF(n,t,i.hostVars,ms),i)}function cQ(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;lQ(s)!=a&&s.push(a),s.push(t,r,o)}}function lQ(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function uQ(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;qc(e)&&(t[""]=n)}}function dQ(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function KA(n,e,t,r,i,o,s,a){let c=e[Ht],l=c.consts,u=Vf(l,s),h=yb(c,n,t,r,u);return o&&gL(c,e,h,Vf(l,a),i),h.mergedAttrs=Kp(h.mergedAttrs,h.attrs),h.attrs!==null&&Jw(h,h.attrs,!1),h.mergedAttrs!==null&&Jw(h,h.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,h),h}function YA(n,e){iF(n,e),oS(e)&&n.queries.elementEnd(e)}function fQ(n,e,t,r,i,o){let s=e.consts,a=Vf(s,i),c=yb(e,n,t,r,a);if(c.mergedAttrs=Kp(c.mergedAttrs,c.attrs),o!=null){let l=Vf(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Jw(c,c.attrs,!1),c.mergedAttrs!==null&&Jw(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function QA(n){return bb(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function vL(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function bb(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ZA(n,e,t){return n[e]=t}function Ia(n,e,t){if(t===ms)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function XA(n,e,t,r){let i=Ia(n,e,t);return Ia(n,e+1,r)||i}function hQ(n,e,t,r,i){let o=XA(n,e,t,r);return Ia(n,e+2,i)||o}function kS(n,e,t){return function r(i){let o=Yl(n)?xa(n.index,e):e;GA(o,5);let s=e[xo],a=H4(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=H4(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function H4(n,e,t,r){let i=gn(null);try{return lr(6,e,t),t(r)!==!1}catch(o){return PY(n,o),!1}finally{lr(7,e,t),gn(i)}}function pQ(n,e,t,r,i,o,s,a){let c=Up(n),l=!1,u=null;if(!r&&c&&(u=mQ(e,t,o,n.index)),u!==null){let h=u.__ngLastListenerFn__||u;h.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let h=ba(n,t),m=r?r(h):h;sK(t,m,o,a);let g=i.listen(m,o,a);if(!gQ(o)){let x=r?I=>r(wa(I[n.index])):n.index;_L(x,e,t,o,a,g,!1)}}return l}function gQ(n){return n.startsWith("animation")||n.startsWith("transition")}function mQ(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[jp],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function _L(n,e,t,r,i,o,s){let a=e.firstCreatePass?hS(e):null,c=fS(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function $4(n,e,t,r,i,o){let s=e[t],a=e[Ht],l=a.data[t].outputs[r],h=s[l].subscribe(o);_L(n.index,a,e,i,o,h,!0)}var cA=Symbol("BINDING");var eb=class extends mv{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Kl(e);return new qf(t,this.ngModule)}};function vQ(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&fb.SignalBased)!==0};return i&&(o.transform=i),o})}function _Q(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function yQ(n,e,t){let r=e instanceof Wn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new aA(t,r):t}function wQ(n){let e=n.get(zf,null);if(e===null)throw new Je(407,!1);let t=n.get(pL,null),r=n.get(Gl,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function bQ(n,e){let t=yL(n);return PF(e,t,t==="svg"?sS:t==="math"?W3:null)}function yL(n){return(n.selectors[0][0]||"div").toLowerCase()}var qf=class extends wb{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=vQ(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=_Q(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=GK(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){lr(22);let a=gn(null);try{let c=this.componentDef,l=xQ(r,c,s,o),u=yQ(c,i||this.ngModule,e),h=wQ(u),m=h.rendererFactory.createRenderer(null,c),g=r?xY(m,r,c.encapsulation,u):bQ(c,m),x=s?.some(G4)||o?.some(P=>typeof P!="function"&&P.bindings.some(G4)),I=kA(null,l,null,512|jF(c),null,null,h,m,u,null,EF(g,u,!0));I[Ri]=g,Tw(I);let M=null;try{let P=KA(Ri,I,2,"#host",()=>l.directiveRegistry,!0,0);RF(m,g,P),Yp(g,I),gb(l,I,P),CA(l,P,I),YA(l,P),t!==void 0&&EQ(P,this.ngContentSelectors,t),M=xa(P.index,I),I[xo]=M[xo],$A(l,I,null)}catch(P){throw M!==null&&qS(M),qS(I),P}finally{lr(23),Mw()}return new tb(this.componentType,I,!!x)}finally{gn(a)}}};function xQ(n,e,t,r){let i=n?["ng-version","20.3.15"]:WK(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[cA].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let h=r[u];if(typeof h!="function")for(let m of h.bindings){a+=m[cA].requiredVars;let g=u+1;m.create&&(m.targetIdx=g,(o??=[]).push(m)),m.update&&(m.targetIdx=g,(s??=[]).push(m))}}let c=[e];if(r)for(let u of r){let h=typeof u=="function"?u:u.type,m=XI(h);c.push(m)}return PA(0,null,CQ(o,s),1,a,c,null,null,null,[i],null)}function CQ(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function G4(n){let e=n[cA].kind;return e==="input"||e==="twoWay"}var tb=class extends hL{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=bw(t[Ht],Ri),this.location=Jp(this._tNode,t),this.instance=xa(this._tNode.index,t)[xo],this.hostView=this.changeDetectorRef=new id(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=vb(r,i[Ht],i,e,t);this.previousInputValues.set(e,t);let s=xa(r.index,i);GA(s,1)}get injector(){return new Bf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function EQ(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var nu=(()=>{class n{static __NG_ELEMENT_ID__=IQ}return n})();function IQ(){let n=Oi();return bL(n,sn())}var SQ=nu,wL=class extends SQ{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Jp(this._hostTNode,this._hostLView)}get injector(){return new Bf(this._hostTNode,this._hostLView)}get parentInjector(){let e=yA(this._hostTNode,this._hostLView);if(aF(e)){let t=Gw(e,this._hostLView),r=$w(e),i=t[Ht].data[r+8];return new Bf(i,t)}else return new Bf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=W4(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-$o}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=B4(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,j4(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!NW(e),l;if(c)l=t;else{let M=t||{};l=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,a=M.bindings}let u=c?e:new qf(Kl(e)),h=r||this.parentInjector;if(!o&&u.ngModule==null){let P=(c?h:this.parentInjector).get(Wn,null);P&&(o=P)}let m=Kl(u.componentType??{}),g=B4(this._lContainer,m?.id??null),x=g?.firstChild??null,I=u.create(h,i,x,o,s,a);return this.insertImpl(I.hostView,l,j4(this._hostTNode,g)),I}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Y3(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[qi],l=new wL(c,c[_a],c[qi]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return YY(s,i,o,r),e.attachToViewContainerRef(),KI(RS(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=W4(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=oA(this._lContainer,t);r&&(q0(RS(this._lContainer),t),QF(r[Ht],r))}detach(e){let t=this._adjustIndex(e,-1),r=oA(this._lContainer,t);return r&&q0(RS(this._lContainer),t)!=null?new id(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function W4(n){return n[Q0]}function RS(n){return n[Q0]||(n[Q0]=[])}function bL(n,e){let t,r=e[n.index];return Ja(r)?t=r:(t=dL(r,e,null,n),e[n.index]=t,RA(e,t)),DQ(t,e,n,r),new wL(t,n,e)}function AQ(n,e){let t=n[Cr],r=t.createComment(""),i=ba(e,n),o=t.parentNode(i);return Qw(t,o,r,t.nextSibling(i),!1),r}var DQ=NQ,TQ=()=>!1;function MQ(n,e,t){return TQ(n,e,t)}function NQ(n,e,t,r){if(n[nd])return;let i;t.type&8?i=wa(r):i=AQ(e,t),n[nd]=i}var lA=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},uA=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)JA(e,t).matches!==null&&this.queries[t].setDirty()}},nb=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=jQ(e):this.predicate=e}},dA=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},fA=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,PQ(t,o)),this.matchTNodeWithReadOption(e,t,zw(t,e,o,!1,!1))}else r===od?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,zw(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===oo||i===nu||i===od&&t.type&4)this.addMatch(t.index,-2);else{let o=zw(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function PQ(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function kQ(n,e){return n.type&11?Jp(n,e):n.type&4?_b(n,e):null}function RQ(n,e,t,r){return t===-1?kQ(e,n):t===-2?OQ(n,e,r):sv(n,n[Ht],t,e)}function OQ(n,e,t){if(t===oo)return Jp(e,n);if(t===od)return _b(e,n);if(t===nu)return bL(e,n)}function xL(n,e,t,r){let i=e[Uc].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(RQ(e,u,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function hA(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=xL(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let h=$o;h<u.length;h++){let m=u[h];m[td]===m[qi]&&hA(m[Ht],m,l,r)}if(u[Ff]!==null){let h=u[Ff];for(let m=0;m<h.length;m++){let g=h[m];hA(g[Ht],g,l,r)}}}}}return r}function FQ(n,e){return n[Uc].queries[e].queryList}function CL(n,e,t){let r=new Yw((t&4)===4);return X3(n,e,r,r.destroy),(e[Uc]??=new uA).queries.push(new lA(r))-1}function LQ(n,e,t){let r=_i();return r.firstCreatePass&&(EL(r,new nb(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),CL(r,sn(),e)}function VQ(n,e,t,r){let i=_i();if(i.firstCreatePass){let o=Oi();EL(i,new nb(e,t,r),o.index),BQ(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return CL(i,sn(),t)}function jQ(n){return n.split(",").map(e=>e.trim())}function EL(n,e,t){n.queries===null&&(n.queries=new dA),n.queries.track(new fA(e,t))}function BQ(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function JA(n,e){return n.queries.getByIndex(e)}function UQ(n,e){let t=n[Ht],r=JA(t,e);return r.crossesNgTemplate?hA(t,n,e,[]):xL(t,n,r,e)}function IL(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(a=>qQ(i,a)))}return o}return rb.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((h,m)=>{a.push(""),s.push(r(h).then(g=>{a[l+m]=g,u.splice(u.indexOf(h),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>HQ(o));e.push(c)}),SL(),Promise.all(e).then(()=>{})}var rb=new Map,zQ=new Set;function SL(){let n=rb;return rb=new Map,n}function AL(){return rb.size===0}function qQ(n,e){return typeof e=="string"?e:e.status!==void 0&&e.status!==200?Promise.reject(new Je(918,!1)):e.text()}function HQ(n){zQ.delete(n)}var Hf=class{},xb=class{};var lv=class extends Hf{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new eb(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=ZI(e);this._bootstrapComponents=LF(o.bootstrap),this._r3Injector=ES(e,t,[{provide:Hf,useValue:this},{provide:mv,useValue:this.componentFactoryResolver},...r],$l(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},uv=class extends xb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new lv(this.moduleType,e,[])}};function DL(n,e,t){return new lv(n,e,t,!1)}var ib=class extends Hf{injector;componentFactoryResolver=new eb(this);instance=null;constructor(e){super();let t=new Nf([...e.providers,{provide:Hf,useValue:this},{provide:mv,useValue:this.componentFactoryResolver}],e.parent||$0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tg(n,e,t=null){return new ib({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var $Q=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=JI(!1,t.type),i=r.length>0?tg([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ze({token:n,providedIn:"environment",factory:()=>new n(Ve(Wn))})}return n})();function Kn(n){return Xp(()=>{let e=TL(n),t=Rt(Oe({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wA.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get($Q).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Zl.Emulated,styles:n.styles||Ho,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&eg("NgStandalone"),ML(t);let r=n.dependencies;return t.directiveDefs=K4(r,GQ),t.pipeDefs=K4(r,U3),t.id=YQ(t),t})}function GQ(n){return Kl(n)||XI(n)}function dr(n){return Xp(()=>({type:n.type,bootstrap:n.bootstrap||Ho,declarations:n.declarations||Ho,imports:n.imports||Ho,exports:n.exports||Ho,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function WQ(n,e){if(n==null)return Ju;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=fb.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function KQ(n){if(n==null)return Ju;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Yn(n){return Xp(()=>{let e=TL(n);return ML(e),e})}function vv(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function TL(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ju,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ho,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:WQ(n.inputs,e),outputs:KQ(n.outputs),debugInfo:null}}function ML(n){n.features?.forEach(e=>e(n))}function K4(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function YQ(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function QQ(n){return Object.getPrototypeOf(n.prototype).constructor}function Ko(n){let e=QQ(n.type),t=!0,r=[n];for(;e;){let i;if(qc(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Je(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=OS(n.inputs),s.declaredInputs=OS(n.declaredInputs),s.outputs=OS(n.outputs);let a=i.hostBindings;a&&tZ(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&JQ(n,c),l&&eZ(n,l),ZQ(n,i),P3(n.outputs,i.outputs),qc(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Ko&&(t=!1)}}e=Object.getPrototypeOf(e)}XQ(r)}function ZQ(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function XQ(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Kp(i.hostAttrs,t=Kp(t,i.hostAttrs))}}function OS(n){return n===Ju?{}:n===Ho?[]:n}function JQ(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function eZ(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function tZ(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function nZ(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Kp(n.mergedAttrs,n.attrs);let u=n.tView=PA(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Hp(n,!1);let c=iZ(t,e,n,r);Nw()&&BA(t,e,c,n),Yp(c,e);let l=dL(c,e,c,n);e[r+Ri]=l,RA(e,l),MQ(l,n,e)}function rZ(n,e,t,r,i,o,s,a,c,l,u){let h=t+Ri,m;return e.firstCreatePass?(m=yb(e,h,4,s||null,a||null),Iw()&&gL(e,n,m,Vf(e.consts,l),zA),iF(e,m)):m=e.data[h],nZ(m,n,e,t,r,i,o,c),Up(m)&&gb(e,n,m),l!=null&&mb(n,m,u),m}function Qe(n,e,t,r,i,o,s,a){let c=sn(),l=_i(),u=Vf(l.consts,o);return rZ(c,l,n,e,t,r,i,u,void 0,s,a),Qe}var iZ=oZ;function oZ(n,e,t,r){return ev(!0),e[Cr].createComment("")}var Cb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Eb=new Ye(""),ng=new Ye(""),_v=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,nS()&&(this._destroyRef=Te(Ca,{optional:!0})??void 0),e5||(NL(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(Ve(Ut),Ve(yv),Ve(ng))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),yv=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return e5?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function NL(n){e5=n}var e5;function sd(n){return!!n&&typeof n.then=="function"}function t5(n){return!!n&&typeof n.subscribe=="function"}var n5=new Ye("");function rg(n){return io([{provide:n5,multi:!0,useValue:n}])}var r5=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Te(n5,{optional:!0})??[];injector=Te(Rn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=vi(this.injector,i);if(sd(o))t.push(o);else if(t5(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ib=new Ye("");function PL(){aI(()=>{let n="";throw new Je(600,n)})}function kL(n){return n.isBoundToModule}var sZ=10;function i5(n,e){return Array.isArray(e)?e.reduce(i5,n):Oe(Oe({},n),e)}var Yo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Te(gs);afterRenderManager=Te(VA);zonelessEnabled=Te(tv);rootEffectScheduler=Te(TS);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new kn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Te(Hc);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ut(t=>!t))}constructor(){Te(Gf,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Te(Wn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Rn.NULL){return this._injector.get(Ut).run(()=>{lr(10);let s=t instanceof wb;if(!this._injector.get(r5).done){let x="";throw new Je(405,x)}let c;s?c=t:c=this._injector.get(mv).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=kL(c)?void 0:this._injector.get(Hf),u=r||c.selector,h=c.create(i,[],u,l),m=h.location.nativeElement,g=h.injector.get(Eb,null);return g?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),iv(this.components,h),g?.unregisterApplication(m)}),this._loadComponent(h),lr(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){lr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(hb.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Je(101,!1);let t=gn(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,gn(t),this.afterTick.next(),lr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(zf,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<sZ;)lr(14),this.synchronizeOnce(),lr(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Z0(i))continue;let o=r&&!this.zonelessEnabled?0:1;aL(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Z0(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;iv(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Ib,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>iv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Je(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ta(n,e){let t=sn(),r=jf();if(Ia(t,r,e)){let i=_i(),o=J0();if(vb(o,i,t,n,e))Yl(o)&&eL(t,o.index);else{let a=ba(o,t);tL(t[Cr],a,null,o.value,n,e,null)}}return Ta}function ru(n,e,t,r){let i=sn(),o=jf();if(Ia(i,o,e)){let s=_i(),a=J0();MY(a,i,n,e,t,r)}return ru}var z2e=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ae(n,e,t){let r=sn(),i=jf();if(Ia(r,i,e)){let o=_i(),s=J0();JF(s,r,n,e,r[Cr],t)}return ae}function pA(n,e,t,r,i){vb(e,n,t,i?"class":"style",r)}function b(n,e,t,r){let i=sn(),o=i[Ht],s=n+Ri,a=o.firstCreatePass?KA(s,i,2,e,zA,Iw(),t,r):o.data[s];if(qA(a,i,n,e,RL),Up(a)){let c=i[Ht];gb(c,i,a),CA(c,a,i)}return r!=null&&mb(i,a),b}function A(){let n=_i(),e=Oi(),t=HA(e);return n.firstCreatePass&&YA(n,t),gS(t)&&mS(),pS(),t.classesWithoutHost!=null&&LW(t)&&pA(n,t,sn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&VW(t)&&pA(n,t,sn(),t.stylesWithoutHost,!1),A}function ht(n,e,t,r){return b(n,e,t,r),A(),ht}function o5(n,e,t,r){let i=sn(),o=i[Ht],s=n+Ri,a=o.firstCreatePass?fQ(s,o,2,e,t,r):o.data[s];return qA(a,i,n,e,RL),r!=null&&mb(i,a),o5}function s5(){let n=Oi(),e=HA(n);return gS(e)&&mS(),pS(),s5}function Sb(n,e,t,r){return o5(n,e,t,r),s5(),Sb}var RL=(n,e,t,r,i)=>(ev(!0),PF(e[Cr],r,g4()));function ri(n,e,t){let r=sn(),i=r[Ht],o=n+Ri,s=i.firstCreatePass?KA(o,r,8,"ng-container",zA,Iw(),e,t):i.data[o];if(qA(s,r,n,"ng-container",aZ),Up(s)){let a=r[Ht];gb(a,r,s),CA(a,s,r)}return t!=null&&mb(r,s),ri}function ii(){let n=_i(),e=Oi(),t=HA(e);return n.firstCreatePass&&YA(n,t),ii}var aZ=(n,e,t,r,i)=>(ev(!0),PK(e[Cr],""));function _t(){return sn()}var Lw=void 0;function cZ(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var lZ=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lw,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lw,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lw,"{1} 'at' {0}",Lw],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",cZ],ov={};function a5(n,e,t){typeof e!="string"&&(t=e,e=n[Jl.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ov[e]=n,t&&(ov[e][Jl.ExtraData]=t)}function Ab(n){let e=uZ(n),t=Y4(e);if(t)return t;let r=e.split("-")[0];if(t=Y4(r),t)return t;if(r==="en")return lZ;throw new Je(701,!1)}function Y4(n){return n in ov||(ov[n]=mi.ng&&mi.ng.common&&mi.ng.common.locales&&mi.ng.common.locales[n]),ov[n]}var Jl=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Jl||{});function uZ(n){return n.toLowerCase().replace(/_/g,"-")}var wv="en-US";var dZ=wv;function OL(n){typeof n=="string"&&(dZ=n.toLowerCase().replace(/_/g,"-"))}function Se(n,e,t){let r=sn(),i=_i(),o=Oi();return FL(i,r,r[Cr],o,n,e,t),Se}function FL(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=kS(r,e,o),pQ(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let h=0;h<u.length;h+=2){let m=u[h],g=u[h+1];c??=kS(r,e,o),$4(r,e,m,g,i,c)}if(l&&l.length)for(let h of l)c??=kS(r,e,o),$4(r,e,h,i,i,c)}}function ee(n=1){return p4(n)}function c5(n,e,t,r){VQ(n,e,t,r)}function bv(n,e,t){LQ(n,e,t)}function Wf(n){let e=sn(),t=_i(),r=bS();Dw(r+1);let i=JA(t,r);if(n.dirty&&K3(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=UQ(e,r);n.reset(o,ZW),n.notifyOnChanges()}return!0}return!1}function Kf(){return FQ(sn(),bS())}function yi(n){let e=i4();return xw(e,Ri+n)}function Vw(n,e){return n<<17|e<<2}function $f(n){return n>>17&32767}function fZ(n){return(n&2)==2}function hZ(n,e){return n&131071|e<<17}function gA(n){return n|2}function Zp(n){return(n&131068)>>2}function FS(n,e){return n&-131069|e<<2}function pZ(n){return(n&1)===1}function mA(n){return n|1}function gZ(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=$f(s),c=Zp(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||Vp(h,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let m=$f(n[a+1]);n[r+1]=Vw(m,a),m!==0&&(n[m+1]=FS(n[m+1],r)),n[a+1]=hZ(n[a+1],r)}else n[r+1]=Vw(a,0),a!==0&&(n[a+1]=FS(n[a+1],r)),a=r;else n[r+1]=Vw(c,0),a===0?a=r:n[c+1]=FS(n[c+1],r),c=r;l&&(n[r+1]=gA(n[r+1])),Q4(n,u,r,!0),Q4(n,u,r,!1),mZ(e,u,n,r,o),s=Vw(a,c),o?e.classBindings=s:e.styleBindings=s}function mZ(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Vp(o,e)>=0&&(t[r+1]=mA(t[r+1]))}function Q4(n,e,t,r){let i=n[t+1],o=e===null,s=r?$f(i):Zp(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];vZ(c,e)&&(a=!0,n[s+1]=r?mA(l):gA(l)),s=r?$f(l):Zp(l)}a&&(n[t+1]=r?gA(i):mA(i))}function vZ(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Vp(n,e)>=0:!1}var tc={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _Z(n){return n.substring(tc.key,tc.keyEnd)}function yZ(n){return wZ(n),LL(n,VL(n,0,tc.textEnd))}function LL(n,e){let t=tc.textEnd;return t===e?-1:(e=tc.keyEnd=bZ(n,tc.key=e,t),VL(n,e,t))}function wZ(n){tc.key=0,tc.keyEnd=0,tc.value=0,tc.valueEnd=0,tc.textEnd=n.length}function VL(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function bZ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function xv(n,e,t){return jL(n,e,t,!1),xv}function so(n,e){return jL(n,e,null,!0),so}function l5(n){CZ(TZ,xZ,n,!0)}function xZ(n,e){for(let t=yZ(e);t>=0;t=LL(e,t))_w(n,_Z(e),!0)}function jL(n,e,t,r){let i=sn(),o=_i(),s=Sw(2);if(o.firstUpdatePass&&UL(o,n,s,r),e!==ms&&Ia(i,s,e)){let a=o.data[Ql()];zL(o,a,i,i[Cr],n,i[s+1]=NZ(e,t),r,s)}}function CZ(n,e,t,r){let i=_i(),o=Sw(2);i.firstUpdatePass&&UL(i,null,o,r);let s=sn();if(t!==ms&&Ia(s,o,t)){let a=i.data[Ql()];if(qL(a,r)&&!BL(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=pw(c,t||"")),pA(i,a,s,t,r)}else MZ(i,a,s,s[Cr],s[o+1],s[o+1]=DZ(n,e,t),r,o)}}function BL(n,e){return e>=n.expandoStartIndex}function UL(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ql()],s=BL(n,t);qL(o,r)&&e===null&&!s&&(e=!1),e=EZ(i,o,e,r),gZ(i,o,e,t,s,r)}}function EZ(n,e,t,r){let i=u4(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=LS(null,n,e,t,r),t=dv(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=LS(i,n,e,t,r),o===null){let c=IZ(n,e,r);c!==void 0&&Array.isArray(c)&&(c=LS(null,n,e,c[1],r),c=dv(c,e.attrs,r),SZ(n,e,r,c))}else o=AZ(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function IZ(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Zp(r)!==0)return n[$f(r)]}function SZ(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[$f(i)]=r}function AZ(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=dv(r,s,t)}return dv(r,e.attrs,t)}function LS(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=dv(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function dv(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_w(n,s,t?!0:e[++o]))}return n===void 0?null:n}function DZ(n,e,t){if(t==null||t==="")return Ho;let r=[],i=Da(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function TZ(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&_w(n,r,t)}function MZ(n,e,t,r,i,o,s,a){i===ms&&(i=Ho);let c=0,l=0,u=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;u!==null||h!==null;){let m=c<i.length?i[c+1]:void 0,g=l<o.length?o[l+1]:void 0,x=null,I;u===h?(c+=2,l+=2,m!==g&&(x=h,I=g)):h===null||u!==null&&u<h?(c+=2,x=u):(l+=2,x=h,I=g),x!==null&&zL(n,e,t,r,x,I,s,a),u=c<i.length?i[c]:null,h=l<o.length?o[l]:null}}function zL(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=pZ(l)?Z4(c,e,t,i,Zp(l),s):void 0;if(!ob(u)){ob(o)||fZ(l)&&(o=Z4(c,null,t,i,a,s));let h=aS(Ql(),t);bY(r,s,h,i,o)}}function Z4(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,h=u===null,m=t[i+1];m===ms&&(m=h?Ho:void 0);let g=h?yw(m,r):u===r?m:void 0;if(l&&!ob(g)&&(g=yw(c,r)),ob(g)&&(a=g,s))return a;let x=n[i+1];i=s?$f(x):Zp(x)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=yw(c,r))}return a}function ob(n){return n!==void 0}function NZ(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=$l(Da(n)))),n}function qL(n,e){return(n.flags&(e?8:16))!==0}function j(n,e=""){let t=sn(),r=_i(),i=n+Ri,o=r.firstCreatePass?yb(r,i,1,e,null):r.data[i],s=PZ(r,t,o,e,n);t[i]=s,Nw()&&BA(r,t,s,o),Hp(o,!1)}var PZ=(n,e,t,r,i)=>(ev(!0),MK(e[Cr],r));function HL(n,e,t,r=""){return Ia(n,jf(),t)?e+Xu(t)+r:ms}function kZ(n,e,t,r,i,o=""){let s=o4(),a=XA(n,s,t,i);return Sw(2),a?e+Xu(t)+r+Xu(i)+o:ms}function ft(n){return Dr("",n),ft}function Dr(n,e,t){let r=sn(),i=HL(r,n,e,t);return i!==ms&&$L(r,Ql(),i),Dr}function ad(n,e,t,r,i){let o=sn(),s=kZ(o,n,e,t,r,i);return s!==ms&&$L(o,Ql(),s),ad}function $L(n,e,t){let r=aS(e,n);NK(n[Cr],r,t)}function it(n,e,t){SS(e)&&(e=e());let r=sn(),i=jf();if(Ia(r,i,e)){let o=_i(),s=J0();JF(s,r,n,e,r[Cr],t)}return it}function st(n,e){let t=SS(n);return t&&n.set(e),t}function ot(n,e){let t=sn(),r=_i(),i=Oi();return FL(r,t,t[Cr],i,n,e),ot}function Yf(n){return Ia(sn(),jf(),n)?Xu(n):ms}function Gc(n,e,t=""){return HL(sn(),n,e,t)}function RZ(n,e,t){let r=_i();if(r.firstCreatePass){let i=qc(n);vA(t,r.data,r.blueprint,i,!0),vA(e,r.data,r.blueprint,i,!1)}}function vA(n,e,t,r,i){if(n=ro(n),Array.isArray(n))for(let o=0;o<n.length;o++)vA(n[o],e,t,r,i);else{let o=_i(),s=sn(),a=Oi(),c=Mf(n)?n:ro(n.provide),l=tS(n),u=a.providerIndexes&1048575,h=a.directiveStart,m=a.providerIndexes>>20;if(Mf(n)||!n.multi){let g=new Uf(l,i,tt,null),x=jS(c,e,i?u:u+m,h);x===-1?(US(Kw(a,s),o,c),VS(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[x]=g,s[x]=g)}else{let g=jS(c,e,u+m,h),x=jS(c,e,u,u+m),I=g>=0&&t[g],M=x>=0&&t[x];if(i&&!M||!i&&!I){US(Kw(a,s),o,c);let P=LZ(i?FZ:OZ,t.length,i,r,l,n);!i&&M&&(t[x].providerFactory=P),VS(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),s.push(P)}else{let P=GL(t[i?x:g],l,!i&&r);VS(o,n,g>-1?g:x,P)}!i&&r&&M&&t[x].componentProviders++}}}function VS(n,e,t,r){let i=Mf(e),o=$3(e);if(i||o){let c=(o?ro(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function GL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function jS(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function OZ(n,e,t,r,i){return _A(this.multi,[])}function FZ(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=sv(r,r[Ht],this.providerFactory.index,i);s=c.slice(0,a),_A(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],_A(o,s);return s}function _A(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function LZ(n,e,t,r,i,o){let s=new Uf(n,t,tt,null);return s.multi=[],s.index=e,s.componentProviders=0,GL(s,i,r&&!t),s}function ic(n,e=[]){return t=>{t.providersResolver=(r,i)=>RZ(r,i?i(n):n,e)}}function Wc(n,e,t,r){return VZ(sn(),X0(),n,e,t,r)}function Cv(n,e,t,r,i){return WL(sn(),X0(),n,e,t,r,i)}function u5(n,e){let t=n[e];return t===ms?void 0:t}function VZ(n,e,t,r,i,o){let s=e+t;return Ia(n,s,i)?ZA(n,s+1,o?r.call(o,i):r(i)):u5(n,s+1)}function WL(n,e,t,r,i,o,s){let a=e+t;return XA(n,a,i,o)?ZA(n,a+2,s?r.call(s,i,o):r(i,o)):u5(n,a+2)}function jZ(n,e,t,r,i,o,s,a){let c=e+t;return hQ(n,c,i,o,s)?ZA(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):u5(n,c+3)}function Kc(n,e){let t=_i(),r,i=n+Ri;t.firstCreatePass?(r=BZ(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Qu(r.type,!0)),s,a=qo(tt);try{let c=Ww(!1),l=o();return Ww(c),cS(t,sn(),i,l),l}finally{qo(a)}}function BZ(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function ig(n,e,t,r){let i=n+Ri,o=sn(),s=xw(o,i);return KL(o,i)?WL(o,X0(),e,s.transform,t,r,s):s.transform(t,r)}function Ev(n,e,t,r,i){let o=n+Ri,s=sn(),a=xw(s,o);return KL(s,o)?jZ(s,X0(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function KL(n,e){return n[Ht].data[e].pure}function ao(n,e){return _b(n,e)}var jw=null;function YL(n){jw!==null&&(n.defaultEncapsulation!==jw.defaultEncapsulation||n.preserveWhitespaces!==jw.preserveWhitespaces)||(jw=n)}var sb=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},d5=(()=>{class n{compileModuleSync(t){return new uv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ZI(t),o=LF(i.declarations).reduce((s,a)=>{let c=Kl(a);return c&&s.push(new qf(c)),s},[]);return new sb(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QL=new Ye("");var UZ=(()=>{class n{zone=Te(Ut);changeDetectionScheduler=Te(Gl);applicationRef=Te(Yo);applicationErrorHandler=Te(gs);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZL({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ut(Rt(Oe({},f5()),{scheduleInRootZone:t})),[{provide:Ut,useFactory:n},{provide:Wl,multi:!0,useFactory:()=>{let r=Te(UZ,{optional:!0});return()=>r.initialize()}},{provide:Wl,multi:!0,useFactory:()=>{let r=Te(zZ);return()=>{r.initialize()}}},e===!0?{provide:AS,useValue:!0}:[],{provide:DS,useValue:t??zF},{provide:gs,useFactory:()=>{let r=Te(Ut),i=Te(Wn),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Qa),o.handleError(s))})}}}]}function f5(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var zZ=(()=>{class n{subscription=new Gr;initialized=!1;zone=Te(Ut);pendingTasks=Te(Hc);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ut.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XL=(()=>{class n{applicationErrorHandler=Te(gs);appRef=Te(Yo);taskService=Te(Hc);ngZone=Te(Ut);zonelessEnabled=Te(tv);tracing=Te(Gf,{optional:!0});disableScheduling=Te(AS,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Gr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Zw):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Te(DS,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof av||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?k4:qF;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Zw+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,k4(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qZ(){return typeof $localize<"u"&&$localize.locale||wv}var Iv=new Ye("",{providedIn:"root",factory:()=>Te(Iv,{optional:!0,skipSelf:!0})||qZ()});function $i(n){return T3(n)}function og(n,e){return R1(n,e?.equal)}var JL=class{[yo];constructor(e){this[yo]=e}destroy(){this[yo].destroy()}};var a6=Symbol("InputSignalNode#UNSET"),JZ=Rt(Oe({},O1),{transformFn:void 0,applyValueToInputSignal(n,e){Cp(n,e)}});function c6(n,e){let t=Object.create(JZ);t.value=n,t.transformFn=e?.transform;function r(){if(wp(t),t.value===a6){let i=null;throw new Je(-950,i)}return t.value}return r[yo]=t,r}var Db=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>fv(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},eX=new Ye("");eX.__NG_ELEMENT_ID__=n=>{let e=Oi();if(e===null)throw new Je(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new Je(204,!1)};function e6(n,e){return c6(n,e)}function tX(n){return c6(a6,n)}var l6=(e6.required=tX,e6);function nX(n,e,t){let r=new uv(t);return Promise.resolve(r)}function t6(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var Tb=new Ye(""),rX=new Ye("");function Sv(n){return!n.moduleRef}function iX(n){let e=Sv(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ut);return t.run(()=>{Sv(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(gs),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Sv(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Tb);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Tb);s.add(o),n.moduleRef.onDestroy(()=>{iv(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return sX(r,t,()=>{let o=e.get(Hc),s=o.add(),a=e.get(r5);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Iv,wv);if(OL(c||wv),!e.get(rX,!0))return Sv(n)?e.get(Yo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Sv(n)){let u=e.get(Yo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return u6?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var u6;function n6(){u6=oX}function oX(n,e){let t=n.injector.get(Yo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Je(-403,!1);e.push(n)}function sX(n,e,t){try{let r=t();return sd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var d6=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>$F(r?.ngZone,Rt(Oe({},f5({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[ZL({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Gl,useExisting:XL},v4],c=DL(t.moduleType,this.injector,a);return n6(),iX({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=i5({},r);return n6(),nX(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Tb,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(Ve(Rn))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),w5=null;function aX(n){if(x5())throw new Je(400,!1);PL(),w5=n;let e=n.get(d6);return uX(n),e}function b5(n,e,t=[]){let r=`Platform: ${e}`,i=new Ye(r);return(o=[])=>{let s=x5();if(!s){let a=[...t,...o,{provide:i,useValue:!0}];s=n?.(a)??aX(cX(a,r))}return lX(i)}}function cX(n=[],e){return Rn.create({name:e,providers:[{provide:H0,useValue:"platform"},{provide:Tb,useValue:new Set([()=>w5=null])},...n]})}function lX(n){let e=x5();if(!e)throw new Je(-401,!1);return e}function x5(){return w5?.get(d6)??null}function uX(n){let e=n.get(cb,null);vi(n,()=>{e?.forEach(t=>t())})}function cd(){return!1}var Yc=(()=>{class n{static __NG_ELEMENT_ID__=dX}return n})();function dX(n){return fX(Oi(),sn(),(n&16)===16)}function fX(n,e,t){if(Yl(n)&&!t){let r=xa(n.index,e);return new id(r,r)}else if(n.type&175){let r=e[ya];return new id(r,e)}return null}var h5=class{constructor(){}supports(e){return QA(e)}create(e){return new p5(e)}},hX=(n,e)=>e,p5=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||hX}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<r6(r,i,o)?t:r,a=r6(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let m=0;m<l;m++){let g=m<o.length?o[m]:o[m]=0,x=g+m;u<=x&&x<l&&(o[m]=g+1)}let h=s.previousIndex;o[h]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!QA(e))throw new Je(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,vL(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new g5(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Mb),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Mb),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},g5=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},m5=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Mb=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new m5,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function r6(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var v5=class{constructor(){}supports(e){return e instanceof Map||bb(e)}create(){return new _5}},_5=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||bb(e)))throw new Je(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new y5(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},y5=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function i6(){return new C5([new h5])}var C5=(()=>{class n{factories;static \u0275prov=Ze({token:n,providedIn:"root",factory:i6});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=Te(n,{optional:!0,skipSelf:!0});return n.create(t,r||i6())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Je(901,!1)}}return n})();function o6(){return new E5([new v5])}var E5=(()=>{class n{static \u0275prov=Ze({token:n,providedIn:"root",factory:o6});factories;constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=Te(n,{optional:!0,skipSelf:!0});return n.create(t,r||o6())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Je(901,!1)}}return n})();var f6=b5(null,"core",[]),h6=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(Ve(Yo))};static \u0275mod=dr({type:n});static \u0275inj=ir({})}return n})();function ld(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function p6(n){let e=Kl(n);if(!e)return null;let t=new qf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var v6=null;function Hs(){return v6}function I5(n){v6??=n}var Av=class{},Dv=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Te(_6),providedIn:"platform"})}return n})(),S5=new Ye(""),_6=(()=>{class n extends Dv{_location;_history;_doc=Te(ni);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hs().getBaseHref(this._doc)}onPopState(t){let r=Hs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Hs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Nb(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function g6(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function oc(n){return n&&n[0]!=="?"?`?${n}`:n}var sc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Te(kb),providedIn:"root"})}return n})(),Pb=new Ye(""),kb=(()=>{class n extends sc{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Te(ni).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Nb(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+oc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+oc(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+oc(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Ve(Dv),Ve(Pb,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ud=(()=>{class n{_subject=new kn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=mX(g6(m6(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+oc(r))}normalize(t){return n.stripTrailingSlash(gX(this._basePath,m6(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=oc;static joinWithSlash=Nb;static stripTrailingSlash=g6;static \u0275fac=function(r){return new(r||n)(Ve(sc))};static \u0275prov=Ze({token:n,factory:()=>pX(),providedIn:"root"})}return n})();function pX(){return new ud(Ve(sc))}function gX(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function m6(n){return n.replace(/\/index.html$/,"")}function mX(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var M5=(()=>{class n extends sc{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Nb(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+oc(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+oc(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Ve(Dv),Ve(Pb,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})();var N5=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(N5||{});var Qc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function sg(n,e){let t=Ab(n),r=t[Jl.NumberSymbols][e];if(typeof r>"u"){if(e===Qc.CurrencyDecimal)return t[Jl.NumberSymbols][Qc.Decimal];if(e===Qc.CurrencyGroup)return t[Jl.NumberSymbols][Qc.Group]}return r}function C6(n,e){return Ab(n)[Jl.NumberFormats][e]}var vX=/^(\d+)?\.((\d+)(-(\d+))?)?$/,y6=22,Rb=".",Tv="0",_X=";",yX=",",A5="#";function wX(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=sg(t,Qc.Infinity);else{let l=CX(n);s&&(l=xX(l));let u=e.minInt,h=e.minFrac,m=e.maxFrac;if(o){let Y=o.match(vX);if(Y===null)throw new Je(2306,!1);let B=Y[1],K=Y[3],oe=Y[5];B!=null&&(u=D5(B)),K!=null&&(h=D5(K)),oe!=null?m=D5(oe):K!=null&&h>m&&(m=h)}EX(l,h,m);let g=l.digits,x=l.integerLen,I=l.exponent,M=[];for(c=g.every(Y=>!Y);x<u;x++)g.unshift(0);for(;x<0;x++)g.unshift(0);x>0?M=g.splice(x,g.length):(M=g,g=[0]);let P=[];for(g.length>=e.lgSize&&P.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)P.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&P.unshift(g.join("")),a=P.join(sg(t,r)),M.length&&(a+=sg(t,i)+M.join("")),I&&(a+=sg(t,Qc.Exponential)+"+"+I)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function E6(n,e,t){let r=C6(e,N5.Decimal),i=bX(r,sg(e,Qc.MinusSign));return wX(n,i,e,Qc.Group,Qc.Decimal,t)}function bX(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(_X),i=r[0],o=r[1],s=i.indexOf(Rb)!==-1?i.split(Rb):[i.substring(0,i.lastIndexOf(Tv)+1),i.substring(i.lastIndexOf(Tv)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(A5));for(let u=0;u<c.length;u++){let h=c.charAt(u);h===Tv?t.minFrac=t.maxFrac=u+1:h===A5?t.maxFrac=u+1:t.posSuf+=h}let l=a.split(yX);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let u=i.length-t.posPre.length-t.posSuf.length,h=o.indexOf(A5);t.negPre=o.substring(0,h).replace(/'/g,""),t.negSuf=o.slice(h+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function xX(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function CX(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Rb))>-1&&(e=e.replace(Rb,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Tv;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Tv;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>y6&&(r=r.splice(0,y6-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function EX(n,e,t){if(e>t)throw new Je(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let h=s;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let h=1;h<s;h++)r[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,u=r.reduceRight(function(h,m,g,x){return m=m+h,x[g]=m<10?m:m-10,c&&(x[g]===0&&g>=l?x.pop():c=!1),m>=10?1:0},0);u&&(r.unshift(u),n.integerLen++)}function D5(n){let e=parseInt(n);if(isNaN(e))throw new Je(2305,!1);return e}var T5=/\s+/,w6=[],Qf=(()=>{class n{_ngEl;_renderer;initialClasses=w6;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(T5):w6}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(T5):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(T5).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(tt(oo),tt(Wo))};static \u0275dir=Yn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Ob=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Gi=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ob(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),b6(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);b6(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(tt(nu),tt(od),tt(C5))};static \u0275dir=Yn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function b6(n,e){n.context.$implicit=e.item}var Fi=(()=>{class n{_viewContainer;_context=new Fb;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){x6(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){x6(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(tt(nu),tt(od))};static \u0275dir=Yn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Fb=class{$implicit=null;ngIf=null};function x6(n,e){if(n&&!n.createEmbeddedView)throw new Je(2020,!1)}var P5=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:nc.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(tt(oo),tt(E5),tt(Wo))};static \u0275dir=Yn({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function I6(n,e){return new Je(2100,!1)}var k5=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!IX(t))return null;i||=this._locale;try{let o=SX(t);return E6(o,i,r)}catch(o){throw I6(n,o.message)}}static \u0275fac=function(r){return new(r||n)(tt(Iv,16))};static \u0275pipe=vv({name:"number",type:n,pure:!0})}return n})();function IX(n){return!(n==null||n===""||n!==n)}function SX(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Je(2309,!1);return n}var R5=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw I6(n,t);return t.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=vv({name:"slice",type:n,pure:!1})}return n})();var ac=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=ir({})}return n})();function O5(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Mv=class{};function S6(n,e,t){return a5(n,e,t)}var L5="browser",AX="server";function V5(n){return n===L5}function Lb(n){return n===AX}var A6=(()=>{class n{static \u0275prov=Ze({token:n,providedIn:"root",factory:()=>new F5(Te(ni),window)})}return n})(),F5=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Rt(Oe({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=DX(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Za(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Rt(Oe({},t),{left:i-s[0],top:o-s[1]}))}};function DX(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Nv=class{_doc;constructor(e){this._doc=e}manager},Vb=(()=>{class n extends Nv{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Ve(ni))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),Bb=new Ye(""),q5=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Vb));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Vb);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Je(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Ve(Bb),Ve(Ut))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),j5="ng-app-id";function D6(n){for(let e of n)e.remove()}function T6(n,e){let t=e.createElement("style");return t.textContent=n,t}function TX(n,e,t,r){let i=n.head?.querySelectorAll(`style[${j5}="${e}"],link[${j5}="${e}"]`);if(i)for(let o of i)o.removeAttribute(j5),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function U5(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var H5=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,TX(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,T6);r?.forEach(i=>this.addUsage(i,this.external,U5))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(D6(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])D6(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,T6(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,U5(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Ve(ni),Ve(ab),Ve(lb,8),Ve(Hi))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),B5={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$5=/%COMP%/g;var N6="%COMP%",MX=`_nghost-${N6}`,NX=`_ngcontent-${N6}`,PX=!0,kX=new Ye("",{providedIn:"root",factory:()=>PX});function RX(n){return NX.replace($5,n)}function OX(n){return MX.replace($5,n)}function P6(n,e){return e.map(t=>t.replace($5,n))}var G5=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Pv(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof jb?i.applyToHost(t):i instanceof kv&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Zl.Emulated:o=new jb(c,l,r,this.appId,u,s,a,h,m);break;case Zl.ShadowDom:return new z5(c,l,t,r,s,a,this.nonce,h,m);default:o=new kv(c,l,r,u,s,a,h,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Ve(q5),Ve(H5),Ve(ab),Ve(kX),Ve(ni),Ve(Ut),Ve(lb),Ve(Gf,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),Pv=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(B5[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(M6(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(M6(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Je(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=B5[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=B5[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(nc.DashCase|nc.Important)?e.style.setProperty(t,r,i&nc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&nc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Hs().getGlobalEventTarget(this.doc,e),!e))throw new Je(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function M6(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var z5=class extends Pv{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=P6(i.id,u);for(let m of u){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=m,this.shadowRoot.appendChild(g)}let h=i.getExternalStyles?.();if(h)for(let m of h){let g=U5(m,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},kv=class extends Pv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?P6(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Qp.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},jb=class extends kv{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,l,u),this.contentAttr=RX(u),this.hostAttr=OX(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ub=class n extends Av{supportsDOMEvents=!0;static makeCurrent(){I5(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=FX();return t==null?null:LX(t)}resetBaseElement(){Rv=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return O5(document.cookie,e)}},Rv=null;function FX(){return Rv=Rv||document.head.querySelector("base"),Rv?Rv.getAttribute("href"):null}function LX(n){return new URL(n,document.baseURI).pathname}var zb=class{addToWindow(e){mi.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Je(5103,!1);return o},mi.getAllAngularTestabilities=()=>e.getAllTestabilities(),mi.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=mi.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};mi.frameworkStabilizers||(mi.frameworkStabilizers=[]),mi.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Hs().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},VX=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),k6=["alt","control","meta","shift"],jX={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BX={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},R6=(()=>{class n extends Nv{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hs().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),k6.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=jX[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),k6.forEach(s=>{if(s!==i){let a=BX[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Ve(ni))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})();function UX(){Ub.makeCurrent()}function zX(){return new Qa}function qX(){return bA(document),document}var HX=[{provide:Hi,useValue:L5},{provide:cb,useValue:UX,multi:!0},{provide:ni,useFactory:qX}],W5=b5(f6,"browser",HX);var $X=[{provide:ng,useClass:zb},{provide:Eb,useClass:_v,deps:[Ut,yv,ng]},{provide:_v,useClass:_v,deps:[Ut,yv,ng]}],GX=[{provide:H0,useValue:"root"},{provide:Qa,useFactory:zX},{provide:Bb,useClass:Vb,multi:!0,deps:[ni]},{provide:Bb,useClass:R6,multi:!0,deps:[ni]},G5,H5,q5,{provide:zf,useExisting:G5},{provide:Mv,useClass:VX},[]],K5=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=ir({providers:[...GX,...$X],imports:[ac,h6]})}return n})();var O6=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Ve(ni))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Y5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=Ve(WX),i},providedIn:"root"})}return n})(),WX=(()=>{class n extends Y5{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case rc.NONE:return r;case rc.HTML:return eu(r,"HTML")?Da(r):TA(this._doc,String(r)).toString();case rc.STYLE:return eu(r,"Style")?Da(r):r;case rc.SCRIPT:if(eu(r,"Script"))return Da(r);throw new Je(5200,!1);case rc.URL:return eu(r,"URL")?Da(r):hv(String(r));case rc.RESOURCE_URL:if(eu(r,"ResourceURL"))return Da(r);throw new Je(5201,!1);default:throw new Je(5202,!1)}}bypassSecurityTrustHtml(t){return EA(t)}bypassSecurityTrustStyle(t){return IA(t)}bypassSecurityTrustScript(t){return SA(t)}bypassSecurityTrustUrl(t){return AA(t)}bypassSecurityTrustResourceUrl(t){return DA(t)}static \u0275fac=function(r){return new(r||n)(Ve(ni))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $6=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(tt(Wo),tt(oo))};static \u0275dir=Yn({type:n})}return n})(),Uv=(()=>{class n extends $6{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,features:[Ko]})}return n})(),ug=new Ye(""),KX={provide:ug,useExisting:ps(()=>J5),multi:!0},J5=(()=>{class n extends Uv{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Se("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ic([KX]),Ko]})}return n})(),YX={provide:ug,useExisting:ps(()=>Co),multi:!0};function QX(){let n=Hs()?Hs().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ZX=new Ye(""),Co=(()=>{class n extends $6{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!QX())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(tt(Wo),tt(oo),tt(ZX,8))};static \u0275dir=Yn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Se("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ic([YX]),Ko]})}return n})();function XX(n){return n==null||JX(n)===0}function JX(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Zb=new Ye(""),G6=new Ye("");function eJ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function tJ(n){return XX(n.value)?{required:!0}:null}function F6(n){return null}function W6(n){return n!=null}function K6(n){return sd(n)?mn(n):n}function Y6(n){let e={};return n.forEach(t=>{e=t!=null?Oe(Oe({},e),t):e}),Object.keys(e).length===0?null:e}function Q6(n,e){return e.map(t=>t(n))}function nJ(n){return!n.validate}function Z6(n){return n.map(e=>nJ(e)?e:t=>e.validate(t))}function rJ(n){if(!n)return null;let e=n.filter(W6);return e.length==0?null:function(t){return Y6(Q6(t,e))}}function eD(n){return n!=null?rJ(Z6(n)):null}function iJ(n){if(!n)return null;let e=n.filter(W6);return e.length==0?null:function(t){let r=Q6(t,e).map(K6);return xI(r).pipe(ut(Y6))}}function tD(n){return n!=null?iJ(Z6(n)):null}function L6(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function oJ(n){return n._rawValidators}function sJ(n){return n._rawAsyncValidators}function Z5(n){return n?Array.isArray(n)?n:[n]:[]}function Hb(n,e){return Array.isArray(n)?n.includes(e):n===e}function V6(n,e){let t=Z5(e);return Z5(n).forEach(i=>{Hb(t,i)||t.push(i)}),t}function j6(n,e){return Z5(e).filter(t=>!Hb(n,t))}var $b=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},lg=class extends $b{name;get formDirective(){return null}get path(){return null}},Bv=class extends $b{_parent=null;name=null;valueAccessor=null},Gb=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},aJ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cTe=Rt(Oe({},aJ),{"[class.ng-submitted]":"isSubmitted"}),vs=(()=>{class n extends Gb{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(tt(Bv,2))};static \u0275dir=Yn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&so("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ko]})}return n})(),dg=(()=>{class n extends Gb{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(tt(lg,10))};static \u0275dir=Yn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&so("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Ko]})}return n})();var Ov="VALID",qb="INVALID",ag="PENDING",Fv="DISABLED",dd=class{},Wb=class extends dd{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Vv=class extends dd{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},jv=class extends dd{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},cg=class extends dd{status;source;constructor(e,t){super(),this.status=e,this.source=t}},X5=class extends dd{source;constructor(e){super(),this.source=e}},Kb=class extends dd{source;constructor(e){super(),this.source=e}};function X6(n){return(Xb(n)?n.validators:n)||null}function cJ(n){return Array.isArray(n)?eD(n):n||null}function J6(n,e){return(Xb(e)?e.asyncValidators:n)||null}function lJ(n){return Array.isArray(n)?tD(n):n||null}function Xb(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function uJ(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Je(1e3,"");if(!r[t])throw new Je(1001,"")}function dJ(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Je(1002,"")})}var Yb=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return $i(this.statusReactive)}set status(e){$i(()=>this.statusReactive.set(e))}_status=og(()=>this.statusReactive());statusReactive=Ea(void 0);get valid(){return this.status===Ov}get invalid(){return this.status===qb}get pending(){return this.status==ag}get disabled(){return this.status===Fv}get enabled(){return this.status!==Fv}errors;get pristine(){return $i(this.pristineReactive)}set pristine(e){$i(()=>this.pristineReactive.set(e))}_pristine=og(()=>this.pristineReactive());pristineReactive=Ea(!0);get dirty(){return!this.pristine}get touched(){return $i(this.touchedReactive)}set touched(e){$i(()=>this.touchedReactive.set(e))}_touched=og(()=>this.touchedReactive());touchedReactive=Ea(!1);get untouched(){return!this.touched}_events=new kn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(V6(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(V6(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(j6(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(j6(e,this._rawAsyncValidators))}hasValidator(e){return Hb(this._rawValidators,e)}hasAsyncValidator(e){return Hb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Rt(Oe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new jv(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new jv(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Rt(Oe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Vv(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Vv(!0,r))}markAsPending(e={}){this.status=ag;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new cg(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Rt(Oe({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fv,this.errors=null,this._forEachChild(i=>{i.disable(Rt(Oe({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wb(this.value,r)),this._events.next(new cg(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Rt(Oe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ov,this._forEachChild(r=>{r.enable(Rt(Oe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Rt(Oe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ov||this.status===ag)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wb(this.value,t)),this._events.next(new cg(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Rt(Oe({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fv:Ov}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ag,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=K6(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new cg(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new jr,this.statusChanges=new jr}_calculateStatus(){return this._allControlsDisabled()?Fv:this.errors?qb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ag)?ag:this._anyControlsHaveStatus(qb)?qb:Ov}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Vv(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new jv(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xb(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=cJ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=lJ(this._rawAsyncValidators)}},Qb=class extends Yb{constructor(e,t,r){super(X6(t),J6(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){dJ(this,!0,e),Object.keys(e).forEach(r=>{uJ(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Kb(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var nD=new Ye("",{providedIn:"root",factory:()=>rD}),rD="always";function fJ(n,e){return[...e.path,n]}function e8(n,e,t=rD){t8(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),pJ(n,e),mJ(n,e),gJ(n,e),hJ(n,e)}function B6(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hJ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function t8(n,e){let t=oJ(n);e.validator!==null?n.setValidators(L6(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=sJ(n);e.asyncValidator!==null?n.setAsyncValidators(L6(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();B6(e._rawValidators,i),B6(e._rawAsyncValidators,i)}function pJ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&n8(n,e)})}function gJ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&n8(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function n8(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mJ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function vJ(n,e){n==null,t8(n,e)}function _J(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function yJ(n){return Object.getPrototypeOf(n.constructor)===Uv}function wJ(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function bJ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Co?t=o:yJ(o)?r=o:i=o}),i||r||t||null}var xJ={provide:lg,useExisting:ps(()=>Zf)},Lv=Promise.resolve(),Zf=(()=>{class n extends lg{callSetDisabledState;get submitted(){return $i(this.submittedReactive)}_submitted=og(()=>this.submittedReactive());submittedReactive=Ea(!1);_directives=new Set;form;ngSubmit=new jr;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Qb({},eD(t),tD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Lv.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),e8(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Lv.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Lv.then(()=>{let r=this._findContainer(t.path),i=new Qb({});vJ(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Lv.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Lv.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),wJ(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new X5(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(tt(Zb,10),tt(G6,10),tt(nD,8))};static \u0275dir=Yn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Se("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ic([xJ]),Ko]})}return n})();function U6(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function z6(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var CJ=class extends Yb{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(X6(t),J6(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(z6(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Kb(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){U6(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){U6(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){z6(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var EJ={provide:Bv,useExisting:ps(()=>Qo)},q6=Promise.resolve(),Qo=(()=>{class n extends Bv{_changeDetectorRef;callSetDisabledState;control=new CJ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new jr;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=bJ(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),_J(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){e8(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){q6.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ld(r);q6.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?fJ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(tt(lg,9),tt(Zb,10),tt(G6,10),tt(ug,10),tt(Yc,8),tt(nD,8))};static \u0275dir=Yn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ic([EJ]),Ko,Sa]})}return n})();var fg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Yn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),IJ={provide:ug,useExisting:ps(()=>iD),multi:!0},iD=(()=>{class n extends Uv{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Se("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ic([IJ]),Ko]})}return n})();var SJ={provide:ug,useExisting:ps(()=>Ma),multi:!0};function r8(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function AJ(n){return n.split(":")[0]}var Ma=(()=>{class n extends Uv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=Te(Yo).injector;destroyRef=Te(Ca);cdr=Te(Yc);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,gv({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=r8(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=AJ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Se("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ic([SJ]),Ko]})}return n})(),Zc=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(r8(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(tt(oo),tt(Wo),tt(Ma,9))};static \u0275dir=Yn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),DJ={provide:ug,useExisting:ps(()=>i8),multi:!0};function H6(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function TJ(n){return n.split(":")[0]}var i8=(()=>{class n extends Uv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=TJ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Se("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ic([DJ]),Ko]})}return n})(),Xc=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(H6(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(H6(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(tt(oo),tt(Wo),tt(i8,9))};static \u0275dir=Yn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function MJ(n){return typeof n=="number"?n:parseFloat(n)}var o8=(()=>{class n{_validator=F6;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):F6,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Yn({type:n,features:[Sa]})}return n})();var NJ={provide:Zb,useExisting:ps(()=>oD),multi:!0},oD=(()=>{class n extends o8{min;inputName="min";normalizeInput=t=>MJ(t);createValidator=t=>eJ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ru("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[ic([NJ]),Ko]})}return n})(),PJ={provide:Zb,useExisting:ps(()=>Xf),multi:!0};var Xf=(()=>{class n extends o8{required;inputName="required";normalizeInput=ld;createValidator=t=>tJ;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ru("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ic([PJ]),Ko]})}return n})();var kJ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=ir({})}return n})();var fd=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nD,useValue:t.callSetDisabledState??rD}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=ir({imports:[kJ]})}return n})();var nn="primary",e_=Symbol("RouteTitle"),uD=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function nh(n){return new uD(n)}function h8(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function RJ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Jc(n[t],e[t]))return!1;return!0}function Jc(n,e){let t=n?dD(n):void 0,r=e?dD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!p8(n[i],e[i]))return!1;return!0}function dD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function p8(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function g8(n){return n.length>0?n[n.length-1]:null}function iu(n){return wI(n)?n:sd(n)?mn(Promise.resolve(n)):mt(n)}var OJ={exact:v8,subset:_8},m8={exact:FJ,subset:LJ,ignored:()=>!0};function s8(n,e,t){return OJ[t.paths](n.root,e.root,t.matrixParams)&&m8[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function FJ(n,e){return Jc(n,e)}function v8(n,e,t){if(!eh(n.segments,e.segments)||!t2(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!v8(n.children[r],e.children[r],t))return!1;return!0}function LJ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>p8(n[t],e[t]))}function _8(n,e,t){return y8(n,e,e.segments,t)}function y8(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!eh(i,t)||e.hasChildren()||!t2(i,t,r))}else if(n.segments.length===t.length){if(!eh(n.segments,t)||!t2(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!_8(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!eh(n.segments,i)||!t2(n.segments,i,r)||!n.children[nn]?!1:y8(n.children[nn],e,o,r)}}function t2(n,e,t){return e.every((r,i)=>m8[t](n[i].parameters,r.parameters))}var tl=class{root;queryParams;fragment;_queryParamMap;constructor(e=new On([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=nh(this.queryParams),this._queryParamMap}toString(){return BJ.serialize(this)}},On=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return n2(this)}},hd=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=nh(this.parameters),this._parameterMap}toString(){return b8(this)}};function VJ(n,e){return eh(n,e)&&n.every((t,r)=>Jc(t.parameters,e[r].parameters))}function eh(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function jJ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===nn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==nn&&(t=t.concat(e(i,r)))}),t}var rh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>new pd,providedIn:"root"})}return n})(),pd=class{parse(e){let t=new hD(e);return new tl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${zv(e.root,!0)}`,r=qJ(e.queryParams),i=typeof e.fragment=="string"?`#${UJ(e.fragment)}`:"";return`${t}${r}${i}`}},BJ=new pd;function n2(n){return n.segments.map(e=>b8(e)).join("/")}function zv(n,e){if(!n.hasChildren())return n2(n);if(e){let t=n.children[nn]?zv(n.children[nn],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==nn&&r.push(`${i}:${zv(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=jJ(n,(r,i)=>i===nn?[zv(n.children[nn],!1)]:[`${i}:${zv(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[nn]!=null?`${n2(n)}/${t[0]}`:`${n2(n)}/(${t.join("//")})`}}function w8(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jb(n){return w8(n).replace(/%3B/gi,";")}function UJ(n){return encodeURI(n)}function fD(n){return w8(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function r2(n){return decodeURIComponent(n)}function a8(n){return r2(n.replace(/\+/g,"%20"))}function b8(n){return`${fD(n.path)}${zJ(n.parameters)}`}function zJ(n){return Object.entries(n).map(([e,t])=>`;${fD(e)}=${fD(t)}`).join("")}function qJ(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Jb(t)}=${Jb(i)}`).join("&"):`${Jb(t)}=${Jb(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var HJ=/^[^\/()?;#]+/;function sD(n){let e=n.match(HJ);return e?e[0]:""}var $J=/^[^\/()?;=#]+/;function GJ(n){let e=n.match($J);return e?e[0]:""}var WJ=/^[^=?&#]+/;function KJ(n){let e=n.match(WJ);return e?e[0]:""}var YJ=/^[^&#]+/;function QJ(n){let e=n.match(YJ);return e?e[0]:""}var hD=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new On([],{}):new On([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[nn]=new On(e,t)),r}parseSegment(){let e=sD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Je(4009,!1);return this.capture(e),new hd(r2(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=GJ(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=sD(this.remaining);i&&(r=i,this.capture(r))}e[r2(t)]=r2(r)}parseQueryParam(e){let t=KJ(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=QJ(this.remaining);s&&(r=s,this.capture(r))}let i=a8(t),o=a8(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=sD(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Je(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=nn);let s=this.parseChildren();t[o??nn]=Object.keys(s).length===1&&s[nn]?s[nn]:new On([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Je(4011,!1)}};function x8(n){return n.segments.length>0?new On([],{[nn]:n}):n}function C8(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=C8(i);if(r===nn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new On(n.segments,e);return ZJ(t)}function ZJ(n){if(n.numberOfChildren===1&&n.children[nn]){let e=n.children[nn];return new On(n.segments.concat(e.segments),e.children)}return n}function gd(n){return n instanceof tl}function E8(n,e,t=null,r=null){let i=I8(n);return S8(i,e,t,r)}function I8(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new On(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=x8(r);return e??i}function S8(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return aD(i,i,i,t,r);let o=XJ(e);if(o.toRoot())return aD(i,i,new On([],{}),t,r);let s=JJ(o,i,n),a=s.processChildren?Hv(s.segmentGroup,s.index,o.commands):D8(s.segmentGroup,s.index,o.commands);return aD(i,s.segmentGroup,a,t,r)}function i2(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Gv(n){return typeof n=="object"&&n!=null&&n.outlets}function aD(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=A8(n,e,t);let a=x8(C8(s));return new tl(a,o,i)}function A8(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=A8(o,e,t)}),new On(n.segments,r)}var o2=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&i2(r[0]))throw new Je(4003,!1);let i=r.find(Gv);if(i&&i!==g8(r))throw new Je(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function XJ(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new o2(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new o2(t,e,r)}var gg=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function JJ(n,e,t){if(n.isAbsolute)return new gg(e,!0,0);if(!t)return new gg(e,!1,NaN);if(t.parent===null)return new gg(t,!0,0);let r=i2(n.commands[0])?0:1,i=t.segments.length-1+r;return eee(t,i,n.numberOfDoubleDots)}function eee(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Je(4005,!1);i=r.segments.length}return new gg(r,!1,i-o)}function tee(n){return Gv(n[0])?n[0].outlets:{[nn]:n}}function D8(n,e,t){if(n??=new On([],{}),n.segments.length===0&&n.hasChildren())return Hv(n,e,t);let r=nee(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new On(n.segments.slice(0,r.pathIndex),{});return o.children[nn]=new On(n.segments.slice(r.pathIndex),n.children),Hv(o,0,i)}else return r.match&&i.length===0?new On(n.segments,{}):r.match&&!n.hasChildren()?pD(n,e,t):r.match?Hv(n,0,i):pD(n,e,t)}function Hv(n,e,t){if(t.length===0)return new On(n.segments,{});{let r=tee(t),i={};if(Object.keys(r).some(o=>o!==nn)&&n.children[nn]&&n.numberOfChildren===1&&n.children[nn].segments.length===0){let o=Hv(n.children[nn],e,t);return new On(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=D8(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new On(n.segments,i)}}function nee(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Gv(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!l8(c,l,s))return o;r+=2}else{if(!l8(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function pD(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Gv(o)){let c=ree(o.outlets);return new On(r,c)}if(i===0&&i2(t[0])){let c=n.segments[e];r.push(new hd(c.path,c8(t[0]))),i++;continue}let s=Gv(o)?o.outlets[nn]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&i2(a)?(r.push(new hd(s,c8(a))),i+=2):(r.push(new hd(s,{})),i++)}return new On(r,{})}function ree(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=pD(new On([],{}),0,r))}),e}function c8(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function l8(n,e,t){return n==t.path&&Jc(e,t.parameters)}var mg="imperative",Li=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Li||{}),Gs=class{id;url;constructor(e,t){this.id=e,this.url=t}},md=class extends Gs{type=Li.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xo=class extends Gs{urlAfterRedirects;type=Li.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Zo=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Zo||{}),_g=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(_g||{}),el=class extends Gs{reason;code;type=Li.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},nl=class extends Gs{reason;code;type=Li.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},yg=class extends Gs{error;target;type=Li.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wv=class extends Gs{urlAfterRedirects;state;type=Li.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},s2=class extends Gs{urlAfterRedirects;state;type=Li.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},a2=class extends Gs{urlAfterRedirects;state;shouldActivate;type=Li.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},c2=class extends Gs{urlAfterRedirects;state;type=Li.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},l2=class extends Gs{urlAfterRedirects;state;type=Li.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},u2=class{route;type=Li.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},d2=class{route;type=Li.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},f2=class{snapshot;type=Li.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},h2=class{snapshot;type=Li.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},p2=class{snapshot;type=Li.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},g2=class{snapshot;type=Li.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wg=class{routerEvent;position;anchor;type=Li.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Kv=class{},bg=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function iee(n){return!(n instanceof Kv)&&!(n instanceof bg)}function oee(n,e){return n.providers&&!n._injector&&(n._injector=tg(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lc(n){return n.outlet||nn}function see(n,e){let t=n.filter(r=>lc(r)===e);return t.push(...n.filter(r=>lc(r)!==e)),t}function Eg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var m2=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Eg(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ih(this.rootInjector)}},ih=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new m2(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Ve(Wn))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v2=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=gD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=gD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=mD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return mD(e,this._root).map(t=>t.value)}};function gD(n,e){if(n===e.value)return e;for(let t of e.children){let r=gD(n,t);if(r)return r}return null}function mD(n,e){if(n===e.value)return[e];for(let t of e.children){let r=mD(n,t);if(r.length)return r.unshift(e),r}return[]}var $s=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function pg(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Yv=class extends v2{snapshot;constructor(e,t){super(e),this.snapshot=t,ED(this,e)}toString(){return this.snapshot.toString()}};function T8(n){let e=aee(n),t=new to([new hd("",{})]),r=new to({}),i=new to({}),o=new to({}),s=new to(""),a=new Ws(t,r,o,s,i,nn,n,e.root);return a.snapshot=e.root,new Yv(new $s(a,[]),e)}function aee(n){let e={},t={},r={},o=new th([],e,r,"",t,nn,n,null,{});return new Qv("",new $s(o,[]))}var Ws=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ut(l=>l[e_]))??mt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ut(e=>nh(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ut(e=>nh(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _2(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Oe(Oe({},e.params),n.params),data:Oe(Oe({},e.data),n.data),resolve:Oe(Oe(Oe(Oe({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Oe({},n.params),data:Oe({},n.data),resolve:Oe(Oe({},n.data),n._resolvedData??{})},i&&N8(i)&&(r.resolve[e_]=i.title),r}var th=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[e_]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=nh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=nh(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Qv=class extends v2{url;constructor(e,t){super(t),this.url=e,ED(this,t)}toString(){return M8(this._root)}};function ED(n,e){e.value._routerState=n,e.children.forEach(t=>ED(n,t))}function M8(n){let e=n.children.length>0?` { ${n.children.map(M8).join(", ")} } `:"";return`${n.value}${e}`}function cD(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Jc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Jc(e.params,t.params)||n.paramsSubject.next(t.params),RJ(e.url,t.url)||n.urlSubject.next(t.url),Jc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function vD(n,e){let t=Jc(n.params,e.params)&&VJ(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||vD(n.parent,e.parent))}function N8(n){return typeof n.title=="string"||n.title===null}var P8=new Ye(""),t_=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=nn;activateEvents=new jr;deactivateEvents=new jr;attachEvents=new jr;detachEvents=new jr;routerOutletData=l6();parentContexts=Te(ih);location=Te(nu);changeDetector=Te(Yc);inputBinder=Te(n_,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Je(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Je(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Je(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Je(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new _D(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Yn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Sa]})}return n})(),_D=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ws?this.route:e===ih?this.childContexts:e===P8?this.outletData:this.parent.get(e,t)}},n_=new Ye(""),ID=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=O0([r.queryParams,r.params,r.data]).pipe(Nn(([o,s,a],c)=>(a=Oe(Oe(Oe({},o),s),a),c===0?mt(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=p6(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),SD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ht(0,"router-outlet")},dependencies:[t_],encapsulation:2})}return n})();function AD(n){let e=n.children&&n.children.map(AD),t=e?Rt(Oe({},n),{children:e}):Oe({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==nn&&(t.component=SD),t}function cee(n,e,t){let r=Zv(n,e._root,t?t._root:void 0);return new Yv(r,e)}function Zv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=lee(n,e,t);return new $s(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Zv(n,a)),s}}let r=uee(e.value),i=e.children.map(o=>Zv(n,o));return new $s(r,i)}}function lee(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zv(n,r,i);return Zv(n,r)})}function uee(n){return new Ws(new to(n.url),new to(n.params),new to(n.queryParams),new to(n.fragment),new to(n.data),n.outlet,n.component,n)}var xg=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},k8="ngNavigationCancelingError";function y2(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=gd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=R8(!1,Zo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function R8(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[k8]=!0,t.cancellationCode=e,t}function dee(n){return O8(n)&&gd(n.url)}function O8(n){return!!n&&n[k8]}var fee=(n,e,t,r)=>ut(i=>(new yD(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),yD=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),cD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=pg(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=pg(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=pg(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=pg(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new g2(o.value.snapshot))}),e.children.length&&this.forwardEvent(new h2(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(cD(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),cD(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},w2=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},vg=class{component;route;constructor(e,t){this.component=e,this.route=t}};function hee(n,e,t){let r=n._root,i=e?e._root:null;return qv(r,i,t,[r.value])}function pee(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ig(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!BI(n)?n:e.get(n):r}function qv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=pg(e);return n.children.forEach(s=>{gee(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>$v(a,t.getContext(s),i)),i}function gee(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=mee(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new w2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?qv(n,e,a?a.children:null,r,i):qv(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new vg(a.outlet.component,s))}else s&&$v(e,a,i),i.canActivateChecks.push(new w2(r)),o.component?qv(n,null,a?a.children:null,r,i):qv(n,null,t,r,i);return i}function mee(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!eh(n.url,e.url);case"pathParamsOrQueryParamsChange":return!eh(n.url,e.url)||!Jc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vD(n,e)||!Jc(n.queryParams,e.queryParams);case"paramsChange":default:return!vD(n,e)}}function $v(n,e,t){let r=pg(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?$v(s,e.children.getContext(o),t):$v(s,null,t):$v(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new vg(e.outlet.component,i)):t.canDeactivateChecks.push(new vg(null,i)):t.canDeactivateChecks.push(new vg(null,i))}function r_(n){return typeof n=="function"}function vee(n){return typeof n=="boolean"}function _ee(n){return n&&r_(n.canLoad)}function yee(n){return n&&r_(n.canActivate)}function wee(n){return n&&r_(n.canActivateChild)}function bee(n){return n&&r_(n.canDeactivate)}function xee(n){return n&&r_(n.canMatch)}function F8(n){return n instanceof Ka||n?.name==="EmptyError"}var e2=Symbol("INITIAL_VALUE");function Cg(){return Nn(n=>O0(n.map(e=>e.pipe(no(1),Yu(e2)))).pipe(ut(e=>{for(let t of e)if(t!==!0){if(t===e2)return e2;if(t===!1||Cee(t))return t}return!0}),xr(e=>e!==e2),no(1)))}function Cee(n){return gd(n)||n instanceof xg}function Eee(n,e){return ti(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?mt(Rt(Oe({},t),{guardsResult:!0})):Iee(s,r,i,n).pipe(ti(a=>a&&vee(a)?See(r,o,n,e):mt(a)),ut(a=>Rt(Oe({},t),{guardsResult:a})))})}function Iee(n,e,t,r){return mn(n).pipe(ti(i=>Nee(i.component,i.route,t,e,r)),Ya(i=>i!==!0,!0))}function See(n,e,t,r){return mn(e).pipe(Gu(i=>Rp(Dee(i.route.parent,r),Aee(i.route,r),Mee(n,i.path,t),Tee(n,i.route,t))),Ya(i=>i!==!0,!0))}function Aee(n,e){return n!==null&&e&&e(new p2(n)),mt(!0)}function Dee(n,e){return n!==null&&e&&e(new f2(n)),mt(!0)}function Tee(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return mt(!0);let i=r.map(o=>F0(()=>{let s=Eg(e)??t,a=Ig(o,s),c=yee(a)?a.canActivate(e,n):vi(s,()=>a(e,n));return iu(c).pipe(Ya())}));return mt(i).pipe(Cg())}function Mee(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>pee(s)).filter(s=>s!==null).map(s=>F0(()=>{let a=s.guards.map(c=>{let l=Eg(s.node)??t,u=Ig(c,l),h=wee(u)?u.canActivateChild(r,n):vi(l,()=>u(r,n));return iu(h).pipe(Ya())});return mt(a).pipe(Cg())}));return mt(o).pipe(Cg())}function Nee(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return mt(!0);let s=o.map(a=>{let c=Eg(e)??i,l=Ig(a,c),u=bee(l)?l.canDeactivate(n,e,t,r):vi(c,()=>l(n,e,t,r));return iu(u).pipe(Ya())});return mt(s).pipe(Cg())}function Pee(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return mt(!0);let o=i.map(s=>{let a=Ig(s,n),c=_ee(a)?a.canLoad(e,t):vi(n,()=>a(e,t));return iu(c)});return mt(o).pipe(Cg(),L8(r))}function L8(n){return B1(ki(e=>{if(typeof e!="boolean")throw y2(n,e)}),ut(e=>e===!0))}function kee(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return mt(!0);let o=i.map(s=>{let a=Ig(s,n),c=xee(a)?a.canMatch(e,t):vi(n,()=>a(e,t));return iu(c)});return mt(o).pipe(Cg(),L8(r))}var Xv=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Jv=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function hg(n){return kp(new Xv(n))}function Ree(n){return kp(new Je(4e3,!1))}function Oee(n){return kp(R8(!1,Zo.GuardRejected))}var wD=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return mt(r);if(i.numberOfChildren>1||!i.children[nn])return Ree(`${e.redirectTo}`);i=i.children[nn]}}applyRedirectCommands(e,t,r,i,o){return Fee(t,i,o).pipe(ut(s=>{if(s instanceof tl)throw new Jv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Jv(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new tl(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new On(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Je(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Fee(n,e,t){if(typeof n=="string")return mt(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:h}=e;return iu(vi(t,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}var bD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lee(n,e,t,r,i){let o=V8(n,e,t);return o.matched?(r=oee(e,r),kee(r,e,t,i).pipe(ut(s=>s===!0?o:Oe({},bD)))):mt(o)}function V8(n,e,t){if(e.path==="**")return Vee(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Oe({},bD):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||h8)(t,n,e);if(!i)return Oe({},bD);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Oe(Oe({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Vee(n){return{matched:!0,parameters:n.length>0?g8(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function u8(n,e,t,r){return t.length>0&&Uee(n,t,r)?{segmentGroup:new On(e,Bee(r,new On(t,n.children))),slicedSegments:[]}:t.length===0&&zee(n,t,r)?{segmentGroup:new On(n.segments,jee(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new On(n.segments,n.children),slicedSegments:t}}function jee(n,e,t,r){let i={};for(let o of t)if(x2(n,e,o)&&!r[lc(o)]){let s=new On([],{});i[lc(o)]=s}return Oe(Oe({},r),i)}function Bee(n,e){let t={};t[nn]=e;for(let r of n)if(r.path===""&&lc(r)!==nn){let i=new On([],{});t[lc(r)]=i}return t}function Uee(n,e,t){return t.some(r=>x2(n,e,r)&&lc(r)!==nn)}function zee(n,e,t){return t.some(r=>x2(n,e,r))}function x2(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qee(n,e,t){return e.length===0&&!n.children[t]}var xD=class{};function Hee(n,e,t,r,i,o,s="emptyOnly"){return new CD(n,e,t,r,i,s,o).recognize()}var $ee=31,CD=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new wD(this.urlSerializer,this.urlTree)}noMatchError(e){return new Je(4002,`'${e.segmentGroup}'`)}recognize(){let e=u8(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ut(({children:t,rootSnapshot:r})=>{let i=new $s(r,t),o=new Qv("",i),s=E8(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new th([],Object.freeze({}),Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),nn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,nn,t).pipe(ut(r=>({children:r,rootSnapshot:t})),zl(r=>{if(r instanceof Jv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xv?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ut(s=>s instanceof $s?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return mn(o).pipe(Gu(s=>{let a=r.children[s],c=see(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Ku((s,a)=>(s.push(...a),s)),Wu(null),II(),ti(s=>{if(s===null)return hg(r);let a=j8(s);return Gee(a),mt(a)}))}processSegment(e,t,r,i,o,s,a){return mn(t).pipe(Gu(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(zl(l=>{if(l instanceof Xv)return mt(null);throw l}))),Ya(c=>!!c),zl(c=>{if(F8(c))return qee(r,i,o)?mt(new xD):hg(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return lc(r)!==s&&(s===nn||!x2(i,o,r))?hg(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):hg(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:h,remainingSegments:m}=V8(t,i,o);if(!c)return hg(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$ee&&(this.allowRedirects=!1));let g=new th(o,l,Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,d8(i),lc(i),i.component??i._loadedComponent??null,i,f8(i)),x=_2(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(x.params),g.data=Object.freeze(x.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h,g,e).pipe(Nn(M=>this.applyRedirects.lineralizeSegments(i,M)),ti(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Lee(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Nn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Nn(({routes:l})=>{let u=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:g}=c,x=new th(m,h,Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,d8(r),lc(r),r.component??r._loadedComponent??null,r,f8(r)),I=_2(x,s,this.paramsInheritanceStrategy);x.params=Object.freeze(I.params),x.data=Object.freeze(I.data);let{segmentGroup:M,slicedSegments:P}=u8(t,m,g,l);if(P.length===0&&M.hasChildren())return this.processChildren(u,l,M,x).pipe(ut(B=>new $s(x,B)));if(l.length===0&&P.length===0)return mt(new $s(x,[]));let Y=lc(r)===o;return this.processSegment(u,l,M,P,Y?nn:o,!0,x).pipe(ut(B=>new $s(x,B instanceof $s?[B]:[])))}))):hg(t)))}getChildConfig(e,t,r){return t.children?mt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?mt({routes:t._loadedRoutes,injector:t._loadedInjector}):Pee(e,t,r,this.urlSerializer).pipe(ti(i=>i?this.configLoader.loadChildren(e,t).pipe(ki(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Oee(t))):mt({routes:[],injector:e})}};function Gee(n){n.sort((e,t)=>e.value.outlet===nn?-1:t.value.outlet===nn?1:e.value.outlet.localeCompare(t.value.outlet))}function Wee(n){let e=n.value.routeConfig;return e&&e.path===""}function j8(n){let e=[],t=new Set;for(let r of n){if(!Wee(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=j8(r.children);e.push(new $s(r.value,i))}return e.filter(r=>!t.has(r))}function d8(n){return n.data||{}}function f8(n){return n.resolve||{}}function Kee(n,e,t,r,i,o){return ti(s=>Hee(n,e,t,r,s.extractedUrl,i,o).pipe(ut(({state:a,tree:c})=>Rt(Oe({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Yee(n,e){return ti(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of B8(c))s.add(l);let a=0;return mn(s).pipe(Gu(c=>o.has(c)?Qee(c,r,n,e):(c.data=_2(c,c.parent,n).resolve,mt(void 0))),ki(()=>a++),Op(1),ti(c=>a===s.size?mt(t):wo))})}function B8(n){let e=n.children.map(t=>B8(t)).flat();return[n,...e]}function Qee(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!N8(i)&&(o[e_]=i.title),F0(()=>(n.data=_2(n,n.parent,t).resolve,Zee(o,n,e,r).pipe(ut(s=>(n._resolvedData=s,n.data=Oe(Oe({},n.data),s),null)))))}function Zee(n,e,t,r){let i=dD(n);if(i.length===0)return mt({});let o={};return mn(i).pipe(ti(s=>Xee(n[s],e,t,r).pipe(Ya(),ki(a=>{if(a instanceof xg)throw y2(new pd,a);o[s]=a}))),Op(1),ut(()=>o),zl(s=>F8(s)?wo:kp(s)))}function Xee(n,e,t,r){let i=Eg(e)??r,o=Ig(n,i),s=o.resolve?o.resolve(e,t):vi(i,()=>o(e,t));return iu(s)}function lD(n){return Nn(e=>{let t=n(e);return t?mn(t).pipe(ut(()=>e)):mt(e)})}var DD=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===nn);return r}getResolvedTitleForRoute(t){return t.data[e_]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Te(U8),providedIn:"root"})}return n})(),U8=(()=>{class n extends DD{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Ve(O6))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vd=new Ye("",{providedIn:"root",factory:()=>({})}),Sg=new Ye(""),C2=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Te(d5);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return mt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=iu(vi(t,()=>r.loadComponent())).pipe(ut(q8),Nn(H8),ki(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),L0(()=>{this.componentLoaders.delete(r)})),o=new Tp(i,()=>new kn).pipe(Dp());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return mt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=z8(r,this.compiler,t,this.onLoadEndListener).pipe(L0(()=>{this.childrenLoaders.delete(r)})),s=new Tp(o,()=>new kn).pipe(Dp());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z8(n,e,t,r){return iu(vi(t,()=>n.loadChildren())).pipe(ut(q8),Nn(H8),ti(i=>i instanceof xb||Array.isArray(i)?mt(i):mn(e.compileModuleAsync(i))),ut(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Sg,[],{optional:!0,self:!0}).flat()),{routes:s.map(AD),injector:o}}))}function Jee(n){return n&&typeof n=="object"&&"default"in n}function q8(n){return Jee(n)?n.default:n}function H8(n){return mt(n)}var E2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Te(ete),providedIn:"root"})}return n})(),ete=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TD=new Ye(""),MD=new Ye("");function $8(n,e,t){let r=n.get(MD),i=n.get(ni);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),tte(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&vi(n,()=>c({transition:a,from:e,to:t})),s}function tte(n){return new Promise(e=>{gv({read:()=>setTimeout(e)},{injector:n})})}var ND=new Ye(""),I2=(()=>{class n{currentNavigation=Ea(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new kn;transitionAbortWithErrorSubject=new kn;configLoader=Te(C2);environmentInjector=Te(Wn);destroyRef=Te(Ca);urlSerializer=Te(rh);rootContexts=Te(ih);location=Te(ud);inputBindingEnabled=Te(n_,{optional:!0})!==null;titleStrategy=Te(DD);options=Te(vd,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Te(E2);createViewTransition=Te(TD,{optional:!0});navigationErrorHandler=Te(ND,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>mt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new u2(i)),r=i=>this.events.next(new d2(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;$i(()=>{this.transitions?.next(Rt(Oe({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new to(null),this.transitions.pipe(xr(r=>r!==null),Nn(r=>{let i=!1;return mt(r).pipe(Nn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Zo.SupersededByNewNavigation),wo;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Rt(Oe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new nl(o.id,this.urlSerializer.serialize(o.rawUrl),"",_g.IgnoredSameUrlNavigation)),o.resolve(!1),wo;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return mt(o).pipe(Nn(c=>(this.events.next(new md(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?wo:Promise.resolve(c))),Kee(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ki(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new Wv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:h,extras:m}=o,g=new md(c,this.urlSerializer.serialize(l),u,h);this.events.next(g);let x=T8(this.rootComponentType).snapshot;return this.currentTransition=r=Rt(Oe({},o),{targetSnapshot:x,urlAfterRedirects:l,extras:Rt(Oe({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(I=>(I.finalUrl=l,I)),mt(r)}else return this.events.next(new nl(o.id,this.urlSerializer.serialize(o.extractedUrl),"",_g.IgnoredByUrlHandlingStrategy)),o.resolve(!1),wo}),ki(o=>{let s=new s2(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ut(o=>(this.currentTransition=r=Rt(Oe({},o),{guards:hee(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Eee(this.environmentInjector,o=>this.events.next(o)),ki(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw y2(this.urlSerializer,o.guardsResult);let s=new a2(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),xr(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Zo.GuardRejected),!1)),lD(o=>{if(o.guards.canActivateChecks.length!==0)return mt(o).pipe(ki(s=>{let a=new c2(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Nn(s=>{let a=!1;return mt(s).pipe(Yee(this.paramsInheritanceStrategy,this.environmentInjector),ki({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Zo.NoDataFromResolver)}}))}),ki(s=>{let a=new l2(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),lD(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Eg(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(ki(u=>{a.component=u}),ut(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return O0(s(o.targetSnapshot.root)).pipe(Wu(null),no(1))}),lD(()=>this.afterPreactivation()),Nn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?mn(a).pipe(ut(()=>r)):mt(r)}),ut(o=>{let s=cee(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Rt(Oe({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),ki(()=>{this.events.next(new Kv)}),fee(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),no(1),lw(new Ot(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(xr(()=>!i&&!r.targetRouterState),ki(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Zo.Aborted)}))),ki({next:o=>{i=!0,this.lastSuccessfulNavigation=$i(this.currentNavigation),this.events.next(new Xo(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),lw(this.transitionAbortWithErrorSubject.pipe(ki(o=>{throw o}))),L0(()=>{i||this.cancelNavigationTransition(r,"",Zo.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),zl(o=>{if(this.destroyed)return r.resolve(!1),wo;if(i=!0,O8(o))this.events.next(new el(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),dee(o)?this.events.next(new bg(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new yg(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=vi(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof xg){let{message:c,cancellationCode:l}=y2(this.urlSerializer,a);this.events.next(new el(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new bg(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return wo}))}))}cancelNavigationTransition(t,r,i){let o=new el(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=$i(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nte(n){return n!==mg}var G8=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Te(rte),providedIn:"root"})}return n})(),b2=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},rte=(()=>{class n extends b2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),W8=(()=>{class n{urlSerializer=Te(rh);options=Te(vd,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Te(ud);urlHandlingStrategy=Te(E2);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new tl;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof tl?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=T8(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:()=>Te(ite),providedIn:"root"})}return n})(),ite=(()=>{class n extends W8{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof md?this.updateStateMemento():t instanceof nl?this.commitTransition(r):t instanceof Wv?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Kv?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof el&&t.code!==Zo.SupersededByNewNavigation&&t.code!==Zo.Redirect?this.restoreHistory(r):t instanceof yg?this.restoreHistory(r,!0):t instanceof Xo&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Oe(Oe({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=Oe(Oe({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S2(n,e){n.events.pipe(xr(t=>t instanceof Xo||t instanceof el||t instanceof yg||t instanceof nl),ut(t=>t instanceof Xo||t instanceof nl?0:(t instanceof el?t.code===Zo.Redirect||t.code===Zo.SupersededByNewNavigation:!1)?2:1),xr(t=>t!==2),no(1)).subscribe(()=>{e()})}var ote={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ste={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Tr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Te(Cb);stateManager=Te(W8);options=Te(vd,{optional:!0})||{};pendingTasks=Te(Hc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Te(I2);urlSerializer=Te(rh);location=Te(ud);urlHandlingStrategy=Te(E2);injector=Te(Wn);_events=new kn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Te(G8);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Te(Sg,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Te(n_,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Gr;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=$i(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof el&&r.code!==Zo.Redirect&&r.code!==Zo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Xo)this.navigated=!0;else if(r instanceof bg){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Oe({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||nte(i.source)},s);this.scheduleNavigation(a,mg,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}iee(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),mg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Oe({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(gs)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return $i(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(AD),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=Oe(Oe({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let m=i?i.snapshot:this.routerState.snapshot.root;h=I8(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return S8(h,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=gd(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,mg,null,r)}navigate(t,r={skipLocationChange:!1}){return ate(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Za(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Oe({},ote):r===!1?i=Oe({},ste):i=r,gd(t))return s8(this.currentUrlTree,t,i);let o=this.parseUrl(t);return s8(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,m)=>{a=h,c=m});let u=this.pendingTasks.add();return S2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ate(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Je(4008,!1)}var Na=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ea(null);get href(){return $i(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new kn;applicationErrorHandler=Te(gs);options=Te(vd,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(Te(new Db("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Xo&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(gd(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:gd(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(tt(Tr),tt(Ws),fv("tabindex"),tt(Wo),tt(oo),tt(sc))};static \u0275dir=Yn({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Se("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ru("href",i.reactiveHref(),MA)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ld],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ld],replaceUrl:[2,"replaceUrl","replaceUrl",ld],routerLink:"routerLink"},features:[Sa]})}return n})(),kD=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new jr;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Xo&&this.update()})}ngAfterContentInit(){mt(this.links.changes,mt(null)).pipe(jc()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=mn(t).pipe(jc()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=cte(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(tt(Tr),tt(oo),tt(Wo),tt(Yc),tt(Na,8))};static \u0275dir=Yn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&c5(o,Na,5),r&2){let s;Wf(s=Kf())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Sa]})}return n})();function cte(n){return!!n.paths}var i_=class{};var K8=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(xr(t=>t instanceof Xo),Gu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=tg(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return mn(i).pipe(jc())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=mt(null);let o=i.pipe(ti(s=>s===null?mt(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return mn([o,s]).pipe(jc())}else return o})}static \u0275fac=function(r){return new(r||n)(Ve(Tr),Ve(Wn),Ve(i_),Ve(C2))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Y8=new Ye(""),lte=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=mg;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof md?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xo?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof nl&&t.code===_g.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof wg))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>te(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new wg(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){WA()};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})();function ute(n){return n.routerState.root}function o_(n,e){return{\u0275kind:n,\u0275providers:e}}function dte(){let n=Te(Rn);return e=>{let t=n.get(Yo);if(e!==t.components[0])return;let r=n.get(Tr),i=n.get(Q8);n.get(RD)===1&&r.initialNavigation(),n.get(J8,null,{optional:!0})?.setUpPreloading(),n.get(Y8,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Q8=new Ye("",{factory:()=>new kn}),RD=new Ye("",{providedIn:"root",factory:()=>1});function Z8(){let n=[{provide:ub,useValue:!0},{provide:RD,useValue:0},rg(()=>{let e=Te(Rn);return e.get(S5,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Tr),o=e.get(Q8);S2(i,()=>{r(!0)}),e.get(I2).afterPreactivation=()=>(r(!0),o.closed?mt(void 0):o),i.initialNavigation()}))})];return o_(2,n)}function X8(){let n=[rg(()=>{Te(Tr).setUpLocationChangeListener()}),{provide:RD,useValue:2}];return o_(3,n)}var J8=new Ye("");function eV(n){return o_(0,[{provide:J8,useExisting:K8},{provide:i_,useExisting:n}])}function tV(){return o_(8,[ID,{provide:n_,useExisting:ID}])}function nV(n){eg("NgRouterViewTransitions");let e=[{provide:TD,useValue:$8},{provide:MD,useValue:Oe({skipNextTransition:!!n?.skipInitialTransition},n)}];return o_(9,e)}var rV=[ud,{provide:rh,useClass:pd},Tr,ih,{provide:Ws,useFactory:ute,deps:[Tr]},C2,[]],_d=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[rV,[],{provide:Sg,multi:!0,useValue:t},[],r?.errorHandler?{provide:ND,useValue:r.errorHandler}:[],{provide:vd,useValue:r||{}},r?.useHash?hte():pte(),fte(),r?.preloadingStrategy?eV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?gte(r):[],r?.bindToComponentInputs?tV().\u0275providers:[],r?.enableViewTransitions?nV().\u0275providers:[],mte()]}}static forChild(t){return{ngModule:n,providers:[{provide:Sg,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=ir({})}return n})();function fte(){return{provide:Y8,useFactory:()=>{let n=Te(A6),e=Te(Ut),t=Te(vd),r=Te(I2),i=Te(rh);return t.scrollOffset&&n.setOffset(t.scrollOffset),new lte(i,r,n,e,t)}}}function hte(){return{provide:sc,useClass:M5}}function pte(){return{provide:sc,useClass:kb}}function gte(n){return[n.initialNavigation==="disabled"?X8().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Z8().\u0275providers:[]]}var PD=new Ye("");function mte(){return[{provide:PD,useFactory:dte},{provide:Ib,multi:!0,useExisting:PD}]}function Vi(n){n===void 0&&(n=Te(Rn));let e=n.get($p);return t=>new Ot(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var vte="firebase",_te="11.10.0";Gn(vte,_te,"app");var oi=new Hl("ANGULARFIRE2_VERSION");function ou(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var rl=(n,e)=>{let t=e?[e]:E1(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ag=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Ag||{}),iV=cd()&&typeof Zone<"u"?Ag.WARN:Ag.SILENT;var A2=class{zone;delegate;constructor(e,t=_I){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},si=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Te(Ut);this.outsideAngular=t.runOutsideAngular(()=>new A2(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new A2(typeof Zone>"u"?void 0:Zone.current,Af))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oV=!1;function yte(n,e){!oV&&(iV>Ag.SILENT||cd())&&(oV=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),iV>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function wte(n){let e=Te(Ut,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function oh(n){let e=Te(Ut,{optional:!0});return e?e.run(()=>n()):n()}var bte=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),vi(t,()=>oh(()=>n.apply(void 0,r)))),Mr=(n,e,t)=>(t||=e?Ag.WARN:Ag.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=Te(si),s=Te($p),a=Te(Wn)}catch{return yte(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=oh(()=>s.add())),i[l]=bte(i[l],r,a));let c=wte(()=>n.apply(this,i));return e?c instanceof Ot?c.pipe(ma(o.outsideAngular),bo(o.insideAngular),Vi(a)):c instanceof Promise?oh(()=>{let l=s.add();return new Promise((u,h)=>{c.then(m=>vi(a,()=>oh(()=>u(m))),m=>vi(a,()=>oh(()=>h(m)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:oh(()=>c):c instanceof Ot?c.pipe(ma(o.outsideAngular),bo(o.insideAngular)):oh(()=>c)});var Ks=class{constructor(e){return e}},dc=class{constructor(){return E1()}};function xte(n){return n&&n.length===1?n[0]:new Ks(Fc())}var FD=new Ye("angularfire2._apps"),Cte={provide:Ks,useFactory:xte,deps:[[new Ar,FD]]},Ete={provide:dc,deps:[[new Ar,FD]]};function Ite(n){return(e,t)=>{let r=t.get(Hi);Gn("angularfire",oi.full,"core"),Gn("angularfire",oi.full,"app"),Gn("angular",U0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ks(i)}}function sV(n,...e){return io([Cte,Ete,{provide:FD,useFactory:Ite(n),multi:!0,deps:[Ut,Rn,si,...e]}])}var aV=Mr(JO,!0);var Ste=new Map,Ate={activated:!1,tokenObservers:[]},Dte={initialized:!1,enabled:!1};function fc(n){return Ste.get(n)||Object.assign({},Ate)}function dV(){return Dte}var Tte="https://content-firebaseappcheck.googleapis.com/v1";var Mte="exchangeDebugToken",cV={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},NMe=1440*60*1e3;var jD=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return te(this,null,function*(){this.stop();try{this.pending=new XE,this.pending.promise.catch(t=>{}),yield Nte(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new XE,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Nte(n){return new Promise(e=>{setTimeout(e,n)})}var Pte={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},yd=new gp("appCheck","AppCheck",Pte);function fV(n){if(!fc(n).activated)throw yd.create("use-before-activation",{appName:n.name})}function hV(r,i){return te(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let g=yield s.getHeartbeatsHeader();g&&(o["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(g){throw yd.create("fetch-network-error",{originalErrorMessage:g?.message})}if(c.status!==200)throw yd.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(g){throw yd.create("fetch-parse-error",{originalErrorMessage:g?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw yd.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(u[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+h,issuedAtTimeMillis:m}})}function pV(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Tte}/projects/${t}/apps/${r}:${Mte}?key=${i}`,body:{debug_token:e}}}var kte="firebase-app-check-database",Rte=1,BD="firebase-app-check-store";var D2=null;function Ote(){return D2||(D2=new Promise((n,e)=>{try{let t=indexedDB.open(kte,Rte);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(yd.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(BD,{keyPath:"compositeKey"})}}}catch(t){e(yd.create("storage-open",{originalErrorMessage:t?.message}))}}),D2)}function Fte(n,e){return Lte(Vte(n),e)}function Lte(n,e){return te(this,null,function*(){let r=(yield Ote()).transaction(BD,"readwrite"),o=r.objectStore(BD).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(yd.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Vte(n){return`${n.options.appId}-${n.name}`}var s_=new vp("@firebase/app-check");function LD(n,e){return pp()?Fte(n,e).catch(t=>{s_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gV(){return dV().enabled}function mV(){return te(this,null,function*(){let n=dV();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var jte={error:"UNKNOWN_ERROR"};function Bte(n){return KO.encodeString(JSON.stringify(n),!1)}function UD(n,e=!1,t=!1){return te(this,null,function*(){let r=n.app;fV(r);let i=fc(r),o=i.token,s;if(o&&!a_(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(a_(l)?o=l:yield LD(r,void 0))}if(!e&&o&&a_(o))return{token:o.token};let a=!1;if(gV())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=hV(pV(r,yield mV()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield LD(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?s_.warn(l.message):t&&s_.error(l),VD(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield fc(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?s_.warn(l.message):t&&s_.error(l),s=l}let c;return o?s?a_(o)?c={token:o.token,internalError:s}:c=VD(s):(c={token:o.token},i.token=o,yield LD(r,o)):c=VD(s),a&&Hte(r,c),c})}function Ute(n){return te(this,null,function*(){let e=n.app;fV(e);let{provider:t}=fc(e);if(gV()){let r=yield mV(),{token:i}=yield hV(pV(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function zte(n,e,t,r){let{app:i}=n,o=fc(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&a_(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),lV(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>lV(n))}function vV(n,e){let t=fc(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function lV(n){let{app:e}=n,t=fc(e),r=t.tokenRefresher;r||(r=qte(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qte(n){let{app:e}=n;return new jD(()=>te(null,null,function*(){let t=fc(e),r;if(t.token?r=yield UD(n,!0):r=yield UD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=fc(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cV.RETRIAL_MIN_WAIT,cV.RETRIAL_MAX_WAIT)}function Hte(n,e){let t=fc(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function a_(n){return n.expireTimeMillis-Date.now()>0}function VD(n){return{token:Bte(jte),error:n}}var zD=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=fc(this.app);for(let t of e)vV(this.app,t.next);return Promise.resolve()}};function $te(n,e){return new zD(n,e)}function Gte(n){return{getToken:e=>UD(n,e),getLimitedUseToken:()=>Ute(n),addTokenListener:e=>zte(n,"INTERNAL",e),removeTokenListener:e=>vV(n.app,e)}}var Wte="@firebase/app-check",Kte="0.10.1";var Yte="app-check",uV="app-check-internal";function Qte(){zs(new eo(Yte,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return $te(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uV).initialize()})),zs(new eo(uV,n=>{let e=n.getProvider("app-check").getImmediate();return Gte(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gn(Wte,Kte)}Qte();var Zte="app-check";var _s=class{constructor(){return rl(Zte)}};var Xte=["localhost","0.0.0.0","127.0.0.1"],HMe=typeof window<"u"&&Xte.includes(window.location.hostname);var Jte="firebase",ene="11.10.0";Pi.registerVersion(Jte,ene,"app-compat");var tne=["ngOnDestroy"],yV=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(tne.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let h=u?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,h),h})})})});var T2=class{constructor(e){return e}},wd=new Ye("angularfire2.app.options"),bd=new Ye("angularfire2.app.name");function sh(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Pi.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Pi.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;nne("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new T2(s)}var nne=(n,...e)=>{cd()&&typeof console<"u"&&console[n](...e)},rne={provide:T2,useFactory:sh,deps:[wd,Ut,[new Ar,bd]]},wV=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:wd,useValue:t},{provide:bd,useValue:r}]}}constructor(t){Pi.registerVersion("angularfire",oi.full,"core"),Pi.registerVersion("angularfire",oi.full,"app-compat"),Pi.registerVersion("angular",U0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Ve(Hi))};static \u0275mod=dr({type:n});static \u0275inj=ir({providers:[rne]})}return n})();function Dg(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return ine(i,s)||(_V("error",`${e} was already initialized on the ${t} Firebase App with different settings.${one?" You may need to reload as Firebase is not HMR aware.":""}`),_V("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function ine(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var one=typeof module<"u"&&!!module.hot,_V=(n,...e)=>{cd()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var HD=new Ye("angularfire2.auth.use-emulator"),$D=new Ye("angularfire2.auth.settings"),GD=new Ye("angularfire2.auth.tenant-id"),WD=new Ye("angularfire2.auth.langugage-code"),KD=new Ye("angularfire2.auth.use-device-language"),YD=new Ye("angularfire.auth.persistence"),QD=(n,e,t,r,i,o,s,a)=>Dg(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),Ys=(()=>{class n{injector=Te(Wn);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,u,h,m,g){let x=new kn,I=mt(void 0).pipe(bo(s.outsideAngular),Nn(()=>o.runOutsideAngular(()=>import("./chunk-NO5NGGK2.js"))),ut(()=>sh(t,o,r)),ut(M=>QD(M,o,a,l,u,h,c,m)),aw({bufferSize:1,refCount:!1}));if(Lb(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{I.pipe(Ya()).subscribe();let M=I.pipe(Nn(B=>B.getRedirectResult().then(K=>K,()=>null)),Vi(this.injector),aw({bufferSize:1,refCount:!1})),P=I.pipe(Nn(B=>new Ot(K=>({unsubscribe:o.runOutsideAngular(()=>B.onAuthStateChanged(oe=>K.next(oe),oe=>K.error(oe),()=>K.complete()))})))),Y=I.pipe(Nn(B=>new Ot(K=>({unsubscribe:o.runOutsideAngular(()=>B.onIdTokenChanged(oe=>K.next(oe),oe=>K.error(oe),()=>K.complete()))}))));this.authState=M.pipe(cw(P),ma(s.outsideAngular),bo(s.insideAngular)),this.user=M.pipe(cw(Y),ma(s.outsideAngular),bo(s.insideAngular)),this.idToken=this.user.pipe(Nn(B=>B?mn(B.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Nn(B=>B?mn(B.getIdTokenResult()):mt(null))),this.credential=CI(M,x,this.authState.pipe(xr(B=>!B))).pipe(ut(B=>B?.user?B:null),ma(s.outsideAngular),bo(s.insideAngular))}return yV(this,I,o,{spy:{apply:(M,P,Y)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&Y.then(B=>x.next(B))}}})}static \u0275fac=function(r){return new(r||n)(Ve(wd),Ve(bd,8),Ve(Hi),Ve(Ut),Ve(si),Ve(HD,8),Ve($D,8),Ve(GD,8),Ve(WD,8),Ve(KD,8),Ve(YD,8),Ve(_s,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),bV=(()=>{class n{constructor(){Pi.registerVersion("angularfire",oi.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=ir({providers:[Ys]})}return n})();var c_={production:!1,version:"1.0.3",publicBaseUrl:"",firebase:{apiKey:"AIzaSyCcUiX0VhFp0onLlKVknBHmUfMLAUEmFb8",authDomain:"profghizzapp-7cd59.firebaseapp.com",projectId:"profghizzapp-7cd59",storageBucket:"profghizzapp-7cd59.firebasestorage.app",messagingSenderId:"142548255598",appId:"1:142548255598:web:963e0aecd134f7d7afb77f",measurementId:"G-B77VGH8SVQ"}};var Mg=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i,this._ensuring=null}ensureSignedIn(){return te(this,null,function*(){if(this._ensuring)return this._ensuring;this._ensuring=te(this,null,function*(){if(!(yield this.afAuth.currentUser))try{yield this.afAuth.signInAnonymously(),yield new Promise(i=>{let o=this.afAuth.authState.subscribe(s=>{s&&(o.unsubscribe(),i())});setTimeout(()=>{o.unsubscribe(),i()},5e3)})}catch(i){console.error("AuthService.ensureSignedIn failed",i)}});try{yield this._ensuring}finally{this._ensuring=null}})}logout(){return te(this,null,function*(){try{yield this.afAuth.signOut(),this.router.navigate(["/login"])}catch(r){console.error("Errore durante il logout:",r)}})}get authState(){return this.afAuth.authState}get currentUser(){return this.afAuth.currentUser}};e.\u0275fac=function(i){return new(i||e)(Ve(Ys),Ve(Tr))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var xV=(()=>{let e=class e{constructor(r){this.authService=r,this.appVersion=c_.version}logout(){this.authService.logout()}};e.\u0275fac=function(i){return new(i||e)(tt(Mg))},e.\u0275cmp=Kn({type:e,selectors:[["app-header"]],standalone:!1,decls:11,vars:1,consts:[[1,"app-header"],[1,"logo"],[1,"header-actions"],[1,"version-badge"],["title","Esci dal sistema","aria-label","Logout",1,"logout-btn",3,"click"],[1,"material-icons"],[1,"logout-text"]],template:function(i,o){i&1&&(b(0,"header",0)(1,"div",1),j(2,"Prof Ghizz"),A(),b(3,"nav",2)(4,"span",3),j(5),A(),b(6,"button",4),Se("click",function(){return o.logout()}),b(7,"span",5),j(8,"logout"),A(),b(9,"span",6),j(10,"Esci"),A()()()()),i&2&&(H(5),Dr("v",o.appVersion))},styles:["[_nghost-%COMP%]{display:block}.app-header[_ngcontent-%COMP%]{height:64px;display:flex;align-items:center;justify-content:flex-start;padding:0 20px;background:#fff;border-bottom:1px solid #e6edf3;position:relative;z-index:1100;pointer-events:auto}.app-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-weight:800;color:#0f2a63;font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:auto;display:inline-flex;align-items:center;gap:10px}.open-browser[_ngcontent-%COMP%]{color:#0f2a63;text-decoration:none;font-weight:600;padding:6px 8px;border-radius:6px;transition:background-color .2s ease,color .2s ease}.open-browser[_ngcontent-%COMP%]:hover{background:#f3f7fa;color:#0b1e49}.install-btn[_ngcontent-%COMP%]{background:#1976d2;color:#fff;border:0;border-radius:6px;padding:8px 12px;font-weight:600;cursor:pointer;box-shadow:0 1px 2px #0c154014;transition:background-color .2s ease,box-shadow .2s ease,transform .02s ease-in}.install-btn[_ngcontent-%COMP%]:hover{background:#165fa8;box-shadow:0 2px 6px #0c15401f}.install-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.app-state[_ngcontent-%COMP%]{font-size:12px;font-weight:700;background:#2e7d32;color:#fff;padding:4px 8px;border-radius:999px;box-shadow:0 1px 2px #0c154014}.logout-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;background:#f44336;color:#fff;border:none;border-radius:6px;padding:6px 12px;font-weight:600;cursor:pointer;font-size:14px;transition:background-color .2s ease,box-shadow .2s ease,transform .02s ease-in;box-shadow:0 1px 2px #0c154014}.logout-btn[_ngcontent-%COMP%]:hover{background:#d32f2f;box-shadow:0 2px 6px #0c15401f}.logout-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.logout-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.logout-text[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.logout-text[_ngcontent-%COMP%]{display:inline}}.version-badge[_ngcontent-%COMP%]{font-size:11px;color:#999;font-weight:600;text-transform:uppercase;letter-spacing:.5px}"]});let n=e;return n})();var CV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Kn({type:e,selectors:[["app-sidebar"]],standalone:!1,decls:37,vars:0,consts:[["aria-label","Sidebar navigation",1,"app-sidebar"],["routerLink","/","routerLinkActive","active","aria-label","Home","title","Home"],["viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","role","img","aria-hidden","true","focusable","false",1,"side-svg"],["width","24","height","24","fill","none"],["d","M3 10L12 3l9 7v8a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-8z","fill","#fff"],[1,"sr-only"],["routerLink","/anagrafica","routerLinkActive","active","aria-label","Clienti","title","Clienti"],["d","M16 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8zM8 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z","fill","#fff"],["d","M2 20a6 6 0 0 1 6-6h8a6 6 0 0 1 6 6v1H2v-1z","fill","#fff"],["routerLink","/esercizi","routerLinkActive","active","aria-label","Esercizi","title","Esercizi"],["d","M13 2L3 14h7l-1 8L21 10h-7l-1-8z","fill","#fff"],["routerLink","/gestione-schede","routerLinkActive","active","aria-label","Schede","title","Schede"],["x","3","y","3","width","8","height","8","fill","#fff"],["x","13","y","3","width","8","height","8","fill","#fff"],["x","3","y","13","width","8","height","8","fill","#fff"],["x","13","y","13","width","8","height","8","fill","#fff"],["routerLink","/calendar-planning","routerLinkActive","active","aria-label","Calendar Planning","title","Calendar Planning"],["d","M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z","fill","#fff"]],template:function(i,o){i&1&&(b(0,"aside",0)(1,"ul")(2,"li")(3,"a",1),Sr(),b(4,"svg",2),ht(5,"rect",3)(6,"path",4),A(),Go(),b(7,"span",5),j(8,"Home"),A()()(),b(9,"li")(10,"a",6),Sr(),b(11,"svg",2),ht(12,"path",7)(13,"path",8),A(),Go(),b(14,"span",5),j(15,"Clienti"),A()()(),b(16,"li")(17,"a",9),Sr(),b(18,"svg",2),ht(19,"path",10),A(),Go(),b(20,"span",5),j(21,"Esercizi"),A()()(),b(22,"li")(23,"a",11),Sr(),b(24,"svg",2),ht(25,"rect",12)(26,"rect",13)(27,"rect",14)(28,"rect",15),A(),Go(),b(29,"span",5),j(30,"Schede"),A()()(),b(31,"li")(32,"a",16),Sr(),b(33,"svg",2),ht(34,"path",17),A(),Go(),b(35,"span",5),j(36,"Calendar Planning"),A()()()()())},dependencies:[Na,kD],styles:["[_nghost-%COMP%]{display:block}.app-sidebar[_ngcontent-%COMP%]{width:80px;background:#0b2a63;padding:8px;border-right:1px solid rgba(255,255,255,.06);height:100%;min-height:auto;box-sizing:border-box;position:relative;z-index:1100;pointer-events:auto}.app-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:12px 0 0;margin:8px 0 0;display:flex;flex-direction:column;gap:12px;align-items:center}.app-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:10px;padding:4px 6px;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:12px;color:#fff;text-decoration:none;cursor:pointer}.app-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff0f}.app-sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#ffffff1f;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px}.app-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.icon[_ngcontent-%COMP%]{margin-right:8px}.app-sidebar[_ngcontent-%COMP%]   .side-svg[_ngcontent-%COMP%]{width:28px;height:28px;display:block}.app-sidebar[_ngcontent-%COMP%]   .sr-only[_ngcontent-%COMP%]{position:absolute;left:-9999px}.app-sidebar[_ngcontent-%COMP%]   .side-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 8px;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   .side-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.95}"]});let n=e;return n})();function cne(n,e){n&1&&(ri(0),ht(1,"router-outlet"),ii())}function lne(n,e){n&1&&(ri(0),ht(1,"app-header"),b(2,"div",3),ht(3,"app-sidebar"),b(4,"main",4),ht(5,"router-outlet"),A()(),ii())}function une(n,e){n&1&&ht(0,"router-outlet")}function dne(n,e){if(n&1&&Qe(0,lne,6,0,"ng-container",2)(1,une,1,0,"ng-template",null,1,ao),n&2){let t=yi(2),r=ee();ae("ngIf",!r.isPublic)("ngIfElse",t)}}var EV=(()=>{let e=class e{constructor(r,i){this.router=r,this.afAuth=i,this.isPublic=!1,this.isLoggedIn=!1}ngOnInit(){this.authSub=this.afAuth.authState.subscribe(r=>{this.isLoggedIn=!!r}),this.isPublic=this.router.url.includes("/public-pdf/"),this.sub=this.router.events.pipe(xr(r=>r instanceof Xo)).subscribe(()=>{this.isPublic=this.router.url.includes("/public-pdf/")})}ngOnDestroy(){this.sub?.unsubscribe(),this.authSub?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(tt(Tr),tt(Ys))},e.\u0275cmp=Kn({type:e,selectors:[["app-root"]],standalone:!1,decls:3,vars:2,consts:[["loggedInView",""],["publicView",""],[4,"ngIf","ngIfElse"],[1,"app-shell"],[1,"app-main"]],template:function(i,o){if(i&1&&Qe(0,cne,2,0,"ng-container",2)(1,dne,3,2,"ng-template",null,0,ao),i&2){let s=yi(2);ae("ngIf",!o.isLoggedIn&&!o.isPublic)("ngIfElse",s)}},dependencies:[Fi,t_,xV,CV],styles:["[_ngcontent-%COMP%]:root{--header-h: 64px;--sidebar-w: 80px;--bg: #f5f8fc;--panel: #ffffff;--border: #e6edf7}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;background:var(--bg)}app-header[_ngcontent-%COMP%], .app-header[_ngcontent-%COMP%]{position:relative;z-index:100;display:block;width:100%;min-height:var(--header-h);background:var(--panel);border-bottom:1px solid var(--border)}.app-shell[_ngcontent-%COMP%]{display:flex;position:relative;z-index:0;min-height:calc(100vh - var(--header-h));height:calc(100vh - var(--header-h));isolation:isolate;background:var(--bg);overflow:hidden}app-sidebar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%]{position:relative;z-index:10;width:var(--sidebar-w);min-height:calc(100vh - var(--header-h));flex-shrink:0;background:#f8fbff;border-right:1px solid var(--border);overflow:auto;-webkit-overflow-scrolling:touch}.app-main[_ngcontent-%COMP%]{position:relative;z-index:0;flex:1 1 auto;min-width:0;padding:24px;min-height:calc(100vh - var(--header-h));background:var(--bg)}router-outlet[_ngcontent-%COMP%]{display:block;position:relative;z-index:0}.app-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:1200}.app-modal[_ngcontent-%COMP%]{position:relative;z-index:1210;background:#fff;border-radius:12px;box-shadow:0 8px 40px #0000003b;max-width:90vw;width:680px;padding:22px}.app-modal-backdrop.is-hidden[_ngcontent-%COMP%]{pointer-events:none!important;opacity:0!important}.app-shell[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto}@media (max-width: 800px){.app-shell[_ngcontent-%COMP%]{flex-direction:column;min-height:calc(100vh - var(--header-h))}app-sidebar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%]{width:100%;height:auto;min-height:auto;border-right:none;border-bottom:1px solid var(--border)}.app-main[_ngcontent-%COMP%]{min-height:auto;padding:18px}}.safe-content[_ngcontent-%COMP%]{position:relative;z-index:0}"]});let n=e;return n})();var IV="auth",l_=class{constructor(e){return e}},ah=class{constructor(){return rl(IV)}};var XD=new Ye("angularfire2.auth-instances");function ure(n,e){let t=ou(IV,n,e);return t&&new l_(t)}function dre(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new l_(r)}}var fre={provide:ah,deps:[[new Ar,XD]]},hre={provide:l_,useFactory:ure,deps:[[new Ar,XD],Ks]};function SV(n,...e){return Gn("angularfire",oi.full,"auth"),io([hre,fre,{provide:XD,useFactory:dre(n),multi:!0,deps:[Ut,Rn,si,dc,[new Ar,_s],...e]}])}var AV=Mr(tI,!0);var DV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TV={};var su,JD;(function(){var n;function e(q,N){function S(){}S.prototype=N.prototype,q.D=N.prototype,q.prototype=new S,q.prototype.constructor=q,q.C=function(V,C,D){for(var T=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)T[ne-2]=arguments[ne];return N.prototype[C].apply(V,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(q,N,S){S||(S=0);var V=Array(16);if(typeof N=="string")for(var C=0;16>C;++C)V[C]=N.charCodeAt(S++)|N.charCodeAt(S++)<<8|N.charCodeAt(S++)<<16|N.charCodeAt(S++)<<24;else for(C=0;16>C;++C)V[C]=N[S++]|N[S++]<<8|N[S++]<<16|N[S++]<<24;N=q.g[0],S=q.g[1],C=q.g[2];var D=q.g[3],T=N+(D^S&(C^D))+V[0]+3614090360&4294967295;N=S+(T<<7&4294967295|T>>>25),T=D+(C^N&(S^C))+V[1]+3905402710&4294967295,D=N+(T<<12&4294967295|T>>>20),T=C+(S^D&(N^S))+V[2]+606105819&4294967295,C=D+(T<<17&4294967295|T>>>15),T=S+(N^C&(D^N))+V[3]+3250441966&4294967295,S=C+(T<<22&4294967295|T>>>10),T=N+(D^S&(C^D))+V[4]+4118548399&4294967295,N=S+(T<<7&4294967295|T>>>25),T=D+(C^N&(S^C))+V[5]+1200080426&4294967295,D=N+(T<<12&4294967295|T>>>20),T=C+(S^D&(N^S))+V[6]+2821735955&4294967295,C=D+(T<<17&4294967295|T>>>15),T=S+(N^C&(D^N))+V[7]+4249261313&4294967295,S=C+(T<<22&4294967295|T>>>10),T=N+(D^S&(C^D))+V[8]+1770035416&4294967295,N=S+(T<<7&4294967295|T>>>25),T=D+(C^N&(S^C))+V[9]+2336552879&4294967295,D=N+(T<<12&4294967295|T>>>20),T=C+(S^D&(N^S))+V[10]+4294925233&4294967295,C=D+(T<<17&4294967295|T>>>15),T=S+(N^C&(D^N))+V[11]+2304563134&4294967295,S=C+(T<<22&4294967295|T>>>10),T=N+(D^S&(C^D))+V[12]+1804603682&4294967295,N=S+(T<<7&4294967295|T>>>25),T=D+(C^N&(S^C))+V[13]+4254626195&4294967295,D=N+(T<<12&4294967295|T>>>20),T=C+(S^D&(N^S))+V[14]+2792965006&4294967295,C=D+(T<<17&4294967295|T>>>15),T=S+(N^C&(D^N))+V[15]+1236535329&4294967295,S=C+(T<<22&4294967295|T>>>10),T=N+(C^D&(S^C))+V[1]+4129170786&4294967295,N=S+(T<<5&4294967295|T>>>27),T=D+(S^C&(N^S))+V[6]+3225465664&4294967295,D=N+(T<<9&4294967295|T>>>23),T=C+(N^S&(D^N))+V[11]+643717713&4294967295,C=D+(T<<14&4294967295|T>>>18),T=S+(D^N&(C^D))+V[0]+3921069994&4294967295,S=C+(T<<20&4294967295|T>>>12),T=N+(C^D&(S^C))+V[5]+3593408605&4294967295,N=S+(T<<5&4294967295|T>>>27),T=D+(S^C&(N^S))+V[10]+38016083&4294967295,D=N+(T<<9&4294967295|T>>>23),T=C+(N^S&(D^N))+V[15]+3634488961&4294967295,C=D+(T<<14&4294967295|T>>>18),T=S+(D^N&(C^D))+V[4]+3889429448&4294967295,S=C+(T<<20&4294967295|T>>>12),T=N+(C^D&(S^C))+V[9]+568446438&4294967295,N=S+(T<<5&4294967295|T>>>27),T=D+(S^C&(N^S))+V[14]+3275163606&4294967295,D=N+(T<<9&4294967295|T>>>23),T=C+(N^S&(D^N))+V[3]+4107603335&4294967295,C=D+(T<<14&4294967295|T>>>18),T=S+(D^N&(C^D))+V[8]+1163531501&4294967295,S=C+(T<<20&4294967295|T>>>12),T=N+(C^D&(S^C))+V[13]+2850285829&4294967295,N=S+(T<<5&4294967295|T>>>27),T=D+(S^C&(N^S))+V[2]+4243563512&4294967295,D=N+(T<<9&4294967295|T>>>23),T=C+(N^S&(D^N))+V[7]+1735328473&4294967295,C=D+(T<<14&4294967295|T>>>18),T=S+(D^N&(C^D))+V[12]+2368359562&4294967295,S=C+(T<<20&4294967295|T>>>12),T=N+(S^C^D)+V[5]+4294588738&4294967295,N=S+(T<<4&4294967295|T>>>28),T=D+(N^S^C)+V[8]+2272392833&4294967295,D=N+(T<<11&4294967295|T>>>21),T=C+(D^N^S)+V[11]+1839030562&4294967295,C=D+(T<<16&4294967295|T>>>16),T=S+(C^D^N)+V[14]+4259657740&4294967295,S=C+(T<<23&4294967295|T>>>9),T=N+(S^C^D)+V[1]+2763975236&4294967295,N=S+(T<<4&4294967295|T>>>28),T=D+(N^S^C)+V[4]+1272893353&4294967295,D=N+(T<<11&4294967295|T>>>21),T=C+(D^N^S)+V[7]+4139469664&4294967295,C=D+(T<<16&4294967295|T>>>16),T=S+(C^D^N)+V[10]+3200236656&4294967295,S=C+(T<<23&4294967295|T>>>9),T=N+(S^C^D)+V[13]+681279174&4294967295,N=S+(T<<4&4294967295|T>>>28),T=D+(N^S^C)+V[0]+3936430074&4294967295,D=N+(T<<11&4294967295|T>>>21),T=C+(D^N^S)+V[3]+3572445317&4294967295,C=D+(T<<16&4294967295|T>>>16),T=S+(C^D^N)+V[6]+76029189&4294967295,S=C+(T<<23&4294967295|T>>>9),T=N+(S^C^D)+V[9]+3654602809&4294967295,N=S+(T<<4&4294967295|T>>>28),T=D+(N^S^C)+V[12]+3873151461&4294967295,D=N+(T<<11&4294967295|T>>>21),T=C+(D^N^S)+V[15]+530742520&4294967295,C=D+(T<<16&4294967295|T>>>16),T=S+(C^D^N)+V[2]+3299628645&4294967295,S=C+(T<<23&4294967295|T>>>9),T=N+(C^(S|~D))+V[0]+4096336452&4294967295,N=S+(T<<6&4294967295|T>>>26),T=D+(S^(N|~C))+V[7]+1126891415&4294967295,D=N+(T<<10&4294967295|T>>>22),T=C+(N^(D|~S))+V[14]+2878612391&4294967295,C=D+(T<<15&4294967295|T>>>17),T=S+(D^(C|~N))+V[5]+4237533241&4294967295,S=C+(T<<21&4294967295|T>>>11),T=N+(C^(S|~D))+V[12]+1700485571&4294967295,N=S+(T<<6&4294967295|T>>>26),T=D+(S^(N|~C))+V[3]+2399980690&4294967295,D=N+(T<<10&4294967295|T>>>22),T=C+(N^(D|~S))+V[10]+4293915773&4294967295,C=D+(T<<15&4294967295|T>>>17),T=S+(D^(C|~N))+V[1]+2240044497&4294967295,S=C+(T<<21&4294967295|T>>>11),T=N+(C^(S|~D))+V[8]+1873313359&4294967295,N=S+(T<<6&4294967295|T>>>26),T=D+(S^(N|~C))+V[15]+4264355552&4294967295,D=N+(T<<10&4294967295|T>>>22),T=C+(N^(D|~S))+V[6]+2734768916&4294967295,C=D+(T<<15&4294967295|T>>>17),T=S+(D^(C|~N))+V[13]+1309151649&4294967295,S=C+(T<<21&4294967295|T>>>11),T=N+(C^(S|~D))+V[4]+4149444226&4294967295,N=S+(T<<6&4294967295|T>>>26),T=D+(S^(N|~C))+V[11]+3174756917&4294967295,D=N+(T<<10&4294967295|T>>>22),T=C+(N^(D|~S))+V[2]+718787259&4294967295,C=D+(T<<15&4294967295|T>>>17),T=S+(D^(C|~N))+V[9]+3951481745&4294967295,q.g[0]=q.g[0]+N&4294967295,q.g[1]=q.g[1]+(C+(T<<21&4294967295|T>>>11))&4294967295,q.g[2]=q.g[2]+C&4294967295,q.g[3]=q.g[3]+D&4294967295}r.prototype.u=function(q,N){N===void 0&&(N=q.length);for(var S=N-this.blockSize,V=this.B,C=this.h,D=0;D<N;){if(C==0)for(;D<=S;)i(this,q,D),D+=this.blockSize;if(typeof q=="string"){for(;D<N;)if(V[C++]=q.charCodeAt(D++),C==this.blockSize){i(this,V),C=0;break}}else for(;D<N;)if(V[C++]=q[D++],C==this.blockSize){i(this,V),C=0;break}}this.h=C,this.o+=N},r.prototype.v=function(){var q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);q[0]=128;for(var N=1;N<q.length-8;++N)q[N]=0;var S=8*this.o;for(N=q.length-8;N<q.length;++N)q[N]=S&255,S/=256;for(this.u(q),q=Array(16),N=S=0;4>N;++N)for(var V=0;32>V;V+=8)q[S++]=this.g[N]>>>V&255;return q};function o(q,N){var S=a;return Object.prototype.hasOwnProperty.call(S,q)?S[q]:S[q]=N(q)}function s(q,N){this.h=N;for(var S=[],V=!0,C=q.length-1;0<=C;C--){var D=q[C]|0;V&&D==N||(S[C]=D,V=!1)}this.g=S}var a={};function c(q){return-128<=q&&128>q?o(q,function(N){return new s([N|0],0>N?-1:0)}):new s([q|0],0>q?-1:0)}function l(q){if(isNaN(q)||!isFinite(q))return h;if(0>q)return M(l(-q));for(var N=[],S=1,V=0;q>=S;V++)N[V]=q/S|0,S*=4294967296;return new s(N,0)}function u(q,N){if(q.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(q.charAt(0)=="-")return M(u(q.substring(1),N));if(0<=q.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=l(Math.pow(N,8)),V=h,C=0;C<q.length;C+=8){var D=Math.min(8,q.length-C),T=parseInt(q.substring(C,C+D),N);8>D?(D=l(Math.pow(N,D)),V=V.j(D).add(l(T))):(V=V.j(S),V=V.add(l(T)))}return V}var h=c(0),m=c(1),g=c(16777216);n=s.prototype,n.m=function(){if(I(this))return-M(this).m();for(var q=0,N=1,S=0;S<this.g.length;S++){var V=this.i(S);q+=(0<=V?V:4294967296+V)*N,N*=4294967296}return q},n.toString=function(q){if(q=q||10,2>q||36<q)throw Error("radix out of range: "+q);if(x(this))return"0";if(I(this))return"-"+M(this).toString(q);for(var N=l(Math.pow(q,6)),S=this,V="";;){var C=K(S,N).g;S=P(S,C.j(N));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(q);if(S=C,x(S))return D+V;for(;6>D.length;)D="0"+D;V=D+V}},n.i=function(q){return 0>q?0:q<this.g.length?this.g[q]:this.h};function x(q){if(q.h!=0)return!1;for(var N=0;N<q.g.length;N++)if(q.g[N]!=0)return!1;return!0}function I(q){return q.h==-1}n.l=function(q){return q=P(this,q),I(q)?-1:x(q)?0:1};function M(q){for(var N=q.g.length,S=[],V=0;V<N;V++)S[V]=~q.g[V];return new s(S,~q.h).add(m)}n.abs=function(){return I(this)?M(this):this},n.add=function(q){for(var N=Math.max(this.g.length,q.g.length),S=[],V=0,C=0;C<=N;C++){var D=V+(this.i(C)&65535)+(q.i(C)&65535),T=(D>>>16)+(this.i(C)>>>16)+(q.i(C)>>>16);V=T>>>16,D&=65535,T&=65535,S[C]=T<<16|D}return new s(S,S[S.length-1]&-2147483648?-1:0)};function P(q,N){return q.add(M(N))}n.j=function(q){if(x(this)||x(q))return h;if(I(this))return I(q)?M(this).j(M(q)):M(M(this).j(q));if(I(q))return M(this.j(M(q)));if(0>this.l(g)&&0>q.l(g))return l(this.m()*q.m());for(var N=this.g.length+q.g.length,S=[],V=0;V<2*N;V++)S[V]=0;for(V=0;V<this.g.length;V++)for(var C=0;C<q.g.length;C++){var D=this.i(V)>>>16,T=this.i(V)&65535,ne=q.i(C)>>>16,be=q.i(C)&65535;S[2*V+2*C]+=T*be,Y(S,2*V+2*C),S[2*V+2*C+1]+=D*be,Y(S,2*V+2*C+1),S[2*V+2*C+1]+=T*ne,Y(S,2*V+2*C+1),S[2*V+2*C+2]+=D*ne,Y(S,2*V+2*C+2)}for(V=0;V<N;V++)S[V]=S[2*V+1]<<16|S[2*V];for(V=N;V<2*N;V++)S[V]=0;return new s(S,0)};function Y(q,N){for(;(q[N]&65535)!=q[N];)q[N+1]+=q[N]>>>16,q[N]&=65535,N++}function B(q,N){this.g=q,this.h=N}function K(q,N){if(x(N))throw Error("division by zero");if(x(q))return new B(h,h);if(I(q))return N=K(M(q),N),new B(M(N.g),M(N.h));if(I(N))return N=K(q,M(N)),new B(M(N.g),N.h);if(30<q.g.length){if(I(q)||I(N))throw Error("slowDivide_ only works with positive integers.");for(var S=m,V=N;0>=V.l(q);)S=oe(S),V=oe(V);var C=he(S,1),D=he(V,1);for(V=he(V,2),S=he(S,2);!x(V);){var T=D.add(V);0>=T.l(q)&&(C=C.add(S),D=T),V=he(V,1),S=he(S,1)}return N=P(q,C.j(N)),new B(C,N)}for(C=h;0<=q.l(N);){for(S=Math.max(1,Math.floor(q.m()/N.m())),V=Math.ceil(Math.log(S)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),D=l(S),T=D.j(N);I(T)||0<T.l(q);)S-=V,D=l(S),T=D.j(N);x(D)&&(D=m),C=C.add(D),q=P(q,T)}return new B(C,q)}n.A=function(q){return K(this,q).h},n.and=function(q){for(var N=Math.max(this.g.length,q.g.length),S=[],V=0;V<N;V++)S[V]=this.i(V)&q.i(V);return new s(S,this.h&q.h)},n.or=function(q){for(var N=Math.max(this.g.length,q.g.length),S=[],V=0;V<N;V++)S[V]=this.i(V)|q.i(V);return new s(S,this.h|q.h)},n.xor=function(q){for(var N=Math.max(this.g.length,q.g.length),S=[],V=0;V<N;V++)S[V]=this.i(V)^q.i(V);return new s(S,this.h^q.h)};function oe(q){for(var N=q.g.length+1,S=[],V=0;V<N;V++)S[V]=q.i(V)<<1|q.i(V-1)>>>31;return new s(S,q.h)}function he(q,N){var S=N>>5;N%=32;for(var V=q.g.length-S,C=[],D=0;D<V;D++)C[D]=0<N?q.i(D+S)>>>N|q.i(D+S+1)<<32-N:q.i(D+S);return new s(C,q.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JD=TV.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=u,su=TV.Integer=s}).apply(typeof DV<"u"?DV:typeof self<"u"?self:typeof window<"u"?window:{});var M2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},au={};var eT,pre,Ng,tT,u_,N2,nT,rT,iT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,E){return f==Array.prototype||f==Object.prototype||(f[y]=E.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof M2=="object"&&M2];for(var y=0;y<f.length;++y){var E=f[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(f,y){if(y)e:{var E=r;f=f.split(".");for(var U=0;U<f.length-1;U++){var ue=f[U];if(!(ue in E))break e;E=E[ue]}f=f[f.length-1],U=E[f],y=y(U),y!=U&&y!=null&&e(E,f,{configurable:!0,writable:!0,value:y})}}function o(f,y){f instanceof String&&(f+="");var E=0,U=!1,ue={next:function(){if(!U&&E<f.length){var Ee=E++;return{value:y(Ee,f[Ee]),done:!1}}return U=!0,{done:!0,value:void 0}}};return ue[Symbol.iterator]=function(){return ue},ue}i("Array.prototype.values",function(f){return f||function(){return o(this,function(y,E){return E})}});var s=s||{},a=this||self;function c(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function l(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function u(f,y,E){return f.call.apply(f.bind,arguments)}function h(f,y,E){if(!f)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ue,U),f.apply(y,ue)}}return function(){return f.apply(y,arguments)}}function m(f,y,E){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,m.apply(null,arguments)}function g(f,y){var E=Array.prototype.slice.call(arguments,1);return function(){var U=E.slice();return U.push.apply(U,arguments),f.apply(this,U)}}function x(f,y){function E(){}E.prototype=y.prototype,f.aa=y.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(U,ue,Ee){for(var Xe=Array(arguments.length-2),Tn=2;Tn<arguments.length;Tn++)Xe[Tn-2]=arguments[Tn];return y.prototype[ue].apply(U,Xe)}}function I(f){let y=f.length;if(0<y){let E=Array(y);for(let U=0;U<y;U++)E[U]=f[U];return E}return[]}function M(f,y){for(let E=1;E<arguments.length;E++){let U=arguments[E];if(c(U)){let ue=f.length||0,Ee=U.length||0;f.length=ue+Ee;for(let Xe=0;Xe<Ee;Xe++)f[ue+Xe]=U[Xe]}else f.push(U)}}class P{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Y(f){return/^[\s\xa0]*$/.test(f)}function B(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function K(f){return K[" "](f),f}K[" "]=function(){};var oe=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function he(f,y,E){for(let U in f)y.call(E,f[U],U,f)}function q(f,y){for(let E in f)y.call(void 0,f[E],E,f)}function N(f){let y={};for(let E in f)y[E]=f[E];return y}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,y){let E,U;for(let ue=1;ue<arguments.length;ue++){U=arguments[ue];for(E in U)f[E]=U[E];for(let Ee=0;Ee<S.length;Ee++)E=S[Ee],Object.prototype.hasOwnProperty.call(U,E)&&(f[E]=U[E])}}function C(f){var y=1;f=f.split(":");let E=[];for(;0<y&&f.length;)E.push(f.shift()),y--;return f.length&&E.push(f.join(":")),E}function D(f){a.setTimeout(()=>{throw f},0)}function T(){var f=De;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class ne{constructor(){this.h=this.g=null}add(y,E){let U=be.get();U.set(y,E),this.h?this.h.next=U:this.g=U,this.h=U}}var be=new P(()=>new Me,f=>f.reset());class Me{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,fe=!1,De=new ne,Be=()=>{let f=a.Promise.resolve(void 0);Ce=()=>{f.then(Fe)}};var Fe=()=>{for(var f;f=T();){try{f.h.call(f.g)}catch(E){D(E)}var y=be;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}fe=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let E=()=>{};a.addEventListener("test",E,y),a.removeEventListener("test",E,y)}catch{}return f})();function ie(f,y){if(W.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,U=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(oe){e:{try{K(y.nodeName);var ue=!0;break e}catch{}ue=!1}ue||(y=null)}}else E=="mouseover"?y=f.fromElement:E=="mouseout"&&(y=f.toElement);this.relatedTarget=y,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ce[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ie.aa.h.call(this)}}x(ie,W);var ce={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),Ae=0;function we(f,y,E,U,ue){this.listener=f,this.proxy=null,this.src=y,this.type=E,this.capture=!!U,this.ha=ue,this.key=++Ae,this.da=this.fa=!1}function Ne(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ue(f){this.src=f,this.g={},this.h=0}Ue.prototype.add=function(f,y,E,U,ue){var Ee=f.toString();f=this.g[Ee],f||(f=this.g[Ee]=[],this.h++);var Xe=We(f,y,U,ue);return-1<Xe?(y=f[Xe],E||(y.fa=!1)):(y=new we(y,this.src,Ee,!!U,ue),y.fa=E,f.push(y)),y};function et(f,y){var E=y.type;if(E in f.g){var U=f.g[E],ue=Array.prototype.indexOf.call(U,y,void 0),Ee;(Ee=0<=ue)&&Array.prototype.splice.call(U,ue,1),Ee&&(Ne(y),f.g[E].length==0&&(delete f.g[E],f.h--))}}function We(f,y,E,U){for(var ue=0;ue<f.length;++ue){var Ee=f[ue];if(!Ee.da&&Ee.listener==y&&Ee.capture==!!E&&Ee.ha==U)return ue}return-1}var ct="closure_lm_"+(1e6*Math.random()|0),G={};function Ke(f,y,E,U,ue){if(U&&U.once)return qe(f,y,E,U,ue);if(Array.isArray(y)){for(var Ee=0;Ee<y.length;Ee++)Ke(f,y[Ee],E,U,ue);return null}return E=zt(E),f&&f[me]?f.K(y,E,l(U)?!!U.capture:!!U,ue):Ft(f,y,E,!1,U,ue)}function Ft(f,y,E,U,ue,Ee){if(!y)throw Error("Invalid event type");var Xe=l(ue)?!!ue.capture:!!ue,Tn=vn(f);if(Tn||(f[ct]=Tn=new Ue(f)),E=Tn.add(y,E,U,Xe,Ee),E.proxy)return E;if(U=It(),E.proxy=U,U.src=f,U.listener=E,f.addEventListener)J||(ue=Xe),ue===void 0&&(ue=!1),f.addEventListener(y.toString(),U,ue);else if(f.attachEvent)f.attachEvent(wt(y.toString()),U);else if(f.addListener&&f.removeListener)f.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return E}function It(){function f(E){return y.call(f.src,f.listener,E)}let y=St;return f}function qe(f,y,E,U,ue){if(Array.isArray(y)){for(var Ee=0;Ee<y.length;Ee++)qe(f,y[Ee],E,U,ue);return null}return E=zt(E),f&&f[me]?f.L(y,E,l(U)?!!U.capture:!!U,ue):Ft(f,y,E,!0,U,ue)}function Tt(f,y,E,U,ue){if(Array.isArray(y))for(var Ee=0;Ee<y.length;Ee++)Tt(f,y[Ee],E,U,ue);else U=l(U)?!!U.capture:!!U,E=zt(E),f&&f[me]?(f=f.i,y=String(y).toString(),y in f.g&&(Ee=f.g[y],E=We(Ee,E,U,ue),-1<E&&(Ne(Ee[E]),Array.prototype.splice.call(Ee,E,1),Ee.length==0&&(delete f.g[y],f.h--)))):f&&(f=vn(f))&&(y=f.g[y.toString()],f=-1,y&&(f=We(y,E,U,ue)),(E=-1<f?y[f]:null)&&lt(E))}function lt(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[me])et(y.i,f);else{var E=f.type,U=f.proxy;y.removeEventListener?y.removeEventListener(E,U,f.capture):y.detachEvent?y.detachEvent(wt(E),U):y.addListener&&y.removeListener&&y.removeListener(U),(E=vn(y))?(et(E,f),E.h==0&&(E.src=null,y[ct]=null)):Ne(f)}}}function wt(f){return f in G?G[f]:G[f]="on"+f}function St(f,y){if(f.da)f=!0;else{y=new ie(y,this);var E=f.listener,U=f.ha||f.src;f.fa&&lt(f),f=E.call(U,y)}return f}function vn(f){return f=f[ct],f instanceof Ue?f:null}var Qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function zt(f){return typeof f=="function"?f:(f[Qt]||(f[Qt]=function(y){return f.handleEvent(y)}),f[Qt])}function Lt(){O.call(this),this.i=new Ue(this),this.M=this,this.F=null}x(Lt,O),Lt.prototype[me]=!0,Lt.prototype.removeEventListener=function(f,y,E,U){Tt(this,f,y,E,U)};function Vt(f,y){var E,U=f.F;if(U)for(E=[];U;U=U.F)E.push(U);if(f=f.M,U=y.type||y,typeof y=="string")y=new W(y,f);else if(y instanceof W)y.target=y.target||f;else{var ue=y;y=new W(U,f),V(y,ue)}if(ue=!0,E)for(var Ee=E.length-1;0<=Ee;Ee--){var Xe=y.g=E[Ee];ue=vt(Xe,U,!0,y)&&ue}if(Xe=y.g=f,ue=vt(Xe,U,!0,y)&&ue,ue=vt(Xe,U,!1,y)&&ue,E)for(Ee=0;Ee<E.length;Ee++)Xe=y.g=E[Ee],ue=vt(Xe,U,!1,y)&&ue}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var E=f.g[y],U=0;U<E.length;U++)Ne(E[U]);delete f.g[y],f.h--}}this.F=null},Lt.prototype.K=function(f,y,E,U){return this.i.add(String(f),y,!1,E,U)},Lt.prototype.L=function(f,y,E,U){return this.i.add(String(f),y,!0,E,U)};function vt(f,y,E,U){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var ue=!0,Ee=0;Ee<y.length;++Ee){var Xe=y[Ee];if(Xe&&!Xe.da&&Xe.capture==E){var Tn=Xe.listener,Lr=Xe.ha||Xe.src;Xe.fa&&et(f.i,Xe),ue=Tn.call(Lr,U)!==!1&&ue}}return ue&&!U.defaultPrevented}function Xt(f,y,E){if(typeof f=="function")E&&(f=m(f,E));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function At(f){f.g=Xt(()=>{f.g=null,f.i&&(f.i=!1,At(f))},f.l);let y=f.h;f.h=null,f.m.apply(null,y)}class Rr extends O{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(f){O.call(this),this.h=f,this.g={}}x(_n,O);var an=[];function cn(f){he(f.g,function(y,E){this.g.hasOwnProperty(E)&&lt(y)},f),f.g={}}_n.prototype.N=function(){_n.aa.N.call(this),cn(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xn=a.JSON.stringify,kt=a.JSON.parse,Jn=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Bt(){}Bt.prototype.h=null;function Zt(f){return f.h||(f.h=f.i())}function sr(){}var tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jt(){W.call(this,"d")}x(jt,W);function Sn(){W.call(this,"c")}x(Sn,W);var Po={},Si=null;function os(){return Si=Si||new Lt}Po.La="serverreachability";function Ss(f){W.call(this,Po.La,f)}x(Ss,W);function Pt(f){let y=os();Vt(y,new Ss(y))}Po.STAT_EVENT="statevent";function oa(f,y){W.call(this,Po.STAT_EVENT,f),this.stat=y}x(oa,W);function _r(f){let y=os();Vt(y,new oa(y,f))}Po.Ma="timingevent";function ko(f,y){W.call(this,Po.Ma,f),this.size=y}x(ko,W);function Ui(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function er(){this.g=!0}er.prototype.xa=function(){this.g=!1};function pi(f,y,E,U,ue,Ee){f.info(function(){if(f.g)if(Ee)for(var Xe="",Tn=Ee.split("&"),Lr=0;Lr<Tn.length;Lr++){var Wt=Tn[Lr].split("=");if(1<Wt.length){var pr=Wt[0];Wt=Wt[1];var Vr=pr.split("_");Xe=2<=Vr.length&&Vr[1]=="type"?Xe+(pr+"="+Wt+"&"):Xe+(pr+"=redacted&")}}else Xe=null;else Xe=Ee;return"XMLHTTP REQ ("+U+") [attempt "+ue+"]: "+y+`
`+E+`
`+Xe})}function Ai(f,y,E,U,ue,Ee,Xe){f.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ue+"]: "+y+`
`+E+`
`+Ee+" "+Xe})}function ss(f,y,E,U){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+As(f,E)+(U?" "+U:"")})}function Ec(f,y){f.info(function(){return"TIMEOUT: "+y})}er.prototype.info=function(){};function As(f,y){if(!f.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var U=E[f];if(!(2>U.length)){var ue=U[1];if(Array.isArray(ue)&&!(1>ue.length)){var Ee=ue[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(var Xe=1;Xe<ue.length;Xe++)ue[Xe]=""}}}}return Xn(E)}catch{return y}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},as={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oo;function Yi(){}x(Yi,Bt),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},Oo=new Yi;function po(f,y,E,U){this.j=f,this.i=y,this.l=E,this.R=U||1,this.U=new _n(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ds}function Ds(){this.i=null,this.g="",this.h=!1}var Ic={},Sc={};function Ac(f,y,E){f.L=1,f.v=Tl(cs(y)),f.m=E,f.P=!0,Sl(f,null)}function Sl(f,y){f.F=Date.now(),Al(f),f.A=cs(f.v);var E=f.A,U=f.R;Array.isArray(U)||(U=[String(U)]),Gt(E.i,"t",U),f.C=0,E=f.j.J,f.h=new Ds,f.g=Fr(f.j,E?y:null,!f.m),0<f.O&&(f.M=new Rr(m(f.Y,f,f.g),f.O)),y=f.U,E=f.g,U=f.ca;var ue="readystatechange";Array.isArray(ue)||(ue&&(an[0]=ue.toString()),ue=an);for(var Ee=0;Ee<ue.length;Ee++){var Xe=Ke(E,ue[Ee],U||y.handleEvent,!1,y.h||y);if(!Xe)break;y.g[Xe.key]=Xe}y=f.H?N(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Pt(),pi(f.i,f.u,f.A,f.l,f.R,f.m)}po.prototype.ca=function(f){f=f.target;let y=this.M;y&&ls(f)==3?y.j():this.Y(f)},po.prototype.Y=function(f){try{if(f==this.g)e:{let Vr=ls(this.g);var y=this.g.Ba();let Ua=this.g.Z();if(!(3>Vr)&&(Vr!=3||this.g&&(this.h.h||this.g.oa()||vf(this.g)))){this.J||Vr!=4||y==7||(y==8||0>=Ua?Pt(3):Pt(2)),go(this);var E=this.g.Z();this.X=E;t:if(rp(this)){var U=vf(this.g);f="";var ue=U.length,Ee=ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sa(this),Fa(this);var Xe="";break t}this.h.i=new a.TextDecoder}for(y=0;y<ue;y++)this.h.h=!0,f+=this.h.i.decode(U[y],{stream:!(Ee&&y==ue-1)});U.length=0,this.h.g+=f,this.C=0,Xe=this.h.g}else Xe=this.g.oa();if(this.o=E==200,Ai(this.i,this.u,this.A,this.l,this.R,Vr,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Tn,Lr=this.g;if((Tn=Lr.g?Lr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Tn)){var Wt=Tn;break t}}Wt=null}if(E=Wt)ss(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dl(this,E);else{this.o=!1,this.s=3,_r(12),sa(this),Fa(this);break e}}if(this.P){E=!0;let Ir;for(;!this.J&&this.C<Xe.length;)if(Ir=lf(this,Xe),Ir==Sc){Vr==4&&(this.s=4,_r(14),E=!1),ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Ir==Ic){this.s=4,_r(15),ss(this.i,this.l,Xe,"[Invalid Chunk]"),E=!1;break}else ss(this.i,this.l,Ir,null),Dl(this,Ir);if(rp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vr!=4||Xe.length!=0||this.h.h||(this.s=1,_r(16),E=!1),this.o=this.o&&E,!E)ss(this.i,this.l,Xe,"[Invalid Chunked Response]"),sa(this),Fa(this);else if(0<Xe.length&&!this.W){this.W=!0;var pr=this.j;pr.g==this&&pr.ba&&!pr.M&&(pr.j.info("Great, no buffering proxy detected. Bytes received: "+Xe.length),bt(pr),pr.M=!0,_r(11))}}else ss(this.i,this.l,Xe,null),Dl(this,Xe);Vr==4&&sa(this),this.o&&!this.J&&(Vr==4?wn(this.j,this):(this.o=!1,Al(this)))}else ja(this.g),E==400&&0<Xe.indexOf("Unknown SID")?(this.s=3,_r(12)):(this.s=0,_r(13)),sa(this),Fa(this)}}}catch{}finally{}};function rp(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function lf(f,y){var E=f.C,U=y.indexOf(`
`,E);return U==-1?Sc:(E=Number(y.substring(E,U)),isNaN(E)?Ic:(U+=1,U+E>y.length?Sc:(y=y.slice(U,U+E),f.C=U+E,y)))}po.prototype.cancel=function(){this.J=!0,sa(this)};function Al(f){f.S=Date.now()+f.I,uf(f,f.I)}function uf(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ui(m(f.ba,f),y)}function go(f){f.B&&(a.clearTimeout(f.B),f.B=null)}po.prototype.ba=function(){this.B=null;let f=Date.now();0<=f-this.S?(Ec(this.i,this.A),this.L!=2&&(Pt(),_r(17)),sa(this),this.s=2,Fa(this)):uf(this,this.S-f)};function Fa(f){f.j.G==0||f.J||wn(f.j,f)}function sa(f){go(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,cn(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function Dl(f,y){try{var E=f.j;if(E.G!=0&&(E.g==f||Dc(E.h,f))){if(!f.K&&Dc(E.h,f)&&E.G==3){try{var U=E.Da.g.parse(y)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ue=U;if(ue[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)Kt(E),Rl(E);else break e;pt(E),_r(18)}}else E.za=ue[1],0<E.za-E.T&&37500>ue[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ui(m(E.Za,E),6e3));if(1>=Ts(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else nr(E,11)}else if((f.K||E.g==f)&&Kt(E),!Y(y))for(ue=E.Da.g.parse(y),y=0;y<ue.length;y++){let Wt=ue[y];if(E.T=Wt[0],Wt=Wt[1],E.G==2)if(Wt[0]=="c"){E.K=Wt[1],E.ia=Wt[2];let pr=Wt[3];pr!=null&&(E.la=pr,E.j.info("VER="+E.la));let Vr=Wt[4];Vr!=null&&(E.Aa=Vr,E.j.info("SVER="+E.Aa));let Ua=Wt[5];Ua!=null&&typeof Ua=="number"&&0<Ua&&(U=1.5*Ua,E.L=U,E.j.info("backChannelRequestTimeoutMs_="+U)),U=E;let Ir=f.g;if(Ir){let fa=Ir.g?Ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fa){var Ee=U.h;Ee.g||fa.indexOf("spdy")==-1&&fa.indexOf("quic")==-1&&fa.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(hf(Ee,Ee.h),Ee.h=null))}if(U.D){let Ol=Ir.g?Ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Ol&&(U.ya=Ol,Vn(U.I,U.D,Ol))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),U=E;var Xe=f;if(U.qa=qr(U,U.J?U.ia:null,U.W),Xe.K){Or(U.h,Xe);var Tn=Xe,Lr=U.L;Lr&&(Tn.I=Lr),Tn.B&&(go(Tn),Al(Tn)),U.g=Xe}else ze(U);0<E.i.length&&k(E)}else Wt[0]!="stop"&&Wt[0]!="close"||nr(E,7);else E.G==3&&(Wt[0]=="stop"||Wt[0]=="close"?Wt[0]=="stop"?nr(E,7):Ba(E):Wt[0]!="noop"&&E.l&&E.l.ta(Wt),E.v=0)}}Pt(4)}catch{}}var ip=class{constructor(f,y){this.g=f,this.map=y}};function df(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ff(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ts(f){return f.h?1:f.g?f.g.size:0}function Dc(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function hf(f,y){f.g?f.g.add(y):f.h=y}function Or(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}df.prototype.cancel=function(){if(this.i=pf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function pf(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(let E of f.g.values())y=y.concat(E.D);return y}return I(f.i)}function aa(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var y=[],E=f.length,U=0;U<E;U++)y.push(f[U]);return y}y=[],E=0;for(U in f)y[E++]=f[U];return y}function Eu(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var y=[];f=f.length;for(var E=0;E<f;E++)y.push(E);return y}y=[],E=0;for(let U in f)y[E++]=U;return y}}}function gf(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var E=Eu(f),U=aa(f),ue=U.length,Ee=0;Ee<ue;Ee++)y.call(void 0,U[Ee],E&&E[Ee],f)}var Fo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qr(f,y){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var U=f[E].indexOf("="),ue=null;if(0<=U){var Ee=f[E].substring(0,U);ue=f[E].substring(U+1)}else Ee=f[E];y(Ee,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function Qi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Qi){this.h=f.h,Iu(this,f.j),this.o=f.o,this.g=f.g,Su(this,f.s),this.l=f.l;var y=f.i,E=new Ml;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),Ms(this,E),this.m=f.m}else f&&(y=String(f).match(Fo))?(this.h=!1,Iu(this,y[1]||"",!0),this.o=ca(y[2]||""),this.g=ca(y[3]||"",!0),Su(this,y[4]),this.l=ca(y[5]||"",!0),Ms(this,y[6]||"",!0),this.m=ca(y[7]||"")):(this.h=!1,this.i=new Ml(null,this.h))}Qi.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Ns(y,op,!0),":");var E=this.g;return(E||y=="file")&&(f.push("//"),(y=this.o)&&f.push(Ns(y,op,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(Ns(E,E.charAt(0)=="/"?mf:l0,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",Ns(E,Ps)),f.join("")};function cs(f){return new Qi(f)}function Iu(f,y,E){f.j=E?ca(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function Su(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function Ms(f,y,E){y instanceof Ml?(f.i=y,u0(f.i,f.h)):(E||(y=Ns(y,sp)),f.i=new Ml(y,f.h))}function Vn(f,y,E){f.i.set(y,E)}function Tl(f){return Vn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ca(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ns(f,y,E){return typeof f=="string"?(f=encodeURI(f).replace(y,c0),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function c0(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var op=/[#\/\?@]/g,l0=/[#\?:]/g,mf=/[#\?]/g,sp=/[#\?@]/g,Ps=/#/g;function Ml(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function mo(f){f.g||(f.g=new Map,f.h=0,f.i&&Qr(f.i,function(y,E){f.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=Ml.prototype,n.add=function(f,y){mo(this),this.i=null,f=Tc(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(y),this.h+=1,this};function Au(f,y){mo(f),y=Tc(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function ap(f,y){return mo(f),y=Tc(f,y),f.g.has(y)}n.forEach=function(f,y){mo(this),this.g.forEach(function(E,U){E.forEach(function(ue){f.call(y,ue,U,this)},this)},this)},n.na=function(){mo(this);let f=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let U=0;U<y.length;U++){let ue=f[U];for(let Ee=0;Ee<ue.length;Ee++)E.push(y[U])}return E},n.V=function(f){mo(this);let y=[];if(typeof f=="string")ap(this,f)&&(y=y.concat(this.g.get(Tc(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)y=y.concat(f[E])}return y},n.set=function(f,y){return mo(this),this.i=null,f=Tc(this,f),ap(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function Gt(f,y,E){Au(f,y),0<E.length&&(f.i=null,f.g.set(Tc(f,y),I(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var U=y[E];let Ee=encodeURIComponent(String(U)),Xe=this.V(U);for(U=0;U<Xe.length;U++){var ue=Ee;Xe[U]!==""&&(ue+="="+encodeURIComponent(String(Xe[U]))),f.push(ue)}}return this.i=f.join("&")};function Tc(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function u0(f,y){y&&!f.j&&(mo(f),f.i=null,f.g.forEach(function(E,U){var ue=U.toLowerCase();U!=ue&&(Au(this,U),Gt(this,ue,E))},f)),f.j=y}function d0(f,y){let E=new er;if(a.Image){let U=new Image;U.onload=g(zi,E,"TestLoadImage: loaded",!0,y,U),U.onerror=g(zi,E,"TestLoadImage: error",!1,y,U),U.onabort=g(zi,E,"TestLoadImage: abort",!1,y,U),U.ontimeout=g(zi,E,"TestLoadImage: timeout",!1,y,U),a.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=f}else y(!1)}function La(f,y){let E=new er,U=new AbortController,ue=setTimeout(()=>{U.abort(),zi(E,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:U.signal}).then(Ee=>{clearTimeout(ue),Ee.ok?zi(E,"TestPingServer: ok",!0,y):zi(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(ue),zi(E,"TestPingServer: error",!1,y)})}function zi(f,y,E,U,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),U(E)}catch{}}function f0(){this.g=new Jn}function h0(f,y,E){let U=E||"";try{gf(f,function(ue,Ee){let Xe=ue;l(ue)&&(Xe=Xn(ue)),y.push(U+Ee+"="+encodeURIComponent(Xe))})}catch(ue){throw y.push(U+"type="+encodeURIComponent("_badmap")),ue}}function la(f){this.l=f.Ub||null,this.j=f.eb||!1}x(la,Bt),la.prototype.g=function(){return new Mc(this.l,this.j)},la.prototype.i=(function(f){return function(){return f}})({});function Mc(f,y){Lt.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Mc,Lt),n=Mc.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,Lo(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nl(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?Nl(this):Lo(this),this.readyState==3&&Nc(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Nl(this))},n.Qa=function(f){this.g&&(this.response=f,Nl(this))},n.ga=function(){this.g&&Nl(this)};function Nl(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Lo(f)}n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=y.next();return f.join(`\r
`)};function Lo(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function cp(f){let y="";return he(f,function(E,U){y+=U,y+=":",y+=E,y+=`\r
`}),y}function Pl(f,y,E){e:{for(U in E){var U=!1;break e}U=!0}U||(E=cp(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):Vn(f,y,E))}function tr(f){Lt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(tr,Lt);var lp=/^https?$/i,Va=["POST","PUT"];n=tr.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,y,E,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oo.g(),this.v=this.o?Zt(this.o):Zt(Oo),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(Ee){Du(this,Ee);return}if(f=E||"",E=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ue in U)E.set(ue,U[ue]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(let Ee of U.keys())E.set(Ee,U.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(E.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),ue=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Va,y,void 0))||U||ue||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[Ee,Xe]of E)this.g.setRequestHeader(Ee,Xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mu(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ee){Du(this,Ee)}};function Du(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,kl(f),ua(f)}function kl(f){f.A||(f.A=!0,Vt(f,"complete"),Vt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Vt(this,"complete"),Vt(this,"abort"),ua(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ua(this,!0)),tr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tu(this):this.bb())},n.bb=function(){Tu(this)};function Tu(f){if(f.h&&typeof s<"u"&&(!f.v[1]||ls(f)!=4||f.Z()!=2)){if(f.u&&ls(f)==4)Xt(f.Ea,0,f);else if(Vt(f,"readystatechange"),ls(f)==4){f.h=!1;try{let Xe=f.Z();e:switch(Xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var U;if(U=Xe===0){var ue=String(f.D).match(Fo)[1]||null;!ue&&a.self&&a.self.location&&(ue=a.self.location.protocol.slice(0,-1)),U=!lp.test(ue?ue.toLowerCase():"")}E=U}if(E)Vt(f,"complete"),Vt(f,"success");else{f.m=6;try{var Ee=2<ls(f)?f.g.statusText:""}catch{Ee=""}f.l=Ee+" ["+f.Z()+"]",kl(f)}}finally{ua(f)}}}}function ua(f,y){if(f.g){Mu(f);let E=f.g,U=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Vt(f,"ready");try{E.onreadystatechange=U}catch{}}}function Mu(f){f.I&&(a.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function ls(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),kt(y)}};function vf(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ja(f){let y={};f=(f.g&&2<=ls(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<f.length;U++){if(Y(f[U]))continue;var E=C(f[U]);let ue=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();let Ee=y[ue]||[];y[ue]=Ee,Ee.push(E)}q(y,function(U){return U.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vo(f,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||y}function _f(f){this.Aa=0,this.i=[],this.j=new er,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vo("baseRetryDelayMs",5e3,f),this.cb=Vo("retryDelaySeedMs",1e4,f),this.Wa=Vo("forwardChannelMaxRetries",2,f),this.wa=Vo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new df(f&&f.concurrentRequestLimit),this.Da=new f0,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_f.prototype,n.la=8,n.G=1,n.connect=function(f,y,E,U){_r(0),this.W=f,this.H=y||{},E&&U!==void 0&&(this.H.OSID=E,this.H.OAID=U),this.F=this.X,this.I=qr(this,null,this.W),k(this)};function Ba(f){if(v(f),f.G==3){var y=f.U++,E=cs(f.I);if(Vn(E,"SID",f.K),Vn(E,"RID",y),Vn(E,"TYPE","terminate"),de(f,E),y=new po(f,f.j,y),y.L=2,y.v=Tl(cs(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&a.Image&&(new Image().src=y.v,E=!0),E||(y.g=Fr(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Al(y)}qn(f)}function Rl(f){f.g&&(bt(f),f.g.cancel(),f.g=null)}function v(f){Rl(f),f.u&&(a.clearTimeout(f.u),f.u=null),Kt(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function k(f){if(!ff(f.h)&&!f.s){f.s=!0;var y=f.Ga;Ce||Be(),fe||(Ce(),fe=!0),De.add(y,f),f.B=0}}function Q(f,y){return Ts(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ui(m(f.Ga,f,y),hr(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;let ue=new po(this,this.j,f),Ee=this.o;if(this.S&&(Ee?(Ee=N(Ee),V(Ee,this.S)):Ee=this.S),this.m!==null||this.O||(ue.H=Ee,Ee=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var U=this.i[E];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(y+=U,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=ke(this,ue,y),E=cs(this.I),Vn(E,"RID",f),Vn(E,"CVER",22),this.D&&Vn(E,"X-HTTP-Session-Id",this.D),de(this,E),Ee&&(this.O?y="headers="+encodeURIComponent(String(cp(Ee)))+"&"+y:this.m&&Pl(E,this.m,Ee)),hf(this.h,ue),this.Ua&&Vn(E,"TYPE","init"),this.P?(Vn(E,"$req",y),Vn(E,"SID","null"),ue.T=!0,Ac(ue,E,null)):Ac(ue,E,y),this.G=2}}else this.G==3&&(f?re(this,f):this.i.length==0||ff(this.h)||re(this))};function re(f,y){var E;y?E=y.l:E=f.U++;let U=cs(f.I);Vn(U,"SID",f.K),Vn(U,"RID",E),Vn(U,"AID",f.T),de(f,U),f.m&&f.o&&Pl(U,f.m,f.o),E=new po(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),y&&(f.i=y.D.concat(f.i)),y=ke(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),hf(f.h,E),Ac(E,U,y)}function de(f,y){f.H&&he(f.H,function(E,U){Vn(y,U,E)}),f.l&&gf({},function(E,U){Vn(y,U,E)})}function ke(f,y,E){E=Math.min(f.i.length,E);var U=f.l?m(f.l.Na,f.l,f):null;e:{var ue=f.i;let Ee=-1;for(;;){let Xe=["count="+E];Ee==-1?0<E?(Ee=ue[0].g,Xe.push("ofs="+Ee)):Ee=0:Xe.push("ofs="+Ee);let Tn=!0;for(let Lr=0;Lr<E;Lr++){let Wt=ue[Lr].g,pr=ue[Lr].map;if(Wt-=Ee,0>Wt)Ee=Math.max(0,ue[Lr].g-100),Tn=!1;else try{h0(pr,Xe,"req"+Wt+"_")}catch{U&&U(pr)}}if(Tn){U=Xe.join("&");break e}}}return f=f.i.splice(0,E),y.D=f,U}function ze(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;Ce||Be(),fe||(Ce(),fe=!0),De.add(y,f),f.v=0}}function pt(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ui(m(f.Fa,f),hr(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,qt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ui(m(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_r(10),Rl(this),qt(this))};function bt(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function qt(f){f.g=new po(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=cs(f.qa);Vn(y,"RID","rpc"),Vn(y,"SID",f.K),Vn(y,"AID",f.T),Vn(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Vn(y,"TO",f.ja),Vn(y,"TYPE","xmlhttp"),de(f,y),f.m&&f.o&&Pl(y,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=Tl(cs(y)),E.m=null,E.P=!0,Sl(E,f)}n.Za=function(){this.C!=null&&(this.C=null,Rl(this),pt(this),_r(19))};function Kt(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function wn(f,y){var E=null;if(f.g==y){Kt(f),bt(f),f.g=null;var U=2}else if(Dc(f.h,y))E=y.D,Or(f.h,y),U=1;else return;if(f.G!=0){if(y.o)if(U==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var ue=f.B;U=os(),Vt(U,new ko(U,E)),k(f)}else ze(f);else if(ue=y.s,ue==3||ue==0&&0<y.X||!(U==1&&Q(f,y)||U==2&&pt(f)))switch(E&&0<E.length&&(y=f.h,y.i=y.i.concat(E)),ue){case 1:nr(f,5);break;case 4:nr(f,10);break;case 3:nr(f,6);break;default:nr(f,2)}}}function hr(f,y){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*y}function nr(f,y){if(f.j.info("Error code "+y),y==2){var E=m(f.fb,f),U=f.Xa;let ue=!U;U=new Qi(U||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Iu(U,"https"),Tl(U),ue?d0(U.toString(),E):La(U.toString(),E)}else _r(2);f.G=0,f.l&&f.l.sa(y),qn(f),v(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),_r(2)):(this.j.info("Failed to ping google.com"),_r(1))};function qn(f){if(f.G=0,f.ka=[],f.l){let y=pf(f.h);(y.length!=0||f.i.length!=0)&&(M(f.ka,y),M(f.ka,f.i),f.h.i.length=0,I(f.i),f.i.length=0),f.l.ra()}}function qr(f,y,E){var U=E instanceof Qi?cs(E):new Qi(E);if(U.g!="")y&&(U.g=y+"."+U.g),Su(U,U.s);else{var ue=a.location;U=ue.protocol,y=y?y+"."+ue.hostname:ue.hostname,ue=+ue.port;var Ee=new Qi(null);U&&Iu(Ee,U),y&&(Ee.g=y),ue&&Su(Ee,ue),E&&(Ee.l=E),U=Ee}return E=f.D,y=f.ya,E&&y&&Vn(U,E,y),Vn(U,"VER",f.la),de(f,U),U}function Fr(f,y,E){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new tr(new la({eb:E})):new tr(f.pa),y.Ha(f.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gi(){}n=gi.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function us(){}us.prototype.g=function(f,y){return new yr(f,y)};function yr(f,y){Lt.call(this),this.g=new _f(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!Y(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Y(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new ks(this)}x(yr,Lt),yr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){Ba(this.g)},yr.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=Xn(f),f=E);y.i.push(new ip(y.Ya++,f)),y.G==3&&k(y)},yr.prototype.N=function(){this.g.l=null,delete this.j,Ba(this.g),delete this.g,yr.aa.N.call(this)};function da(f){jt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(let E in y){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}x(da,jt);function Nu(){Sn.call(this),this.status=1}x(Nu,Sn);function ks(f){this.g=f}x(ks,gi),ks.prototype.ua=function(){Vt(this.g,"a")},ks.prototype.ta=function(f){Vt(this.g,new da(f))},ks.prototype.sa=function(f){Vt(this.g,new Nu)},ks.prototype.ra=function(){Vt(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,iT=au.createWebChannelTransport=function(){return new us},rT=au.getStatEventTarget=function(){return os()},nT=au.Event=Po,N2=au.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,u_=au.ErrorCode=Ro,as.COMPLETE="complete",tT=au.EventType=as,sr.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,Ng=au.WebChannel=sr,pre=au.FetchXmlHttpFactory=la,tr.prototype.listenOnce=tr.prototype.L,tr.prototype.getLastError=tr.prototype.Ka,tr.prototype.getLastErrorCode=tr.prototype.Ba,tr.prototype.getStatus=tr.prototype.Z,tr.prototype.getResponseJson=tr.prototype.Oa,tr.prototype.getResponseText=tr.prototype.oa,tr.prototype.send=tr.prototype.ea,tr.prototype.setWithCredentials=tr.prototype.Ha,eT=au.XhrIo=tr}).apply(typeof M2<"u"?M2:typeof self<"u"?self:typeof window<"u"?window:{});var MV="@firebase/firestore",NV="4.8.0";var xi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");var mm="11.10.0";var Nd=new vp("@firebase/firestore");function Vg(){return Nd.logLevel}function vN(n){Nd.setLogLevel(n)}function $e(n,...e){if(Nd.logLevel<=Oc.DEBUG){let t=e.map(_N);Nd.debug(`Firestore (${mm}): ${n}`,...t)}}function ai(n,...e){if(Nd.logLevel<=Oc.ERROR){let t=e.map(_N);Nd.error(`Firestore (${mm}): ${n}`,...t)}}function xs(n,...e){if(Nd.logLevel<=Oc.WARN){let t=e.map(_N);Nd.warn(`Firestore (${mm}): ${n}`,...t)}}function _N(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function dt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,G7(n,r,t)}function G7(n,e,t){let r=`FIRESTORE (${mm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ai(r),new Error(r)}function xt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||G7(e,i,r)}function W7(n,e){n||dt(57014,e)}function at(n,e){return n}var Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},je=class extends $u{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ji=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var $2=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xi.UNAUTHENTICATED))}shutdown(){}},hT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},pT=class{constructor(e){this.t=e,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ji;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ji,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>te(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ji)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt(typeof r.accessToken=="string",31837,{l:r}),new $2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return xt(e===null||typeof e=="string",2055,{h:e}),new xi(e)}},gT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=xi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},mT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},G2=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,x1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xt(this.o===void 0,3512);let r=o=>{o.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,$e("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new G2(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new G2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function gre(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function yN(){return new TextEncoder}var I_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=gre(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function $t(n,e){return n<e?-1:n>e?1:0}function _T(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return $t(r,i);{let o=yN(),s=mre(o.encode(PV(n,t)),o.encode(PV(e,t)));return s!==0?s:$t(r,i)}}t+=r>65535?2:1}return $t(n.length,e.length)}function PV(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function mre(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return $t(n[t],e[t]);return $t(n.length,e.length)}function Wg(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function K7(n){return n+"\0"}var kV="__name__",W2=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&dt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&dt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return $t(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):_T(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return su.fromString(e.substring(4,e.length-2))}},En=class n extends W2{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new je(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vre=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ci=class n extends W2{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vre.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kV}static keyField(){return new n([kV])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new je(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new je(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new je(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new je(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var nt=class n{constructor(e){this.path=e}static fromPath(e){return new n(En.fromString(e))}static fromName(e){return new n(En.fromString(e).popFirst(5))}static empty(){return new n(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&En.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new En(e.slice()))}};function wN(n,e,t){if(!t)throw new je(Ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bN(n,e,t,r){if(e===!0&&r===!0)throw new je(Ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RV(n){if(!nt.isDocumentKey(n))throw new je(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OV(n){if(nt.isDocumentKey(n))throw new je(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Y7(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wx(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":dt(12329,{type:typeof n})}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Wx(n);throw new je(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Q7(n,e){if(e<=0)throw new je(Ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Ci(n,e){let t={typeString:n};return e&&(t.value=e),t}function Q_(n,e){if(!Y7(n))throw new je(Ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new je(Ie.INVALID_ARGUMENT,t);return!0}var FV=-62135596800,LV=1e6,mr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*LV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<FV)throw new je(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LV}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Q_(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-FV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};mr._jsonSchemaVersion="firestore/timestamp/1.0",mr._jsonSchema={type:Ci("string",mr._jsonSchemaVersion),seconds:Ci("number"),nanoseconds:Ci("number")};var Nt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new mr(0,0))}static max(){return new n(new mr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Kg=-1,Yg=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function yT(n){return n.fields.find(e=>e.kind===2)}function lh(n){return n.fields.filter(e=>e.kind!==2)}Yg.UNKNOWN_ID=-1;var Hg=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var S_=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Pa.min())}};function Z7(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(r===1e9?new mr(t+1,0):new mr(t,r));return new Pa(i,nt.empty(),e)}function X7(n){return new Pa(n.readTime,n.key,Kg)}var Pa=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Nt.min(),nt.empty(),Kg)}static max(){return new n(Nt.max(),nt.empty(),Kg)}};function xN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=nt.comparator(n.documentKey,e.documentKey),t!==0?t:$t(n.largestBatchId,e.largestBatchId))}var J7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",K2=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zd(n){return te(this,null,function*(){if(n.code!==Ie.FAILED_PRECONDITION||n.message!==J7)throw n;$e("LocalStore","Unexpectedly lost primary lease")})}var xe=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Qs="SimpleDb",Y2=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new vh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ji,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new vh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=CN(r.target.error);this.S.reject(new vh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($e(Qs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new bT(t)}},Pd=class n{static delete(e){return $e(Qs,"Removing database:",e),dh(ZE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!pp())return!1;if(n.F())return!0;let e=A0(),t=n.M(e),r=0<t&&t<10,i=ej(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(A0())===12.2&&ai("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return te(this,null,function*(){return this.db||($e(Qs,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new vh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new je(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new je(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new vh(e,s))},i.onupgradeneeded=o=>{$e(Qs,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{$e(Qs,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(xs('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,i){return te(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=Y2.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),xe.reject(l))).toPromise();return c.catch(()=>{}),yield a.D,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if($e(Qs,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function ej(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var wT=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return dh(this.$.delete())}},vh=class extends je{constructor(e,t){super(Ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function qd(n){return n.name==="IndexedDbTransactionError"}var bT=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?($e(Qs,"PUT",this.store.name,e,t),r=this.store.put(t,e)):($e(Qs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),dh(r)}add(e){return $e(Qs,"ADD",this.store.name,e,e),dh(this.store.add(e))}get(e){return dh(this.store.get(e)).next(t=>(t===void 0&&(t=null),$e(Qs,"GET",this.store.name,e,t),t))}delete(e){return $e(Qs,"DELETE",this.store.name,e),dh(this.store.delete(e))}count(){return $e(Qs,"COUNT",this.store.name),dh(this.store.count())}j(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new xe((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,c)=>{s.push(c)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new xe((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,t){$e(Qs,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Z=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}ee(e){let t=this.cursor({});return new xe((r,i)=>{t.onerror=o=>{let s=CN(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new xe((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new wT(a),l=t(a.primaryKey,a.value,c);if(l instanceof xe){let u=l.catch(h=>(c.done(),xe.reject(h)));r.push(u)}c.isDone?i():c.W===null?a.continue():a.continue(c.W)}}).next(()=>xe.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function dh(n){return new xe((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=CN(r.target.error);t(i)}})}var VV=!1;function CN(n){let e=Pd.M(A0());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return VV||(VV=!0,setTimeout(()=>{throw r},0)),r}}return n}var v_="IndexBackfiller",xT=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){$e(v_,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>te(this,null,function*(){this.task=null;try{let t=yield this.te.re();$e(v_,`Documents written: ${t}`)}catch(t){qd(t)?$e(v_,"Ignoring IndexedDB error during index backfill: ",t):yield zd(t)}yield this.ne(6e4)}))}},CT=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return te(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let r=new Set,i=t,o=!0;return xe.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return $e(v_,`Processing collection: ${s}`),this.se(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(a=>($e(v_,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}oe(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=X7(o);xN(s,r)>0&&(r=s)}),new Pa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Zs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Dd=-1;function Z_(n){return n==null}function A_(n){return n===0&&1/n==-1/0}function tj(n){return typeof n=="number"&&Number.isInteger(n)&&!A_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Q2="";function So(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jV(e)),e=_re(n.get(t),e);return jV(e)}function _re(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Q2:t+="";break;default:t+=o}}return t}function jV(n){return n+Q2+""}function ol(n){let e=n.length;if(xt(e>=2,64408,{path:n}),e===2)return xt(n.charAt(0)===Q2&&n.charAt(1)==="",56145,{path:n}),En.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Q2,o);switch((s<0||s>t)&&dt(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:dt(61167,{path:n})}o=s+2}return new En(r)}var uh="remoteDocuments",X_="owner",Pg="owner",D_="mutationQueues",yre="userId",hc="mutations",BV="batchId",gh="userMutationsIndex",UV=["userId","batchId"];function L2(n,e){return[n,So(e)]}function nj(n,e,t){return[n,So(e),t]}var wre={},Qg="documentMutations",Z2="remoteDocumentsV14",bre=["prefixPath","collectionGroup","readTime","documentId"],V2="documentKeyIndex",xre=["prefixPath","collectionGroup","documentId"],rj="collectionGroupIndex",Cre=["collectionGroup","readTime","prefixPath","documentId"],T_="remoteDocumentGlobal",ET="remoteDocumentGlobalKey",Zg="targets",ij="queryTargetsIndex",Ere=["canonicalId","targetId"],Xg="targetDocuments",Ire=["targetId","path"],EN="documentTargetsIndex",Sre=["path","targetId"],X2="targetGlobalKey",_h="targetGlobal",M_="collectionParents",Are=["collectionId","parent"],Jg="clientMetadata",Dre="clientId",Kx="bundles",Tre="bundleId",Yx="namedQueries",Mre="name",IN="indexConfiguration",Nre="indexId",IT="collectionGroupIndex",Pre="collectionGroup",__="indexState",kre=["indexId","uid"],oj="sequenceNumberIndex",Rre=["uid","sequenceNumber"],y_="indexEntries",Ore=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sj="documentKeyIndex",Fre=["indexId","uid","orderedDocumentKey"],Qx="documentOverlays",Lre=["userId","collectionPath","documentId"],ST="collectionPathOverlayIndex",Vre=["userId","collectionPath","largestBatchId"],aj="collectionGroupOverlayIndex",jre=["userId","collectionGroup","largestBatchId"],SN="globals",Bre="name",cj=[D_,hc,Qg,uh,Zg,X_,_h,Xg,Jg,T_,M_,Kx,Yx],Ure=[...cj,Qx],lj=[D_,hc,Qg,Z2,Zg,X_,_h,Xg,Jg,T_,M_,Kx,Yx,Qx],uj=lj,AN=[...uj,IN,__,y_],zre=AN,dj=[...AN,SN],qre=dj;var N_=class extends K2{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function Bi(n,e){let t=at(n);return Pd.N(t.ce,e)}function zV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hd(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fj(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Er=class n{constructor(e,t){this.comparator=e,this.root=t||al.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,al.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,al.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qg(this.root,e,this.comparator,!1)}getReverseIterator(){return new qg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qg(this.root,e,this.comparator,!0)}},qg=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},al=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw dt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw dt(27949);return e+(this.isRed()?0:1)}};al.EMPTY=null,al.RED=!0,al.BLACK=!1;al.EMPTY=new class{constructor(){this.size=0}get key(){throw dt(57766)}get value(){throw dt(16141)}get color(){throw dt(16727)}get left(){throw dt(29726)}get right(){throw dt(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new al(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var or=class n{constructor(e){this.comparator=e,this.data=new Er(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new J2(this.data.getIterator())}getIteratorFrom(e){return new J2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},J2=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function kg(n){return n.hasNext()?n.getNext():void 0}var Xs=class n{constructor(e){this.fields=e,e.sort(ci.comparator)}static empty(){return new n([])}unionWith(e){let t=new or(ci.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wg(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ex=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function hj(){return typeof atob<"u"}var ui=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ex("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ui.EMPTY_BYTE_STRING=new ui("");var Hre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uu(n){if(xt(!!n,39018),typeof n=="string"){let e=0,t=Hre.exec(n);if(xt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nr(n.seconds),nanos:Nr(n.nanos)}}function Nr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function du(n){return typeof n=="string"?ui.fromBase64String(n):ui.fromUint8Array(n)}var pj="server_timestamp",gj="__type__",mj="__previous_value__",vj="__local_write_time__";function Zx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[gj])===null||t===void 0?void 0:t.stringValue)===pj}function Xx(n){let e=n.mapValue.fields[mj];return Zx(e)?Xx(e):e}function P_(n){let e=uu(n.mapValue.fields[vj].timestampValue);return new mr(e.seconds,e.nanos)}var AT=class{constructor(e,t,r,i,o,s,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},tx="(default)",kd=class n{constructor(e,t){this.projectId=e,this.database=t||tx}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===tx}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var DN="__type__",_j="__max__",Sd={mapValue:{fields:{__type__:{stringValue:_j}}}},TN="__vector__",em="value",j2={nullValue:"NULL_VALUE"};function Rd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zx(n)?4:yj(n)?9007199254740991:Jx(n)?10:11:dt(28295,{value:n})}function dl(n,e){if(n===e)return!0;let t=Rd(n);if(t!==Rd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return P_(n).isEqual(P_(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=uu(i.timestampValue),a=uu(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return du(i.bytesValue).isEqual(du(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Nr(i.geoPointValue.latitude)===Nr(o.geoPointValue.latitude)&&Nr(i.geoPointValue.longitude)===Nr(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Nr(i.integerValue)===Nr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Nr(i.doubleValue),a=Nr(o.doubleValue);return s===a?A_(s)===A_(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Wg(n.arrayValue.values||[],e.arrayValue.values||[],dl);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(zV(s)!==zV(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!dl(s[c],a[c])))return!1;return!0})(n,e);default:return dt(52216,{left:n})}}function k_(n,e){return(n.values||[]).find(t=>dl(t,e))!==void 0}function Od(n,e){if(n===e)return 0;let t=Rd(n),r=Rd(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Nr(o.integerValue||o.doubleValue),c=Nr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return qV(n.timestampValue,e.timestampValue);case 4:return qV(P_(n),P_(e));case 5:return _T(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=du(o),c=du(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=$t(a[l],c[l]);if(u!==0)return u}return $t(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=$t(Nr(o.latitude),Nr(s.latitude));return a!==0?a:$t(Nr(o.longitude),Nr(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return HV(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,l,u;let h=o.fields||{},m=s.fields||{},g=(a=h[em])===null||a===void 0?void 0:a.arrayValue,x=(c=m[em])===null||c===void 0?void 0:c.arrayValue,I=$t(((l=g?.values)===null||l===void 0?void 0:l.length)||0,((u=x?.values)===null||u===void 0?void 0:u.length)||0);return I!==0?I:HV(g,x)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Sd.mapValue&&s===Sd.mapValue)return 0;if(o===Sd.mapValue)return 1;if(s===Sd.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){let m=_T(c[h],u[h]);if(m!==0)return m;let g=Od(a[c[h]],l[u[h]]);if(g!==0)return g}return $t(c.length,u.length)})(n.mapValue,e.mapValue);default:throw dt(23264,{le:t})}}function qV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $t(n,e);let t=uu(n),r=uu(e),i=$t(t.seconds,r.seconds);return i!==0?i:$t(t.nanos,r.nanos)}function HV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Od(t[i],r[i]);if(o)return o}return $t(t.length,r.length)}function tm(n){return DT(n)}function DT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=uu(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return du(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return nt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=DT(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${DT(t.fields[s])}`;return i+"}"})(n.mapValue):dt(61005,{value:n})}function B2(n){switch(Rd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Xx(n);return e?16+B2(e):16;case 5:return 2*n.stringValue.length;case 6:return du(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+B2(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Hd(r.fields,(o,s)=>{i+=o.length+B2(s)}),i})(n.mapValue);default:throw dt(13486,{value:n})}}function yh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function TT(n){return!!n&&"integerValue"in n}function R_(n){return!!n&&"arrayValue"in n}function $V(n){return!!n&&"nullValue"in n}function GV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function U2(n){return!!n&&"mapValue"in n}function Jx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[DN])===null||t===void 0?void 0:t.stringValue)===TN}function w_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Hd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=w_(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=w_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_j}var wj={mapValue:{fields:{[DN]:{stringValue:TN},[em]:{arrayValue:{}}}}};function $re(n){return"nullValue"in n?j2:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yh(kd.empty(),nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Jx(n)?wj:{mapValue:{}}:dt(35942,{value:n})}function Gre(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yh(kd.empty(),nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?wj:"mapValue"in n?Jx(n)?{mapValue:{}}:Sd:dt(61959,{value:n})}function WV(n,e){let t=Od(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function KV(n,e){let t=Od(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Io=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!U2(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=w_(t)}setAll(e){let t=ci.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=w_(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());U2(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];U2(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Hd(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(w_(this.value))}};function bj(n){let e=[];return Hd(n.fields,(t,r)=>{let i=new ci([t]);if(U2(r)){let o=bj(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Xs(e)}var Ei=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Nt.min(),Nt.min(),Nt.min(),Io.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Nt.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Nt.min(),Nt.min(),Io.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Nt.min(),Nt.min(),Io.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Io.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Io.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fl=class{constructor(e,t){this.position=e,this.inclusive=t}};function YV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=nt.comparator(nt.fromName(s.referenceValue),t.key):r=Od(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function QV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!dl(n.position[t],e.position[t]))return!1;return!0}var wh=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Wre(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var nx=class{},xn=class n extends nx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new PT(e,t,r):t==="array-contains"?new OT(e,r):t==="in"?new rx(e,r):t==="not-in"?new FT(e,r):t==="array-contains-any"?new LT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new kT(e,r):new RT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Od(t,this.value)):t!==null&&Rd(this.value)===Rd(t)&&this.matchesComparison(Od(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Qn=class n extends nx{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return nm(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function nm(n){return n.op==="and"}function MT(n){return n.op==="or"}function MN(n){return xj(n)&&nm(n)}function xj(n){for(let e of n.filters)if(e instanceof Qn)return!1;return!0}function NT(n){if(n instanceof xn)return n.field.canonicalString()+n.op.toString()+tm(n.value);if(MN(n))return n.filters.map(e=>NT(e)).join(",");{let e=n.filters.map(t=>NT(t)).join(",");return`${n.op}(${e})`}}function Cj(n,e){return n instanceof xn?(function(r,i){return i instanceof xn&&r.op===i.op&&r.field.isEqual(i.field)&&dl(r.value,i.value)})(n,e):n instanceof Qn?(function(r,i){return i instanceof Qn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Cj(s,i.filters[a]),!0):!1})(n,e):void dt(19439)}function Ej(n,e){let t=n.filters.concat(e);return Qn.create(t,n.op)}function Ij(n){return n instanceof xn?(function(t){return`${t.field.canonicalString()} ${t.op} ${tm(t.value)}`})(n):n instanceof Qn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ij).join(" ,")+"}"})(n):"Filter"}var PT=class extends xn{constructor(e,t,r){super(e,t,r),this.key=nt.fromName(r.referenceValue)}matches(e){let t=nt.comparator(e.key,this.key);return this.matchesComparison(t)}},kT=class extends xn{constructor(e,t){super(e,"in",t),this.keys=Sj("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},RT=class extends xn{constructor(e,t){super(e,"not-in",t),this.keys=Sj("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Sj(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>nt.fromName(r.referenceValue))}var OT=class extends xn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return R_(t)&&k_(t.arrayValue,this.value)}},rx=class extends xn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&k_(this.value.arrayValue,t)}},FT=class extends xn{constructor(e,t){super(e,"not-in",t)}matches(e){if(k_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!k_(this.value.arrayValue,t)}},LT=class extends xn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!R_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>k_(this.value.arrayValue,r))}};var VT=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function jT(n,e=null,t=[],r=[],i=null,o=null,s=null){return new VT(n,e,t,r,i,o,s)}function bh(n){let e=at(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>NT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Z_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>tm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>tm(r)).join(",")),e.Pe=t}return e.Pe}function J_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Wre(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Cj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QV(n.startAt,e.startAt)&&QV(n.endAt,e.endAt)}function ix(n){return nt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ox(n,e){return n.filters.filter(t=>t instanceof xn&&t.field.isEqual(e))}function ZV(n,e,t){let r=j2,i=!0;for(let o of ox(n,e)){let s=j2,a=!0;switch(o.op){case"<":case"<=":s=$re(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=j2}WV({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];WV({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function XV(n,e,t){let r=Sd,i=!0;for(let o of ox(n,e)){let s=Sd,a=!0;switch(o.op){case">=":case">":s=Gre(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Sd}KV({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];KV({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var pc=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Aj(n,e,t,r,i,o,s,a){return new pc(n,e,t,r,i,o,s,a)}function vm(n){return new pc(n)}function JV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NN(n){return n.collectionGroup!==null}function $g(n){let e=at(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new or(ci.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new wh(o,r))}),t.has(ci.keyField().canonicalString())||e.Te.push(new wh(ci.keyField(),r))}return e.Te}function Jo(n){let e=at(n);return e.Ie||(e.Ie=Kre(e,$g(n))),e.Ie}function Kre(n,e){if(n.limitType==="F")return jT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new wh(i.field,o)});let t=n.endAt?new fl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fl(n.startAt.position,n.startAt.inclusive):null;return jT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function BT(n,e){let t=n.filters.concat([e]);return new pc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sx(n,e,t){return new pc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ey(n,e){return J_(Jo(n),Jo(e))&&n.limitType===e.limitType}function Dj(n){return`${bh(Jo(n))}|lt:${n.limitType}`}function jg(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Ij(i)).join(", ")}]`),Z_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>tm(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>tm(i)).join(",")),`Target(${r})`})(Jo(n))}; limitType=${n.limitType})`}function ty(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):nt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of $g(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=YV(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,$g(r),i)||r.endAt&&!(function(s,a,c){let l=YV(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,$g(r),i))})(n,e)}function Tj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Mj(n){return(e,t)=>{let r=!1;for(let i of $g(n)){let o=Yre(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Yre(n,e,t){let r=n.field.isKeyField()?nt.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Od(c,l):dt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt(19790,{direction:n.dir})}}var gc=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hd(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return fj(this.inner)}size(){return this.innerSize}};var Qre=new Er(nt.comparator);function ws(){return Qre}var Nj=new Er(nt.comparator);function g_(...n){let e=Nj;for(let t of n)e=e.insert(t.key,t);return e}function Pj(n){let e=Nj;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function sl(){return b_()}function kj(){return b_()}function b_(){return new gc(n=>n.toString(),(n,e)=>n.isEqual(e))}var Zre=new Er(nt.comparator),Xre=new or(nt.comparator);function fn(...n){let e=Xre;for(let t of n)e=e.add(t);return e}var Jre=new or($t);function PN(){return Jre}function kN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:A_(e)?"-0":e}}function Rj(n){return{integerValue:""+n}}function Oj(n,e){return tj(e)?Rj(e):kN(n,e)}var rm=class{constructor(){this._=void 0}};function eie(n,e,t){return n instanceof Fd?(function(i,o){let s={fields:{[gj]:{stringValue:pj},[vj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Zx(o)&&(o=Xx(o)),o&&(s.fields[mj]=o),{mapValue:s}})(t,e):n instanceof fu?Lj(n,e):n instanceof hu?Vj(n,e):(function(i,o){let s=Fj(i,o),a=e7(s)+e7(i.Ee);return TT(s)&&TT(i.Ee)?Rj(a):kN(i.serializer,a)})(n,e)}function tie(n,e,t){return n instanceof fu?Lj(n,e):n instanceof hu?Vj(n,e):t}function Fj(n,e){return n instanceof Ld?(function(r){return TT(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Fd=class extends rm{},fu=class extends rm{constructor(e){super(),this.elements=e}};function Lj(n,e){let t=jj(e);for(let r of n.elements)t.some(i=>dl(i,r))||t.push(r);return{arrayValue:{values:t}}}var hu=class extends rm{constructor(e){super(),this.elements=e}};function Vj(n,e){let t=jj(e);for(let r of n.elements)t=t.filter(i=>!dl(i,r));return{arrayValue:{values:t}}}var Ld=class extends rm{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function e7(n){return Nr(n.integerValue||n.doubleValue)}function jj(n){return R_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var xh=class{constructor(e,t){this.field=e,this.transform=t}};function nie(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof fu&&i instanceof fu||r instanceof hu&&i instanceof hu?Wg(r.elements,i.elements,dl):r instanceof Ld&&i instanceof Ld?dl(r.Ee,i.Ee):r instanceof Fd&&i instanceof Fd})(n.transform,e.transform)}var UT=class{constructor(e,t){this.version=e,this.transformResults=t}},Wr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function z2(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var im=class{};function Bj(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jd(n.key,Wr.none()):new Vd(n.key,n.data,Wr.none());{let t=n.data,r=Io.empty(),i=new or(ci.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new mc(n.key,r,new Xs(i.toArray()),Wr.none())}}function rie(n,e,t){n instanceof Vd?(function(i,o,s){let a=i.value.clone(),c=n7(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof mc?(function(i,o,s){if(!z2(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=n7(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Uj(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function x_(n,e,t,r){return n instanceof Vd?(function(o,s,a,c){if(!z2(o.precondition,s))return a;let l=o.value.clone(),u=r7(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof mc?(function(o,s,a,c){if(!z2(o.precondition,s))return a;let l=r7(o.fieldTransforms,c,s),u=s.data;return u.setAll(Uj(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))})(n,e,t,r):(function(o,s,a){return z2(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function iie(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Fj(r.transform,i||null);o!=null&&(t===null&&(t=Io.empty()),t.set(r.field,o))}return t||null}function t7(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wg(r,i,(o,s)=>nie(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Vd=class extends im{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mc=class extends im{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Uj(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function n7(n,e,t){let r=new Map;xt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,tie(s,a,t[i]))}return r}function r7(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,eie(o,s,e))}return r}var jd=class extends im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},O_=class extends im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var F_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&rie(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=x_(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=x_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=kj();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=Bj(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fn())}isEqual(e){return this.batchId===e.batchId&&Wg(this.mutations,e.mutations,(t,r)=>t7(t,r))&&Wg(this.baseMutations,e.baseMutations,(t,r)=>t7(t,r))}},zT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return Zre})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var L_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var wi,Dn;function zj(n){switch(n){case Ie.OK:return dt(64938);case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return dt(15467,{code:n})}}function qj(n){if(n===void 0)return ai("GRPC error has no .code"),Ie.UNKNOWN;switch(n){case wi.OK:return Ie.OK;case wi.CANCELLED:return Ie.CANCELLED;case wi.UNKNOWN:return Ie.UNKNOWN;case wi.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case wi.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case wi.INTERNAL:return Ie.INTERNAL;case wi.UNAVAILABLE:return Ie.UNAVAILABLE;case wi.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case wi.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case wi.NOT_FOUND:return Ie.NOT_FOUND;case wi.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case wi.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case wi.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case wi.ABORTED:return Ie.ABORTED;case wi.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case wi.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case wi.DATA_LOSS:return Ie.DATA_LOSS;default:return dt(39323,{code:n})}}(Dn=wi||(wi={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";var i7=null;var oie=new su([4294967295,4294967295],0);function o7(n){let e=yN().encode(n),t=new JD;return t.update(e),new Uint8Array(t.digest())}function s7(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new su([t,r],0),new su([i,o],0)]}var HT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mh(`Invalid padding: ${t}`);if(r<0)throw new mh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new mh(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=su.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(su.fromNumber(r)));return i.compare(oie)===1&&(i=new su([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=o7(e),[r,i]=s7(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=o7(e),[r,i]=s7(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},mh=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var V_=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,j_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Nt.min(),i,new Er($t),ws(),fn())}},j_=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fn(),fn(),fn())}};var Gg=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},ax=class{constructor(e,t){this.targetId=e,this.De=t}},cx=class{constructor(e,t,r=ui.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},lx=class{constructor(){this.ve=0,this.Ce=a7(),this.Fe=ui.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fn(),t=fn(),r=fn();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt(38017,{changeType:o})}}),new j_(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=a7()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,xt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},$T=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ws(),this.je=P2(),this.Je=P2(),this.He=new Er($t)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:dt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(ix(o))if(r===0){let s=new nt(o.path);this.Xe(t,s,Ei.newNoDocument(s,Nt.min()))}else xt(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}i7?.ct((function(u,h,m,g,x){var I,M,P,Y,B,K;let oe={localCacheCount:u,existenceFilterCount:h.count,databaseId:m.database,projectId:m.projectId},he=h.unchangedNames;return he&&(oe.bloomFilter={applied:x===0,hashCount:(I=he?.hashCount)!==null&&I!==void 0?I:0,bitmapLength:(Y=(P=(M=he?.bits)===null||M===void 0?void 0:M.bitmap)===null||P===void 0?void 0:P.length)!==null&&Y!==void 0?Y:0,padding:(K=(B=he?.bits)===null||B===void 0?void 0:B.padding)!==null&&K!==void 0?K:0,mightContain:q=>{var N;return(N=g?.mightContain(q))!==null&&N!==void 0&&N}}),oe})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=du(r).toUint8Array()}catch(c){if(c instanceof ex)return xs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new HT(s,i,o)}catch(c){return xs(c instanceof mh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&ix(a.target)){let c=new nt(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Ei.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=fn();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new V_(e,t,this.He,this.ze,r);return this.ze=ws(),this.je=P2(),this.Je=P2(),this.He=new Er($t),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new lx,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new or($t),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new or($t),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||$e("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new lx),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function P2(){return new Er(nt.comparator)}function a7(){return new Er(nt.comparator)}var sie={asc:"ASCENDING",desc:"DESCENDING"},aie={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cie={and:"AND",or:"OR"},GT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function WT(n,e){return n.useProto3Json||Z_(e)?e:{value:e}}function om(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lie(n,e){return om(n,e.toTimestamp())}function li(n){return xt(!!n,49232),Nt.fromTimestamp((function(t){let r=uu(t);return new mr(r.seconds,r.nanos)})(n))}function RN(n,e){return KT(n,e).canonicalString()}function KT(n,e){let t=(function(i){return new En(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function $j(n){let e=En.fromString(n);return xt(tB(e),10190,{key:e.toString()}),e}function B_(n,e){return RN(n.databaseId,e.path)}function cl(n,e){let t=$j(e);if(t.get(1)!==n.databaseId.projectId)throw new je(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nt(Kj(t))}function Gj(n,e){return RN(n.databaseId,e)}function Wj(n){let e=$j(n);return e.length===4?En.emptyPath():Kj(e)}function YT(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kj(n){return xt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function c7(n,e,t){return{name:B_(n,e),fields:t.value.mapValue.fields}}function Yj(n,e,t){let r=cl(n,e.name),i=li(e.updateTime),o=e.createTime?li(e.createTime):Nt.min(),s=new Io({mapValue:{fields:e.fields}}),a=Ei.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function uie(n,e){return"found"in e?(function(r,i){xt(!!i.found,43571),i.found.name,i.found.updateTime;let o=cl(r,i.found.name),s=li(i.found.updateTime),a=i.found.createTime?li(i.found.createTime):Nt.min(),c=new Io({mapValue:{fields:i.found.fields}});return Ei.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){xt(!!i.missing,3894),xt(!!i.readTime,22933);let o=cl(r,i.missing),s=li(i.readTime);return Ei.newNoDocument(o,s)})(n,e):dt(7234,{result:e})}function die(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:dt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,u){return l.useProto3Json?(xt(u===void 0||typeof u=="string",58123),ui.fromBase64String(u||"")):(xt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ui.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let u=l.code===void 0?Ie.UNKNOWN:qj(l.code);return new je(u,l.message||"")})(s);t=new cx(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=cl(n,r.document.name),o=li(r.document.updateTime),s=r.document.createTime?li(r.document.createTime):Nt.min(),a=new Io({mapValue:{fields:r.document.fields}}),c=Ei.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new Gg(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=cl(n,r.document),o=r.readTime?li(r.readTime):Nt.min(),s=Ei.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Gg([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=cl(n,r.document),o=r.removedTargetIds||[];t=new Gg([],o,i,null)}else{if(!("filter"in e))return dt(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new qT(i,o),a=r.targetId;t=new ax(a,s)}}return t}function U_(n,e){let t;if(e instanceof Vd)t={update:c7(n,e.key,e.value)};else if(e instanceof jd)t={delete:B_(n,e.key)};else if(e instanceof mc)t={update:c7(n,e.key,e.data),updateMask:vie(e.fieldMask)};else{if(!(e instanceof O_))return dt(16599,{Rt:e.type});t={verify:B_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Fd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ld)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw dt(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:lie(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:dt(27497)})(n,e.precondition)),t}function QT(n,e){let t=e.currentDocument?(function(o){return o.updateTime!==void 0?Wr.updateTime(li(o.updateTime)):o.exists!==void 0?Wr.exists(o.exists):Wr.none()})(e.currentDocument):Wr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>(function(s,a){let c=null;if("setToServerValue"in a)xt(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new Fd;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new fu(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new hu(u)}else"increment"in a?c=new Ld(s,a.increment):dt(16584,{proto:a});let l=ci.fromServerFormat(a.fieldPath);return new xh(l,c)})(n,i)):[];if(e.update){e.update.name;let i=cl(n,e.update.name),o=new Io({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=(function(c){let l=c.fieldPaths||[];return new Xs(l.map(u=>ci.fromServerFormat(u)))})(e.updateMask);return new mc(i,o,s,t,r)}return new Vd(i,o,t,r)}if(e.delete){let i=cl(n,e.delete);return new jd(i,t)}if(e.verify){let i=cl(n,e.verify);return new O_(i,t)}return dt(1463,{proto:e})}function fie(n,e){return n&&n.length>0?(xt(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?li(i.updateTime):li(o);return s.isEqual(Nt.min())&&(s=li(o)),new UT(s,i.transformResults||[])})(t,e))):[]}function Qj(n,e){return{documents:[Gj(n,e.path)]}}function Zj(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Gj(n,i);let o=(function(l){if(l.length!==0)return eB(Qn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(u=>(function(m){return{field:Bg(m.field),direction:pie(m.dir)}})(u))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=WT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function Xj(n){let e=Wj(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){xt(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=(function(h){let m=Jj(h);return m instanceof Qn&&MN(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(h){return h.map(m=>(function(x){return new wh(Ug(x.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(h){let m;return m=typeof h=="object"?h.value:h,Z_(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(h){let m=!!h.before,g=h.values||[];return new fl(g,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(h){let m=!h.before,g=h.values||[];return new fl(g,m)})(t.endAt)),Aj(e,i,s,o,a,"F",c,l)}function hie(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Jj(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ug(t.unaryFilter.field);return xn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ug(t.unaryFilter.field);return xn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ug(t.unaryFilter.field);return xn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ug(t.unaryFilter.field);return xn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return dt(61313);default:return dt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xn.create(Ug(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return dt(58110);default:return dt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Qn.create(t.compositeFilter.filters.map(r=>Jj(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return dt(1026)}})(t.compositeFilter.op))})(n):dt(30097,{filter:n})}function pie(n){return sie[n]}function gie(n){return aie[n]}function mie(n){return cie[n]}function Bg(n){return{fieldPath:n.canonicalString()}}function Ug(n){return ci.fromServerFormat(n.fieldPath)}function eB(n){return n instanceof xn?(function(t){if(t.op==="=="){if(GV(t.value))return{unaryFilter:{field:Bg(t.field),op:"IS_NAN"}};if($V(t.value))return{unaryFilter:{field:Bg(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(GV(t.value))return{unaryFilter:{field:Bg(t.field),op:"IS_NOT_NAN"}};if($V(t.value))return{unaryFilter:{field:Bg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bg(t.field),op:gie(t.op),value:t.value}}})(n):n instanceof Qn?(function(t){let r=t.getFilters().map(i=>eB(i));return r.length===1?r[0]:{compositeFilter:{op:mie(t.op),filters:r}}})(n):dt(54877,{filter:n})}function vie(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tB(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var sm=class n{constructor(e,t,r,i,o=Nt.min(),s=Nt.min(),a=ui.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ux=class{constructor(e){this.gt=e}};function _ie(n,e){let t;if(e.document)t=Yj(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=nt.fromSegments(e.noDocument.path),i=Eh(e.noDocument.readTime);t=Ei.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt(56709);{let r=nt.fromSegments(e.unknownDocument.path),i=Eh(e.unknownDocument.version);t=Ei.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){let o=new mr(i[0],i[1]);return Nt.fromTimestamp(o)})(e.readTime)),t}function l7(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:B_(o,s.key),fields:s.data.value.mapValue.fields,updateTime:om(o,s.version.toTimestamp()),createTime:om(o,s.createTime.toTimestamp())}})(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ch(e.version)};else{if(!e.isUnknownDocument())return dt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ch(e.version)}}return r}function dx(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ch(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Eh(n){let e=new mr(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function fh(n,e){let t=(e.baseMutations||[]).map(o=>QT(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>QT(n.gt,o)),i=mr.fromMillis(e.localWriteTimeMs);return new F_(e.batchId,i,t,r)}function m_(n){let e=Eh(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Eh(n.lastLimboFreeSnapshotVersion):Nt.min(),r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){let s=o.documents.length;return xt(s===1,1966,{count:s}),Jo(vm(Wj(o.documents[0])))})(n.query):(function(o){return Jo(Xj(o))})(n.query),new sm(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ui.fromBase64String(n.resumeToken))}function nB(n,e){let t=Ch(e.snapshotVersion),r=Ch(e.lastLimboFreeSnapshotVersion),i;i=ix(e.target)?Qj(n.gt,e.target):Zj(n.gt,e.target).Vt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bh(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ON(n){let e=Xj({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sx(e,e.limit,"L"):e}function oT(n,e){return new L_(e.largestBatchId,QT(n.gt,e.overlayMutation))}function u7(n,e){let t=e.path.lastSegment();return[n,So(e.path.popLast()),t]}function d7(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ch(r.readTime),documentKey:So(r.documentKey.path),largestBatchId:r.largestBatchId}}var ZT=class{getBundleMetadata(e,t){return f7(e).get(t).next(r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Eh(o.createTime),version:o.version}})(r)})}saveBundleMetadata(e,t){return f7(e).put((function(i){return{bundleId:i.id,createTime:Ch(li(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return h7(e).get(t).next(r=>{if(r)return(function(o){return{name:o.name,query:ON(o.bundledQuery),readTime:Eh(o.readTime)}})(r)})}saveNamedQuery(e,t){return h7(e).put((function(i){return{name:i.name,readTime:Ch(li(i.readTime)),bundledQuery:i.bundledQuery}})(t))}};function f7(n){return Bi(n,Kx)}function h7(n){return Bi(n,Yx)}var fx=class n{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return d_(e).get(u7(this.userId,t)).next(r=>r?oT(this.serializer,r):null)}getOverlays(e,t){let r=sl();return xe.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new L_(t,s);i.push(this.wt(e,a))}),xe.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(So(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(d_(e).Y(ST,a))}),xe.waitFor(o)}getOverlaysForCollection(e,t,r){let i=sl(),o=So(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return d_(e).j(ST,s).next(a=>{for(let c of a){let l=oT(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=sl(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return d_(e).X({index:aj,range:a},(c,l,u)=>{let h=oT(this.serializer,l);o.size()<i||h.largestBatchId===s?(o.set(h.getKey(),h),s=h.largestBatchId):u.done()}).next(()=>o)}wt(e,t){return d_(e).put((function(i,o,s){let[a,c,l]=u7(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:U_(i.gt,s.mutation)}})(this.serializer,this.userId,t))}};function d_(n){return Bi(n,Qx)}var XT=class{St(e){return Bi(e,SN)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?ui.fromUint8Array(r):ui.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var cu=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Nr(e.integerValue));else if("doubleValue"in e){let r=Nr(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),A_(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=uu(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(du(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?yj(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Jx(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):dt(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=em,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Nr(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),nt.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};cu.Ut=new cu;var Rg=255;function yie(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function p7(n){let e=64-(function(r){let i=0;for(let o=0;o<8;++o){let s=yie(255&r[o]);if(i+=s,s!==8)break}return i})(n);return Math.ceil(e/8)}var JT=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{let i=t.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{let i=t.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){let t=this.Xt(e),r=p7(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}tn(e){let t=this.Xt(e),r=p7(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}nn(){this.rn(Rg),this.rn(255)}sn(){this._n(Rg),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=(function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===Rg?(this.rn(Rg),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===Rg?(this._n(Rg),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},eM=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},tM=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},hh=class{constructor(){this.un=new JT,this.cn=new eM(this.un),this.ln=new tM(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var ph=class n{constructor(e,t,r,i){this.Pn=e,this.Tn=t,this.In=r,this.dn=i}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:q2(this.In),directionalValue:q2(this.dn),orderedDocumentKey:q2(t),documentKey:r.path.toArray()}}Rn(e,t,r){let i=this.An(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function xd(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=g7(n.In,e.In),t!==0?t:(t=g7(n.dn,e.dn),t!==0?t:nt.comparator(n.Tn,e.Tn)))}function g7(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function q2(n){return eI()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function m7(n){return typeof n!="string"?n:(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}var hx=class{constructor(e){this.Vn=new or((t,r)=>ci.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(xt(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=yT(e);if(t!==void 0&&!this.yn(t))return!1;let r=lh(e),i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.wn(a,c)||!this.Sn(this.mn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new or(ci.comparator),t=[];for(let r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Hg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Hg(r.field,0))}for(let r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Hg(r.field,r.dir==="asc"?0:1)));return new Yg(Yg.UNKNOWN_ID,this.collectionId,t,S_.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function rB(n){var e,t;if(xt(n instanceof xn||n instanceof Qn,20012),n instanceof xn){if(n instanceof rx){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>xn.create(n.field,"==",o)))||[];return Qn.create(i,"or")}return n}let r=n.filters.map(i=>rB(i));return Qn.create(r,n.op)}function wie(n){if(n.getFilters().length===0)return[];let e=iM(rB(n));return xt(iB(e),7391),nM(e)||rM(e)?[e]:e.getFilters()}function nM(n){return n instanceof xn}function rM(n){return n instanceof Qn&&MN(n)}function iB(n){return nM(n)||rM(n)||(function(t){if(t instanceof Qn&&MT(t)){for(let r of t.getFilters())if(!nM(r)&&!rM(r))return!1;return!0}return!1})(n)}function iM(n){if(xt(n instanceof xn||n instanceof Qn,34018),n instanceof xn)return n;if(n.filters.length===1)return iM(n.filters[0]);let e=n.filters.map(r=>iM(r)),t=Qn.create(e,n.op);return t=px(t),iB(t)?t:(xt(t instanceof Qn,64498),xt(nm(t),40251),xt(t.filters.length>1,57927),t.filters.reduce((r,i)=>FN(r,i)))}function FN(n,e){let t;return xt(n instanceof xn||n instanceof Qn,38388),xt(e instanceof xn||e instanceof Qn,25473),t=n instanceof xn?e instanceof xn?(function(i,o){return Qn.create([i,o],"and")})(n,e):v7(n,e):e instanceof xn?v7(e,n):(function(i,o){if(xt(i.filters.length>0&&o.filters.length>0,48005),nm(i)&&nm(o))return Ej(i,o.getFilters());let s=MT(i)?i:o,a=MT(i)?o:i,c=s.filters.map(l=>FN(l,a));return Qn.create(c,"or")})(n,e),px(t)}function v7(n,e){if(nm(e))return Ej(e,n.getFilters());{let t=e.filters.map(r=>FN(n,r));return Qn.create(t,"or")}}function px(n){if(xt(n instanceof xn||n instanceof Qn,11850),n instanceof xn)return n;let e=n.getFilters();if(e.length===1)return px(e[0]);if(xj(n))return n;let t=e.map(i=>px(i)),r=[];return t.forEach(i=>{i instanceof xn?r.push(i):i instanceof Qn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Qn.create(r,n.op)}var oM=class{constructor(){this.Dn=new z_}addToCollectionParentIndex(e,t){return this.Dn.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(Pa.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(Pa.min())}updateCollectionGroup(e,t,r){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}},z_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new or(En.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new or(En.comparator)).toArray()}};var _7="IndexedDbIndexManager",k2=new Uint8Array(0),sM=class{constructor(e,t){this.databaseId=t,this.vn=new z_,this.Cn=new gc(r=>bh(r),(r,i)=>J_(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:So(i)};return y7(e).put(o)}return xe.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[K7(t),""],!1,!0);return y7(e).j(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(ol(s.parent))}return r})}addFieldIndex(e,t){let r=f_(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}})(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Fg(e);return o.next(a=>{s.put(d7(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=f_(e),i=Fg(e),o=Og(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=f_(e),r=Og(e),i=Fg(e);return t.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,t){return xe.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new hx(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Og(e),i=!0,o=new Map;return xe.forEach(this.Fn(t),s=>this.Mn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=fn(),a=[];return xe.forEach(o,(c,l)=>{$e(_7,`Using index ${(function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`})(c)} to execute ${bh(t)}`);let u=(function(B,K){let oe=yT(K);if(oe===void 0)return null;for(let he of ox(B,oe.fieldPath))switch(he.op){case"array-contains-any":return he.value.arrayValue.values||[];case"array-contains":return[he.value]}return null})(l,c),h=(function(B,K){let oe=new Map;for(let he of lh(K))for(let q of ox(B,he.fieldPath))switch(q.op){case"==":case"in":oe.set(he.fieldPath.canonicalString(),q.value);break;case"not-in":case"!=":return oe.set(he.fieldPath.canonicalString(),q.value),Array.from(oe.values())}return null})(l,c),m=(function(B,K){let oe=[],he=!0;for(let q of lh(K)){let N=q.kind===0?ZV(B,q.fieldPath,B.startAt):XV(B,q.fieldPath,B.startAt);oe.push(N.value),he&&(he=N.inclusive)}return new fl(oe,he)})(l,c),g=(function(B,K){let oe=[],he=!0;for(let q of lh(K)){let N=q.kind===0?XV(B,q.fieldPath,B.endAt):ZV(B,q.fieldPath,B.endAt);oe.push(N.value),he&&(he=N.inclusive)}return new fl(oe,he)})(l,c),x=this.xn(c,l,m),I=this.xn(c,l,g),M=this.On(c,l,h),P=this.Nn(c.indexId,u,x,m.inclusive,I,g.inclusive,M);return xe.forEach(P,Y=>r.H(Y,t.limit).next(B=>{B.forEach(K=>{let oe=nt.fromSegments(K.documentKey);s.has(oe)||(s=s.add(oe),a.push(oe))})}))}).next(()=>a)}return xe.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=wie(Qn.create(e.filters,"and")).map(r=>jT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),u=[];for(let h=0;h<c;++h){let m=t?this.Bn(t[h/l]):k2,g=this.Ln(e,m,r[h%l],i),x=this.kn(e,m,o[h%l],s),I=a.map(M=>this.Ln(e,m,M,!0));u.push(...this.createRange(g,x,I))}return u}Ln(e,t,r,i){let o=new ph(e,nt.empty(),t,r);return i?o:o.En()}kn(e,t,r,i){let o=new ph(e,nt.empty(),t,r);return i?o.En():o}Mn(e,t){let r=new hx(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.pn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Fn(t);return xe.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<(function(c){let l=new or(ci.comparator),u=!1;for(let h of c.filters)for(let m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?u=!0:l=l.add(m.field));for(let h of c.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(u?1:0)})(o)&&(r=1):r=0})).next(()=>(function(s){return s.limit!==null})(t)&&i.length>1&&r===2?1:r)}qn(e,t){let r=new hh;for(let i of lh(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.hn(i.kind);cu.Ut.bt(o,s)}return r.an()}Bn(e){let t=new hh;return cu.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let r=new hh;return cu.Ut.bt(yh(this.databaseId,t),r.hn((function(o){let s=lh(o);return s.length===0?0:s[s.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let i=[];i.push(new hh);let o=0;for(let s of lh(e)){let a=r[o++];for(let c of i)if(this.$n(t,s.fieldPath)&&R_(a))i=this.Un(i,s,a);else{let l=c.hn(s.kind);cu.Ut.bt(a,l)}}return this.Kn(i)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new hh;c.seed(a.an()),cu.Ut.bt(s,c.hn(t.kind)),o.push(c)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof xn&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=f_(e),i=Fg(e);return(t?r.j(IT,IDBKeyRange.bound(t,t)):r.j()).next(o=>{let s=[];return xe.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push((function(u,h){let m=h?new S_(h.sequenceNumber,new Pa(Eh(h.readTime),new nt(ol(h.documentKey)),h.largestBatchId)):S_.empty(),g=u.fields.map(([x,I])=>new Hg(ci.fromServerFormat(x),I));return new Yg(u.indexId,u.collectionGroup,g,m)})(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=f_(e),o=Fg(e);return this.Wn(e).next(s=>i.j(IT,IDBKeyRange.bound(t,t)).next(a=>xe.forEach(a,c=>o.put(d7(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return xe.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?xe.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),xe.forEach(a,c=>this.Gn(e,i,c).next(l=>{let u=this.zn(o,c);return l.isEqual(u)?xe.resolve():this.jn(e,o,c,l,u)}))))})}Jn(e,t,r,i){return Og(e).put(i.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,i){return Og(e).delete(i.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){let i=Og(e),o=new or(xd);return i.X({index:sj,range:IDBKeyRange.only([r.indexId,this.uid,q2(this.Qn(r,t))])},(s,a)=>{o=o.add(new ph(r.indexId,t,m7(a.arrayValue),m7(a.directionalValue)))}).next(()=>o)}zn(e,t){let r=new or(xd),i=this.qn(t,e);if(i==null)return r;let o=yT(t);if(o!=null){let s=e.data.field(o.fieldPath);if(R_(s))for(let a of s.arrayValue.values||[])r=r.add(new ph(t.indexId,e.key,this.Bn(a),i))}else r=r.add(new ph(t.indexId,e.key,k2,i));return r}jn(e,t,r,i,o){$e(_7,"Updating index entries for document '%s'",t.key);let s=[];return(function(c,l,u,h,m){let g=c.getIterator(),x=l.getIterator(),I=kg(g),M=kg(x);for(;I||M;){let P=!1,Y=!1;if(I&&M){let B=u(I,M);B<0?Y=!0:B>0&&(P=!0)}else I!=null?Y=!0:P=!0;P?(h(M),M=kg(x)):Y?(m(I),I=kg(g)):(I=kg(g),M=kg(x))}})(i,o,xd,a=>{s.push(this.Jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),xe.waitFor(s)}Wn(e){let t=1;return Fg(e).X({index:oj,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>xd(s,a)).filter((s,a,c)=>!a||xd(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=xd(s,e),c=xd(s,t);if(a===0)i[0]=e.En();else if(a>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];let a=i[s].Rn(this.uid,k2,nt.empty()),c=i[s+1].Rn(this.uid,k2,nt.empty());o.push(IDBKeyRange.bound(a,c))}return o}Yn(e,t){return xd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(w7)}getMinOffset(e,t){return xe.mapArray(this.Fn(t),r=>this.Mn(e,r).next(i=>i||dt(44426))).next(w7)}};function y7(n){return Bi(n,M_)}function Og(n){return Bi(n,y_)}function f_(n){return Bi(n,IN)}function Fg(n){return Bi(n,__)}function w7(n){xt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;xN(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Pa(e.readTime,e.documentKey,t)}var b7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oB=41943040,ys=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function sB(n,e,t){let r=n.store(hc),i=n.store(Qg),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.X({range:s},(u,h,m)=>(a++,m.delete()));o.push(c.next(()=>{xt(a===1,47070,{batchId:t.batchId})}));let l=[];for(let u of t.mutations){let h=nj(e,u.key.path,t.batchId);o.push(i.delete(h)),l.push(u.key)}return xe.waitFor(o).next(()=>l)}function gx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt(14731);e=n.noDocument}return JSON.stringify(e).length}ys.DEFAULT_COLLECTION_PERCENTILE=10,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ys.DEFAULT=new ys(oB,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ys.DISABLED=new ys(-1,0,0);var mx=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,t,r,i){xt(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cd(e).X({index:gh,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=zg(e),s=Cd(e);return s.add({}).next(a=>{xt(typeof a=="number",49019);let c=new F_(a,t,r,i),l=(function(g,x,I){let M=I.baseMutations.map(Y=>U_(g.gt,Y)),P=I.mutations.map(Y=>U_(g.gt,Y));return{userId:x,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:M,mutations:P}})(this.serializer,this.userId,c),u=[],h=new or((m,g)=>$t(m.canonicalString(),g.canonicalString()));for(let m of i){let g=nj(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),u.push(s.put(l)),u.push(o.put(g,wre))}return h.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Zn[a]=c.keys()}),xe.waitFor(u).next(()=>c)})}lookupMutationBatch(e,t){return Cd(e).get(t).next(r=>r?(xt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),fh(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?xe.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Cd(e).X({index:gh,range:i},(s,a,c)=>{a.userId===this.userId&&(xt(a.batchId>=r,47524,{er:r}),o=fh(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Dd;return Cd(e).X({index:gh,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Dd],[this.userId,Number.POSITIVE_INFINITY]);return Cd(e).j(gh,t).next(r=>r.map(i=>fh(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=L2(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return zg(e).X({range:i},(s,a,c)=>{let[l,u,h]=s,m=ol(u);if(l===this.userId&&t.path.isEqual(m))return Cd(e).get(h).next(g=>{if(!g)throw dt(61480,{tr:s,batchId:h});xt(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:h}),o.push(fh(this.serializer,g))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or($t),i=[];return t.forEach(o=>{let s=L2(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=zg(e).X({range:a},(l,u,h)=>{let[m,g,x]=l,I=ol(g);m===this.userId&&o.path.isEqual(I)?r=r.add(x):h.done()});i.push(c)}),xe.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=L2(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new or($t);return zg(e).X({range:s},(c,l,u)=>{let[h,m,g]=c,x=ol(m);h===this.userId&&r.isPrefixOf(x)?x.length===i&&(a=a.add(g)):u.done()}).next(()=>this.nr(e,a))}nr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Cd(e).get(o).next(s=>{if(s===null)throw dt(35274,{batchId:o});xt(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(fh(this.serializer,s))}))}),xe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return sB(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),xe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return xe.resolve();let r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return zg(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=ol(o[1]);i.push(c)}else a.done()}).next(()=>{xt(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return aB(e,this.userId,t)}sr(e){return cB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Dd,lastStreamToken:""})}};function aB(n,e,t){let r=L2(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return zg(n).X({range:o,Z:!0},(a,c,l)=>{let[u,h,m]=a;u===e&&h===i&&(s=!0),l.done()}).next(()=>s)}function Cd(n){return Bi(n,hc)}function zg(n){return Bi(n,Qg)}function cB(n){return Bi(n,D_)}var am=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var aM=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let r=new am(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>Nt.fromTimestamp(new mr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.lr(e,i)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lg(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(xt(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Lg(e).X((s,a)=>{let c=m_(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>xe.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Lg(e).X((r,i)=>{let o=m_(i);t(o)})}cr(e){return x7(e).get(X2).next(t=>(xt(t!==null,2888),t))}lr(e,t){return x7(e).put(X2,t)}hr(e,t){return Lg(e).put(nB(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=bh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Lg(e).X({range:i,index:ij},(s,a,c)=>{let l=m_(a);J_(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Id(e);return t.forEach(s=>{let a=So(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),xe.waitFor(i)}removeMatchingKeys(e,t,r){let i=Id(e);return xe.forEach(t,o=>{let s=So(o.path);return xe.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Id(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Id(e),o=fn();return i.X({range:r,Z:!0},(s,a,c)=>{let l=ol(s[1]),u=new nt(l);o=o.add(u)}).next(()=>o)}containsKey(e,t){let r=So(t.path),i=IDBKeyRange.bound([r],[K7(r)],!1,!0),o=0;return Id(e).X({index:EN,Z:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Et(e,t){return Lg(e).get(t).next(r=>r?m_(r):null)}};function Lg(n){return Bi(n,Zg)}function x7(n){return Bi(n,_h)}function Id(n){return Bi(n,Xg)}var C7="LruGarbageCollector",bie=1048576;function E7([n,e],[t,r]){let i=$t(n,t);return i===0?$t(e,r):i}var cM=class{constructor(e){this.Tr=e,this.buffer=new or(E7),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();E7(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},vx=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){$e(C7,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>te(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){qd(t)?$e(C7,"Ignoring IndexedDB error during garbage collection: ",t):yield zd(t)}yield this.Rr(3e5)}))}},lM=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return xe.resolve(Zs.ue);let r=new cM(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(b7)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b7):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),Vg()<=Oc.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function lB(n,e){return new lM(n,e)}var uM=class{constructor(e,t){this.db=e,this.garbageCollector=lB(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,i)=>t(i))}addReference(e,t,r){return R2(e,r)}removeReference(e,t,r){return R2(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return R2(e,t)}Sr(e,t){return(function(i,o){let s=!1;return cB(i).ee(a=>aB(i,a,o).next(c=>(c&&(s=!0),xe.resolve(!c)))).next(()=>s)})(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.wr(e,(s,a)=>{if(a<=t){let c=this.Sr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Nt.min()),Id(e).delete((function(h){return[0,So(h.path)]})(s))))});i.push(c)}}).next(()=>xe.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return R2(e,t)}wr(e,t){let r=Id(e),i,o=Zs.ue;return r.X({index:EN},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Zs.ue&&t(new nt(ol(i)),o),o=l,i=c):o=Zs.ue}).next(()=>{o!==Zs.ue&&t(new nt(ol(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function R2(n,e){return Id(n).put((function(r,i){return{targetId:0,path:So(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}var _x=class{constructor(){this.changes=new gc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ei.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?xe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var dM=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ch(e).put(r)}removeEntry(e,t,r){return ch(e).delete((function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],dx(s),a[a.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=Ei.newInvalidDocument(t);return ch(e).X({index:V2,range:IDBKeyRange.only(h_(t))},(i,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:Ei.newInvalidDocument(t)};return ch(e).X({index:V2,range:IDBKeyRange.only(h_(t))},(i,o)=>{r={document:this.Dr(t,o),size:gx(o)}}).next(()=>r)}getEntries(e,t){let r=ws();return this.Cr(e,t,(i,o)=>{let s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,t){let r=ws(),i=new Er(nt.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Dr(o,s);r=r.insert(o,a),i=i.insert(o,gx(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,t,r){if(t.isEmpty())return xe.resolve();let i=new or(A7);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(h_(i.first()),h_(i.last())),s=i.getIterator(),a=s.getNext();return ch(e).X({index:V2,range:o},(c,l,u)=>{let h=nt.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&A7(a,h)<0;)r(a,null),a=s.getNext();a&&a.isEqual(h)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?u.G(h_(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),dx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ch(e).j(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let u=ws();for(let h of l){let m=this.Dr(nt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(ty(t,m)||i.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,t,r,i){let o=ws(),s=S7(t,r),a=S7(t,Pa.max());return ch(e).X({index:rj,range:IDBKeyRange.bound(s,a,!0)},(c,l,u)=>{let h=this.Dr(nt.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(h.key,h),o.size===i&&u.done()}).next(()=>o)}newChangeBuffer(e){return new fM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return I7(e).get(ET).next(t=>(xt(!!t,20021),t))}br(e,t){return I7(e).put(ET,t)}Dr(e,t){if(t){let r=_ie(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Nt.min())))return r}return Ei.newInvalidDocument(e)}};function uB(n){return new dM(n)}var fM=class extends _x{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new gc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new or((o,s)=>$t(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=l7(this.Or.serializer,s);i=i.add(o.path.popLast());let l=gx(c);r+=l-a.size,t.push(this.Or.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=l7(this.Or.serializer,s.convertToNoDocument(Nt.min()));t.push(this.Or.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),xe.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function I7(n){return Bi(n,T_)}function ch(n){return Bi(n,Z2)}function h_(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function S7(n,e){let t=e.documentKey.path.toArray();return[n,dx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function A7(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=$t(t[o],r[o]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}var hM=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var yx=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&x_(r.mutation,i,Xs.empty(),mr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fn()){let i=sl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=g_();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=sl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fn()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ws(),s=b_(),a=(function(){return b_()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof mc)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),x_(u.mutation,l,u.mutation.getFieldMask(),mr.now())):s.set(l.key,Xs.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),t.forEach((l,u)=>{var h;return a.set(l,new hM(u,(h=s.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=b_(),i=new Er((s,a)=>s-a),o=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||Xs.empty();u=a.applyToLocalView(l,u),r.set(c,u);let h=(i.get(a.batchId)||fn()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,h=kj();u.forEach(m=>{if(!o.has(m)){let g=Bj(t.get(m),r.get(m));g!==null&&h.set(m,g),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return xe.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return nt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):xe.resolve(sl()),a=Kg,c=o;return s.next(l=>xe.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(u)?xe.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{c=c.insert(u,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,fn())).next(u=>({batchId:a,changes:Pj(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nt(t)).next(r=>{let i=g_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=g_();return this.indexManager.getCollectionParents(e,o).next(a=>xe.forEach(a,c=>{let l=(function(h,m){return new pc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((h,m)=>{s=s.insert(h,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,Ei.newInvalidDocument(u)))});let a=g_();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&x_(u.mutation,l,Xs.empty(),mr.now()),ty(t,l)&&(a=a.insert(c,l))}),a})}};var pM=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return xe.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:li(i.createTime)}})(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:ON(i.bundledQuery),readTime:li(i.readTime)}})(t)),xe.resolve()}};var gM=class{constructor(){this.overlays=new Er(nt.comparator),this.kr=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){let r=sl();return xe.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),xe.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),xe.resolve()}getOverlaysForCollection(e,t,r){let i=sl(),o=t.length+1,s=new nt(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return xe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Er((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=sl(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=sl(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return xe.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new L_(t,r));let o=this.kr.get(t);o===void 0&&(o=fn(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var mM=class{constructor(){this.sessionToken=ui.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xe.resolve()}};var q_=class{constructor(){this.qr=new or(bi.Qr),this.$r=new or(bi.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new bi(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new bi(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new nt(new En([])),r=new bi(t,e),i=new bi(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new nt(new En([])),r=new bi(t,e),i=new bi(t,e+1),o=fn();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new bi(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},bi=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return nt.comparator(e.key,t.key)||$t(e.Hr,t.Hr)}static Ur(e,t){return $t(e.Hr,t.Hr)||nt.comparator(e.key,t.key)}};var vM=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new or(bi.Qr)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new F_(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new bi(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return xe.resolve(s)}lookupMutationBatch(e,t){return xe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return xe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?Dd:this.er-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new bi(t,0),i=new bi(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),xe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or($t);return t.forEach(i=>{let o=new bi(i,0),s=new bi(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),xe.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;nt.isDocumentKey(o)||(o=o.child(""));let s=new bi(new nt(o),0),a=new or($t);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),xe.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){xt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return xe.forEach(t.mutations,i=>{let o=new bi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new bi(t,0),i=this.Yr.firstAfterOrEqual(r);return xe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var _M=class{constructor(e){this.ni=e,this.docs=(function(){return new Er(nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return xe.resolve(r?r.document.mutableCopy():Ei.newInvalidDocument(t))}getEntries(e,t){let r=ws();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ei.newInvalidDocument(i))}),xe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ws(),s=t.path,a=new nt(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||xN(X7(u),r)<=0||(i.has(u.key)||ty(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return xe.resolve(o)}getAllFromCollectionGroup(e,t,r,i){dt(9500)}ri(e,t){return xe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yM(this)}getSize(e){return xe.resolve(this.size)}},yM=class extends _x{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),xe.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var wM=class{constructor(e){this.persistence=e,this.ii=new gc(t=>bh(t),J_),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.si=0,this.oi=new q_,this.targetCount=0,this._i=am.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),xe.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new am(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.hr(t),xe.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),xe.waitFor(o).next(()=>i)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return xe.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),xe.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),xe.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),xe.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return xe.resolve(r)}containsKey(e,t){return xe.resolve(this.oi.containsKey(t))}};var H_=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Zs(0),this.ci=!1,this.ci=!0,this.li=new mM,this.referenceDelegate=e(this),this.hi=new wM(this),this.indexManager=new oM,this.remoteDocumentCache=(function(i){return new _M(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new ux(t),this.Ti=new pM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new vM(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);let i=new bM(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return xe.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},bM=class extends K2{constructor(e){super(),this.currentSequenceNumber=e}},wx=class n{constructor(e){this.persistence=e,this.Ai=new q_,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw dt(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),xe.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.mi,r=>{let i=nt.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Nt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return xe.or([()=>xe.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},bx=class n{constructor(e,t){this.persistence=e,this.gi=new gc(r=>So(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=lB(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return xe.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?xe.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Nt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),xe.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),xe.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=B2(e.data.value)),t}Sr(e,t,r){return xe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return xe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var xM=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new Y2("createOrUpgrade",t);r<1&&i>=1&&((function(c){c.createObjectStore(X_)})(e),(function(c){c.createObjectStore(D_,{keyPath:yre}),c.createObjectStore(hc,{keyPath:BV,autoIncrement:!0}).createIndex(gh,UV,{unique:!0}),c.createObjectStore(Qg)})(e),D7(e),(function(c){c.createObjectStore(uh)})(e));let s=xe.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Xg),c.deleteObjectStore(Zg),c.deleteObjectStore(_h)})(e),D7(e)),s=s.next(()=>(function(c){let l=c.store(_h),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return l.put(X2,u)})(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>(function(c,l){return l.store(hc).j().next(h=>{c.deleteObjectStore(hc),c.createObjectStore(hc,{keyPath:BV,autoIncrement:!0}).createIndex(gh,UV,{unique:!0});let m=l.store(hc),g=h.map(x=>m.put(x));return xe.waitFor(g)})})(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(Jg,{keyPath:Dre})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>((function(c){c.createObjectStore(T_)})(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(Kx,{keyPath:Tre})})(e),(function(c){c.createObjectStore(Yx,{keyPath:Mre})})(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore(Qx,{keyPath:Lre});l.createIndex(ST,Vre,{unique:!1}),l.createIndex(aj,jre,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>(function(c){let l=c.createObjectStore(Z2,{keyPath:bre});l.createIndex(V2,xre),l.createIndex(rj,Cre)})(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(uh))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>(function(c){c.createObjectStore(IN,{keyPath:Nre,autoIncrement:!0}).createIndex(IT,Pre,{unique:!1}),c.createObjectStore(__,{keyPath:kre}).createIndex(oj,Rre,{unique:!1}),c.createObjectStore(y_,{keyPath:Ore}).createIndex(sj,Fre,{unique:!1})})(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(__).clear()}).next(()=>{t.objectStore(y_).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(SN,{keyPath:Bre})})(e)})),r<18&&i>=18&&eI()&&(s=s.next(()=>{t.objectStore(__).clear()}).next(()=>{t.objectStore(y_).clear()})),s}yi(e){let t=0;return e.store(uh).X((r,i)=>{t+=gx(i)}).next(()=>{let r={byteSize:t};return e.store(T_).put(ET,r)})}pi(e){let t=e.store(D_),r=e.store(hc);return t.j().next(i=>xe.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,Dd],[o.userId,o.lastAcknowledgedBatchId]);return r.j(gh,s).next(a=>xe.forEach(a,c=>{xt(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let l=fh(this.serializer,c);return sB(e,o.userId,l).next(()=>{})}))}))}wi(e){let t=e.store(Xg),r=e.store(uh);return e.store(_h).get(X2).next(i=>{let o=[];return r.X((s,a)=>{let c=new En(s),l=(function(h){return[0,So(h)]})(c);o.push(t.get(l).next(u=>u?xe.resolve():(h=>t.put({targetId:0,path:So(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>xe.waitFor(o))})}Si(e,t){e.createObjectStore(M_,{keyPath:Are});let r=t.store(M_),i=new z_,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:So(c)})}};return t.store(uh).X({Z:!0},(s,a)=>{let c=new En(s);return o(c.popLast())}).next(()=>t.store(Qg).X({Z:!0},([s,a,c],l)=>{let u=ol(a);return o(u.popLast())}))}bi(e){let t=e.store(Zg);return t.X((r,i)=>{let o=m_(i),s=nB(this.serializer,o);return t.put(s)})}Di(e,t){let r=t.store(uh),i=[];return r.X((o,s)=>{let a=t.store(Z2),c=(function(h){return h.document?new nt(En.fromString(h.document.name).popFirst(5)):h.noDocument?nt.fromSegments(h.noDocument.path):h.unknownDocument?nt.fromSegments(h.unknownDocument.path):dt(36783)})(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>xe.waitFor(i))}Ci(e,t){let r=t.store(hc),i=uB(this.serializer),o=new H_(wx.Vi,this.serializer.gt);return r.j().next(s=>{let a=new Map;return s.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:fn();fh(this.serializer,c).keys().forEach(h=>u=u.add(h)),a.set(c.userId,u)}),xe.forEach(a,(c,l)=>{let u=new xi(l),h=fx.yt(this.serializer,u),m=o.getIndexManager(u),g=mx.yt(u,this.serializer,m,o.referenceDelegate);return new yx(i,g,h,m).recalculateAndSaveOverlaysForDocumentKeys(new N_(t,Zs.ue),c).next()})})}};function D7(n){n.createObjectStore(Xg,{keyPath:Ire}).createIndex(EN,Sre,{unique:!0}),n.createObjectStore(Zg,{keyPath:"targetId"}).createIndex(ij,Ere,{unique:!0}),n.createObjectStore(_h)}var Ed="IndexedDbPersistence",sT=18e5,aT=5e3,cT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",dB="main",CM=class n{constructor(e,t,r,i,o,s,a,c,l,u,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=s,this.document=a,this.Mi=l,this.xi=u,this.Oi=h,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=m=>Promise.resolve(),!n.C())throw new je(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uM(this,i),this.Qi=t+dB,this.serializer=new ux(c),this.$i=new Pd(this.Qi,this.Oi,new xM(this.serializer)),this.li=new XT,this.hi=new aM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uB(this.serializer),this.Ti=new ZT,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,u===!1&&ai(Ed,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new je(Ie.FAILED_PRECONDITION,cT);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new Zs(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>te(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>te(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>O2(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(qd(e))return $e(Ed,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e(Ed,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return p_(e).get(Pg).next(t=>xe.resolve(this.Xi(t)))}es(e){return O2(e).delete(this.clientId)}ts(){return te(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,sT)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Bi(t,Jg);return r.j().next(i=>{let o=this.rs(i,sT),s=i.filter(a=>o.indexOf(a)===-1);return xe.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?xe.resolve(!0):p_(e).get(Pg).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,aT)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new je(Ie.FAILED_PRECONDITION,cT);return!1}}return!(!this.networkEnabled||!this.inForeground)||O2(e).j().next(r=>this.rs(r,aT).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&$e(Ed,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return te(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[X_,Jg],e=>{let t=new N_(e,Zs.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>O2(e).j().next(t=>this.rs(t,sT).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return mx.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sM(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return fx.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){$e(Ed,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=(function(c){return c===18?qre:c===17?dj:c===16?zre:c===15?AN:c===14?uj:c===13?lj:c===12?Ure:c===11?cj:void dt(60245)})(this.Oi),s;return this.$i.runTransaction(e,i,o,a=>(s=new N_(a,this.ui?this.ui.next():Zs.ue),t==="readwrite-primary"?this.Ji(s).next(c=>!!c||this.Hi(s)).next(c=>{if(!c)throw ai(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new je(Ie.FAILED_PRECONDITION,J7);return r(s)}).next(c=>this.Zi(s).next(()=>c)):this.Ts(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ts(e){return p_(e).get(Pg).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,aT)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new je(Ie.FAILED_PRECONDITION,cT)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return p_(e).put(Pg,t)}static C(){return Pd.C()}Yi(e){let t=p_(e);return t.get(Pg).next(r=>this.Xi(r)?($e(Ed,"Releasing primary lease."),t.delete(Pg)):xe.resolve())}ns(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ai(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;JE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return $e(Ed,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ai(Ed,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){ai("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function p_(n){return Bi(n,X_)}function O2(n){return Bi(n,Jg)}function LN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var EM=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=fn(),i=fn();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var IM=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xx=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return JE()?8:ej(A0())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new IM;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Vg()<=Oc.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",jg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xe.resolve()):(Vg()<=Oc.DEBUG&&$e("QueryEngine","Query:",jg(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Vg()<=Oc.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",jg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jo(t))):xe.resolve())}ps(e,t){if(JV(t))return xe.resolve(null);let r=Jo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=sx(t,null,"F"),r=Jo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fn(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,sx(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return JV(t)||i.isEqual(Nt.min())?xe.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?xe.resolve(null):(Vg()<=Oc.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jg(t)),this.vs(e,s,t,Z7(i,Kg)).next(a=>a))})}bs(e,t){let r=new or(Mj(e));return t.forEach((i,o)=>{ty(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Vg()<=Oc.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",jg(t)),this.gs.getDocumentsMatchingQuery(e,t,Pa.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var VN="LocalStore",xie=3e8,SM=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Er($t),this.Ms=new gc(o=>bh(o),J_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function fB(n,e,t,r){return new SM(n,e,t,r)}function hB(n,e){return te(this,null,function*(){let t=at(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=fn();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Cie(n,e){let t=at(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let h=l.batch,m=h.keys(),g=xe.resolve();return m.forEach(x=>{g=g.next(()=>u.getEntry(c,x)).next(I=>{let M=l.docVersions.get(x);xt(M!==null,48541),I.version.compareTo(M)<0&&(h.applyToRemoteDocument(I,l),I.isValidDocument()&&(I.setReadTime(l.commitVersion),u.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=fn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function pB(n){let e=at(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Eie(n,e){let t=at(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((u,h)=>{let m=i.get(h);if(!m)return;a.push(t.hi.removeMatchingKeys(o,u.removedDocuments,h).next(()=>t.hi.addMatchingKeys(o,u.addedDocuments,h)));let g=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(ui.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(h,g),(function(I,M,P){return I.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=xie?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(m,g,u)&&a.push(t.hi.updateTargetData(o,g))});let c=ws(),l=fn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(gB(o,s,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!r.isEqual(Nt.min())){let u=t.hi.getLastRemoteSnapshotVersion(o).next(h=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return xe.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function gB(n,e,t){let r=fn(),i=fn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ws();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Nt.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):$e(VN,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function Iie(n,e){let t=at(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dd),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cm(n,e){let t=at(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,xe.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new sm(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function lm(n,e,t){return te(this,null,function*(){let r=at(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!qd(s))throw s;$e(VN,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Cx(n,e,t){let r=at(n),i=Nt.min(),o=fn();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,u){let h=at(c),m=h.Ms.get(u);return m!==void 0?xe.resolve(h.Fs.get(m)):h.hi.getTargetData(l,u)})(r,s,Jo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Nt.min(),t?o:fn())).next(a=>(_B(r,Tj(e),a),{documents:a,qs:o})))}function mB(n,e){let t=at(n),r=at(t.hi),i=t.Fs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function vB(n,e){let t=at(n),r=t.xs.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Os.getAllFromCollectionGroup(i,e,Z7(r,Kg),Number.MAX_SAFE_INTEGER)).then(i=>(_B(t,e,i),i))}function _B(n,e,t){let r=n.xs.get(e)||Nt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}function Sie(n,e,t,r){return te(this,null,function*(){let i=at(n),o=fn(),s=ws();for(let l of t){let u=e.Qs(l.metadata.name);l.document&&(o=o.add(u));let h=e.$s(l);h.setReadTime(e.Us(l.metadata.readTime)),s=s.insert(u,h)}let a=i.Os.newChangeBuffer({trackRemovals:!0}),c=yield cm(i,(function(u){return Jo(vm(En.fromString(`__bundle__/docs/${u}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>gB(l,a,s).next(u=>(a.apply(l),u)).next(u=>i.hi.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.hi.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,u.Ls,u.ks)).next(()=>u.Ls)))})}function Aie(r,i){return te(this,arguments,function*(n,e,t=fn()){let o=yield cm(n,Jo(ON(e.bundledQuery))),s=at(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=li(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Ti.saveNamedQuery(a,e);let l=o.withResumeToken(ui.EMPTY_BYTE_STRING,c);return s.Fs=s.Fs.insert(l.targetId,l),s.hi.updateTargetData(a,l).next(()=>s.hi.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.hi.addMatchingKeys(a,t,o.targetId)).next(()=>s.Ti.saveNamedQuery(a,e))})})}var yB="firestore_clients";function T7(n,e){return`${yB}_${n}_${e}`}var wB="firestore_mutations";function M7(n,e,t){let r=`${wB}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var bB="firestore_targets";function lT(n,e){return`${bB}_${n}_${e}`}var il="SharedClientState",Ex=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ks(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new je(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ai(il,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},C_=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new je(r.error.code,r.error.message))),o?new n(e,r.state,i):(ai(il,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ix=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=PN();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=tj(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ai(il,`Failed to parse client data for instance '${e}': ${t}`),null)}},AM=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ai(il,`Failed to parse online state: ${e}`),null)}},$_=class{constructor(){this.activeTargetIds=PN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},E_=class{constructor(e,t,r,i,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new Er($t),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=T7(this.persistenceKey,this.js),this.eo=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new $_),this.no=new RegExp(`^${yB}_${s}_([^_]*)$`),this.ro=new RegExp(`^${wB}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${bB}_${s}_(\\d+)$`),this.so=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.oo=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return te(this,null,function*(){let e=yield this.syncEngine.Ps();for(let r of e){if(r===this.js)continue;let i=this.getItem(T7(this.persistenceKey,r));if(i){let o=Ix.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();let t=this.storage.getItem(this.so);if(t){let r=this.ao(t);r&&this.uo(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(lT(this.persistenceKey,e));if(i){let o=C_.Ks(e,i);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lT(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return $e(il,"READ",e,t),t}setItem(e,t){$e(il,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e(il,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if($e(il,"EVENT",t.key,t.newValue),t.key===this.Xs)return void ai("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>te(this,null,function*(){if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){let r=this.Ao(t.key);return this.Ro(r,null)}{let r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){let r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){let r=(function(o){let s=Zs.ue;if(o!=null)try{let a=JSON.parse(o);xt(typeof a=="number",30636,{wo:o}),s=a}catch(a){ai(il,"Failed to read sequence number from WebStorage",a)}return s})(t.newValue);r!==Zs.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){let r=this.So(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){let i=new Ex(this.currentUser,e,t,r),o=M7(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){let t=M7(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){let t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){let i=lT(this.persistenceKey,e),o=new C_(e,t,r);this.setItem(i,o.Ws())}Eo(e){let t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){let t=this.no.exec(e);return t?t[1]:null}Vo(e,t){let r=this.Ao(e);return Ix.Ks(r,t)}mo(e,t){let r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Ex.Ks(new xi(o),i,t)}po(e,t){let r=this.io.exec(e),i=Number(r[1]);return C_.Ks(i,t)}ao(e){return AM.Ks(e)}So(e){return JSON.parse(e)}fo(e){return te(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);$e(il,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Ys.insert(e,t):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Co(s,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=PN();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Sx=class{constructor(){this.Fo=new $_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new $_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var DM=class{xo(e){}shutdown(){}};var N7="ConnectivityMonitor",Ax=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){$e(N7,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){$e(N7,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var F2=null;function TM(){return F2===null?F2=(function(){return 268435456+Math.round(2147483648*Math.random())})():F2++,"0x"+F2.toString(16)}var uT="RestConnection",Die={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},MM=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===tx?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=TM(),a=this.Go(e,t.toUriEncodedString());$e(uT,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),u=hp(l);return this.jo(e,a,c,r,u).then(h=>($e(uT,`Received RPC '${e}' ${s}: `,h),h),h=>{throw xs(uT,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+mm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=Die[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var NM=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Eo="WebChannelConnection",PM=class extends MM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=TM();return new Promise((a,c)=>{let l=new eT;l.setWithCredentials(!0),l.listenOnce(tT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case u_.NO_ERROR:let h=l.getResponseJson();$e(Eo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case u_.TIMEOUT:$e(Eo,`RPC '${e}' ${s} timed out`),c(new je(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case u_.HTTP_ERROR:let m=l.getStatus();if($e(Eo,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let x=g?.error;if(x&&x.status&&x.message){let I=(function(P){let Y=P.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(Y)>=0?Y:Ie.UNKNOWN})(x.status);c(new je(I,x.message))}else c(new je(Ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new je(Ie.UNAVAILABLE,"Connection failed."));break;default:dt(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{$e(Eo,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);$e(Eo,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}P_(e,t,r){let i=TM(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=iT(),a=rT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");$e(Eo,`Creating RPC '${e}' stream ${i}: ${u}`,c);let h=s.createWebChannel(u,c);this.T_(h);let m=!1,g=!1,x=new NM({Ho:M=>{g?$e(Eo,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||($e(Eo,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),$e(Eo,`RPC '${e}' stream ${i} sending:`,M),h.send(M))},Yo:()=>h.close()}),I=(M,P,Y)=>{M.listen(P,B=>{try{Y(B)}catch(K){setTimeout(()=>{throw K},0)}})};return I(h,Ng.EventType.OPEN,()=>{g||($e(Eo,`RPC '${e}' stream ${i} transport opened.`),x.s_())}),I(h,Ng.EventType.CLOSE,()=>{g||(g=!0,$e(Eo,`RPC '${e}' stream ${i} transport closed`),x.__(),this.I_(h))}),I(h,Ng.EventType.ERROR,M=>{g||(g=!0,xs(Eo,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),x.__(new je(Ie.UNAVAILABLE,"The operation could not be completed")))}),I(h,Ng.EventType.MESSAGE,M=>{var P;if(!g){let Y=M.data[0];xt(!!Y,16349);let B=Y,K=B?.error||((P=B[0])===null||P===void 0?void 0:P.error);if(K){$e(Eo,`RPC '${e}' stream ${i} received error:`,K);let oe=K.status,he=(function(S){let V=wi[S];if(V!==void 0)return qj(V)})(oe),q=K.message;he===void 0&&(he=Ie.INTERNAL,q="Unknown error status: "+oe+" with message "+K.message),g=!0,x.__(new je(he,q)),h.close()}else $e(Eo,`RPC '${e}' stream ${i} received:`,Y),x.a_(Y)}}),I(a,nT.STAT_EVENT,M=>{M.stat===N2.PROXY?$e(Eo,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===N2.NOPROXY&&$e(Eo,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function xB(){return typeof window<"u"?window:null}function H2(){return typeof document<"u"?document:null}function ny(n){return new GT(n,!0)}var G_=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var P7="PersistentStream",Dx=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new G_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return te(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return te(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return te(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(ai(t.toString()),ai("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new je(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>te(this,null,function*(){this.state=0,this.start()}))}G_(e){return $e(P7,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():($e(P7,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},kM=class extends Dx{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=die(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Nt.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Nt.min():s.readTime?li(s.readTime):Nt.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=YT(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=ix(c)?{documents:Qj(o,c)}:{query:Zj(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Hj(o,s.resumeToken);let l=WT(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Nt.min())>0){a.readTime=om(o,s.snapshotVersion.toTimestamp());let l=WT(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=hie(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=YT(this.serializer),t.removeTarget=e,this.k_(t)}},RM=class extends Dx{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return xt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){xt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=fie(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=YT(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>U_(this.serializer,r))};this.k_(t)}};var OM=class{},FM=class extends OM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new je(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,KT(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new je(Ie.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,KT(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new je(Ie.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},LM=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ai(t),this._a=!1):$e("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ih="RemoteStore",VM=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>te(this,null,function*(){$d(this)&&($e(Ih,"Restarting streams for network reachability change."),yield(function(c){return te(this,null,function*(){let l=at(c);l.Ia.add(4),yield _m(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield ry(l)})})(this))}))}),this.Aa=new LM(r,i)}};function ry(n){return te(this,null,function*(){if($d(n))for(let e of n.da)yield e(!0)})}function _m(n){return te(this,null,function*(){for(let e of n.da)yield e(!1)})}function eC(n,e){let t=at(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),UN(t)?BN(t):wm(t).x_()&&jN(t,e))}function um(n,e){let t=at(n),r=wm(t);t.Ta.delete(e),r.x_()&&CB(t,e),t.Ta.size===0&&(r.x_()?r.B_():$d(t)&&t.Aa.set("Unknown"))}function jN(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nt.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wm(n).H_(e)}function CB(n,e){n.Ra.$e(e),wm(n).Y_(e)}function BN(n){n.Ra=new $T({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),wm(n).start(),n.Aa.aa()}function UN(n){return $d(n)&&!wm(n).M_()&&n.Ta.size>0}function $d(n){return at(n).Ia.size===0}function EB(n){n.Ra=void 0}function Tie(n){return te(this,null,function*(){n.Aa.set("Online")})}function Mie(n){return te(this,null,function*(){n.Ta.forEach((e,t)=>{jN(n,e)})})}function Nie(n,e){return te(this,null,function*(){EB(n),UN(n)?(n.Aa.la(e),BN(n)):n.Aa.set("Unknown")})}function Pie(n,e,t){return te(this,null,function*(){if(n.Aa.set("Online"),e instanceof cx&&e.state===2&&e.cause)try{yield(function(i,o){return te(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){$e(Ih,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Tx(n,r)}else if(e instanceof Gg?n.Ra.Ye(e):e instanceof ax?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Nt.min()))try{let r=yield pB(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.Ta.get(l);u&&o.Ta.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.Ta.get(c);if(!u)return;o.Ta.set(c,u.withResumeToken(ui.EMPTY_BYTE_STRING,u.snapshotVersion)),CB(o,c);let h=new sm(u.target,c,l,u.sequenceNumber);jN(o,h)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){$e(Ih,"Failed to raise snapshot:",r),yield Tx(n,r)}})}function Tx(n,e,t){return te(this,null,function*(){if(!qd(e))throw e;n.Ia.add(1),yield _m(n),n.Aa.set("Offline"),t||(t=()=>pB(n.localStore)),n.asyncQueue.enqueueRetryable(()=>te(null,null,function*(){$e(Ih,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield ry(n)}))})}function IB(n,e){return e().catch(t=>Tx(n,t,e))}function ym(n){return te(this,null,function*(){let e=at(n),t=Bd(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Dd;for(;kie(e);)try{let i=yield Iie(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Rie(e,i)}catch(i){yield Tx(e,i)}SB(e)&&AB(e)})}function kie(n){return $d(n)&&n.Pa.length<10}function Rie(n,e){n.Pa.push(e);let t=Bd(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function SB(n){return $d(n)&&!Bd(n).M_()&&n.Pa.length>0}function AB(n){Bd(n).start()}function Oie(n){return te(this,null,function*(){Bd(n).na()})}function Fie(n){return te(this,null,function*(){let e=Bd(n);for(let t of n.Pa)e.X_(t.mutations)})}function Lie(n,e,t){return te(this,null,function*(){let r=n.Pa.shift(),i=zT.from(r,e,t);yield IB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ym(n)})}function Vie(n,e){return te(this,null,function*(){e&&Bd(n).Z_&&(yield(function(r,i){return te(this,null,function*(){if((function(s){return zj(s)&&s!==Ie.ABORTED})(i.code)){let o=r.Pa.shift();Bd(r).N_(),yield IB(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ym(r)}})})(n,e)),SB(n)&&AB(n)})}function k7(n,e){return te(this,null,function*(){let t=at(n);t.asyncQueue.verifyOperationInProgress(),$e(Ih,"RemoteStore received new credentials");let r=$d(t);t.Ia.add(3),yield _m(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield ry(t)})}function jM(n,e){return te(this,null,function*(){let t=at(n);e?(t.Ia.delete(2),yield ry(t)):e||(t.Ia.add(2),yield _m(t),t.Aa.set("Unknown"))})}function wm(n){return n.Va||(n.Va=(function(t,r,i){let o=at(t);return o.ia(),new kM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:Tie.bind(null,n),e_:Mie.bind(null,n),n_:Nie.bind(null,n),J_:Pie.bind(null,n)}),n.da.push(e=>te(null,null,function*(){e?(n.Va.N_(),UN(n)?BN(n):n.Aa.set("Unknown")):(yield n.Va.stop(),EB(n))}))),n.Va}function Bd(n){return n.ma||(n.ma=(function(t,r,i){let o=at(t);return o.ia(),new RM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Oie.bind(null,n),n_:Vie.bind(null,n),ea:Fie.bind(null,n),ta:Lie.bind(null,n)}),n.da.push(e=>te(null,null,function*(){e?(n.ma.N_(),yield ym(n)):(yield n.ma.stop(),n.Pa.length>0&&($e(Ih,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var BM=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bm(n,e){if(ai("AsyncQueue",`${e}: ${n}`),qd(n))return new je(Ie.UNAVAILABLE,`${e}: ${n}`);throw n}var Mx=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||nt.comparator(t.key,r.key):(t,r)=>nt.comparator(t.key,r.key),this.keyedMap=g_(),this.sortedSet=new Er(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Nx=class{constructor(){this.fa=new Er(nt.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):dt(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},dm=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Mx.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ey(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var UM=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},zM=class{constructor(){this.queries=R7(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=at(t),o=i.queries;i.queries=R7(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new je(Ie.ABORTED,"Firestore shutting down"))}};function R7(){return new gc(n=>Dj(n),ey)}function zN(n,e){return te(this,null,function*(){let t=at(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new UM,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=bm(s,`Initialization of query '${jg(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&HN(t)})}function qN(n,e){return te(this,null,function*(){let t=at(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function jie(n,e){let t=at(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&HN(t)}function Bie(n,e,t){let r=at(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function HN(n){n.Da.forEach(e=>{e.next()})}var qM,O7;(O7=qM||(qM={})).Fa="default",O7.Cache="cache";var W_=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new dm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=dm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==qM.Cache}};var HM=class{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}};var Px=class{constructor(e){this.serializer=e}Qs(e){return cl(this.serializer,e)}$s(e){return e.metadata.exists?Yj(this.serializer,e.document,!1):Ei.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return li(e)}},$M=class{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=DB(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=En.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){let t=new Map,r=new Px(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Qs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||fn()).add(o);t.set(s,a)}}return t}za(e){return te(this,null,function*(){let t=yield Sie(e,new Px(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(let i of this.Ua)yield Aie(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}})}};function DB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var kx=class{constructor(e){this.key=e}},Rx=class{constructor(e){this.key=e}},Ox=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fn(),this.mutatedKeys=fn(),this.Xa=Mj(e),this.eu=new Mx(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Nx,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let m=i.get(u),g=ty(this.query,h)?h:null,x=!!m&&this.mutatedKeys.has(m.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),M=!1;m&&g?m.data.isEqual(g.data)?x!==I&&(r.track({type:3,doc:g}),M=!0):this.iu(m,g)||(r.track({type:2,doc:g}),M=!0,(c&&this.Xa(g,c)>0||l&&this.Xa(g,l)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),M=!0):m&&!g&&(r.track({type:1,doc:m}),M=!0,(c||l)&&(a=!0)),M&&(g?(s=s.add(g),o=I?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((u,h)=>(function(g,x){let I=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt(20277,{At:M})}};return I(g)-I(x)})(u.type,h.type)||this.Xa(u.doc,h.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new dm(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Nx,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fn(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Rx(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new kx(r))}),t}uu(e){this.Ha=e.qs,this.Za=fn();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return dm.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Gd="SyncEngine",GM=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},WM=class{constructor(e){this.key=e,this.lu=!1}},KM=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new gc(a=>Dj(a),ey),this.Tu=new Map,this.Iu=new Set,this.du=new Er(nt.comparator),this.Eu=new Map,this.Au=new q_,this.Ru={},this.Vu=new Map,this.mu=am.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Uie(n,e,t=!0){return te(this,null,function*(){let r=tC(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield TB(r,e,t,!0),i})}function zie(n,e){return te(this,null,function*(){let t=tC(n);yield TB(t,e,!0,!1)})}function TB(n,e,t,r){return te(this,null,function*(){let i=yield cm(n.localStore,Jo(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield $N(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&eC(n.remoteStore,i),a})}function $N(n,e,t,r,i){return te(this,null,function*(){n.gu=(h,m,g)=>(function(I,M,P,Y){return te(this,null,function*(){let B=M.view.nu(P);B.Ds&&(B=yield Cx(I.localStore,M.query,!1).then(({documents:q})=>M.view.nu(q,B)));let K=Y&&Y.targetChanges.get(M.targetId),oe=Y&&Y.targetMismatches.get(M.targetId)!=null,he=M.view.applyChanges(B,I.isPrimaryClient,K,oe);return YM(I,M.targetId,he._u),he.snapshot})})(n,h,m,g);let o=yield Cx(n.localStore,e,!0),s=new Ox(e,o.qs),a=s.nu(o.documents),c=j_.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);YM(n,t,l._u);let u=new GM(e,t,s);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function qie(n,e,t){return te(this,null,function*(){let r=at(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ey(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield lm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&um(r.remoteStore,i.targetId),fm(r,i.targetId)}).catch(zd))):(fm(r,i.targetId),yield lm(r.localStore,i.targetId,!0))})}function Hie(n,e){return te(this,null,function*(){let t=at(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),um(t.remoteStore,r.targetId))})}function $ie(n,e,t){return te(this,null,function*(){let r=YN(n);try{let i=yield(function(s,a){let c=at(s),l=mr.now(),u=a.reduce((g,x)=>g.add(x.key),fn()),h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=ws(),I=fn();return c.Os.getEntries(g,u).next(M=>{x=M,x.forEach((P,Y)=>{Y.isValidDocument()||(I=I.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,x)).next(M=>{h=M;let P=[];for(let Y of a){let B=iie(Y,h.get(Y.key).overlayedDocument);B!=null&&P.push(new mc(Y.key,B,bj(B.value.mapValue),Wr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,P,a)}).next(M=>{m=M;let P=M.applyToLocalDocumentSet(h,I);return c.documentOverlayCache.saveOverlays(g,M.batchId,P)})}).then(()=>({batchId:m.batchId,changes:Pj(h)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new Er($t)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield mu(r,i.changes),yield ym(r.remoteStore)}catch(i){let o=bm(i,"Failed to persist write");t.reject(o)}})}function MB(n,e){return te(this,null,function*(){let t=at(n);try{let r=yield Eie(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?xt(s.lu,14607):i.removedDocuments.size>0&&(xt(s.lu,42227),s.lu=!1))}),yield mu(t,r,e)}catch(r){yield zd(r)}})}function F7(n,e,t){let r=at(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=at(s);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(let m of h.wa)m.va(a)&&(l=!0)}),l&&HN(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Gie(n,e,t){return te(this,null,function*(){let r=at(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Er(nt.comparator);s=s.insert(o,Ei.newNoDocument(o,Nt.min()));let a=fn().add(o),c=new V_(Nt.min(),new Map,new Er($t),s,a);yield MB(r,c),r.du=r.du.remove(o),r.Eu.delete(e),KN(r)}else yield lm(r.localStore,e,!1).then(()=>fm(r,e,t)).catch(zd)})}function Wie(n,e){return te(this,null,function*(){let t=at(n),r=e.batch.batchId;try{let i=yield Cie(t.localStore,e);WN(t,r,null),GN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield mu(t,i)}catch(i){yield zd(i)}})}function Kie(n,e,t){return te(this,null,function*(){let r=at(n);try{let i=yield(function(s,a){let c=at(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(xt(h!==null,37113),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(r.localStore,e);WN(r,e,t),GN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield mu(r,i)}catch(i){yield zd(i)}})}function Yie(n,e){return te(this,null,function*(){let t=at(n);$d(t.remoteStore)||$e(Gd,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield(function(s){let a=at(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))})(t.localStore);if(r===Dd)return void e.resolve();let i=t.Vu.get(r)||[];i.push(e),t.Vu.set(r,i)}catch(r){let i=bm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function GN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function WN(n,e,t){let r=at(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function fm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||NB(n,r)})}function NB(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(um(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),KN(n))}function YM(n,e,t){for(let r of t)r instanceof kx?(n.Au.addReference(r.key,e),Qie(n,r)):r instanceof Rx?($e(Gd,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||NB(n,r.key)):dt(19791,{yu:r})}function Qie(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||($e(Gd,"New document in limbo: "+t),n.Iu.add(r),KN(n))}function KN(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new nt(En.fromString(e)),r=n.mu.next();n.Eu.set(r,new WM(t)),n.du=n.du.insert(t,r),eC(n.remoteStore,new sm(Jo(vm(t.path)),r,"TargetPurposeLimboResolution",Zs.ue))}}function mu(n,e,t){return te(this,null,function*(){let r=at(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=EM.Es(c.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,l){return te(this,null,function*(){let u=at(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>xe.forEach(l,m=>xe.forEach(m.Is,g=>u.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>xe.forEach(m.ds,g=>u.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!qd(h))throw h;$e(VN,"Failed to update sequence numbers: "+h)}for(let h of l){let m=h.targetId;if(!h.fromCache){let g=u.Fs.get(m),x=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(x);u.Fs=u.Fs.insert(m,I)}}})})(r.localStore,o))})}function Zie(n,e){return te(this,null,function*(){let t=at(n);if(!t.currentUser.isEqual(e)){$e(Gd,"User change. New user:",e.toKey());let r=yield hB(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new je(Ie.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield mu(t,r.Bs)}})}function Xie(n,e){let t=at(n),r=t.Eu.get(e);if(r&&r.lu)return fn().add(r.key);{let i=fn(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function Jie(n,e){return te(this,null,function*(){let t=at(n),r=yield Cx(t.localStore,e.query,!0),i=e.view.uu(r);return t.isPrimaryClient&&YM(t,e.targetId,i._u),i})}function eoe(n,e){return te(this,null,function*(){let t=at(n);return vB(t.localStore,e).then(r=>mu(t,r))})}function toe(n,e,t,r){return te(this,null,function*(){let i=at(n),o=yield(function(a,c){let l=at(a),u=at(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.Xn(h,c).next(m=>m?l.localDocuments.getDocuments(h,m):xe.resolve(null)))})(i.localStore,e);o!==null?(t==="pending"?yield ym(i.remoteStore):t==="acknowledged"||t==="rejected"?(WN(i,e,r||null),GN(i,e),(function(a,c){at(at(a).mutationQueue).rr(c)})(i.localStore,e)):dt(6720,"Unknown batchState",{wu:t}),yield mu(i,o)):$e(Gd,"Cannot apply mutation batch with id: "+e)})}function noe(n,e){return te(this,null,function*(){let t=at(n);if(tC(t),YN(t),e===!0&&t.fu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield L7(t,r.toArray());t.fu=!0,yield jM(t.remoteStore,!0);for(let o of i)eC(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){let r=[],i=Promise.resolve();t.Tu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(fm(t,s),lm(t.localStore,s,!0))),um(t.remoteStore,s)}),yield i,yield L7(t,r),(function(s){let a=at(s);a.Eu.forEach((c,l)=>{um(a.remoteStore,l)}),a.Au.jr(),a.Eu=new Map,a.du=new Er(nt.comparator)})(t),t.fu=!1,yield jM(t.remoteStore,!1)}})}function L7(n,e,t){return te(this,null,function*(){let r=at(n),i=[],o=[];for(let s of e){let a,c=r.Tu.get(s);if(c&&c.length!==0){a=yield cm(r.localStore,Jo(c[0]));for(let l of c){let u=r.Pu.get(l),h=yield Jie(r,u);h.snapshot&&o.push(h.snapshot)}}else{let l=yield mB(r.localStore,s);a=yield cm(r.localStore,l),yield $N(r,PB(l),s,!1,a.resumeToken)}i.push(a)}return r.hu.J_(o),i})}function PB(n){return Aj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function roe(n){return(function(t){return at(at(t).persistence).Ps()})(at(n).localStore)}function ioe(n,e,t,r){return te(this,null,function*(){let i=at(n);if(i.fu)return void $e(Gd,"Ignoring unexpected query state notification.");let o=i.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield vB(i.localStore,Tj(o[0])),a=V_.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ui.EMPTY_BYTE_STRING);yield mu(i,s,a);break}case"rejected":yield lm(i.localStore,e,!0),fm(i,e,r);break;default:dt(64155,t)}})}function ooe(n,e,t){return te(this,null,function*(){let r=tC(n);if(r.fu){for(let i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$e(Gd,"Adding an already active target "+i);continue}let o=yield mB(r.localStore,i),s=yield cm(r.localStore,o);yield $N(r,PB(o),s.targetId,!1,s.resumeToken),eC(r.remoteStore,s)}for(let i of t)r.Tu.has(i)&&(yield lm(r.localStore,i,!1).then(()=>{um(r.remoteStore,i),fm(r,i)}).catch(zd))}})}function tC(n){let e=at(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gie.bind(null,e),e.hu.J_=jie.bind(null,e.eventManager),e.hu.pu=Bie.bind(null,e.eventManager),e}function YN(n){let e=at(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kie.bind(null,e),e}function soe(n,e,t){let r=at(n);(function(o,s,a){return te(this,null,function*(){try{let c=yield s.getMetadata();if(yield(function(g,x){let I=at(g),M=li(x.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",P=>I.Ti.getBundleMetadata(P,x.id)).then(P=>!!P&&P.createTime.compareTo(M)>=0)})(o.localStore,c))return yield s.close(),a._completeWith((function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(DB(c));let l=new $M(c,s.serializer),u=yield s.Su();for(;u;){let m=yield l.Wa(u);m&&a._updateProgress(m),u=yield s.Su()}let h=yield l.za(o.localStore);return yield mu(o,h.Ja,void 0),yield(function(g,x){let I=at(g);return I.persistence.runTransaction("Save bundle","readwrite",M=>I.Ti.saveBundleMetadata(M,x))})(o.localStore,c),a._completeWith(h.progress),Promise.resolve(h.ja)}catch(c){return xs(Gd,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var QN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return te(this,null,function*(){this.serializer=ny(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return fB(this.persistence,new xx,t.initialUser,this.serializer)}Du(t){return new H_(wx.Vi,this.serializer)}bu(t){return new Sx}terminate(){return te(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),QM=class extends QN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){xt(this.persistence.referenceDelegate instanceof bx,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new vx(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new H_(r=>bx.Vi(r,t),this.serializer)}},Fx=class n extends QN{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return te(this,null,function*(){yield QE(n.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield YN(this.Mu.syncEngine),yield ym(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return fB(this.persistence,new xx,e.initialUser,this.serializer)}Cu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new vx(r,e.asyncQueue,t)}Fu(e,t){let r=new CT(t,this.persistence);return new xT(e.asyncQueue,r)}Du(e){let t=LN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new CM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,xB(),H2(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Sx}},ZM=class n extends Fx{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return te(this,null,function*(){yield QE(n.prototype,this,"initialize").call(this,e);let t=this.Mu.syncEngine;this.sharedClientState instanceof E_&&(this.sharedClientState.syncEngine={Do:toe.bind(null,t),vo:ioe.bind(null,t),Co:ooe.bind(null,t),Ps:roe.bind(null,t),bo:eoe.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.ji(r=>te(this,null,function*(){yield noe(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}bu(e){let t=xB();if(!E_.C(t))throw new je(Ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=LN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new E_(t,e.asyncQueue,r,e.clientId,e.initialUser)}},ZN=(()=>{class n{initialize(t,r){return te(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>F7(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zie.bind(null,this.syncEngine),yield jM(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new zM})()}createDatastore(t){let r=ny(t.databaseInfo.databaseId),i=(function(s){return new PM(s)})(t.databaseInfo);return(function(s,a,c,l){return new FM(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new VM(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>F7(this.syncEngine,r,0),(function(){return Ax.C()?new Ax:new DM})())}createSyncEngine(t,r){return(function(o,s,a,c,l,u,h){let m=new KM(o,s,a,c,l,u);return h&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return te(this,null,function*(){var t,r;yield(function(o){return te(this,null,function*(){let s=at(o);$e(Ih,"RemoteStore shutting down."),s.Ia.add(5),yield _m(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function V7(n,e=10240){let t=0;return{read(){return te(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return te(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var hm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ai("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var XM=class{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new ji,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}getMetadata(){return te(this,null,function*(){return this.metadata.promise})}Su(){return te(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return te(this,null,function*(){let e=yield this.ku();if(e===null)return null;let t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);let i=yield this.Qu(r);return new HM(JSON.parse(i),e.length+r)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return te(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Qu(e){return te(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");let t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return te(this,null,function*(){let e=yield this.Nu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var JM=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return te(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new je(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield(function(i,o){return te(this,null,function*(){let s=at(i),a={documents:o.map(h=>B_(s.serializer,h))},c=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,En.emptyPath(),a,o.length),l=new Map;c.forEach(h=>{let m=uie(s.serializer,h);l.set(m.key.toString(),m)});let u=[];return o.forEach(h=>{let m=l.get(h.toString());xt(!!m,55234,{key:h}),u.push(m)}),u})})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new jd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return te(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=nt.fromPath(r);this.mutations.push(new O_(i,this.precondition(i)))}),yield(function(r,i){return te(this,null,function*(){let o=at(r),s={writes:i.map(a=>U_(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,En.emptyPath(),s)})})(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt(50498,{Wu:e.constructor.name});t=Nt.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new je(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nt.min())?Wr.exists(!1):Wr.updateTime(t):Wr.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new je(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wr.updateTime(t)}return Wr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var eN=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new G_(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>te(this,null,function*(){let e=new JM(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!Z_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!zj(t)}return!1}};var Ud="FirestoreClient",tN=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xi.UNAUTHENTICATED,this.clientId=I_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>te(this,null,function*(){$e(Ud,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>($e(Ud,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>te(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=bm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function dT(n,e){return te(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),$e(Ud,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>te(null,null,function*(){r.isEqual(i)||(yield hB(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{xs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{$e("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{xs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function j7(n,e){return te(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield XN(n);$e(Ud,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>k7(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>k7(e.remoteStore,i)),n._onlineComponents=e})}function XN(n){return te(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$e(Ud,"Using user provided OfflineComponentProvider");try{yield dT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;xs("Error using user provided cache. Falling back to memory cache: "+t),yield dT(n,new QN)}}else $e(Ud,"Using default OfflineComponentProvider"),yield dT(n,new QM(void 0));return n._offlineComponents})}function nC(n){return te(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?($e(Ud,"Using user provided OnlineComponentProvider"),yield j7(n,n._uninitializedComponentsProvider._online)):($e(Ud,"Using default OnlineComponentProvider"),yield j7(n,new ZN))),n._onlineComponents})}function kB(n){return XN(n).then(e=>e.persistence)}function JN(n){return XN(n).then(e=>e.localStore)}function RB(n){return nC(n).then(e=>e.remoteStore)}function eP(n){return nC(n).then(e=>e.syncEngine)}function aoe(n){return nC(n).then(e=>e.datastore)}function pm(n){return te(this,null,function*(){let e=yield nC(n),t=e.eventManager;return t.onListen=Uie.bind(null,e.syncEngine),t.onUnlisten=qie.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zie.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Hie.bind(null,e.syncEngine),t})}function coe(n){return n.asyncQueue.enqueue(()=>te(null,null,function*(){let e=yield kB(n),t=yield RB(n);return e.setNetworkEnabled(!0),(function(i){let o=at(i);return o.Ia.delete(0),ry(o)})(t)}))}function loe(n){return n.asyncQueue.enqueue(()=>te(null,null,function*(){let e=yield kB(n),t=yield RB(n);return e.setNetworkEnabled(!1),(function(i){return te(this,null,function*(){let o=at(i);o.Ia.add(0),yield _m(o),o.Aa.set("Offline")})})(t)}))}function uoe(n,e){let t=new ji;return n.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){return(function(i,o,s){return te(this,null,function*(){try{let a=yield(function(l,u){let h=at(l);return h.persistence.runTransaction("read document","readonly",m=>h.localDocuments.getDocument(m,u))})(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new je(Ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=bm(a,`Failed to get document '${o} from cache`);s.reject(c)}})})(yield JN(n),e,t)})),t.promise}function OB(n,e,t={}){let r=new ji;return n.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){return(function(o,s,a,c,l){let u=new hm({next:m=>{u.Ou(),s.enqueueAndForget(()=>qN(o,h));let g=m.docs.has(a);!g&&m.fromCache?l.reject(new je(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?l.reject(new je(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),h=new W_(vm(a.path),u,{includeMetadataChanges:!0,ka:!0});return zN(o,h)})(yield pm(n),n.asyncQueue,e,t,r)})),r.promise}function doe(n,e){let t=new ji;return n.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){return(function(i,o,s){return te(this,null,function*(){try{let a=yield Cx(i,o,!0),c=new Ox(o,a.qs),l=c.nu(a.documents),u=c.applyChanges(l,!1);s.resolve(u.snapshot)}catch(a){let c=bm(a,`Failed to execute query '${o} against cache`);s.reject(c)}})})(yield JN(n),e,t)})),t.promise}function FB(n,e,t={}){let r=new ji;return n.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){return(function(o,s,a,c,l){let u=new hm({next:m=>{u.Ou(),s.enqueueAndForget(()=>qN(o,h)),m.fromCache&&c.source==="server"?l.reject(new je(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),h=new W_(a,u,{includeMetadataChanges:!0,ka:!0});return zN(o,h)})(yield pm(n),n.asyncQueue,e,t,r)})),r.promise}function foe(n,e){let t=new hm(e);return n.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){return(function(i,o){at(i).Da.add(o),o.next()})(yield pm(n),t)})),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){return(function(i,o){at(i).Da.delete(o)})(yield pm(n),t)}))}}function hoe(n,e,t,r){let i=(function(s,a){let c;return c=typeof s=="string"?yN().encode(s):s,(function(u,h){return new XM(u,h)})((function(u,h){if(u instanceof Uint8Array)return V7(u,h);if(u instanceof ArrayBuffer)return V7(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(t,ny(e));n.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){soe(yield eP(n),i,r)}))}function poe(n,e){return n.asyncQueue.enqueue(()=>te(null,null,function*(){return(function(r,i){let o=at(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))})(yield JN(n),e)}))}function LB(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var B7=new Map;var VB="firestore.googleapis.com",U7=!0,Lx=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new je(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VB,this.ssl=U7}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:U7;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bie)throw new je(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LB((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new je(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new je(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new je(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Sh=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fT;switch(r.type){case"firstParty":return new mT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new je(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return te(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=B7.get(t);r&&($e("ComponentProvider","Removing Datastore"),B7.delete(t),r.terminate())})(this),Promise.resolve()}};function rC(n,e,t,r={}){var i;n=Pn(n,Sh);let o=hp(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(_1(`https://${c}`),w1("Firestore",!0)),s.host!==VB&&s.host!==c&&xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!mp(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=xi.MOCK_USER;else{u=y1(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new je(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new xi(m)}n._authCredentials=new hT(new $2(u,h))}}var co=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Zn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Q_(t,n._jsonSchema))return new n(e,r||null,new nt(En.fromString(t.referencePath)))}};Zn._jsonSchemaVersion="firestore/documentReference/1.0",Zn._jsonSchema={type:Ci("string",Zn._jsonSchemaVersion),referencePath:Ci("string")};var ll=class n extends co{constructor(e,t,r){super(e,t,vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new nt(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function iy(n,e,...t){if(n=bn(n),wN("collection","path",e),n instanceof Sh){let r=En.fromString(e,...t);return OV(r),new ll(n,null,r)}{if(!(n instanceof Zn||n instanceof ll))throw new je(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(En.fromString(e,...t));return OV(r),new ll(n.firestore,null,r)}}function tP(n,e){if(n=Pn(n,Sh),wN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new je(Ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new co(n,null,(function(r){return new pc(En.emptyPath(),r)})(e))}function Th(n,e,...t){if(n=bn(n),arguments.length===1&&(e=I_.newId()),wN("doc","path",e),n instanceof Sh){let r=En.fromString(e,...t);return RV(r),new Zn(n,null,new nt(r))}{if(!(n instanceof Zn||n instanceof ll))throw new je(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(En.fromString(e,...t));return RV(r),new Zn(n.firestore,n instanceof ll?n.converter:null,new nt(r))}}function oy(n,e){return n=bn(n),e=bn(e),(n instanceof Zn||n instanceof ll)&&(e instanceof Zn||e instanceof ll)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function iC(n,e){return n=bn(n),e=bn(e),n instanceof co&&e instanceof co&&n.firestore===e.firestore&&ey(n._query,e._query)&&n.converter===e.converter}var z7="AsyncQueue",Vx=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new G_(this,"async_queue_retry"),this.oc=()=>{let r=H2();r&&$e(z7,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=H2();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=H2();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ji;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return te(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qd(e))throw e;$e(z7,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ai("INTERNAL UNHANDLED ERROR: ",q7(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=BM.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&dt(47125,{hc:q7(this.tc)})}verifyOperationInProgress(){}Pc(){return te(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function q7(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function nN(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var rN=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ji,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var jB=-1,Br=class extends Sh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vx,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return te(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Vx(e),this._firestoreClient=void 0,yield e}})}};function BB(n,e){let t=typeof n=="object"?n:Fc(),r=typeof n=="string"?n:e||tx,i=$a(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=v1("firestore");o&&rC(i,...o)}return i}function lo(n){if(n._terminated)throw new je(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UB(n),n._firestoreClient}function UB(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,l,u){return new AT(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,LB(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new tN(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}function nP(n,e){xs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return zB(n,ZN.provider,{build:r=>new Fx(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function rP(n){return te(this,null,function*(){xs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();zB(n,ZN.provider,{build:t=>new ZM(t,e.cacheSizeBytes)})})}function zB(n,e,t){if((n=Pn(n,Br))._firestoreClient||n._terminated)throw new je(Ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new je(Ie.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},UB(n)}function iP(n){if(n._initialized&&!n._terminated)throw new je(Ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ji;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>te(null,null,function*(){try{yield(function(r){return te(this,null,function*(){if(!Pd.C())return Promise.resolve();let i=r+dB;yield Pd.delete(i)})})(LN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function oP(n){return(function(t){let r=new ji;return t.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){return Yie(yield eP(t),r)})),r.promise})(lo(n=Pn(n,Br)))}function sP(n){return coe(lo(n=Pn(n,Br)))}function aP(n){return loe(lo(n=Pn(n,Br)))}function cP(n,e){let t=lo(n=Pn(n,Br)),r=new rN;return hoe(t,n._databaseId,e,r),r}function lP(n,e){return poe(lo(n=Pn(n,Br)),e).then(t=>t?new co(n,null,t.query):null)}var Js=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ui.fromBase64String(e))}catch(t){throw new je(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Q_(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Js._jsonSchemaVersion="firestore/bytes/1.0",Js._jsonSchema={type:Ci("string",Js._jsonSchemaVersion),bytes:Ci("string")};var vc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new je(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pu=class{constructor(e){this._methodName=e}};var ul=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Q_(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ul._jsonSchemaVersion="firestore/geoPoint/1.0",ul._jsonSchema={type:Ci("string",ul._jsonSchemaVersion),latitude:Ci("number"),longitude:Ci("number")};var Td=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Q_(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new je(Ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Td._jsonSchemaVersion="firestore/vectorValue/1.0",Td._jsonSchema={type:Ci("string",Td._jsonSchemaVersion),vectorValues:Ci("object")};var goe=/^__.*__$/,iN=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vd(e,this.data,t,this.fieldTransforms)}},jx=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mc(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function qB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt(40011,{Ec:n})}}var Bx=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ux(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(qB(this.Ec)&&goe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},oN=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ny(e)}Dc(e,t,r,i=!1){return new Bx({Ec:e,methodName:t,bc:r,path:ci.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Mh(n){let e=n._freezeSettings(),t=ny(n._databaseId);return new oN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oC(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);fP("Data must be an object, but it was:",s,r);let a=GB(r,s),c,l;if(o.merge)c=new Xs(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let h of o.mergeFields){let m=uN(e,h,t);if(!s.contains(m))throw new je(Ie.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);KB(u,m)||u.push(m)}c=new Xs(u),l=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=s.fieldTransforms;return new iN(new Io(a),c,l)}var K_=class n extends pu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function HB(n,e,t){return new Bx({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var sN=class n extends pu{_toFieldTransform(e){return new xh(e.path,new Fd)}isEqual(e){return e instanceof n}},aN=class n extends pu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=HB(this,e,!0),r=this.vc.map(o=>Nh(o,t)),i=new fu(r);return new xh(e.path,i)}isEqual(e){return e instanceof n&&mp(this.vc,e.vc)}},cN=class n extends pu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=HB(this,e,!0),r=this.vc.map(o=>Nh(o,t)),i=new hu(r);return new xh(e.path,i)}isEqual(e){return e instanceof n&&mp(this.vc,e.vc)}},lN=class n extends pu{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new Ld(e.serializer,Oj(e.serializer,this.Cc));return new xh(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function uP(n,e,t,r){let i=n.Dc(1,e,t);fP("Data must be an object, but it was:",i,r);let o=[],s=Io.empty();Hd(r,(c,l)=>{let u=hP(e,c,t);l=bn(l);let h=i.gc(u);if(l instanceof K_)o.push(u);else{let m=Nh(l,h);m!=null&&(o.push(u),s.set(u,m))}});let a=new Xs(o);return new jx(s,a,i.fieldTransforms)}function dP(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[uN(e,r,t)],c=[i];if(o.length%2!=0)throw new je(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(uN(e,o[m])),c.push(o[m+1]);let l=[],u=Io.empty();for(let m=a.length-1;m>=0;--m)if(!KB(l,a[m])){let g=a[m],x=c[m];x=bn(x);let I=s.gc(g);if(x instanceof K_)l.push(g);else{let M=Nh(x,I);M!=null&&(l.push(g),u.set(g,M))}}let h=new Xs(l);return new jx(u,h,s.fieldTransforms)}function $B(n,e,t,r=!1){return Nh(t,n.Dc(r?4:3,e))}function Nh(n,e){if(WB(n=bn(n)))return fP("Unsupported field value:",e,n),GB(n,e);if(n instanceof pu)return(function(r,i){if(!qB(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=Nh(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=bn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Oj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=mr.fromDate(r);return{timestampValue:om(i.serializer,o)}}if(r instanceof mr){let o=new mr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:om(i.serializer,o)}}if(r instanceof ul)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Js)return{bytesValue:Hj(i.serializer,r._byteString)};if(r instanceof Zn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:RN(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Td)return(function(s,a){return{mapValue:{fields:{[DN]:{stringValue:TN},[em]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return kN(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Wx(r)}`)})(n,e)}function GB(n,e){let t={};return fj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hd(n,(r,i)=>{let o=Nh(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function WB(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof mr||n instanceof ul||n instanceof Js||n instanceof Zn||n instanceof pu||n instanceof Td)}function fP(n,e,t){if(!WB(t)||!Y7(t)){let r=Wx(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function uN(n,e,t){if((e=bn(e))instanceof vc)return e._internalPath;if(typeof e=="string")return hP(n,e);throw Ux("Field path arguments must be of type string or ",n,!1,void 0,t)}var moe=new RegExp("[~\\*/\\[\\]]");function hP(n,e,t){if(e.search(moe)>=0)throw Ux(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vc(...e.split("."))._internalPath}catch{throw Ux(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ux(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new je(Ie.INVALID_ARGUMENT,a+n+c)}function KB(n,e){return n.some(t=>t.isEqual(e))}var Ah=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new dN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(sC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},dN=class extends Ah{data(){return super.data()}};function sC(n,e){return typeof e=="string"?hP(n,e):e instanceof vc?e._internalPath:e._delegate._internalPath}function YB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new je(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Y_=class{},Dh=class extends Y_{};function _c(n,e,...t){let r=[];e instanceof Y_&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof fN).length,a=o.filter(c=>c instanceof zx).length;if(s>1||s>0&&a>0)throw new je(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var zx=class n extends Dh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return ZB(e._query,t),new co(e.firestore,e.converter,BT(e._query,t))}_parse(e){let t=Mh(e.firestore);return(function(o,s,a,c,l,u,h){let m;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new je(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){$7(h,u);let x=[];for(let I of h)x.push(H7(c,o,I));m={arrayValue:{values:x}}}else m=H7(c,o,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||$7(h,u),m=$B(a,s,h,u==="in"||u==="not-in");return xn.create(l,u,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function aC(n,e,t){let r=e,i=sC("where",n);return zx._create(i,r,t)}var fN=class n extends Y_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Qn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)ZB(s,c),s=BT(s,c)})(e._query,t),new co(e.firestore,e.converter,BT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var hN=class n extends Dh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new je(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new je(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wh(o,s)})(e._query,this._field,this._direction);return new co(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new pc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function cC(n,e="asc"){let t=e,r=sC("orderBy",n);return hN._create(r,t)}var qx=class n extends Dh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new co(e.firestore,e.converter,sx(e._query,this._limit,this._limitType))}};function pP(n){return Q7("limit",n),qx._create("limit",n,"F")}function gP(n){return Q7("limitToLast",n),qx._create("limitToLast",n,"L")}var Hx=class n extends Dh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=QB(e,this.type,this._docOrFields,this._inclusive);return new co(e.firestore,e.converter,(function(i,o){return new pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function mP(...n){return Hx._create("startAt",n,!0)}function vP(...n){return Hx._create("startAfter",n,!1)}var $x=class n extends Dh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=QB(e,this.type,this._docOrFields,this._inclusive);return new co(e.firestore,e.converter,(function(i,o){return new pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,t))}};function _P(...n){return $x._create("endBefore",n,!1)}function yP(...n){return $x._create("endAt",n,!0)}function QB(n,e,t,r){if(t[0]=bn(t[0]),t[0]instanceof Ah)return(function(o,s,a,c,l){if(!c)throw new je(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let h of $g(o))if(h.field.isKeyField())u.push(yh(s,c.key));else{let m=c.data.field(h.field);if(Zx(m))throw new je(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let g=h.field.canonicalString();throw new je(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}u.push(m)}return new fl(u,l)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Mh(n.firestore);return(function(s,a,c,l,u,h){let m=s.explicitOrderBy;if(u.length>m.length)throw new je(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let x=0;x<u.length;x++){let I=u[x];if(m[x].field.isKeyField()){if(typeof I!="string")throw new je(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof I}`);if(!NN(s)&&I.indexOf("/")!==-1)throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${I}' contains a slash.`);let M=s.path.child(En.fromString(I));if(!nt.isDocumentKey(M))throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let P=new nt(M);g.push(yh(a,P))}else{let M=$B(c,l,I);g.push(M)}}return new fl(g,h)})(n._query,n.firestore._databaseId,i,e,t,r)}}function H7(n,e,t){if(typeof(t=bn(t))=="string"){if(t==="")throw new je(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NN(e)&&t.indexOf("/")!==-1)throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(En.fromString(t));if(!nt.isDocumentKey(r))throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yh(n,new nt(r))}if(t instanceof Zn)return yh(n,t._key);throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wx(t)}.`)}function $7(n,e){if(!Array.isArray(n)||n.length===0)throw new je(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZB(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new je(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new je(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var gm=class{convertValue(e,t="none"){switch(Rd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw dt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Hd(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[em].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Nr(s.doubleValue));return new Td(o)}convertGeoPoint(e){return new ul(Nr(e.latitude),Nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Xx(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(P_(e));default:return null}}convertTimestamp(e){let t=uu(e);return new mr(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=En.fromString(e);xt(tB(r),9688,{name:e});let i=new kd(r.get(1),r.get(3)),o=new nt(r.popFirst(5));return i.isEqual(t)||ai(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function lC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var pN=class extends gm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}};var lu=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},es=class n extends Ah{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(sC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new je(Ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};es._jsonSchemaVersion="firestore/documentSnapshot/1.0",es._jsonSchema={type:Ci("string",es._jsonSchemaVersion),bundleSource:Ci("string","DocumentSnapshot"),bundleName:Ci("string"),bundle:Ci("string")};var Md=class extends es{data(e={}){return super.data(e)}},bs=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Md(this._firestore,this._userDataWriter,r.key,r,new lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Md(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Md(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:voe(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new je(Ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=I_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function voe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt(61501,{type:n})}}function uC(n,e){return n instanceof es&&e instanceof es?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bs&&e instanceof bs&&n._firestore===e._firestore&&iC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function dC(n){n=Pn(n,Zn);let e=Pn(n.firestore,Br);return OB(lo(e),n._key).then(t=>IP(e,n,t))}bs._jsonSchemaVersion="firestore/querySnapshot/1.0",bs._jsonSchema={type:Ci("string",bs._jsonSchemaVersion),bundleSource:Ci("string","QuerySnapshot"),bundleName:Ci("string"),bundle:Ci("string")};var gu=class extends gm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}};function wP(n){n=Pn(n,Zn);let e=Pn(n.firestore,Br),t=lo(e),r=new gu(e);return uoe(t,n._key).then(i=>new es(e,r,n._key,i,new lu(i!==null&&i.hasLocalMutations,!0),n.converter))}function bP(n){n=Pn(n,Zn);let e=Pn(n.firestore,Br);return OB(lo(e),n._key,{source:"server"}).then(t=>IP(e,n,t))}function fC(n){n=Pn(n,co);let e=Pn(n.firestore,Br),t=lo(e),r=new gu(e);return YB(n._query),FB(t,n._query).then(i=>new bs(e,r,n,i))}function xP(n){n=Pn(n,co);let e=Pn(n.firestore,Br),t=lo(e),r=new gu(e);return doe(t,n._query).then(i=>new bs(e,r,n,i))}function CP(n){n=Pn(n,co);let e=Pn(n.firestore,Br),t=lo(e),r=new gu(e);return FB(t,n._query,{source:"server"}).then(i=>new bs(e,r,n,i))}function sy(n,e,t){n=Pn(n,Zn);let r=Pn(n.firestore,Br),i=lC(n.converter,e,t);return Cm(r,[oC(Mh(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Wr.none())])}function ay(n,e,t,...r){n=Pn(n,Zn);let i=Pn(n.firestore,Br),o=Mh(i),s;return s=typeof(e=bn(e))=="string"||e instanceof vc?dP(o,"updateDoc",n._key,e,t,r):uP(o,"updateDoc",n._key,e),Cm(i,[s.toMutation(n._key,Wr.exists(!0))])}function hC(n){return Cm(Pn(n.firestore,Br),[new jd(n._key,Wr.none())])}function pC(n,e){let t=Pn(n.firestore,Br),r=Th(n),i=lC(n.converter,e);return Cm(t,[oC(Mh(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Wr.exists(!1))]).then(()=>r)}function xm(n,...e){var t,r,i;n=bn(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||nN(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(nN(e[s])){let h=e[s];e[s]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(n instanceof Zn)l=Pn(n.firestore,Br),u=vm(n._key.path),c={next:h=>{e[s]&&e[s](IP(l,n,h))},error:e[s+1],complete:e[s+2]};else{let h=Pn(n,co);l=Pn(h.firestore,Br),u=h._query;let m=new gu(l);c={next:g=>{e[s]&&e[s](new bs(l,m,h,g))},error:e[s+1],complete:e[s+2]},YB(n._query)}return(function(m,g,x,I){let M=new hm(I),P=new W_(g,M,x);return m.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){return zN(yield pm(m),P)})),()=>{M.Ou(),m.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){return qN(yield pm(m),P)}))}})(lo(l),u,a,c)}function EP(n,e){return foe(lo(n=Pn(n,Br)),nN(e)?e:{next:e})}function Cm(n,e){return(function(r,i){let o=new ji;return r.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){return $ie(yield eP(r),i,o)})),o.promise})(lo(n),e)}function IP(n,e,t){let r=t.docs.get(e._key),i=new gu(n);return new es(n,i,e._key,r,new lu(t.hasPendingWrites,t.fromCache),e.converter)}var _oe={maxAttempts:5};var Gx=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mh(e)}set(e,t,r){this._verifyNotCommitted();let i=Ad(e,this._firestore),o=lC(i.converter,t,r),s=oC(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Wr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Ad(e,this._firestore),s;return s=typeof(t=bn(t))=="string"||t instanceof vc?dP(this._dataReader,"WriteBatch.update",o._key,t,r,i):uP(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Wr.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ad(e,this._firestore);return this._mutations=this._mutations.concat(new jd(t._key,Wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new je(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ad(n,e){if((n=bn(n)).firestore!==e)throw new je(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var gN=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mh(e)}get(e){let t=Ad(e,this._firestore),r=new pN(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return dt(24041);let o=i[0];if(o.isFoundDocument())return new Ah(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Ah(this._firestore,r,t._key,null,t.converter);throw dt(18433,{doc:o})})}set(e,t,r){let i=Ad(e,this._firestore),o=lC(i.converter,t,r),s=oC(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Ad(e,this._firestore),s;return s=typeof(t=bn(t))=="string"||t instanceof vc?dP(this._dataReader,"Transaction.update",o._key,t,r,i):uP(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Ad(e,this._firestore);return this._transaction.delete(t._key),this}};var mN=class extends gN{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ad(e,this._firestore),r=new gu(this._firestore);return super.get(e).then(i=>new es(this._firestore,r,t._key,i._document,new lu(!1,!1),t.converter))}};function SP(n,e,t){n=Pn(n,Br);let r=Object.assign(Object.assign({},_oe),t);return(function(o){if(o.maxAttempts<1)throw new je(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let c=new ji;return o.asyncQueue.enqueueAndForget(()=>te(null,null,function*(){let l=yield aoe(o);new eN(o.asyncQueue,l,a,s,c).zu()})),c.promise})(lo(n),i=>e(new mN(n,i)),r)}function AP(){return new K_("deleteField")}function XB(){return new sN("serverTimestamp")}function JB(...n){return new aN("arrayUnion",n)}function e9(...n){return new cN("arrayRemove",n)}function DP(n){return new lN("increment",n)}(function(e,t=!0){(function(i){mm=i})(C1),zs(new eo("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Br(new pT(r.getProvider("auth-internal")),new vT(s,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new je(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kd(l.options.projectId,u)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Gn(MV,NV,e),Gn(MV,NV,"esm2017")})();var gC=function(){return gC=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},gC.apply(this,arguments)};var woe={includeMetadataChanges:!1};function TP(n,e){return e===void 0&&(e=woe),new Ot(function(t){var r=xm(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function t9(n){return TP(n,{includeMetadataChanges:!0})}function n9(n,e){return e===void 0&&(e={}),t9(n).pipe(ut(function(t){return MP(t,e)}))}function MP(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:gC(gC({},r),(t={},t[e.idField]=n.id,t))}function r9(n){return TP(n,{includeMetadataChanges:!0}).pipe(ut(function(e){return e.docs}))}function i9(n,e){return e===void 0&&(e={}),r9(n).pipe(ut(function(t){return t.map(function(r){return MP(r,e)})}))}var uo=class{constructor(e){return e}},o9="firestore",NP=class{constructor(){return rl(o9)}};var PP=new Ye("angularfire2.firestore-instances");function boe(n,e){let t=ou(o9,n,e);return t&&new uo(t)}function xoe(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new uo(r)}}var Coe={provide:NP,deps:[[new Ar,PP]]},Eoe={provide:uo,useFactory:boe,deps:[[new Ar,PP],Ks]};function s9(n,...e){return Gn("angularfire",oi.full,"fst"),io([Eoe,Coe,{provide:PP,useFactory:xoe(n),multi:!0,deps:[Ut,Rn,si,dc,[new Ar,ah],[new Ar,_s],...e]}])}var Wd=Mr(i9,!0);var a9=Mr(n9,!0);var cy=Mr(pC,!0,2);var Kr=Mr(iy,!0,2);var Kd=Mr(hC,!0,2);var Ur=Mr(Th,!0,2);var mC=Mr(dC,!0);var hl=Mr(fC,!0);var c9=Mr(BB,!0);var l9=Mr(cC,!0,2),u9=Mr(_c,!0,2);var pl=Mr(sy,!0,2);var gl=Mr(ay,!0,2);var d9=Mr(aC,!0,2);var Em=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){if(!this.firestore)return mt([]);let r=Kr(this.firestore,"users");return Wd(r,{idField:"id"}).pipe(ut(i=>i.map(o=>({id:o.id,name:o.name,email:o.email,phone:o.phone,signupDate:o.signupDate||"",avatarUrl:o.avatarUrl||"",status:o.status??"Attivo",birthDate:o.birthDate??"",gender:o.gender??"",address:o.address??"",city:o.city??"",cap:o.cap??"",personalNotes:o.personalNotes??"",subscriptionEnd:o.subscriptionEnd??"",cards:o.cards??[]}))))}getAll(){return te(this,null,function*(){if(!this.firestore)return[];let r=Kr(this.firestore,"users");return(yield hl(r)).docs.map(o=>{let s=o.data();return{id:o.id,name:s.name,email:s.email,phone:s.phone,signupDate:s.signupDate||"",avatarUrl:s.avatarUrl||"",status:s.status??"Attivo",birthDate:s.birthDate??"",gender:s.gender??"",address:s.address??"",city:s.city??"",cap:s.cap??"",personalNotes:s.personalNotes??"",subscriptionEnd:s.subscriptionEnd??"",cards:s.cards??[]}})})}getById$(r){if(!this.firestore)return mt(void 0);let i=Kr(this.firestore,"users");return Wd(i,{idField:"id"}).pipe(ut(o=>o.find(s=>s.id===r)))}getById(r){return te(this,null,function*(){if(!this.firestore)return;let i=Ur(this.firestore,`users/${r}`),o=yield mC(i);if(!o.exists())return;let s=o.data();return{id:o.id,name:s.name,email:s.email,phone:s.phone,signupDate:s.signupDate||"",avatarUrl:s.avatarUrl||"",status:s.status??"Attivo",birthDate:s.birthDate??"",gender:s.gender??"",address:s.address??"",city:s.city??"",cap:s.cap??"",personalNotes:s.personalNotes??"",subscriptionEnd:s.subscriptionEnd??"",cards:s.cards??[]}})}add(r){return te(this,null,function*(){let i=Ur(Kr(this.firestore,"users")),o={name:r.name,email:r.email,phone:r.phone??"",signupDate:r.signupDate??new Date().toISOString().slice(0,10),avatarUrl:r.avatarUrl??"",status:r.status??"Attivo",birthDate:r.birthDate??"",gender:r.gender??"",address:r.address??"",city:r.city??"",cap:r.cap??"",personalNotes:r.personalNotes??"",subscriptionEnd:r.subscriptionEnd??"",cards:r.cards??[]};if(!this.firestore)throw new Error("Firestore not available - add user");return yield pl(i,o),Oe({id:i.id},o)})}};e.\u0275fac=function(i){return new(i||e)(Ve(uo))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Ioe(n,e){if(n&1){let t=_t();b(0,"div",15),Se("click",function(){pe(t);let i=ee();return ge(i.closeScaduteModal())}),A()}}function Soe(n,e){if(n&1&&(b(0,"span"),j(1,"("),b(2,"em"),j(3),A(),j(4,")"),A()),n&2){let t=ee().$implicit;H(3),Dr("Scadenza: ",t.subscriptionEnd)}}function Aoe(n,e){if(n&1&&(b(0,"li",25)(1,"strong"),j(2),A(),Qe(3,Soe,5,1,"span",22),A()),n&2){let t=e.$implicit;H(2),ft(t.name),H(),ae("ngIf",t.subscriptionEnd)}}function Doe(n,e){n&1&&(b(0,"li"),j(1," Nessuna tessera scaduta. "),A())}function Toe(n,e){if(n&1){let t=_t();b(0,"div",16)(1,"div",17),Se("click",function(i){return pe(t),ge(i.stopPropagation())}),b(2,"h3",18)(3,"span",19),j(4,"warning"),A(),j(5," Tessere scadute "),A(),b(6,"ul",20),Qe(7,Aoe,4,2,"li",21)(8,Doe,2,0,"li",22),A(),b(9,"div",23)(10,"button",24),Se("click",function(){pe(t);let i=ee();return ge(i.closeScaduteModal())}),j(11,"Chiudi"),A()()()()}if(n&2){let t=ee();H(7),ae("ngForOf",t.tessereScadute),H(),ae("ngIf",t.tessereScadute.length===0)}}var f9=(()=>{let e=class e{constructor(r){this.userService=r,this.activeClients=0,this.tessereAttive=[],this.tessereScadute=[],this.thisWeekCards=0,this.totalExercises=0,this.scaduteModalOpen=!1}ngOnInit(){return te(this,null,function*(){let r=yield this.userService.getAll(),i=new Date().toISOString().substring(0,10);this.activeClients=r.filter(o=>o.status==="Attivo").length,this.tessereScadute=r.filter(o=>o.subscriptionEnd&&o.subscriptionEnd<=i),this.tessereAttive=r.filter(o=>o.subscriptionEnd&&o.subscriptionEnd>i)})}openScaduteModal(){this.scaduteModalOpen=!0}closeScaduteModal(){this.scaduteModalOpen=!1}};e.\u0275fac=function(i){return new(i||e)(tt(Em))},e.\u0275cmp=Kn({type:e,selectors:[["app-home"]],standalone:!1,decls:41,vars:7,consts:[[1,"page","home-page"],[1,"cards"],[1,"card","stat-card"],[1,"stat-label"],[1,"card","stat-card",2,"margin-top","20px"],[1,"tessere-row",2,"display","flex","align-items","center","gap","18px"],[2,"font-size","1rem","font-weight","400"],[1,"tessera-btn","warning-card",2,"display","flex","align-items","center","gap","7px","background","#fff","border","1px solid #ededed","border-radius","8px","padding","7px 16px","cursor","pointer","box-shadow","none",3,"click"],[1,"material-icons",2,"color","#d32f2f","font-size","1.25em"],[2,"font-size","1rem"],[1,"stat-label",2,"margin-left","7px"],[1,"tessera-btn","success-card",2,"display","flex","align-items","center","gap","7px","background","#fff","border","1px solid #ededed","border-radius","8px","padding","7px 16px","box-shadow","none"],[1,"material-icons",2,"color","#318b2b","font-size","1.25em"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-tessera-scaduti",4,"ngIf"],[1,"modal-backdrop",3,"click"],[1,"modal-tessera-scaduti"],[1,"modal-scaduti-box",2,"padding","24px 28px","border-radius","10px","max-width","360px","background","#fff","box-shadow","0 4px 24px -6px #b2b2b2",3,"click"],[2,"color","#d32f2f","font-size","1.15rem","margin-bottom","13px"],[1,"material-icons",2,"font-size","26px","vertical-align","middle","margin-right","6px"],[1,"scaduti-list",2,"margin","0","padding","0","list-style","none"],["style","margin-bottom:9px;",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"text-align","right","margin-top","15px"],[1,"btn","outline",3,"click"],[2,"margin-bottom","9px"]],template:function(i,o){i&1&&(b(0,"div",0)(1,"h2"),j(2,"Dashboard"),A(),b(3,"div",1)(4,"div",2),j(5,"Clienti attivi "),b(6,"span",3)(7,"strong"),j(8),A()()(),b(9,"div",2),j(10,"Schede"),b(11,"span",3)(12,"strong"),j(13),A()()(),b(14,"div",2),j(15,"Esercizi"),b(16,"span",3)(17,"strong"),j(18),A()()()(),b(19,"div",4)(20,"div",5)(21,"span",6),j(22,"Tessere:"),A(),b(23,"div",7),Se("click",function(){return o.openScaduteModal()}),b(24,"span",8),j(25,"report_problem"),A(),b(26,"span",9),j(27,"Scadute:"),A(),b(28,"span",10)(29,"strong"),j(30),A()()(),b(31,"div",11)(32,"span",12),j(33,"verified_user"),A(),b(34,"span",9),j(35,"Attive:"),A(),b(36,"span",10)(37,"strong"),j(38),A()()()()(),Qe(39,Ioe,1,0,"div",13)(40,Toe,12,2,"div",14),A()),i&2&&(H(8),ft(o.activeClients),H(5),ft(o.thisWeekCards),H(5),ft(o.totalExercises),H(12),ft(o.tessereScadute.length),H(8),ft(o.tessereAttive.length),H(),ae("ngIf",o.scaduteModalOpen),H(),ae("ngIf",o.scaduteModalOpen))},dependencies:[Gi,Fi],styles:[".home-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0f2540}.cards[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.card[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:8px;box-shadow:0 2px 8px #14283c0f;flex:1 1 0;min-width:0;display:flex;align-items:center;min-height:58px}.card.stat-card[_ngcontent-%COMP%]{margin-bottom:16px;min-width:0;flex:1 1 0;display:flex;align-items:center}.stat-label[_ngcontent-%COMP%]{margin-left:7px}.tessera-btn[_ngcontent-%COMP%], .tessera-stat[_ngcontent-%COMP%]{background:#fff;border:1px solid #ededed;border-radius:8px;display:flex;align-items:center;gap:7px;padding:7px 16px;font-size:1rem;box-shadow:none}.tessera-btn.warning-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .tessera-stat.warning-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#d32f2f}.tessera-btn.success-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .tessera-stat.success-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#318b2b}"]});let n=e;return n})();var vC=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){let r=Kr(this.firestore,"exercises");return Wd(r,{idField:"id"})}getAll(){return te(this,null,function*(){let r=Kr(this.firestore,"exercises");return yield bI(Wd(r,{idField:"id"}))})}create(r){return te(this,null,function*(){let i=Kr(this.firestore,"exercises"),o=Ur(i),s=Oe({},r);return yield pl(o,s),Oe({id:o.id},s)})}update(r,i){return te(this,null,function*(){yield gl(Ur(this.firestore,`exercises/${r}`),i)})}delete(r){return te(this,null,function*(){yield Kd(Ur(this.firestore,`exercises/${r}`))})}};e.\u0275fac=function(i){return new(i||e)(Ve(uo))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var p9=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){let r=Kr(this.firestore,"categories");return Wd(r,{idField:"id"}).pipe(ut(i=>i.map(o=>({id:o.id,name:o.name,image:o.image}))))}create(r){return te(this,null,function*(){let i=crypto.randomUUID(),o={id:i,name:r.name,image:r.image};return yield pl(Ur(this.firestore,`categories/${i}`),o),o})}update(r,i){return te(this,null,function*(){yield gl(Ur(this.firestore,`categories/${r}`),i)})}delete(r){return te(this,null,function*(){yield Kd(Ur(this.firestore,`categories/${r}`))})}};e.\u0275fac=function(i){return new(i||e)(Ve(uo))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Im=(()=>{let e=class e{compressAndConvertToBase64(r,i=1e3,o=256){return te(this,null,function*(){let s=document.createElement("img"),a=new FileReader;return new Promise((c,l)=>{a.onload=u=>{s.onload=()=>{let h=document.createElement("canvas");h.width=o,h.height=o,h.getContext("2d")?.drawImage(s,0,0,h.width,h.height);let g=.8,x=h.toDataURL("image/jpeg",g);for(;x.length/1024>i&&g>.1;)g-=.05,x=h.toDataURL("image/jpeg",g);c(x)},s.onerror=l,s.src=u.target.result},a.onerror=l,a.readAsDataURL(r)})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var m9=n=>["/esercizi",n],Noe=n=>({"auto-matched":n});function Poe(n,e){if(n&1&&ht(0,"img",40),n&2){let t=ee().$implicit;ae("src",t.image,ur)("alt",t.name)}}function koe(n,e){n&1&&(b(0,"div",41),Sr(),b(1,"svg",42),ht(2,"circle",43)(3,"rect",44)(4,"rect",45)(5,"rect",46),A()())}function Roe(n,e){if(n&1&&(b(0,"div",32)(1,"div",33),Qe(2,Poe,1,2,"img",34)(3,koe,6,0,"div",35),A(),b(4,"div",36)(5,"div",37),j(6),A(),b(7,"div",38),j(8),A()(),b(9,"button",39),j(10," Dettaglio "),A()()),n&2){let t=e.$implicit;H(2),ae("ngIf",t.image),H(),ae("ngIf",!t.image),H(3),ft(t.name),H(2),ft(t.category),H(),Ta("aria-label",Gc("Dettaglio esercizio ",t.name)),ae("routerLink",Wc(7,m9,t.id))}}function Ooe(n,e){n&1&&(b(0,"div",47),j(1," Nessun esercizio presente "),A())}function Foe(n,e){if(n&1){let t=_t();b(0,"button",48),Se("click",function(){pe(t);let i=ee();return ge(i.openAllExercisesModal())}),j(1," Mostra tutti "),A()}}function Loe(n,e){if(n&1&&ht(0,"img",40),n&2){let t=ee().$implicit;ae("src",t.image,ur)("alt",t.name)}}function Voe(n,e){n&1&&(b(0,"div",62),Sr(),b(1,"svg",42),ht(2,"circle",63)(3,"path",64),A()())}function joe(n,e){if(n&1){let t=_t();b(0,"div",49)(1,"div",33),Qe(2,Loe,1,2,"img",34)(3,Voe,4,0,"div",50),b(4,"button",51),Se("click",function(){let i=pe(t).$implicit,o=ee();return ge(o.openEditCategoryModal(i))}),Sr(),b(5,"svg",52),ht(6,"path",53)(7,"circle",54),A()()(),Go(),b(8,"div",55),Se("click",function(){let i=pe(t).$implicit,o=ee();return ge(o.openEditCategoryModal(i))}),b(9,"div",56),j(10),A()(),b(11,"div",57)(12,"button",58),Se("click",function(){let i=pe(t).$implicit,o=ee();return ge(o.confirmRemoveCategory(i))}),j(13," \xD7 "),A(),b(14,"label",59)(15,"input",60),Se("change",function(i){let o=pe(t).$implicit,s=ee();return ge(s.onCategoryToggle(o,i.target.checked))}),A(),ht(16,"span",61),A()()()}if(n&2){let t=e.$implicit;H(2),ae("ngIf",t.image),H(),ae("ngIf",!t.image),H(),Ta("aria-label",Gc("Modifica immagine categoria ",t.name)),H(6),ft(t.name),H(2),Ta("aria-label",Gc("Elimina categoria ",t.name)),H(3),ae("checked",t.selected)}}function Boe(n,e){n&1&&(b(0,"div",47),j(1," Nessuna categoria trovata "),A())}function Uoe(n,e){if(n&1){let t=_t();b(0,"button",68),Se("click",function(){pe(t);let i=ee(2);return ge(i.openAllCategoriesModal())}),j(1," Mostra tutte "),A()}}function zoe(n,e){if(n&1){let t=_t();b(0,"div",65)(1,"button",66),Se("click",function(){pe(t);let i=ee();return ge(i.resetCategorySelections())}),j(2," Azzera "),A(),Qe(3,Uoe,2,0,"button",67),A()}if(n&2){let t=ee();H(3),ae("ngIf",t.categories.length>5)}}function qoe(n,e){if(n&1&&(b(0,"span",81),j(1),A()),n&2){let t=ee(2);H(),Dr(" Categoria: ",t.selectedCategoryNames[0]," ")}}function Hoe(n,e){if(n&1&&ht(0,"img",40),n&2){let t=ee().$implicit;ae("src",t.image,ur)("alt",t.name)}}function $oe(n,e){n&1&&(b(0,"div",89),Sr(),b(1,"svg",90),ht(2,"circle",91)(3,"rect",44),A()())}function Goe(n,e){if(n&1&&(b(0,"div",82)(1,"div",83),Qe(2,Hoe,1,2,"img",34)(3,$oe,4,0,"div",84),A(),b(4,"div",85)(5,"div",86),j(6),A(),b(7,"div",87),j(8),A()(),b(9,"a",88),j(10," Dettaglio "),A()()),n&2){let t=e.$implicit;H(2),ae("ngIf",t.image),H(),ae("ngIf",!t.image),H(3),ft(t.name),H(2),ft(t.category),H(),Ta("aria-label",Gc("Dettaglio esercizio ",t.name)),ae("routerLink",Wc(7,m9,t.id))}}function Woe(n,e){n&1&&(b(0,"div",92),j(1,"Nessun esercizio trovato"),A())}function Koe(n,e){if(n&1){let t=_t();b(0,"div",69)(1,"div",70)(2,"div",71)(3,"h3",72),j(4," Tutti gli esercizi "),Qe(5,qoe,2,1,"span",73),A(),b(6,"button",74),Se("click",function(){pe(t);let i=ee();return ge(i.closeAllExercisesModal())}),j(7,"\xD7"),A()(),b(8,"div",75)(9,"label",76)(10,"input",77),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.exerciseSearch,i)||(o.exerciseSearch=i),ge(i)}),A()()(),b(11,"div",78),Qe(12,Goe,11,9,"div",79)(13,Woe,2,0,"div",80),A()()()}if(n&2){let t=ee();H(5),ae("ngIf",t.selectedCategoryNames.length),H(5),it("ngModel",t.exerciseSearch),H(2),ae("ngForOf",t.allExercisesForModal),H(),ae("ngIf",t.allExercisesForModal.length===0)}}function Yoe(n,e){if(n&1&&ht(0,"img",40),n&2){let t=ee().$implicit;ae("src",t.image,ur)("alt",t.name)}}function Qoe(n,e){n&1&&(b(0,"div",109),Sr(),b(1,"svg",110),ht(2,"circle",111)(3,"path",112),A()())}function Zoe(n,e){if(n&1){let t=_t();b(0,"div",98)(1,"div",99),Qe(2,Yoe,1,2,"img",34)(3,Qoe,4,0,"div",100),b(4,"button",101),Se("click",function(){let i=pe(t).$implicit,o=ee(2);return ge(o.openEditCategoryModal(i))}),Sr(),b(5,"svg",102),ht(6,"path",53),A()()(),Go(),b(7,"div",103)(8,"div",104),j(9),A()(),b(10,"div",105)(11,"button",106),Se("click",function(){let i=pe(t).$implicit,o=ee(2);return ge(o.confirmRemoveCategory(i))}),j(12,"\xD7"),A(),b(13,"label",107)(14,"input",60),Se("change",function(i){let o=pe(t).$implicit,s=ee(2);return ge(s.onCategoryToggle(o,i.target.checked))}),A(),ht(15,"span",108),A()()()}if(n&2){let t=e.$implicit;H(2),ae("ngIf",t.image),H(),ae("ngIf",!t.image),H(),Ta("aria-label",Gc("Modifica categoria ",t.name)),H(5),ft(t.name),H(2),Ta("aria-label",Gc("Elimina categoria ",t.name)),H(3),ae("checked",t.selected)}}function Xoe(n,e){n&1&&(b(0,"div",92),j(1,"Nessuna categoria trovata"),A())}function Joe(n,e){if(n&1){let t=_t();b(0,"div",69)(1,"div",93)(2,"div",71)(3,"h3",72),j(4," Tutte le categorie "),A(),b(5,"button",74),Se("click",function(){pe(t);let i=ee();return ge(i.closeAllCategoriesModal())}),j(6,"\xD7"),A()(),b(7,"div",75)(8,"label",94)(9,"input",95),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.categorySearch,i)||(o.categorySearch=i),ge(i)}),A()()(),b(10,"div",96),Qe(11,Zoe,16,8,"div",97)(12,Xoe,2,0,"div",80),A()()()}if(n&2){let t=ee();H(9),it("ngModel",t.categorySearch),H(2),ae("ngForOf",t.allCategoriesForModal),H(),ae("ngIf",t.allCategoriesForModal.length===0)}}function ese(n,e){if(n&1){let t=_t();b(0,"div",69)(1,"div",113)(2,"div",114)(3,"p",115),j(4,"Sicuro di voler cancellare la categoria?"),A(),b(5,"div",116)(6,"button",117),Se("click",function(){pe(t);let i=ee();return ge(i.removeCategoryConfirmed())}),j(7,"Si"),A(),b(8,"button",118),Se("click",function(){pe(t);let i=ee();return ge(i.closeDeleteCategoryModal())}),j(9,"No"),A()()()()()}}function tse(n,e){n&1&&(ri(0),Sr(),b(1,"svg",131),ht(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),A(),ii())}function nse(n,e){if(n&1&&ht(0,"img",138),n&2){let t=ee(2);ae("src",t.exerciseImage,ur)}}function rse(n,e){if(n&1){let t=_t();b(0,"button",139),Se("mousedown",function(i){return pe(t),ge(i.preventDefault())})("click",function(){pe(t);let i=ee(2);return ge(i.clearCategoryInput())}),j(1," \xD7 "),A()}}function ise(n,e){if(n&1){let t=_t();b(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),Qe(6,tse,8,0,"ng-container",122)(7,nse,1,1,"ng-template",null,0,ao),A(),b(9,"input",123),Se("change",function(i){pe(t);let o=ee();return ge(o.onExerciseImageChange(i))}),A()()(),b(10,"label",124),j(11," Nome esercizio "),b(12,"input",125),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.exerciseName,i)||(o.exerciseName=i),ge(i)}),Se("keydown.enter",function(){pe(t);let i=ee();return ge(i.saveExercise())}),A()(),b(13,"label",126),j(14," Categoria "),b(15,"div",127)(16,"input",128),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.exerciseCategoryInput,i)||(o.exerciseCategoryInput=i),ge(i)}),Se("input",function(){pe(t);let i=ee();return ge(i.onAutoCategoryInput())})("blur",function(){pe(t);let i=ee();return ge(i.onAutoCategoryBlur())}),A(),Qe(17,rse,2,0,"button",129),A()(),b(18,"div",116)(19,"button",130),Se("click",function(){pe(t);let i=ee();return ge(i.saveExercise())}),j(20," Salva "),A(),b(21,"button",118),Se("click",function(){pe(t);let i=ee();return ge(i.closeExerciseModal())}),j(22,"Annulla"),A()()()()()}if(n&2){let t=yi(8),r=ee();H(6),ae("ngIf",!r.exerciseImage)("ngIfElse",t),H(6),it("ngModel",r.exerciseName),H(4),it("ngModel",r.exerciseCategoryInput),ae("ngClass",Wc(7,Noe,r.autoCatMatched)),H(),ae("ngIf",r.exerciseCategoryInput),H(2),ae("disabled",!r.exerciseName.trim()||!r.exerciseCategoryInput.trim())}}function ose(n,e){n&1&&(ri(0),Sr(),b(1,"svg",131),ht(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),A(),ii())}function sse(n,e){if(n&1&&ht(0,"img",142),n&2){let t=ee(2);ae("src",t.categoryImage,ur)}}function ase(n,e){if(n&1){let t=_t();b(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),Qe(6,ose,8,0,"ng-container",122)(7,sse,1,1,"ng-template",null,1,ao),A(),b(9,"input",123),Se("change",function(i){pe(t);let o=ee();return ge(o.onCategoryImageChange(i))}),A()()(),b(10,"label",140),j(11," Nome categoria "),b(12,"input",141),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.categoryName,i)||(o.categoryName=i),ge(i)}),A()(),b(13,"div",116)(14,"button",130),Se("click",function(){pe(t);let i=ee();return ge(i.saveCategory())}),j(15,"Salva"),A(),b(16,"button",118),Se("click",function(){pe(t);let i=ee();return ge(i.closeCategoryModal())}),j(17,"Annulla"),A()()()()()}if(n&2){let t=yi(8),r=ee();H(6),ae("ngIf",!r.categoryImage)("ngIfElse",t),H(6),it("ngModel",r.categoryName),H(2),ae("disabled",!r.categoryName.trim())}}function cse(n,e){n&1&&(ri(0),Sr(),b(1,"svg",131),ht(2,"rect",132)(3,"rect",133)(4,"rect",134)(5,"circle",135)(6,"rect",136)(7,"polyline",137),A(),ii())}function lse(n,e){if(n&1&&ht(0,"img",142),n&2){let t=ee(2);ae("src",t.editCategoryImage,ur)}}function use(n,e){if(n&1){let t=_t();b(0,"div",69)(1,"div",113)(2,"div",114)(3,"div",119)(4,"label",120)(5,"span",121),Qe(6,cse,8,0,"ng-container",122)(7,lse,1,1,"ng-template",null,2,ao),A(),b(9,"input",123),Se("change",function(i){pe(t);let o=ee();return ge(o.onEditCategoryImageChange(i))}),A()()(),b(10,"label",143),j(11," Nome categoria "),b(12,"input",144),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.editCategoryName,i)||(o.editCategoryName=i),ge(i)}),A()(),b(13,"div",116)(14,"button",130),Se("click",function(){pe(t);let i=ee();return ge(i.saveEditCategory())}),j(15,"Salva"),A(),b(16,"button",118),Se("click",function(){pe(t);let i=ee();return ge(i.closeEditCategoryModal())}),j(17,"Annulla"),A()()()()()}if(n&2){let t=yi(8),r=ee();H(6),ae("ngIf",!r.editCategoryImage)("ngIfElse",t),H(6),it("ngModel",r.editCategoryName),H(2),ae("disabled",!r.editCategoryName.trim())}}var v9=(()=>{let e=class e{constructor(r,i,o){this.eserciziService=r,this.categorieService=i,this.imageService=o,this.exercises=[],this.categories=[],this.subscriptions=[],this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null,this.exerciseSearch="",this.categoryName="",this.categoryImageFile=null,this.categoryImage=null,this.categorySearch="",this.showExerciseModal=!1,this.showCategoryModal=!1,this.showEditCategoryModal=!1,this.showDeleteCategoryModal=!1,this.showAllExercisesModal=!1,this.showAllCategoriesModal=!1,this.categoryToEdit=null,this.categoryToDelete=null,this.editCategoryName="",this.editCategoryImageFile=null,this.editCategoryImage=null,this.autoCatMatched=!1}ngOnInit(){this.loadExercises(),this.loadCategories()}ngOnDestroy(){this.subscriptions.forEach(r=>r.unsubscribe())}loadExercises(){let r=this.eserciziService.getAll$().subscribe(i=>{this.exercises=i});this.subscriptions.push(r)}loadCategories(){let r=this.categorieService.getAll$().subscribe(i=>{this.categories=i.map(o=>Rt(Oe({},o),{selected:!1}))});this.subscriptions.push(r)}onExerciseImageChange(r){let i=r.target.files?.[0]||null;this.exerciseImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,256).then(o=>this.exerciseImage=o):this.exerciseImage=null}onCategoryImageChange(r){let i=r.target.files?.[0]||null;this.categoryImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,128).then(o=>this.categoryImage=o):this.categoryImage=null}onEditCategoryImageChange(r){let i=r.target.files?.[0]||null;this.editCategoryImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,128).then(o=>this.editCategoryImage=o):this.editCategoryImage=null}saveExercise(){return te(this,null,function*(){let r=this.exerciseImage??void 0,i={name:this.exerciseName.trim(),category:this.exerciseCategoryInput.trim(),image:r};yield this.eserciziService.create(i),this.closeExerciseModal(),this.loadExercises()})}saveCategory(){return te(this,null,function*(){let r=this.categoryImage??void 0,i={name:this.categoryName.trim(),image:r};yield this.categorieService.create(i),this.closeCategoryModal(),this.loadCategories()})}saveEditCategory(){return te(this,null,function*(){if(!this.categoryToEdit)return;let r=this.categoryToEdit.name,i=this.editCategoryName.trim(),o=this.editCategoryImage??this.categoryToEdit.image,s={name:i,image:o};yield this.categorieService.update(this.categoryToEdit.id,s);let c=(yield this.eserciziService.getAll()).filter(l=>l.category===r);for(let l of c)yield this.eserciziService.update(l.id,{category:i});this.closeEditCategoryModal(),this.loadCategories(),this.loadExercises()})}openExerciseModal(){this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null,this.showExerciseModal=!0}closeExerciseModal(){this.showExerciseModal=!1,this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null}openCategoryModal(){this.categoryName="",this.categoryImageFile=null,this.categoryImage=null,this.showCategoryModal=!0}closeCategoryModal(){this.showCategoryModal=!1,this.categoryName="",this.categoryImageFile=null,this.categoryImage=null}openEditCategoryModal(r){this.categoryToEdit=r,this.editCategoryName=r.name,this.editCategoryImage=r.image||null,this.editCategoryImageFile=null,this.showEditCategoryModal=!0}closeEditCategoryModal(){this.showEditCategoryModal=!1,this.categoryToEdit=null,this.editCategoryName="",this.editCategoryImage=null,this.editCategoryImageFile=null}openAllExercisesModal(){this.showAllExercisesModal=!0}closeAllExercisesModal(){this.showAllExercisesModal=!1}openAllCategoriesModal(){this.showAllCategoriesModal=!0}closeAllCategoriesModal(){this.showAllCategoriesModal=!1}confirmRemoveCategory(r){this.categoryToDelete=r,this.showDeleteCategoryModal=!0}closeDeleteCategoryModal(){this.categoryToDelete=null,this.showDeleteCategoryModal=!1}removeCategoryConfirmed(){return te(this,null,function*(){this.categoryToDelete&&(yield this.categorieService.delete(this.categoryToDelete.id),this.closeDeleteCategoryModal(),this.loadCategories())})}onAutoCategoryInput(){this.autoCatMatched=!1;let r=this.exerciseCategoryInput.trim();if(r.length<3)return;let i=this.categories.find(o=>o.name.toLowerCase().startsWith(r.toLowerCase()));i&&(this.exerciseCategoryInput=i.name,this.autoCatMatched=!0)}onAutoCategoryBlur(){this.onAutoCategoryInput()}clearCategoryInput(){this.exerciseCategoryInput="",this.autoCatMatched=!1}onCategoryToggle(r,i){i?this.categories.forEach(o=>o.selected=o.id===r.id):this.categories.forEach(o=>o.selected=!1),this.categories=[...this.categories]}resetCategorySelections(){this.categories.forEach(r=>r.selected=!1),this.categories=[...this.categories]}get selectedCategoryNames(){return this.categories.filter(r=>r.selected).map(r=>r.name)}get filteredExercisesLimited(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(s=>s.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();return o&&(i=i.filter(s=>s.name.toLowerCase().includes(o))),i.slice(0,5)}get allExercisesForModal(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(s=>s.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();return o&&(i=i.filter(s=>s.name.toLowerCase().includes(o))),i}get filteredCategoriesLimited(){let r=this.categorySearch.trim().toLowerCase();return(r?this.categories.filter(o=>o.name.toLowerCase().includes(r)):this.categories).slice(0,5)}get allCategoriesForModal(){let r=this.categorySearch.trim().toLowerCase();return r?this.categories.filter(i=>i.name.toLowerCase().includes(r)):this.categories}};e.\u0275fac=function(i){return new(i||e)(tt(vC),tt(p9),tt(Im))},e.\u0275cmp=Kn({type:e,selectors:[["app-esercizi"]],decls:42,vars:14,consts:[["exercisePreviewTpl",""],["categoryPreviewTpl",""],["editCategoryPreviewTpl",""],[1,"esercizi-page"],[1,"esercizi-layout"],[1,"esercizi-card"],[1,"section-header"],[1,"section-title"],["type","button","aria-label","Aggiungi esercizio",1,"top-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24"],["x","2","y","9.5","width","3","height","5","rx","1.2","fill","#2563eb"],["x","19","y","9.5","width","3","height","5","rx","1.2","fill","#2563eb"],["x","6","y","11","width","12","height","2","rx","1","fill","#2563eb"],["x","8","y","10","width","8","height","4","rx","1.6","fill","#e7effd"],[1,"section-divider"],[1,"search-bar-wrapper"],["for","exercise-search",1,"search-bar"],["id","exercise-search","type","text","aria-label","Cerca esercizi","autocomplete","off","placeholder","Cerca esercizi...",3,"ngModelChange","ngModel"],[1,"exercise-list"],["class","card-item",4,"ngFor","ngForOf"],["class","exercise-empty-info",4,"ngIf"],["class","more-btn","type","button",3,"click",4,"ngIf"],[1,"categorie-card"],["type","button","aria-label","Aggiungi categoria",1,"top-btn",3,"click"],["d","M3 12.5 L12 21.2 Q12.6 21.8 13.3 21.25 L21.25 13.3 Q21.8 12.6 21.2 12 L12.5 3 Q12.05 2.55 11.45 3.1 L3.1 11.45 Q2.55 12.05 3 12.5Z","fill","#2563eb","stroke","#1857a7","stroke-width","1"],["cx","8","cy","8","r","2","fill","#fff","stroke","#2563eb","stroke-width","1"],["for","category-search",1,"search-bar"],["id","category-search","type","text","aria-label","Cerca categorie","autocomplete","off","placeholder","Cerca categorie...",3,"ngModelChange","ngModel"],[1,"category-list"],["class","card-item category-row",4,"ngFor","ngForOf"],["class","category-actions-bottom",4,"ngIf"],["class","esercizi-modal-backdrop",4,"ngIf"],[1,"card-item"],[1,"card-img-wrap"],[3,"src","alt",4,"ngIf"],["class","exercise-placeholder",4,"ngIf"],[1,"exercise-text"],[1,"exercise-name"],[1,"exercise-category"],["type","button",1,"exercise-detail-btn",3,"routerLink","aria-label"],[3,"src","alt"],[1,"exercise-placeholder"],["width","64","height","64","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#cfe6fd"],["x","8","y","10","width","8","height","4","rx","1.5","fill","#83b4fa"],["x","4","y","11.5","width","3","height","3","rx","1.2","fill","#2563eb"],["x","17","y","11.5","width","3","height","3","rx","1.2","fill","#2563eb"],[1,"exercise-empty-info"],["type","button",1,"more-btn",3,"click"],[1,"card-item","category-row"],["class","category-placeholder",4,"ngIf"],["type","button",1,"category-edit-img-btn",3,"click","aria-label"],["width","22","height","22","viewBox","0 0 24 24"],["d","M14.06 5.94a2.5 2.5 0 013.54 3.54l-8.585 8.585-4.243.707.707-4.243z","fill","none","stroke","#2563eb","stroke-width","2"],["cx","17.5","cy","6.5","r","1.5","fill","#83b4fa","stroke","#2563eb","stroke-width","1"],[1,"category-text",3,"click"],[1,"category-name"],[1,"category-controls-destra"],["type","button","title","Elimina categoria",1,"category-x-btn2",3,"click","aria-label"],["title","Seleziona categoria per filtrare esercizi",1,"category-checkbox-wrap"],["type","checkbox",3,"change","checked"],[1,"category-checkbox"],[1,"category-placeholder"],["cx","12","cy","12","r","12","fill","#e5fbee"],["d","M9 15l3-6 3 6","stroke","#22c16b","stroke-width","2","fill","none"],[1,"category-actions-bottom"],["type","button",1,"reset-categories-btn",3,"click"],["type","button","class","toggle-categories-btn",3,"click",4,"ngIf"],["type","button",1,"toggle-categories-btn",3,"click"],[1,"esercizi-modal-backdrop"],[1,"esercizi-modal","esercizi-grid-modal"],[1,"grid-modal-header"],[1,"grid-modal-title"],["class","grid-filter-tag",4,"ngIf"],["type","button","aria-label","Chiudi",1,"grid-close-btn",3,"click"],[1,"search-bar-wrapper","modal-search-inline"],["for","exercise-search-modal",1,"search-bar"],["id","exercise-search-modal","type","text","aria-label","Cerca esercizi nella griglia","autocomplete","off","placeholder","Cerca...",3,"ngModelChange","ngModel"],[1,"exercise-grid"],["class","exercise-grid-card",4,"ngFor","ngForOf"],["class","grid-empty",4,"ngIf"],[1,"grid-filter-tag"],[1,"exercise-grid-card"],[1,"grid-img"],["class","grid-placeholder",4,"ngIf"],[1,"grid-info"],[1,"grid-name"],[1,"grid-cat"],[1,"grid-detail-link",3,"routerLink","aria-label"],[1,"grid-placeholder"],["width","48","height","48","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#d9ecfd"],[1,"grid-empty"],[1,"esercizi-modal","categorie-grid-modal"],["for","category-search-modal",1,"search-bar"],["id","category-search-modal","type","text","aria-label","Cerca categorie nella griglia","autocomplete","off","placeholder","Cerca...",3,"ngModelChange","ngModel"],[1,"category-grid"],["class","category-grid-card",4,"ngFor","ngForOf"],[1,"category-grid-card"],[1,"grid-cat-img"],["class","grid-cat-placeholder",4,"ngIf"],["type","button",1,"grid-cat-edit-btn",3,"click","aria-label"],["width","18","height","18","viewBox","0 0 24 24"],[1,"grid-cat-info"],[1,"grid-cat-name"],[1,"grid-cat-actions"],["type","button",1,"grid-cat-delete-btn",3,"click","aria-label"],["title","Seleziona categoria per filtrare esercizi",1,"grid-cat-checkbox-wrap"],[1,"grid-cat-checkbox"],[1,"grid-cat-placeholder"],["width","46","height","46","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#e0f7eb"],["d","M9 15l3-6 3 6","stroke","#18c879","stroke-width","2","fill","none"],[1,"esercizi-modal"],[1,"esercizi-modal-body"],[1,"modal-message"],[1,"modal-actions"],["type","button",1,"modal-yes",3,"click"],["type","button",1,"modal-no",3,"click"],[1,"image-upload-zone"],[1,"input-image-label"],[1,"icon-image-upload-big"],[4,"ngIf","ngIfElse"],["type","file","accept","image/*",3,"change"],["for","exercise-name",1,"field-label"],["id","exercise-name","type","text","placeholder","Nome esercizio","autocomplete","off",3,"ngModelChange","keydown.enter","ngModel"],["for","exercise-category-auto",1,"field-label"],[1,"single-autocat-wrapper"],["id","exercise-category-auto","type","text","placeholder","Digita almeno 3 caratteri","autocomplete","off",3,"ngModelChange","input","blur","ngModel","ngClass"],["type","button","class","clear-cat-btn","aria-label","Pulisci categoria",3,"mousedown","click",4,"ngIf"],["type","button",1,"modal-yes",3,"click","disabled"],["width","180","height","180","viewBox","0 0 180 180","fill","none"],["x","10","y","10","width","160","height","160","rx","25","fill","#F7FBFF","stroke","#b5d9f8","stroke-width","3"],["x","47","y","125","width","86","height","25","rx","10","fill","#d1eaff"],["x","60","y","99","width","63","height","17","rx","7","fill","#bfe1fc"],["cx","66","cy","67","r","13","fill","#83b4fa"],["x","10","y","10","width","160","height","160","rx","25","stroke","#b5d9f8","stroke-width","3"],["points","36,151 80,92 110,135 144,74 168,130","fill","none","stroke","#5ab0fa","stroke-width","4.5","stroke-linecap","round","stroke-linejoin","round"],["alt","Preview immagine esercizio",1,"image-preview",3,"src"],["type","button","aria-label","Pulisci categoria",1,"clear-cat-btn",3,"mousedown","click"],["for","category-name",1,"field-label"],["id","category-name","type","text","placeholder","Nome categoria","autocomplete","off",3,"ngModelChange","ngModel"],["alt","Preview immagine categoria",1,"image-preview",3,"src"],["for","category-edit-name",1,"field-label"],["id","category-edit-name","type","text","placeholder","Nome categoria","autocomplete","off",3,"ngModelChange","ngModel"]],template:function(i,o){i&1&&(b(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),j(5,"ESERCIZI"),A(),b(6,"button",8),Se("click",function(){return o.openExerciseModal()}),Sr(),b(7,"svg",9),ht(8,"rect",10)(9,"rect",11)(10,"rect",12)(11,"rect",13),A()()(),Go(),ht(12,"div",14),b(13,"div",15)(14,"label",16)(15,"input",17),ot("ngModelChange",function(a){return st(o.exerciseSearch,a)||(o.exerciseSearch=a),a}),A()()(),b(16,"div",18),Qe(17,Roe,11,9,"div",19)(18,Ooe,2,0,"div",20)(19,Foe,2,0,"button",21),A()(),b(20,"div",22)(21,"div",6)(22,"span",7),j(23,"CATEGORIE"),A(),b(24,"button",23),Se("click",function(){return o.openCategoryModal()}),Sr(),b(25,"svg",9),ht(26,"path",24)(27,"circle",25),A()()(),Go(),ht(28,"div",14),b(29,"div",15)(30,"label",26)(31,"input",27),ot("ngModelChange",function(a){return st(o.categorySearch,a)||(o.categorySearch=a),a}),A()()(),b(32,"div",28),Qe(33,joe,17,8,"div",29)(34,Boe,2,0,"div",20)(35,zoe,4,1,"div",30),A()()(),Qe(36,Koe,14,4,"div",31)(37,Joe,13,3,"div",31)(38,ese,10,0,"div",31)(39,ise,23,9,"div",31)(40,ase,18,4,"div",31)(41,use,18,4,"div",31),A()),i&2&&(H(15),it("ngModel",o.exerciseSearch),H(2),ae("ngForOf",o.filteredExercisesLimited),H(),ae("ngIf",o.filteredExercisesLimited.length===0),H(),ae("ngIf",o.exercises.length>5),H(12),it("ngModel",o.categorySearch),H(2),ae("ngForOf",o.filteredCategoriesLimited),H(),ae("ngIf",o.filteredCategoriesLimited.length===0),H(),ae("ngIf",o.categories.length),H(),ae("ngIf",o.showAllExercisesModal),H(),ae("ngIf",o.showAllCategoriesModal),H(),ae("ngIf",o.showDeleteCategoryModal),H(),ae("ngIf",o.showExerciseModal),H(),ae("ngIf",o.showCategoryModal),H(),ae("ngIf",o.showEditCategoryModal))},dependencies:[ac,Qf,Gi,Fi,fd,Co,vs,Qo,_d,Na],styles:['root[_ngcontent-%COMP%]{--green: #18c879;--green-dark: #138554;--text: #153b56;--card: #fff;--radius: 18px;--shadow-card: 0 2px 12px rgba(36,80,144,.06);--primary: #2563eb}body[_ngcontent-%COMP%]{margin:0;font-family:system-ui,sans-serif;background:#f5f8fc}.esercizi-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f8fc;position:relative;z-index:0}.esercizi-layout[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;gap:52px;max-width:1200px;margin:0 auto;padding-top:30px;position:relative;z-index:0;pointer-events:auto}.esercizi-card[_ngcontent-%COMP%], .categorie-card[_ngcontent-%COMP%]{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow-card);min-width:410px;max-width:520px;width:100%;min-height:260px;display:flex;flex-direction:column;box-sizing:border-box;overflow:hidden;position:relative;z-index:0}.esercizi-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff 89%,#f8fdff)}.categorie-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff 89%,#f8fcfa)}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 26px 0}.section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;letter-spacing:.035em;color:#22416f;flex:1}.top-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e7effd 60%,#dbeafe);border:none;border-radius:50%;width:42px;height:42px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 10px #2563eb11;transition:background .14s,transform .14s}.top-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#bfd8fd 40%,#e8f1ff);transform:scale(1.08)}.section-divider[_ngcontent-%COMP%]{width:calc(100% - 52px);margin:0 26px 10px;height:0;position:relative}.section-divider[_ngcontent-%COMP%]:before{content:"";display:block;height:4px;width:100%;background:linear-gradient(90deg,#dadde2,#ececec);border-radius:3px;box-shadow:0 1.5px 6px #0000000d}.search-bar-wrapper[_ngcontent-%COMP%]{padding:0 26px 4px;box-sizing:border-box;width:100%;position:relative;z-index:0;pointer-events:auto}.search-bar[_ngcontent-%COMP%]{display:block;position:relative;width:100%;height:34px;border:1.7px solid #c9d9ec;border-radius:10px;background:#f7fbff;overflow:hidden;transition:border-color .18s,background-color .18s}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;inset:0;padding:0 12px 0 38px;border:none;background:transparent;font-size:.85rem;font-weight:600;color:#1c3554;outline:none}.exercise-list[_ngcontent-%COMP%], .category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:14px 26px 10px;width:100%;box-sizing:border-box}.card-item[_ngcontent-%COMP%]{width:82%;max-width:82%;margin:0 auto;min-height:118px;background:#fff;border-radius:20px;box-shadow:0 3px 12px #24509014;display:flex;align-items:center;gap:16px;padding:14px 18px;position:relative;box-sizing:border-box}.card-img-wrap[_ngcontent-%COMP%]{width:82px;height:82px;border-radius:18px;background:#f2f6fa;display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;overflow:hidden}.card-img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:74px;max-height:74px;object-fit:contain;display:block}.exercise-placeholder[_ngcontent-%COMP%], .category-placeholder[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center}.exercise-text[_ngcontent-%COMP%]{flex:1 1 0;display:flex;flex-direction:column;justify-content:center}.exercise-name[_ngcontent-%COMP%], .category-name[_ngcontent-%COMP%]{font-size:1.04rem;font-weight:800;color:var(--text);margin:0}.exercise-category[_ngcontent-%COMP%]{font-size:.85rem;font-style:italic;color:#3969b1;margin-top:2px}.exercise-detail-btn[_ngcontent-%COMP%]{position:absolute;right:14px;bottom:14px;font-size:.72rem;font-weight:700;background:var(--primary);color:#fff;border:none;border-radius:6px;padding:5px 14px;cursor:pointer;box-shadow:0 1px 4px #2563eb59;transition:background .15s}.exercise-detail-btn[_ngcontent-%COMP%]:hover{background:#184a9b}.category-row[_ngcontent-%COMP%]{padding-right:70px}.category-controls-destra[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;gap:10px}.category-x-btn2[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4d1d1;color:#db3131;width:26px;height:26px;font-size:1rem;font-weight:700;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .15s,color .15s,border-color .15s}.category-x-btn2[_ngcontent-%COMP%]:hover{background:#db3131;color:#fff;border-color:#db3131}.category-checkbox-wrap[_ngcontent-%COMP%]{width:26px;height:26px;position:relative;display:flex;align-items:center;justify-content:center}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;width:26px;height:26px;margin:0;cursor:pointer}.category-checkbox[_ngcontent-%COMP%]{width:22px;height:22px;border:2px solid var(--primary);border-radius:6px;background:#fff;position:relative;display:block;transition:background .15s,border-color .15s}.category-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:6px;top:3px;width:7px;height:12px;border:solid #fff;border-width:0 2.5px 2.5px 0;transform:rotate(45deg);opacity:0;transition:opacity .15s}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .category-checkbox[_ngcontent-%COMP%]{background:var(--primary);border-color:var(--primary)}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .category-checkbox[_ngcontent-%COMP%]:after{opacity:1}.category-actions-bottom[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:14px;margin:18px 0 10px;flex-wrap:wrap}.reset-categories-btn[_ngcontent-%COMP%]{margin:0;padding:8px 22px;border-radius:12px;border:none;background:#f2fcf7;color:var(--green);font-weight:800;font-size:.78rem;cursor:pointer;letter-spacing:.03em;box-shadow:0 1px 4px #00000014;transition:background .15s,color .15s}.reset-categories-btn[_ngcontent-%COMP%]:hover{background:#e7faee;color:var(--green-dark)}.toggle-categories-btn[_ngcontent-%COMP%]{margin:0;padding:8px 22px;border:none;border-radius:12px;background:#eef3fb;color:#194d9a;font-weight:700;font-size:.78rem;cursor:pointer;letter-spacing:.03em;box-shadow:0 1px 4px #00000014;transition:background .15s,color .15s}.toggle-categories-btn[_ngcontent-%COMP%]:hover{background:#dce9fa;color:#0f356b}.exercise-empty-info[_ngcontent-%COMP%]{font-size:.85rem;color:#6b88b7;text-align:center;background:#e9f3fc;border-radius:10px;padding:10px 8px}.more-btn[_ngcontent-%COMP%]{margin:6px auto 4px;background:#eef3fb;color:#1e3a8a;border:none;border-radius:8px;padding:6px 16px;font-size:.75rem;font-weight:700;cursor:pointer;letter-spacing:.04em;transition:background .15s,color .15s;display:inline-block}.more-btn[_ngcontent-%COMP%]:hover, .more-btn[_ngcontent-%COMP%]:focus{background:#dbe9fb;color:#0f2a63}.esercizi-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:1000}.esercizi-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:26px 22px 22px;box-shadow:0 8px 40px #0000003b;width:92vw;max-width:410px;position:relative}.esercizi-modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.image-upload-zone[_ngcontent-%COMP%]{display:flex;justify-content:center}.input-image-label[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;align-items:center}.input-image-label[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.icon-image-upload-big[_ngcontent-%COMP%]{width:180px;height:180px;display:flex;align-items:center;justify-content:center}.image-preview[_ngcontent-%COMP%]{width:172px;height:172px;border-radius:23px;object-fit:contain;background:#f7fbff;border:2.5px solid #b5d9f8}.field-label[_ngcontent-%COMP%]{font-weight:700;color:#22416f;font-size:.9rem;display:flex;flex-direction:column;gap:4px;position:relative}.field-label[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .field-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:4px;padding:9px 12px;border:1.6px solid #d2e3fa;border-radius:8px;font-size:.92rem;background:#f7fbff;color:#234169;outline:none;transition:border-color .15s,background-color .15s}.field-label[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .field-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:#f2f8ff}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}.modal-yes[_ngcontent-%COMP%], .modal-no[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;padding:7px 18px;border:none;border-radius:8px;cursor:pointer}.modal-yes[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.modal-yes[_ngcontent-%COMP%]:hover{background:#184a9b}.modal-no[_ngcontent-%COMP%]{background:#f2f2f2;color:#22416f}.modal-no[_ngcontent-%COMP%]:hover{background:#e4eaf3}.category-autocomplete-label[_ngcontent-%COMP%]{position:relative}.category-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:4px;display:flex;align-items:center;border:1.6px solid #d2e3fa;border-radius:8px;background:#f7fbff;transition:border-color .15s,background-color .15s}.category-input-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);background:#f2f8ff}.category-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;padding:9px 36px 9px 34px;font-size:.92rem;outline:none;font-weight:600;color:#234169}.search-icon[_ngcontent-%COMP%]{position:absolute;left:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:.9}.clear-cat-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:#eef3fb;color:#22416f;border:none;width:24px;height:24px;font-size:16px;line-height:1;border-radius:6px;cursor:pointer;padding:0;font-weight:700}.category-autocomplete-list[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:calc(100% + 4px);z-index:1100;background:#fff;border:1.3px solid #dbeafe;border-radius:8px;box-shadow:0 4px 18px #002e701a;list-style:none;padding:4px 0;margin:0;max-height:220px;overflow-y:auto;animation:_ngcontent-%COMP%_fadeIn .15s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 14px;font-size:.88rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:6px;color:#173a62;transition:background .13s,color .13s;position:relative}.category-autocomplete-list[_ngcontent-%COMP%]   li.highlighted[_ngcontent-%COMP%], .category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#e6f1fe;color:#0f2f59}.category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.no-suggestions):not(.create-suggestion):before{content:"\\1f50d";font-size:.75rem;opacity:.65}.no-suggestions[_ngcontent-%COMP%]{font-style:italic;color:#5b6e83;justify-content:space-between}.create-suggestion[_ngcontent-%COMP%]{background:#f7fbff;justify-content:center}.inline-create-btn[_ngcontent-%COMP%]{background:#2563eb;border:none;color:#fff;padding:4px 10px;font-size:.7rem;font-weight:700;border-radius:14px;cursor:pointer;letter-spacing:.03em;transition:background .15s}.inline-create-btn[_ngcontent-%COMP%]:hover{background:#184a9b}.inline-create-btn[_ngcontent-%COMP%]:disabled{background:#9db8df;cursor:not-allowed}.grid-modal-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:12px}.grid-modal-title[_ngcontent-%COMP%]{font-size:1.12rem;font-weight:700;color:#163a5d;margin:0;display:flex;align-items:center;gap:12px}.grid-filter-tag[_ngcontent-%COMP%]{font-size:.66rem;font-weight:700;background:#e4f1ff;color:#2563eb;padding:3px 8px;border-radius:999px;letter-spacing:.04em}.grid-close-btn[_ngcontent-%COMP%]{background:#eef3fb;border:none;width:30px;height:30px;border-radius:8px;font-size:1.15rem;font-weight:700;color:#1e3962;cursor:pointer;transition:background .15s,color .15s;line-height:1}.grid-close-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.modal-search-inline[_ngcontent-%COMP%]{margin-bottom:6px}.exercise-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:12px 12px;margin-top:4px}.exercise-grid-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2ecf5;border-radius:12px;padding:8px 8px 9px;display:flex;flex-direction:column;align-items:center;gap:5px;position:relative;box-shadow:0 2px 10px #d6e5f826;transition:box-shadow .15s,transform .15s;min-height:135px}.exercise-grid-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #c6d9f84b;transform:translateY(-2px)}.grid-img[_ngcontent-%COMP%]{width:54px;height:54px;border-radius:10px;background:#f2f7fb;display:flex;align-items:center;justify-content:center;overflow:hidden}.grid-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:50px;max-height:50px;object-fit:contain;display:block}.grid-placeholder[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center}.grid-info[_ngcontent-%COMP%]{width:100%;text-align:center;display:flex;flex-direction:column;gap:0;min-height:32px}.grid-name[_ngcontent-%COMP%]{font-size:.62rem;font-weight:700;color:#163a5d;word-break:break-word;line-height:1.08;max-width:100%}.grid-cat[_ngcontent-%COMP%]{font-size:.5rem;font-weight:600;letter-spacing:.05em;color:#2563eb;opacity:.78}.grid-detail-link[_ngcontent-%COMP%]{margin-top:auto;font-size:.52rem;font-weight:700;background:var(--primary);color:#fff;padding:4px 10px 3px;border-radius:5px;text-decoration:none;letter-spacing:.04em;box-shadow:0 1px 3px #2563eb59;transition:background .15s;align-self:flex-end}.grid-detail-link[_ngcontent-%COMP%]:hover{background:#18397a}.categorie-grid-modal[_ngcontent-%COMP%]{max-width:880px;width:94vw;padding:24px 24px 30px;position:relative}.category-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(115px,1fr));gap:12px 12px;margin-top:4px}.category-grid-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e1ebf3;border-radius:12px;padding:8px 8px 10px;display:flex;flex-direction:column;align-items:center;gap:5px;position:relative;box-shadow:0 2px 10px #d6e5f826;transition:box-shadow .15s,transform .15s;min-height:132px}.category-grid-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #c6d9f84b;transform:translateY(-2px)}.grid-cat-img[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:10px;background:#f2fbf4;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.grid-cat-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:48px;max-height:48px;object-fit:contain;display:block}.grid-cat-placeholder[_ngcontent-%COMP%]{width:34px;height:34px;display:flex;align-items:center;justify-content:center}.grid-cat-edit-btn[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]{position:absolute;bottom:6px;right:6px;width:26px;height:26px;padding:2px;border-radius:50%;border:1px solid #cfe0fb;background:#eaf2ff;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:background .15s,border-color .15s,transform .12s,box-shadow .15s}.grid-cat-edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.grid-cat-edit-btn[_ngcontent-%COMP%]:hover, .category-edit-img-btn[_ngcontent-%COMP%]:hover{background:#2563eb;border-color:#1f56c7;transform:translateY(-1px);box-shadow:0 2px 8px #2563eb59}.grid-cat-edit-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#fff}.grid-cat-info[_ngcontent-%COMP%]{width:100%;text-align:center;display:flex;flex-direction:column;gap:0;min-height:28px}.grid-cat-name[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#163a5d;word-break:break-word;line-height:1.08}.grid-cat-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:auto}.grid-cat-delete-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4d1d1;color:#db3131;width:20px;height:20px;border-radius:50%;font-size:.7rem;font-weight:700;cursor:pointer;transition:background .15s,color .15s,border-color .15s;line-height:1;display:flex;align-items:center;justify-content:center}.grid-cat-delete-btn[_ngcontent-%COMP%]:hover{background:#db3131;color:#fff;border-color:#db3131}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]{width:18px;height:18px;position:relative;display:flex;align-items:center;justify-content:center}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;inset:0;cursor:pointer;margin:0}.grid-cat-checkbox[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #2563eb;border-radius:4px;background:#fff;position:relative;display:block;transition:background .15s,border-color .15s}.grid-cat-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:4px;top:2px;width:4px;height:7px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg);opacity:0;transition:opacity .15s}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .grid-cat-checkbox[_ngcontent-%COMP%]{background:#2563eb;border-color:#2563eb}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .grid-cat-checkbox[_ngcontent-%COMP%]:after{opacity:1}.grid-empty[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;font-size:.72rem;font-weight:600;color:#5c6b80;background:#f1f6fb;border:1px dashed #d2e2f1;padding:14px 12px;border-radius:12px}@media (max-width: 1050px){.esercizi-layout[_ngcontent-%COMP%]{flex-direction:column;gap:32px;padding:24px 8px 44px;max-width:97vw}.esercizi-card[_ngcontent-%COMP%], .categorie-card[_ngcontent-%COMP%]{min-width:0;max-width:100%}.card-item[_ngcontent-%COMP%]{width:88%;max-width:88%}}@media (max-width: 660px){.card-item[_ngcontent-%COMP%]{width:94%!important;max-width:94%!important}}@media (max-width: 620px){.exercise-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:10px 10px}.grid-img[_ngcontent-%COMP%]{width:50px;height:50px}.grid-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:46px;max-height:46px}.category-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:10px 10px}.grid-cat-img[_ngcontent-%COMP%]{width:48px;height:48px}.grid-cat-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:44px;max-height:44px}}@media (max-width: 500px){.card-img-wrap[_ngcontent-%COMP%]{width:64px;height:64px}.card-img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:58px;max-height:58px}.exercise-detail-btn[_ngcontent-%COMP%]{font-size:.68rem;padding:5px 12px;bottom:10px;right:10px}.icon-image-upload-big[_ngcontent-%COMP%]{width:140px;height:140px}.image-preview[_ngcontent-%COMP%]{width:132px;height:132px}}.single-autocat-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:4px;display:flex;align-items:center}.single-autocat-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;border:1.7px solid #d2e3fa;border-radius:8px;padding:10px 34px 10px 15px;font-size:.96rem;background:#f7fbff;color:#2563eb;font-weight:700;outline:none;transition:border-color .17s,background .15s,color .15s}.single-autocat-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#2563eb;background:#f2f8ff}.single-autocat-wrapper[_ngcontent-%COMP%]   input.auto-matched[_ngcontent-%COMP%]{color:#1b533e;background:#e6f9f0}.clear-cat-btn[_ngcontent-%COMP%]{position:absolute;right:7px;top:50%;transform:translateY(-50%);background:#eef3fb;color:#22416f;border:none;width:24px;height:24px;font-size:16px;line-height:1;border-radius:6px;cursor:pointer;padding:0;font-weight:700;transition:background .15s,color .15s}.clear-cat-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}']});let n=e;return n})();var dse=n=>({active:n}),fse=(n,e)=>({active:n,inactive:e}),hse=n=>["/anagrafica",n];function pse(n,e){if(n&1&&ht(0,"img",42),n&2){let t=ee().$implicit;ae("src",t.avatarUrl,ur)("alt",t.name)}}function gse(n,e){n&1&&(b(0,"span",43),j(1,"person"),A())}function mse(n,e){if(n&1&&(b(0,"tr")(1,"td",27)(2,"div",28)(3,"div",29),Qe(4,pse,1,2,"img",30)(5,gse,2,0,"ng-template",null,0,ao),A(),b(7,"div",31)(8,"div",32),j(9),A()()()(),b(10,"td",33)(11,"span",34)(12,"span",35),j(13,"event"),A(),j(14),A()(),b(15,"td",36)(16,"span",37),j(17),A()(),b(18,"td",38)(19,"div",39)(20,"span",40),j(21),A()()(),b(22,"td")(23,"a",41)(24,"span",12),j(25,"visibility"),A()()()()),n&2){let t=e.$implicit,r=yi(6);H(4),ae("ngIf",t.avatarUrl)("ngIfElse",r),H(5),ft(t.name),H(5),Dr(" ",t.signupDate," "),H(3),ft(t.email),H(3),ae("ngClass",Cv(10,fse,t.status==="Attivo",t.status!=="Attivo")),H(),ft(t.status),H(2),Ta("aria-label",Gc("Dettaglio ",t.name)),ae("routerLink",Wc(13,hse,t.id))}}function vse(n,e){if(n&1){let t=_t();b(0,"aside",44)(1,"div",45),j(2,"Filtri"),A(),b(3,"label",46)(4,"span",47),j(5,"Stato"),A(),b(6,"select",48),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.filterStatus,i)||(o.filterStatus=i),ge(i)}),Se("change",function(){pe(t);let i=ee();return ge(i.applyFilters())}),b(7,"option",49),j(8,"Tutti"),A(),b(9,"option",50),j(10,"Attivo"),A(),b(11,"option",51),j(12,"Inattivo"),A()()(),b(13,"label",46)(14,"span",47),j(15,"Email"),A(),b(16,"select",48),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.filterHasEmail,i)||(o.filterHasEmail=i),ge(i)}),Se("change",function(){pe(t);let i=ee();return ge(i.applyFilters())}),b(17,"option",49),j(18,"Tutte"),A(),b(19,"option",52),j(20,"Solo con email"),A(),b(21,"option",53),j(22,"Solo senza email"),A()()(),b(23,"label",46)(24,"span",47),j(25,"Tessera"),A(),b(26,"select",54),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.filterTessera,i)||(o.filterTessera=i),ge(i)}),Se("change",function(){pe(t);let i=ee();return ge(i.applyFilters())}),b(27,"option",49),j(28,"Tutte"),A(),b(29,"option",55),j(30,"Attive"),A(),b(31,"option",56),j(32,"Scadute"),A()()()()}if(n&2){let t=ee();H(6),it("ngModel",t.filterStatus),H(10),it("ngModel",t.filterHasEmail),H(10),it("ngModel",t.filterTessera)}}function _se(n,e){if(n&1){let t=_t();b(0,"div",57),Se("click",function(){pe(t);let i=ee();return ge(i.closeModal())}),A()}}function yse(n,e){if(n&1&&(ri(0),ht(1,"img",85),ii()),n&2){let t=ee(2);H(),ae("src",t.form.avatar,ur)}}function wse(n,e){if(n&1){let t=_t();b(0,"button",86),Se("click",function(){pe(t),ee();let i=yi(8),o=ee();return ge(o.triggerAvatarInput(i))}),b(1,"span",87),j(2,"photo_camera"),A()()}}function bse(n,e){n&1&&(b(0,"div",88),j(1," Caricamento immagine in corso... "),A())}function xse(n,e){if(n&1){let t=_t();b(0,"div",58)(1,"form",59,1),Se("ngSubmit",function(){pe(t);let i=ee();return ge(i.registerUser())})("click",function(i){return pe(t),ge(i.stopPropagation())}),b(3,"h2"),j(4,"Registra Cliente"),A(),b(5,"div",60)(6,"div",61)(7,"input",62,2),Se("change",function(i){pe(t);let o=ee();return ge(o.onAvatarChange(i))}),A(),Qe(9,yse,2,1,"ng-container",63)(10,wse,3,0,"ng-template",null,3,ao),A(),Qe(12,bse,2,0,"div",64),A(),b(13,"div",65)(14,"div",66)(15,"div",67)(16,"label",68),j(17,"Nome"),A(),b(18,"input",69),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.form.nome,i)||(o.form.nome=i),ge(i)}),A()(),b(19,"div",67)(20,"label",68),j(21,"Cognome"),A(),b(22,"input",70),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.form.cognome,i)||(o.form.cognome=i),ge(i)}),A()()(),b(23,"div",66)(24,"div",67)(25,"label",68),j(26,"Email"),A(),b(27,"input",71),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.form.emailModal,i)||(o.form.emailModal=i),ge(i)}),A()(),b(28,"div",67)(29,"label",68),j(30,"Numero di Telefono"),A(),b(31,"input",72),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.form.phone,i)||(o.form.phone=i),ge(i)}),A()()(),b(32,"div",66)(33,"div",67)(34,"label",73)(35,"span",35),j(36,"event"),A(),j(37," Data Iscrizione "),A(),b(38,"input",74),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.form.signupDateModal,i)||(o.form.signupDateModal=i),ge(i)}),A()(),b(39,"div",75)(40,"label",76),j(41,"-"),A(),b(42,"div",77)(43,"label",78)(44,"input",79),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.form.isActive,i)||(o.form.isActive=i),ge(i)}),A(),ht(45,"span",80),A(),b(46,"span",81),j(47),A()()()()(),b(48,"div",82)(49,"button",83),Se("click",function(){pe(t);let i=ee();return ge(i.closeModal())}),j(50,"Annulla"),A(),b(51,"button",84),j(52,"Registra Cliente"),A()()()()}if(n&2){let t=yi(2),r=yi(11),i=ee();H(9),ae("ngIf",i.form.avatar)("ngIfElse",r),H(3),ae("ngIf",i.avatarLoading),H(6),it("ngModel",i.form.nome),H(4),it("ngModel",i.form.cognome),H(5),it("ngModel",i.form.emailModal),H(4),it("ngModel",i.form.phone),H(7),it("ngModel",i.form.signupDateModal),H(6),it("ngModel",i.form.isActive),H(2),so("active",i.form.isActive)("inactive",!i.form.isActive),H(),Dr(" ",i.form.isActive?"Attivo":"Inattivo"," "),H(4),ae("disabled",t.invalid||i.avatarLoading)}}var _9=(()=>{let e=class e{constructor(r,i){this.userService=r,this.imageService=i,this.searchTerm="",this.showFilters=!1,this.filterStatus="",this.filterHasEmail="",this.filterTessera="",this.users=[],this.filteredUsers=[],this.modalOpen=!1,this.today=new Date().toISOString().slice(0,10),this.form={avatar:"",avatarFile:null,nome:"",cognome:"",emailModal:"",phone:"",signupDateModal:"",isActive:!0},this.avatarLoading=!1}ngOnInit(){this.usersSub=this.userService.getAll$().subscribe(r=>{this.users=r||[],this.applyFilters()})}ngOnDestroy(){this.usersSub?.unsubscribe()}openModal(){this.modalOpen=!0,this.form={avatar:"",avatarFile:null,nome:"",cognome:"",emailModal:"",phone:"",signupDateModal:"",isActive:!0}}closeModal(){this.modalOpen=!1}onSearchChange(){this.applyFilters()}toggleFilters(){this.showFilters=!this.showFilters}matchesSearch(r,i){if(!i)return!0;let o=i.toLowerCase();return r.name?.toLowerCase().includes(o)||r.email?.toLowerCase().includes(o)||!1}hasEmail(r){return!!(r.email&&r.email.trim()!=="")}getTesseraFine(r){let i=(r.subscriptionEnd||r.tesseraEnd||"").trim();return i.length===10?i:""}applyFilters(){let r=[...this.users];this.searchTerm&&(r=r.filter(i=>this.matchesSearch(i,this.searchTerm))),this.filterStatus&&(r=r.filter(i=>i.status===this.filterStatus)),this.filterHasEmail==="with"?r=r.filter(i=>this.hasEmail(i)):this.filterHasEmail==="without"&&(r=r.filter(i=>!this.hasEmail(i))),this.filterTessera==="attiva"?r=r.filter(i=>{let o=this.getTesseraFine(i);return o!==""&&o>this.today}):this.filterTessera==="scaduta"&&(r=r.filter(i=>{let o=this.getTesseraFine(i);return o!==""&&o<=this.today})),this.filteredUsers=r}onAvatarChange(r){return te(this,null,function*(){let i=r.target.files?.[0];i&&(this.avatarLoading=!0,this.form.avatarFile=i,this.form.avatar=yield this.imageService.compressAndConvertToBase64(i,1e3,256),this.avatarLoading=!1)})}triggerAvatarInput(r){r.click()}registerUser(){return te(this,null,function*(){this.avatarLoading=!0;let r=this.form.isActive?"Attivo":"Inattivo",i={name:`${this.form.nome} ${this.form.cognome}`.trim(),email:this.form.emailModal,phone:this.form.phone,signupDate:this.form.signupDateModal||new Date().toISOString().slice(0,10),avatarUrl:this.form.avatar,status:r,cards:[]};try{yield this.userService.add(i),this.avatarLoading=!1,this.closeModal(),this.applyFilters()}catch(o){this.avatarLoading=!1,alert("Errore nel salvataggio: "+(o?.message||o))}})}};e.\u0275fac=function(i){return new(i||e)(tt(Em),tt(Im))},e.\u0275cmp=Kn({type:e,selectors:[["app-anagrafica"]],standalone:!1,decls:40,vars:12,consts:[["defaultAvatarRow",""],["modalForm","ngForm"],["avatarInput",""],["showIcon",""],[1,"anagrafica-utenti-layout"],[1,"anagrafica-content","align-left"],[1,"actions-header","responsive-header"],[1,"btn","primary",3,"click"],[1,"header-controls"],[1,"searchbar"],["type","text","placeholder","Cerca...",3,"ngModelChange","input","ngModel"],["title","Cerca",1,"icon-btn",3,"click"],[1,"material-icons"],["title","Filtri",1,"icon-btn",3,"click","ngClass","aria-expanded"],[1,"list-layout"],[1,"list-main"],[1,"table-outer-center"],[1,"user-table"],[2,"width","30%"],[2,"width","16%"],[2,"width","13%"],[2,"width","12%"],[1,"align-left"],[4,"ngFor","ngForOf"],["class","filters-aside",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-nuovo-utente",4,"ngIf"],[1,"user-cell"],[1,"user-card-row"],[1,"user-avatar"],["class","avatar-img",3,"src","alt",4,"ngIf","ngIfElse"],[1,"user-info-main"],[1,"user-name"],[1,"user-signup"],[1,"user-date"],[1,"material-icons","calendar-icon"],[1,"user-email-table"],[1,"user-email"],[1,"user-status-actions"],[1,"status-action-flex","left-align"],[1,"status-label",3,"ngClass"],["title","Dettaglio",1,"icon-btn",3,"aria-label","routerLink"],[1,"avatar-img",3,"src","alt"],[1,"avatar-placeholder","material-icons"],[1,"filters-aside"],[1,"filters-title"],[1,"filter-group"],[1,"filter-label"],[3,"ngModelChange","change","ngModel"],["value",""],["value","Attivo"],["value","Inattivo"],["value","with"],["value","without"],[1,"tessera-select",3,"ngModelChange","change","ngModel"],["value","attiva"],["value","scaduta"],[1,"modal-backdrop",3,"click"],[1,"modal-nuovo-utente"],[1,"modal-form",3,"ngSubmit","click"],[1,"avatar-modal-section"],[1,"avatar-upload-box"],["type","file","accept","image/*","hidden","",3,"change"],[4,"ngIf","ngIfElse"],["class","avatar-loader","style","margin-left:15px;color:#888;",4,"ngIf"],[1,"modal-fields","modal-fields-2col"],[1,"modal-form-row"],[1,"form-group"],[1,"field-label"],["type","text","placeholder","Nome","name","nome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Cognome","name","cognome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","emailModal","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Numero di Telefono","name","phone",3,"ngModelChange","ngModel"],[1,"field-label","flex-label","calendar-label"],["type","date","name","signupDateModal",3,"ngModelChange","ngModel"],[1,"form-group","form-group-switch"],[1,"field-label",2,"opacity","0","user-select","none"],[1,"modal-stato-switch"],[1,"switch"],["type","checkbox","name","isActive",3,"ngModelChange","ngModel"],[1,"slider"],[1,"modal-stato"],[1,"modal-actions"],["type","button",1,"btn","cancel",3,"click"],["type","submit",1,"btn","primary",3,"disabled"],["alt","Avatar",1,"avatar-img-preview",3,"src"],["type","button",1,"avatar-add-btn",3,"click"],[1,"material-icons","avatar-add"],[1,"avatar-loader",2,"margin-left","15px","color","#888"]],template:function(i,o){i&1&&(b(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),Se("click",function(){return o.openModal()}),j(4,"Cliente"),A(),b(5,"div",8)(6,"div",9)(7,"input",10),ot("ngModelChange",function(a){return st(o.searchTerm,a)||(o.searchTerm=a),a}),Se("input",function(){return o.onSearchChange()}),A(),b(8,"button",11),Se("click",function(){return o.onSearchChange()}),b(9,"span",12),j(10,"search"),A()(),b(11,"button",13),Se("click",function(){return o.toggleFilters()}),b(12,"span",12),j(13,"filter_list"),A()()()()(),b(14,"div",14)(15,"div",15)(16,"div",16)(17,"table",17)(18,"colgroup"),ht(19,"col",18)(20,"col",19)(21,"col",19)(22,"col",20)(23,"col",21),A(),b(24,"thead")(25,"tr")(26,"th",22),j(27,"Cliente"),A(),b(28,"th",22),j(29,"Data Iscrizione"),A(),b(30,"th",22),j(31,"Email"),A(),b(32,"th",22),j(33,"Stato"),A(),ht(34,"th"),A()(),b(35,"tbody"),Qe(36,mse,26,15,"tr",23),A()()()(),Qe(37,vse,33,3,"aside",24),A(),Qe(38,_se,1,0,"div",25)(39,xse,53,15,"div",26),A()()),i&2&&(H(7),it("ngModel",o.searchTerm),H(4),Ta("aria-expanded",Yf(o.showFilters)),ae("ngClass",Wc(10,dse,o.showFilters)),H(3),so("has-filters",o.showFilters),H(22),ae("ngForOf",o.filteredUsers),H(),ae("ngIf",o.showFilters),H(),ae("ngIf",o.modalOpen),H(),ae("ngIf",o.modalOpen))},dependencies:[Qf,Gi,Fi,fg,Zc,Xc,Co,J5,Ma,vs,dg,Xf,Qo,Zf,Na],styles:['[_ngcontent-%COMP%]:root{--primary: #2563eb;--primary-hover: #194fd6;--bg: #f5f8fc;--panel-bg: #ffffff;--panel-shadow: 0 2px 12px rgba(36,80,144,.06);--radius: 10px;--text: #143559}.anagrafica-utenti-layout[_ngcontent-%COMP%]{background:#f6f8fa;min-height:100vh;font-family:Segoe UI,Arial,sans-serif;width:100%;box-sizing:border-box}.anagrafica-content.align-left[_ngcontent-%COMP%]{max-width:1200px;margin:36px auto 40px;padding:0 24px}.actions-header.responsive-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;align-items:center;gap:18px;margin-bottom:18px}.header-controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:18px}.searchbar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f8fafd;border-radius:9px;padding:6px 10px;gap:4px;min-width:220px;max-width:360px;width:100%;height:38px;box-shadow:0 0 4px #365fd014;border:1px solid #dae2ec;transition:border-color .18s,box-shadow .18s}.searchbar[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);box-shadow:0 0 0 3px #2563eb1c}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;font-size:.92rem;font-weight:500;padding:4px 6px 4px 2px;width:100%;color:#242f42}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:6px 7px;border-radius:8px;transition:background .13s;display:flex;align-items:center;margin-left:0}.icon-btn[_ngcontent-%COMP%]:hover, .icon-btn[_ngcontent-%COMP%]:focus{background:#eaeef6}.icon-btn.active[_ngcontent-%COMP%], .icon-btn[aria-expanded=true][_ngcontent-%COMP%]{background:#e8f0ff}.material-icons[_ngcontent-%COMP%], .icon-font[_ngcontent-%COMP%]{font-family:Material Icons,Segoe UI Symbol,Arial,sans-serif;font-style:normal;font-weight:400;font-size:22px;display:inline-block;line-height:1;color:var(--primary);vertical-align:middle;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.list-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:18px;align-items:start}.list-layout.has-filters[_ngcontent-%COMP%]{grid-template-columns:1fr 260px}.filters-aside[_ngcontent-%COMP%]{align-self:start;background:transparent;border:none;box-shadow:none;padding:4px 0;display:flex;flex-direction:column;gap:12px}.filters-title[_ngcontent-%COMP%]{font-weight:700;color:#143559;margin-bottom:2px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.filter-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#345;letter-spacing:.02em}.filters-aside[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:36px;line-height:36px;padding:0 12px;border-radius:8px;border:1px solid #ccdaeb;background:#fff;color:#132a4a;font-weight:600;font-size:.95rem;outline:none;transition:border-color .18s,box-shadow .18s}.filters-aside[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #2563eb26}.tessera-select[_ngcontent-%COMP%]   option[value=attiva][_ngcontent-%COMP%]{color:#318b2b}.tessera-select[_ngcontent-%COMP%]   option[value=scaduta][_ngcontent-%COMP%]{color:#d32f2f}.table-outer-center[_ngcontent-%COMP%]{display:block}.user-table[_ngcontent-%COMP%]{background:#fff;box-shadow:0 5px 35px #d3dbe925;border-spacing:0;border-radius:13px;width:100%;table-layout:fixed;overflow:hidden}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px;font-size:.95rem;background:#fff;vertical-align:middle;word-break:break-word;text-align:left;height:52px}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fbfc;font-weight:700;color:#232e47;border-bottom:2px solid #ececf0}.user-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f1f2f7}.user-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.user-cell[_ngcontent-%COMP%]{vertical-align:middle;padding-top:6px;padding-bottom:6px}.user-card-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;min-height:41px}.user-avatar[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center}.avatar-img[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:41px;height:41px;border-radius:12px;background:#dbe3ef;display:flex;align-items:center;justify-content:center;font-size:22px;color:#b4bed0;object-fit:cover}.user-info-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;min-width:0;width:100%}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#143559;font-size:1.06rem;line-height:1.15}.user-date[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--primary);font-size:.83rem;gap:6px;font-weight:600}.calendar-icon[_ngcontent-%COMP%]{font-size:18px;color:#2177e8}.user-email[_ngcontent-%COMP%]{color:#5f6c7e;font-size:.83rem;word-break:break-all}.user-status-actions[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.status-action-flex.left-align[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.status-label[_ngcontent-%COMP%]{font-weight:600;border-radius:7px;padding:6px 16px;font-size:.83rem;min-width:72px;text-align:center}.status-label.active[_ngcontent-%COMP%]{color:#14b452;background:#e8faee}.status-label.inactive[_ngcontent-%COMP%]{color:#e76c6c;background:#fde8e8}a.icon-btn[_ngcontent-%COMP%]{text-decoration:none!important}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:1010;inset:0;background:#17334b33}.modal-nuovo-utente[_ngcontent-%COMP%]{position:fixed;z-index:1020;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:20px;box-shadow:0 6px 32px #21407a33,0 1.5px 3px #21407a29;min-width:380px;max-width:520px;width:96vw;padding:26px 20px 18px;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalpop .18s cubic-bezier(.32,1.56,.66,1)}.modal-form[_ngcontent-%COMP%]{width:100%}.modal-nuovo-utente[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;color:#232e47;margin:0 0 18px;text-align:center}.avatar-modal-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:18px;margin-top:4px}.avatar-upload-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.avatar-add-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0}.avatar-add[_ngcontent-%COMP%]{font-size:34px}.avatar-img-preview[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;object-fit:cover;display:block}.modal-fields-2col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:100%}.modal-form-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:28px;width:100%;margin-bottom:22px}.form-group[_ngcontent-%COMP%]{flex:1 0 0;min-width:0;display:flex;flex-direction:column}.form-group-switch[_ngcontent-%COMP%]{justify-content:flex-end;align-items:flex-end}.modal-fields-2col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-fields-2col[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.9rem;border-radius:7px;border:1.4px solid #d6d9e0;padding:10px 9px;outline:none;background:#f8fafc;color:#223555;transition:border-color .15s,background-color .15s;width:100%}.modal-fields-2col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-fields-2col[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:#f2f7ff}.field-label[_ngcontent-%COMP%]{font-size:.83rem;font-weight:600;color:#1e2a3e;margin:4px 0 6px 1px;letter-spacing:.02em;text-transform:uppercase}.flex-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.modal-stato-switch[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.modal-stato[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:#21af5a;min-width:55px;text-align:right}.modal-stato.inactive[_ngcontent-%COMP%]{color:#e36e6e}.switch[_ngcontent-%COMP%]{display:inline-block;width:48px;height:26px;position:relative}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;inset:0;background:#e4e9f1;border-radius:26px;transition:.2s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#22c55e}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:4px;bottom:3px;border-radius:50%;background:#fff;box-shadow:0 1px 4px #6366f13a;transition:.19s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(20px)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:4px}.btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 15px;border-radius:9px;font-size:.85rem;font-weight:600;cursor:pointer;transition:background .16s}.btn[_ngcontent-%COMP%]:hover{background:var(--primary-hover)}.btn.cancel[_ngcontent-%COMP%]{background:#eef3fb;color:#1e3a8a}.btn.cancel[_ngcontent-%COMP%]:hover{background:#e1ebfb}@keyframes _ngcontent-%COMP%_modalpop{0%{transform:translate(-50%,-53%) scale(.97)}to{transform:translate(-50%,-50%) scale(1)}}@media (max-width: 980px){.list-layout.has-filters[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-aside[_ngcontent-%COMP%]{order:-1}}@media (max-width: 600px){.searchbar[_ngcontent-%COMP%]{max-width:100%}.modal-nuovo-utente[_ngcontent-%COMP%]{min-width:300px}}@media (max-width: 420px){.searchbar[_ngcontent-%COMP%]{min-width:100%;height:36px}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:.84rem}.icon-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}}']});let n=e;return n})();var Cse=n=>["/anagrafica",n];function Ese(n,e){if(n&1&&(b(0,"div",3)(1,"div",4)(2,"div",5),j(3),A(),b(4,"div",6),j(5),A()(),b(6,"div",7)(7,"a",8),j(8,"Dettaglio"),A()()()),n&2){let t=e.$implicit;H(3),ft(t.name),H(2),ft(t.email),H(2),ae("routerLink",Wc(3,Cse,t.id))}}var y9=(()=>{let e=class e{constructor(r){this.userService=r,this.users=[],this.filteredUsers=[]}ngOnInit(){return te(this,null,function*(){let r=yield this.userService.getAll();this.users=r,this.filteredUsers=[...this.users]})}};e.\u0275fac=function(i){return new(i||e)(tt(Em))},e.\u0275cmp=Kn({type:e,selectors:[["app-anagrafica-list"]],standalone:!1,decls:5,vars:1,consts:[[1,"page","anagrafica-list"],[1,"list"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"left"],[1,"name"],[1,"email"],[1,"actions"],[1,"btn","small",3,"routerLink"]],template:function(i,o){i&1&&(b(0,"div",0)(1,"h2"),j(2,"Lista Utenti"),A(),b(3,"div",1),Qe(4,Ese,9,5,"div",2),A()()),i&2&&(H(4),ae("ngForOf",o.filteredUsers))},dependencies:[Gi,Na],styles:[".anagrafica-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin-top:12px}.anagrafica-list[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;padding:12px;border-radius:8px;margin-bottom:10px}.anagrafica-list[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600}.anagrafica-list[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--muted);font-size:13px}.btn.small[_ngcontent-%COMP%]{padding:6px 8px}.anagrafica-list[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400;font-size:15px}.anagrafica-list[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .anagrafica-list[_ngcontent-%COMP%]   select.tessera-combo[_ngcontent-%COMP%]{accent-color:#1742b0;margin-right:6px;margin-left:3px;vertical-align:middle}.anagrafica-list[_ngcontent-%COMP%]   .tessera-combo[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #b9c4d4;padding:5px 9px;font-size:15px;background:#fff;color:#1742b0;font-weight:500;min-width:75px;margin-left:8px;margin-right:6px;vertical-align:middle}.anagrafica-list[_ngcontent-%COMP%]   .filter-bar[_ngcontent-%COMP%]{display:flex;gap:18px;align-items:center;margin-bottom:15px}.anagrafica-list[_ngcontent-%COMP%]   .filter-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}"]});let n=e;return n})();function Un(n){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(n)}var yc=Uint8Array,ea=Uint16Array,jP=Int32Array,BP=new yc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),UP=new yc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w9=new yc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E9=function(n,e){for(var t=new ea(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new jP(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},I9=E9(BP,2),Ise=I9.b,FP=I9.r;Ise[28]=258,FP[258]=28;var S9=E9(UP,0),tRe=S9.b,b9=S9.r,LP=new ea(32768);for(Fn=0;Fn<32768;++Fn)vu=(Fn&43690)>>1|(Fn&21845)<<1,vu=(vu&52428)>>2|(vu&13107)<<2,vu=(vu&61680)>>4|(vu&3855)<<4,LP[Fn]=((vu&65280)>>8|(vu&255)<<8)>>1;var vu,Fn,dy=function(n,e,t){for(var r=n.length,i=0,o=new ea(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new ea(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new ea(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],u=e-n[i],h=s[n[i]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)a[LP[h]>>c]=l}else for(a=new ea(r),i=0;i<r;++i)n[i]&&(a[i]=LP[s[n[i]-1]++]>>15-n[i]);return a},Ph=new yc(288);for(Fn=0;Fn<144;++Fn)Ph[Fn]=8;var Fn;for(Fn=144;Fn<256;++Fn)Ph[Fn]=9;var Fn;for(Fn=256;Fn<280;++Fn)Ph[Fn]=7;var Fn;for(Fn=280;Fn<288;++Fn)Ph[Fn]=8;var Fn,_C=new yc(32);for(Fn=0;Fn<32;++Fn)_C[Fn]=5;var Fn,Sse=dy(Ph,9,0);var Ase=dy(_C,5,0);var A9=function(n){return(n+7)/8|0},Dse=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new yc(n.subarray(e,t))};var _u=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},ly=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},OP=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:T9,l:0};if(i==1){var s=new yc(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(oe,he){return oe.f-he.f}),t.push({s:-1,f:25001});var a=t[0],c=t[1],l=0,u=1,h=2;for(t[0]={s:-1,f:a.f+c.f,l:a,r:c};u!=i-1;)a=t[t[l].f<t[h].f?l++:h++],c=t[l!=u&&t[l].f<t[h].f?l++:h++],t[u++]={s:-1,f:a.f+c.f,l:a,r:c};for(var m=o[0].s,r=1;r<i;++r)o[r].s>m&&(m=o[r].s);var g=new ea(m+1),x=VP(t[u-1],g,0);if(x>e){var r=0,I=0,M=x-e,P=1<<M;for(o.sort(function(he,q){return g[q.s]-g[he.s]||he.f-q.f});r<i;++r){var Y=o[r].s;if(g[Y]>e)I+=P-(1<<x-g[Y]),g[Y]=e;else break}for(I>>=M;I>0;){var B=o[r].s;g[B]<e?I-=1<<e-g[B]++-1:++r}for(;r>=0&&I;--r){var K=o[r].s;g[K]==e&&(--g[K],++I)}x=e}return{t:new yc(g),l:x}},VP=function(n,e,t){return n.s==-1?Math.max(VP(n.l,e,t+1),VP(n.r,e,t+1)):e[n.s]=t},x9=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ea(++e),r=0,i=n[0],o=1,s=function(c){t[r++]=c},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},uy=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},D9=function(n,e,t){var r=t.length,i=A9(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},C9=function(n,e,t,r,i,o,s,a,c,l,u){_u(e,u++,t),++i[256];for(var h=OP(i,15),m=h.t,g=h.l,x=OP(o,15),I=x.t,M=x.l,P=x9(m),Y=P.c,B=P.n,K=x9(I),oe=K.c,he=K.n,q=new ea(19),N=0;N<Y.length;++N)++q[Y[N]&31];for(var N=0;N<oe.length;++N)++q[oe[N]&31];for(var S=OP(q,7),V=S.t,C=S.l,D=19;D>4&&!V[w9[D-1]];--D);var T=l+5<<3,ne=uy(i,Ph)+uy(o,_C)+s,be=uy(i,m)+uy(o,I)+s+14+3*D+uy(q,V)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&T<=ne&&T<=be)return D9(e,u,n.subarray(c,c+l));var Me,Ce,fe,De;if(_u(e,u,1+(be<ne)),u+=2,be<ne){Me=dy(m,g,0),Ce=m,fe=dy(I,M,0),De=I;var Be=dy(V,C,0);_u(e,u,B-257),_u(e,u+5,he-1),_u(e,u+10,D-4),u+=14;for(var N=0;N<D;++N)_u(e,u+3*N,V[w9[N]]);u+=3*D;for(var Fe=[Y,oe],O=0;O<2;++O)for(var W=Fe[O],N=0;N<W.length;++N){var J=W[N]&31;_u(e,u,Be[J]),u+=V[J],J>15&&(_u(e,u,W[N]>>5&127),u+=W[N]>>12)}}else Me=Sse,Ce=Ph,fe=Ase,De=_C;for(var N=0;N<a;++N){var ie=r[N];if(ie>255){var J=ie>>18&31;ly(e,u,Me[J+257]),u+=Ce[J+257],J>7&&(_u(e,u,ie>>23&31),u+=BP[J]);var ce=ie&31;ly(e,u,fe[ce]),u+=De[ce],ce>3&&(ly(e,u,ie>>5&8191),u+=UP[ce])}else ly(e,u,Me[ie]),u+=Ce[ie]}return ly(e,u,Me[256]),u+Ce[256]},Tse=new jP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),T9=new yc(0),Mse=function(n,e,t,r,i,o){var s=o.z||n.length,a=new yc(r+s+5*(1+Math.ceil(s/7e3))+i),c=a.subarray(r,a.length-i),l=o.l,u=(o.r||0)&7;if(e){u&&(c[0]=o.r>>3);for(var h=Tse[e-1],m=h>>13,g=h&8191,x=(1<<t)-1,I=o.p||new ea(32768),M=o.h||new ea(x+1),P=Math.ceil(t/3),Y=2*P,B=function(ct){return(n[ct]^n[ct+1]<<P^n[ct+2]<<Y)&x},K=new jP(25e3),oe=new ea(288),he=new ea(32),q=0,N=0,S=o.i||0,V=0,C=o.w||0,D=0;S+2<s;++S){var T=B(S),ne=S&32767,be=M[T];if(I[ne]=be,M[T]=ne,C<=S){var Me=s-S;if((q>7e3||V>24576)&&(Me>423||!l)){u=C9(n,c,0,K,oe,he,N,V,D,S-D,u),V=q=N=0,D=S;for(var Ce=0;Ce<286;++Ce)oe[Ce]=0;for(var Ce=0;Ce<30;++Ce)he[Ce]=0}var fe=2,De=0,Be=g,Fe=ne-be&32767;if(Me>2&&T==B(S-Fe))for(var O=Math.min(m,Me)-1,W=Math.min(32767,S),J=Math.min(258,Me);Fe<=W&&--Be&&ne!=be;){if(n[S+fe]==n[S+fe-Fe]){for(var ie=0;ie<J&&n[S+ie]==n[S+ie-Fe];++ie);if(ie>fe){if(fe=ie,De=Fe,ie>O)break;for(var ce=Math.min(Fe,ie-2),me=0,Ce=0;Ce<ce;++Ce){var Ae=S-Fe+Ce&32767,we=I[Ae],Ne=Ae-we&32767;Ne>me&&(me=Ne,be=Ae)}}}ne=be,be=I[ne],Fe+=ne-be&32767}if(De){K[V++]=268435456|FP[fe]<<18|b9[De];var Ue=FP[fe]&31,et=b9[De]&31;N+=BP[Ue]+UP[et],++oe[257+Ue],++he[et],C=S+fe,++q}else K[V++]=n[S],++oe[n[S]]}}for(S=Math.max(S,C);S<s;++S)K[V++]=n[S],++oe[n[S]];u=C9(n,c,l,K,oe,he,N,V,D,S-D,u),l||(o.r=u&7|c[u/8|0]<<3,u-=7,o.h=M,o.p=I,o.i=S,o.w=C)}else{for(var S=o.w||0;S<s+l;S+=65535){var We=S+65535;We>=s&&(c[u/8|0]=l,We=s),u=D9(c,u+1,n.subarray(S,We))}o.i=s}return Dse(a,0,r+A9(u)+i)};var M9=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Nse=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new yc(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return Mse(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)};var N9=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var Pse=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=M9();i.p(e.dictionary),N9(n,2,i.d())}};function yC(n,e){e||(e={});var t=M9();t.p(n);var r=Nse(n,e,e.dictionary?6:2,4);return Pse(r,e),N9(r,r.length-4,t.d()),r}var kse=typeof TextDecoder<"u"&&new TextDecoder,Rse=0;try{kse.decode(T9,{stream:!0}),Rse=1}catch{}function P9(n){if(Array.isArray(n))return n}function k9(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function zP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function R9(n,e){if(n){if(typeof n=="string")return zP(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?zP(n,e):void 0}}function O9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qP(n,e){return P9(n)||k9(n,e)||R9(n,e)||O9()}function HP(n,e="utf8"){return new TextDecoder(e).decode(n)}var Ose=new TextEncoder;function F9(n){return Ose.encode(n)}var Fse=1024*8,Lse=(()=>{let n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),$P={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},fy=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Fse,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);let i=t.offset?t.offset>>>0:0,o=e.byteLength-i,s=i;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){let r=$P[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===Lse&&t!=="uint8"&&t!=="int8"){let a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();let c=new $P[t](a.buffer);return this.offset+=r,c.reverse(),c}let s=new $P[t](o);return this.offset+=r,s}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return HP(this.readBytes(e))}decodeText(e=1,t="utf8"){return HP(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(F9(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function Nm(n){let e=n.length;for(;--e>=0;)n[e]=0}var Vse=0,bU=1,jse=2,Bse=3,Use=258,gk=29,Ay=256,yy=Ay+1+gk,Dm=30,mk=19,xU=2*yy+1,kh=15,GP=16,zse=7,vk=256,CU=16,EU=17,IU=18,sk=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),IC=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),qse=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),SU=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hse=512,wu=new Array((yy+2)*2);Nm(wu);var my=new Array(Dm*2);Nm(my);var wy=new Array(Hse);Nm(wy);var by=new Array(Use-Bse+1);Nm(by);var _k=new Array(gk);Nm(_k);var SC=new Array(Dm);Nm(SC);function WP(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var AU,DU,TU;function KP(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var MU=n=>n<256?wy[n]:wy[256+(n>>>7)],xy=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},Cs=(n,e,t)=>{n.bi_valid>GP-t?(n.bi_buf|=e<<n.bi_valid&65535,xy(n,n.bi_buf),n.bi_buf=e>>GP-n.bi_valid,n.bi_valid+=t-GP):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},vl=(n,e,t)=>{Cs(n,t[e*2],t[e*2+1])},NU=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},$se=n=>{n.bi_valid===16?(xy(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},Gse=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,u,h,m,g,x,I=0;for(m=0;m<=kh;m++)n.bl_count[m]=0;for(t[n.heap[n.heap_max]*2+1]=0,l=n.heap_max+1;l<xU;l++)u=n.heap[l],m=t[t[u*2+1]*2+1]+1,m>c&&(m=c,I++),t[u*2+1]=m,!(u>r)&&(n.bl_count[m]++,g=0,u>=a&&(g=s[u-a]),x=t[u*2],n.opt_len+=x*(m+g),o&&(n.static_len+=x*(i[u*2+1]+g)));if(I!==0){do{for(m=c-1;n.bl_count[m]===0;)m--;n.bl_count[m]--,n.bl_count[m+1]+=2,n.bl_count[c]--,I-=2}while(I>0);for(m=c;m!==0;m--)for(u=n.bl_count[m];u!==0;)h=n.heap[--l],!(h>r)&&(t[h*2+1]!==m&&(n.opt_len+=(m-t[h*2+1])*t[h*2],t[h*2+1]=m),u--)}},PU=(n,e,t)=>{let r=new Array(kh+1),i=0,o,s;for(o=1;o<=kh;o++)i=i+t[o-1]<<1,r[o]=i;for(s=0;s<=e;s++){let a=n[s*2+1];a!==0&&(n[s*2]=NU(r[a]++,a))}},Wse=()=>{let n,e,t,r,i,o=new Array(kh+1);for(t=0,r=0;r<gk-1;r++)for(_k[r]=t,n=0;n<1<<sk[r];n++)by[t++]=r;for(by[t-1]=r,i=0,r=0;r<16;r++)for(SC[r]=i,n=0;n<1<<IC[r];n++)wy[i++]=r;for(i>>=7;r<Dm;r++)for(SC[r]=i<<7,n=0;n<1<<IC[r]-7;n++)wy[256+i++]=r;for(e=0;e<=kh;e++)o[e]=0;for(n=0;n<=143;)wu[n*2+1]=8,n++,o[8]++;for(;n<=255;)wu[n*2+1]=9,n++,o[9]++;for(;n<=279;)wu[n*2+1]=7,n++,o[7]++;for(;n<=287;)wu[n*2+1]=8,n++,o[8]++;for(PU(wu,yy+1,o),n=0;n<Dm;n++)my[n*2+1]=5,my[n*2]=NU(n,5);AU=new WP(wu,sk,Ay+1,yy,kh),DU=new WP(my,IC,0,Dm,kh),TU=new WP(new Array(0),qse,0,mk,zse)},kU=n=>{let e;for(e=0;e<yy;e++)n.dyn_ltree[e*2]=0;for(e=0;e<Dm;e++)n.dyn_dtree[e*2]=0;for(e=0;e<mk;e++)n.bl_tree[e*2]=0;n.dyn_ltree[vk*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},RU=n=>{n.bi_valid>8?xy(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},L9=(n,e,t,r)=>{let i=e*2,o=t*2;return n[i]<n[o]||n[i]===n[o]&&r[e]<=r[t]},YP=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&L9(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!L9(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},V9=(n,e,t)=>{let r,i,o=0,s,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+o++]&255,r+=(n.pending_buf[n.sym_buf+o++]&255)<<8,i=n.pending_buf[n.sym_buf+o++],r===0?vl(n,i,e):(s=by[i],vl(n,s+Ay+1,e),a=sk[s],a!==0&&(i-=_k[s],Cs(n,i,a)),r--,s=MU(r),vl(n,s,t),a=IC[s],a!==0&&(r-=SC[s],Cs(n,r,a)));while(o<n.sym_next);vl(n,vk,e)},ak=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,c=-1,l;for(n.heap_len=0,n.heap_max=xU,s=0;s<o;s++)t[s*2]!==0?(n.heap[++n.heap_len]=c=s,n.depth[s]=0):t[s*2+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,t[l*2]=1,n.depth[l]=0,n.opt_len--,i&&(n.static_len-=r[l*2+1]);for(e.max_code=c,s=n.heap_len>>1;s>=1;s--)YP(n,t,s);l=o;do s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],YP(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=a,t[l*2]=t[s*2]+t[a*2],n.depth[l]=(n.depth[s]>=n.depth[a]?n.depth[s]:n.depth[a])+1,t[s*2+1]=t[a*2+1]=l,n.heap[1]=l++,YP(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],Gse(n,e),PU(t,c,n.bl_count)},j9=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)&&(a<l?n.bl_tree[o*2]+=a:o!==0?(o!==i&&n.bl_tree[o*2]++,n.bl_tree[CU*2]++):a<=10?n.bl_tree[EU*2]++:n.bl_tree[IU*2]++,a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},B9=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),r=0;r<=t;r++)if(o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)){if(a<l)do vl(n,o,n.bl_tree);while(--a!==0);else o!==0?(o!==i&&(vl(n,o,n.bl_tree),a--),vl(n,CU,n.bl_tree),Cs(n,a-3,2)):a<=10?(vl(n,EU,n.bl_tree),Cs(n,a-3,3)):(vl(n,IU,n.bl_tree),Cs(n,a-11,7));a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}},Kse=n=>{let e;for(j9(n,n.dyn_ltree,n.l_desc.max_code),j9(n,n.dyn_dtree,n.d_desc.max_code),ak(n,n.bl_desc),e=mk-1;e>=3&&n.bl_tree[SU[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},Yse=(n,e,t,r)=>{let i;for(Cs(n,e-257,5),Cs(n,t-1,5),Cs(n,r-4,4),i=0;i<r;i++)Cs(n,n.bl_tree[SU[i]*2+1],3);B9(n,n.dyn_ltree,e-1),B9(n,n.dyn_dtree,t-1)},Qse=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<Ay;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},U9=!1,Zse=n=>{U9||(Wse(),U9=!0),n.l_desc=new KP(n.dyn_ltree,AU),n.d_desc=new KP(n.dyn_dtree,DU),n.bl_desc=new KP(n.bl_tree,TU),n.bi_buf=0,n.bi_valid=0,kU(n)},OU=(n,e,t,r)=>{Cs(n,(Vse<<1)+(r?1:0),3),RU(n),xy(n,t),xy(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},Xse=n=>{Cs(n,bU<<1,3),vl(n,vk,wu),$se(n)},Jse=(n,e,t,r)=>{let i,o,s=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=Qse(n)),ak(n,n.l_desc),ak(n,n.d_desc),s=Kse(n),i=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?OU(n,e,t,r):n.strategy===4||o===i?(Cs(n,(bU<<1)+(r?1:0),3),V9(n,wu,my)):(Cs(n,(jse<<1)+(r?1:0),3),Yse(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),V9(n,n.dyn_ltree,n.dyn_dtree)),kU(n),r&&RU(n)},eae=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(by[t]+Ay+1)*2]++,n.dyn_dtree[MU(e)*2]++),n.sym_next===n.sym_end),tae=Zse,nae=OU,rae=Jse,iae=eae,oae=Xse,sae={_tr_init:tae,_tr_stored_block:nae,_tr_flush_block:rae,_tr_tally:iae,_tr_align:oae},aae=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0},Cy=aae,cae=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},lae=new Uint32Array(cae()),uae=(n,e,t,r)=>{let i=lae,o=r+t;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1},Wi=uae,Fh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Pm={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:dae,_tr_stored_block:ck,_tr_flush_block:fae,_tr_tally:Zd,_tr_align:hae}=sae,{Z_NO_FLUSH:Xd,Z_PARTIAL_FLUSH:pae,Z_FULL_FLUSH:gae,Z_FINISH:ka,Z_BLOCK:z9,Z_OK:fo,Z_STREAM_END:q9,Z_STREAM_ERROR:_l,Z_DATA_ERROR:mae,Z_BUF_ERROR:QP,Z_DEFAULT_COMPRESSION:vae,Z_FILTERED:_ae,Z_HUFFMAN_ONLY:wC,Z_RLE:yae,Z_FIXED:wae,Z_DEFAULT_STRATEGY:bae,Z_UNKNOWN:xae,Z_DEFLATED:TC}=Pm,Cae=9,Eae=15,Iae=8,Sae=29,Aae=256,lk=Aae+1+Sae,Dae=30,Tae=19,Mae=2*lk+1,Nae=15,In=3,Qd=258,yl=Qd+In+1,Pae=32,Tm=42,yk=57,uk=69,dk=73,fk=91,hk=103,Rh=113,py=666,ts=1,km=2,Lh=3,Rm=4,kae=3,Oh=(n,e)=>(n.msg=Fh[e],e),H9=n=>n*2-(n>4?9:0),Yd=n=>{let e=n.length;for(;--e>=0;)n[e]=0},Rae=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},Oae=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,Jd=Oae,ta=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},na=(n,e)=>{fae(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,ta(n.strm)},Ln=(n,e)=>{n.pending_buf[n.pending++]=e},hy=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},pk=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=Cy(n.adler,e,i,t):n.state.wrap===2&&(n.adler=Wi(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},FU=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,o,s=n.prev_length,a=n.nice_match,c=n.strstart>n.w_size-yl?n.strstart-(n.w_size-yl):0,l=n.window,u=n.w_mask,h=n.prev,m=n.strstart+Qd,g=l[r+s-1],x=l[r+s];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(l[i+s]!==x||l[i+s-1]!==g||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<m);if(o=Qd-(m-r),r=m-Qd,o>s){if(n.match_start=e,s=o,o>=a)break;g=l[r+s-1],x=l[r+s]}}while((e=h[e&u])>c&&--t!==0);return s<=n.lookahead?s:n.lookahead},Mm=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-yl)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),Rae(n),r+=e),n.strm.avail_in===0)break;if(t=pk(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=In)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=Jd(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=Jd(n,n.ins_h,n.window[i+In-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<In)););}while(n.lookahead<yl&&n.strm.avail_in!==0)},LU=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,o,s=0,a=n.strm.avail_in;do{if(r=65535,o=n.bi_valid+42>>3,n.strm.avail_out<o||(o=n.strm.avail_out-o,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>o&&(r=o),r<t&&(r===0&&e!==ka||e===Xd||r!==i+n.strm.avail_in)))break;s=e===ka&&r===i+n.strm.avail_in?1:0,ck(n,0,0,s),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,ta(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(pk(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(s===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),s?Rm:e!==Xd&&e!==ka&&n.strm.avail_in===0&&n.strstart===n.block_start?km:(o=n.window_size-n.strstart,n.strm.avail_in>o&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,o+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),o>n.strm.avail_in&&(o=n.strm.avail_in),o&&(pk(n.strm,n.window,n.strstart,o),n.strstart+=o,n.insert+=o>n.w_size-n.insert?n.w_size-n.insert:o),n.high_water<n.strstart&&(n.high_water=n.strstart),o=n.bi_valid+42>>3,o=n.pending_buf_size-o>65535?65535:n.pending_buf_size-o,t=o>n.w_size?n.w_size:o,i=n.strstart-n.block_start,(i>=t||(i||e===ka)&&e!==Xd&&n.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,s=e===ka&&n.strm.avail_in===0&&r===i?1:0,ck(n,n.block_start,r,s),n.block_start+=r,ta(n.strm)),s?Lh:ts)},ZP=(n,e)=>{let t,r;for(;;){if(n.lookahead<yl){if(Mm(n),n.lookahead<yl&&e===Xd)return ts;if(n.lookahead===0)break}if(t=0,n.lookahead>=In&&(n.ins_h=Jd(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-yl&&(n.match_length=FU(n,t)),n.match_length>=In)if(r=Zd(n,n.strstart-n.match_start,n.match_length-In),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=In){n.match_length--;do n.strstart++,n.ins_h=Jd(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=Jd(n,n.ins_h,n.window[n.strstart+1]);else r=Zd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(na(n,!1),n.strm.avail_out===0))return ts}return n.insert=n.strstart<In-1?n.strstart:In-1,e===ka?(na(n,!0),n.strm.avail_out===0?Lh:Rm):n.sym_next&&(na(n,!1),n.strm.avail_out===0)?ts:km},Sm=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<yl){if(Mm(n),n.lookahead<yl&&e===Xd)return ts;if(n.lookahead===0)break}if(t=0,n.lookahead>=In&&(n.ins_h=Jd(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=In-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-yl&&(n.match_length=FU(n,t),n.match_length<=5&&(n.strategy===_ae||n.match_length===In&&n.strstart-n.match_start>4096)&&(n.match_length=In-1)),n.prev_length>=In&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-In,r=Zd(n,n.strstart-1-n.prev_match,n.prev_length-In),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=Jd(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=In-1,n.strstart++,r&&(na(n,!1),n.strm.avail_out===0))return ts}else if(n.match_available){if(r=Zd(n,0,n.window[n.strstart-1]),r&&na(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return ts}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=Zd(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<In-1?n.strstart:In-1,e===ka?(na(n,!0),n.strm.avail_out===0?Lh:Rm):n.sym_next&&(na(n,!1),n.strm.avail_out===0)?ts:km},Fae=(n,e)=>{let t,r,i,o,s=n.window;for(;;){if(n.lookahead<=Qd){if(Mm(n),n.lookahead<=Qd&&e===Xd)return ts;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=In&&n.strstart>0&&(i=n.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=n.strstart+Qd;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);n.match_length=Qd-(o-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=In?(t=Zd(n,1,n.match_length-In),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=Zd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(na(n,!1),n.strm.avail_out===0))return ts}return n.insert=0,e===ka?(na(n,!0),n.strm.avail_out===0?Lh:Rm):n.sym_next&&(na(n,!1),n.strm.avail_out===0)?ts:km},Lae=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(Mm(n),n.lookahead===0)){if(e===Xd)return ts;break}if(n.match_length=0,t=Zd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(na(n,!1),n.strm.avail_out===0))return ts}return n.insert=0,e===ka?(na(n,!0),n.strm.avail_out===0?Lh:Rm):n.sym_next&&(na(n,!1),n.strm.avail_out===0)?ts:km};function ml(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var gy=[new ml(0,0,0,0,LU),new ml(4,4,8,4,ZP),new ml(4,5,16,8,ZP),new ml(4,6,32,32,ZP),new ml(4,4,16,16,Sm),new ml(8,16,32,32,Sm),new ml(8,16,128,128,Sm),new ml(8,32,128,256,Sm),new ml(32,128,258,1024,Sm),new ml(32,258,258,4096,Sm)],Vae=n=>{n.window_size=2*n.w_size,Yd(n.head),n.max_lazy_match=gy[n.level].max_lazy,n.good_match=gy[n.level].good_length,n.nice_match=gy[n.level].nice_length,n.max_chain_length=gy[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=In-1,n.match_available=0,n.ins_h=0};function jae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=TC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Mae*2),this.dyn_dtree=new Uint16Array((2*Dae+1)*2),this.bl_tree=new Uint16Array((2*Tae+1)*2),Yd(this.dyn_ltree),Yd(this.dyn_dtree),Yd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Nae+1),this.heap=new Uint16Array(2*lk+1),Yd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*lk+1),Yd(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Dy=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==Tm&&e.status!==yk&&e.status!==uk&&e.status!==dk&&e.status!==fk&&e.status!==hk&&e.status!==Rh&&e.status!==py?1:0},VU=n=>{if(Dy(n))return Oh(n,_l);n.total_in=n.total_out=0,n.data_type=xae;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?yk:e.wrap?Tm:Rh,n.adler=e.wrap===2?0:1,e.last_flush=-2,dae(e),fo},jU=n=>{let e=VU(n);return e===fo&&Vae(n.state),e},Bae=(n,e)=>Dy(n)||n.state.wrap!==2?_l:(n.state.gzhead=e,fo),BU=(n,e,t,r,i,o)=>{if(!n)return _l;let s=1;if(e===vae&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>Cae||t!==TC||r<8||r>15||e<0||e>9||o<0||o>wae||r===8&&s!==1)return Oh(n,_l);r===8&&(r=9);let a=new jae;return n.state=a,a.strm=n,a.status=Tm,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+In-1)/In),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=t,jU(n)},Uae=(n,e)=>BU(n,e,TC,Eae,Iae,bae),zae=(n,e)=>{if(Dy(n)||e>z9||e<0)return n?Oh(n,_l):_l;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===py&&e!==ka)return Oh(n,n.avail_out===0?QP:_l);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(ta(n),n.avail_out===0)return t.last_flush=-1,fo}else if(n.avail_in===0&&H9(e)<=H9(r)&&e!==ka)return Oh(n,QP);if(t.status===py&&n.avail_in!==0)return Oh(n,QP);if(t.status===Tm&&t.wrap===0&&(t.status=Rh),t.status===Tm){let i=TC+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=wC||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,i|=o<<6,t.strstart!==0&&(i|=Pae),i+=31-i%31,hy(t,i),t.strstart!==0&&(hy(t,n.adler>>>16),hy(t,n.adler&65535)),n.adler=1,t.status=Rh,ta(n),t.pending!==0)return t.last_flush=-1,fo}if(t.status===yk){if(n.adler=0,Ln(t,31),Ln(t,139),Ln(t,8),t.gzhead)Ln(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Ln(t,t.gzhead.time&255),Ln(t,t.gzhead.time>>8&255),Ln(t,t.gzhead.time>>16&255),Ln(t,t.gzhead.time>>24&255),Ln(t,t.level===9?2:t.strategy>=wC||t.level<2?4:0),Ln(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Ln(t,t.gzhead.extra.length&255),Ln(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=Wi(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=uk;else if(Ln(t,0),Ln(t,0),Ln(t,0),Ln(t,0),Ln(t,0),Ln(t,t.level===9?2:t.strategy>=wC||t.level<2?4:0),Ln(t,kae),t.status=Rh,ta(n),t.pending!==0)return t.last_flush=-1,fo}if(t.status===uk){if(t.gzhead.extra){let i=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=Wi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,ta(n),t.pending!==0)return t.last_flush=-1,fo;i=0,o-=a}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>i&&(n.adler=Wi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=dk}if(t.status===dk){if(t.gzhead.name){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Wi(n.adler,t.pending_buf,t.pending-i,i)),ta(n),t.pending!==0)return t.last_flush=-1,fo;i=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,Ln(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Wi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=fk}if(t.status===fk){if(t.gzhead.comment){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Wi(n.adler,t.pending_buf,t.pending-i,i)),ta(n),t.pending!==0)return t.last_flush=-1,fo;i=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,Ln(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Wi(n.adler,t.pending_buf,t.pending-i,i))}t.status=hk}if(t.status===hk){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(ta(n),t.pending!==0))return t.last_flush=-1,fo;Ln(t,n.adler&255),Ln(t,n.adler>>8&255),n.adler=0}if(t.status=Rh,ta(n),t.pending!==0)return t.last_flush=-1,fo}if(n.avail_in!==0||t.lookahead!==0||e!==Xd&&t.status!==py){let i=t.level===0?LU(t,e):t.strategy===wC?Lae(t,e):t.strategy===yae?Fae(t,e):gy[t.level].func(t,e);if((i===Lh||i===Rm)&&(t.status=py),i===ts||i===Lh)return n.avail_out===0&&(t.last_flush=-1),fo;if(i===km&&(e===pae?hae(t):e!==z9&&(ck(t,0,0,!1),e===gae&&(Yd(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),ta(n),n.avail_out===0))return t.last_flush=-1,fo}return e!==ka?fo:t.wrap<=0?q9:(t.wrap===2?(Ln(t,n.adler&255),Ln(t,n.adler>>8&255),Ln(t,n.adler>>16&255),Ln(t,n.adler>>24&255),Ln(t,n.total_in&255),Ln(t,n.total_in>>8&255),Ln(t,n.total_in>>16&255),Ln(t,n.total_in>>24&255)):(hy(t,n.adler>>>16),hy(t,n.adler&65535)),ta(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?fo:q9)},qae=n=>{if(Dy(n))return _l;let e=n.state.status;return n.state=null,e===Rh?Oh(n,mae):fo},Hae=(n,e)=>{let t=e.length;if(Dy(n))return _l;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==Tm||r.lookahead)return _l;if(i===1&&(n.adler=Cy(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Yd(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(t-r.w_size,t),0),e=c,t=r.w_size}let o=n.avail_in,s=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,Mm(r);r.lookahead>=In;){let c=r.strstart,l=r.lookahead-(In-1);do r.ins_h=Jd(r,r.ins_h,r.window[c+In-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=In-1,Mm(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=In-1,r.match_available=0,n.next_in=s,n.input=a,n.avail_in=o,r.wrap=i,fo},$ae=Uae,Gae=BU,Wae=jU,Kae=VU,Yae=Bae,Qae=zae,Zae=qae,Xae=Hae,Jae="pako deflate (from Nodeca project)",vy={deflateInit:$ae,deflateInit2:Gae,deflateReset:Wae,deflateResetKeep:Kae,deflateSetHeader:Yae,deflate:Qae,deflateEnd:Zae,deflateSetDictionary:Xae,deflateInfo:Jae},ece=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),tce=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)ece(t,r)&&(n[r]=t[r])}}return n},nce=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];t.set(s,i),i+=s.length}return t},MC={assign:tce,flattenChunks:nce},UU=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{UU=!1}var Ey=new Uint8Array(256);for(let n=0;n<256;n++)Ey[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Ey[254]=Ey[254]=1;var rce=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},ice=(n,e)=>{if(e<65534&&n.subarray&&UU)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},oce=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,o=new Array(t*2);for(i=0,r=0;r<t;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=Ey[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<t;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return ice(o,i)},sce=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Ey[n[t]]>e?t:e},Iy={string2buf:rce,buf2string:oce,utf8border:sce};function ace(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zU=ace,qU=Object.prototype.toString,{Z_NO_FLUSH:cce,Z_SYNC_FLUSH:lce,Z_FULL_FLUSH:uce,Z_FINISH:dce,Z_OK:AC,Z_STREAM_END:fce,Z_DEFAULT_COMPRESSION:hce,Z_DEFAULT_STRATEGY:pce,Z_DEFLATED:gce}=Pm;function Ty(n){this.options=MC.assign({level:hce,method:gce,chunkSize:16384,windowBits:15,memLevel:8,strategy:pce},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zU,this.strm.avail_out=0;let t=vy.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==AC)throw new Error(Fh[t]);if(e.header&&vy.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=Iy.string2buf(e.dictionary):qU.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=vy.deflateSetDictionary(this.strm,r),t!==AC)throw new Error(Fh[t]);this._dict_set=!0}}Ty.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?dce:cce,typeof n=="string"?t.input=Iy.string2buf(n):qU.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(o===lce||o===uce)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=vy.deflate(t,o),i===fce)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=vy.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===AC;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Ty.prototype.onData=function(n){this.chunks.push(n)};Ty.prototype.onEnd=function(n){n===AC&&(this.result=MC.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function wk(n,e){let t=new Ty(e);if(t.push(n,!0),t.err)throw t.msg||Fh[t.err];return t.result}function mce(n,e){return e=e||{},e.raw=!0,wk(n,e)}function vce(n,e){return e=e||{},e.gzip=!0,wk(n,e)}var _ce=Ty,yce=wk,wce=mce,bce=vce,xce=Pm,Cce={Deflate:_ce,deflate:yce,deflateRaw:wce,gzip:bce,constants:xce},bC=16209,Ece=16191,Ice=function(e,t){let r,i,o,s,a,c,l,u,h,m,g,x,I,M,P,Y,B,K,oe,he,q,N,S,V,C=e.state;r=e.next_in,S=e.input,i=r+(e.avail_in-5),o=e.next_out,V=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=C.dmax,l=C.wsize,u=C.whave,h=C.wnext,m=C.window,g=C.hold,x=C.bits,I=C.lencode,M=C.distcode,P=(1<<C.lenbits)-1,Y=(1<<C.distbits)-1;e:do{x<15&&(g+=S[r++]<<x,x+=8,g+=S[r++]<<x,x+=8),B=I[g&P];t:for(;;){if(K=B>>>24,g>>>=K,x-=K,K=B>>>16&255,K===0)V[o++]=B&65535;else if(K&16){oe=B&65535,K&=15,K&&(x<K&&(g+=S[r++]<<x,x+=8),oe+=g&(1<<K)-1,g>>>=K,x-=K),x<15&&(g+=S[r++]<<x,x+=8,g+=S[r++]<<x,x+=8),B=M[g&Y];n:for(;;){if(K=B>>>24,g>>>=K,x-=K,K=B>>>16&255,K&16){if(he=B&65535,K&=15,x<K&&(g+=S[r++]<<x,x+=8,x<K&&(g+=S[r++]<<x,x+=8)),he+=g&(1<<K)-1,he>c){e.msg="invalid distance too far back",C.mode=bC;break e}if(g>>>=K,x-=K,K=o-s,he>K){if(K=he-K,K>u&&C.sane){e.msg="invalid distance too far back",C.mode=bC;break e}if(q=0,N=m,h===0){if(q+=l-K,K<oe){oe-=K;do V[o++]=m[q++];while(--K);q=o-he,N=V}}else if(h<K){if(q+=l+h-K,K-=h,K<oe){oe-=K;do V[o++]=m[q++];while(--K);if(q=0,h<oe){K=h,oe-=K;do V[o++]=m[q++];while(--K);q=o-he,N=V}}}else if(q+=h-K,K<oe){oe-=K;do V[o++]=m[q++];while(--K);q=o-he,N=V}for(;oe>2;)V[o++]=N[q++],V[o++]=N[q++],V[o++]=N[q++],oe-=3;oe&&(V[o++]=N[q++],oe>1&&(V[o++]=N[q++]))}else{q=o-he;do V[o++]=V[q++],V[o++]=V[q++],V[o++]=V[q++],oe-=3;while(oe>2);oe&&(V[o++]=V[q++],oe>1&&(V[o++]=V[q++]))}}else if((K&64)===0){B=M[(B&65535)+(g&(1<<K)-1)];continue n}else{e.msg="invalid distance code",C.mode=bC;break e}break}}else if((K&64)===0){B=I[(B&65535)+(g&(1<<K)-1)];continue t}else if(K&32){C.mode=Ece;break e}else{e.msg="invalid literal/length code",C.mode=bC;break e}break}}while(r<i&&o<a);oe=x>>3,r-=oe,x-=oe<<3,g&=(1<<x)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),C.hold=g,C.bits=x},Am=15,$9=852,G9=592,W9=0,XP=1,K9=2,Sce=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ace=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Dce=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Tce=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Mce=(n,e,t,r,i,o,s,a)=>{let c=a.bits,l=0,u=0,h=0,m=0,g=0,x=0,I=0,M=0,P=0,Y=0,B,K,oe,he,q,N=null,S,V=new Uint16Array(Am+1),C=new Uint16Array(Am+1),D=null,T,ne,be;for(l=0;l<=Am;l++)V[l]=0;for(u=0;u<r;u++)V[e[t+u]]++;for(g=c,m=Am;m>=1&&V[m]===0;m--);if(g>m&&(g=m),m===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(h=1;h<m&&V[h]===0;h++);for(g<h&&(g=h),M=1,l=1;l<=Am;l++)if(M<<=1,M-=V[l],M<0)return-1;if(M>0&&(n===W9||m!==1))return-1;for(C[1]=0,l=1;l<Am;l++)C[l+1]=C[l]+V[l];for(u=0;u<r;u++)e[t+u]!==0&&(s[C[e[t+u]]++]=u);if(n===W9?(N=D=s,S=20):n===XP?(N=Sce,D=Ace,S=257):(N=Dce,D=Tce,S=0),Y=0,u=0,l=h,q=o,x=g,I=0,oe=-1,P=1<<g,he=P-1,n===XP&&P>$9||n===K9&&P>G9)return 1;for(;;){T=l-I,s[u]+1<S?(ne=0,be=s[u]):s[u]>=S?(ne=D[s[u]-S],be=N[s[u]-S]):(ne=96,be=0),B=1<<l-I,K=1<<x,h=K;do K-=B,i[q+(Y>>I)+K]=T<<24|ne<<16|be|0;while(K!==0);for(B=1<<l-1;Y&B;)B>>=1;if(B!==0?(Y&=B-1,Y+=B):Y=0,u++,--V[l]===0){if(l===m)break;l=e[t+s[u]]}if(l>g&&(Y&he)!==oe){for(I===0&&(I=g),q+=h,x=l-I,M=1<<x;x+I<m&&(M-=V[x+I],!(M<=0));)x++,M<<=1;if(P+=1<<x,n===XP&&P>$9||n===K9&&P>G9)return 1;oe=Y&he,i[oe]=g<<24|x<<16|q-o|0}}return Y!==0&&(i[q+Y]=l-I<<24|64<<16|0),a.bits=g,0},_y=Mce,Nce=0,HU=1,$U=2,{Z_FINISH:Y9,Z_BLOCK:Pce,Z_TREES:xC,Z_OK:Vh,Z_STREAM_END:kce,Z_NEED_DICT:Rce,Z_STREAM_ERROR:Ra,Z_DATA_ERROR:GU,Z_MEM_ERROR:WU,Z_BUF_ERROR:Oce,Z_DEFLATED:Q9}=Pm,NC=16180,Z9=16181,X9=16182,J9=16183,eU=16184,tU=16185,nU=16186,rU=16187,iU=16188,oU=16189,DC=16190,yu=16191,JP=16192,sU=16193,ek=16194,aU=16195,cU=16196,lU=16197,uU=16198,CC=16199,EC=16200,dU=16201,fU=16202,hU=16203,pU=16204,gU=16205,tk=16206,mU=16207,vU=16208,Pr=16209,KU=16210,YU=16211,Fce=852,Lce=592,Vce=15,jce=Vce,_U=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Bce(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var jh=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<NC||e.mode>YU?1:0},QU=n=>{if(jh(n))return Ra;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=NC,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Fce),e.distcode=e.distdyn=new Int32Array(Lce),e.sane=1,e.back=-1,Vh},ZU=n=>{if(jh(n))return Ra;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,QU(n)},XU=(n,e)=>{let t;if(jh(n))return Ra;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ra:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,ZU(n))},JU=(n,e)=>{if(!n)return Ra;let t=new Bce;n.state=t,t.strm=n,t.window=null,t.mode=NC;let r=XU(n,e);return r!==Vh&&(n.state=null),r},Uce=n=>JU(n,jce),yU=!0,nk,rk,zce=n=>{if(yU){nk=new Int32Array(512),rk=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(_y(HU,n.lens,0,288,nk,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;_y($U,n.lens,0,32,rk,0,n.work,{bits:5}),yU=!1}n.lencode=nk,n.lenbits=9,n.distcode=rk,n.distbits=5},ez=(n,e,t,r)=>{let i,o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},qce=(n,e)=>{let t,r,i,o,s,a,c,l,u,h,m,g,x,I,M=0,P,Y,B,K,oe,he,q,N,S=new Uint8Array(4),V,C,D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(jh(n)||!n.output||!n.input&&n.avail_in!==0)return Ra;t=n.state,t.mode===yu&&(t.mode=JP),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,h=a,m=c,N=Vh;e:for(;;)switch(t.mode){case NC:if(t.wrap===0){t.mode=JP;break}for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,S[0]=l&255,S[1]=l>>>8&255,t.check=Wi(t.check,S,2,0),l=0,u=0,t.mode=Z9;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){n.msg="incorrect header check",t.mode=Pr;break}if((l&15)!==Q9){n.msg="unknown compression method",t.mode=Pr;break}if(l>>>=4,u-=4,q=(l&15)+8,t.wbits===0&&(t.wbits=q),q>15||q>t.wbits){n.msg="invalid window size",t.mode=Pr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=l&512?oU:yu,l=0,u=0;break;case Z9:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==Q9){n.msg="unknown compression method",t.mode=Pr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Pr;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,t.check=Wi(t.check,S,2,0)),l=0,u=0,t.mode=X9;case X9:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,S[2]=l>>>16&255,S[3]=l>>>24&255,t.check=Wi(t.check,S,4,0)),l=0,u=0,t.mode=J9;case J9:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,t.check=Wi(t.check,S,2,0)),l=0,u=0,t.mode=eU;case eU:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,t.check=Wi(t.check,S,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=tU;case tU:if(t.flags&1024&&(g=t.length,g>a&&(g=a),g&&(t.head&&(q=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+g),q)),t.flags&512&&t.wrap&4&&(t.check=Wi(t.check,r,g,o)),a-=g,o+=g,t.length-=g),t.length))break e;t.length=0,t.mode=nU;case nU:if(t.flags&2048){if(a===0)break e;g=0;do q=r[o+g++],t.head&&q&&t.length<65536&&(t.head.name+=String.fromCharCode(q));while(q&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Wi(t.check,r,g,o)),a-=g,o+=g,q)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=rU;case rU:if(t.flags&4096){if(a===0)break e;g=0;do q=r[o+g++],t.head&&q&&t.length<65536&&(t.head.comment+=String.fromCharCode(q));while(q&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Wi(t.check,r,g,o)),a-=g,o+=g,q)break e}else t.head&&(t.head.comment=null);t.mode=iU;case iU:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Pr;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=yu;break;case oU:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}n.adler=t.check=_U(l),l=0,u=0,t.mode=DC;case DC:if(t.havedict===0)return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,Rce;n.adler=t.check=1,t.mode=yu;case yu:if(e===Pce||e===xC)break e;case JP:if(t.last){l>>>=u&7,u-=u&7,t.mode=tk;break}for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=sU;break;case 1:if(zce(t),t.mode=CC,e===xC){l>>>=2,u-=2;break e}break;case 2:t.mode=cU;break;case 3:n.msg="invalid block type",t.mode=Pr}l>>>=2,u-=2;break;case sU:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Pr;break}if(t.length=l&65535,l=0,u=0,t.mode=ek,e===xC)break e;case ek:t.mode=aU;case aU:if(g=t.length,g){if(g>a&&(g=a),g>c&&(g=c),g===0)break e;i.set(r.subarray(o,o+g),s),a-=g,o+=g,c-=g,s+=g,t.length-=g;break}t.mode=yu;break;case cU:for(;u<14;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Pr;break}t.have=0,t.mode=lU;case lU:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.lens[D[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[D[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},N=_y(Nce,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,N){n.msg="invalid code lengths set",t.mode=Pr;break}t.have=0,t.mode=uU;case uU:for(;t.have<t.nlen+t.ndist;){for(;M=t.lencode[l&(1<<t.lenbits)-1],P=M>>>24,Y=M>>>16&255,B=M&65535,!(P<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(B<16)l>>>=P,u-=P,t.lens[t.have++]=B;else{if(B===16){for(C=P+2;u<C;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=P,u-=P,t.have===0){n.msg="invalid bit length repeat",t.mode=Pr;break}q=t.lens[t.have-1],g=3+(l&3),l>>>=2,u-=2}else if(B===17){for(C=P+3;u<C;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=P,u-=P,q=0,g=3+(l&7),l>>>=3,u-=3}else{for(C=P+7;u<C;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=P,u-=P,q=0,g=11+(l&127),l>>>=7,u-=7}if(t.have+g>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Pr;break}for(;g--;)t.lens[t.have++]=q}}if(t.mode===Pr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Pr;break}if(t.lenbits=9,V={bits:t.lenbits},N=_y(HU,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,N){n.msg="invalid literal/lengths set",t.mode=Pr;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},N=_y($U,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,N){n.msg="invalid distances set",t.mode=Pr;break}if(t.mode=CC,e===xC)break e;case CC:t.mode=EC;case EC:if(a>=6&&c>=258){n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,Ice(n,m),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,t.mode===yu&&(t.back=-1);break}for(t.back=0;M=t.lencode[l&(1<<t.lenbits)-1],P=M>>>24,Y=M>>>16&255,B=M&65535,!(P<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(Y&&(Y&240)===0){for(K=P,oe=Y,he=B;M=t.lencode[he+((l&(1<<K+oe)-1)>>K)],P=M>>>24,Y=M>>>16&255,B=M&65535,!(K+P<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=K,u-=K,t.back+=K}if(l>>>=P,u-=P,t.back+=P,t.length=B,Y===0){t.mode=gU;break}if(Y&32){t.back=-1,t.mode=yu;break}if(Y&64){n.msg="invalid literal/length code",t.mode=Pr;break}t.extra=Y&15,t.mode=dU;case dU:if(t.extra){for(C=t.extra;u<C;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=fU;case fU:for(;M=t.distcode[l&(1<<t.distbits)-1],P=M>>>24,Y=M>>>16&255,B=M&65535,!(P<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((Y&240)===0){for(K=P,oe=Y,he=B;M=t.distcode[he+((l&(1<<K+oe)-1)>>K)],P=M>>>24,Y=M>>>16&255,B=M&65535,!(K+P<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=K,u-=K,t.back+=K}if(l>>>=P,u-=P,t.back+=P,Y&64){n.msg="invalid distance code",t.mode=Pr;break}t.offset=B,t.extra=Y&15,t.mode=hU;case hU:if(t.extra){for(C=t.extra;u<C;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Pr;break}t.mode=pU;case pU:if(c===0)break e;if(g=m-c,t.offset>g){if(g=t.offset-g,g>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Pr;break}g>t.wnext?(g-=t.wnext,x=t.wsize-g):x=t.wnext-g,g>t.length&&(g=t.length),I=t.window}else I=i,x=s-t.offset,g=t.length;g>c&&(g=c),c-=g,t.length-=g;do i[s++]=I[x++];while(--g);t.length===0&&(t.mode=EC);break;case gU:if(c===0)break e;i[s++]=t.length,c--,t.mode=EC;break;case tk:if(t.wrap){for(;u<32;){if(a===0)break e;a--,l|=r[o++]<<u,u+=8}if(m-=c,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?Wi(t.check,i,m,s-m):Cy(t.check,i,m,s-m)),m=c,t.wrap&4&&(t.flags?l:_U(l))!==t.check){n.msg="incorrect data check",t.mode=Pr;break}l=0,u=0}t.mode=mU;case mU:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Pr;break}l=0,u=0}t.mode=vU;case vU:N=kce;break e;case Pr:N=GU;break e;case KU:return WU;case YU:default:return Ra}return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,(t.wsize||m!==n.avail_out&&t.mode<Pr&&(t.mode<tk||e!==Y9))&&ez(n,n.output,n.next_out,m-n.avail_out),h-=n.avail_in,m-=n.avail_out,n.total_in+=h,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?Wi(t.check,i,m,n.next_out-m):Cy(t.check,i,m,n.next_out-m)),n.data_type=t.bits+(t.last?64:0)+(t.mode===yu?128:0)+(t.mode===CC||t.mode===ek?256:0),(h===0&&m===0||e===Y9)&&N===Vh&&(N=Oce),N},Hce=n=>{if(jh(n))return Ra;let e=n.state;return e.window&&(e.window=null),n.state=null,Vh},$ce=(n,e)=>{if(jh(n))return Ra;let t=n.state;return(t.wrap&2)===0?Ra:(t.head=e,e.done=!1,Vh)},Gce=(n,e)=>{let t=e.length,r,i,o;return jh(n)||(r=n.state,r.wrap!==0&&r.mode!==DC)?Ra:r.mode===DC&&(i=1,i=Cy(i,e,t,0),i!==r.check)?GU:(o=ez(n,e,t,t),o?(r.mode=KU,WU):(r.havedict=1,Vh))},Wce=ZU,Kce=XU,Yce=QU,Qce=Uce,Zce=JU,Xce=qce,Jce=Hce,ele=$ce,tle=Gce,nle="pako inflate (from Nodeca project)",bu={inflateReset:Wce,inflateReset2:Kce,inflateResetKeep:Yce,inflateInit:Qce,inflateInit2:Zce,inflate:Xce,inflateEnd:Jce,inflateGetHeader:ele,inflateSetDictionary:tle,inflateInfo:nle};function rle(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ile=rle,tz=Object.prototype.toString,{Z_NO_FLUSH:ole,Z_FINISH:sle,Z_OK:Sy,Z_STREAM_END:ik,Z_NEED_DICT:ok,Z_STREAM_ERROR:ale,Z_DATA_ERROR:wU,Z_MEM_ERROR:cle}=Pm;function My(n){this.options=MC.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zU,this.strm.avail_out=0;let t=bu.inflateInit2(this.strm,e.windowBits);if(t!==Sy)throw new Error(Fh[t]);if(this.header=new ile,bu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Iy.string2buf(e.dictionary):tz.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=bu.inflateSetDictionary(this.strm,e.dictionary),t!==Sy)))throw new Error(Fh[t])}My.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?sle:ole,tz.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=bu.inflate(t,s),o===ok&&i&&(o=bu.inflateSetDictionary(t,i),o===Sy?o=bu.inflate(t,s):o===wU&&(o=ok));t.avail_in>0&&o===ik&&t.state.wrap>0&&n[t.next_in]!==0;)bu.inflateReset(t),o=bu.inflate(t,s);switch(o){case ale:case wU:case ok:case cle:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===ik))if(this.options.to==="string"){let c=Iy.utf8border(t.output,t.next_out),l=t.next_out-c,u=Iy.buf2string(t.output,c);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Sy&&a===0)){if(o===ik)return o=bu.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};My.prototype.onData=function(n){this.chunks.push(n)};My.prototype.onEnd=function(n){n===Sy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=MC.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function bk(n,e){let t=new My(e);if(t.push(n),t.err)throw t.msg||Fh[t.err];return t.result}function lle(n,e){return e=e||{},e.raw=!0,bk(n,e)}var ule=My,dle=bk,fle=lle,hle=bk,ple=Pm,gle={Inflate:ule,inflate:dle,inflateRaw:fle,ungzip:hle,constants:ple},{Deflate:vRe,deflate:_Re,deflateRaw:yRe,gzip:wRe}=Cce,{Inflate:mle,inflate:vle,inflateRaw:bRe,ungzip:xRe}=gle;var xk=mle,nz=vle;var iz=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;iz[n]=e}var rz=4294967295;function _le(n,e,t){let r=n;for(let i=0;i<t;i++)r=iz[(r^e[i])&255]^r>>>8;return r}function yle(n,e){return(_le(rz,n,e)^rz)>>>0}function Ck(n,e,t){let r=n.readUint32(),i=yle(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function PC(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function kC(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function RC(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function OC(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function FC(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+wle(e[o-i],t[o],t[o-i])&255}}function wle(n,e,t){let r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),s=Math.abs(r-t);return i<=o&&i<=s?n:o<=s?e:t}function oz(n,e,t,r,i,o){switch(n){case 0:PC(e,t,i);break;case 1:kC(e,t,i,o);break;case 2:RC(e,t,r,i);break;case 3:OC(e,t,r,i,o);break;case 4:FC(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}var ble=new Uint16Array([255]),xle=new Uint8Array(ble.buffer),Cle=xle[0]===255;function sz(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,c=new Uint8Array(r*t*a),l=0;for(let u=0;u<7;u++){let h=s[u],m=Math.ceil((t-h.x)/h.xStep),g=Math.ceil((r-h.y)/h.yStep);if(m<=0||g<=0)continue;let x=m*a,I=new Uint8Array(x);for(let M=0;M<g;M++){let P=e[l++],Y=e.subarray(l,l+x);l+=x;let B=new Uint8Array(x);oz(P,Y,B,I,x,a),I.set(B);for(let K=0;K<m;K++){let oe=h.x+K*h.xStep,he=h.y+M*h.yStep;if(!(oe>=t||he>=r))for(let q=0;q<a;q++)c[(he*t+oe)*a+q]=B[K*a+q]}}}if(o===16){let u=new Uint16Array(c.buffer);if(Cle)for(let h=0;h<u.length;h++)u[h]=Ele(u[h]);return u}else return c}function Ele(n){return(n&255)<<8|n>>8&255}var Ile=new Uint16Array([255]),Sle=new Uint8Array(Ile.buffer),Ale=Sle[0]===255,Dle=new Uint8Array(0);function Ek(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*t),c=new Uint8Array(r*a),l=Dle,u=0,h,m;for(let g=0;g<r;g++){switch(h=e.subarray(u+1,u+1+a),m=c.subarray(g*a,(g+1)*a),e[u]){case 0:PC(h,m,a);break;case 1:kC(h,m,a,s);break;case 2:RC(h,m,l,a);break;case 3:OC(h,m,l,a,s);break;case 4:FC(h,m,l,a,s);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}l=m,u+=a+1}if(o===16){let g=new Uint16Array(c.buffer);if(Ale)for(let x=0;x<g.length;x++)g[x]=Tle(g[x]);return g}else return c}function Tle(n){return(n&255)<<8|n>>8&255}var LC=Uint8Array.of(137,80,78,71,13,10,26,10);function Ik(n){if(!az(n.readBytes(LC.length)))throw new Error("wrong PNG signature")}function az(n){if(n.length<LC.length)return!1;for(let e=0;e<LC.length;e++)if(n[e]!==LC[e])return!1;return!0}var cz="tEXt",Nle=0,lz=new TextDecoder("latin1");function Ple(n){if(Rle(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var kle=/^[\u0000-\u00FF]*$/;function Rle(n){if(!kle.test(n))throw new Error("invalid latin1 text")}function uz(n,e,t){let r=Sk(e);n[r]=Ole(e,t-r.length-1)}function Sk(n){for(n.mark();n.readByte()!==Nle;);let e=n.offset;n.reset();let t=lz.decode(n.readBytes(e-n.offset-1));return n.skip(1),Ple(t),t}function Ole(n,e){return lz.decode(n.readBytes(e))}var ns={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Ny={UNKNOWN:-1,DEFLATE:0},VC={UNKNOWN:-1,ADAPTIVE:0},Py={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},ky={NONE:0,BACKGROUND:1,PREVIOUS:2},jC={SOURCE:0,OVER:1};var BC=class extends fy{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);let{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new xk,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Ny.UNKNOWN,this._filterMethod=VC.UNKNOWN,this._interlaceMethod=Py.UNKNOWN,this._colorType=ns.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Ik(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(Ik(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){let r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case cz:uz(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Ck(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){let r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Ck(this,e+4,t):this.skip(4)}decodeIHDR(){let e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Fle(this.readUint8());let t=this.readUint8();this._colorType=t;let r;switch(t){case ns.GREYSCALE:r=1;break;case ns.TRUECOLOUR:r=3;break;case ns.INDEXED_COLOUR:r=1;break;case ns.GREYSCALE_ALPHA:r=2;break;case ns.TRUECOLOUR_ALPHA:r=4;break;case ns.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Ny.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);let t=e/3;this._hasPalette=!0;let r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ns.GREYSCALE:case ns.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case ns.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){let r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ns.UNKNOWN:case ns.GREYSCALE_ALPHA:case ns.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t=Sk(this),r=this.readUint8();if(r!==Ny.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);let i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:nz(i)}}decodepHYs(){let e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){let t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=Ek({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{let i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case ky.NONE:break;case ky.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){let s=(i*e.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[s+a]=0}break;case ky.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){let r=1<<this._png.depth,i=(o,s)=>{let a=((o+t.yOffset)*this._png.width+t.xOffset+s)*this._png.channels,c=(o*t.width+s)*this._png.channels;return{index:a,frameIndex:c}};switch(t.blendOp){case jC.SOURCE:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++)e.data[a+l]=t.data[c+l]}break;case jC.OVER:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++){let u=t.data[c+this._png.channels-1]/r,h=l%(this._png.channels-1)===0?1:t.data[c+l],m=Math.floor(u*h+(1-u)*e.data[a+l]);e.data[a+l]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==VC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Py.NO_INTERLACE)this._png.data=Ek({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Py.ADAM7)this._png.data=sz({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ky.NONE,blendOp:jC.SOURCE,data:e}),this._inflator=new xk,this._writingDataChunks=!1}};function Fle(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function dz(n,e){return new BC(n,e).decode()}var Yt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Ak(){Yt.console&&typeof Yt.console.log=="function"&&Yt.console.log.apply(Yt.console,arguments)}var fr={log:Ak,warn:function(n){Yt.console&&(typeof Yt.console.warn=="function"?Yt.console.warn.apply(Yt.console,arguments):Ak.call(null,arguments))},error:function(n){Yt.console&&(typeof Yt.console.error=="function"?Yt.console.error.apply(Yt.console,arguments):Ak(n))}};function Dk(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Bh(r.response,e,t)},r.onerror=function(){fr.error("could not download file")},r.send()}function fz(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function UC(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Bh=Yt.saveAs||((typeof window>"u"?"undefined":Un(window))!=="object"||window!==Yt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Yt.URL||Yt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?fz(i.href)?Dk(n,e,t):UC(i,i.target="_blank"):UC(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){UC(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(fz(n))Dk(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){UC(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Un(o)!=="object"&&(fr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Dk(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(Yt.HTMLElement)||Yt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Un(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(n)}else{var c=Yt.URL||Yt.webkitURL,l=c.createObjectURL(n);r?r.location=l:location.href=l,r=null,setTimeout(function(){c.revokeObjectURL(l)},4e4)}});function Fz(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),l=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),"#"+a+c+l}}var $C=Yt.atob.bind(Yt),hz=Yt.btoa.bind(Yt);function Tk(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=Ao(t,r,i,o,e[0],7,-680876936),o=Ao(o,t,r,i,e[1],12,-389564586),i=Ao(i,o,t,r,e[2],17,606105819),r=Ao(r,i,o,t,e[3],22,-1044525330),t=Ao(t,r,i,o,e[4],7,-176418897),o=Ao(o,t,r,i,e[5],12,1200080426),i=Ao(i,o,t,r,e[6],17,-1473231341),r=Ao(r,i,o,t,e[7],22,-45705983),t=Ao(t,r,i,o,e[8],7,1770035416),o=Ao(o,t,r,i,e[9],12,-1958414417),i=Ao(i,o,t,r,e[10],17,-42063),r=Ao(r,i,o,t,e[11],22,-1990404162),t=Ao(t,r,i,o,e[12],7,1804603682),o=Ao(o,t,r,i,e[13],12,-40341101),i=Ao(i,o,t,r,e[14],17,-1502002290),t=Do(t,r=Ao(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Do(o,t,r,i,e[6],9,-1069501632),i=Do(i,o,t,r,e[11],14,643717713),r=Do(r,i,o,t,e[0],20,-373897302),t=Do(t,r,i,o,e[5],5,-701558691),o=Do(o,t,r,i,e[10],9,38016083),i=Do(i,o,t,r,e[15],14,-660478335),r=Do(r,i,o,t,e[4],20,-405537848),t=Do(t,r,i,o,e[9],5,568446438),o=Do(o,t,r,i,e[14],9,-1019803690),i=Do(i,o,t,r,e[3],14,-187363961),r=Do(r,i,o,t,e[8],20,1163531501),t=Do(t,r,i,o,e[13],5,-1444681467),o=Do(o,t,r,i,e[2],9,-51403784),i=Do(i,o,t,r,e[7],14,1735328473),t=To(t,r=Do(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=To(o,t,r,i,e[8],11,-2022574463),i=To(i,o,t,r,e[11],16,1839030562),r=To(r,i,o,t,e[14],23,-35309556),t=To(t,r,i,o,e[1],4,-1530992060),o=To(o,t,r,i,e[4],11,1272893353),i=To(i,o,t,r,e[7],16,-155497632),r=To(r,i,o,t,e[10],23,-1094730640),t=To(t,r,i,o,e[13],4,681279174),o=To(o,t,r,i,e[0],11,-358537222),i=To(i,o,t,r,e[3],16,-722521979),r=To(r,i,o,t,e[6],23,76029189),t=To(t,r,i,o,e[9],4,-640364487),o=To(o,t,r,i,e[12],11,-421815835),i=To(i,o,t,r,e[15],16,530742520),t=Mo(t,r=To(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=Mo(o,t,r,i,e[7],10,1126891415),i=Mo(i,o,t,r,e[14],15,-1416354905),r=Mo(r,i,o,t,e[5],21,-57434055),t=Mo(t,r,i,o,e[12],6,1700485571),o=Mo(o,t,r,i,e[3],10,-1894986606),i=Mo(i,o,t,r,e[10],15,-1051523),r=Mo(r,i,o,t,e[1],21,-2054922799),t=Mo(t,r,i,o,e[8],6,1873313359),o=Mo(o,t,r,i,e[15],10,-30611744),i=Mo(i,o,t,r,e[6],15,-1560198380),r=Mo(r,i,o,t,e[13],21,1309151649),t=Mo(t,r,i,o,e[4],6,-145523070),o=Mo(o,t,r,i,e[11],10,-1120210379),i=Mo(i,o,t,r,e[2],15,718787259),r=Mo(r,i,o,t,e[9],21,-343485551),n[0]=tf(t,n[0]),n[1]=tf(r,n[1]),n[2]=tf(i,n[2]),n[3]=tf(o,n[3])}function XC(n,e,t,r,i,o){return e=tf(tf(e,n),tf(r,o)),tf(e<<i|e>>>32-i,t)}function Ao(n,e,t,r,i,o,s){return XC(e&t|~e&r,n,e,i,o,s)}function Do(n,e,t,r,i,o,s){return XC(e&r|t&~r,n,e,i,o,s)}function To(n,e,t,r,i,o,s){return XC(e^t^r,n,e,i,o,s)}function Mo(n,e,t,r,i,o,s){return XC(t^(e|~r),n,e,i,o,s)}function Lz(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Tk(r,Lle(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Tk(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Tk(r,i),r}function Lle(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var pz="0123456789abcdef".split("");function Vle(n){for(var e="",t=0;t<4;t++)e+=pz[n>>8*t+4&15]+pz[n>>8*t&15];return e}function jle(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Ok(n){return Lz(n).map(jle).join("")}var Ble=(function(n){for(var e=0;e<n.length;e++)n[e]=Vle(n[e]);return n.join("")})(Lz("hello"))!="5d41402abc4b2a76b9719d911017c592";function tf(n,e){if(Ble){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function Fk(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var l=0;for(c=0;c<256;c++){var u=a[c];l=(l+u+s.charCodeAt(c))%256,a[c]=a[l],a[l]=u}t=n,r=a}else a=r;var h=e.length,m=0,g=0,x="";for(c=0;c<h;c++)g=(g+(u=a[m=(m+1)%256]))%256,a[m]=a[g],a[g]=u,s=a[(a[m]+a[g])%256],x+=String.fromCharCode(e.charCodeAt(c)^s);return x}var gz={print:4,modify:8,copy:16,"annot-forms":32};function Lm(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(gz.perm!==void 0)throw new Error("Invalid permission: "+a);i+=gz[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=Ok(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Fk(this.encryptionKey,this.padding)}function Vm(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function mz(n){if(Un(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){Yt.console&&fr.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function QC(n){if(!(this instanceof QC))return new QC(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Vz(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Uh(n,e,t,r,i){if(!(this instanceof Uh))return new Uh(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Vz.call(this,r,i)}function jm(n,e,t,r,i){if(!(this instanceof jm))return new jm(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Vz.call(this,r,i)}function Dt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,c=16,l="S",u=null;Un(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),l=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var h=n.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=mz;var x="1.3",I=g.__private__.getPdfVersion=function(){return x};g.__private__.setPdfVersion=function(v){x=v};var M={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return M};var P=g.__private__.getPageFormat=function(v){return M[v]};i=i||"a4";var Y="compat",B="advanced",K=Y;function oe(){this.saveGraphicsState(),G(new Pt(Xt,0,0,-Xt,0,Ba()*Xt).toString()+" cm"),this.setFontSize(this.getFontSize()/Xt),l="n",K=B}function he(){this.restoreGraphicsState(),l="S",K=Y}var q=g.__private__.combineFontStyleAndFontWeight=function(v,k){if(v=="bold"&&k=="normal"||v=="bold"&&k==400||v=="normal"&&k=="italic"||v=="bold"&&k=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return k&&(v=k==400||k==="normal"?v==="italic"?"italic":"normal":k!=700&&k!=="bold"||v!=="normal"?(k==700?"bold":k)+""+v:"bold"),v};g.advancedAPI=function(v){var k=K===Y;return k&&oe.call(this),typeof v!="function"||(v(this),k&&he.call(this)),this},g.compatAPI=function(v){var k=K===B;return k&&he.call(this),typeof v!="function"||(v(this),k&&oe.call(this)),this},g.isAdvancedAPI=function(){return K===B};var N,S=function(v){if(K!==B)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=g.roundToPrecision=g.__private__.roundToPrecision=function(v,k){var Q=e||k;if(isNaN(v)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Q).replace(/0+$/,"")};N=g.hpf=g.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,16)};var C=g.f2=g.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return V(v,2)},D=g.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return V(v,3)},T=g.scale=g.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return K===Y?v*Xt:K===B?v:void 0},ne=function(v){return T((function(k){return K===Y?Ba()-k:K===B?k:void 0})(v))};g.__private__.setPrecision=g.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var be,Me="00000000000000000000000000000000",Ce=g.__private__.getFileId=function(){return Me},fe=g.__private__.setFileId=function(v){return Me=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():Me.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Qr=new Lm(u.userPermissions,u.userPassword,u.ownerPassword,Me)),Me};g.setFileId=function(v){return fe(v),this},g.getFileId=function(){return Ce()};var De=g.__private__.convertDateToPDFDate=function(v){var k=v.getTimezoneOffset(),Q=k<0?"+":"-",re=Math.floor(Math.abs(k/60)),de=Math.abs(k%60),ke=[Q,J(re),"'",J(de),"'"].join("");return["D:",v.getFullYear(),J(v.getMonth()+1),J(v.getDate()),J(v.getHours()),J(v.getMinutes()),J(v.getSeconds()),ke].join("")},Be=g.__private__.convertPDFDateToDate=function(v){var k=parseInt(v.substr(2,4),10),Q=parseInt(v.substr(6,2),10)-1,re=parseInt(v.substr(8,2),10),de=parseInt(v.substr(10,2),10),ke=parseInt(v.substr(12,2),10),ze=parseInt(v.substr(14,2),10);return new Date(k,Q,re,de,ke,ze,0)},Fe=g.__private__.setCreationDate=function(v){var k;if(v===void 0&&(v=new Date),v instanceof Date)k=De(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");k=v}return be=k},O=g.__private__.getCreationDate=function(v){var k=be;return v==="jsDate"&&(k=Be(be)),k};g.setCreationDate=function(v){return Fe(v),this},g.getCreationDate=function(v){return O(v)};var W,J=g.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},ie=g.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},ce=0,me=[],Ae=[],we=0,Ne=[],Ue=[],et=!1,We=Ae;g.__private__.setCustomOutputDestination=function(v){et=!0,We=v};var ct=function(v){et||(We=v)};g.__private__.resetCustomOutputDestination=function(){et=!1,We=Ae};var G=g.__private__.out=function(v){return v=v.toString(),we+=v.length+1,We.push(v),We},Ke=g.__private__.write=function(v){return G(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Ft=g.__private__.getArrayBuffer=function(v){for(var k=v.length,Q=new ArrayBuffer(k),re=new Uint8Array(Q);k--;)re[k]=v.charCodeAt(k);return Q},It=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return It};var qe=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(v){return qe=K===B?v/Xt:v,this};var Tt,lt=g.__private__.getFontSize=g.getFontSize=function(){return K===Y?qe:qe*Xt},wt=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(v){return wt=v,this},g.__private__.getR2L=g.getR2L=function(){return wt};var St,vn=g.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Tt=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Tt=v}else Tt=parseInt(v,10)};g.__private__.getZoomMode=function(){return Tt};var Qt,zt=g.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');St=v};g.__private__.getPageMode=function(){return St};var Lt=g.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Qt=v};g.__private__.getLayoutMode=function(){return Qt},g.__private__.setDisplayMode=g.setDisplayMode=function(v,k,Q){return vn(v),Lt(k),zt(Q),this};var Vt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(v){if(Object.keys(Vt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vt[v]},g.__private__.getDocumentProperties=function(){return Vt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(v){for(var k in Vt)Vt.hasOwnProperty(k)&&v[k]&&(Vt[k]=v[k]);return this},g.__private__.setDocumentProperty=function(v,k){if(Object.keys(Vt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vt[v]=k};var vt,Xt,At,Rr,_n,an={},cn={},Xn=[],kt={},Jn={},Bt={},Zt={},sr=null,tn=0,jt=[],Sn=new mz(g),Po=n.hotfixes||[],Si={},os={},Ss=[],Pt=function v(k,Q,re,de,ke,ze){if(!(this instanceof v))return new v(k,Q,re,de,ke,ze);isNaN(k)&&(k=1),isNaN(Q)&&(Q=0),isNaN(re)&&(re=0),isNaN(de)&&(de=1),isNaN(ke)&&(ke=0),isNaN(ze)&&(ze=0),this._matrix=[k,Q,re,de,ke,ze]};Object.defineProperty(Pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(v)},Pt.prototype.multiply=function(v){var k=v.sx*this.sx+v.shy*this.shx,Q=v.sx*this.shy+v.shy*this.sy,re=v.shx*this.sx+v.sy*this.shx,de=v.shx*this.shy+v.sy*this.sy,ke=v.tx*this.sx+v.ty*this.shx+this.tx,ze=v.tx*this.shy+v.ty*this.sy+this.ty;return new Pt(k,Q,re,de,ke,ze)},Pt.prototype.decompose=function(){var v=this.sx,k=this.shy,Q=this.shx,re=this.sy,de=this.tx,ke=this.ty,ze=Math.sqrt(v*v+k*k),pt=(v/=ze)*Q+(k/=ze)*re;Q-=v*pt,re-=k*pt;var bt=Math.sqrt(Q*Q+re*re);return pt/=bt,v*(re/=bt)<k*(Q/=bt)&&(v=-v,k=-k,pt=-pt,ze=-ze),{scale:new Pt(ze,0,0,bt,0,0),translate:new Pt(1,0,0,1,de,ke),rotate:new Pt(v,k,-k,v,0,0),skew:new Pt(1,0,pt,1,0,0)}},Pt.prototype.toString=function(v){return this.join(" ")},Pt.prototype.inversed=function(){var v=this.sx,k=this.shy,Q=this.shx,re=this.sy,de=this.tx,ke=this.ty,ze=1/(v*re-k*Q),pt=re*ze,bt=-k*ze,qt=-Q*ze,Kt=v*ze;return new Pt(pt,bt,qt,Kt,-pt*de-qt*ke,-bt*de-Kt*ke)},Pt.prototype.applyToPoint=function(v){var k=v.x*this.sx+v.y*this.shx+this.tx,Q=v.x*this.shy+v.y*this.sy+this.ty;return new Va(k,Q)},Pt.prototype.applyToRectangle=function(v){var k=this.applyToPoint(v),Q=this.applyToPoint(new Va(v.x+v.w,v.y+v.h));return new Du(k.x,k.y,Q.x-k.x,Q.y-k.y)},Pt.prototype.clone=function(){var v=this.sx,k=this.shy,Q=this.shx,re=this.sy,de=this.tx,ke=this.ty;return new Pt(v,k,Q,re,de,ke)},g.Matrix=Pt;var oa=g.matrixMult=function(v,k){return k.multiply(v)},_r=new Pt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=_r;var ko=function(v,k){if(!Jn[v]){var Q=(k instanceof Uh?"Sh":"P")+(Object.keys(kt).length+1).toString(10);k.id=Q,Jn[v]=Q,kt[Q]=k,Sn.publish("addPattern",k)}};g.ShadingPattern=Uh,g.TilingPattern=jm,g.addShadingPattern=function(v,k){return S("addShadingPattern()"),ko(v,k),this},g.beginTilingPattern=function(v){S("beginTilingPattern()"),Tu(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},g.endTilingPattern=function(v,k){S("endTilingPattern()"),k.stream=Ue[W].join(`
`),ko(v,k),Sn.publish("endTilingPattern",k),Ss.pop().restore()};var Ui,er=g.__private__.newObject=function(){var v=pi();return Ai(v,!0),v},pi=g.__private__.newObjectDeferred=function(){return ce++,me[ce]=function(){return we},ce},Ai=function(v,k){return k=typeof k=="boolean"&&k,me[v]=we,k&&G(v+" 0 obj"),v},ss=g.__private__.newAdditionalObject=function(){var v={objId:pi(),content:""};return Ne.push(v),v},Ec=pi(),As=pi(),Ro=g.__private__.decodeColorString=function(v){var k=v.split(" ");if(k.length!==2||k[1]!=="g"&&k[1]!=="G")k.length!==5||k[4]!=="k"&&k[4]!=="K"||(k=[(1-k[0])*(1-k[3]),(1-k[1])*(1-k[3]),(1-k[2])*(1-k[3]),"r"]);else{var Q=parseFloat(k[0]);k=[Q,Q,Q,"r"]}for(var re="#",de=0;de<3;de++)re+=("0"+Math.floor(255*parseFloat(k[de])).toString(16)).slice(-2);return re},as=g.__private__.encodeColorString=function(v){var k;typeof v=="string"&&(v={ch1:v});var Q=v.ch1,re=v.ch2,de=v.ch3,ke=v.ch4,ze=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var pt=new Fz(Q);if(pt.ok)Q=pt.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var bt=parseInt(Q.substr(1),16);Q=bt>>16&255,re=bt>>8&255,de=255&bt}if(re===void 0||ke===void 0&&Q===re&&re===de)k=typeof Q=="string"?Q+" "+ze[0]:v.precision===2?C(Q/255)+" "+ze[0]:D(Q/255)+" "+ze[0];else if(ke===void 0||Un(ke)==="object"){if(ke&&!isNaN(ke.a)&&ke.a===0)return["1.","1.","1.",ze[1]].join(" ");k=typeof Q=="string"?[Q,re,de,ze[1]].join(" "):v.precision===2?[C(Q/255),C(re/255),C(de/255),ze[1]].join(" "):[D(Q/255),D(re/255),D(de/255),ze[1]].join(" ")}else k=typeof Q=="string"?[Q,re,de,ke,ze[2]].join(" "):v.precision===2?[C(Q),C(re),C(de),C(ke),ze[2]].join(" "):[D(Q),D(re),D(de),D(ke),ze[2]].join(" ");return k},Oo=g.__private__.getFilters=function(){return s},Yi=g.__private__.putStream=function(v){var k=(v=v||{}).data||"",Q=v.filters||Oo(),re=v.alreadyAppliedFilters||[],de=v.addLength1||!1,ke=k.length,ze=v.objectId,pt=function(qr){return qr};if(u!==null&&ze===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(pt=Qr.encryptor(ze,0));var bt={};Q===!0&&(Q=["FlateEncode"]);var qt=v.additionalKeyValues||[],Kt=(bt=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(k,Q):{data:k,reverseChain:[]}).reverseChain+(Array.isArray(re)?re.join(" "):re.toString());if(bt.data.length!==0&&(qt.push({key:"Length",value:bt.data.length}),de===!0&&qt.push({key:"Length1",value:ke})),Kt.length!=0)if(Kt.split("/").length-1==1)qt.push({key:"Filter",value:Kt});else{qt.push({key:"Filter",value:"["+Kt+"]"});for(var wn=0;wn<qt.length;wn+=1)if(qt[wn].key==="DecodeParms"){for(var hr=[],nr=0;nr<bt.reverseChain.split("/").length-1;nr+=1)hr.push("null");hr.push(qt[wn].value),qt[wn].value="["+hr.join(" ")+"]"}}G("<<");for(var qn=0;qn<qt.length;qn++)G("/"+qt[qn].key+" "+qt[qn].value);G(">>"),bt.data.length!==0&&(G("stream"),G(pt(bt.data)),G("endstream"))},po=g.__private__.putPage=function(v){var k=v.number,Q=v.data,re=v.objId,de=v.contentsObjId;Ai(re,!0),G("<</Type /Page"),G("/Parent "+v.rootDictionaryObjId+" 0 R"),G("/Resources "+v.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(N(v.mediaBox.bottomLeftX))+" "+parseFloat(N(v.mediaBox.bottomLeftY))+" "+N(v.mediaBox.topRightX)+" "+N(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&G("/CropBox ["+N(v.cropBox.bottomLeftX)+" "+N(v.cropBox.bottomLeftY)+" "+N(v.cropBox.topRightX)+" "+N(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&G("/BleedBox ["+N(v.bleedBox.bottomLeftX)+" "+N(v.bleedBox.bottomLeftY)+" "+N(v.bleedBox.topRightX)+" "+N(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&G("/TrimBox ["+N(v.trimBox.bottomLeftX)+" "+N(v.trimBox.bottomLeftY)+" "+N(v.trimBox.topRightX)+" "+N(v.trimBox.topRightY)+"]"),v.artBox!==null&&G("/ArtBox ["+N(v.artBox.bottomLeftX)+" "+N(v.artBox.bottomLeftY)+" "+N(v.artBox.topRightX)+" "+N(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&G("/UserUnit "+v.userUnit),Sn.publish("putPage",{objId:re,pageContext:jt[k],pageNumber:k,page:Q}),G("/Contents "+de+" 0 R"),G(">>"),G("endobj");var ke=Q.join(`
`);return K===B&&(ke+=`
Q`),Ai(de,!0),Yi({data:ke,filters:Oo(),objectId:de}),G("endobj"),re},Ds=g.__private__.putPages=function(){var v,k,Q=[];for(v=1;v<=tn;v++)jt[v].objId=pi(),jt[v].contentsObjId=pi();for(v=1;v<=tn;v++)Q.push(po({number:v,data:Ue[v],objId:jt[v].objId,contentsObjId:jt[v].contentsObjId,mediaBox:jt[v].mediaBox,cropBox:jt[v].cropBox,bleedBox:jt[v].bleedBox,trimBox:jt[v].trimBox,artBox:jt[v].artBox,userUnit:jt[v].userUnit,rootDictionaryObjId:Ec,resourceDictionaryObjId:As}));Ai(Ec,!0),G("<</Type /Pages");var re="/Kids [";for(k=0;k<tn;k++)re+=Q[k]+" 0 R ";G(re+"]"),G("/Count "+tn),G(">>"),G("endobj"),Sn.publish("postPutPages")},Ic=function(v){Sn.publish("putFont",{font:v,out:G,newObject:er,putStream:Yi}),v.isAlreadyPutted!==!0&&(v.objectNumber=er(),G("<<"),G("/Type /Font"),G("/BaseFont /"+Vm(v.postScriptName)),G("/Subtype /Type1"),typeof v.encoding=="string"&&G("/Encoding /"+v.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},Sc=function(v){v.objectNumber=er();var k=[];k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Form"}),k.push({key:"BBox",value:"["+[N(v.x),N(v.y),N(v.x+v.width),N(v.y+v.height)].join(" ")+"]"}),k.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Q=v.pages[1].join(`
`);Yi({data:Q,additionalKeyValues:k,objectId:v.objectNumber}),G("endobj")},Ac=function(v,k){k||(k=21);var Q=er(),re=(function(ze,pt){var bt,qt=[],Kt=1/(pt-1);for(bt=0;bt<1;bt+=Kt)qt.push(bt);if(qt.push(1),ze[0].offset!=0){var wn={offset:0,color:ze[0].color};ze.unshift(wn)}if(ze[ze.length-1].offset!=1){var hr={offset:1,color:ze[ze.length-1].color};ze.push(hr)}for(var nr="",qn=0,qr=0;qr<qt.length;qr++){for(bt=qt[qr];bt>ze[qn+1].offset;)qn++;var Fr=ze[qn].offset,gi=(bt-Fr)/(ze[qn+1].offset-Fr),us=ze[qn].color,yr=ze[qn+1].color;nr+=ie(Math.round((1-gi)*us[0]+gi*yr[0]).toString(16))+ie(Math.round((1-gi)*us[1]+gi*yr[1]).toString(16))+ie(Math.round((1-gi)*us[2]+gi*yr[2]).toString(16))}return nr.trim()})(v.colors,k),de=[];de.push({key:"FunctionType",value:"0"}),de.push({key:"Domain",value:"[0.0 1.0]"}),de.push({key:"Size",value:"["+k+"]"}),de.push({key:"BitsPerSample",value:"8"}),de.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),de.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Yi({data:re,additionalKeyValues:de,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),G("endobj"),v.objectNumber=er(),G("<< /ShadingType "+v.type),G("/ColorSpace /DeviceRGB");var ke="/Coords ["+N(parseFloat(v.coords[0]))+" "+N(parseFloat(v.coords[1]))+" ";v.type===2?ke+=N(parseFloat(v.coords[2]))+" "+N(parseFloat(v.coords[3])):ke+=N(parseFloat(v.coords[2]))+" "+N(parseFloat(v.coords[3]))+" "+N(parseFloat(v.coords[4]))+" "+N(parseFloat(v.coords[5])),G(ke+="]"),v.matrix&&G("/Matrix ["+v.matrix.toString()+"]"),G("/Function "+Q+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Sl=function(v,k){var Q=pi(),re=er();k.push({resourcesOid:Q,objectOid:re}),v.objectNumber=re;var de=[];de.push({key:"Type",value:"/Pattern"}),de.push({key:"PatternType",value:"1"}),de.push({key:"PaintType",value:"1"}),de.push({key:"TilingType",value:"1"}),de.push({key:"BBox",value:"["+v.boundingBox.map(N).join(" ")+"]"}),de.push({key:"XStep",value:N(v.xStep)}),de.push({key:"YStep",value:N(v.yStep)}),de.push({key:"Resources",value:Q+" 0 R"}),v.matrix&&de.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Yi({data:v.stream,additionalKeyValues:de,objectId:v.objectNumber}),G("endobj")},rp=function(v){for(var k in v.objectNumber=er(),G("<<"),v)switch(k){case"opacity":G("/ca "+C(v[k]));break;case"stroke-opacity":G("/CA "+C(v[k]))}G(">>"),G("endobj")},lf=function(v){Ai(v.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var k in G("/Font <<"),an)an.hasOwnProperty(k)&&(h===!1||h===!0&&m.hasOwnProperty(k))&&G("/"+k+" "+an[k].objectNumber+" 0 R");G(">>")})(),(function(){if(Object.keys(kt).length>0){for(var k in G("/Shading <<"),kt)kt.hasOwnProperty(k)&&kt[k]instanceof Uh&&kt[k].objectNumber>=0&&G("/"+k+" "+kt[k].objectNumber+" 0 R");Sn.publish("putShadingPatternDict"),G(">>")}})(),(function(k){if(Object.keys(kt).length>0){for(var Q in G("/Pattern <<"),kt)kt.hasOwnProperty(Q)&&kt[Q]instanceof g.TilingPattern&&kt[Q].objectNumber>=0&&kt[Q].objectNumber<k&&G("/"+Q+" "+kt[Q].objectNumber+" 0 R");Sn.publish("putTilingPatternDict"),G(">>")}})(v.objectOid),(function(){if(Object.keys(Bt).length>0){var k;for(k in G("/ExtGState <<"),Bt)Bt.hasOwnProperty(k)&&Bt[k].objectNumber>=0&&G("/"+k+" "+Bt[k].objectNumber+" 0 R");Sn.publish("putGStateDict"),G(">>")}})(),(function(){for(var k in G("/XObject <<"),Si)Si.hasOwnProperty(k)&&Si[k].objectNumber>=0&&G("/"+k+" "+Si[k].objectNumber+" 0 R");Sn.publish("putXobjectDict"),G(">>")})(),G(">>"),G("endobj")},Al=function(v){cn[v.fontName]=cn[v.fontName]||{},cn[v.fontName][v.fontStyle]=v.id},uf=function(v,k,Q,re,de){var ke={id:"F"+(Object.keys(an).length+1).toString(10),postScriptName:v,fontName:k,fontStyle:Q,encoding:re,isStandardFont:de||!1,metadata:{}};return Sn.publish("addFont",{font:ke,instance:this}),an[ke.id]=ke,Al(ke),ke.id},go=g.__private__.pdfEscape=g.pdfEscape=function(v,k){return(function(Q,re){var de,ke,ze,pt,bt,qt,Kt,wn,hr;if(ze=(re=re||{}).sourceEncoding||"Unicode",bt=re.outputEncoding,(re.autoencode||bt)&&an[vt].metadata&&an[vt].metadata[ze]&&an[vt].metadata[ze].encoding&&(pt=an[vt].metadata[ze].encoding,!bt&&an[vt].encoding&&(bt=an[vt].encoding),!bt&&pt.codePages&&(bt=pt.codePages[0]),typeof bt=="string"&&(bt=pt[bt]),bt)){for(Kt=!1,qt=[],de=0,ke=Q.length;de<ke;de++)(wn=bt[Q.charCodeAt(de)])?qt.push(String.fromCharCode(wn)):qt.push(Q[de]),qt[de].charCodeAt(0)>>8&&(Kt=!0);Q=qt.join("")}for(de=Q.length;Kt===void 0&&de!==0;)Q.charCodeAt(de-1)>>8&&(Kt=!0),de--;if(!Kt)return Q;for(qt=re.noBOM?[]:[254,255],de=0,ke=Q.length;de<ke;de++){if((hr=(wn=Q.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+Q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(hr),qt.push(wn-(hr<<8))}return String.fromCharCode.apply(void 0,qt)})(v,k).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fa=g.__private__.beginPage=function(v){Ue[++tn]=[],jt[tn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},ip(tn),ct(Ue[W])},sa=function(v,k){var Q,re,de;switch(t=k||t,typeof v=="string"&&(Q=P(v.toLowerCase()),Array.isArray(Q)&&(re=Q[0],de=Q[1])),Array.isArray(v)&&(re=v[0]*Xt,de=v[1]*Xt),isNaN(re)&&(re=i[0],de=i[1]),(re>14400||de>14400)&&(fr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),re=Math.min(14400,re),de=Math.min(14400,de)),i=[re,de],t.substr(0,1)){case"l":de>re&&(i=[de,re]);break;case"p":re>de&&(i=[de,re])}Fa(i),Gt(Au),G(la),Pl!==0&&G(Pl+" J"),tr!==0&&G(tr+" j"),Sn.publish("addPage",{pageNumber:tn})},Dl=function(v){v>0&&v<=tn&&(Ue.splice(v,1),jt.splice(v,1),tn--,W>tn&&(W=tn),this.setPage(W))},ip=function(v){v>0&&v<=tn&&(W=v)},df=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Ue.length-1},ff=function(v,k,Q){var re,de=void 0;return Q=Q||{},v=v!==void 0?v:an[vt].fontName,k=k!==void 0?k:an[vt].fontStyle,re=v.toLowerCase(),cn[re]!==void 0&&cn[re][k]!==void 0?de=cn[re][k]:cn[v]!==void 0&&cn[v][k]!==void 0?de=cn[v][k]:Q.disableWarning===!1&&fr.warn("Unable to look up font label for font '"+v+"', '"+k+"'. Refer to getFontList() for available fonts."),de||Q.noFallback||(de=cn.times[k])==null&&(de=cn.times.normal),de},Ts=g.__private__.putInfo=function(){var v=er(),k=function(re){return re};for(var Q in u!==null&&(k=Qr.encryptor(v,0)),G("<<"),G("/Producer ("+go(k("jsPDF "+Dt.version))+")"),Vt)Vt.hasOwnProperty(Q)&&Vt[Q]&&G("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+go(k(Vt[Q]))+")");G("/CreationDate ("+go(k(be))+")"),G(">>"),G("endobj")},Dc=g.__private__.putCatalog=function(v){var k=(v=v||{}).rootDictionaryObjId||Ec;switch(er(),G("<<"),G("/Type /Catalog"),G("/Pages "+k+" 0 R"),Tt||(Tt="fullwidth"),Tt){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+Tt;Q.substr(Q.length-1)==="%"&&(Tt=parseInt(Tt)/100),typeof Tt=="number"&&G("/OpenAction [3 0 R /XYZ null null "+C(Tt)+"]")}switch(Qt||(Qt="continuous"),Qt){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}St&&G("/PageMode /"+St),Sn.publish("putCatalog"),G(">>"),G("endobj")},hf=g.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(ce+1)),G("/Root "+ce+" 0 R"),G("/Info "+(ce-1)+" 0 R"),u!==null&&G("/Encrypt "+Qr.oid+" 0 R"),G("/ID [ <"+Me+"> <"+Me+"> ]"),G(">>")},Or=g.__private__.putHeader=function(){G("%PDF-"+x),G("%\xBA\xDF\xAC\xE0")},pf=g.__private__.putXRef=function(){var v="0000000000";G("xref"),G("0 "+(ce+1)),G("0000000000 65535 f ");for(var k=1;k<=ce;k++)typeof me[k]=="function"?G((v+me[k]()).slice(-10)+" 00000 n "):me[k]!==void 0?G((v+me[k]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},aa=g.__private__.buildDocument=function(){var v;ce=0,we=0,Ae=[],me=[],Ne=[],Ec=pi(),As=pi(),ct(Ae),Sn.publish("buildDocument"),Or(),Ds(),(function(){Sn.publish("putAdditionalObjects");for(var Q=0;Q<Ne.length;Q++){var re=Ne[Q];Ai(re.objId,!0),G(re.content),G("endobj")}Sn.publish("postPutAdditionalObjects")})(),v=[],(function(){for(var Q in an)an.hasOwnProperty(Q)&&(h===!1||h===!0&&m.hasOwnProperty(Q))&&Ic(an[Q])})(),(function(){var Q;for(Q in Bt)Bt.hasOwnProperty(Q)&&rp(Bt[Q])})(),(function(){for(var Q in Si)Si.hasOwnProperty(Q)&&Sc(Si[Q])})(),(function(Q){var re;for(re in kt)kt.hasOwnProperty(re)&&(kt[re]instanceof Uh?Ac(kt[re]):kt[re]instanceof jm&&Sl(kt[re],Q))})(v),Sn.publish("putResources"),v.forEach(lf),lf({resourcesOid:As,objectOid:Number.MAX_SAFE_INTEGER}),Sn.publish("postPutResources"),u!==null&&(Qr.oid=er(),G("<<"),G("/Filter /Standard"),G("/V "+Qr.v),G("/R "+Qr.r),G("/U <"+Qr.toHexString(Qr.U)+">"),G("/O <"+Qr.toHexString(Qr.O)+">"),G("/P "+Qr.P),G(">>"),G("endobj")),Ts(),Dc();var k=we;return pf(),hf(),G("startxref"),G(""+k),G("%%EOF"),ct(Ue[W]),Ae.join(`
`)},Eu=g.__private__.getBlob=function(v){return new Blob([Ft(v)],{type:"application/pdf"})},gf=g.output=g.__private__.output=(Ui=function(v,k){switch(typeof(k=k||{})=="string"?k={filename:k}:k.filename=k.filename||"generated.pdf",v){case void 0:return aa();case"save":g.save(k.filename);break;case"arraybuffer":return Ft(aa());case"blob":return Eu(aa());case"bloburi":case"bloburl":if(Yt.URL!==void 0&&typeof Yt.URL.createObjectURL=="function")return Yt.URL&&Yt.URL.createObjectURL(Eu(aa()))||void 0;fr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",re=aa();try{Q=hz(re)}catch{Q=hz(unescape(encodeURIComponent(re)))}return"data:application/pdf;filename="+k.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Yt)==="[object Window]"){var de="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';k.pdfObjectUrl&&(de=k.pdfObjectUrl,ke="");var ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+de+'"'+ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(k)+");<\/script></body></html>",pt=Yt.open();return pt!==null&&pt.document.write(ze),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Yt)==="[object Window]"){var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(k.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+k.filename+'" width="500px" height="400px" /></body></html>',qt=Yt.open();if(qt!==null){qt.document.write(bt);var Kt=this;qt.document.documentElement.querySelector("#pdfViewer").onload=function(){qt.document.title=k.filename,qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Kt.output("bloburl"))}}return qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Yt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",k)+'"></iframe></body></html>',hr=Yt.open();if(hr!==null&&(hr.document.write(wn),hr.document.title=k.filename),hr||typeof safari>"u")return hr;break;case"datauri":case"dataurl":return Yt.document.location.href=this.output("datauristring",k);default:return null}},Ui.foo=function(){try{return Ui.apply(this,arguments)}catch(Q){var v=Q.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var k="Error in function "+v.split(`
`)[0].split("<")[0]+": "+Q.message;if(!Yt.console)throw new Error(k);Yt.console.error(k,Q),Yt.alert&&alert(k)}},Ui.foo.bar=Ui,Ui.foo),Fo=function(v){return Array.isArray(Po)===!0&&Po.indexOf(v)>-1};switch(r){case"pt":Xt=1;break;case"mm":Xt=72/25.4;break;case"cm":Xt=72/2.54;break;case"in":Xt=72;break;case"px":Xt=Fo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xt=12;break;case"ex":Xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Xt=r}var Qr=null;Fe(),fe();var Qi=g.__private__.getPageInfo=g.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:jt[v].objId,pageNumber:v,pageContext:jt[v]}},cs=g.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var k in jt)if(jt[k].objId===v)break;return Qi(k)},Iu=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:jt[W].objId,pageNumber:W,pageContext:jt[W]}};g.addPage=function(){return sa.apply(this,arguments),this},g.setPage=function(){return ip.apply(this,arguments),ct.call(this,Ue[W]),this},g.insertPage=function(v){return this.addPage(),this.movePage(W,v),this},g.movePage=function(v,k){var Q,re;if(v>k){Q=Ue[v],re=jt[v];for(var de=v;de>k;de--)Ue[de]=Ue[de-1],jt[de]=jt[de-1];Ue[k]=Q,jt[k]=re,this.setPage(k)}else if(v<k){Q=Ue[v],re=jt[v];for(var ke=v;ke<k;ke++)Ue[ke]=Ue[ke+1],jt[ke]=jt[ke+1];Ue[k]=Q,jt[k]=re,this.setPage(k)}return this},g.deletePage=function(){return Dl.apply(this,arguments),this},g.__private__.text=g.text=function(v,k,Q,re,de){var ke,ze,pt,bt,qt,Kt,wn,hr,nr,qn=(re=re||{}).scope||this;if(typeof v=="number"&&typeof k=="number"&&(typeof Q=="string"||Array.isArray(Q))){var qr=Q;Q=k,k=v,v=qr}if(arguments[3]instanceof Pt==0?(pt=arguments[4],bt=arguments[5],Un(wn=arguments[3])==="object"&&wn!==null||(typeof pt=="string"&&(bt=pt,pt=null),typeof wn=="string"&&(bt=wn,wn=null),typeof wn=="number"&&(pt=wn,wn=null),re={flags:wn,angle:pt,align:bt})):(S("The transform parameter of text() with a Matrix value"),nr=de),isNaN(k)||isNaN(Q)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return qn;var Fr,gi="",us=typeof re.lineHeightFactor=="number"?re.lineHeightFactor:mo,yr=qn.internal.scaleFactor;function da(jn){return jn=jn.split("	").join(Array(re.TabLen||9).join(" ")),go(jn,wn)}function Nu(jn){for(var ar,Xr=jn.concat(),Di=[],Ll=Xr.length;Ll--;)typeof(ar=Xr.shift())=="string"?Di.push(ar):Array.isArray(jn)&&(ar.length===1||ar[1]===void 0&&ar[2]===void 0)?Di.push(ar[0]):Di.push([ar[0],ar[1],ar[2]]);return Di}function ks(jn,ar){var Xr;if(typeof jn=="string")Xr=ar(jn)[0];else if(Array.isArray(jn)){for(var Di,Ll,w0=jn.concat(),dp=[],Jy=w0.length;Jy--;)typeof(Di=w0.shift())=="string"?dp.push(ar(Di)[0]):Array.isArray(Di)&&typeof Di[0]=="string"&&(Ll=ar(Di[0],Di[1],Di[2]),dp.push([Ll[0],Ll[1],Ll[2]]));Xr=dp}return Xr}var f=!1,y=!0;if(typeof v=="string")f=!0;else if(Array.isArray(v)){var E=v.concat();ze=[];for(var U,ue=E.length;ue--;)(typeof(U=E.shift())!="string"||Array.isArray(U)&&typeof U[0]!="string")&&(y=!1);f=y}if(f===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Ee=qe/qn.internal.scaleFactor,Xe=Ee*(us-1);switch(re.baseline){case"bottom":Q-=Xe;break;case"top":Q+=Ee-Xe;break;case"hanging":Q+=Ee-2*Xe;break;case"middle":Q+=Ee/2-Xe}if((Kt=re.maxWidth||0)>0&&(typeof v=="string"?v=qn.splitTextToSize(v,Kt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(jn,ar){return jn.concat(qn.splitTextToSize(ar,Kt))},[]))),ke={text:v,x:k,y:Q,options:re,mutex:{pdfEscape:go,activeFontKey:vt,fonts:an,activeFontSize:qe}},Sn.publish("preProcessText",ke),v=ke.text,pt=(re=ke.options).angle,nr instanceof Pt==0&&pt&&typeof pt=="number"){pt*=Math.PI/180,re.rotationDirection===0&&(pt=-pt),K===B&&(pt=-pt);var Tn=Math.cos(pt),Lr=Math.sin(pt);nr=new Pt(Tn,Lr,-Lr,Tn,0,0)}else pt&&pt instanceof Pt&&(nr=pt);K!==B||nr||(nr=_r),(qt=re.charSpace||Lo)!==void 0&&(gi+=N(T(qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(hr=re.horizontalScale)!==void 0&&(gi+=N(100*hr)+` Tz
`),re.lang;var Wt=-1,pr=re.renderingMode!==void 0?re.renderingMode:re.stroke,Vr=qn.internal.getCurrentPageInfo().pageContext;switch(pr){case 0:case!1:case"fill":Wt=0;break;case 1:case!0:case"stroke":Wt=1;break;case 2:case"fillThenStroke":Wt=2;break;case 3:case"invisible":Wt=3;break;case 4:case"fillAndAddForClipping":Wt=4;break;case 5:case"strokeAndAddPathForClipping":Wt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wt=6;break;case 7:case"addToPathForClipping":Wt=7}var Ua=Vr.usedRenderingMode!==void 0?Vr.usedRenderingMode:-1;Wt!==-1?gi+=Wt+` Tr
`:Ua!==-1&&(gi+=`0 Tr
`),Wt!==-1&&(Vr.usedRenderingMode=Wt),bt=re.align||"left";var Ir,fa=qe*us,Ol=qn.internal.pageSize.getWidth(),p0=an[vt];qt=re.charSpace||Lo,Kt=re.maxWidth||0,wn=Object.assign({autoencode:!0,noBOM:!0},re.flags);var Pu=[],yf=function(jn){return qn.getStringUnitWidth(jn,{font:p0,charSpace:qt,fontSize:qe,doKerning:!1})*qe/yr};if(Object.prototype.toString.call(v)==="[object Array]"){var Rs;ze=Nu(v),bt!=="left"&&(Ir=ze.map(yf));var Os,ku=0;if(bt==="right"){k-=Ir[0],v=[],ue=ze.length;for(var Fl=0;Fl<ue;Fl++)Fl===0?(Os=La(k),Rs=zi(Q)):(Os=T(ku-Ir[Fl]),Rs=-fa),v.push([ze[Fl],Os,Rs]),ku=Ir[Fl]}else if(bt==="center"){k-=Ir[0]/2,v=[],ue=ze.length;for(var Ru=0;Ru<ue;Ru++)Ru===0?(Os=La(k),Rs=zi(Q)):(Os=T((ku-Ir[Ru])/2),Rs=-fa),v.push([ze[Ru],Os,Rs]),ku=Ir[Ru]}else if(bt==="left"){v=[],ue=ze.length;for(var g0=0;g0<ue;g0++)v.push(ze[g0])}else if(bt==="justify"&&p0.encoding==="Identity-H"){v=[],ue=ze.length,Kt=Kt!==0?Kt:Ol;for(var up=0,Zr=0;Zr<ue;Zr++)if(Rs=Zr===0?zi(Q):-fa,Os=Zr===0?La(k):up,Zr<ue-1){var Xy=T((Kt-Ir[Zr])/(ze[Zr].split(" ").length-1)),Pc=ze[Zr].split(" ");v.push([Pc[0]+" ",Os,Rs]),up=0;for(var kc=1;kc<Pc.length;kc++){var m0=(yf(Pc[kc-1]+" "+Pc[kc])-yf(Pc[kc]))*yr+Xy;kc==Pc.length-1?v.push([Pc[kc],m0,0]):v.push([Pc[kc]+" ",m0,0]),up-=m0}}else v.push([ze[Zr],Os,Rs]);v.push(["",up,0])}else{if(bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],ue=ze.length,Kt=Kt!==0?Kt:Ol,Zr=0;Zr<ue;Zr++){Rs=Zr===0?zi(Q):-fa,Os=Zr===0?La(k):0;var v0=ze[Zr].split(" ").length-1,_0=v0>0?(Kt-Ir[Zr])/v0:0;Zr<ue-1?Pu.push(N(T(_0))):Pu.push(0),v.push([ze[Zr],Os,Rs])}}}(typeof re.R2L=="boolean"?re.R2L:wt)===!0&&(v=ks(v,function(jn,ar,Xr){return[jn.split("").reverse().join(""),ar,Xr]})),ke={text:v,x:k,y:Q,options:re,mutex:{pdfEscape:go,activeFontKey:vt,fonts:an,activeFontSize:qe}},Sn.publish("postProcessText",ke),v=ke.text,Fr=ke.mutex.isHex||!1;var y0=an[vt].encoding;y0!=="WinAnsiEncoding"&&y0!=="StandardEncoding"||(v=ks(v,function(jn,ar,Xr){return[da(jn),ar,Xr]})),ze=Nu(v),v=[];for(var Ou,Fu,Lu,wf=Array.isArray(ze[0])?1:0,Vu="",bf=function(jn,ar,Xr){var Di="";return Xr instanceof Pt?(Xr=typeof re.angle=="number"?oa(Xr,new Pt(1,0,0,1,jn,ar)):oa(new Pt(1,0,0,1,jn,ar),Xr),K===B&&(Xr=oa(new Pt(1,0,0,-1,0,0),Xr)),Di=Xr.join(" ")+` Tm
`):Di=N(jn)+" "+N(ar)+` Td
`,Di},ha=0;ha<ze.length;ha++){switch(Vu="",wf){case 1:Lu=(Fr?"<":"(")+ze[ha][0]+(Fr?">":")"),Ou=parseFloat(ze[ha][1]),Fu=parseFloat(ze[ha][2]);break;case 0:Lu=(Fr?"<":"(")+ze[ha]+(Fr?">":")"),Ou=La(k),Fu=zi(Q)}Pu!==void 0&&Pu[ha]!==void 0&&(Vu=Pu[ha]+` Tw
`),ha===0?v.push(Vu+bf(Ou,Fu,nr)+Lu):wf===0?v.push(Vu+Lu):wf===1&&v.push(Vu+bf(Ou,Fu,nr)+Lu)}v=wf===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var Rc=`BT
/`;return Rc+=vt+" "+qe+` Tf
`,Rc+=N(qe*us)+` TL
`,Rc+=Nc+`
`,Rc+=gi,Rc+=v,G(Rc+="ET"),m[vt]=!0,qn};var Su=g.__private__.clip=g.clip=function(v){return G(v==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Su("evenodd")},g.__private__.discardPath=g.discardPath=function(){return G("n"),this};var Ms=g.__private__.isValidStyle=function(v){var k=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(k=!0),k};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(v){return Ms(v)&&(l=v),this};var Vn=g.__private__.getStyle=g.getStyle=function(v){var k=l;switch(v){case"D":case"S":k="S";break;case"F":k="f";break;case"FD":case"DF":k="B";break;case"f":case"f*":case"B":case"B*":k=v}return k},Tl=g.close=function(){return G("h"),this};g.stroke=function(){return G("S"),this},g.fill=function(v){return ca("f",v),this},g.fillEvenOdd=function(v){return ca("f*",v),this},g.fillStroke=function(v){return ca("B",v),this},g.fillStrokeEvenOdd=function(v){return ca("B*",v),this};var ca=function(v,k){Un(k)==="object"?op(k,v):G(v)},Ns=function(v){v===null||K===B&&v===void 0||(v=Vn(v),G(v))};function c0(v,k,Q,re,de){var ke=new jm(k||this.boundingBox,Q||this.xStep,re||this.yStep,this.gState,de||this.matrix);ke.stream=this.stream;var ze=v+"$$"+this.cloneIndex+++"$$";return ko(ze,ke),ke}var op=function(v,k){var Q=Jn[v.key],re=kt[Q];if(re instanceof Uh)G("q"),G(l0(k)),re.gState&&g.setGState(re.gState),G(v.matrix.toString()+" cm"),G("/"+Q+" sh"),G("Q");else if(re instanceof jm){var de=new Pt(1,0,0,-1,0,Ba());v.matrix&&(de=de.multiply(v.matrix||_r),Q=c0.call(re,v.key,v.boundingBox,v.xStep,v.yStep,de).id),G("q"),G("/Pattern cs"),G("/"+Q+" scn"),re.gState&&g.setGState(re.gState),G(k),G("Q")}},l0=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},mf=g.moveTo=function(v,k){return G(N(T(v))+" "+N(ne(k))+" m"),this},sp=g.lineTo=function(v,k){return G(N(T(v))+" "+N(ne(k))+" l"),this},Ps=g.curveTo=function(v,k,Q,re,de,ke){return G([N(T(v)),N(ne(k)),N(T(Q)),N(ne(re)),N(T(de)),N(ne(ke)),"c"].join(" ")),this};g.__private__.line=g.line=function(v,k,Q,re,de){if(isNaN(v)||isNaN(k)||isNaN(Q)||isNaN(re)||!Ms(de))throw new Error("Invalid arguments passed to jsPDF.line");return K===Y?this.lines([[Q-v,re-k]],v,k,[1,1],de||"S"):this.lines([[Q-v,re-k]],v,k,[1,1]).stroke()},g.__private__.lines=g.lines=function(v,k,Q,re,de,ke){var ze,pt,bt,qt,Kt,wn,hr,nr,qn,qr,Fr,gi;if(typeof v=="number"&&(gi=Q,Q=k,k=v,v=gi),re=re||[1,1],ke=ke||!1,isNaN(k)||isNaN(Q)||!Array.isArray(v)||!Array.isArray(re)||!Ms(de)||typeof ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mf(k,Q),ze=re[0],pt=re[1],qt=v.length,qr=k,Fr=Q,bt=0;bt<qt;bt++)(Kt=v[bt]).length===2?(qr=Kt[0]*ze+qr,Fr=Kt[1]*pt+Fr,sp(qr,Fr)):(wn=Kt[0]*ze+qr,hr=Kt[1]*pt+Fr,nr=Kt[2]*ze+qr,qn=Kt[3]*pt+Fr,qr=Kt[4]*ze+qr,Fr=Kt[5]*pt+Fr,Ps(wn,hr,nr,qn,qr,Fr));return ke&&Tl(),Ns(de),this},g.path=function(v){for(var k=0;k<v.length;k++){var Q=v[k],re=Q.c;switch(Q.op){case"m":mf(re[0],re[1]);break;case"l":sp(re[0],re[1]);break;case"c":Ps.apply(this,re);break;case"h":Tl()}}return this},g.__private__.rect=g.rect=function(v,k,Q,re,de){if(isNaN(v)||isNaN(k)||isNaN(Q)||isNaN(re)||!Ms(de))throw new Error("Invalid arguments passed to jsPDF.rect");return K===Y&&(re=-re),G([N(T(v)),N(ne(k)),N(T(Q)),N(T(re)),"re"].join(" ")),Ns(de),this},g.__private__.triangle=g.triangle=function(v,k,Q,re,de,ke,ze){if(isNaN(v)||isNaN(k)||isNaN(Q)||isNaN(re)||isNaN(de)||isNaN(ke)||!Ms(ze))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-v,re-k],[de-Q,ke-re],[v-de,k-ke]],v,k,[1,1],ze,!0),this},g.__private__.roundedRect=g.roundedRect=function(v,k,Q,re,de,ke,ze){if(isNaN(v)||isNaN(k)||isNaN(Q)||isNaN(re)||isNaN(de)||isNaN(ke)||!Ms(ze))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return de=Math.min(de,.5*Q),ke=Math.min(ke,.5*re),this.lines([[Q-2*de,0],[de*pt,0,de,ke-ke*pt,de,ke],[0,re-2*ke],[0,ke*pt,-de*pt,ke,-de,ke],[2*de-Q,0],[-de*pt,0,-de,-ke*pt,-de,-ke],[0,2*ke-re],[0,-ke*pt,de*pt,-ke,de,-ke]],v+de,k,[1,1],ze,!0),this},g.__private__.ellipse=g.ellipse=function(v,k,Q,re,de){if(isNaN(v)||isNaN(k)||isNaN(Q)||isNaN(re)||!Ms(de))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ke=4/3*(Math.SQRT2-1)*Q,ze=4/3*(Math.SQRT2-1)*re;return mf(v+Q,k),Ps(v+Q,k-ze,v+ke,k-re,v,k-re),Ps(v-ke,k-re,v-Q,k-ze,v-Q,k),Ps(v-Q,k+ze,v-ke,k+re,v,k+re),Ps(v+ke,k+re,v+Q,k+ze,v+Q,k),Ns(de),this},g.__private__.circle=g.circle=function(v,k,Q,re){if(isNaN(v)||isNaN(k)||isNaN(Q)||!Ms(re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,k,Q,Q,re)},g.setFont=function(v,k,Q){return Q&&(k=q(k,Q)),vt=ff(v,k,{disableWarning:!1}),this};var Ml=g.__private__.getFont=g.getFont=function(){return an[ff.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var v,k,Q={};for(v in cn)if(cn.hasOwnProperty(v))for(k in Q[v]=[],cn[v])cn[v].hasOwnProperty(k)&&Q[v].push(k);return Q},g.addFont=function(v,k,Q,re,de){var ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ke.indexOf(arguments[3])!==-1?de=arguments[3]:arguments[3]&&ke.indexOf(arguments[3])==-1&&(Q=q(Q,re)),uf.call(this,v,k,Q,de=de||"Identity-H")};var mo,Au=n.lineWidth||.200025,ap=g.__private__.getLineWidth=g.getLineWidth=function(){return Au},Gt=g.__private__.setLineWidth=g.setLineWidth=function(v){return Au=v,G(N(T(v))+" w"),this};g.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(v,k){if(v=v||[],k=k||0,isNaN(k)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Q){return N(T(Q))}).join(" "),k=N(T(k)),G("["+v+"] "+k+" d"),this};var Tc=g.__private__.getLineHeight=g.getLineHeight=function(){return qe*mo};g.__private__.getLineHeight=g.getLineHeight=function(){return qe*mo};var u0=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(mo=v),this},d0=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return mo};u0(n.lineHeight);var La=g.__private__.getHorizontalCoordinate=function(v){return T(v)},zi=g.__private__.getVerticalCoordinate=function(v){return K===B?v:jt[W].mediaBox.topRightY-jt[W].mediaBox.bottomLeftY-T(v)},f0=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(v){return N(La(v))},h0=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(v){return N(zi(v))},la=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Ro(la)},g.__private__.setStrokeColor=g.setDrawColor=function(v,k,Q,re){return la=as({ch1:v,ch2:k,ch3:Q,ch4:re,pdfColorType:"draw",precision:2}),G(la),this};var Mc=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Ro(Mc)},g.__private__.setFillColor=g.setFillColor=function(v,k,Q,re){return Mc=as({ch1:v,ch2:k,ch3:Q,ch4:re,pdfColorType:"fill",precision:2}),G(Mc),this};var Nc=n.textColor||"0 g",Nl=g.__private__.getTextColor=g.getTextColor=function(){return Ro(Nc)};g.__private__.setTextColor=g.setTextColor=function(v,k,Q,re){return Nc=as({ch1:v,ch2:k,ch3:Q,ch4:re,pdfColorType:"text",precision:3}),this};var Lo=n.charSpace,cp=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Lo||0)};g.__private__.setCharSpace=g.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Lo=v,this};var Pl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(v){var k=g.CapJoinStyles[v];if(k===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Pl=k,G(k+" J"),this};var tr=0;g.__private__.setLineJoin=g.setLineJoin=function(v){var k=g.CapJoinStyles[v];if(k===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tr=k,G(k+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(N(T(v))+" M"),this},g.GState=QC,g.setGState=function(v){(v=typeof v=="string"?Bt[Zt[v]]:lp(null,v)).equals(sr)||(G("/"+v.id+" gs"),sr=v)};var lp=function(v,k){if(!v||!Zt[v]){var Q=!1;for(var re in Bt)if(Bt.hasOwnProperty(re)&&Bt[re].equals(k)){Q=!0;break}if(Q)k=Bt[re];else{var de="GS"+(Object.keys(Bt).length+1).toString(10);Bt[de]=k,k.id=de}return v&&(Zt[v]=k.id),Sn.publish("addGState",k),k}};g.addGState=function(v,k){return lp(v,k),this},g.saveGraphicsState=function(){return G("q"),Xn.push({key:vt,size:qe,color:Nc}),this},g.restoreGraphicsState=function(){G("Q");var v=Xn.pop();return vt=v.key,qe=v.size,Nc=v.color,sr=null,this},g.setCurrentTransformationMatrix=function(v){return G(v.toString()+" cm"),this},g.comment=function(v){return G("#"+v),this};var Va=function(v,k){var Q=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(ke){isNaN(ke)||(Q=parseFloat(ke))}});var re=k||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return re},set:function(ke){isNaN(ke)||(re=parseFloat(ke))}});var de="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return de},set:function(ke){de=ke.toString()}}),this},Du=function(v,k,Q,re){Va.call(this,v,k),this.type="rect";var de=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return de},set:function(ze){isNaN(ze)||(de=parseFloat(ze))}});var ke=re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ke},set:function(ze){isNaN(ze)||(ke=parseFloat(ze))}}),this},kl=function(){this.page=tn,this.currentPage=W,this.pages=Ue.slice(0),this.pagesContext=jt.slice(0),this.x=At,this.y=Rr,this.matrix=_n,this.width=Mu(W),this.height=vf(W),this.outputDestination=We,this.id="",this.objectNumber=-1};kl.prototype.restore=function(){tn=this.page,W=this.currentPage,jt=this.pagesContext,Ue=this.pages,At=this.x,Rr=this.y,_n=this.matrix,ls(W,this.width),ja(W,this.height),We=this.outputDestination};var Tu=function(v,k,Q,re,de){Ss.push(new kl),tn=W=0,Ue=[],At=v,Rr=k,_n=de,Fa([Q,re])};for(var ua in g.beginFormObject=function(v,k,Q,re,de){return Tu(v,k,Q,re,de),this},g.endFormObject=function(v){return(function(k){if(os[k])Ss.pop().restore();else{var Q=new kl,re="Xo"+(Object.keys(Si).length+1).toString(10);Q.id=re,os[k]=re,Si[re]=Q,Sn.publish("addFormObject",Q),Ss.pop().restore()}})(v),this},g.doFormObject=function(v,k){var Q=Si[os[v]];return G("q"),G(k.toString()+" cm"),G("/"+Q.id+" Do"),G("Q"),this},g.getFormObject=function(v){var k=Si[os[v]];return{x:k.x,y:k.y,width:k.width,height:k.height,matrix:k.matrix}},g.save=function(v,k){return v=v||"generated.pdf",(k=k||{}).returnPromise=k.returnPromise||!1,k.returnPromise===!1?(Bh(Eu(aa()),v),typeof Bh.unload=="function"&&Yt.setTimeout&&setTimeout(Bh.unload,911),this):new Promise(function(Q,re){try{var de=Bh(Eu(aa()),v);typeof Bh.unload=="function"&&Yt.setTimeout&&setTimeout(Bh.unload,911),Q(de)}catch(ke){re(ke.message)}})},Dt.API)Dt.API.hasOwnProperty(ua)&&(ua==="events"&&Dt.API.events.length?(function(v,k){var Q,re,de;for(de=k.length-1;de!==-1;de--)Q=k[de][0],re=k[de][1],v.subscribe.apply(v,[Q].concat(typeof re=="function"?[re]:re))})(Sn,Dt.API.events):g[ua]=Dt.API[ua]);function Mu(v){return jt[v].mediaBox.topRightX-jt[v].mediaBox.bottomLeftX}function ls(v,k){jt[v].mediaBox.topRightX=k+jt[v].mediaBox.bottomLeftX}function vf(v){return jt[v].mediaBox.topRightY-jt[v].mediaBox.bottomLeftY}function ja(v,k){jt[v].mediaBox.topRightY=k+jt[v].mediaBox.bottomLeftY}var Vo=g.getPageWidth=function(v){return Mu(v=v||W)/Xt},_f=g.setPageWidth=function(v,k){ls(v,k*Xt)},Ba=g.getPageHeight=function(v){return vf(v=v||W)/Xt},Rl=g.setPageHeight=function(v,k){ja(v,k*Xt)};return g.internal={pdfEscape:go,getStyle:Vn,getFont:Ml,getFontSize:lt,getCharSpace:cp,getTextColor:Nl,getLineHeight:Tc,getLineHeightFactor:d0,getLineWidth:ap,write:Ke,getHorizontalCoordinate:La,getVerticalCoordinate:zi,getCoordinateString:f0,getVerticalCoordinateString:h0,collections:{},newObject:er,newAdditionalObject:ss,newObjectDeferred:pi,newObjectDeferredBegin:Ai,getFilters:Oo,putStream:Yi,events:Sn,scaleFactor:Xt,pageSize:{getWidth:function(){return Vo(W)},setWidth:function(v){_f(W,v)},getHeight:function(){return Ba(W)},setHeight:function(v){Rl(W,v)}},encryptionOptions:u,encryption:Qr,getEncryptor:function(v){return u!==null?Qr.encryptor(v,0):function(k){return k}},output:gf,getNumberOfPages:df,get pages(){return Ue},out:G,f2:C,f3:D,getPageInfo:Qi,getPageInfoByObjId:cs,getCurrentPageInfo:Iu,getPDFVersion:I,Point:Va,Rectangle:Du,Matrix:Pt,hasHotfix:Fo},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Vo(W)},set:function(v){_f(W,v)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ba(W)},set:function(v){Rl(W,v)},enumerable:!0,configurable:!0}),(function(v){for(var k=0,Q=It.length;k<Q;k++){var re=uf.call(this,v[k][0],v[k][1],v[k][2],It[k][3],!0);h===!1&&(m[re]=!0);var de=v[k][0].split("-");Al({id:re,fontName:de[0],fontStyle:de[1]||""})}Sn.publish("addFonts",{fonts:an,dictionary:cn})}).call(g,It),vt="F1",sa(i,t),Sn.publish("initialized"),g}Lm.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Lm.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Lm.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Lm.prototype.processOwnerPassword=function(n,e){return Fk(Ok(e).substr(0,5),n)},Lm.prototype.encryptor=function(n,e){var t=Ok(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Fk(t,r)}},QC.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Un(n)!==Un(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Dt.API={events:[]},Dt.version="3.0.4";var Yr=Dt.API,jk=1,qh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Om=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rn=function(n){return n.toFixed(2)},ef=function(n){return n.toFixed(5)};Yr.__acroform__={};var Es=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},vz=function(n){return n*jk},wl=function(n){var e=new Bz,t=yt.internal.getHeight(n)||0,r=yt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(rn(r)),Number(rn(t))],e},Ule=Yr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},zle=Yr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},qle=Yr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},di=Yr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qle(n,e-1)},fi=Yr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Ule(n,e-1)},hi=Yr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zle(n,e-1)},Hle=Yr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(o+a)||0,c.upperRight_X=t(i+s)||0,c.upperRight_Y=r(o)||0,[Number(rn(c.lowerLeft_X)),Number(rn(c.lowerLeft_Y)),Number(rn(c.upperRight_X)),Number(rn(c.upperRight_Y))]},$le=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Lk(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+rn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=wl(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},Lk=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(C){return C.split(`
`)}):i.map(function(C){return[C]});var o=t,s=yt.internal.getHeight(n)||0;s=s<0?-s:s;var a=yt.internal.getWidth(n)||0;a=a<0?-a:a;var c=function(C,D,T){if(C+1<i.length){var ne=D+" "+i[C+1][0];return zC(ne,n,T).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var l,u,h=zC("3",n,o).height,m=n.multiline?s-o:(s-h)/2,g=m+=2,x=0,I=0,M=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+zC(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var P="",Y=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var K=!1;if(i[B].length!==1&&M!==i[B].length-1){if((h+2)*(Y+2)+2>s)continue e;P+=i[B][M],K=!0,I=B,B--}else{P=(P+=i[B][M]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var oe=parseInt(B),he=c(oe,P,o),q=B>=i.length-1;if(he&&!q){P+=" ",M=0;continue}if(he||q){if(q)I=oe;else if(n.multiline&&(h+2)*(Y+2)+2>s)continue e}else{if(!n.multiline||(h+2)*(Y+2)+2>s)continue e;I=oe}}for(var N="",S=x;S<=I;S++){var V=i[S];if(n.multiline){if(S===I){N+=V[M]+" ",M=(M+1)%V.length;continue}if(S===x){N+=V[V.length-1]+" ";continue}}N+=V[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,u=zC(N,n,o).width,n.textAlign){case"right":l=a-u-2;break;case"center":l=(a-u)/2;break;default:l=2}e+=rn(l)+" "+rn(g)+` Td
`,e+="("+qh(N)+`) Tj
`,e+=-rn(l)+` 0 Td
`,g=-(o+2),u=0,x=K?I:I+1,Y++,P=""}break}return r.text=e,r.fontSize=o,r},zC=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},Gle={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Wle=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Kle=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(bc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Gle)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");jk=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Uz,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Wle(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],c=[],l=a.Rect;if(a.Rect&&(a.Rect=Hle(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=yt.createDefaultAppearanceStream(a),Un(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=l,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=$le(a);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var h="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var g=a.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var s in g)if(g.hasOwnProperty(s)){var x=g[s];typeof x=="function"&&(x=x.call(i,a)),h+="/"+s+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=g)=="function"&&(x=x.call(i,a)),h+="/"+s+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}o&&(function(I,M){for(var P in I)if(I.hasOwnProperty(P)){var Y=P,B=I[P];M.internal.newObjectDeferredBegin(B.objId,!0),Un(B)==="object"&&typeof B.putStream=="function"&&B.putStream(),delete I[Y]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},jz=Yr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Un(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+qh(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Mk=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+qh(r(n))+")"},bl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};bl.prototype.toString=function(){return this.objId+" 0 R"},bl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},bl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:jz(i,this.objId,this.scope)}):i instanceof bl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var Bz=function(){bl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Es(Bz,bl);var Uz=function(){bl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+qh(t(n))+")"}},set:function(t){n=t}})};Es(Uz,bl);var bc=function n(){bl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');e=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!di(e,3)},set:function(P){P?this.F=fi(e,3):this.F=hi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');t=P}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(P){r=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(P){r[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(P){r[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(P){r[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(P){r[3]=P}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof ZC)return;o="FieldObject"+n.FieldNum++}var P=function(Y){return Y};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+qh(P(o))+")"},set:function(P){o=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(P){o=P}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(P){s=P}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(P){a=P}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(P){c=P}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/jk:l},set:function(P){l=P}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(P){u=P}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof ZC||this instanceof zh))return Mk(h,this.objId,this.scope)},set:function(P){P=P.toString(),h=P}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ki==0?Mk(m,this.objId,this.scope):m},set:function(P){P=P.toString(),m=this instanceof Ki==0?P.substr(0,1)==="("?Om(P.substr(1,P.length-2)):Om(P):P}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki==1?Om(m.substr(1,m.length-1)):m},set:function(P){P=P.toString(),m=this instanceof Ki==1?"/"+P:P}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ki==0?Mk(g,this.objId,this.scope):g},set:function(P){P=P.toString(),g=this instanceof Ki==0?P.substr(0,1)==="("?Om(P.substr(1,P.length-2)):Om(P):P}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki==1?Om(g.substr(1,g.length-1)):g},set:function(P){P=P.toString(),g=this instanceof Ki==1?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(P){P=!!P,I=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(P){x=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,1)},set:function(P){P?this.Ff=fi(this.Ff,1):this.Ff=hi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,2)},set:function(P){P?this.Ff=fi(this.Ff,2):this.Ff=hi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,3)},set:function(P){P?this.Ff=fi(this.Ff,3):this.Ff=hi(this.Ff,3)}});var M=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(M!==null)return M},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');M=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(M){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:M=2;break;case"center":case 1:M=1;break;default:M=0}}})};Es(bc,bl);var Bm=function(){bc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return jz(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,s,a){a||(a=1);for(var c,l=[];c=s.exec(o);)l.push(c[a]);return l})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,18)},set:function(t){t?this.Ff=fi(this.Ff,18):this.Ff=hi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=fi(this.Ff,19):this.Ff=hi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,20)},set:function(t){t?(this.Ff=fi(this.Ff,20),e.sort()):this.Ff=hi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,22)},set:function(t){t?this.Ff=fi(this.Ff,22):this.Ff=hi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,23)},set:function(t){t?this.Ff=fi(this.Ff,23):this.Ff=hi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,27)},set:function(t){t?this.Ff=fi(this.Ff,27):this.Ff=hi(this.Ff,27)}}),this.hasAppearanceStream=!1};Es(Bm,bc);var Um=function(){Bm.call(this),this.fontName="helvetica",this.combo=!1};Es(Um,Bm);var zm=function(){Um.call(this),this.combo=!0};Es(zm,Um);var GC=function(){zm.call(this),this.edit=!0};Es(GC,zm);var Ki=function(){bc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,15)},set:function(t){t?this.Ff=fi(this.Ff,15):this.Ff=hi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,16)},set:function(t){t?this.Ff=fi(this.Ff,16):this.Ff=hi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,17)},set:function(t){t?this.Ff=fi(this.Ff,17):this.Ff=hi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,26)},set:function(t){t?this.Ff=fi(this.Ff,26):this.Ff=hi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+qh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Un(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Es(Ki,bc);var WC=function(){Ki.call(this),this.pushButton=!0};Es(WC,Ki);var qm=function(){Ki.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Es(qm,Ki);var ZC=function(){var n,e;bc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+qh(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Un(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Es(ZC,bc),qm.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},qm.prototype.createOption=function(n){var e=new ZC;return e.Parent=this,e.optionName=n,this.Kids.push(e),Yle.call(this.scope,e),e};var KC=function(){Ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};Es(KC,Ki);var zh=function(){bc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,13)},set:function(e){e?this.Ff=fi(this.Ff,13):this.Ff=hi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,21)},set:function(e){e?this.Ff=fi(this.Ff,21):this.Ff=hi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,23)},set:function(e){e?this.Ff=fi(this.Ff,23):this.Ff=hi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,24)},set:function(e){e?this.Ff=fi(this.Ff,24):this.Ff=hi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,25)},set:function(e){e?this.Ff=fi(this.Ff,25):this.Ff=hi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,26)},set:function(e){e?this.Ff=fi(this.Ff,26):this.Ff=hi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Es(zh,bc);var YC=function(){zh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,14)},set:function(n){n?this.Ff=fi(this.Ff,14):this.Ff=hi(this.Ff,14)}}),this.password=!0};Es(YC,zh);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=wl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=Lk(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+rn(yt.internal.getWidth(n))+" "+rn(yt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+rn(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=wl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=yt.internal.getHeight(n),s=yt.internal.getWidth(n),a=Lk(n,n.caption);return i.push("1 g"),i.push("0 0 "+rn(s)+" "+rn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+rn(s-1)+" "+rn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+rn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=wl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(yt.internal.getWidth(n))+" "+rn(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Circle.YesNormal,e.D[n]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=wl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=yt.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+ef(yt.internal.getWidth(n)/2)+" "+ef(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=wl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*yt.internal.Bezier_C).toFixed(5)),s=Number((r*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ef(yt.internal.getWidth(n)/2)+" "+ef(yt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+ef(yt.internal.getWidth(n)/2)+" "+ef(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=wl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ef(yt.internal.getWidth(n)/2)+" "+ef(yt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Cross.YesNormal,e.D[n]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=wl(n);e.scope=n.scope;var t=[],r=yt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+rn(yt.internal.getWidth(n)-2)+" "+rn(yt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(rn(r.x1.x)+" "+rn(r.x1.y)+" m"),t.push(rn(r.x2.x)+" "+rn(r.x2.y)+" l"),t.push(rn(r.x4.x)+" "+rn(r.x4.y)+" m"),t.push(rn(r.x3.x)+" "+rn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=wl(n);e.scope=n.scope;var t=yt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+rn(yt.internal.getWidth(n))+" "+rn(yt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+rn(yt.internal.getWidth(n)-2)+" "+rn(yt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(rn(t.x1.x)+" "+rn(t.x1.y)+" m"),r.push(rn(t.x2.x)+" "+rn(t.x2.y)+" l"),r.push(rn(t.x4.x)+" "+rn(t.x4.y)+" m"),r.push(rn(t.x3.x)+" "+rn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=wl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(yt.internal.getWidth(n))+" "+rn(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=yt.internal.getWidth(n),t=yt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},yt.internal.getWidth=function(n){var e=0;return Un(n)==="object"&&(e=vz(n.Rect[2])),e},yt.internal.getHeight=function(n){var e=0;return Un(n)==="object"&&(e=vz(n.Rect[3])),e};var Yle=Yr.addField=function(n){if(Kle(this,n),!(n instanceof bc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Yr.AcroFormChoiceField=Bm,Yr.AcroFormListBox=Um,Yr.AcroFormComboBox=zm,Yr.AcroFormEditBox=GC,Yr.AcroFormButton=Ki,Yr.AcroFormPushButton=WC,Yr.AcroFormRadioButton=qm,Yr.AcroFormCheckBox=KC,Yr.AcroFormTextField=zh,Yr.AcroFormPasswordField=YC,Yr.AcroFormAppearance=yt,Yr.AcroForm={ChoiceField:Bm,ListBox:Um,ComboBox:zm,EditBox:GC,Button:Ki,PushButton:WC,RadioButton:qm,CheckBox:KC,TextField:zh,PasswordField:YC,Appearance:yt},Dt.AcroForm={ChoiceField:Bm,ListBox:Um,ComboBox:zm,EditBox:GC,Button:Ki,PushButton:WC,RadioButton:qm,CheckBox:KC,TextField:zh,PasswordField:YC,Appearance:yt};var mOe=Dt.AcroForm;function zz(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(C,D){var T,ne,be,Me,Ce,fe=t;if((D=D||t)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(he(C))for(Ce in r)for(be=r[Ce],T=0;T<be.length;T+=1){for(Me=!0,ne=0;ne<be[T].length;ne+=1)if(be[T][ne]!==void 0&&be[T][ne]!==C[ne]){Me=!1;break}if(Me===!0){fe=Ce;break}}else for(Ce in r)for(be=r[Ce],T=0;T<be.length;T+=1){for(Me=!0,ne=0;ne<be[T].length;ne+=1)if(be[T][ne]!==void 0&&be[T][ne]!==C.charCodeAt(ne)){Me=!1;break}if(Me===!0){fe=Ce;break}}return fe===t&&D!==t&&(fe=D),fe},o=function C(D){for(var T=this.internal.write,ne=this.internal.putStream,be=(0,this.internal.getFilters)();be.indexOf("FlateEncode")!==-1;)be.splice(be.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var Me=[];if(Me.push({key:"Type",value:"/XObject"}),Me.push({key:"Subtype",value:"/Image"}),Me.push({key:"Width",value:D.width}),Me.push({key:"Height",value:D.height}),D.colorSpace===P.INDEXED?Me.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(Me.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===P.DEVICE_CMYK&&Me.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Me.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&Me.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)&&D.transparency.length>0){for(var Ce="",fe=0,De=D.transparency.length;fe<De;fe++)Ce+=D.transparency[fe]+" "+D.transparency[fe]+" ";Me.push({key:"Mask",value:"["+Ce+"]"})}D.sMask!==void 0&&Me.push({key:"SMask",value:D.objectId+1+" 0 R"});var Be=D.filter!==void 0?["/"+D.filter]:void 0;if(ne({data:D.data,additionalKeyValues:Me,alreadyAppliedFilters:Be,objectId:D.objectId}),T("endobj"),"sMask"in D&&D.sMask!==void 0){var Fe,O=(Fe=D.sMaskBitsPerComponent)!==null&&Fe!==void 0?Fe:D.bitsPerComponent,W={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:D.sMask};"filter"in D&&(W.decodeParameters="/Predictor ".concat(D.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(D.width),W.filter=D.filter),C.call(this,W)}if(D.colorSpace===P.INDEXED){var J=this.internal.newObject();ne({data:N(new Uint8Array(D.palette)),objectId:J}),T("endobj")}},s=function(){var C=this.internal.collections[e+"images"];for(var D in C)o.call(this,C[D])},a=function(){var C,D=this.internal.collections[e+"images"],T=this.internal.write;for(var ne in D)T("/I"+(C=D[ne]).index,C.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var C=this.internal.collections[e+"images"];return c.call(this),C},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},h=function(C){return typeof n["process"+C.toUpperCase()]=="function"},m=function(C){return Un(C)==="object"&&C.nodeType===1},g=function(C,D){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var T=""+C.getAttribute("src");if(T.indexOf("data:image/")===0)return $C(unescape(T).split("base64,").pop());var ne=n.loadFile(T,!0);if(ne!==void 0)return ne}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var be;switch(D){case"PNG":be="image/png";break;case"WEBP":be="image/webp";break;default:be="image/jpeg"}return $C(C.toDataURL(be,1).split("base64,").pop())}},x=function(C){var D=this.internal.collections[e+"images"];if(D){for(var T in D)if(C===D[T].alias)return D[T]}},I=function(C,D,T){return C||D||(C=-96,D=-96),C<0&&(C=-1*T.width*72/C/this.internal.scaleFactor),D<0&&(D=-1*T.height*72/D/this.internal.scaleFactor),C===0&&(C=D*T.width/T.height),D===0&&(D=C*T.height/T.width),[C,D]},M=function(C,D,T,ne,be,Me){var Ce=I.call(this,T,ne,be),fe=this.internal.getCoordinateString,De=this.internal.getVerticalCoordinateString,Be=l.call(this);if(T=Ce[0],ne=Ce[1],Be[be.index]=be,Me){Me*=Math.PI/180;var Fe=Math.cos(Me),O=Math.sin(Me),W=function(ie){return ie.toFixed(4)},J=[W(Fe),W(O),W(-1*O),W(Fe),0,0,"cm"]}this.internal.write("q"),Me?(this.internal.write([1,"0","0",1,fe(C),De(D+ne),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([fe(T),"0","0",fe(ne),"0","0","cm"].join(" "))):this.internal.write([fe(T),"0","0",fe(ne),fe(C),De(D+ne),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+be.index+" Do"),this.internal.write("Q")},P=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Y=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=n.__addimage__.sHashCode=function(C){var D,T,ne=0;if(typeof C=="string")for(T=C.length,D=0;D<T;D++)ne=(ne<<5)-ne+C.charCodeAt(D),ne|=0;else if(he(C))for(T=C.byteLength/2,D=0;D<T;D++)ne=(ne<<5)-ne+C[D],ne|=0;return ne},K=n.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var D=!0;return C.length===0&&(D=!1),C.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(D=!1),D},oe=n.__addimage__.extractImageFromDataUrl=function(C){if(C==null||!(C=C.trim()).startsWith("data:"))return null;var D=C.indexOf(",");return D<0?null:C.substring(0,D).trim().endsWith("base64")?C.substring(D+1):null};n.__addimage__.isArrayBuffer=function(C){return C instanceof ArrayBuffer};var he=n.__addimage__.isArrayBufferView=function(C){return C instanceof Int8Array||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array},q=n.__addimage__.binaryStringToUint8Array=function(C){for(var D=C.length,T=new Uint8Array(D),ne=0;ne<D;ne++)T[ne]=C.charCodeAt(ne);return T},N=n.__addimage__.arrayBufferToBinaryString=function(C){for(var D="",T=he(C)?C:new Uint8Array(C),ne=0;ne<T.length;ne+=8192)D+=String.fromCharCode.apply(null,T.subarray(ne,ne+8192));return D};n.addImage=function(){var C,D,T,ne,be,Me,Ce,fe,De;if(typeof arguments[1]=="number"?(D=t,T=arguments[1],ne=arguments[2],be=arguments[3],Me=arguments[4],Ce=arguments[5],fe=arguments[6],De=arguments[7]):(D=arguments[1],T=arguments[2],ne=arguments[3],be=arguments[4],Me=arguments[5],Ce=arguments[6],fe=arguments[7],De=arguments[8]),Un(C=arguments[0])==="object"&&!m(C)&&"imageData"in C){var Be=C;C=Be.imageData,D=Be.format||D||t,T=Be.x||T||0,ne=Be.y||ne||0,be=Be.w||Be.width||be,Me=Be.h||Be.height||Me,Ce=Be.alias||Ce,fe=Be.compression||fe,De=Be.rotation||Be.angle||De}var Fe=this.internal.getFilters();if(fe===void 0&&Fe.indexOf("FlateEncode")!==-1&&(fe="SLOW"),isNaN(T)||isNaN(ne))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var O=S.call(this,C,D,Ce,fe);return M.call(this,T,ne,be,Me,O,De),this};var S=function(C,D,T,ne){var be,Me,Ce;if(typeof C=="string"&&i(C)===t){C=unescape(C);var fe=V(C,!1);(fe!==""||(fe=n.loadFile(C,!0))!==void 0)&&(C=fe)}if(m(C)&&(C=g(C,D)),D=i(C,D),!h(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((Ce=T)==null||Ce.length===0)&&(T=(function(De){return typeof De=="string"||he(De)?B(De):he(De.data)?B(De.data):null})(C)),(be=x.call(this,T))||(C instanceof Uint8Array||D==="RGBA"||(Me=C,C=q(C)),be=this["process"+D.toUpperCase()](C,u.call(this),T,(function(De){return De&&typeof De=="string"&&(De=De.toUpperCase()),De in n.image_compression?De:Y.NONE})(ne),Me)),!be)throw new Error("An unknown error occurred whilst processing the image.");return be},V=n.__addimage__.convertBase64ToBinaryString=function(C,D){D=typeof D!="boolean"||D;var T,ne="";if(typeof C=="string"){var be;T=(be=oe(C))!==null&&be!==void 0?be:C;try{ne=$C(T)}catch(Me){if(D)throw K(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Me.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};n.getImageProperties=function(C){var D,T,ne="";if(m(C)&&(C=g(C)),typeof C=="string"&&i(C)===t&&((ne=V(C,!1))===""&&(ne=n.loadFile(C)||""),C=ne),T=i(C),!h(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(C instanceof Uint8Array||(C=q(C)),!(D=this["process"+T.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=T,D}})(Dt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Dt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,u=!1,h=0;h<l.length&&!u;h++)switch((r=l[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<l.length;m++){r=l[m];var g=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),M=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(I.objId),Y=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(P(r.contents))+")",o+=" /Popup "+M.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+g(P(Y))+") >>",I.content=o;var B=I.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+B,r.open&&(o+=" /Open true"),o+=" >>",M.content=o,this.internal.write(I.objId,"0 R",M.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var K=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(x(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var oe=this.annotations._nameMap[r.options.name];r.options.pageNumber=oe.page,r.options.top=oe.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var he=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+he+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(t),y:l(r),w:c(t+i),h:l(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,c=this.getTextWidth(t),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var u=this.splitTextToSize(t,a).length;s=Math.ceil(l*u)}else a=c,s=l;return this.text(t,r,i,o),i+=.2*l,o.align==="center"&&(r-=c/2),o.align==="right"&&(r-=c),this.link(r,i-l,a,s,o),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(Dt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(I){return e[I.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},a=n.__arabicParser__.isArabicEndLetter=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(I){return s(I)&&i.indexOf(I.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length>=1};var l=n.__arabicParser__.arabicLetterHasFinalForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length==4},h=n.__arabicParser__.resolveLigatures=function(I){var M=0,P=t,Y="",B=0;for(M=0;M<I.length;M+=1)P[I.charCodeAt(M)]!==void 0?(B++,typeof(P=P[I.charCodeAt(M)])=="number"&&(Y+=String.fromCharCode(P),P=t,B=0),M===I.length-1&&(P=t,Y+=I.charAt(M-(B-1)),M-=B-1,B=0)):(P=t,Y+=I.charAt(M-B),M-=B,B=0);return Y};n.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&r[I.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(I,M,P){return s(I)?o(I)===!1?-1:!l(I)||!s(M)&&!s(P)||!s(P)&&a(M)||a(I)&&!s(M)||a(I)&&c(M)||a(I)&&a(M)?0:u(I)&&s(M)&&!a(M)&&s(P)&&l(P)?3:a(I)||!s(P)?1:2:-1},g=function(I){var M=0,P=0,Y=0,B="",K="",oe="",he=(I=I||"").split("\\s+"),q=[];for(M=0;M<he.length;M+=1){for(q.push(""),P=0;P<he[M].length;P+=1)B=he[M][P],K=he[M][P-1],oe=he[M][P+1],s(B)?(Y=m(B,K,oe),q[M]+=Y!==-1?String.fromCharCode(e[B.charCodeAt(0)][Y]):B):q[M]+=B;q[M]=h(q[M])}return q.join(" ")},x=n.__arabicParser__.processArabic=n.processArabic=function(){var I,M=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(M)){var Y=0;for(P=[],Y=0;Y<M.length;Y+=1)Array.isArray(M[Y])?P.push([g(M[Y][0]),M[Y][1],M[Y][2]]):P.push([g(M[Y])]);I=P}else I=g(M);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};n.events.push(["preProcessText",x])})(Dt.API),Dt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Dt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(I){c=I}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(I){l=I}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(I){u=I}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(I){h=I}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(I){m=I}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(I){g=I}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(I){x=I}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,l){r.call(this);var u=(l=l||{}).fontSize||this.getFontSize(),h=l.font||this.getFont(),m=l.scaleFactor||this.internal.scaleFactor,g=0,x=0,I=0,M=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var P=l.maxWidth;P>0?typeof c=="string"?c=this.splitTextToSize(c,P):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(B,K){return B.concat(M.splitTextToSize(K,P))},[])):c=Array.isArray(c)?c:[c];for(var Y=0;Y<c.length;Y++)g<(I=this.getStringUnitWidth(c[Y],{font:h})*u)&&(g=I);return g!==0&&(x=c.length),{w:g/=m,h:Math.max((x*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var l=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===c.lineNumber?(c.x=(l.x||0)+(l.width||0),c.y=l.y||0):l.y+l.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,g&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=l.y+l.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};n.table=function(c,l,u,h,m){if(r.call(this),!u)throw new Error("No data for PDF table.");var g,x,I,M,P=[],Y=[],B=[],K={},oe={},he=[],q=[],N=(m=m||{}).autoSize||!1,S=m.printHeaders!==!1,V=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,C=m.margins||Object.assign({width:this.getPageWidth()},e),D=typeof m.padding=="number"?m.padding:3,T=m.headerBackgroundColor||"#c8c8c8",ne=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=ne,this.setFontSize(V),h==null)Y=P=Object.keys(u[0]),B=P.map(function(){return"left"});else if(Array.isArray(h)&&Un(h[0])==="object")for(P=h.map(function(Be){return Be.name}),Y=h.map(function(Be){return Be.prompt||Be.name||""}),B=h.map(function(Be){return Be.align||"left"}),g=0;g<h.length;g+=1)oe[h[g].name]=.7499990551181103*h[g].width;else Array.isArray(h)&&typeof h[0]=="string"&&(Y=P=h,B=P.map(function(){return"left"}));if(N||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<P.length;g+=1){for(K[M=P[g]]=u.map(function(Be){return Be[M]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(Y[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=K[M],this.setFont(void 0,"normal"),I=0;I<x.length;I+=1)he.push(this.getTextDimensions(x[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);oe[M]=Math.max.apply(null,he)+D+D,he=[]}if(S){var be={};for(g=0;g<P.length;g+=1)be[P[g]]={},be[P[g]].text=Y[g],be[P[g]].align=B[g];var Me=a.call(this,be,oe);q=P.map(function(Be){return new o(c,l,oe[Be],Me,be[Be].text,void 0,be[Be].align)}),this.setTableHeaderRow(q),this.printHeaderRow(1,!1)}var Ce=h.reduce(function(Be,Fe){return Be[Fe.name]=Fe.align,Be},{});for(g=0;g<u.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:u[g]},this);var fe=a.call(this,u[g],oe);for(I=0;I<P.length;I+=1){var De=u[g][P[I]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:I,data:De},this),s.call(this,new o(c,l,oe[P[I]],fe,De,g+2,Ce[P[I]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=l,this};var a=function(c,l){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(g){var x=c[g];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,l[g]-u-u)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/m+u+u},this).reduce(function(g,x){return Math.max(g,x)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,l){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){u=this.internal.__cell__.tableHeaderRow[g].clone(),l&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}})(Dt.API);var qz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Hz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Vk=zz(Hz),$z=[100,200,300,400,500,600,700,800,900],Qle=zz($z);function Nk(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return qz[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof Vk[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function _z(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Zle={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},yz={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function wz(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function bz(n){return n.trimLeft()}function Xle(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Jle(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var qC,xz,Cz,Fm,HC,Ez,Iz,Sz,Pk=["times"];function Az(n,e,t,r,i){var o=4,s=Tz;switch(i){case Dt.API.image_compression.FAST:o=1,s=Dz;break;case Dt.API.image_compression.MEDIUM:o=6,s=Mz;break;case Dt.API.image_compression.SLOW:o=9,s=Nz}n=(function(c,l,u,h){for(var m,g=c.length/l,x=new Uint8Array(c.length+g),I=[eue,Dz,Tz,Mz,Nz],M=0;M<g;M+=1){var P=M*l,Y=c.subarray(P,P+l);if(h)x.set(h(Y,u,m),P+M);else{for(var B=I.length,K=[],oe=0;oe<B;oe+=1)K[oe]=I[oe](Y,u,m);var he=nue(K.concat());x.set(K[he],P+M)}m=Y}return x})(n,e,Math.ceil(t*r/8),s);var a=yC(n,{level:o});return Dt.API.__addimage__.arrayBufferToBinaryString(a)}function eue(n){var e=Array.apply([],n);return e.unshift(0),e}function Dz(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function Tz(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var s=t&&t[o]||0;i[o+1]=n[o]-s+256&255}return i}function Mz(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var s=n[o-e]||0,a=t&&t[o]||0;i[o+1]=n[o]+256-(s+a>>>1)&255}return i}function Nz(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var s=tue(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-s+256&255}return i}function tue(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function nue(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function kk(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),s=(1<<t)-1;return Gz(n,i)>>o&s}function Pz(n,e,t,r){var i=t*r,o=Math.floor(i/8),s=16-(i-8*o+r),a=(1<<r)-1,c=(e&a)<<s;(function(l,u,h){if(u+1<l.byteLength)l.setUint16(u,h,!1);else{var m=h>>8&255;l.setUint8(u,m)}})(n,o,Gz(n,o)&~(a<<s)&65535|c)}function Gz(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function rue(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<1+(7&i);n[e++],n[e++];var a=null,c=null;o&&(a=e,c=s,e+=3*s);var l=!0,u=[],h=0,m=null,g=0,x=null;for(this.width=t,this.height=r;l&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,x=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var I=n[e++];h=n[e++]|n[e++]<<8,m=n[e++],1&I||(m=null),g=I>>2&7,e++;break;case 254:for(;;){if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var M=n[e++]|n[e++]<<8,P=n[e++]|n[e++]<<8,Y=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,K=n[e++],oe=K>>6&1,he=1<<1+(7&K),q=a,N=c,S=!1;K>>7&&(S=!0,q=e,N=he,e+=3*he);var V=e;for(e++;;){var C;if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}u.push({x:M,y:P,width:Y,height:B,has_local_palette:S,palette_offset:q,palette_size:N,data_offset:V,data_length:e-V,transparent_index:m,interlaced:!!oe,delay:h,disposal:g});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return x},this.frameInfo=function(D){if(D<0||D>=u.length)throw new Error("Frame index out of range.");return u[D]},this.decodeAndBlitFrameBGRA=function(D,T){var ne=this.frameInfo(D),be=ne.width*ne.height,Me=new Uint8Array(be);kz(n,ne.data_offset,Me,be);var Ce=ne.palette_offset,fe=ne.transparent_index;fe===null&&(fe=256);var De=ne.width,Be=t-De,Fe=De,O=4*(ne.y*t+ne.x),W=4*((ne.y+ne.height)*t+ne.x),J=O,ie=4*Be;ne.interlaced===!0&&(ie+=4*t*7);for(var ce=8,me=0,Ae=Me.length;me<Ae;++me){var we=Me[me];if(Fe===0&&(Fe=De,(J+=ie)>=W&&(ie=4*Be+4*t*(ce-1),J=O+(De+Be)*(ce<<1),ce>>=1)),we===fe)J+=4;else{var Ne=n[Ce+3*we],Ue=n[Ce+3*we+1],et=n[Ce+3*we+2];T[J++]=et,T[J++]=Ue,T[J++]=Ne,T[J++]=255}--Fe}},this.decodeAndBlitFrameRGBA=function(D,T){var ne=this.frameInfo(D),be=ne.width*ne.height,Me=new Uint8Array(be);kz(n,ne.data_offset,Me,be);var Ce=ne.palette_offset,fe=ne.transparent_index;fe===null&&(fe=256);var De=ne.width,Be=t-De,Fe=De,O=4*(ne.y*t+ne.x),W=4*((ne.y+ne.height)*t+ne.x),J=O,ie=4*Be;ne.interlaced===!0&&(ie+=4*t*7);for(var ce=8,me=0,Ae=Me.length;me<Ae;++me){var we=Me[me];if(Fe===0&&(Fe=De,(J+=ie)>=W&&(ie=4*Be+4*t*(ce-1),J=O+(De+Be)*(ce<<1),ce>>=1)),we===fe)J+=4;else{var Ne=n[Ce+3*we],Ue=n[Ce+3*we+1],et=n[Ce+3*we+2];T[J++]=Ne,T[J++]=Ue,T[J++]=et,T[J++]=255}--Fe}}}function kz(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,c=i+1,l=(1<<c)-1,u=0,h=0,m=0,g=n[e++],x=new Int32Array(4096),I=null;;){for(;u<16&&g!==0;)h|=n[e++]<<u,u+=8,g===1?g=n[e++]:--g;if(u<c)break;var M=h&l;if(h>>=c,u-=c,M!==o){if(M===s)break;for(var P=M<a?M:I,Y=0,B=P;B>o;)B=x[B]>>8,++Y;var K=B;if(m+Y+(P!==M?1:0)>r)return void fr.log("Warning, gif stream longer than expected.");t[m++]=K;var oe=m+=Y;for(P!==M&&(t[m++]=K),B=P;Y--;)B=x[B],t[--oe]=255&B,B>>=8;I!==null&&a<4096&&(x[a++]=I<<8|K,a>=l+1&&c<12&&(++c,l=l<<1|1)),I=M}else a=s+1,l=(1<<(c=i+1))-1,I=null}return m!==r&&fr.log("Warning, gif stream shorter than expected."),t}function Rk(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),g=new Array(64),x=new Array(64),I=[],M=0,P=7,Y=new Array(64),B=new Array(64),K=new Array(64),oe=new Array(256),he=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],be=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Me(O,W){for(var J=0,ie=0,ce=new Array,me=1;me<=16;me++){for(var Ae=1;Ae<=O[me];Ae++)ce[W[ie]]=[],ce[W[ie]][0]=J,ce[W[ie]][1]=me,ie++,J++;J*=2}return ce}function Ce(O){for(var W=O[0],J=O[1]-1;J>=0;)W&1<<J&&(M|=1<<P),J--,--P<0&&(M==255?(fe(255),fe(0)):fe(M),P=7,M=0)}function fe(O){I.push(O)}function De(O){fe(O>>8&255),fe(255&O)}function Be(O,W,J,ie,ce){for(var me,Ae=ce[0],we=ce[240],Ne=(function(qe,Tt){var lt,wt,St,vn,Qt,zt,Lt,Vt,vt,Xt,At=0;for(vt=0;vt<8;++vt){lt=qe[At],wt=qe[At+1],St=qe[At+2],vn=qe[At+3],Qt=qe[At+4],zt=qe[At+5],Lt=qe[At+6];var Rr=lt+(Vt=qe[At+7]),_n=lt-Vt,an=wt+Lt,cn=wt-Lt,Xn=St+zt,kt=St-zt,Jn=vn+Qt,Bt=vn-Qt,Zt=Rr+Jn,sr=Rr-Jn,tn=an+Xn,jt=an-Xn;qe[At]=Zt+tn,qe[At+4]=Zt-tn;var Sn=.707106781*(jt+sr);qe[At+2]=sr+Sn,qe[At+6]=sr-Sn;var Po=.382683433*((Zt=Bt+kt)-(jt=cn+_n)),Si=.5411961*Zt+Po,os=1.306562965*jt+Po,Ss=.707106781*(tn=kt+cn),Pt=_n+Ss,oa=_n-Ss;qe[At+5]=oa+Si,qe[At+3]=oa-Si,qe[At+1]=Pt+os,qe[At+7]=Pt-os,At+=8}for(At=0,vt=0;vt<8;++vt){lt=qe[At],wt=qe[At+8],St=qe[At+16],vn=qe[At+24],Qt=qe[At+32],zt=qe[At+40],Lt=qe[At+48];var _r=lt+(Vt=qe[At+56]),ko=lt-Vt,Ui=wt+Lt,er=wt-Lt,pi=St+zt,Ai=St-zt,ss=vn+Qt,Ec=vn-Qt,As=_r+ss,Ro=_r-ss,as=Ui+pi,Oo=Ui-pi;qe[At]=As+as,qe[At+32]=As-as;var Yi=.707106781*(Oo+Ro);qe[At+16]=Ro+Yi,qe[At+48]=Ro-Yi;var po=.382683433*((As=Ec+Ai)-(Oo=er+ko)),Ds=.5411961*As+po,Ic=1.306562965*Oo+po,Sc=.707106781*(as=Ai+er),Ac=ko+Sc,Sl=ko-Sc;qe[At+40]=Sl+Ds,qe[At+24]=Sl-Ds,qe[At+8]=Ac+Ic,qe[At+56]=Ac-Ic,At++}for(vt=0;vt<64;++vt)Xt=qe[vt]*Tt[vt],g[vt]=Xt>0?Xt+.5|0:Xt-.5|0;return g})(O,W),Ue=0;Ue<64;++Ue)x[q[Ue]]=Ne[Ue];var et=x[0]-J;J=x[0],et==0?Ce(ie[0]):(Ce(ie[m[me=32767+et]]),Ce(h[me]));for(var We=63;We>0&&x[We]==0;)We--;if(We==0)return Ce(Ae),J;for(var ct,G=1;G<=We;){for(var Ke=G;x[G]==0&&G<=We;)++G;var Ft=G-Ke;if(Ft>=16){ct=Ft>>4;for(var It=1;It<=ct;++It)Ce(we);Ft&=15}me=32767+x[G],Ce(ce[(Ft<<4)+m[me]]),Ce(h[me]),G++}return We!=63&&Ce(Ae),J}function Fe(O){O=Math.min(Math.max(O,1),100),o!=O&&((function(W){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var ce=s((J[ie]*W+50)/100);ce=Math.min(Math.max(ce,1),255),a[q[ie]]=ce}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var we=s((me[Ae]*W+50)/100);we=Math.min(Math.max(we,1),255),c[q[Ae]]=we}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ue=0,et=0;et<8;et++)for(var We=0;We<8;We++)l[Ue]=1/(a[q[Ue]]*Ne[et]*Ne[We]*8),u[Ue]=1/(c[q[Ue]]*Ne[et]*Ne[We]*8),Ue++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),o=O)}this.encode=function(O,W){W&&Fe(W),I=new Array,M=0,P=7,De(65496),De(65504),De(16),fe(74),fe(70),fe(73),fe(70),fe(0),fe(1),fe(1),fe(0),De(1),De(1),fe(0),fe(0),(function(){De(65499),De(132),fe(0);for(var wt=0;wt<64;wt++)fe(a[wt]);fe(1);for(var St=0;St<64;St++)fe(c[St])})(),(function(wt,St){De(65472),De(17),fe(8),De(St),De(wt),fe(3),fe(1),fe(17),fe(0),fe(2),fe(17),fe(1),fe(3),fe(17),fe(1)})(O.width,O.height),(function(){De(65476),De(418),fe(0);for(var wt=0;wt<16;wt++)fe(N[wt+1]);for(var St=0;St<=11;St++)fe(S[St]);fe(16);for(var vn=0;vn<16;vn++)fe(V[vn+1]);for(var Qt=0;Qt<=161;Qt++)fe(C[Qt]);fe(1);for(var zt=0;zt<16;zt++)fe(D[zt+1]);for(var Lt=0;Lt<=11;Lt++)fe(T[Lt]);fe(17);for(var Vt=0;Vt<16;Vt++)fe(ne[Vt+1]);for(var vt=0;vt<=161;vt++)fe(be[vt])})(),De(65498),De(12),fe(3),fe(1),fe(0),fe(2),fe(17),fe(3),fe(17),fe(0),fe(63),fe(0);var J=0,ie=0,ce=0;M=0,P=7,this.encode.displayName="_encode_";for(var me,Ae,we,Ne,Ue,et,We,ct,G,Ke=O.data,Ft=O.width,It=O.height,qe=4*Ft,Tt=0;Tt<It;){for(me=0;me<qe;){for(Ue=qe*Tt+me,We=-1,ct=0,G=0;G<64;G++)et=Ue+(ct=G>>3)*qe+(We=4*(7&G)),Tt+ct>=It&&(et-=qe*(Tt+1+ct-It)),me+We>=qe&&(et-=me+We-qe+4),Ae=Ke[et++],we=Ke[et++],Ne=Ke[et++],Y[G]=(he[Ae]+he[we+256|0]+he[Ne+512|0]>>16)-128,B[G]=(he[Ae+768|0]+he[we+1024|0]+he[Ne+1280|0]>>16)-128,K[G]=(he[Ae+1280|0]+he[we+1536|0]+he[Ne+1792|0]>>16)-128;J=Be(Y,l,J,e,r),ie=Be(B,u,ie,t,i),ce=Be(K,u,ce,t,i),me+=32}Tt+=8}if(P>=0){var lt=[];lt[1]=P+1,lt[0]=(1<<P+1)-1,Ce(lt)}return De(65497),new Uint8Array(I)},n=n||50,(function(){for(var O=String.fromCharCode,W=0;W<256;W++)oe[W]=O(W)})(),e=Me(N,S),t=Me(D,T),r=Me(V,C),i=Me(ne,be),(function(){for(var O=1,W=2,J=1;J<=15;J++){for(var ie=O;ie<W;ie++)m[32767+ie]=J,h[32767+ie]=[],h[32767+ie][1]=J,h[32767+ie][0]=ie;for(var ce=-(W-1);ce<=-O;ce++)m[32767+ce]=J,h[32767+ce]=[],h[32767+ce][1]=J,h[32767+ce][0]=W-1+ce;O<<=1,W<<=1}})(),(function(){for(var O=0;O<256;O++)he[O]=19595*O,he[O+256|0]=38470*O,he[O+512|0]=7471*O+32768,he[O+768|0]=-11059*O,he[O+1024|0]=-21709*O,he[O+1280|0]=32768*O+8421375,he[O+1536|0]=-27439*O,he[O+1792|0]=-5329*O})(),Fe(n)}function wc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Rz(n){function e(S){if(!S)throw Error("assert :P")}function t(S,V,C){for(var D=0;4>D;D++)if(S[V+D]!=C.charCodeAt(D))return!0;return!1}function r(S,V,C,D,T){for(var ne=0;ne<T;ne++)S[V+ne]=C[D+ne]}function i(S,V,C,D){for(var T=0;T<D;T++)S[V+T]=C}function o(S){return new Int32Array(S)}function s(S,V){for(var C=[],D=0;D<S;D++)C.push(new V);return C}function a(S,V){var C=[];return(function D(T,ne,be){for(var Me=be[ne],Ce=0;Ce<Me&&(T.push(be.length>ne+1?[]:new V),!(be.length<ne+1));Ce++)D(T[Ce],ne+1,be)})(C,0,S),C}var c=function(){var S=this;function V(d,p){for(var _=1<<p-1>>>0;d&_;)_>>>=1;return _?(d&_-1)+_:d}function C(d,p,_,w,R){e(!(w%_));do d[p+(w-=_)]=R;while(0<w)}function D(d,p,_,w,R){if(e(2328>=R),512>=R)var F=o(512);else if((F=o(R))==null)return 0;return(function(L,z,$,Z,se,ye){var X,le,ve=z,Pe=1<<$,_e=o(16),Re=o(16);for(e(se!=0),e(Z!=null),e(L!=null),e(0<$),le=0;le<se;++le){if(15<Z[le])return 0;++_e[Z[le]]}if(_e[0]==se)return 0;for(Re[1]=0,X=1;15>X;++X){if(_e[X]>1<<X)return 0;Re[X+1]=Re[X]+_e[X]}for(le=0;le<se;++le)X=Z[le],0<Z[le]&&(ye[Re[X]++]=le);if(Re[15]==1)return(Z=new T).g=0,Z.value=ye[0],C(L,ve,1,Pe,Z),Pe;var Le,Ge=-1,He=Pe-1,Mt=0,gt=1,hn=1,Ct=1<<$;for(le=0,X=1,se=2;X<=$;++X,se<<=1){if(gt+=hn<<=1,0>(hn-=_e[X]))return 0;for(;0<_e[X];--_e[X])(Z=new T).g=X,Z.value=ye[le++],C(L,ve+Mt,se,Ct,Z),Mt=V(Mt,X)}for(X=$+1,se=2;15>=X;++X,se<<=1){if(gt+=hn<<=1,0>(hn-=_e[X]))return 0;for(;0<_e[X];--_e[X]){if(Z=new T,(Mt&He)!=Ge){for(ve+=Ct,Le=1<<(Ge=X)-$;15>Ge&&!(0>=(Le-=_e[Ge]));)++Ge,Le<<=1;Pe+=Ct=1<<(Le=Ge-$),L[z+(Ge=Mt&He)].g=Le+$,L[z+Ge].value=ve-z-Ge}Z.g=X-$,Z.value=ye[le++],C(L,ve+(Mt>>$),se,Ct,Z),Mt=V(Mt,X)}}return gt!=2*Re[15]-1?0:Pe})(d,p,_,w,R,F)}function T(){this.value=this.g=0}function ne(){this.value=this.g=0}function be(){this.G=s(5,T),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(yf,ne)}function Me(d,p,_,w){e(d!=null),e(p!=null),e(2147483648>w),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=p,d.pa=_,d.Jd=p,d.Yc=_+w,d.Zc=4<=w?_+w-4+1:_,Ae(d)}function Ce(d,p){for(var _=0;0<p--;)_|=Ne(d,128)<<p;return _}function fe(d,p){var _=Ce(d,p);return we(d)?-_:_}function De(d,p,_,w){var R,F=0;for(e(d!=null),e(p!=null),e(4294967288>w),d.Sb=w,d.Ra=0,d.u=0,d.h=0,4<w&&(w=4),R=0;R<w;++R)F+=p[_+R]<<8*R;d.Ra=F,d.bb=w,d.oa=p,d.pa=_}function Be(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<ku-8>>>0,++d.bb,d.u-=8;ie(d)&&(d.h=1,d.u=0)}function Fe(d,p){if(e(0<=p),!d.h&&p<=Os){var _=J(d)&Rs[p];return d.u+=p,Be(d),_}return d.h=1,d.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(d){return d.Ra>>>(d.u&ku-1)>>>0}function ie(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>ku}function ce(d,p){d.u=p,d.h=ie(d)}function me(d){d.u>=Fl&&(e(d.u>=Fl),Be(d))}function Ae(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function we(d){return Ce(d,1)}function Ne(d,p){var _=d.Ca;0>d.b&&Ae(d);var w=d.b,R=_*p>>>8,F=(d.I>>>w>R)+0;for(F?(_-=R,d.I-=R+1<<w>>>0):_=R+1,w=_,R=0;256<=w;)R+=8,w>>=8;return w=7^R+Ru[w],d.b-=w,d.Ca=(_<<w)-1,F}function Ue(d,p,_){d[p+0]=_>>24&255,d[p+1]=_>>16&255,d[p+2]=_>>8&255,d[p+3]=255&_}function et(d,p){return d[p+0]|d[p+1]<<8}function We(d,p){return et(d,p)|d[p+2]<<16}function ct(d,p){return et(d,p)|et(d,p+2)<<16}function G(d,p){var _=1<<p;return e(d!=null),e(0<p),d.X=o(_),d.X==null?0:(d.Mb=32-p,d.Xa=p,1)}function Ke(d,p){e(d!=null),e(p!=null),e(d.Xa==p.Xa),r(p.X,0,d.X,0,1<<p.Xa)}function Ft(){this.X=[],this.Xa=this.Mb=0}function It(d,p,_,w){e(_!=null),e(w!=null);var R=_[0],F=w[0];return R==0&&(R=(d*F+p/2)/p),F==0&&(F=(p*R+d/2)/d),0>=R||0>=F?0:(_[0]=R,w[0]=F,1)}function qe(d,p){return d+(1<<p)-1>>>p}function Tt(d,p){return((4278255360&d)+(4278255360&p)>>>0&4278255360)+((16711935&d)+(16711935&p)>>>0&16711935)>>>0}function lt(d,p){S[p]=function(_,w,R,F,L,z,$){var Z;for(Z=0;Z<L;++Z){var se=S[d](z[$+Z-1],R,F+Z);z[$+Z]=Tt(_[w+Z],se)}}}function wt(){this.ud=this.hd=this.jd=0}function St(d,p){return((4278124286&(d^p))>>>1)+(d&p)>>>0}function vn(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Qt(d,p){return vn(d+(d-p+.5>>1))}function zt(d,p,_){return Math.abs(p-_)-Math.abs(d-_)}function Lt(d,p,_,w,R,F,L){for(w=F[L-1],_=0;_<R;++_)F[L+_]=w=Tt(d[p+_],w)}function Vt(d,p,_,w,R){var F;for(F=0;F<_;++F){var L=d[p+F],z=L>>8&255,$=16711935&($=($=16711935&L)+((z<<16)+z));w[R+F]=(4278255360&L)+$>>>0}}function vt(d,p){p.jd=255&d,p.hd=d>>8&255,p.ud=d>>16&255}function Xt(d,p,_,w,R,F){var L;for(L=0;L<w;++L){var z=p[_+L],$=z>>>8,Z=z,se=255&(se=(se=z>>>16)+((d.jd<<24>>24)*($<<24>>24)>>>5));Z=255&(Z=(Z+=(d.hd<<24>>24)*($<<24>>24)>>>5)+((d.ud<<24>>24)*(se<<24>>24)>>>5)),R[F+L]=(4278255360&z)+(se<<16)+Z}}function At(d,p,_,w,R){S[p]=function(F,L,z,$,Z,se,ye,X,le){for($=ye;$<X;++$)for(ye=0;ye<le;++ye)Z[se++]=R(z[w(F[L++])])},S[d]=function(F,L,z,$,Z,se,ye){var X=8>>F.b,le=F.Ea,ve=F.K[0],Pe=F.w;if(8>X)for(F=(1<<F.b)-1,Pe=(1<<X)-1;L<z;++L){var _e,Re=0;for(_e=0;_e<le;++_e)_e&F||(Re=w($[Z++])),se[ye++]=R(ve[Re&Pe]),Re>>=X}else S["VP8LMapColor"+_]($,Z,ve,Pe,se,ye,L,z,le)}}function Rr(d,p,_,w,R){for(_=p+_;p<_;){var F=d[p++];w[R++]=F>>16&255,w[R++]=F>>8&255,w[R++]=255&F}}function _n(d,p,_,w,R){for(_=p+_;p<_;){var F=d[p++];w[R++]=F>>16&255,w[R++]=F>>8&255,w[R++]=255&F,w[R++]=F>>24&255}}function an(d,p,_,w,R){for(_=p+_;p<_;){var F=(L=d[p++])>>16&240|L>>12&15,L=240&L|L>>28&15;w[R++]=F,w[R++]=L}}function cn(d,p,_,w,R){for(_=p+_;p<_;){var F=(L=d[p++])>>16&248|L>>13&7,L=L>>5&224|L>>3&31;w[R++]=F,w[R++]=L}}function Xn(d,p,_,w,R){for(_=p+_;p<_;){var F=d[p++];w[R++]=255&F,w[R++]=F>>8&255,w[R++]=F>>16&255}}function kt(d,p,_,w,R,F){if(F==0)for(_=p+_;p<_;)Ue(w,((F=d[p++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),R+=32;else r(w,R,d,p,_)}function Jn(d,p){S[p][0]=S[d+"0"],S[p][1]=S[d+"1"],S[p][2]=S[d+"2"],S[p][3]=S[d+"3"],S[p][4]=S[d+"4"],S[p][5]=S[d+"5"],S[p][6]=S[d+"6"],S[p][7]=S[d+"7"],S[p][8]=S[d+"8"],S[p][9]=S[d+"9"],S[p][10]=S[d+"10"],S[p][11]=S[d+"11"],S[p][12]=S[d+"12"],S[p][13]=S[d+"13"],S[p][14]=S[d+"0"],S[p][15]=S[d+"0"]}function Bt(d){return d==FE||d==LE||d==o1||d==VE}function Zt(){this.eb=[],this.size=this.A=this.fb=0}function sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function tn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zt,this.f.kb=new sr,this.sd=null}function jt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Sn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Po(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Si(d,p){var _=d.T,w=p.ba.f.RGBA,R=w.eb,F=w.fb+d.ka*w.A,L=ga[p.ba.S],z=d.y,$=d.O,Z=d.f,se=d.N,ye=d.ea,X=d.W,le=p.cc,ve=p.dc,Pe=p.Mc,_e=p.Nc,Re=d.ka,Le=d.ka+d.T,Ge=d.U,He=Ge+1>>1;for(Re==0?L(z,$,null,null,Z,se,ye,X,Z,se,ye,X,R,F,null,null,Ge):(L(p.ec,p.fc,z,$,le,ve,Pe,_e,Z,se,ye,X,R,F-w.A,R,F,Ge),++_);Re+2<Le;Re+=2)le=Z,ve=se,Pe=ye,_e=X,se+=d.Rc,X+=d.Rc,F+=2*w.A,L(z,($+=2*d.fa)-d.fa,z,$,le,ve,Pe,_e,Z,se,ye,X,R,F-w.A,R,F,Ge);return $+=d.fa,d.j+Le<d.o?(r(p.ec,p.fc,z,$,Ge),r(p.cc,p.dc,Z,se,He),r(p.Mc,p.Nc,ye,X,He),_--):1&Le||L(z,$,null,null,Z,se,ye,X,Z,se,ye,X,R,F+w.A,null,null,Ge),_}function os(d,p,_){var w=d.F,R=[d.J];if(w!=null){var F=d.U,L=p.ba.S,z=L==i1||L==o1;p=p.ba.f.RGBA;var $=[0],Z=d.ka;$[0]=d.T,d.Kb&&(Z==0?--$[0]:(--Z,R[0]-=d.width),d.j+d.ka+d.T==d.o&&($[0]=d.o-d.j-Z));var se=p.eb;Z=p.fb+Z*p.A,d=pO(w,R[0],d.width,F,$,se,Z+(z?0:3),p.A),e(_==$),d&&Bt(L)&&b0(se,Z,z,F,$,p.A)}return 0}function Ss(d){var p=d.ma,_=p.ba.S,w=11>_,R=_==n1||_==r1||_==i1||_==OE||_==12||Bt(_);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!Ol(p.Oa,d,R?11:12))return 0;if(R&&Bt(_)&&Nu(),d.da)alert("todo:use_scaling");else{if(w){if(p.Ib=Po,d.Kb){if(_=d.U+1>>1,p.memory=o(d.U+2*_),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+d.U,p.Mc=p.cc,p.Nc=p.dc+_,p.Ib=Si,Nu()}}else alert("todo:EmitYUV");R&&(p.Jb=os,w&&yr())}if(w&&!NO){for(d=0;256>d;++d)oG[d]=89858*(d-128)+a1>>s1,cG[d]=-22014*(d-128)+a1,aG[d]=-45773*(d-128),sG[d]=113618*(d-128)+a1>>s1;for(d=C0;d<UE;++d)p=76283*(d-16)+a1>>s1,lG[d-C0]=Ts(p,255),uG[d-C0]=Ts(p+8>>4,15);NO=1}return 1}function Pt(d){var p=d.ma,_=d.U,w=d.T;return e(!(1&d.ka)),0>=_||0>=w?0:(_=p.Ib(d,p),p.Jb!=null&&p.Jb(d,p,_),p.Dc+=_,1)}function oa(d){d.ma.memory=null}function _r(d,p,_,w){return Fe(d,8)!=47?0:(p[0]=Fe(d,14)+1,_[0]=Fe(d,14)+1,w[0]=Fe(d,1),Fe(d,3)!=0?0:!d.h)}function ko(d,p){if(4>d)return d+1;var _=d-2>>1;return(2+(1&d)<<_)+Fe(p,_)+1}function Ui(d,p){return 120<p?p-120:1<=(_=((_=$$[p-1])>>4)*d+(8-(15&_)))?_:1;var _}function er(d,p,_){var w=J(_),R=d[p+=255&w].g-8;return 0<R&&(ce(_,_.u+8),w=J(_),p+=d[p].value,p+=w&(1<<R)-1),ce(_,_.u+d[p].g),d[p].value}function pi(d,p,_){return _.g+=d.g,_.value+=d.value<<p>>>0,e(8>=_.g),d.g}function Ai(d,p,_){var w=d.xc;return e((p=w==0?0:d.vc[d.md*(_>>w)+(p>>w)])<d.Wb),d.Ya[p]}function ss(d,p,_,w){var R=d.ab,F=d.c*p,L=d.C;p=L+p;var z=_,$=w;for(w=d.Ta,_=d.Ua;0<R--;){var Z=d.gc[R],se=L,ye=p,X=z,le=$,ve=($=w,z=_,Z.Ea);switch(e(se<ye),e(ye<=Z.nc),Z.hc){case 2:Zr(X,le,(ye-se)*ve,$,z);break;case 0:var Pe=se,_e=ye,Re=$,Le=z,Ge=(Ct=Z).Ea;Pe==0&&(g0(X,le,null,null,1,Re,Le),Lt(X,le+1,0,0,Ge-1,Re,Le+1),le+=Ge,Le+=Ge,++Pe);for(var He=1<<Ct.b,Mt=He-1,gt=qe(Ge,Ct.b),hn=Ct.K,Ct=Ct.w+(Pe>>Ct.b)*gt;Pe<_e;){var Cn=hn,Ti=Ct,pn=1;for(up(X,le,Re,Le-Ge,1,Re,Le);pn<Ge;){var Et=(pn&~Mt)+He;Et>Ge&&(Et=Ge),(0,v0[Cn[Ti++]>>8&15])(X,le+ +pn,Re,Le+pn-Ge,Et-pn,Re,Le+pn),pn=Et}le+=Ge,Le+=Ge,++Pe&Mt||(Ct+=gt)}ye!=Z.nc&&r($,z-ve,$,z+(ye-se-1)*ve,ve);break;case 1:for(ve=X,_e=le,Ge=(X=Z.Ea)-(Le=X&~(Re=(le=1<<Z.b)-1)),Pe=qe(X,Z.b),He=Z.K,Z=Z.w+(se>>Z.b)*Pe;se<ye;){for(Mt=He,gt=Z,hn=new wt,Ct=_e+Le,Cn=_e+X;_e<Ct;)vt(Mt[gt++],hn),_0(hn,ve,_e,le,$,z),_e+=le,z+=le;_e<Cn&&(vt(Mt[gt++],hn),_0(hn,ve,_e,Ge,$,z),_e+=Ge,z+=Ge),++se&Re||(Z+=Pe)}break;case 3:if(X==$&&le==z&&0<Z.b){for(_e=$,X=ve=z+(ye-se)*ve-(Le=(ye-se)*qe(Z.Ea,Z.b)),le=$,Re=z,Pe=[],Le=(Ge=Le)-1;0<=Le;--Le)Pe[Le]=le[Re+Le];for(Le=Ge-1;0<=Le;--Le)_e[X+Le]=Pe[Le];Xy(Z,se,ye,$,ve,$,z)}else Xy(Z,se,ye,X,le,$,z)}z=w,$=_}$!=_&&r(w,_,z,$,F)}function Ec(d,p){var _=d.V,w=d.Ba+d.c*d.C,R=p-d.C;if(e(p<=d.l.o),e(16>=R),0<R){var F=d.l,L=d.Ta,z=d.Ua,$=F.width;if(ss(d,R,_,w),R=z=[z],e((_=d.C)<(w=p)),e(F.v<F.va),w>F.o&&(w=F.o),_<F.j){var Z=F.j-_;_=F.j,R[0]+=Z*$}if(_>=w?_=0:(R[0]+=4*F.v,F.ka=_-F.j,F.U=F.va-F.v,F.T=w-_,_=1),_){if(z=z[0],11>(_=d.ca).S){var se=_.f.RGBA,ye=(w=_.S,R=F.U,F=F.T,Z=se.eb,se.A),X=F;for(se=se.fb+d.Ma*se.A;0<X--;){var le=L,ve=z,Pe=R,_e=Z,Re=se;switch(w){case t1:y0(le,ve,Pe,_e,Re);break;case n1:Ou(le,ve,Pe,_e,Re);break;case FE:Ou(le,ve,Pe,_e,Re),b0(_e,Re,0,Pe,1,0);break;case bO:wf(le,ve,Pe,_e,Re);break;case r1:kt(le,ve,Pe,_e,Re,1);break;case LE:kt(le,ve,Pe,_e,Re,1),b0(_e,Re,0,Pe,1,0);break;case i1:kt(le,ve,Pe,_e,Re,0);break;case o1:kt(le,ve,Pe,_e,Re,0),b0(_e,Re,1,Pe,1,0);break;case OE:Fu(le,ve,Pe,_e,Re);break;case VE:Fu(le,ve,Pe,_e,Re),hO(_e,Re,Pe,1,0);break;case xO:Lu(le,ve,Pe,_e,Re);break;default:e(0)}z+=$,se+=ye}d.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=_.height)}}d.C=p,e(d.C<=d.i)}function As(d){var p;if(0<d.ua)return 0;for(p=0;p<d.Wb;++p){var _=d.Ya[p].G,w=d.Ya[p].H;if(0<_[1][w[1]+0].g||0<_[2][w[2]+0].g||0<_[3][w[3]+0].g)return 0}return 1}function Ro(d,p,_,w,R,F){if(d.Z!=0){var L=d.qd,z=d.rd;for(e(Bu[d.Z]!=null);p<_;++p)Bu[d.Z](L,z,w,R,w,R,F),L=w,z=R,R+=F;d.qd=L,d.rd=z}}function as(d,p){var _=d.l.ma,w=_.Z==0||_.Z==1?d.l.j:d.C;if(w=d.C<w?w:d.C,e(p<=d.l.o),p>w){var R=d.l.width,F=_.ca,L=_.tb+R*w,z=d.V,$=d.Ba+d.c*w,Z=d.gc;e(d.ab==1),e(Z[0].hc==3),kc(Z[0],w,p,z,$,F,L),Ro(_,w,p,F,L,R)}d.C=d.Ma=p}function Oo(d,p,_,w,R,F,L){var z=d.$/w,$=d.$%w,Z=d.m,se=d.s,ye=_+d.$,X=ye;R=_+w*R;var le=_+w*F,ve=280+se.ua,Pe=d.Pb?z:16777216,_e=0<se.ua?se.Wa:null,Re=se.wc,Le=ye<le?Ai(se,$,z):null;e(d.C<F),e(le<=R);var Ge=!1;e:for(;;){for(;Ge||ye<le;){var He=0;if(z>=Pe){var Mt=ye-_;e((Pe=d).Pb),Pe.wd=Pe.m,Pe.xd=Mt,0<Pe.s.ua&&Ke(Pe.s.Wa,Pe.s.vb),Pe=z+W$}if($&Re||(Le=Ai(se,$,z)),e(Le!=null),Le.Qb&&(p[ye]=Le.qb,Ge=!0),!Ge)if(me(Z),Le.jc){He=Z,Mt=p;var gt=ye,hn=Le.pd[J(He)&yf-1];e(Le.jc),256>hn.g?(ce(He,He.u+hn.g),Mt[gt]=hn.value,He=0):(ce(He,He.u+hn.g-256),e(256<=hn.value),He=hn.value),He==0&&(Ge=!0)}else He=er(Le.G[0],Le.H[0],Z);if(Z.h)break;if(Ge||256>He){if(!Ge)if(Le.nd)p[ye]=(Le.qb|He<<8)>>>0;else{if(me(Z),Ge=er(Le.G[1],Le.H[1],Z),me(Z),Mt=er(Le.G[2],Le.H[2],Z),gt=er(Le.G[3],Le.H[3],Z),Z.h)break;p[ye]=(gt<<24|Ge<<16|He<<8|Mt)>>>0}if(Ge=!1,++ye,++$>=w&&($=0,++z,L!=null&&z<=F&&!(z%16)&&L(d,z),_e!=null))for(;X<ye;)He=p[X++],_e.X[(506832829*He&4294967295)>>>_e.Mb]=He}else if(280>He){if(He=ko(He-256,Z),Mt=er(Le.G[4],Le.H[4],Z),me(Z),Mt=Ui(w,Mt=ko(Mt,Z)),Z.h)break;if(ye-_<Mt||R-ye<He)break e;for(gt=0;gt<He;++gt)p[ye+gt]=p[ye+gt-Mt];for(ye+=He,$+=He;$>=w;)$-=w,++z,L!=null&&z<=F&&!(z%16)&&L(d,z);if(e(ye<=R),$&Re&&(Le=Ai(se,$,z)),_e!=null)for(;X<ye;)He=p[X++],_e.X[(506832829*He&4294967295)>>>_e.Mb]=He}else{if(!(He<ve))break e;for(Ge=He-280,e(_e!=null);X<ye;)He=p[X++],_e.X[(506832829*He&4294967295)>>>_e.Mb]=He;He=ye,e(!(Ge>>>(Mt=_e).Xa)),p[He]=Mt.X[Ge],Ge=!0}Ge||e(Z.h==ie(Z))}if(d.Pb&&Z.h&&ye<R)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Ke(d.s.vb,d.s.Wa);else{if(Z.h)break e;L?.(d,z>F?F:z),d.a=0,d.$=ye-_}return 1}return d.a=3,0}function Yi(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var p=d.Wa;p!=null&&(p.X=null),d.vb=null,e(d!=null)}function po(){var d=new qt;return d==null?null:(d.a=0,d.xb=IO,Jn("Predictor","VP8LPredictors"),Jn("Predictor","VP8LPredictors_C"),Jn("PredictorAdd","VP8LPredictorsAdd"),Jn("PredictorAdd","VP8LPredictorsAdd_C"),Zr=Vt,_0=Xt,y0=Rr,Ou=_n,Fu=an,Lu=cn,wf=Xn,S.VP8LMapColor32b=Pc,S.VP8LMapColor8b=m0,d)}function Ds(d,p,_,w,R){var F=1,L=[d],z=[p],$=w.m,Z=w.s,se=null,ye=0;e:for(;;){if(_)for(;F&&Fe($,1);){var X=L,le=z,ve=w,Pe=1,_e=ve.m,Re=ve.gc[ve.ab],Le=Fe(_e,2);if(ve.Oc&1<<Le)F=0;else{switch(ve.Oc|=1<<Le,Re.hc=Le,Re.Ea=X[0],Re.nc=le[0],Re.K=[null],++ve.ab,e(4>=ve.ab),Le){case 0:case 1:Re.b=Fe(_e,3)+2,Pe=Ds(qe(Re.Ea,Re.b),qe(Re.nc,Re.b),0,ve,Re.K),Re.K=Re.K[0];break;case 3:var Ge,He=Fe(_e,8)+1,Mt=16<He?0:4<He?1:2<He?2:3;if(X[0]=qe(Re.Ea,Mt),Re.b=Mt,Ge=Pe=Ds(He,1,0,ve,Re.K)){var gt,hn=He,Ct=Re,Cn=1<<(8>>Ct.b),Ti=o(Cn);if(Ti==null)Ge=0;else{var pn=Ct.K[0],Et=Ct.w;for(Ti[0]=Ct.K[0][0],gt=1;gt<1*hn;++gt)Ti[gt]=Tt(pn[Et+gt],Ti[gt-1]);for(;gt<4*Cn;++gt)Ti[gt]=0;Ct.K[0]=null,Ct.K[0]=Ti,Ge=1}}Pe=Ge;break;case 2:break;default:e(0)}F=Pe}}if(L=L[0],z=z[0],F&&Fe($,1)&&!(F=1<=(ye=Fe($,4))&&11>=ye)){w.a=3;break e}var rt;if(rt=F)t:{var Jr,on,An,wr=w,Zi=L,jo=z,Hr=ye,vo=_,Bo=wr.m,Mi=wr.s,Mn=[null],Hn=1,$r=0,$n=G$[Hr];n:for(;;){if(vo&&Fe(Bo,1)){var Xi=Fe(Bo,3)+2,qa=qe(Zi,Xi),ei=qe(jo,Xi),ds=qa*ei;if(!Ds(qa,ei,0,wr,Mn))break n;for(Mn=Mn[0],Mi.xc=Xi,Jr=0;Jr<ds;++Jr){var cr=Mn[Jr]>>8&65535;Mn[Jr]=cr,cr>=Hn&&(Hn=cr+1)}}if(Bo.h)break n;for(on=0;5>on;++on){var Ni=CO[on];!on&&0<Hr&&(Ni+=1<<Hr),$r<Ni&&($r=Ni)}var Ls=s(Hn*$n,T),Uo=Hn,Vs=s(Uo,be);if(Vs==null)var js=null;else e(65536>=Uo),js=Vs;var fs=o($r);if(js==null||fs==null||Ls==null){wr.a=1;break n}var Bs=Ls;for(Jr=An=0;Jr<Hn;++Jr){var gr=js[Jr],Us=gr.G,Ha=gr.H,xf=0,jl=1,Ji=0;for(on=0;5>on;++on){Ni=CO[on],Us[on]=Bs,Ha[on]=An,!on&&0<Hr&&(Ni+=1<<Hr);i:{var l1,zE=Ni,u1=wr,E0=fs,hG=Bs,pG=An,qE=0,Uu=u1.m,gG=Fe(Uu,1);if(i(E0,0,0,zE),gG){var mG=Fe(Uu,1)+1,vG=Fe(Uu,1),RO=Fe(Uu,vG==0?1:8);E0[RO]=1,mG==2&&(E0[RO=Fe(Uu,8)]=1);var d1=1}else{var OO=o(19),FO=Fe(Uu,4)+4;if(19<FO){u1.a=3;var f1=0;break i}for(l1=0;l1<FO;++l1)OO[H$[l1]]=Fe(Uu,3);var HE=void 0,I0=void 0,LO=u1,_G=OO,h1=zE,VO=E0,$E=0,zu=LO.m,jO=8,BO=s(128,T);r:for(;D(BO,0,7,_G,19);){if(Fe(zu,1)){var yG=2+2*Fe(zu,3);if((HE=2+Fe(zu,yG))>h1)break r}else HE=h1;for(I0=0;I0<h1&&HE--;){me(zu);var UO=BO[0+(127&J(zu))];ce(zu,zu.u+UO.g);var fp=UO.value;if(16>fp)VO[I0++]=fp,fp!=0&&(jO=fp);else{var wG=fp==16,zO=fp-16,bG=z$[zO],qO=Fe(zu,U$[zO])+bG;if(I0+qO>h1)break r;for(var xG=wG?jO:0;0<qO--;)VO[I0++]=xG}}$E=1;break r}$E||(LO.a=3),d1=$E}(d1=d1&&!Uu.h)&&(qE=D(hG,pG,8,E0,zE)),d1&&qE!=0?f1=qE:(u1.a=3,f1=0)}if(f1==0)break n;if(jl&&q$[on]==1&&(jl=Bs[An].g==0),xf+=Bs[An].g,An+=f1,3>=on){var S0,GE=fs[0];for(S0=1;S0<Ni;++S0)fs[S0]>GE&&(GE=fs[S0]);Ji+=GE}}if(gr.nd=jl,gr.Qb=0,jl&&(gr.qb=(Us[3][Ha[3]+0].value<<24|Us[1][Ha[1]+0].value<<16|Us[2][Ha[2]+0].value)>>>0,xf==0&&256>Us[0][Ha[0]+0].value&&(gr.Qb=1,gr.qb+=Us[0][Ha[0]+0].value<<8)),gr.jc=!gr.Qb&&6>Ji,gr.jc){var p1,Bl=gr;for(p1=0;p1<yf;++p1){var qu=p1,Hu=Bl.pd[qu],g1=Bl.G[0][Bl.H[0]+qu];256<=g1.value?(Hu.g=g1.g+256,Hu.value=g1.value):(Hu.g=0,Hu.value=0,qu>>=pi(g1,8,Hu),qu>>=pi(Bl.G[1][Bl.H[1]+qu],16,Hu),qu>>=pi(Bl.G[2][Bl.H[2]+qu],0,Hu),pi(Bl.G[3][Bl.H[3]+qu],24,Hu))}}}Mi.vc=Mn,Mi.Wb=Hn,Mi.Ya=js,Mi.yc=Ls,rt=1;break t}rt=0}if(!(F=rt)){w.a=3;break e}if(0<ye){if(Z.ua=1<<ye,!G(Z.Wa,ye)){w.a=1,F=0;break e}}else Z.ua=0;var WE=w,HO=L,CG=z,KE=WE.s,YE=KE.xc;if(WE.c=HO,WE.i=CG,KE.md=qe(HO,YE),KE.wc=YE==0?-1:(1<<YE)-1,_){w.xb=eG;break e}if((se=o(L*z))==null){w.a=1,F=0;break e}F=(F=Oo(w,se,0,L,z,z,null))&&!$.h;break e}return F?(R!=null?R[0]=se:(e(se==null),e(_)),w.$=0,_||Yi(Z)):Yi(Z),F}function Ic(d,p){var _=d.c*d.i,w=_+p+16*p;return e(d.c<=p),d.V=o(w),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+_+p,1)}function Sc(d,p){var _=d.C,w=p-_,R=d.V,F=d.Ba+d.c*_;for(e(p<=d.l.o);0<w;){var L=16<w?16:w,z=d.l.ma,$=d.l.width,Z=$*L,se=z.ca,ye=z.tb+$*_,X=d.Ta,le=d.Ua;ss(d,L,R,F),gO(X,le,se,ye,Z),Ro(z,_,_+L,se,ye,$),w-=L,R+=L*d.c,_+=L}e(_==p),d.C=d.Ma=p}function Ac(){this.ub=this.yd=this.td=this.Rb=0}function Sl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rp(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function lf(){this.Yb=(function(){var d=[];return(function p(_,w,R){for(var F=R[w],L=0;L<F&&(_.push(R.length>w+1?[]:0),!(R.length<w+1));L++)p(_[L],w+1,R)})(d,0,[3,11]),d})()}function Al(){this.jb=o(3),this.Wc=a([4,8],lf),this.Xc=a([4,17],lf)}function uf(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function go(){this.ld=this.La=this.dd=this.tc=0}function Fa(){this.Na=this.la=0}function sa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Dl(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ip(){this.uc=this.M=this.Nb=0,this.wa=Array(new go),this.Y=0,this.ya=Array(new Dl),this.aa=0,this.l=new Dc}function df(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ff(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new Ac,this.Kc=new Sl,this.ed=new uf,this.Qa=new rp,this.Ic=this.$c=this.Aa=0,this.D=new ip,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,O),this.ia=0,this.pb=s(4,sa),this.Pa=new Al,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new df),this.Hd=0,this.rb=Array(new Fa),this.sb=0,this.wa=Array(new go),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Dl),this.L=this.aa=0,this.gd=a([4,2],go),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ts(d,p){return 0>d?0:d>p?p:d}function Dc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function hf(){var d=new ff;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,x0||(x0=Eu)),d}function Or(d,p,_){return d.a==0&&(d.a=p,d.sc=_,d.cb=0),0}function pf(d,p,_){return 3<=_&&d[p+0]==157&&d[p+1]==1&&d[p+2]==42}function aa(d,p){if(d==null)return 0;if(d.a=0,d.sc="OK",p==null)return Or(d,2,"null VP8Io passed to VP8GetHeaders()");var _=p.data,w=p.w,R=p.ha;if(4>R)return Or(d,7,"Truncated header.");var F=_[w+0]|_[w+1]<<8|_[w+2]<<16,L=d.Od;if(L.Rb=!(1&F),L.td=F>>1&7,L.yd=F>>4&1,L.ub=F>>5,3<L.td)return Or(d,3,"Incorrect keyframe parameters.");if(!L.yd)return Or(d,4,"Frame not displayable.");w+=3,R-=3;var z=d.Kc;if(L.Rb){if(7>R)return Or(d,7,"cannot parse picture header");if(!pf(_,w,R))return Or(d,3,"Bad code word");z.c=16383&(_[w+4]<<8|_[w+3]),z.Td=_[w+4]>>6,z.i=16383&(_[w+6]<<8|_[w+5]),z.Ud=_[w+6]>>6,w+=7,R-=7,d.za=z.c+15>>4,d.Ub=z.i+15>>4,p.width=z.c,p.height=z.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,i((F=d.Pa).jb,0,255,F.jb.length),e((F=d.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,i(F.Zb,0,0,F.Zb.length),i(F.Lb,0,0,F.Lb)}if(L.ub>R)return Or(d,7,"bad partition length");Me(F=d.m,_,w,L.ub),w+=L.ub,R-=L.ub,L.Rb&&(z.Ld=we(F),z.Kd=we(F)),z=d.Qa;var $,Z=d.Pa;if(e(F!=null),e(z!=null),z.Cb=we(F),z.Cb){if(z.Bb=we(F),we(F)){for(z.Fb=we(F),$=0;4>$;++$)z.Zb[$]=we(F)?fe(F,7):0;for($=0;4>$;++$)z.Lb[$]=we(F)?fe(F,6):0}if(z.Bb)for($=0;3>$;++$)Z.jb[$]=we(F)?Ce(F,8):255}else z.Bb=0;if(F.Ka)return Or(d,3,"cannot parse segment header");if((z=d.ed).zd=we(F),z.Tb=Ce(F,6),z.wb=Ce(F,3),z.Pc=we(F),z.Pc&&we(F)){for(Z=0;4>Z;++Z)we(F)&&(z.vd[Z]=fe(F,6));for(Z=0;4>Z;++Z)we(F)&&(z.od[Z]=fe(F,6))}if(d.L=z.Tb==0?0:z.zd?1:2,F.Ka)return Or(d,3,"cannot parse filter header");var se=R;if(R=$=w,w=$+se,z=se,d.Xb=(1<<Ce(d.m,2))-1,se<3*(Z=d.Xb))_=7;else{for($+=3*Z,z-=3*Z,se=0;se<Z;++se){var ye=_[R+0]|_[R+1]<<8|_[R+2]<<16;ye>z&&(ye=z),Me(d.Jc[+se],_,$,ye),$+=ye,z-=ye,R+=3}Me(d.Jc[+Z],_,$,z),_=$<w?0:5}if(_!=0)return Or(d,_,"cannot parse partitions");for(_=Ce($=d.m,7),R=we($)?fe($,4):0,w=we($)?fe($,4):0,z=we($)?fe($,4):0,Z=we($)?fe($,4):0,$=we($)?fe($,4):0,se=d.Qa,ye=0;4>ye;++ye){if(se.Cb){var X=se.Zb[ye];se.Fb||(X+=_)}else{if(0<ye){d.pb[ye]=d.pb[0];continue}X=_}var le=d.pb[ye];le.Sc[0]=jE[Ts(X+R,127)],le.Sc[1]=BE[Ts(X+0,127)],le.Eb[0]=2*jE[Ts(X+w,127)],le.Eb[1]=101581*BE[Ts(X+z,127)]>>16,8>le.Eb[1]&&(le.Eb[1]=8),le.Qc[0]=jE[Ts(X+Z,117)],le.Qc[1]=BE[Ts(X+$,127)],le.lc=X+$}if(!L.Rb)return Or(d,4,"Not a key frame.");for(we(F),L=d.Pa,_=0;4>_;++_){for(R=0;8>R;++R)for(w=0;3>w;++w)for(z=0;11>z;++z)Z=Ne(F,X$[_][R][w][z])?Ce(F,8):Q$[_][R][w][z],L.Wc[_][R].Yb[w][z]=Z;for(R=0;17>R;++R)L.Xc[_][R]=L.Wc[_][J$[R]]}return d.kc=we(F),d.kc&&(d.Bd=Ce(F,8)),d.cb=1}function Eu(d,p,_,w,R,F,L){var z=p[R].Yb[_];for(_=0;16>R;++R){if(!Ne(d,z[_+0]))return R;for(;!Ne(d,z[_+1]);)if(z=p[++R].Yb[0],_=0,R==16)return 16;var $=p[R+1].Yb;if(Ne(d,z[_+2])){var Z=d,se=0;if(Ne(Z,(X=z)[(ye=_)+3]))if(Ne(Z,X[ye+6])){for(z=0,ye=2*(se=Ne(Z,X[ye+8]))+(X=Ne(Z,X[ye+9+se])),se=0,X=K$[ye];X[z];++z)se+=se+Ne(Z,X[z]);se+=3+(8<<ye)}else Ne(Z,X[ye+7])?(se=7+2*Ne(Z,165),se+=Ne(Z,145)):se=5+Ne(Z,159);else se=Ne(Z,X[ye+4])?3+Ne(Z,X[ye+5]):2;z=$[2]}else se=1,z=$[1];$=L+Y$[R],0>(Z=d).b&&Ae(Z);var ye,X=Z.b,le=(ye=Z.Ca>>1)-(Z.I>>X)>>31;--Z.b,Z.Ca+=le,Z.Ca|=1,Z.I-=(ye+1&le)<<X,F[$]=((se^le)-le)*w[(0<R)+0]}return 16}function gf(d){var p=d.rb[d.sb-1];p.la=0,p.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Fo(d,p,_,w,R){R=d[p+_+32*w]+(R>>3),d[p+_+32*w]=-256&R?0>R?0:255:R}function Qr(d,p,_,w,R,F){Fo(d,p,0,_,w+R),Fo(d,p,1,_,w+F),Fo(d,p,2,_,w-F),Fo(d,p,3,_,w-R)}function Qi(d){return(20091*d>>16)+d}function cs(d,p,_,w){var R,F=0,L=o(16);for(R=0;4>R;++R){var z=d[p+0]+d[p+8],$=d[p+0]-d[p+8],Z=(35468*d[p+4]>>16)-Qi(d[p+12]),se=Qi(d[p+4])+(35468*d[p+12]>>16);L[F+0]=z+se,L[F+1]=$+Z,L[F+2]=$-Z,L[F+3]=z-se,F+=4,p++}for(R=F=0;4>R;++R)z=(d=L[F+0]+4)+L[F+8],$=d-L[F+8],Z=(35468*L[F+4]>>16)-Qi(L[F+12]),Fo(_,w,0,0,z+(se=Qi(L[F+4])+(35468*L[F+12]>>16))),Fo(_,w,1,0,$+Z),Fo(_,w,2,0,$-Z),Fo(_,w,3,0,z-se),F++,w+=32}function Iu(d,p,_,w){var R=d[p+0]+4,F=35468*d[p+4]>>16,L=Qi(d[p+4]),z=35468*d[p+1]>>16;Qr(_,w,0,R+L,d=Qi(d[p+1]),z),Qr(_,w,1,R+F,d,z),Qr(_,w,2,R-F,d,z),Qr(_,w,3,R-L,d,z)}function Su(d,p,_,w,R){cs(d,p,_,w),R&&cs(d,p+16,_,w+4)}function Ms(d,p,_,w){bf(d,p+0,_,w,1),bf(d,p+32,_,w+128,1)}function Vn(d,p,_,w){var R;for(d=d[p+0]+4,R=0;4>R;++R)for(p=0;4>p;++p)Fo(_,w,p,R,d)}function Tl(d,p,_,w){d[p+0]&&jn(d,p+0,_,w),d[p+16]&&jn(d,p+16,_,w+4),d[p+32]&&jn(d,p+32,_,w+128),d[p+48]&&jn(d,p+48,_,w+128+4)}function ca(d,p,_,w){var R,F=o(16);for(R=0;4>R;++R){var L=d[p+0+R]+d[p+12+R],z=d[p+4+R]+d[p+8+R],$=d[p+4+R]-d[p+8+R],Z=d[p+0+R]-d[p+12+R];F[0+R]=L+z,F[8+R]=L-z,F[4+R]=Z+$,F[12+R]=Z-$}for(R=0;4>R;++R)L=(d=F[0+4*R]+3)+F[3+4*R],z=F[1+4*R]+F[2+4*R],$=F[1+4*R]-F[2+4*R],Z=d-F[3+4*R],_[w+0]=L+z>>3,_[w+16]=Z+$>>3,_[w+32]=L-z>>3,_[w+48]=Z-$>>3,w+=64}function Ns(d,p,_){var w,R=p-32,F=Fs,L=255-d[R-1];for(w=0;w<_;++w){var z,$=F,Z=L+d[p-1];for(z=0;z<_;++z)d[p+z]=$[Z+d[R+z]];p+=32}}function c0(d,p){Ns(d,p,4)}function op(d,p){Ns(d,p,8)}function l0(d,p){Ns(d,p,16)}function mf(d,p){var _;for(_=0;16>_;++_)r(d,p+32*_,d,p-32,16)}function sp(d,p){var _;for(_=16;0<_;--_)i(d,p,d[p-1],16),p+=32}function Ps(d,p,_){var w;for(w=0;16>w;++w)i(p,_+32*w,d,16)}function Ml(d,p){var _,w=16;for(_=0;16>_;++_)w+=d[p-1+32*_]+d[p+_-32];Ps(w>>5,d,p)}function mo(d,p){var _,w=8;for(_=0;16>_;++_)w+=d[p-1+32*_];Ps(w>>4,d,p)}function Au(d,p){var _,w=8;for(_=0;16>_;++_)w+=d[p+_-32];Ps(w>>4,d,p)}function ap(d,p){Ps(128,d,p)}function Gt(d,p,_){return d+2*p+_+2>>2}function Tc(d,p){var _,w=p-32;for(w=new Uint8Array([Gt(d[w-1],d[w+0],d[w+1]),Gt(d[w+0],d[w+1],d[w+2]),Gt(d[w+1],d[w+2],d[w+3]),Gt(d[w+2],d[w+3],d[w+4])]),_=0;4>_;++_)r(d,p+32*_,w,0,w.length)}function u0(d,p){var _=d[p-1],w=d[p-1+32],R=d[p-1+64],F=d[p-1+96];Ue(d,p+0,16843009*Gt(d[p-1-32],_,w)),Ue(d,p+32,16843009*Gt(_,w,R)),Ue(d,p+64,16843009*Gt(w,R,F)),Ue(d,p+96,16843009*Gt(R,F,F))}function d0(d,p){var _,w=4;for(_=0;4>_;++_)w+=d[p+_-32]+d[p-1+32*_];for(w>>=3,_=0;4>_;++_)i(d,p+32*_,w,4)}function La(d,p){var _=d[p-1+0],w=d[p-1+32],R=d[p-1+64],F=d[p-1-32],L=d[p+0-32],z=d[p+1-32],$=d[p+2-32],Z=d[p+3-32];d[p+0+96]=Gt(w,R,d[p-1+96]),d[p+1+96]=d[p+0+64]=Gt(_,w,R),d[p+2+96]=d[p+1+64]=d[p+0+32]=Gt(F,_,w),d[p+3+96]=d[p+2+64]=d[p+1+32]=d[p+0+0]=Gt(L,F,_),d[p+3+64]=d[p+2+32]=d[p+1+0]=Gt(z,L,F),d[p+3+32]=d[p+2+0]=Gt($,z,L),d[p+3+0]=Gt(Z,$,z)}function zi(d,p){var _=d[p+1-32],w=d[p+2-32],R=d[p+3-32],F=d[p+4-32],L=d[p+5-32],z=d[p+6-32],$=d[p+7-32];d[p+0+0]=Gt(d[p+0-32],_,w),d[p+1+0]=d[p+0+32]=Gt(_,w,R),d[p+2+0]=d[p+1+32]=d[p+0+64]=Gt(w,R,F),d[p+3+0]=d[p+2+32]=d[p+1+64]=d[p+0+96]=Gt(R,F,L),d[p+3+32]=d[p+2+64]=d[p+1+96]=Gt(F,L,z),d[p+3+64]=d[p+2+96]=Gt(L,z,$),d[p+3+96]=Gt(z,$,$)}function f0(d,p){var _=d[p-1+0],w=d[p-1+32],R=d[p-1+64],F=d[p-1-32],L=d[p+0-32],z=d[p+1-32],$=d[p+2-32],Z=d[p+3-32];d[p+0+0]=d[p+1+64]=F+L+1>>1,d[p+1+0]=d[p+2+64]=L+z+1>>1,d[p+2+0]=d[p+3+64]=z+$+1>>1,d[p+3+0]=$+Z+1>>1,d[p+0+96]=Gt(R,w,_),d[p+0+64]=Gt(w,_,F),d[p+0+32]=d[p+1+96]=Gt(_,F,L),d[p+1+32]=d[p+2+96]=Gt(F,L,z),d[p+2+32]=d[p+3+96]=Gt(L,z,$),d[p+3+32]=Gt(z,$,Z)}function h0(d,p){var _=d[p+0-32],w=d[p+1-32],R=d[p+2-32],F=d[p+3-32],L=d[p+4-32],z=d[p+5-32],$=d[p+6-32],Z=d[p+7-32];d[p+0+0]=_+w+1>>1,d[p+1+0]=d[p+0+64]=w+R+1>>1,d[p+2+0]=d[p+1+64]=R+F+1>>1,d[p+3+0]=d[p+2+64]=F+L+1>>1,d[p+0+32]=Gt(_,w,R),d[p+1+32]=d[p+0+96]=Gt(w,R,F),d[p+2+32]=d[p+1+96]=Gt(R,F,L),d[p+3+32]=d[p+2+96]=Gt(F,L,z),d[p+3+64]=Gt(L,z,$),d[p+3+96]=Gt(z,$,Z)}function la(d,p){var _=d[p-1+0],w=d[p-1+32],R=d[p-1+64],F=d[p-1+96];d[p+0+0]=_+w+1>>1,d[p+2+0]=d[p+0+32]=w+R+1>>1,d[p+2+32]=d[p+0+64]=R+F+1>>1,d[p+1+0]=Gt(_,w,R),d[p+3+0]=d[p+1+32]=Gt(w,R,F),d[p+3+32]=d[p+1+64]=Gt(R,F,F),d[p+3+64]=d[p+2+64]=d[p+0+96]=d[p+1+96]=d[p+2+96]=d[p+3+96]=F}function Mc(d,p){var _=d[p-1+0],w=d[p-1+32],R=d[p-1+64],F=d[p-1+96],L=d[p-1-32],z=d[p+0-32],$=d[p+1-32],Z=d[p+2-32];d[p+0+0]=d[p+2+32]=_+L+1>>1,d[p+0+32]=d[p+2+64]=w+_+1>>1,d[p+0+64]=d[p+2+96]=R+w+1>>1,d[p+0+96]=F+R+1>>1,d[p+3+0]=Gt(z,$,Z),d[p+2+0]=Gt(L,z,$),d[p+1+0]=d[p+3+32]=Gt(_,L,z),d[p+1+32]=d[p+3+64]=Gt(w,_,L),d[p+1+64]=d[p+3+96]=Gt(R,w,_),d[p+1+96]=Gt(F,R,w)}function Nc(d,p){var _;for(_=0;8>_;++_)r(d,p+32*_,d,p-32,8)}function Nl(d,p){var _;for(_=0;8>_;++_)i(d,p,d[p-1],8),p+=32}function Lo(d,p,_){var w;for(w=0;8>w;++w)i(p,_+32*w,d,8)}function cp(d,p){var _,w=8;for(_=0;8>_;++_)w+=d[p+_-32]+d[p-1+32*_];Lo(w>>4,d,p)}function Pl(d,p){var _,w=4;for(_=0;8>_;++_)w+=d[p+_-32];Lo(w>>3,d,p)}function tr(d,p){var _,w=4;for(_=0;8>_;++_)w+=d[p-1+32*_];Lo(w>>3,d,p)}function lp(d,p){Lo(128,d,p)}function Va(d,p,_){var w=d[p-_],R=d[p+0],F=3*(R-w)+RE[1020+d[p-2*_]-d[p+_]],L=e1[112+(F+4>>3)];d[p-_]=Fs[255+w+e1[112+(F+3>>3)]],d[p+0]=Fs[255+R-L]}function Du(d,p,_,w){var R=d[p+0],F=d[p+_];return pa[255+d[p-2*_]-d[p-_]]>w||pa[255+F-R]>w}function kl(d,p,_,w){return 4*pa[255+d[p-_]-d[p+0]]+pa[255+d[p-2*_]-d[p+_]]<=w}function Tu(d,p,_,w,R){var F=d[p-3*_],L=d[p-2*_],z=d[p-_],$=d[p+0],Z=d[p+_],se=d[p+2*_],ye=d[p+3*_];return 4*pa[255+z-$]+pa[255+L-Z]>w?0:pa[255+d[p-4*_]-F]<=R&&pa[255+F-L]<=R&&pa[255+L-z]<=R&&pa[255+ye-se]<=R&&pa[255+se-Z]<=R&&pa[255+Z-$]<=R}function ua(d,p,_,w){var R=2*w+1;for(w=0;16>w;++w)kl(d,p+w,_,R)&&Va(d,p+w,_)}function Mu(d,p,_,w){var R=2*w+1;for(w=0;16>w;++w)kl(d,p+w*_,1,R)&&Va(d,p+w*_,1)}function ls(d,p,_,w){var R;for(R=3;0<R;--R)ua(d,p+=4*_,_,w)}function vf(d,p,_,w){var R;for(R=3;0<R;--R)Mu(d,p+=4,_,w)}function ja(d,p,_,w,R,F,L,z){for(F=2*F+1;0<R--;){if(Tu(d,p,_,F,L))if(Du(d,p,_,z))Va(d,p,_);else{var $=d,Z=p,se=_,ye=$[Z-2*se],X=$[Z-se],le=$[Z+0],ve=$[Z+se],Pe=$[Z+2*se],_e=27*(Le=RE[1020+3*(le-X)+RE[1020+ye-ve]])+63>>7,Re=18*Le+63>>7,Le=9*Le+63>>7;$[Z-3*se]=Fs[255+$[Z-3*se]+Le],$[Z-2*se]=Fs[255+ye+Re],$[Z-se]=Fs[255+X+_e],$[Z+0]=Fs[255+le-_e],$[Z+se]=Fs[255+ve-Re],$[Z+2*se]=Fs[255+Pe-Le]}p+=w}}function Vo(d,p,_,w,R,F,L,z){for(F=2*F+1;0<R--;){if(Tu(d,p,_,F,L))if(Du(d,p,_,z))Va(d,p,_);else{var $=d,Z=p,se=_,ye=$[Z-se],X=$[Z+0],le=$[Z+se],ve=e1[112+(4+(Pe=3*(X-ye))>>3)],Pe=e1[112+(Pe+3>>3)],_e=ve+1>>1;$[Z-2*se]=Fs[255+$[Z-2*se]+_e],$[Z-se]=Fs[255+ye+Pe],$[Z+0]=Fs[255+X-ve],$[Z+se]=Fs[255+le-_e]}p+=w}}function _f(d,p,_,w,R,F){ja(d,p,_,1,16,w,R,F)}function Ba(d,p,_,w,R,F){ja(d,p,1,_,16,w,R,F)}function Rl(d,p,_,w,R,F){var L;for(L=3;0<L;--L)Vo(d,p+=4*_,_,1,16,w,R,F)}function v(d,p,_,w,R,F){var L;for(L=3;0<L;--L)Vo(d,p+=4,1,_,16,w,R,F)}function k(d,p,_,w,R,F,L,z){ja(d,p,R,1,8,F,L,z),ja(_,w,R,1,8,F,L,z)}function Q(d,p,_,w,R,F,L,z){ja(d,p,1,R,8,F,L,z),ja(_,w,1,R,8,F,L,z)}function re(d,p,_,w,R,F,L,z){Vo(d,p+4*R,R,1,8,F,L,z),Vo(_,w+4*R,R,1,8,F,L,z)}function de(d,p,_,w,R,F,L,z){Vo(d,p+4,1,R,8,F,L,z),Vo(_,w+4,1,R,8,F,L,z)}function ke(){this.ba=new tn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Sn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ze(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function pt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bt(){this.ua=0,this.Wa=new Ft,this.vb=new Ft,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new be,this.yc=new T}function qt(){this.xb=this.a=0,this.l=new Dc,this.ca=new tn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bt,this.ab=0,this.gc=s(4,pt),this.Oc=0}function Kt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Dc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wn(d,p,_,w,R,F,L){for(d=d==null?0:d[p+0],p=0;p<L;++p)R[F+p]=d+_[w+p]&255,d=R[F+p]}function hr(d,p,_,w,R,F,L){var z;if(d==null)wn(null,null,_,w,R,F,L);else for(z=0;z<L;++z)R[F+z]=d[p+z]+_[w+z]&255}function nr(d,p,_,w,R,F,L){if(d==null)wn(null,null,_,w,R,F,L);else{var z,$=d[p+0],Z=$,se=$;for(z=0;z<L;++z)Z=se+($=d[p+z])-Z,se=_[w+z]+(-256&Z?0>Z?0:255:Z)&255,Z=$,R[F+z]=se}}function qn(d,p,_,w){var R=p.width,F=p.o;if(e(d!=null&&p!=null),0>_||0>=w||_+w>F)return null;if(!d.Cc){if(d.ga==null){var L;if(d.ga=new Kt,(L=d.ga==null)||(L=p.width*p.o,e(d.Gb.length==0),d.Gb=o(L),d.Uc=0,d.Gb==null?L=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,L=1),L=!L),!L){L=d.ga;var z=d.Fa,$=d.P,Z=d.qc,se=d.mb,ye=d.nb,X=$+1,le=Z-1,ve=L.l;if(e(z!=null&&se!=null&&p!=null),Bu[0]=null,Bu[1]=wn,Bu[2]=hr,Bu[3]=nr,L.ca=se,L.tb=ye,L.c=p.width,L.i=p.height,e(0<L.c&&0<L.i),1>=Z)p=0;else if(L.$a=3&z[$+0],L.Z=z[$+0]>>2&3,L.Lc=z[$+0]>>4&3,$=z[$+0]>>6&3,0>L.$a||1<L.$a||4<=L.Z||1<L.Lc||$)p=0;else if(ve.put=Pt,ve.ac=Ss,ve.bc=oa,ve.ma=L,ve.width=p.width,ve.height=p.height,ve.Da=p.Da,ve.v=p.v,ve.va=p.va,ve.j=p.j,ve.o=p.o,L.$a)e:{e(L.$a==1),p=po();t:for(;;){if(p==null){p=0;break e}if(e(L!=null),L.mc=p,p.c=L.c,p.i=L.i,p.l=L.l,p.l.ma=L,p.l.width=L.c,p.l.height=L.i,p.a=0,De(p.m,z,X,le),!Ds(L.c,L.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&As(p.s)?(L.ic=1,z=p.c*p.i,p.Ta=null,p.Ua=0,p.V=o(z),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(L.ic=0,p=Ic(p,L.c)),!p))break t;p=1;break e}L.mc=null,p=0}else p=le>=L.c*L.i;L=!p}if(L)return null;d.ga.Lc!=1?d.Ga=0:w=F-_}e(d.ga!=null),e(_+w<=F);e:{if(p=(z=d.ga).c,F=z.l.o,z.$a==0){if(X=d.rc,le=d.Vc,ve=d.Fa,$=d.P+1+_*p,Z=d.mb,se=d.nb+_*p,e($<=d.P+d.qc),z.Z!=0)for(e(Bu[z.Z]!=null),L=0;L<w;++L)Bu[z.Z](X,le,ve,$,Z,se,p),X=Z,le=se,se+=p,$+=p;else for(L=0;L<w;++L)r(Z,se,ve,$,p),X=Z,le=se,se+=p,$+=p;d.rc=X,d.Vc=le}else{if(e(z.mc!=null),p=_+w,e((L=z.mc)!=null),e(p<=L.i),L.C>=p)p=1;else if(z.ic||yr(),z.ic){z=L.V,X=L.Ba,le=L.c;var Pe=L.i,_e=(ve=1,$=L.$/le,Z=L.$%le,se=L.m,ye=L.s,L.$),Re=le*Pe,Le=le*p,Ge=ye.wc,He=_e<Le?Ai(ye,Z,$):null;e(_e<=Re),e(p<=Pe),e(As(ye));t:for(;;){for(;!se.h&&_e<Le;){if(Z&Ge||(He=Ai(ye,Z,$)),e(He!=null),me(se),256>(Pe=er(He.G[0],He.H[0],se)))z[X+_e]=Pe,++_e,++Z>=le&&(Z=0,++$<=p&&!($%16)&&as(L,$));else{if(!(280>Pe)){ve=0;break t}Pe=ko(Pe-256,se);var Mt,gt=er(He.G[4],He.H[4],se);if(me(se),!(_e>=(gt=Ui(le,gt=ko(gt,se)))&&Re-_e>=Pe)){ve=0;break t}for(Mt=0;Mt<Pe;++Mt)z[X+_e+Mt]=z[X+_e+Mt-gt];for(_e+=Pe,Z+=Pe;Z>=le;)Z-=le,++$<=p&&!($%16)&&as(L,$);_e<Le&&Z&Ge&&(He=Ai(ye,Z,$))}e(se.h==ie(se))}as(L,$>p?p:$);break t}!ve||se.h&&_e<Re?(ve=0,L.a=se.h?5:3):L.$=_e,p=ve}else p=Oo(L,L.V,L.Ba,L.c,L.i,p,Sc);if(!p){w=0;break e}}_+w>=F&&(d.Cc=1),w=1}if(!w)return null;if(d.Cc&&((w=d.ga)!=null&&(w.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+_*R}function qr(d,p,_,w,R,F){for(;0<R--;){var L,z=d,$=p+(_?1:0),Z=d,se=p+(_?0:3);for(L=0;L<w;++L){var ye=Z[se+4*L];ye!=255&&(ye*=32897,z[$+4*L+0]=z[$+4*L+0]*ye>>23,z[$+4*L+1]=z[$+4*L+1]*ye>>23,z[$+4*L+2]=z[$+4*L+2]*ye>>23)}p+=F}}function Fr(d,p,_,w,R){for(;0<w--;){var F;for(F=0;F<_;++F){var L=d[p+2*F+0],z=15&(Z=d[p+2*F+1]),$=4369*z,Z=(240&Z|Z>>4)*$>>16;d[p+2*F+0]=(240&L|L>>4)*$>>16&240|(15&L|L<<4)*$>>16>>4&15,d[p+2*F+1]=240&Z|z}p+=R}}function gi(d,p,_,w,R,F,L,z){var $,Z,se=255;for(Z=0;Z<R;++Z){for($=0;$<w;++$){var ye=d[p+$];F[L+4*$]=ye,se&=ye}p+=_,L+=z}return se!=255}function us(d,p,_,w,R){var F;for(F=0;F<R;++F)_[w+F]=d[p+F]>>8}function yr(){b0=qr,hO=Fr,pO=gi,gO=us}function da(d,p,_){S[d]=function(w,R,F,L,z,$,Z,se,ye,X,le,ve,Pe,_e,Re,Le,Ge){var He,Mt=Ge-1>>1,gt=z[$+0]|Z[se+0]<<16,hn=ye[X+0]|le[ve+0]<<16;e(w!=null);var Ct=3*gt+hn+131074>>2;for(p(w[R+0],255&Ct,Ct>>16,Pe,_e),F!=null&&(Ct=3*hn+gt+131074>>2,p(F[L+0],255&Ct,Ct>>16,Re,Le)),He=1;He<=Mt;++He){var Cn=z[$+He]|Z[se+He]<<16,Ti=ye[X+He]|le[ve+He]<<16,pn=gt+Cn+hn+Ti+524296,Et=pn+2*(Cn+hn)>>3;Ct=Et+gt>>1,gt=(pn=pn+2*(gt+Ti)>>3)+Cn>>1,p(w[R+2*He-1],255&Ct,Ct>>16,Pe,_e+(2*He-1)*_),p(w[R+2*He-0],255&gt,gt>>16,Pe,_e+(2*He-0)*_),F!=null&&(Ct=pn+hn>>1,gt=Et+Ti>>1,p(F[L+2*He-1],255&Ct,Ct>>16,Re,Le+(2*He-1)*_),p(F[L+2*He+0],255&gt,gt>>16,Re,Le+(2*He+0)*_)),gt=Cn,hn=Ti}1&Ge||(Ct=3*gt+hn+131074>>2,p(w[R+Ge-1],255&Ct,Ct>>16,Pe,_e+(Ge-1)*_),F!=null&&(Ct=3*hn+gt+131074>>2,p(F[L+Ge-1],255&Ct,Ct>>16,Re,Le+(Ge-1)*_)))}}function Nu(){ga[t1]=tG,ga[n1]=SO,ga[bO]=nG,ga[r1]=AO,ga[i1]=DO,ga[OE]=TO,ga[xO]=rG,ga[FE]=SO,ga[LE]=AO,ga[o1]=DO,ga[VE]=TO}function ks(d){return d&~iG?0>d?0:255:d>>MO}function f(d,p){return ks((19077*d>>8)+(26149*p>>8)-14234)}function y(d,p,_){return ks((19077*d>>8)-(6419*p>>8)-(13320*_>>8)+8708)}function E(d,p){return ks((19077*d>>8)+(33050*p>>8)-17685)}function U(d,p,_,w,R){w[R+0]=f(d,_),w[R+1]=y(d,p,_),w[R+2]=E(d,p)}function ue(d,p,_,w,R){w[R+0]=E(d,p),w[R+1]=y(d,p,_),w[R+2]=f(d,_)}function Ee(d,p,_,w,R){var F=y(d,p,_);p=F<<3&224|E(d,p)>>3,w[R+0]=248&f(d,_)|F>>5,w[R+1]=p}function Xe(d,p,_,w,R){var F=240&E(d,p)|15;w[R+0]=240&f(d,_)|y(d,p,_)>>4,w[R+1]=F}function Tn(d,p,_,w,R){w[R+0]=255,U(d,p,_,w,R+1)}function Lr(d,p,_,w,R){ue(d,p,_,w,R),w[R+3]=255}function Wt(d,p,_,w,R){U(d,p,_,w,R),w[R+3]=255}function pr(d,p,_){S[d]=function(w,R,F,L,z,$,Z,se,ye){for(var X=se+(-2&ye)*_;se!=X;)p(w[R+0],F[L+0],z[$+0],Z,se),p(w[R+1],F[L+0],z[$+0],Z,se+_),R+=2,++L,++$,se+=2*_;1&ye&&p(w[R+0],F[L+0],z[$+0],Z,se)}}function Vr(d,p,_){return _==0?d==0?p==0?6:5:p==0?4:0:_}function Ua(d,p,_,w,R){switch(d>>>30){case 3:bf(p,_,w,R,0);break;case 2:ha(p,_,w,R);break;case 1:jn(p,_,w,R)}}function Ir(d,p){var _,w,R=p.M,F=p.Nb,L=d.oc,z=d.pc+40,$=d.oc,Z=d.pc+584,se=d.oc,ye=d.pc+600;for(_=0;16>_;++_)L[z+32*_-1]=129;for(_=0;8>_;++_)$[Z+32*_-1]=129,se[ye+32*_-1]=129;for(0<R?L[z-1-32]=$[Z-1-32]=se[ye-1-32]=129:(i(L,z-32-1,127,21),i($,Z-32-1,127,9),i(se,ye-32-1,127,9)),w=0;w<d.za;++w){var X=p.ya[p.aa+w];if(0<w){for(_=-1;16>_;++_)r(L,z+32*_-4,L,z+32*_+12,4);for(_=-1;8>_;++_)r($,Z+32*_-4,$,Z+32*_+4,4),r(se,ye+32*_-4,se,ye+32*_+4,4)}var le=d.Gd,ve=d.Hd+w,Pe=X.ad,_e=X.Hc;if(0<R&&(r(L,z-32,le[ve].y,0,16),r($,Z-32,le[ve].f,0,8),r(se,ye-32,le[ve].ea,0,8)),X.Za){var Re=L,Le=z-32+16;for(0<R&&(w>=d.za-1?i(Re,Le,le[ve].y[15],4):r(Re,Le,le[ve+1].y,0,4)),_=0;4>_;_++)Re[Le+128+_]=Re[Le+256+_]=Re[Le+384+_]=Re[Le+0+_];for(_=0;16>_;++_,_e<<=2)Re=L,Le=z+PO[_],za[X.Ob[_]](Re,Le),Ua(_e,Pe,16*+_,Re,Le)}else if(Re=Vr(w,R,X.Ob[0]),ju[Re](L,z),_e!=0)for(_=0;16>_;++_,_e<<=2)Ua(_e,Pe,16*+_,L,z+PO[_]);for(_=X.Gc,Re=Vr(w,R,X.Dd),Vl[Re]($,Z),Vl[Re](se,ye),_e=Pe,Re=$,Le=Z,255&(X=0|_)&&(170&X?Rc(_e,256,Re,Le):ar(_e,256,Re,Le)),X=se,_e=ye,255&(_>>=8)&&(170&_?Rc(Pe,320,X,_e):ar(Pe,320,X,_e)),R<d.Ub-1&&(r(le[ve].y,0,L,z+480,16),r(le[ve].f,0,$,Z+224,8),r(le[ve].ea,0,se,ye+224,8)),_=8*F*d.B,le=d.sa,ve=d.ta+16*w+16*F*d.R,Pe=d.qa,X=d.ra+8*w+_,_e=d.Ha,Re=d.Ia+8*w+_,_=0;16>_;++_)r(le,ve+_*d.R,L,z+32*_,16);for(_=0;8>_;++_)r(Pe,X+_*d.B,$,Z+32*_,8),r(_e,Re+_*d.B,se,ye+32*_,8)}}function fa(d,p,_,w,R,F,L,z,$){var Z=[0],se=[0],ye=0,X=$!=null?$.kd:0,le=$??new ze;if(d==null||12>_)return 7;le.data=d,le.w=p,le.ha=_,p=[p],_=[_],le.gb=[le.gb];e:{var ve=p,Pe=_,_e=le.gb;if(e(d!=null),e(Pe!=null),e(_e!=null),_e[0]=0,12<=Pe[0]&&!t(d,ve[0],"RIFF")){if(t(d,ve[0]+8,"WEBP")){_e=3;break e}var Re=ct(d,ve[0]+4);if(12>Re||4294967286<Re){_e=3;break e}if(X&&Re>Pe[0]-8){_e=7;break e}_e[0]=Re,ve[0]+=12,Pe[0]-=12}_e=0}if(_e!=0)return _e;for(Re=0<le.gb[0],_=_[0];;){e:{var Le=d;Pe=p,_e=_;var Ge=Z,He=se,Mt=ve=[0];if((Ct=ye=[ye])[0]=0,8>_e[0])_e=7;else{if(!t(Le,Pe[0],"VP8X")){if(ct(Le,Pe[0]+4)!=10){_e=3;break e}if(18>_e[0]){_e=7;break e}var gt=ct(Le,Pe[0]+8),hn=1+We(Le,Pe[0]+12);if(2147483648<=hn*(Le=1+We(Le,Pe[0]+15))){_e=3;break e}Mt!=null&&(Mt[0]=gt),Ge!=null&&(Ge[0]=hn),He!=null&&(He[0]=Le),Pe[0]+=18,_e[0]-=18,Ct[0]=1}_e=0}}if(ye=ye[0],ve=ve[0],_e!=0)return _e;if(Pe=!!(2&ve),!Re&&ye)return 3;if(F!=null&&(F[0]=!!(16&ve)),L!=null&&(L[0]=Pe),z!=null&&(z[0]=0),L=Z[0],ve=se[0],ye&&Pe&&$==null){_e=0;break}if(4>_){_e=7;break}if(Re&&ye||!Re&&!ye&&!t(d,p[0],"ALPH")){_=[_],le.na=[le.na],le.P=[le.P],le.Sa=[le.Sa];e:{gt=d,_e=p,Re=_;var Ct=le.gb;Ge=le.na,He=le.P,Mt=le.Sa,hn=22,e(gt!=null),e(Re!=null),Le=_e[0];var Cn=Re[0];for(e(Ge!=null),e(Mt!=null),Ge[0]=null,He[0]=null,Mt[0]=0;;){if(_e[0]=Le,Re[0]=Cn,8>Cn){_e=7;break e}var Ti=ct(gt,Le+4);if(4294967286<Ti){_e=3;break e}var pn=8+Ti+1&-2;if(hn+=pn,0<Ct&&hn>Ct){_e=3;break e}if(!t(gt,Le,"VP8 ")||!t(gt,Le,"VP8L")){_e=0;break e}if(Cn[0]<pn){_e=7;break e}t(gt,Le,"ALPH")||(Ge[0]=gt,He[0]=Le+8,Mt[0]=Ti),Le+=pn,Cn-=pn}}if(_=_[0],le.na=le.na[0],le.P=le.P[0],le.Sa=le.Sa[0],_e!=0)break}_=[_],le.Ja=[le.Ja],le.xa=[le.xa];e:if(Ct=d,_e=p,Re=_,Ge=le.gb[0],He=le.Ja,Mt=le.xa,gt=_e[0],Le=!t(Ct,gt,"VP8 "),hn=!t(Ct,gt,"VP8L"),e(Ct!=null),e(Re!=null),e(He!=null),e(Mt!=null),8>Re[0])_e=7;else{if(Le||hn){if(Ct=ct(Ct,gt+4),12<=Ge&&Ct>Ge-12){_e=3;break e}if(X&&Ct>Re[0]-8){_e=7;break e}He[0]=Ct,_e[0]+=8,Re[0]-=8,Mt[0]=hn}else Mt[0]=5<=Re[0]&&Ct[gt+0]==47&&!(Ct[gt+4]>>5),He[0]=Re[0];_e=0}if(_=_[0],le.Ja=le.Ja[0],le.xa=le.xa[0],p=p[0],_e!=0)break;if(4294967286<le.Ja)return 3;if(z==null||Pe||(z[0]=le.xa?2:1),L=[L],ve=[ve],le.xa){if(5>_){_e=7;break}z=L,X=ve,Pe=F,d==null||5>_?d=0:5<=_&&d[p+0]==47&&!(d[p+4]>>5)?(Re=[0],Ct=[0],Ge=[0],De(He=new W,d,p,_),_r(He,Re,Ct,Ge)?(z!=null&&(z[0]=Re[0]),X!=null&&(X[0]=Ct[0]),Pe!=null&&(Pe[0]=Ge[0]),d=1):d=0):d=0}else{if(10>_){_e=7;break}z=ve,d==null||10>_||!pf(d,p+3,_-3)?d=0:(X=d[p+0]|d[p+1]<<8|d[p+2]<<16,Pe=16383&(d[p+7]<<8|d[p+6]),d=16383&(d[p+9]<<8|d[p+8]),1&X||3<(X>>1&7)||!(X>>4&1)||X>>5>=le.Ja||!Pe||!d?d=0:(L&&(L[0]=Pe),z&&(z[0]=d),d=1))}if(!d||(L=L[0],ve=ve[0],ye&&(Z[0]!=L||se[0]!=ve)))return 3;$!=null&&($[0]=le,$.offset=p-$.w,e(4294967286>p-$.w),e($.offset==$.ha-_));break}return _e==0||_e==7&&ye&&$==null?(F!=null&&(F[0]|=le.na!=null&&0<le.na.length),w!=null&&(w[0]=L),R!=null&&(R[0]=ve),0):_e}function Ol(d,p,_){var w=p.width,R=p.height,F=0,L=0,z=w,$=R;if(p.Da=d!=null&&0<d.Da,p.Da&&(z=d.cd,$=d.bd,F=d.v,L=d.j,11>_||(F&=-2,L&=-2),0>F||0>L||0>=z||0>=$||F+z>w||L+$>R))return 0;if(p.v=F,p.j=L,p.va=F+z,p.o=L+$,p.U=z,p.T=$,p.da=d!=null&&0<d.da,p.da){if(!It(z,$,_=[d.ib],F=[d.hb]))return 0;p.ib=_[0],p.hb=F[0]}return p.ob=d!=null&&d.ob,p.Kb=d==null||!d.Sd,p.da&&(p.ob=p.ib<3*w/4&&p.hb<3*R/4,p.Kb=0),1}function p0(d){if(d==null)return 2;if(11>d.S){var p=d.f.RGBA;p.fb+=(d.height-1)*p.A,p.A=-p.A}else p=d.f.kb,d=d.height,p.O+=(d-1)*p.fa,p.fa=-p.fa,p.N+=(d-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(d-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(d-1)*p.lb,p.lb=-p.lb);return 0}function Pu(d,p,_,w){if(w==null||0>=d||0>=p)return 2;if(_!=null){if(_.Da){var R=_.cd,F=_.bd,L=-2&_.v,z=-2&_.j;if(0>L||0>z||0>=R||0>=F||L+R>d||z+F>p)return 2;d=R,p=F}if(_.da){if(!It(d,p,R=[_.ib],F=[_.hb]))return 2;d=R[0],p=F[0]}}w.width=d,w.height=p;e:{var $=w.width,Z=w.height;if(d=w.S,0>=$||0>=Z||!(d>=t1&&13>d))d=2;else{if(0>=w.Rd&&w.sd==null){L=F=R=p=0;var se=(z=$*kO[d])*Z;if(11>d||(F=(Z+1)/2*(p=($+1)/2),d==12&&(L=(R=$)*Z)),(Z=o(se+2*F+L))==null){d=1;break e}w.sd=Z,11>d?(($=w.f.RGBA).eb=Z,$.fb=0,$.A=z,$.size=se):(($=w.f.kb).y=Z,$.O=0,$.fa=z,$.Fd=se,$.f=Z,$.N=0+se,$.Ab=p,$.Cd=F,$.ea=Z,$.W=0+se+F,$.Db=p,$.Ed=F,d==12&&($.F=Z,$.J=0+se+2*F),$.Tc=L,$.lb=R)}if(p=1,R=w.S,F=w.width,L=w.height,R>=t1&&13>R)if(11>R)d=w.f.RGBA,p&=(z=Math.abs(d.A))*(L-1)+F<=d.size,p&=z>=F*kO[R],p&=d.eb!=null;else{d=w.f.kb,z=(F+1)/2,se=(L+1)/2,$=Math.abs(d.fa),Z=Math.abs(d.Ab);var ye=Math.abs(d.Db),X=Math.abs(d.lb),le=X*(L-1)+F;p&=$*(L-1)+F<=d.Fd,p&=Z*(se-1)+z<=d.Cd,p=(p&=ye*(se-1)+z<=d.Ed)&$>=F&Z>=z&ye>=z,p&=d.y!=null,p&=d.f!=null,p&=d.ea!=null,R==12&&(p&=X>=F,p&=le<=d.Tc,p&=d.F!=null)}else p=0;d=p?0:2}}return d!=0||_!=null&&_.fd&&(d=p0(w)),d}var yf=64,Rs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Os=24,ku=32,Fl=8,Ru=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lt("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(d){return d},S.Predictor2=function(d,p,_){return p[_+0]},S.Predictor3=function(d,p,_){return p[_+1]},S.Predictor4=function(d,p,_){return p[_-1]},S.Predictor5=function(d,p,_){return St(St(d,p[_+1]),p[_+0])},S.Predictor6=function(d,p,_){return St(d,p[_-1])},S.Predictor7=function(d,p,_){return St(d,p[_+0])},S.Predictor8=function(d,p,_){return St(p[_-1],p[_+0])},S.Predictor9=function(d,p,_){return St(p[_+0],p[_+1])},S.Predictor10=function(d,p,_){return St(St(d,p[_-1]),St(p[_+0],p[_+1]))},S.Predictor11=function(d,p,_){var w=p[_+0];return 0>=zt(w>>24&255,d>>24&255,(p=p[_-1])>>24&255)+zt(w>>16&255,d>>16&255,p>>16&255)+zt(w>>8&255,d>>8&255,p>>8&255)+zt(255&w,255&d,255&p)?w:d},S.Predictor12=function(d,p,_){var w=p[_+0];return(vn((d>>24&255)+(w>>24&255)-((p=p[_-1])>>24&255))<<24|vn((d>>16&255)+(w>>16&255)-(p>>16&255))<<16|vn((d>>8&255)+(w>>8&255)-(p>>8&255))<<8|vn((255&d)+(255&w)-(255&p)))>>>0},S.Predictor13=function(d,p,_){var w=p[_-1];return(Qt((d=St(d,p[_+0]))>>24&255,w>>24&255)<<24|Qt(d>>16&255,w>>16&255)<<16|Qt(d>>8&255,w>>8&255)<<8|Qt(255&d,255&w))>>>0};var g0=S.PredictorAdd0;S.PredictorAdd1=Lt,lt("Predictor2","PredictorAdd2"),lt("Predictor3","PredictorAdd3"),lt("Predictor4","PredictorAdd4"),lt("Predictor5","PredictorAdd5"),lt("Predictor6","PredictorAdd6"),lt("Predictor7","PredictorAdd7"),lt("Predictor8","PredictorAdd8"),lt("Predictor9","PredictorAdd9"),lt("Predictor10","PredictorAdd10"),lt("Predictor11","PredictorAdd11"),lt("Predictor12","PredictorAdd12"),lt("Predictor13","PredictorAdd13");var up=S.PredictorAdd2;At("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),At("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Zr,Xy=S.ColorIndexInverseTransform,Pc=S.MapARGB,kc=S.VP8LColorIndexInverseTransformAlpha,m0=S.MapAlpha,v0=S.VP8LPredictorsAdd=[];v0.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var _0,y0,Ou,Fu,Lu,wf,Vu,bf,ha,Rc,jn,ar,Xr,Di,Ll,w0,dp,Jy,aO,cO,lO,uO,dO,fO,b0,hO,pO,gO,mO=o(511),vO=o(2041),_O=o(225),yO=o(767),wO=0,RE=vO,e1=_O,Fs=yO,pa=mO,t1=0,n1=1,bO=2,r1=3,i1=4,OE=5,xO=6,FE=7,LE=8,o1=9,VE=10,U$=[2,3,7],z$=[3,3,11],CO=[280,256,256,256,40],q$=[0,1,1,1,0],H$=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$$=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],G$=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],W$=8,jE=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],BE=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],x0=null,K$=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Y$=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],EO=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Q$=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Z$=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],X$=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],J$=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ju=[],za=[],Vl=[],eG=1,IO=2,Bu=[],ga=[];da("UpsampleRgbLinePair",U,3),da("UpsampleBgrLinePair",ue,3),da("UpsampleRgbaLinePair",Wt,4),da("UpsampleBgraLinePair",Lr,4),da("UpsampleArgbLinePair",Tn,4),da("UpsampleRgba4444LinePair",Xe,2),da("UpsampleRgb565LinePair",Ee,2);var tG=S.UpsampleRgbLinePair,nG=S.UpsampleBgrLinePair,SO=S.UpsampleRgbaLinePair,AO=S.UpsampleBgraLinePair,DO=S.UpsampleArgbLinePair,TO=S.UpsampleRgba4444LinePair,rG=S.UpsampleRgb565LinePair,s1=16,a1=1<<s1-1,C0=-227,UE=482,MO=6,iG=(256<<MO)-1,NO=0,oG=o(256),sG=o(256),aG=o(256),cG=o(256),lG=o(UE-C0),uG=o(UE-C0);pr("YuvToRgbRow",U,3),pr("YuvToBgrRow",ue,3),pr("YuvToRgbaRow",Wt,4),pr("YuvToBgraRow",Lr,4),pr("YuvToArgbRow",Tn,4),pr("YuvToRgba4444Row",Xe,2),pr("YuvToRgb565Row",Ee,2);var PO=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],c1=[0,2,8],dG=[8,7,6,4,4,2,2,2,1,1,1,1],fG=1;this.WebPDecodeRGBA=function(d,p,_,w,R){var F=n1,L=new ke,z=new tn;L.ba=z,z.S=F,z.width=[z.width],z.height=[z.height];var $=z.width,Z=z.height,se=new jt;if(se==null||d==null)var ye=2;else e(se!=null),ye=fa(d,p,_,se.width,se.height,se.Pd,se.Qd,se.format,null);if(ye!=0?$=0:($!=null&&($[0]=se.width[0]),Z!=null&&(Z[0]=se.height[0]),$=1),$){z.width=z.width[0],z.height=z.height[0],w!=null&&(w[0]=z.width),R!=null&&(R[0]=z.height);e:{if(w=new Dc,(R=new ze).data=d,R.w=p,R.ha=_,R.kd=1,p=[0],e(R!=null),((d=fa(R.data,R.w,R.ha,null,null,null,p,null,R))==0||d==7)&&p[0]&&(d=4),(p=d)==0){if(e(L!=null),w.data=R.data,w.w=R.w+R.offset,w.ha=R.ha-R.offset,w.put=Pt,w.ac=Ss,w.bc=oa,w.ma=L,R.xa){if((d=po())==null){L=1;break e}if((function(X,le){var ve=[0],Pe=[0],_e=[0];t:for(;;){if(X==null)return 0;if(le==null)return X.a=2,0;if(X.l=le,X.a=0,De(X.m,le.data,le.w,le.ha),!_r(X.m,ve,Pe,_e)){X.a=3;break t}if(X.xb=IO,le.width=ve[0],le.height=Pe[0],!Ds(ve[0],Pe[0],1,X,null))break t;return 1}return e(X.a!=0),0})(d,w)){if(w=(p=Pu(w.width,w.height,L.Oa,L.ba))==0){t:{w=d;n:for(;;){if(w==null){w=0;break t}if(e(w.s.yc!=null),e(w.s.Ya!=null),e(0<w.s.Wb),e((_=w.l)!=null),e((R=_.ma)!=null),w.xb!=0){if(w.ca=R.ba,w.tb=R.tb,e(w.ca!=null),!Ol(R.Oa,_,r1)){w.a=2;break n}if(!Ic(w,_.width)||_.da)break n;if((_.da||Bt(w.ca.S))&&yr(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&yr()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!G(w.s.vb,w.s.Wa.Xa)){w.a=1;break n}w.xb=0}if(!Oo(w,w.V,w.Ba,w.c,w.i,_.o,Ec))break n;R.Dc=w.Ma,w=1;break t}e(w.a!=0),w=0}w=!w}w&&(p=d.a)}else p=d.a}else{if((d=new hf)==null){L=1;break e}if(d.Fa=R.na,d.P=R.P,d.qc=R.Sa,aa(d,w)){if((p=Pu(w.width,w.height,L.Oa,L.ba))==0){if(d.Aa=0,_=L.Oa,e((R=d)!=null),_!=null){if(0<($=0>($=_.Md)?0:100<$?255:255*$/100)){for(Z=se=0;4>Z;++Z)12>(ye=R.pb[Z]).lc&&(ye.ia=$*dG[0>ye.lc?0:ye.lc]>>3),se|=ye.ia;se&&(alert("todo:VP8InitRandom"),R.ia=1)}R.Ga=_.Id,100<R.Ga?R.Ga=100:0>R.Ga&&(R.Ga=0)}(function(X,le){if(X==null)return 0;if(le==null)return Or(X,2,"NULL VP8Io parameter in VP8Decode().");if(!X.cb&&!aa(X,le))return 0;if(e(X.cb),le.ac==null||le.ac(le)){le.ob&&(X.L=0);var ve=c1[X.L];if(X.L==2?(X.yb=0,X.zb=0):(X.yb=le.v-ve>>4,X.zb=le.j-ve>>4,0>X.yb&&(X.yb=0),0>X.zb&&(X.zb=0)),X.Va=le.o+15+ve>>4,X.Hb=le.va+15+ve>>4,X.Hb>X.za&&(X.Hb=X.za),X.Va>X.Ub&&(X.Va=X.Ub),0<X.L){var Pe=X.ed;for(ve=0;4>ve;++ve){var _e;if(X.Qa.Cb){var Re=X.Qa.Lb[ve];X.Qa.Fb||(Re+=Pe.Tb)}else Re=Pe.Tb;for(_e=0;1>=_e;++_e){var Le=X.gd[ve][_e],Ge=Re;if(Pe.Pc&&(Ge+=Pe.vd[0],_e&&(Ge+=Pe.od[0])),0<(Ge=0>Ge?0:63<Ge?63:Ge)){var He=Ge;0<Pe.wb&&(He=4<Pe.wb?He>>2:He>>1)>9-Pe.wb&&(He=9-Pe.wb),1>He&&(He=1),Le.dd=He,Le.tc=2*Ge+He,Le.ld=40<=Ge?2:15<=Ge?1:0}else Le.tc=0;Le.La=_e}}}ve=0}else Or(X,6,"Frame setup failed"),ve=X.a;if(ve=ve==0){if(ve){X.$c=0,0<X.Aa||(X.Ic=fG);t:{ve=X.Ic,Pe=4*(He=X.za);var Mt=32*He,gt=He+1,hn=0<X.L?He*(0<X.Aa?2:1):0,Ct=(X.Aa==2?2:1)*He;if((Le=Pe+832+(_e=3*(16*ve+c1[X.L])/2*Mt)+(Re=X.Fa!=null&&0<X.Fa.length?X.Kc.c*X.Kc.i:0))!=Le)ve=0;else{if(Le>X.Vb){if(X.Vb=0,X.Ec=o(Le),X.Fc=0,X.Ec==null){ve=Or(X,1,"no memory during frame initialization.");break t}X.Vb=Le}Le=X.Ec,Ge=X.Fc,X.Ac=Le,X.Bc=Ge,Ge+=Pe,X.Gd=s(Mt,df),X.Hd=0,X.rb=s(gt+1,Fa),X.sb=1,X.wa=hn?s(hn,go):null,X.Y=0,X.D.Nb=0,X.D.wa=X.wa,X.D.Y=X.Y,0<X.Aa&&(X.D.Y+=He),e(!0),X.oc=Le,X.pc=Ge,Ge+=832,X.ya=s(Ct,Dl),X.aa=0,X.D.ya=X.ya,X.D.aa=X.aa,X.Aa==2&&(X.D.aa+=He),X.R=16*He,X.B=8*He,He=(Mt=c1[X.L])*X.R,Mt=Mt/2*X.B,X.sa=Le,X.ta=Ge+He,X.qa=X.sa,X.ra=X.ta+16*ve*X.R+Mt,X.Ha=X.qa,X.Ia=X.ra+8*ve*X.B+Mt,X.$c=0,Ge+=_e,X.mb=Re?Le:null,X.nb=Re?Ge:null,e(Ge+Re<=X.Fc+X.Vb),gf(X),i(X.Ac,X.Bc,0,Pe),ve=1}}if(ve){if(le.ka=0,le.y=X.sa,le.O=X.ta,le.f=X.qa,le.N=X.ra,le.ea=X.Ha,le.Vd=X.Ia,le.fa=X.R,le.Rc=X.B,le.F=null,le.J=0,!wO){for(ve=-255;255>=ve;++ve)mO[255+ve]=0>ve?-ve:ve;for(ve=-1020;1020>=ve;++ve)vO[1020+ve]=-128>ve?-128:127<ve?127:ve;for(ve=-112;112>=ve;++ve)_O[112+ve]=-16>ve?-16:15<ve?15:ve;for(ve=-255;510>=ve;++ve)yO[255+ve]=0>ve?0:255<ve?255:ve;wO=1}Vu=ca,bf=Su,Rc=Ms,jn=Vn,ar=Tl,ha=Iu,Xr=_f,Di=Ba,Ll=k,w0=Q,dp=Rl,Jy=v,aO=re,cO=de,lO=ua,uO=Mu,dO=ls,fO=vf,za[0]=d0,za[1]=c0,za[2]=Tc,za[3]=u0,za[4]=La,za[5]=f0,za[6]=zi,za[7]=h0,za[8]=Mc,za[9]=la,ju[0]=Ml,ju[1]=l0,ju[2]=mf,ju[3]=sp,ju[4]=mo,ju[5]=Au,ju[6]=ap,Vl[0]=cp,Vl[1]=op,Vl[2]=Nc,Vl[3]=Nl,Vl[4]=tr,Vl[5]=Pl,Vl[6]=lp,ve=1}else ve=0}ve&&(ve=(function(Cn,Ti){for(Cn.M=0;Cn.M<Cn.Va;++Cn.M){var pn,Et=Cn.Jc[Cn.M&Cn.Xb],rt=Cn.m,Jr=Cn;for(pn=0;pn<Jr.za;++pn){var on=rt,An=Jr,wr=An.Ac,Zi=An.Bc+4*pn,jo=An.zc,Hr=An.ya[An.aa+pn];if(An.Qa.Bb?Hr.$b=Ne(on,An.Pa.jb[0])?2+Ne(on,An.Pa.jb[2]):Ne(on,An.Pa.jb[1]):Hr.$b=0,An.kc&&(Hr.Ad=Ne(on,An.Bd)),Hr.Za=!Ne(on,145)+0,Hr.Za){var vo=Hr.Ob,Bo=0;for(An=0;4>An;++An){var Mi,Mn=jo[0+An];for(Mi=0;4>Mi;++Mi){Mn=Z$[wr[Zi+Mi]][Mn];for(var Hn=EO[Ne(on,Mn[0])];0<Hn;)Hn=EO[2*Hn+Ne(on,Mn[Hn])];Mn=-Hn,wr[Zi+Mi]=Mn}r(vo,Bo,wr,Zi,4),Bo+=4,jo[0+An]=Mn}}else Mn=Ne(on,156)?Ne(on,128)?1:3:Ne(on,163)?2:0,Hr.Ob[0]=Mn,i(wr,Zi,Mn,4),i(jo,0,Mn,4);Hr.Dd=Ne(on,142)?Ne(on,114)?Ne(on,183)?1:3:2:0}if(Jr.m.Ka)return Or(Cn,7,"Premature end-of-partition0 encountered.");for(;Cn.ja<Cn.za;++Cn.ja){if(Jr=Et,on=(rt=Cn).rb[rt.sb-1],wr=rt.rb[rt.sb+rt.ja],pn=rt.ya[rt.aa+rt.ja],Zi=rt.kc?pn.Ad:0)on.la=wr.la=0,pn.Za||(on.Na=wr.Na=0),pn.Hc=0,pn.Gc=0,pn.ia=0;else{var $r,$n;if(on=wr,wr=Jr,Zi=rt.Pa.Xc,jo=rt.ya[rt.aa+rt.ja],Hr=rt.pb[jo.$b],An=jo.ad,vo=0,Bo=rt.rb[rt.sb-1],Mn=Mi=0,i(An,vo,0,384),jo.Za)var Xi=0,qa=Zi[3];else{Hn=o(16);var ei=on.Na+Bo.Na;if(ei=x0(wr,Zi[1],ei,Hr.Eb,0,Hn,0),on.Na=Bo.Na=(0<ei)+0,1<ei)Vu(Hn,0,An,vo);else{var ds=Hn[0]+3>>3;for(Hn=0;256>Hn;Hn+=16)An[vo+Hn]=ds}Xi=1,qa=Zi[0]}var cr=15&on.la,Ni=15&Bo.la;for(Hn=0;4>Hn;++Hn){var Ls=1&Ni;for(ds=$n=0;4>ds;++ds)cr=cr>>1|(Ls=(ei=x0(wr,qa,ei=Ls+(1&cr),Hr.Sc,Xi,An,vo))>Xi)<<7,$n=$n<<2|(3<ei?3:1<ei?2:An[vo+0]!=0),vo+=16;cr>>=4,Ni=Ni>>1|Ls<<7,Mi=(Mi<<8|$n)>>>0}for(qa=cr,Xi=Ni>>4,$r=0;4>$r;$r+=2){for($n=0,cr=on.la>>4+$r,Ni=Bo.la>>4+$r,Hn=0;2>Hn;++Hn){for(Ls=1&Ni,ds=0;2>ds;++ds)ei=Ls+(1&cr),cr=cr>>1|(Ls=0<(ei=x0(wr,Zi[2],ei,Hr.Qc,0,An,vo)))<<3,$n=$n<<2|(3<ei?3:1<ei?2:An[vo+0]!=0),vo+=16;cr>>=2,Ni=Ni>>1|Ls<<5}Mn|=$n<<4*$r,qa|=cr<<4<<$r,Xi|=(240&Ni)<<$r}on.la=qa,Bo.la=Xi,jo.Hc=Mi,jo.Gc=Mn,jo.ia=43690&Mn?0:Hr.ia,Zi=!(Mi|Mn)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[pn.$b][pn.Za],rt.wa[rt.Y+rt.ja].La|=!Zi),Jr.Ka)return Or(Cn,7,"Premature end-of-file encountered.")}if(gf(Cn),rt=Ti,Jr=1,pn=(Et=Cn).D,on=0<Et.L&&Et.M>=Et.zb&&Et.M<=Et.Va,Et.Aa==0)t:{if(pn.M=Et.M,pn.uc=on,Ir(Et,pn),Jr=1,pn=($n=Et.D).Nb,on=(Mn=c1[Et.L])*Et.R,wr=Mn/2*Et.B,Hn=16*pn*Et.R,ds=8*pn*Et.B,Zi=Et.sa,jo=Et.ta-on+Hn,Hr=Et.qa,An=Et.ra-wr+ds,vo=Et.Ha,Bo=Et.Ia-wr+ds,Ni=(cr=$n.M)==0,Mi=cr>=Et.Va-1,Et.Aa==2&&Ir(Et,$n),$n.uc)for(Ls=(ei=Et).D.M,e(ei.D.uc),$n=ei.yb;$n<ei.Hb;++$n){Xi=$n,qa=Ls;var Uo=(Vs=(Ji=ei).D).Nb;$r=Ji.R;var Vs=Vs.wa[Vs.Y+Xi],js=Ji.sa,fs=Ji.ta+16*Uo*$r+16*Xi,Bs=Vs.dd,gr=Vs.tc;if(gr!=0)if(e(3<=gr),Ji.L==1)0<Xi&&uO(js,fs,$r,gr+4),Vs.La&&fO(js,fs,$r,gr),0<qa&&lO(js,fs,$r,gr+4),Vs.La&&dO(js,fs,$r,gr);else{var Us=Ji.B,Ha=Ji.qa,xf=Ji.ra+8*Uo*Us+8*Xi,jl=Ji.Ha,Ji=Ji.Ia+8*Uo*Us+8*Xi;Uo=Vs.ld,0<Xi&&(Di(js,fs,$r,gr+4,Bs,Uo),w0(Ha,xf,jl,Ji,Us,gr+4,Bs,Uo)),Vs.La&&(Jy(js,fs,$r,gr,Bs,Uo),cO(Ha,xf,jl,Ji,Us,gr,Bs,Uo)),0<qa&&(Xr(js,fs,$r,gr+4,Bs,Uo),Ll(Ha,xf,jl,Ji,Us,gr+4,Bs,Uo)),Vs.La&&(dp(js,fs,$r,gr,Bs,Uo),aO(Ha,xf,jl,Ji,Us,gr,Bs,Uo))}}if(Et.ia&&alert("todo:DitherRow"),rt.put!=null){if($n=16*cr,cr=16*(cr+1),Ni?(rt.y=Et.sa,rt.O=Et.ta+Hn,rt.f=Et.qa,rt.N=Et.ra+ds,rt.ea=Et.Ha,rt.W=Et.Ia+ds):($n-=Mn,rt.y=Zi,rt.O=jo,rt.f=Hr,rt.N=An,rt.ea=vo,rt.W=Bo),Mi||(cr-=Mn),cr>rt.o&&(cr=rt.o),rt.F=null,rt.J=null,Et.Fa!=null&&0<Et.Fa.length&&$n<cr&&(rt.J=qn(Et,rt,$n,cr-$n),rt.F=Et.mb,rt.F==null&&rt.F.length==0)){Jr=Or(Et,3,"Could not decode alpha data.");break t}$n<rt.j&&(Mn=rt.j-$n,$n=rt.j,e(!(1&Mn)),rt.O+=Et.R*Mn,rt.N+=Et.B*(Mn>>1),rt.W+=Et.B*(Mn>>1),rt.F!=null&&(rt.J+=rt.width*Mn)),$n<cr&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=$n-rt.j,rt.U=rt.va-rt.v,rt.T=cr-$n,Jr=rt.put(rt))}pn+1!=Et.Ic||Mi||(r(Et.sa,Et.ta-on,Zi,jo+16*Et.R,on),r(Et.qa,Et.ra-wr,Hr,An+8*Et.B,wr),r(Et.Ha,Et.Ia-wr,vo,Bo+8*Et.B,wr))}if(!Jr)return Or(Cn,6,"Output aborted.")}return 1})(X,le)),le.bc!=null&&le.bc(le),ve&=1}return ve?(X.cb=0,ve):0})(d,w)||(p=d.a)}}else p=d.a}p==0&&L.Oa!=null&&L.Oa.fd&&(p=p0(L.ba))}L=p}F=L!=0?null:11>F?z.f.RGBA.eb:z.f.kb.y}else F=null;return F};var kO=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(S,V){for(var C="",D=0;D<4;D++)C+=String.fromCharCode(S[V++]);return C}function u(S,V){return S[V+0]|S[V+1]<<8}function h(S,V){return(S[V+0]|S[V+1]<<8|S[V+2]<<16)>>>0}function m(S,V){return(S[V+0]|S[V+1]<<8|S[V+2]<<16|S[V+3]<<24)>>>0}new c;var g=[0],x=[0],I=[],M=new c,P=n,Y=(function(S,V){var C={},D=0,T=!1,ne=0,be=0;if(C.frames=[],!(function(O,W){for(var J=0;J<4;J++)if(O[W+J]!="RIFF".charCodeAt(J))return!0;return!1})(S,V)){for(m(S,V+=4),V+=8;V<S.length;){var Me=l(S,V),Ce=m(S,V+=4);V+=4;var fe=Ce+(1&Ce);switch(Me){case"VP8 ":case"VP8L":C.frames[D]===void 0&&(C.frames[D]={}),(Fe=C.frames[D]).src_off=T?be:V-8,Fe.src_size=ne+Ce+8,D++,T&&(T=!1,ne=0,be=0);break;case"VP8X":(Fe=C.header={}).feature_flags=S[V];var De=V+4;Fe.canvas_width=1+h(S,De),De+=3,Fe.canvas_height=1+h(S,De),De+=3;break;case"ALPH":T=!0,ne=fe+8,be=V-8;break;case"ANIM":(Fe=C.header).bgcolor=m(S,V),De=V+4,Fe.loop_count=u(S,De),De+=2;break;case"ANMF":var Be,Fe;(Fe=C.frames[D]={}).offset_x=2*h(S,V),V+=3,Fe.offset_y=2*h(S,V),V+=3,Fe.width=1+h(S,V),V+=3,Fe.height=1+h(S,V),V+=3,Fe.duration=h(S,V),V+=3,Be=S[V++],Fe.dispose=1&Be,Fe.blend=Be>>1&1}Me!="ANMF"&&(V+=fe)}return C}})(P,0);Y.response=P,Y.rgbaoutput=!0,Y.dataurl=!1;var B=Y.header?Y.header:null,K=Y.frames?Y.frames:null;if(B){B.loop_counter=B.loop_count,g=[B.canvas_height],x=[B.canvas_width];for(var oe=0;oe<K.length&&K[oe].blend!=0;oe++);}var he=K[0],q=M.WebPDecodeRGBA(P,he.src_off,he.src_size,x,g);he.rgba=q,he.imgwidth=x[0],he.imgheight=g[0];for(var N=0;N<x[0]*g[0]*4;N++)I[N]=q[N];return this.width=x,this.height=g,this.data=I,this}(function(n){var e,t,r,i,o,s,a,c,l,u=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new s,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new s,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,l=new u}]);var h=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=O;Object.defineProperty(this,"pdf",{get:function(){return W}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(G){J=!!G}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(G){ie=!!G}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(G){isNaN(G)||(ce=G)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(G){isNaN(G)||(me=G)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(G){var Ke;typeof G=="number"?Ke=[G,G,G,G]:((Ke=new Array(4))[0]=G[0],Ke[1]=G.length>=2?G[1]:Ke[0],Ke[2]=G.length>=3?G[2]:Ke[0],Ke[3]=G.length>=4?G[3]:Ke[1]),l.margin=Ke}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(G){Ae=G}});var we=0;Object.defineProperty(this,"lastBreak",{get:function(){return we},set:function(G){we=G}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(G){Ne=G}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(G){G instanceof u&&(l=G)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(G){l.path=G}});var Ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ue},set:function(G){Ue=G}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(G){var Ke;Ke=m(G),this.ctx.fillStyle=Ke.style,this.ctx.isFillTransparent=Ke.a===0,this.ctx.fillOpacity=Ke.a,this.pdf.setFillColor(Ke.r,Ke.g,Ke.b,{a:Ke.a}),this.pdf.setTextColor(Ke.r,Ke.g,Ke.b,{a:Ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(G){var Ke=m(G);this.ctx.strokeStyle=Ke.style,this.ctx.isStrokeTransparent=Ke.a===0,this.ctx.strokeOpacity=Ke.a,Ke.a===0?this.pdf.setDrawColor(255,255,255):(Ke.a,this.pdf.setDrawColor(Ke.r,Ke.g,Ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(G){["butt","round","square"].indexOf(G)!==-1&&(this.ctx.lineCap=G,this.pdf.setLineCap(G))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(G){isNaN(G)||(this.ctx.lineWidth=G,this.pdf.setLineWidth(G))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(G){["bevel","round","miter"].indexOf(G)!==-1&&(this.ctx.lineJoin=G,this.pdf.setLineJoin(G))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(G){isNaN(G)||(this.ctx.miterLimit=G,this.pdf.setMiterLimit(G))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(G){this.ctx.textBaseline=G}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(G){["right","end","center","left","start"].indexOf(G)!==-1&&(this.ctx.textAlign=G)}});var et=null,We=null,ct=null;Object.defineProperty(this,"fontFaces",{get:function(){return ct},set:function(G){et=null,We=null,ct=G}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(G){var Ke;if(this.ctx.font=G,(Ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(G))!==null){var Ft=Ke[1];Ke[2];var It=Ke[3],qe=Ke[4];Ke[5];var Tt=Ke[6],lt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(qe)[2];qe=Math.floor(lt==="px"?parseFloat(qe)*this.pdf.internal.scaleFactor:lt==="em"?parseFloat(qe)*this.pdf.getFontSize():parseFloat(qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(qe);var wt=(function(At){var Rr,_n,an=[],cn=At.trim();if(cn==="")return Pk;if(cn in yz)return[yz[cn]];for(;cn!=="";){switch(_n=null,Rr=(cn=bz(cn)).charAt(0)){case'"':case"'":_n=Xle(cn.substring(1),Rr);break;default:_n=Jle(cn)}if(_n===null||(an.push(_n[0]),(cn=bz(_n[1]))!==""&&cn.charAt(0)!==","))return Pk;cn=cn.replace(/^,/,"")}return an})(Tt);if(this.fontFaces){var St=(function(At,Rr){var _n=At.getFontList(),an=JSON.stringify(_n);if(et===null||We!==an){var cn=(function(Xn){var kt=[];return Object.keys(Xn).forEach(function(Jn){Xn[Jn].forEach(function(Bt){var Zt=null;switch(Bt){case"bold":Zt={family:Jn,weight:"bold"};break;case"italic":Zt={family:Jn,style:"italic"};break;case"bolditalic":Zt={family:Jn,weight:"bold",style:"italic"};break;case"":case"normal":Zt={family:Jn}}Zt!==null&&(Zt.ref={name:Jn,style:Bt},kt.push(Zt))})}),kt})(_n);et=(function(Xn){for(var kt={},Jn=0;Jn<Xn.length;++Jn){var Bt=Nk(Xn[Jn]),Zt=Bt.family,sr=Bt.stretch,tn=Bt.style,jt=Bt.weight;kt[Zt]=kt[Zt]||{},kt[Zt][sr]=kt[Zt][sr]||{},kt[Zt][sr][tn]=kt[Zt][sr][tn]||{},kt[Zt][sr][tn][jt]=Bt}return kt})(cn.concat(Rr)),We=an}return et})(this.pdf,this.fontFaces),vn=wt.map(function(At){return{family:At,stretch:"normal",weight:It,style:Ft}}),Qt=(function(At,Rr,_n){for(var an=(_n=_n||{}).defaultFontFamily||"times",cn=Object.assign({},Zle,_n.genericFontFamilies||{}),Xn=null,kt=null,Jn=0;Jn<Rr.length;++Jn)if(cn[(Xn=Nk(Rr[Jn])).family]&&(Xn.family=cn[Xn.family]),At.hasOwnProperty(Xn.family)){kt=At[Xn.family];break}if(!(kt=kt||At[an]))throw new Error("Could not find a font-family for the rule '"+wz(Xn)+"' and default family '"+an+"'.");if(kt=(function(Bt,Zt){if(Zt[Bt])return Zt[Bt];var sr=Vk[Bt],tn=sr<=Vk.normal?-1:1,jt=_z(Zt,Hz,sr,tn);if(!jt)throw new Error("Could not find a matching font-stretch value for "+Bt);return jt})(Xn.stretch,kt),kt=(function(Bt,Zt){if(Zt[Bt])return Zt[Bt];for(var sr=qz[Bt],tn=0;tn<sr.length;++tn)if(Zt[sr[tn]])return Zt[sr[tn]];throw new Error("Could not find a matching font-style for "+Bt)})(Xn.style,kt),!(kt=(function(Bt,Zt){if(Zt[Bt])return Zt[Bt];if(Bt===400&&Zt[500])return Zt[500];if(Bt===500&&Zt[400])return Zt[400];var sr=Qle[Bt],tn=_z(Zt,$z,sr,Bt<400?-1:1);if(!tn)throw new Error("Could not find a matching font-weight for value "+Bt);return tn})(Xn.weight,kt)))throw new Error("Failed to resolve a font for the rule '"+wz(Xn)+"'.");return kt})(St,vn);this.pdf.setFont(Qt.ref.name,Qt.ref.style)}else{var zt="";(It==="bold"||parseInt(It,10)>=700||Ft==="bold")&&(zt="bold"),Ft==="italic"&&(zt+="italic"),zt.length===0&&(zt="normal");for(var Lt="",Vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},vt=0;vt<wt.length;vt++){if(this.pdf.internal.getFont(wt[vt],zt,{noFallback:!0,disableWarning:!0})!==void 0){Lt=wt[vt];break}if(zt==="bolditalic"&&this.pdf.internal.getFont(wt[vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Lt=wt[vt],zt="bold";else if(this.pdf.internal.getFont(wt[vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Lt=wt[vt],zt="normal";break}}if(Lt===""){for(var Xt=0;Xt<wt.length;Xt++)if(Vt[wt[Xt]]){Lt=Vt[wt[Xt]];break}}Lt=Lt===""?"Times":Lt,this.pdf.setFont(Lt,zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(G){this.ctx.globalCompositeOperation=G}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(G){this.ctx.globalAlpha=G}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(G){this.ctx.lineDashOffset=G,Fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(G){this.ctx.lineDash=G,Fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(G){this.ctx.ignoreClearRect=!!G}})};h.prototype.setLineDash=function(O){this.lineDash=O},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){K.call(this,"fill",!1)},h.prototype.stroke=function(){K.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(O,W){if(isNaN(O)||isNaN(W))throw fr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new s(O,W));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(O,W)},h.prototype.closePath=function(){var O=new s(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Un(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){O=new s(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(O.x,O.y)},h.prototype.lineTo=function(O,W){if(isNaN(O)||isNaN(W))throw fr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new s(O,W));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(J.x,J.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},h.prototype.quadraticCurveTo=function(O,W,J,ie){if(isNaN(J)||isNaN(ie)||isNaN(O)||isNaN(W))throw fr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new s(J,ie)),me=this.ctx.transform.applyToPoint(new s(O,W));this.path.push({type:"qct",x1:me.x,y1:me.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new s(ce.x,ce.y)},h.prototype.bezierCurveTo=function(O,W,J,ie,ce,me){if(isNaN(ce)||isNaN(me)||isNaN(O)||isNaN(W)||isNaN(J)||isNaN(ie))throw fr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new s(ce,me)),we=this.ctx.transform.applyToPoint(new s(O,W)),Ne=this.ctx.transform.applyToPoint(new s(J,ie));this.path.push({type:"bct",x1:we.x,y1:we.y,x2:Ne.x,y2:Ne.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new s(Ae.x,Ae.y)},h.prototype.arc=function(O,W,J,ie,ce,me){if(isNaN(O)||isNaN(W)||isNaN(J)||isNaN(ie)||isNaN(ce))throw fr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new s(O,W));O=Ae.x,W=Ae.y;var we=this.ctx.transform.applyToPoint(new s(0,J)),Ne=this.ctx.transform.applyToPoint(new s(0,0));J=Math.sqrt(Math.pow(we.x-Ne.x,2)+Math.pow(we.y-Ne.y,2))}Math.abs(ce-ie)>=2*Math.PI&&(ie=0,ce=2*Math.PI),this.path.push({type:"arc",x:O,y:W,radius:J,startAngle:ie,endAngle:ce,counterclockwise:me})},h.prototype.arcTo=function(O,W,J,ie,ce){throw new Error("arcTo not implemented.")},h.prototype.rect=function(O,W,J,ie){if(isNaN(O)||isNaN(W)||isNaN(J)||isNaN(ie))throw fr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,W),this.lineTo(O+J,W),this.lineTo(O+J,W+ie),this.lineTo(O,W+ie),this.lineTo(O,W),this.lineTo(O+J,W),this.lineTo(O,W)},h.prototype.fillRect=function(O,W,J,ie){if(isNaN(O)||isNaN(W)||isNaN(J)||isNaN(ie))throw fr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,W,J,ie),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},h.prototype.strokeRect=function(O,W,J,ie){if(isNaN(O)||isNaN(W)||isNaN(J)||isNaN(ie))throw fr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(O,W,J,ie),this.stroke())},h.prototype.clearRect=function(O,W,J,ie){if(isNaN(O)||isNaN(W)||isNaN(J)||isNaN(ie))throw fr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,W,J,ie))},h.prototype.save=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},h.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(W),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(O){var W,J,ie,ce;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))W=0,J=0,ie=0,ce=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(me!==null)W=parseInt(me[1]),J=parseInt(me[2]),ie=parseInt(me[3]),ce=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)W=parseInt(me[1]),J=parseInt(me[2]),ie=parseInt(me[3]),ce=parseFloat(me[4]);else{if(ce=1,typeof O=="string"&&O.charAt(0)!=="#"){var Ae=new Fz(O);O=Ae.ok?Ae.toHex():"#000000"}O.length===4?(W=O.substring(1,2),W+=W,J=O.substring(2,3),J+=J,ie=O.substring(3,4),ie+=ie):(W=O.substring(1,3),J=O.substring(3,5),ie=O.substring(5,7)),W=parseInt(W,16),J=parseInt(J,16),ie=parseInt(ie,16)}}return{r:W,g:J,b:ie,a:ce,style:O}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(O,W,J,ie){if(isNaN(W)||isNaN(J)||typeof O!="string")throw fr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!g.call(this)){var ce=fe(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;D.call(this,{text:O,x:W,y:J,scale:me,angle:ce,align:this.textAlign,maxWidth:ie})}},h.prototype.strokeText=function(O,W,J,ie){if(isNaN(W)||isNaN(J)||typeof O!="string")throw fr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ie=isNaN(ie)?void 0:ie;var ce=fe(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;D.call(this,{text:O,x:W,y:J,scale:me,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:ie})}},h.prototype.measureText=function(O){if(typeof O!="string")throw fr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,J=this.pdf.internal.scaleFactor,ie=W.internal.getFontSize(),ce=W.getStringUnitWidth(O)*ie/W.internal.scaleFactor;return new function(me){var Ae=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this}({width:ce*=Math.round(96*J/72*1e4)/1e4})},h.prototype.scale=function(O,W){if(isNaN(O)||isNaN(W))throw fr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(O,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.rotate=function(O){if(isNaN(O))throw fr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.translate=function(O,W){if(isNaN(O)||isNaN(W))throw fr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,O,W);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.transform=function(O,W,J,ie,ce,me){if(isNaN(O)||isNaN(W)||isNaN(J)||isNaN(ie)||isNaN(ce)||isNaN(me))throw fr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new c(O,W,J,ie,ce,me);this.ctx.transform=this.ctx.transform.multiply(Ae)},h.prototype.setTransform=function(O,W,J,ie,ce,me){O=isNaN(O)?1:O,W=isNaN(W)?0:W,J=isNaN(J)?0:J,ie=isNaN(ie)?1:ie,ce=isNaN(ce)?0:ce,me=isNaN(me)?0:me,this.ctx.transform=new c(O,W,J,ie,ce,me)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(O,W,J,ie,ce,me,Ae,we,Ne){var Ue=this.pdf.getImageProperties(O),et=1,We=1,ct=1,G=1;ie!==void 0&&we!==void 0&&(ct=we/ie,G=Ne/ce,et=Ue.width/ie*we/ie,We=Ue.height/ce*Ne/ce),me===void 0&&(me=W,Ae=J,W=0,J=0),ie!==void 0&&we===void 0&&(we=ie,Ne=ce),ie===void 0&&we===void 0&&(we=Ue.width,Ne=Ue.height);var Ke=this.ctx.transform.decompose(),Ft=fe(Ke.rotate.shx),It=new c,qe=(It=(It=(It=It.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new a(me-W*ct,Ae-J*G,ie*et,ce*We));if(this.autoPaging){for(var Tt,lt=M.call(this,qe),wt=[],St=0;St<lt.length;St+=1)wt.indexOf(lt[St])===-1&&wt.push(lt[St]);B(wt);for(var vn=wt[0],Qt=wt[wt.length-1],zt=vn;zt<Qt+1;zt++){this.pdf.setPage(zt);var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=zt===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=zt===1?0:vt+(zt-2)*Xt;if(this.ctx.clip_path.length!==0){var Rr=this.path;Tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(Tt,this.posX+this.margin[3],-At+Vt+this.ctx.prevPageLastElemOffset),oe.call(this,"fill",!0),this.path=Rr}var _n=JSON.parse(JSON.stringify(qe));_n=Y([_n],this.posX+this.margin[3],-At+Vt+this.ctx.prevPageLastElemOffset)[0];var an=(zt>vn||zt<Qt)&&I.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,Xt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",_n.x,_n.y,_n.w,_n.h,null,null,Ft),an&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",qe.x,qe.y,qe.w,qe.h,null,null,Ft)};var M=function(O,W,J){var ie=[];W=W||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":ie.push(Math.floor((O.y+ce)/J)+1);break;case"arc":ie.push(Math.floor((O.y+ce-O.radius)/J)+1),ie.push(Math.floor((O.y+ce+O.radius)/J)+1);break;case"qct":var me=De(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);ie.push(Math.floor((me.y+ce)/J)+1),ie.push(Math.floor((me.y+me.h+ce)/J)+1);break;case"bct":var Ae=Be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);ie.push(Math.floor((Ae.y+ce)/J)+1),ie.push(Math.floor((Ae.y+Ae.h+ce)/J)+1);break;case"rect":ie.push(Math.floor((O.y+ce)/J)+1),ie.push(Math.floor((O.y+O.h+ce)/J)+1)}for(var we=0;we<ie.length;we+=1)for(;this.pdf.internal.getNumberOfPages()<ie[we];)P.call(this);return ie},P=function(){var O=this.fillStyle,W=this.strokeStyle,J=this.font,ie=this.lineCap,ce=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=W,this.font=J,this.lineCap=ie,this.lineWidth=ce,this.lineJoin=me},Y=function(O,W,J){for(var ie=0;ie<O.length;ie++)switch(O[ie].type){case"bct":O[ie].x2+=W,O[ie].y2+=J;case"qct":O[ie].x1+=W,O[ie].y1+=J;default:O[ie].x+=W,O[ie].y+=J}return O},B=function(O){return O.sort(function(W,J){return W-J})},K=function(O,W){var J=this.fillStyle,ie=this.strokeStyle,ce=this.lineCap,me=this.lineWidth,Ae=Math.abs(me*this.ctx.transform.scaleX),we=this.lineJoin;if(this.autoPaging){for(var Ne,Ue,et=JSON.parse(JSON.stringify(this.path)),We=JSON.parse(JSON.stringify(this.path)),ct=[],G=0;G<We.length;G++)if(We[G].x!==void 0)for(var Ke=M.call(this,We[G]),Ft=0;Ft<Ke.length;Ft+=1)ct.indexOf(Ke[Ft])===-1&&ct.push(Ke[Ft]);for(var It=0;It<ct.length;It++)for(;this.pdf.internal.getNumberOfPages()<ct[It];)P.call(this);B(ct);for(var qe=ct[0],Tt=ct[ct.length-1],lt=qe;lt<Tt+1;lt++){this.pdf.setPage(lt),this.fillStyle=J,this.strokeStyle=ie,this.lineCap=ce,this.lineWidth=Ae,this.lineJoin=we;var wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=lt===1?this.posY+this.margin[0]:this.margin[0],vn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],zt=lt===1?0:vn+(lt-2)*Qt;if(this.ctx.clip_path.length!==0){var Lt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(Ne,this.posX+this.margin[3],-zt+St+this.ctx.prevPageLastElemOffset),oe.call(this,O,!0),this.path=Lt}if(Ue=JSON.parse(JSON.stringify(et)),this.path=Y(Ue,this.posX+this.margin[3],-zt+St+this.ctx.prevPageLastElemOffset),W===!1||lt===0){var Vt=(lt>qe||lt<Tt)&&I.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wt,Qt,null).clip().discardPath()),oe.call(this,O,W),Vt&&this.pdf.restoreGraphicsState()}this.lineWidth=me}this.path=et}else this.lineWidth=Ae,oe.call(this,O,W),this.lineWidth=me},oe=function(O,W){if((O!=="stroke"||W||!x.call(this))&&(O==="stroke"||W||!g.call(this))){for(var J,ie,ce=[],me=this.path,Ae=0;Ae<me.length;Ae++){var we=me[Ae];switch(we.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:we,deltas:[],abs:[]});break;case"lt":var Ne=ce.length;if(me[Ae-1]&&!isNaN(me[Ae-1].x)&&(J=[we.x-me[Ae-1].x,we.y-me[Ae-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ce[Ne-1].close!==!0&&ce[Ne-1].begin!==!0){ce[Ne-1].deltas.push(J),ce[Ne-1].abs.push(we);break}}break;case"bct":J=[we.x1-me[Ae-1].x,we.y1-me[Ae-1].y,we.x2-me[Ae-1].x,we.y2-me[Ae-1].y,we.x-me[Ae-1].x,we.y-me[Ae-1].y],ce[ce.length-1].deltas.push(J);break;case"qct":var Ue=me[Ae-1].x+2/3*(we.x1-me[Ae-1].x),et=me[Ae-1].y+2/3*(we.y1-me[Ae-1].y),We=we.x+2/3*(we.x1-we.x),ct=we.y+2/3*(we.y1-we.y),G=we.x,Ke=we.y;J=[Ue-me[Ae-1].x,et-me[Ae-1].y,We-me[Ae-1].x,ct-me[Ae-1].y,G-me[Ae-1].x,Ke-me[Ae-1].y],ce[ce.length-1].deltas.push(J);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(we)}}ie=W?null:O==="stroke"?"stroke":"fill";for(var Ft=!1,It=0;It<ce.length;It++)if(ce[It].arc)for(var qe=ce[It].abs,Tt=0;Tt<qe.length;Tt++){var lt=qe[Tt];lt.type==="arc"?N.call(this,lt.x,lt.y,lt.radius,lt.startAngle,lt.endAngle,lt.counterclockwise,void 0,W,!Ft):T.call(this,lt.x,lt.y),Ft=!0}else if(ce[It].close===!0)this.pdf.internal.out("h"),Ft=!1;else if(ce[It].begin!==!0){var wt=ce[It].start.x,St=ce[It].start.y;ne.call(this,ce[It].deltas,wt,St),Ft=!0}ie&&S.call(this,ie),W&&V.call(this)}},he=function(O){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-J;case"top":return O+W-J;case"hanging":return O+W-2*J;case"middle":return O+W/2-J;default:return O}},q=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(W,J){this.colorStops.push([W,J])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(O,W,J,ie,ce,me,Ae,we,Ne){for(var Ue=Me.call(this,J,ie,ce,me),et=0;et<Ue.length;et++){var We=Ue[et];et===0&&(Ne?C.call(this,We.x1+O,We.y1+W):T.call(this,We.x1+O,We.y1+W)),be.call(this,O,W,We.x2,We.y2,We.x3,We.y3,We.x4,We.y4)}we?V.call(this):S.call(this,Ae)},S=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(O,W){this.pdf.internal.out(t(O)+" "+r(W)+" m")},D=function(O){var W;switch(O.align){case"right":case"end":W="right";break;case"center":W="center";break;default:W="left"}var J,ie,ce,me=this.pdf.getTextDimensions(O.text),Ae=he.call(this,O.y),we=q.call(this,Ae)-me.h,Ne=this.ctx.transform.applyToPoint(new s(O.x,Ae));if(this.autoPaging){var Ue=this.ctx.transform.decompose(),et=new c;et=(et=(et=et.multiply(Ue.translate)).multiply(Ue.skew)).multiply(Ue.scale);for(var We=this.ctx.transform.applyToRectangle(new a(O.x,Ae,me.w,me.h)),ct=et.applyToRectangle(new a(O.x,we,me.w,me.h)),G=M.call(this,ct),Ke=[],Ft=0;Ft<G.length;Ft+=1)Ke.indexOf(G[Ft])===-1&&Ke.push(G[Ft]);B(Ke);for(var It=Ke[0],qe=Ke[Ke.length-1],Tt=It;Tt<qe+1;Tt++){this.pdf.setPage(Tt);var lt=Tt===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],St=this.pdf.internal.pageSize.height-this.margin[2],vn=St-this.margin[0],Qt=this.pdf.internal.pageSize.width-this.margin[1],zt=Qt-this.margin[3],Lt=Tt===1?0:wt+(Tt-2)*vn;if(this.ctx.clip_path.length!==0){var Vt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(J,this.posX+this.margin[3],-1*Lt+lt),oe.call(this,"fill",!0),this.path=Vt}var vt=Y([JSON.parse(JSON.stringify(ct))],this.posX+this.margin[3],-Lt+lt+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*O.scale),ce=this.lineWidth,this.lineWidth=ce*O.scale);var Xt=this.autoPaging!=="text";if(Xt||vt.y+vt.h<=St){if(Xt||vt.y>=lt&&vt.x<=Qt){var At=Xt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Qt-vt.x)[0],Rr=Y([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-Lt+lt+this.ctx.prevPageLastElemOffset)[0],_n=Xt&&(Tt>It||Tt<qe)&&I.call(this);_n&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,vn,null).clip().discardPath()),this.pdf.text(At,Rr.x,Rr.y,{angle:O.angle,align:W,renderingMode:O.renderingMode}),_n&&this.pdf.restoreGraphicsState()}}else vt.y<St&&(this.ctx.prevPageLastElemOffset+=St-vt.y);O.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ce)}}else O.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*O.scale),ce=this.lineWidth,this.lineWidth=ce*O.scale),this.pdf.text(O.text,Ne.x+this.posX,Ne.y+this.posY,{angle:O.angle,align:W,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ce)},T=function(O,W,J,ie){J=J||0,ie=ie||0,this.pdf.internal.out(t(O+J)+" "+r(W+ie)+" l")},ne=function(O,W,J){return this.pdf.lines(O,W,J,null,null)},be=function(O,W,J,ie,ce,me,Ae,we){this.pdf.internal.out([e(i(J+O)),e(o(ie+W)),e(i(ce+O)),e(o(me+W)),e(i(Ae+O)),e(o(we+W)),"c"].join(" "))},Me=function(O,W,J,ie){for(var ce=2*Math.PI,me=Math.PI/2;W>J;)W-=ce;var Ae=Math.abs(J-W);Ae<ce&&ie&&(Ae=ce-Ae);for(var we=[],Ne=ie?-1:1,Ue=W;Ae>1e-5;){var et=Ue+Ne*Math.min(Ae,me);we.push(Ce.call(this,O,Ue,et)),Ae-=Math.abs(et-Ue),Ue=et}return we},Ce=function(O,W,J){var ie=(J-W)/2,ce=O*Math.cos(ie),me=O*Math.sin(ie),Ae=ce,we=-me,Ne=Ae*Ae+we*we,Ue=Ne+Ae*ce+we*me,et=4/3*(Math.sqrt(2*Ne*Ue)-Ue)/(Ae*me-we*ce),We=Ae-et*we,ct=we+et*Ae,G=We,Ke=-ct,Ft=ie+W,It=Math.cos(Ft),qe=Math.sin(Ft);return{x1:O*Math.cos(W),y1:O*Math.sin(W),x2:We*It-ct*qe,y2:We*qe+ct*It,x3:G*It-Ke*qe,y3:G*qe+Ke*It,x4:O*Math.cos(J),y4:O*Math.sin(J)}},fe=function(O){return 180*O/Math.PI},De=function(O,W,J,ie,ce,me){var Ae=O+.5*(J-O),we=W+.5*(ie-W),Ne=ce+.5*(J-ce),Ue=me+.5*(ie-me),et=Math.min(O,ce,Ae,Ne),We=Math.max(O,ce,Ae,Ne),ct=Math.min(W,me,we,Ue),G=Math.max(W,me,we,Ue);return new a(et,ct,We-et,G-ct)},Be=function(O,W,J,ie,ce,me,Ae,we){var Ne,Ue,et,We,ct,G,Ke,Ft,It,qe,Tt,lt,wt,St,vn=J-O,Qt=ie-W,zt=ce-J,Lt=me-ie,Vt=Ae-ce,vt=we-me;for(Ue=0;Ue<41;Ue++)It=(Ke=(et=O+(Ne=Ue/40)*vn)+Ne*((ct=J+Ne*zt)-et))+Ne*(ct+Ne*(ce+Ne*Vt-ct)-Ke),qe=(Ft=(We=W+Ne*Qt)+Ne*((G=ie+Ne*Lt)-We))+Ne*(G+Ne*(me+Ne*vt-G)-Ft),Ue==0?(Tt=It,lt=qe,wt=It,St=qe):(Tt=Math.min(Tt,It),lt=Math.min(lt,qe),wt=Math.max(wt,It),St=Math.max(St,qe));return new a(Math.round(Tt),Math.round(lt),Math.round(wt-Tt),Math.round(St-lt))},Fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,W,J=(O=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:W}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(Dt.API),(function(n){var e=function(s){var a,c,l,u,h,m,g,x,I,M;for(/[^\x00-\xFF]/.test(s),c=[],l=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(m=(h=((h=((h=((h=(h-(M=h%85))/85)-(I=h%85))/85)-(x=h%85))/85)-(g=h%85))/85)%85,c.push(m+33,g+33,x+33,I+33,M+33)):c.push(122);return(function(P,Y){for(var B=Y;B>0;B--)P.pop()})(c,a.length),String.fromCharCode.apply(String,c)+"~>"},t=function(s){var a,c,l,u,h,m=String,g="length",x=255,I="charCodeAt",M="slice",P="replace";for(s[M](-2),s=s[M](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),l=[],u=0,h=(s+=a="uuuuu"[M](s[g]%5||5))[g];h>u;u+=5)c=52200625*(s[I](u)-33)+614125*(s[I](u+1)-33)+7225*(s[I](u+2)-33)+85*(s[I](u+3)-33)+(s[I](u+4)-33),l.push(x&c>>24,x&c>>16,x&c>>8,x&c);return(function(Y,B){for(var K=B;K>0;K--)Y.pop()})(l,a[g]),m.fromCharCode.apply(m,l)},r=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",l=0;l<s.length;l+=2)c+=String.fromCharCode("0x"+(s[l]+s[l+1]));return c},o=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return(a=yC(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var c=0,l=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=o(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}})(Dt.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(c,l,u){var h=new XMLHttpRequest,m=0,g=function(x){var I=x.length,M=[],P=String.fromCharCode;for(m=0;m<I;m+=1)M.push(P(255&x.charCodeAt(m)));return M.join("")};if(h.open("GET",c,!l),h.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(h.onload=function(){h.status===200?u(g(this.responseText)):u(void 0)}),h.send(null),l&&h.status===200)return g(h.responseText)})(i,o,s)}catch{}return a})(e,t,r)},n.loadImageFile=n.loadFile})(Dt.API),(function(n){function e(){return(Yt.html2canvas?Promise.resolve(Yt.html2canvas):import("./chunk-3DX2HYX3.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Yt.DOMPurify?Promise.resolve(Yt.DOMPurify):import("./chunk-5XEYTCIL.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var c=Un(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var l=document.createElement(a);for(var u in c.className&&(l.className=c.className),c.innerHTML&&c.dompurify&&(l.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)l.style[u]=c.style[u];return l},o=function a(c,l){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)l!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(a(h,l));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},s=function a(c){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return(u=u.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),c){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,c(this.prop.container,l)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var x=u[g],I=x.src.find(function(M){return M.format==="truetype"});I&&l.addFont(I.url,x.ref.name,x.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var c=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,l,u){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,l,u){return this.setProgress(a?this.progress.val+a:null,c||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,c){var l=this;return this.thenCore(a,c,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return l.updateProgress(null,u),m}).then(u,h).then(function(m){return l.updateProgress(1),m})})},s.prototype.thenCore=function(a,c,l){l=l||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),c&&(c=c.bind(u));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:s.convert(Object.assign({},u),Promise.prototype),m=l.call(h,a,c);return s.convert(m,u.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(l){c=c.thenCore(l)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Dt.getPageSize=function(a,c,l){if(Un(a)==="object"){var u=a;a=u.orientation,c=u.unit||c,l=u.format||l}c=c||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var h,m=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var x,I=0,M=0;if(g.hasOwnProperty(m))I=g[m][1]/h,M=g[m][0]/h;else try{I=l[1],M=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",M>I&&(x=M,M=I,I=x);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",I>M&&(x=M,M=I,I=x)}return{width:M,height:I,unit:c,k:h,orientation:a}},n.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Nk):null;var l=new s(c);return c.worker?l:l.from(a).doCallback()}})(Dt.API),Dt.API.addJS=function(n){return Cz=n,this.internal.events.subscribe("postPutResources",function(){qC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(qC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),xz=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Cz+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){qC!==void 0&&xz!==void 0&&this.internal.out("/Names <</JavaScript "+qC+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var c=a[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(o=0;o<l;o++){var h=t.internal.newObject();u.push(h);var m=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<u.length;o++)t.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var c=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<r.children.length;l++)this.renderItems(r.children[l])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(Dt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var c,l=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(h){for(var m,g=256*h.charCodeAt(4)+h.charCodeAt(5),x=h.length,I={width:0,height:0,numcomponents:1},M=4;M<x;M+=2){if(M+=g,e.indexOf(h.charCodeAt(M+1))!==-1){m=256*h.charCodeAt(M+5)+h.charCodeAt(M+6),I={width:256*h.charCodeAt(M+7)+h.charCodeAt(M+8),height:m,numcomponents:h.charCodeAt(M+9)};break}g=256*h.charCodeAt(M+2)+h.charCodeAt(M+3)}return I})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:t,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:l,index:r,alias:i}}return u}})(Dt.API),Dt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=dz(n,{checkCrc:!0}),s=o.width,a=o.height,c=o.channels,l=o.palette,u=o.depth;i=l&&c===1?(function(N){for(var S=N.width,V=N.height,C=N.data,D=N.palette,T=N.depth,ne=!1,be=[],Me=[],Ce=void 0,fe=!1,De=0,Be=0;Be<D.length;Be++){var Fe=qP(D[Be],4),O=Fe[0],W=Fe[1],J=Fe[2],ie=Fe[3];be.push(O,W,J),ie!=null&&(ie===0?(De++,Me.length<1&&Me.push(Be)):ie<255&&(fe=!0))}if(fe||De>1){ne=!0,Me=void 0;var ce=S*V;Ce=new Uint8Array(ce);for(var me=new DataView(C.buffer),Ae=0;Ae<ce;Ae++){var we=kk(me,Ae,T),Ne=qP(D[we],4)[3];Ce[Ae]=Ne}}else De===0&&(Me=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ne?8:void 0,colorBytes:C,alphaBytes:Ce,needSMask:ne,palette:be,mask:Me}})(o):c===2||c===4?(function(N){for(var S=N.data,V=N.width,C=N.height,D=N.channels,T=N.depth,ne=D===2?"DeviceGray":"DeviceRGB",be=D-1,Me=V*C,Ce=be,fe=Me*Ce,De=1*Me,Be=Math.ceil(fe*T/8),Fe=Math.ceil(De*T/8),O=new Uint8Array(Be),W=new Uint8Array(Fe),J=new DataView(S.buffer),ie=new DataView(O.buffer),ce=new DataView(W.buffer),me=!1,Ae=0;Ae<Me;Ae++){for(var we=Ae*D,Ne=0;Ne<Ce;Ne++)Pz(ie,kk(J,we+Ne,T),Ae*Ce+Ne,T);var Ue=kk(J,we+Ce,T);Ue<(1<<T)-1&&(me=!0),Pz(ce,Ue,1*Ae,T)}return{colorSpace:ne,colorsPerPixel:be,sMaskBitsPerComponent:me?T:void 0,colorBytes:O,alphaBytes:W,needSMask:me}})(o):(function(N){var S=N.data,V=N.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:S instanceof Uint16Array?(function(C){for(var D=C.length,T=new Uint8Array(2*D),ne=new DataView(T.buffer,T.byteOffset,T.byteLength),be=0;be<D;be++)ne.setUint16(2*be,C[be],!1);return T})(S):S,needSMask:!1}})(o);var h,m,g,x=i,I=x.colorSpace,M=x.colorsPerPixel,P=x.sMaskBitsPerComponent,Y=x.colorBytes,B=x.alphaBytes,K=x.needSMask,oe=x.palette,he=x.mask,q=null;return r!==Dt.API.image_compression.NONE&&typeof yC=="function"?(q=(function(N){var S;switch(N){case Dt.API.image_compression.FAST:S=11;break;case Dt.API.image_compression.MEDIUM:S=13;break;case Dt.API.image_compression.SLOW:S=14;break;default:S=12}return S})(r),h=this.decode.FLATE_DECODE,m="/Predictor ".concat(q," /Colors ").concat(M," /BitsPerComponent ").concat(u," /Columns ").concat(s),n=Az(Y,Math.ceil(s*M*u/8),M,u,r),K&&(g=Az(B,Math.ceil(s*P/8),1,P,r))):(h=void 0,m=void 0,n=Y,K&&(g=B)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:t,data:n,index:e,filter:h,decodeParameters:m,transparency:he,palette:oe,sMask:g,predictor:q,width:s,height:a,bitsPerComponent:u,sMaskBitsPerComponent:P,colorSpace:I}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new rue(e),s=o.width,a=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:s,height:a},u=new Rk(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)},n.processGIF87A=n.processGIF89A})(Dt.API),wc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){fr.log("bit decode error:"+t)}},wc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[o>>7-a&1];this.data[s+4*a]=c.blue,this.data[s+4*a+1]=c.green,this.data[s+4*a+2]=c.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},wc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,c=15&o,l=this.palette[a];if(this.data[s]=l.blue,this.data[s+1]=l.green,this.data[s+2]=l.red,this.data[s+3]=255,2*i+1>=this.width)break;l=this.palette[c],this.data[s+4]=l.blue,this.data[s+4+1]=l.green,this.data[s+4+2]=l.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},wc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},wc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,c=(o>>10&e)/e*255|0,l=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=c,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=l}this.pos+=n}},wc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&t)/t*255|0,l=(s>>11)/e*255|0,u=i*this.width*4+4*o;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=a,this.data[u+3]=255}this.pos+=n}},wc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},wc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},wc.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new wc(e,!1),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new Rk(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(Dt.API),Rz.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new Rz(e),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new Rk(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(Dt.API),Dt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,c=0,l=0;l<i;l+=4){var u=r[l],h=r[l+1],m=r[l+2],g=r[l+3];o[a++]=u,o[a++]=h,o[a++]=m,s[c++]=g}var x=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Dt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fm=Dt.API,HC=Fm.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=l.fof?l.fof:1,h=e.doKerning!==!1,m=0,g=n.length,x=0,I=a[0]||c,M=[];for(t=0;t<g;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?M.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(m=h&&Un(l[r])==="object"&&!isNaN(parseInt(l[r][x],10))?l[r][x]/u:0,M.push((a[r]||I)/c+m)),x=r;return M},Ez=Fm.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Fm.processArabic&&(n=Fm.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:HC.apply(this,arguments).reduce(function(o,s){return o+s},0)},Iz=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var c=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(c,o)),a=0,c=o),a+=e[o],o++;return c!==o&&i.push(n.slice(c,o)),i},Sz=function(n,e,t){t||(t={});var r,i,o,s,a,c,l,u=[],h=[u],m=t.textIndent||0,g=0,x=0,I=n.split(" "),M=HC.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?I[0].length+2:t.lineIndent||0){var P=Array(c).join(" "),Y=[];I.map(function(K){(K=K.split(/\s*\n/)).length>1?Y=Y.concat(K.map(function(oe,he){return(he&&oe.length?`
`:"")+oe})):Y.push(K[0])}),I=Y,c=Ez.apply(this,[P,t])}for(o=0,s=I.length;o<s;o++){var B=0;if(r=I[o],c&&r[0]==`
`&&(r=r.substr(1),B=1),m+g+(x=(i=HC.apply(this,[r,t])).reduce(function(K,oe){return K+oe},0))>e||B){if(x>e){for(a=Iz.apply(this,[r,i,e-(m+g),e]),u.push(a.shift()),u=[a.pop()];a.length;)h.push([a.shift()]);x=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(K,oe){return K+oe},0)}else u=[r];h.push(u),m=x+c,g=M}else u.push(r),m+=g+x,g=M}return l=c?function(K,oe){return(oe?P:"")+K.join(" ")}:function(K){return K.join(" ")},h.map(l)},Fm.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle),m="Unicode";return h.metadata[m]?{widths:h.metadata[m].widths||{0:1},kerning:h.metadata[m].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,c,l=[];for(a=0,c=r.length;a<c;a++)l=l.concat(Sz.apply(this,[r[a],s,o]));return l},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=n.__fontmetrics__.compress=function(m){var g,x,I,M,P=["{"];for(var Y in m){if(g=m[Y],isNaN(parseInt(Y,10))?x="'"+Y+"'":(Y=parseInt(Y,10),x=(x=s(Y).slice(2)).slice(0,-1)+i[x.slice(-1)]),typeof g=="number")g<0?(I=s(g).slice(3),M="-"):(I=s(g).slice(2),M=""),I=M+I.slice(0,-1)+i[I.slice(-1)];else{if(Un(g)!=="object")throw new Error("Don't know what to do with value type "+Un(g)+".");I=a(g)}P.push(x+I)}return P.push("}"),P.join("")},c=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,x,I,M,P={},Y=1,B=P,K=[],oe="",he="",q=m.length-1,N=1;N<q;N+=1)(M=m[N])=="'"?g?(I=g.join(""),g=void 0):g=[]:g?g.push(M):M=="{"?(K.push([B,I]),B={},I=void 0):M=="}"?((x=K.pop())[0][x[1]]=B,I=void 0,B=x[0]):M=="-"?Y=-1:I===void 0?r.hasOwnProperty(M)?(oe+=r[M],I=parseInt(oe,16)*Y,Y=1,oe=""):oe+=M:r.hasOwnProperty(M)?(he+=r[M],B[I]=parseInt(he,16)*Y,Y=1,I=void 0,he=""):he+=M;return P},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var g=m.font,x=h.Unicode[g.postScriptName];x&&(g.metadata.Unicode={},g.metadata.Unicode.widths=x.widths,g.metadata.Unicode.kerning=x.kerning);var I=u.Unicode[g.postScriptName];I&&(g.metadata.Unicode.encoding=I,g.encoding=I.codePages[0])}])})(Dt.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e($C(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(Dt),Dt.API.addSvgAsImage=function(n,e,t,r,i,o,s,a){if(isNaN(e)||isNaN(t))throw fr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw fr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var l=c.getContext("2d");l.fillStyle="#fff",l.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(Yt.canvg?Promise.resolve(Yt.canvg):import("./chunk-3MQJB5HQ.js")).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(l,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,s,a)})},Dt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Dt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),c=[],l=0,u=0,h=0;function m(x,I){var M,P=!1;for(M=0;M<x.length;M+=1)x[M]===I&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var g=a.length;for(h=0;h<g;h+=1)t[a[h]].value=t[a[h]].defaultValue,t[a[h]].explicitSet=!1}if(Un(n)==="object"){for(i in n)if(o=n[i],m(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&m(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(l=0;l<o.length;l+=1)if(r=!0,o[l].length===1&&typeof o[l][0]=="number")c.push(String(o[l]-1));else if(o[l].length>1){for(u=0;u<o[l].length;u+=1)typeof o[l][u]!="number"&&(r=!1);r===!0&&c.push([o[l][0]-1,o[l][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,I=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?I.push("/"+x+" /"+t[x].value):I.push("/"+x+" "+t[x].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),l=o.length+s.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Dt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,c=s.metadata.Unicode.widths,l=["","0","00","000","0000"],u=[""],h=0,m=o.length;h<m;++h){if(a=s.metadata.characterToGlyph(o.charCodeAt(h)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(h),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(l[4-a.length],a)}return u.join("")},r=function(o){var s,a,c,l,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(a=Object.keys(o).sort(function(g,x){return g-x})).length;h<m;h++)s=a[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(l=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+l+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",x=0;x<m.length;x++)g+=String.fromCharCode(m[x]);var I=l();u({data:g,addLength1:!0,objectId:I}),c("endobj");var M=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:M}),c("endobj");var P=l();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Vm(a.fontName)),c("/FontFile2 "+I+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var Y=l();c("<<"),c("/Type /Font"),c("/BaseFont /"+Vm(a.fontName)),c("/FontDescriptor "+P+" 0 R"),c("/W "+n.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=l(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+M+" 0 R"),c("/BaseFont /"+Vm(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+Y+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var x=l();u({data:m,addLength1:!0,objectId:x}),c("endobj");var I=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:I}),c("endobj");var M=l();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+Vm(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=l();for(var P=0;P<a.metadata.hmtx.widths.length;P++)a.metadata.hmtx.widths[P]=parseInt(a.metadata.hmtx.widths[P]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+Vm(a.fontName)+"/FontDescriptor "+M+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",c=o.x,l=o.y,u=o.options||{},h=o.mutex||{},m=h.pdfEscape,g=h.activeFontKey,x=h.fonts,I=g,M="",P=0,Y="",B=x[I].encoding;if(x[I].encoding!=="Identity-H")return{text:a,x:c,y:l,options:u,mutex:h};for(Y=a,I=g,Array.isArray(a)&&(Y=a[0]),P=0;P<Y.length;P+=1)x[I].metadata.hasOwnProperty("cmap")&&(s=x[I].metadata.cmap.unicode.codeMap[Y[P].charCodeAt(0)]),s||Y[P].charCodeAt(0)<256&&x[I].metadata.hasOwnProperty("Unicode")?M+=Y[P]:M+="";var K="";return parseInt(I.slice(1))<14||B==="WinAnsiEncoding"?K=m(M,I).split("").map(function(oe){return oe.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(K=t(M,x[I])),h.isHex=!0,{text:K,x:c,y:l,options:u,mutex:h}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],c={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var l=0;for(l=0;l<s.length;l+=1)Array.isArray(s[l])&&s[l].length===3?a.push([i(Object.assign({},c,{text:s[l][0]})).text,s[l][1],s[l][2]]):a.push(i(Object.assign({},c,{text:s[l]})).text);o.text=a}else o.text=i(Object.assign({},c,{text:s})).text}])})(Dt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Dt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,c,l,u,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},M=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Y=!1,B=0;this.__bidiEngine__={};var K=function(C){var D=C.charCodeAt(),T=D>>8,ne=I[T];return ne!==void 0?h[256*ne+(255&D)]:T===252||T===253?"AL":P.test(T)?"L":T===8?"R":"N"},oe=function(C){for(var D,T=0;T<C.length;T++){if((D=K(C.charAt(T)))==="L")return!1;if(D==="R")return!0}return!1},he=function(C,D,T,ne){var be,Me,Ce,fe,De=D[ne];switch(De){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Y=!1;break;case"N":case"AN":break;case"EN":Y&&(De="AN");break;case"AL":Y=!0,De="R";break;case"WS":case"BN":De="N";break;case"CS":ne<1||ne+1>=D.length||(be=T[ne-1])!=="EN"&&be!=="AN"||(Me=D[ne+1])!=="EN"&&Me!=="AN"?De="N":Y&&(Me="AN"),De=Me===be?Me:"N";break;case"ES":De=(be=ne>0?T[ne-1]:"B")==="EN"&&ne+1<D.length&&D[ne+1]==="EN"?"EN":"N";break;case"ET":if(ne>0&&T[ne-1]==="EN"){De="EN";break}if(Y){De="N";break}for(Ce=ne+1,fe=D.length;Ce<fe&&D[Ce]==="ET";)Ce++;De=Ce<fe&&D[Ce]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(fe=D.length,Ce=ne+1;Ce<fe&&D[Ce]==="NSM";)Ce++;if(Ce<fe){var Be=C[ne],Fe=Be>=1425&&Be<=2303||Be===64286;if(be=D[Ce],Fe&&(be==="R"||be==="AL")){De="R";break}}}De=ne<1||(be=D[ne-1])==="B"?"N":T[ne-1];break;case"B":Y=!1,i=!0,De=B;break;case"S":o=!0,De="N"}return De},q=function(C,D,T){var ne=C.split("");return T&&N(ne,T,{hiLevel:B}),ne.reverse(),D&&D.reverse(),ne.join("")},N=function(C,D,T){var ne,be,Me,Ce,fe,De=-1,Be=C.length,Fe=0,O=[],W=B?g:m,J=[];for(Y=!1,i=!1,o=!1,be=0;be<Be;be++)J[be]=K(C[be]);for(Me=0;Me<Be;Me++){if(fe=Fe,O[Me]=he(C,J,O,Me),ne=240&(Fe=W[fe][x[O[Me]]]),Fe&=15,D[Me]=Ce=W[Fe][5],ne>0)if(ne===16){for(be=De;be<Me;be++)D[be]=1;De=-1}else De=-1;if(W[Fe][6])De===-1&&(De=Me);else if(De>-1){for(be=De;be<Me;be++)D[be]=Ce;De=-1}J[Me]==="B"&&(D[Me]=0),T.hiLevel|=Ce}o&&(function(ie,ce,me){for(var Ae=0;Ae<me;Ae++)if(ie[Ae]==="S"){ce[Ae]=B;for(var we=Ae-1;we>=0&&ie[we]==="WS";we--)ce[we]=B}})(J,D,Be)},S=function(C,D,T,ne,be){if(!(be.hiLevel<C)){if(C===1&&B===1&&!i)return D.reverse(),void(T&&T.reverse());for(var Me,Ce,fe,De,Be=D.length,Fe=0;Fe<Be;){if(ne[Fe]>=C){for(fe=Fe+1;fe<Be&&ne[fe]>=C;)fe++;for(De=Fe,Ce=fe-1;De<Ce;De++,Ce--)Me=D[De],D[De]=D[Ce],D[Ce]=Me,T&&(Me=T[De],T[De]=T[Ce],T[Ce]=Me);Fe=fe}Fe++}}},V=function(C,D,T){var ne=C.split(""),be={hiLevel:B};return T||(T=[]),N(ne,T,be),(function(Me,Ce,fe){if(fe.hiLevel!==0&&u)for(var De,Be=0;Be<Me.length;Be++)Ce[Be]===1&&(De=M.indexOf(Me[Be]))>=0&&(Me[Be]=M[De+1])})(ne,T,be),S(2,ne,D,T,be),S(1,ne,D,T,be),ne.join("")};return this.__bidiEngine__.doBidiReorder=function(C,D,T){if((function(be,Me){if(Me)for(var Ce=0;Ce<be.length;Ce++)Me[Ce]=Ce;a===void 0&&(a=oe(be)),l===void 0&&(l=oe(be))})(C,D),s||!c||l)if(s&&c&&a^l)B=a?1:0,C=q(C,D,T);else if(!s&&c&&l)B=a?1:0,C=V(C,D,T),C=q(C,D);else if(!s||a||c||l){if(s&&!c&&a^l)C=q(C,D),a?(B=0,C=V(C,D,T)):(B=1,C=V(C,D,T),C=q(C,D));else if(s&&a&&!c&&l)B=1,C=V(C,D,T),C=q(C,D);else if(!s&&!c&&a^l){var ne=u;a?(B=1,C=V(C,D,T),B=0,u=!1,C=V(C,D,T),u=ne):(B=0,C=V(C,D,T),C=q(C,D),B=1,u=!1,C=V(C,D,T),u=ne,C=q(C,D))}}else B=0,C=V(C,D,T);else B=a?1:0,C=V(C,D,T);return C},this.__bidiEngine__.setOptions=function(C){C&&(s=C.isInputVisual,c=C.isOutputVisual,a=C.isInputRtl,l=C.isOutputRtl,u=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Dt),Dt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new nf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new _ue(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new iue(this.contents),this.head=new sue(this),this.name=new due(this),this.cmap=new Wz(this),this.toUnicode={},this.hhea=new aue(this),this.maxp=new fue(this),this.hmtx=new hue(this),this.post=new lue(this),this.os2=new cue(this),this.loca=new vue(this),this.glyf=new pue(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,c,l;for(l=[],s=0,a=(c=this.bbox).length;s<a;s++)e=c[s],l.push(Math.round(e*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var xc,nf=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),iue=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,c,l,u,h,m,g,x,I;for(I in g=Object.keys(t).length,c=Math.log(2),h=16*Math.floor(Math.log(g)/c),s=Math.floor(h/c),u=16*g-h,(i=new nf).writeInt(this.scalarType),i.writeShort(g),i.writeShort(h),i.writeShort(s),i.writeShort(u),o=16*g,l=i.pos+o,a=null,x=[],t)for(m=t[I],i.writeString(I),i.writeInt(n(m)),i.writeInt(l),i.writeInt(m.length),x=x.concat(m),I==="head"&&(a=l),l+=m.length;l%4;)x.push(0),l++;return i.write(x),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=Kz.call(t);t.length%4;)t.push(0);for(o=new nf(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),oue={}.hasOwnProperty,xl=function(n,e){for(var t in e)oue.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};xc=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var sue=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return xl(n,xc),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new nf).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),Oz=(function(){function n(e,t){var r,i,o,s,a,c,l,u,h,m,g,x,I,M,P,Y,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,o=(function(){var K,oe;for(oe=[],c=K=0;0<=m?K<m:K>m;c=0<=m?++K:--K)oe.push(e.readUInt16());return oe})(),e.pos+=2,I=(function(){var K,oe;for(oe=[],c=K=0;0<=m?K<m:K>m;c=0<=m?++K:--K)oe.push(e.readUInt16());return oe})(),l=(function(){var K,oe;for(oe=[],c=K=0;0<=m?K<m:K>m;c=0<=m?++K:--K)oe.push(e.readUInt16());return oe})(),u=(function(){var K,oe;for(oe=[],c=K=0;0<=m?K<m:K>m;c=0<=m?++K:--K)oe.push(e.readUInt16());return oe})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var K,oe;for(oe=[],c=K=0;0<=i?K<i:K>i;c=0<=i?++K:--K)oe.push(e.readUInt16());return oe})(),c=P=0,B=o.length;P<B;c=++P)for(M=o[c],r=Y=x=I[c];x<=M?Y<=M:Y>=M;r=x<=M?++Y:--Y)u[c]===0?s=r+l[c]:(s=a[u[c]/2+(r-x)-(m-c)]||0)!==0&&(s+=l[c]),this.codeMap[r]=65535&s}e.pos=h}return n.encode=function(e,t){var r,i,o,s,a,c,l,u,h,m,g,x,I,M,P,Y,B,K,oe,he,q,N,S,V,C,D,T,ne,be,Me,Ce,fe,De,Be,Fe,O,W,J,ie,ce,me,Ae,we,Ne,Ue,et;switch(ne=new nf,s=Object.keys(e).sort(function(We,ct){return We-ct}),t){case"macroman":for(I=0,M=(function(){var We=[];for(x=0;x<256;++x)We.push(0);return We})(),Y={0:0},o={},be=0,De=s.length;be<De;be++)Y[we=e[i=s[be]]]==null&&(Y[we]=++I),o[i]={old:e[i],new:Y[e[i]]},M[i]=Y[e[i]];return ne.writeUInt16(1),ne.writeUInt16(0),ne.writeUInt32(12),ne.writeUInt16(0),ne.writeUInt16(262),ne.writeUInt16(0),ne.write(M),{charMap:o,subtable:ne.data,maxGlyphID:I+1};case"unicode":for(D=[],h=[],B=0,Y={},r={},P=l=null,Me=0,Be=s.length;Me<Be;Me++)Y[oe=e[i=s[Me]]]==null&&(Y[oe]=++B),r[i]={old:oe,new:Y[oe]},a=Y[oe]-i,P!=null&&a===l||(P&&h.push(P),D.push(i),l=a),P=i;for(P&&h.push(P),h.push(65535),D.push(65535),V=2*(S=D.length),N=2*Math.pow(Math.log(S)/Math.LN2,2),m=Math.log(N/2)/Math.LN2,q=2*S-N,c=[],he=[],g=[],x=Ce=0,Fe=D.length;Ce<Fe;x=++Ce){if(C=D[x],u=h[x],C===65535){c.push(0),he.push(0);break}if(C-(T=r[C].new)>=32768)for(c.push(0),he.push(2*(g.length+S-x)),i=fe=C;C<=u?fe<=u:fe>=u;i=C<=u?++fe:--fe)g.push(r[i].new);else c.push(T-C),he.push(0)}for(ne.writeUInt16(3),ne.writeUInt16(1),ne.writeUInt32(12),ne.writeUInt16(4),ne.writeUInt16(16+8*S+2*g.length),ne.writeUInt16(0),ne.writeUInt16(V),ne.writeUInt16(N),ne.writeUInt16(m),ne.writeUInt16(q),me=0,O=h.length;me<O;me++)i=h[me],ne.writeUInt16(i);for(ne.writeUInt16(0),Ae=0,W=D.length;Ae<W;Ae++)i=D[Ae],ne.writeUInt16(i);for(Ne=0,J=c.length;Ne<J;Ne++)a=c[Ne],ne.writeUInt16(a);for(Ue=0,ie=he.length;Ue<ie;Ue++)K=he[Ue],ne.writeUInt16(K);for(et=0,ce=g.length;et<ce;et++)I=g[et],ne.writeUInt16(I);return{charMap:r,subtable:ne.data,maxGlyphID:B+1}}},n})(),Wz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return xl(n,xc),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new Oz(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=Oz.encode(e,t),(i=new nf).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),aue=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return xl(n,xc),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),cue=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return xl(n,xc),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),lue=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return xl(n,xc),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,a,c;for(c=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)c.push(e.readUInt32());return c}).call(this)}},n})(),uue=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},due=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return xl(n,xc),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,s,a,c,l,u,h,m;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(c={},o=u=0,h=r.length;u<h;o=++u)i=r[o],e.pos=i.offset,l=e.readString(i.length),s=new uue(l,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),fue=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return xl(n,xc),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),hue=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return xl(n,xc),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,s,a,c;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var l,u;for(u=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)u.push(e.readInt16());return u})(),this.widths=(function(){var l,u,h,m;for(m=[],l=0,u=(h=this.metrics).length;l<u;l++)o=h[l],m.push(o.advance);return m}).call(this),r=this.widths[this.widths.length-1],c=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),Kz=[].slice,pue=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return xl(n,xc),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,s,a,c,l,u,h;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,s=(a=new nf(t.read(i))).readShort(),l=a.readShort(),h=a.readShort(),c=a.readShort(),u=a.readShort(),this.cache[e]=s===-1?new mue(a,l,h,c,u):new gue(a,s,l,h,c,u),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,s,a,c;for(s=[],o=[],a=0,c=t.length;a<c;a++)i=e[t[a]],o.push(s.length),i&&(s=s.concat(i.encode(r)));return o.push(s.length),{table:s,offsets:o}},n})(),gue=(function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),mue=(function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new nf(Kz.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),vue=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return xl(n,xc),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<r.length;++s)if(r[s]=i,o<t.length&&t[o]==s){++o,r[s]=i;var a=this.offsets[s],c=this.offsets[s+1]-a;c>0&&(i+=c)}for(var l=new Array(4*r.length),u=0;u<r.length;++u)l[4*u+3]=255&r[u],l[4*u+2]=(65280&r[u])>>8,l[4*u+1]=(16711680&r[u])>>16,l[4*u]=(4278190080&r[u])>>24;return l},n})(),_ue=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,c;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in c=this.glyphsFor(t))r=c[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,c,l,u,h,m,g,x,I,M,P;for(i in r=Wz.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),g={0:0},P=r.charMap)g[(c=P[i]).old]=c.new;for(x in m=r.maxGlyphID,s)x in g||(g[x]=m++);return u=(function(Y){var B,K;for(B in K={},Y)K[Y[B]]=B;return K})(g),h=Object.keys(u).sort(function(Y,B){return Y-B}),I=(function(){var Y,B,K;for(K=[],Y=0,B=h.length;Y<B;Y++)a=h[Y],K.push(u[a]);return K})(),o=this.font.glyf.encode(s,I,g),l=this.font.loca.encode(o.offsets,I),M={cmap:this.font.cmap.raw(),glyf:o.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(M["OS/2"]=this.font.os2.raw()),this.font.directory.encode(M)},n})();Dt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+(function(){var a,c,l;for(l=[],a=0,c=t.length;a<c;a++)r=t[a],l.push(e.convert(r));return l})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e})();var JC=(()=>{let e=class e{buildDoc(r,i,o=null){return te(this,null,function*(){return r?.templateType==="profghizztemplate"?this.buildAthletePdf(r,i,o):this.buildGymPdf(r,i,o)})}buildGymPdf(r,i,o=null){return te(this,null,function*(){let s=new Dt({unit:"mm",format:"a4",hotfixes:["px_scaling"]}),a=[26,35,126],c=[233,186,0],l=[44,122,70],u=10,h=8.5,m=12,g=s.internal.pageSize.getWidth(),x=s.internal.pageSize.getHeight(),I=14,M=16,P=g-I*2,Y=15;s.setFillColor("#0b4fa3"),s.rect(0,0,g,Y,"F"),s.setFont("Helvetica","bold"),s.setFontSize(15),s.setTextColor("#ffffff"),s.text("fitness&dance",g-I,Y/1.6,{align:"right"}),s.setTextColor("#000000");let B=Y+6,K=38,oe=38,he=0,q=i?.name||"";if(o)try{let we=yield new Promise((We,ct)=>{let G=new Image;G.onload=()=>We({w:G.width,h:G.height}),G.onerror=ct,G.src=o}),Ne=K,Ue=oe,et=we.w/we.h;et>1?(Ue=oe,Ne=Math.min(K,Ue*et)):(Ne=K,Ue=Math.min(oe,Ne/et)),s.addImage(o,"PNG",I,B,Ne,Ue,void 0,"FAST"),he=Ue}catch{}let N=I+K+12,S=B+6,V=N,C=N+16,D=S;s.setFont("Helvetica","bold"),s.setFontSize(15),s.text(q,N,D),D+=10;let T="-";if(r?.dataInizio&&/^\d{4}-\d{2}-\d{2}$/.test(r.dataInizio)){let[we,Ne,Ue]=r.dataInizio.split("-");T=`${Ue}/${Ne}/${we}`}let ne=[{label:"Livello:",value:r?.livello??"-"},{label:"Durata:",value:r?.durata??"-"},{label:"Inizio:",value:T}];s.setFontSize(12);for(let we of ne)s.setFont("Helvetica","bold"),s.text(we.label,V,D),s.setFont("Helvetica","normal"),s.text(String(we.value),C,D),D+=8;let be=Math.max(he,D-B)+2;B+=be+m;let Me=3,Ce=50,fe=27,De=P/Me,Be=14,Fe=10,O=P/Be,W=11,J="bold";for(let we of r?.giorni||[]){if(!we?.esercizi?.length)continue;let Ne=[];for(let We=0;We<we.esercizi.length;We+=Me)Ne.push(we.esercizi.slice(We,We+Me));let Ue=Ne.map(()=>fe+20);x-M-B<u+Ue[0]+3&&(s.addPage(),B=18),s.setFillColor(...c),s.rect(I,B,P,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text(String(we?.nome||""),I+P/2,B+u/1.7,{align:"center"}),s.setTextColor("#000000"),B+=u+3;for(let We=0;We<Ne.length;We++){let ct=Ne[We],G=Ue[We];B+G>x-M&&(s.addPage(),B=18);for(let Ke=0;Ke<ct.length;Ke++){let Ft=ct[Ke],It=I+Ke*De,qe=It+(De-Ce)/2,Tt=B;try{if(Ft?.image){let Vt=Ft.image.startsWith("data:image/jpeg")||Ft.image.toLowerCase().endsWith(".jpg")||Ft.image.toLowerCase().endsWith(".jpeg")?"JPEG":"PNG";s.addImage(Ft.image,Vt,qe,Tt,Ce,fe,void 0,"FAST")}}catch{}let lt=Tt+fe+5;s.setFont("Helvetica",J),s.setFontSize(W),s.setTextColor("#183047"),s.text(String(Ft?.nome||""),It+De/2,lt,{align:"center"}),lt+=6;let wt=Ft?.settimaneValori?.[0]||{},St=Number(wt.serie)||0,vn=Number(wt.ripetizioni)||0,Qt=Number(wt.minuti)||0,zt=Number(wt.secondi)||0;s.setFont("Helvetica",J),s.setFontSize(W),s.setTextColor("#000000");let Lt=`${St}x${vn} - ${Qt}' ${zt}"`;s.text(Lt,It+De/2,lt,{align:"center"})}B+=G}B+=6,B+u+we.esercizi.length*Fe>x-M&&(s.addPage(),B=18),s.setFillColor(...a),s.rect(I,B,P,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text("Tracking pesi",I+2.5,B+u/1.7,{align:"left"}),s.setTextColor("#000000"),B+=u+2;let et=B;for(let We=0;We<we.esercizi.length;We++){et+Fe>x-M&&(s.addPage(),et=18);for(let ct=0;ct<Be;ct++)s.rect(I+ct*O,et,O,Fe,"S");et+=Fe}B=et+6}B+u+126>x-M&&(s.addPage(),B=18),s.setFillColor(...a),s.rect(I,B,P,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text("Note personali",I+2.5,B+u/1.7,{align:"left"}),s.setTextColor("#000000"),B+=u+2;let ie=i?.personalNotes??r?.personalNotes??"",ce=typeof ie=="string"&&ie.trim()?ie.split(`
`):[],me=18;s.setFont("Helvetica","normal"),s.setFontSize(11);let Ae=7;for(let we=0;we<me;we++)B+Ae>x-M&&(s.addPage(),B=18),s.line(I,B,I+P,B),ce[we]&&s.text(ce[we],I+2.5,B+Ae*.68,{align:"left"}),B+=Ae;return s.line(I,B,I+P,B),s})}buildAthletePdf(r,i,o=null){return te(this,null,function*(){let s=new Dt({unit:"mm",format:"a4",hotfixes:["px_scaling"]}),a=[233,186,0],c=[245,245,210],l=[255,255,255],u=s.internal.pageSize.getWidth(),h=s.internal.pageSize.getHeight(),m=10,g=u-m*2,x=15,I=16;s.setFillColor("#0b4fa3"),s.rect(0,0,u,x,"F"),s.setFont("Helvetica","bold"),s.setFontSize(15),s.setTextColor("#ffffff"),s.text("Prof Ghizz",u-m,x/1.6,{align:"right"}),s.setTextColor("#000000");let M=x+6,P=38,Y=38,B=0,K=i?.name||"";if(o)try{let Ce=yield new Promise((Fe,O)=>{let W=new Image;W.onload=()=>Fe({w:W.width,h:W.height}),W.onerror=O,W.src=o}),fe=P,De=Y,Be=Ce.w/Ce.h;Be>1?(De=Y,fe=Math.min(P,De*Be)):(fe=P,De=Math.min(Y,fe/Be)),s.addImage(o,"PNG",m,M,fe,De,void 0,"FAST"),B=De}catch{}let oe=m+P+12,he=M+6,q=oe,N=oe+16,S=he;s.setFont("Helvetica","bold"),s.setFontSize(15),s.text(K,oe,S),S+=10;let V="-";if(r?.dataInizio&&/^\d{4}-\d{2}-\d{2}$/.test(r.dataInizio)){let[Ce,fe,De]=r.dataInizio.split("-");V=`${De}/${fe}/${Ce}`}let C=[{label:"Livello:",value:r?.livello??"-"},{label:"Durata:",value:r?.durata??"-"},{label:"Inizio:",value:V}];s.setFontSize(12);for(let Ce of C)s.setFont("Helvetica","bold"),s.text(Ce.label,q,S),s.setFont("Helvetica","normal"),s.text(String(Ce.value),N,S),S+=8;let D=Math.max(B,S-M)+6;M+=D;let T=32,ne=26,be=9,Me=26;s.setDrawColor(0,0,0),s.setLineWidth(.3);for(let Ce of r?.giorni||[]){let fe=Array.isArray(Ce?.settimane)&&Ce.settimane.length?Ce.settimane:Array.from({length:10},(W,J)=>({nome:`Settim. ${J+1}`}));M+10+be+Me>h-I&&(s.addPage(),M=18),s.setFillColor(...a),s.rect(m,M,g,10,"F"),s.setFont("Helvetica","bold"),s.setFontSize(14),s.setTextColor("#000000"),s.text(String(Ce?.nome||""),m+g/2,M+7,{align:"center"}),M+=12;let Be=(g-T)/fe.length,Fe=m,O=M;for(let W=0;W<fe.length;W++){let J=Fe+T+W*Be;s.setFillColor(...c),s.rect(J,O,Be,be,"F"),s.rect(J,O,Be,be,"S"),s.setFont("Helvetica","bold"),s.setFontSize(10.2),s.setTextColor(0,0,0);let ie=(fe[W]?.nome||`Settim. ${W+1}`).replace("Settimana","Settim.");s.text(ie,J+Be/2,O+5.6,{align:"center"})}s.rect(Fe,O,T,be,"S"),O+=be;for(let W of Ce?.esercizi||[]){let J=Me,ie=s.splitTextToSize(String(W?.nome||""),T-2),ce=ne-13,me=0,Ae=ie.length*4.7+2;W?.didascalia&&(me=4.5);let we=2+ce+2+me+2+Ae;we>J&&(J=we+2),O+J>h-I&&(s.addPage(),O=18),s.rect(Fe,O,T,J,"S");let Ne=O+2,Ue=Fe+2,et=T-4;try{if(W?.image){let ct=W.image.startsWith("data:image/jpeg")||W.image.toLowerCase().endsWith(".jpg")||W.image.toLowerCase().endsWith(".jpeg")?"JPEG":"PNG";s.addImage(W.image,ct,Ue,Ne,et,ce,void 0,"FAST")}}catch{}let We=Ne+ce+2;W?.didascalia&&(s.setFont("Helvetica","italic"),s.setFontSize(8),s.setTextColor(0,0,0),s.text(String(W.didascalia),Fe+T/2,We,{align:"center",maxWidth:T-2}),We+=me),s.setFont("Helvetica","normal"),s.setFontSize(8.6),s.setTextColor(0,0,0),s.text(ie,Fe+T/2,We+2,{align:"center",maxWidth:T-2});for(let ct=0;ct<fe.length;ct++){let G=Fe+T+ct*Be;s.setFillColor(...l),s.rect(G,O,Be,J,"F"),s.rect(G,O,Be,J,"S");let Ke=W?.settimaneValori&&W.settimaneValori[ct]?W.settimaneValori[ct]:null,Ft=Ke&&Number(Ke.serie)||0,It=Ke&&Number(Ke.ripetizioni)||0,qe=Ke&&Number(Ke.caricoKg)||0;s.setFont("Helvetica","bold"),s.setFontSize(10.3),s.setTextColor(0,0,0);let Tt=Ft||It||qe?`${Ft}*${It} @ ${qe} kg`:"__*__ @ __ kg";s.text(Tt,G+Be/2,O+8.5,{align:"center"}),s.setDrawColor(0,0,0),s.setLineWidth(.2),s.line(G+1,O+11,G+Be-1,O+11),s.setLineWidth(.3);let lt=Ke&&Number(Ke.minuti)||0,wt=Ke&&Number(Ke.secondi)||0;s.setFont("Helvetica","normal"),s.setFontSize(9.2);let St=lt||wt?`rec. ${lt}' ${wt}"`:"rec. __";s.text(St,G+Be/2,O+15.5,{align:"center"}),s.setDrawColor(0,0,0),s.setLineWidth(.2),s.line(G+1,O+18,G+Be-1,O+18),s.setLineWidth(.3);let vn=Ke?.note||"";if(vn){s.setFont("Helvetica","italic"),s.setFontSize(8.2);let Qt=s.splitTextToSize(String(vn),Be-4),zt=Array.isArray(Qt)?Qt[0]:Qt;s.text(zt,G+Be/2,O+21.2,{align:"center"})}}O+=J}M=O+6}return s})}buildProfGhizzDoc(r,i,o=null){return te(this,null,function*(){return this.buildAthletePdf(r,i,o)})}buildAndSavePdf(r,i,o=null){return te(this,null,function*(){let s=yield this.buildDoc(r,i,o),a=(i?.name||"Cliente").replace(/\s+/g,""),c=r?.dataInizio||"",l=`scheda-${a}-${c}.pdf`;s.save(l)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var yue=(n,e)=>({active:n,inactive:e});function wue(n,e){if(n&1&&ht(0,"img",35),n&2){let t=ee(2);ae("src",t.user.avatarUrl,ur)("alt",t.user.name)}}function bue(n,e){n&1&&(ri(0),b(1,"span",36),j(2,"person"),A(),ii())}function xue(n,e){n&1&&(b(0,"span",37),j(1," Tessera scaduta! "),A())}function Cue(n,e){if(n&1&&(b(0,"div",38),j(1),A()),n&2){let t=ee(2);H(),Dr("Totale: ",t.filteredCards.length)}}function Eue(n,e){if(n&1&&(ri(0),j(1),ii()),n&2){let t=ee().$implicit;H(),Dr(" - ",t.time)}}function Iue(n,e){if(n&1){let t=_t();b(0,"div",40)(1,"div",41)(2,"span",42),j(3,"assignment"),A(),b(4,"span",43),j(5),Qe(6,Eue,2,1,"ng-container",9),A()(),b(7,"div",44)(8,"button",45),Se("click",function(){let i=pe(t).index,o=ee(3);return ge(o.printCard(i))}),b(9,"span",46),j(10,"print"),A()(),b(11,"button",47),Se("click",function(){let i=pe(t).index,o=ee(3);return ge(o.deleteCard(i))}),b(12,"span",46),j(13,"delete"),A()()()()}if(n&2){let t=e.$implicit;H(5),Dr(" ",t.date),H(),ae("ngIf",t.time)}}function Sue(n,e){if(n&1&&(ri(0),Qe(1,Iue,14,2,"div",39),ii()),n&2){let t=ee(2);H(),ae("ngForOf",t.filteredCards)}}function Aue(n,e){n&1&&(b(0,"div",48),j(1," Nessuna scheda associata. "),A())}function Due(n,e){if(n&1){let t=_t();b(0,"div",49),Se("click",function(){pe(t);let i=ee(2);return ge(i.closeDeleteModal())}),A()}}function Tue(n,e){if(n&1){let t=_t();b(0,"div",50)(1,"div",51),Se("click",function(i){return pe(t),ge(i.stopPropagation())}),b(2,"p"),j(3,"Sei sicuro di voler eliminare questo cliente in modo definitivo?"),A(),b(4,"div",52)(5,"button",53),Se("click",function(){pe(t);let i=ee(2);return ge(i.deleteUserCustom())}),j(6,"Elimina"),A(),b(7,"button",21),Se("click",function(){pe(t);let i=ee(2);return ge(i.closeDeleteModal())}),j(8,"Annulla"),A()()()()}}function Mue(n,e){if(n&1){let t=_t();b(0,"div",49),Se("click",function(){pe(t);let i=ee(2);return ge(i.closeEditModal())}),A()}}function Nue(n,e){if(n&1&&(ri(0),ht(1,"img",84),ii()),n&2){let t=ee(3);H(),ae("src",t.editForm.avatarUrl||(t.user==null?null:t.user.avatarUrl),ur)}}function Pue(n,e){n&1&&(b(0,"span",85),j(1,"person"),A())}function kue(n,e){n&1&&(b(0,"div",86),j(1,"Caricamento..."),A())}function Rue(n,e){if(n&1){let t=_t();b(0,"div",54)(1,"form",55),Se("ngSubmit",function(){pe(t);let i=ee(2);return ge(i.saveEditModal())})("click",function(i){return pe(t),ge(i.stopPropagation())}),b(2,"h2"),j(3,"Profilo Cliente"),A(),b(4,"div",56)(5,"div",57),Se("click",function(){pe(t);let i=yi(10),o=ee(2);return ge(o.triggerAvatarInput(i))}),Qe(6,Nue,2,1,"ng-container",5)(7,Pue,2,0,"ng-template",null,2,ao),b(9,"input",58,3),Se("change",function(i){pe(t);let o=ee(2);return ge(o.onAvatarChange(i))}),A()(),Qe(11,kue,2,0,"div",59),b(12,"div",60)(13,"div",61)(14,"label"),j(15,"Nome "),b(16,"input",62),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.nome,i)||(o.nome=i),ge(i)}),A()(),b(17,"label"),j(18,"Cognome "),b(19,"input",63),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.cognome,i)||(o.cognome=i),ge(i)}),A()(),b(20,"label"),j(21,"Email "),b(22,"input",64),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.email,i)||(o.editForm.email=i),ge(i)}),A()(),b(23,"label"),j(24,"Telefono "),b(25,"input",65),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.phone,i)||(o.editForm.phone=i),ge(i)}),A()(),b(26,"label"),j(27,"Data di nascita "),b(28,"input",66),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.birthDate,i)||(o.editForm.birthDate=i),ge(i)}),A()(),b(29,"label"),j(30,"Genere "),b(31,"select",67),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.gender,i)||(o.editForm.gender=i),ge(i)}),b(32,"option",68),j(33,"Seleziona..."),A(),b(34,"option",69),j(35,"Maschio"),A(),b(36,"option",70),j(37,"Femmina"),A(),b(38,"option",71),j(39,"Altro"),A()()(),b(40,"label"),j(41,"Indirizzo "),b(42,"input",72),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.address,i)||(o.editForm.address=i),ge(i)}),A()(),b(43,"label"),j(44,"Citt\xE0 "),b(45,"input",73),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.city,i)||(o.editForm.city=i),ge(i)}),A()(),b(46,"label"),j(47,"Provincia "),b(48,"input",74),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.provincia,i)||(o.editForm.provincia=i),ge(i)}),A()(),b(49,"label"),j(50,"CAP "),b(51,"input",75),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.cap,i)||(o.editForm.cap=i),ge(i)}),A()(),b(52,"label"),j(53,"Stato "),b(54,"select",76),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.status,i)||(o.editForm.status=i),ge(i)}),b(55,"option",77),j(56,"Attivo"),A(),b(57,"option",78),j(58,"Inattivo"),A()()()(),b(59,"div",79)(60,"label"),j(61,"Note personali "),b(62,"textarea",80),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.personalNotes,i)||(o.editForm.personalNotes=i),ge(i)}),A()()()()(),b(63,"div",81)(64,"button",82),j(65,"Salva"),A(),b(66,"button",83),Se("click",function(){pe(t);let i=ee(2);return ge(i.closeEditModal())}),j(67,"Annulla"),A()()()()}if(n&2){let t=yi(8),r=ee(2);H(6),ae("ngIf",r.editForm.avatarUrl||(r.user==null?null:r.user.avatarUrl))("ngIfElse",t),H(5),ae("ngIf",r.avatarLoading),H(5),it("ngModel",r.nome),H(3),it("ngModel",r.cognome),H(3),it("ngModel",r.editForm.email),H(3),it("ngModel",r.editForm.phone),H(3),it("ngModel",r.editForm.birthDate),H(3),it("ngModel",r.editForm.gender),H(11),it("ngModel",r.editForm.address),H(3),it("ngModel",r.editForm.city),H(3),it("ngModel",r.editForm.provincia),H(3),it("ngModel",r.editForm.cap),H(3),it("ngModel",r.editForm.status),H(8),it("ngModel",r.editForm.personalNotes)}}function Oue(n,e){if(n&1){let t=_t();ri(0),b(1,"div",6)(2,"div",7),Qe(3,wue,1,2,"img",8)(4,bue,3,0,"ng-container",9),A(),b(5,"div",10)(6,"div",11)(7,"div")(8,"div",12),j(9),A(),b(10,"div",13),j(11),A(),b(12,"div",14),j(13),Qe(14,xue,2,0,"span",15),A()(),b(15,"div",16)(16,"span",17),j(17),A(),b(18,"div",18),j(19),A()()(),b(20,"div",19)(21,"button",20),Se("click",function(){pe(t);let i=ee();return ge(i.openEditModal())}),j(22,"Modifica Profilo"),A(),b(23,"button",21),Se("click",function(){pe(t);let i=ee();return ge(i.openDeleteModal())}),j(24,"Elimina Cliente"),A()()()(),b(25,"div",22)(26,"div",23)(27,"div",24)(28,"h3"),j(29,"Dettagli Cliente"),A(),b(30,"div",25)(31,"span"),j(32,"Nome"),A(),b(33,"span"),j(34),A()(),b(35,"div",25)(36,"span"),j(37,"Cognome"),A(),b(38,"span"),j(39),A()(),b(40,"div",25)(41,"span"),j(42,"Data di nascita"),A(),b(43,"span"),j(44),A()(),b(45,"div",25)(46,"span"),j(47,"Genere"),A(),b(48,"span"),j(49),A()(),b(50,"div",25)(51,"span"),j(52,"Indirizzo"),A(),b(53,"span"),j(54),A()(),b(55,"div",25)(56,"span"),j(57,"Citt\xE0"),A(),b(58,"span"),j(59),A()(),b(60,"div",25)(61,"span"),j(62,"Provincia"),A(),b(63,"span"),j(64),A()(),b(65,"div",25)(66,"span"),j(67,"CAP"),A(),b(68,"span"),j(69),A()()(),b(70,"div",24)(71,"h3"),j(72,"Tessera"),A(),b(73,"div",25)(74,"span"),j(75,"Scadenza"),A(),b(76,"span")(77,"input",26),Se("change",function(i){pe(t);let o=ee();return ge(o.updateSubscriptionEnd(i.target.value))}),A()()()(),b(78,"div",24)(79,"h3"),j(80,"Note Personali"),A(),b(81,"div",27),j(82),A()()(),b(83,"div",28)(84,"div",24)(85,"div",29)(86,"h3"),j(87,"Schede di Allenamento"),A(),Qe(88,Cue,2,1,"div",30),A(),b(89,"div",31),Qe(90,Sue,2,1,"ng-container",5)(91,Aue,2,0,"ng-template",null,1,ao),A()()()(),Qe(93,Due,1,0,"div",32)(94,Tue,9,0,"div",33)(95,Mue,1,0,"div",32)(96,Rue,68,15,"div",34),ii()}if(n&2){let t=yi(92),r=ee();H(3),ae("ngIf",r.user.avatarUrl),H(),ae("ngIf",!r.user.avatarUrl),H(5),ft(r.user.name),H(2),ft(r.user.email),H(2),Dr(" Tel: ",r.user.phone||"-"," "),H(),ae("ngIf",r.isExpired(r.user.subscriptionEnd)),H(2),ae("ngClass",Cv(26,yue,r.user.status==="Attivo",r.user.status!=="Attivo")),H(),Dr(" ",r.user.status," "),H(2),Dr("Data iscrizione: ",r.user.signupDate),H(15),ft(r.user.name.split(" ")[0]),H(5),ft(r.user.name.split(" ").slice(1).join(" ")||"-"),H(5),ft(r.user.birthDate||"-"),H(5),ft(r.user.gender||"-"),H(5),ft(r.user.address||"-"),H(5),ft(r.user.city||"-"),H(5),ft(r.user.provincia||"-"),H(5),ft(r.user.cap||"-"),H(8),ae("value",r.user.subscriptionEnd||""),H(5),ft(r.user.personalNotes||""),H(6),ae("ngIf",r.filteredCards.length),H(2),ae("ngIf",r.filteredCards.length>0)("ngIfElse",t),H(3),ae("ngIf",r.showDeleteModal),H(),ae("ngIf",r.showDeleteModal),H(),ae("ngIf",r.showEditModal),H(),ae("ngIf",r.showEditModal)}}function Fue(n,e){n&1&&(b(0,"p"),j(1,"Utente non trovato"),A())}var Qz=(()=>{let e=class e{constructor(r,i,o,s){this.route=r,this.router=i,this.pdfSchedaService=o,this.authService=s,this.firestore=Te(uo),this.imageService=Te(Im),this.userId="",this.nome="",this.cognome="",this.showEditModal=!1,this.showDeleteModal=!1,this.editForm={},this.avatarLoading=!1,this.today=new Date().toISOString().substring(0,10),this.filterExpiredOnly=!1,this.showShareMenu=!1,this.publicShareUrl="",this.selectedCardIndex=null}ngOnInit(){this.route.paramMap.subscribe(r=>{let i=r.get("id");i&&(this.userId=i,this.getUser())})}ngOnDestroy(){this.userSub?.unsubscribe()}getUser(){if(!this.userId)return;let r=Ur(this.firestore,`users/${this.userId}`);this.userSub?.unsubscribe(),this.userSub=a9(r).subscribe(i=>{if(!i)return;let o=Rt(Oe({},i),{id:this.userId});Array.isArray(o.cards)&&(o.cards=o.cards.sort((s,a)=>{let c=this.parseItDateTime(s.date,s.time);return(this.parseItDateTime(a.date,a.time)?.getTime()||0)-(c?.getTime()||0)})),this.user=o})}parseItDateTime(r,i){if(!r)return;let o=r.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!o)return;let s=Number(o[1]),a=Number(o[2])-1,c=Number(o[3]),l=0,u=0;if(i){let h=i.match(/^(\d{2}):(\d{2})/);h&&(l=Number(h[1]),u=Number(h[2]))}return new Date(c,a,s,l,u)}isExpired(r){return r?r<=this.today:!1}updateSubscriptionEnd(r){return te(this,null,function*(){if(this.user?.id)try{yield this.authService.ensureSignedIn();let i=Ur(this.firestore,`users/${this.user.id}`);yield gl(i,{subscriptionEnd:r||""})}catch{alert("Errore durante l\u2019aggiornamento.")}})}deleteCard(r){return te(this,null,function*(){if(!this.user||!this.user.id)return;let i=[...this.user.cards||[]];i.splice(r,1);let o=Ur(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield gl(o,{cards:i})}catch{}})}openEditModal(){if(!this.user)return;this.editForm=Oe({},this.user);let r=(this.user.name||"").trim().split(" ");this.nome=r[0]||"",this.cognome=r.slice(1).join(" ")||"",this.showEditModal=!0}closeEditModal(){this.showEditModal=!1}onAvatarChange(r){return te(this,null,function*(){let i=r.target.files?.[0];if(!i)return;this.avatarLoading=!0;let o=yield this.imageService.compressAndConvertToBase64(i,1e3,256);this.editForm.avatarUrl=o,this.avatarLoading=!1})}triggerAvatarInput(r){r.click()}saveEditModal(){return te(this,null,function*(){if(!this.user?.id)return;let r=`${this.nome} ${this.cognome}`.trim(),i=Rt(Oe({},this.editForm),{name:r});delete i.avatarFile;try{yield this.authService.ensureSignedIn(),yield gl(Ur(this.firestore,`users/${this.user.id}`),i),this.closeEditModal()}catch{alert("Errore aggiornamento.")}})}printCard(r){return te(this,null,function*(){if(!this.user?.cards?.[r])return;let i=this.user.cards[r];if(i.pdfBase64){let o=atob(i.pdfBase64),s=new Array(o.length);for(let c=0;c<o.length;c++)s[c]=o.charCodeAt(c);let a=new Blob([new Uint8Array(s)],{type:"application/pdf"});window.open(URL.createObjectURL(a),"_blank");return}try{yield this.pdfSchedaService.buildAndSavePdf(i,this.user)}catch{alert("Errore stampa PDF")}})}get filteredCards(){return this.user?.cards||[]}deleteUserCustom(){return te(this,null,function*(){if(this.user?.id)try{yield this.authService.ensureSignedIn(),yield Kd(Ur(this.firestore,`users/${this.user.id}`)),this.router.navigate(["/anagrafica/list"])}catch{}})}openDeleteModal(){this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1}};e.\u0275fac=function(i){return new(i||e)(tt(Ws),tt(Tr),tt(JC),tt(Mg))},e.\u0275cmp=Kn({type:e,selectors:[["app-anagrafica-detail"]],standalone:!1,decls:6,vars:2,consts:[["notfound",""],["schedeVuote",""],["emptyAvatar",""],["avatarInput",""],[1,"page","anagrafica-detail"],[4,"ngIf","ngIfElse"],[1,"user-detail-header"],[1,"user-avatar-big"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"user-basic-info"],[1,"user-row-top"],[1,"user-detail-name"],[1,"user-detail-email"],[1,"user-detail-phone"],["class","badge badge-danger","style","margin-left:8px; background:#ffdede; color:#d32f2f; border-radius:6px; padding:0 8px;",4,"ngIf"],[1,"status-date"],[1,"user-status-label",3,"ngClass"],[1,"user-detail-signup-date"],[1,"user-detail-actions"],[1,"btn",3,"click"],[1,"btn","outline",3,"click"],[1,"user-detail-content"],[1,"user-detail-col"],[1,"user-detail-section"],[1,"personal-info-row"],["type","date",1,"gestabbonamento-date",2,"background","#fff","border","none","outline","none","font-size","1rem","color","#195089",3,"change","value"],[1,"note-box"],[1,"user-detail-col","user-detail-col-wide"],[1,"schede-header"],["class","schede-count",4,"ngIf"],[1,"scheda-box"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-confirm-delete",4,"ngIf"],["class","modal-edit-profilo",4,"ngIf"],[3,"src","alt"],[1,"material-icons","avatar-placeholder-big",2,"font-size","72px","border-radius","50%","background","#f4f4f4","color","#bbb"],[1,"badge","badge-danger",2,"margin-left","8px","background","#ffdede","color","#d32f2f","border-radius","6px","padding","0 8px"],[1,"schede-count"],["class","scheda-row",4,"ngFor","ngForOf"],[1,"scheda-row"],[1,"scheda-info-flex","scheda-info",2,"flex-direction","row","align-items","center","gap","10px"],[1,"material-icons","scheda-icon"],[1,"scheda-date",2,"font-weight","600"],[1,"scheda-actions-inline"],["title","Stampa PDF",1,"btn","small",3,"click"],[1,"material-icons","small-icon"],["title","Elimina",1,"btn","small","outline",3,"click"],[1,"scheda-empty"],[1,"modal-backdrop",3,"click"],[1,"modal-confirm-delete"],[1,"modal-confirm-content",3,"click"],[1,"modal-confirm-actions"],[1,"btn","danger",3,"click"],[1,"modal-edit-profilo"],["autocomplete","off",3,"ngSubmit","click"],[1,"modal-edit-flex"],[1,"modal-avatar-box",3,"click"],["type","file","accept","image/*","hidden","",3,"change"],["class","avatar-loader","style","margin-left:15px;color:#888;",4,"ngIf"],[1,"modal-fields-note-wrap"],[1,"modal-fields-grid"],["type","text","name","nome","required","",3,"ngModelChange","ngModel"],["type","text","name","cognome","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","name","phone",3,"ngModelChange","ngModel"],["type","date","name","birthDate",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Maschio"],["value","Femmina"],["value","Altro"],["type","text","name","address",3,"ngModelChange","ngModel"],["type","text","name","city",3,"ngModelChange","ngModel"],["type","text","name","provincia",3,"ngModelChange","ngModel"],["type","text","name","cap",3,"ngModelChange","ngModel"],["name","status",3,"ngModelChange","ngModel"],["value","Attivo"],["value","Inattivo"],[1,"modal-field-note-row"],["name","personalNotes","rows","4",3,"ngModelChange","ngModel"],[1,"modal-edit-actions"],["type","submit",1,"btn"],["type","button",1,"btn","outline",3,"click"],["alt","Avatar",1,"avatar-img-preview",2,"width","72px","height","72px","border-radius","50%","object-fit","cover","cursor","pointer","box-shadow","0 0 8px #eee",3,"src"],[1,"material-icons",2,"font-size","60px","width","72px","height","72px","border-radius","50%","background","#f4f4f4","color","#9b9b9b","display","inline-flex","align-items","center","justify-content","center","cursor","pointer"],[1,"avatar-loader",2,"margin-left","15px","color","#888"]],template:function(i,o){if(i&1&&(b(0,"div",4)(1,"h2"),j(2,"Cliente"),A(),Qe(3,Oue,97,29,"ng-container",5)(4,Fue,2,0,"ng-template",null,0,ao),A()),i&2){let s=yi(5);H(3),ae("ngIf",o.user)("ngIfElse",s)}},dependencies:[Qf,Gi,Fi,fg,Zc,Xc,Co,Ma,vs,dg,Xf,Qo,Zf],styles:[".page.anagrafica-detail[_ngcontent-%COMP%]{max-width:1160px;margin:32px auto;padding:24px 20px 32px;background:#f8fafc;border-radius:16px;box-shadow:0 5px 35px #d3dbe925}h2[_ngcontent-%COMP%]{font-size:1.54rem;font-weight:600;margin-bottom:28px}.user-detail-header[_ngcontent-%COMP%]{display:flex;gap:26px;align-items:flex-start;background:#fff;border-radius:14px;margin-bottom:28px;box-shadow:0 2px 12px #c7d5e12a;padding:22px 28px 15px 22px}.user-avatar-big[_ngcontent-%COMP%], .modal-avatar-box[_ngcontent-%COMP%]{width:96px;height:96px;border-radius:50%;background:#e9f2fb;display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;cursor:pointer}.user-avatar-big[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .modal-avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:94px;height:94px;border-radius:50%;object-fit:cover}.avatar-placeholder-big[_ngcontent-%COMP%]{font-size:58px;color:#bdcbe1}.user-basic-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:flex-start}.user-row-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:15px}.user-detail-name[_ngcontent-%COMP%]{font-size:1.19rem;font-weight:700;color:#132c4c}.user-detail-email[_ngcontent-%COMP%]{color:#577296;font-size:1rem;margin-top:7px}.user-detail-phone[_ngcontent-%COMP%]{font-size:.98rem;color:#3f4760;margin-top:6px}.status-date[_ngcontent-%COMP%]{text-align:right}.user-status-label[_ngcontent-%COMP%]{display:inline-block;background:#e8faee;color:#1cb164;font-weight:600;border-radius:7px;padding:6px 22px;font-size:1.06rem;min-width:74px;text-align:center;margin-bottom:5px}.user-status-label.inactive[_ngcontent-%COMP%]{color:#e76c6c;background:#fde8e8}.user-detail-signup-date[_ngcontent-%COMP%]{color:#7b90ad;font-size:.96rem;margin-top:7px}.user-detail-actions[_ngcontent-%COMP%]{margin-top:14px}.btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;padding:8px 14px;border-radius:6px;margin-right:9px;font-size:1rem;font-weight:500;cursor:pointer;transition:background .18s;box-shadow:0 2px 6px #365fd214}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{background:#1742b0}.btn.outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #cbd8e6;color:#2563eb}.btn.small[_ngcontent-%COMP%]{font-size:.97rem;padding:7px 10px;margin:0;display:flex;align-items:center;justify-content:center;min-width:38px;height:38px}.btn.tiny[_ngcontent-%COMP%]{font-size:.82rem;padding:6px 10px;margin:0}.btn.danger[_ngcontent-%COMP%]{background:#ee4555;color:#fff;border:none}.btn.danger[_ngcontent-%COMP%]:hover, .btn.danger[_ngcontent-%COMP%]:focus{background:#ad1125}.btn.share[_ngcontent-%COMP%]{background:#e6f0ff;color:#1742b0;border:1px solid #bed1f5}.btn.share[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.user-detail-content[_ngcontent-%COMP%]{display:flex;gap:30px;margin-top:16px}.user-detail-col[_ngcontent-%COMP%]{flex:1.1;min-width:270px;display:flex;flex-direction:column;gap:28px}.user-detail-col-wide[_ngcontent-%COMP%]{flex:2}.user-detail-section[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 1.5px 6px #d7dbe333;padding:18px 20px 19px 22px;margin-bottom:4px}.user-detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.09rem;font-weight:600;margin-bottom:18px}.personal-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.01rem;padding:2.5px 0;color:#495879;border-bottom:1px solid #f1f5fa}.personal-info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.personal-info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#253157;font-weight:500}.note-box[_ngcontent-%COMP%]{background:#f6fbff;border:1px solid #e1e8ee;border-radius:7px;color:#6d7c96;font-size:.99rem;padding:11px 15px;min-height:54px;margin-bottom:2px}.schede-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:8px}.schede-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.schede-count[_ngcontent-%COMP%]{color:#607997;font-size:.95rem}.scheda-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:13px}.scheda-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:15px;background:#fafdfe;border:1px solid #c8e8fd;border-radius:10px;padding:12px 16px}.scheda-info-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.scheda-icon[_ngcontent-%COMP%]{color:#2563eb;font-size:28px;flex-shrink:0}.scheda-date[_ngcontent-%COMP%]{font-size:.97rem;color:#195089;font-weight:600}.scheda-actions-inline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-left:auto}.scheda-empty[_ngcontent-%COMP%]{background:#f6fbff;border:1px dashed #cbd8e6;border-radius:8px;padding:14px 12px;color:#607997;text-align:center}.share-inline[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:14px;background:#f4f9ff;border:1px solid #cfe2ff;border-radius:10px;padding:12px}.share-inline-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.share-url-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.share-url-input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;border-radius:8px;border:1px solid #cfe2ff;font-size:.92rem;color:#15375e;background:#fff}.share-buttons-row[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.share-inline-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:#17334b44}.modal-confirm-delete[_ngcontent-%COMP%]{position:fixed;z-index:1050;top:50%;left:50%;transform:translate(-50%,-50%);min-width:340px;max-width:95vw;background:#fff;border-radius:14px;box-shadow:0 8px 44px #0d1d3325;padding:32px 34px 22px;display:flex;flex-direction:column;align-items:stretch}.modal-confirm-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.modal-confirm-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.12rem;margin-bottom:22px;text-align:center;color:#18325a}.modal-confirm-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:22px}.modal-edit-profilo[_ngcontent-%COMP%]{position:fixed;z-index:1010;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:18px;box-shadow:0 10px 40px #1d2c4522;min-width:650px;max-width:980px;padding:32px 34px 22px 32px;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalpop .18s cubic-bezier(.32,1.56,.66,1) 1}@keyframes _ngcontent-%COMP%_modalpop{0%{transform:translate(-50%,-56%) scale(.98)}to{transform:translate(-50%,-50%) scale(1)}}.modal-edit-profilo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;margin-bottom:18px}.modal-edit-flex[_ngcontent-%COMP%]{display:flex;gap:32px;align-items:flex-start}.modal-avatar-box[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;margin-right:32px;margin-top:7px;cursor:pointer;width:88px;height:88px;border-radius:50%;box-shadow:0 2px 9px #2463eb0f;background:#f8fafc}.modal-avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2.5px solid #e0e5f7}.modal-fields-note-wrap[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.modal-fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px 20px}.modal-fields-grid[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.97rem;color:#143349;gap:5px}.modal-fields-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-fields-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 10px;border-radius:7px;border:1.3px solid #dce1eb;background:#f8fafc;color:#102039;font-size:1rem}.modal-fields-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-fields-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-field-note-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:1.3px solid #2563eb;background:#f6faff}.modal-field-note-row[_ngcontent-%COMP%]{grid-column:1/-1;margin-top:18px;display:flex;flex-direction:column}.modal-field-note-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.99rem;color:#143349}.modal-field-note-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:92px;resize:vertical;padding:10px;border-radius:8px;border:1.2px solid #dce1eb;background:#f8fafc;color:#102039;font-size:1rem}.modal-edit-actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end;gap:14px}.small-icon[_ngcontent-%COMP%]{font-size:20px!important;vertical-align:middle;margin-right:0!important}@media (max-width: 900px){.modal-edit-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.modal-avatar-box[_ngcontent-%COMP%]{margin:0 auto 20px}.modal-fields-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pdf-preview[_ngcontent-%COMP%]{width:100%;height:360px;border:1px solid #ddd;border-radius:6px}.attach-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-start;margin-bottom:8px}.attach-area[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{color:#586b7a;font-size:.86rem}.error[_ngcontent-%COMP%]{color:#c62828;margin-bottom:6px}.share-btn[_ngcontent-%COMP%]{background:#eef2ff!important;color:#4f46e5!important;border:1px solid #c7d2fe!important}.share-btn[_ngcontent-%COMP%]:hover{background:#4f46e5!important;color:#fff!important}.modal-share[_ngcontent-%COMP%]{position:fixed;z-index:1100;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:18px;padding:24px;width:90%;max-width:380px;box-shadow:0 10px 40px #00000026;animation:_ngcontent-%COMP%_modalpop .2s ease-out}.modal-share-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.modal-share[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.modal-share[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.92rem;color:#64748b;margin-bottom:20px}.share-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px}.share-opt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:15px;border-radius:12px;border:1px solid #f1f5f9;background:#f8fafc;cursor:pointer;transition:all .2s}.share-opt[_ngcontent-%COMP%]:hover{background:#f1f5f9;transform:translateY(-2px)}.share-opt[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:28px}.whatsapp[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#22c55e}.telegram[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#0ea5e9}.email[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#f43f5e}.native[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#6366f1}.share-link-copy[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#f1f5f9;padding:8px 12px;border-radius:8px;margin-bottom:20px}.share-link-copy[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;font-size:.85rem;color:#475569;outline:none}.full-width[_ngcontent-%COMP%]{width:100%}.close-icon[_ngcontent-%COMP%]{cursor:pointer;color:#94a3b8}"]});let n=e;return n})();function Lue(n,e){if(n&1&&(b(0,"div",46),j(1),A()),n&2){let t=ee();H(),Dr(" ",t.savedMsgText,`
`)}}function Vue(n,e){if(n&1&&ht(0,"img",47),n&2){let t=ee();ae("src",t.cliente==null?null:t.cliente.avatarUrl,ur)}}function jue(n,e){n&1&&(b(0,"div",48),j(1,"\u{1F464}"),A())}function Bue(n,e){n&1&&(ri(0),Sr(),b(1,"svg",49),ht(2,"rect",50),b(3,"g"),ht(4,"rect",51)(5,"circle",52)(6,"path",53),A()(),ii())}function Uue(n,e){if(n&1&&ht(0,"img",54),n&2){let t=ee();ae("src",t.logoPreviewUrl,ur)}}function zue(n,e){if(n&1){let t=_t();b(0,"div",58),Se("click",function(){pe(t);let i=ee().index,o=ee();return ge(o.setGiorno(i))})("dblclick",function(){pe(t);let i=ee().$implicit,o=ee();return ge(o.enableTabEdit(i))}),j(1),A()}if(n&2){let t=ee().$implicit;H(),ft(t.nome)}}function que(n,e){if(n&1){let t=_t();b(0,"input",59),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit;return st(o.nome,i)||(o.nome=i),ge(i)}),Se("blur",function(){pe(t);let i=ee().$implicit,o=ee();return ge(o.disableTabEdit(i))})("keydown.enter",function(){pe(t);let i=ee().$implicit,o=ee();return ge(o.disableTabEdit(i))}),A()}if(n&2){let t=ee().$implicit;it("ngModel",t.nome)}}function Hue(n,e){if(n&1&&(b(0,"div",55),Qe(1,zue,2,1,"div",56)(2,que,1,1,"input",57),A()),n&2){let t=e.$implicit,r=e.index,i=ee();so("active",r===i.giornoAttivoIndex),H(),ae("ngIf",!t.editing),H(),ae("ngIf",t.editing)}}function $ue(n,e){if(n&1){let t=_t();b(0,"div",63),Se("click",function(){let i=pe(t).index,o=ee(2);return ge(o.setSettimana(i))}),j(1),A()}if(n&2){let t=e.$implicit,r=e.index,i=ee(2);so("active",r===i.settimanaAttivaIndex),H(),Dr(" ",t.nome," ")}}function Gue(n,e){if(n&1){let t=_t();b(0,"div",60),Qe(1,$ue,2,3,"div",61),b(2,"button",29),Se("click",function(){pe(t);let i=ee();return ge(i.aggiungiSettimanaGiorno())}),j(3,"+ Settimana"),A(),b(4,"button",62),Se("click",function(){pe(t);let i=ee();return ge(i.rimuoviSettimanaGiorno())}),j(5,"\u2013 Settimana"),A()()}if(n&2){let t=ee();H(),ae("ngForOf",t.scheda.giorni[t.giornoAttivoIndex].settimane),H(3),ae("disabled",(t.scheda.giorni[t.giornoAttivoIndex].settimane==null?null:t.scheda.giorni[t.giornoAttivoIndex].settimane.length)===1)}}function Wue(n,e){n&1&&(b(0,"div",64),j(1," Aggiungi un esercizio dalla colonna destra "),A())}function Kue(n,e){if(n&1&&ht(0,"img",80),n&2){let t=ee().$implicit;ae("alt",Yf(t.nome))("src",t.image,ur)}}function Yue(n,e){n&1&&(b(0,"div",81),j(1,"\u{1F3CB}\uFE0F"),A())}function Que(n,e){if(n&1){let t=_t();b(0,"div",82)(1,"label"),j(2,"Serie "),b(3,"input",83),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit,s=ee(2);return st(o.settimaneValori[s.settimanaAttivaIndex].serie,i)||(o.settimaneValori[s.settimanaAttivaIndex].serie=i),ge(i)}),A()(),b(4,"label"),j(5,"Ripetizioni "),b(6,"input",83),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit,s=ee(2);return st(o.settimaneValori[s.settimanaAttivaIndex].ripetizioni,i)||(o.settimaneValori[s.settimanaAttivaIndex].ripetizioni=i),ge(i)}),A()(),b(7,"label"),j(8,"Min "),b(9,"input",83),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit,s=ee(2);return st(o.settimaneValori[s.settimanaAttivaIndex].minuti,i)||(o.settimaneValori[s.settimanaAttivaIndex].minuti=i),ge(i)}),A()(),b(10,"label"),j(11,"Sec "),b(12,"input",83),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit,s=ee(2);return st(o.settimaneValori[s.settimanaAttivaIndex].secondi,i)||(o.settimaneValori[s.settimanaAttivaIndex].secondi=i),ge(i)}),A()(),b(13,"label"),j(14,"Kg "),b(15,"input",84),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit,s=ee(2);return st(o.settimaneValori[s.settimanaAttivaIndex].caricoKg,i)||(o.settimaneValori[s.settimanaAttivaIndex].caricoKg=i),ge(i)}),A()()()}if(n&2){let t=ee().$implicit,r=ee(2);H(3),it("ngModel",t.settimaneValori[r.settimanaAttivaIndex].serie),H(3),it("ngModel",t.settimaneValori[r.settimanaAttivaIndex].ripetizioni),H(3),it("ngModel",t.settimaneValori[r.settimanaAttivaIndex].minuti),H(3),it("ngModel",t.settimaneValori[r.settimanaAttivaIndex].secondi),H(3),it("ngModel",t.settimaneValori[r.settimanaAttivaIndex].caricoKg)}}function Zue(n,e){if(n&1){let t=_t();b(0,"div",82)(1,"label"),j(2,"Serie "),b(3,"input",83),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit;return st(o.settimaneValori[0].serie,i)||(o.settimaneValori[0].serie=i),ge(i)}),A()(),b(4,"label"),j(5,"Ripetizioni "),b(6,"input",83),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit;return st(o.settimaneValori[0].ripetizioni,i)||(o.settimaneValori[0].ripetizioni=i),ge(i)}),A()(),b(7,"label"),j(8,"Min "),b(9,"input",83),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit;return st(o.settimaneValori[0].minuti,i)||(o.settimaneValori[0].minuti=i),ge(i)}),A()(),b(10,"label"),j(11,"Sec "),b(12,"input",83),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit;return st(o.settimaneValori[0].secondi,i)||(o.settimaneValori[0].secondi=i),ge(i)}),A()()()}if(n&2){let t=ee().$implicit;H(3),it("ngModel",t.settimaneValori[0].serie),H(3),it("ngModel",t.settimaneValori[0].ripetizioni),H(3),it("ngModel",t.settimaneValori[0].minuti),H(3),it("ngModel",t.settimaneValori[0].secondi)}}function Xue(n,e){if(n&1){let t=_t();b(0,"textarea",85),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit,s=ee(2);return st(o.settimaneValori[s.settimanaAttivaIndex].note,i)||(o.settimaneValori[s.settimanaAttivaIndex].note=i),ge(i)}),Se("blur",function(){pe(t);let i=ee(3);return ge(i.persistSchedule())}),A()}if(n&2){let t=ee().$implicit,r=ee(2);it("ngModel",t.settimaneValori[r.settimanaAttivaIndex].note)}}function Jue(n,e){if(n&1){let t=_t();b(0,"textarea",85),ot("ngModelChange",function(i){pe(t);let o=ee().$implicit;return st(o.settimaneValori[0].note,i)||(o.settimaneValori[0].note=i),ge(i)}),Se("blur",function(){pe(t);let i=ee(3);return ge(i.persistSchedule())}),A()}if(n&2){let t=ee().$implicit;it("ngModel",t.settimaneValori[0].note)}}function ede(n,e){if(n&1){let t=_t();b(0,"div",67)(1,"div",68)(2,"div",69),Qe(3,Kue,1,3,"img",70)(4,Yue,2,0,"div",71),A(),b(5,"div",72),j(6),A(),b(7,"div",73)(8,"button",74),Se("click",function(){let i=pe(t).index,o=ee(2);return ge(o.moveExerciseUp(i))}),j(9,"\u2191"),A(),b(10,"button",75),Se("click",function(){let i=pe(t).index,o=ee(2);return ge(o.moveExerciseDown(i))}),j(11,"\u2193"),A(),b(12,"button",76),Se("click",function(){let i=pe(t).index,o=ee(2);return ge(o.resetExercise(i))}),j(13,"\u27F3"),A(),b(14,"button",77),Se("click",function(){let i=pe(t).index,o=ee(2);return ge(o.rimuoviEsercizio(i))}),j(15,"\xD7"),A()()(),Qe(16,Que,16,5,"div",78)(17,Zue,13,4,"div",78)(18,Xue,1,1,"textarea",79)(19,Jue,1,1,"textarea",79),A()}if(n&2){let t=e.$implicit,r=e.index,i=ee(2);H(3),ae("ngIf",t.image),H(),ae("ngIf",!t.image),H(2),ft(t.nome),H(2),ae("disabled",i.currentExercisePage*i.pageSize+r===0),H(2),ae("disabled",i.currentExercisePage*i.pageSize+r===i.scheda.giorni[i.giornoAttivoIndex].esercizi.length-1),H(6),ae("ngIf",i.templateType==="profghizztemplate"),H(),ae("ngIf",i.templateType!=="profghizztemplate"),H(),ae("ngIf",i.templateType==="profghizztemplate"),H(),ae("ngIf",i.templateType!=="profghizztemplate")}}function tde(n,e){if(n&1&&(b(0,"div",65),Qe(1,ede,20,9,"div",66),A()),n&2){let t=ee();H(),ae("ngForOf",t.pagedExercises)}}function nde(n,e){if(n&1){let t=_t();b(0,"div",86)(1,"button",87),Se("click",function(){pe(t);let i=ee();return ge(i.goToPrevExercisePage())}),Sr(),b(2,"svg",88),ht(3,"circle",89)(4,"path",90),A()(),Go(),b(5,"span",91),j(6),A(),b(7,"button",87),Se("click",function(){pe(t);let i=ee();return ge(i.goToNextExercisePage())}),Sr(),b(8,"svg",88),ht(9,"circle",89)(10,"path",92),A()()()}if(n&2){let t=ee();H(),ae("disabled",t.currentExercisePage<=0),H(5),ad("",t.currentExercisePage+1," / ",t.totalExercisePages||1),H(),ae("disabled",t.currentExercisePage>=t.totalExercisePages-1)}}function rde(n,e){if(n&1&&(b(0,"option",93),j(1),A()),n&2){let t=e.$implicit;ae("value",t.name),H(),ft(t.name)}}function ide(n,e){if(n&1&&ht(0,"img",80),n&2){let t=ee().$implicit;ae("alt",Yf(t.name))("src",t.image,ur)}}function ode(n,e){n&1&&(b(0,"div",100),j(1,"\u{1F3CB}\uFE0F"),A())}function sde(n,e){if(n&1){let t=_t();b(0,"div",94),Se("click",function(){let i=pe(t).$implicit,o=ee();return ge(o.aggiungiEsercizioAlGiorno(i))}),b(1,"div",95),Qe(2,ide,1,3,"img",70)(3,ode,2,0,"div",96),A(),b(4,"div",97)(5,"div",98),j(6),A(),b(7,"div",99),j(8),A()()()}if(n&2){let t=e.$implicit;H(2),ae("ngIf",t.image),H(),ae("ngIf",!t.image),H(3),ft(t.name),H(2),ft(t.category)}}function ade(n,e){n&1&&(b(0,"div",101),j(1,"Nessun esercizio"),A())}function cde(n,e){if(n&1&&ht(0,"img",80),n&2){let t=ee().$implicit;ae("alt",Yf(t.name))("src",t.avatarUrl,ur)}}function lde(n,e){n&1&&(b(0,"span"),j(1,"\u{1F464}"),A())}function ude(n,e){if(n&1&&(b(0,"div",117),j(1),A()),n&2){let t=ee().$implicit;H(),ft(t.email)}}function dde(n,e){if(n&1){let t=_t();b(0,"div",111),Se("click",function(){let i=pe(t).$implicit,o=ee(2);return ge(o.selectUser(i))}),b(1,"div",112),Qe(2,cde,1,3,"img",70)(3,lde,2,0,"span",15),A(),b(4,"div",113)(5,"div",114),j(6),A(),Qe(7,ude,2,1,"div",115),b(8,"div",116),j(9),A()()()}if(n&2){let t=e.$implicit;H(2),ae("ngIf",t.avatarUrl),H(),ae("ngIf",!t.avatarUrl),H(3),ft(t.name),H(),ae("ngIf",t.email),H(),so("inactive",t.status!=="Attivo"),H(),ft(t.status)}}function fde(n,e){n&1&&(b(0,"div",118),j(1,"Nessun utente"),A())}function hde(n,e){if(n&1){let t=_t();b(0,"div",102)(1,"div",103)(2,"div",104)(3,"div",105),j(4,"Seleziona Cliente"),A(),b(5,"button",106),Se("click",function(){pe(t);let i=ee();return ge(i.closeUserPicker())}),j(6,"\xD7"),A()(),b(7,"input",107),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.userSearch,i)||(o.userSearch=i),ge(i)}),Se("input",function(){pe(t);let i=ee();return ge(i.filterUsers())}),A(),b(8,"div",108),Qe(9,dde,10,7,"div",109),Kc(10,"slice"),Qe(11,fde,2,0,"div",110),A()()()}if(n&2){let t=ee();H(7),it("ngModel",t.userSearch),H(2),ae("ngForOf",Ev(10,3,t.filteredUserList,0,3)),H(2),ae("ngIf",t.filteredUserList.length===0)}}var Zz=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.pdfSchedaService=i,this.authService=o,this.firestore=Te(uo),this.cliente=null,this.scheda={stato:"In preparazione",livello:"Intermedio",durata:"4 Settimane",dataInizio:"",orario:"",giorni:[{nome:"Giorno 1",esercizi:[],settimane:[{nome:"Settimana 1"}]}],templateType:"fitnessanddance"},this.logoPreviewUrl=null,this.tempLogoFile=null,this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0,this.esercizi=[],this.categorie=[],this.eserciziFiltrati=[],this.searchTerm="",this.filterCategoria="",this.allUsers=[],this.filteredUserList=[],this.userSearch="",this.showUserPicker=!1,this.oggi=new Date().toISOString().split("T")[0],this.pdfBlobUrl=null,this.currentExercisePage=0,this.pageSize=3,this.showSavedMsg=!1,this.savedMsgText="Scheda salvata",this.templateType="fitnessanddance"}get pagedExercises(){let r=this.scheda.giorni[this.giornoAttivoIndex].esercizi,i=this.currentExercisePage*this.pageSize;return r.slice(i,i+this.pageSize)}get totalExercisePages(){let r=this.scheda.giorni[this.giornoAttivoIndex].esercizi;return Math.max(1,Math.ceil(r.length/this.pageSize))}goToPrevExercisePage(){this.currentExercisePage>0&&this.currentExercisePage--}goToNextExercisePage(){this.currentExercisePage<this.totalExercisePages-1&&this.currentExercisePage++}ngOnInit(){this.initStandard()}initStandard(){return te(this,null,function*(){yield this.loadUsers(),yield this.loadSelectedUser(),yield this.loadExercises(),yield this.loadCategories(),yield this.loadExistingSchedule(),this.filtraEsercizi(),this.filterUsers(),this.scheda.dataInizio||(this.scheda.dataInizio=this.oggi),this.scheda.orario||(this.scheda.orario=this.normalizeTimeToHMS(new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))),this.scheda.templateType=this.templateType,this.scheda.giorni.forEach(r=>{this.templateType==="profghizztemplate"?(!r.settimane||r.settimane.length===0)&&(r.settimane=[{nome:"Settimana 1"}]):delete r.settimane,r.esercizi.forEach(i=>{(!i.settimaneValori||i.settimaneValori.length===0)&&(i.settimaneValori=[this.zeroValues()])})}),this.templateType==="profghizztemplate"&&(this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0)})}onTemplateTypeChange(r){this.templateType=r,this.scheda.templateType=r,r==="profghizztemplate"?(this.scheda.giorni=[{nome:"Giorno 1",esercizi:[],settimane:[{nome:"Settimana 1"}]}],this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0):(this.scheda.giorni=[{nome:"Giorno 1",esercizi:[]}],this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0),this.persistSchedule()}setGiorno(r){this.giornoAttivoIndex=r,this.settimanaAttivaIndex=0,this.currentExercisePage=0}setSettimana(r){let i=this.scheda.giorni[this.giornoAttivoIndex];this.templateType==="profghizztemplate"&&i.settimane&&i.esercizi.forEach(o=>{for(o.settimaneValori=o.settimaneValori||[];o.settimaneValori.length<=r;)o.settimaneValori.push(this.zeroValues())}),this.settimanaAttivaIndex=r}aggiungiGiorno(){let r=this.scheda.giorni.length+1;this.templateType==="profghizztemplate"?this.scheda.giorni.push({nome:"Giorno "+r,esercizi:[],settimane:[{nome:"Settimana 1"}]}):this.scheda.giorni.push({nome:"Giorno "+r,esercizi:[]}),this.giornoAttivoIndex=this.scheda.giorni.length-1,this.settimanaAttivaIndex=0,this.currentExercisePage=0,this.persistSchedule()}rimuoviGiorno(){this.scheda.giorni.length!==1&&(this.scheda.giorni.splice(this.giornoAttivoIndex,1),this.giornoAttivoIndex>=this.scheda.giorni.length&&(this.giornoAttivoIndex=this.scheda.giorni.length-1),this.settimanaAttivaIndex=0,this.currentExercisePage=0,this.persistSchedule())}aggiungiSettimanaGiorno(){if(this.templateType!=="profghizztemplate")return;let r=this.scheda.giorni[this.giornoAttivoIndex].settimane||[];r.push({nome:"Settimana "+(r.length+1)}),this.scheda.giorni[this.giornoAttivoIndex].settimane=r,this.scheda.giorni[this.giornoAttivoIndex].esercizi.forEach(o=>{o.settimaneValori=o.settimaneValori||[],o.settimaneValori.push(this.zeroValues())}),this.settimanaAttivaIndex=r.length-1,this.persistSchedule()}rimuoviSettimanaGiorno(){if(this.templateType!=="profghizztemplate")return;let r=this.scheda.giorni[this.giornoAttivoIndex],i=r.settimane||[];i.length!==1&&(i.splice(this.settimanaAttivaIndex,1),r.esercizi.forEach(o=>{o.settimaneValori?.length>this.settimanaAttivaIndex&&o.settimaneValori.splice(this.settimanaAttivaIndex,1)}),this.settimanaAttivaIndex>=i.length&&(this.settimanaAttivaIndex=i.length-1),r.settimane=i,this.persistSchedule())}loadUsers(){return te(this,null,function*(){let r=Kr(this.firestore,"users"),i=yield hl(r);this.allUsers=i.docs.map(o=>Oe({id:o.id},o.data()))})}loadSelectedUser(){return te(this,null,function*(){this.cliente=this.allUsers[0]||null,this.cliente&&(this.scheda.userId=this.cliente.id)})}loadExercises(){return te(this,null,function*(){let r=Kr(this.firestore,"exercises"),i=yield hl(r);this.esercizi=i.docs.map(o=>Oe({id:o.id},o.data()))})}loadCategories(){return te(this,null,function*(){let r=Kr(this.firestore,"categories"),i=yield hl(r);this.categorie=i.docs.map(o=>Oe({id:o.id,selected:!1},o.data()))})}loadExistingSchedule(){return te(this,null,function*(){if(!this.cliente)return;let r=Kr(this.firestore,"schede"),i=u9(r,d9("userId","==",this.cliente.id),l9("createdAt","asc")),s=(yield hl(i)).docs.map(a=>Oe({id:a.id},a.data()));s.length>0&&(this.scheda=s[s.length-1],this.scheda.giorni.forEach(a=>{this.templateType==="profghizztemplate"?(!a.settimane||a.settimane.length===0)&&(a.settimane=[{nome:"Settimana 1"}]):delete a.settimane,a.esercizi.forEach(c=>{(!c.settimaneValori||c.settimaneValori.length===0)&&(c.settimaneValori=[this.zeroValues()])})}),this.scheda.templateType=this.scheda.templateType||"fitnessanddance",this.templateType=this.scheda.templateType)})}filterUsers(){let r=this.userSearch.toLowerCase().trim();this.filteredUserList=this.allUsers.filter(i=>(i.name||"").toLowerCase().includes(r)||(i.email||"").toLowerCase().includes(r))}openUserPicker(){this.showUserPicker=!0,this.userSearch="",this.filterUsers()}closeUserPicker(){this.showUserPicker=!1}selectUser(r){return te(this,null,function*(){this.cliente=r,this.scheda.userId=r.id,this.closeUserPicker(),yield this.loadExistingSchedule(),this.currentExercisePage=0})}enableTabEdit(r){r.editing=!0,setTimeout(()=>{let i=document.querySelectorAll(".tab-edit"),o=i[i.length-1];o?.focus(),o?.select()},0)}disableTabEdit(r){r.editing=!1,this.persistSchedule()}aggiungiEsercizioAlGiorno(r){let i=this.scheda.giorni[this.giornoAttivoIndex];if(this.templateType==="profghizztemplate"){let o=i.settimane?.length||1;i.esercizi.push({id:r.id,nome:r.name,image:r.image,categoria:r.category,settimaneValori:Array.from({length:o},()=>this.zeroValues())})}else i.esercizi.push({id:r.id,nome:r.name,image:r.image,categoria:r.category,settimaneValori:[this.zeroValues()]});this.persistSchedule()}rimuoviEsercizio(r){this.scheda.giorni[this.giornoAttivoIndex].esercizi.splice(r+this.currentExercisePage*this.pageSize,1),this.currentExercisePage>0&&this.pagedExercises.length===0&&this.goToPrevExercisePage(),this.persistSchedule()}filtraEsercizi(){let r=this.searchTerm.toLowerCase().trim();this.eserciziFiltrati=this.esercizi.filter(i=>{let o=(i.name||"").toLowerCase().includes(r),s=this.filterCategoria?i.category===this.filterCategoria:!0;return o&&s})}salvaScheda(){return te(this,null,function*(){yield this.authService.ensureSignedIn();let r=new Date;this.scheda.orario=this.normalizeTimeToHMS(r.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"})),this.scheda.dataInizio=r.toISOString().split("T")[0],this.scheda.templateType=this.templateType,yield this.persistSchedule();let i=yield this.buildPdfBase64();yield this.appendCardToUser(this.scheda.dataInizio,this.scheda.orario,i),this.showSavedMsg=!0,this.savedMsgText="Scheda salvata",setTimeout(()=>{this.showSavedMsg=!1},2500)})}normalizeTimeToHMS(r){if(!r)return"";let i=r.match(/^(\d{2}):(\d{2})(?::(\d{2}))?$/);if(!i)return r;let o=i[3]??"00";return`${i[1]}:${i[2]}:${o}`}zeroValues(){return{serie:0,ripetizioni:0,minuti:0,secondi:0,caricoKg:0,note:""}}buildPdfBase64(){return te(this,null,function*(){try{return(this.scheda.templateType==="profghizztemplate"?yield this.pdfSchedaService.buildProfGhizzDoc(this.scheda,this.cliente,this.logoPreviewUrl):yield this.pdfSchedaService.buildDoc(this.scheda,this.cliente,this.logoPreviewUrl)).output("datauristring").split(",")[1]||""}catch{return""}})}appendCardToUser(r,i,o){return te(this,null,function*(){if(!this.cliente||!this.scheda)return;yield this.authService.ensureSignedIn();let s=this.computeScheduleTitle(),a=this.formatDateIT(r),c=this.normalizeTimeToHMS(i),l=85e4,u={title:s,date:a||"",time:c};o&&o.length<=l&&(u.pdfBase64=o);let h=Ur(this.firestore,`users/${this.cliente.id}`);try{let m=yield mC(h),x=[...m.exists()&&Array.isArray(m.data().cards)?m.data().cards:[],u];yield gl(h,{cards:x}),this.cliente&&(this.cliente.cards=x)}catch(m){console.error("Error appending card to user",m)}})}computeScheduleTitle(){let r=this.scheda.giorni?.[this.giornoAttivoIndex]?.nome||"Scheda allenamento",i=this.scheda.livello||"",o=this.scheda.stato||"",s=i?`${r} \u2022 ${i}`:r;return o?`${s} \u2022 ${o}`:s}formatDateIT(r){if(!r)return null;let i=r.match(/^(\d{4})-(\d{2})-(\d{2})$/);return i?`${i[3]}/${i[2]}/${i[1]}`:null}persistSchedule(){return te(this,null,function*(){if(!this.cliente)return;yield this.authService.ensureSignedIn();let r=Rt(Oe({},this.scheda),{userId:this.cliente.id,createdAt:Date.now(),templateType:this.templateType});if(this.scheda.id){let i=Ur(this.firestore,`schede/${this.scheda.id}`);try{yield pl(i,r,{merge:!0})}catch(o){console.error("Error updating schedule",o)}}else{let i=Kr(this.firestore,"schede");try{let o=yield cy(i,r);this.scheda.id=o.id}catch(o){console.error("Error creating schedule",o)}}})}apriSchedaPerUser(r){this.router.navigate(["/gestione-schede"],{state:{selectedUserId:r}})}anteprimaPdf(){return te(this,null,function*(){let r;this.scheda.templateType==="profghizztemplate"?r=yield this.pdfSchedaService.buildProfGhizzDoc(this.scheda,this.cliente,this.logoPreviewUrl):r=yield this.pdfSchedaService.buildDoc(this.scheda,this.cliente,this.logoPreviewUrl);let i=r.output("blob");if(this.pdfBlobUrl)try{URL.revokeObjectURL(this.pdfBlobUrl)}catch{}this.pdfBlobUrl=URL.createObjectURL(i),window.open(this.pdfBlobUrl,"_blank")})}moveExerciseUp(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;o!==0&&([i[o-1],i[o]]=[i[o],i[o-1]],this.persistSchedule())}moveExerciseDown(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;o!==i.length-1&&([i[o+1],i[o]]=[i[o],i[o+1]],this.persistSchedule())}resetExercise(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;if(!i[o]?.settimaneValori)return;let s=this.templateType==="profghizztemplate"?this.settimanaAttivaIndex:0;i[o].settimaneValori[s]=this.zeroValues(),this.persistSchedule()}onLogoSelect(r){let i=r.target;if(!i.files||!i.files[0])return;let o=i.files[0];this.tempLogoFile=o;let s=new FileReader;s.onload=()=>{this.logoPreviewUrl=s.result},s.readAsDataURL(o)}};e.\u0275fac=function(i){return new(i||e)(tt(Tr),tt(JC),tt(Mg))},e.\u0275cmp=Kn({type:e,selectors:[["app-gestione-schede"]],standalone:!1,decls:82,vars:31,consts:[["class","save-toast",4,"ngIf"],[1,"schede-page"],[1,"col-left","section-box"],[1,"avatar-block",3,"click"],["alt","Cliente",3,"src",4,"ngIf"],["class","avatar-placeholder",4,"ngIf"],[1,"cliente-name"],[1,"cliente-info"],[1,"info-row"],[1,"label"],[3,"ngModelChange","ngModel"],["type","text","placeholder","es. 8 Settimane",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"logo-uploader"],["for","logoInput",1,"logo-upload-box"],[4,"ngIf"],["alt","Logo anteprima","class","logo-preview-img",3,"src",4,"ngIf"],["type","file","id","logoInput","accept","image/*","hidden","",3,"change"],[1,"left-actions"],[1,"btn","primary",3,"click"],[1,"btn","outline",3,"click"],[1,"col-center","section-box"],[1,"row-template-select-compact","small"],["for","templateTypeSel",1,"label-template-type-compact"],["id","templateTypeSel",1,"select-template-type-compact",3,"ngModelChange","change","ngModel"],["value","fitnessanddance"],["value","profghizztemplate"],[1,"giorni-tabs"],["class","tab-item",3,"active",4,"ngFor","ngForOf"],[1,"tab-add",3,"click"],["title","Rimuovi giorno",1,"tab-remove",3,"click","disabled"],["class","settimane-tabs",4,"ngIf"],[1,"giorno-contenuto"],["class","empty-drop",4,"ngIf"],["class","exercise-list",4,"ngIf"],["class","exercise-pagination-mini",4,"ngIf"],[1,"col-right","section-box"],[1,"search-box"],["type","text","placeholder","Cerca esercizi...",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"esercizi-scroll"],["class","big-ex-card",3,"click",4,"ngFor","ngForOf"],["class","empty-right",4,"ngIf"],["class","user-picker-backdrop",4,"ngIf"],[1,"save-toast"],["alt","Cliente",3,"src"],[1,"avatar-placeholder"],["width","75","height","75","viewBox","0 0 75 75","fill","none"],["x","3","y","3","width","69","height","69","rx","16","fill","#F4F8FB","stroke","#b9cddd","stroke-width","2.3"],["x","17","y","23","width","41","height","30","rx","5","fill","#E8F0FA","stroke","#b9cddd","stroke-width","1.6"],["cx","29","cy","37","r","5.5","fill","#b9cddd"],["d","M19 53l12-12c2-2 5.6-2 7.6 0l15 15c1.9 1.9 5 1.6 6.8-.4l8-10.5","stroke","#2563eb","stroke-width","2","fill","none"],["alt","Logo anteprima",1,"logo-preview-img",3,"src"],[1,"tab-item"],["class","tab-label",3,"click","dblclick",4,"ngIf"],["class","tab-edit",3,"ngModel","ngModelChange","blur","keydown.enter",4,"ngIf"],[1,"tab-label",3,"click","dblclick"],[1,"tab-edit",3,"ngModelChange","blur","keydown.enter","ngModel"],[1,"settimane-tabs"],["class","tab-item",3,"active","click",4,"ngFor","ngForOf"],["title","Rimuovi settimana",1,"tab-remove",3,"click","disabled"],[1,"tab-item",3,"click"],[1,"empty-drop"],[1,"exercise-list"],["class","exercise-card",4,"ngFor","ngForOf"],[1,"exercise-card"],[1,"ex-top"],[1,"ex-img"],[3,"src","alt",4,"ngIf"],["class","ex-placeholder",4,"ngIf"],[1,"ex-title"],[1,"ex-controls"],["title","Sposta su",1,"btn-icon","move",3,"click","disabled"],["title","Sposta gi\xF9",1,"btn-icon","move",3,"click","disabled"],["title","Reset valori",1,"btn-icon","reset",3,"click"],[1,"btn-icon","remove",3,"click"],["class","ex-fields",4,"ngIf"],["class","ex-note","rows","2","placeholder","Note",3,"ngModel","ngModelChange","blur",4,"ngIf"],[3,"src","alt"],[1,"ex-placeholder"],[1,"ex-fields"],["type","number","min","0",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.1",3,"ngModelChange","ngModel"],["rows","2","placeholder","Note",1,"ex-note",3,"ngModelChange","blur","ngModel"],[1,"exercise-pagination-mini"],[1,"page-arrow-mini",3,"click","disabled"],["viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","transparent"],["d","M15.5 19 9.5 12l6-7","fill","none","stroke","white","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[1,"page-indicator-mini"],["d","M8.5 5 14.5 12l-6 7","fill","none","stroke","white","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[3,"value"],[1,"big-ex-card",3,"click"],[1,"big-img"],["class","big-placeholder",4,"ngIf"],[1,"big-info"],[1,"big-name"],[1,"big-cat"],[1,"big-placeholder"],[1,"empty-right"],[1,"user-picker-backdrop"],[1,"user-picker-modal"],[1,"picker-header"],[1,"picker-title"],[1,"picker-close",3,"click"],["type","text","placeholder","Cerca nome o email...",1,"picker-search",3,"ngModelChange","input","ngModel"],[1,"picker-list"],["class","picker-item",3,"click",4,"ngFor","ngForOf"],["class","picker-empty",4,"ngIf"],[1,"picker-item",3,"click"],[1,"pi-avatar"],[1,"pi-data"],[1,"pi-name"],["class","pi-email",4,"ngIf"],[1,"pi-status"],[1,"pi-email"],[1,"picker-empty"]],template:function(i,o){i&1&&(Qe(0,Lue,2,1,"div",0),b(1,"div",1)(2,"aside",2)(3,"div",3),Se("click",function(){return o.openUserPicker()}),Qe(4,Vue,1,1,"img",4)(5,jue,2,0,"div",5),A(),b(6,"div",6),j(7),A(),b(8,"div",7)(9,"div",8)(10,"span",9),j(11,"Stato"),A(),b(12,"select",10),ot("ngModelChange",function(a){return st(o.scheda.stato,a)||(o.scheda.stato=a),a}),b(13,"option"),j(14,"In preparazione"),A(),b(15,"option"),j(16,"Attiva"),A(),b(17,"option"),j(18,"Completata"),A(),b(19,"option"),j(20,"Sospesa"),A()()(),b(21,"div",8)(22,"span",9),j(23,"Livello"),A(),b(24,"select",10),ot("ngModelChange",function(a){return st(o.scheda.livello,a)||(o.scheda.livello=a),a}),b(25,"option"),j(26,"Principiante"),A(),b(27,"option"),j(28,"Intermedio"),A(),b(29,"option"),j(30,"Avanzato"),A()()(),b(31,"div",8)(32,"span",9),j(33,"Durata"),A(),b(34,"input",11),ot("ngModelChange",function(a){return st(o.scheda.durata,a)||(o.scheda.durata=a),a}),A()(),b(35,"div",8)(36,"span",9),j(37,"Inizio"),A(),b(38,"input",12),ot("ngModelChange",function(a){return st(o.scheda.dataInizio,a)||(o.scheda.dataInizio=a),a}),A()()(),b(39,"div",13)(40,"label",14),Qe(41,Bue,7,0,"ng-container",15)(42,Uue,1,1,"img",16),b(43,"input",17),Se("change",function(a){return o.onLogoSelect(a)}),A()()(),b(44,"div",18)(45,"button",19),Se("click",function(){return o.salvaScheda()}),j(46,"Salva Scheda"),A(),b(47,"button",20),Se("click",function(){return o.anteprimaPdf()}),j(48,"Stampa PDF"),A()()(),b(49,"section",21)(50,"div",22)(51,"label",23),j(52,"Template"),A(),b(53,"select",24),ot("ngModelChange",function(a){return st(o.templateType,a)||(o.templateType=a),a}),Se("change",function(){return o.onTemplateTypeChange(o.templateType)}),b(54,"option",25),j(55,"Palestra"),A(),b(56,"option",26),j(57,"Atleta"),A()()(),b(58,"div",27),Qe(59,Hue,3,4,"div",28),b(60,"button",29),Se("click",function(){return o.aggiungiGiorno()}),j(61,"+ Giorno"),A(),b(62,"button",30),Se("click",function(){return o.rimuoviGiorno()}),j(63,"\u2013 Giorno"),A()(),Qe(64,Gue,6,2,"div",31),b(65,"div",32),Qe(66,Wue,2,0,"div",33)(67,tde,2,1,"div",34)(68,nde,11,4,"div",35),A()(),b(69,"aside",36)(70,"div",37)(71,"input",38),ot("ngModelChange",function(a){return st(o.searchTerm,a)||(o.searchTerm=a),a}),Se("input",function(){return o.filtraEsercizi()}),A(),b(72,"select",39),ot("ngModelChange",function(a){return st(o.filterCategoria,a)||(o.filterCategoria=a),a}),Se("change",function(){return o.filtraEsercizi()}),b(73,"option",40),j(74,"Tutte le categorie"),A(),Qe(75,rde,2,2,"option",41),Kc(76,"slice"),A()(),b(77,"div",42),Qe(78,sde,9,4,"div",43),Kc(79,"slice"),Qe(80,ade,2,0,"div",44),A()()(),Qe(81,hde,12,7,"div",45)),i&2&&(ae("ngIf",o.showSavedMsg),H(4),ae("ngIf",o.cliente==null?null:o.cliente.avatarUrl),H(),ae("ngIf",!(o.cliente!=null&&o.cliente.avatarUrl)),H(2),ft((o.cliente==null?null:o.cliente.name)||"Seleziona cliente"),H(5),it("ngModel",o.scheda.stato),H(12),it("ngModel",o.scheda.livello),H(10),it("ngModel",o.scheda.durata),H(4),it("ngModel",o.scheda.dataInizio),H(3),ae("ngIf",!o.logoPreviewUrl),H(),ae("ngIf",o.logoPreviewUrl),H(11),it("ngModel",o.templateType),H(6),ae("ngForOf",o.scheda.giorni),H(3),ae("disabled",o.scheda.giorni.length===1),H(2),ae("ngIf",o.templateType==="profghizztemplate"&&(o.scheda.giorni[o.giornoAttivoIndex]==null?null:o.scheda.giorni[o.giornoAttivoIndex].settimane)),H(2),ae("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length===0),H(),ae("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length>0),H(),ae("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length>0),H(3),it("ngModel",o.searchTerm),H(),it("ngModel",o.filterCategoria),H(3),ae("ngForOf",Ev(76,23,o.categorie,0,3)),H(3),ae("ngForOf",Ev(79,27,o.eserciziFiltrati,0,3)),H(2),ae("ngIf",o.eserciziFiltrati.length===0),H(),ae("ngIf",o.showUserPicker))},dependencies:[Gi,Fi,Zc,Xc,Co,iD,Ma,vs,oD,Qo,R5],styles:["body[_ngcontent-%COMP%]{background:#f5f8fc;color:#173453;font-family:Segoe UI,Arial,sans-serif}.schede-page[_ngcontent-%COMP%]{display:grid;grid-template-columns:280px 1fr 320px;gap:26px;padding:26px 30px 40px;background:#f5f8fc;min-height:100vh;box-sizing:border-box}.save-toast[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:24px;background:#1cb164;color:#fff;font-weight:700;border-radius:10px;padding:10px 14px;box-shadow:0 6px 18px #1cb16447;z-index:3000;letter-spacing:.02em}.section-box[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:18px 16px 20px;box-shadow:0 3px 14px #193c6e14;display:flex;flex-direction:column;gap:18px}.bordered[_ngcontent-%COMP%]{border-radius:8px;background:#f9fbfe}.col-left[_ngcontent-%COMP%], .col-center[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.col-left[_ngcontent-%COMP%]{align-items:center;background:#183d81;border-radius:14px}.col-left[_ngcontent-%COMP%]   .section-box[_ngcontent-%COMP%], .col-left.section-box[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.col-left[_ngcontent-%COMP%]   .cliente-name[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .bordered[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{background:#f5f9ff;color:#183d81;border:none}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]:hover{background:#1d4fb8;color:#fff}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#194065}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.outline[_ngcontent-%COMP%]:hover{background:#dbe9fb}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.share[_ngcontent-%COMP%]{background:#fbf7ef;color:#965d00;border:1px solid #e9d7b2}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.share[_ngcontent-%COMP%]:hover{background:#f6e9cf}.col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;background:#eef6ff}.avatar-block[_ngcontent-%COMP%]{width:92px;height:92px;border-radius:20px;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer;background:#eef3fb;border:none;transition:box-shadow .15s,transform .15s,border-color .15s;margin-left:auto;margin-right:auto}.avatar-block[_ngcontent-%COMP%]:hover{box-shadow:0 4px 14px #2563eb59;transform:translateY(-3px)}.avatar-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.avatar-placeholder[_ngcontent-%COMP%]{font-size:40px;opacity:.55}.cliente-name[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem;font-weight:800;letter-spacing:.03em;margin-left:auto;margin-right:auto;text-align:center;display:block;border:none}.cliente-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:14px 12px;border:none}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:70px;font-size:.68rem;font-weight:700;color:#173453}.info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{flex:1;padding:6px 8px;font-size:.7rem;background:#f1f6fb;font-weight:600;color:#173453;outline:none;transition:background-color .15s;border:none}.info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;box-sizing:border-box}.logo-uploader[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:18px}.logo-upload-box[_ngcontent-%COMP%]{width:110px;height:110px;border:2px dashed #b9cddd;border-radius:18px;background:#f8fafc;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:border-color .15s,background .15s;text-align:center}.logo-upload-box[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#f1faff}.logo-upload-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.logo-preview-img[_ngcontent-%COMP%]{width:104px;height:104px;object-fit:contain;border-radius:12px;display:block}.left-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.btn[_ngcontent-%COMP%]{border:none;padding:12px 18px;border-radius:12px;font-size:.72rem;font-weight:800;letter-spacing:.05em;cursor:pointer;transition:background .16s,box-shadow .16s,transform .12s;display:inline-flex;align-items:center;justify-content:center}.btn.primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none}.btn.primary[_ngcontent-%COMP%]:hover{background:#1d4fb8;color:#fff}.btn.primary[disabled][_ngcontent-%COMP%], .btn.primary[_ngcontent-%COMP%]:disabled{background:#e3e9f8;color:#173453;cursor:not-allowed;box-shadow:none;opacity:1}.btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#194065}.btn.outline[_ngcontent-%COMP%]:hover{background:#dbe9fb}.btn.share[_ngcontent-%COMP%]{background:#fbf7ef;color:#965d00;border:1px solid #e9d7b2}.btn.share[_ngcontent-%COMP%]:hover{background:#f6e9cf}.btn.mini[_ngcontent-%COMP%]{background:#eef3fb;color:#173453;padding:6px 10px;font-size:.6rem}.btn.mini[_ngcontent-%COMP%]:hover{background:#dbe9fb}.row-template-select-compact.small[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px;gap:5px;padding:0}.label-template-type-compact[_ngcontent-%COMP%]{font-size:.69rem;font-weight:900;color:#1c355d;margin-right:0;min-width:0;display:inline-block;letter-spacing:.01em}.select-template-type-compact[_ngcontent-%COMP%]{font-size:.74rem;height:24px;padding:0 10px;border-radius:8px;border:1.5px solid #2563eb;font-weight:800;color:#1742b0;background:#f7faff;outline:none;transition:border-color .14s;min-width:86px;box-shadow:none}.select-template-type-compact[_ngcontent-%COMP%]:focus{border-color:#1d6ceb;background:#eaf3ff}.giorni-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px;flex-wrap:wrap;border:none}.tab-remove[_ngcontent-%COMP%]{background:#fbefee;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;margin-left:0;cursor:pointer;transition:background .15s;border:none}.tab-remove[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.tab-remove[_ngcontent-%COMP%]:hover:not([disabled]){background:#ffe3e3}.tab-item[_ngcontent-%COMP%]{background:#eef3fb;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;letter-spacing:.05em;cursor:pointer;transition:background .15s,color .15s;border:none}.tab-item.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.tab-item[_ngcontent-%COMP%]:hover:not(.active){background:#dbe9fb}.tab-label[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.tab-edit[_ngcontent-%COMP%]{width:100px;padding:6px 8px;font-size:.66rem;border-radius:8px;outline:none;border:none}.tab-edit[_ngcontent-%COMP%]:focus{background:#eef6ff}.tab-add[_ngcontent-%COMP%]{background:#f2fbf7;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;transition:background .15s;border:none;color:#067a45}.tab-add[_ngcontent-%COMP%]:hover{background:#e4f9ee}.settimane-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:8px 14px;flex-wrap:wrap;margin-bottom:12px;margin-top:-10px}.settimane-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{background:#eef3fb;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;letter-spacing:.05em;cursor:pointer;border:none;transition:background .15s,color .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.settimane-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]:hover:not(.active){background:#dbe9fb}.settimane-tabs[_ngcontent-%COMP%]   .tab-add[_ngcontent-%COMP%]{background:#f2fbf7;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;color:#067a45;border:none;transition:background .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-add[_ngcontent-%COMP%]:hover{background:#e4f9ee}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[_ngcontent-%COMP%]{background:#fbefee;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;color:#cb1b2b;border:none;margin-left:0;transition:background .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[_ngcontent-%COMP%]:hover:not([disabled]){background:#ffe3e3}.giorno-contenuto[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:20px;border:none}.empty-drop[_ngcontent-%COMP%]{padding:26px 22px;text-align:center;font-size:.7rem;font-weight:700;color:#4b647d;border:none}.exercise-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;border:none}.exercise-card[_ngcontent-%COMP%]{background:#fff;padding:18px 16px 16px;border-radius:16px;display:flex;flex-direction:column;gap:14px;box-shadow:0 3px 12px #193c6e0f;transition:box-shadow .15s,transform .12s;border:none}.exercise-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #193c6e24;transform:translateY(-2px)}.ex-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,minmax(110px,1fr));gap:12px;max-width:100%}@media (max-width: 700px){.ex-fields[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.ex-fields[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:.58rem;font-weight:700;letter-spacing:.05em;color:#173453;min-width:110px}.ex-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;border-radius:10px;font-size:.66rem;font-weight:600;background:#f7fafc;color:#102f4d;outline:none;transition:background-color .15s;height:32px;box-sizing:border-box;border:none}.ex-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#eef6ff}.ex-note[_ngcontent-%COMP%]{width:80%;padding:10px 12px;border-radius:12px;font-size:.66rem;font-weight:600;background:#f8fbff;color:#173453;resize:vertical;outline:none;transition:background-color .15s;display:block;border:none}.ex-note[_ngcontent-%COMP%]:focus{background:#eef6ff}.exercise-pagination-mini[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;margin-top:10px;margin-bottom:4px}.page-arrow-mini[_ngcontent-%COMP%]{background:#2563eb;border:none;border-radius:50%;width:28px;height:28px;color:#fff;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 8px #2563eb1a;transition:background .14s,box-shadow .14s,transform .11s;outline:none;padding:0}.page-arrow-mini[disabled][_ngcontent-%COMP%]{background:#eaf0fa;color:#bed2f6;cursor:not-allowed;box-shadow:none}.page-arrow-mini[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:13px;height:13px;display:block;margin:auto}.page-indicator-mini[_ngcontent-%COMP%]{font-size:.93rem;font-weight:700;color:#2563eb;min-width:38px;text-align:center;letter-spacing:.01em}.ex-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;border:none}.ex-img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:18px;background:#f1f5fa;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;border:none}.ex-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.ex-placeholder[_ngcontent-%COMP%]{font-size:28px;opacity:.55}.ex-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:800;color:#173453;flex:1;letter-spacing:.03em;border:none}.ex-controls[_ngcontent-%COMP%]{display:flex;gap:4px;border:none}.btn-icon.move[_ngcontent-%COMP%], .btn-icon.reset[_ngcontent-%COMP%], .btn-icon.remove[_ngcontent-%COMP%]{background:#fff;color:#2563eb;width:32px;height:32px;font-size:1rem;font-weight:700;border-radius:12px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;transition:background .15s,color .15s;padding:0;border:none}.btn-icon.remove[_ngcontent-%COMP%]{color:#dc2626}.btn-icon.remove[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.btn-icon.move[disabled][_ngcontent-%COMP%], .btn-icon.reset[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.btn-icon.move[_ngcontent-%COMP%]:hover:not([disabled]){background:#eef6ff}.btn-icon.reset[_ngcontent-%COMP%]:hover:not([disabled]){background:#e0f0ff}.search-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:14px;border:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border-radius:12px;background:#f7fbff;font-size:.7rem;font-weight:600;color:#173453;outline:none;transition:background-color .15s;border:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{background:#eef6ff}.esercizi-scroll[_ngcontent-%COMP%]{flex:1;overflow:auto;display:flex;flex-direction:column;gap:14px;padding:14px;border:none}.big-ex-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px 18px;display:flex;align-items:center;gap:18px;cursor:pointer;transition:box-shadow .15s,transform .12s,background .15s;min-height:96px;border:none}.big-ex-card[_ngcontent-%COMP%]:hover{background:#f0f6ff;box-shadow:0 4px 14px #2563eb38;transform:translateY(-3px)}.big-img[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:16px;background:#f0f4fa;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;border:none}.big-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.big-placeholder[_ngcontent-%COMP%]{font-size:30px;opacity:.55}.big-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.big-name[_ngcontent-%COMP%]{font-size:.76rem;font-weight:800;color:#173453;letter-spacing:.03em}.big-cat[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#2563eb;opacity:.85;letter-spacing:.05em}.empty-right[_ngcontent-%COMP%]{background:#f1f6fb;border-radius:16px;padding:18px 16px;text-align:center;font-size:.68rem;font-weight:600;color:#516b87;border:none}.user-picker-backdrop[_ngcontent-%COMP%], .share-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f234173;display:flex;align-items:center;justify-content:center;z-index:3000;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.user-picker-modal[_ngcontent-%COMP%], .share-modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;border:2px solid #d9e5f1;box-shadow:0 18px 50px #0f23414d;padding:24px 24px 26px;max-width:420px;width:100%;max-height:85vh;display:flex;flex-direction:column;gap:14px;overflow:auto}.user-picker-modal[_ngcontent-%COMP%]{width:380px}.share-modal[_ngcontent-%COMP%]{width:420px}.picker-header[_ngcontent-%COMP%], .share-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.picker-title[_ngcontent-%COMP%], .share-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:800;color:#173453}.picker-close[_ngcontent-%COMP%], .share-close[_ngcontent-%COMP%]{background:#f0f5fa;border:1px solid #d9e5f1;width:36px;height:36px;font-size:18px;font-weight:700;border-radius:12px;cursor:pointer;transition:background .15s,color .15s}.picker-close[_ngcontent-%COMP%]:hover, .share-close[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.picker-search[_ngcontent-%COMP%]{padding:10px 12px;border:1.8px solid #b9cddd;border-radius:12px;background:#f7fbff;font-size:.68rem;font-weight:600;color:#173453;outline:none;margin-bottom:8px}.picker-list[_ngcontent-%COMP%]{overflow:auto;flex:1;display:flex;flex-direction:column;gap:10px}.picker-item[_ngcontent-%COMP%]{display:flex;gap:14px;background:#f8fbff;border:1px solid #d9e5f1;border-radius:14px;padding:12px 14px;cursor:pointer;transition:background .15s,box-shadow .15s,transform .12s}.picker-item[_ngcontent-%COMP%]:hover{background:#edf5ff;box-shadow:0 3px 12px #2563eb38;transform:translateY(-2px)}.pi-avatar[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:14px;background:#eef3fb;border:1px solid #d9e5f1;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}.pi-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.pi-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.pi-name[_ngcontent-%COMP%]{font-size:.68rem;font-weight:800;color:#173453}.pi-email[_ngcontent-%COMP%]{font-size:.58rem;font-weight:600;color:#375d80}.pi-status[_ngcontent-%COMP%]{font-size:.56rem;font-weight:700;color:#16a34a}.pi-status.inactive[_ngcontent-%COMP%]{color:#dc2626}.picker-empty[_ngcontent-%COMP%]{text-align:center;font-size:.62rem;font-weight:700;color:#4b647d;padding:16px 10px;border:1px dashed #b9cddd;border-radius:12px}.share-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.share-options[_ngcontent-%COMP%]{display:flex;gap:14px;flex-wrap:wrap}.share-option[_ngcontent-%COMP%]{flex:1 1 110px;background:#f8fbff;border:1.6px solid #b9cddd;border-radius:16px;padding:14px 12px;display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer;transition:background .15s,box-shadow .15s,transform .12s;font-size:.62rem;font-weight:700;color:#173453}.share-option[_ngcontent-%COMP%]:hover{background:#edf5ff;box-shadow:0 3px 12px #2563eb38;transform:translateY(-2px)}.share-icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:800}.share-icon.gmail[_ngcontent-%COMP%]{background:#ffebe6;color:#d93025}.share-icon.outlook[_ngcontent-%COMP%]{background:#e6f0ff;color:#2563eb}.share-icon.link[_ngcontent-%COMP%]{background:#e9f7ff;color:#0d5f8c}.share-link-box[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.share-link-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1.6px solid #b9cddd;border-radius:12px;background:#f7fbff;font-size:.64rem;font-weight:600;color:#173453;outline:none}@media (max-width:1180px){.schede-page[_ngcontent-%COMP%]{grid-template-columns:260px 1fr 300px}}@media (max-width:980px){.schede-page[_ngcontent-%COMP%]{grid-template-columns:1fr}.col-left[_ngcontent-%COMP%], .col-center[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{width:100%}}@media (max-width:560px){.schede-page[_ngcontent-%COMP%]{padding:20px 16px 34px}.exercise-card[_ngcontent-%COMP%]{padding:16px 14px 14px}.big-ex-card[_ngcontent-%COMP%]{padding:14px 16px;min-height:88px}.avatar-block[_ngcontent-%COMP%]{width:78px;height:78px}.giorni-tabs[_ngcontent-%COMP%]{gap:8px}.tab-item[_ngcontent-%COMP%], .tab-add[_ngcontent-%COMP%]{padding:7px 12px;font-size:.6rem}}"]});let n=e;return n})();var pde=["fileInput"];function gde(n,e){if(n&1&&ht(0,"img",35),n&2){let t=ee(2);ae("src",t.editForm.media||t.editForm.image,ur)}}function mde(n,e){n&1&&(b(0,"div",36),ht(1,"span",37),A())}function vde(n,e){if(n&1){let t=_t();b(0,"button",38),Se("click",function(){pe(t);let i=ee(2);return ge(i.enableEdit())}),j(1,"Modifica"),A()}}function _de(n,e){if(n&1){let t=_t();b(0,"button",39),Se("click",function(){pe(t);let i=ee(2);return ge(i.openDeleteModal())}),j(1,"Elimina esercizio"),A()}}function yde(n,e){if(n&1){let t=_t();b(0,"button",38),Se("click",function(){pe(t);let i=ee(2);return ge(i.saveExercise())}),j(1,"Salva Esercizio"),A()}}function wde(n,e){if(n&1){let t=_t();b(0,"button",15),Se("click",function(){pe(t);let i=ee(2);return ge(i.cancelEdit())}),j(1,"Annulla"),A()}}function bde(n,e){if(n&1){let t=_t();b(0,"button",42),Se("click",function(){pe(t);let i=ee().index,o=ee(2);return ge(o.removeMuscle(i))}),j(1,"\xD7"),A()}}function xde(n,e){if(n&1&&(b(0,"span",40),j(1),Qe(2,bde,2,0,"button",41),A()),n&2){let t=e.$implicit,r=ee(2);H(),Dr(" ",t," "),H(),ae("ngIf",r.editMode)}}function Cde(n,e){if(n&1){let t=_t();b(0,"div",43)(1,"input",44),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.newMuscle,i)||(o.newMuscle=i),ge(i)}),Se("keydown.enter",function(){pe(t);let i=ee(2);return ge(i.addMuscle())}),A(),b(2,"button",45),Se("click",function(){pe(t);let i=ee(2);return ge(i.addMuscle())}),j(3,"Aggiungi"),A()()}if(n&2){let t=ee(2);H(),it("ngModel",t.newMuscle)}}function Ede(n,e){if(n&1&&(b(0,"div",46),j(1),A()),n&2){let t=ee(2);H(),ft(t.editForm.notes||"Nessuna nota")}}function Ide(n,e){if(n&1){let t=_t();b(0,"textarea",47),ot("ngModelChange",function(i){pe(t);let o=ee(2);return st(o.editForm.notes,i)||(o.editForm.notes=i),ge(i)}),A()}if(n&2){let t=ee(2);it("ngModel",t.editForm.notes)}}function Sde(n,e){if(n&1){let t=_t();b(0,"div",4)(1,"div",5)(2,"div",6),Se("click",function(){pe(t);let i=ee();return ge(i.onMediaBoxClick())}),Qe(3,gde,1,1,"img",7)(4,mde,2,0,"div",8),b(5,"input",9,1),Se("change",function(i){pe(t);let o=ee();return ge(o.onMediaChange(i))}),A()()(),b(7,"div",10)(8,"div",11),Qe(9,vde,2,0,"button",12)(10,_de,2,0,"button",13)(11,yde,2,0,"button",12)(12,wde,2,0,"button",14),b(13,"button",15),Se("click",function(){pe(t);let i=ee();return ge(i.backToList())}),j(14,"Indietro"),A()(),b(15,"h2"),j(16,"Esercizio"),A(),b(17,"div",16)(18,"label"),j(19,"Nome"),A(),b(20,"input",17),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.editForm.name,i)||(o.editForm.name=i),ge(i)}),A()(),b(21,"div",16)(22,"label"),j(23,"Categoria"),A(),b(24,"input",17),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.editForm.category,i)||(o.editForm.category=i),ge(i)}),A()(),b(25,"div",16)(26,"label"),j(27,"Posizionamento"),A(),b(28,"textarea",18),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.editForm.posizionamento,i)||(o.editForm.posizionamento=i),ge(i)}),A()(),b(29,"div",16)(30,"label"),j(31,"Esecuzione"),A(),b(32,"textarea",19),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.editForm.esecuzione,i)||(o.editForm.esecuzione=i),ge(i)}),A()(),b(33,"div",16)(34,"label"),j(35,"Ritorno"),A(),b(36,"textarea",20),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.editForm.ritorno,i)||(o.editForm.ritorno=i),ge(i)}),A()(),b(37,"div",16)(38,"label"),j(39,"Accorgimenti tecnici"),A(),b(40,"textarea",21),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.editForm.accorgimenti,i)||(o.editForm.accorgimenti=i),ge(i)}),A()(),b(41,"div",16)(42,"label"),j(43,"Obiettivo"),A(),b(44,"textarea",22),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.editForm.obiettivo,i)||(o.editForm.obiettivo=i),ge(i)}),A()(),b(45,"div",23)(46,"label"),j(47,"Muscoli Coinvolti"),A(),b(48,"div",24),Qe(49,xde,3,2,"span",25),A(),Qe(50,Cde,4,1,"div",26),A(),b(51,"div",16)(52,"label"),j(53,"Difficolt\xE0"),A(),b(54,"select",27),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.editForm.difficulty,i)||(o.editForm.difficulty=i),ge(i)}),b(55,"option",28),j(56,"Facile"),A(),b(57,"option",29),j(58,"Intermedio"),A(),b(59,"option",30),j(60,"Difficile"),A()()()(),b(61,"aside",31)(62,"div",32)(63,"h4"),j(64,"Note Personali"),A(),Qe(65,Ede,2,1,"div",33)(66,Ide,1,1,"textarea",34),A()()()}if(n&2){let t=ee();H(2),so("clickable",t.editMode),H(),ae("ngIf",t.editForm.media||t.editForm.image),H(),ae("ngIf",!(t.editForm.media||t.editForm.image)),H(5),ae("ngIf",!t.editMode),H(),ae("ngIf",t.editMode),H(),ae("ngIf",t.editMode),H(),ae("ngIf",t.editMode),H(8),it("ngModel",t.editForm.name),ae("readonly",!t.editMode),H(4),it("ngModel",t.editForm.category),ae("readonly",!t.editMode),H(4),it("ngModel",t.editForm.posizionamento),ae("readonly",!t.editMode),H(4),it("ngModel",t.editForm.esecuzione),ae("readonly",!t.editMode),H(4),it("ngModel",t.editForm.ritorno),ae("readonly",!t.editMode),H(4),it("ngModel",t.editForm.accorgimenti),ae("readonly",!t.editMode),H(4),it("ngModel",t.editForm.obiettivo),ae("readonly",!t.editMode),H(5),ae("ngForOf",t.editForm.muscles),H(),ae("ngIf",t.editMode),H(4),it("ngModel",t.editForm.difficulty),ae("disabled",!t.editMode),H(11),ae("ngIf",!t.editMode),H(),ae("ngIf",t.editMode)}}function Ade(n,e){if(n&1){let t=_t();b(0,"div",48)(1,"div",49)(2,"h3"),j(3,"Conferma Eliminazione"),A(),b(4,"p"),j(5,"Sei sicuro di voler eliminare questo esercizio?"),ht(6,"br"),b(7,"strong"),j(8,"Questa azione \xE8 irreversibile."),A()(),b(9,"div",50)(10,"button",39),Se("click",function(){pe(t);let i=ee();return ge(i.deleteExercise())}),j(11,"Elimina"),A(),b(12,"button",15),Se("click",function(){pe(t);let i=ee();return ge(i.closeDeleteModal())}),j(13,"Annulla"),A()()()()}}function Dde(n,e){if(n&1){let t=_t();b(0,"div",10)(1,"h2"),j(2,"Esercizio"),A(),b(3,"p"),j(4,"Elemento non trovato."),A(),b(5,"button",15),Se("click",function(){pe(t);let i=ee();return ge(i.backToList())}),j(6,"Indietro"),A()()}}var Xz=(()=>{let e=class e{constructor(r,i,o){this.route=r,this.router=i,this.eserciziService=o,this.exerciseId=null,this.exercise=null,this.editMode=!1,this.showDeleteModal=!1,this.editForm={name:"",category:"",posizionamento:"",esecuzione:"",ritorno:"",accorgimenti:"",obiettivo:"",description:"",muscles:[],difficulty:"Intermedio",image:void 0,media:null,notes:""},this.newMuscle="",this.loading=!0,this.notFound=!1}ngOnInit(){return te(this,null,function*(){if(this.exerciseId=this.route.snapshot.paramMap.get("id"),!this.exerciseId){this.exercise=null,this.notFound=!0,this.loading=!1;return}try{let i=(yield this.eserciziService.getAll()).find(o=>o.id===this.exerciseId);i?(this.exercise=i,this.populateForm(i)):(this.exercise=null,this.notFound=!0)}catch{this.exercise=null,this.notFound=!0}this.loading=!1})}populateForm(r){this.editForm={name:r.name,category:r.category,posizionamento:r.posizionamento??"",esecuzione:r.esecuzione??"",ritorno:r.ritorno??"",accorgimenti:r.accorgimenti??"",obiettivo:r.obiettivo??"",description:r.description??"",muscles:r.muscles??[],difficulty:r.difficulty??"Intermedio",image:r.image??void 0,media:null,notes:r.notes??""}}backToList(){this.router.navigate(["/esercizi"])}enableEdit(){this.editMode=!0}cancelEdit(){this.exercise&&this.populateForm(this.exercise),this.editMode=!1}saveExercise(){return te(this,null,function*(){if(!this.exercise)return;let r={name:this.editForm.name,category:this.editForm.category,posizionamento:this.editForm.posizionamento??"",esecuzione:this.editForm.esecuzione??"",ritorno:this.editForm.ritorno??"",accorgimenti:this.editForm.accorgimenti??"",obiettivo:this.editForm.obiettivo??"",description:this.editForm.description,muscles:this.editForm.muscles,difficulty:this.editForm.difficulty,image:this.editForm.image??void 0,notes:this.editForm.notes??""};yield this.eserciziService.update(this.exercise.id,r),this.exercise=Oe(Oe({},this.exercise),r),this.editMode=!1})}addMuscle(){let r=this.newMuscle.trim();r&&(this.editForm.muscles.push(r),this.newMuscle="")}removeMuscle(r){this.editForm.muscles.splice(r,1)}onMediaBoxClick(){this.editMode&&this.fileInputRef?.nativeElement?.click()}onMediaChange(r){let i=r.target.files?.[0]||null;if(!i)return;let o=new FileReader;o.onload=()=>{this.editForm.media=o.result},o.readAsDataURL(i)}openDeleteModal(){this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1}deleteExercise(){return te(this,null,function*(){this.exercise&&(yield this.eserciziService.delete(this.exercise.id),this.closeDeleteModal(),this.backToList())})}};e.\u0275fac=function(i){return new(i||e)(tt(Ws),tt(Tr),tt(vC))},e.\u0275cmp=Kn({type:e,selectors:[["app-dettaglio-esercizi"]],viewQuery:function(i,o){if(i&1&&bv(pde,5),i&2){let s;Wf(s=Kf())&&(o.fileInputRef=s.first)}},decls:4,vars:3,consts:[["notFound",""],["fileInput",""],["class","dettaglio-esercizi-layout",4,"ngIf","ngIfElse"],["class","modal-overlay",4,"ngIf"],[1,"dettaglio-esercizi-layout"],[1,"left-media"],[1,"media-box",3,"click"],["alt","Immagine esercizio",3,"src",4,"ngIf"],["class","media-placeholder",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],[1,"center-form"],[1,"top-actions"],["type","button","class","btn",3,"click",4,"ngIf"],["type","button","class","btn danger",3,"click",4,"ngIf"],["type","button","class","btn outline",3,"click",4,"ngIf"],["type","button",1,"btn","outline",3,"click"],[1,"form-row"],["type","text",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come posizionarsi per l'esercizio",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come eseguire correttamente l'esercizio",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come tornare alla posizione iniziale",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Consigli tecnici e correzioni",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Scopo o obiettivo dell'esercizio",3,"ngModelChange","ngModel","readonly"],[1,"form-row","small-tags"],[1,"tags"],["class","tag",4,"ngFor","ngForOf"],["class","tag-add",4,"ngIf"],[3,"ngModelChange","ngModel","disabled"],["value","Facile"],["value","Intermedio"],["value","Difficile"],[1,"right-side"],[1,"notes"],["class","note-card",4,"ngIf"],["class","note-textarea","rows","6","placeholder","Scrivi le tue note...",3,"ngModel","ngModelChange",4,"ngIf"],["alt","Immagine esercizio",3,"src"],[1,"media-placeholder"],[1,"placeholder-icon"],["type","button",1,"btn",3,"click"],["type","button",1,"btn","danger",3,"click"],[1,"tag"],["type","button","class","tag-remove","aria-label","Rimuovi",3,"click",4,"ngIf"],["type","button","aria-label","Rimuovi",1,"tag-remove",3,"click"],[1,"tag-add"],["type","text","placeholder","Aggiungi muscolo...",3,"ngModelChange","keydown.enter","ngModel"],["type","button",1,"btn","small",3,"click"],[1,"note-card"],["rows","6","placeholder","Scrivi le tue note...",1,"note-textarea",3,"ngModelChange","ngModel"],[1,"modal-overlay"],[1,"modal"],[1,"modal-actions"]],template:function(i,o){if(i&1&&Qe(0,Sde,67,28,"div",2)(1,Ade,14,0,"div",3)(2,Dde,7,0,"ng-template",null,0,ao),i&2){let s=yi(3);ae("ngIf",o.exercise)("ngIfElse",s),H(),ae("ngIf",o.showDeleteModal)}},dependencies:[ac,Gi,Fi,fd,Zc,Xc,Co,Ma,vs,Qo,_d],styles:["[_ngcontent-%COMP%]:root{--primary: #2563eb;--panel: #fff;--panel-border: #e7ecf9;--bg: #f5f8fc;--text: #193455}.dettaglio-esercizi-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr 260px;gap:22px;padding:18px 30px;background:var(--bg)}.left-media[_ngcontent-%COMP%]{background:var(--panel);border-radius:12px;padding:14px;border:1px solid var(--panel-border)}.media-box[_ngcontent-%COMP%]{height:220px;display:flex;align-items:center;justify-content:center;background:#fafbfd;border-radius:12px;margin-bottom:10px;overflow:hidden;position:relative;transition:box-shadow .15s,transform .12s}.media-box.clickable[_ngcontent-%COMP%]{cursor:pointer}.media-box.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 2px 10px #2563eb2e;transform:translateY(-1px)}.media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;display:block}.media-placeholder[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:14px;background:#eef3fb;border:1px solid #d7e4f6;position:relative}.placeholder-icon[_ngcontent-%COMP%]{width:100%;height:100%;display:inline-block;background:linear-gradient(#9bb8e0,#9bb8e0) center 40%/36% 14% no-repeat,linear-gradient(#9bb8e0,#9bb8e0) center 60%/60% 28% no-repeat;border-radius:12px}.center-form[_ngcontent-%COMP%]{background:var(--panel);padding:18px;border-radius:12px;border:1px solid var(--panel-border)}.center-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:var(--text)}.top-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-bottom:12px}.form-row[_ngcontent-%COMP%]{margin-bottom:12px;display:flex;flex-direction:column}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#294860;margin-bottom:6px}.form-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:9px 11px;border-radius:8px;border:1px solid #dbe9fb;font-size:.98rem}.tags[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.tag[_ngcontent-%COMP%]{background:#e6f2ff;padding:6px 8px;border-radius:20px;color:#1b355b;font-weight:700;display:inline-flex;align-items:center;gap:6px}.tag-remove[_ngcontent-%COMP%]{background:#fff;border:1px solid #cfe0fb;color:#274162;width:18px;height:18px;border-radius:50%;font-size:12px;line-height:1;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.tag-remove[_ngcontent-%COMP%]:hover{background:var(--primary);color:#fff;border-color:#1f56c7}.tag-add[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:8px}.tag-add[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;border-radius:8px;border:1px solid #dbe9fb}.right-side[_ngcontent-%COMP%]{background:var(--panel);border-radius:12px;padding:14px;border:1px solid var(--panel-border)}.notes[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#294860}.note-card[_ngcontent-%COMP%]{padding:10px;background:#fbfbfd;border-radius:8px;border:1px solid #e7ecf9;color:#193455}.note-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:8px;border:1px solid #dbe9fb}.btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 14px;border-radius:10px;font-size:.95rem;font-weight:700;cursor:pointer;transition:background .16s}.btn[_ngcontent-%COMP%]:hover{background:#194fd6}.btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#1e3a8a;border:1px solid #d7e4f6}.btn.outline[_ngcontent-%COMP%]:hover{background:#e1ebfb}.btn.small[_ngcontent-%COMP%]{padding:6px 12px;font-size:.85rem}@media (max-width: 980px){.dettaglio-esercizi-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}.btn.danger[_ngcontent-%COMP%]{background:#ff5151;color:#fff;border:none}.btn.danger[_ngcontent-%COMP%]:hover{background:#dc2626}.modal-overlay[_ngcontent-%COMP%]{position:fixed;z-index:99;inset:0;background:#1934552b;display:flex;align-items:center;justify-content:center}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 8px 32px #2563eb38;min-width:340px;max-width:90vw;padding:34px 28px 22px;text-align:center}.modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#dc2626;margin-bottom:8px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-top:20px}"]});let n=e;return n})();function Tde(n,e){if(n&1&&(b(0,"div",17)(1,"span",18),j(2,"error"),A(),b(3,"span"),j(4),A()()),n&2){let t=ee();H(4),ft(t.error)}}function Mde(n,e){n&1&&(b(0,"span"),j(1,"Accedi"),A())}function Nde(n,e){n&1&&(b(0,"span",19),ht(1,"span",20),j(2," Accesso in corso... "),A())}var Jz=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i,this.email="",this.password="",this.loading=!1,this.error="",this.showPassword=!1}ngOnInit(){this.afAuth.currentUser.then(r=>{r&&this.router.navigate(["/"])})}togglePasswordVisibility(){this.showPassword=!this.showPassword}login(){return te(this,null,function*(){if(!this.email.trim()||!this.password.trim()){this.error="Email e password sono obbligatori";return}this.loading=!0,this.error="";try{(yield this.afAuth.signInWithEmailAndPassword(this.email.trim(),this.password.trim())).user&&this.router.navigate(["/"])}catch(r){this.loading=!1;let i=r.code,o=r.message;switch(i){case"auth/invalid-email":this.error="Email non valida";break;case"auth/user-disabled":this.error="Questo account \xE8 stato disabilitato";break;case"auth/user-not-found":this.error="Email non trovata";break;case"auth/wrong-password":this.error="Password non corretta";break;case"auth/too-many-requests":this.error="Troppi tentativi di accesso. Riprova pi\xF9 tardi";break;default:this.error="Errore di accesso: "+o}}})}onKeyPress(r){r.key==="Enter"&&this.login()}};e.\u0275fac=function(i){return new(i||e)(tt(Ys),tt(Tr))},e.\u0275cmp=Kn({type:e,selectors:[["app-login"]],standalone:!1,decls:27,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],["autocomplete","off",1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["id","email","type","email","name","email","placeholder","Inserisci la tua email","required","","autocomplete","off",3,"ngModelChange","ngModel","disabled"],["for","password"],[1,"password-input-wrapper"],["id","password","name","password","placeholder","Inserisci la tua password","required","","autocomplete","off",3,"ngModelChange","keypress","type","ngModel","disabled"],["type","button","title","Mostra/nascondi password",1,"toggle-password-btn",3,"click","disabled"],[1,"material-icons"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"login-footer"],[1,"error-message"],[1,"material-icons","error-icon"],[1,"loading-spinner"],[1,"spinner"]],template:function(i,o){i&1&&(b(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),j(4,"Prof Ghizz"),A(),b(5,"p"),j(6,"Sistema di Gestione Fitness"),A()(),b(7,"form",3),Se("ngSubmit",function(){return o.login()}),b(8,"div",4)(9,"label",5),j(10,"Email"),A(),b(11,"input",6),ot("ngModelChange",function(a){return st(o.email,a)||(o.email=a),a}),A()(),b(12,"div",4)(13,"label",7),j(14,"Password"),A(),b(15,"div",8)(16,"input",9),ot("ngModelChange",function(a){return st(o.password,a)||(o.password=a),a}),Se("keypress",function(a){return o.onKeyPress(a)}),A(),b(17,"button",10),Se("click",function(){return o.togglePasswordVisibility()}),b(18,"span",11),j(19),A()()()(),Qe(20,Tde,5,1,"div",12),b(21,"button",13),Qe(22,Mde,2,0,"span",14)(23,Nde,3,0,"span",15),A()(),b(24,"div",16)(25,"p"),j(26,"\xA9 2026 Prof Ghizz - Tutti i diritti riservati"),A()()()()),i&2&&(H(11),it("ngModel",o.email),ae("disabled",o.loading),H(5),ae("type",o.showPassword?"text":"password"),it("ngModel",o.password),ae("disabled",o.loading),H(),ae("disabled",o.loading),H(2),ft(o.showPassword?"visibility_off":"visibility"),H(),ae("ngIf",o.error),H(),ae("disabled",o.loading),H(),ae("ngIf",!o.loading),H(),ae("ngIf",o.loading))},dependencies:[Fi,fg,Co,vs,dg,Xf,Qo,Zf],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background-color:#0f172a;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Helvetica Neue,sans-serif;padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;width:100%;max-width:420px;padding:40px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#667eea;margin:0 0 8px;letter-spacing:-.5px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#999;margin:0;font-weight:500}.login-form[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#333;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 14px;font-size:14px;border:2px solid #e0e0e0;border-radius:8px;transition:all .3s ease;background:#f9f9f9;box-sizing:border-box;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;background:#f5f5f5}.password-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding-right:45px}.toggle-password-btn[_ngcontent-%COMP%]{position:absolute;right:12px;background:none;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#999;transition:color .3s ease;padding:4px;width:32px;height:32px}.toggle-password-btn[_ngcontent-%COMP%]:hover:not(:disabled){color:#667eea}.toggle-password-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.toggle-password-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 14px;background:#ffebee;border:1px solid #f48fb1;border-radius:8px;color:#c2185b;font-size:13px;margin-bottom:16px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.error-icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.btn-login[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background-color:#1d4ed8;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 12px #1d4ed84d}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1e40af;transform:translateY(-2px);box-shadow:0 6px 20px #1d4ed866}.btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;justify-content:center}.spinner[_ngcontent-%COMP%]{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#999;margin:0}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:30px 20px;border-radius:8px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px;font-size:16px}}"]});let n=e;return n})();var xu=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i}canActivate(){return this.afAuth.authState.pipe(no(1),ut(r=>r?!0:(this.router.navigate(["/login"]),!1)))}};e.\u0275fac=function(i){return new(i||e)(Ve(Ys),Ve(Tr))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Pde(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===1&&r===0?1:i===0&&t!==0&&t%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var eq=["it",[["m.","p."],["AM","PM"]],void 0,[["D","L","M","M","G","V","S"],["dom","lun","mar","mer","gio","ven","sab"],["domenica","luned\xEC","marted\xEC","mercoled\xEC","gioved\xEC","venerd\xEC","sabato"],["dom","lun","mar","mer","gio","ven","sab"]],void 0,[["G","F","M","A","M","G","L","A","S","O","N","D"],["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]],void 0,[["aC","dC"],["a.C.","d.C."],["avanti Cristo","dopo Cristo"]],1,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{BRL:[void 0,"R$"],BYN:[void 0,"Br"],EGP:[void 0,"\xA3E"],HKD:[void 0,"$"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NOK:[void 0,"NKr"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VND:[void 0,"\u20AB"]},"ltr",Pde];function kde(n,e){if(n&1&&ht(0,"img",24),n&2){let t=ee();ae("src",t.cliente==null?null:t.cliente.avatarUrl,ur)("alt",(t.cliente==null?null:t.cliente.name)||"?")}}function Rde(n,e){if(n&1&&(b(0,"span"),j(1),A()),n&2){let t=ee();H(),ft((t.cliente==null||t.cliente.name==null?null:t.cliente.name.charAt(0))||"?")}}function Ode(n,e){if(n&1){let t=_t();b(0,"button",25),Se("click",function(){pe(t);let i=ee();return ge(i.selectUser(null))}),j(1," \xD7 "),A()}}function Fde(n,e){if(n&1&&(b(0,"div",26)(1,"span"),j(2),A()()),n&2){let t=e.$implicit;H(2),ft(t)}}function Lde(n,e){if(n&1){let t=_t();b(0,"div",34),Se("click",function(){let i=pe(t).$implicit,o=ee().$implicit,s=ee();return ge(s.openActivityPicker(o.dataIso,i))}),A()}}function Vde(n,e){if(n&1){let t=_t();b(0,"div",36),Se("click",function(i){pe(t);let o=ee().$implicit,s=ee(2);return ge(s.openEventDetail(o,i))}),b(1,"div",37),j(2),A(),b(3,"div",38),j(4),A(),b(5,"div",39),j(6),A()()}if(n&2){let t=ee().$implicit,r=ee(2);ae("ngStyle",r.getEventStyle(t)),H(2),ad("",t.oraInizio," - ",t.oraFine),H(2),ft(t.userName),H(2),ft(t.titolo)}}function jde(n,e){if(n&1&&(ri(0),Qe(1,Vde,7,5,"div",35),ii()),n&2){let t=e.$implicit,r=ee().$implicit;H(),ae("ngIf",t.dataIso===r.dataIso)}}function Bde(n,e){if(n&1){let t=_t();b(0,"div",27),Se("click",function(){let i=pe(t).$implicit,o=ee();return ge(o.selectDay(i.dataIso))}),b(1,"div",28)(2,"span",29),j(3),A(),b(4,"span",30),j(5),A()(),b(6,"div",31),Qe(7,Lde,1,0,"div",32)(8,jde,2,1,"ng-container",33),A()()}if(n&2){let t=e.$implicit,r=ee();so("is-today",t.isToday)("today-selected",t.dataIso===r.selectedIso),ru("data-date",t.dataIso),H(3),ft(t.nome),H(2),ft(t.dataDisplay),H(),xv("min-height",r.hours.length*r.HOUR_HEIGHT,"px"),H(),ae("ngForOf",r.hours),H(),ae("ngForOf",r.activities)}}function Ude(n,e){if(n&1&&ht(0,"img",24),n&2){let t=ee().$implicit;ae("src",t.avatarUrl,ur)("alt",t.name)}}function zde(n,e){if(n&1&&(b(0,"span"),j(1),A()),n&2){let t=ee().$implicit;H(),ft(t.name==null?null:t.name.charAt(0))}}function qde(n,e){if(n&1){let t=_t();b(0,"div",53),Se("click",function(){let i=pe(t).$implicit,o=ee(2);return ge(o.selectUser(i))}),b(1,"div",4),Qe(2,Ude,1,2,"img",5)(3,zde,2,1,"span",6),A(),b(4,"div",49)(5,"span",50),j(6),A(),b(7,"span",51),j(8),A()()()}if(n&2){let t=e.$implicit;H(2),ae("ngIf",t.avatarUrl),H(),ae("ngIf",!t.avatarUrl),H(3),ft(t.name),H(2),ft(t.email)}}function Hde(n,e){if(n&1){let t=_t();b(0,"div",40),Se("click",function(){pe(t);let i=ee();return ge(i.showUserPicker=!1)}),b(1,"div",41),Se("click",function(i){return pe(t),ge(i.stopPropagation())}),b(2,"div",42)(3,"h3"),j(4,"Seleziona Cliente"),A(),b(5,"button",43),Se("click",function(){pe(t);let i=ee();return ge(i.showUserPicker=!1)}),j(6,"\xD7"),A()(),b(7,"div",44)(8,"input",45),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.userSearch,i)||(o.userSearch=i),ge(i)}),Se("input",function(){pe(t);let i=ee();return ge(i.filterUsers())}),A(),b(9,"div",46)(10,"div",47),Se("click",function(){pe(t);let i=ee();return ge(i.selectUser(null))}),b(11,"div",48)(12,"span"),j(13,"-"),A()(),b(14,"div",49)(15,"span",50),j(16,"Nessun Cliente"),A(),b(17,"span",51),j(18,"Crea appuntamento generico"),A()()(),Qe(19,qde,9,4,"div",52),A()()()()}if(n&2){let t=ee();H(8),it("ngModel",t.userSearch),H(11),ae("ngForOf",t.filteredUserList)}}function $de(n,e){if(n&1&&(b(0,"option",66),j(1),Kc(2,"number"),A()),n&2){let t=e.$implicit;ae("value",t),H(),ft(ig(2,2,t,"2.0"))}}function Gde(n,e){if(n&1&&(b(0,"option",66),j(1),Kc(2,"number"),A()),n&2){let t=e.$implicit;ae("value",t),H(),ft(ig(2,2,t,"2.0"))}}function Wde(n,e){if(n&1&&(b(0,"option",66),j(1),Kc(2,"number"),A()),n&2){let t=e.$implicit;ae("value",t),H(),ft(ig(2,2,t,"2.0"))}}function Kde(n,e){if(n&1&&(b(0,"option",66),j(1),Kc(2,"number"),A()),n&2){let t=e.$implicit;ae("value",t),H(),ft(ig(2,2,t,"2.0"))}}function Yde(n,e){if(n&1){let t=_t();b(0,"div",40),Se("click",function(){pe(t);let i=ee();return ge(i.showActivityPicker=!1)}),b(1,"div",54),Se("click",function(i){return pe(t),ge(i.stopPropagation())}),b(2,"div",42)(3,"h3"),j(4,"Nuovo Appuntamento"),A(),b(5,"button",43),Se("click",function(){pe(t);let i=ee();return ge(i.showActivityPicker=!1)}),j(6,"\xD7"),A()(),b(7,"div",44)(8,"div",55),j(9," Pianificazione per: "),b(10,"b"),j(11),A()(),b(12,"div",56)(13,"label"),j(14,"Descrizione / Attivit\xE0"),A(),b(15,"input",57),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.tempActivity.titolo,i)||(o.tempActivity.titolo=i),ge(i)}),A()(),b(16,"div",58)(17,"div",59)(18,"label"),j(19,"Inizio"),A(),b(20,"div",60)(21,"select",61),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.tempActivity.oraInizio.ore,i)||(o.tempActivity.oraInizio.ore=i),ge(i)}),Qe(22,$de,3,5,"option",62),A(),b(23,"span"),j(24,":"),A(),b(25,"select",61),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.tempActivity.oraInizio.minuti,i)||(o.tempActivity.oraInizio.minuti=i),ge(i)}),Qe(26,Gde,3,5,"option",62),A()()(),b(27,"div",63),j(28,"\u2192"),A(),b(29,"div",59)(30,"label"),j(31,"Fine"),A(),b(32,"div",60)(33,"select",61),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.tempActivity.oraFine.ore,i)||(o.tempActivity.oraFine.ore=i),ge(i)}),Qe(34,Wde,3,5,"option",62),A(),b(35,"span"),j(36,":"),A(),b(37,"select",61),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.tempActivity.oraFine.minuti,i)||(o.tempActivity.oraFine.minuti=i),ge(i)}),Qe(38,Kde,3,5,"option",62),A()()()(),b(39,"div",56)(40,"label"),j(41,"Note (opzionale)"),A(),b(42,"textarea",64),ot("ngModelChange",function(i){pe(t);let o=ee();return st(o.tempActivity.note,i)||(o.tempActivity.note=i),ge(i)}),A()(),b(43,"button",65),Se("click",function(){pe(t);let i=ee();return ge(i.salvaAttivita())}),j(44,"Salva Appuntamento"),A()()()()}if(n&2){let t=ee();H(8),so("generic",!t.cliente),H(3),ft(t.cliente?t.cliente.name:"Generico"),H(4),it("ngModel",t.tempActivity.titolo),H(6),it("ngModel",t.tempActivity.oraInizio.ore),H(),ae("ngForOf",t.oreOptions),H(3),it("ngModel",t.tempActivity.oraInizio.minuti),H(),ae("ngForOf",t.minutiOptions),H(7),it("ngModel",t.tempActivity.oraFine.ore),H(),ae("ngForOf",t.oreOptions),H(3),it("ngModel",t.tempActivity.oraFine.minuti),H(),ae("ngForOf",t.minutiOptions),H(4),it("ngModel",t.tempActivity.note)}}function Qde(n,e){if(n&1&&(b(0,"div",69)(1,"label"),j(2,"Note:"),A(),b(3,"p"),j(4),A()()),n&2){let t=ee(3);H(4),ft(t.selectedEvent.note)}}function Zde(n,e){if(n&1){let t=_t();b(0,"div",44)(1,"div",69)(2,"label"),j(3,"Chi:"),A(),b(4,"span"),j(5),A()(),b(6,"div",69)(7,"label"),j(8,"Cosa:"),A(),b(9,"span"),j(10),A()(),b(11,"div",69)(12,"label"),j(13,"Quando:"),A(),b(14,"span"),j(15),A()(),Qe(16,Qde,5,1,"div",70),b(17,"div",71)(18,"button",72),Se("click",function(){pe(t);let i=ee(2);return ge(i.editEvent())}),j(19,"Modifica"),A(),b(20,"button",73),Se("click",function(){pe(t);let i=ee(2);return ge(i.eliminaEvento())}),j(21,"Elimina Appuntamento"),A()()()}if(n&2){let t=ee(2);H(5),ft(t.selectedEvent.userName),H(5),ft(t.selectedEvent.titolo),H(5),ad("",t.selectedEvent.oraInizio," - ",t.selectedEvent.oraFine),H(),ae("ngIf",t.selectedEvent.note)}}function Xde(n,e){if(n&1){let t=_t();b(0,"div",40),Se("click",function(){pe(t);let i=ee();return ge(i.showEventDetail=!1)}),b(1,"div",67),Se("click",function(i){return pe(t),ge(i.stopPropagation())}),b(2,"div",42)(3,"h3"),j(4,"Dettaglio"),A(),b(5,"button",43),Se("click",function(){pe(t);let i=ee();return ge(i.showEventDetail=!1)}),j(6,"\xD7"),A()(),Qe(7,Zde,22,5,"div",68),A()()}if(n&2){let t=ee();H(7),ae("ngIf",t.selectedEvent)}}S6(eq);var tq=(()=>{let e=class e{constructor(){this.firestore=Te(uo),this.START_HOUR=7,this.END_HOUR=22,this.HOUR_HEIGHT=65,this.hours=Array.from({length:1+this.END_HOUR-this.START_HOUR},(r,i)=>`${(this.START_HOUR+i).toString().padStart(2,"0")}:00`),this.viewMode="day",this.mesi=[{value:0,label:"GENNAIO"},{value:1,label:"FEBBRAIO"},{value:2,label:"MARZO"},{value:3,label:"APRILE"},{value:4,label:"MAGGIO"},{value:5,label:"GIUGNO"},{value:6,label:"LUGLIO"},{value:7,label:"AGOSTO"},{value:8,label:"SETTEMBRE"},{value:9,label:"OTTOBRE"},{value:10,label:"NOVEMBRE"},{value:11,label:"DICEMBRE"}],this.anni=Array.from({length:10},(r,i)=>new Date().getFullYear()-5+i),this.currentDate=new Date,this.selectedMonth=this.currentDate.getMonth(),this.selectedYear=this.currentDate.getFullYear(),this.giorniSettimana=[],this.giorniMese=[],this.activities=[],this.selectedIso=null,this.STORAGE_KEY="calendar_activities_v1",this.cliente=null,this.allUsers=[],this.filteredUserList=[],this.showUserPicker=!1,this.userSearch="",this.showActivityPicker=!1,this.tempActivity={},this.oreOptions=Array.from({length:24},(r,i)=>i),this.minutiOptions=Array.from({length:60},(r,i)=>i),this.showEventDetail=!1,this.selectedEvent=null}ngOnInit(){this.loadUsers(),this.loadActivities(),this.loadActivitiesFromFirestore(),this.updateView(),this.resetTempActivity()}loadUsers(){return te(this,null,function*(){try{let r=Kr(this.firestore,"users"),i=yield hl(r);this.allUsers=i.docs.map(o=>Oe({id:o.id},o.data())),this.filterUsers()}catch(r){console.error("Errore nel caricamento utenti:",r)}})}filterUsers(){let r=this.userSearch.toLowerCase().trim();this.filteredUserList=this.allUsers.filter(i=>(i.name||"").toLowerCase().includes(r)||(i.email||"").toLowerCase().includes(r))}openUserPicker(){this.showUserPicker=!0,this.userSearch="",this.filterUsers()}selectUser(r){this.cliente=r,this.showUserPicker=!1}setViewMode(r){this.viewMode=r,this.updateView()}updateView(){this.viewMode==="day"?((this.currentDate.getMonth()!==this.selectedMonth||this.currentDate.getFullYear()!==this.selectedYear)&&(this.currentDate=new Date(this.selectedYear,this.selectedMonth,1)),this.generateWeek()):(this.currentDate=new Date(this.selectedYear,this.selectedMonth,1),this.generateMonth())}changeMonth(){this.updateView()}changeYear(){this.updateView()}generateWeek(){let r=new Date(this.currentDate),i=r.getDay()||7,o=new Date(r);o.setDate(r.getDate()-i+1),this.giorniSettimana=[];for(let s=0;s<7;s++){let a=new Date(o);a.setDate(o.getDate()+s),this.giorniSettimana.push({nome:["LUN","MAR","MER","GIO","VEN","SAB","DOM"][s],dataDisplay:a.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit"}),dataIso:a.toISOString().split("T")[0],isToday:a.toDateString()===new Date().toDateString()})}}generateMonth(){let r=this.selectedYear,i=this.selectedMonth,o=new Date(r,i,1),s=new Date(r,i+1,0),a=new Date(o);a.setDate(o.getDate()-(o.getDay()?o.getDay()-1:6)),this.giorniMese=[];for(let c=new Date(a);c<=s||this.giorniMese.length<42;c.setDate(c.getDate()+1))this.giorniMese.push({nome:["LUN","MAR","MER","GIO","VEN","SAB","DOM"][(c.getDay()||7)-1],dataDisplay:c.getDate().toString(),dataIso:c.toISOString().split("T")[0],isToday:c.toDateString()===new Date().toDateString(),isCurrentMonth:c.getMonth()===i})}getEventsForDay(r){return this.activities.filter(i=>i.dataIso===r)}scrollWeek(r){this.viewMode==="day"?(this.currentDate.setDate(this.currentDate.getDate()+r*7),this.selectedMonth=this.currentDate.getMonth(),this.selectedYear=this.currentDate.getFullYear(),this.generateWeek()):(this.selectedMonth+=r,this.selectedMonth<0?(this.selectedMonth=11,this.selectedYear--):this.selectedMonth>11&&(this.selectedMonth=0,this.selectedYear++),this.updateView())}goToToday(){this.currentDate=new Date,this.selectedMonth=this.currentDate.getMonth(),this.selectedYear=this.currentDate.getFullYear(),this.viewMode="day",this.updateView(),this.selectedIso=this.currentDate.toISOString().split("T")[0],setTimeout(()=>{let r=document.querySelector(`.day-column[data-date="${this.selectedIso}"]`);r&&r.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}),r&&(r.classList.add("today-pulse"),setTimeout(()=>r.classList.remove("today-pulse"),1400))},240)}openActivityPicker(r,i){let[o,s]=i.split(":").map(Number),a=o??this.START_HOUR,c=Math.min(a+1,this.END_HOUR);this.tempActivity={titolo:"",note:"",dataIso:r,oraInizio:{ore:a,minuti:s??0,secondi:0},oraFine:{ore:c,minuti:s??0,secondi:0}},this.showActivityPicker=!0}resetTempActivity(){this.tempActivity={titolo:"",note:"",dataIso:"",oraInizio:{ore:9,minuti:0,secondi:0},oraFine:{ore:10,minuti:0,secondi:0},userName:"",_editingEvent:null}}loadActivities(){try{let r=localStorage.getItem(this.STORAGE_KEY);this.activities=r?JSON.parse(r):[]}catch(r){console.error("Errore caricamento appuntamenti:",r),this.activities=[]}}saveActivities(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.activities))}catch(r){console.error("Errore salvataggio appuntamenti:",r)}}loadActivitiesFromFirestore(){return te(this,null,function*(){try{let r=Kr(this.firestore,"appointments"),o=(yield hl(r)).docs.map(c=>Oe({id:c.id},c.data())),s=Array.isArray(this.activities)?[...this.activities]:[],a=new Map(s.filter(c=>c.id).map(c=>[c.id,c]));for(let c of o)if(a.has(c.id)){let l=s.findIndex(u=>u.id===c.id);l!==-1&&(s[l]=Oe(Oe({},s[l]),c))}else s.push(c);for(let c of s)if(!c.id)try{let l=yield cy(Kr(this.firestore,"appointments"),c);c.id=l.id}catch(l){console.error("Errore invio a Firestore:",l)}this.activities=s,this.saveActivities()}catch(r){console.error("Errore caricamento Firestore appuntamenti:",r)}})}saveActivityToFirestore(r){return te(this,null,function*(){try{if(r.id)yield pl(Ur(this.firestore,`appointments/${r.id}`),r);else{let i=yield cy(Kr(this.firestore,"appointments"),r);r.id=i.id}}catch(i){console.error("Errore salvataggio su Firestore:",i)}})}deleteActivityFromFirestore(r){return te(this,null,function*(){try{yield Kd(Ur(this.firestore,`appointments/${r}`))}catch(i){console.error("Errore eliminazione Firestore:",i)}})}salvaAttivita(){return te(this,null,function*(){(this.tempActivity.oraFine.ore>this.END_HOUR||this.tempActivity.oraFine.ore===this.END_HOUR&&this.tempActivity.oraFine.minuti>0)&&(this.tempActivity.oraFine.ore=this.END_HOUR,this.tempActivity.oraFine.minuti=0);let r=`${this.tempActivity.oraInizio.ore.toString().padStart(2,"0")}:${this.tempActivity.oraInizio.minuti.toString().padStart(2,"0")}:00`,i=`${this.tempActivity.oraFine.ore.toString().padStart(2,"0")}:${this.tempActivity.oraFine.minuti.toString().padStart(2,"0")}:00`,o=Rt(Oe({},this.tempActivity),{oraInizio:r,oraFine:i,userName:this.cliente?this.cliente.name:this.tempActivity.userName||"Generico"});if(this.tempActivity._editingEvent&&this.tempActivity._editingEvent.id){o.id=this.tempActivity._editingEvent.id;let s=this.activities.findIndex(a=>a.id===o.id);s!==-1?(this.activities[s]=Oe(Oe({},this.activities[s]),o),this.selectedEvent&&this.selectedEvent.id===o.id&&(this.selectedEvent=this.activities[s])):this.activities.push(o),this.tempActivity._editingEvent=null}else o.id=Date.now().toString(),this.activities.push(o);this.saveActivities(),this.saveActivityToFirestore(o),this.showActivityPicker=!1,this.resetTempActivity()})}getEventStyle(r){let i=h=>{let m=(h||"00:00:00").split(":").map(Number);return(m[0]||0)+(m[1]||0)/60},o=i(r.oraInizio),s=i(r.oraFine);if(isNaN(o)||isNaN(s)||s<=o)return{display:"none"};let a=this.START_HOUR,c=this.END_HOUR;if(o=Math.max(o,a),s=Math.min(s,c),s<=o)return{display:"none"};let l=(o-a)*this.HOUR_HEIGHT,u=(s-o)*this.HOUR_HEIGHT;return{position:"absolute",top:`${l}px`,height:`${u}px`,display:"block",zIndex:10}}openEventDetail(r,i){i.stopPropagation(),this.selectedEvent=r,this.showEventDetail=!0}editEvent(){if(!this.selectedEvent)return;let r=this.selectedEvent,i=o=>{let[s,a]=o.substring(0,5).split(":").map(Number);return{ore:s,minuti:a,secondi:0}};this.tempActivity={titolo:r.titolo||"",note:r.note||"",dataIso:r.dataIso,oraInizio:i(r.oraInizio),oraFine:i(r.oraFine),userName:r.userName||"",_editingEvent:r},this.showEventDetail=!1,this.showActivityPicker=!0}selectDay(r){this.selectedIso=r}eliminaEvento(){return te(this,null,function*(){if(this.selectedEvent){let r=this.selectedEvent.id;this.activities=this.activities.filter(i=>i.id!==r),this.selectedEvent=null,this.showEventDetail=!1,this.saveActivities(),r&&(yield this.deleteActivityFromFirestore(r))}})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Kn({type:e,selectors:[["app-calendar-planning"]],decls:32,vars:13,consts:[[1,"planning-header"],[1,"header-left"],[1,"user-selector-wrapper"],[1,"user-selector",3,"click"],[1,"avatar-small"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"user-info"],[1,"label"],[1,"value"],["class","clear-user-btn","title","Rimuovi cliente","aria-label","Rimuovi cliente",3,"click",4,"ngIf"],[1,"date-navigation"],["aria-label","Settimana prima",1,"nav-arrow",3,"click"],[1,"current-month-display"],["aria-label","Settimana dopo",1,"nav-arrow",3,"click"],[1,"header-right"],[1,"today-btn",3,"click"],[1,"planning-main"],[1,"time-column"],[1,"spacer"],["class","hour-cell",4,"ngFor","ngForOf"],[1,"days-grid"],["class","day-column",3,"is-today","today-selected","click",4,"ngFor","ngForOf"],["class","modal-backdrop",3,"click",4,"ngIf"],[3,"src","alt"],["title","Rimuovi cliente","aria-label","Rimuovi cliente",1,"clear-user-btn",3,"click"],[1,"hour-cell"],[1,"day-column",3,"click"],[1,"day-header"],[1,"day-name"],[1,"day-date"],[1,"slots-container"],["class","slot",3,"click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"slot",3,"click"],["class","event-card",3,"ngStyle","click",4,"ngIf"],[1,"event-card",3,"click","ngStyle"],[1,"ev-time"],[1,"ev-user"],[1,"ev-title"],[1,"modal-backdrop",3,"click"],[1,"modal-window","search-window",3,"click"],[1,"modal-header"],["aria-label","Chiudi",1,"close-x",3,"click"],[1,"modal-body"],["type","text","placeholder","Cerca nome...","autofocus","",1,"search-bar",3,"ngModelChange","input","ngModel"],[1,"user-list"],[1,"user-item","generic-item",3,"click"],[1,"avatar-small","generic-avatar"],[1,"u-info"],[1,"u-name"],[1,"u-sub"],["class","user-item",3,"click",4,"ngFor","ngForOf"],[1,"user-item",3,"click"],[1,"modal-window",3,"click"],[1,"info-tag"],[1,"form-group"],["type","text","placeholder","Es. Check-up, Allenamento...",3,"ngModelChange","ngModel"],[1,"time-inputs-row"],[1,"time-block"],[1,"select-wrapper"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"arrow"],["rows","2",3,"ngModelChange","ngModel"],[1,"confirm-btn",3,"click"],[3,"value"],[1,"modal-window","detail-window",3,"click"],["class","modal-body",4,"ngIf"],[1,"detail-row"],["class","detail-row",4,"ngIf"],[1,"actions-footer"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"]],template:function(i,o){i&1&&(b(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3),Se("click",function(){return o.openUserPicker()}),b(4,"div",4),Qe(5,kde,1,2,"img",5)(6,Rde,2,1,"span",6),A(),b(7,"div",7)(8,"span",8),j(9,"Pianifica per"),A(),b(10,"span",9),j(11),A()()(),Qe(12,Ode,2,0,"button",10),A(),b(13,"div",11)(14,"button",12),Se("click",function(){return o.scrollWeek(-1)}),j(15,"\u2039"),A(),b(16,"span",13),j(17),A(),b(18,"button",14),Se("click",function(){return o.scrollWeek(1)}),j(19,"\u203A"),A()()(),b(20,"div",15)(21,"button",16),Se("click",function(){return o.goToToday()}),j(22,"Oggi"),A()()(),b(23,"main",17)(24,"div",18),ht(25,"div",19),Qe(26,Fde,3,1,"div",20),A(),b(27,"div",21),Qe(28,Bde,9,11,"div",22),A()(),Qe(29,Hde,20,2,"div",23)(30,Yde,45,13,"div",23)(31,Xde,8,1,"div",23)),i&2&&(H(5),ae("ngIf",o.cliente==null?null:o.cliente.avatarUrl),H(),ae("ngIf",!(o.cliente!=null&&o.cliente.avatarUrl)),H(5),ft(o.cliente?o.cliente.name:"Nessuno (Generico)"),H(),ae("ngIf",o.cliente),H(5),ad("",o.mesi[o.selectedMonth]==null?null:o.mesi[o.selectedMonth].label," ",o.selectedYear),H(6),xv("--hour-height",o.HOUR_HEIGHT,"px"),H(3),ae("ngForOf",o.hours),H(2),ae("ngForOf",o.giorniSettimana),H(),ae("ngIf",o.showUserPicker),H(),ae("ngIf",o.showActivityPicker),H(),ae("ngIf",o.showEventDetail))},dependencies:[ac,Gi,Fi,P5,fd,Zc,Xc,Co,Ma,vs,Qo,k5],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Inter,sans-serif;overflow:hidden;background-color:#f4f7f9}.planning-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.planning-header[_ngcontent-%COMP%]{background-color:#004a87;color:#fff;height:70px;display:flex;justify-content:space-between;align-items:center;padding:0 20px;flex-shrink:0;box-shadow:0 2px 5px #00000014}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.user-selector-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.user-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background:#ffffff26;padding:5px 15px 5px 5px;border-radius:30px;cursor:pointer;transition:background .2s}.user-selector[_ngcontent-%COMP%]:hover{background:#ffffff40}.avatar-small[_ngcontent-%COMP%]{width:32px;height:32px;background:#fff;color:#004a87;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;overflow:hidden;font-size:18px}.avatar-small[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;line-height:1.1}.user-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:10px;opacity:.8;text-transform:uppercase}.user-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.clear-user-btn[_ngcontent-%COMP%]{background:#f44c;border:none;color:#fff;width:24px;height:24px;border-radius:50%;cursor:pointer;font-weight:700;display:flex;align-items:center;justify-content:center}.clear-user-btn[_ngcontent-%COMP%]:hover{background:#f44}.date-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-weight:600;font-size:18px}.nav-arrow[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:0 10px}.today-btn[_ngcontent-%COMP%]{background:#fc0;border:none;padding:6px 14px;border-radius:6px;font-weight:700;cursor:pointer;color:#004a87;box-shadow:0 2px 8px #0000000a}.today-btn[_ngcontent-%COMP%]:hover{background:#ffe066}.planning-main[_ngcontent-%COMP%]{display:flex;flex:1;overflow-y:auto;background:#fff;position:relative}.time-column[_ngcontent-%COMP%]{width:60px;border-right:1px solid #eee;flex-shrink:0;position:sticky;left:0;background:#fff;z-index:20}.time-column[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{height:60px}.hour-cell[_ngcontent-%COMP%]{height:var(--hour-height, 65px);text-align:center;font-size:11px;color:#888;position:relative}.hour-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:-8px;left:10px;background:#fff;padding:0 2px}.days-grid[_ngcontent-%COMP%]{display:flex;flex:1;min-width:0}.day-column[_ngcontent-%COMP%]{flex:1;min-width:140px;border-right:1px solid #eee;display:flex;flex-direction:column;position:relative;transition:background .15s ease}.day-column.is-today[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fff4e0f2,#fff9f0d9);border-left:4px solid #ffcc00;transition:background .15s ease,border-left-color .15s ease}.day-column.today-selected[_ngcontent-%COMP%]{outline:3px solid rgba(255,204,0,.15);box-shadow:inset 0 0 0 2px #ffcc0014;transform:translateY(-1px)}.day-column.today-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_todayPulse 1.4s ease-in-out}@keyframes _ngcontent-%COMP%_todayPulse{0%{box-shadow:0 0 #ffcc0040}50%{box-shadow:0 0 0 14px #ffcc000f}to{box-shadow:0 0 #fc00}}.day-header[_ngcontent-%COMP%]{height:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;border-bottom:2px solid #eee;position:sticky;top:0;background:#fff;z-index:10}.is-today[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]{color:#b07a00;border-bottom:2px solid rgba(255,204,0,.35)}.day-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;text-transform:uppercase}.day-date[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.slots-container[_ngcontent-%COMP%]{position:relative;height:100%}.slot[_ngcontent-%COMP%]{height:var(--hour-height, 65px);border-bottom:1px solid #f4f4f4;cursor:pointer;background:transparent;transition:background .1s}.slot[_ngcontent-%COMP%]:hover{background-color:#f2f7fd}.event-card[_ngcontent-%COMP%]{position:absolute;left:4px;right:4px;padding:5px 7px;border-radius:4px;color:#fff;font-size:11px;cursor:pointer;overflow:hidden;box-shadow:0 2px 4px #00000026;border-left:3px solid rgba(255,255,255,.35);background:linear-gradient(90deg,#006fc2 90%,#004a87);transition:transform .1s}.event-card[_ngcontent-%COMP%]:hover{transform:scale(1.03);z-index:50}.ev-time[_ngcontent-%COMP%]{font-size:9px;opacity:.9;margin-bottom:2px}.ev-user[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;font-size:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ev-title[_ngcontent-%COMP%]{font-style:italic;opacity:.92;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000073;z-index:1000;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.modal-window[_ngcontent-%COMP%]{background:#fff;width:90vw;max-width:420px;border-radius:10px;overflow:hidden;box-shadow:0 8px 32px #00000040}.modal-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:17px}.close-x[_ngcontent-%COMP%]{border:none;background:none;font-size:24px;cursor:pointer;color:#666}.modal-body[_ngcontent-%COMP%]{padding:20px}.search-bar[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:6px;margin-bottom:10px;font-size:15px;box-sizing:border-box}.user-list[_ngcontent-%COMP%]{max-height:250px;overflow-y:auto;border:1px solid #eee;border-radius:6px}.user-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;gap:10px;cursor:pointer;border-bottom:1px solid #f9f9f9;background:#fff;transition:background .1s}.user-item[_ngcontent-%COMP%]:hover{background:#e2eeff}.generic-item[_ngcontent-%COMP%]{background:#fdfdfd;font-style:italic;color:#555}.generic-avatar[_ngcontent-%COMP%]{background:#ddd;color:#666}.u-sub[_ngcontent-%COMP%]{display:block;font-size:11px;color:#888}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#666;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;box-sizing:border-box}.info-tag[_ngcontent-%COMP%]{padding:8px 12px;background:#e3f2fd;color:#0d47a1;border-radius:6px;font-size:13px;margin-bottom:15px}.info-tag.generic[_ngcontent-%COMP%]{background:#eceff1;color:#455a64}.time-inputs-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;background:#f9f9f9;padding:10px;border-radius:8px}.time-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:2px;font-weight:500;font-size:11px}.select-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:3px}.select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc;border-radius:4px;font-size:14px;min-width:42px}.arrow[_ngcontent-%COMP%]{color:#999;font-weight:700;font-size:19px}.confirm-btn[_ngcontent-%COMP%]{width:100%;padding:12px;background:#004a87;color:#fff;border:none;border-radius:6px;font-weight:700;font-size:15px;cursor:pointer}.confirm-btn[_ngcontent-%COMP%]:hover{background:#003865}.detail-row[_ngcontent-%COMP%]{margin-bottom:10px;border-bottom:1px dashed #eee;padding-bottom:5px}.edit-btn[_ngcontent-%COMP%]{margin-right:8px;background:#fff8e1;color:#b07a00;border:1px solid rgba(176,122,0,.15);padding:8px 12px;border-radius:6px;cursor:pointer;font-weight:700}.edit-btn[_ngcontent-%COMP%]:hover{background:#fff2cc}.detail-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#666;display:block}.detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .detail-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#222;margin:2px 0 0}.actions-footer[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end}.delete-btn[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;border:1px solid #ffcdd2;padding:8px 16px;border-radius:6px;font-weight:600;cursor:pointer;transition:.2s}.delete-btn[_ngcontent-%COMP%]:hover{background:#c62828;color:#fff}"]});let n=e;return n})();var Jde=[{path:"login",component:Jz},{path:"",component:f9,canActivate:[xu]},{path:"esercizi",component:v9,canActivate:[xu]},{path:"esercizi/:id",component:Xz,canActivate:[xu]},{path:"anagrafica",component:_9,canActivate:[xu]},{path:"anagrafica/list",component:y9,canActivate:[xu]},{path:"anagrafica/:id",component:Qz,canActivate:[xu]},{path:"gestione-schede",component:Zz,canActivate:[xu]},{path:"calendar-planning",component:tq,canActivate:[xu]},{path:"**",redirectTo:"login"}],nq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=dr({type:e}),e.\u0275inj=ir({imports:[_d.forRoot(Jde,{useHash:!0}),_d]});let n=e;return n})();var efe="@firebase/firestore-compat",tfe="0.3.53";function $k(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rq(){if(typeof Uint8Array>"u")throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function iq(){if(!hj())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}var eE=class n{constructor(e){this._delegate=e}static fromBase64String(e){return iq(),new n(Js.fromBase64String(e))}static fromUint8Array(e){return rq(),new n(Js.fromUint8Array(e))}toBase64(){return iq(),this._delegate.toBase64()}toUint8Array(){return rq(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Bk(n){return nfe(n,["next","error","complete"])}function nfe(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var Uk=class{enableIndexedDbPersistence(e,t){return nP(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return rP(e._delegate)}clearIndexedDbPersistence(e){return iP(e._delegate)}},tE=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof kd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){rC(this._delegate,e,t,r)}enableNetwork(){return sP(this._delegate)}disableNetwork(){return aP(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return oP(this._delegate)}onSnapshotsInSync(e){return EP(this._delegate,e)}get app(){if(!this._appCompat)throw new je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gm(this,iy(this._delegate,e))}catch(t){throw rs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Cl(this,Th(this._delegate,e))}catch(t){throw rs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wh(this,tP(this._delegate,e))}catch(t){throw rs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return SP(this._delegate,t=>e(new nE(this,t)))}batch(){return lo(this._delegate),new rE(new Gx(this._delegate,e=>Cm(this._delegate,e)))}loadBundle(e){return cP(this._delegate,e)}namedQuery(e){return lP(this._delegate,e).then(t=>t?new Wh(this,t):null)}},Hm=class extends gm{constructor(e){super(),this.firestore=e}convertBytes(e){return new eE(new Js(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Cl.forKey(t,this.firestore,null)}};function rfe(n){vN(n)}var nE=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Hm(e)}get(e){let t=Hh(e);return this._delegate.get(t).then(r=>new $h(this._firestore,new es(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Hh(e);return r?($k("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Hh(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Hh(e);return this._delegate.delete(t),this}},rE=class{constructor(e){this._delegate=e}set(e,t,r){let i=Hh(e);return r?($k("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Hh(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Hh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},$m=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Md(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Hm(e),t),i.set(t,o)),o}};$m.INSTANCES=new WeakMap;var Cl=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hm(e)}static forPath(e,t,r){if(e.length%2!==0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Zn(t._delegate,r,new nt(e)))}static forKey(e,t,r){return new n(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Gm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gm(this.firestore,iy(this._delegate,e))}catch(t){throw rs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=bn(e),e instanceof Zn?oy(this._delegate,e):!1}set(e,t){t=$k("DocumentReference.set",t);try{return t?sy(this._delegate,e,t):sy(this._delegate,e)}catch(r){throw rs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?ay(this._delegate,e):ay(this._delegate,e,t,...r)}catch(i){throw rs(i,"updateDoc()","DocumentReference.update()")}}delete(){return hC(this._delegate)}onSnapshot(...e){let t=oq(e),r=sq(e,i=>new $h(this.firestore,new es(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return xm(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=wP(this._delegate):e?.source==="server"?t=bP(this._delegate):t=dC(this._delegate),t.then(r=>new $h(this.firestore,new es(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter($m.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function rs(n,e,t){return n.message=n.message.replace(e,t),n}function oq(n){for(let e of n)if(typeof e=="object"&&!Bk(e))return e;return{}}function sq(n,e){var t,r;let i;return Bk(n[0])?i=n[0]:Bk(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var $h=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Cl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uC(this._delegate,e._delegate)}},Gh=class extends $h{data(e){let t=this._delegate.data(e);return this._delegate._converter||W7(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Wh=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hm(e)}where(e,t,r){try{return new n(this.firestore,_c(this._delegate,aC(e,t,r)))}catch(i){throw rs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,_c(this._delegate,cC(e,t)))}catch(r){throw rs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,_c(this._delegate,pP(e)))}catch(t){throw rs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,_c(this._delegate,gP(e)))}catch(t){throw rs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,_c(this._delegate,mP(...e)))}catch(t){throw rs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,_c(this._delegate,vP(...e)))}catch(t){throw rs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,_c(this._delegate,_P(...e)))}catch(t){throw rs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,_c(this._delegate,yP(...e)))}catch(t){throw rs(t,"endAt()","Query.endAt()")}}isEqual(e){return iC(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=xP(this._delegate):e?.source==="server"?t=CP(this._delegate):t=fC(this._delegate),t.then(r=>new Ry(this.firestore,new bs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=oq(e),r=sq(e,i=>new Ry(this.firestore,new bs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return xm(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter($m.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},zk=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ry=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Wh(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new zk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Gh(this._firestore,r))})}isEqual(e){return uC(this._delegate,e._delegate)}},Gm=class n extends Wh{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Cl(this.firestore,e):null}doc(e){try{return e===void 0?new Cl(this.firestore,Th(this._delegate)):new Cl(this.firestore,Th(this._delegate,e))}catch(t){throw rs(t,"doc()","CollectionReference.doc()")}}add(e){return pC(this._delegate,e).then(t=>new Cl(this.firestore,t))}isEqual(e){return oy(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter($m.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Hh(n){return Pn(n,Zn)}var qk=class n{constructor(...e){this._delegate=new vc(...e)}static documentId(){return new n(ci.keyField().canonicalString())}isEqual(e){return e=bn(e),e instanceof vc?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Hk=class n{static serverTimestamp(){let e=XB();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=AP();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=JB(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=e9(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=DP(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var ife={Firestore:tE,GeoPoint:ul,Timestamp:mr,Blob:eE,Transaction:nE,WriteBatch:rE,DocumentReference:Cl,DocumentSnapshot:$h,Query:Wh,QueryDocumentSnapshot:Gh,QuerySnapshot:Ry,CollectionReference:Gm,FieldPath:qk,FieldValue:Hk,setLogLevel:rfe,CACHE_SIZE_UNLIMITED:jB};function ofe(n,e){n.INTERNAL.registerComponent(new eo("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ife)))}function sfe(n){ofe(n,(e,t)=>new tE(e,t,new Uk)),n.registerVersion(efe,tfe)}sfe(Pi);function afe(n,e=Af){return new Ot(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function aq(n,e){return afe(n,e)}function cfe(n,e){return aq(n,e).pipe(Yu(void 0),Fp(),ut(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Kk(n,e){return aq(n,e).pipe(ut(t=>({payload:t,type:"query"})))}var iE=class{ref;afs;injector=Te(Wn);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=fq(r,t);return new sE(i,o,this.afs)}snapshotChanges(){return cfe(this.ref,this.afs.schedulers.outsideAngular).pipe(Vi(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(ut(({payload:t})=>e.idField?Rt(Oe({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return mn(this.ref.get(e)).pipe(Vi(this.injector))}};function oE(n,e){return Kk(n,e).pipe(Yu(void 0),Fp(),ut(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(h=>h.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function cq(n,e,t){return oE(n,t).pipe(Ku((r,i)=>lfe(r,i.map(o=>o.payload),e),[]),ow(),ut(r=>r.map(i=>({type:i.type,payload:i}))))}function lfe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=ufe(n,r))}),n}function Gk(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function ufe(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return Gk(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Gk(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return Gk(n,e.oldIndex,1);break}return n}function lq(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var sE=class{ref;query;afs;injector=Te(Wn);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=oE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ut(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Yu(void 0),Fp(),xr(([r,i])=>i.length>0||!r),ut(([,r])=>r),Vi(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Ku((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=lq(e);return cq(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vi(this.injector))}valueChanges(e={}){return Kk(this.query,this.afs.schedulers.outsideAngular).pipe(ut(t=>t.payload.docs.map(r=>e.idField?Rt(Oe({},r.data()),{[e.idField]:r.id}):r.data())),Vi(this.injector))}get(e){return mn(this.query.get(e)).pipe(Vi(this.injector))}add(e){return this.ref.add(e)}doc(e){return new iE(this.ref.doc(e),this.afs)}},Wk=class{query;afs;injector=Te(Wn);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?oE(this.query,this.afs.schedulers.outsideAngular).pipe(Vi(this.injector)):oE(this.query,this.afs.schedulers.outsideAngular).pipe(ut(t=>t.filter(r=>e.indexOf(r.type)>-1)),xr(t=>t.length>0),Vi(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Ku((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=lq(e);return cq(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vi(this.injector))}valueChanges(e={}){return Kk(this.query,this.afs.schedulers.outsideAngular).pipe(ut(r=>r.payload.docs.map(i=>e.idField?Oe({[e.idField]:i.id},i.data()):i.data())),Vi(this.injector))}get(e){return mn(this.query.get(e)).pipe(Vi(this.injector))}},uq=new Ye("angularfire2.enableFirestorePersistence"),dq=new Ye("angularfire2.firestore.persistenceSettings"),dfe=new Ye("angularfire2.firestore.settings"),ffe=new Ye("angularfire2.firestore.use-emulator");function fq(n,e=t=>t){return{query:e(n),ref:n}}var Yk=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=Te(Ut);constructor(t,r,i,o,s,a,c,l,u,h,m,g,x,I,M,P,Y){this.schedulers=c;let B=sh(t,a,r),K=u;h&&QD(B,a,m,x,I,M,g,P),[this.firestore,this.persistenceEnabled$]=Dg(`${B.name}.firestore`,"AngularFirestore",B.name,()=>{let oe=a.runOutsideAngular(()=>B.firestore());if(o&&oe.settings(o),K&&oe.useEmulator(...K),i&&!Lb(s)){let he=()=>{try{return mn(oe.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(q){return typeof console<"u"&&console.warn(q),mt(!1)}};return[oe,a.runOutsideAngular(he)]}else return[oe,mt(!1)]},[o,K,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=fq(i,r),a=this.ngZone.run(()=>o);return new sE(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new Wk(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new iE(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Ve(wd),Ve(bd,8),Ve(uq,8),Ve(dfe,8),Ve(Hi),Ve(Ut),Ve(si),Ve(dq,8),Ve(ffe,8),Ve(Ys,8),Ve(HD,8),Ve($D,8),Ve(GD,8),Ve(WD,8),Ve(KD,8),Ve(YD,8),Ve(_s,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),hq=(()=>{class n{constructor(){Pi.registerVersion("angularfire",oi.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:uq,useValue:!0},{provide:dq,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=ir({providers:[Yk]})}return n})();var xq="firebasestorage.googleapis.com",Cq="storageBucket",pfe=120*1e3,gfe=600*1e3,mfe=1e3;var zr=class n extends $u{constructor(e,t,r=0){super(Qk(e),`Firebase Storage: ${t} (${Qk(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},kr=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(kr||{});function Qk(n){return"storage/"+n}function iR(){let n="An unknown error occurred, please check the error payload for server response.";return new zr(kr.UNKNOWN,n)}function vfe(n){return new zr(kr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function _fe(n){return new zr(kr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yfe(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zr(kr.UNAUTHENTICATED,n)}function wfe(){return new zr(kr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bfe(n){return new zr(kr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Eq(){return new zr(kr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Iq(){return new zr(kr.CANCELED,"User canceled the upload/download.")}function xfe(n){return new zr(kr.INVALID_URL,"Invalid URL '"+n+"'.")}function Cfe(n){return new zr(kr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Efe(){return new zr(kr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Cq+"' property when initializing the app?")}function Sq(){return new zr(kr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ife(){return new zr(kr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Sfe(){return new zr(kr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Afe(n){return new zr(kr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Kh(n){return new zr(kr.INVALID_ARGUMENT,n)}function Aq(){return new zr(kr.APP_DELETED,"The Firebase app was deleted.")}function oR(n){return new zr(kr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fy(n,e){return new zr(kr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Oy(n){throw new zr(kr.INTERNAL_ERROR,"Internal error: "+n)}var is=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw Cfe(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function l(K){K.path_=decodeURIComponent(K.path)}let u="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${u}/b/${i}/o${m}`,"i"),x={bucket:1,path:3},I=t===xq?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",P=new RegExp(`^https?://${I}/${i}/${M}`,"i"),B=[{regex:a,indices:c,postModify:o},{regex:g,indices:x,postModify:l},{regex:P,indices:{bucket:1,path:2},postModify:l}];for(let K=0;K<B.length;K++){let oe=B[K],he=oe.regex.exec(e);if(he){let q=he[oe.indices.bucket],N=he[oe.indices.path];N||(N=""),r=new n(q,N),oe.postModify(r);break}}if(r==null)throw xfe(e);return r}},Xk=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Dfe(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let l=!1;function u(...M){l||(l=!0,e.apply(null,M))}function h(M){i=setTimeout(()=>{i=null,n(g,c())},M)}function m(){o&&clearTimeout(o)}function g(M,...P){if(l){m();return}if(M){m(),u.call(null,M,...P);return}if(c()||s){m(),u.call(null,M,...P);return}r<64&&(r*=2);let B;a===1?(a=2,B=0):B=(r+Math.random())*1e3,h(B)}let x=!1;function I(M){x||(x=!0,m(),!l&&(i!==null?(M||(a=2),clearTimeout(i),h(0)):M||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,I(!0)},t),I}function Tfe(n){n(!1)}function Mfe(n){return n!==void 0}function Nfe(n){return typeof n=="function"}function Pfe(n){return typeof n=="object"&&!Array.isArray(n)}function lE(n){return typeof n=="string"||n instanceof String}function pq(n){return sR()&&n instanceof Blob}function sR(){return typeof Blob<"u"}function Jk(n,e,t,r){if(r<e)throw Kh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Kh(`Invalid value for '${n}'. Expected ${t} or less.`)}function rf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Dq(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Ym=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(Ym||{});function Tq(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var eR=class{constructor(e,t,r,i,o,s,a,c,l,u,h,m=!0,g=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.retry=m,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,I)=>{this.resolve_=x,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Km(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Ym.NO_ERROR,c=o.getStatus();if(!a||Tq(c,this.additionalRetryCodes_)&&this.retry){let u=o.getErrorCode()===Ym.ABORT;r(!1,new Km(!1,null,u));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Km(l,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Mfe(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=iR();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?Aq():Iq();s(c)}else{let c=Eq();s(c)}};this.canceled_?t(!1,new Km(!1,null,!0)):this.backoffId_=Dfe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Tfe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Km=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function kfe(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Rfe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ofe(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Ffe(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Lfe(n,e,t,r,i,o,s=!0,a=!1){let c=Dq(n.urlParams),l=n.url+c,u=Object.assign({},n.headers);return Ofe(u,e),kfe(u,t),Rfe(u,o),Ffe(u,r),new eR(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function Vfe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jfe(...n){let e=Vfe();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(sR())return new Blob(n);throw new zr(kr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Bfe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Ufe(n){if(typeof atob>"u")throw Afe("base-64");return atob(n)}var ra={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ly=class{constructor(e,t){this.data=e,this.contentType=t||null}};function aR(n,e){switch(n){case ra.RAW:return new Ly(Mq(e));case ra.BASE64:case ra.BASE64URL:return new Ly(Nq(n,e));case ra.DATA_URL:return new Ly(qfe(e),Hfe(e))}throw iR()}function Mq(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function zfe(n){let e;try{e=decodeURIComponent(n)}catch{throw Fy(ra.DATA_URL,"Malformed data URL.")}return Mq(e)}function Nq(n,e){switch(n){case ra.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Fy(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ra.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Fy(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Ufe(e)}catch(i){throw i.message.includes("polyfill")?i:Fy(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var cE=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Fy(ra.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=$fe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function qfe(n){let e=new cE(n);return e.base64?Nq(ra.BASE64,e.rest):zfe(e.rest)}function Hfe(n){return new cE(n).contentType}function $fe(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Qm=class n{constructor(e,t){let r=0,i="";pq(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(pq(this.data_)){let r=this.data_,i=Bfe(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(sR()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(jfe.apply(null,t))}else{let t=e.map(s=>lE(s)?aR(ra.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function cR(n){let e;try{e=JSON.parse(n)}catch{return null}return Pfe(e)?e:null}function Gfe(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Wfe(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Pq(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Kfe(n,e){return e}var ho=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Kfe}},aE=null;function Yfe(n){return!lE(n)||n.length<2?n:Pq(n)}function uE(){if(aE)return aE;let n=[];n.push(new ho("bucket")),n.push(new ho("generation")),n.push(new ho("metageneration")),n.push(new ho("name","fullPath",!0));function e(o,s){return Yfe(s)}let t=new ho("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new ho("size");return i.xform=r,n.push(i),n.push(new ho("timeCreated")),n.push(new ho("updated")),n.push(new ho("md5Hash",null,!0)),n.push(new ho("cacheControl",null,!0)),n.push(new ho("contentDisposition",null,!0)),n.push(new ho("contentEncoding",null,!0)),n.push(new ho("contentLanguage",null,!0)),n.push(new ho("contentType",null,!0)),n.push(new ho("metadata","customMetadata",!0)),aE=n,aE}function Qfe(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new is(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function Zfe(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return Qfe(r,n),r}function kq(n,e,t){let r=cR(e);return r===null?null:Zfe(n,r,t)}function Xfe(n,e,t,r){let i=cR(e);if(i===null||!lE(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let u=n.bucket,h=n.fullPath,m="/b/"+s(u)+"/o/"+s(h),g=rf(m,t,r),x=Dq({alt:"media",token:l});return g+x})[0]}function lR(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var gq="prefixes",mq="items";function Jfe(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[gq])for(let i of t[gq]){let o=i.replace(/\/$/,""),s=n._makeStorageReference(new is(e,o));r.prefixes.push(s)}if(t[mq])for(let i of t[mq]){let o=n._makeStorageReference(new is(e,i.name));r.items.push(o)}return r}function ehe(n,e,t){let r=cR(t);return r===null?null:Jfe(n,e,r)}var Cc=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Il(n){if(!n)throw iR()}function dE(n,e){function t(r,i){let o=kq(n,i,e);return Il(o!==null),o}return t}function the(n,e){function t(r,i){let o=ehe(n,e,i);return Il(o!==null),o}return t}function nhe(n,e){function t(r,i){let o=kq(n,i,e);return Il(o!==null),Xfe(o,i,n.host,n._protocol)}return t}function Jm(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=wfe():i=yfe():t.getStatus()===402?i=_fe(n.bucket):t.getStatus()===403?i=bfe(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function fE(n){let e=Jm(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=vfe(n.path)),o.serverResponse=i.serverResponse,o}return t}function Rq(n,e,t){let r=e.fullServerUrl(),i=rf(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new Cc(i,o,dE(n,t),s);return a.errorHandler=fE(e),a}function rhe(n,e,t,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=rf(s,n.host,n._protocol),c="GET",l=n.maxOperationRetryTime,u=new Cc(a,c,the(n,e.bucket),l);return u.urlParams=o,u.errorHandler=Jm(e),u}function ihe(n,e,t){let r=e.fullServerUrl(),i=rf(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new Cc(i,o,nhe(n,t),s);return a.errorHandler=fE(e),a}function ohe(n,e,t,r){let i=e.fullServerUrl(),o=rf(i,n.host,n._protocol),s="PATCH",a=lR(t,r),c={"Content-Type":"application/json; charset=utf-8"},l=n.maxOperationRetryTime,u=new Cc(o,s,dE(n,r),l);return u.headers=c,u.body=a,u.errorHandler=fE(e),u}function she(n,e){let t=e.fullServerUrl(),r=rf(t,n.host,n._protocol),i="DELETE",o=n.maxOperationRetryTime;function s(c,l){}let a=new Cc(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=fE(e),a}function ahe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Oq(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=ahe(null,e)),r}function che(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let B="";for(let K=0;K<2;K++)B=B+Math.random().toString().slice(2);return B}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let l=Oq(e,r,i),u=lR(l,t),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+c+"--",g=Qm.getBlob(h,r,m);if(g===null)throw Sq();let x={name:l.fullPath},I=rf(o,n.host,n._protocol),M="POST",P=n.maxUploadRetryTime,Y=new Cc(I,M,dE(n,t),P);return Y.urlParams=x,Y.headers=s,Y.body=g.uploadData(),Y.errorHandler=Jm(e),Y}var Zm=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function uR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Il(!1)}return Il(!!t&&(e||["active"]).indexOf(t)!==-1),t}function lhe(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s=Oq(e,r,i),a={name:s.fullPath},c=rf(o,n.host,n._protocol),l="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=lR(s,t),m=n.maxUploadRetryTime;function g(I){uR(I);let M;try{M=I.getResponseHeader("X-Goog-Upload-URL")}catch{Il(!1)}return Il(lE(M)),M}let x=new Cc(c,l,g,m);return x.urlParams=a,x.headers=u,x.body=h,x.errorHandler=Jm(e),x}function uhe(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function o(l){let u=uR(l,["active","final"]),h=null;try{h=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Il(!1)}h||Il(!1);let m=Number(h);return Il(!isNaN(m)),new Zm(m,r.size(),u==="final")}let s="POST",a=n.maxUploadRetryTime,c=new Cc(t,s,o,a);return c.headers=i,c.errorHandler=Jm(e),c}var vq=256*1024;function dhe(n,e,t,r,i,o,s,a){let c=new Zm(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw Ife();let l=c.total-c.current,u=l;i>0&&(u=Math.min(u,i));let h=c.current,m=h+u,g="";u===0?g="finalize":l===u?g="upload, finalize":g="upload";let x={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${c.current}`},I=r.slice(h,m);if(I===null)throw Sq();function M(K,oe){let he=uR(K,["active","final"]),q=c.current+u,N=r.size(),S;return he==="final"?S=dE(e,o)(K,oe):S=null,new Zm(q,N,he==="final",S)}let P="POST",Y=e.maxUploadRetryTime,B=new Cc(t,P,M,Y);return B.headers=x,B.body=I.uploadData(),B.progressCallback=a||null,B.errorHandler=Jm(n),B}var Fq={STATE_CHANGED:"state_changed"},No={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Zk(n){switch(n){case"running":case"pausing":case"canceling":return No.RUNNING;case"paused":return No.PAUSED;case"success":return No.SUCCESS;case"canceled":return No.CANCELED;case"error":return No.ERROR;default:return No.ERROR}}var tR=class{constructor(e,t,r){if(Nfe(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function Wm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var _q=null,nR=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ym.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ym.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ym.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw Oy("cannot .send() more than once");if(hp(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oy("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},rR=class extends nR{initXhr(){this.xhr_.responseType="text"}};function El(){return _q?_q():new rR}var Vy=class{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=uE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(kr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(Tq(i.status,[]))if(o)i=Eq();else{this.sleepTime=Math.max(this.sleepTime*2,mfe),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(kr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=lhe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,El,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=uhe(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,El,t,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=vq*this._chunkMultiplier,t=new Zm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=dhe(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,El,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){vq*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=Rq(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,El,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=che(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,El,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Iq(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=Zk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let o=new tR(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Zk(this._state)){case No.SUCCESS:Wm(this._resolve.bind(null,this.snapshot))();break;case No.CANCELED:case No.ERROR:let t=this._reject;Wm(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Zk(this._state)){case No.RUNNING:case No.PAUSED:e.next&&Wm(e.next.bind(e,this.snapshot))();break;case No.SUCCESS:e.complete&&Wm(e.complete.bind(e))();break;case No.CANCELED:case No.ERROR:e.error&&Wm(e.error.bind(e,this._error))();break;default:e.error&&Wm(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Xm=class n{constructor(e,t){this._service=e,t instanceof is?this._location=t:this._location=is.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pq(this._location.path)}get storage(){return this._service}get parent(){let e=Gfe(this._location.path);if(e===null)return null;let t=new is(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw oR(e)}};function fhe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Vy(n,new Qm(e),t)}function hhe(n){let e={prefixes:[],items:[]};return Lq(n,e).then(()=>e)}function Lq(n,e,t){return te(this,null,function*(){let i=yield Vq(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield Lq(n,e,i.nextPageToken))})}function Vq(n,e){e!=null&&typeof e.maxResults=="number"&&Jk("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=rhe(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,El)}function phe(n){n._throwIfRoot("getMetadata");let e=Rq(n.storage,n._location,uE());return n.storage.makeRequestWithTokens(e,El)}function ghe(n,e){n._throwIfRoot("updateMetadata");let t=ohe(n.storage,n._location,e,uE());return n.storage.makeRequestWithTokens(t,El)}function mhe(n){n._throwIfRoot("getDownloadURL");let e=ihe(n.storage,n._location,uE());return n.storage.makeRequestWithTokens(e,El).then(t=>{if(t===null)throw Sfe();return t})}function vhe(n){n._throwIfRoot("deleteObject");let e=she(n.storage,n._location);return n.storage.makeRequestWithTokens(e,El)}function jq(n,e){let t=Wfe(n._location.path,e),r=new is(n._location.bucket,t);return new Xm(n.storage,r)}function _he(n){return/^[A-Za-z]+:\/\//.test(n)}function yhe(n,e){return new Xm(n,e)}function Bq(n,e){if(n instanceof jy){let t=n;if(t._bucket==null)throw Efe();let r=new Xm(t,t._bucket);return e!=null?Bq(r,e):r}else return e!==void 0?jq(n,e):n}function whe(n,e){if(e&&_he(e)){if(n instanceof jy)return yhe(n,e);throw Kh("To use ref(service, url), the first argument must be a Storage instance.")}else return Bq(n,e)}function yq(n,e){let t=e?.[Cq];return t==null?null:is.makeFromBucketSpec(t,n)}function bhe(n,e,t,r={}){n.host=`${e}:${t}`;let i=hp(e);i&&(_1(`https://${n.host}/b`),w1("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:y1(o,n.app.options.projectId))}var jy=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=xq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pfe,this._maxUploadRetryTime=gfe,this._requests=new Set,i!=null?this._bucket=is.makeFromBucketSpec(i,this._host):this._bucket=yq(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=is.makeFromBucketSpec(this._url,e):this._bucket=yq(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return te(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return te(this,null,function*(){if(x1(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xm(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Xk(Aq());{let s=Lfe(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return te(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},wq="@firebase/storage",bq="0.13.14";var Uq="storage";function dR(n,e,t){return n=bn(n),fhe(n,e,t)}function fR(n){return n=bn(n),phe(n)}function hR(n,e){return n=bn(n),ghe(n,e)}function pR(n,e){return n=bn(n),Vq(n,e)}function gR(n){return n=bn(n),hhe(n)}function mR(n){return n=bn(n),mhe(n)}function vR(n){return n=bn(n),vhe(n)}function hE(n,e){return n=bn(n),whe(n,e)}function zq(n,e){return jq(n,e)}function qq(n=Fc(),e){n=bn(n);let r=$a(n,Uq).getImmediate({identifier:e}),i=v1("storage");return i&&pE(r,...i),r}function pE(n,e,t,r={}){bhe(n,e,t,r)}function xhe(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new jy(t,r,i,e,C1)}function Che(){zs(new eo(Uq,xhe,"PUBLIC").setMultipleInstances(!0)),Gn(wq,bq,""),Gn(wq,bq,"esm2017")}Che();var e0=class{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var gE=class{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new e0(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new e0(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(typeof t=="function"?o=s=>t(new e0(s,this,this._ref)):o={next:t.next?s=>t.next(new e0(s,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},mE=class{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Yh(e,this._service))}get items(){return this._delegate.items.map(e=>new Yh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Yh=class n{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let t=zq(this._delegate,e);return new n(t,this.storage)}get root(){return new n(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new n(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new gE(dR(this._delegate,e,t),this)}putString(e,t=ra.RAW,r){this._throwIfRoot("putString");let i=aR(t,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new gE(new Vy(this._delegate,new Qm(i.data,!0),o),this)}listAll(){return gR(this._delegate).then(e=>new mE(e,this.storage))}list(e){return pR(this._delegate,e||void 0).then(t=>new mE(t,this.storage))}getMetadata(){return fR(this._delegate)}updateMetadata(e){return hR(this._delegate,e)}getDownloadURL(){return mR(this._delegate)}delete(){return this._throwIfRoot("delete"),vR(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw oR(e)}};var vE=class{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Hq(e))throw Kh("ref() expected a child path but got a URL, use refFromURL instead.");return new Yh(hE(this._delegate,e),this)}refFromURL(e){if(!Hq(e))throw Kh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{is.makeFromUrl(e,this._delegate.host)}catch{throw Kh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Yh(hE(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){pE(this._delegate,e,t,r)}};function Hq(n){return/^[A-Za-z]+:\/\//.test(n)}var Ehe="@firebase/storage-compat",Ihe="0.3.24";var She="storage-compat";function Ahe(n,{instanceIdentifier:e}){let t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new vE(t,r)}function Dhe(n){let e={TaskState:No,TaskEvent:Fq,StringFormat:ra,Storage:vE,Reference:Yh};n.INTERNAL.registerComponent(new eo(She,Ahe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(Ehe,Ihe)}Dhe(Pi);function The(n){return new Ot(e=>{let t=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();t(n.snapshot);let o=n.on("state_changed",t);return n.then(s=>{t(s),i()},s=>{t(n.snapshot),r(s)}),function(){o()}}).pipe(EI(0))}function $q(n){let e=The(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ut(t=>t.bytesTransferred/t.totalBytes*100))}}function _E(n,e){return{getDownloadURL:()=>mt(void 0).pipe(bo(e.get(si).outsideAngular),Nn(()=>n.getDownloadURL()),Vi(e)),getMetadata:()=>mt(void 0).pipe(bo(e.get(si).outsideAngular),Nn(()=>n.getMetadata()),Vi(e)),delete:()=>mn(n.delete()),child:t=>_E(n.child(t),e),updateMetadata:t=>mn(n.updateMetadata(t)),put:(t,r)=>{let i=n.put(t,r);return $q(i)},putString:(t,r,i)=>{let o=n.putString(t,r,i);return $q(o)},list:t=>mn(n.list(t)),listAll:()=>mn(n.listAll())}}var Mhe=new Ye("angularfire2.storageBucket"),Nhe=new Ye("angularfire2.storage.maxUploadRetryTime"),Phe=new Ye("angularfire2.storage.maxOperationRetryTime"),khe=new Ye("angularfire2.storage.use-emulator"),_R=(()=>{class n{storage;injector=Te(Wn);constructor(t,r,i,o,s,a,c,l,u,h){let m=sh(t,s,r);this.storage=Dg(`${m.name}.storage.${i}`,"AngularFireStorage",m.name,()=>{let g=s.runOutsideAngular(()=>m.storage(i||void 0)),x=u;return x&&g.useEmulator(...x),c&&g.setMaxUploadRetryTime(c),l&&g.setMaxOperationRetryTime(l),g},[c,l])}ref(t){return _E(this.storage.ref(t),this.injector)}refFromURL(t){return _E(this.storage.refFromURL(t),this.injector)}upload(t,r,i){let o=this.storage.ref(t);return _E(o,this.injector).put(r,i)}static \u0275fac=function(r){return new(r||n)(Ve(wd),Ve(bd,8),Ve(Mhe,8),Ve(Hi),Ve(Ut),Ve(si),Ve(Nhe,8),Ve(Phe,8),Ve(khe,8),Ve(_s,8))};static \u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Gq=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=ir({})}return n})(),Wq=(()=>{class n{constructor(){Pi.registerVersion("angularfire",oi.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=ir({providers:[_R],imports:[Gq,Gq]})}return n})();var Kq=(()=>{let e=class e{constructor(r,i,o){this.firestore=r,this.auth=i,this.storage=o,this.schedeCollection=this.firestore.collection("schede")}testWrite(){return te(this,null,function*(){try{try{(yield this.auth.currentUser)||(yield this.auth.signInAnonymously())}catch{}return{ok:!0,id:(yield this.schedeCollection.add({nome:"debug-"+Date.now(),dataCreazione:new Date,idCliente:"debug",esercizi:[]})).id}}catch(r){return console.error("FirebaseService.testWrite error",r),{ok:!1,error:r}}})}getSchede(){return this.schedeCollection.snapshotChanges().pipe(ut(r=>r.map(i=>{let o=i.payload.doc.data(),s=i.payload.doc.id;return Oe({id:s},o)})))}getScheda(r){return this.schedeCollection.doc(r).valueChanges().pipe(ut(i=>i?Rt(Oe({},i),{id:r}):void 0))}addScheda(r){return this.schedeCollection.add(r)}updateScheda(r,i){return this.schedeCollection.doc(r).update(i)}deleteScheda(r){return this.schedeCollection.doc(r).delete()}};e.\u0275fac=function(i){return new(i||e)(Ve(Yk),Ve(Ys),Ve(_R))},e.\u0275prov=Ze({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var By=class{constructor(e){return e}},Yq="storage",yR=class{constructor(){return rl(Yq)}};var wR=new Ye("angularfire2.storage-instances");function Ohe(n,e){let t=ou(Yq,n,e);return t&&new By(t)}function Fhe(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new By(r)}}var Lhe={provide:yR,deps:[[new Ar,wR]]},Vhe={provide:By,useFactory:Ohe,deps:[[new Ar,wR],Ks]};function Qq(n,...e){return Gn("angularfire",oi.full,"gcs"),io([Vhe,Lhe,{provide:wR,useFactory:Fhe(n),multi:!0,deps:[Ut,Rn,si,dc,[new Ar,ah],[new Ar,_s],...e]}])}var Zq=Mr(qq,!0);var eH="@firebase/installations",ER="0.6.18";var tH=1e4,nH=`w:${ER}`,rH="FIS_v2",jhe="https://firebaseinstallations.googleapis.com/v1",Bhe=3600*1e3,Uhe="installations",zhe="Installations";var qhe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Zh=new gp(Uhe,zhe,qhe);function iH(n){return n instanceof $u&&n.code.includes("request-failed")}function oH({projectId:n}){return`${jhe}/projects/${n}/installations`}function sH(n){return{token:n.token,requestStatus:2,expiresIn:$he(n.expiresIn),creationTime:Date.now()}}function aH(n,e){return te(this,null,function*(){let r=(yield e.json()).error;return Zh.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function cH({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Hhe(n,{refreshToken:e}){let t=cH(n);return t.append("Authorization",Ghe(e)),t}function lH(n){return te(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function $he(n){return Number(n.replace("s","000"))}function Ghe(n){return`${rH} ${n}`}function Whe(r,i){return te(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=oH(n),s=cH(n),a=e.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}let c={fid:t,authVersion:rH,appId:n.appId,sdkVersion:nH},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield lH(()=>fetch(o,l));if(u.ok){let h=yield u.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:sH(h.authToken)}}else throw yield aH("Create Installation",u)})}function uH(n){return new Promise(e=>{setTimeout(e,n)})}function Khe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var Yhe=/^[cdef][\w-]{21}$/,CR="";function Qhe(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=Zhe(n);return Yhe.test(t)?t:CR}catch{return CR}}function Zhe(n){return Khe(n).substr(0,22)}function wE(n){return`${n.appName}!${n.appId}`}var dH=new Map;function fH(n,e){let t=wE(n);hH(t,e),Xhe(t,e)}function hH(n,e){let t=dH.get(n);if(t)for(let r of t)r(e)}function Xhe(n,e){let t=Jhe();t&&t.postMessage({key:n,fid:e}),epe()}var Qh=null;function Jhe(){return!Qh&&"BroadcastChannel"in self&&(Qh=new BroadcastChannel("[Firebase] FID Change"),Qh.onmessage=n=>{hH(n.data.key,n.data.fid)}),Qh}function epe(){dH.size===0&&Qh&&(Qh.close(),Qh=null)}var tpe="firebase-installations-database",npe=1,Xh="firebase-installations-store",bR=null;function IR(){return bR||(bR=XO(tpe,npe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Xh)}}})),bR}function yE(n,e){return te(this,null,function*(){let t=wE(n),i=(yield IR()).transaction(Xh,"readwrite"),o=i.objectStore(Xh),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&fH(n,e.fid),e})}function pH(n){return te(this,null,function*(){let e=wE(n),r=(yield IR()).transaction(Xh,"readwrite");yield r.objectStore(Xh).delete(e),yield r.done})}function bE(n,e){return te(this,null,function*(){let t=wE(n),i=(yield IR()).transaction(Xh,"readwrite"),o=i.objectStore(Xh),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&fH(n,a.fid),a})}function SR(n){return te(this,null,function*(){let e,t=yield bE(n.appConfig,r=>{let i=rpe(r),o=ipe(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===CR?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function rpe(n){let e=n||{fid:Qhe(),registrationStatus:0};return gH(e)}function ipe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Zh.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=ope(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:spe(n)}:{installationEntry:e}}function ope(n,e){return te(this,null,function*(){try{let t=yield Whe(n,e);return yE(n.appConfig,t)}catch(t){throw iH(t)&&t.customData.serverCode===409?yield pH(n.appConfig):yield yE(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function spe(n){return te(this,null,function*(){let e=yield Xq(n.appConfig);for(;e.registrationStatus===1;)yield uH(100),e=yield Xq(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield SR(n);return r||t}return e})}function Xq(n){return bE(n,e=>{if(!e)throw Zh.create("installation-not-found");return gH(e)})}function gH(n){return ape(n)?{fid:n.fid,registrationStatus:0}:n}function ape(n){return n.registrationStatus===1&&n.registrationTime+tH<Date.now()}function cpe(r,i){return te(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=lpe(n,t),s=Hhe(n,t),a=e.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}let c={installation:{sdkVersion:nH,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield lH(()=>fetch(o,l));if(u.ok){let h=yield u.json();return sH(h)}else throw yield aH("Generate Auth Token",u)})}function lpe(n,{fid:e}){return`${oH(n)}/${e}/authTokens:generate`}function AR(n,e=!1){return te(this,null,function*(){let t,r=yield bE(n.appConfig,o=>{if(!mH(o))throw Zh.create("not-registered");let s=o.authToken;if(!e&&fpe(s))return o;if(s.requestStatus===1)return t=upe(n,e),o;{if(!navigator.onLine)throw Zh.create("app-offline");let a=ppe(o);return t=dpe(n,a),a}});return t?yield t:r.authToken})}function upe(n,e){return te(this,null,function*(){let t=yield Jq(n.appConfig);for(;t.authToken.requestStatus===1;)yield uH(100),t=yield Jq(n.appConfig);let r=t.authToken;return r.requestStatus===0?AR(n,e):r})}function Jq(n){return bE(n,e=>{if(!mH(e))throw Zh.create("not-registered");let t=e.authToken;return gpe(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function dpe(n,e){return te(this,null,function*(){try{let t=yield cpe(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield yE(n.appConfig,r),t}catch(t){if(iH(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield pH(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield yE(n.appConfig,r)}throw t}})}function mH(n){return n!==void 0&&n.registrationStatus===2}function fpe(n){return n.requestStatus===2&&!hpe(n)}function hpe(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Bhe}function ppe(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function gpe(n){return n.requestStatus===1&&n.requestTime+tH<Date.now()}function mpe(n){return te(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield SR(e);return r?r.catch(console.error):AR(e).catch(console.error),t.fid})}function vpe(n,e=!1){return te(this,null,function*(){let t=n;return yield _pe(t),(yield AR(t,e)).token})}function _pe(n){return te(this,null,function*(){let{registrationPromise:e}=yield SR(n);e&&(yield e)})}function ype(n){if(!n||!n.options)throw xR("App Configuration");if(!n.name)throw xR("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw xR(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function xR(n){return Zh.create("missing-app-config-values",{valueName:n})}var vH="installations",wpe="installations-internal",bpe=n=>{let e=n.getProvider("app").getImmediate(),t=ype(e),r=$a(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},xpe=n=>{let e=n.getProvider("app").getImmediate(),t=$a(e,vH).getImmediate();return{getId:()=>mpe(t),getToken:i=>vpe(t,i)}};function Cpe(){zs(new eo(vH,bpe,"PUBLIC")),zs(new eo(wpe,xpe,"PRIVATE"))}Cpe();Gn(eH,ER);Gn(eH,ER,"esm2017");var xE="analytics",Epe="firebase_id",Ipe="origin",Spe=60*1e3,Ape="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",RR="https://www.googletagmanager.com/gtag/js";var Is=new vp("@firebase/analytics");var Dpe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ia=new gp("analytics","Analytics",Dpe);function Tpe(n){if(!n.startsWith(RR)){let e=ia.create("invalid-gtag-resource",{gtagURL:n});return Is.warn(e.message),""}return n}function EH(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Mpe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Npe(n,e){let t=Mpe("firebase-js-sdk-policy",{createScriptURL:Tpe}),r=document.createElement("script"),i=`${RR}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Ppe(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function kpe(n,e,t,r,i,o){return te(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield EH(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){Is.error(a)}n("config",i,o)})}function Rpe(n,e,t,r,i){return te(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield EH(t);for(let c of s){let l=a.find(h=>h.measurementId===c),u=l&&e[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Is.error(o)}})}function Ope(n,e,t,r){function i(o,...s){return te(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield Rpe(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield kpe(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,l]=s;n("get",a,c,l)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){Is.error(a)}})}return i}function Fpe(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=Ope(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function Lpe(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(RR)&&t.src.includes(n))return t;return null}var Vpe=30,jpe=1e3,TR=class{constructor(e={},t=jpe){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},IH=new TR;function Bpe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Upe(n){return te(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:Bpe(r)},o=Ape.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw ia.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function zpe(r){return te(this,arguments,function*(n,e=IH,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw ia.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw ia.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new MR;return setTimeout(()=>te(null,null,function*(){c.abort()}),t!==void 0?t:Spe),SH({appId:i,apiKey:o,measurementId:s},a,c,e)})}function SH(o,s,a){return te(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=IH){var c;let{appId:l,measurementId:u}=n;try{yield qpe(r,e)}catch(h){if(u)return Is.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:l,measurementId:u};throw h}try{let h=yield Upe(n);return i.deleteThrottleMetadata(l),h}catch(h){let m=h;if(!Hpe(m)){if(i.deleteThrottleMetadata(l),u)return Is.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:u};throw h}let g=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?b1(t,i.intervalMillis,Vpe):b1(t,i.intervalMillis),x={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return i.setThrottleMetadata(l,x),Is.debug(`Calling attemptFetch again in ${g} millis`),SH(n,x,r,i)}})}function qpe(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(ia.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Hpe(n){if(!(n instanceof $u)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var MR=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var NR;function $pe(n,e,t,r,i){return te(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}var PR;function Gpe(n){PR=n}function Wpe(n){NR=n}function Kpe(){return te(this,null,function*(){if(pp())try{yield QO()}catch(n){return Is.warn(ia.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Is.warn(ia.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Ype(n,e,t,r,i,o,s){return te(this,null,function*(){var a;let c=zpe(n);c.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&Is.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Is.error(g)),e.push(c);let l=Kpe().then(g=>{if(g)return r.getId()}),[u,h]=yield Promise.all([c,l]);Lpe(o)||Npe(o,u.measurementId),PR&&(i("consent","default",PR),Gpe(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[Ipe]="firebase",m.update=!0,h!=null&&(m[Epe]=h),i("config",u.measurementId,m),NR&&(i("set",NR),Wpe(void 0)),u.measurementId})}var kR=class{constructor(e){this.app=e}_delete(){return delete Uy[this.app.options.appId],Promise.resolve()}},Uy={},_H=[],yH={},DR="dataLayer",Qpe="gtag",wH,AH,bH=!1;function Zpe(){let n=[];if(YO()&&n.push("This is a browser extension environment."),ZO()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ia.create("invalid-analytics-context",{errorInfo:e});Is.warn(t.message)}}function Xpe(n,e,t){Zpe();let r=n.options.appId;if(!r)throw ia.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Is.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ia.create("no-api-key");if(Uy[r]!=null)throw ia.create("already-exists",{id:r});if(!bH){Ppe(DR);let{wrappedGtag:o,gtagCore:s}=Fpe(Uy,_H,yH,DR,Qpe);AH=o,wH=s,bH=!0}return Uy[r]=Ype(n,_H,yH,e,wH,DR,t),new kR(n)}function DH(n=Fc()){n=bn(n);let e=$a(n,xE);return e.isInitialized()?e.getImmediate():TH(n)}function TH(n,e={}){let t=$a(n,xE);if(t.isInitialized()){let i=t.getImmediate();if(mp(e,t.getOptions()))return i;throw ia.create("already-initialized")}return t.initialize({options:e})}function MH(n,e,t,r){n=bn(n),$pe(AH,Uy[n.app.options.appId],e,t,r).catch(i=>Is.error(i))}var xH="@firebase/analytics",CH="0.10.17";function Jpe(){zs(new eo(xE,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Xpe(r,i,t)},"PUBLIC")),zs(new eo("analytics-internal",n,"PRIVATE")),Gn(xH,CH),Gn(xH,CH,"esm2017");function n(e){try{let t=e.getProvider(xE).getImmediate();return{logEvent:(r,i,o)=>MH(t,r,i,o)}}catch(t){throw ia.create("interop-component-reg-failed",{reason:t})}}}Jpe();var zy=class{constructor(e){return e}},NH="analytics",OR=class{constructor(){return rl(NH)}};var PH=Mr(DH,!0);var lFe=Math.floor(Math.random()*(2**32-1))-2**31;var FR=new Ye("angularfire2.analytics-instances");function ege(n,e,t){if(!V5(t))return null;let r=ou(NH,n,e);return r&&new zy(r)}function tge(n){return(e,t,r)=>{if(!V5(r))return null;let i=e.runOutsideAngular(()=>n(t));return new zy(i)}}var nge={provide:OR,deps:[[new Ar,FR]]},rge={provide:zy,useFactory:ege,deps:[[new Ar,FR],Ks,Hi]};function kH(n,...e){return Gn("angularfire",oi.full,"analytics"),io([rge,nge,{provide:FR,useFactory:tge(n),multi:!0,deps:[Ut,Rn,Hi,si,dc,...e]}])}var LR="Service workers are disabled or not supported by this browser",t0=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Ot(r=>r.error(new Je(5601,!1)));else{let r=null,i=new kn;this.worker=new Ot(l=>(r!==null&&l.next(r),i.subscribe(u=>l.next(u))));let o=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Nn(()=>e.getRegistration().then(l=>{if(!l)throw new Je(5601,!1);return l})));let s=new kn;this.events=s.asObservable();let a=l=>{let{data:u}=l;u?.type&&s.next(u)};e.addEventListener("message",a),t?.get(Yo,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(no(1)).subscribe(i=>{i.postMessage(Oe({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(xr(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(no(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(xr(i=>i.nonce===e),no(1),ut(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},OH=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new kn;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Ul,this.notificationClicks=Ul,this.notificationCloses=Ul,this.pushSubscriptionChanges=Ul,this.subscription=Ul;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ut(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ut(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(ut(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(ut(i=>i.data)),this.pushManager=this.sw.registration.pipe(ut(i=>i.pushManager));let r=this.pushManager.pipe(Nn(i=>i.getSubscription()));this.subscription=new Ot(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(LR));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Nn(c=>c.subscribe(r)),no(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(LR));let t=r=>{if(r===null)throw new Je(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new Je(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(no(1),Nn(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(Ve(t0))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})(),FH=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Ul,this.unrecoverable=Ul;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(LR));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Je(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(Ve(t0))};static \u0275prov=Ze({token:n,factory:n.\u0275fac})}return n})();var LH=new Ye("");function ige(){let n=Te(qy);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=Te(LH),t=Te(Ut),r=Te(Yo);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=RH(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),RH(+a[0])]);break;default:throw new Je(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error(Za(5604,!1)))})})}function RH(n){return new Promise(e=>setTimeout(e,n))}function oge(n,e){return new t0(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var qy=class{enabled;updateViaCache;type;scope;registrationStrategy};function sge(n,e={}){return io([OH,FH,{provide:LH,useValue:n},{provide:qy,useValue:e},{provide:t0,useFactory:oge,deps:[qy,Rn]},rg(ige)])}var VH=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[sge(t,r)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=ir({providers:[OH,FH]})}return n})();var a0=EG(V$(),1);var eme=["qrcElement"],j$=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.sanitizer=i,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new jr,this.context=null}ngOnChanges(){return te(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(r){return this.allowEmptyString===!1?!(typeof r>"u"||r===""||r==="null"||r===null):!(typeof r>"u")}toDataURL(r){return new Promise((i,o)=>{(0,a0.toDataURL)(this.qrdata,r,(s,a)=>{s?o(s):i(a)})})}toCanvas(r,i){return new Promise((o,s)=>{(0,a0.toCanvas)(r,this.qrdata,i,a=>{a?s(a):o("success")})})}toSVG(r){return new Promise((i,o)=>{(0,a0.toString)(this.qrdata,r,(s,a)=>{s?o(s):i(a)})})}renderElement(r){for(let i of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,i);this.renderer.appendChild(this.qrcElement.nativeElement,r)}createQRCode(){return te(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let r={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},i=this.imageSrc,o=this.imageHeight||40,s=this.imageWidth||40;switch(this.elementType){case"canvas":{let a=this.renderer.createElement("canvas");this.context=a.getContext("2d"),this.toCanvas(a,r).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(a,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(a,"title",`${this.title}`),i&&this.context){this.centerImage=new Image(s,o),i!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=i),o!==this.centerImage.height&&(this.centerImage.height=o),s!==this.centerImage.width&&(this.centerImage.width=s);let c=this.centerImage;c&&(c.onload=()=>{this.context?.drawImage(c,a.width/2-s/2,a.height/2-o/2,s,o)})}this.renderElement(a),this.emitQRCodeURL(a)}).catch(c=>{console.error("[angularx-qrcode] canvas error:",c)});break}case"svg":{let a=this.renderer.createElement("div");this.toSVG(r).then(c=>{this.renderer.setProperty(a,"innerHTML",c);let l=a.firstChild;this.renderer.setAttribute(l,"height",`${this.width}`),this.renderer.setAttribute(l,"width",`${this.width}`),this.renderElement(l),this.emitQRCodeURL(l)}).catch(c=>{console.error("[angularx-qrcode] svg error:",c)});break}case"url":case"img":default:{let a=this.renderer.createElement("img");this.toDataURL(r).then(c=>{this.alt&&a.setAttribute("alt",this.alt),this.ariaLabel&&a.setAttribute("aria-label",this.ariaLabel),a.setAttribute("src",c),this.title&&a.setAttribute("title",this.title),this.renderElement(a),this.emitQRCodeURL(a)}).catch(c=>{console.error("[angularx-qrcode] img/url error:",c)})}}}catch(r){console.error("[angularx-qrcode] Error generating QR Code:",r.message)}})}convertBase64ImageUrlToBlob(r){let i=r.split(";base64,"),o=i[0].split(":")[1],s=atob(i[1]),a=new Uint8Array(s.length);for(let c=0;c<s.length;++c)a[c]=s.charCodeAt(c);return new Blob([a],{type:o})}emitQRCodeURL(r){let i=r.constructor.name;if(i===SVGSVGElement.name){let l=r.outerHTML,u=new Blob([l],{type:"image/svg+xml"}),h=URL.createObjectURL(u),m=this.sanitizer.bypassSecurityTrustUrl(h);this.qrCodeURL.emit(m);return}let o="";i===HTMLCanvasElement.name&&(o=r.toDataURL("image/png")),i===HTMLImageElement.name&&(o=r.src);let s=this.convertBase64ImageUrlToBlob(o),a=URL.createObjectURL(s),c=this.sanitizer.bypassSecurityTrustUrl(a);this.qrCodeURL.emit(c)}};e.\u0275fac=function(i){return new(i||e)(tt(Wo),tt(Y5))},e.\u0275cmp=Kn({type:e,selectors:[["qrcode"]],viewQuery:function(i,o){if(i&1&&bv(eme,7),i&2){let s;Wf(s=Kf())&&(o.qrcElement=s.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[Sa],decls:2,vars:2,consts:[["qrcElement",""]],template:function(i,o){i&1&&Sb(0,"div",null,0),i&2&&l5(o.cssClass)},encapsulation:2,changeDetection:0});let n=e;return n})();var B$=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=dr({type:e,bootstrap:[EV]}),e.\u0275inj=ir({providers:[Kq,sV(()=>aV(c_.firebase)),SV(()=>AV()),s9(()=>c9()),Qq(()=>Zq()),kH(()=>PH())],imports:[K5,ac,fd,nq,j$,wV.initializeApp(c_.firebase),bV,hq,Wq,VH.register("ngsw-worker.js",{enabled:!cd(),registrationStrategy:"registerWhenStable:30000"})]});let n=e;return n})();W5().bootstrapModule(B$).catch(n=>console.error(n));
