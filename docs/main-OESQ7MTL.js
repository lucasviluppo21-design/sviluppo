import{A as mp,B as XO,C as Us,D as Ha,E as x1,F as C1,G as JO,H as Oc,I as E1,J as Gn,K as Di,L as tI,a as $O,b as m1,c as GO,d as WO,e as KO,f as ZE,g as v1,h as XE,i as fp,j as y1,k as _1,l as w1,m as S0,n as YO,o as JE,p as eI,q as hp,r as QO,s as ZO,t as $u,u as pp,v as gp,w as b1,x as bn,y as Zi,z as Rc}from"./chunk-WLKSXRLX.js";import{a as Oe,b as Rt,c as rr,e as EG,f as QE,g as ee}from"./chunk-WTI2L5DI.js";var BH=rr((iFe,jH)=>{"use strict";jH.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var of=rr(Xh=>{"use strict";var VR,$pe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Xh.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Xh.getSymbolTotalCodewords=function(e){return $pe[e]};Xh.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Xh.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');VR=e};Xh.isKanjiModeEnabled=function(){return typeof VR<"u"};Xh.toSJIS=function(e){return VR(e)}});var CE=rr(Ra=>{"use strict";Ra.L={bit:1};Ra.M={bit:0};Ra.Q={bit:3};Ra.H={bit:2};function Gpe(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return Ra.L;case"m":case"medium":return Ra.M;case"q":case"quartile":return Ra.Q;case"h":case"high":return Ra.H;default:throw new Error("Unknown EC Level: "+n)}}Ra.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};Ra.from=function(e,t){if(Ra.isValid(e))return e;try{return Gpe(e)}catch{return t}}});var qH=rr((aFe,zH)=>{"use strict";function UH(){this.buffer=[],this.length=0}UH.prototype={get:function(n){let e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};zH.exports=UH});var $H=rr((cFe,HH)=>{"use strict";function H_(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}H_.prototype.set=function(n,e,t,r){let i=n*this.size+e;this.data[i]=t,r&&(this.reservedBit[i]=!0)};H_.prototype.get=function(n,e){return this.data[n*this.size+e]};H_.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};H_.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};HH.exports=H_});var GH=rr(EE=>{"use strict";var Wpe=of().getSymbolSize;EE.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,r=Wpe(e),i=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let s=1;s<t-1;s++)o[s]=o[s-1]-i;return o.push(6),o.reverse()};EE.getPositions=function(e){let t=[],r=EE.getRowColCoords(e),i=r.length;for(let o=0;o<i;o++)for(let s=0;s<i;s++)o===0&&s===0||o===0&&s===i-1||o===i-1&&s===0||t.push([r[o],r[s]]);return t}});var YH=rr(KH=>{"use strict";var Kpe=of().getSymbolSize,WH=7;KH.getPositions=function(e){let t=Kpe(e);return[[0,0],[t-WH,0],[0,t-WH]]}});var QH=rr(mr=>{"use strict";mr.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Jh={N1:3,N2:3,N3:40,N4:10};mr.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};mr.from=function(e){return mr.isValid(e)?parseInt(e,10):void 0};mr.getPenaltyN1=function(e){let t=e.size,r=0,i=0,o=0,s=null,a=null;for(let c=0;c<t;c++){i=o=0,s=a=null;for(let l=0;l<t;l++){let u=e.get(c,l);u===s?i++:(i>=5&&(r+=Jh.N1+(i-5)),s=u,i=1),u=e.get(l,c),u===a?o++:(o>=5&&(r+=Jh.N1+(o-5)),a=u,o=1)}i>=5&&(r+=Jh.N1+(i-5)),o>=5&&(r+=Jh.N1+(o-5))}return r};mr.getPenaltyN2=function(e){let t=e.size,r=0;for(let i=0;i<t-1;i++)for(let o=0;o<t-1;o++){let s=e.get(i,o)+e.get(i,o+1)+e.get(i+1,o)+e.get(i+1,o+1);(s===4||s===0)&&r++}return r*Jh.N2};mr.getPenaltyN3=function(e){let t=e.size,r=0,i=0,o=0;for(let s=0;s<t;s++){i=o=0;for(let a=0;a<t;a++)i=i<<1&2047|e.get(s,a),a>=10&&(i===1488||i===93)&&r++,o=o<<1&2047|e.get(a,s),a>=10&&(o===1488||o===93)&&r++}return r*Jh.N3};mr.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let o=0;o<r;o++)t+=e.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*Jh.N4};function Ype(n,e,t){switch(n){case mr.Patterns.PATTERN000:return(e+t)%2===0;case mr.Patterns.PATTERN001:return e%2===0;case mr.Patterns.PATTERN010:return t%3===0;case mr.Patterns.PATTERN011:return(e+t)%3===0;case mr.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case mr.Patterns.PATTERN101:return e*t%2+e*t%3===0;case mr.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case mr.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}mr.applyMask=function(e,t){let r=t.size;for(let i=0;i<r;i++)for(let o=0;o<r;o++)t.isReserved(o,i)||t.xor(o,i,Ype(e,o,i))};mr.getBestMask=function(e,t){let r=Object.keys(mr.Patterns).length,i=0,o=1/0;for(let s=0;s<r;s++){t(s),mr.applyMask(s,e);let a=mr.getPenaltyN1(e)+mr.getPenaltyN2(e)+mr.getPenaltyN3(e)+mr.getPenaltyN4(e);mr.applyMask(s,e),a<o&&(o=a,i=s)}return i}});var BR=rr(jR=>{"use strict";var sf=CE(),IE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],SE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];jR.getBlocksCount=function(e,t){switch(t){case sf.L:return IE[(e-1)*4+0];case sf.M:return IE[(e-1)*4+1];case sf.Q:return IE[(e-1)*4+2];case sf.H:return IE[(e-1)*4+3];default:return}};jR.getTotalCodewordsCount=function(e,t){switch(t){case sf.L:return SE[(e-1)*4+0];case sf.M:return SE[(e-1)*4+1];case sf.Q:return SE[(e-1)*4+2];case sf.H:return SE[(e-1)*4+3];default:return}}});var ZH=rr(DE=>{"use strict";var $_=new Uint8Array(512),AE=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)$_[t]=e,AE[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)$_[t]=$_[t-255]})();DE.log=function(e){if(e<1)throw new Error("log("+e+")");return AE[e]};DE.exp=function(e){return $_[e]};DE.mul=function(e,t){return e===0||t===0?0:$_[AE[e]+AE[t]]}});var XH=rr(G_=>{"use strict";var UR=ZH();G_.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++)r[i+o]^=UR.mul(e[i],t[o]);return r};G_.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let i=r[0];for(let s=0;s<t.length;s++)r[s]^=UR.mul(t[s],i);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};G_.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=G_.mul(t,new Uint8Array([1,UR.exp(r)]));return t}});var t$=rr((gFe,e$)=>{"use strict";var JH=XH();function zR(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}zR.prototype.initialize=function(e){this.degree=e,this.genPoly=JH.generateECPolynomial(this.degree)};zR.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=JH.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){let o=new Uint8Array(this.degree);return o.set(r,i),o}return r};e$.exports=zR});var qR=rr(n$=>{"use strict";n$.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var HR=rr(Cu=>{"use strict";var r$="[0-9]+",Qpe="[A-Z $%*+\\-./:]+",W_="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";W_=W_.replace(/u/g,"\\u");var Zpe="(?:(?![A-Z0-9 $%*+\\-./:]|"+W_+`)(?:.|[\r
]))+`;Cu.KANJI=new RegExp(W_,"g");Cu.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Cu.BYTE=new RegExp(Zpe,"g");Cu.NUMERIC=new RegExp(r$,"g");Cu.ALPHANUMERIC=new RegExp(Qpe,"g");var Xpe=new RegExp("^"+W_+"$"),Jpe=new RegExp("^"+r$+"$"),ege=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Cu.testKanji=function(e){return Xpe.test(e)};Cu.testNumeric=function(e){return Jpe.test(e)};Cu.testAlphanumeric=function(e){return ege.test(e)}});var af=rr(bi=>{"use strict";var tge=qR(),$R=HR();bi.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};bi.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};bi.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};bi.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};bi.MIXED={bit:-1};bi.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!tge.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};bi.getBestModeForData=function(e){return $R.testNumeric(e)?bi.NUMERIC:$R.testAlphanumeric(e)?bi.ALPHANUMERIC:$R.testKanji(e)?bi.KANJI:bi.BYTE};bi.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};bi.isValid=function(e){return e&&e.bit&&e.ccBits};function nge(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return bi.NUMERIC;case"alphanumeric":return bi.ALPHANUMERIC;case"kanji":return bi.KANJI;case"byte":return bi.BYTE;default:throw new Error("Unknown mode: "+n)}}bi.from=function(e,t){if(bi.isValid(e))return e;try{return nge(e)}catch{return t}}});var c$=rr(ep=>{"use strict";var TE=of(),rge=BR(),i$=CE(),cf=af(),GR=qR(),s$=7973,o$=TE.getBCHDigit(s$);function ige(n,e,t){for(let r=1;r<=40;r++)if(e<=ep.getCapacity(r,t,n))return r}function a$(n,e){return cf.getCharCountIndicator(n,e)+4}function oge(n,e){let t=0;return n.forEach(function(r){let i=a$(r.mode,e);t+=i+r.getBitsLength()}),t}function sge(n,e){for(let t=1;t<=40;t++)if(oge(n,t)<=ep.getCapacity(t,e,cf.MIXED))return t}ep.from=function(e,t){return GR.isValid(e)?parseInt(e,10):t};ep.getCapacity=function(e,t,r){if(!GR.isValid(e))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=cf.BYTE);let i=TE.getSymbolTotalCodewords(e),o=rge.getTotalCodewordsCount(e,t),s=(i-o)*8;if(r===cf.MIXED)return s;let a=s-a$(r,e);switch(r){case cf.NUMERIC:return Math.floor(a/10*3);case cf.ALPHANUMERIC:return Math.floor(a/11*2);case cf.KANJI:return Math.floor(a/13);case cf.BYTE:default:return Math.floor(a/8)}};ep.getBestVersionForData=function(e,t){let r,i=i$.from(t,i$.M);if(Array.isArray(e)){if(e.length>1)return sge(e,i);if(e.length===0)return 1;r=e[0]}else r=e;return ige(r.mode,r.getLength(),i)};ep.getEncodedBits=function(e){if(!GR.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;TE.getBCHDigit(t)-o$>=0;)t^=s$<<TE.getBCHDigit(t)-o$;return e<<12|t}});var f$=rr(d$=>{"use strict";var WR=of(),u$=1335,age=21522,l$=WR.getBCHDigit(u$);d$.getEncodedBits=function(e,t){let r=e.bit<<3|t,i=r<<10;for(;WR.getBCHDigit(i)-l$>=0;)i^=u$<<WR.getBCHDigit(i)-l$;return(r<<10|i)^age}});var p$=rr((bFe,h$)=>{"use strict";var cge=af();function t0(n){this.mode=cge.NUMERIC,this.data=n.toString()}t0.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};t0.prototype.getLength=function(){return this.data.length};t0.prototype.getBitsLength=function(){return t0.getBitsLength(this.data.length)};t0.prototype.write=function(e){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),e.put(i,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),i=parseInt(r,10),e.put(i,o*3+1))};h$.exports=t0});var m$=rr((xFe,g$)=>{"use strict";var lge=af(),KR=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n0(n){this.mode=lge.ALPHANUMERIC,this.data=n}n0.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};n0.prototype.getLength=function(){return this.data.length};n0.prototype.getBitsLength=function(){return n0.getBitsLength(this.data.length)};n0.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=KR.indexOf(this.data[t])*45;r+=KR.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(KR.indexOf(this.data[t]),6)};g$.exports=n0});var y$=rr((CFe,v$)=>{"use strict";var uge=af();function r0(n){this.mode=uge.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}r0.getBitsLength=function(e){return e*8};r0.prototype.getLength=function(){return this.data.length};r0.prototype.getBitsLength=function(){return r0.getBitsLength(this.data.length)};r0.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};v$.exports=r0});var w$=rr((EFe,_$)=>{"use strict";var dge=af(),fge=of();function i0(n){this.mode=dge.KANJI,this.data=n}i0.getBitsLength=function(e){return e*13};i0.prototype.getLength=function(){return this.data.length};i0.prototype.getBitsLength=function(){return i0.getBitsLength(this.data.length)};i0.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=fge.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};_$.exports=i0});var b$=rr((IFe,YR)=>{"use strict";var K_={single_source_shortest_paths:function(n,e,t){var r={},i={};i[e]=0;var o=K_.PriorityQueue.make();o.push(e,0);for(var s,a,c,l,u,h,m,g,b;!o.empty();){s=o.pop(),a=s.value,l=s.cost,u=n[a]||{};for(c in u)u.hasOwnProperty(c)&&(h=u[c],m=l+h,g=i[c],b=typeof i[c]>"u",(b||g>m)&&(i[c]=m,o.push(c,m),r[c]=a))}if(typeof t<"u"&&typeof i[t]>"u"){var I=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(I)}return r},extract_shortest_path_from_predecessor_list:function(n,e){for(var t=[],r=e,i;r;)t.push(r),i=n[r],r=n[r];return t.reverse(),t},find_path:function(n,e,t){var r=K_.single_source_shortest_paths(n,e,t);return K_.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(n){var e=K_.PriorityQueue,t={},r;n=n||{};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.queue=[],t.sorter=n.sorter||e.default_sorter,t},default_sorter:function(n,e){return n.cost-e.cost},push:function(n,e){var t={value:n,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof YR<"u"&&(YR.exports=K_)});var T$=rr(o0=>{"use strict";var zn=af(),E$=p$(),I$=m$(),S$=y$(),A$=w$(),Y_=HR(),ME=of(),hge=b$();function x$(n){return unescape(encodeURIComponent(n)).length}function Q_(n,e,t){let r=[],i;for(;(i=n.exec(t))!==null;)r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function D$(n){let e=Q_(Y_.NUMERIC,zn.NUMERIC,n),t=Q_(Y_.ALPHANUMERIC,zn.ALPHANUMERIC,n),r,i;return ME.isKanjiModeEnabled()?(r=Q_(Y_.BYTE,zn.BYTE,n),i=Q_(Y_.KANJI,zn.KANJI,n)):(r=Q_(Y_.BYTE_KANJI,zn.BYTE,n),i=[]),e.concat(t,r,i).sort(function(s,a){return s.index-a.index}).map(function(s){return{data:s.data,mode:s.mode,length:s.length}})}function QR(n,e){switch(e){case zn.NUMERIC:return E$.getBitsLength(n);case zn.ALPHANUMERIC:return I$.getBitsLength(n);case zn.KANJI:return A$.getBitsLength(n);case zn.BYTE:return S$.getBitsLength(n)}}function pge(n){return n.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function gge(n){let e=[];for(let t=0;t<n.length;t++){let r=n[t];switch(r.mode){case zn.NUMERIC:e.push([r,{data:r.data,mode:zn.ALPHANUMERIC,length:r.length},{data:r.data,mode:zn.BYTE,length:r.length}]);break;case zn.ALPHANUMERIC:e.push([r,{data:r.data,mode:zn.BYTE,length:r.length}]);break;case zn.KANJI:e.push([r,{data:r.data,mode:zn.BYTE,length:x$(r.data)}]);break;case zn.BYTE:e.push([{data:r.data,mode:zn.BYTE,length:x$(r.data)}])}}return e}function mge(n,e){let t={},r={start:{}},i=["start"];for(let o=0;o<n.length;o++){let s=n[o],a=[];for(let c=0;c<s.length;c++){let l=s[c],u=""+o+c;a.push(u),t[u]={node:l,lastCount:0},r[u]={};for(let h=0;h<i.length;h++){let m=i[h];t[m]&&t[m].node.mode===l.mode?(r[m][u]=QR(t[m].lastCount+l.length,l.mode)-QR(t[m].lastCount,l.mode),t[m].lastCount+=l.length):(t[m]&&(t[m].lastCount=l.length),r[m][u]=QR(l.length,l.mode)+4+zn.getCharCountIndicator(l.mode,e))}}i=a}for(let o=0;o<i.length;o++)r[i[o]].end=0;return{map:r,table:t}}function C$(n,e){let t,r=zn.getBestModeForData(n);if(t=zn.from(e,r),t!==zn.BYTE&&t.bit<r.bit)throw new Error('"'+n+'" cannot be encoded with mode '+zn.toString(t)+`.
 Suggested mode is: `+zn.toString(r));switch(t===zn.KANJI&&!ME.isKanjiModeEnabled()&&(t=zn.BYTE),t){case zn.NUMERIC:return new E$(n);case zn.ALPHANUMERIC:return new I$(n);case zn.KANJI:return new A$(n);case zn.BYTE:return new S$(n)}}o0.fromArray=function(e){return e.reduce(function(t,r){return typeof r=="string"?t.push(C$(r,null)):r.data&&t.push(C$(r.data,r.mode)),t},[])};o0.fromString=function(e,t){let r=D$(e,ME.isKanjiModeEnabled()),i=gge(r),o=mge(i,t),s=hge.find_path(o.map,"start","end"),a=[];for(let c=1;c<s.length-1;c++)a.push(o.table[s[c]].node);return o0.fromArray(pge(a))};o0.rawSplit=function(e){return o0.fromArray(D$(e,ME.isKanjiModeEnabled()))}});var N$=rr(M$=>{"use strict";var PE=of(),ZR=CE(),vge=qH(),yge=$H(),_ge=GH(),wge=YH(),eO=QH(),tO=BR(),bge=t$(),NE=c$(),xge=f$(),Cge=af(),XR=T$();function Ege(n,e){let t=n.size,r=wge.getPositions(e);for(let i=0;i<r.length;i++){let o=r[i][0],s=r[i][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||t<=o+a))for(let c=-1;c<=7;c++)s+c<=-1||t<=s+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?n.set(o+a,s+c,!0,!0):n.set(o+a,s+c,!1,!0))}}function Ige(n){let e=n.size;for(let t=8;t<e-8;t++){let r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function Sge(n,e){let t=_ge.getPositions(e);for(let r=0;r<t.length;r++){let i=t[r][0],o=t[r][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?n.set(i+s,o+a,!0,!0):n.set(i+s,o+a,!1,!0)}}function Age(n,e){let t=n.size,r=NE.getEncodedBits(e),i,o,s;for(let a=0;a<18;a++)i=Math.floor(a/3),o=a%3+t-8-3,s=(r>>a&1)===1,n.set(i,o,s,!0),n.set(o,i,s,!0)}function JR(n,e,t){let r=n.size,i=xge.getEncodedBits(e,t),o,s;for(o=0;o<15;o++)s=(i>>o&1)===1,o<6?n.set(o,8,s,!0):o<8?n.set(o+1,8,s,!0):n.set(r-15+o,8,s,!0),o<8?n.set(8,r-o-1,s,!0):o<9?n.set(8,15-o-1+1,s,!0):n.set(8,15-o-1,s,!0);n.set(r-8,8,1,!0)}function Dge(n,e){let t=n.size,r=-1,i=t-1,o=7,s=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!n.isReserved(i,a-c)){let l=!1;s<e.length&&(l=(e[s]>>>o&1)===1),n.set(i,a-c,l),o--,o===-1&&(s++,o=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function Tge(n,e,t){let r=new vge;t.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),Cge.getCharCountIndicator(c.mode,n)),c.write(r)});let i=PE.getSymbolTotalCodewords(n),o=tO.getTotalCodewordsCount(n,e),s=(i-o)*8;for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let a=(s-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return Mge(r,n,e)}function Mge(n,e,t){let r=PE.getSymbolTotalCodewords(e),i=tO.getTotalCodewordsCount(e,t),o=r-i,s=tO.getBlocksCount(e,t),a=r%s,c=s-a,l=Math.floor(r/s),u=Math.floor(o/s),h=u+1,m=l-u,g=new bge(m),b=0,I=new Array(s),T=new Array(s),N=0,Y=new Uint8Array(n.buffer);for(let z=0;z<s;z++){let M=z<c?u:h;I[z]=Y.slice(b,b+M),T[z]=g.encode(I[z]),b+=M,N=Math.max(N,M)}let j=new Uint8Array(r),W=0,oe,he;for(oe=0;oe<N;oe++)for(he=0;he<s;he++)oe<I[he].length&&(j[W++]=I[he][oe]);for(oe=0;oe<m;oe++)for(he=0;he<s;he++)j[W++]=T[he][oe];return j}function Nge(n,e,t,r){let i;if(Array.isArray(n))i=XR.fromArray(n);else if(typeof n=="string"){let l=e;if(!l){let u=XR.rawSplit(n);l=NE.getBestVersionForData(u,t)}i=XR.fromString(n,l||40)}else throw new Error("Invalid data");let o=NE.getBestVersionForData(i,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let s=Tge(e,t,i),a=PE.getSymbolSize(e),c=new yge(a);return Ege(c,e),Ige(c),Sge(c,e),JR(c,t,0),e>=7&&Age(c,e),Dge(c,s),isNaN(r)&&(r=eO.getBestMask(c,JR.bind(null,c,t))),eO.applyMask(r,c),JR(c,t,r),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:r,segments:i}}M$.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=ZR.M,i,o;return typeof t<"u"&&(r=ZR.from(t.errorCorrectionLevel,ZR.M),i=NE.from(t.version),o=eO.from(t.maskPattern),t.toSJISFunc&&PE.setToSJISFunction(t.toSJISFunc)),Nge(e,i,r,o)}});var nO=rr(tp=>{"use strict";function P$(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let e=n.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+n);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}tp.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:P$(e.color.dark||"#000000ff"),light:P$(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};tp.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};tp.getImageWidth=function(e,t){let r=tp.getScale(e,t);return Math.floor((e+t.margin*2)*r)};tp.qrToImageData=function(e,t,r){let i=t.modules.size,o=t.modules.data,s=tp.getScale(i,r),a=Math.floor((i+r.margin*2)*s),c=r.margin*s,l=[r.color.light,r.color.dark];for(let u=0;u<a;u++)for(let h=0;h<a;h++){let m=(u*a+h)*4,g=r.color.light;if(u>=c&&h>=c&&u<a-c&&h<a-c){let b=Math.floor((u-c)/s),I=Math.floor((h-c)/s);g=l[o[b*i+I]?1:0]}e[m++]=g.r,e[m++]=g.g,e[m++]=g.b,e[m]=g.a}}});var k$=rr(kE=>{"use strict";var rO=nO();function Pge(n,e,t){n.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function kge(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}kE.render=function(e,t,r){let i=r,o=t;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),t||(o=kge()),i=rO.getOptions(i);let s=rO.getImageWidth(e.modules.size,i),a=o.getContext("2d"),c=a.createImageData(s,s);return rO.qrToImageData(c.data,e,i),Pge(a,o,s),a.putImageData(c,0,0),o};kE.renderToDataURL=function(e,t,r){let i=r;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),i||(i={});let o=kE.render(e,t,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}});var F$=rr(O$=>{"use strict";var Rge=nO();function R$(n,e){let t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function iO(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function Oge(n,e,t){let r="",i=0,o=!1,s=0;for(let a=0;a<n.length;a++){let c=Math.floor(a%e),l=Math.floor(a/e);!c&&!o&&(o=!0),n[a]?(s++,a>0&&c>0&&n[a-1]||(r+=o?iO("M",c+t,.5+l+t):iO("m",i,0),i=0,o=!1),c+1<e&&n[a+1]||(r+=iO("h",s),s=0)):i++}return r}O$.render=function(e,t,r){let i=Rge.getOptions(t),o=e.modules.size,s=e.modules.data,a=o+i.margin*2,c=i.color.light.a?"<path "+R$(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+R$(i.color.dark,"stroke")+' d="'+Oge(s,o,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,m),m}});var V$=rr(Z_=>{"use strict";var Fge=BH(),oO=N$(),L$=k$(),Lge=F$();function sO(n,e,t,r,i){let o=[].slice.call(arguments,1),s=o.length,a=typeof o[s-1]=="function";if(!a&&!Fge())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(i=t,t=e,e=r=void 0):s===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=e,e=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(t=e,e=r=void 0):s===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(c,l){try{let u=oO.create(t,r);c(n(u,e,r))}catch(u){l(u)}})}try{let c=oO.create(t,r);i(null,n(c,e,r))}catch(c){i(c)}}Z_.create=oO.create;Z_.toCanvas=sO.bind(null,L$.render);Z_.toDataURL=sO.bind(null,L$.renderToDataURL);Z_.toString=sO.bind(null,function(n,e,t){return Lge.render(n,t)})});var nI;function I1(){return nI}function Fc(n){let e=nI;return nI=n,e}var e3=Symbol("NotFound");function vp(n){return n===e3||n?.name==="\u0275NotFound"}var mo=null,S1=!1,rI=1,IG=null,vo=Symbol("SIGNAL");function gn(n){let e=mo;return mo=n,e}function M1(){return mo}var yp={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function _p(n){if(S1)throw new Error("");if(mo===null)return;mo.consumerOnSignalRead(n);let e=mo.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=mo.recomputing;if(r&&(t=e!==void 0?e.nextProducer:mo.producers,t!==void 0&&t.producer===n)){mo.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===mo&&(!r||AG(i,mo)))return;let o=bp(mo),s={producer:n,consumer:mo,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};mo.producersTail=s,e!==void 0?e.nextProducer=s:mo.producers=s,o&&i3(n,s)}function t3(){rI++}function N1(n){if(!(bp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===rI)){if(!n.producerMustRecompute(n)&&!T0(n)){T1(n);return}n.producerRecomputeValue(n),T1(n)}}function iI(n){if(n.consumers===void 0)return;let e=S1;S1=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||SG(r)}}finally{S1=e}}function oI(){return mo?.consumerAllowSignalWrites!==!1}function SG(n){n.dirty=!0,iI(n),n.consumerMarkedDirty?.(n)}function T1(n){n.dirty=!1,n.lastCleanEpoch=rI}function wp(n){return n&&n3(n),gn(n)}function n3(n){n.producersTail=void 0,n.recomputing=!0}function D0(n,e){gn(e),n&&r3(n)}function r3(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(bp(n))do t=sI(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function T0(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(N1(t),r!==t.version))return!0}return!1}function M0(n){if(bp(n)){let e=n.producers;for(;e!==void 0;)e=sI(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function i3(n,e){let t=n.consumersTail,r=bp(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)i3(i.producer,i)}function sI(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!bp(e)){let o=e.producers;for(;o!==void 0;)o=sI(o)}return t}function bp(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function P1(n){IG?.(n)}function AG(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function k1(n,e){return Object.is(n,e)}function R1(n,e){let t=Object.create(DG);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(N1(t),_p(t),t.value===A0)throw t.error;return t.value};return r[vo]=t,P1(t),r}var A1=Symbol("UNSET"),D1=Symbol("COMPUTING"),A0=Symbol("ERRORED"),DG=Rt(Oe({},yp),{value:A1,dirty:!0,error:null,equal:k1,kind:"computed",producerMustRecompute(n){return n.value===A1||n.value===D1},producerRecomputeValue(n){if(n.value===D1)throw new Error("");let e=n.value;n.value=D1;let t=wp(n),r,i=!1;try{r=n.computation(),gn(null),i=e!==A1&&e!==A0&&r!==A0&&n.equal(e,r)}catch(o){r=A0,n.error=o}finally{D0(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function TG(){throw new Error}var o3=TG;function s3(n){o3(n)}function aI(n){o3=n}var MG=null;function cI(n,e){let t=Object.create(O1);t.value=n,e!==void 0&&(t.equal=e);let r=()=>a3(t);return r[vo]=t,P1(t),[r,s=>xp(t,s),s=>lI(t,s)]}function a3(n){return _p(n),n.value}function xp(n,e){oI()||s3(n),n.equal(n.value,e)||(n.value=e,NG(n))}function lI(n,e){oI()||s3(n),xp(n,e(n.value))}var O1=Rt(Oe({},yp),{equal:k1,value:void 0,kind:"signal"});function NG(n){n.version++,t3(),iI(n),MG?.(n)}function Jt(n){return typeof n=="function"}function Cp(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var F1=Cp(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Cf(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $r=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Jt(r))try{r()}catch(o){e=o instanceof F1?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{c3(o)}catch(s){e=e??[],s instanceof F1?e=[...e,...s.errors]:e.push(s)}}if(e)throw new F1(e)}}add(e){var t;if(e&&e!==this)if(this.closed)c3(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Cf(t,e)}remove(e){let{_finalizers:t}=this;t&&Cf(t,e),e instanceof n&&e._removeParent(this)}};$r.EMPTY=(()=>{let n=new $r;return n.closed=!0,n})();var uI=$r.EMPTY;function L1(n){return n instanceof $r||n&&"closed"in n&&Jt(n.remove)&&Jt(n.add)&&Jt(n.unsubscribe)}function c3(n){Jt(n)?n():n.unsubscribe()}var $a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ep={setTimeout(n,e,...t){let{delegate:r}=Ep;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ep;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function V1(n){Ep.setTimeout(()=>{let{onUnhandledError:e}=$a;if(e)e(n);else throw n})}function Ef(){}var l3=dI("C",void 0,void 0);function u3(n){return dI("E",void 0,n)}function d3(n){return dI("N",n,void 0)}function dI(n,e,t){return{kind:n,value:e,error:t}}var If=null;function Ip(n){if($a.useDeprecatedSynchronousErrorHandling){let e=!If;if(e&&(If={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=If;if(If=null,t)throw r}}else n()}function f3(n){$a.useDeprecatedSynchronousErrorHandling&&If&&(If.errorThrown=!0,If.error=n)}var Sf=class extends $r{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,L1(e)&&e.add(this)):this.destination=RG}static create(e,t,r){return new Ga(e,t,r)}next(e){this.isStopped?hI(d3(e),this):this._next(e)}error(e){this.isStopped?hI(u3(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hI(l3,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},PG=Function.prototype.bind;function fI(n,e){return PG.call(n,e)}var pI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){j1(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){j1(r)}else j1(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){j1(t)}}},Ga=class extends Sf{constructor(e,t,r){super();let i;if(Jt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&$a.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fI(e.next,o),error:e.error&&fI(e.error,o),complete:e.complete&&fI(e.complete,o)}):i=e}this.destination=new pI(i)}};function j1(n){$a.useDeprecatedSynchronousErrorHandling?f3(n):V1(n)}function kG(n){throw n}function hI(n,e){let{onStoppedNotification:t}=$a;t&&Ep.setTimeout(()=>t(n,e))}var RG={closed:!0,next:Ef,error:kG,complete:Ef};var Sp=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Uo(n){return n}function B1(...n){return gI(n)}function gI(n){return n.length===0?Uo:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ot=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=FG(t)?t:new Ga(t,r,i);return Ip(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=h3(r),new r((i,o)=>{let s=new Ga({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Sp](){return this}pipe(...t){return gI(t)(this)}toPromise(t){return t=h3(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function h3(n){var e;return(e=n??$a.Promise)!==null&&e!==void 0?e:Promise}function OG(n){return n&&Jt(n.next)&&Jt(n.error)&&Jt(n.complete)}function FG(n){return n&&n instanceof Sf||OG(n)&&L1(n)}function mI(n){return Jt(n?.lift)}function ln(n){return e=>{if(mI(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function un(n,e,t,r,i){return new vI(n,e,t,r,i)}var vI=class extends Sf{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ap(){return ln((n,e)=>{let t=null;n._refCount++;let r=un(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Dp=class extends Ot{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,mI(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $r;let t=this.getSubject();e.add(this.source.subscribe(un(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$r.EMPTY)}return e}refCount(){return Ap()(this)}};var p3=Cp(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var kn=(()=>{class n extends Ot{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new U1(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new p3}next(t){Ip(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ip(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ip(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?uI:(this.currentObservers=null,o.push(t),new $r(()=>{this.currentObservers=null,Cf(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ot;return t.source=this,t}}return n.create=(e,t)=>new U1(e,t),n})(),U1=class extends kn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:uI}};var Xi=class extends kn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var N0={now(){return(N0.delegate||Date).now()},delegate:void 0};var P0=class extends kn{constructor(e=1/0,t=1/0,r=N0){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var z1=class extends $r{constructor(e,t){super()}schedule(e,t=0){return this}};var k0={setInterval(n,e,...t){let{delegate:r}=k0;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=k0;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Tp=class extends z1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return k0.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&k0.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Cf(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Mp=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Mp.now=N0.now;var Np=class extends Mp{constructor(e,t=Mp.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Af=new Np(Tp);var q1=class extends Tp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var H1=class extends Np{};var yI=new H1(q1);var yo=new Ot(n=>n.complete());function g3(n){return n&&Jt(n.schedule)}function _I(n){return n[n.length-1]}function $1(n){return Jt(_I(n))?n.pop():void 0}function Lc(n){return g3(_I(n))?n.pop():void 0}function m3(n,e){return typeof _I(n)=="number"?n.pop():e}var G1=n=>n&&typeof n.length=="number"&&typeof n!="function";function W1(n){return Jt(n?.then)}function K1(n){return Jt(n[Sp])}function Y1(n){return Symbol.asyncIterator&&Jt(n?.[Symbol.asyncIterator])}function Q1(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function LG(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Z1=LG();function X1(n){return Jt(n?.[Z1])}function J1(n){return GO(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield m1(t.read());if(i)return yield m1(void 0);yield yield m1(r)}}finally{t.releaseLock()}})}function ew(n){return Jt(n?.getReader)}function wr(n){if(n instanceof Ot)return n;if(n!=null){if(K1(n))return VG(n);if(G1(n))return jG(n);if(W1(n))return BG(n);if(Y1(n))return v3(n);if(X1(n))return UG(n);if(ew(n))return zG(n)}throw Q1(n)}function VG(n){return new Ot(e=>{let t=n[Sp]();if(Jt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jG(n){return new Ot(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function BG(n){return new Ot(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,V1)})}function UG(n){return new Ot(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function v3(n){return new Ot(e=>{qG(n,e).catch(t=>e.error(t))})}function zG(n){return v3(J1(n))}function qG(n,e){var t,r,i,o;return $O(this,void 0,void 0,function*(){try{for(t=WO(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function ds(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function _o(n,e=0){return ln((t,r)=>{t.subscribe(un(r,i=>ds(r,n,()=>r.next(i),e),()=>ds(r,n,()=>r.complete(),e),i=>ds(r,n,()=>r.error(i),e)))})}function ma(n,e=0){return ln((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function y3(n,e){return wr(n).pipe(ma(e),_o(e))}function _3(n,e){return wr(n).pipe(ma(e),_o(e))}function w3(n,e){return new Ot(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function b3(n,e){return new Ot(t=>{let r;return ds(t,e,()=>{r=n[Z1](),ds(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Jt(r?.return)&&r.return()})}function tw(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ot(t=>{ds(t,e,()=>{let r=n[Symbol.asyncIterator]();ds(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function x3(n,e){return tw(J1(n),e)}function C3(n,e){if(n!=null){if(K1(n))return y3(n,e);if(G1(n))return w3(n,e);if(W1(n))return _3(n,e);if(Y1(n))return tw(n,e);if(X1(n))return b3(n,e);if(ew(n))return x3(n,e)}throw Q1(n)}function mn(n,e){return e?C3(n,e):wr(n)}function gt(...n){let e=Lc(n);return mn(n,e)}function Pp(n,e){let t=Jt(n)?n:()=>n,r=i=>i.error(t());return new Ot(e?i=>e.schedule(r,0,i):r)}function wI(n){return!!n&&(n instanceof Ot||Jt(n.lift)&&Jt(n.subscribe))}var Wa=Cp(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function bI(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Ga({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Wa)}});n.subscribe(o)})}function at(n,e){return ln((t,r)=>{let i=0;t.subscribe(un(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:HG}=Array;function $G(n,e){return HG(e)?n(...e):n(e)}function nw(n){return at(e=>$G(n,e))}var{isArray:GG}=Array,{getPrototypeOf:WG,prototype:KG,keys:YG}=Object;function rw(n){if(n.length===1){let e=n[0];if(GG(e))return{args:e,keys:null};if(QG(e)){let t=YG(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function QG(n){return n&&typeof n=="object"&&WG(n)===KG}function iw(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function R0(...n){let e=Lc(n),t=$1(n),{args:r,keys:i}=rw(n);if(r.length===0)return mn([],e);let o=new Ot(ZG(r,e,i?s=>iw(i,s):Uo));return t?o.pipe(nw(t)):o}function ZG(n,e,t=Uo){return r=>{E3(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)E3(e,()=>{let l=mn(n[c],e),u=!1;l.subscribe(un(r,h=>{o[c]=h,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function E3(n,e,t){n?ds(t,n,e):e()}function I3(n,e,t,r,i,o,s,a){let c=[],l=0,u=0,h=!1,m=()=>{h&&!c.length&&!l&&e.complete()},g=I=>l<r?b(I):c.push(I),b=I=>{o&&e.next(I),l++;let T=!1;wr(t(I,u++)).subscribe(un(e,N=>{i?.(N),o?g(N):e.next(N)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){let N=c.shift();s?ds(e,s,()=>b(N)):b(N)}m()}catch(N){e.error(N)}}))};return n.subscribe(un(e,g,()=>{h=!0,m()})),()=>{a?.()}}function ei(n,e,t=1/0){return Jt(e)?ei((r,i)=>at((o,s)=>e(r,o,i,s))(wr(n(r,i))),t):(typeof e=="number"&&(t=e),ln((r,i)=>I3(r,i,n,t)))}function Vc(n=1/0){return ei(Uo,n)}function S3(){return Vc(1)}function kp(...n){return S3()(mn(n,Lc(n)))}function O0(n){return new Ot(e=>{wr(n()).subscribe(e)})}function xI(...n){let e=$1(n),{args:t,keys:r}=rw(n),i=new Ot(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let h=!1;wr(t[u]).subscribe(un(o,m=>{h||(h=!0,l--),a[u]=m},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(r?iw(r,a):a),o.complete())}))}});return e?i.pipe(nw(e)):i}function CI(...n){let e=Lc(n),t=m3(n,1/0),r=n;return r.length?r.length===1?wr(r[0]):Vc(t)(mn(r,e)):yo}var Bl=new Ot(Ef);function br(n,e){return ln((t,r)=>{let i=0;t.subscribe(un(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ul(n){return ln((e,t)=>{let r=null,i=!1,o;r=e.subscribe(un(t,void 0,void 0,s=>{o=wr(n(s,Ul(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function A3(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(un(s,u=>{let h=l++;c=a?n(c,u,h):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Gu(n,e){return Jt(e)?ei(n,e,1):ei(n,1)}function EI(n,e=Af){return ln((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+n,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}t.subscribe(un(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Wu(n){return ln((e,t)=>{let r=!1;e.subscribe(un(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ji(n){return n<=0?()=>yo:ln((e,t)=>{let r=0;e.subscribe(un(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ow(n,e=Uo){return n=n??XG,ln((t,r)=>{let i,o=!0;t.subscribe(un(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function XG(n,e){return n===e}function sw(n=JG){return ln((e,t)=>{let r=!1;e.subscribe(un(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function JG(){return new Wa}function F0(n){return ln((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ka(n,e){let t=arguments.length>=2;return r=>r.pipe(n?br((i,o)=>n(i,o,r)):Uo,Ji(1),t?Wu(e):sw(()=>new Wa))}function Rp(n){return n<=0?()=>yo:ln((e,t)=>{let r=[];e.subscribe(un(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function II(n,e){let t=arguments.length>=2;return r=>r.pipe(n?br((i,o)=>n(i,o,r)):Uo,Rp(1),t?Wu(e):sw(()=>new Wa))}function Op(){return ln((n,e)=>{let t,r=!1;n.subscribe(un(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Ku(n,e){return ln(A3(n,e,arguments.length>=2,!0))}function D3(n={}){let{connector:e=()=>new kn,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,u=!1,h=!1,m=()=>{a?.unsubscribe(),a=void 0},g=()=>{m(),s=c=void 0,u=h=!1},b=()=>{let I=s;g(),I?.unsubscribe()};return ln((I,T)=>{l++,!h&&!u&&m();let N=c=c??e();T.add(()=>{l--,l===0&&!h&&!u&&(a=SI(b,i))}),N.subscribe(T),!s&&l>0&&(s=new Ga({next:Y=>N.next(Y),error:Y=>{h=!0,m(),a=SI(g,t,Y),N.error(Y)},complete:()=>{u=!0,m(),a=SI(g,r),N.complete()}}),wr(I).subscribe(s))})(o)}}function SI(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Ga({next:()=>{r.unsubscribe(),n()}});return wr(e(...t)).subscribe(r)}function aw(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,D3({connector:()=>new P0(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Yu(...n){let e=Lc(n);return ln((t,r)=>{(e?kp(n,t,e):kp(n,t)).subscribe(r)})}function Nn(n,e){return ln((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(un(r,c=>{i?.unsubscribe();let l=0,u=o++;wr(n(c,u)).subscribe(i=un(r,h=>r.next(e?e(c,h,u,l++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function cw(n,e){return Jt(e)?Nn(()=>n,e):Nn(()=>n)}function lw(n){return ln((e,t)=>{wr(n).subscribe(un(t,()=>t.complete(),Ef)),!t.closed&&e.subscribe(t)})}function Ti(n,e,t){let r=Jt(n)||e||t?{next:n,error:e,complete:t}:n;return r?ln((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(un(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Uo}function T3(n){let e=gn(null);try{return n()}finally{gn(e)}}var ql=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},B0=new ql("20.3.15");var hw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Xe=class extends Error{code;constructor(e,t){super(Qa(e,t)),this.code=e}};function eW(n){return`NG0${Math.abs(n)}`}function Qa(n,e){return`${eW(n)}${e?": "+e:""}`}var hi=globalThis;function Bn(n){for(let e in n)if(n[e]===Bn)return e;throw Error("")}function P3(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Hl(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Hl).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function pw(n,e){return n?e?`${n} ${e}`:n:e||""}var tW=Bn({__forward_ref__:Bn});function fs(n){return n.__forward_ref__=fs,n.toString=function(){return Hl(this())},n}function eo(n){return jI(n)?n():n}function jI(n){return typeof n=="function"&&n.hasOwnProperty(tW)&&n.__forward_ref__===fs}function Qe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ir(n){return{providers:n.providers||[],imports:n.imports||[]}}function U0(n){return nW(n,gw)}function BI(n){return U0(n)!==null}function nW(n,e){return n.hasOwnProperty(e)&&n[e]||null}function rW(n){let e=n?.[gw]??null;return e||null}function DI(n){return n&&n.hasOwnProperty(dw)?n[dw]:null}var gw=Bn({\u0275prov:Bn}),dw=Bn({\u0275inj:Bn}),Ye=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Qe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function UI(n){return n&&!!n.\u0275providers}var zI=Bn({\u0275cmp:Bn}),qI=Bn({\u0275dir:Bn}),HI=Bn({\u0275pipe:Bn}),$I=Bn({\u0275mod:Bn}),V0=Bn({\u0275fac:Bn}),Pf=Bn({__NG_ELEMENT_ID__:Bn}),M3=Bn({__NG_ENV_ID__:Bn});function Xu(n){return typeof n=="string"?n:n==null?"":String(n)}function k3(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Xu(n)}var R3=Bn({ngErrorCode:Bn}),iW=Bn({ngErrorMessage:Bn}),oW=Bn({ngTokenPath:Bn});function GI(n,e){return O3("",-200,e)}function mw(n,e){throw new Xe(-201,!1)}function O3(n,e,t){let r=new Xe(e,n);return r[R3]=e,r[iW]=n,t&&(r[oW]=t),r}function sW(n){return n[R3]}var TI;function F3(){return TI}function zo(n){let e=TI;return TI=n,e}function WI(n,e,t){let r=U0(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;mw(n,"Injector")}var aW={},Df=aW,MI="__NG_DI_FLAG__",NI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Tf(t)||0;try{return this.injector.get(e,r&8?null:Df,r)}catch(i){if(vp(i))return i;throw i}}};function cW(n,e=0){let t=I1();if(t===void 0)throw new Xe(-203,!1);if(t===null)return WI(n,void 0,e);{let r=lW(e),i=t.retrieve(n,r);if(vp(i)){if(r.optional)return null;throw i}return i}}function Ve(n,e=0){return(F3()||cW)(eo(n),e)}function De(n,e){return Ve(n,Tf(e))}function Tf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function lW(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function PI(n){let e=[];for(let t=0;t<n.length;t++){let r=eo(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Xe(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=uW(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Ve(i,o))}else e.push(Ve(r))}return e}function L3(n,e){return n[MI]=e,n.prototype[MI]=e,n}function uW(n){return n[MI]}function Qu(n,e){let t=n.hasOwnProperty(V0);return t?n[V0]:null}function V3(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function j3(n){return n.flat(Number.POSITIVE_INFINITY)}function vw(n,e){n.forEach(t=>Array.isArray(t)?vw(t,e):e(t))}function KI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function z0(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function B3(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function yw(n,e,t){let r=Lp(n,e);return r>=0?n[r|1]=t:(r=~r,B3(n,r,e,t)),r}function _w(n,e){let t=Lp(n,e);if(t>=0)return n[t|1]}function Lp(n,e){return dW(n,e,1)}function dW(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ju={},qo=[],Gl=new Ye(""),YI=new Ye("",-1),QI=new Ye(""),j0=class{get(e,t=Df){if(t===Df){let i=O3("",-201);throw i.name="\u0275NotFound",i}return t}};function ZI(n){return n[$I]||null}function Wl(n){return n[zI]||null}function XI(n){return n[qI]||null}function U3(n){return n[HI]||null}function to(n){return{\u0275providers:n}}function z3(...n){return{\u0275providers:JI(!0,n),\u0275fromNgModule:!0}}function JI(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return vw(e,s=>{let a=s;fw(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&q3(i,o),t}function q3(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];eS(i,o=>{e(o,r)})}}function fw(n,e,t,r){if(n=eo(n),!n)return!1;let i=null,o=DI(n),s=!o&&Wl(n);if(!o&&!s){let c=n.ngModule;if(o=DI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)fw(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{vw(o.imports,u=>{fw(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&q3(l,e)}if(!a){let l=Qu(i)||(()=>new i);e({provide:i,useFactory:l,deps:qo},i),e({provide:QI,useValue:i,multi:!0},i),e({provide:Gl,useValue:()=>Ve(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;eS(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function eS(n,e){for(let t of n)UI(t)&&(t=t.\u0275providers),Array.isArray(t)?eS(t,e):e(t)}var fW=Bn({provide:String,useValue:Bn});function H3(n){return n!==null&&typeof n=="object"&&fW in n}function hW(n){return!!(n&&n.useExisting)}function pW(n){return!!(n&&n.useFactory)}function Mf(n){return typeof n=="function"}function $3(n){return!!n.useClass}var q0=new Ye(""),uw={},N3={},AI;function H0(){return AI===void 0&&(AI=new j0),AI}var Wn=class{},Nf=class extends Wn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,RI(e,s=>this.processProvider(s)),this.records.set(YI,Fp(void 0,this)),i.has("environment")&&this.records.set(Wn,Fp(void 0,this));let o=this.records.get(q0);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(QI,qo,{self:!0}))}retrieve(e,t){let r=Tf(t)||0;try{return this.get(e,Df,r)}catch(i){if(vp(i))return i;throw i}}destroy(){L0(this),this._destroyed=!0;let e=gn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),gn(e)}}onDestroy(e){return L0(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){L0(this);let t=Fc(this),r=zo(void 0),i;try{return e()}finally{Fc(t),zo(r)}}get(e,t=Df,r){if(L0(this),e.hasOwnProperty(M3))return e[M3](this);let i=Tf(r),o,s=Fc(this),a=zo(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=_W(e)&&U0(e);u&&this.injectableDefInScope(u)?l=Fp(kI(e),uw):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?H0():this.parent;return t=i&8&&t===Df?null:t,c.get(e,t)}catch(c){let l=sW(c);throw l===-200||l===-201?new Xe(l,null):c}finally{zo(a),Fc(s)}}resolveInjectorInitializers(){let e=gn(null),t=Fc(this),r=zo(void 0),i;try{let o=this.get(Gl,qo,{self:!0});for(let s of o)s()}finally{Fc(t),zo(r),gn(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Hl(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=eo(e);let t=Mf(e)?e:eo(e&&e.provide),r=mW(e);if(!Mf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Fp(void 0,uw,!0),i.factory=()=>PI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=gn(null);try{if(t.value===N3)throw GI(Hl(e));return t.value===uw&&(t.value=N3,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&yW(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{gn(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=eo(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function kI(n){let e=U0(n),t=e!==null?e.factory:Qu(n);if(t!==null)return t;if(n instanceof Ye)throw new Xe(204,!1);if(n instanceof Function)return gW(n);throw new Xe(204,!1)}function gW(n){if(n.length>0)throw new Xe(204,!1);let t=rW(n);return t!==null?()=>t.factory(n):()=>new n}function mW(n){if(H3(n))return Fp(void 0,n.useValue);{let e=tS(n);return Fp(e,uw)}}function tS(n,e,t){let r;if(Mf(n)){let i=eo(n);return Qu(i)||kI(i)}else if(H3(n))r=()=>eo(n.useValue);else if(pW(n))r=()=>n.useFactory(...PI(n.deps||[]));else if(hW(n))r=(i,o)=>Ve(eo(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=eo(n&&(n.useClass||n.provide));if(vW(n))r=()=>new i(...PI(n.deps));else return Qu(i)||kI(i)}return r}function L0(n){if(n.destroyed)throw new Xe(205,!1)}function Fp(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function vW(n){return!!n.deps}function yW(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function _W(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function RI(n,e){for(let t of n)Array.isArray(t)?RI(t,e):t&&UI(t)?RI(t.\u0275providers,e):e(t)}function pi(n,e){let t;n instanceof Nf?(L0(n),t=n):t=new NI(n);let r,i=Fc(t),o=zo(void 0);try{return e()}finally{Fc(i),zo(o)}}function nS(){return F3()!==void 0||I1()!=null}var Za=0,Ht=1,en=2,Bi=3,va=4,ya=5,$0=6,Vp=7,wo=8,ed=9,jc=10,xr=11,jp=12,rS=13,kf=14,_a=15,td=16,Rf=17,Bc=18,G0=19,iS=20,zl=21,ww=22,W0=23,zs=24,Of=25,K0=26,Mi=27,G3=1;var nd=7,Y0=8,Ff=9,Ho=10;function Uc(n){return Array.isArray(n)&&typeof n[G3]=="object"}function Xa(n){return Array.isArray(n)&&n[G3]===!0}function oS(n){return(n.flags&4)!==0}function Kl(n){return n.componentOffset>-1}function Bp(n){return(n.flags&1)===1}function zc(n){return!!n.template}function Up(n){return(n[en]&512)!==0}function Lf(n){return(n[en]&256)===256}var sS="svg",W3="math";function wa(n){for(;Array.isArray(n);)n=n[Za];return n}function aS(n,e){return wa(e[n])}function ba(n,e){return wa(e[n.index])}function bw(n,e){return n.data[e]}function xw(n,e){return n[e]}function cS(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function xa(n,e){let t=e[n];return Uc(t)?t:t[Za]}function K3(n){return(n[en]&4)===4}function Cw(n){return(n[en]&128)===128}function Y3(n){return Xa(n[Bi])}function Vf(n,e){return e==null?null:n[e]}function lS(n){n[Rf]=0}function uS(n){n[en]&1024||(n[en]|=1024,Cw(n)&&zp(n))}function Q3(n,e){for(;n>0;)e=e[kf],n--;return e}function Q0(n){return!!(n[en]&9216||n[zs]?.dirty)}function Ew(n){n[jc].changeDetectionScheduler?.notify(8),n[en]&64&&(n[en]|=1024),Q0(n)&&zp(n)}function zp(n){n[jc].changeDetectionScheduler?.notify(0);let e=Zu(n);for(;e!==null&&!(e[en]&8192||(e[en]|=8192,!Cw(e)));)e=Zu(e)}function dS(n,e){if(Lf(n))throw new Xe(911,!1);n[zl]===null&&(n[zl]=[]),n[zl].push(e)}function Z3(n,e){if(n[zl]===null)return;let t=n[zl].indexOf(e);t!==-1&&n[zl].splice(t,1)}function Zu(n){let e=n[Bi];return Xa(e)?e[Bi]:e}function fS(n){return n[Vp]??=[]}function hS(n){return n.cleanup??=[]}function X3(n,e,t,r){let i=fS(e);i.push(t),n.firstCreatePass&&hS(n).push(r,i.length-1)}var dn={lFrame:f4(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var OI=!1;function J3(){return dn.lFrame.elementDepthCount}function e4(){dn.lFrame.elementDepthCount++}function pS(){dn.lFrame.elementDepthCount--}function Iw(){return dn.bindingsEnabled}function t4(){return dn.skipHydrationRootTNode!==null}function gS(n){return dn.skipHydrationRootTNode===n}function mS(){dn.skipHydrationRootTNode=null}function sn(){return dn.lFrame.lView}function gi(){return dn.lFrame.tView}function be(n){return dn.lFrame.contextLView=n,n[wo]}function xe(n){return dn.lFrame.contextLView=null,n}function Ni(){let n=vS();for(;n!==null&&n.type===64;)n=n.parent;return n}function vS(){return dn.lFrame.currentTNode}function n4(){let n=dn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function qp(n,e){let t=dn.lFrame;t.currentTNode=n,t.isParent=e}function yS(){return dn.lFrame.isParent}function r4(){dn.lFrame.isParent=!1}function i4(){return dn.lFrame.contextLView}function _S(){return OI}function wS(n){let e=OI;return OI=n,e}function Z0(){let n=dn.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function o4(){return dn.lFrame.bindingIndex}function s4(n){return dn.lFrame.bindingIndex=n}function jf(){return dn.lFrame.bindingIndex++}function Sw(n){let e=dn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function a4(){return dn.lFrame.inI18n}function c4(n,e){let t=dn.lFrame;t.bindingIndex=t.bindingRootIndex=n,Aw(e)}function l4(){return dn.lFrame.currentDirectiveIndex}function Aw(n){dn.lFrame.currentDirectiveIndex=n}function u4(n){let e=dn.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function bS(){return dn.lFrame.currentQueryIndex}function Dw(n){dn.lFrame.currentQueryIndex=n}function wW(n){let e=n[Ht];return e.type===2?e.declTNode:e.type===1?n[ya]:null}function xS(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=wW(o),i===null||(o=o[kf],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=dn.lFrame=d4();return r.currentTNode=e,r.lView=n,!0}function Tw(n){let e=d4(),t=n[Ht];dn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function d4(){let n=dn.lFrame,e=n===null?null:n.child;return e===null?f4(n):e}function f4(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function h4(){let n=dn.lFrame;return dn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var CS=h4;function Mw(){let n=h4();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function p4(n){return(dn.lFrame.contextLView=Q3(n,dn.lFrame.contextLView))[wo]}function Yl(){return dn.lFrame.selectedIndex}function rd(n){dn.lFrame.selectedIndex=n}function X0(){let n=dn.lFrame;return bw(n.tView,n.selectedIndex)}function Pi(){dn.lFrame.currentNamespace=sS}function hs(){bW()}function bW(){dn.lFrame.currentNamespace=null}function g4(){return dn.lFrame.currentNamespace}var m4=!0;function Nw(){return m4}function J0(n){m4=n}function FI(n,e=null,t=null,r){let i=ES(n,e,t,r);return i.resolveInjectorInitializers(),i}function ES(n,e=null,t=null,r,i=new Set){let o=[t||qo,z3(n)];return r=r||(typeof n=="object"?void 0:Hl(n)),new Nf(o,e||H0(),r||null,i)}var Rn=class n{static THROW_IF_NOT_FOUND=Df;static NULL=new j0;static create(e,t){if(Array.isArray(e))return FI({name:""},t,e,"");{let r=e.name??"";return FI({name:r},e.parent,e.providers,r)}}static \u0275prov=Qe({token:n,providedIn:"any",factory:()=>Ve(YI)});static __NG_ELEMENT_ID__=-1},ti=new Ye(""),Ca=(()=>{class n{static __NG_ELEMENT_ID__=xW;static __NG_ENV_ID__=t=>t}return n})(),LI=class extends Ca{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Lf(this._lView)}onDestroy(e){let t=this._lView;return dS(t,e),()=>Z3(t,e)}};function xW(){return new LI(sn())}var Ya=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ps=new Ye("",{providedIn:"root",factory:()=>{let n=De(Wn),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Ya),e.handleError(t))}}}),v4={provide:Gl,useValue:()=>void De(Ya),multi:!0};function IS(n){return typeof n=="function"&&n[vo]!==void 0}function Ea(n,e){let[t,r,i]=cI(n,e?.equal),o=t,s=o[vo];return o.set=r,o.update=i,o.asReadonly=y4.bind(o),o}function y4(){let n=this[vo];if(n.readonlyFn===void 0){let e=()=>this();e[vo]=n,n.readonlyFn=e}return n.readonlyFn}function SS(n){return IS(n)&&typeof n.set=="function"}var Pw=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=CW}return n})();function CW(){return new Pw(sn(),Ni())}var $l=class{},ev=new Ye("",{providedIn:"root",factory:()=>!1});var AS=new Ye(""),DS=new Ye(""),qc=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Xi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ot(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new n})}return n})(),Hp=(()=>{class n{internalPendingTasks=De(qc);scheduler=De($l);errorHandler=De(ps);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new n})}return n})();function tv(...n){}var TS=(()=>{class n{static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new VI})}return n})(),VI=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Zp(n){return{toString:n}.toString()}var kw="__parameters__";function TW(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function MW(n,e,t){return Zp(()=>{let r=TW(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let h=c.hasOwnProperty(kw)?c[kw]:Object.defineProperty(c,kw,{value:[]})[kw];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ir=L3(MW("Optional"),8);function J4(n){let e=hi.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function NW(n){return typeof n=="function"}var Hw=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function eF(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Sa=(()=>{let n=()=>tF;return n.ngInherit=!0,n})();function tF(n){return n.type.prototype.ngOnChanges&&(n.setInput=kW),PW}function PW(){let n=rF(this),e=n?.current;if(e){let t=n.previous;if(t===Ju)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function kW(n,e,t,r,i){let o=this.declaredInputs[r],s=rF(n)||RW(n,{previous:Ju,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Hw(l&&l.currentValue,t,c===Ju),eF(n,e,i,t)}var nF="__ngSimpleChanges__";function rF(n){return n[nF]||null}function RW(n,e){return n[nF]=e}var _4=[];var lr=function(n,e=null,t){for(let r=0;r<_4.length;r++){let i=_4[r];i(n,e,t)}};function OW(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=tF(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function iF(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Bw(n,e,t){oF(n,e,3,t)}function Uw(n,e,t,r){(n[en]&3)===t&&oF(n,e,t,r)}function MS(n,e){let t=n[en];(t&3)===e&&(t&=16383,t+=1,n[en]=t)}function oF(n,e,t,r){let i=r!==void 0?n[Rf]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Rf]+=65536),(a<o||o==-1)&&(FW(n,t,e,c),n[Rf]=(n[Rf]&4294901760)+c+2),c++}function w4(n,e){lr(4,n,e);let t=gn(null);try{e.call(n)}finally{gn(t),lr(5,n,e)}}function FW(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[en]>>14<n[Rf]>>16&&(n[en]&3)===e&&(n[en]+=16384,w4(a,o)):w4(a,o)}var Gp=-1,Uf=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function LW(n){return(n.flags&8)!==0}function VW(n){return(n.flags&16)!==0}function jW(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];BW(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function sF(n){return n===3||n===4||n===6}function BW(n){return n.charCodeAt(0)===64}function Wp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?b4(n,t,i,null,e[++r]):b4(n,t,i,null,null))}}return n}function b4(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function aF(n){return n!==Gp}function $w(n){return n&32767}function UW(n){return n>>16}function Gw(n,e){let t=UW(n),r=e;for(;t>0;)r=r[kf],t--;return r}var BS=!0;function Ww(n){let e=BS;return BS=n,e}var zW=256,cF=zW-1,lF=5,qW=0,Hc={};function HW(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Pf)&&(r=t[Pf]),r==null&&(r=t[Pf]=qW++);let i=r&cF,o=1<<i;e.data[n+(i>>lF)]|=o}function Kw(n,e){let t=uF(n,e);if(t!==-1)return t;let r=e[Ht];r.firstCreatePass&&(n.injectorIndex=e.length,NS(r.data,n),NS(e,null),NS(r.blueprint,null));let i=_A(n,e),o=n.injectorIndex;if(aF(i)){let s=$w(i),a=Gw(i,e),c=a[Ht].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function NS(n,e){n.push(0,0,0,0,0,0,0,0,e)}function uF(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function _A(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=gF(i),r===null)return Gp;if(t++,i=i[kf],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Gp}function US(n,e,t){HW(n,e,t)}function $W(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(sF(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function dF(n,e,t){if(t&8||n!==void 0)return n;mw(e,"NodeInjector")}function fF(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ed],o=zo(void 0);try{return i?i.get(e,r,t&8):WI(e,r,t&8)}finally{zo(o)}}return dF(r,e,t)}function hF(n,e,t,r=0,i){if(n!==null){if(e[en]&2048&&!(r&2)){let s=YW(n,e,t,r,Hc);if(s!==Hc)return s}let o=pF(n,e,t,r,Hc);if(o!==Hc)return o}return fF(e,t,r,i)}function pF(n,e,t,r,i){let o=WW(t);if(typeof o=="function"){if(!xS(e,n,r))return r&1?dF(i,t,r):fF(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))mw(t);else return s}finally{CS()}}else if(typeof o=="number"){let s=null,a=uF(n,e),c=Gp,l=r&1?e[_a][ya]:null;for((a===-1||r&4)&&(c=a===-1?_A(n,e):e[a+8],c===Gp||!C4(r,!1)?a=-1:(s=e[Ht],a=$w(c),e=Gw(c,e)));a!==-1;){let u=e[Ht];if(x4(o,a,u.data)){let h=GW(a,e,t,s,r,l);if(h!==Hc)return h}c=e[a+8],c!==Gp&&C4(r,e[Ht].data[a+8]===l)&&x4(o,a,e)?(s=u,a=$w(c),e=Gw(c,e)):a=-1}}return i}function GW(n,e,t,r,i,o){let s=e[Ht],a=s.data[n+8],c=r==null?Kl(a)&&BS:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=zw(a,s,t,c,l);return u!==null?ov(e,s,u,a,i):Hc}function zw(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,h=r?a:a+u,m=i?a+u:l;for(let g=h;g<m;g++){let b=s[g];if(g<c&&t===b||g>=c&&b.type===t)return g}if(i){let g=s[c];if(g&&zc(g)&&g.type===t)return c}return null}function ov(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Uf){let a=o;if(a.resolving){let g=k3(s[t]);throw GI(g)}let c=Ww(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,h=a.injectImpl?zo(a.injectImpl):null,m=xS(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&OW(t,s[t],e)}finally{h!==null&&zo(h),Ww(c),a.resolving=!1,CS()}}return o}function WW(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Pf)?n[Pf]:void 0;return typeof e=="number"?e>=0?e&cF:KW:e}function x4(n,e,t){let r=1<<n;return!!(t[e+(n>>lF)]&r)}function C4(n,e){return!(n&2)&&!(n&1&&e)}var Bf=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return hF(this._tNode,this._lView,e,Tf(r),t)}};function KW(){return new Bf(Ni(),sn())}function Aa(n){return Zp(()=>{let e=n.prototype.constructor,t=e[V0]||zS(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[V0]||zS(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function zS(n){return jI(n)?()=>{let e=zS(eo(n));return e&&e()}:Qu(n)}function YW(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[en]&2048&&!Up(s);){let a=pF(o,s,t,r|2,Hc);if(a!==Hc)return a;let c=o.parent;if(!c){let l=s[iS];if(l){let u=l.get(t,Hc,r);if(u!==Hc)return u}c=gF(s),s=s[kf]}o=c}return i}function gF(n){let e=n[Ht],t=e.type;return t===2?e.declTNode:t===1?n[ya]:null}function dv(n){return $W(Ni(),n)}function QW(){return Xp(Ni(),sn())}function Xp(n,e){return new no(ba(n,e))}var no=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=QW}return n})();function ZW(n){return n instanceof no?n.nativeElement:n}function XW(){return this._results[Symbol.iterator]()}var Yw=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new kn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=j3(e);(this._changesDetected=!V3(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=XW};function mF(n){return(n.flags&128)===128}var wA=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(wA||{}),vF=new Map,JW=0;function eK(){return JW++}function tK(n){vF.set(n[G0],n)}function qS(n){vF.delete(n[G0])}var E4="__ngContext__";function Kp(n,e){Uc(e)?(n[E4]=e[G0],tK(e)):n[E4]=e}function yF(n){return wF(n[jp])}function _F(n){return wF(n[va])}function wF(n){for(;n!==null&&!Xa(n);)n=n[va];return n}var HS;function bA(n){HS=n}function bF(){if(HS!==void 0)return HS;if(typeof document<"u")return document;throw new Xe(210,!1)}var ab=new Ye("",{providedIn:"root",factory:()=>nK}),nK="ng",cb=new Ye(""),Ui=new Ye("",{providedIn:"platform",factory:()=>"unknown"});var lb=new Ye("",{providedIn:"root",factory:()=>bF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rK="h",iK="b";var xF=!1,CF=new Ye("",{providedIn:"root",factory:()=>xF});var ub=new Ye("");var oK=(n,e,t,r)=>{};function sK(n,e,t,r){oK(n,e,t,r)}function xA(n){return(n.flags&32)===32}var aK=()=>null;function EF(n,e,t=!1){return aK(n,e,t)}function IF(n,e){let t=n.contentQueries;if(t!==null){let r=gn(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Dw(o),a.contentQueries(2,e[s],s)}}}finally{gn(r)}}}function $S(n,e,t){Dw(0);let r=gn(null);try{e(n,t)}finally{gn(r)}}function CA(n,e,t){if(oS(e)){let r=gn(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{gn(r)}}}var Ql=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Ql||{});var Rw;function cK(){if(Rw===void 0&&(Rw=null,hi.trustedTypes))try{Rw=hi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Rw}function db(n){return cK()?.createHTML(n)||n}var Ow;function lK(){if(Ow===void 0&&(Ow=null,hi.trustedTypes))try{Ow=hi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ow}function I4(n){return lK()?.createScriptURL(n)||n}var Zl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hw})`}},GS=class extends Zl{getTypeName(){return"HTML"}},WS=class extends Zl{getTypeName(){return"Style"}},KS=class extends Zl{getTypeName(){return"Script"}},YS=class extends Zl{getTypeName(){return"URL"}},QS=class extends Zl{getTypeName(){return"ResourceURL"}};function Da(n){return n instanceof Zl?n.changingThisBreaksApplicationSecurity:n}function Jl(n,e){let t=SF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${hw})`)}return t===e}function SF(n){return n instanceof Zl&&n.getTypeName()||null}function EA(n){return new GS(n)}function IA(n){return new WS(n)}function SA(n){return new KS(n)}function AA(n){return new YS(n)}function DA(n){return new QS(n)}function uK(n){let e=new XS(n);return dK()?new ZS(e):e}var ZS=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(db(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},XS=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=db(e),t}};function dK(){try{return!!new window.DOMParser().parseFromString(db(""),"text/html")}catch{return!1}}var fK=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fv(n){return n=String(n),n.match(fK)?n:"unsafe:"+n}function eu(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function hv(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var AF=eu("area,br,col,hr,img,wbr"),DF=eu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),TF=eu("rp,rt"),hK=hv(TF,DF),pK=hv(DF,eu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gK=hv(TF,eu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),S4=hv(AF,pK,gK,hK),MF=eu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mK=eu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vK=eu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),yK=hv(MF,mK,vK),_K=eu("script,style,template"),JS=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=xK(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=bK(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=A4(e).toLowerCase();if(!S4.hasOwnProperty(t))return this.sanitizedSomething=!0,!_K.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!yK.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;MF[a]&&(c=fv(c)),this.buf.push(" ",s,'="',D4(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=A4(e).toLowerCase();S4.hasOwnProperty(t)&&!AF.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(D4(e))}};function wK(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function bK(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw NF(e);return e}function xK(n){let e=n.firstChild;if(e&&wK(n,e))throw NF(e);return e}function A4(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function NF(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var CK=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,EK=/([^\#-~ |!])/g;function D4(n){return n.replace(/&/g,"&amp;").replace(CK,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(EK,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Fw;function TA(n,e){let t=null;try{Fw=Fw||uK(n);let r=e?String(e):"";t=Fw.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Fw.getInertBodyElement(r)}while(r!==o);let a=new JS().sanitizeChildren(T4(t)||t);return db(a)}finally{if(t){let r=T4(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function T4(n){return"content"in n&&IK(n)?n.content:null}function IK(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var SK=/^>|^->|<!--|-->|--!>|<!-$/g,AK=/(<|>)/g,DK="\u200B$1\u200B";function TK(n){return n.replace(SK,e=>e.replace(AK,DK))}function MK(n,e){return n.createText(e)}function NK(n,e,t){n.setValue(e,t)}function PK(n,e){return n.createComment(TK(e))}function PF(n,e,t){return n.createElement(e,t)}function Qw(n,e,t,r,i){n.insertBefore(e,t,r,i)}function kF(n,e,t){n.appendChild(e,t)}function M4(n,e,t,r,i){r!==null?Qw(n,e,t,r,i):kF(n,e,t)}function kK(n,e,t,r){n.removeChild(null,e,t,r)}function RK(n,e,t){n.setAttribute(e,"style",t)}function OK(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function RF(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&jW(n,e,r),i!==null&&OK(n,e,i),o!==null&&RK(n,e,o)}var nc=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(nc||{});function Vr(n){let e=FF();return e?e.sanitize(nc.URL,n)||"":Jl(n,"URL")?Da(n):fv(Xu(n))}function OF(n){let e=FF();if(e)return I4(e.sanitize(nc.RESOURCE_URL,n)||"");if(Jl(n,"ResourceURL"))return I4(Da(n));throw new Xe(904,!1)}function FK(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?OF:Vr}function MA(n,e,t){return FK(e,t)(n)}function FF(){let n=sn();return n&&n[jc].sanitizer}function LF(n){return n instanceof Function?n():n}function LK(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var VF="ng-template";function VK(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&LK(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(NA(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function NA(n){return n.type===4&&n.value!==VF}function jK(n,e,t){let r=n.type===4&&!t?VF:n.value;return e===r}function BK(n,e,t){let r=4,i=n.attrs,o=i!==null?qK(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ja(r)&&!Ja(c))return!1;if(s&&Ja(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!jK(n,c,t)||c===""&&e.length===1){if(Ja(r))return!1;s=!0}}else if(r&8){if(i===null||!VK(n,i,c,t)){if(Ja(r))return!1;s=!0}}else{let l=e[++a],u=UK(c,i,NA(n),t);if(u===-1){if(Ja(r))return!1;s=!0;continue}if(l!==""){let h;if(u>o?h="":h=i[u+1].toLowerCase(),r&2&&l!==h){if(Ja(r))return!1;s=!0}}}}return Ja(r)||s}function Ja(n){return(n&1)===0}function UK(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return HK(e,n)}function zK(n,e,t=!1){for(let r=0;r<e.length;r++)if(BK(n,e[r],t))return!0;return!1}function qK(n){for(let e=0;e<n.length;e++){let t=n[e];if(sF(t))return e}return n.length}function HK(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function N4(n,e){return n?":not("+e.trim()+")":e}function $K(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ja(s)&&(e+=N4(o,i),i=""),r=s,o=o||!Ja(r);t++}return i!==""&&(e+=N4(o,i)),e}function GK(n){return n.map($K).join(",")}function WK(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Ja(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var gs={};function PA(n,e,t,r,i,o,s,a,c,l,u){let h=Mi+r,m=h+i,g=KK(h,m),b=typeof l=="function"?l():l;return g[Ht]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:u}}function KK(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:gs);return t}function YK(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=PA(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function kA(n,e,t,r,i,o,s,a,c,l,u){let h=e.blueprint.slice();return h[Za]=i,h[en]=r|4|128|8|64|1024,(l!==null||n&&n[en]&2048)&&(h[en]|=2048),lS(h),h[Bi]=h[kf]=n,h[wo]=t,h[jc]=s||n&&n[jc],h[xr]=a||n&&n[xr],h[ed]=c||n&&n[ed]||null,h[ya]=o,h[G0]=eK(),h[$0]=u,h[iS]=l,h[_a]=e.type==2?n[_a]:h,h}function QK(n,e,t){let r=ba(e,n),i=YK(t),o=n[jc].rendererFactory,s=RA(n,kA(n,i,null,jF(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function jF(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function BF(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function RA(n,e){return n[jp]?n[rS][va]=e:n[jp]=e,n[rS]=e,e}function K(n=1){UF(gi(),sn(),Yl()+n,!1)}function UF(n,e,t,r){if(!r)if((e[en]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Bw(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Uw(e,o,0,t)}rd(t)}var fb=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(fb||{});function eA(n,e,t,r){let i=gn(null);try{let[o,s,a]=n.inputs[t],c=null;(s&fb.SignalBased)!==0&&(c=e[o][vo]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):eF(e,c,o,r)}finally{gn(i)}}var tc=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(tc||{}),ZK;function OA(n,e){return ZK(n,e)}var Yp=new Set,hb=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(hb||{}),Gf=new Ye(""),P4=new Set;function Jp(n){P4.has(n)||(P4.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var zF=!1,tA=class extends kn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,nS()&&(this.destroyRef=De(Ca,{optional:!0})??void 0,this.pendingTasks=De(qc,{optional:!0})??void 0)}emit(e){let t=gn(null);try{super.next(e)}finally{gn(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $r&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Lr=tA;function qF(n){let e,t;function r(){n=tv;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function k4(n){return queueMicrotask(()=>n()),()=>{n=tv}}var FA="isAngularZone",Zw=FA+"_ID",XK=0,Ut=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Lr(!1);onMicrotaskEmpty=new Lr(!1);onStable=new Lr(!1);onError=new Lr(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=zF}=e;if(typeof Zone>"u")throw new Xe(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tY(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(FA)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Xe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Xe(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,JK,tv,tv);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},JK={};function LA(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function eY(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){qF(()=>{n.callbackScheduled=!1,nA(n),n.isCheckStableRunning=!0,LA(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),nA(n)}function tY(n){let e=()=>{eY(n)},t=XK++;n._inner=n._inner.fork({name:"angular",properties:{[FA]:!0,[Zw]:t,[Zw+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(nY(c))return r.invokeTask(o,s,a,c);try{return R4(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),O4(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return R4(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!rY(c)&&e(),O4(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,nA(n),LA(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function nA(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function R4(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function O4(n){n._nesting--,LA(n)}var sv=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Lr;onMicrotaskEmpty=new Lr;onStable=new Lr;onError=new Lr;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function nY(n){return HF(n,"__ignore_ng_zone__")}function rY(n){return HF(n,"__scheduler_tick__")}function HF(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function $F(n="zone.js",e){return n==="noop"?new sv:n==="zone.js"?new Ut(e):n}var VA=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new n})}return n})(),GF=[0,1,2,3],WF=(()=>{class n{ngZone=De(Ut);scheduler=De($l);errorHandler=De(Ya,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){De(Gf,{optional:!0})}execute(){let t=this.sequences.size>0;t&&lr(16),this.executing=!0;for(let r of GF)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&lr(17)}register(t){let{view:r}=t;r!==void 0?((r[Of]??=[]).push(t),zp(r),r[en]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(hb.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new n})}return n})(),Xw=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Of];e&&(this.view[Of]=e.filter(t=>t!==this))}};function pv(n,e){let t=e?.injector??De(Rn);return Jp("NgAfterNextRender"),oY(n,t,e,!0)}function iY(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function oY(n,e,t,r){let i=e.get(VA);i.impl??=e.get(WF);let o=e.get(Gf,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Ca):null,a=e.get(Pw,null,{optional:!0}),c=new Xw(i.impl,iY(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var sY=new Ye("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function KF(n,e,t){let r=n.get(sY);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function aY(n,e){for(let[t,r]of e)KF(n,r.animateFns)}function F4(n,e,t,r){let i=n?.[K0]?.enter;e!==null&&i&&i.has(t.index)&&aY(r,i)}function $p(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;Xa(i)?c=i:Uc(i)&&(l=!0,i=i[Za]);let u=wa(i);n===0&&r!==null?(F4(a,r,o,t),s==null?kF(e,r,u):Qw(e,r,u,s||null,!0)):n===1&&r!==null?(F4(a,r,o,t),Qw(e,r,u,s||null,!0)):n===2?L4(a,o,t,h=>{kK(e,u,l,h)}):n===3&&L4(a,o,t,()=>{e.destroyNode(u)}),c!=null&&wY(e,n,t,c,o,r,s)}}function cY(n,e){YF(n,e),e[Za]=null,e[ya]=null}function lY(n,e,t,r,i,o){r[Za]=i,r[ya]=e,pb(n,r,t,1,i,o)}function YF(n,e){e[jc].changeDetectionScheduler?.notify(9),pb(n,e,e[xr],2,null,null)}function uY(n){let e=n[jp];if(!e)return PS(n[Ht],n);for(;e;){let t=null;if(Uc(e))t=e[jp];else{let r=e[Ho];r&&(t=r)}if(!t){for(;e&&!e[va]&&e!==n;)Uc(e)&&PS(e[Ht],e),e=e[Bi];e===null&&(e=n),Uc(e)&&PS(e[Ht],e),t=e&&e[va]}e=t}}function jA(n,e){let t=n[Ff],r=t.indexOf(e);t.splice(r,1)}function QF(n,e){if(Lf(e))return;let t=e[xr];t.destroyNode&&pb(n,e,t,3,null,null),uY(e)}function PS(n,e){if(Lf(e))return;let t=gn(null);try{e[en]&=-129,e[en]|=256,e[zs]&&M0(e[zs]),hY(n,e),fY(n,e),e[Ht].type===1&&e[xr].destroy();let r=e[td];if(r!==null&&Xa(e[Bi])){r!==e[Bi]&&jA(r,e);let i=e[Bc];i!==null&&i.detachView(n)}qS(e)}finally{gn(t)}}function L4(n,e,t,r){let i=n?.[K0];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Yp.add(n),KF(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),dY(n,r)}else n&&Yp.delete(n),r(!1)},i)}function dY(n,e){let t=n[K0]?.running;if(t){t.then(()=>{n[K0].running=void 0,Yp.delete(n),e(!0)});return}e(!1)}function fY(n,e){let t=n.cleanup,r=e[Vp];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Vp]=null);let i=e[zl];if(i!==null){e[zl]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[W0];if(o!==null){e[W0]=null;for(let s of o)s.destroy()}}function hY(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Uf)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];lr(4,a,c);try{c.call(a)}finally{lr(5,a,c)}}else{lr(4,i,o);try{o.call(i)}finally{lr(5,i,o)}}}}}function pY(n,e,t){return gY(n,e.parent,t)}function gY(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Za];if(Kl(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ql.None||i===Ql.Emulated)return null}return ba(r,t)}function mY(n,e,t){return yY(n,e,t)}function vY(n,e,t){return n.type&40?ba(n,t):null}var yY=vY,V4;function BA(n,e,t,r){let i=pY(n,r,e),o=e[xr],s=r.parent||e[ya],a=mY(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)M4(o,i,t[c],a,!1);else M4(o,i,t,a,!1);V4!==void 0&&V4(o,r,e,t,i)}function nv(n,e){if(e!==null){let t=e.type;if(t&3)return ba(e,n);if(t&4)return rA(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return nv(n,r);{let i=n[e.index];return Xa(i)?rA(-1,i):wa(i)}}else{if(t&128)return nv(n,e.next);if(t&32)return OA(e,n)()||wa(n[e.index]);{let r=ZF(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zu(n[_a]);return nv(i,r)}else return nv(n,e.next)}}}return null}function ZF(n,e){if(e!==null){let r=n[_a][ya],i=e.projection;return r.projection[i]}return null}function rA(n,e){let t=Ho+n+1;if(t<e.length){let r=e[t],i=r[Ht].firstChild;if(i!==null)return nv(r,i)}return e[nd]}function UA(n,e,t,r,i,o,s){for(;t!=null;){let a=r[ed];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&Kp(wa(c),r),t.flags|=2),!xA(t))if(l&8)UA(n,e,t.child,r,i,o,!1),$p(e,n,a,i,c,t,o,r);else if(l&32){let u=OA(t,r),h;for(;h=u();)$p(e,n,a,i,h,t,o,r);$p(e,n,a,i,c,t,o,r)}else l&16?_Y(n,e,r,t,i,o):$p(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function pb(n,e,t,r,i,o){UA(t,r,n.firstChild,e,i,o,!1)}function _Y(n,e,t,r,i,o){let s=t[_a],c=s[ya].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];$p(e,n,t[ed],i,u,r,o,t)}else{let l=c,u=s[Bi];mF(r)&&(l.flags|=128),UA(n,e,l,u,i,o,!0)}}function wY(n,e,t,r,i,o,s){let a=r[nd],c=wa(r);a!==c&&$p(e,n,t,o,a,i,s);for(let l=Ho;l<r.length;l++){let u=r[l];pb(u[Ht],u,n,e,o,a)}}function bY(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:tc.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=tc.Important),n.setStyle(t,r,i,o))}}function XF(n,e,t,r,i){let o=Yl(),s=r&2;try{rd(-1),s&&e.length>Mi&&UF(n,e,Mi,!1),lr(s?2:0,i,t),t(r,i)}finally{rd(o),lr(s?3:1,i,t)}}function gb(n,e,t){AY(n,e,t),(t.flags&64)===64&&DY(n,e,t)}function mb(n,e,t=ba){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function xY(n,e,t,r){let o=r.get(CF,xF)||t===Ql.ShadowDom,s=n.selectRootElement(e,o);return CY(s),s}function CY(n){EY(n)}var EY=()=>null;function IY(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function JF(n,e,t,r,i,o){let s=e[Ht];if(vb(n,s,e,t,r)){Kl(n)&&eL(e,n.index);return}n.type&3&&(t=IY(t)),SY(n,e,t,r,i,o)}function SY(n,e,t,r,i,o){if(n.type&3){let s=ba(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function eL(n,e){let t=xa(e,n);t[en]&16||(t[en]|=64)}function AY(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Kl(t)&&QK(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Kw(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=ov(e,n,s,t);if(Kp(c,e),o!==null&&NY(e,s-r,c,a,t,o),zc(a)){let l=xa(t.index,e);l[wo]=ov(e,n,s,t)}}}function DY(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=l4();try{rd(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Aw(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&TY(c,l)}}finally{rd(-1),Aw(s)}}function TY(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function zA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];zK(e,o.selectors,!1)&&(r??=[],zc(o)?r.unshift(o):r.push(o))}return r}function MY(n,e,t,r,i,o){let s=ba(n,e);tL(e[xr],s,o,n.value,t,r,i)}function tL(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Xu(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function NY(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];eA(r,t,c,l)}}function qA(n,e,t,r,i){let o=Mi+t,s=e[Ht],a=i(s,e,n,r,t);e[o]=a,qp(n,!0);let c=n.type===2;return c?(RF(e[xr],a,n),(J3()===0||Bp(n))&&Kp(a,e),e4()):Kp(a,e),Nw()&&(!c||!xA(n))&&BA(s,e,a,n),n}function HA(n){let e=n;return yS()?r4():(e=e.parent,qp(e,!1)),e}function PY(n,e){let t=n[ed];if(!t)return;let r;try{r=t.get(ps,null)}catch{r=null}r?.(e)}function vb(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],h=e.data[l];eA(h,t[l],u,i),a=!0}if(o)for(let c of o){let l=t[c],u=e.data[c];eA(u,l,r,i),a=!0}return a}function kY(n,e){let t=xa(e,n),r=t[Ht];RY(r,t);let i=t[Za];i!==null&&t[$0]===null&&(t[$0]=EF(i,t[ed])),lr(18),$A(r,t,t[wo]),lr(19,t[wo])}function RY(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $A(n,e,t){Tw(e);try{let r=n.viewQuery;r!==null&&$S(1,r,t);let i=n.template;i!==null&&XF(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Bc]?.finishViewCreation(n),n.staticContentQueries&&IF(n,e),n.staticViewQueries&&$S(2,n.viewQuery,t);let o=n.components;o!==null&&OY(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[en]&=-5,Mw()}}function OY(n,e){for(let t=0;t<e.length;t++)kY(n,e[t])}function FY(n,e,t,r){let i=gn(null);try{let o=e.tView,a=n[en]&4096?4096:16,c=kA(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[td]=l;let u=n[Bc];return u!==null&&(c[Bc]=u.createEmbeddedView(o)),$A(o,c,t),c}finally{gn(i)}}function j4(n,e){return!e||e.firstChild===null||mF(n)}function av(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(wa(o)),Xa(o)&&nL(o,r);let s=t.type;if(s&8)av(n,e,t.child,r);else if(s&32){let a=OA(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=ZF(e,t);if(Array.isArray(a))r.push(...a);else{let c=Zu(e[_a]);av(c[Ht],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function nL(n,e){for(let t=Ho;t<n.length;t++){let r=n[t],i=r[Ht].firstChild;i!==null&&av(r[Ht],r,i,e)}n[nd]!==n[Za]&&e.push(n[nd])}function rL(n){if(n[Of]!==null){for(let e of n[Of])e.impl.addSequence(e);n[Of].length=0}}var iL=[];function LY(n){return n[zs]??VY(n)}function VY(n){let e=iL.pop()??Object.create(BY);return e.lView=n,e}function jY(n){n.lView[zs]!==n&&(n.lView=null,iL.push(n))}var BY=Rt(Oe({},yp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{zp(n.lView)},consumerOnSignalRead(){this.lView[zs]=this}});function UY(n){let e=n[zs]??Object.create(zY);return e.lView=n,e}var zY=Rt(Oe({},yp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Zu(n.lView);for(;e&&!oL(e[Ht]);)e=Zu(e);e&&uS(e)},consumerOnSignalRead(){this.lView[zs]=this}});function oL(n){return n.type!==2}function sL(n){if(n[W0]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[W0])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[en]&8192)}}var qY=100;function aL(n,e=0){let r=n[jc].rendererFactory,i=!1;i||r.begin?.();try{HY(n,e)}finally{i||r.end?.()}}function HY(n,e){let t=_S();try{wS(!0),iA(n,e);let r=0;for(;Q0(n);){if(r===qY)throw new Xe(103,!1);r++,iA(n,1)}}finally{wS(t)}}function $Y(n,e,t,r){if(Lf(e))return;let i=e[en],o=!1,s=!1;Tw(e);let a=!0,c=null,l=null;o||(oL(n)?(l=LY(e),c=wp(l)):M1()===null?(a=!1,l=UY(e),c=wp(l)):e[zs]&&(M0(e[zs]),e[zs]=null));try{lS(e),s4(n.bindingStartIndex),t!==null&&XF(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let g=n.preOrderCheckHooks;g!==null&&Bw(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Uw(e,g,0,null),MS(e,0)}if(s||GY(e),sL(e),cL(e,0),n.contentQueries!==null&&IF(n,e),!o)if(u){let g=n.contentCheckHooks;g!==null&&Bw(e,g)}else{let g=n.contentHooks;g!==null&&Uw(e,g,1),MS(e,1)}KY(n,e);let h=n.components;h!==null&&uL(e,h,0);let m=n.viewQuery;if(m!==null&&$S(2,m,r),!o)if(u){let g=n.viewCheckHooks;g!==null&&Bw(e,g)}else{let g=n.viewHooks;g!==null&&Uw(e,g,2),MS(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ww]){for(let g of e[ww])g();e[ww]=null}o||(rL(e),e[en]&=-73)}catch(u){throw o||zp(e),u}finally{l!==null&&(D0(l,c),a&&jY(l)),Mw()}}function cL(n,e){for(let t=yF(n);t!==null;t=_F(t))for(let r=Ho;r<t.length;r++){let i=t[r];lL(i,e)}}function GY(n){for(let e=yF(n);e!==null;e=_F(e)){if(!(e[en]&2))continue;let t=e[Ff];for(let r=0;r<t.length;r++){let i=t[r];uS(i)}}}function WY(n,e,t){lr(18);let r=xa(e,n);lL(r,t),lr(19,r[wo])}function lL(n,e){Cw(n)&&iA(n,e)}function iA(n,e){let r=n[Ht],i=n[en],o=n[zs],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&T0(o)),s||=!1,o&&(o.dirty=!1),n[en]&=-9217,s)$Y(r,n,r.template,n[wo]);else if(i&8192){let a=gn(null);try{sL(n),cL(n,1);let c=r.components;c!==null&&uL(n,c,1),rL(n)}finally{gn(a)}}}function uL(n,e,t){for(let r=0;r<e.length;r++)WY(n,e[r],t)}function KY(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)rd(~i);else{let o=i,s=t[++r],a=t[++r];c4(s,o);let c=e[o];lr(24,c),a(2,c),lr(25,c)}}}finally{rd(-1)}}function GA(n,e){let t=_S()?64:1088;for(n[jc].changeDetectionScheduler?.notify(e);n;){n[en]|=t;let r=Zu(n);if(Up(n)&&!r)return n;n=r}return null}function dL(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function YY(n,e,t,r=!0){let i=e[Ht];if(QY(i,e,n,t),r){let s=rA(t,n),a=e[xr],c=a.parentNode(n[nd]);c!==null&&lY(i,n[ya],a,e,c,s)}let o=e[$0];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function oA(n,e){if(n.length<=Ho)return;let t=Ho+e,r=n[t];if(r){let i=r[td];i!==null&&i!==n&&jA(i,r),e>0&&(n[t-1][va]=r[va]);let o=z0(n,Ho+e);cY(r[Ht],r);let s=o[Bc];s!==null&&s.detachView(o[Ht]),r[Bi]=null,r[va]=null,r[en]&=-129}return r}function QY(n,e,t,r){let i=Ho+r,o=t.length;r>0&&(t[i-1][va]=e),r<o-Ho?(e[va]=t[i],KI(t,Ho+r,e)):(t.push(e),e[va]=null),e[Bi]=t;let s=e[td];s!==null&&t!==s&&fL(s,e);let a=e[Bc];a!==null&&a.insertView(n),Ew(e),e[en]|=128}function fL(n,e){let t=n[Ff],r=e[Bi];if(Uc(r))n[en]|=2;else{let i=r[Bi][_a];e[_a]!==i&&(n[en]|=2)}t===null?n[Ff]=[e]:t.push(e)}var id=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Ht];return av(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[wo]}set context(e){this._lView[wo]=e}get destroyed(){return Lf(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Bi];if(Xa(e)){let t=e[Y0],r=t?t.indexOf(this):-1;r>-1&&(oA(e,r),z0(t,r))}this._attachedToViewContainer=!1}QF(this._lView[Ht],this._lView)}onDestroy(e){dS(this._lView,e)}markForCheck(){GA(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[en]&=-129}reattach(){Ew(this._lView),this._lView[en]|=128}detectChanges(){this._lView[en]|=1024,aL(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Up(this._lView),t=this._lView[td];t!==null&&!e&&jA(t,this._lView),YF(this._lView[Ht],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Xe(902,!1);this._appRef=e;let t=Up(this._lView),r=this._lView[td];r!==null&&!t&&fL(r,this._lView),Ew(this._lView)}};var od=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=ZY;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=FY(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new id(o)}}return n})();function ZY(){return yb(Ni(),sn())}function yb(n,e){return n.type&4?new od(e,n,Xp(n,e)):null}function _b(n,e,t,r,i){let o=n.data[e];if(o===null)o=XY(n,e,t,r,i),a4()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=n4();o.injectorIndex=s===null?-1:s.injectorIndex}return qp(o,!0),o}function XY(n,e,t,r,i){let o=vS(),s=yS(),a=s?o:o&&o.parent,c=n.data[e]=eQ(n,a,t,e,r,i);return JY(n,c,o,s),c}function JY(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function eQ(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return t4()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var _2e=new RegExp(`^(\\d+)*(${iK}|${rK})*(.*)`);var tQ=()=>null;function B4(n,e){return tQ(n,e)}var hL=class{},wb=class{},sA=class{resolveComponentFactory(e){throw new Xe(917,!1)}},gv=class{static NULL=new sA},zf=class{},$o=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>nQ()}return n})();function nQ(){let n=sn(),e=Ni(),t=xa(e.index,n);return(Uc(t)?t:n)[xr]}var pL=(()=>{class n{static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>null})}return n})();var qw={},aA=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,qw,r);return i!==qw||t===qw?i:this.parentInjector.get(e,t,r)}};function Jw(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=pw(i,a);else if(o==2){let c=a,l=e[++s];r=pw(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function tt(n,e=0){let t=sn();if(t===null)return Ve(n,e);let r=Ni();return hF(r,t,eo(n),e)}function WA(){let n="invalid";throw new Error(n)}function gL(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}oQ(n,e,t,a,o,c,l)}o!==null&&r!==null&&rQ(t,r,o)}function rQ(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Xe(-301,!1);r.push(e[i],o)}}function iQ(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function oQ(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let m=0;m<a;m++){let g=r[m];!c&&zc(g)&&(c=!0,iQ(n,t,m)),US(Kw(t,e),n,g.type)}dQ(t,n.data.length,a);for(let m=0;m<a;m++){let g=r[m];g.providersResolver&&g.providersResolver(g)}let l=!1,u=!1,h=BF(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let g=r[m];if(t.mergedAttrs=Wp(t.mergedAttrs,g.hostAttrs),aQ(n,t,e,h,g),uQ(h,g,i),s!==null&&s.has(g)){let[I,T]=s.get(g);t.directiveToIndex.set(g.type,[h,I+t.directiveStart,T+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,h);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let b=g.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(b.ngOnChanges||b.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),h++}sQ(n,t,o)}function sQ(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))U4(0,e,i,r),U4(1,e,i,r),q4(e,r,!1);else{let o=t.get(i);z4(0,e,o,r),z4(1,e,o,r),q4(e,r,!0)}}}function U4(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),mL(e,o)}}function z4(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),mL(e,s)}}function mL(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function q4(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||NA(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function aQ(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Qu(i.type,!0)),s=new Uf(o,zc(i),tt,null);n.blueprint[r]=s,t[r]=s,cQ(n,e,r,BF(n,t,i.hostVars,gs),i)}function cQ(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;lQ(s)!=a&&s.push(a),s.push(t,r,o)}}function lQ(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function uQ(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zc(e)&&(t[""]=n)}}function dQ(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function KA(n,e,t,r,i,o,s,a){let c=e[Ht],l=c.consts,u=Vf(l,s),h=_b(c,n,t,r,u);return o&&gL(c,e,h,Vf(l,a),i),h.mergedAttrs=Wp(h.mergedAttrs,h.attrs),h.attrs!==null&&Jw(h,h.attrs,!1),h.mergedAttrs!==null&&Jw(h,h.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,h),h}function YA(n,e){iF(n,e),oS(e)&&n.queries.elementEnd(e)}function fQ(n,e,t,r,i,o){let s=e.consts,a=Vf(s,i),c=_b(e,n,t,r,a);if(c.mergedAttrs=Wp(c.mergedAttrs,c.attrs),o!=null){let l=Vf(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Jw(c,c.attrs,!1),c.mergedAttrs!==null&&Jw(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function QA(n){return bb(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function vL(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function bb(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ZA(n,e,t){return n[e]=t}function Ia(n,e,t){if(t===gs)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function XA(n,e,t,r){let i=Ia(n,e,t);return Ia(n,e+1,r)||i}function hQ(n,e,t,r,i){let o=XA(n,e,t,r);return Ia(n,e+2,i)||o}function kS(n,e,t){return function r(i){let o=Kl(n)?xa(n.index,e):e;GA(o,5);let s=e[wo],a=H4(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=H4(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function H4(n,e,t,r){let i=gn(null);try{return lr(6,e,t),t(r)!==!1}catch(o){return PY(n,o),!1}finally{lr(7,e,t),gn(i)}}function pQ(n,e,t,r,i,o,s,a){let c=Bp(n),l=!1,u=null;if(!r&&c&&(u=mQ(e,t,o,n.index)),u!==null){let h=u.__ngLastListenerFn__||u;h.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let h=ba(n,t),m=r?r(h):h;sK(t,m,o,a);let g=i.listen(m,o,a);if(!gQ(o)){let b=r?I=>r(wa(I[n.index])):n.index;yL(b,e,t,o,a,g,!1)}}return l}function gQ(n){return n.startsWith("animation")||n.startsWith("transition")}function mQ(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Vp],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function yL(n,e,t,r,i,o,s){let a=e.firstCreatePass?hS(e):null,c=fS(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function $4(n,e,t,r,i,o){let s=e[t],a=e[Ht],l=a.data[t].outputs[r],h=s[l].subscribe(o);yL(n.index,a,e,i,o,h,!0)}var cA=Symbol("BINDING");var eb=class extends gv{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Wl(e);return new qf(t,this.ngModule)}};function vQ(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&fb.SignalBased)!==0};return i&&(o.transform=i),o})}function yQ(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function _Q(n,e,t){let r=e instanceof Wn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new aA(t,r):t}function wQ(n){let e=n.get(zf,null);if(e===null)throw new Xe(407,!1);let t=n.get(pL,null),r=n.get($l,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function bQ(n,e){let t=_L(n);return PF(e,t,t==="svg"?sS:t==="math"?W3:null)}function _L(n){return(n.selectors[0][0]||"div").toLowerCase()}var qf=class extends wb{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=vQ(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=yQ(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=GK(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){lr(22);let a=gn(null);try{let c=this.componentDef,l=xQ(r,c,s,o),u=_Q(c,i||this.ngModule,e),h=wQ(u),m=h.rendererFactory.createRenderer(null,c),g=r?xY(m,r,c.encapsulation,u):bQ(c,m),b=s?.some(G4)||o?.some(N=>typeof N!="function"&&N.bindings.some(G4)),I=kA(null,l,null,512|jF(c),null,null,h,m,u,null,EF(g,u,!0));I[Mi]=g,Tw(I);let T=null;try{let N=KA(Mi,I,2,"#host",()=>l.directiveRegistry,!0,0);RF(m,g,N),Kp(g,I),gb(l,I,N),CA(l,N,I),YA(l,N),t!==void 0&&EQ(N,this.ngContentSelectors,t),T=xa(N.index,I),I[wo]=T[wo],$A(l,I,null)}catch(N){throw T!==null&&qS(T),qS(I),N}finally{lr(23),Mw()}return new tb(this.componentType,I,!!b)}finally{gn(a)}}};function xQ(n,e,t,r){let i=n?["ng-version","20.3.15"]:WK(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[cA].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let h=r[u];if(typeof h!="function")for(let m of h.bindings){a+=m[cA].requiredVars;let g=u+1;m.create&&(m.targetIdx=g,(o??=[]).push(m)),m.update&&(m.targetIdx=g,(s??=[]).push(m))}}let c=[e];if(r)for(let u of r){let h=typeof u=="function"?u:u.type,m=XI(h);c.push(m)}return PA(0,null,CQ(o,s),1,a,c,null,null,null,[i],null)}function CQ(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function G4(n){let e=n[cA].kind;return e==="input"||e==="twoWay"}var tb=class extends hL{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=bw(t[Ht],Mi),this.location=Xp(this._tNode,t),this.instance=xa(this._tNode.index,t)[wo],this.hostView=this.changeDetectorRef=new id(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=vb(r,i[Ht],i,e,t);this.previousInputValues.set(e,t);let s=xa(r.index,i);GA(s,1)}get injector(){return new Bf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function EQ(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var tu=(()=>{class n{static __NG_ELEMENT_ID__=IQ}return n})();function IQ(){let n=Ni();return bL(n,sn())}var SQ=tu,wL=class extends SQ{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Xp(this._hostTNode,this._hostLView)}get injector(){return new Bf(this._hostTNode,this._hostLView)}get parentInjector(){let e=_A(this._hostTNode,this._hostLView);if(aF(e)){let t=Gw(e,this._hostLView),r=$w(e),i=t[Ht].data[r+8];return new Bf(i,t)}else return new Bf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=W4(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ho}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=B4(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,j4(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!NW(e),l;if(c)l=t;else{let T=t||{};l=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef,s=T.directives,a=T.bindings}let u=c?e:new qf(Wl(e)),h=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(c?h:this.parentInjector).get(Wn,null);N&&(o=N)}let m=Wl(u.componentType??{}),g=B4(this._lContainer,m?.id??null),b=g?.firstChild??null,I=u.create(h,i,b,o,s,a);return this.insertImpl(I.hostView,l,j4(this._hostTNode,g)),I}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Y3(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Bi],l=new wL(c,c[ya],c[Bi]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return YY(s,i,o,r),e.attachToViewContainerRef(),KI(RS(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=W4(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=oA(this._lContainer,t);r&&(z0(RS(this._lContainer),t),QF(r[Ht],r))}detach(e){let t=this._adjustIndex(e,-1),r=oA(this._lContainer,t);return r&&z0(RS(this._lContainer),t)!=null?new id(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function W4(n){return n[Y0]}function RS(n){return n[Y0]||(n[Y0]=[])}function bL(n,e){let t,r=e[n.index];return Xa(r)?t=r:(t=dL(r,e,null,n),e[n.index]=t,RA(e,t)),DQ(t,e,n,r),new wL(t,n,e)}function AQ(n,e){let t=n[xr],r=t.createComment(""),i=ba(e,n),o=t.parentNode(i);return Qw(t,o,r,t.nextSibling(i),!1),r}var DQ=NQ,TQ=()=>!1;function MQ(n,e,t){return TQ(n,e,t)}function NQ(n,e,t,r){if(n[nd])return;let i;t.type&8?i=wa(r):i=AQ(e,t),n[nd]=i}var lA=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},uA=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)JA(e,t).matches!==null&&this.queries[t].setDirty()}},nb=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=jQ(e):this.predicate=e}},dA=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},fA=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,PQ(t,o)),this.matchTNodeWithReadOption(e,t,zw(t,e,o,!1,!1))}else r===od?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,zw(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===no||i===tu||i===od&&t.type&4)this.addMatch(t.index,-2);else{let o=zw(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function PQ(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function kQ(n,e){return n.type&11?Xp(n,e):n.type&4?yb(n,e):null}function RQ(n,e,t,r){return t===-1?kQ(e,n):t===-2?OQ(n,e,r):ov(n,n[Ht],t,e)}function OQ(n,e,t){if(t===no)return Xp(e,n);if(t===od)return yb(e,n);if(t===tu)return bL(e,n)}function xL(n,e,t,r){let i=e[Bc].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(RQ(e,u,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function hA(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=xL(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let h=Ho;h<u.length;h++){let m=u[h];m[td]===m[Bi]&&hA(m[Ht],m,l,r)}if(u[Ff]!==null){let h=u[Ff];for(let m=0;m<h.length;m++){let g=h[m];hA(g[Ht],g,l,r)}}}}}return r}function FQ(n,e){return n[Bc].queries[e].queryList}function CL(n,e,t){let r=new Yw((t&4)===4);return X3(n,e,r,r.destroy),(e[Bc]??=new uA).queries.push(new lA(r))-1}function LQ(n,e,t){let r=gi();return r.firstCreatePass&&(EL(r,new nb(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),CL(r,sn(),e)}function VQ(n,e,t,r){let i=gi();if(i.firstCreatePass){let o=Ni();EL(i,new nb(e,t,r),o.index),BQ(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return CL(i,sn(),t)}function jQ(n){return n.split(",").map(e=>e.trim())}function EL(n,e,t){n.queries===null&&(n.queries=new dA),n.queries.track(new fA(e,t))}function BQ(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function JA(n,e){return n.queries.getByIndex(e)}function UQ(n,e){let t=n[Ht],r=JA(t,e);return r.crossesNgTemplate?hA(t,n,e,[]):xL(t,n,r,e)}function IL(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(a=>qQ(i,a)))}return o}return rb.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((h,m)=>{a.push(""),s.push(r(h).then(g=>{a[l+m]=g,u.splice(u.indexOf(h),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>HQ(o));e.push(c)}),SL(),Promise.all(e).then(()=>{})}var rb=new Map,zQ=new Set;function SL(){let n=rb;return rb=new Map,n}function AL(){return rb.size===0}function qQ(n,e){return typeof e=="string"?e:e.status!==void 0&&e.status!==200?Promise.reject(new Xe(918,!1)):e.text()}function HQ(n){zQ.delete(n)}var Hf=class{},xb=class{};var cv=class extends Hf{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new eb(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=ZI(e);this._bootstrapComponents=LF(o.bootstrap),this._r3Injector=ES(e,t,[{provide:Hf,useValue:this},{provide:gv,useValue:this.componentFactoryResolver},...r],Hl(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},lv=class extends xb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new cv(this.moduleType,e,[])}};function DL(n,e,t){return new cv(n,e,t,!1)}var ib=class extends Hf{injector;componentFactoryResolver=new eb(this);instance=null;constructor(e){super();let t=new Nf([...e.providers,{provide:Hf,useValue:this},{provide:gv,useValue:this.componentFactoryResolver}],e.parent||H0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function eg(n,e,t=null){return new ib({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var $Q=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=JI(!1,t.type),i=r.length>0?eg([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Qe({token:n,providedIn:"environment",factory:()=>new n(Ve(Wn))})}return n})();function Kn(n){return Zp(()=>{let e=TL(n),t=Rt(Oe({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wA.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get($Q).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ql.Emulated,styles:n.styles||qo,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Jp("NgStandalone"),ML(t);let r=n.dependencies;return t.directiveDefs=K4(r,GQ),t.pipeDefs=K4(r,U3),t.id=YQ(t),t})}function GQ(n){return Wl(n)||XI(n)}function ur(n){return Zp(()=>({type:n.type,bootstrap:n.bootstrap||qo,declarations:n.declarations||qo,imports:n.imports||qo,exports:n.exports||qo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function WQ(n,e){if(n==null)return Ju;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=fb.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function KQ(n){if(n==null)return Ju;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Yn(n){return Zp(()=>{let e=TL(n);return ML(e),e})}function mv(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function TL(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ju,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||qo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:WQ(n.inputs,e),outputs:KQ(n.outputs),debugInfo:null}}function ML(n){n.features?.forEach(e=>e(n))}function K4(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function YQ(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function QQ(n){return Object.getPrototypeOf(n.prototype).constructor}function Go(n){let e=QQ(n.type),t=!0,r=[n];for(;e;){let i;if(zc(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Xe(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=OS(n.inputs),s.declaredInputs=OS(n.declaredInputs),s.outputs=OS(n.outputs);let a=i.hostBindings;a&&tZ(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&JQ(n,c),l&&eZ(n,l),ZQ(n,i),P3(n.outputs,i.outputs),zc(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Go&&(t=!1)}}e=Object.getPrototypeOf(e)}XQ(r)}function ZQ(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function XQ(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wp(i.hostAttrs,t=Wp(t,i.hostAttrs))}}function OS(n){return n===Ju?{}:n===qo?[]:n}function JQ(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function eZ(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function tZ(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function nZ(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Wp(n.mergedAttrs,n.attrs);let u=n.tView=PA(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),qp(n,!1);let c=iZ(t,e,n,r);Nw()&&BA(t,e,c,n),Kp(c,e);let l=dL(c,e,c,n);e[r+Mi]=l,RA(e,l),MQ(l,n,e)}function rZ(n,e,t,r,i,o,s,a,c,l,u){let h=t+Mi,m;return e.firstCreatePass?(m=_b(e,h,4,s||null,a||null),Iw()&&gL(e,n,m,Vf(e.consts,l),zA),iF(e,m)):m=e.data[h],nZ(m,n,e,t,r,i,o,c),Bp(m)&&gb(e,n,m),l!=null&&mb(n,m,u),m}function Je(n,e,t,r,i,o,s,a){let c=sn(),l=gi(),u=Vf(l.consts,o);return rZ(c,l,n,e,t,r,i,u,void 0,s,a),Je}var iZ=oZ;function oZ(n,e,t,r){return J0(!0),e[xr].createComment("")}var Cb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Eb=new Ye(""),tg=new Ye(""),vv=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,nS()&&(this._destroyRef=De(Ca,{optional:!0})??void 0),e5||(NL(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(Ve(Ut),Ve(yv),Ve(tg))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),yv=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return e5?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function NL(n){e5=n}var e5;function sd(n){return!!n&&typeof n.then=="function"}function t5(n){return!!n&&typeof n.subscribe=="function"}var n5=new Ye("");function ng(n){return to([{provide:n5,multi:!0,useValue:n}])}var r5=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=De(n5,{optional:!0})??[];injector=De(Rn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=pi(this.injector,i);if(sd(o))t.push(o);else if(t5(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ib=new Ye("");function PL(){aI(()=>{let n="";throw new Xe(600,n)})}function kL(n){return n.isBoundToModule}var sZ=10;function i5(n,e){return Array.isArray(e)?e.reduce(i5,n):Oe(Oe({},n),e)}var Wo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=De(ps);afterRenderManager=De(VA);zonelessEnabled=De(ev);rootEffectScheduler=De(TS);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new kn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=De(qc);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(at(t=>!t))}constructor(){De(Gf,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=De(Wn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Rn.NULL){return this._injector.get(Ut).run(()=>{lr(10);let s=t instanceof wb;if(!this._injector.get(r5).done){let b="";throw new Xe(405,b)}let c;s?c=t:c=this._injector.get(gv).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=kL(c)?void 0:this._injector.get(Hf),u=r||c.selector,h=c.create(i,[],u,l),m=h.location.nativeElement,g=h.injector.get(Eb,null);return g?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),rv(this.components,h),g?.unregisterApplication(m)}),this._loadComponent(h),lr(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){lr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(hb.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Xe(101,!1);let t=gn(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,gn(t),this.afterTick.next(),lr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(zf,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<sZ;)lr(14),this.synchronizeOnce(),lr(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Q0(i))continue;let o=r&&!this.zonelessEnabled?0:1;aL(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Q0(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;rv(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Ib,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>rv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Xe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $c(n,e){let t=sn(),r=jf();if(Ia(t,r,e)){let i=gi(),o=X0();if(vb(o,i,t,n,e))Kl(o)&&eL(t,o.index);else{let a=ba(o,t);tL(t[xr],a,null,o.value,n,e,null)}}return $c}function nu(n,e,t,r){let i=sn(),o=jf();if(Ia(i,o,e)){let s=gi(),a=X0();MY(a,i,n,e,t,r)}return nu}var S2e=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function de(n,e,t){let r=sn(),i=jf();if(Ia(r,i,e)){let o=gi(),s=X0();JF(s,r,n,e,r[xr],t)}return de}function pA(n,e,t,r,i){vb(e,n,t,i?"class":"style",r)}function C(n,e,t,r){let i=sn(),o=i[Ht],s=n+Mi,a=o.firstCreatePass?KA(s,i,2,e,zA,Iw(),t,r):o.data[s];if(qA(a,i,n,e,RL),Bp(a)){let c=i[Ht];gb(c,i,a),CA(c,a,i)}return r!=null&&mb(i,a),C}function P(){let n=gi(),e=Ni(),t=HA(e);return n.firstCreatePass&&YA(n,t),gS(t)&&mS(),pS(),t.classesWithoutHost!=null&&LW(t)&&pA(n,t,sn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&VW(t)&&pA(n,t,sn(),t.stylesWithoutHost,!1),P}function Tt(n,e,t,r){return C(n,e,t,r),P(),Tt}function o5(n,e,t,r){let i=sn(),o=i[Ht],s=n+Mi,a=o.firstCreatePass?fQ(s,o,2,e,t,r):o.data[s];return qA(a,i,n,e,RL),r!=null&&mb(i,a),o5}function s5(){let n=Ni(),e=HA(n);return gS(e)&&mS(),pS(),s5}function Sb(n,e,t,r){return o5(n,e,t,r),s5(),Sb}var RL=(n,e,t,r,i)=>(J0(!0),PF(e[xr],r,g4()));function ro(n,e,t){let r=sn(),i=r[Ht],o=n+Mi,s=i.firstCreatePass?KA(o,r,8,"ng-container",zA,Iw(),e,t):i.data[o];if(qA(s,r,n,"ng-container",aZ),Bp(s)){let a=r[Ht];gb(a,r,s),CA(a,s,r)}return t!=null&&mb(r,s),ro}function io(){let n=gi(),e=Ni(),t=HA(e);return n.firstCreatePass&&YA(n,t),io}var aZ=(n,e,t,r,i)=>(J0(!0),PK(e[xr],""));function Mt(){return sn()}var Lw=void 0;function cZ(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var lZ=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lw,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lw,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lw,"{1} 'at' {0}",Lw],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",cZ],iv={};function a5(n,e,t){typeof e!="string"&&(t=e,e=n[Xl.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),iv[e]=n,t&&(iv[e][Xl.ExtraData]=t)}function Ab(n){let e=uZ(n),t=Y4(e);if(t)return t;let r=e.split("-")[0];if(t=Y4(r),t)return t;if(r==="en")return lZ;throw new Xe(701,!1)}function Y4(n){return n in iv||(iv[n]=hi.ng&&hi.ng.common&&hi.ng.common.locales&&hi.ng.common.locales[n]),iv[n]}var Xl=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Xl||{});function uZ(n){return n.toLowerCase().replace(/_/g,"-")}var _v="en-US";var dZ=_v;function OL(n){typeof n=="string"&&(dZ=n.toLowerCase().replace(/_/g,"-"))}function Ne(n,e,t){let r=sn(),i=gi(),o=Ni();return FL(i,r,r[xr],o,n,e,t),Ne}function FL(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=kS(r,e,o),pQ(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let h=0;h<u.length;h+=2){let m=u[h],g=u[h+1];c??=kS(r,e,o),$4(r,e,m,g,i,c)}if(l&&l.length)for(let h of l)c??=kS(r,e,o),$4(r,e,h,i,i,c)}}function ne(n=1){return p4(n)}function c5(n,e,t,r){VQ(n,e,t,r)}function wv(n,e,t){LQ(n,e,t)}function Wf(n){let e=sn(),t=gi(),r=bS();Dw(r+1);let i=JA(t,r);if(n.dirty&&K3(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=UQ(e,r);n.reset(o,ZW),n.notifyOnChanges()}return!0}return!1}function Kf(){return FQ(sn(),bS())}function bo(n){let e=i4();return xw(e,Mi+n)}function Vw(n,e){return n<<17|e<<2}function $f(n){return n>>17&32767}function fZ(n){return(n&2)==2}function hZ(n,e){return n&131071|e<<17}function gA(n){return n|2}function Qp(n){return(n&131068)>>2}function FS(n,e){return n&-131069|e<<2}function pZ(n){return(n&1)===1}function mA(n){return n|1}function gZ(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=$f(s),c=Qp(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||Lp(h,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let m=$f(n[a+1]);n[r+1]=Vw(m,a),m!==0&&(n[m+1]=FS(n[m+1],r)),n[a+1]=hZ(n[a+1],r)}else n[r+1]=Vw(a,0),a!==0&&(n[a+1]=FS(n[a+1],r)),a=r;else n[r+1]=Vw(c,0),a===0?a=r:n[c+1]=FS(n[c+1],r),c=r;l&&(n[r+1]=gA(n[r+1])),Q4(n,u,r,!0),Q4(n,u,r,!1),mZ(e,u,n,r,o),s=Vw(a,c),o?e.classBindings=s:e.styleBindings=s}function mZ(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Lp(o,e)>=0&&(t[r+1]=mA(t[r+1]))}function Q4(n,e,t,r){let i=n[t+1],o=e===null,s=r?$f(i):Qp(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];vZ(c,e)&&(a=!0,n[s+1]=r?mA(l):gA(l)),s=r?$f(l):Qp(l)}a&&(n[t+1]=r?gA(i):mA(i))}function vZ(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Lp(n,e)>=0:!1}var ec={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yZ(n){return n.substring(ec.key,ec.keyEnd)}function _Z(n){return wZ(n),LL(n,VL(n,0,ec.textEnd))}function LL(n,e){let t=ec.textEnd;return t===e?-1:(e=ec.keyEnd=bZ(n,ec.key=e,t),VL(n,e,t))}function wZ(n){ec.key=0,ec.keyEnd=0,ec.value=0,ec.valueEnd=0,ec.textEnd=n.length}function VL(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function bZ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function bv(n,e,t){return jL(n,e,t,!1),bv}function oo(n,e){return jL(n,e,null,!0),oo}function l5(n){CZ(TZ,xZ,n,!0)}function xZ(n,e){for(let t=_Z(e);t>=0;t=LL(e,t))yw(n,yZ(e),!0)}function jL(n,e,t,r){let i=sn(),o=gi(),s=Sw(2);if(o.firstUpdatePass&&UL(o,n,s,r),e!==gs&&Ia(i,s,e)){let a=o.data[Yl()];zL(o,a,i,i[xr],n,i[s+1]=NZ(e,t),r,s)}}function CZ(n,e,t,r){let i=gi(),o=Sw(2);i.firstUpdatePass&&UL(i,null,o,r);let s=sn();if(t!==gs&&Ia(s,o,t)){let a=i.data[Yl()];if(qL(a,r)&&!BL(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=pw(c,t||"")),pA(i,a,s,t,r)}else MZ(i,a,s,s[xr],s[o+1],s[o+1]=DZ(n,e,t),r,o)}}function BL(n,e){return e>=n.expandoStartIndex}function UL(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Yl()],s=BL(n,t);qL(o,r)&&e===null&&!s&&(e=!1),e=EZ(i,o,e,r),gZ(i,o,e,t,s,r)}}function EZ(n,e,t,r){let i=u4(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=LS(null,n,e,t,r),t=uv(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=LS(i,n,e,t,r),o===null){let c=IZ(n,e,r);c!==void 0&&Array.isArray(c)&&(c=LS(null,n,e,c[1],r),c=uv(c,e.attrs,r),SZ(n,e,r,c))}else o=AZ(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function IZ(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Qp(r)!==0)return n[$f(r)]}function SZ(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[$f(i)]=r}function AZ(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=uv(r,s,t)}return uv(r,e.attrs,t)}function LS(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=uv(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function uv(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),yw(n,s,t?!0:e[++o]))}return n===void 0?null:n}function DZ(n,e,t){if(t==null||t==="")return qo;let r=[],i=Da(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function TZ(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&yw(n,r,t)}function MZ(n,e,t,r,i,o,s,a){i===gs&&(i=qo);let c=0,l=0,u=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;u!==null||h!==null;){let m=c<i.length?i[c+1]:void 0,g=l<o.length?o[l+1]:void 0,b=null,I;u===h?(c+=2,l+=2,m!==g&&(b=h,I=g)):h===null||u!==null&&u<h?(c+=2,b=u):(l+=2,b=h,I=g),b!==null&&zL(n,e,t,r,b,I,s,a),u=c<i.length?i[c]:null,h=l<o.length?o[l]:null}}function zL(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=pZ(l)?Z4(c,e,t,i,Qp(l),s):void 0;if(!ob(u)){ob(o)||fZ(l)&&(o=Z4(c,null,t,i,a,s));let h=aS(Yl(),t);bY(r,s,h,i,o)}}function Z4(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,h=u===null,m=t[i+1];m===gs&&(m=h?qo:void 0);let g=h?_w(m,r):u===r?m:void 0;if(l&&!ob(g)&&(g=_w(c,r)),ob(g)&&(a=g,s))return a;let b=n[i+1];i=s?$f(b):Qp(b)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=_w(c,r))}return a}function ob(n){return n!==void 0}function NZ(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Hl(Da(n)))),n}function qL(n,e){return(n.flags&(e?8:16))!==0}function q(n,e=""){let t=sn(),r=gi(),i=n+Mi,o=r.firstCreatePass?_b(r,i,1,e,null):r.data[i],s=PZ(r,t,o,e,n);t[i]=s,Nw()&&BA(r,t,s,o),qp(o,!1)}var PZ=(n,e,t,r,i)=>(J0(!0),MK(e[xr],r));function HL(n,e,t,r=""){return Ia(n,jf(),t)?e+Xu(t)+r:gs}function kZ(n,e,t,r,i,o=""){let s=o4(),a=XA(n,s,t,i);return Sw(2),a?e+Xu(t)+r+Xu(i)+o:gs}function ft(n){return Sr("",n),ft}function Sr(n,e,t){let r=sn(),i=HL(r,n,e,t);return i!==gs&&$L(r,Yl(),i),Sr}function Gc(n,e,t,r,i){let o=sn(),s=kZ(o,n,e,t,r,i);return s!==gs&&$L(o,Yl(),s),Gc}function $L(n,e,t){let r=aS(e,n);NK(n[xr],r,t)}function ct(n,e,t){SS(e)&&(e=e());let r=sn(),i=jf();if(Ia(r,i,e)){let o=gi(),s=X0();JF(s,r,n,e,r[xr],t)}return ct}function ut(n,e){let t=SS(n);return t&&n.set(e),t}function lt(n,e){let t=sn(),r=gi(),i=Ni();return FL(r,t,t[xr],i,n,e),lt}function Yf(n){return Ia(sn(),jf(),n)?Xu(n):gs}function ad(n,e,t=""){return HL(sn(),n,e,t)}function RZ(n,e,t){let r=gi();if(r.firstCreatePass){let i=zc(n);vA(t,r.data,r.blueprint,i,!0),vA(e,r.data,r.blueprint,i,!1)}}function vA(n,e,t,r,i){if(n=eo(n),Array.isArray(n))for(let o=0;o<n.length;o++)vA(n[o],e,t,r,i);else{let o=gi(),s=sn(),a=Ni(),c=Mf(n)?n:eo(n.provide),l=tS(n),u=a.providerIndexes&1048575,h=a.directiveStart,m=a.providerIndexes>>20;if(Mf(n)||!n.multi){let g=new Uf(l,i,tt,null),b=jS(c,e,i?u:u+m,h);b===-1?(US(Kw(a,s),o,c),VS(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[b]=g,s[b]=g)}else{let g=jS(c,e,u+m,h),b=jS(c,e,u,u+m),I=g>=0&&t[g],T=b>=0&&t[b];if(i&&!T||!i&&!I){US(Kw(a,s),o,c);let N=LZ(i?FZ:OZ,t.length,i,r,l,n);!i&&T&&(t[b].providerFactory=N),VS(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(N),s.push(N)}else{let N=GL(t[i?b:g],l,!i&&r);VS(o,n,g>-1?g:b,N)}!i&&r&&T&&t[b].componentProviders++}}}function VS(n,e,t,r){let i=Mf(e),o=$3(e);if(i||o){let c=(o?eo(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function GL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function jS(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function OZ(n,e,t,r,i){return yA(this.multi,[])}function FZ(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=ov(r,r[Ht],this.providerFactory.index,i);s=c.slice(0,a),yA(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],yA(o,s);return s}function yA(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function LZ(n,e,t,r,i,o){let s=new Uf(n,t,tt,null);return s.multi=[],s.index=e,s.componentProviders=0,GL(s,i,r&&!t),s}function rc(n,e=[]){return t=>{t.providersResolver=(r,i)=>RZ(r,i?i(n):n,e)}}function ru(n,e,t,r){return VZ(sn(),Z0(),n,e,t,r)}function xv(n,e,t,r,i){return WL(sn(),Z0(),n,e,t,r,i)}function u5(n,e){let t=n[e];return t===gs?void 0:t}function VZ(n,e,t,r,i,o){let s=e+t;return Ia(n,s,i)?ZA(n,s+1,o?r.call(o,i):r(i)):u5(n,s+1)}function WL(n,e,t,r,i,o,s){let a=e+t;return XA(n,a,i,o)?ZA(n,a+2,s?r.call(s,i,o):r(i,o)):u5(n,a+2)}function jZ(n,e,t,r,i,o,s,a){let c=e+t;return hQ(n,c,i,o,s)?ZA(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):u5(n,c+3)}function Wc(n,e){let t=gi(),r,i=n+Mi;t.firstCreatePass?(r=BZ(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Qu(r.type,!0)),s,a=zo(tt);try{let c=Ww(!1),l=o();return Ww(c),cS(t,sn(),i,l),l}finally{zo(a)}}function BZ(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function rg(n,e,t,r){let i=n+Mi,o=sn(),s=xw(o,i);return KL(o,i)?WL(o,Z0(),e,s.transform,t,r,s):s.transform(t,r)}function Cv(n,e,t,r,i){let o=n+Mi,s=sn(),a=xw(s,o);return KL(s,o)?jZ(s,Z0(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function KL(n,e){return n[Ht].data[e].pure}function qs(n,e){return yb(n,e)}var jw=null;function YL(n){jw!==null&&(n.defaultEncapsulation!==jw.defaultEncapsulation||n.preserveWhitespaces!==jw.preserveWhitespaces)||(jw=n)}var sb=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},d5=(()=>{class n{compileModuleSync(t){return new lv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ZI(t),o=LF(i.declarations).reduce((s,a)=>{let c=Wl(a);return c&&s.push(new qf(c)),s},[]);return new sb(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QL=new Ye("");var UZ=(()=>{class n{zone=De(Ut);changeDetectionScheduler=De($l);applicationRef=De(Wo);applicationErrorHandler=De(ps);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZL({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ut(Rt(Oe({},f5()),{scheduleInRootZone:t})),[{provide:Ut,useFactory:n},{provide:Gl,multi:!0,useFactory:()=>{let r=De(UZ,{optional:!0});return()=>r.initialize()}},{provide:Gl,multi:!0,useFactory:()=>{let r=De(zZ);return()=>{r.initialize()}}},e===!0?{provide:AS,useValue:!0}:[],{provide:DS,useValue:t??zF},{provide:ps,useFactory:()=>{let r=De(Ut),i=De(Wn),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Ya),o.handleError(s))})}}}]}function f5(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var zZ=(()=>{class n{subscription=new $r;initialized=!1;zone=De(Ut);pendingTasks=De(qc);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ut.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XL=(()=>{class n{applicationErrorHandler=De(ps);appRef=De(Wo);taskService=De(qc);ngZone=De(Ut);zonelessEnabled=De(ev);tracing=De(Gf,{optional:!0});disableScheduling=De(AS,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new $r;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Zw):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(De(DS,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof sv||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?k4:qF;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Zw+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,k4(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qZ(){return typeof $localize<"u"&&$localize.locale||_v}var Ev=new Ye("",{providedIn:"root",factory:()=>De(Ev,{optional:!0,skipSelf:!0})||qZ()});function zi(n){return T3(n)}function ig(n,e){return R1(n,e?.equal)}var JL=class{[vo];constructor(e){this[vo]=e}destroy(){this[vo].destroy()}};var a6=Symbol("InputSignalNode#UNSET"),JZ=Rt(Oe({},O1),{transformFn:void 0,applyValueToInputSignal(n,e){xp(n,e)}});function c6(n,e){let t=Object.create(JZ);t.value=n,t.transformFn=e?.transform;function r(){if(_p(t),t.value===a6){let i=null;throw new Xe(-950,i)}return t.value}return r[vo]=t,r}var Db=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>dv(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},eX=new Ye("");eX.__NG_ELEMENT_ID__=n=>{let e=Ni();if(e===null)throw new Xe(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new Xe(204,!1)};function e6(n,e){return c6(n,e)}function tX(n){return c6(a6,n)}var l6=(e6.required=tX,e6);function nX(n,e,t){let r=new lv(t);return Promise.resolve(r)}function t6(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var Tb=new Ye(""),rX=new Ye("");function Iv(n){return!n.moduleRef}function iX(n){let e=Iv(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ut);return t.run(()=>{Iv(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ps),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Iv(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Tb);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Tb);s.add(o),n.moduleRef.onDestroy(()=>{rv(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return sX(r,t,()=>{let o=e.get(qc),s=o.add(),a=e.get(r5);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Ev,_v);if(OL(c||_v),!e.get(rX,!0))return Iv(n)?e.get(Wo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Iv(n)){let u=e.get(Wo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return u6?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var u6;function n6(){u6=oX}function oX(n,e){let t=n.injector.get(Wo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Xe(-403,!1);e.push(n)}function sX(n,e,t){try{let r=t();return sd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var d6=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>$F(r?.ngZone,Rt(Oe({},f5({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[ZL({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:$l,useExisting:XL},v4],c=DL(t.moduleType,this.injector,a);return n6(),iX({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=i5({},r);return n6(),nX(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Tb,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(Ve(Rn))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),w5=null;function aX(n){if(x5())throw new Xe(400,!1);PL(),w5=n;let e=n.get(d6);return uX(n),e}function b5(n,e,t=[]){let r=`Platform: ${e}`,i=new Ye(r);return(o=[])=>{let s=x5();if(!s){let a=[...t,...o,{provide:i,useValue:!0}];s=n?.(a)??aX(cX(a,r))}return lX(i)}}function cX(n=[],e){return Rn.create({name:e,providers:[{provide:q0,useValue:"platform"},{provide:Tb,useValue:new Set([()=>w5=null])},...n]})}function lX(n){let e=x5();if(!e)throw new Xe(-401,!1);return e}function x5(){return w5?.get(d6)??null}function uX(n){let e=n.get(cb,null);pi(n,()=>{e?.forEach(t=>t())})}function cd(){return!1}var Kc=(()=>{class n{static __NG_ELEMENT_ID__=dX}return n})();function dX(n){return fX(Ni(),sn(),(n&16)===16)}function fX(n,e,t){if(Kl(n)&&!t){let r=xa(n.index,e);return new id(r,r)}else if(n.type&175){let r=e[_a];return new id(r,e)}return null}var h5=class{constructor(){}supports(e){return QA(e)}create(e){return new p5(e)}},hX=(n,e)=>e,p5=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||hX}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<r6(r,i,o)?t:r,a=r6(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let m=0;m<l;m++){let g=m<o.length?o[m]:o[m]=0,b=g+m;u<=b&&b<l&&(o[m]=g+1)}let h=s.previousIndex;o[h]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!QA(e))throw new Xe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,vL(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new g5(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Mb),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Mb),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},g5=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},m5=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Mb=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new m5,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function r6(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var v5=class{constructor(){}supports(e){return e instanceof Map||bb(e)}create(){return new y5}},y5=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||bb(e)))throw new Xe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new _5(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},_5=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function i6(){return new C5([new h5])}var C5=(()=>{class n{factories;static \u0275prov=Qe({token:n,providedIn:"root",factory:i6});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=De(n,{optional:!0,skipSelf:!0});return n.create(t,r||i6())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Xe(901,!1)}}return n})();function o6(){return new E5([new v5])}var E5=(()=>{class n{static \u0275prov=Qe({token:n,providedIn:"root",factory:o6});factories;constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=De(n,{optional:!0,skipSelf:!0});return n.create(t,r||o6())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Xe(901,!1)}}return n})();var f6=b5(null,"core",[]),h6=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(Ve(Wo))};static \u0275mod=ur({type:n});static \u0275inj=ir({})}return n})();function ld(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function p6(n){let e=Wl(n);if(!e)return null;let t=new qf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var v6=null;function Hs(){return v6}function I5(n){v6??=n}var Sv=class{},Av=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>De(y6),providedIn:"platform"})}return n})(),S5=new Ye(""),y6=(()=>{class n extends Av{_location;_history;_doc=De(ti);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hs().getBaseHref(this._doc)}onPopState(t){let r=Hs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Hs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Nb(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function g6(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ic(n){return n&&n[0]!=="?"?`?${n}`:n}var oc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>De(kb),providedIn:"root"})}return n})(),Pb=new Ye(""),kb=(()=>{class n extends oc{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??De(ti).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Nb(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ic(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ic(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ic(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Ve(Av),Ve(Pb,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ud=(()=>{class n{_subject=new kn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=mX(g6(m6(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ic(r))}normalize(t){return n.stripTrailingSlash(gX(this._basePath,m6(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ic(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ic(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ic;static joinWithSlash=Nb;static stripTrailingSlash=g6;static \u0275fac=function(r){return new(r||n)(Ve(oc))};static \u0275prov=Qe({token:n,factory:()=>pX(),providedIn:"root"})}return n})();function pX(){return new ud(Ve(oc))}function gX(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function m6(n){return n.replace(/\/index.html$/,"")}function mX(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var M5=(()=>{class n extends oc{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Nb(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ic(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ic(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Ve(Av),Ve(Pb,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})();var N5=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(N5||{});var Yc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function og(n,e){let t=Ab(n),r=t[Xl.NumberSymbols][e];if(typeof r>"u"){if(e===Yc.CurrencyDecimal)return t[Xl.NumberSymbols][Yc.Decimal];if(e===Yc.CurrencyGroup)return t[Xl.NumberSymbols][Yc.Group]}return r}function C6(n,e){return Ab(n)[Xl.NumberFormats][e]}var vX=/^(\d+)?\.((\d+)(-(\d+))?)?$/,_6=22,Rb=".",Dv="0",yX=";",_X=",",A5="#";function wX(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=og(t,Yc.Infinity);else{let l=CX(n);s&&(l=xX(l));let u=e.minInt,h=e.minFrac,m=e.maxFrac;if(o){let Y=o.match(vX);if(Y===null)throw new Xe(2306,!1);let j=Y[1],W=Y[3],oe=Y[5];j!=null&&(u=D5(j)),W!=null&&(h=D5(W)),oe!=null?m=D5(oe):W!=null&&h>m&&(m=h)}EX(l,h,m);let g=l.digits,b=l.integerLen,I=l.exponent,T=[];for(c=g.every(Y=>!Y);b<u;b++)g.unshift(0);for(;b<0;b++)g.unshift(0);b>0?T=g.splice(b,g.length):(T=g,g=[0]);let N=[];for(g.length>=e.lgSize&&N.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)N.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&N.unshift(g.join("")),a=N.join(og(t,r)),T.length&&(a+=og(t,i)+T.join("")),I&&(a+=og(t,Yc.Exponential)+"+"+I)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function E6(n,e,t){let r=C6(e,N5.Decimal),i=bX(r,og(e,Yc.MinusSign));return wX(n,i,e,Yc.Group,Yc.Decimal,t)}function bX(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(yX),i=r[0],o=r[1],s=i.indexOf(Rb)!==-1?i.split(Rb):[i.substring(0,i.lastIndexOf(Dv)+1),i.substring(i.lastIndexOf(Dv)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(A5));for(let u=0;u<c.length;u++){let h=c.charAt(u);h===Dv?t.minFrac=t.maxFrac=u+1:h===A5?t.maxFrac=u+1:t.posSuf+=h}let l=a.split(_X);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let u=i.length-t.posPre.length-t.posSuf.length,h=o.indexOf(A5);t.negPre=o.substring(0,h).replace(/'/g,""),t.negSuf=o.slice(h+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function xX(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function CX(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Rb))>-1&&(e=e.replace(Rb,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Dv;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Dv;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>_6&&(r=r.splice(0,_6-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function EX(n,e,t){if(e>t)throw new Xe(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let h=s;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let h=1;h<s;h++)r[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,u=r.reduceRight(function(h,m,g,b){return m=m+h,b[g]=m<10?m:m-10,c&&(b[g]===0&&g>=l?b.pop():c=!1),m>=10?1:0},0);u&&(r.unshift(u),n.integerLen++)}function D5(n){let e=parseInt(n);if(isNaN(e))throw new Xe(2305,!1);return e}var T5=/\s+/,w6=[],Tv=(()=>{class n{_ngEl;_renderer;initialClasses=w6;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(T5):w6}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(T5):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(T5).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(tt(no),tt($o))};static \u0275dir=Yn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Ob=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qi=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ob(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),b6(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);b6(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(tt(tu),tt(od),tt(C5))};static \u0275dir=Yn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function b6(n,e){n.context.$implicit=e.item}var ki=(()=>{class n{_viewContainer;_context=new Fb;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){x6(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){x6(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(tt(tu),tt(od))};static \u0275dir=Yn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Fb=class{$implicit=null;ngIf=null};function x6(n,e){if(n&&!n.createEmbeddedView)throw new Xe(2020,!1)}var P5=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:tc.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(tt(no),tt(E5),tt($o))};static \u0275dir=Yn({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function I6(n,e){return new Xe(2100,!1)}var k5=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!IX(t))return null;i||=this._locale;try{let o=SX(t);return E6(o,i,r)}catch(o){throw I6(n,o.message)}}static \u0275fac=function(r){return new(r||n)(tt(Ev,16))};static \u0275pipe=mv({name:"number",type:n,pure:!0})}return n})();function IX(n){return!(n==null||n===""||n!==n)}function SX(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Xe(2309,!1);return n}var R5=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw I6(n,t);return t.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=mv({name:"slice",type:n,pure:!1})}return n})();var sc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=ir({})}return n})();function O5(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Mv=class{};function S6(n,e,t){return a5(n,e,t)}var L5="browser",AX="server";function V5(n){return n===L5}function Lb(n){return n===AX}var A6=(()=>{class n{static \u0275prov=Qe({token:n,providedIn:"root",factory:()=>new F5(De(ti),window)})}return n})(),F5=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Rt(Oe({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=DX(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Qa(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Rt(Oe({},t),{left:i-s[0],top:o-s[1]}))}};function DX(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Nv=class{_doc;constructor(e){this._doc=e}manager},Vb=(()=>{class n extends Nv{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Ve(ti))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),Bb=new Ye(""),q5=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Vb));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Vb);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Xe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Ve(Bb),Ve(Ut))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),j5="ng-app-id";function D6(n){for(let e of n)e.remove()}function T6(n,e){let t=e.createElement("style");return t.textContent=n,t}function TX(n,e,t,r){let i=n.head?.querySelectorAll(`style[${j5}="${e}"],link[${j5}="${e}"]`);if(i)for(let o of i)o.removeAttribute(j5),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function U5(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var H5=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,TX(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,T6);r?.forEach(i=>this.addUsage(i,this.external,U5))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(D6(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])D6(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,T6(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,U5(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Ve(ti),Ve(ab),Ve(lb,8),Ve(Ui))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),B5={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$5=/%COMP%/g;var N6="%COMP%",MX=`_nghost-${N6}`,NX=`_ngcontent-${N6}`,PX=!0,kX=new Ye("",{providedIn:"root",factory:()=>PX});function RX(n){return NX.replace($5,n)}function OX(n){return MX.replace($5,n)}function P6(n,e){return e.map(t=>t.replace($5,n))}var G5=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Pv(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof jb?i.applyToHost(t):i instanceof kv&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Ql.Emulated:o=new jb(c,l,r,this.appId,u,s,a,h,m);break;case Ql.ShadowDom:return new z5(c,l,t,r,s,a,this.nonce,h,m);default:o=new kv(c,l,r,u,s,a,h,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Ve(q5),Ve(H5),Ve(ab),Ve(kX),Ve(ti),Ve(Ut),Ve(lb),Ve(Gf,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),Pv=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(B5[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(M6(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(M6(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Xe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=B5[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=B5[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(tc.DashCase|tc.Important)?e.style.setProperty(t,r,i&tc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&tc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Hs().getGlobalEventTarget(this.doc,e),!e))throw new Xe(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function M6(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var z5=class extends Pv{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=P6(i.id,u);for(let m of u){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=m,this.shadowRoot.appendChild(g)}let h=i.getExternalStyles?.();if(h)for(let m of h){let g=U5(m,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},kv=class extends Pv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?P6(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Yp.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},jb=class extends kv{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,l,u),this.contentAttr=RX(u),this.hostAttr=OX(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ub=class n extends Sv{supportsDOMEvents=!0;static makeCurrent(){I5(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=FX();return t==null?null:LX(t)}resetBaseElement(){Rv=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return O5(document.cookie,e)}},Rv=null;function FX(){return Rv=Rv||document.head.querySelector("base"),Rv?Rv.getAttribute("href"):null}function LX(n){return new URL(n,document.baseURI).pathname}var zb=class{addToWindow(e){hi.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Xe(5103,!1);return o},hi.getAllAngularTestabilities=()=>e.getAllTestabilities(),hi.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=hi.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};hi.frameworkStabilizers||(hi.frameworkStabilizers=[]),hi.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Hs().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},VX=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),k6=["alt","control","meta","shift"],jX={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BX={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},R6=(()=>{class n extends Nv{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hs().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),k6.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=jX[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),k6.forEach(s=>{if(s!==i){let a=BX[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Ve(ti))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})();function UX(){Ub.makeCurrent()}function zX(){return new Ya}function qX(){return bA(document),document}var HX=[{provide:Ui,useValue:L5},{provide:cb,useValue:UX,multi:!0},{provide:ti,useFactory:qX}],W5=b5(f6,"browser",HX);var $X=[{provide:tg,useClass:zb},{provide:Eb,useClass:vv,deps:[Ut,yv,tg]},{provide:vv,useClass:vv,deps:[Ut,yv,tg]}],GX=[{provide:q0,useValue:"root"},{provide:Ya,useFactory:zX},{provide:Bb,useClass:Vb,multi:!0,deps:[ti]},{provide:Bb,useClass:R6,multi:!0,deps:[ti]},G5,H5,q5,{provide:zf,useExisting:G5},{provide:Mv,useClass:VX},[]],K5=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=ir({providers:[...GX,...$X],imports:[sc,h6]})}return n})();var O6=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Ve(ti))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Y5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=Ve(WX),i},providedIn:"root"})}return n})(),WX=(()=>{class n extends Y5{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case nc.NONE:return r;case nc.HTML:return Jl(r,"HTML")?Da(r):TA(this._doc,String(r)).toString();case nc.STYLE:return Jl(r,"Style")?Da(r):r;case nc.SCRIPT:if(Jl(r,"Script"))return Da(r);throw new Xe(5200,!1);case nc.URL:return Jl(r,"URL")?Da(r):fv(String(r));case nc.RESOURCE_URL:if(Jl(r,"ResourceURL"))return Da(r);throw new Xe(5201,!1);default:throw new Xe(5202,!1)}}bypassSecurityTrustHtml(t){return EA(t)}bypassSecurityTrustStyle(t){return IA(t)}bypassSecurityTrustScript(t){return SA(t)}bypassSecurityTrustUrl(t){return AA(t)}bypassSecurityTrustResourceUrl(t){return DA(t)}static \u0275fac=function(r){return new(r||n)(Ve(ti))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $6=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(tt($o),tt(no))};static \u0275dir=Yn({type:n})}return n})(),Uv=(()=>{class n extends $6{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,features:[Go]})}return n})(),lg=new Ye(""),KX={provide:lg,useExisting:fs(()=>J5),multi:!0},J5=(()=>{class n extends Uv{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Ne("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[rc([KX]),Go]})}return n})(),YX={provide:lg,useExisting:fs(()=>xo),multi:!0};function QX(){let n=Hs()?Hs().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ZX=new Ye(""),xo=(()=>{class n extends $6{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!QX())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(tt($o),tt(no),tt(ZX,8))};static \u0275dir=Yn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ne("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[rc([YX]),Go]})}return n})();function XX(n){return n==null||JX(n)===0}function JX(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Zb=new Ye(""),G6=new Ye("");function eJ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function tJ(n){return XX(n.value)?{required:!0}:null}function F6(n){return null}function W6(n){return n!=null}function K6(n){return sd(n)?mn(n):n}function Y6(n){let e={};return n.forEach(t=>{e=t!=null?Oe(Oe({},e),t):e}),Object.keys(e).length===0?null:e}function Q6(n,e){return e.map(t=>t(n))}function nJ(n){return!n.validate}function Z6(n){return n.map(e=>nJ(e)?e:t=>e.validate(t))}function rJ(n){if(!n)return null;let e=n.filter(W6);return e.length==0?null:function(t){return Y6(Q6(t,e))}}function eD(n){return n!=null?rJ(Z6(n)):null}function iJ(n){if(!n)return null;let e=n.filter(W6);return e.length==0?null:function(t){let r=Q6(t,e).map(K6);return xI(r).pipe(at(Y6))}}function tD(n){return n!=null?iJ(Z6(n)):null}function L6(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function oJ(n){return n._rawValidators}function sJ(n){return n._rawAsyncValidators}function Z5(n){return n?Array.isArray(n)?n:[n]:[]}function Hb(n,e){return Array.isArray(n)?n.includes(e):n===e}function V6(n,e){let t=Z5(e);return Z5(n).forEach(i=>{Hb(t,i)||t.push(i)}),t}function j6(n,e){return Z5(e).filter(t=>!Hb(n,t))}var $b=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},cg=class extends $b{name;get formDirective(){return null}get path(){return null}},Bv=class extends $b{_parent=null;name=null;valueAccessor=null},Gb=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},aJ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},GDe=Rt(Oe({},aJ),{"[class.ng-submitted]":"isSubmitted"}),ms=(()=>{class n extends Gb{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(tt(Bv,2))};static \u0275dir=Yn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&oo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Go]})}return n})(),ug=(()=>{class n extends Gb{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(tt(cg,10))};static \u0275dir=Yn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&oo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Go]})}return n})();var Ov="VALID",qb="INVALID",sg="PENDING",Fv="DISABLED",dd=class{},Wb=class extends dd{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Vv=class extends dd{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},jv=class extends dd{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ag=class extends dd{status;source;constructor(e,t){super(),this.status=e,this.source=t}},X5=class extends dd{source;constructor(e){super(),this.source=e}},Kb=class extends dd{source;constructor(e){super(),this.source=e}};function X6(n){return(Xb(n)?n.validators:n)||null}function cJ(n){return Array.isArray(n)?eD(n):n||null}function J6(n,e){return(Xb(e)?e.asyncValidators:n)||null}function lJ(n){return Array.isArray(n)?tD(n):n||null}function Xb(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function uJ(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Xe(1e3,"");if(!r[t])throw new Xe(1001,"")}function dJ(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Xe(1002,"")})}var Yb=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return zi(this.statusReactive)}set status(e){zi(()=>this.statusReactive.set(e))}_status=ig(()=>this.statusReactive());statusReactive=Ea(void 0);get valid(){return this.status===Ov}get invalid(){return this.status===qb}get pending(){return this.status==sg}get disabled(){return this.status===Fv}get enabled(){return this.status!==Fv}errors;get pristine(){return zi(this.pristineReactive)}set pristine(e){zi(()=>this.pristineReactive.set(e))}_pristine=ig(()=>this.pristineReactive());pristineReactive=Ea(!0);get dirty(){return!this.pristine}get touched(){return zi(this.touchedReactive)}set touched(e){zi(()=>this.touchedReactive.set(e))}_touched=ig(()=>this.touchedReactive());touchedReactive=Ea(!1);get untouched(){return!this.touched}_events=new kn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(V6(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(V6(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(j6(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(j6(e,this._rawAsyncValidators))}hasValidator(e){return Hb(this._rawValidators,e)}hasAsyncValidator(e){return Hb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Rt(Oe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new jv(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new jv(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Rt(Oe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Vv(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Vv(!0,r))}markAsPending(e={}){this.status=sg;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ag(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Rt(Oe({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fv,this.errors=null,this._forEachChild(i=>{i.disable(Rt(Oe({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wb(this.value,r)),this._events.next(new ag(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Rt(Oe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ov,this._forEachChild(r=>{r.enable(Rt(Oe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Rt(Oe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ov||this.status===sg)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wb(this.value,t)),this._events.next(new ag(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Rt(Oe({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fv:Ov}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=sg,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=K6(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ag(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Lr,this.statusChanges=new Lr}_calculateStatus(){return this._allControlsDisabled()?Fv:this.errors?qb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sg)?sg:this._anyControlsHaveStatus(qb)?qb:Ov}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Vv(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new jv(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xb(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=cJ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=lJ(this._rawAsyncValidators)}},Qb=class extends Yb{constructor(e,t,r){super(X6(t),J6(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){dJ(this,!0,e),Object.keys(e).forEach(r=>{uJ(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Kb(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var nD=new Ye("",{providedIn:"root",factory:()=>rD}),rD="always";function fJ(n,e){return[...e.path,n]}function e8(n,e,t=rD){t8(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),pJ(n,e),mJ(n,e),gJ(n,e),hJ(n,e)}function B6(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hJ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function t8(n,e){let t=oJ(n);e.validator!==null?n.setValidators(L6(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=sJ(n);e.asyncValidator!==null?n.setAsyncValidators(L6(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();B6(e._rawValidators,i),B6(e._rawAsyncValidators,i)}function pJ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&n8(n,e)})}function gJ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&n8(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function n8(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mJ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function vJ(n,e){n==null,t8(n,e)}function yJ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function _J(n){return Object.getPrototypeOf(n.constructor)===Uv}function wJ(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function bJ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===xo?t=o:_J(o)?r=o:i=o}),i||r||t||null}var xJ={provide:cg,useExisting:fs(()=>Qf)},Lv=Promise.resolve(),Qf=(()=>{class n extends cg{callSetDisabledState;get submitted(){return zi(this.submittedReactive)}_submitted=ig(()=>this.submittedReactive());submittedReactive=Ea(!1);_directives=new Set;form;ngSubmit=new Lr;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Qb({},eD(t),tD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Lv.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),e8(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Lv.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Lv.then(()=>{let r=this._findContainer(t.path),i=new Qb({});vJ(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Lv.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Lv.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),wJ(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new X5(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(tt(Zb,10),tt(G6,10),tt(nD,8))};static \u0275dir=Yn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ne("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[rc([xJ]),Go]})}return n})();function U6(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function z6(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var CJ=class extends Yb{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(X6(t),J6(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(z6(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Kb(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){U6(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){U6(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){z6(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var EJ={provide:Bv,useExisting:fs(()=>Ko)},q6=Promise.resolve(),Ko=(()=>{class n extends Bv{_changeDetectorRef;callSetDisabledState;control=new CJ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Lr;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=bJ(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),yJ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){e8(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){q6.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ld(r);q6.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?fJ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(tt(cg,9),tt(Zb,10),tt(G6,10),tt(lg,10),tt(Kc,8),tt(nD,8))};static \u0275dir=Yn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[rc([EJ]),Go,Sa]})}return n})();var dg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Yn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),IJ={provide:lg,useExisting:fs(()=>iD),multi:!0},iD=(()=>{class n extends Uv{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ne("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[rc([IJ]),Go]})}return n})();var SJ={provide:lg,useExisting:fs(()=>Ta),multi:!0};function r8(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function AJ(n){return n.split(":")[0]}var Ta=(()=>{class n extends Uv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=De(Wo).injector;destroyRef=De(Ca);cdr=De(Kc);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,pv({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=r8(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=AJ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ne("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[rc([SJ]),Go]})}return n})(),Qc=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(r8(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(tt(no),tt($o),tt(Ta,9))};static \u0275dir=Yn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),DJ={provide:lg,useExisting:fs(()=>i8),multi:!0};function H6(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function TJ(n){return n.split(":")[0]}var i8=(()=>{class n extends Uv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=TJ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ne("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[rc([DJ]),Go]})}return n})(),Zc=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(H6(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(H6(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(tt(no),tt($o),tt(i8,9))};static \u0275dir=Yn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function MJ(n){return typeof n=="number"?n:parseFloat(n)}var o8=(()=>{class n{_validator=F6;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):F6,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Yn({type:n,features:[Sa]})}return n})();var NJ={provide:Zb,useExisting:fs(()=>oD),multi:!0},oD=(()=>{class n extends o8{min;inputName="min";normalizeInput=t=>MJ(t);createValidator=t=>eJ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&nu("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[rc([NJ]),Go]})}return n})(),PJ={provide:Zb,useExisting:fs(()=>Zf),multi:!0};var Zf=(()=>{class n extends o8{required;inputName="required";normalizeInput=ld;createValidator=t=>tJ;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275dir=Yn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&nu("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[rc([PJ]),Go]})}return n})();var kJ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=ir({})}return n})();var fd=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nD,useValue:t.callSetDisabledState??rD}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=ir({imports:[kJ]})}return n})();var nn="primary",ey=Symbol("RouteTitle"),uD=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function th(n){return new uD(n)}function h8(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function RJ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xc(n[t],e[t]))return!1;return!0}function Xc(n,e){let t=n?dD(n):void 0,r=e?dD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!p8(n[i],e[i]))return!1;return!0}function dD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function p8(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function g8(n){return n.length>0?n[n.length-1]:null}function iu(n){return wI(n)?n:sd(n)?mn(Promise.resolve(n)):gt(n)}var OJ={exact:v8,subset:y8},m8={exact:FJ,subset:LJ,ignored:()=>!0};function s8(n,e,t){return OJ[t.paths](n.root,e.root,t.matrixParams)&&m8[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function FJ(n,e){return Xc(n,e)}function v8(n,e,t){if(!Jf(n.segments,e.segments)||!t2(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!v8(n.children[r],e.children[r],t))return!1;return!0}function LJ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>p8(n[t],e[t]))}function y8(n,e,t){return _8(n,e,e.segments,t)}function _8(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Jf(i,t)||e.hasChildren()||!t2(i,t,r))}else if(n.segments.length===t.length){if(!Jf(n.segments,t)||!t2(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!y8(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Jf(n.segments,i)||!t2(n.segments,i,r)||!n.children[nn]?!1:_8(n.children[nn],e,o,r)}}function t2(n,e,t){return e.every((r,i)=>m8[t](n[i].parameters,r.parameters))}var el=class{root;queryParams;fragment;_queryParamMap;constructor(e=new On([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=th(this.queryParams),this._queryParamMap}toString(){return BJ.serialize(this)}},On=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return n2(this)}},hd=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=th(this.parameters),this._parameterMap}toString(){return b8(this)}};function VJ(n,e){return Jf(n,e)&&n.every((t,r)=>Xc(t.parameters,e[r].parameters))}function Jf(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function jJ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===nn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==nn&&(t=t.concat(e(i,r)))}),t}var nh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>new pd,providedIn:"root"})}return n})(),pd=class{parse(e){let t=new hD(e);return new el(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${zv(e.root,!0)}`,r=qJ(e.queryParams),i=typeof e.fragment=="string"?`#${UJ(e.fragment)}`:"";return`${t}${r}${i}`}},BJ=new pd;function n2(n){return n.segments.map(e=>b8(e)).join("/")}function zv(n,e){if(!n.hasChildren())return n2(n);if(e){let t=n.children[nn]?zv(n.children[nn],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==nn&&r.push(`${i}:${zv(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=jJ(n,(r,i)=>i===nn?[zv(n.children[nn],!1)]:[`${i}:${zv(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[nn]!=null?`${n2(n)}/${t[0]}`:`${n2(n)}/(${t.join("//")})`}}function w8(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jb(n){return w8(n).replace(/%3B/gi,";")}function UJ(n){return encodeURI(n)}function fD(n){return w8(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function r2(n){return decodeURIComponent(n)}function a8(n){return r2(n.replace(/\+/g,"%20"))}function b8(n){return`${fD(n.path)}${zJ(n.parameters)}`}function zJ(n){return Object.entries(n).map(([e,t])=>`;${fD(e)}=${fD(t)}`).join("")}function qJ(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Jb(t)}=${Jb(i)}`).join("&"):`${Jb(t)}=${Jb(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var HJ=/^[^\/()?;#]+/;function sD(n){let e=n.match(HJ);return e?e[0]:""}var $J=/^[^\/()?;=#]+/;function GJ(n){let e=n.match($J);return e?e[0]:""}var WJ=/^[^=?&#]+/;function KJ(n){let e=n.match(WJ);return e?e[0]:""}var YJ=/^[^&#]+/;function QJ(n){let e=n.match(YJ);return e?e[0]:""}var hD=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new On([],{}):new On([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[nn]=new On(e,t)),r}parseSegment(){let e=sD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Xe(4009,!1);return this.capture(e),new hd(r2(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=GJ(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=sD(this.remaining);i&&(r=i,this.capture(r))}e[r2(t)]=r2(r)}parseQueryParam(e){let t=KJ(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=QJ(this.remaining);s&&(r=s,this.capture(r))}let i=a8(t),o=a8(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=sD(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Xe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=nn);let s=this.parseChildren();t[o??nn]=Object.keys(s).length===1&&s[nn]?s[nn]:new On([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Xe(4011,!1)}};function x8(n){return n.segments.length>0?new On([],{[nn]:n}):n}function C8(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=C8(i);if(r===nn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new On(n.segments,e);return ZJ(t)}function ZJ(n){if(n.numberOfChildren===1&&n.children[nn]){let e=n.children[nn];return new On(n.segments.concat(e.segments),e.children)}return n}function gd(n){return n instanceof el}function E8(n,e,t=null,r=null){let i=I8(n);return S8(i,e,t,r)}function I8(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new On(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=x8(r);return e??i}function S8(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return aD(i,i,i,t,r);let o=XJ(e);if(o.toRoot())return aD(i,i,new On([],{}),t,r);let s=JJ(o,i,n),a=s.processChildren?Hv(s.segmentGroup,s.index,o.commands):D8(s.segmentGroup,s.index,o.commands);return aD(i,s.segmentGroup,a,t,r)}function i2(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Gv(n){return typeof n=="object"&&n!=null&&n.outlets}function aD(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=A8(n,e,t);let a=x8(C8(s));return new el(a,o,i)}function A8(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=A8(o,e,t)}),new On(n.segments,r)}var o2=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&i2(r[0]))throw new Xe(4003,!1);let i=r.find(Gv);if(i&&i!==g8(r))throw new Xe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function XJ(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new o2(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new o2(t,e,r)}var pg=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function JJ(n,e,t){if(n.isAbsolute)return new pg(e,!0,0);if(!t)return new pg(e,!1,NaN);if(t.parent===null)return new pg(t,!0,0);let r=i2(n.commands[0])?0:1,i=t.segments.length-1+r;return eee(t,i,n.numberOfDoubleDots)}function eee(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Xe(4005,!1);i=r.segments.length}return new pg(r,!1,i-o)}function tee(n){return Gv(n[0])?n[0].outlets:{[nn]:n}}function D8(n,e,t){if(n??=new On([],{}),n.segments.length===0&&n.hasChildren())return Hv(n,e,t);let r=nee(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new On(n.segments.slice(0,r.pathIndex),{});return o.children[nn]=new On(n.segments.slice(r.pathIndex),n.children),Hv(o,0,i)}else return r.match&&i.length===0?new On(n.segments,{}):r.match&&!n.hasChildren()?pD(n,e,t):r.match?Hv(n,0,i):pD(n,e,t)}function Hv(n,e,t){if(t.length===0)return new On(n.segments,{});{let r=tee(t),i={};if(Object.keys(r).some(o=>o!==nn)&&n.children[nn]&&n.numberOfChildren===1&&n.children[nn].segments.length===0){let o=Hv(n.children[nn],e,t);return new On(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=D8(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new On(n.segments,i)}}function nee(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Gv(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!l8(c,l,s))return o;r+=2}else{if(!l8(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function pD(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Gv(o)){let c=ree(o.outlets);return new On(r,c)}if(i===0&&i2(t[0])){let c=n.segments[e];r.push(new hd(c.path,c8(t[0]))),i++;continue}let s=Gv(o)?o.outlets[nn]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&i2(a)?(r.push(new hd(s,c8(a))),i+=2):(r.push(new hd(s,{})),i++)}return new On(r,{})}function ree(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=pD(new On([],{}),0,r))}),e}function c8(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function l8(n,e,t){return n==t.path&&Xc(e,t.parameters)}var gg="imperative",Ri=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ri||{}),Gs=class{id;url;constructor(e,t){this.id=e,this.url=t}},md=class extends Gs{type=Ri.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qo=class extends Gs{urlAfterRedirects;type=Ri.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yo=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Yo||{}),vg=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(vg||{}),Jc=class extends Gs{reason;code;type=Ri.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},tl=class extends Gs{reason;code;type=Ri.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},yg=class extends Gs{error;target;type=Ri.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wv=class extends Gs{urlAfterRedirects;state;type=Ri.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},s2=class extends Gs{urlAfterRedirects;state;type=Ri.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},a2=class extends Gs{urlAfterRedirects;state;shouldActivate;type=Ri.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},c2=class extends Gs{urlAfterRedirects;state;type=Ri.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},l2=class extends Gs{urlAfterRedirects;state;type=Ri.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},u2=class{route;type=Ri.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},d2=class{route;type=Ri.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},f2=class{snapshot;type=Ri.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},h2=class{snapshot;type=Ri.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},p2=class{snapshot;type=Ri.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},g2=class{snapshot;type=Ri.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_g=class{routerEvent;position;anchor;type=Ri.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Kv=class{},wg=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function iee(n){return!(n instanceof Kv)&&!(n instanceof wg)}function oee(n,e){return n.providers&&!n._injector&&(n._injector=eg(n.providers,e,`Route: ${n.path}`)),n._injector??e}function cc(n){return n.outlet||nn}function see(n,e){let t=n.filter(r=>cc(r)===e);return t.push(...n.filter(r=>cc(r)!==e)),t}function Cg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var m2=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Cg(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new rh(this.rootInjector)}},rh=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new m2(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Ve(Wn))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v2=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=gD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=gD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=mD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return mD(e,this._root).map(t=>t.value)}};function gD(n,e){if(n===e.value)return e;for(let t of e.children){let r=gD(n,t);if(r)return r}return null}function mD(n,e){if(n===e.value)return[e];for(let t of e.children){let r=mD(n,t);if(r.length)return r.unshift(e),r}return[]}var $s=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function hg(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Yv=class extends v2{snapshot;constructor(e,t){super(e),this.snapshot=t,ED(this,e)}toString(){return this.snapshot.toString()}};function T8(n){let e=aee(n),t=new Xi([new hd("",{})]),r=new Xi({}),i=new Xi({}),o=new Xi({}),s=new Xi(""),a=new Ws(t,r,o,s,i,nn,n,e.root);return a.snapshot=e.root,new Yv(new $s(a,[]),e)}function aee(n){let e={},t={},r={},o=new eh([],e,r,"",t,nn,n,null,{});return new Qv("",new $s(o,[]))}var Ws=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(at(l=>l[ey]))??gt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(at(e=>th(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(at(e=>th(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function y2(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Oe(Oe({},e.params),n.params),data:Oe(Oe({},e.data),n.data),resolve:Oe(Oe(Oe(Oe({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Oe({},n.params),data:Oe({},n.data),resolve:Oe(Oe({},n.data),n._resolvedData??{})},i&&N8(i)&&(r.resolve[ey]=i.title),r}var eh=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ey]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=th(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=th(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Qv=class extends v2{url;constructor(e,t){super(t),this.url=e,ED(this,t)}toString(){return M8(this._root)}};function ED(n,e){e.value._routerState=n,e.children.forEach(t=>ED(n,t))}function M8(n){let e=n.children.length>0?` { ${n.children.map(M8).join(", ")} } `:"";return`${n.value}${e}`}function cD(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Xc(e.params,t.params)||n.paramsSubject.next(t.params),RJ(e.url,t.url)||n.urlSubject.next(t.url),Xc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function vD(n,e){let t=Xc(n.params,e.params)&&VJ(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||vD(n.parent,e.parent))}function N8(n){return typeof n.title=="string"||n.title===null}var P8=new Ye(""),ty=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=nn;activateEvents=new Lr;deactivateEvents=new Lr;attachEvents=new Lr;detachEvents=new Lr;routerOutletData=l6();parentContexts=De(rh);location=De(tu);changeDetector=De(Kc);inputBinder=De(ny,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Xe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Xe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Xe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Xe(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new yD(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Yn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Sa]})}return n})(),yD=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ws?this.route:e===rh?this.childContexts:e===P8?this.outletData:this.parent.get(e,t)}},ny=new Ye(""),ID=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=R0([r.queryParams,r.params,r.data]).pipe(Nn(([o,s,a],c)=>(a=Oe(Oe(Oe({},o),s),a),c===0?gt(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=p6(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),SD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Tt(0,"router-outlet")},dependencies:[ty],encapsulation:2})}return n})();function AD(n){let e=n.children&&n.children.map(AD),t=e?Rt(Oe({},n),{children:e}):Oe({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==nn&&(t.component=SD),t}function cee(n,e,t){let r=Zv(n,e._root,t?t._root:void 0);return new Yv(r,e)}function Zv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=lee(n,e,t);return new $s(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Zv(n,a)),s}}let r=uee(e.value),i=e.children.map(o=>Zv(n,o));return new $s(r,i)}}function lee(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zv(n,r,i);return Zv(n,r)})}function uee(n){return new Ws(new Xi(n.url),new Xi(n.params),new Xi(n.queryParams),new Xi(n.fragment),new Xi(n.data),n.outlet,n.component,n)}var bg=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},k8="ngNavigationCancelingError";function _2(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=gd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=R8(!1,Yo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function R8(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[k8]=!0,t.cancellationCode=e,t}function dee(n){return O8(n)&&gd(n.url)}function O8(n){return!!n&&n[k8]}var fee=(n,e,t,r)=>at(i=>(new _D(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),_D=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),cD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=hg(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=hg(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=hg(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=hg(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new g2(o.value.snapshot))}),e.children.length&&this.forwardEvent(new h2(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(cD(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),cD(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},w2=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},mg=class{component;route;constructor(e,t){this.component=e,this.route=t}};function hee(n,e,t){let r=n._root,i=e?e._root:null;return qv(r,i,t,[r.value])}function pee(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Eg(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!BI(n)?n:e.get(n):r}function qv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=hg(e);return n.children.forEach(s=>{gee(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>$v(a,t.getContext(s),i)),i}function gee(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=mee(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new w2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?qv(n,e,a?a.children:null,r,i):qv(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new mg(a.outlet.component,s))}else s&&$v(e,a,i),i.canActivateChecks.push(new w2(r)),o.component?qv(n,null,a?a.children:null,r,i):qv(n,null,t,r,i);return i}function mee(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Jf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Jf(n.url,e.url)||!Xc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vD(n,e)||!Xc(n.queryParams,e.queryParams);case"paramsChange":default:return!vD(n,e)}}function $v(n,e,t){let r=hg(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?$v(s,e.children.getContext(o),t):$v(s,null,t):$v(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new mg(e.outlet.component,i)):t.canDeactivateChecks.push(new mg(null,i)):t.canDeactivateChecks.push(new mg(null,i))}function ry(n){return typeof n=="function"}function vee(n){return typeof n=="boolean"}function yee(n){return n&&ry(n.canLoad)}function _ee(n){return n&&ry(n.canActivate)}function wee(n){return n&&ry(n.canActivateChild)}function bee(n){return n&&ry(n.canDeactivate)}function xee(n){return n&&ry(n.canMatch)}function F8(n){return n instanceof Wa||n?.name==="EmptyError"}var e2=Symbol("INITIAL_VALUE");function xg(){return Nn(n=>R0(n.map(e=>e.pipe(Ji(1),Yu(e2)))).pipe(at(e=>{for(let t of e)if(t!==!0){if(t===e2)return e2;if(t===!1||Cee(t))return t}return!0}),br(e=>e!==e2),Ji(1)))}function Cee(n){return gd(n)||n instanceof bg}function Eee(n,e){return ei(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?gt(Rt(Oe({},t),{guardsResult:!0})):Iee(s,r,i,n).pipe(ei(a=>a&&vee(a)?See(r,o,n,e):gt(a)),at(a=>Rt(Oe({},t),{guardsResult:a})))})}function Iee(n,e,t,r){return mn(n).pipe(ei(i=>Nee(i.component,i.route,t,e,r)),Ka(i=>i!==!0,!0))}function See(n,e,t,r){return mn(e).pipe(Gu(i=>kp(Dee(i.route.parent,r),Aee(i.route,r),Mee(n,i.path,t),Tee(n,i.route,t))),Ka(i=>i!==!0,!0))}function Aee(n,e){return n!==null&&e&&e(new p2(n)),gt(!0)}function Dee(n,e){return n!==null&&e&&e(new f2(n)),gt(!0)}function Tee(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return gt(!0);let i=r.map(o=>O0(()=>{let s=Cg(e)??t,a=Eg(o,s),c=_ee(a)?a.canActivate(e,n):pi(s,()=>a(e,n));return iu(c).pipe(Ka())}));return gt(i).pipe(xg())}function Mee(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>pee(s)).filter(s=>s!==null).map(s=>O0(()=>{let a=s.guards.map(c=>{let l=Cg(s.node)??t,u=Eg(c,l),h=wee(u)?u.canActivateChild(r,n):pi(l,()=>u(r,n));return iu(h).pipe(Ka())});return gt(a).pipe(xg())}));return gt(o).pipe(xg())}function Nee(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return gt(!0);let s=o.map(a=>{let c=Cg(e)??i,l=Eg(a,c),u=bee(l)?l.canDeactivate(n,e,t,r):pi(c,()=>l(n,e,t,r));return iu(u).pipe(Ka())});return gt(s).pipe(xg())}function Pee(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return gt(!0);let o=i.map(s=>{let a=Eg(s,n),c=yee(a)?a.canLoad(e,t):pi(n,()=>a(e,t));return iu(c)});return gt(o).pipe(xg(),L8(r))}function L8(n){return B1(Ti(e=>{if(typeof e!="boolean")throw _2(n,e)}),at(e=>e===!0))}function kee(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return gt(!0);let o=i.map(s=>{let a=Eg(s,n),c=xee(a)?a.canMatch(e,t):pi(n,()=>a(e,t));return iu(c)});return gt(o).pipe(xg(),L8(r))}var Xv=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Jv=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function fg(n){return Pp(new Xv(n))}function Ree(n){return Pp(new Xe(4e3,!1))}function Oee(n){return Pp(R8(!1,Yo.GuardRejected))}var wD=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return gt(r);if(i.numberOfChildren>1||!i.children[nn])return Ree(`${e.redirectTo}`);i=i.children[nn]}}applyRedirectCommands(e,t,r,i,o){return Fee(t,i,o).pipe(at(s=>{if(s instanceof el)throw new Jv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Jv(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new el(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new On(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Xe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Fee(n,e,t){if(typeof n=="string")return gt(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:h}=e;return iu(pi(t,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}var bD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lee(n,e,t,r,i){let o=V8(n,e,t);return o.matched?(r=oee(e,r),kee(r,e,t,i).pipe(at(s=>s===!0?o:Oe({},bD)))):gt(o)}function V8(n,e,t){if(e.path==="**")return Vee(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Oe({},bD):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||h8)(t,n,e);if(!i)return Oe({},bD);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Oe(Oe({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Vee(n){return{matched:!0,parameters:n.length>0?g8(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function u8(n,e,t,r){return t.length>0&&Uee(n,t,r)?{segmentGroup:new On(e,Bee(r,new On(t,n.children))),slicedSegments:[]}:t.length===0&&zee(n,t,r)?{segmentGroup:new On(n.segments,jee(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new On(n.segments,n.children),slicedSegments:t}}function jee(n,e,t,r){let i={};for(let o of t)if(x2(n,e,o)&&!r[cc(o)]){let s=new On([],{});i[cc(o)]=s}return Oe(Oe({},r),i)}function Bee(n,e){let t={};t[nn]=e;for(let r of n)if(r.path===""&&cc(r)!==nn){let i=new On([],{});t[cc(r)]=i}return t}function Uee(n,e,t){return t.some(r=>x2(n,e,r)&&cc(r)!==nn)}function zee(n,e,t){return t.some(r=>x2(n,e,r))}function x2(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qee(n,e,t){return e.length===0&&!n.children[t]}var xD=class{};function Hee(n,e,t,r,i,o,s="emptyOnly"){return new CD(n,e,t,r,i,s,o).recognize()}var $ee=31,CD=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new wD(this.urlSerializer,this.urlTree)}noMatchError(e){return new Xe(4002,`'${e.segmentGroup}'`)}recognize(){let e=u8(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(at(({children:t,rootSnapshot:r})=>{let i=new $s(r,t),o=new Qv("",i),s=E8(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new eh([],Object.freeze({}),Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),nn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,nn,t).pipe(at(r=>({children:r,rootSnapshot:t})),Ul(r=>{if(r instanceof Jv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xv?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(at(s=>s instanceof $s?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return mn(o).pipe(Gu(s=>{let a=r.children[s],c=see(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Ku((s,a)=>(s.push(...a),s)),Wu(null),II(),ei(s=>{if(s===null)return fg(r);let a=j8(s);return Gee(a),gt(a)}))}processSegment(e,t,r,i,o,s,a){return mn(t).pipe(Gu(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Ul(l=>{if(l instanceof Xv)return gt(null);throw l}))),Ka(c=>!!c),Ul(c=>{if(F8(c))return qee(r,i,o)?gt(new xD):fg(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return cc(r)!==s&&(s===nn||!x2(i,o,r))?fg(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):fg(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:h,remainingSegments:m}=V8(t,i,o);if(!c)return fg(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$ee&&(this.allowRedirects=!1));let g=new eh(o,l,Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,d8(i),cc(i),i.component??i._loadedComponent??null,i,f8(i)),b=y2(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(b.params),g.data=Object.freeze(b.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h,g,e).pipe(Nn(T=>this.applyRedirects.lineralizeSegments(i,T)),ei(T=>this.processSegment(e,r,t,T.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Lee(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Nn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Nn(({routes:l})=>{let u=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:g}=c,b=new eh(m,h,Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,d8(r),cc(r),r.component??r._loadedComponent??null,r,f8(r)),I=y2(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(I.params),b.data=Object.freeze(I.data);let{segmentGroup:T,slicedSegments:N}=u8(t,m,g,l);if(N.length===0&&T.hasChildren())return this.processChildren(u,l,T,b).pipe(at(j=>new $s(b,j)));if(l.length===0&&N.length===0)return gt(new $s(b,[]));let Y=cc(r)===o;return this.processSegment(u,l,T,N,Y?nn:o,!0,b).pipe(at(j=>new $s(b,j instanceof $s?[j]:[])))}))):fg(t)))}getChildConfig(e,t,r){return t.children?gt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?gt({routes:t._loadedRoutes,injector:t._loadedInjector}):Pee(e,t,r,this.urlSerializer).pipe(ei(i=>i?this.configLoader.loadChildren(e,t).pipe(Ti(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Oee(t))):gt({routes:[],injector:e})}};function Gee(n){n.sort((e,t)=>e.value.outlet===nn?-1:t.value.outlet===nn?1:e.value.outlet.localeCompare(t.value.outlet))}function Wee(n){let e=n.value.routeConfig;return e&&e.path===""}function j8(n){let e=[],t=new Set;for(let r of n){if(!Wee(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=j8(r.children);e.push(new $s(r.value,i))}return e.filter(r=>!t.has(r))}function d8(n){return n.data||{}}function f8(n){return n.resolve||{}}function Kee(n,e,t,r,i,o){return ei(s=>Hee(n,e,t,r,s.extractedUrl,i,o).pipe(at(({state:a,tree:c})=>Rt(Oe({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Yee(n,e){return ei(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return gt(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of B8(c))s.add(l);let a=0;return mn(s).pipe(Gu(c=>o.has(c)?Qee(c,r,n,e):(c.data=y2(c,c.parent,n).resolve,gt(void 0))),Ti(()=>a++),Rp(1),ei(c=>a===s.size?gt(t):yo))})}function B8(n){let e=n.children.map(t=>B8(t)).flat();return[n,...e]}function Qee(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!N8(i)&&(o[ey]=i.title),O0(()=>(n.data=y2(n,n.parent,t).resolve,Zee(o,n,e,r).pipe(at(s=>(n._resolvedData=s,n.data=Oe(Oe({},n.data),s),null)))))}function Zee(n,e,t,r){let i=dD(n);if(i.length===0)return gt({});let o={};return mn(i).pipe(ei(s=>Xee(n[s],e,t,r).pipe(Ka(),Ti(a=>{if(a instanceof bg)throw _2(new pd,a);o[s]=a}))),Rp(1),at(()=>o),Ul(s=>F8(s)?yo:Pp(s)))}function Xee(n,e,t,r){let i=Cg(e)??r,o=Eg(n,i),s=o.resolve?o.resolve(e,t):pi(i,()=>o(e,t));return iu(s)}function lD(n){return Nn(e=>{let t=n(e);return t?mn(t).pipe(at(()=>e)):gt(e)})}var DD=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===nn);return r}getResolvedTitleForRoute(t){return t.data[ey]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>De(U8),providedIn:"root"})}return n})(),U8=(()=>{class n extends DD{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Ve(O6))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vd=new Ye("",{providedIn:"root",factory:()=>({})}),Ig=new Ye(""),C2=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=De(d5);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return gt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=iu(pi(t,()=>r.loadComponent())).pipe(at(q8),Nn(H8),Ti(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),F0(()=>{this.componentLoaders.delete(r)})),o=new Dp(i,()=>new kn).pipe(Ap());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return gt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=z8(r,this.compiler,t,this.onLoadEndListener).pipe(F0(()=>{this.childrenLoaders.delete(r)})),s=new Dp(o,()=>new kn).pipe(Ap());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z8(n,e,t,r){return iu(pi(t,()=>n.loadChildren())).pipe(at(q8),Nn(H8),ei(i=>i instanceof xb||Array.isArray(i)?gt(i):mn(e.compileModuleAsync(i))),at(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ig,[],{optional:!0,self:!0}).flat()),{routes:s.map(AD),injector:o}}))}function Jee(n){return n&&typeof n=="object"&&"default"in n}function q8(n){return Jee(n)?n.default:n}function H8(n){return gt(n)}var E2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>De(ete),providedIn:"root"})}return n})(),ete=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TD=new Ye(""),MD=new Ye("");function $8(n,e,t){let r=n.get(MD),i=n.get(ti);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),tte(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&pi(n,()=>c({transition:a,from:e,to:t})),s}function tte(n){return new Promise(e=>{pv({read:()=>setTimeout(e)},{injector:n})})}var ND=new Ye(""),I2=(()=>{class n{currentNavigation=Ea(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new kn;transitionAbortWithErrorSubject=new kn;configLoader=De(C2);environmentInjector=De(Wn);destroyRef=De(Ca);urlSerializer=De(nh);rootContexts=De(rh);location=De(ud);inputBindingEnabled=De(ny,{optional:!0})!==null;titleStrategy=De(DD);options=De(vd,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=De(E2);createViewTransition=De(TD,{optional:!0});navigationErrorHandler=De(ND,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>gt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new u2(i)),r=i=>this.events.next(new d2(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;zi(()=>{this.transitions?.next(Rt(Oe({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Xi(null),this.transitions.pipe(br(r=>r!==null),Nn(r=>{let i=!1;return gt(r).pipe(Nn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Yo.SupersededByNewNavigation),yo;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Rt(Oe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new tl(o.id,this.urlSerializer.serialize(o.rawUrl),"",vg.IgnoredSameUrlNavigation)),o.resolve(!1),yo;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return gt(o).pipe(Nn(c=>(this.events.next(new md(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?yo:Promise.resolve(c))),Kee(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ti(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new Wv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:h,extras:m}=o,g=new md(c,this.urlSerializer.serialize(l),u,h);this.events.next(g);let b=T8(this.rootComponentType).snapshot;return this.currentTransition=r=Rt(Oe({},o),{targetSnapshot:b,urlAfterRedirects:l,extras:Rt(Oe({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(I=>(I.finalUrl=l,I)),gt(r)}else return this.events.next(new tl(o.id,this.urlSerializer.serialize(o.extractedUrl),"",vg.IgnoredByUrlHandlingStrategy)),o.resolve(!1),yo}),Ti(o=>{let s=new s2(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),at(o=>(this.currentTransition=r=Rt(Oe({},o),{guards:hee(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Eee(this.environmentInjector,o=>this.events.next(o)),Ti(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw _2(this.urlSerializer,o.guardsResult);let s=new a2(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),br(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Yo.GuardRejected),!1)),lD(o=>{if(o.guards.canActivateChecks.length!==0)return gt(o).pipe(Ti(s=>{let a=new c2(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Nn(s=>{let a=!1;return gt(s).pipe(Yee(this.paramsInheritanceStrategy,this.environmentInjector),Ti({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Yo.NoDataFromResolver)}}))}),Ti(s=>{let a=new l2(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),lD(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Cg(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Ti(u=>{a.component=u}),at(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return R0(s(o.targetSnapshot.root)).pipe(Wu(null),Ji(1))}),lD(()=>this.afterPreactivation()),Nn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?mn(a).pipe(at(()=>r)):gt(r)}),at(o=>{let s=cee(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Rt(Oe({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Ti(()=>{this.events.next(new Kv)}),fee(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Ji(1),lw(new Ot(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(br(()=>!i&&!r.targetRouterState),Ti(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Yo.Aborted)}))),Ti({next:o=>{i=!0,this.lastSuccessfulNavigation=zi(this.currentNavigation),this.events.next(new Qo(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),lw(this.transitionAbortWithErrorSubject.pipe(Ti(o=>{throw o}))),F0(()=>{i||this.cancelNavigationTransition(r,"",Yo.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ul(o=>{if(this.destroyed)return r.resolve(!1),yo;if(i=!0,O8(o))this.events.next(new Jc(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),dee(o)?this.events.next(new wg(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new yg(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=pi(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof bg){let{message:c,cancellationCode:l}=_2(this.urlSerializer,a);this.events.next(new Jc(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new wg(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return yo}))}))}cancelNavigationTransition(t,r,i){let o=new Jc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=zi(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nte(n){return n!==gg}var G8=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>De(rte),providedIn:"root"})}return n})(),b2=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},rte=(()=>{class n extends b2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),W8=(()=>{class n{urlSerializer=De(nh);options=De(vd,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=De(ud);urlHandlingStrategy=De(E2);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new el;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof el?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=T8(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:()=>De(ite),providedIn:"root"})}return n})(),ite=(()=>{class n extends W8{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof md?this.updateStateMemento():t instanceof tl?this.commitTransition(r):t instanceof Wv?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Kv?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Jc&&t.code!==Yo.SupersededByNewNavigation&&t.code!==Yo.Redirect?this.restoreHistory(r):t instanceof yg?this.restoreHistory(r,!0):t instanceof Qo&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Oe(Oe({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=Oe(Oe({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Aa(n)))(i||n)}})();static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S2(n,e){n.events.pipe(br(t=>t instanceof Qo||t instanceof Jc||t instanceof yg||t instanceof tl),at(t=>t instanceof Qo||t instanceof tl?0:(t instanceof Jc?t.code===Yo.Redirect||t.code===Yo.SupersededByNewNavigation:!1)?2:1),br(t=>t!==2),Ji(1)).subscribe(()=>{e()})}var ote={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ste={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ar=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=De(Cb);stateManager=De(W8);options=De(vd,{optional:!0})||{};pendingTasks=De(qc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=De(I2);urlSerializer=De(nh);location=De(ud);urlHandlingStrategy=De(E2);injector=De(Wn);_events=new kn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=De(G8);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=De(Ig,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!De(ny,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new $r;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=zi(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Jc&&r.code!==Yo.Redirect&&r.code!==Yo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qo)this.navigated=!0;else if(r instanceof wg){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Oe({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||nte(i.source)},s);this.scheduleNavigation(a,gg,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}iee(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),gg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Oe({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(ps)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return zi(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(AD),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=Oe(Oe({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let m=i?i.snapshot:this.routerState.snapshot.root;h=I8(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return S8(h,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=gd(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,gg,null,r)}navigate(t,r={skipLocationChange:!1}){return ate(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Qa(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Oe({},ote):r===!1?i=Oe({},ste):i=r,gd(t))return s8(this.currentUrlTree,t,i);let o=this.parseUrl(t);return s8(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,m)=>{a=h,c=m});let u=this.pendingTasks.add();return S2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ate(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Xe(4008,!1)}var Ma=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ea(null);get href(){return zi(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new kn;applicationErrorHandler=De(ps);options=De(vd,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(De(new Db("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Qo&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(gd(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:gd(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(tt(Ar),tt(Ws),dv("tabindex"),tt($o),tt(no),tt(oc))};static \u0275dir=Yn({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Ne("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&nu("href",i.reactiveHref(),MA)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ld],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ld],replaceUrl:[2,"replaceUrl","replaceUrl",ld],routerLink:"routerLink"},features:[Sa]})}return n})(),kD=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Lr;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Qo&&this.update()})}ngAfterContentInit(){gt(this.links.changes,gt(null)).pipe(Vc()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=mn(t).pipe(Vc()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=cte(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(tt(Ar),tt(no),tt($o),tt(Kc),tt(Ma,8))};static \u0275dir=Yn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&c5(o,Ma,5),r&2){let s;Wf(s=Kf())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Sa]})}return n})();function cte(n){return!!n.paths}var iy=class{};var K8=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(br(t=>t instanceof Qo),Gu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=eg(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return mn(i).pipe(Vc())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=gt(null);let o=i.pipe(ei(s=>s===null?gt(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return mn([o,s]).pipe(Vc())}else return o})}static \u0275fac=function(r){return new(r||n)(Ve(Ar),Ve(Wn),Ve(iy),Ve(C2))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Y8=new Ye(""),lte=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=gg;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof md?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qo?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof tl&&t.code===vg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof _g))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>ee(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new _g(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){WA()};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})();function ute(n){return n.routerState.root}function oy(n,e){return{\u0275kind:n,\u0275providers:e}}function dte(){let n=De(Rn);return e=>{let t=n.get(Wo);if(e!==t.components[0])return;let r=n.get(Ar),i=n.get(Q8);n.get(RD)===1&&r.initialNavigation(),n.get(J8,null,{optional:!0})?.setUpPreloading(),n.get(Y8,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Q8=new Ye("",{factory:()=>new kn}),RD=new Ye("",{providedIn:"root",factory:()=>1});function Z8(){let n=[{provide:ub,useValue:!0},{provide:RD,useValue:0},ng(()=>{let e=De(Rn);return e.get(S5,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Ar),o=e.get(Q8);S2(i,()=>{r(!0)}),e.get(I2).afterPreactivation=()=>(r(!0),o.closed?gt(void 0):o),i.initialNavigation()}))})];return oy(2,n)}function X8(){let n=[ng(()=>{De(Ar).setUpLocationChangeListener()}),{provide:RD,useValue:2}];return oy(3,n)}var J8=new Ye("");function eV(n){return oy(0,[{provide:J8,useExisting:K8},{provide:iy,useExisting:n}])}function tV(){return oy(8,[ID,{provide:ny,useExisting:ID}])}function nV(n){Jp("NgRouterViewTransitions");let e=[{provide:TD,useValue:$8},{provide:MD,useValue:Oe({skipNextTransition:!!n?.skipInitialTransition},n)}];return oy(9,e)}var rV=[ud,{provide:nh,useClass:pd},Ar,rh,{provide:Ws,useFactory:ute,deps:[Ar]},C2,[]],yd=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[rV,[],{provide:Ig,multi:!0,useValue:t},[],r?.errorHandler?{provide:ND,useValue:r.errorHandler}:[],{provide:vd,useValue:r||{}},r?.useHash?hte():pte(),fte(),r?.preloadingStrategy?eV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?gte(r):[],r?.bindToComponentInputs?tV().\u0275providers:[],r?.enableViewTransitions?nV().\u0275providers:[],mte()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ig,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=ir({})}return n})();function fte(){return{provide:Y8,useFactory:()=>{let n=De(A6),e=De(Ut),t=De(vd),r=De(I2),i=De(nh);return t.scrollOffset&&n.setOffset(t.scrollOffset),new lte(i,r,n,e,t)}}}function hte(){return{provide:oc,useClass:M5}}function pte(){return{provide:oc,useClass:kb}}function gte(n){return[n.initialNavigation==="disabled"?X8().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Z8().\u0275providers:[]]}var PD=new Ye("");function mte(){return[{provide:PD,useFactory:dte},{provide:Ib,multi:!0,useExisting:PD}]}function Oi(n){n===void 0&&(n=De(Rn));let e=n.get(Hp);return t=>new Ot(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var vte="firebase",yte="11.10.0";Gn(vte,yte,"app");var ni=new ql("ANGULARFIRE2_VERSION");function ou(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var nl=(n,e)=>{let t=e?[e]:E1(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Sg=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Sg||{}),iV=cd()&&typeof Zone<"u"?Sg.WARN:Sg.SILENT;var A2=class{zone;delegate;constructor(e,t=yI){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ri=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=De(Ut);this.outsideAngular=t.runOutsideAngular(()=>new A2(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new A2(typeof Zone>"u"?void 0:Zone.current,Af))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oV=!1;function _te(n,e){!oV&&(iV>Sg.SILENT||cd())&&(oV=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),iV>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function wte(n){let e=De(Ut,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ih(n){let e=De(Ut,{optional:!0});return e?e.run(()=>n()):n()}var bte=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),pi(t,()=>ih(()=>n.apply(void 0,r)))),Dr=(n,e,t)=>(t||=e?Sg.WARN:Sg.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=De(ri),s=De(Hp),a=De(Wn)}catch{return _te(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ih(()=>s.add())),i[l]=bte(i[l],r,a));let c=wte(()=>n.apply(this,i));return e?c instanceof Ot?c.pipe(ma(o.outsideAngular),_o(o.insideAngular),Oi(a)):c instanceof Promise?ih(()=>{let l=s.add();return new Promise((u,h)=>{c.then(m=>pi(a,()=>ih(()=>u(m))),m=>pi(a,()=>ih(()=>h(m)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:ih(()=>c):c instanceof Ot?c.pipe(ma(o.outsideAngular),_o(o.insideAngular)):ih(()=>c)});var Ks=class{constructor(e){return e}},uc=class{constructor(){return E1()}};function xte(n){return n&&n.length===1?n[0]:new Ks(Oc())}var FD=new Ye("angularfire2._apps"),Cte={provide:Ks,useFactory:xte,deps:[[new Ir,FD]]},Ete={provide:uc,deps:[[new Ir,FD]]};function Ite(n){return(e,t)=>{let r=t.get(Ui);Gn("angularfire",ni.full,"core"),Gn("angularfire",ni.full,"app"),Gn("angular",B0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ks(i)}}function sV(n,...e){return to([Cte,Ete,{provide:FD,useFactory:Ite(n),multi:!0,deps:[Ut,Rn,ri,...e]}])}var aV=Dr(JO,!0);var Ste=new Map,Ate={activated:!1,tokenObservers:[]},Dte={initialized:!1,enabled:!1};function dc(n){return Ste.get(n)||Object.assign({},Ate)}function dV(){return Dte}var Tte="https://content-firebaseappcheck.googleapis.com/v1";var Mte="exchangeDebugToken",cV={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},gMe=1440*60*1e3;var jD=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return ee(this,null,function*(){this.stop();try{this.pending=new XE,this.pending.promise.catch(t=>{}),yield Nte(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new XE,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Nte(n){return new Promise(e=>{setTimeout(e,n)})}var Pte={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},_d=new pp("appCheck","AppCheck",Pte);function fV(n){if(!dc(n).activated)throw _d.create("use-before-activation",{appName:n.name})}function hV(r,i){return ee(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let g=yield s.getHeartbeatsHeader();g&&(o["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(g){throw _d.create("fetch-network-error",{originalErrorMessage:g?.message})}if(c.status!==200)throw _d.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(g){throw _d.create("fetch-parse-error",{originalErrorMessage:g?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw _d.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(u[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+h,issuedAtTimeMillis:m}})}function pV(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Tte}/projects/${t}/apps/${r}:${Mte}?key=${i}`,body:{debug_token:e}}}var kte="firebase-app-check-database",Rte=1,BD="firebase-app-check-store";var D2=null;function Ote(){return D2||(D2=new Promise((n,e)=>{try{let t=indexedDB.open(kte,Rte);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(_d.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(BD,{keyPath:"compositeKey"})}}}catch(t){e(_d.create("storage-open",{originalErrorMessage:t?.message}))}}),D2)}function Fte(n,e){return Lte(Vte(n),e)}function Lte(n,e){return ee(this,null,function*(){let r=(yield Ote()).transaction(BD,"readwrite"),o=r.objectStore(BD).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(_d.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Vte(n){return`${n.options.appId}-${n.name}`}var sy=new mp("@firebase/app-check");function LD(n,e){return hp()?Fte(n,e).catch(t=>{sy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gV(){return dV().enabled}function mV(){return ee(this,null,function*(){let n=dV();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var jte={error:"UNKNOWN_ERROR"};function Bte(n){return KO.encodeString(JSON.stringify(n),!1)}function UD(n,e=!1,t=!1){return ee(this,null,function*(){let r=n.app;fV(r);let i=dc(r),o=i.token,s;if(o&&!ay(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(ay(l)?o=l:yield LD(r,void 0))}if(!e&&o&&ay(o))return{token:o.token};let a=!1;if(gV())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=hV(pV(r,yield mV()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield LD(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?sy.warn(l.message):t&&sy.error(l),VD(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield dc(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?sy.warn(l.message):t&&sy.error(l),s=l}let c;return o?s?ay(o)?c={token:o.token,internalError:s}:c=VD(s):(c={token:o.token},i.token=o,yield LD(r,o)):c=VD(s),a&&Hte(r,c),c})}function Ute(n){return ee(this,null,function*(){let e=n.app;fV(e);let{provider:t}=dc(e);if(gV()){let r=yield mV(),{token:i}=yield hV(pV(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function zte(n,e,t,r){let{app:i}=n,o=dc(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ay(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),lV(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>lV(n))}function vV(n,e){let t=dc(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function lV(n){let{app:e}=n,t=dc(e),r=t.tokenRefresher;r||(r=qte(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qte(n){let{app:e}=n;return new jD(()=>ee(null,null,function*(){let t=dc(e),r;if(t.token?r=yield UD(n,!0):r=yield UD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=dc(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cV.RETRIAL_MIN_WAIT,cV.RETRIAL_MAX_WAIT)}function Hte(n,e){let t=dc(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ay(n){return n.expireTimeMillis-Date.now()>0}function VD(n){return{token:Bte(jte),error:n}}var zD=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=dc(this.app);for(let t of e)vV(this.app,t.next);return Promise.resolve()}};function $te(n,e){return new zD(n,e)}function Gte(n){return{getToken:e=>UD(n,e),getLimitedUseToken:()=>Ute(n),addTokenListener:e=>zte(n,"INTERNAL",e),removeTokenListener:e=>vV(n.app,e)}}var Wte="@firebase/app-check",Kte="0.10.1";var Yte="app-check",uV="app-check-internal";function Qte(){Us(new Zi(Yte,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return $te(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uV).initialize()})),Us(new Zi(uV,n=>{let e=n.getProvider("app-check").getImmediate();return Gte(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gn(Wte,Kte)}Qte();var Zte="app-check";var vs=class{constructor(){return nl(Zte)}};var Xte=["localhost","0.0.0.0","127.0.0.1"],DMe=typeof window<"u"&&Xte.includes(window.location.hostname);var Jte="firebase",ene="11.10.0";Di.registerVersion(Jte,ene,"app-compat");var tne=["ngOnDestroy"],_V=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(tne.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let h=u?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,h),h})})})});var T2=class{constructor(e){return e}},wd=new Ye("angularfire2.app.options"),bd=new Ye("angularfire2.app.name");function oh(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Di.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Di.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;nne("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new T2(s)}var nne=(n,...e)=>{cd()&&typeof console<"u"&&console[n](...e)},rne={provide:T2,useFactory:oh,deps:[wd,Ut,[new Ir,bd]]},wV=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:wd,useValue:t},{provide:bd,useValue:r}]}}constructor(t){Di.registerVersion("angularfire",ni.full,"core"),Di.registerVersion("angularfire",ni.full,"app-compat"),Di.registerVersion("angular",B0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Ve(Ui))};static \u0275mod=ur({type:n});static \u0275inj=ir({providers:[rne]})}return n})();function Ag(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return ine(i,s)||(yV("error",`${e} was already initialized on the ${t} Firebase App with different settings.${one?" You may need to reload as Firebase is not HMR aware.":""}`),yV("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function ine(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var one=typeof module<"u"&&!!module.hot,yV=(n,...e)=>{cd()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var HD=new Ye("angularfire2.auth.use-emulator"),$D=new Ye("angularfire2.auth.settings"),GD=new Ye("angularfire2.auth.tenant-id"),WD=new Ye("angularfire2.auth.langugage-code"),KD=new Ye("angularfire2.auth.use-device-language"),YD=new Ye("angularfire.auth.persistence"),QD=(n,e,t,r,i,o,s,a)=>Ag(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),Ys=(()=>{class n{injector=De(Wn);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,u,h,m,g){let b=new kn,I=gt(void 0).pipe(_o(s.outsideAngular),Nn(()=>o.runOutsideAngular(()=>import("./chunk-NO5NGGK2.js"))),at(()=>oh(t,o,r)),at(T=>QD(T,o,a,l,u,h,c,m)),aw({bufferSize:1,refCount:!1}));if(Lb(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{I.pipe(Ka()).subscribe();let T=I.pipe(Nn(j=>j.getRedirectResult().then(W=>W,()=>null)),Oi(this.injector),aw({bufferSize:1,refCount:!1})),N=I.pipe(Nn(j=>new Ot(W=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(oe=>W.next(oe),oe=>W.error(oe),()=>W.complete()))})))),Y=I.pipe(Nn(j=>new Ot(W=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(oe=>W.next(oe),oe=>W.error(oe),()=>W.complete()))}))));this.authState=T.pipe(cw(N),ma(s.outsideAngular),_o(s.insideAngular)),this.user=T.pipe(cw(Y),ma(s.outsideAngular),_o(s.insideAngular)),this.idToken=this.user.pipe(Nn(j=>j?mn(j.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(Nn(j=>j?mn(j.getIdTokenResult()):gt(null))),this.credential=CI(T,b,this.authState.pipe(br(j=>!j))).pipe(at(j=>j?.user?j:null),ma(s.outsideAngular),_o(s.insideAngular))}return _V(this,I,o,{spy:{apply:(T,N,Y)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&Y.then(j=>b.next(j))}}})}static \u0275fac=function(r){return new(r||n)(Ve(wd),Ve(bd,8),Ve(Ui),Ve(Ut),Ve(ri),Ve(HD,8),Ve($D,8),Ve(GD,8),Ve(WD,8),Ve(KD,8),Ve(YD,8),Ve(vs,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),bV=(()=>{class n{constructor(){Di.registerVersion("angularfire",ni.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=ir({providers:[Ys]})}return n})();var cy={production:!1,version:"1.0.3",publicBaseUrl:"",firebase:{apiKey:"AIzaSyCcUiX0VhFp0onLlKVknBHmUfMLAUEmFb8",authDomain:"profghizzapp-7cd59.firebaseapp.com",projectId:"profghizzapp-7cd59",storageBucket:"profghizzapp-7cd59.firebasestorage.app",messagingSenderId:"142548255598",appId:"1:142548255598:web:963e0aecd134f7d7afb77f",measurementId:"G-B77VGH8SVQ"}};var Tg=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i,this._ensuring=null}ensureSignedIn(){return ee(this,null,function*(){if(this._ensuring)return this._ensuring;this._ensuring=ee(this,null,function*(){if(!(yield this.afAuth.currentUser))try{yield this.afAuth.signInAnonymously(),yield new Promise(i=>{let o=this.afAuth.authState.subscribe(s=>{s&&(o.unsubscribe(),i())});setTimeout(()=>{o.unsubscribe(),i()},5e3)})}catch(i){console.error("AuthService.ensureSignedIn failed",i)}});try{yield this._ensuring}finally{this._ensuring=null}})}logout(){return ee(this,null,function*(){try{yield this.afAuth.signOut(),this.router.navigate(["/login"])}catch(r){console.error("Errore durante il logout:",r)}})}get authState(){return this.afAuth.authState}get currentUser(){return this.afAuth.currentUser}};e.\u0275fac=function(i){return new(i||e)(Ve(Ys),Ve(Ar))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var xV=(()=>{let e=class e{constructor(r){this.authService=r,this.appVersion=cy.version}logout(){this.authService.logout()}};e.\u0275fac=function(i){return new(i||e)(tt(Tg))},e.\u0275cmp=Kn({type:e,selectors:[["app-header"]],standalone:!1,decls:11,vars:1,consts:[[1,"app-header"],[1,"logo"],[1,"header-actions"],[1,"version-badge"],["title","Esci dal sistema","aria-label","Logout",1,"logout-btn",3,"click"],[1,"material-icons"],[1,"logout-text"]],template:function(i,o){i&1&&(C(0,"header",0)(1,"div",1),q(2,"Prof Ghizz"),P(),C(3,"nav",2)(4,"span",3),q(5),P(),C(6,"button",4),Ne("click",function(){return o.logout()}),C(7,"span",5),q(8,"logout"),P(),C(9,"span",6),q(10,"Esci"),P()()()()),i&2&&(K(5),Sr("v",o.appVersion))},styles:["[_nghost-%COMP%]{display:block}.app-header[_ngcontent-%COMP%]{height:64px;display:flex;align-items:center;justify-content:flex-start;padding:0 20px;background:#fff;border-bottom:1px solid #e6edf3;position:relative;z-index:1100;pointer-events:auto}.app-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-weight:800;color:#0f2a63;font-size:1.1rem}.header-actions[_ngcontent-%COMP%]{margin-left:auto;display:inline-flex;align-items:center;gap:10px}.open-browser[_ngcontent-%COMP%]{color:#0f2a63;text-decoration:none;font-weight:600;padding:6px 8px;border-radius:6px;transition:background-color .2s ease,color .2s ease}.open-browser[_ngcontent-%COMP%]:hover{background:#f3f7fa;color:#0b1e49}.install-btn[_ngcontent-%COMP%]{background:#1976d2;color:#fff;border:0;border-radius:6px;padding:8px 12px;font-weight:600;cursor:pointer;box-shadow:0 1px 2px #0c154014;transition:background-color .2s ease,box-shadow .2s ease,transform .02s ease-in}.install-btn[_ngcontent-%COMP%]:hover{background:#165fa8;box-shadow:0 2px 6px #0c15401f}.install-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.app-state[_ngcontent-%COMP%]{font-size:12px;font-weight:700;background:#2e7d32;color:#fff;padding:4px 8px;border-radius:999px;box-shadow:0 1px 2px #0c154014}.logout-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;background:#f44336;color:#fff;border:none;border-radius:6px;padding:6px 12px;font-weight:600;cursor:pointer;font-size:14px;transition:background-color .2s ease,box-shadow .2s ease,transform .02s ease-in;box-shadow:0 1px 2px #0c154014}.logout-btn[_ngcontent-%COMP%]:hover{background:#d32f2f;box-shadow:0 2px 6px #0c15401f}.logout-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.logout-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.logout-text[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.logout-text[_ngcontent-%COMP%]{display:inline}}.version-badge[_ngcontent-%COMP%]{font-size:11px;color:#999;font-weight:600;text-transform:uppercase;letter-spacing:.5px}"]});let n=e;return n})();var CV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Kn({type:e,selectors:[["app-sidebar"]],standalone:!1,decls:37,vars:0,consts:[["aria-label","Sidebar navigation",1,"app-sidebar"],["routerLink","/","routerLinkActive","active","aria-label","Home","title","Home"],["viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","role","img","aria-hidden","true","focusable","false",1,"side-svg"],["width","24","height","24","fill","none"],["d","M3 10L12 3l9 7v8a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-8z","fill","#fff"],[1,"sr-only"],["routerLink","/anagrafica","routerLinkActive","active","aria-label","Clienti","title","Clienti"],["d","M16 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8zM8 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z","fill","#fff"],["d","M2 20a6 6 0 0 1 6-6h8a6 6 0 0 1 6 6v1H2v-1z","fill","#fff"],["routerLink","/esercizi","routerLinkActive","active","aria-label","Esercizi","title","Esercizi"],["d","M13 2L3 14h7l-1 8L21 10h-7l-1-8z","fill","#fff"],["routerLink","/gestione-schede","routerLinkActive","active","aria-label","Schede","title","Schede"],["x","3","y","3","width","8","height","8","fill","#fff"],["x","13","y","3","width","8","height","8","fill","#fff"],["x","3","y","13","width","8","height","8","fill","#fff"],["x","13","y","13","width","8","height","8","fill","#fff"],["routerLink","/calendar-planning","routerLinkActive","active","aria-label","Calendar Planning","title","Calendar Planning"],["d","M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z","fill","#fff"]],template:function(i,o){i&1&&(C(0,"aside",0)(1,"ul")(2,"li")(3,"a",1),Pi(),C(4,"svg",2),Tt(5,"rect",3)(6,"path",4),P(),hs(),C(7,"span",5),q(8,"Home"),P()()(),C(9,"li")(10,"a",6),Pi(),C(11,"svg",2),Tt(12,"path",7)(13,"path",8),P(),hs(),C(14,"span",5),q(15,"Clienti"),P()()(),C(16,"li")(17,"a",9),Pi(),C(18,"svg",2),Tt(19,"path",10),P(),hs(),C(20,"span",5),q(21,"Esercizi"),P()()(),C(22,"li")(23,"a",11),Pi(),C(24,"svg",2),Tt(25,"rect",12)(26,"rect",13)(27,"rect",14)(28,"rect",15),P(),hs(),C(29,"span",5),q(30,"Schede"),P()()(),C(31,"li")(32,"a",16),Pi(),C(33,"svg",2),Tt(34,"path",17),P(),hs(),C(35,"span",5),q(36,"Calendar Planning"),P()()()()())},dependencies:[Ma,kD],styles:["[_nghost-%COMP%]{display:block}.app-sidebar[_ngcontent-%COMP%]{width:80px;background:#0b2a63;padding:8px;border-right:1px solid rgba(255,255,255,.06);height:100%;min-height:auto;box-sizing:border-box;position:relative;z-index:1100;pointer-events:auto}.app-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:12px 0 0;margin:8px 0 0;display:flex;flex-direction:column;gap:12px;align-items:center}.app-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:10px;padding:4px 6px;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:12px;color:#fff;text-decoration:none;cursor:pointer}.app-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff0f}.app-sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#ffffff1f;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px}.app-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.icon[_ngcontent-%COMP%]{margin-right:8px}.app-sidebar[_ngcontent-%COMP%]   .side-svg[_ngcontent-%COMP%]{width:28px;height:28px;display:block}.app-sidebar[_ngcontent-%COMP%]   .sr-only[_ngcontent-%COMP%]{position:absolute;left:-9999px}.app-sidebar[_ngcontent-%COMP%]   .side-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 8px;color:#fff;font-weight:700}.app-sidebar[_ngcontent-%COMP%]   .side-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.95}"]});let n=e;return n})();function cne(n,e){n&1&&(ro(0),Tt(1,"router-outlet"),io())}function lne(n,e){n&1&&(ro(0),Tt(1,"app-header"),C(2,"div",3),Tt(3,"app-sidebar"),C(4,"main",4),Tt(5,"router-outlet"),P()(),io())}function une(n,e){n&1&&Tt(0,"router-outlet")}function dne(n,e){if(n&1&&Je(0,lne,6,0,"ng-container",2)(1,une,1,0,"ng-template",null,1,qs),n&2){let t=bo(2),r=ne();de("ngIf",!r.isPublic)("ngIfElse",t)}}var EV=(()=>{let e=class e{constructor(r,i){this.router=r,this.afAuth=i,this.isPublic=!1,this.isLoggedIn=!1}ngOnInit(){this.authSub=this.afAuth.authState.subscribe(r=>{this.isLoggedIn=!!r}),this.isPublic=this.router.url.includes("/public-pdf/"),this.sub=this.router.events.pipe(br(r=>r instanceof Qo)).subscribe(()=>{this.isPublic=this.router.url.includes("/public-pdf/")})}ngOnDestroy(){this.sub?.unsubscribe(),this.authSub?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(tt(Ar),tt(Ys))},e.\u0275cmp=Kn({type:e,selectors:[["app-root"]],standalone:!1,decls:3,vars:2,consts:[["loggedInView",""],["publicView",""],[4,"ngIf","ngIfElse"],[1,"app-shell"],[1,"app-main"]],template:function(i,o){if(i&1&&Je(0,cne,2,0,"ng-container",2)(1,dne,3,2,"ng-template",null,0,qs),i&2){let s=bo(2);de("ngIf",!o.isLoggedIn&&!o.isPublic)("ngIfElse",s)}},dependencies:[ki,ty,xV,CV],styles:["[_ngcontent-%COMP%]:root{--header-h: 64px;--sidebar-w: 80px;--bg: #f5f8fc;--panel: #ffffff;--border: #e6edf7}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;background:var(--bg)}app-header[_ngcontent-%COMP%], .app-header[_ngcontent-%COMP%]{position:relative;z-index:100;display:block;width:100%;min-height:var(--header-h);background:var(--panel);border-bottom:1px solid var(--border)}.app-shell[_ngcontent-%COMP%]{display:flex;position:relative;z-index:0;min-height:calc(100vh - var(--header-h));height:calc(100vh - var(--header-h));isolation:isolate;background:var(--bg);overflow:hidden}app-sidebar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%]{position:relative;z-index:10;width:var(--sidebar-w);min-height:calc(100vh - var(--header-h));flex-shrink:0;background:#f8fbff;border-right:1px solid var(--border);overflow:auto;-webkit-overflow-scrolling:touch}.app-main[_ngcontent-%COMP%]{position:relative;z-index:0;flex:1 1 auto;min-width:0;padding:24px;min-height:calc(100vh - var(--header-h));background:var(--bg)}router-outlet[_ngcontent-%COMP%]{display:block;position:relative;z-index:0}.app-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:1200}.app-modal[_ngcontent-%COMP%]{position:relative;z-index:1210;background:#fff;border-radius:12px;box-shadow:0 8px 40px #0000003b;max-width:90vw;width:680px;padding:22px}.app-modal-backdrop.is-hidden[_ngcontent-%COMP%]{pointer-events:none!important;opacity:0!important}.app-shell[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto}@media (max-width: 800px){.app-shell[_ngcontent-%COMP%]{flex-direction:column;min-height:calc(100vh - var(--header-h))}app-sidebar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%]{width:100%;height:auto;min-height:auto;border-right:none;border-bottom:1px solid var(--border)}.app-main[_ngcontent-%COMP%]{min-height:auto;padding:18px}}.safe-content[_ngcontent-%COMP%]{position:relative;z-index:0}"]});let n=e;return n})();var IV="auth",ly=class{constructor(e){return e}},sh=class{constructor(){return nl(IV)}};var XD=new Ye("angularfire2.auth-instances");function ure(n,e){let t=ou(IV,n,e);return t&&new ly(t)}function dre(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ly(r)}}var fre={provide:sh,deps:[[new Ir,XD]]},hre={provide:ly,useFactory:ure,deps:[[new Ir,XD],Ks]};function SV(n,...e){return Gn("angularfire",ni.full,"auth"),to([hre,fre,{provide:XD,useFactory:dre(n),multi:!0,deps:[Ut,Rn,ri,uc,[new Ir,vs],...e]}])}var AV=Dr(tI,!0);var DV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TV={};var su,JD;(function(){var n;function e(z,M){function S(){}S.prototype=M.prototype,z.D=M.prototype,z.prototype=new S,z.prototype.constructor=z,z.C=function(V,x,A){for(var D=Array(arguments.length-2),te=2;te<arguments.length;te++)D[te-2]=arguments[te];return M.prototype[x].apply(V,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(z,M,S){S||(S=0);var V=Array(16);if(typeof M=="string")for(var x=0;16>x;++x)V[x]=M.charCodeAt(S++)|M.charCodeAt(S++)<<8|M.charCodeAt(S++)<<16|M.charCodeAt(S++)<<24;else for(x=0;16>x;++x)V[x]=M[S++]|M[S++]<<8|M[S++]<<16|M[S++]<<24;M=z.g[0],S=z.g[1],x=z.g[2];var A=z.g[3],D=M+(A^S&(x^A))+V[0]+3614090360&4294967295;M=S+(D<<7&4294967295|D>>>25),D=A+(x^M&(S^x))+V[1]+3905402710&4294967295,A=M+(D<<12&4294967295|D>>>20),D=x+(S^A&(M^S))+V[2]+606105819&4294967295,x=A+(D<<17&4294967295|D>>>15),D=S+(M^x&(A^M))+V[3]+3250441966&4294967295,S=x+(D<<22&4294967295|D>>>10),D=M+(A^S&(x^A))+V[4]+4118548399&4294967295,M=S+(D<<7&4294967295|D>>>25),D=A+(x^M&(S^x))+V[5]+1200080426&4294967295,A=M+(D<<12&4294967295|D>>>20),D=x+(S^A&(M^S))+V[6]+2821735955&4294967295,x=A+(D<<17&4294967295|D>>>15),D=S+(M^x&(A^M))+V[7]+4249261313&4294967295,S=x+(D<<22&4294967295|D>>>10),D=M+(A^S&(x^A))+V[8]+1770035416&4294967295,M=S+(D<<7&4294967295|D>>>25),D=A+(x^M&(S^x))+V[9]+2336552879&4294967295,A=M+(D<<12&4294967295|D>>>20),D=x+(S^A&(M^S))+V[10]+4294925233&4294967295,x=A+(D<<17&4294967295|D>>>15),D=S+(M^x&(A^M))+V[11]+2304563134&4294967295,S=x+(D<<22&4294967295|D>>>10),D=M+(A^S&(x^A))+V[12]+1804603682&4294967295,M=S+(D<<7&4294967295|D>>>25),D=A+(x^M&(S^x))+V[13]+4254626195&4294967295,A=M+(D<<12&4294967295|D>>>20),D=x+(S^A&(M^S))+V[14]+2792965006&4294967295,x=A+(D<<17&4294967295|D>>>15),D=S+(M^x&(A^M))+V[15]+1236535329&4294967295,S=x+(D<<22&4294967295|D>>>10),D=M+(x^A&(S^x))+V[1]+4129170786&4294967295,M=S+(D<<5&4294967295|D>>>27),D=A+(S^x&(M^S))+V[6]+3225465664&4294967295,A=M+(D<<9&4294967295|D>>>23),D=x+(M^S&(A^M))+V[11]+643717713&4294967295,x=A+(D<<14&4294967295|D>>>18),D=S+(A^M&(x^A))+V[0]+3921069994&4294967295,S=x+(D<<20&4294967295|D>>>12),D=M+(x^A&(S^x))+V[5]+3593408605&4294967295,M=S+(D<<5&4294967295|D>>>27),D=A+(S^x&(M^S))+V[10]+38016083&4294967295,A=M+(D<<9&4294967295|D>>>23),D=x+(M^S&(A^M))+V[15]+3634488961&4294967295,x=A+(D<<14&4294967295|D>>>18),D=S+(A^M&(x^A))+V[4]+3889429448&4294967295,S=x+(D<<20&4294967295|D>>>12),D=M+(x^A&(S^x))+V[9]+568446438&4294967295,M=S+(D<<5&4294967295|D>>>27),D=A+(S^x&(M^S))+V[14]+3275163606&4294967295,A=M+(D<<9&4294967295|D>>>23),D=x+(M^S&(A^M))+V[3]+4107603335&4294967295,x=A+(D<<14&4294967295|D>>>18),D=S+(A^M&(x^A))+V[8]+1163531501&4294967295,S=x+(D<<20&4294967295|D>>>12),D=M+(x^A&(S^x))+V[13]+2850285829&4294967295,M=S+(D<<5&4294967295|D>>>27),D=A+(S^x&(M^S))+V[2]+4243563512&4294967295,A=M+(D<<9&4294967295|D>>>23),D=x+(M^S&(A^M))+V[7]+1735328473&4294967295,x=A+(D<<14&4294967295|D>>>18),D=S+(A^M&(x^A))+V[12]+2368359562&4294967295,S=x+(D<<20&4294967295|D>>>12),D=M+(S^x^A)+V[5]+4294588738&4294967295,M=S+(D<<4&4294967295|D>>>28),D=A+(M^S^x)+V[8]+2272392833&4294967295,A=M+(D<<11&4294967295|D>>>21),D=x+(A^M^S)+V[11]+1839030562&4294967295,x=A+(D<<16&4294967295|D>>>16),D=S+(x^A^M)+V[14]+4259657740&4294967295,S=x+(D<<23&4294967295|D>>>9),D=M+(S^x^A)+V[1]+2763975236&4294967295,M=S+(D<<4&4294967295|D>>>28),D=A+(M^S^x)+V[4]+1272893353&4294967295,A=M+(D<<11&4294967295|D>>>21),D=x+(A^M^S)+V[7]+4139469664&4294967295,x=A+(D<<16&4294967295|D>>>16),D=S+(x^A^M)+V[10]+3200236656&4294967295,S=x+(D<<23&4294967295|D>>>9),D=M+(S^x^A)+V[13]+681279174&4294967295,M=S+(D<<4&4294967295|D>>>28),D=A+(M^S^x)+V[0]+3936430074&4294967295,A=M+(D<<11&4294967295|D>>>21),D=x+(A^M^S)+V[3]+3572445317&4294967295,x=A+(D<<16&4294967295|D>>>16),D=S+(x^A^M)+V[6]+76029189&4294967295,S=x+(D<<23&4294967295|D>>>9),D=M+(S^x^A)+V[9]+3654602809&4294967295,M=S+(D<<4&4294967295|D>>>28),D=A+(M^S^x)+V[12]+3873151461&4294967295,A=M+(D<<11&4294967295|D>>>21),D=x+(A^M^S)+V[15]+530742520&4294967295,x=A+(D<<16&4294967295|D>>>16),D=S+(x^A^M)+V[2]+3299628645&4294967295,S=x+(D<<23&4294967295|D>>>9),D=M+(x^(S|~A))+V[0]+4096336452&4294967295,M=S+(D<<6&4294967295|D>>>26),D=A+(S^(M|~x))+V[7]+1126891415&4294967295,A=M+(D<<10&4294967295|D>>>22),D=x+(M^(A|~S))+V[14]+2878612391&4294967295,x=A+(D<<15&4294967295|D>>>17),D=S+(A^(x|~M))+V[5]+4237533241&4294967295,S=x+(D<<21&4294967295|D>>>11),D=M+(x^(S|~A))+V[12]+1700485571&4294967295,M=S+(D<<6&4294967295|D>>>26),D=A+(S^(M|~x))+V[3]+2399980690&4294967295,A=M+(D<<10&4294967295|D>>>22),D=x+(M^(A|~S))+V[10]+4293915773&4294967295,x=A+(D<<15&4294967295|D>>>17),D=S+(A^(x|~M))+V[1]+2240044497&4294967295,S=x+(D<<21&4294967295|D>>>11),D=M+(x^(S|~A))+V[8]+1873313359&4294967295,M=S+(D<<6&4294967295|D>>>26),D=A+(S^(M|~x))+V[15]+4264355552&4294967295,A=M+(D<<10&4294967295|D>>>22),D=x+(M^(A|~S))+V[6]+2734768916&4294967295,x=A+(D<<15&4294967295|D>>>17),D=S+(A^(x|~M))+V[13]+1309151649&4294967295,S=x+(D<<21&4294967295|D>>>11),D=M+(x^(S|~A))+V[4]+4149444226&4294967295,M=S+(D<<6&4294967295|D>>>26),D=A+(S^(M|~x))+V[11]+3174756917&4294967295,A=M+(D<<10&4294967295|D>>>22),D=x+(M^(A|~S))+V[2]+718787259&4294967295,x=A+(D<<15&4294967295|D>>>17),D=S+(A^(x|~M))+V[9]+3951481745&4294967295,z.g[0]=z.g[0]+M&4294967295,z.g[1]=z.g[1]+(x+(D<<21&4294967295|D>>>11))&4294967295,z.g[2]=z.g[2]+x&4294967295,z.g[3]=z.g[3]+A&4294967295}r.prototype.u=function(z,M){M===void 0&&(M=z.length);for(var S=M-this.blockSize,V=this.B,x=this.h,A=0;A<M;){if(x==0)for(;A<=S;)i(this,z,A),A+=this.blockSize;if(typeof z=="string"){for(;A<M;)if(V[x++]=z.charCodeAt(A++),x==this.blockSize){i(this,V),x=0;break}}else for(;A<M;)if(V[x++]=z[A++],x==this.blockSize){i(this,V),x=0;break}}this.h=x,this.o+=M},r.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var M=1;M<z.length-8;++M)z[M]=0;var S=8*this.o;for(M=z.length-8;M<z.length;++M)z[M]=S&255,S/=256;for(this.u(z),z=Array(16),M=S=0;4>M;++M)for(var V=0;32>V;V+=8)z[S++]=this.g[M]>>>V&255;return z};function o(z,M){var S=a;return Object.prototype.hasOwnProperty.call(S,z)?S[z]:S[z]=M(z)}function s(z,M){this.h=M;for(var S=[],V=!0,x=z.length-1;0<=x;x--){var A=z[x]|0;V&&A==M||(S[x]=A,V=!1)}this.g=S}var a={};function c(z){return-128<=z&&128>z?o(z,function(M){return new s([M|0],0>M?-1:0)}):new s([z|0],0>z?-1:0)}function l(z){if(isNaN(z)||!isFinite(z))return h;if(0>z)return T(l(-z));for(var M=[],S=1,V=0;z>=S;V++)M[V]=z/S|0,S*=4294967296;return new s(M,0)}function u(z,M){if(z.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(z.charAt(0)=="-")return T(u(z.substring(1),M));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=l(Math.pow(M,8)),V=h,x=0;x<z.length;x+=8){var A=Math.min(8,z.length-x),D=parseInt(z.substring(x,x+A),M);8>A?(A=l(Math.pow(M,A)),V=V.j(A).add(l(D))):(V=V.j(S),V=V.add(l(D)))}return V}var h=c(0),m=c(1),g=c(16777216);n=s.prototype,n.m=function(){if(I(this))return-T(this).m();for(var z=0,M=1,S=0;S<this.g.length;S++){var V=this.i(S);z+=(0<=V?V:4294967296+V)*M,M*=4294967296}return z},n.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(b(this))return"0";if(I(this))return"-"+T(this).toString(z);for(var M=l(Math.pow(z,6)),S=this,V="";;){var x=W(S,M).g;S=N(S,x.j(M));var A=((0<S.g.length?S.g[0]:S.h)>>>0).toString(z);if(S=x,b(S))return A+V;for(;6>A.length;)A="0"+A;V=A+V}},n.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function b(z){if(z.h!=0)return!1;for(var M=0;M<z.g.length;M++)if(z.g[M]!=0)return!1;return!0}function I(z){return z.h==-1}n.l=function(z){return z=N(this,z),I(z)?-1:b(z)?0:1};function T(z){for(var M=z.g.length,S=[],V=0;V<M;V++)S[V]=~z.g[V];return new s(S,~z.h).add(m)}n.abs=function(){return I(this)?T(this):this},n.add=function(z){for(var M=Math.max(this.g.length,z.g.length),S=[],V=0,x=0;x<=M;x++){var A=V+(this.i(x)&65535)+(z.i(x)&65535),D=(A>>>16)+(this.i(x)>>>16)+(z.i(x)>>>16);V=D>>>16,A&=65535,D&=65535,S[x]=D<<16|A}return new s(S,S[S.length-1]&-2147483648?-1:0)};function N(z,M){return z.add(T(M))}n.j=function(z){if(b(this)||b(z))return h;if(I(this))return I(z)?T(this).j(T(z)):T(T(this).j(z));if(I(z))return T(this.j(T(z)));if(0>this.l(g)&&0>z.l(g))return l(this.m()*z.m());for(var M=this.g.length+z.g.length,S=[],V=0;V<2*M;V++)S[V]=0;for(V=0;V<this.g.length;V++)for(var x=0;x<z.g.length;x++){var A=this.i(V)>>>16,D=this.i(V)&65535,te=z.i(x)>>>16,_e=z.i(x)&65535;S[2*V+2*x]+=D*_e,Y(S,2*V+2*x),S[2*V+2*x+1]+=A*_e,Y(S,2*V+2*x+1),S[2*V+2*x+1]+=D*te,Y(S,2*V+2*x+1),S[2*V+2*x+2]+=A*te,Y(S,2*V+2*x+2)}for(V=0;V<M;V++)S[V]=S[2*V+1]<<16|S[2*V];for(V=M;V<2*M;V++)S[V]=0;return new s(S,0)};function Y(z,M){for(;(z[M]&65535)!=z[M];)z[M+1]+=z[M]>>>16,z[M]&=65535,M++}function j(z,M){this.g=z,this.h=M}function W(z,M){if(b(M))throw Error("division by zero");if(b(z))return new j(h,h);if(I(z))return M=W(T(z),M),new j(T(M.g),T(M.h));if(I(M))return M=W(z,T(M)),new j(T(M.g),M.h);if(30<z.g.length){if(I(z)||I(M))throw Error("slowDivide_ only works with positive integers.");for(var S=m,V=M;0>=V.l(z);)S=oe(S),V=oe(V);var x=he(S,1),A=he(V,1);for(V=he(V,2),S=he(S,2);!b(V);){var D=A.add(V);0>=D.l(z)&&(x=x.add(S),A=D),V=he(V,1),S=he(S,1)}return M=N(z,x.j(M)),new j(x,M)}for(x=h;0<=z.l(M);){for(S=Math.max(1,Math.floor(z.m()/M.m())),V=Math.ceil(Math.log(S)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),A=l(S),D=A.j(M);I(D)||0<D.l(z);)S-=V,A=l(S),D=A.j(M);b(A)&&(A=m),x=x.add(A),z=N(z,D)}return new j(x,z)}n.A=function(z){return W(this,z).h},n.and=function(z){for(var M=Math.max(this.g.length,z.g.length),S=[],V=0;V<M;V++)S[V]=this.i(V)&z.i(V);return new s(S,this.h&z.h)},n.or=function(z){for(var M=Math.max(this.g.length,z.g.length),S=[],V=0;V<M;V++)S[V]=this.i(V)|z.i(V);return new s(S,this.h|z.h)},n.xor=function(z){for(var M=Math.max(this.g.length,z.g.length),S=[],V=0;V<M;V++)S[V]=this.i(V)^z.i(V);return new s(S,this.h^z.h)};function oe(z){for(var M=z.g.length+1,S=[],V=0;V<M;V++)S[V]=z.i(V)<<1|z.i(V-1)>>>31;return new s(S,z.h)}function he(z,M){var S=M>>5;M%=32;for(var V=z.g.length-S,x=[],A=0;A<V;A++)x[A]=0<M?z.i(A+S)>>>M|z.i(A+S+1)<<32-M:z.i(A+S);return new s(x,z.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JD=TV.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=u,su=TV.Integer=s}).apply(typeof DV<"u"?DV:typeof self<"u"?self:typeof window<"u"?window:{});var M2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},au={};var eT,pre,Mg,tT,uy,N2,nT,rT,iT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,E){return f==Array.prototype||f==Object.prototype||(f[_]=E.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof M2=="object"&&M2];for(var _=0;_<f.length;++_){var E=f[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(f,_){if(_)e:{var E=r;f=f.split(".");for(var B=0;B<f.length-1;B++){var le=f[B];if(!(le in E))break e;E=E[le]}f=f[f.length-1],B=E[f],_=_(B),_!=B&&_!=null&&e(E,f,{configurable:!0,writable:!0,value:_})}}function o(f,_){f instanceof String&&(f+="");var E=0,B=!1,le={next:function(){if(!B&&E<f.length){var Ee=E++;return{value:_(Ee,f[Ee]),done:!1}}return B=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}i("Array.prototype.values",function(f){return f||function(){return o(this,function(_,E){return E})}});var s=s||{},a=this||self;function c(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function l(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function u(f,_,E){return f.call.apply(f.bind,arguments)}function h(f,_,E){if(!f)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,B),f.apply(_,le)}}return function(){return f.apply(_,arguments)}}function m(f,_,E){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,m.apply(null,arguments)}function g(f,_){var E=Array.prototype.slice.call(arguments,1);return function(){var B=E.slice();return B.push.apply(B,arguments),f.apply(this,B)}}function b(f,_){function E(){}E.prototype=_.prototype,f.aa=_.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(B,le,Ee){for(var Ze=Array(arguments.length-2),Tn=2;Tn<arguments.length;Tn++)Ze[Tn-2]=arguments[Tn];return _.prototype[le].apply(B,Ze)}}function I(f){let _=f.length;if(0<_){let E=Array(_);for(let B=0;B<_;B++)E[B]=f[B];return E}return[]}function T(f,_){for(let E=1;E<arguments.length;E++){let B=arguments[E];if(c(B)){let le=f.length||0,Ee=B.length||0;f.length=le+Ee;for(let Ze=0;Ze<Ee;Ze++)f[le+Ze]=B[Ze]}else f.push(B)}}class N{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function Y(f){return/^[\s\xa0]*$/.test(f)}function j(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function W(f){return W[" "](f),f}W[" "]=function(){};var oe=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function he(f,_,E){for(let B in f)_.call(E,f[B],B,f)}function z(f,_){for(let E in f)_.call(void 0,f[E],E,f)}function M(f){let _={};for(let E in f)_[E]=f[E];return _}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,_){let E,B;for(let le=1;le<arguments.length;le++){B=arguments[le];for(E in B)f[E]=B[E];for(let Ee=0;Ee<S.length;Ee++)E=S[Ee],Object.prototype.hasOwnProperty.call(B,E)&&(f[E]=B[E])}}function x(f){var _=1;f=f.split(":");let E=[];for(;0<_&&f.length;)E.push(f.shift()),_--;return f.length&&E.push(f.join(":")),E}function A(f){a.setTimeout(()=>{throw f},0)}function D(){var f=Ae;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class te{constructor(){this.h=this.g=null}add(_,E){let B=_e.get();B.set(_,E),this.h?this.h.next=B:this.g=B,this.h=B}}var _e=new N(()=>new Te,f=>f.reset());class Te{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,fe=!1,Ae=new te,Be=()=>{let f=a.Promise.resolve(void 0);Ce=()=>{f.then(Fe)}};var Fe=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(E){A(E)}var _=_e;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}fe=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return f})();function ie(f,_){if(G.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,B=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(oe){e:{try{W(_.nodeName);var le=!0;break e}catch{}le=!1}le||(_=null)}}else E=="mouseover"?_=f.fromElement:E=="mouseout"&&(_=f.toElement);this.relatedTarget=_,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ae[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ie.aa.h.call(this)}}b(ie,G);var ae={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),Se=0;function ye(f,_,E,B,le){this.listener=f,this.proxy=null,this.src=_,this.type=E,this.capture=!!B,this.ha=le,this.key=++Se,this.da=this.fa=!1}function Me(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ue(f){this.src=f,this.g={},this.h=0}Ue.prototype.add=function(f,_,E,B,le){var Ee=f.toString();f=this.g[Ee],f||(f=this.g[Ee]=[],this.h++);var Ze=We(f,_,B,le);return-1<Ze?(_=f[Ze],E||(_.fa=!1)):(_=new ye(_,this.src,Ee,!!B,le),_.fa=E,f.push(_)),_};function et(f,_){var E=_.type;if(E in f.g){var B=f.g[E],le=Array.prototype.indexOf.call(B,_,void 0),Ee;(Ee=0<=le)&&Array.prototype.splice.call(B,le,1),Ee&&(Me(_),f.g[E].length==0&&(delete f.g[E],f.h--))}}function We(f,_,E,B){for(var le=0;le<f.length;++le){var Ee=f[le];if(!Ee.da&&Ee.listener==_&&Ee.capture==!!E&&Ee.ha==B)return le}return-1}var ot="closure_lm_"+(1e6*Math.random()|0),$={};function Ke(f,_,E,B,le){if(B&&B.once)return qe(f,_,E,B,le);if(Array.isArray(_)){for(var Ee=0;Ee<_.length;Ee++)Ke(f,_[Ee],E,B,le);return null}return E=zt(E),f&&f[pe]?f.K(_,E,l(B)?!!B.capture:!!B,le):Ft(f,_,E,!1,B,le)}function Ft(f,_,E,B,le,Ee){if(!_)throw Error("Invalid event type");var Ze=l(le)?!!le.capture:!!le,Tn=vn(f);if(Tn||(f[ot]=Tn=new Ue(f)),E=Tn.add(_,E,B,Ze,Ee),E.proxy)return E;if(B=Ct(),E.proxy=B,B.src=f,B.listener=E,f.addEventListener)J||(le=Ze),le===void 0&&(le=!1),f.addEventListener(_.toString(),B,le);else if(f.attachEvent)f.attachEvent(yt(_.toString()),B);else if(f.addListener&&f.removeListener)f.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ct(){function f(E){return _.call(f.src,f.listener,E)}let _=Et;return f}function qe(f,_,E,B,le){if(Array.isArray(_)){for(var Ee=0;Ee<_.length;Ee++)qe(f,_[Ee],E,B,le);return null}return E=zt(E),f&&f[pe]?f.L(_,E,l(B)?!!B.capture:!!B,le):Ft(f,_,E,!0,B,le)}function At(f,_,E,B,le){if(Array.isArray(_))for(var Ee=0;Ee<_.length;Ee++)At(f,_[Ee],E,B,le);else B=l(B)?!!B.capture:!!B,E=zt(E),f&&f[pe]?(f=f.i,_=String(_).toString(),_ in f.g&&(Ee=f.g[_],E=We(Ee,E,B,le),-1<E&&(Me(Ee[E]),Array.prototype.splice.call(Ee,E,1),Ee.length==0&&(delete f.g[_],f.h--)))):f&&(f=vn(f))&&(_=f.g[_.toString()],f=-1,_&&(f=We(_,E,B,le)),(E=-1<f?_[f]:null)&&st(E))}function st(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[pe])et(_.i,f);else{var E=f.type,B=f.proxy;_.removeEventListener?_.removeEventListener(E,B,f.capture):_.detachEvent?_.detachEvent(yt(E),B):_.addListener&&_.removeListener&&_.removeListener(B),(E=vn(_))?(et(E,f),E.h==0&&(E.src=null,_[ot]=null)):Me(f)}}}function yt(f){return f in $?$[f]:$[f]="on"+f}function Et(f,_){if(f.da)f=!0;else{_=new ie(_,this);var E=f.listener,B=f.ha||f.src;f.fa&&st(f),f=E.call(B,_)}return f}function vn(f){return f=f[ot],f instanceof Ue?f:null}var Qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function zt(f){return typeof f=="function"?f:(f[Qt]||(f[Qt]=function(_){return f.handleEvent(_)}),f[Qt])}function Lt(){O.call(this),this.i=new Ue(this),this.M=this,this.F=null}b(Lt,O),Lt.prototype[pe]=!0,Lt.prototype.removeEventListener=function(f,_,E,B){At(this,f,_,E,B)};function Vt(f,_){var E,B=f.F;if(B)for(E=[];B;B=B.F)E.push(B);if(f=f.M,B=_.type||_,typeof _=="string")_=new G(_,f);else if(_ instanceof G)_.target=_.target||f;else{var le=_;_=new G(B,f),V(_,le)}if(le=!0,E)for(var Ee=E.length-1;0<=Ee;Ee--){var Ze=_.g=E[Ee];le=mt(Ze,B,!0,_)&&le}if(Ze=_.g=f,le=mt(Ze,B,!0,_)&&le,le=mt(Ze,B,!1,_)&&le,E)for(Ee=0;Ee<E.length;Ee++)Ze=_.g=E[Ee],le=mt(Ze,B,!1,_)&&le}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var E=f.g[_],B=0;B<E.length;B++)Me(E[B]);delete f.g[_],f.h--}}this.F=null},Lt.prototype.K=function(f,_,E,B){return this.i.add(String(f),_,!1,E,B)},Lt.prototype.L=function(f,_,E,B){return this.i.add(String(f),_,!0,E,B)};function mt(f,_,E,B){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var le=!0,Ee=0;Ee<_.length;++Ee){var Ze=_[Ee];if(Ze&&!Ze.da&&Ze.capture==E){var Tn=Ze.listener,Or=Ze.ha||Ze.src;Ze.fa&&et(f.i,Ze),le=Tn.call(Or,B)!==!1&&le}}return le&&!B.defaultPrevented}function Xt(f,_,E){if(typeof f=="function")E&&(f=m(f,E));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(f,_||0)}function It(f){f.g=Xt(()=>{f.g=null,f.i&&(f.i=!1,It(f))},f.l);let _=f.h;f.h=null,f.m.apply(null,_)}class Pr extends O{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(f){O.call(this),this.h=f,this.g={}}b(yn,O);var an=[];function cn(f){he(f.g,function(_,E){this.g.hasOwnProperty(E)&&st(_)},f),f.g={}}yn.prototype.N=function(){yn.aa.N.call(this),cn(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xn=a.JSON.stringify,kt=a.JSON.parse,Jn=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Bt(){}Bt.prototype.h=null;function Zt(f){return f.h||(f.h=f.i())}function sr(){}var tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jt(){G.call(this,"d")}b(jt,G);function Sn(){G.call(this,"c")}b(Sn,G);var No={},xi=null;function rs(){return xi=xi||new Lt}No.La="serverreachability";function Is(f){G.call(this,No.La,f)}b(Is,G);function Pt(f){let _=rs();Vt(_,new Is(_))}No.STAT_EVENT="statevent";function oa(f,_){G.call(this,No.STAT_EVENT,f),this.stat=_}b(oa,G);function vr(f){let _=rs();Vt(_,new oa(_,f))}No.Ma="timingevent";function Po(f,_){G.call(this,No.Ma,f),this.size=_}b(Po,G);function Vi(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},_)}function er(){this.g=!0}er.prototype.xa=function(){this.g=!1};function di(f,_,E,B,le,Ee){f.info(function(){if(f.g)if(Ee)for(var Ze="",Tn=Ee.split("&"),Or=0;Or<Tn.length;Or++){var Wt=Tn[Or].split("=");if(1<Wt.length){var hr=Wt[0];Wt=Wt[1];var Fr=hr.split("_");Ze=2<=Fr.length&&Fr[1]=="type"?Ze+(hr+"="+Wt+"&"):Ze+(hr+"=redacted&")}}else Ze=null;else Ze=Ee;return"XMLHTTP REQ ("+B+") [attempt "+le+"]: "+_+`
`+E+`
`+Ze})}function Ci(f,_,E,B,le,Ee,Ze){f.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+le+"]: "+_+`
`+E+`
`+Ee+" "+Ze})}function is(f,_,E,B){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ss(f,E)+(B?" "+B:"")})}function Cc(f,_){f.info(function(){return"TIMEOUT: "+_})}er.prototype.info=function(){};function Ss(f,_){if(!f.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var B=E[f];if(!(2>B.length)){var le=B[1];if(Array.isArray(le)&&!(1>le.length)){var Ee=le[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(var Ze=1;Ze<le.length;Ze++)le[Ze]=""}}}}return Xn(E)}catch{return _}}var ko={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},os={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ro;function Gi(){}b(Gi,Bt),Gi.prototype.g=function(){return new XMLHttpRequest},Gi.prototype.i=function(){return{}},Ro=new Gi;function fo(f,_,E,B){this.j=f,this.i=_,this.l=E,this.R=B||1,this.U=new yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new As}function As(){this.i=null,this.g="",this.h=!1}var Ec={},Ic={};function Sc(f,_,E){f.L=1,f.v=Dl(ss(_)),f.m=E,f.P=!0,Il(f,null)}function Il(f,_){f.F=Date.now(),Sl(f),f.A=ss(f.v);var E=f.A,B=f.R;Array.isArray(B)||(B=[String(B)]),Gt(E.i,"t",B),f.C=0,E=f.j.J,f.h=new As,f.g=Rr(f.j,E?_:null,!f.m),0<f.O&&(f.M=new Pr(m(f.Y,f,f.g),f.O)),_=f.U,E=f.g,B=f.ca;var le="readystatechange";Array.isArray(le)||(le&&(an[0]=le.toString()),le=an);for(var Ee=0;Ee<le.length;Ee++){var Ze=Ke(E,le[Ee],B||_.handleEvent,!1,_.h||_);if(!Ze)break;_.g[Ze.key]=Ze}_=f.H?M(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),Pt(),di(f.i,f.u,f.A,f.l,f.R,f.m)}fo.prototype.ca=function(f){f=f.target;let _=this.M;_&&as(f)==3?_.j():this.Y(f)},fo.prototype.Y=function(f){try{if(f==this.g)e:{let Fr=as(this.g);var _=this.g.Ba();let Ba=this.g.Z();if(!(3>Fr)&&(Fr!=3||this.g&&(this.h.h||this.g.oa()||vf(this.g)))){this.J||Fr!=4||_==7||(_==8||0>=Ba?Pt(3):Pt(2)),ho(this);var E=this.g.Z();this.X=E;t:if(np(this)){var B=vf(this.g);f="";var le=B.length,Ee=as(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sa(this),Oa(this);var Ze="";break t}this.h.i=new a.TextDecoder}for(_=0;_<le;_++)this.h.h=!0,f+=this.h.i.decode(B[_],{stream:!(Ee&&_==le-1)});B.length=0,this.h.g+=f,this.C=0,Ze=this.h.g}else Ze=this.g.oa();if(this.o=E==200,Ci(this.i,this.u,this.A,this.l,this.R,Fr,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Tn,Or=this.g;if((Tn=Or.g?Or.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Tn)){var Wt=Tn;break t}}Wt=null}if(E=Wt)is(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Al(this,E);else{this.o=!1,this.s=3,vr(12),sa(this),Oa(this);break e}}if(this.P){E=!0;let Er;for(;!this.J&&this.C<Ze.length;)if(Er=lf(this,Ze),Er==Ic){Fr==4&&(this.s=4,vr(14),E=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(Er==Ec){this.s=4,vr(15),is(this.i,this.l,Ze,"[Invalid Chunk]"),E=!1;break}else is(this.i,this.l,Er,null),Al(this,Er);if(np(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fr!=4||Ze.length!=0||this.h.h||(this.s=1,vr(16),E=!1),this.o=this.o&&E,!E)is(this.i,this.l,Ze,"[Invalid Chunked Response]"),sa(this),Oa(this);else if(0<Ze.length&&!this.W){this.W=!0;var hr=this.j;hr.g==this&&hr.ba&&!hr.M&&(hr.j.info("Great, no buffering proxy detected. Bytes received: "+Ze.length),_t(hr),hr.M=!0,vr(11))}}else is(this.i,this.l,Ze,null),Al(this,Ze);Fr==4&&sa(this),this.o&&!this.J&&(Fr==4?wn(this.j,this):(this.o=!1,Sl(this)))}else Va(this.g),E==400&&0<Ze.indexOf("Unknown SID")?(this.s=3,vr(12)):(this.s=0,vr(13)),sa(this),Oa(this)}}}catch{}finally{}};function np(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function lf(f,_){var E=f.C,B=_.indexOf(`
`,E);return B==-1?Ic:(E=Number(_.substring(E,B)),isNaN(E)?Ec:(B+=1,B+E>_.length?Ic:(_=_.slice(B,B+E),f.C=B+E,_)))}fo.prototype.cancel=function(){this.J=!0,sa(this)};function Sl(f){f.S=Date.now()+f.I,uf(f,f.I)}function uf(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Vi(m(f.ba,f),_)}function ho(f){f.B&&(a.clearTimeout(f.B),f.B=null)}fo.prototype.ba=function(){this.B=null;let f=Date.now();0<=f-this.S?(Cc(this.i,this.A),this.L!=2&&(Pt(),vr(17)),sa(this),this.s=2,Oa(this)):uf(this,this.S-f)};function Oa(f){f.j.G==0||f.J||wn(f.j,f)}function sa(f){ho(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,cn(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Al(f,_){try{var E=f.j;if(E.G!=0&&(E.g==f||Ac(E.h,f))){if(!f.K&&Ac(E.h,f)&&E.G==3){try{var B=E.Da.g.parse(_)}catch{B=null}if(Array.isArray(B)&&B.length==3){var le=B;if(le[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)Kt(E),kl(E);else break e;ht(E),vr(18)}}else E.za=le[1],0<E.za-E.T&&37500>le[2]&&E.F&&E.v==0&&!E.C&&(E.C=Vi(m(E.Za,E),6e3));if(1>=Ds(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else nr(E,11)}else if((f.K||E.g==f)&&Kt(E),!Y(_))for(le=E.Da.g.parse(_),_=0;_<le.length;_++){let Wt=le[_];if(E.T=Wt[0],Wt=Wt[1],E.G==2)if(Wt[0]=="c"){E.K=Wt[1],E.ia=Wt[2];let hr=Wt[3];hr!=null&&(E.la=hr,E.j.info("VER="+E.la));let Fr=Wt[4];Fr!=null&&(E.Aa=Fr,E.j.info("SVER="+E.Aa));let Ba=Wt[5];Ba!=null&&typeof Ba=="number"&&0<Ba&&(B=1.5*Ba,E.L=B,E.j.info("backChannelRequestTimeoutMs_="+B)),B=E;let Er=f.g;if(Er){let fa=Er.g?Er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fa){var Ee=B.h;Ee.g||fa.indexOf("spdy")==-1&&fa.indexOf("quic")==-1&&fa.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(hf(Ee,Ee.h),Ee.h=null))}if(B.D){let Rl=Er.g?Er.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(B.ya=Rl,Vn(B.I,B.D,Rl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),B=E;var Ze=f;if(B.qa=zr(B,B.J?B.ia:null,B.W),Ze.K){kr(B.h,Ze);var Tn=Ze,Or=B.L;Or&&(Tn.I=Or),Tn.B&&(ho(Tn),Sl(Tn)),B.g=Ze}else ze(B);0<E.i.length&&k(E)}else Wt[0]!="stop"&&Wt[0]!="close"||nr(E,7);else E.G==3&&(Wt[0]=="stop"||Wt[0]=="close"?Wt[0]=="stop"?nr(E,7):ja(E):Wt[0]!="noop"&&E.l&&E.l.ta(Wt),E.v=0)}}Pt(4)}catch{}}var rp=class{constructor(f,_){this.g=f,this.map=_}};function df(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ff(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ds(f){return f.h?1:f.g?f.g.size:0}function Ac(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function hf(f,_){f.g?f.g.add(_):f.h=_}function kr(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}df.prototype.cancel=function(){if(this.i=pf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function pf(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(let E of f.g.values())_=_.concat(E.D);return _}return I(f.i)}function aa(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var _=[],E=f.length,B=0;B<E;B++)_.push(f[B]);return _}_=[],E=0;for(B in f)_[E++]=f[B];return _}function Eu(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var _=[];f=f.length;for(var E=0;E<f;E++)_.push(E);return _}_=[],E=0;for(let B in f)_[E++]=B;return _}}}function gf(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var E=Eu(f),B=aa(f),le=B.length,Ee=0;Ee<le;Ee++)_.call(void 0,B[Ee],E&&E[Ee],f)}var Oo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yr(f,_){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var B=f[E].indexOf("="),le=null;if(0<=B){var Ee=f[E].substring(0,B);le=f[E].substring(B+1)}else Ee=f[E];_(Ee,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Wi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Wi){this.h=f.h,Iu(this,f.j),this.o=f.o,this.g=f.g,Su(this,f.s),this.l=f.l;var _=f.i,E=new Tl;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Ts(this,E),this.m=f.m}else f&&(_=String(f).match(Oo))?(this.h=!1,Iu(this,_[1]||"",!0),this.o=ca(_[2]||""),this.g=ca(_[3]||"",!0),Su(this,_[4]),this.l=ca(_[5]||"",!0),Ts(this,_[6]||"",!0),this.m=ca(_[7]||"")):(this.h=!1,this.i=new Tl(null,this.h))}Wi.prototype.toString=function(){var f=[],_=this.j;_&&f.push(Ms(_,ip,!0),":");var E=this.g;return(E||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Ms(_,ip,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(Ms(E,E.charAt(0)=="/"?mf:c0,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",Ms(E,Ns)),f.join("")};function ss(f){return new Wi(f)}function Iu(f,_,E){f.j=E?ca(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Su(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function Ts(f,_,E){_ instanceof Tl?(f.i=_,l0(f.i,f.h)):(E||(_=Ms(_,op)),f.i=new Tl(_,f.h))}function Vn(f,_,E){f.i.set(_,E)}function Dl(f){return Vn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ca(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ms(f,_,E){return typeof f=="string"?(f=encodeURI(f).replace(_,a0),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function a0(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ip=/[#\/\?@]/g,c0=/[#\?:]/g,mf=/[#\?]/g,op=/[#\?@]/g,Ns=/#/g;function Tl(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function po(f){f.g||(f.g=new Map,f.h=0,f.i&&Yr(f.i,function(_,E){f.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Tl.prototype,n.add=function(f,_){po(this),this.i=null,f=Dc(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(_),this.h+=1,this};function Au(f,_){po(f),_=Dc(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function sp(f,_){return po(f),_=Dc(f,_),f.g.has(_)}n.forEach=function(f,_){po(this),this.g.forEach(function(E,B){E.forEach(function(le){f.call(_,le,B,this)},this)},this)},n.na=function(){po(this);let f=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let B=0;B<_.length;B++){let le=f[B];for(let Ee=0;Ee<le.length;Ee++)E.push(_[B])}return E},n.V=function(f){po(this);let _=[];if(typeof f=="string")sp(this,f)&&(_=_.concat(this.g.get(Dc(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)_=_.concat(f[E])}return _},n.set=function(f,_){return po(this),this.i=null,f=Dc(this,f),sp(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function Gt(f,_,E){Au(f,_),0<E.length&&(f.i=null,f.g.set(Dc(f,_),I(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var B=_[E];let Ee=encodeURIComponent(String(B)),Ze=this.V(B);for(B=0;B<Ze.length;B++){var le=Ee;Ze[B]!==""&&(le+="="+encodeURIComponent(String(Ze[B]))),f.push(le)}}return this.i=f.join("&")};function Dc(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function l0(f,_){_&&!f.j&&(po(f),f.i=null,f.g.forEach(function(E,B){var le=B.toLowerCase();B!=le&&(Au(this,B),Gt(this,le,E))},f)),f.j=_}function u0(f,_){let E=new er;if(a.Image){let B=new Image;B.onload=g(ji,E,"TestLoadImage: loaded",!0,_,B),B.onerror=g(ji,E,"TestLoadImage: error",!1,_,B),B.onabort=g(ji,E,"TestLoadImage: abort",!1,_,B),B.ontimeout=g(ji,E,"TestLoadImage: timeout",!1,_,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=f}else _(!1)}function Fa(f,_){let E=new er,B=new AbortController,le=setTimeout(()=>{B.abort(),ji(E,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:B.signal}).then(Ee=>{clearTimeout(le),Ee.ok?ji(E,"TestPingServer: ok",!0,_):ji(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(le),ji(E,"TestPingServer: error",!1,_)})}function ji(f,_,E,B,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),B(E)}catch{}}function d0(){this.g=new Jn}function f0(f,_,E){let B=E||"";try{gf(f,function(le,Ee){let Ze=le;l(le)&&(Ze=Xn(le)),_.push(B+Ee+"="+encodeURIComponent(Ze))})}catch(le){throw _.push(B+"type="+encodeURIComponent("_badmap")),le}}function la(f){this.l=f.Ub||null,this.j=f.eb||!1}b(la,Bt),la.prototype.g=function(){return new Tc(this.l,this.j)},la.prototype.i=(function(f){return function(){return f}})({});function Tc(f,_){Lt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Tc,Lt),n=Tc.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,Fo(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ml(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Ml(this):Fo(this),this.readyState==3&&Mc(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Ml(this))},n.Qa=function(f){this.g&&(this.response=f,Ml(this))},n.ga=function(){this.g&&Ml(this)};function Ml(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Fo(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=_.next();return f.join(`\r
`)};function Fo(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ap(f){let _="";return he(f,function(E,B){_+=B,_+=":",_+=E,_+=`\r
`}),_}function Nl(f,_,E){e:{for(B in E){var B=!1;break e}B=!0}B||(E=ap(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):Vn(f,_,E))}function tr(f){Lt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(tr,Lt);var cp=/^https?$/i,La=["POST","PUT"];n=tr.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,E,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ro.g(),this.v=this.o?Zt(this.o):Zt(Ro),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(Ee){Du(this,Ee);return}if(f=E||"",E=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var le in B)E.set(le,B[le]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(let Ee of B.keys())E.set(Ee,B.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(E.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),le=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(La,_,void 0))||B||le||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[Ee,Ze]of E)this.g.setRequestHeader(Ee,Ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mu(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ee){Du(this,Ee)}};function Du(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,Pl(f),ua(f)}function Pl(f){f.A||(f.A=!0,Vt(f,"complete"),Vt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Vt(this,"complete"),Vt(this,"abort"),ua(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ua(this,!0)),tr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tu(this):this.bb())},n.bb=function(){Tu(this)};function Tu(f){if(f.h&&typeof s<"u"&&(!f.v[1]||as(f)!=4||f.Z()!=2)){if(f.u&&as(f)==4)Xt(f.Ea,0,f);else if(Vt(f,"readystatechange"),as(f)==4){f.h=!1;try{let Ze=f.Z();e:switch(Ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var B;if(B=Ze===0){var le=String(f.D).match(Oo)[1]||null;!le&&a.self&&a.self.location&&(le=a.self.location.protocol.slice(0,-1)),B=!cp.test(le?le.toLowerCase():"")}E=B}if(E)Vt(f,"complete"),Vt(f,"success");else{f.m=6;try{var Ee=2<as(f)?f.g.statusText:""}catch{Ee=""}f.l=Ee+" ["+f.Z()+"]",Pl(f)}}finally{ua(f)}}}}function ua(f,_){if(f.g){Mu(f);let E=f.g,B=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Vt(f,"ready");try{E.onreadystatechange=B}catch{}}}function Mu(f){f.I&&(a.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function as(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<as(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),kt(_)}};function vf(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Va(f){let _={};f=(f.g&&2<=as(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<f.length;B++){if(Y(f[B]))continue;var E=x(f[B]);let le=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();let Ee=_[le]||[];_[le]=Ee,Ee.push(E)}z(_,function(B){return B.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lo(f,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||_}function yf(f){this.Aa=0,this.i=[],this.j=new er,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lo("baseRetryDelayMs",5e3,f),this.cb=Lo("retryDelaySeedMs",1e4,f),this.Wa=Lo("forwardChannelMaxRetries",2,f),this.wa=Lo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new df(f&&f.concurrentRequestLimit),this.Da=new d0,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=yf.prototype,n.la=8,n.G=1,n.connect=function(f,_,E,B){vr(0),this.W=f,this.H=_||{},E&&B!==void 0&&(this.H.OSID=E,this.H.OAID=B),this.F=this.X,this.I=zr(this,null,this.W),k(this)};function ja(f){if(v(f),f.G==3){var _=f.U++,E=ss(f.I);if(Vn(E,"SID",f.K),Vn(E,"RID",_),Vn(E,"TYPE","terminate"),ue(f,E),_=new fo(f,f.j,_),_.L=2,_.v=Dl(ss(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&(new Image().src=_.v,E=!0),E||(_.g=Rr(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Sl(_)}qn(f)}function kl(f){f.g&&(_t(f),f.g.cancel(),f.g=null)}function v(f){kl(f),f.u&&(a.clearTimeout(f.u),f.u=null),Kt(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function k(f){if(!ff(f.h)&&!f.s){f.s=!0;var _=f.Ga;Ce||Be(),fe||(Ce(),fe=!0),Ae.add(_,f),f.B=0}}function Q(f,_){return Ds(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Vi(m(f.Ga,f,_),fr(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;let le=new fo(this,this.j,f),Ee=this.o;if(this.S&&(Ee?(Ee=M(Ee),V(Ee,this.S)):Ee=this.S),this.m!==null||this.O||(le.H=Ee,Ee=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var B=this.i[E];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(_+=B,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=ke(this,le,_),E=ss(this.I),Vn(E,"RID",f),Vn(E,"CVER",22),this.D&&Vn(E,"X-HTTP-Session-Id",this.D),ue(this,E),Ee&&(this.O?_="headers="+encodeURIComponent(String(ap(Ee)))+"&"+_:this.m&&Nl(E,this.m,Ee)),hf(this.h,le),this.Ua&&Vn(E,"TYPE","init"),this.P?(Vn(E,"$req",_),Vn(E,"SID","null"),le.T=!0,Sc(le,E,null)):Sc(le,E,_),this.G=2}}else this.G==3&&(f?re(this,f):this.i.length==0||ff(this.h)||re(this))};function re(f,_){var E;_?E=_.l:E=f.U++;let B=ss(f.I);Vn(B,"SID",f.K),Vn(B,"RID",E),Vn(B,"AID",f.T),ue(f,B),f.m&&f.o&&Nl(B,f.m,f.o),E=new fo(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),_&&(f.i=_.D.concat(f.i)),_=ke(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),hf(f.h,E),Sc(E,B,_)}function ue(f,_){f.H&&he(f.H,function(E,B){Vn(_,B,E)}),f.l&&gf({},function(E,B){Vn(_,B,E)})}function ke(f,_,E){E=Math.min(f.i.length,E);var B=f.l?m(f.l.Na,f.l,f):null;e:{var le=f.i;let Ee=-1;for(;;){let Ze=["count="+E];Ee==-1?0<E?(Ee=le[0].g,Ze.push("ofs="+Ee)):Ee=0:Ze.push("ofs="+Ee);let Tn=!0;for(let Or=0;Or<E;Or++){let Wt=le[Or].g,hr=le[Or].map;if(Wt-=Ee,0>Wt)Ee=Math.max(0,le[Or].g-100),Tn=!1;else try{f0(hr,Ze,"req"+Wt+"_")}catch{B&&B(hr)}}if(Tn){B=Ze.join("&");break e}}}return f=f.i.splice(0,E),_.D=f,B}function ze(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;Ce||Be(),fe||(Ce(),fe=!0),Ae.add(_,f),f.v=0}}function ht(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Vi(m(f.Fa,f),fr(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,qt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Vi(m(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vr(10),kl(this),qt(this))};function _t(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function qt(f){f.g=new fo(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=ss(f.qa);Vn(_,"RID","rpc"),Vn(_,"SID",f.K),Vn(_,"AID",f.T),Vn(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&Vn(_,"TO",f.ja),Vn(_,"TYPE","xmlhttp"),ue(f,_),f.m&&f.o&&Nl(_,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=Dl(ss(_)),E.m=null,E.P=!0,Il(E,f)}n.Za=function(){this.C!=null&&(this.C=null,kl(this),ht(this),vr(19))};function Kt(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function wn(f,_){var E=null;if(f.g==_){Kt(f),_t(f),f.g=null;var B=2}else if(Ac(f.h,_))E=_.D,kr(f.h,_),B=1;else return;if(f.G!=0){if(_.o)if(B==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var le=f.B;B=rs(),Vt(B,new Po(B,E)),k(f)}else ze(f);else if(le=_.s,le==3||le==0&&0<_.X||!(B==1&&Q(f,_)||B==2&&ht(f)))switch(E&&0<E.length&&(_=f.h,_.i=_.i.concat(E)),le){case 1:nr(f,5);break;case 4:nr(f,10);break;case 3:nr(f,6);break;default:nr(f,2)}}}function fr(f,_){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*_}function nr(f,_){if(f.j.info("Error code "+_),_==2){var E=m(f.fb,f),B=f.Xa;let le=!B;B=new Wi(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Iu(B,"https"),Dl(B),le?u0(B.toString(),E):Fa(B.toString(),E)}else vr(2);f.G=0,f.l&&f.l.sa(_),qn(f),v(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),vr(2)):(this.j.info("Failed to ping google.com"),vr(1))};function qn(f){if(f.G=0,f.ka=[],f.l){let _=pf(f.h);(_.length!=0||f.i.length!=0)&&(T(f.ka,_),T(f.ka,f.i),f.h.i.length=0,I(f.i),f.i.length=0),f.l.ra()}}function zr(f,_,E){var B=E instanceof Wi?ss(E):new Wi(E);if(B.g!="")_&&(B.g=_+"."+B.g),Su(B,B.s);else{var le=a.location;B=le.protocol,_=_?_+"."+le.hostname:le.hostname,le=+le.port;var Ee=new Wi(null);B&&Iu(Ee,B),_&&(Ee.g=_),le&&Su(Ee,le),E&&(Ee.l=E),B=Ee}return E=f.D,_=f.ya,E&&_&&Vn(B,E,_),Vn(B,"VER",f.la),ue(f,B),B}function Rr(f,_,E){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new tr(new la({eb:E})):new tr(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fi(){}n=fi.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function cs(){}cs.prototype.g=function(f,_){return new yr(f,_)};function yr(f,_){Lt.call(this),this.g=new yf(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!Y(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!Y(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Ps(this)}b(yr,Lt),yr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){ja(this.g)},yr.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=Xn(f),f=E);_.i.push(new rp(_.Ya++,f)),_.G==3&&k(_)},yr.prototype.N=function(){this.g.l=null,delete this.j,ja(this.g),delete this.g,yr.aa.N.call(this)};function da(f){jt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(let E in _){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}b(da,jt);function Nu(){Sn.call(this),this.status=1}b(Nu,Sn);function Ps(f){this.g=f}b(Ps,fi),Ps.prototype.ua=function(){Vt(this.g,"a")},Ps.prototype.ta=function(f){Vt(this.g,new da(f))},Ps.prototype.sa=function(f){Vt(this.g,new Nu)},Ps.prototype.ra=function(){Vt(this.g,"b")},cs.prototype.createWebChannel=cs.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,iT=au.createWebChannelTransport=function(){return new cs},rT=au.getStatEventTarget=function(){return rs()},nT=au.Event=No,N2=au.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,uy=au.ErrorCode=ko,os.COMPLETE="complete",tT=au.EventType=os,sr.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,Mg=au.WebChannel=sr,pre=au.FetchXmlHttpFactory=la,tr.prototype.listenOnce=tr.prototype.L,tr.prototype.getLastError=tr.prototype.Ka,tr.prototype.getLastErrorCode=tr.prototype.Ba,tr.prototype.getStatus=tr.prototype.Z,tr.prototype.getResponseJson=tr.prototype.Oa,tr.prototype.getResponseText=tr.prototype.oa,tr.prototype.send=tr.prototype.ea,tr.prototype.setWithCredentials=tr.prototype.Ha,eT=au.XhrIo=tr}).apply(typeof M2<"u"?M2:typeof self<"u"?self:typeof window<"u"?window:{});var MV="@firebase/firestore",NV="4.8.0";var yi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");var gm="11.10.0";var Nd=new mp("@firebase/firestore");function Lg(){return Nd.logLevel}function vN(n){Nd.setLogLevel(n)}function $e(n,...e){if(Nd.logLevel<=Rc.DEBUG){let t=e.map(yN);Nd.debug(`Firestore (${gm}): ${n}`,...t)}}function ii(n,...e){if(Nd.logLevel<=Rc.ERROR){let t=e.map(yN);Nd.error(`Firestore (${gm}): ${n}`,...t)}}function bs(n,...e){if(Nd.logLevel<=Rc.WARN){let t=e.map(yN);Nd.warn(`Firestore (${gm}): ${n}`,...t)}}function yN(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function dt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,G7(n,r,t)}function G7(n,e,t){let r=`FIRESTORE (${gm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ii(r),new Error(r)}function wt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||G7(e,i,r)}function W7(n,e){n||dt(57014,e)}function it(n,e){return n}var Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},je=class extends $u{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Fi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var $2=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}},hT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},pT=class{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Fi,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>ee(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Fi)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string",31837,{l:r}),new $2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new yi(e)}},gT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},mT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},G2=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,x1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wt(this.o===void 0,3512);let r=o=>{o.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,$e("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new G2(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new G2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function gre(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function _N(){return new TextEncoder}var Iy=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=gre(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function $t(n,e){return n<e?-1:n>e?1:0}function yT(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return $t(r,i);{let o=_N(),s=mre(o.encode(PV(n,t)),o.encode(PV(e,t)));return s!==0?s:$t(r,i)}}t+=r>65535?2:1}return $t(n.length,e.length)}function PV(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function mre(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return $t(n[t],e[t]);return $t(n.length,e.length)}function Gg(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function K7(n){return n+"\0"}var kV="__name__",W2=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&dt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&dt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return $t(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):yT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return su.fromString(e.substring(4,e.length-2))}},En=class n extends W2{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new je(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vre=/^[_a-zA-Z][_a-zA-Z0-9]*$/,oi=class n extends W2{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vre.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kV}static keyField(){return new n([kV])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new je(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new je(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new je(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new je(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var nt=class n{constructor(e){this.path=e}static fromPath(e){return new n(En.fromString(e))}static fromName(e){return new n(En.fromString(e).popFirst(5))}static empty(){return new n(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&En.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new En(e.slice()))}};function wN(n,e,t){if(!t)throw new je(Ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bN(n,e,t,r){if(e===!0&&r===!0)throw new je(Ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RV(n){if(!nt.isDocumentKey(n))throw new je(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OV(n){if(nt.isDocumentKey(n))throw new je(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Y7(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wx(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":dt(12329,{type:typeof n})}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Wx(n);throw new je(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Q7(n,e){if(e<=0)throw new je(Ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function _i(n,e){let t={typeString:n};return e&&(t.value=e),t}function Qy(n,e){if(!Y7(n))throw new je(Ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new je(Ie.INVALID_ARGUMENT,t);return!0}var FV=-62135596800,LV=1e6,gr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*LV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<FV)throw new je(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LV}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qy(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-FV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};gr._jsonSchemaVersion="firestore/timestamp/1.0",gr._jsonSchema={type:_i("string",gr._jsonSchemaVersion),seconds:_i("number"),nanoseconds:_i("number")};var Nt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new gr(0,0))}static max(){return new n(new gr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Wg=-1,Kg=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function _T(n){return n.fields.find(e=>e.kind===2)}function ch(n){return n.fields.filter(e=>e.kind!==2)}Kg.UNKNOWN_ID=-1;var qg=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Sy=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Na.min())}};function Z7(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(r===1e9?new gr(t+1,0):new gr(t,r));return new Na(i,nt.empty(),e)}function X7(n){return new Na(n.readTime,n.key,Wg)}var Na=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Nt.min(),nt.empty(),Wg)}static max(){return new n(Nt.max(),nt.empty(),Wg)}};function xN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=nt.comparator(n.documentKey,e.documentKey),t!==0?t:$t(n.largestBatchId,e.largestBatchId))}var J7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",K2=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zd(n){return ee(this,null,function*(){if(n.code!==Ie.FAILED_PRECONDITION||n.message!==J7)throw n;$e("LocalStore","Unexpectedly lost primary lease")})}var we=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Qs="SimpleDb",Y2=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new mh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Fi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new mh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=CN(r.target.error);this.S.reject(new mh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($e(Qs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new bT(t)}},Pd=class n{static delete(e){return $e(Qs,"Removing database:",e),uh(ZE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!hp())return!1;if(n.F())return!0;let e=S0(),t=n.M(e),r=0<t&&t<10,i=ej(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(S0())===12.2&&ii("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return ee(this,null,function*(){return this.db||($e(Qs,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new mh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new je(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new je(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new mh(e,s))},i.onupgradeneeded=o=>{$e(Qs,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{$e(Qs,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(bs('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,i){return ee(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=Y2.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),we.reject(l))).toPromise();return c.catch(()=>{}),yield a.D,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if($e(Qs,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function ej(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var wT=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return uh(this.$.delete())}},mh=class extends je{constructor(e,t){super(Ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function qd(n){return n.name==="IndexedDbTransactionError"}var bT=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?($e(Qs,"PUT",this.store.name,e,t),r=this.store.put(t,e)):($e(Qs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uh(r)}add(e){return $e(Qs,"ADD",this.store.name,e,e),uh(this.store.add(e))}get(e){return uh(this.store.get(e)).next(t=>(t===void 0&&(t=null),$e(Qs,"GET",this.store.name,e,t),t))}delete(e){return $e(Qs,"DELETE",this.store.name,e),uh(this.store.delete(e))}count(){return $e(Qs,"COUNT",this.store.name),uh(this.store.count())}j(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new we((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,c)=>{s.push(c)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new we((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,t){$e(Qs,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Z=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}ee(e){let t=this.cursor({});return new we((r,i)=>{t.onerror=o=>{let s=CN(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new we((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new wT(a),l=t(a.primaryKey,a.value,c);if(l instanceof we){let u=l.catch(h=>(c.done(),we.reject(h)));r.push(u)}c.isDone?i():c.W===null?a.continue():a.continue(c.W)}}).next(()=>we.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function uh(n){return new we((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=CN(r.target.error);t(i)}})}var VV=!1;function CN(n){let e=Pd.M(S0());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return VV||(VV=!0,setTimeout(()=>{throw r},0)),r}}return n}var vy="IndexBackfiller",xT=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){$e(vy,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>ee(this,null,function*(){this.task=null;try{let t=yield this.te.re();$e(vy,`Documents written: ${t}`)}catch(t){qd(t)?$e(vy,"Ignoring IndexedDB error during index backfill: ",t):yield zd(t)}yield this.ne(6e4)}))}},CT=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return ee(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let r=new Set,i=t,o=!0;return we.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return $e(vy,`Processing collection: ${s}`),this.se(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(a=>($e(vy,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}oe(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=X7(o);xN(s,r)>0&&(r=s)}),new Na(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Zs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Dd=-1;function Zy(n){return n==null}function Ay(n){return n===0&&1/n==-1/0}function tj(n){return typeof n=="number"&&Number.isInteger(n)&&!Ay(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Q2="";function Io(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jV(e)),e=yre(n.get(t),e);return jV(e)}function yre(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Q2:t+="";break;default:t+=o}}return t}function jV(n){return n+Q2+""}function il(n){let e=n.length;if(wt(e>=2,64408,{path:n}),e===2)return wt(n.charAt(0)===Q2&&n.charAt(1)==="",56145,{path:n}),En.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Q2,o);switch((s<0||s>t)&&dt(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:dt(61167,{path:n})}o=s+2}return new En(r)}var lh="remoteDocuments",Xy="owner",Ng="owner",Dy="mutationQueues",_re="userId",fc="mutations",BV="batchId",ph="userMutationsIndex",UV=["userId","batchId"];function L2(n,e){return[n,Io(e)]}function nj(n,e,t){return[n,Io(e),t]}var wre={},Yg="documentMutations",Z2="remoteDocumentsV14",bre=["prefixPath","collectionGroup","readTime","documentId"],V2="documentKeyIndex",xre=["prefixPath","collectionGroup","documentId"],rj="collectionGroupIndex",Cre=["collectionGroup","readTime","prefixPath","documentId"],Ty="remoteDocumentGlobal",ET="remoteDocumentGlobalKey",Qg="targets",ij="queryTargetsIndex",Ere=["canonicalId","targetId"],Zg="targetDocuments",Ire=["targetId","path"],EN="documentTargetsIndex",Sre=["path","targetId"],X2="targetGlobalKey",vh="targetGlobal",My="collectionParents",Are=["collectionId","parent"],Xg="clientMetadata",Dre="clientId",Kx="bundles",Tre="bundleId",Yx="namedQueries",Mre="name",IN="indexConfiguration",Nre="indexId",IT="collectionGroupIndex",Pre="collectionGroup",yy="indexState",kre=["indexId","uid"],oj="sequenceNumberIndex",Rre=["uid","sequenceNumber"],_y="indexEntries",Ore=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sj="documentKeyIndex",Fre=["indexId","uid","orderedDocumentKey"],Qx="documentOverlays",Lre=["userId","collectionPath","documentId"],ST="collectionPathOverlayIndex",Vre=["userId","collectionPath","largestBatchId"],aj="collectionGroupOverlayIndex",jre=["userId","collectionGroup","largestBatchId"],SN="globals",Bre="name",cj=[Dy,fc,Yg,lh,Qg,Xy,vh,Zg,Xg,Ty,My,Kx,Yx],Ure=[...cj,Qx],lj=[Dy,fc,Yg,Z2,Qg,Xy,vh,Zg,Xg,Ty,My,Kx,Yx,Qx],uj=lj,AN=[...uj,IN,yy,_y],zre=AN,dj=[...AN,SN],qre=dj;var Ny=class extends K2{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function Li(n,e){let t=it(n);return Pd.N(t.ce,e)}function zV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hd(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fj(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Cr=class n{constructor(e,t){this.comparator=e,this.root=t||sl.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sl.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zg(this.root,e,this.comparator,!1)}getReverseIterator(){return new zg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zg(this.root,e,this.comparator,!0)}},zg=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sl=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw dt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw dt(27949);return e+(this.isRed()?0:1)}};sl.EMPTY=null,sl.RED=!0,sl.BLACK=!1;sl.EMPTY=new class{constructor(){this.size=0}get key(){throw dt(57766)}get value(){throw dt(16141)}get color(){throw dt(16727)}get left(){throw dt(29726)}get right(){throw dt(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new sl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var or=class n{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new J2(this.data.getIterator())}getIteratorFrom(e){return new J2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},J2=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Pg(n){return n.hasNext()?n.getNext():void 0}var Xs=class n{constructor(e){this.fields=e,e.sort(oi.comparator)}static empty(){return new n([])}unionWith(e){let t=new or(oi.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gg(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ex=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function hj(){return typeof atob<"u"}var ai=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ex("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ai.EMPTY_BYTE_STRING=new ai("");var Hre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uu(n){if(wt(!!n,39018),typeof n=="string"){let e=0,t=Hre.exec(n);if(wt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tr(n.seconds),nanos:Tr(n.nanos)}}function Tr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function du(n){return typeof n=="string"?ai.fromBase64String(n):ai.fromUint8Array(n)}var pj="server_timestamp",gj="__type__",mj="__previous_value__",vj="__local_write_time__";function Zx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[gj])===null||t===void 0?void 0:t.stringValue)===pj}function Xx(n){let e=n.mapValue.fields[mj];return Zx(e)?Xx(e):e}function Py(n){let e=uu(n.mapValue.fields[vj].timestampValue);return new gr(e.seconds,e.nanos)}var AT=class{constructor(e,t,r,i,o,s,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},tx="(default)",kd=class n{constructor(e,t){this.projectId=e,this.database=t||tx}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===tx}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var DN="__type__",yj="__max__",Sd={mapValue:{fields:{__type__:{stringValue:yj}}}},TN="__vector__",Jg="value",j2={nullValue:"NULL_VALUE"};function Rd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zx(n)?4:_j(n)?9007199254740991:Jx(n)?10:11:dt(28295,{value:n})}function ul(n,e){if(n===e)return!0;let t=Rd(n);if(t!==Rd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Py(n).isEqual(Py(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=uu(i.timestampValue),a=uu(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return du(i.bytesValue).isEqual(du(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Tr(i.geoPointValue.latitude)===Tr(o.geoPointValue.latitude)&&Tr(i.geoPointValue.longitude)===Tr(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Tr(i.integerValue)===Tr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Tr(i.doubleValue),a=Tr(o.doubleValue);return s===a?Ay(s)===Ay(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Gg(n.arrayValue.values||[],e.arrayValue.values||[],ul);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(zV(s)!==zV(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ul(s[c],a[c])))return!1;return!0})(n,e);default:return dt(52216,{left:n})}}function ky(n,e){return(n.values||[]).find(t=>ul(t,e))!==void 0}function Od(n,e){if(n===e)return 0;let t=Rd(n),r=Rd(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Tr(o.integerValue||o.doubleValue),c=Tr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return qV(n.timestampValue,e.timestampValue);case 4:return qV(Py(n),Py(e));case 5:return yT(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=du(o),c=du(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=$t(a[l],c[l]);if(u!==0)return u}return $t(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=$t(Tr(o.latitude),Tr(s.latitude));return a!==0?a:$t(Tr(o.longitude),Tr(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return HV(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,l,u;let h=o.fields||{},m=s.fields||{},g=(a=h[Jg])===null||a===void 0?void 0:a.arrayValue,b=(c=m[Jg])===null||c===void 0?void 0:c.arrayValue,I=$t(((l=g?.values)===null||l===void 0?void 0:l.length)||0,((u=b?.values)===null||u===void 0?void 0:u.length)||0);return I!==0?I:HV(g,b)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Sd.mapValue&&s===Sd.mapValue)return 0;if(o===Sd.mapValue)return 1;if(s===Sd.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){let m=yT(c[h],u[h]);if(m!==0)return m;let g=Od(a[c[h]],l[u[h]]);if(g!==0)return g}return $t(c.length,u.length)})(n.mapValue,e.mapValue);default:throw dt(23264,{le:t})}}function qV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $t(n,e);let t=uu(n),r=uu(e),i=$t(t.seconds,r.seconds);return i!==0?i:$t(t.nanos,r.nanos)}function HV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Od(t[i],r[i]);if(o)return o}return $t(t.length,r.length)}function em(n){return DT(n)}function DT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=uu(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return du(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return nt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=DT(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${DT(t.fields[s])}`;return i+"}"})(n.mapValue):dt(61005,{value:n})}function B2(n){switch(Rd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Xx(n);return e?16+B2(e):16;case 5:return 2*n.stringValue.length;case 6:return du(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+B2(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Hd(r.fields,(o,s)=>{i+=o.length+B2(s)}),i})(n.mapValue);default:throw dt(13486,{value:n})}}function yh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function TT(n){return!!n&&"integerValue"in n}function Ry(n){return!!n&&"arrayValue"in n}function $V(n){return!!n&&"nullValue"in n}function GV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function U2(n){return!!n&&"mapValue"in n}function Jx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[DN])===null||t===void 0?void 0:t.stringValue)===TN}function wy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Hd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wy(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _j(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===yj}var wj={mapValue:{fields:{[DN]:{stringValue:TN},[Jg]:{arrayValue:{}}}}};function $re(n){return"nullValue"in n?j2:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yh(kd.empty(),nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Jx(n)?wj:{mapValue:{}}:dt(35942,{value:n})}function Gre(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yh(kd.empty(),nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?wj:"mapValue"in n?Jx(n)?{mapValue:{}}:Sd:dt(61959,{value:n})}function WV(n,e){let t=Od(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function KV(n,e){let t=Od(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Eo=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!U2(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wy(t)}setAll(e){let t=oi.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=wy(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());U2(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ul(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];U2(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Hd(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(wy(this.value))}};function bj(n){let e=[];return Hd(n.fields,(t,r)=>{let i=new oi([t]);if(U2(r)){let o=bj(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Xs(e)}var wi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Nt.min(),Nt.min(),Nt.min(),Eo.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Nt.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Nt.min(),Nt.min(),Eo.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Nt.min(),Nt.min(),Eo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Eo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Eo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var dl=class{constructor(e,t){this.position=e,this.inclusive=t}};function YV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=nt.comparator(nt.fromName(s.referenceValue),t.key):r=Od(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function QV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ul(n.position[t],e.position[t]))return!1;return!0}var _h=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Wre(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var nx=class{},xn=class n extends nx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new PT(e,t,r):t==="array-contains"?new OT(e,r):t==="in"?new rx(e,r):t==="not-in"?new FT(e,r):t==="array-contains-any"?new LT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new kT(e,r):new RT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Od(t,this.value)):t!==null&&Rd(this.value)===Rd(t)&&this.matchesComparison(Od(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Qn=class n extends nx{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return tm(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function tm(n){return n.op==="and"}function MT(n){return n.op==="or"}function MN(n){return xj(n)&&tm(n)}function xj(n){for(let e of n.filters)if(e instanceof Qn)return!1;return!0}function NT(n){if(n instanceof xn)return n.field.canonicalString()+n.op.toString()+em(n.value);if(MN(n))return n.filters.map(e=>NT(e)).join(",");{let e=n.filters.map(t=>NT(t)).join(",");return`${n.op}(${e})`}}function Cj(n,e){return n instanceof xn?(function(r,i){return i instanceof xn&&r.op===i.op&&r.field.isEqual(i.field)&&ul(r.value,i.value)})(n,e):n instanceof Qn?(function(r,i){return i instanceof Qn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Cj(s,i.filters[a]),!0):!1})(n,e):void dt(19439)}function Ej(n,e){let t=n.filters.concat(e);return Qn.create(t,n.op)}function Ij(n){return n instanceof xn?(function(t){return`${t.field.canonicalString()} ${t.op} ${em(t.value)}`})(n):n instanceof Qn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ij).join(" ,")+"}"})(n):"Filter"}var PT=class extends xn{constructor(e,t,r){super(e,t,r),this.key=nt.fromName(r.referenceValue)}matches(e){let t=nt.comparator(e.key,this.key);return this.matchesComparison(t)}},kT=class extends xn{constructor(e,t){super(e,"in",t),this.keys=Sj("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},RT=class extends xn{constructor(e,t){super(e,"not-in",t),this.keys=Sj("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Sj(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>nt.fromName(r.referenceValue))}var OT=class extends xn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ry(t)&&ky(t.arrayValue,this.value)}},rx=class extends xn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ky(this.value.arrayValue,t)}},FT=class extends xn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ky(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ky(this.value.arrayValue,t)}},LT=class extends xn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ry(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ky(this.value.arrayValue,r))}};var VT=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function jT(n,e=null,t=[],r=[],i=null,o=null,s=null){return new VT(n,e,t,r,i,o,s)}function wh(n){let e=it(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>NT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Zy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>em(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>em(r)).join(",")),e.Pe=t}return e.Pe}function Jy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Wre(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Cj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QV(n.startAt,e.startAt)&&QV(n.endAt,e.endAt)}function ix(n){return nt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ox(n,e){return n.filters.filter(t=>t instanceof xn&&t.field.isEqual(e))}function ZV(n,e,t){let r=j2,i=!0;for(let o of ox(n,e)){let s=j2,a=!0;switch(o.op){case"<":case"<=":s=$re(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=j2}WV({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];WV({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function XV(n,e,t){let r=Sd,i=!0;for(let o of ox(n,e)){let s=Sd,a=!0;switch(o.op){case">=":case">":s=Gre(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Sd}KV({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];KV({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var hc=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Aj(n,e,t,r,i,o,s,a){return new hc(n,e,t,r,i,o,s,a)}function mm(n){return new hc(n)}function JV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NN(n){return n.collectionGroup!==null}function Hg(n){let e=it(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new or(oi.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new _h(o,r))}),t.has(oi.keyField().canonicalString())||e.Te.push(new _h(oi.keyField(),r))}return e.Te}function Zo(n){let e=it(n);return e.Ie||(e.Ie=Kre(e,Hg(n))),e.Ie}function Kre(n,e){if(n.limitType==="F")return jT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new _h(i.field,o)});let t=n.endAt?new dl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new dl(n.startAt.position,n.startAt.inclusive):null;return jT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function BT(n,e){let t=n.filters.concat([e]);return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sx(n,e,t){return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function e_(n,e){return Jy(Zo(n),Zo(e))&&n.limitType===e.limitType}function Dj(n){return`${wh(Zo(n))}|lt:${n.limitType}`}function Vg(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Ij(i)).join(", ")}]`),Zy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>em(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>em(i)).join(",")),`Target(${r})`})(Zo(n))}; limitType=${n.limitType})`}function t_(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):nt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Hg(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=YV(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,Hg(r),i)||r.endAt&&!(function(s,a,c){let l=YV(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,Hg(r),i))})(n,e)}function Tj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Mj(n){return(e,t)=>{let r=!1;for(let i of Hg(n)){let o=Yre(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Yre(n,e,t){let r=n.field.isKeyField()?nt.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Od(c,l):dt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt(19790,{direction:n.dir})}}var pc=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hd(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return fj(this.inner)}size(){return this.innerSize}};var Qre=new Cr(nt.comparator);function _s(){return Qre}var Nj=new Cr(nt.comparator);function gy(...n){let e=Nj;for(let t of n)e=e.insert(t.key,t);return e}function Pj(n){let e=Nj;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ol(){return by()}function kj(){return by()}function by(){return new pc(n=>n.toString(),(n,e)=>n.isEqual(e))}var Zre=new Cr(nt.comparator),Xre=new or(nt.comparator);function fn(...n){let e=Xre;for(let t of n)e=e.add(t);return e}var Jre=new or($t);function PN(){return Jre}function kN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ay(e)?"-0":e}}function Rj(n){return{integerValue:""+n}}function Oj(n,e){return tj(e)?Rj(e):kN(n,e)}var nm=class{constructor(){this._=void 0}};function eie(n,e,t){return n instanceof Fd?(function(i,o){let s={fields:{[gj]:{stringValue:pj},[vj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Zx(o)&&(o=Xx(o)),o&&(s.fields[mj]=o),{mapValue:s}})(t,e):n instanceof fu?Lj(n,e):n instanceof hu?Vj(n,e):(function(i,o){let s=Fj(i,o),a=e7(s)+e7(i.Ee);return TT(s)&&TT(i.Ee)?Rj(a):kN(i.serializer,a)})(n,e)}function tie(n,e,t){return n instanceof fu?Lj(n,e):n instanceof hu?Vj(n,e):t}function Fj(n,e){return n instanceof Ld?(function(r){return TT(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Fd=class extends nm{},fu=class extends nm{constructor(e){super(),this.elements=e}};function Lj(n,e){let t=jj(e);for(let r of n.elements)t.some(i=>ul(i,r))||t.push(r);return{arrayValue:{values:t}}}var hu=class extends nm{constructor(e){super(),this.elements=e}};function Vj(n,e){let t=jj(e);for(let r of n.elements)t=t.filter(i=>!ul(i,r));return{arrayValue:{values:t}}}var Ld=class extends nm{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function e7(n){return Tr(n.integerValue||n.doubleValue)}function jj(n){return Ry(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var bh=class{constructor(e,t){this.field=e,this.transform=t}};function nie(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof fu&&i instanceof fu||r instanceof hu&&i instanceof hu?Gg(r.elements,i.elements,ul):r instanceof Ld&&i instanceof Ld?ul(r.Ee,i.Ee):r instanceof Fd&&i instanceof Fd})(n.transform,e.transform)}var UT=class{constructor(e,t){this.version=e,this.transformResults=t}},Gr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function z2(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var rm=class{};function Bj(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jd(n.key,Gr.none()):new Vd(n.key,n.data,Gr.none());{let t=n.data,r=Eo.empty(),i=new or(oi.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new gc(n.key,r,new Xs(i.toArray()),Gr.none())}}function rie(n,e,t){n instanceof Vd?(function(i,o,s){let a=i.value.clone(),c=n7(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof gc?(function(i,o,s){if(!z2(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=n7(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Uj(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function xy(n,e,t,r){return n instanceof Vd?(function(o,s,a,c){if(!z2(o.precondition,s))return a;let l=o.value.clone(),u=r7(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof gc?(function(o,s,a,c){if(!z2(o.precondition,s))return a;let l=r7(o.fieldTransforms,c,s),u=s.data;return u.setAll(Uj(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))})(n,e,t,r):(function(o,s,a){return z2(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function iie(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Fj(r.transform,i||null);o!=null&&(t===null&&(t=Eo.empty()),t.set(r.field,o))}return t||null}function t7(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gg(r,i,(o,s)=>nie(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Vd=class extends rm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},gc=class extends rm{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Uj(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function n7(n,e,t){let r=new Map;wt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,tie(s,a,t[i]))}return r}function r7(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,eie(o,s,e))}return r}var jd=class extends rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Oy=class extends rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Fy=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&rie(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=xy(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=xy(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=kj();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=Bj(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fn())}isEqual(e){return this.batchId===e.batchId&&Gg(this.mutations,e.mutations,(t,r)=>t7(t,r))&&Gg(this.baseMutations,e.baseMutations,(t,r)=>t7(t,r))}},zT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return Zre})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ly=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var mi,Dn;function zj(n){switch(n){case Ie.OK:return dt(64938);case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return dt(15467,{code:n})}}function qj(n){if(n===void 0)return ii("GRPC error has no .code"),Ie.UNKNOWN;switch(n){case mi.OK:return Ie.OK;case mi.CANCELLED:return Ie.CANCELLED;case mi.UNKNOWN:return Ie.UNKNOWN;case mi.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case mi.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case mi.INTERNAL:return Ie.INTERNAL;case mi.UNAVAILABLE:return Ie.UNAVAILABLE;case mi.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case mi.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case mi.NOT_FOUND:return Ie.NOT_FOUND;case mi.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case mi.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case mi.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case mi.ABORTED:return Ie.ABORTED;case mi.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case mi.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case mi.DATA_LOSS:return Ie.DATA_LOSS;default:return dt(39323,{code:n})}}(Dn=mi||(mi={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";var i7=null;var oie=new su([4294967295,4294967295],0);function o7(n){let e=_N().encode(n),t=new JD;return t.update(e),new Uint8Array(t.digest())}function s7(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new su([t,r],0),new su([i,o],0)]}var HT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gh(`Invalid padding: ${t}`);if(r<0)throw new gh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gh(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=su.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(su.fromNumber(r)));return i.compare(oie)===1&&(i=new su([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=o7(e),[r,i]=s7(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=o7(e),[r,i]=s7(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},gh=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vy=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,jy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Nt.min(),i,new Cr($t),_s(),fn())}},jy=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fn(),fn(),fn())}};var $g=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},ax=class{constructor(e,t){this.targetId=e,this.De=t}},cx=class{constructor(e,t,r=ai.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},lx=class{constructor(){this.ve=0,this.Ce=a7(),this.Fe=ai.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fn(),t=fn(),r=fn();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt(38017,{changeType:o})}}),new jy(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=a7()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},$T=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=_s(),this.je=P2(),this.Je=P2(),this.He=new Cr($t)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:dt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(ix(o))if(r===0){let s=new nt(o.path);this.Xe(t,s,wi.newNoDocument(s,Nt.min()))}else wt(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}i7?.ct((function(u,h,m,g,b){var I,T,N,Y,j,W;let oe={localCacheCount:u,existenceFilterCount:h.count,databaseId:m.database,projectId:m.projectId},he=h.unchangedNames;return he&&(oe.bloomFilter={applied:b===0,hashCount:(I=he?.hashCount)!==null&&I!==void 0?I:0,bitmapLength:(Y=(N=(T=he?.bits)===null||T===void 0?void 0:T.bitmap)===null||N===void 0?void 0:N.length)!==null&&Y!==void 0?Y:0,padding:(W=(j=he?.bits)===null||j===void 0?void 0:j.padding)!==null&&W!==void 0?W:0,mightContain:z=>{var M;return(M=g?.mightContain(z))!==null&&M!==void 0&&M}}),oe})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=du(r).toUint8Array()}catch(c){if(c instanceof ex)return bs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new HT(s,i,o)}catch(c){return bs(c instanceof gh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&ix(a.target)){let c=new nt(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,wi.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=fn();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Vy(e,t,this.He,this.ze,r);return this.ze=_s(),this.je=P2(),this.Je=P2(),this.He=new Cr($t),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new lx,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new or($t),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new or($t),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||$e("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new lx),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function P2(){return new Cr(nt.comparator)}function a7(){return new Cr(nt.comparator)}var sie={asc:"ASCENDING",desc:"DESCENDING"},aie={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cie={and:"AND",or:"OR"},GT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function WT(n,e){return n.useProto3Json||Zy(e)?e:{value:e}}function im(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lie(n,e){return im(n,e.toTimestamp())}function si(n){return wt(!!n,49232),Nt.fromTimestamp((function(t){let r=uu(t);return new gr(r.seconds,r.nanos)})(n))}function RN(n,e){return KT(n,e).canonicalString()}function KT(n,e){let t=(function(i){return new En(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function $j(n){let e=En.fromString(n);return wt(tB(e),10190,{key:e.toString()}),e}function By(n,e){return RN(n.databaseId,e.path)}function al(n,e){let t=$j(e);if(t.get(1)!==n.databaseId.projectId)throw new je(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nt(Kj(t))}function Gj(n,e){return RN(n.databaseId,e)}function Wj(n){let e=$j(n);return e.length===4?En.emptyPath():Kj(e)}function YT(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kj(n){return wt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function c7(n,e,t){return{name:By(n,e),fields:t.value.mapValue.fields}}function Yj(n,e,t){let r=al(n,e.name),i=si(e.updateTime),o=e.createTime?si(e.createTime):Nt.min(),s=new Eo({mapValue:{fields:e.fields}}),a=wi.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function uie(n,e){return"found"in e?(function(r,i){wt(!!i.found,43571),i.found.name,i.found.updateTime;let o=al(r,i.found.name),s=si(i.found.updateTime),a=i.found.createTime?si(i.found.createTime):Nt.min(),c=new Eo({mapValue:{fields:i.found.fields}});return wi.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){wt(!!i.missing,3894),wt(!!i.readTime,22933);let o=al(r,i.missing),s=si(i.readTime);return wi.newNoDocument(o,s)})(n,e):dt(7234,{result:e})}function die(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:dt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,u){return l.useProto3Json?(wt(u===void 0||typeof u=="string",58123),ai.fromBase64String(u||"")):(wt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ai.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let u=l.code===void 0?Ie.UNKNOWN:qj(l.code);return new je(u,l.message||"")})(s);t=new cx(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=al(n,r.document.name),o=si(r.document.updateTime),s=r.document.createTime?si(r.document.createTime):Nt.min(),a=new Eo({mapValue:{fields:r.document.fields}}),c=wi.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new $g(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=al(n,r.document),o=r.readTime?si(r.readTime):Nt.min(),s=wi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new $g([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=al(n,r.document),o=r.removedTargetIds||[];t=new $g([],o,i,null)}else{if(!("filter"in e))return dt(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new qT(i,o),a=r.targetId;t=new ax(a,s)}}return t}function Uy(n,e){let t;if(e instanceof Vd)t={update:c7(n,e.key,e.value)};else if(e instanceof jd)t={delete:By(n,e.key)};else if(e instanceof gc)t={update:c7(n,e.key,e.data),updateMask:vie(e.fieldMask)};else{if(!(e instanceof Oy))return dt(16599,{Rt:e.type});t={verify:By(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Fd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ld)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw dt(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:lie(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:dt(27497)})(n,e.precondition)),t}function QT(n,e){let t=e.currentDocument?(function(o){return o.updateTime!==void 0?Gr.updateTime(si(o.updateTime)):o.exists!==void 0?Gr.exists(o.exists):Gr.none()})(e.currentDocument):Gr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>(function(s,a){let c=null;if("setToServerValue"in a)wt(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new Fd;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new fu(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new hu(u)}else"increment"in a?c=new Ld(s,a.increment):dt(16584,{proto:a});let l=oi.fromServerFormat(a.fieldPath);return new bh(l,c)})(n,i)):[];if(e.update){e.update.name;let i=al(n,e.update.name),o=new Eo({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=(function(c){let l=c.fieldPaths||[];return new Xs(l.map(u=>oi.fromServerFormat(u)))})(e.updateMask);return new gc(i,o,s,t,r)}return new Vd(i,o,t,r)}if(e.delete){let i=al(n,e.delete);return new jd(i,t)}if(e.verify){let i=al(n,e.verify);return new Oy(i,t)}return dt(1463,{proto:e})}function fie(n,e){return n&&n.length>0?(wt(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?si(i.updateTime):si(o);return s.isEqual(Nt.min())&&(s=si(o)),new UT(s,i.transformResults||[])})(t,e))):[]}function Qj(n,e){return{documents:[Gj(n,e.path)]}}function Zj(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Gj(n,i);let o=(function(l){if(l.length!==0)return eB(Qn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(u=>(function(m){return{field:jg(m.field),direction:pie(m.dir)}})(u))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=WT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function Xj(n){let e=Wj(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){wt(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=(function(h){let m=Jj(h);return m instanceof Qn&&MN(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(h){return h.map(m=>(function(b){return new _h(Bg(b.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(h){let m;return m=typeof h=="object"?h.value:h,Zy(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(h){let m=!!h.before,g=h.values||[];return new dl(g,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(h){let m=!h.before,g=h.values||[];return new dl(g,m)})(t.endAt)),Aj(e,i,s,o,a,"F",c,l)}function hie(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Jj(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Bg(t.unaryFilter.field);return xn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Bg(t.unaryFilter.field);return xn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Bg(t.unaryFilter.field);return xn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Bg(t.unaryFilter.field);return xn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return dt(61313);default:return dt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xn.create(Bg(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return dt(58110);default:return dt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Qn.create(t.compositeFilter.filters.map(r=>Jj(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return dt(1026)}})(t.compositeFilter.op))})(n):dt(30097,{filter:n})}function pie(n){return sie[n]}function gie(n){return aie[n]}function mie(n){return cie[n]}function jg(n){return{fieldPath:n.canonicalString()}}function Bg(n){return oi.fromServerFormat(n.fieldPath)}function eB(n){return n instanceof xn?(function(t){if(t.op==="=="){if(GV(t.value))return{unaryFilter:{field:jg(t.field),op:"IS_NAN"}};if($V(t.value))return{unaryFilter:{field:jg(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(GV(t.value))return{unaryFilter:{field:jg(t.field),op:"IS_NOT_NAN"}};if($V(t.value))return{unaryFilter:{field:jg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jg(t.field),op:gie(t.op),value:t.value}}})(n):n instanceof Qn?(function(t){let r=t.getFilters().map(i=>eB(i));return r.length===1?r[0]:{compositeFilter:{op:mie(t.op),filters:r}}})(n):dt(54877,{filter:n})}function vie(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tB(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var om=class n{constructor(e,t,r,i,o=Nt.min(),s=Nt.min(),a=ai.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ux=class{constructor(e){this.gt=e}};function yie(n,e){let t;if(e.document)t=Yj(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=nt.fromSegments(e.noDocument.path),i=Ch(e.noDocument.readTime);t=wi.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt(56709);{let r=nt.fromSegments(e.unknownDocument.path),i=Ch(e.unknownDocument.version);t=wi.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){let o=new gr(i[0],i[1]);return Nt.fromTimestamp(o)})(e.readTime)),t}function l7(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:By(o,s.key),fields:s.data.value.mapValue.fields,updateTime:im(o,s.version.toTimestamp()),createTime:im(o,s.createTime.toTimestamp())}})(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xh(e.version)};else{if(!e.isUnknownDocument())return dt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:xh(e.version)}}return r}function dx(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xh(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ch(n){let e=new gr(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function dh(n,e){let t=(e.baseMutations||[]).map(o=>QT(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>QT(n.gt,o)),i=gr.fromMillis(e.localWriteTimeMs);return new Fy(e.batchId,i,t,r)}function my(n){let e=Ch(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ch(n.lastLimboFreeSnapshotVersion):Nt.min(),r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){let s=o.documents.length;return wt(s===1,1966,{count:s}),Zo(mm(Wj(o.documents[0])))})(n.query):(function(o){return Zo(Xj(o))})(n.query),new om(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ai.fromBase64String(n.resumeToken))}function nB(n,e){let t=xh(e.snapshotVersion),r=xh(e.lastLimboFreeSnapshotVersion),i;i=ix(e.target)?Qj(n.gt,e.target):Zj(n.gt,e.target).Vt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wh(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ON(n){let e=Xj({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sx(e,e.limit,"L"):e}function oT(n,e){return new Ly(e.largestBatchId,QT(n.gt,e.overlayMutation))}function u7(n,e){let t=e.path.lastSegment();return[n,Io(e.path.popLast()),t]}function d7(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:xh(r.readTime),documentKey:Io(r.documentKey.path),largestBatchId:r.largestBatchId}}var ZT=class{getBundleMetadata(e,t){return f7(e).get(t).next(r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Ch(o.createTime),version:o.version}})(r)})}saveBundleMetadata(e,t){return f7(e).put((function(i){return{bundleId:i.id,createTime:xh(si(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return h7(e).get(t).next(r=>{if(r)return(function(o){return{name:o.name,query:ON(o.bundledQuery),readTime:Ch(o.readTime)}})(r)})}saveNamedQuery(e,t){return h7(e).put((function(i){return{name:i.name,readTime:xh(si(i.readTime)),bundledQuery:i.bundledQuery}})(t))}};function f7(n){return Li(n,Kx)}function h7(n){return Li(n,Yx)}var fx=class n{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return dy(e).get(u7(this.userId,t)).next(r=>r?oT(this.serializer,r):null)}getOverlays(e,t){let r=ol();return we.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ly(t,s);i.push(this.wt(e,a))}),we.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Io(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(dy(e).Y(ST,a))}),we.waitFor(o)}getOverlaysForCollection(e,t,r){let i=ol(),o=Io(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return dy(e).j(ST,s).next(a=>{for(let c of a){let l=oT(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=ol(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dy(e).X({index:aj,range:a},(c,l,u)=>{let h=oT(this.serializer,l);o.size()<i||h.largestBatchId===s?(o.set(h.getKey(),h),s=h.largestBatchId):u.done()}).next(()=>o)}wt(e,t){return dy(e).put((function(i,o,s){let[a,c,l]=u7(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Uy(i.gt,s.mutation)}})(this.serializer,this.userId,t))}};function dy(n){return Li(n,Qx)}var XT=class{St(e){return Li(e,SN)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?ai.fromUint8Array(r):ai.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var cu=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Tr(e.integerValue));else if("doubleValue"in e){let r=Tr(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Ay(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=uu(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(du(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?_j(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Jx(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):dt(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Jg,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Tr(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),nt.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};cu.Ut=new cu;var kg=255;function _ie(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function p7(n){let e=64-(function(r){let i=0;for(let o=0;o<8;++o){let s=_ie(255&r[o]);if(i+=s,s!==8)break}return i})(n);return Math.ceil(e/8)}var JT=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{let i=t.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{let i=t.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){let t=this.Xt(e),r=p7(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}tn(e){let t=this.Xt(e),r=p7(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}nn(){this.rn(kg),this.rn(255)}sn(){this._n(kg),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=(function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===kg?(this.rn(kg),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===kg?(this._n(kg),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},eM=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},tM=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},fh=class{constructor(){this.un=new JT,this.cn=new eM(this.un),this.ln=new tM(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var hh=class n{constructor(e,t,r,i){this.Pn=e,this.Tn=t,this.In=r,this.dn=i}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:q2(this.In),directionalValue:q2(this.dn),orderedDocumentKey:q2(t),documentKey:r.path.toArray()}}Rn(e,t,r){let i=this.An(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function xd(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=g7(n.In,e.In),t!==0?t:(t=g7(n.dn,e.dn),t!==0?t:nt.comparator(n.Tn,e.Tn)))}function g7(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function q2(n){return eI()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function m7(n){return typeof n!="string"?n:(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}var hx=class{constructor(e){this.Vn=new or((t,r)=>oi.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(wt(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=_T(e);if(t!==void 0&&!this.yn(t))return!1;let r=ch(e),i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.wn(a,c)||!this.Sn(this.mn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new or(oi.comparator),t=[];for(let r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new qg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new qg(r.field,0))}for(let r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new qg(r.field,r.dir==="asc"?0:1)));return new Kg(Kg.UNKNOWN_ID,this.collectionId,t,Sy.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function rB(n){var e,t;if(wt(n instanceof xn||n instanceof Qn,20012),n instanceof xn){if(n instanceof rx){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>xn.create(n.field,"==",o)))||[];return Qn.create(i,"or")}return n}let r=n.filters.map(i=>rB(i));return Qn.create(r,n.op)}function wie(n){if(n.getFilters().length===0)return[];let e=iM(rB(n));return wt(iB(e),7391),nM(e)||rM(e)?[e]:e.getFilters()}function nM(n){return n instanceof xn}function rM(n){return n instanceof Qn&&MN(n)}function iB(n){return nM(n)||rM(n)||(function(t){if(t instanceof Qn&&MT(t)){for(let r of t.getFilters())if(!nM(r)&&!rM(r))return!1;return!0}return!1})(n)}function iM(n){if(wt(n instanceof xn||n instanceof Qn,34018),n instanceof xn)return n;if(n.filters.length===1)return iM(n.filters[0]);let e=n.filters.map(r=>iM(r)),t=Qn.create(e,n.op);return t=px(t),iB(t)?t:(wt(t instanceof Qn,64498),wt(tm(t),40251),wt(t.filters.length>1,57927),t.filters.reduce((r,i)=>FN(r,i)))}function FN(n,e){let t;return wt(n instanceof xn||n instanceof Qn,38388),wt(e instanceof xn||e instanceof Qn,25473),t=n instanceof xn?e instanceof xn?(function(i,o){return Qn.create([i,o],"and")})(n,e):v7(n,e):e instanceof xn?v7(e,n):(function(i,o){if(wt(i.filters.length>0&&o.filters.length>0,48005),tm(i)&&tm(o))return Ej(i,o.getFilters());let s=MT(i)?i:o,a=MT(i)?o:i,c=s.filters.map(l=>FN(l,a));return Qn.create(c,"or")})(n,e),px(t)}function v7(n,e){if(tm(e))return Ej(e,n.getFilters());{let t=e.filters.map(r=>FN(n,r));return Qn.create(t,"or")}}function px(n){if(wt(n instanceof xn||n instanceof Qn,11850),n instanceof xn)return n;let e=n.getFilters();if(e.length===1)return px(e[0]);if(xj(n))return n;let t=e.map(i=>px(i)),r=[];return t.forEach(i=>{i instanceof xn?r.push(i):i instanceof Qn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Qn.create(r,n.op)}var oM=class{constructor(){this.Dn=new zy}addToCollectionParentIndex(e,t){return this.Dn.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(Na.min())}getMinOffsetFromCollectionGroup(e,t){return we.resolve(Na.min())}updateCollectionGroup(e,t,r){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}},zy=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new or(En.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new or(En.comparator)).toArray()}};var y7="IndexedDbIndexManager",k2=new Uint8Array(0),sM=class{constructor(e,t){this.databaseId=t,this.vn=new zy,this.Cn=new pc(r=>wh(r),(r,i)=>Jy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:Io(i)};return _7(e).put(o)}return we.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[K7(t),""],!1,!0);return _7(e).j(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(il(s.parent))}return r})}addFieldIndex(e,t){let r=fy(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}})(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Og(e);return o.next(a=>{s.put(d7(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=fy(e),i=Og(e),o=Rg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=fy(e),r=Rg(e),i=Og(e);return t.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,t){return we.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new hx(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Rg(e),i=!0,o=new Map;return we.forEach(this.Fn(t),s=>this.Mn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=fn(),a=[];return we.forEach(o,(c,l)=>{$e(y7,`Using index ${(function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`})(c)} to execute ${wh(t)}`);let u=(function(j,W){let oe=_T(W);if(oe===void 0)return null;for(let he of ox(j,oe.fieldPath))switch(he.op){case"array-contains-any":return he.value.arrayValue.values||[];case"array-contains":return[he.value]}return null})(l,c),h=(function(j,W){let oe=new Map;for(let he of ch(W))for(let z of ox(j,he.fieldPath))switch(z.op){case"==":case"in":oe.set(he.fieldPath.canonicalString(),z.value);break;case"not-in":case"!=":return oe.set(he.fieldPath.canonicalString(),z.value),Array.from(oe.values())}return null})(l,c),m=(function(j,W){let oe=[],he=!0;for(let z of ch(W)){let M=z.kind===0?ZV(j,z.fieldPath,j.startAt):XV(j,z.fieldPath,j.startAt);oe.push(M.value),he&&(he=M.inclusive)}return new dl(oe,he)})(l,c),g=(function(j,W){let oe=[],he=!0;for(let z of ch(W)){let M=z.kind===0?XV(j,z.fieldPath,j.endAt):ZV(j,z.fieldPath,j.endAt);oe.push(M.value),he&&(he=M.inclusive)}return new dl(oe,he)})(l,c),b=this.xn(c,l,m),I=this.xn(c,l,g),T=this.On(c,l,h),N=this.Nn(c.indexId,u,b,m.inclusive,I,g.inclusive,T);return we.forEach(N,Y=>r.H(Y,t.limit).next(j=>{j.forEach(W=>{let oe=nt.fromSegments(W.documentKey);s.has(oe)||(s=s.add(oe),a.push(oe))})}))}).next(()=>a)}return we.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=wie(Qn.create(e.filters,"and")).map(r=>jT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),u=[];for(let h=0;h<c;++h){let m=t?this.Bn(t[h/l]):k2,g=this.Ln(e,m,r[h%l],i),b=this.kn(e,m,o[h%l],s),I=a.map(T=>this.Ln(e,m,T,!0));u.push(...this.createRange(g,b,I))}return u}Ln(e,t,r,i){let o=new hh(e,nt.empty(),t,r);return i?o:o.En()}kn(e,t,r,i){let o=new hh(e,nt.empty(),t,r);return i?o.En():o}Mn(e,t){let r=new hx(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.pn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Fn(t);return we.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<(function(c){let l=new or(oi.comparator),u=!1;for(let h of c.filters)for(let m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?u=!0:l=l.add(m.field));for(let h of c.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(u?1:0)})(o)&&(r=1):r=0})).next(()=>(function(s){return s.limit!==null})(t)&&i.length>1&&r===2?1:r)}qn(e,t){let r=new fh;for(let i of ch(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.hn(i.kind);cu.Ut.bt(o,s)}return r.an()}Bn(e){let t=new fh;return cu.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let r=new fh;return cu.Ut.bt(yh(this.databaseId,t),r.hn((function(o){let s=ch(o);return s.length===0?0:s[s.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let i=[];i.push(new fh);let o=0;for(let s of ch(e)){let a=r[o++];for(let c of i)if(this.$n(t,s.fieldPath)&&Ry(a))i=this.Un(i,s,a);else{let l=c.hn(s.kind);cu.Ut.bt(a,l)}}return this.Kn(i)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new fh;c.seed(a.an()),cu.Ut.bt(s,c.hn(t.kind)),o.push(c)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof xn&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=fy(e),i=Og(e);return(t?r.j(IT,IDBKeyRange.bound(t,t)):r.j()).next(o=>{let s=[];return we.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push((function(u,h){let m=h?new Sy(h.sequenceNumber,new Na(Ch(h.readTime),new nt(il(h.documentKey)),h.largestBatchId)):Sy.empty(),g=u.fields.map(([b,I])=>new qg(oi.fromServerFormat(b),I));return new Kg(u.indexId,u.collectionGroup,g,m)})(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=fy(e),o=Og(e);return this.Wn(e).next(s=>i.j(IT,IDBKeyRange.bound(t,t)).next(a=>we.forEach(a,c=>o.put(d7(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return we.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?we.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),we.forEach(a,c=>this.Gn(e,i,c).next(l=>{let u=this.zn(o,c);return l.isEqual(u)?we.resolve():this.jn(e,o,c,l,u)}))))})}Jn(e,t,r,i){return Rg(e).put(i.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,i){return Rg(e).delete(i.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){let i=Rg(e),o=new or(xd);return i.X({index:sj,range:IDBKeyRange.only([r.indexId,this.uid,q2(this.Qn(r,t))])},(s,a)=>{o=o.add(new hh(r.indexId,t,m7(a.arrayValue),m7(a.directionalValue)))}).next(()=>o)}zn(e,t){let r=new or(xd),i=this.qn(t,e);if(i==null)return r;let o=_T(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Ry(s))for(let a of s.arrayValue.values||[])r=r.add(new hh(t.indexId,e.key,this.Bn(a),i))}else r=r.add(new hh(t.indexId,e.key,k2,i));return r}jn(e,t,r,i,o){$e(y7,"Updating index entries for document '%s'",t.key);let s=[];return(function(c,l,u,h,m){let g=c.getIterator(),b=l.getIterator(),I=Pg(g),T=Pg(b);for(;I||T;){let N=!1,Y=!1;if(I&&T){let j=u(I,T);j<0?Y=!0:j>0&&(N=!0)}else I!=null?Y=!0:N=!0;N?(h(T),T=Pg(b)):Y?(m(I),I=Pg(g)):(I=Pg(g),T=Pg(b))}})(i,o,xd,a=>{s.push(this.Jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),we.waitFor(s)}Wn(e){let t=1;return Og(e).X({index:oj,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>xd(s,a)).filter((s,a,c)=>!a||xd(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=xd(s,e),c=xd(s,t);if(a===0)i[0]=e.En();else if(a>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];let a=i[s].Rn(this.uid,k2,nt.empty()),c=i[s+1].Rn(this.uid,k2,nt.empty());o.push(IDBKeyRange.bound(a,c))}return o}Yn(e,t){return xd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(w7)}getMinOffset(e,t){return we.mapArray(this.Fn(t),r=>this.Mn(e,r).next(i=>i||dt(44426))).next(w7)}};function _7(n){return Li(n,My)}function Rg(n){return Li(n,_y)}function fy(n){return Li(n,IN)}function Og(n){return Li(n,yy)}function w7(n){wt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;xN(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Na(e.readTime,e.documentKey,t)}var b7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oB=41943040,ys=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function sB(n,e,t){let r=n.store(fc),i=n.store(Yg),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.X({range:s},(u,h,m)=>(a++,m.delete()));o.push(c.next(()=>{wt(a===1,47070,{batchId:t.batchId})}));let l=[];for(let u of t.mutations){let h=nj(e,u.key.path,t.batchId);o.push(i.delete(h)),l.push(u.key)}return we.waitFor(o).next(()=>l)}function gx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt(14731);e=n.noDocument}return JSON.stringify(e).length}ys.DEFAULT_COLLECTION_PERCENTILE=10,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ys.DEFAULT=new ys(oB,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ys.DISABLED=new ys(-1,0,0);var mx=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,t,r,i){wt(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cd(e).X({index:ph,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ug(e),s=Cd(e);return s.add({}).next(a=>{wt(typeof a=="number",49019);let c=new Fy(a,t,r,i),l=(function(g,b,I){let T=I.baseMutations.map(Y=>Uy(g.gt,Y)),N=I.mutations.map(Y=>Uy(g.gt,Y));return{userId:b,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:T,mutations:N}})(this.serializer,this.userId,c),u=[],h=new or((m,g)=>$t(m.canonicalString(),g.canonicalString()));for(let m of i){let g=nj(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),u.push(s.put(l)),u.push(o.put(g,wre))}return h.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Zn[a]=c.keys()}),we.waitFor(u).next(()=>c)})}lookupMutationBatch(e,t){return Cd(e).get(t).next(r=>r?(wt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),dh(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?we.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Cd(e).X({index:ph,range:i},(s,a,c)=>{a.userId===this.userId&&(wt(a.batchId>=r,47524,{er:r}),o=dh(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Dd;return Cd(e).X({index:ph,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Dd],[this.userId,Number.POSITIVE_INFINITY]);return Cd(e).j(ph,t).next(r=>r.map(i=>dh(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=L2(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ug(e).X({range:i},(s,a,c)=>{let[l,u,h]=s,m=il(u);if(l===this.userId&&t.path.isEqual(m))return Cd(e).get(h).next(g=>{if(!g)throw dt(61480,{tr:s,batchId:h});wt(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:h}),o.push(dh(this.serializer,g))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or($t),i=[];return t.forEach(o=>{let s=L2(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Ug(e).X({range:a},(l,u,h)=>{let[m,g,b]=l,I=il(g);m===this.userId&&o.path.isEqual(I)?r=r.add(b):h.done()});i.push(c)}),we.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=L2(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new or($t);return Ug(e).X({range:s},(c,l,u)=>{let[h,m,g]=c,b=il(m);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(g)):u.done()}).next(()=>this.nr(e,a))}nr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Cd(e).get(o).next(s=>{if(s===null)throw dt(35274,{batchId:o});wt(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(dh(this.serializer,s))}))}),we.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return sB(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),we.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return we.resolve();let r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Ug(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=il(o[1]);i.push(c)}else a.done()}).next(()=>{wt(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return aB(e,this.userId,t)}sr(e){return cB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Dd,lastStreamToken:""})}};function aB(n,e,t){let r=L2(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ug(n).X({range:o,Z:!0},(a,c,l)=>{let[u,h,m]=a;u===e&&h===i&&(s=!0),l.done()}).next(()=>s)}function Cd(n){return Li(n,fc)}function Ug(n){return Li(n,Yg)}function cB(n){return Li(n,Dy)}var sm=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var aM=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let r=new sm(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>Nt.fromTimestamp(new gr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.lr(e,i)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fg(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(wt(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Fg(e).X((s,a)=>{let c=my(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>we.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Fg(e).X((r,i)=>{let o=my(i);t(o)})}cr(e){return x7(e).get(X2).next(t=>(wt(t!==null,2888),t))}lr(e,t){return x7(e).put(X2,t)}hr(e,t){return Fg(e).put(nB(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=wh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Fg(e).X({range:i,index:ij},(s,a,c)=>{let l=my(a);Jy(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Id(e);return t.forEach(s=>{let a=Io(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),we.waitFor(i)}removeMatchingKeys(e,t,r){let i=Id(e);return we.forEach(t,o=>{let s=Io(o.path);return we.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Id(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Id(e),o=fn();return i.X({range:r,Z:!0},(s,a,c)=>{let l=il(s[1]),u=new nt(l);o=o.add(u)}).next(()=>o)}containsKey(e,t){let r=Io(t.path),i=IDBKeyRange.bound([r],[K7(r)],!1,!0),o=0;return Id(e).X({index:EN,Z:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Et(e,t){return Fg(e).get(t).next(r=>r?my(r):null)}};function Fg(n){return Li(n,Qg)}function x7(n){return Li(n,vh)}function Id(n){return Li(n,Zg)}var C7="LruGarbageCollector",bie=1048576;function E7([n,e],[t,r]){let i=$t(n,t);return i===0?$t(e,r):i}var cM=class{constructor(e){this.Tr=e,this.buffer=new or(E7),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();E7(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},vx=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){$e(C7,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>ee(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){qd(t)?$e(C7,"Ignoring IndexedDB error during garbage collection: ",t):yield zd(t)}yield this.Rr(3e5)}))}},lM=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return we.resolve(Zs.ue);let r=new cM(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(b7)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b7):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),Lg()<=Rc.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function lB(n,e){return new lM(n,e)}var uM=class{constructor(e,t){this.db=e,this.garbageCollector=lB(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,i)=>t(i))}addReference(e,t,r){return R2(e,r)}removeReference(e,t,r){return R2(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return R2(e,t)}Sr(e,t){return(function(i,o){let s=!1;return cB(i).ee(a=>aB(i,a,o).next(c=>(c&&(s=!0),we.resolve(!c)))).next(()=>s)})(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.wr(e,(s,a)=>{if(a<=t){let c=this.Sr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Nt.min()),Id(e).delete((function(h){return[0,Io(h.path)]})(s))))});i.push(c)}}).next(()=>we.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return R2(e,t)}wr(e,t){let r=Id(e),i,o=Zs.ue;return r.X({index:EN},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Zs.ue&&t(new nt(il(i)),o),o=l,i=c):o=Zs.ue}).next(()=>{o!==Zs.ue&&t(new nt(il(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function R2(n,e){return Id(n).put((function(r,i){return{targetId:0,path:Io(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}var yx=class{constructor(){this.changes=new pc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?we.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var dM=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ah(e).put(r)}removeEntry(e,t,r){return ah(e).delete((function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],dx(s),a[a.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=wi.newInvalidDocument(t);return ah(e).X({index:V2,range:IDBKeyRange.only(hy(t))},(i,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:wi.newInvalidDocument(t)};return ah(e).X({index:V2,range:IDBKeyRange.only(hy(t))},(i,o)=>{r={document:this.Dr(t,o),size:gx(o)}}).next(()=>r)}getEntries(e,t){let r=_s();return this.Cr(e,t,(i,o)=>{let s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,t){let r=_s(),i=new Cr(nt.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Dr(o,s);r=r.insert(o,a),i=i.insert(o,gx(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,t,r){if(t.isEmpty())return we.resolve();let i=new or(A7);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(hy(i.first()),hy(i.last())),s=i.getIterator(),a=s.getNext();return ah(e).X({index:V2,range:o},(c,l,u)=>{let h=nt.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&A7(a,h)<0;)r(a,null),a=s.getNext();a&&a.isEqual(h)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?u.G(hy(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),dx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ah(e).j(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let u=_s();for(let h of l){let m=this.Dr(nt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(t_(t,m)||i.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,t,r,i){let o=_s(),s=S7(t,r),a=S7(t,Na.max());return ah(e).X({index:rj,range:IDBKeyRange.bound(s,a,!0)},(c,l,u)=>{let h=this.Dr(nt.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(h.key,h),o.size===i&&u.done()}).next(()=>o)}newChangeBuffer(e){return new fM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return I7(e).get(ET).next(t=>(wt(!!t,20021),t))}br(e,t){return I7(e).put(ET,t)}Dr(e,t){if(t){let r=yie(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Nt.min())))return r}return wi.newInvalidDocument(e)}};function uB(n){return new dM(n)}var fM=class extends yx{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new pc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new or((o,s)=>$t(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=l7(this.Or.serializer,s);i=i.add(o.path.popLast());let l=gx(c);r+=l-a.size,t.push(this.Or.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=l7(this.Or.serializer,s.convertToNoDocument(Nt.min()));t.push(this.Or.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),we.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function I7(n){return Li(n,Ty)}function ah(n){return Li(n,Z2)}function hy(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function S7(n,e){let t=e.documentKey.path.toArray();return[n,dx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function A7(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=$t(t[o],r[o]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}var hM=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var _x=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&xy(r.mutation,i,Xs.empty(),gr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fn()){let i=ol();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=gy();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ol();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fn()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=_s(),s=by(),a=(function(){return by()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof gc)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),xy(u.mutation,l,u.mutation.getFieldMask(),gr.now())):s.set(l.key,Xs.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),t.forEach((l,u)=>{var h;return a.set(l,new hM(u,(h=s.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=by(),i=new Cr((s,a)=>s-a),o=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||Xs.empty();u=a.applyToLocalView(l,u),r.set(c,u);let h=(i.get(a.batchId)||fn()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,h=kj();u.forEach(m=>{if(!o.has(m)){let g=Bj(t.get(m),r.get(m));g!==null&&h.set(m,g),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return we.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return nt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):we.resolve(ol()),a=Wg,c=o;return s.next(l=>we.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(u)?we.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{c=c.insert(u,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,fn())).next(u=>({batchId:a,changes:Pj(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nt(t)).next(r=>{let i=gy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=gy();return this.indexManager.getCollectionParents(e,o).next(a=>we.forEach(a,c=>{let l=(function(h,m){return new hc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((h,m)=>{s=s.insert(h,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,wi.newInvalidDocument(u)))});let a=gy();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&xy(u.mutation,l,Xs.empty(),gr.now()),t_(t,l)&&(a=a.insert(c,l))}),a})}};var pM=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return we.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:si(i.createTime)}})(t)),we.resolve()}getNamedQuery(e,t){return we.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:ON(i.bundledQuery),readTime:si(i.readTime)}})(t)),we.resolve()}};var gM=class{constructor(){this.overlays=new Cr(nt.comparator),this.kr=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ol();return we.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),we.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),we.resolve()}getOverlaysForCollection(e,t,r){let i=ol(),o=t.length+1,s=new nt(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return we.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Cr((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=ol(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=ol(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return we.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ly(t,r));let o=this.kr.get(t);o===void 0&&(o=fn(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var mM=class{constructor(){this.sessionToken=ai.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,we.resolve()}};var qy=class{constructor(){this.qr=new or(vi.Qr),this.$r=new or(vi.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new vi(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new vi(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new nt(new En([])),r=new vi(t,e),i=new vi(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new nt(new En([])),r=new vi(t,e),i=new vi(t,e+1),o=fn();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new vi(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},vi=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return nt.comparator(e.key,t.key)||$t(e.Hr,t.Hr)}static Ur(e,t){return $t(e.Hr,t.Hr)||nt.comparator(e.key,t.key)}};var vM=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new or(vi.Qr)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Fy(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new vi(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return we.resolve(s)}lookupMutationBatch(e,t){return we.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return we.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?Dd:this.er-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new vi(t,0),i=new vi(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),we.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or($t);return t.forEach(i=>{let o=new vi(i,0),s=new vi(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),we.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;nt.isDocumentKey(o)||(o=o.child(""));let s=new vi(new nt(o),0),a=new or($t);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),we.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){wt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return we.forEach(t.mutations,i=>{let o=new vi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new vi(t,0),i=this.Yr.firstAfterOrEqual(r);return we.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var yM=class{constructor(e){this.ni=e,this.docs=(function(){return new Cr(nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return we.resolve(r?r.document.mutableCopy():wi.newInvalidDocument(t))}getEntries(e,t){let r=_s();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():wi.newInvalidDocument(i))}),we.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=_s(),s=t.path,a=new nt(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||xN(X7(u),r)<=0||(i.has(u.key)||t_(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return we.resolve(o)}getAllFromCollectionGroup(e,t,r,i){dt(9500)}ri(e,t){return we.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _M(this)}getSize(e){return we.resolve(this.size)}},_M=class extends yx{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),we.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var wM=class{constructor(e){this.persistence=e,this.ii=new pc(t=>wh(t),Jy),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.si=0,this.oi=new qy,this.targetCount=0,this._i=sm.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),we.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new sm(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.hr(t),we.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),we.waitFor(o).next(()=>i)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return we.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),we.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),we.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),we.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return we.resolve(r)}containsKey(e,t){return we.resolve(this.oi.containsKey(t))}};var Hy=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Zs(0),this.ci=!1,this.ci=!0,this.li=new mM,this.referenceDelegate=e(this),this.hi=new wM(this),this.indexManager=new oM,this.remoteDocumentCache=(function(i){return new yM(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new ux(t),this.Ti=new pM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new vM(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);let i=new bM(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return we.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},bM=class extends K2{constructor(e){super(),this.currentSequenceNumber=e}},wx=class n{constructor(e){this.persistence=e,this.Ai=new qy,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw dt(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),we.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),we.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.mi,r=>{let i=nt.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Nt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return we.or([()=>we.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},bx=class n{constructor(e,t){this.persistence=e,this.gi=new pc(r=>Io(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=lB(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return we.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return we.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?we.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Nt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),we.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),we.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=B2(e.data.value)),t}Sr(e,t,r){return we.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return we.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var xM=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new Y2("createOrUpgrade",t);r<1&&i>=1&&((function(c){c.createObjectStore(Xy)})(e),(function(c){c.createObjectStore(Dy,{keyPath:_re}),c.createObjectStore(fc,{keyPath:BV,autoIncrement:!0}).createIndex(ph,UV,{unique:!0}),c.createObjectStore(Yg)})(e),D7(e),(function(c){c.createObjectStore(lh)})(e));let s=we.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Zg),c.deleteObjectStore(Qg),c.deleteObjectStore(vh)})(e),D7(e)),s=s.next(()=>(function(c){let l=c.store(vh),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return l.put(X2,u)})(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>(function(c,l){return l.store(fc).j().next(h=>{c.deleteObjectStore(fc),c.createObjectStore(fc,{keyPath:BV,autoIncrement:!0}).createIndex(ph,UV,{unique:!0});let m=l.store(fc),g=h.map(b=>m.put(b));return we.waitFor(g)})})(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(Xg,{keyPath:Dre})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>((function(c){c.createObjectStore(Ty)})(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(Kx,{keyPath:Tre})})(e),(function(c){c.createObjectStore(Yx,{keyPath:Mre})})(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore(Qx,{keyPath:Lre});l.createIndex(ST,Vre,{unique:!1}),l.createIndex(aj,jre,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>(function(c){let l=c.createObjectStore(Z2,{keyPath:bre});l.createIndex(V2,xre),l.createIndex(rj,Cre)})(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(lh))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>(function(c){c.createObjectStore(IN,{keyPath:Nre,autoIncrement:!0}).createIndex(IT,Pre,{unique:!1}),c.createObjectStore(yy,{keyPath:kre}).createIndex(oj,Rre,{unique:!1}),c.createObjectStore(_y,{keyPath:Ore}).createIndex(sj,Fre,{unique:!1})})(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(yy).clear()}).next(()=>{t.objectStore(_y).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(SN,{keyPath:Bre})})(e)})),r<18&&i>=18&&eI()&&(s=s.next(()=>{t.objectStore(yy).clear()}).next(()=>{t.objectStore(_y).clear()})),s}yi(e){let t=0;return e.store(lh).X((r,i)=>{t+=gx(i)}).next(()=>{let r={byteSize:t};return e.store(Ty).put(ET,r)})}pi(e){let t=e.store(Dy),r=e.store(fc);return t.j().next(i=>we.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,Dd],[o.userId,o.lastAcknowledgedBatchId]);return r.j(ph,s).next(a=>we.forEach(a,c=>{wt(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let l=dh(this.serializer,c);return sB(e,o.userId,l).next(()=>{})}))}))}wi(e){let t=e.store(Zg),r=e.store(lh);return e.store(vh).get(X2).next(i=>{let o=[];return r.X((s,a)=>{let c=new En(s),l=(function(h){return[0,Io(h)]})(c);o.push(t.get(l).next(u=>u?we.resolve():(h=>t.put({targetId:0,path:Io(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>we.waitFor(o))})}Si(e,t){e.createObjectStore(My,{keyPath:Are});let r=t.store(My),i=new zy,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Io(c)})}};return t.store(lh).X({Z:!0},(s,a)=>{let c=new En(s);return o(c.popLast())}).next(()=>t.store(Yg).X({Z:!0},([s,a,c],l)=>{let u=il(a);return o(u.popLast())}))}bi(e){let t=e.store(Qg);return t.X((r,i)=>{let o=my(i),s=nB(this.serializer,o);return t.put(s)})}Di(e,t){let r=t.store(lh),i=[];return r.X((o,s)=>{let a=t.store(Z2),c=(function(h){return h.document?new nt(En.fromString(h.document.name).popFirst(5)):h.noDocument?nt.fromSegments(h.noDocument.path):h.unknownDocument?nt.fromSegments(h.unknownDocument.path):dt(36783)})(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>we.waitFor(i))}Ci(e,t){let r=t.store(fc),i=uB(this.serializer),o=new Hy(wx.Vi,this.serializer.gt);return r.j().next(s=>{let a=new Map;return s.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:fn();dh(this.serializer,c).keys().forEach(h=>u=u.add(h)),a.set(c.userId,u)}),we.forEach(a,(c,l)=>{let u=new yi(l),h=fx.yt(this.serializer,u),m=o.getIndexManager(u),g=mx.yt(u,this.serializer,m,o.referenceDelegate);return new _x(i,g,h,m).recalculateAndSaveOverlaysForDocumentKeys(new Ny(t,Zs.ue),c).next()})})}};function D7(n){n.createObjectStore(Zg,{keyPath:Ire}).createIndex(EN,Sre,{unique:!0}),n.createObjectStore(Qg,{keyPath:"targetId"}).createIndex(ij,Ere,{unique:!0}),n.createObjectStore(vh)}var Ed="IndexedDbPersistence",sT=18e5,aT=5e3,cT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",dB="main",CM=class n{constructor(e,t,r,i,o,s,a,c,l,u,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=s,this.document=a,this.Mi=l,this.xi=u,this.Oi=h,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=m=>Promise.resolve(),!n.C())throw new je(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uM(this,i),this.Qi=t+dB,this.serializer=new ux(c),this.$i=new Pd(this.Qi,this.Oi,new xM(this.serializer)),this.li=new XT,this.hi=new aM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uB(this.serializer),this.Ti=new ZT,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,u===!1&&ii(Ed,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new je(Ie.FAILED_PRECONDITION,cT);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new Zs(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>ee(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>ee(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>O2(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(qd(e))return $e(Ed,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e(Ed,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return py(e).get(Ng).next(t=>we.resolve(this.Xi(t)))}es(e){return O2(e).delete(this.clientId)}ts(){return ee(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,sT)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Li(t,Xg);return r.j().next(i=>{let o=this.rs(i,sT),s=i.filter(a=>o.indexOf(a)===-1);return we.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?we.resolve(!0):py(e).get(Ng).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,aT)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new je(Ie.FAILED_PRECONDITION,cT);return!1}}return!(!this.networkEnabled||!this.inForeground)||O2(e).j().next(r=>this.rs(r,aT).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&$e(Ed,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return ee(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[Xy,Xg],e=>{let t=new Ny(e,Zs.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>O2(e).j().next(t=>this.rs(t,sT).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return mx.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sM(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return fx.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){$e(Ed,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=(function(c){return c===18?qre:c===17?dj:c===16?zre:c===15?AN:c===14?uj:c===13?lj:c===12?Ure:c===11?cj:void dt(60245)})(this.Oi),s;return this.$i.runTransaction(e,i,o,a=>(s=new Ny(a,this.ui?this.ui.next():Zs.ue),t==="readwrite-primary"?this.Ji(s).next(c=>!!c||this.Hi(s)).next(c=>{if(!c)throw ii(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new je(Ie.FAILED_PRECONDITION,J7);return r(s)}).next(c=>this.Zi(s).next(()=>c)):this.Ts(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ts(e){return py(e).get(Ng).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,aT)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new je(Ie.FAILED_PRECONDITION,cT)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return py(e).put(Ng,t)}static C(){return Pd.C()}Yi(e){let t=py(e);return t.get(Ng).next(r=>this.Xi(r)?($e(Ed,"Releasing primary lease."),t.delete(Ng)):we.resolve())}ns(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ii(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;JE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return $e(Ed,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ii(Ed,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){ii("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function py(n){return Li(n,Xy)}function O2(n){return Li(n,Xg)}function LN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var EM=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=fn(),i=fn();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var IM=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xx=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return JE()?8:ej(S0())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new IM;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Lg()<=Rc.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",Vg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),we.resolve()):(Lg()<=Rc.DEBUG&&$e("QueryEngine","Query:",Vg(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Lg()<=Rc.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",Vg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zo(t))):we.resolve())}ps(e,t){if(JV(t))return we.resolve(null);let r=Zo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=sx(t,null,"F"),r=Zo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fn(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,sx(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return JV(t)||i.isEqual(Nt.min())?we.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?we.resolve(null):(Lg()<=Rc.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vg(t)),this.vs(e,s,t,Z7(i,Wg)).next(a=>a))})}bs(e,t){let r=new or(Mj(e));return t.forEach((i,o)=>{t_(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Lg()<=Rc.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Vg(t)),this.gs.getDocumentsMatchingQuery(e,t,Na.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var VN="LocalStore",xie=3e8,SM=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Cr($t),this.Ms=new pc(o=>wh(o),Jy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _x(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function fB(n,e,t,r){return new SM(n,e,t,r)}function hB(n,e){return ee(this,null,function*(){let t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=fn();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Cie(n,e){let t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let h=l.batch,m=h.keys(),g=we.resolve();return m.forEach(b=>{g=g.next(()=>u.getEntry(c,b)).next(I=>{let T=l.docVersions.get(b);wt(T!==null,48541),I.version.compareTo(T)<0&&(h.applyToRemoteDocument(I,l),I.isValidDocument()&&(I.setReadTime(l.commitVersion),u.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=fn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function pB(n){let e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Eie(n,e){let t=it(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((u,h)=>{let m=i.get(h);if(!m)return;a.push(t.hi.removeMatchingKeys(o,u.removedDocuments,h).next(()=>t.hi.addMatchingKeys(o,u.addedDocuments,h)));let g=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(ai.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(h,g),(function(I,T,N){return I.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=xie?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(m,g,u)&&a.push(t.hi.updateTargetData(o,g))});let c=_s(),l=fn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(gB(o,s,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!r.isEqual(Nt.min())){let u=t.hi.getLastRemoteSnapshotVersion(o).next(h=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return we.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function gB(n,e,t){let r=fn(),i=fn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=_s();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Nt.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):$e(VN,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function Iie(n,e){let t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dd),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function am(n,e){let t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,we.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new om(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function cm(n,e,t){return ee(this,null,function*(){let r=it(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!qd(s))throw s;$e(VN,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Cx(n,e,t){let r=it(n),i=Nt.min(),o=fn();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,u){let h=it(c),m=h.Ms.get(u);return m!==void 0?we.resolve(h.Fs.get(m)):h.hi.getTargetData(l,u)})(r,s,Zo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Nt.min(),t?o:fn())).next(a=>(yB(r,Tj(e),a),{documents:a,qs:o})))}function mB(n,e){let t=it(n),r=it(t.hi),i=t.Fs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function vB(n,e){let t=it(n),r=t.xs.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Os.getAllFromCollectionGroup(i,e,Z7(r,Wg),Number.MAX_SAFE_INTEGER)).then(i=>(yB(t,e,i),i))}function yB(n,e,t){let r=n.xs.get(e)||Nt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}function Sie(n,e,t,r){return ee(this,null,function*(){let i=it(n),o=fn(),s=_s();for(let l of t){let u=e.Qs(l.metadata.name);l.document&&(o=o.add(u));let h=e.$s(l);h.setReadTime(e.Us(l.metadata.readTime)),s=s.insert(u,h)}let a=i.Os.newChangeBuffer({trackRemovals:!0}),c=yield am(i,(function(u){return Zo(mm(En.fromString(`__bundle__/docs/${u}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>gB(l,a,s).next(u=>(a.apply(l),u)).next(u=>i.hi.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.hi.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,u.Ls,u.ks)).next(()=>u.Ls)))})}function Aie(r,i){return ee(this,arguments,function*(n,e,t=fn()){let o=yield am(n,Zo(ON(e.bundledQuery))),s=it(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=si(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Ti.saveNamedQuery(a,e);let l=o.withResumeToken(ai.EMPTY_BYTE_STRING,c);return s.Fs=s.Fs.insert(l.targetId,l),s.hi.updateTargetData(a,l).next(()=>s.hi.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.hi.addMatchingKeys(a,t,o.targetId)).next(()=>s.Ti.saveNamedQuery(a,e))})})}var _B="firestore_clients";function T7(n,e){return`${_B}_${n}_${e}`}var wB="firestore_mutations";function M7(n,e,t){let r=`${wB}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var bB="firestore_targets";function lT(n,e){return`${bB}_${n}_${e}`}var rl="SharedClientState",Ex=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ks(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new je(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ii(rl,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Cy=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new je(r.error.code,r.error.message))),o?new n(e,r.state,i):(ii(rl,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ix=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=PN();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=tj(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ii(rl,`Failed to parse client data for instance '${e}': ${t}`),null)}},AM=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ii(rl,`Failed to parse online state: ${e}`),null)}},$y=class{constructor(){this.activeTargetIds=PN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Ey=class{constructor(e,t,r,i,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new Cr($t),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=T7(this.persistenceKey,this.js),this.eo=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new $y),this.no=new RegExp(`^${_B}_${s}_([^_]*)$`),this.ro=new RegExp(`^${wB}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${bB}_${s}_(\\d+)$`),this.so=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.oo=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return ee(this,null,function*(){let e=yield this.syncEngine.Ps();for(let r of e){if(r===this.js)continue;let i=this.getItem(T7(this.persistenceKey,r));if(i){let o=Ix.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();let t=this.storage.getItem(this.so);if(t){let r=this.ao(t);r&&this.uo(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(lT(this.persistenceKey,e));if(i){let o=Cy.Ks(e,i);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lT(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return $e(rl,"READ",e,t),t}setItem(e,t){$e(rl,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e(rl,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if($e(rl,"EVENT",t.key,t.newValue),t.key===this.Xs)return void ii("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>ee(this,null,function*(){if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){let r=this.Ao(t.key);return this.Ro(r,null)}{let r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){let r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){let r=(function(o){let s=Zs.ue;if(o!=null)try{let a=JSON.parse(o);wt(typeof a=="number",30636,{wo:o}),s=a}catch(a){ii(rl,"Failed to read sequence number from WebStorage",a)}return s})(t.newValue);r!==Zs.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){let r=this.So(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){let i=new Ex(this.currentUser,e,t,r),o=M7(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){let t=M7(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){let t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){let i=lT(this.persistenceKey,e),o=new Cy(e,t,r);this.setItem(i,o.Ws())}Eo(e){let t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){let t=this.no.exec(e);return t?t[1]:null}Vo(e,t){let r=this.Ao(e);return Ix.Ks(r,t)}mo(e,t){let r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Ex.Ks(new yi(o),i,t)}po(e,t){let r=this.io.exec(e),i=Number(r[1]);return Cy.Ks(i,t)}ao(e){return AM.Ks(e)}So(e){return JSON.parse(e)}fo(e){return ee(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);$e(rl,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Ys.insert(e,t):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Co(s,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=PN();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Sx=class{constructor(){this.Fo=new $y,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new $y,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var DM=class{xo(e){}shutdown(){}};var N7="ConnectivityMonitor",Ax=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){$e(N7,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){$e(N7,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var F2=null;function TM(){return F2===null?F2=(function(){return 268435456+Math.round(2147483648*Math.random())})():F2++,"0x"+F2.toString(16)}var uT="RestConnection",Die={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},MM=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===tx?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=TM(),a=this.Go(e,t.toUriEncodedString());$e(uT,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),u=fp(l);return this.jo(e,a,c,r,u).then(h=>($e(uT,`Received RPC '${e}' ${s}: `,h),h),h=>{throw bs(uT,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=Die[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var NM=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Co="WebChannelConnection",PM=class extends MM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=TM();return new Promise((a,c)=>{let l=new eT;l.setWithCredentials(!0),l.listenOnce(tT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case uy.NO_ERROR:let h=l.getResponseJson();$e(Co,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case uy.TIMEOUT:$e(Co,`RPC '${e}' ${s} timed out`),c(new je(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case uy.HTTP_ERROR:let m=l.getStatus();if($e(Co,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let b=g?.error;if(b&&b.status&&b.message){let I=(function(N){let Y=N.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(Y)>=0?Y:Ie.UNKNOWN})(b.status);c(new je(I,b.message))}else c(new je(Ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new je(Ie.UNAVAILABLE,"Connection failed."));break;default:dt(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{$e(Co,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);$e(Co,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}P_(e,t,r){let i=TM(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=iT(),a=rT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");$e(Co,`Creating RPC '${e}' stream ${i}: ${u}`,c);let h=s.createWebChannel(u,c);this.T_(h);let m=!1,g=!1,b=new NM({Ho:T=>{g?$e(Co,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(m||($e(Co,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),$e(Co,`RPC '${e}' stream ${i} sending:`,T),h.send(T))},Yo:()=>h.close()}),I=(T,N,Y)=>{T.listen(N,j=>{try{Y(j)}catch(W){setTimeout(()=>{throw W},0)}})};return I(h,Mg.EventType.OPEN,()=>{g||($e(Co,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),I(h,Mg.EventType.CLOSE,()=>{g||(g=!0,$e(Co,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(h))}),I(h,Mg.EventType.ERROR,T=>{g||(g=!0,bs(Co,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),b.__(new je(Ie.UNAVAILABLE,"The operation could not be completed")))}),I(h,Mg.EventType.MESSAGE,T=>{var N;if(!g){let Y=T.data[0];wt(!!Y,16349);let j=Y,W=j?.error||((N=j[0])===null||N===void 0?void 0:N.error);if(W){$e(Co,`RPC '${e}' stream ${i} received error:`,W);let oe=W.status,he=(function(S){let V=mi[S];if(V!==void 0)return qj(V)})(oe),z=W.message;he===void 0&&(he=Ie.INTERNAL,z="Unknown error status: "+oe+" with message "+W.message),g=!0,b.__(new je(he,z)),h.close()}else $e(Co,`RPC '${e}' stream ${i} received:`,Y),b.a_(Y)}}),I(a,nT.STAT_EVENT,T=>{T.stat===N2.PROXY?$e(Co,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===N2.NOPROXY&&$e(Co,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function xB(){return typeof window<"u"?window:null}function H2(){return typeof document<"u"?document:null}function n_(n){return new GT(n,!0)}var Gy=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var P7="PersistentStream",Dx=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Gy(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return ee(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return ee(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return ee(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(ii(t.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new je(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>ee(this,null,function*(){this.state=0,this.start()}))}G_(e){return $e(P7,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():($e(P7,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},kM=class extends Dx{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=die(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Nt.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Nt.min():s.readTime?si(s.readTime):Nt.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=YT(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=ix(c)?{documents:Qj(o,c)}:{query:Zj(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Hj(o,s.resumeToken);let l=WT(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Nt.min())>0){a.readTime=im(o,s.snapshotVersion.toTimestamp());let l=WT(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=hie(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=YT(this.serializer),t.removeTarget=e,this.k_(t)}},RM=class extends Dx{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=fie(e.writeResults,e.commitTime),r=si(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=YT(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Uy(this.serializer,r))};this.k_(t)}};var OM=class{},FM=class extends OM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new je(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,KT(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new je(Ie.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,KT(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new je(Ie.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},LM=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ii(t),this._a=!1):$e("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Eh="RemoteStore",VM=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>ee(this,null,function*(){$d(this)&&($e(Eh,"Restarting streams for network reachability change."),yield(function(c){return ee(this,null,function*(){let l=it(c);l.Ia.add(4),yield vm(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield r_(l)})})(this))}))}),this.Aa=new LM(r,i)}};function r_(n){return ee(this,null,function*(){if($d(n))for(let e of n.da)yield e(!0)})}function vm(n){return ee(this,null,function*(){for(let e of n.da)yield e(!1)})}function eC(n,e){let t=it(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),UN(t)?BN(t):_m(t).x_()&&jN(t,e))}function lm(n,e){let t=it(n),r=_m(t);t.Ta.delete(e),r.x_()&&CB(t,e),t.Ta.size===0&&(r.x_()?r.B_():$d(t)&&t.Aa.set("Unknown"))}function jN(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nt.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_m(n).H_(e)}function CB(n,e){n.Ra.$e(e),_m(n).Y_(e)}function BN(n){n.Ra=new $T({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),_m(n).start(),n.Aa.aa()}function UN(n){return $d(n)&&!_m(n).M_()&&n.Ta.size>0}function $d(n){return it(n).Ia.size===0}function EB(n){n.Ra=void 0}function Tie(n){return ee(this,null,function*(){n.Aa.set("Online")})}function Mie(n){return ee(this,null,function*(){n.Ta.forEach((e,t)=>{jN(n,e)})})}function Nie(n,e){return ee(this,null,function*(){EB(n),UN(n)?(n.Aa.la(e),BN(n)):n.Aa.set("Unknown")})}function Pie(n,e,t){return ee(this,null,function*(){if(n.Aa.set("Online"),e instanceof cx&&e.state===2&&e.cause)try{yield(function(i,o){return ee(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){$e(Eh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Tx(n,r)}else if(e instanceof $g?n.Ra.Ye(e):e instanceof ax?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Nt.min()))try{let r=yield pB(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.Ta.get(l);u&&o.Ta.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.Ta.get(c);if(!u)return;o.Ta.set(c,u.withResumeToken(ai.EMPTY_BYTE_STRING,u.snapshotVersion)),CB(o,c);let h=new om(u.target,c,l,u.sequenceNumber);jN(o,h)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){$e(Eh,"Failed to raise snapshot:",r),yield Tx(n,r)}})}function Tx(n,e,t){return ee(this,null,function*(){if(!qd(e))throw e;n.Ia.add(1),yield vm(n),n.Aa.set("Offline"),t||(t=()=>pB(n.localStore)),n.asyncQueue.enqueueRetryable(()=>ee(null,null,function*(){$e(Eh,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield r_(n)}))})}function IB(n,e){return e().catch(t=>Tx(n,t,e))}function ym(n){return ee(this,null,function*(){let e=it(n),t=Bd(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Dd;for(;kie(e);)try{let i=yield Iie(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Rie(e,i)}catch(i){yield Tx(e,i)}SB(e)&&AB(e)})}function kie(n){return $d(n)&&n.Pa.length<10}function Rie(n,e){n.Pa.push(e);let t=Bd(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function SB(n){return $d(n)&&!Bd(n).M_()&&n.Pa.length>0}function AB(n){Bd(n).start()}function Oie(n){return ee(this,null,function*(){Bd(n).na()})}function Fie(n){return ee(this,null,function*(){let e=Bd(n);for(let t of n.Pa)e.X_(t.mutations)})}function Lie(n,e,t){return ee(this,null,function*(){let r=n.Pa.shift(),i=zT.from(r,e,t);yield IB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ym(n)})}function Vie(n,e){return ee(this,null,function*(){e&&Bd(n).Z_&&(yield(function(r,i){return ee(this,null,function*(){if((function(s){return zj(s)&&s!==Ie.ABORTED})(i.code)){let o=r.Pa.shift();Bd(r).N_(),yield IB(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ym(r)}})})(n,e)),SB(n)&&AB(n)})}function k7(n,e){return ee(this,null,function*(){let t=it(n);t.asyncQueue.verifyOperationInProgress(),$e(Eh,"RemoteStore received new credentials");let r=$d(t);t.Ia.add(3),yield vm(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield r_(t)})}function jM(n,e){return ee(this,null,function*(){let t=it(n);e?(t.Ia.delete(2),yield r_(t)):e||(t.Ia.add(2),yield vm(t),t.Aa.set("Unknown"))})}function _m(n){return n.Va||(n.Va=(function(t,r,i){let o=it(t);return o.ia(),new kM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:Tie.bind(null,n),e_:Mie.bind(null,n),n_:Nie.bind(null,n),J_:Pie.bind(null,n)}),n.da.push(e=>ee(null,null,function*(){e?(n.Va.N_(),UN(n)?BN(n):n.Aa.set("Unknown")):(yield n.Va.stop(),EB(n))}))),n.Va}function Bd(n){return n.ma||(n.ma=(function(t,r,i){let o=it(t);return o.ia(),new RM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Oie.bind(null,n),n_:Vie.bind(null,n),ea:Fie.bind(null,n),ta:Lie.bind(null,n)}),n.da.push(e=>ee(null,null,function*(){e?(n.ma.N_(),yield ym(n)):(yield n.ma.stop(),n.Pa.length>0&&($e(Eh,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var BM=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function wm(n,e){if(ii("AsyncQueue",`${e}: ${n}`),qd(n))return new je(Ie.UNAVAILABLE,`${e}: ${n}`);throw n}var Mx=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||nt.comparator(t.key,r.key):(t,r)=>nt.comparator(t.key,r.key),this.keyedMap=gy(),this.sortedSet=new Cr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Nx=class{constructor(){this.fa=new Cr(nt.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):dt(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},um=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Mx.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&e_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var UM=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},zM=class{constructor(){this.queries=R7(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=it(t),o=i.queries;i.queries=R7(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new je(Ie.ABORTED,"Firestore shutting down"))}};function R7(){return new pc(n=>Dj(n),e_)}function zN(n,e){return ee(this,null,function*(){let t=it(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new UM,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=wm(s,`Initialization of query '${Vg(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&HN(t)})}function qN(n,e){return ee(this,null,function*(){let t=it(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function jie(n,e){let t=it(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&HN(t)}function Bie(n,e,t){let r=it(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function HN(n){n.Da.forEach(e=>{e.next()})}var qM,O7;(O7=qM||(qM={})).Fa="default",O7.Cache="cache";var Wy=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new um(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=um.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==qM.Cache}};var HM=class{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}};var Px=class{constructor(e){this.serializer=e}Qs(e){return al(this.serializer,e)}$s(e){return e.metadata.exists?Yj(this.serializer,e.document,!1):wi.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return si(e)}},$M=class{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=DB(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=En.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){let t=new Map,r=new Px(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Qs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||fn()).add(o);t.set(s,a)}}return t}za(e){return ee(this,null,function*(){let t=yield Sie(e,new Px(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(let i of this.Ua)yield Aie(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}})}};function DB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var kx=class{constructor(e){this.key=e}},Rx=class{constructor(e){this.key=e}},Ox=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fn(),this.mutatedKeys=fn(),this.Xa=Mj(e),this.eu=new Mx(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Nx,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let m=i.get(u),g=t_(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),T=!1;m&&g?m.data.isEqual(g.data)?b!==I&&(r.track({type:3,doc:g}),T=!0):this.iu(m,g)||(r.track({type:2,doc:g}),T=!0,(c&&this.Xa(g,c)>0||l&&this.Xa(g,l)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),T=!0):m&&!g&&(r.track({type:1,doc:m}),T=!0,(c||l)&&(a=!0)),T&&(g?(s=s.add(g),o=I?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((u,h)=>(function(g,b){let I=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt(20277,{At:T})}};return I(g)-I(b)})(u.type,h.type)||this.Xa(u.doc,h.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new um(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Nx,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fn(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Rx(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new kx(r))}),t}uu(e){this.Ha=e.qs,this.Za=fn();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return um.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Gd="SyncEngine",GM=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},WM=class{constructor(e){this.key=e,this.lu=!1}},KM=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new pc(a=>Dj(a),e_),this.Tu=new Map,this.Iu=new Set,this.du=new Cr(nt.comparator),this.Eu=new Map,this.Au=new qy,this.Ru={},this.Vu=new Map,this.mu=sm.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Uie(n,e,t=!0){return ee(this,null,function*(){let r=tC(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield TB(r,e,t,!0),i})}function zie(n,e){return ee(this,null,function*(){let t=tC(n);yield TB(t,e,!0,!1)})}function TB(n,e,t,r){return ee(this,null,function*(){let i=yield am(n.localStore,Zo(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield $N(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&eC(n.remoteStore,i),a})}function $N(n,e,t,r,i){return ee(this,null,function*(){n.gu=(h,m,g)=>(function(I,T,N,Y){return ee(this,null,function*(){let j=T.view.nu(N);j.Ds&&(j=yield Cx(I.localStore,T.query,!1).then(({documents:z})=>T.view.nu(z,j)));let W=Y&&Y.targetChanges.get(T.targetId),oe=Y&&Y.targetMismatches.get(T.targetId)!=null,he=T.view.applyChanges(j,I.isPrimaryClient,W,oe);return YM(I,T.targetId,he._u),he.snapshot})})(n,h,m,g);let o=yield Cx(n.localStore,e,!0),s=new Ox(e,o.qs),a=s.nu(o.documents),c=jy.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);YM(n,t,l._u);let u=new GM(e,t,s);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function qie(n,e,t){return ee(this,null,function*(){let r=it(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!e_(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield cm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&lm(r.remoteStore,i.targetId),dm(r,i.targetId)}).catch(zd))):(dm(r,i.targetId),yield cm(r.localStore,i.targetId,!0))})}function Hie(n,e){return ee(this,null,function*(){let t=it(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lm(t.remoteStore,r.targetId))})}function $ie(n,e,t){return ee(this,null,function*(){let r=YN(n);try{let i=yield(function(s,a){let c=it(s),l=gr.now(),u=a.reduce((g,b)=>g.add(b.key),fn()),h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=_s(),I=fn();return c.Os.getEntries(g,u).next(T=>{b=T,b.forEach((N,Y)=>{Y.isValidDocument()||(I=I.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,b)).next(T=>{h=T;let N=[];for(let Y of a){let j=iie(Y,h.get(Y.key).overlayedDocument);j!=null&&N.push(new gc(Y.key,j,bj(j.value.mapValue),Gr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,N,a)}).next(T=>{m=T;let N=T.applyToLocalDocumentSet(h,I);return c.documentOverlayCache.saveOverlays(g,T.batchId,N)})}).then(()=>({batchId:m.batchId,changes:Pj(h)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new Cr($t)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield mu(r,i.changes),yield ym(r.remoteStore)}catch(i){let o=wm(i,"Failed to persist write");t.reject(o)}})}function MB(n,e){return ee(this,null,function*(){let t=it(n);try{let r=yield Eie(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?wt(s.lu,14607):i.removedDocuments.size>0&&(wt(s.lu,42227),s.lu=!1))}),yield mu(t,r,e)}catch(r){yield zd(r)}})}function F7(n,e,t){let r=it(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=it(s);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(let m of h.wa)m.va(a)&&(l=!0)}),l&&HN(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Gie(n,e,t){return ee(this,null,function*(){let r=it(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Cr(nt.comparator);s=s.insert(o,wi.newNoDocument(o,Nt.min()));let a=fn().add(o),c=new Vy(Nt.min(),new Map,new Cr($t),s,a);yield MB(r,c),r.du=r.du.remove(o),r.Eu.delete(e),KN(r)}else yield cm(r.localStore,e,!1).then(()=>dm(r,e,t)).catch(zd)})}function Wie(n,e){return ee(this,null,function*(){let t=it(n),r=e.batch.batchId;try{let i=yield Cie(t.localStore,e);WN(t,r,null),GN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield mu(t,i)}catch(i){yield zd(i)}})}function Kie(n,e,t){return ee(this,null,function*(){let r=it(n);try{let i=yield(function(s,a){let c=it(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(wt(h!==null,37113),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(r.localStore,e);WN(r,e,t),GN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield mu(r,i)}catch(i){yield zd(i)}})}function Yie(n,e){return ee(this,null,function*(){let t=it(n);$d(t.remoteStore)||$e(Gd,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield(function(s){let a=it(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))})(t.localStore);if(r===Dd)return void e.resolve();let i=t.Vu.get(r)||[];i.push(e),t.Vu.set(r,i)}catch(r){let i=wm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function GN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function WN(n,e,t){let r=it(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function dm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||NB(n,r)})}function NB(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(lm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),KN(n))}function YM(n,e,t){for(let r of t)r instanceof kx?(n.Au.addReference(r.key,e),Qie(n,r)):r instanceof Rx?($e(Gd,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||NB(n,r.key)):dt(19791,{yu:r})}function Qie(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||($e(Gd,"New document in limbo: "+t),n.Iu.add(r),KN(n))}function KN(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new nt(En.fromString(e)),r=n.mu.next();n.Eu.set(r,new WM(t)),n.du=n.du.insert(t,r),eC(n.remoteStore,new om(Zo(mm(t.path)),r,"TargetPurposeLimboResolution",Zs.ue))}}function mu(n,e,t){return ee(this,null,function*(){let r=it(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=EM.Es(c.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,l){return ee(this,null,function*(){let u=it(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>we.forEach(l,m=>we.forEach(m.Is,g=>u.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>we.forEach(m.ds,g=>u.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!qd(h))throw h;$e(VN,"Failed to update sequence numbers: "+h)}for(let h of l){let m=h.targetId;if(!h.fromCache){let g=u.Fs.get(m),b=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(b);u.Fs=u.Fs.insert(m,I)}}})})(r.localStore,o))})}function Zie(n,e){return ee(this,null,function*(){let t=it(n);if(!t.currentUser.isEqual(e)){$e(Gd,"User change. New user:",e.toKey());let r=yield hB(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new je(Ie.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield mu(t,r.Bs)}})}function Xie(n,e){let t=it(n),r=t.Eu.get(e);if(r&&r.lu)return fn().add(r.key);{let i=fn(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function Jie(n,e){return ee(this,null,function*(){let t=it(n),r=yield Cx(t.localStore,e.query,!0),i=e.view.uu(r);return t.isPrimaryClient&&YM(t,e.targetId,i._u),i})}function eoe(n,e){return ee(this,null,function*(){let t=it(n);return vB(t.localStore,e).then(r=>mu(t,r))})}function toe(n,e,t,r){return ee(this,null,function*(){let i=it(n),o=yield(function(a,c){let l=it(a),u=it(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.Xn(h,c).next(m=>m?l.localDocuments.getDocuments(h,m):we.resolve(null)))})(i.localStore,e);o!==null?(t==="pending"?yield ym(i.remoteStore):t==="acknowledged"||t==="rejected"?(WN(i,e,r||null),GN(i,e),(function(a,c){it(it(a).mutationQueue).rr(c)})(i.localStore,e)):dt(6720,"Unknown batchState",{wu:t}),yield mu(i,o)):$e(Gd,"Cannot apply mutation batch with id: "+e)})}function noe(n,e){return ee(this,null,function*(){let t=it(n);if(tC(t),YN(t),e===!0&&t.fu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield L7(t,r.toArray());t.fu=!0,yield jM(t.remoteStore,!0);for(let o of i)eC(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){let r=[],i=Promise.resolve();t.Tu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(dm(t,s),cm(t.localStore,s,!0))),lm(t.remoteStore,s)}),yield i,yield L7(t,r),(function(s){let a=it(s);a.Eu.forEach((c,l)=>{lm(a.remoteStore,l)}),a.Au.jr(),a.Eu=new Map,a.du=new Cr(nt.comparator)})(t),t.fu=!1,yield jM(t.remoteStore,!1)}})}function L7(n,e,t){return ee(this,null,function*(){let r=it(n),i=[],o=[];for(let s of e){let a,c=r.Tu.get(s);if(c&&c.length!==0){a=yield am(r.localStore,Zo(c[0]));for(let l of c){let u=r.Pu.get(l),h=yield Jie(r,u);h.snapshot&&o.push(h.snapshot)}}else{let l=yield mB(r.localStore,s);a=yield am(r.localStore,l),yield $N(r,PB(l),s,!1,a.resumeToken)}i.push(a)}return r.hu.J_(o),i})}function PB(n){return Aj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function roe(n){return(function(t){return it(it(t).persistence).Ps()})(it(n).localStore)}function ioe(n,e,t,r){return ee(this,null,function*(){let i=it(n);if(i.fu)return void $e(Gd,"Ignoring unexpected query state notification.");let o=i.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield vB(i.localStore,Tj(o[0])),a=Vy.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ai.EMPTY_BYTE_STRING);yield mu(i,s,a);break}case"rejected":yield cm(i.localStore,e,!0),dm(i,e,r);break;default:dt(64155,t)}})}function ooe(n,e,t){return ee(this,null,function*(){let r=tC(n);if(r.fu){for(let i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$e(Gd,"Adding an already active target "+i);continue}let o=yield mB(r.localStore,i),s=yield am(r.localStore,o);yield $N(r,PB(o),s.targetId,!1,s.resumeToken),eC(r.remoteStore,s)}for(let i of t)r.Tu.has(i)&&(yield cm(r.localStore,i,!1).then(()=>{lm(r.remoteStore,i),dm(r,i)}).catch(zd))}})}function tC(n){let e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gie.bind(null,e),e.hu.J_=jie.bind(null,e.eventManager),e.hu.pu=Bie.bind(null,e.eventManager),e}function YN(n){let e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kie.bind(null,e),e}function soe(n,e,t){let r=it(n);(function(o,s,a){return ee(this,null,function*(){try{let c=yield s.getMetadata();if(yield(function(g,b){let I=it(g),T=si(b.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",N=>I.Ti.getBundleMetadata(N,b.id)).then(N=>!!N&&N.createTime.compareTo(T)>=0)})(o.localStore,c))return yield s.close(),a._completeWith((function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(DB(c));let l=new $M(c,s.serializer),u=yield s.Su();for(;u;){let m=yield l.Wa(u);m&&a._updateProgress(m),u=yield s.Su()}let h=yield l.za(o.localStore);return yield mu(o,h.Ja,void 0),yield(function(g,b){let I=it(g);return I.persistence.runTransaction("Save bundle","readwrite",T=>I.Ti.saveBundleMetadata(T,b))})(o.localStore,c),a._completeWith(h.progress),Promise.resolve(h.ja)}catch(c){return bs(Gd,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var QN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return ee(this,null,function*(){this.serializer=n_(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return fB(this.persistence,new xx,t.initialUser,this.serializer)}Du(t){return new Hy(wx.Vi,this.serializer)}bu(t){return new Sx}terminate(){return ee(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),QM=class extends QN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){wt(this.persistence.referenceDelegate instanceof bx,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new vx(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new Hy(r=>bx.Vi(r,t),this.serializer)}},Fx=class n extends QN{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return ee(this,null,function*(){yield QE(n.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield YN(this.Mu.syncEngine),yield ym(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return fB(this.persistence,new xx,e.initialUser,this.serializer)}Cu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new vx(r,e.asyncQueue,t)}Fu(e,t){let r=new CT(t,this.persistence);return new xT(e.asyncQueue,r)}Du(e){let t=LN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new CM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,xB(),H2(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Sx}},ZM=class n extends Fx{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return ee(this,null,function*(){yield QE(n.prototype,this,"initialize").call(this,e);let t=this.Mu.syncEngine;this.sharedClientState instanceof Ey&&(this.sharedClientState.syncEngine={Do:toe.bind(null,t),vo:ioe.bind(null,t),Co:ooe.bind(null,t),Ps:roe.bind(null,t),bo:eoe.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.ji(r=>ee(this,null,function*(){yield noe(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}bu(e){let t=xB();if(!Ey.C(t))throw new je(Ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=LN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ey(t,e.asyncQueue,r,e.clientId,e.initialUser)}},ZN=(()=>{class n{initialize(t,r){return ee(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>F7(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zie.bind(null,this.syncEngine),yield jM(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new zM})()}createDatastore(t){let r=n_(t.databaseInfo.databaseId),i=(function(s){return new PM(s)})(t.databaseInfo);return(function(s,a,c,l){return new FM(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new VM(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>F7(this.syncEngine,r,0),(function(){return Ax.C()?new Ax:new DM})())}createSyncEngine(t,r){return(function(o,s,a,c,l,u,h){let m=new KM(o,s,a,c,l,u);return h&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return ee(this,null,function*(){var t,r;yield(function(o){return ee(this,null,function*(){let s=it(o);$e(Eh,"RemoteStore shutting down."),s.Ia.add(5),yield vm(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function V7(n,e=10240){let t=0;return{read(){return ee(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return ee(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var fm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var XM=class{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new Fi,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}getMetadata(){return ee(this,null,function*(){return this.metadata.promise})}Su(){return ee(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return ee(this,null,function*(){let e=yield this.ku();if(e===null)return null;let t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);let i=yield this.Qu(r);return new HM(JSON.parse(i),e.length+r)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return ee(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Qu(e){return ee(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");let t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return ee(this,null,function*(){let e=yield this.Nu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var JM=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return ee(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new je(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield(function(i,o){return ee(this,null,function*(){let s=it(i),a={documents:o.map(h=>By(s.serializer,h))},c=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,En.emptyPath(),a,o.length),l=new Map;c.forEach(h=>{let m=uie(s.serializer,h);l.set(m.key.toString(),m)});let u=[];return o.forEach(h=>{let m=l.get(h.toString());wt(!!m,55234,{key:h}),u.push(m)}),u})})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new jd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return ee(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=nt.fromPath(r);this.mutations.push(new Oy(i,this.precondition(i)))}),yield(function(r,i){return ee(this,null,function*(){let o=it(r),s={writes:i.map(a=>Uy(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,En.emptyPath(),s)})})(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt(50498,{Wu:e.constructor.name});t=Nt.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new je(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nt.min())?Gr.exists(!1):Gr.updateTime(t):Gr.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new je(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gr.updateTime(t)}return Gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var eN=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new Gy(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>ee(this,null,function*(){let e=new JM(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!Zy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!zj(t)}return!1}};var Ud="FirestoreClient",tN=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yi.UNAUTHENTICATED,this.clientId=Iy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>ee(this,null,function*(){$e(Ud,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>($e(Ud,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>ee(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=wm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function dT(n,e){return ee(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),$e(Ud,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>ee(null,null,function*(){r.isEqual(i)||(yield hB(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{bs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{$e("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{bs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function j7(n,e){return ee(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield XN(n);$e(Ud,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>k7(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>k7(e.remoteStore,i)),n._onlineComponents=e})}function XN(n){return ee(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$e(Ud,"Using user provided OfflineComponentProvider");try{yield dT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;bs("Error using user provided cache. Falling back to memory cache: "+t),yield dT(n,new QN)}}else $e(Ud,"Using default OfflineComponentProvider"),yield dT(n,new QM(void 0));return n._offlineComponents})}function nC(n){return ee(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?($e(Ud,"Using user provided OnlineComponentProvider"),yield j7(n,n._uninitializedComponentsProvider._online)):($e(Ud,"Using default OnlineComponentProvider"),yield j7(n,new ZN))),n._onlineComponents})}function kB(n){return XN(n).then(e=>e.persistence)}function JN(n){return XN(n).then(e=>e.localStore)}function RB(n){return nC(n).then(e=>e.remoteStore)}function eP(n){return nC(n).then(e=>e.syncEngine)}function aoe(n){return nC(n).then(e=>e.datastore)}function hm(n){return ee(this,null,function*(){let e=yield nC(n),t=e.eventManager;return t.onListen=Uie.bind(null,e.syncEngine),t.onUnlisten=qie.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zie.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Hie.bind(null,e.syncEngine),t})}function coe(n){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){let e=yield kB(n),t=yield RB(n);return e.setNetworkEnabled(!0),(function(i){let o=it(i);return o.Ia.delete(0),r_(o)})(t)}))}function loe(n){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){let e=yield kB(n),t=yield RB(n);return e.setNetworkEnabled(!1),(function(i){return ee(this,null,function*(){let o=it(i);o.Ia.add(0),yield vm(o),o.Aa.set("Offline")})})(t)}))}function uoe(n,e){let t=new Fi;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o,s){return ee(this,null,function*(){try{let a=yield(function(l,u){let h=it(l);return h.persistence.runTransaction("read document","readonly",m=>h.localDocuments.getDocument(m,u))})(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new je(Ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=wm(a,`Failed to get document '${o} from cache`);s.reject(c)}})})(yield JN(n),e,t)})),t.promise}function OB(n,e,t={}){let r=new Fi;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(o,s,a,c,l){let u=new fm({next:m=>{u.Ou(),s.enqueueAndForget(()=>qN(o,h));let g=m.docs.has(a);!g&&m.fromCache?l.reject(new je(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?l.reject(new je(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),h=new Wy(mm(a.path),u,{includeMetadataChanges:!0,ka:!0});return zN(o,h)})(yield hm(n),n.asyncQueue,e,t,r)})),r.promise}function doe(n,e){let t=new Fi;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o,s){return ee(this,null,function*(){try{let a=yield Cx(i,o,!0),c=new Ox(o,a.qs),l=c.nu(a.documents),u=c.applyChanges(l,!1);s.resolve(u.snapshot)}catch(a){let c=wm(a,`Failed to execute query '${o} against cache`);s.reject(c)}})})(yield JN(n),e,t)})),t.promise}function FB(n,e,t={}){let r=new Fi;return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(o,s,a,c,l){let u=new fm({next:m=>{u.Ou(),s.enqueueAndForget(()=>qN(o,h)),m.fromCache&&c.source==="server"?l.reject(new je(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),h=new Wy(a,u,{includeMetadataChanges:!0,ka:!0});return zN(o,h)})(yield hm(n),n.asyncQueue,e,t,r)})),r.promise}function foe(n,e){let t=new fm(e);return n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o){it(i).Da.add(o),o.next()})(yield hm(n),t)})),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return(function(i,o){it(i).Da.delete(o)})(yield hm(n),t)}))}}function hoe(n,e,t,r){let i=(function(s,a){let c;return c=typeof s=="string"?_N().encode(s):s,(function(u,h){return new XM(u,h)})((function(u,h){if(u instanceof Uint8Array)return V7(u,h);if(u instanceof ArrayBuffer)return V7(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(t,n_(e));n.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){soe(yield eP(n),i,r)}))}function poe(n,e){return n.asyncQueue.enqueue(()=>ee(null,null,function*(){return(function(r,i){let o=it(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))})(yield JN(n),e)}))}function LB(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var B7=new Map;var VB="firestore.googleapis.com",U7=!0,Lx=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new je(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VB,this.ssl=U7}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:U7;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bie)throw new je(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LB((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new je(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new je(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new je(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ih=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fT;switch(r.type){case"firstParty":return new mT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new je(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return ee(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=B7.get(t);r&&($e("ComponentProvider","Removing Datastore"),B7.delete(t),r.terminate())})(this),Promise.resolve()}};function rC(n,e,t,r={}){var i;n=Pn(n,Ih);let o=fp(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(y1(`https://${c}`),w1("Firestore",!0)),s.host!==VB&&s.host!==c&&bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!gp(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=yi.MOCK_USER;else{u=_1(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new je(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new yi(m)}n._authCredentials=new hT(new $2(u,h))}}var so=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Zn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qy(t,n._jsonSchema))return new n(e,r||null,new nt(En.fromString(t.referencePath)))}};Zn._jsonSchemaVersion="firestore/documentReference/1.0",Zn._jsonSchema={type:_i("string",Zn._jsonSchemaVersion),referencePath:_i("string")};var cl=class n extends so{constructor(e,t,r){super(e,t,mm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new nt(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function i_(n,e,...t){if(n=bn(n),wN("collection","path",e),n instanceof Ih){let r=En.fromString(e,...t);return OV(r),new cl(n,null,r)}{if(!(n instanceof Zn||n instanceof cl))throw new je(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(En.fromString(e,...t));return OV(r),new cl(n.firestore,null,r)}}function tP(n,e){if(n=Pn(n,Ih),wN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new je(Ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new so(n,null,(function(r){return new hc(En.emptyPath(),r)})(e))}function Dh(n,e,...t){if(n=bn(n),arguments.length===1&&(e=Iy.newId()),wN("doc","path",e),n instanceof Ih){let r=En.fromString(e,...t);return RV(r),new Zn(n,null,new nt(r))}{if(!(n instanceof Zn||n instanceof cl))throw new je(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(En.fromString(e,...t));return RV(r),new Zn(n.firestore,n instanceof cl?n.converter:null,new nt(r))}}function o_(n,e){return n=bn(n),e=bn(e),(n instanceof Zn||n instanceof cl)&&(e instanceof Zn||e instanceof cl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function iC(n,e){return n=bn(n),e=bn(e),n instanceof so&&e instanceof so&&n.firestore===e.firestore&&e_(n._query,e._query)&&n.converter===e.converter}var z7="AsyncQueue",Vx=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Gy(this,"async_queue_retry"),this.oc=()=>{let r=H2();r&&$e(z7,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=H2();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=H2();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Fi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return ee(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qd(e))throw e;$e(z7,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ii("INTERNAL UNHANDLED ERROR: ",q7(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=BM.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&dt(47125,{hc:q7(this.tc)})}verifyOperationInProgress(){}Pc(){return ee(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function q7(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function nN(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var rN=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var jB=-1,jr=class extends Ih{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vx,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return ee(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Vx(e),this._firestoreClient=void 0,yield e}})}};function BB(n,e){let t=typeof n=="object"?n:Oc(),r=typeof n=="string"?n:e||tx,i=Ha(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=v1("firestore");o&&rC(i,...o)}return i}function ao(n){if(n._terminated)throw new je(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UB(n),n._firestoreClient}function UB(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,l,u){return new AT(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,LB(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new tN(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}function nP(n,e){bs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return zB(n,ZN.provider,{build:r=>new Fx(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function rP(n){return ee(this,null,function*(){bs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();zB(n,ZN.provider,{build:t=>new ZM(t,e.cacheSizeBytes)})})}function zB(n,e,t){if((n=Pn(n,jr))._firestoreClient||n._terminated)throw new je(Ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new je(Ie.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},UB(n)}function iP(n){if(n._initialized&&!n._terminated)throw new je(Ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Fi;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>ee(null,null,function*(){try{yield(function(r){return ee(this,null,function*(){if(!Pd.C())return Promise.resolve();let i=r+dB;yield Pd.delete(i)})})(LN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function oP(n){return(function(t){let r=new Fi;return t.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return Yie(yield eP(t),r)})),r.promise})(ao(n=Pn(n,jr)))}function sP(n){return coe(ao(n=Pn(n,jr)))}function aP(n){return loe(ao(n=Pn(n,jr)))}function cP(n,e){let t=ao(n=Pn(n,jr)),r=new rN;return hoe(t,n._databaseId,e,r),r}function lP(n,e){return poe(ao(n=Pn(n,jr)),e).then(t=>t?new so(n,null,t.query):null)}var Js=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ai.fromBase64String(e))}catch(t){throw new je(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qy(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Js._jsonSchemaVersion="firestore/bytes/1.0",Js._jsonSchema={type:_i("string",Js._jsonSchemaVersion),bytes:_i("string")};var mc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new je(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pu=class{constructor(e){this._methodName=e}};var ll=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Qy(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ll._jsonSchemaVersion="firestore/geoPoint/1.0",ll._jsonSchema={type:_i("string",ll._jsonSchemaVersion),latitude:_i("number"),longitude:_i("number")};var Td=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qy(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new je(Ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Td._jsonSchemaVersion="firestore/vectorValue/1.0",Td._jsonSchema={type:_i("string",Td._jsonSchemaVersion),vectorValues:_i("object")};var goe=/^__.*__$/,iN=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vd(e,this.data,t,this.fieldTransforms)}},jx=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gc(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function qB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt(40011,{Ec:n})}}var Bx=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ux(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(qB(this.Ec)&&goe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},oN=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||n_(e)}Dc(e,t,r,i=!1){return new Bx({Ec:e,methodName:t,bc:r,path:oi.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Th(n){let e=n._freezeSettings(),t=n_(n._databaseId);return new oN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oC(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);fP("Data must be an object, but it was:",s,r);let a=GB(r,s),c,l;if(o.merge)c=new Xs(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let h of o.mergeFields){let m=uN(e,h,t);if(!s.contains(m))throw new je(Ie.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);KB(u,m)||u.push(m)}c=new Xs(u),l=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=s.fieldTransforms;return new iN(new Eo(a),c,l)}var Ky=class n extends pu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function HB(n,e,t){return new Bx({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var sN=class n extends pu{_toFieldTransform(e){return new bh(e.path,new Fd)}isEqual(e){return e instanceof n}},aN=class n extends pu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=HB(this,e,!0),r=this.vc.map(o=>Mh(o,t)),i=new fu(r);return new bh(e.path,i)}isEqual(e){return e instanceof n&&gp(this.vc,e.vc)}},cN=class n extends pu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=HB(this,e,!0),r=this.vc.map(o=>Mh(o,t)),i=new hu(r);return new bh(e.path,i)}isEqual(e){return e instanceof n&&gp(this.vc,e.vc)}},lN=class n extends pu{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new Ld(e.serializer,Oj(e.serializer,this.Cc));return new bh(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function uP(n,e,t,r){let i=n.Dc(1,e,t);fP("Data must be an object, but it was:",i,r);let o=[],s=Eo.empty();Hd(r,(c,l)=>{let u=hP(e,c,t);l=bn(l);let h=i.gc(u);if(l instanceof Ky)o.push(u);else{let m=Mh(l,h);m!=null&&(o.push(u),s.set(u,m))}});let a=new Xs(o);return new jx(s,a,i.fieldTransforms)}function dP(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[uN(e,r,t)],c=[i];if(o.length%2!=0)throw new je(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(uN(e,o[m])),c.push(o[m+1]);let l=[],u=Eo.empty();for(let m=a.length-1;m>=0;--m)if(!KB(l,a[m])){let g=a[m],b=c[m];b=bn(b);let I=s.gc(g);if(b instanceof Ky)l.push(g);else{let T=Mh(b,I);T!=null&&(l.push(g),u.set(g,T))}}let h=new Xs(l);return new jx(u,h,s.fieldTransforms)}function $B(n,e,t,r=!1){return Mh(t,n.Dc(r?4:3,e))}function Mh(n,e){if(WB(n=bn(n)))return fP("Unsupported field value:",e,n),GB(n,e);if(n instanceof pu)return(function(r,i){if(!qB(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=Mh(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=bn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Oj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=gr.fromDate(r);return{timestampValue:im(i.serializer,o)}}if(r instanceof gr){let o=new gr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:im(i.serializer,o)}}if(r instanceof ll)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Js)return{bytesValue:Hj(i.serializer,r._byteString)};if(r instanceof Zn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:RN(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Td)return(function(s,a){return{mapValue:{fields:{[DN]:{stringValue:TN},[Jg]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return kN(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Wx(r)}`)})(n,e)}function GB(n,e){let t={};return fj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hd(n,(r,i)=>{let o=Mh(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function WB(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gr||n instanceof ll||n instanceof Js||n instanceof Zn||n instanceof pu||n instanceof Td)}function fP(n,e,t){if(!WB(t)||!Y7(t)){let r=Wx(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function uN(n,e,t){if((e=bn(e))instanceof mc)return e._internalPath;if(typeof e=="string")return hP(n,e);throw Ux("Field path arguments must be of type string or ",n,!1,void 0,t)}var moe=new RegExp("[~\\*/\\[\\]]");function hP(n,e,t){if(e.search(moe)>=0)throw Ux(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mc(...e.split("."))._internalPath}catch{throw Ux(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ux(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new je(Ie.INVALID_ARGUMENT,a+n+c)}function KB(n,e){return n.some(t=>t.isEqual(e))}var Sh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new dN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(sC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},dN=class extends Sh{data(){return super.data()}};function sC(n,e){return typeof e=="string"?hP(n,e):e instanceof mc?e._internalPath:e._delegate._internalPath}function YB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new je(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yy=class{},Ah=class extends Yy{};function vc(n,e,...t){let r=[];e instanceof Yy&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof fN).length,a=o.filter(c=>c instanceof zx).length;if(s>1||s>0&&a>0)throw new je(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var zx=class n extends Ah{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return ZB(e._query,t),new so(e.firestore,e.converter,BT(e._query,t))}_parse(e){let t=Th(e.firestore);return(function(o,s,a,c,l,u,h){let m;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new je(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){$7(h,u);let b=[];for(let I of h)b.push(H7(c,o,I));m={arrayValue:{values:b}}}else m=H7(c,o,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||$7(h,u),m=$B(a,s,h,u==="in"||u==="not-in");return xn.create(l,u,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function aC(n,e,t){let r=e,i=sC("where",n);return zx._create(i,r,t)}var fN=class n extends Yy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Qn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)ZB(s,c),s=BT(s,c)})(e._query,t),new so(e.firestore,e.converter,BT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var hN=class n extends Ah{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new je(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new je(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _h(o,s)})(e._query,this._field,this._direction);return new so(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new hc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function cC(n,e="asc"){let t=e,r=sC("orderBy",n);return hN._create(r,t)}var qx=class n extends Ah{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new so(e.firestore,e.converter,sx(e._query,this._limit,this._limitType))}};function pP(n){return Q7("limit",n),qx._create("limit",n,"F")}function gP(n){return Q7("limitToLast",n),qx._create("limitToLast",n,"L")}var Hx=class n extends Ah{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=QB(e,this.type,this._docOrFields,this._inclusive);return new so(e.firestore,e.converter,(function(i,o){return new hc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function mP(...n){return Hx._create("startAt",n,!0)}function vP(...n){return Hx._create("startAfter",n,!1)}var $x=class n extends Ah{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=QB(e,this.type,this._docOrFields,this._inclusive);return new so(e.firestore,e.converter,(function(i,o){return new hc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,t))}};function yP(...n){return $x._create("endBefore",n,!1)}function _P(...n){return $x._create("endAt",n,!0)}function QB(n,e,t,r){if(t[0]=bn(t[0]),t[0]instanceof Sh)return(function(o,s,a,c,l){if(!c)throw new je(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let h of Hg(o))if(h.field.isKeyField())u.push(yh(s,c.key));else{let m=c.data.field(h.field);if(Zx(m))throw new je(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let g=h.field.canonicalString();throw new je(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}u.push(m)}return new dl(u,l)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Th(n.firestore);return(function(s,a,c,l,u,h){let m=s.explicitOrderBy;if(u.length>m.length)throw new je(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let b=0;b<u.length;b++){let I=u[b];if(m[b].field.isKeyField()){if(typeof I!="string")throw new je(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof I}`);if(!NN(s)&&I.indexOf("/")!==-1)throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${I}' contains a slash.`);let T=s.path.child(En.fromString(I));if(!nt.isDocumentKey(T))throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);let N=new nt(T);g.push(yh(a,N))}else{let T=$B(c,l,I);g.push(T)}}return new dl(g,h)})(n._query,n.firestore._databaseId,i,e,t,r)}}function H7(n,e,t){if(typeof(t=bn(t))=="string"){if(t==="")throw new je(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NN(e)&&t.indexOf("/")!==-1)throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(En.fromString(t));if(!nt.isDocumentKey(r))throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yh(n,new nt(r))}if(t instanceof Zn)return yh(n,t._key);throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wx(t)}.`)}function $7(n,e){if(!Array.isArray(n)||n.length===0)throw new je(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZB(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new je(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new je(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var pm=class{convertValue(e,t="none"){switch(Rd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw dt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Hd(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Jg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Tr(s.doubleValue));return new Td(o)}convertGeoPoint(e){return new ll(Tr(e.latitude),Tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Xx(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Py(e));default:return null}}convertTimestamp(e){let t=uu(e);return new gr(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=En.fromString(e);wt(tB(r),9688,{name:e});let i=new kd(r.get(1),r.get(3)),o=new nt(r.popFirst(5));return i.isEqual(t)||ii(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function lC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var pN=class extends pm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}};var lu=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xo=class n extends Sh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(sC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new je(Ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xo._jsonSchema={type:_i("string",Xo._jsonSchemaVersion),bundleSource:_i("string","DocumentSnapshot"),bundleName:_i("string"),bundle:_i("string")};var Md=class extends Xo{data(e={}){return super.data(e)}},ws=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Md(this._firestore,this._userDataWriter,r.key,r,new lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Md(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Md(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:voe(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new je(Ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Iy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function voe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt(61501,{type:n})}}function uC(n,e){return n instanceof Xo&&e instanceof Xo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ws&&e instanceof ws&&n._firestore===e._firestore&&iC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function dC(n){n=Pn(n,Zn);let e=Pn(n.firestore,jr);return OB(ao(e),n._key).then(t=>IP(e,n,t))}ws._jsonSchemaVersion="firestore/querySnapshot/1.0",ws._jsonSchema={type:_i("string",ws._jsonSchemaVersion),bundleSource:_i("string","QuerySnapshot"),bundleName:_i("string"),bundle:_i("string")};var gu=class extends pm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}};function wP(n){n=Pn(n,Zn);let e=Pn(n.firestore,jr),t=ao(e),r=new gu(e);return uoe(t,n._key).then(i=>new Xo(e,r,n._key,i,new lu(i!==null&&i.hasLocalMutations,!0),n.converter))}function bP(n){n=Pn(n,Zn);let e=Pn(n.firestore,jr);return OB(ao(e),n._key,{source:"server"}).then(t=>IP(e,n,t))}function fC(n){n=Pn(n,so);let e=Pn(n.firestore,jr),t=ao(e),r=new gu(e);return YB(n._query),FB(t,n._query).then(i=>new ws(e,r,n,i))}function xP(n){n=Pn(n,so);let e=Pn(n.firestore,jr),t=ao(e),r=new gu(e);return doe(t,n._query).then(i=>new ws(e,r,n,i))}function CP(n){n=Pn(n,so);let e=Pn(n.firestore,jr),t=ao(e),r=new gu(e);return FB(t,n._query,{source:"server"}).then(i=>new ws(e,r,n,i))}function s_(n,e,t){n=Pn(n,Zn);let r=Pn(n.firestore,jr),i=lC(n.converter,e,t);return xm(r,[oC(Th(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Gr.none())])}function a_(n,e,t,...r){n=Pn(n,Zn);let i=Pn(n.firestore,jr),o=Th(i),s;return s=typeof(e=bn(e))=="string"||e instanceof mc?dP(o,"updateDoc",n._key,e,t,r):uP(o,"updateDoc",n._key,e),xm(i,[s.toMutation(n._key,Gr.exists(!0))])}function hC(n){return xm(Pn(n.firestore,jr),[new jd(n._key,Gr.none())])}function pC(n,e){let t=Pn(n.firestore,jr),r=Dh(n),i=lC(n.converter,e);return xm(t,[oC(Th(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Gr.exists(!1))]).then(()=>r)}function bm(n,...e){var t,r,i;n=bn(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||nN(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(nN(e[s])){let h=e[s];e[s]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(n instanceof Zn)l=Pn(n.firestore,jr),u=mm(n._key.path),c={next:h=>{e[s]&&e[s](IP(l,n,h))},error:e[s+1],complete:e[s+2]};else{let h=Pn(n,so);l=Pn(h.firestore,jr),u=h._query;let m=new gu(l);c={next:g=>{e[s]&&e[s](new ws(l,m,h,g))},error:e[s+1],complete:e[s+2]},YB(n._query)}return(function(m,g,b,I){let T=new fm(I),N=new Wy(g,T,b);return m.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return zN(yield hm(m),N)})),()=>{T.Ou(),m.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return qN(yield hm(m),N)}))}})(ao(l),u,a,c)}function EP(n,e){return foe(ao(n=Pn(n,jr)),nN(e)?e:{next:e})}function xm(n,e){return(function(r,i){let o=new Fi;return r.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){return $ie(yield eP(r),i,o)})),o.promise})(ao(n),e)}function IP(n,e,t){let r=t.docs.get(e._key),i=new gu(n);return new Xo(n,i,e._key,r,new lu(t.hasPendingWrites,t.fromCache),e.converter)}var yoe={maxAttempts:5};var Gx=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Th(e)}set(e,t,r){this._verifyNotCommitted();let i=Ad(e,this._firestore),o=lC(i.converter,t,r),s=oC(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Gr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Ad(e,this._firestore),s;return s=typeof(t=bn(t))=="string"||t instanceof mc?dP(this._dataReader,"WriteBatch.update",o._key,t,r,i):uP(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Gr.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ad(e,this._firestore);return this._mutations=this._mutations.concat(new jd(t._key,Gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new je(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ad(n,e){if((n=bn(n)).firestore!==e)throw new je(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var gN=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Th(e)}get(e){let t=Ad(e,this._firestore),r=new pN(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return dt(24041);let o=i[0];if(o.isFoundDocument())return new Sh(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Sh(this._firestore,r,t._key,null,t.converter);throw dt(18433,{doc:o})})}set(e,t,r){let i=Ad(e,this._firestore),o=lC(i.converter,t,r),s=oC(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Ad(e,this._firestore),s;return s=typeof(t=bn(t))=="string"||t instanceof mc?dP(this._dataReader,"Transaction.update",o._key,t,r,i):uP(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Ad(e,this._firestore);return this._transaction.delete(t._key),this}};var mN=class extends gN{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ad(e,this._firestore),r=new gu(this._firestore);return super.get(e).then(i=>new Xo(this._firestore,r,t._key,i._document,new lu(!1,!1),t.converter))}};function SP(n,e,t){n=Pn(n,jr);let r=Object.assign(Object.assign({},yoe),t);return(function(o){if(o.maxAttempts<1)throw new je(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let c=new Fi;return o.asyncQueue.enqueueAndForget(()=>ee(null,null,function*(){let l=yield aoe(o);new eN(o.asyncQueue,l,a,s,c).zu()})),c.promise})(ao(n),i=>e(new mN(n,i)),r)}function AP(){return new Ky("deleteField")}function XB(){return new sN("serverTimestamp")}function JB(...n){return new aN("arrayUnion",n)}function eU(...n){return new cN("arrayRemove",n)}function DP(n){return new lN("increment",n)}(function(e,t=!0){(function(i){gm=i})(C1),Us(new Zi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new jr(new pT(r.getProvider("auth-internal")),new vT(s,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new je(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kd(l.options.projectId,u)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Gn(MV,NV,e),Gn(MV,NV,"esm2017")})();var gC=function(){return gC=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},gC.apply(this,arguments)};var woe={includeMetadataChanges:!1};function TP(n,e){return e===void 0&&(e=woe),new Ot(function(t){var r=bm(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function tU(n){return TP(n,{includeMetadataChanges:!0})}function nU(n,e){return e===void 0&&(e={}),tU(n).pipe(at(function(t){return MP(t,e)}))}function MP(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:gC(gC({},r),(t={},t[e.idField]=n.id,t))}function rU(n){return TP(n,{includeMetadataChanges:!0}).pipe(at(function(e){return e.docs}))}function iU(n,e){return e===void 0&&(e={}),rU(n).pipe(at(function(t){return t.map(function(r){return MP(r,e)})}))}var co=class{constructor(e){return e}},oU="firestore",NP=class{constructor(){return nl(oU)}};var PP=new Ye("angularfire2.firestore-instances");function boe(n,e){let t=ou(oU,n,e);return t&&new co(t)}function xoe(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new co(r)}}var Coe={provide:NP,deps:[[new Ir,PP]]},Eoe={provide:co,useFactory:boe,deps:[[new Ir,PP],Ks]};function sU(n,...e){return Gn("angularfire",ni.full,"fst"),to([Eoe,Coe,{provide:PP,useFactory:xoe(n),multi:!0,deps:[Ut,Rn,ri,uc,[new Ir,sh],[new Ir,vs],...e]}])}var Wd=Dr(iU,!0);var aU=Dr(nU,!0);var c_=Dr(pC,!0,2);var Wr=Dr(i_,!0,2);var Kd=Dr(hC,!0,2);var Br=Dr(Dh,!0,2);var mC=Dr(dC,!0);var fl=Dr(fC,!0);var cU=Dr(BB,!0);var lU=Dr(cC,!0,2),uU=Dr(vc,!0,2);var hl=Dr(s_,!0,2);var pl=Dr(a_,!0,2);var dU=Dr(aC,!0,2);var Cm=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){if(!this.firestore)return gt([]);let r=Wr(this.firestore,"users");return Wd(r,{idField:"id"}).pipe(at(i=>i.map(o=>({id:o.id,name:o.name,email:o.email,phone:o.phone,signupDate:o.signupDate||"",avatarUrl:o.avatarUrl||"",status:o.status??"Attivo",birthDate:o.birthDate??"",gender:o.gender??"",address:o.address??"",city:o.city??"",cap:o.cap??"",personalNotes:o.personalNotes??"",subscriptionEnd:o.subscriptionEnd??"",cards:o.cards??[]}))))}getAll(){return ee(this,null,function*(){if(!this.firestore)return[];let r=Wr(this.firestore,"users");return(yield fl(r)).docs.map(o=>{let s=o.data();return{id:o.id,name:s.name,email:s.email,phone:s.phone,signupDate:s.signupDate||"",avatarUrl:s.avatarUrl||"",status:s.status??"Attivo",birthDate:s.birthDate??"",gender:s.gender??"",address:s.address??"",city:s.city??"",cap:s.cap??"",personalNotes:s.personalNotes??"",subscriptionEnd:s.subscriptionEnd??"",cards:s.cards??[]}})})}getById$(r){if(!this.firestore)return gt(void 0);let i=Wr(this.firestore,"users");return Wd(i,{idField:"id"}).pipe(at(o=>o.find(s=>s.id===r)))}getById(r){return ee(this,null,function*(){if(!this.firestore)return;let i=Br(this.firestore,`users/${r}`),o=yield mC(i);if(!o.exists())return;let s=o.data();return{id:o.id,name:s.name,email:s.email,phone:s.phone,signupDate:s.signupDate||"",avatarUrl:s.avatarUrl||"",status:s.status??"Attivo",birthDate:s.birthDate??"",gender:s.gender??"",address:s.address??"",city:s.city??"",cap:s.cap??"",personalNotes:s.personalNotes??"",subscriptionEnd:s.subscriptionEnd??"",cards:s.cards??[]}})}add(r){return ee(this,null,function*(){let i=Br(Wr(this.firestore,"users")),o={name:r.name,email:r.email,phone:r.phone??"",signupDate:r.signupDate??new Date().toISOString().slice(0,10),avatarUrl:r.avatarUrl??"",status:r.status??"Attivo",birthDate:r.birthDate??"",gender:r.gender??"",address:r.address??"",city:r.city??"",cap:r.cap??"",personalNotes:r.personalNotes??"",subscriptionEnd:r.subscriptionEnd??"",cards:r.cards??[]};if(!this.firestore)throw new Error("Firestore not available - add user");return yield hl(i,o),Oe({id:i.id},o)})}};e.\u0275fac=function(i){return new(i||e)(Ve(co))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Ioe(n,e){if(n&1){let t=Mt();C(0,"div",15),Ne("click",function(){be(t);let i=ne();return xe(i.closeScaduteModal())}),P()}}function Soe(n,e){if(n&1&&(C(0,"span"),q(1,"("),C(2,"em"),q(3),P(),q(4,")"),P()),n&2){let t=ne().$implicit;K(3),Sr("Scadenza: ",t.subscriptionEnd)}}function Aoe(n,e){if(n&1&&(C(0,"li",25)(1,"strong"),q(2),P(),Je(3,Soe,5,1,"span",22),P()),n&2){let t=e.$implicit;K(2),ft(t.name),K(),de("ngIf",t.subscriptionEnd)}}function Doe(n,e){n&1&&(C(0,"li"),q(1," Nessuna tessera scaduta. "),P())}function Toe(n,e){if(n&1){let t=Mt();C(0,"div",16)(1,"div",17),Ne("click",function(i){return be(t),xe(i.stopPropagation())}),C(2,"h3",18)(3,"span",19),q(4,"warning"),P(),q(5," Tessere scadute "),P(),C(6,"ul",20),Je(7,Aoe,4,2,"li",21)(8,Doe,2,0,"li",22),P(),C(9,"div",23)(10,"button",24),Ne("click",function(){be(t);let i=ne();return xe(i.closeScaduteModal())}),q(11,"Chiudi"),P()()()()}if(n&2){let t=ne();K(7),de("ngForOf",t.tessereScadute),K(),de("ngIf",t.tessereScadute.length===0)}}var fU=(()=>{let e=class e{constructor(r){this.userService=r,this.activeClients=0,this.tessereAttive=[],this.tessereScadute=[],this.thisWeekCards=0,this.totalExercises=0,this.scaduteModalOpen=!1}ngOnInit(){return ee(this,null,function*(){let r=yield this.userService.getAll(),i=new Date().toISOString().substring(0,10);this.activeClients=r.filter(o=>o.status==="Attivo").length,this.tessereScadute=r.filter(o=>o.subscriptionEnd&&o.subscriptionEnd<=i),this.tessereAttive=r.filter(o=>o.subscriptionEnd&&o.subscriptionEnd>i)})}openScaduteModal(){this.scaduteModalOpen=!0}closeScaduteModal(){this.scaduteModalOpen=!1}};e.\u0275fac=function(i){return new(i||e)(tt(Cm))},e.\u0275cmp=Kn({type:e,selectors:[["app-home"]],standalone:!1,decls:41,vars:7,consts:[[1,"page","home-page"],[1,"cards"],[1,"card","stat-card"],[1,"stat-label"],[1,"card","stat-card",2,"margin-top","20px"],[1,"tessere-row",2,"display","flex","align-items","center","gap","18px"],[2,"font-size","1rem","font-weight","400"],[1,"tessera-btn","warning-card",2,"display","flex","align-items","center","gap","7px","background","#fff","border","1px solid #ededed","border-radius","8px","padding","7px 16px","cursor","pointer","box-shadow","none",3,"click"],[1,"material-icons",2,"color","#d32f2f","font-size","1.25em"],[2,"font-size","1rem"],[1,"stat-label",2,"margin-left","7px"],[1,"tessera-btn","success-card",2,"display","flex","align-items","center","gap","7px","background","#fff","border","1px solid #ededed","border-radius","8px","padding","7px 16px","box-shadow","none"],[1,"material-icons",2,"color","#318b2b","font-size","1.25em"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-tessera-scaduti",4,"ngIf"],[1,"modal-backdrop",3,"click"],[1,"modal-tessera-scaduti"],[1,"modal-scaduti-box",2,"padding","24px 28px","border-radius","10px","max-width","360px","background","#fff","box-shadow","0 4px 24px -6px #b2b2b2",3,"click"],[2,"color","#d32f2f","font-size","1.15rem","margin-bottom","13px"],[1,"material-icons",2,"font-size","26px","vertical-align","middle","margin-right","6px"],[1,"scaduti-list",2,"margin","0","padding","0","list-style","none"],["style","margin-bottom:9px;",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"text-align","right","margin-top","15px"],[1,"btn","outline",3,"click"],[2,"margin-bottom","9px"]],template:function(i,o){i&1&&(C(0,"div",0)(1,"h2"),q(2,"Dashboard"),P(),C(3,"div",1)(4,"div",2),q(5,"Clienti attivi "),C(6,"span",3)(7,"strong"),q(8),P()()(),C(9,"div",2),q(10,"Schede"),C(11,"span",3)(12,"strong"),q(13),P()()(),C(14,"div",2),q(15,"Esercizi"),C(16,"span",3)(17,"strong"),q(18),P()()()(),C(19,"div",4)(20,"div",5)(21,"span",6),q(22,"Tessere:"),P(),C(23,"div",7),Ne("click",function(){return o.openScaduteModal()}),C(24,"span",8),q(25,"report_problem"),P(),C(26,"span",9),q(27,"Scadute:"),P(),C(28,"span",10)(29,"strong"),q(30),P()()(),C(31,"div",11)(32,"span",12),q(33,"verified_user"),P(),C(34,"span",9),q(35,"Attive:"),P(),C(36,"span",10)(37,"strong"),q(38),P()()()()(),Je(39,Ioe,1,0,"div",13)(40,Toe,12,2,"div",14),P()),i&2&&(K(8),ft(o.activeClients),K(5),ft(o.thisWeekCards),K(5),ft(o.totalExercises),K(12),ft(o.tessereScadute.length),K(8),ft(o.tessereAttive.length),K(),de("ngIf",o.scaduteModalOpen),K(),de("ngIf",o.scaduteModalOpen))},dependencies:[qi,ki],styles:[".home-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0f2540}.cards[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.card[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:8px;box-shadow:0 2px 8px #14283c0f;flex:1 1 0;min-width:0;display:flex;align-items:center;min-height:58px}.card.stat-card[_ngcontent-%COMP%]{margin-bottom:16px;min-width:0;flex:1 1 0;display:flex;align-items:center}.stat-label[_ngcontent-%COMP%]{margin-left:7px}.tessera-btn[_ngcontent-%COMP%], .tessera-stat[_ngcontent-%COMP%]{background:#fff;border:1px solid #ededed;border-radius:8px;display:flex;align-items:center;gap:7px;padding:7px 16px;font-size:1rem;box-shadow:none}.tessera-btn.warning-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .tessera-stat.warning-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#d32f2f}.tessera-btn.success-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .tessera-stat.success-card[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#318b2b}"]});let n=e;return n})();var vC=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){let r=Wr(this.firestore,"exercises");return Wd(r,{idField:"id"})}getAll(){return ee(this,null,function*(){let r=Wr(this.firestore,"exercises");return yield bI(Wd(r,{idField:"id"}))})}create(r){return ee(this,null,function*(){let i=Wr(this.firestore,"exercises"),o=Br(i),s=Oe({},r);return yield hl(o,s),Oe({id:o.id},s)})}update(r,i){return ee(this,null,function*(){yield pl(Br(this.firestore,`exercises/${r}`),i)})}delete(r){return ee(this,null,function*(){yield Kd(Br(this.firestore,`exercises/${r}`))})}};e.\u0275fac=function(i){return new(i||e)(Ve(co))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var pU=(()=>{let e=class e{constructor(r){this.firestore=r}getAll$(){let r=Wr(this.firestore,"categories");return Wd(r,{idField:"id"}).pipe(at(i=>i.map(o=>({id:o.id,name:o.name,image:o.image}))))}create(r){return ee(this,null,function*(){let i=crypto.randomUUID(),o={id:i,name:r.name,image:r.image};return yield hl(Br(this.firestore,`categories/${i}`),o),o})}update(r,i){return ee(this,null,function*(){yield pl(Br(this.firestore,`categories/${r}`),i)})}delete(r){return ee(this,null,function*(){yield Kd(Br(this.firestore,`categories/${r}`))})}};e.\u0275fac=function(i){return new(i||e)(Ve(co))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Em=(()=>{let e=class e{compressAndConvertToBase64(r,i=1e3,o=256){return ee(this,null,function*(){let s=document.createElement("img"),a=new FileReader;return new Promise((c,l)=>{a.onload=u=>{s.onload=()=>{let h=document.createElement("canvas");h.width=o,h.height=o,h.getContext("2d")?.drawImage(s,0,0,h.width,h.height);let g=.8,b=h.toDataURL("image/jpeg",g);for(;b.length/1024>i&&g>.1;)g-=.05,b=h.toDataURL("image/jpeg",g);c(b)},s.onerror=l,s.src=u.target.result},a.onerror=l,a.readAsDataURL(r)})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var mU=n=>["/esercizi",n];function Noe(n,e){if(n&1&&Tt(0,"img",37),n&2){let t=ne().$implicit;de("src",t.image,Vr)("alt",t.name)}}function Poe(n,e){n&1&&(C(0,"div",38),Pi(),C(1,"svg",39),Tt(2,"circle",40)(3,"rect",41)(4,"rect",42)(5,"rect",43),P()())}function koe(n,e){if(n&1&&(C(0,"div",29)(1,"div",30),Je(2,Noe,1,2,"img",31)(3,Poe,6,0,"div",32),P(),C(4,"div",33)(5,"div",34),q(6),P(),C(7,"div",35),q(8),P()(),C(9,"button",36),q(10," Dettaglio "),P()()),n&2){let t=e.$implicit;K(2),de("ngIf",t.image),K(),de("ngIf",!t.image),K(3),ft(t.name),K(2),ft(t.category),K(),$c("aria-label",ad("Dettaglio esercizio ",t.name)),de("routerLink",ru(7,mU,t.id))}}function Roe(n,e){n&1&&(C(0,"div",44),q(1," Nessun esercizio presente "),P())}function Ooe(n,e){if(n&1){let t=Mt();C(0,"button",45),Ne("click",function(){be(t);let i=ne();return xe(i.openAllExercisesModal())}),q(1," Mostra tutti "),P()}}function Foe(n,e){if(n&1&&Tt(0,"img",37),n&2){let t=ne().$implicit;de("src",t.image,Vr)("alt",t.name)}}function Loe(n,e){n&1&&(C(0,"div",59),Pi(),C(1,"svg",39),Tt(2,"circle",60)(3,"path",61),P()())}function Voe(n,e){if(n&1){let t=Mt();C(0,"div",46)(1,"div",30),Je(2,Foe,1,2,"img",31)(3,Loe,4,0,"div",47),C(4,"button",48),Ne("click",function(){let i=be(t).$implicit,o=ne();return xe(o.openEditCategoryModal(i))}),Pi(),C(5,"svg",49),Tt(6,"path",50)(7,"circle",51),P()()(),hs(),C(8,"div",52),Ne("click",function(){let i=be(t).$implicit,o=ne();return xe(o.openEditCategoryModal(i))}),C(9,"div",53),q(10),P()(),C(11,"div",54)(12,"button",55),Ne("click",function(){let i=be(t).$implicit,o=ne();return xe(o.confirmRemoveCategory(i))}),q(13," \xD7 "),P(),C(14,"label",56)(15,"input",57),Ne("change",function(i){let o=be(t).$implicit,s=ne();return xe(s.onCategoryToggle(o,i.target.checked))}),P(),Tt(16,"span",58),P()()()}if(n&2){let t=e.$implicit;K(2),de("ngIf",t.image),K(),de("ngIf",!t.image),K(),$c("aria-label",ad("Modifica immagine categoria ",t.name)),K(6),ft(t.name),K(2),$c("aria-label",ad("Elimina categoria ",t.name)),K(3),de("checked",t.selected)}}function joe(n,e){n&1&&(C(0,"div",44),q(1," Nessuna categoria trovata "),P())}function Boe(n,e){if(n&1){let t=Mt();C(0,"button",65),Ne("click",function(){be(t);let i=ne(2);return xe(i.openAllCategoriesModal())}),q(1," Mostra tutte "),P()}}function Uoe(n,e){if(n&1){let t=Mt();C(0,"div",62)(1,"button",63),Ne("click",function(){be(t);let i=ne();return xe(i.resetCategorySelections())}),q(2," Azzera "),P(),Je(3,Boe,2,0,"button",64),P()}if(n&2){let t=ne();K(3),de("ngIf",t.categories.length>5)}}function zoe(n,e){if(n&1&&(C(0,"span",79),q(1),P()),n&2){let t=ne(2);K(),Sr(" Categoria: ",t.selectedCategoryNames[0]," ")}}function qoe(n,e){if(n&1&&Tt(0,"img",37),n&2){let t=ne().$implicit;de("src",t.image,Vr)("alt",t.name)}}function Hoe(n,e){n&1&&(C(0,"div",87),Pi(),C(1,"svg",88),Tt(2,"circle",89)(3,"rect",41),P()())}function $oe(n,e){if(n&1&&(C(0,"div",80)(1,"div",81),Je(2,qoe,1,2,"img",31)(3,Hoe,4,0,"div",82),P(),C(4,"div",83)(5,"div",84),q(6),P(),C(7,"div",85),q(8),P()(),C(9,"a",86),q(10," Dettaglio "),P()()),n&2){let t=e.$implicit;K(2),de("ngIf",t.image),K(),de("ngIf",!t.image),K(3),ft(t.name),K(2),ft(t.category),K(),$c("aria-label",ad("Dettaglio esercizio ",t.name)),de("routerLink",ru(7,mU,t.id))}}function Goe(n,e){n&1&&(C(0,"div",90),q(1,"Nessun esercizio trovato"),P())}function Woe(n,e){if(n&1){let t=Mt();C(0,"div",91)(1,"button",92),Ne("click",function(){be(t);let i=ne(2);return xe(i.currentExercisePage=i.currentExercisePage-1)}),q(2," \u2039 "),P(),C(3,"span"),q(4),P(),C(5,"button",92),Ne("click",function(){be(t);let i=ne(2);return xe(i.currentExercisePage=i.currentExercisePage+1)}),q(6," \u203A "),P()()}if(n&2){let t=ne(2);K(),de("disabled",t.currentExercisePage===1),K(3),Gc("Pagina ",t.currentExercisePage," di ",t.totalExercisePages),K(),de("disabled",t.currentExercisePage===t.totalExercisePages)}}function Koe(n,e){if(n&1){let t=Mt();C(0,"div",66)(1,"div",67)(2,"div",68)(3,"h3",69),q(4," Tutti gli esercizi "),Je(5,zoe,2,1,"span",70),P(),C(6,"button",71),Ne("click",function(){be(t);let i=ne();return xe(i.closeAllExercisesModal())}),q(7,"\xD7"),P()(),C(8,"div",72)(9,"label",73)(10,"input",74),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.exerciseSearch,i)||(o.exerciseSearch=i),xe(i)}),Ne("ngModelChange",function(){be(t);let i=ne();return xe(i.currentExercisePage=1)}),P()()(),C(11,"div",75),Je(12,$oe,11,9,"div",76)(13,Goe,2,0,"div",77),P(),Je(14,Woe,7,4,"div",78),P()()}if(n&2){let t=ne();K(5),de("ngIf",t.selectedCategoryNames.length),K(5),ct("ngModel",t.exerciseSearch),K(2),de("ngForOf",t.pagedExercisesForModal)("ngForTrackBy",t.trackByExerciseId),K(),de("ngIf",t.pagedExercisesForModal.length===0),K(),de("ngIf",t.totalExercisePages>1)}}var vU=(()=>{let e=class e{constructor(r,i,o){this.eserciziService=r,this.categorieService=i,this.imageService=o,this.exercises=[],this.categories=[],this.subscriptions=[],this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null,this.exerciseSearch="",this.categoryName="",this.categoryImageFile=null,this.categoryImage=null,this.categorySearch="",this.showExerciseModal=!1,this.showCategoryModal=!1,this.showEditCategoryModal=!1,this.showDeleteCategoryModal=!1,this.showAllExercisesModal=!1,this.showAllCategoriesModal=!1,this.categoryToEdit=null,this.categoryToDelete=null,this.editCategoryName="",this.editCategoryImageFile=null,this.editCategoryImage=null,this.autoCatMatched=!1,this.currentExercisePage=1,this.exercisesPerPage=6}ngOnInit(){this.loadExercises(),this.loadCategories()}ngOnDestroy(){this.subscriptions.forEach(r=>r.unsubscribe())}loadExercises(){let r=this.eserciziService.getAll$().subscribe(i=>{this.exercises=Array.isArray(i)?i:[]});this.subscriptions.push(r)}loadCategories(){let r=this.categorieService.getAll$().subscribe(i=>{let o=Array.isArray(i)?i:[];this.categories=o.map(s=>Rt(Oe({},s),{selected:!1}))});this.subscriptions.push(r)}onExerciseImageChange(r){let i=r.target.files?.[0]||null;this.exerciseImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,256).then(o=>this.exerciseImage=o):this.exerciseImage=null}onCategoryImageChange(r){let i=r.target.files?.[0]||null;this.categoryImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,128).then(o=>this.categoryImage=o):this.categoryImage=null}onEditCategoryImageChange(r){let i=r.target.files?.[0]||null;this.editCategoryImageFile=i,i?this.imageService.compressAndConvertToBase64(i,1e3,128).then(o=>this.editCategoryImage=o):this.editCategoryImage=null}saveExercise(){return ee(this,null,function*(){let r=this.exerciseImage??void 0,i={name:this.exerciseName.trim(),category:this.exerciseCategoryInput.trim(),image:r};yield this.eserciziService.create(i),this.closeExerciseModal(),this.loadExercises()})}saveCategory(){return ee(this,null,function*(){let r=this.categoryImage??void 0,i={name:this.categoryName.trim(),image:r};yield this.categorieService.create(i),this.closeCategoryModal(),this.loadCategories()})}saveEditCategory(){return ee(this,null,function*(){if(!this.categoryToEdit)return;let r=this.categoryToEdit.name,i=this.editCategoryName.trim(),o=this.editCategoryImage??this.categoryToEdit.image,s={name:i,image:o};yield this.categorieService.update(this.categoryToEdit.id,s);let c=(yield this.eserciziService.getAll()).filter(l=>l.category===r);for(let l of c)yield this.eserciziService.update(l.id,{category:i});this.closeEditCategoryModal(),this.loadCategories(),this.loadExercises()})}openExerciseModal(){this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null,this.showExerciseModal=!0}closeExerciseModal(){this.showExerciseModal=!1,this.exerciseName="",this.exerciseCategoryInput="",this.exerciseImageFile=null,this.exerciseImage=null}openCategoryModal(){this.categoryName="",this.categoryImageFile=null,this.categoryImage=null,this.showCategoryModal=!0}closeCategoryModal(){this.showCategoryModal=!1,this.categoryName="",this.categoryImageFile=null,this.categoryImage=null}openEditCategoryModal(r){this.categoryToEdit=r,this.editCategoryName=r.name,this.editCategoryImage=r.image||null,this.editCategoryImageFile=null,this.showEditCategoryModal=!0}closeEditCategoryModal(){this.showEditCategoryModal=!1,this.categoryToEdit=null,this.editCategoryName="",this.editCategoryImage=null,this.editCategoryImageFile=null}openAllExercisesModal(){this.currentExercisePage=1,this.showAllExercisesModal=!0}closeAllExercisesModal(){this.showAllExercisesModal=!1}openAllCategoriesModal(){this.showAllCategoriesModal=!0}closeAllCategoriesModal(){this.showAllCategoriesModal=!1}confirmRemoveCategory(r){this.categoryToDelete=r,this.showDeleteCategoryModal=!0}closeDeleteCategoryModal(){this.categoryToDelete=null,this.showDeleteCategoryModal=!1}removeCategoryConfirmed(){return ee(this,null,function*(){this.categoryToDelete&&(yield this.categorieService.delete(this.categoryToDelete.id),this.closeDeleteCategoryModal(),this.loadCategories())})}onAutoCategoryInput(){this.autoCatMatched=!1;let r=this.exerciseCategoryInput.trim();if(r.length<3)return;let i=this.categories.find(o=>o.name.toLowerCase().startsWith(r.toLowerCase()));i&&(this.exerciseCategoryInput=i.name,this.autoCatMatched=!0)}onAutoCategoryBlur(){this.onAutoCategoryInput()}clearCategoryInput(){this.exerciseCategoryInput="",this.autoCatMatched=!1}onCategoryToggle(r,i){i?this.categories.forEach(o=>o.selected=o.id===r.id):this.categories.forEach(o=>o.selected=!1),this.currentExercisePage=1,this.categories=[...this.categories]}resetCategorySelections(){this.categories.forEach(r=>r.selected=!1),this.currentExercisePage=1,this.categories=[...this.categories]}get selectedCategoryNames(){return this.categories.filter(r=>r.selected).map(r=>r.name)}get filteredExercisesLimited(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(s=>s.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();return o&&(i=i.filter(s=>s.name.toLowerCase().includes(o))),i.slice(0,5)}get allExercisesForModal(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(s=>s.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();return o&&(i=i.filter(s=>s.name.toLowerCase().includes(o))),i}get filteredCategoriesLimited(){let r=this.categorySearch.trim().toLowerCase();return(r?this.categories.filter(o=>o.name.toLowerCase().includes(r)):this.categories).slice(0,5)}get allCategoriesForModal(){let r=this.categorySearch.trim().toLowerCase();return r?this.categories.filter(i=>i.name.toLowerCase().includes(r)):this.categories}get pagedExercisesForModal(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(a=>a.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();o&&(i=i.filter(a=>a.name.toLowerCase().includes(o)));let s=(this.currentExercisePage-1)*this.exercisesPerPage;return i.slice(s,s+this.exercisesPerPage)}get totalExercisePages(){let r=this.selectedCategoryNames[0],i=r?this.exercises.filter(a=>a.category===r):this.exercises,o=this.exerciseSearch.trim().toLowerCase();o&&(i=i.filter(a=>a.name.toLowerCase().includes(o)));let s=Math.ceil(i.length/this.exercisesPerPage);return s>0?s:1}trackByExerciseId(r,i){return i.id}trackByCategoryId(r,i){return i.id}};e.\u0275fac=function(i){return new(i||e)(tt(vC),tt(pU),tt(Em))},e.\u0275cmp=Kn({type:e,selectors:[["app-esercizi"]],decls:37,vars:11,consts:[[1,"esercizi-page"],[1,"esercizi-layout"],[1,"esercizi-card"],[1,"section-header"],[1,"section-title"],["type","button","aria-label","Aggiungi esercizio",1,"top-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24"],["x","2","y","9.5","width","3","height","5","rx","1.2","fill","#2563eb"],["x","19","y","9.5","width","3","height","5","rx","1.2","fill","#2563eb"],["x","6","y","11","width","12","height","2","rx","1","fill","#2563eb"],["x","8","y","10","width","8","height","4","rx","1.6","fill","#e7effd"],[1,"section-divider"],[1,"search-bar-wrapper"],["for","exercise-search",1,"search-bar"],["id","exercise-search","type","text","aria-label","Cerca esercizi","autocomplete","off","placeholder","Cerca esercizi...",3,"ngModelChange","ngModel"],[1,"exercise-list"],["class","card-item",4,"ngFor","ngForOf","ngForTrackBy"],["class","exercise-empty-info",4,"ngIf"],["class","more-btn","type","button",3,"click",4,"ngIf"],[1,"categorie-card"],["type","button","aria-label","Aggiungi categoria",1,"top-btn",3,"click"],["d","M3 12.5 L12 21.2 Q12.6 21.8 13.3 21.25 L21.25 13.3 Q21.8 12.6 21.2 12 L12.5 3 Q12.05 2.55 11.45 3.1 L3.1 11.45 Q2.55 12.05 3 12.5Z","fill","#2563eb","stroke","#1857a7","stroke-width","1"],["cx","8","cy","8","r","2","fill","#fff","stroke","#2563eb","stroke-width","1"],["for","category-search",1,"search-bar"],["id","category-search","type","text","aria-label","Cerca categorie","autocomplete","off","placeholder","Cerca categorie...",3,"ngModelChange","ngModel"],[1,"category-list"],["class","card-item category-row",4,"ngFor","ngForOf","ngForTrackBy"],["class","category-actions-bottom",4,"ngIf"],["class","esercizi-modal-backdrop",4,"ngIf"],[1,"card-item"],[1,"card-img-wrap"],[3,"src","alt",4,"ngIf"],["class","exercise-placeholder",4,"ngIf"],[1,"exercise-text"],[1,"exercise-name"],[1,"exercise-category"],["type","button",1,"exercise-detail-btn",3,"routerLink","aria-label"],[3,"src","alt"],[1,"exercise-placeholder"],["width","64","height","64","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#cfe6fd"],["x","8","y","10","width","8","height","4","rx","1.5","fill","#83b4fa"],["x","4","y","11.5","width","3","height","3","rx","1.2","fill","#2563eb"],["x","17","y","11.5","width","3","height","3","rx","1.2","fill","#2563eb"],[1,"exercise-empty-info"],["type","button",1,"more-btn",3,"click"],[1,"card-item","category-row"],["class","category-placeholder",4,"ngIf"],["type","button",1,"category-edit-img-btn",3,"click","aria-label"],["width","22","height","22","viewBox","0 0 24 24"],["d","M14.06 5.94a2.5 2.5 0 013.54 3.54l-8.585 8.585-4.243.707.707-4.243z","fill","none","stroke","#2563eb","stroke-width","2"],["cx","17.5","cy","6.5","r","1.5","fill","#83b4fa","stroke","#2563eb","stroke-width","1"],[1,"category-text",3,"click"],[1,"category-name"],[1,"category-controls-destra"],["type","button","title","Elimina categoria",1,"category-x-btn2",3,"click","aria-label"],["title","Seleziona categoria per filtrare esercizi",1,"category-checkbox-wrap"],["type","checkbox",3,"change","checked"],[1,"category-checkbox"],[1,"category-placeholder"],["cx","12","cy","12","r","12","fill","#e5fbee"],["d","M9 15l3-6 3 6","stroke","#22c16b","stroke-width","2","fill","none"],[1,"category-actions-bottom"],["type","button",1,"reset-categories-btn",3,"click"],["type","button","class","toggle-categories-btn",3,"click",4,"ngIf"],["type","button",1,"toggle-categories-btn",3,"click"],[1,"esercizi-modal-backdrop"],[1,"esercizi-modal","esercizi-grid-modal"],[1,"grid-modal-header"],[1,"grid-modal-title"],["class","grid-filter-tag",4,"ngIf"],["type","button","aria-label","Chiudi",1,"grid-close-btn",3,"click"],[1,"search-bar-wrapper","modal-search-inline"],["for","exercise-search-modal",1,"search-bar"],["id","exercise-search-modal","type","text","aria-label","Cerca esercizi nella griglia","autocomplete","off","placeholder","Cerca...",3,"ngModelChange","ngModel"],[1,"exercise-grid"],["class","exercise-grid-card",4,"ngFor","ngForOf","ngForTrackBy"],["class","grid-empty",4,"ngIf"],["class","pagination",4,"ngIf"],[1,"grid-filter-tag"],[1,"exercise-grid-card"],[1,"grid-img"],["class","grid-placeholder",4,"ngIf"],[1,"grid-info"],[1,"grid-name"],[1,"grid-cat"],[1,"grid-detail-link",3,"routerLink","aria-label"],[1,"grid-placeholder"],["width","48","height","48","viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","#d9ecfd"],[1,"grid-empty"],[1,"pagination"],[3,"click","disabled"]],template:function(i,o){i&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),q(5,"ESERCIZI"),P(),C(6,"button",5),Ne("click",function(){return o.openExerciseModal()}),Pi(),C(7,"svg",6),Tt(8,"rect",7)(9,"rect",8)(10,"rect",9)(11,"rect",10),P()()(),hs(),Tt(12,"div",11),C(13,"div",12)(14,"label",13)(15,"input",14),lt("ngModelChange",function(a){return ut(o.exerciseSearch,a)||(o.exerciseSearch=a),a}),P()()(),C(16,"div",15),Je(17,koe,11,9,"div",16)(18,Roe,2,0,"div",17)(19,Ooe,2,0,"button",18),P()(),C(20,"div",19)(21,"div",3)(22,"span",4),q(23,"CATEGORIE"),P(),C(24,"button",20),Ne("click",function(){return o.openCategoryModal()}),Pi(),C(25,"svg",6),Tt(26,"path",21)(27,"circle",22),P()()(),hs(),Tt(28,"div",11),C(29,"div",12)(30,"label",23)(31,"input",24),lt("ngModelChange",function(a){return ut(o.categorySearch,a)||(o.categorySearch=a),a}),P()()(),C(32,"div",25),Je(33,Voe,17,8,"div",26)(34,joe,2,0,"div",17)(35,Uoe,4,1,"div",27),P()()(),Je(36,Koe,15,6,"div",28),P()),i&2&&(K(15),ct("ngModel",o.exerciseSearch),K(2),de("ngForOf",o.filteredExercisesLimited)("ngForTrackBy",o.trackByExerciseId),K(),de("ngIf",o.filteredExercisesLimited.length===0),K(),de("ngIf",o.exercises.length>5),K(12),ct("ngModel",o.categorySearch),K(2),de("ngForOf",o.filteredCategoriesLimited)("ngForTrackBy",o.trackByCategoryId),K(),de("ngIf",o.filteredCategoriesLimited.length===0),K(),de("ngIf",o.categories.length),K(),de("ngIf",o.showAllExercisesModal))},dependencies:[sc,qi,ki,fd,xo,ms,Ko,yd,Ma],styles:['body[_ngcontent-%COMP%]{margin:0;font-family:system-ui,sans-serif;background:#f5f8fc}.esercizi-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f8fc;position:relative;z-index:0}.esercizi-layout[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;gap:52px;max-width:1200px;margin:0 auto;padding-top:30px;position:relative;z-index:0;pointer-events:auto}.esercizi-card[_ngcontent-%COMP%], .categorie-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;box-shadow:0 2px 12px #2450900f;min-width:410px;max-width:520px;width:100%;min-height:260px;display:flex;flex-direction:column;box-sizing:border-box;overflow:hidden;position:relative;z-index:0}.esercizi-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff 89%,#f8fdff)}.categorie-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff 89%,#f8fcfa)}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 26px 0}.section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;letter-spacing:.035em;color:#22416f;flex:1}.top-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e7effd 60%,#dbeafe);border:none;border-radius:50%;width:42px;height:42px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 10px #2563eb11;transition:background .14s,transform .14s}.top-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#bfd8fd 40%,#e8f1ff);transform:scale(1.08)}.section-divider[_ngcontent-%COMP%]{width:calc(100% - 52px);margin:0 26px 10px;height:0;position:relative}.section-divider[_ngcontent-%COMP%]:before{content:"";display:block;height:4px;width:100%;background:linear-gradient(90deg,#dadde2,#ececec);border-radius:3px;box-shadow:0 1.5px 6px #0000000d}.search-bar-wrapper[_ngcontent-%COMP%]{padding:0 26px 4px;box-sizing:border-box;width:100%;position:relative;z-index:0;pointer-events:auto}.search-bar[_ngcontent-%COMP%]{display:block;position:relative;width:100%;height:34px;border:1.7px solid #c9d9ec;border-radius:10px;background:#f7fbff;overflow:hidden;transition:border-color .18s,background-color .18s}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;inset:0;padding:0 12px 0 38px;border:none;background:transparent;font-size:.85rem;font-weight:600;color:#1c3554;outline:none}.exercise-list[_ngcontent-%COMP%], .category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:14px 26px 10px;width:100%;box-sizing:border-box}.card-item[_ngcontent-%COMP%]{width:82%;max-width:82%;margin:0 auto;min-height:118px;background:#fff;border-radius:20px;box-shadow:0 3px 12px #24509014;display:flex;align-items:center;gap:16px;padding:14px 18px;position:relative;box-sizing:border-box}.card-img-wrap[_ngcontent-%COMP%]{width:82px;height:82px;border-radius:18px;background:#f2f6fa;display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;overflow:hidden}.card-img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:74px;max-height:74px;object-fit:contain;display:block}.exercise-placeholder[_ngcontent-%COMP%], .category-placeholder[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center}.exercise-text[_ngcontent-%COMP%]{flex:1 1 0;display:flex;flex-direction:column;justify-content:center}.exercise-name[_ngcontent-%COMP%], .category-name[_ngcontent-%COMP%]{font-size:1.04rem;font-weight:800;color:#153b56;margin:0}.exercise-category[_ngcontent-%COMP%]{font-size:.85rem;font-style:italic;color:#3969b1;margin-top:2px}.exercise-detail-btn[_ngcontent-%COMP%]{position:absolute;right:14px;bottom:14px;font-size:.72rem;font-weight:700;background:#2563eb;color:#fff;border:none;border-radius:6px;padding:5px 14px;cursor:pointer;box-shadow:0 1px 4px #2563eb59;transition:background .15s}.exercise-detail-btn[_ngcontent-%COMP%]:hover{background:#184a9b}.category-row[_ngcontent-%COMP%]{padding-right:70px}.category-controls-destra[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;gap:10px}.category-x-btn2[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4d1d1;color:#db3131;width:26px;height:26px;font-size:1rem;font-weight:700;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .15s,color .15s,border-color .15s}.category-x-btn2[_ngcontent-%COMP%]:hover{background:#db3131;color:#fff;border-color:#db3131}.category-checkbox-wrap[_ngcontent-%COMP%]{width:26px;height:26px;position:relative;display:flex;align-items:center;justify-content:center}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;width:26px;height:26px;margin:0;cursor:pointer}.category-checkbox[_ngcontent-%COMP%]{width:22px;height:22px;border:2px solid #2563eb;border-radius:6px;background:#fff;position:relative;display:block;transition:background .15s,border-color .15s}.category-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:6px;top:3px;width:7px;height:12px;border:solid #fff;border-width:0 2.5px 2.5px 0;transform:rotate(45deg);opacity:0;transition:opacity .15s}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .category-checkbox[_ngcontent-%COMP%]{background:#2563eb;border-color:#2563eb}.category-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .category-checkbox[_ngcontent-%COMP%]:after{opacity:1}.category-actions-bottom[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:14px;margin:18px 0 10px;flex-wrap:wrap}.reset-categories-btn[_ngcontent-%COMP%]{margin:0;padding:8px 22px;border-radius:12px;border:none;background:#f2fcf7;color:#18c879;font-weight:800;font-size:.78rem;cursor:pointer;letter-spacing:.03em;box-shadow:0 1px 4px #00000014;transition:background .15s,color .15s}.reset-categories-btn[_ngcontent-%COMP%]:hover{background:#e7faee;color:#138554}.toggle-categories-btn[_ngcontent-%COMP%]{margin:0;padding:8px 22px;border:none;border-radius:12px;background:#eef3fb;color:#194d9a;font-weight:700;font-size:.78rem;cursor:pointer;letter-spacing:.03em;box-shadow:0 1px 4px #00000014;transition:background .15s,color .15s}.toggle-categories-btn[_ngcontent-%COMP%]:hover{background:#dce9fa;color:#0f356b}.exercise-empty-info[_ngcontent-%COMP%]{font-size:.85rem;color:#6b88b7;text-align:center;background:#e9f3fc;border-radius:10px;padding:10px 8px}.more-btn[_ngcontent-%COMP%]{margin:6px auto 4px;background:#eef3fb;color:#1e3a8a;border:none;border-radius:8px;padding:6px 16px;font-size:.75rem;font-weight:700;cursor:pointer;letter-spacing:.04em;transition:background .15s,color .15s;display:inline-block}.more-btn[_ngcontent-%COMP%]:hover, .more-btn[_ngcontent-%COMP%]:focus{background:#dbe9fb;color:#0f2a63}.esercizi-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:1000}.esercizi-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:26px 22px 22px;box-shadow:0 8px 40px #0000003b;width:92vw;max-width:410px;position:relative}.esercizi-modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.image-upload-zone[_ngcontent-%COMP%]{display:flex;justify-content:center}.input-image-label[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;align-items:center}.input-image-label[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.icon-image-upload-big[_ngcontent-%COMP%]{width:180px;height:180px;display:flex;align-items:center;justify-content:center}.image-preview[_ngcontent-%COMP%]{width:172px;height:172px;border-radius:23px;object-fit:contain;background:#f7fbff;border:2.5px solid #b5d9f8}.field-label[_ngcontent-%COMP%]{font-weight:700;color:#22416f;font-size:.9rem;display:flex;flex-direction:column;gap:4px;position:relative}.field-label[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .field-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:4px;padding:9px 12px;border:1.6px solid #d2e3fa;border-radius:8px;font-size:.92rem;background:#f7fbff;color:#234169;outline:none;transition:border-color .15s,background-color .15s}.field-label[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .field-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#2563eb;background:#f2f8ff}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}.modal-yes[_ngcontent-%COMP%], .modal-no[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;padding:7px 18px;border:none;border-radius:8px;cursor:pointer}.modal-yes[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.modal-yes[_ngcontent-%COMP%]:hover{background:#184a9b}.modal-no[_ngcontent-%COMP%]{background:#f2f2f2;color:#22416f}.modal-no[_ngcontent-%COMP%]:hover{background:#e4eaf3}.category-autocomplete-label[_ngcontent-%COMP%]{position:relative}.category-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:4px;display:flex;align-items:center;border:1.6px solid #d2e3fa;border-radius:8px;background:#f7fbff;transition:border-color .15s,background-color .15s}.category-input-wrapper[_ngcontent-%COMP%]:focus-within{border-color:#2563eb;background:#f2f8ff}.category-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;padding:9px 36px 9px 34px;font-size:.92rem;outline:none;font-weight:600;color:#234169}.search-icon[_ngcontent-%COMP%]{position:absolute;left:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:.9}.clear-cat-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:#eef3fb;color:#22416f;border:none;width:24px;height:24px;font-size:16px;line-height:1;border-radius:6px;cursor:pointer;padding:0;font-weight:700}.category-autocomplete-list[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:calc(100% + 4px);z-index:1100;background:#fff;border:1.3px solid #dbeafe;border-radius:8px;box-shadow:0 4px 18px #002e701a;list-style:none;padding:4px 0;margin:0;max-height:220px;overflow-y:auto;animation:_ngcontent-%COMP%_fadeIn .15s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 14px;font-size:.88rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:6px;color:#173a62;transition:background .13s,color .13s;position:relative}.category-autocomplete-list[_ngcontent-%COMP%]   li.highlighted[_ngcontent-%COMP%], .category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#e6f1fe;color:#0f2f59}.category-autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.no-suggestions):not(.create-suggestion):before{content:"\\1f50d";font-size:.75rem;opacity:.65}.no-suggestions[_ngcontent-%COMP%]{font-style:italic;color:#5b6e83;justify-content:space-between}.create-suggestion[_ngcontent-%COMP%]{background:#f7fbff;justify-content:center}.inline-create-btn[_ngcontent-%COMP%]{background:#2563eb;border:none;color:#fff;padding:4px 10px;font-size:.7rem;font-weight:700;border-radius:14px;cursor:pointer;letter-spacing:.03em;transition:background .15s}.inline-create-btn[_ngcontent-%COMP%]:hover{background:#184a9b}.inline-create-btn[_ngcontent-%COMP%]:disabled{background:#9db8df;cursor:not-allowed}.grid-modal-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:12px}.grid-modal-title[_ngcontent-%COMP%]{font-size:1.12rem;font-weight:700;color:#163a5d;margin:0;display:flex;align-items:center;gap:12px}.grid-filter-tag[_ngcontent-%COMP%]{font-size:.66rem;font-weight:700;background:#e4f1ff;color:#2563eb;padding:3px 8px;border-radius:999px;letter-spacing:.04em}.grid-close-btn[_ngcontent-%COMP%]{background:#eef3fb;border:none;width:30px;height:30px;border-radius:8px;font-size:1.15rem;font-weight:700;color:#1e3962;cursor:pointer;transition:background .15s,color .15s;line-height:1}.grid-close-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.modal-search-inline[_ngcontent-%COMP%]{margin-bottom:6px}.exercise-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:12px 12px;margin-top:4px}.exercise-grid-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2ecf5;border-radius:12px;padding:8px 8px 9px;display:flex;flex-direction:column;align-items:center;gap:5px;position:relative;box-shadow:0 2px 10px #d6e5f826;transition:box-shadow .15s,transform .15s;min-height:135px}.exercise-grid-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #c6d9f84b;transform:translateY(-2px)}.grid-img[_ngcontent-%COMP%]{width:54px;height:54px;border-radius:10px;background:#f2f7fb;display:flex;align-items:center;justify-content:center;overflow:hidden}.grid-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:50px;max-height:50px;object-fit:contain;display:block}.grid-placeholder[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center}.grid-info[_ngcontent-%COMP%]{width:100%;text-align:center;display:flex;flex-direction:column;gap:0;min-height:32px}.grid-name[_ngcontent-%COMP%]{font-size:.62rem;font-weight:700;color:#163a5d;word-break:break-word;line-height:1.08;max-width:100%}.grid-cat[_ngcontent-%COMP%]{font-size:.5rem;font-weight:600;letter-spacing:.05em;color:#2563eb;opacity:.78}.grid-detail-link[_ngcontent-%COMP%]{margin-top:auto;font-size:.52rem;font-weight:700;background:#2563eb;color:#fff;padding:4px 10px 3px;border-radius:5px;text-decoration:none;letter-spacing:.04em;box-shadow:0 1px 3px #2563eb59;transition:background .15s;align-self:flex-end}.grid-detail-link[_ngcontent-%COMP%]:hover{background:#18397a}.categorie-grid-modal[_ngcontent-%COMP%]{max-width:880px;width:94vw;padding:24px 24px 30px;position:relative}.category-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(115px,1fr));gap:12px 12px;margin-top:4px}.category-grid-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e1ebf3;border-radius:12px;padding:8px 8px 10px;display:flex;flex-direction:column;align-items:center;gap:5px;position:relative;box-shadow:0 2px 10px #d6e5f826;transition:box-shadow .15s,transform .15s;min-height:132px}.category-grid-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #c6d9f84b;transform:translateY(-2px)}.grid-cat-img[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:10px;background:#f2fbf4;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.grid-cat-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:48px;max-height:48px;object-fit:contain;display:block}.grid-cat-placeholder[_ngcontent-%COMP%]{width:34px;height:34px;display:flex;align-items:center;justify-content:center}.grid-cat-edit-btn[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]{position:absolute;bottom:6px;right:6px;width:26px;height:26px;padding:2px;border-radius:50%;border:1px solid #cfe0fb;background:#eaf2ff;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:background .15s,border-color .15s,transform .12s,box-shadow .15s}.grid-cat-edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.grid-cat-edit-btn[_ngcontent-%COMP%]:hover, .category-edit-img-btn[_ngcontent-%COMP%]:hover{background:#2563eb;border-color:#1f56c7;transform:translateY(-1px);box-shadow:0 2px 8px #2563eb59}.grid-cat-edit-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .category-edit-img-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#fff}.grid-cat-info[_ngcontent-%COMP%]{width:100%;text-align:center;display:flex;flex-direction:column;gap:0;min-height:28px}.grid-cat-name[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#163a5d;word-break:break-word;line-height:1.08}.grid-cat-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:auto}.grid-cat-delete-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4d1d1;color:#db3131;width:20px;height:20px;border-radius:50%;font-size:.7rem;font-weight:700;cursor:pointer;transition:background .15s,color .15s,border-color .15s;line-height:1;display:flex;align-items:center;justify-content:center}.grid-cat-delete-btn[_ngcontent-%COMP%]:hover{background:#db3131;color:#fff;border-color:#db3131}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]{width:18px;height:18px;position:relative;display:flex;align-items:center;justify-content:center}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;inset:0;cursor:pointer;margin:0}.grid-cat-checkbox[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #2563eb;border-radius:4px;background:#fff;position:relative;display:block;transition:background .15s,border-color .15s}.grid-cat-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:4px;top:2px;width:4px;height:7px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg);opacity:0;transition:opacity .15s}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .grid-cat-checkbox[_ngcontent-%COMP%]{background:#2563eb;border-color:#2563eb}.grid-cat-checkbox-wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .grid-cat-checkbox[_ngcontent-%COMP%]:after{opacity:1}.grid-empty[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;font-size:.72rem;font-weight:600;color:#5c6b80;background:#f1f6fb;border:1px dashed #d2e2f1;padding:14px 12px;border-radius:12px}@media (max-width: 1050px){.esercizi-layout[_ngcontent-%COMP%]{flex-direction:column;gap:32px;padding:24px 8px 44px;max-width:97vw}.esercizi-card[_ngcontent-%COMP%], .categorie-card[_ngcontent-%COMP%]{min-width:0;max-width:100%}.card-item[_ngcontent-%COMP%]{width:88%;max-width:88%}}@media (max-width: 660px){.card-item[_ngcontent-%COMP%]{width:94%!important;max-width:94%!important}}@media (max-width: 620px){.exercise-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:10px 10px}.grid-img[_ngcontent-%COMP%]{width:50px;height:50px}.grid-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:46px;max-height:46px}.category-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:10px 10px}.grid-cat-img[_ngcontent-%COMP%]{width:48px;height:48px}.grid-cat-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:44px;max-height:44px}}@media (max-width: 500px){.card-img-wrap[_ngcontent-%COMP%]{width:64px;height:64px}.card-img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:58px;max-height:58px}.exercise-detail-btn[_ngcontent-%COMP%]{font-size:.68rem;padding:5px 12px;bottom:10px;right:10px}.icon-image-upload-big[_ngcontent-%COMP%]{width:140px;height:140px}.image-preview[_ngcontent-%COMP%]{width:132px;height:132px}}.single-autocat-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:4px;display:flex;align-items:center}.single-autocat-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;border:1.7px solid #d2e3fa;border-radius:8px;padding:10px 34px 10px 15px;font-size:.96rem;background:#f7fbff;color:#2563eb;font-weight:700;outline:none;transition:border-color .17s,background .15s,color .15s}.single-autocat-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#2563eb;background:#f2f8ff}.single-autocat-wrapper[_ngcontent-%COMP%]   input.auto-matched[_ngcontent-%COMP%]{color:#1b533e;background:#e6f9f0}.clear-cat-btn[_ngcontent-%COMP%]{position:absolute;right:7px;top:50%;transform:translateY(-50%);background:#eef3fb;color:#22416f;border:none;width:24px;height:24px;font-size:16px;line-height:1;border-radius:6px;cursor:pointer;padding:0;font-weight:700;transition:background .15s,color .15s}.clear-cat-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;margin:18px auto 0}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#eef3fb;border:none;border-radius:8px;color:#2563eb;font-size:1.1rem;padding:3px 12px;font-weight:900;cursor:pointer;transition:background .15s,color .15s}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#e1e6f0;color:#8fa7cf;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:800;font-size:.98rem;color:#22416f}']});let n=e;return n})();var Yoe=n=>({active:n}),Qoe=(n,e)=>({active:n,inactive:e}),Zoe=n=>["/anagrafica",n];function Xoe(n,e){if(n&1&&Tt(0,"img",42),n&2){let t=ne().$implicit;de("src",t.avatarUrl,Vr)("alt",t.name)}}function Joe(n,e){n&1&&(C(0,"span",43),q(1,"person"),P())}function ese(n,e){if(n&1&&(C(0,"tr")(1,"td",27)(2,"div",28)(3,"div",29),Je(4,Xoe,1,2,"img",30)(5,Joe,2,0,"ng-template",null,0,qs),P(),C(7,"div",31)(8,"div",32),q(9),P()()()(),C(10,"td",33)(11,"span",34)(12,"span",35),q(13,"event"),P(),q(14),P()(),C(15,"td",36)(16,"span",37),q(17),P()(),C(18,"td",38)(19,"div",39)(20,"span",40),q(21),P()()(),C(22,"td")(23,"a",41)(24,"span",12),q(25,"visibility"),P()()()()),n&2){let t=e.$implicit,r=bo(6);K(4),de("ngIf",t.avatarUrl)("ngIfElse",r),K(5),ft(t.name),K(5),Sr(" ",t.signupDate," "),K(3),ft(t.email),K(3),de("ngClass",xv(10,Qoe,t.status==="Attivo",t.status!=="Attivo")),K(),ft(t.status),K(2),$c("aria-label",ad("Dettaglio ",t.name)),de("routerLink",ru(13,Zoe,t.id))}}function tse(n,e){if(n&1){let t=Mt();C(0,"aside",44)(1,"div",45),q(2,"Filtri"),P(),C(3,"label",46)(4,"span",47),q(5,"Stato"),P(),C(6,"select",48),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.filterStatus,i)||(o.filterStatus=i),xe(i)}),Ne("change",function(){be(t);let i=ne();return xe(i.applyFilters())}),C(7,"option",49),q(8,"Tutti"),P(),C(9,"option",50),q(10,"Attivo"),P(),C(11,"option",51),q(12,"Inattivo"),P()()(),C(13,"label",46)(14,"span",47),q(15,"Email"),P(),C(16,"select",48),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.filterHasEmail,i)||(o.filterHasEmail=i),xe(i)}),Ne("change",function(){be(t);let i=ne();return xe(i.applyFilters())}),C(17,"option",49),q(18,"Tutte"),P(),C(19,"option",52),q(20,"Solo con email"),P(),C(21,"option",53),q(22,"Solo senza email"),P()()(),C(23,"label",46)(24,"span",47),q(25,"Tessera"),P(),C(26,"select",54),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.filterTessera,i)||(o.filterTessera=i),xe(i)}),Ne("change",function(){be(t);let i=ne();return xe(i.applyFilters())}),C(27,"option",49),q(28,"Tutte"),P(),C(29,"option",55),q(30,"Attive"),P(),C(31,"option",56),q(32,"Scadute"),P()()()()}if(n&2){let t=ne();K(6),ct("ngModel",t.filterStatus),K(10),ct("ngModel",t.filterHasEmail),K(10),ct("ngModel",t.filterTessera)}}function nse(n,e){if(n&1){let t=Mt();C(0,"div",57),Ne("click",function(){be(t);let i=ne();return xe(i.closeModal())}),P()}}function rse(n,e){if(n&1&&(ro(0),Tt(1,"img",85),io()),n&2){let t=ne(2);K(),de("src",t.form.avatar,Vr)}}function ise(n,e){if(n&1){let t=Mt();C(0,"button",86),Ne("click",function(){be(t),ne();let i=bo(8),o=ne();return xe(o.triggerAvatarInput(i))}),C(1,"span",87),q(2,"photo_camera"),P()()}}function ose(n,e){n&1&&(C(0,"div",88),q(1," Caricamento immagine in corso... "),P())}function sse(n,e){if(n&1){let t=Mt();C(0,"div",58)(1,"form",59,1),Ne("ngSubmit",function(){be(t);let i=ne();return xe(i.registerUser())})("click",function(i){return be(t),xe(i.stopPropagation())}),C(3,"h2"),q(4,"Registra Cliente"),P(),C(5,"div",60)(6,"div",61)(7,"input",62,2),Ne("change",function(i){be(t);let o=ne();return xe(o.onAvatarChange(i))}),P(),Je(9,rse,2,1,"ng-container",63)(10,ise,3,0,"ng-template",null,3,qs),P(),Je(12,ose,2,0,"div",64),P(),C(13,"div",65)(14,"div",66)(15,"div",67)(16,"label",68),q(17,"Nome"),P(),C(18,"input",69),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.form.nome,i)||(o.form.nome=i),xe(i)}),P()(),C(19,"div",67)(20,"label",68),q(21,"Cognome"),P(),C(22,"input",70),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.form.cognome,i)||(o.form.cognome=i),xe(i)}),P()()(),C(23,"div",66)(24,"div",67)(25,"label",68),q(26,"Email"),P(),C(27,"input",71),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.form.emailModal,i)||(o.form.emailModal=i),xe(i)}),P()(),C(28,"div",67)(29,"label",68),q(30,"Numero di Telefono"),P(),C(31,"input",72),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.form.phone,i)||(o.form.phone=i),xe(i)}),P()()(),C(32,"div",66)(33,"div",67)(34,"label",73)(35,"span",35),q(36,"event"),P(),q(37," Data Iscrizione "),P(),C(38,"input",74),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.form.signupDateModal,i)||(o.form.signupDateModal=i),xe(i)}),P()(),C(39,"div",75)(40,"label",76),q(41,"-"),P(),C(42,"div",77)(43,"label",78)(44,"input",79),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.form.isActive,i)||(o.form.isActive=i),xe(i)}),P(),Tt(45,"span",80),P(),C(46,"span",81),q(47),P()()()()(),C(48,"div",82)(49,"button",83),Ne("click",function(){be(t);let i=ne();return xe(i.closeModal())}),q(50,"Annulla"),P(),C(51,"button",84),q(52,"Registra Cliente"),P()()()()}if(n&2){let t=bo(2),r=bo(11),i=ne();K(9),de("ngIf",i.form.avatar)("ngIfElse",r),K(3),de("ngIf",i.avatarLoading),K(6),ct("ngModel",i.form.nome),K(4),ct("ngModel",i.form.cognome),K(5),ct("ngModel",i.form.emailModal),K(4),ct("ngModel",i.form.phone),K(7),ct("ngModel",i.form.signupDateModal),K(6),ct("ngModel",i.form.isActive),K(2),oo("active",i.form.isActive)("inactive",!i.form.isActive),K(),Sr(" ",i.form.isActive?"Attivo":"Inattivo"," "),K(4),de("disabled",t.invalid||i.avatarLoading)}}var yU=(()=>{let e=class e{constructor(r,i){this.userService=r,this.imageService=i,this.searchTerm="",this.showFilters=!1,this.filterStatus="",this.filterHasEmail="",this.filterTessera="",this.users=[],this.filteredUsers=[],this.modalOpen=!1,this.today=new Date().toISOString().slice(0,10),this.form={avatar:"",avatarFile:null,nome:"",cognome:"",emailModal:"",phone:"",signupDateModal:"",isActive:!0},this.avatarLoading=!1}ngOnInit(){this.usersSub=this.userService.getAll$().subscribe(r=>{this.users=r||[],this.applyFilters()})}ngOnDestroy(){this.usersSub?.unsubscribe()}openModal(){this.modalOpen=!0,this.form={avatar:"",avatarFile:null,nome:"",cognome:"",emailModal:"",phone:"",signupDateModal:"",isActive:!0}}closeModal(){this.modalOpen=!1}onSearchChange(){this.applyFilters()}toggleFilters(){this.showFilters=!this.showFilters}matchesSearch(r,i){if(!i)return!0;let o=i.toLowerCase();return r.name?.toLowerCase().includes(o)||r.email?.toLowerCase().includes(o)||!1}hasEmail(r){return!!(r.email&&r.email.trim()!=="")}getTesseraFine(r){let i=(r.subscriptionEnd||r.tesseraEnd||"").trim();return i.length===10?i:""}applyFilters(){let r=[...this.users];this.searchTerm&&(r=r.filter(i=>this.matchesSearch(i,this.searchTerm))),this.filterStatus&&(r=r.filter(i=>i.status===this.filterStatus)),this.filterHasEmail==="with"?r=r.filter(i=>this.hasEmail(i)):this.filterHasEmail==="without"&&(r=r.filter(i=>!this.hasEmail(i))),this.filterTessera==="attiva"?r=r.filter(i=>{let o=this.getTesseraFine(i);return o!==""&&o>this.today}):this.filterTessera==="scaduta"&&(r=r.filter(i=>{let o=this.getTesseraFine(i);return o!==""&&o<=this.today})),this.filteredUsers=r}onAvatarChange(r){return ee(this,null,function*(){let i=r.target.files?.[0];i&&(this.avatarLoading=!0,this.form.avatarFile=i,this.form.avatar=yield this.imageService.compressAndConvertToBase64(i,1e3,256),this.avatarLoading=!1)})}triggerAvatarInput(r){r.click()}registerUser(){return ee(this,null,function*(){this.avatarLoading=!0;let r=this.form.isActive?"Attivo":"Inattivo",i={name:`${this.form.nome} ${this.form.cognome}`.trim(),email:this.form.emailModal,phone:this.form.phone,signupDate:this.form.signupDateModal||new Date().toISOString().slice(0,10),avatarUrl:this.form.avatar,status:r,cards:[]};try{yield this.userService.add(i),this.avatarLoading=!1,this.closeModal(),this.applyFilters()}catch(o){this.avatarLoading=!1,alert("Errore nel salvataggio: "+(o?.message||o))}})}};e.\u0275fac=function(i){return new(i||e)(tt(Cm),tt(Em))},e.\u0275cmp=Kn({type:e,selectors:[["app-anagrafica"]],standalone:!1,decls:40,vars:12,consts:[["defaultAvatarRow",""],["modalForm","ngForm"],["avatarInput",""],["showIcon",""],[1,"anagrafica-utenti-layout"],[1,"anagrafica-content","align-left"],[1,"actions-header","responsive-header"],[1,"btn","primary",3,"click"],[1,"header-controls"],[1,"searchbar"],["type","text","placeholder","Cerca...",3,"ngModelChange","input","ngModel"],["title","Cerca",1,"icon-btn",3,"click"],[1,"material-icons"],["title","Filtri",1,"icon-btn",3,"click","ngClass","aria-expanded"],[1,"list-layout"],[1,"list-main"],[1,"table-outer-center"],[1,"user-table"],[2,"width","30%"],[2,"width","16%"],[2,"width","13%"],[2,"width","12%"],[1,"align-left"],[4,"ngFor","ngForOf"],["class","filters-aside",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-nuovo-utente",4,"ngIf"],[1,"user-cell"],[1,"user-card-row"],[1,"user-avatar"],["class","avatar-img",3,"src","alt",4,"ngIf","ngIfElse"],[1,"user-info-main"],[1,"user-name"],[1,"user-signup"],[1,"user-date"],[1,"material-icons","calendar-icon"],[1,"user-email-table"],[1,"user-email"],[1,"user-status-actions"],[1,"status-action-flex","left-align"],[1,"status-label",3,"ngClass"],["title","Dettaglio",1,"icon-btn",3,"aria-label","routerLink"],[1,"avatar-img",3,"src","alt"],[1,"avatar-placeholder","material-icons"],[1,"filters-aside"],[1,"filters-title"],[1,"filter-group"],[1,"filter-label"],[3,"ngModelChange","change","ngModel"],["value",""],["value","Attivo"],["value","Inattivo"],["value","with"],["value","without"],[1,"tessera-select",3,"ngModelChange","change","ngModel"],["value","attiva"],["value","scaduta"],[1,"modal-backdrop",3,"click"],[1,"modal-nuovo-utente"],[1,"modal-form",3,"ngSubmit","click"],[1,"avatar-modal-section"],[1,"avatar-upload-box"],["type","file","accept","image/*","hidden","",3,"change"],[4,"ngIf","ngIfElse"],["class","avatar-loader","style","margin-left:15px;color:#888;",4,"ngIf"],[1,"modal-fields","modal-fields-2col"],[1,"modal-form-row"],[1,"form-group"],[1,"field-label"],["type","text","placeholder","Nome","name","nome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Cognome","name","cognome","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","emailModal","autocomplete","off","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Numero di Telefono","name","phone",3,"ngModelChange","ngModel"],[1,"field-label","flex-label","calendar-label"],["type","date","name","signupDateModal",3,"ngModelChange","ngModel"],[1,"form-group","form-group-switch"],[1,"field-label",2,"opacity","0","user-select","none"],[1,"modal-stato-switch"],[1,"switch"],["type","checkbox","name","isActive",3,"ngModelChange","ngModel"],[1,"slider"],[1,"modal-stato"],[1,"modal-actions"],["type","button",1,"btn","cancel",3,"click"],["type","submit",1,"btn","primary",3,"disabled"],["alt","Avatar",1,"avatar-img-preview",3,"src"],["type","button",1,"avatar-add-btn",3,"click"],[1,"material-icons","avatar-add"],[1,"avatar-loader",2,"margin-left","15px","color","#888"]],template:function(i,o){i&1&&(C(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),Ne("click",function(){return o.openModal()}),q(4,"Cliente"),P(),C(5,"div",8)(6,"div",9)(7,"input",10),lt("ngModelChange",function(a){return ut(o.searchTerm,a)||(o.searchTerm=a),a}),Ne("input",function(){return o.onSearchChange()}),P(),C(8,"button",11),Ne("click",function(){return o.onSearchChange()}),C(9,"span",12),q(10,"search"),P()(),C(11,"button",13),Ne("click",function(){return o.toggleFilters()}),C(12,"span",12),q(13,"filter_list"),P()()()()(),C(14,"div",14)(15,"div",15)(16,"div",16)(17,"table",17)(18,"colgroup"),Tt(19,"col",18)(20,"col",19)(21,"col",19)(22,"col",20)(23,"col",21),P(),C(24,"thead")(25,"tr")(26,"th",22),q(27,"Cliente"),P(),C(28,"th",22),q(29,"Data Iscrizione"),P(),C(30,"th",22),q(31,"Email"),P(),C(32,"th",22),q(33,"Stato"),P(),Tt(34,"th"),P()(),C(35,"tbody"),Je(36,ese,26,15,"tr",23),P()()()(),Je(37,tse,33,3,"aside",24),P(),Je(38,nse,1,0,"div",25)(39,sse,53,15,"div",26),P()()),i&2&&(K(7),ct("ngModel",o.searchTerm),K(4),$c("aria-expanded",Yf(o.showFilters)),de("ngClass",ru(10,Yoe,o.showFilters)),K(3),oo("has-filters",o.showFilters),K(22),de("ngForOf",o.filteredUsers),K(),de("ngIf",o.showFilters),K(),de("ngIf",o.modalOpen),K(),de("ngIf",o.modalOpen))},dependencies:[Tv,qi,ki,dg,Qc,Zc,xo,J5,Ta,ms,ug,Zf,Ko,Qf,Ma],styles:['[_ngcontent-%COMP%]:root{--primary: #2563eb;--primary-hover: #194fd6;--bg: #f5f8fc;--panel-bg: #ffffff;--panel-shadow: 0 2px 12px rgba(36,80,144,.06);--radius: 10px;--text: #143559}.anagrafica-utenti-layout[_ngcontent-%COMP%]{background:#f6f8fa;min-height:100vh;font-family:Segoe UI,Arial,sans-serif;width:100%;box-sizing:border-box}.anagrafica-content.align-left[_ngcontent-%COMP%]{max-width:1200px;margin:36px auto 40px;padding:0 24px}.actions-header.responsive-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;align-items:center;gap:18px;margin-bottom:18px}.header-controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:18px}.searchbar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f8fafd;border-radius:9px;padding:6px 10px;gap:4px;min-width:220px;max-width:360px;width:100%;height:38px;box-shadow:0 0 4px #365fd014;border:1px solid #dae2ec;transition:border-color .18s,box-shadow .18s}.searchbar[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);box-shadow:0 0 0 3px #2563eb1c}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;font-size:.92rem;font-weight:500;padding:4px 6px 4px 2px;width:100%;color:#242f42}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:6px 7px;border-radius:8px;transition:background .13s;display:flex;align-items:center;margin-left:0}.icon-btn[_ngcontent-%COMP%]:hover, .icon-btn[_ngcontent-%COMP%]:focus{background:#eaeef6}.icon-btn.active[_ngcontent-%COMP%], .icon-btn[aria-expanded=true][_ngcontent-%COMP%]{background:#e8f0ff}.material-icons[_ngcontent-%COMP%], .icon-font[_ngcontent-%COMP%]{font-family:Material Icons,Segoe UI Symbol,Arial,sans-serif;font-style:normal;font-weight:400;font-size:22px;display:inline-block;line-height:1;color:var(--primary);vertical-align:middle;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.list-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:18px;align-items:start}.list-layout.has-filters[_ngcontent-%COMP%]{grid-template-columns:1fr 260px}.filters-aside[_ngcontent-%COMP%]{align-self:start;background:transparent;border:none;box-shadow:none;padding:4px 0;display:flex;flex-direction:column;gap:12px}.filters-title[_ngcontent-%COMP%]{font-weight:700;color:#143559;margin-bottom:2px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.filter-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#345;letter-spacing:.02em}.filters-aside[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:36px;line-height:36px;padding:0 12px;border-radius:8px;border:1px solid #ccdaeb;background:#fff;color:#132a4a;font-weight:600;font-size:.95rem;outline:none;transition:border-color .18s,box-shadow .18s}.filters-aside[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #2563eb26}.tessera-select[_ngcontent-%COMP%]   option[value=attiva][_ngcontent-%COMP%]{color:#318b2b}.tessera-select[_ngcontent-%COMP%]   option[value=scaduta][_ngcontent-%COMP%]{color:#d32f2f}.table-outer-center[_ngcontent-%COMP%]{display:block}.user-table[_ngcontent-%COMP%]{background:#fff;box-shadow:0 5px 35px #d3dbe925;border-spacing:0;border-radius:13px;width:100%;table-layout:fixed;overflow:hidden}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px;font-size:.95rem;background:#fff;vertical-align:middle;word-break:break-word;text-align:left;height:52px}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fbfc;font-weight:700;color:#232e47;border-bottom:2px solid #ececf0}.user-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f1f2f7}.user-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.user-cell[_ngcontent-%COMP%]{vertical-align:middle;padding-top:6px;padding-bottom:6px}.user-card-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;min-height:41px}.user-avatar[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center}.avatar-img[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:41px;height:41px;border-radius:12px;background:#dbe3ef;display:flex;align-items:center;justify-content:center;font-size:22px;color:#b4bed0;object-fit:cover}.user-info-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;min-width:0;width:100%}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#143559;font-size:1.06rem;line-height:1.15}.user-date[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--primary);font-size:.83rem;gap:6px;font-weight:600}.calendar-icon[_ngcontent-%COMP%]{font-size:18px;color:#2177e8}.user-email[_ngcontent-%COMP%]{color:#5f6c7e;font-size:.83rem;word-break:break-all}.user-status-actions[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.status-action-flex.left-align[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.status-label[_ngcontent-%COMP%]{font-weight:600;border-radius:7px;padding:6px 16px;font-size:.83rem;min-width:72px;text-align:center}.status-label.active[_ngcontent-%COMP%]{color:#14b452;background:#e8faee}.status-label.inactive[_ngcontent-%COMP%]{color:#e76c6c;background:#fde8e8}a.icon-btn[_ngcontent-%COMP%]{text-decoration:none!important}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:1010;inset:0;background:#17334b33}.modal-nuovo-utente[_ngcontent-%COMP%]{position:fixed;z-index:1020;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:20px;box-shadow:0 6px 32px #21407a33,0 1.5px 3px #21407a29;min-width:380px;max-width:520px;width:96vw;padding:26px 20px 18px;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalpop .18s cubic-bezier(.32,1.56,.66,1)}.modal-form[_ngcontent-%COMP%]{width:100%}.modal-nuovo-utente[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;color:#232e47;margin:0 0 18px;text-align:center}.avatar-modal-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:18px;margin-top:4px}.avatar-upload-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.avatar-add-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0}.avatar-add[_ngcontent-%COMP%]{font-size:34px}.avatar-img-preview[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;object-fit:cover;display:block}.modal-fields-2col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:100%}.modal-form-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:28px;width:100%;margin-bottom:22px}.form-group[_ngcontent-%COMP%]{flex:1 0 0;min-width:0;display:flex;flex-direction:column}.form-group-switch[_ngcontent-%COMP%]{justify-content:flex-end;align-items:flex-end}.modal-fields-2col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-fields-2col[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.9rem;border-radius:7px;border:1.4px solid #d6d9e0;padding:10px 9px;outline:none;background:#f8fafc;color:#223555;transition:border-color .15s,background-color .15s;width:100%}.modal-fields-2col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-fields-2col[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:#f2f7ff}.field-label[_ngcontent-%COMP%]{font-size:.83rem;font-weight:600;color:#1e2a3e;margin:4px 0 6px 1px;letter-spacing:.02em;text-transform:uppercase}.flex-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.modal-stato-switch[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.modal-stato[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:#21af5a;min-width:55px;text-align:right}.modal-stato.inactive[_ngcontent-%COMP%]{color:#e36e6e}.switch[_ngcontent-%COMP%]{display:inline-block;width:48px;height:26px;position:relative}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;inset:0;background:#e4e9f1;border-radius:26px;transition:.2s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#22c55e}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:4px;bottom:3px;border-radius:50%;background:#fff;box-shadow:0 1px 4px #6366f13a;transition:.19s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(20px)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:4px}.btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 15px;border-radius:9px;font-size:.85rem;font-weight:600;cursor:pointer;transition:background .16s}.btn[_ngcontent-%COMP%]:hover{background:var(--primary-hover)}.btn.cancel[_ngcontent-%COMP%]{background:#eef3fb;color:#1e3a8a}.btn.cancel[_ngcontent-%COMP%]:hover{background:#e1ebfb}@keyframes _ngcontent-%COMP%_modalpop{0%{transform:translate(-50%,-53%) scale(.97)}to{transform:translate(-50%,-50%) scale(1)}}@media (max-width: 980px){.list-layout.has-filters[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-aside[_ngcontent-%COMP%]{order:-1}}@media (max-width: 600px){.searchbar[_ngcontent-%COMP%]{max-width:100%}.modal-nuovo-utente[_ngcontent-%COMP%]{min-width:300px}}@media (max-width: 420px){.searchbar[_ngcontent-%COMP%]{min-width:100%;height:36px}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:.84rem}.icon-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}}']});let n=e;return n})();var ase=n=>["/anagrafica",n];function cse(n,e){if(n&1&&(C(0,"div",3)(1,"div",4)(2,"div",5),q(3),P(),C(4,"div",6),q(5),P()(),C(6,"div",7)(7,"a",8),q(8,"Dettaglio"),P()()()),n&2){let t=e.$implicit;K(3),ft(t.name),K(2),ft(t.email),K(2),de("routerLink",ru(3,ase,t.id))}}var _U=(()=>{let e=class e{constructor(r){this.userService=r,this.users=[],this.filteredUsers=[]}ngOnInit(){return ee(this,null,function*(){let r=yield this.userService.getAll();this.users=r,this.filteredUsers=[...this.users]})}};e.\u0275fac=function(i){return new(i||e)(tt(Cm))},e.\u0275cmp=Kn({type:e,selectors:[["app-anagrafica-list"]],standalone:!1,decls:5,vars:1,consts:[[1,"page","anagrafica-list"],[1,"list"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"left"],[1,"name"],[1,"email"],[1,"actions"],[1,"btn","small",3,"routerLink"]],template:function(i,o){i&1&&(C(0,"div",0)(1,"h2"),q(2,"Lista Utenti"),P(),C(3,"div",1),Je(4,cse,9,5,"div",2),P()()),i&2&&(K(4),de("ngForOf",o.filteredUsers))},dependencies:[qi,Ma],styles:[".anagrafica-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin-top:12px}.anagrafica-list[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;padding:12px;border-radius:8px;margin-bottom:10px}.anagrafica-list[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600}.anagrafica-list[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--muted);font-size:13px}.btn.small[_ngcontent-%COMP%]{padding:6px 8px}.anagrafica-list[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400;font-size:15px}.anagrafica-list[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .anagrafica-list[_ngcontent-%COMP%]   select.tessera-combo[_ngcontent-%COMP%]{accent-color:#1742b0;margin-right:6px;margin-left:3px;vertical-align:middle}.anagrafica-list[_ngcontent-%COMP%]   .tessera-combo[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #b9c4d4;padding:5px 9px;font-size:15px;background:#fff;color:#1742b0;font-weight:500;min-width:75px;margin-left:8px;margin-right:6px;vertical-align:middle}.anagrafica-list[_ngcontent-%COMP%]   .filter-bar[_ngcontent-%COMP%]{display:flex;gap:18px;align-items:center;margin-bottom:15px}.anagrafica-list[_ngcontent-%COMP%]   .filter-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}"]});let n=e;return n})();function Un(n){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(n)}var yc=Uint8Array,ea=Uint16Array,jP=Int32Array,BP=new yc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),UP=new yc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wU=new yc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),EU=function(n,e){for(var t=new ea(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new jP(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},IU=EU(BP,2),lse=IU.b,FP=IU.r;lse[28]=258,FP[258]=28;var SU=EU(UP,0),jke=SU.b,bU=SU.r,LP=new ea(32768);for(Fn=0;Fn<32768;++Fn)vu=(Fn&43690)>>1|(Fn&21845)<<1,vu=(vu&52428)>>2|(vu&13107)<<2,vu=(vu&61680)>>4|(vu&3855)<<4,LP[Fn]=((vu&65280)>>8|(vu&255)<<8)>>1;var vu,Fn,d_=function(n,e,t){for(var r=n.length,i=0,o=new ea(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new ea(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new ea(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],u=e-n[i],h=s[n[i]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)a[LP[h]>>c]=l}else for(a=new ea(r),i=0;i<r;++i)n[i]&&(a[i]=LP[s[n[i]-1]++]>>15-n[i]);return a},Nh=new yc(288);for(Fn=0;Fn<144;++Fn)Nh[Fn]=8;var Fn;for(Fn=144;Fn<256;++Fn)Nh[Fn]=9;var Fn;for(Fn=256;Fn<280;++Fn)Nh[Fn]=7;var Fn;for(Fn=280;Fn<288;++Fn)Nh[Fn]=8;var Fn,yC=new yc(32);for(Fn=0;Fn<32;++Fn)yC[Fn]=5;var Fn,use=d_(Nh,9,0);var dse=d_(yC,5,0);var AU=function(n){return(n+7)/8|0},fse=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new yc(n.subarray(e,t))};var yu=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},l_=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},OP=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:TU,l:0};if(i==1){var s=new yc(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(oe,he){return oe.f-he.f}),t.push({s:-1,f:25001});var a=t[0],c=t[1],l=0,u=1,h=2;for(t[0]={s:-1,f:a.f+c.f,l:a,r:c};u!=i-1;)a=t[t[l].f<t[h].f?l++:h++],c=t[l!=u&&t[l].f<t[h].f?l++:h++],t[u++]={s:-1,f:a.f+c.f,l:a,r:c};for(var m=o[0].s,r=1;r<i;++r)o[r].s>m&&(m=o[r].s);var g=new ea(m+1),b=VP(t[u-1],g,0);if(b>e){var r=0,I=0,T=b-e,N=1<<T;for(o.sort(function(he,z){return g[z.s]-g[he.s]||he.f-z.f});r<i;++r){var Y=o[r].s;if(g[Y]>e)I+=N-(1<<b-g[Y]),g[Y]=e;else break}for(I>>=T;I>0;){var j=o[r].s;g[j]<e?I-=1<<e-g[j]++-1:++r}for(;r>=0&&I;--r){var W=o[r].s;g[W]==e&&(--g[W],++I)}b=e}return{t:new yc(g),l:b}},VP=function(n,e,t){return n.s==-1?Math.max(VP(n.l,e,t+1),VP(n.r,e,t+1)):e[n.s]=t},xU=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ea(++e),r=0,i=n[0],o=1,s=function(c){t[r++]=c},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},u_=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},DU=function(n,e,t){var r=t.length,i=AU(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},CU=function(n,e,t,r,i,o,s,a,c,l,u){yu(e,u++,t),++i[256];for(var h=OP(i,15),m=h.t,g=h.l,b=OP(o,15),I=b.t,T=b.l,N=xU(m),Y=N.c,j=N.n,W=xU(I),oe=W.c,he=W.n,z=new ea(19),M=0;M<Y.length;++M)++z[Y[M]&31];for(var M=0;M<oe.length;++M)++z[oe[M]&31];for(var S=OP(z,7),V=S.t,x=S.l,A=19;A>4&&!V[wU[A-1]];--A);var D=l+5<<3,te=u_(i,Nh)+u_(o,yC)+s,_e=u_(i,m)+u_(o,I)+s+14+3*A+u_(z,V)+2*z[16]+3*z[17]+7*z[18];if(c>=0&&D<=te&&D<=_e)return DU(e,u,n.subarray(c,c+l));var Te,Ce,fe,Ae;if(yu(e,u,1+(_e<te)),u+=2,_e<te){Te=d_(m,g,0),Ce=m,fe=d_(I,T,0),Ae=I;var Be=d_(V,x,0);yu(e,u,j-257),yu(e,u+5,he-1),yu(e,u+10,A-4),u+=14;for(var M=0;M<A;++M)yu(e,u+3*M,V[wU[M]]);u+=3*A;for(var Fe=[Y,oe],O=0;O<2;++O)for(var G=Fe[O],M=0;M<G.length;++M){var J=G[M]&31;yu(e,u,Be[J]),u+=V[J],J>15&&(yu(e,u,G[M]>>5&127),u+=G[M]>>12)}}else Te=use,Ce=Nh,fe=dse,Ae=yC;for(var M=0;M<a;++M){var ie=r[M];if(ie>255){var J=ie>>18&31;l_(e,u,Te[J+257]),u+=Ce[J+257],J>7&&(yu(e,u,ie>>23&31),u+=BP[J]);var ae=ie&31;l_(e,u,fe[ae]),u+=Ae[ae],ae>3&&(l_(e,u,ie>>5&8191),u+=UP[ae])}else l_(e,u,Te[ie]),u+=Ce[ie]}return l_(e,u,Te[256]),u+Ce[256]},hse=new jP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),TU=new yc(0),pse=function(n,e,t,r,i,o){var s=o.z||n.length,a=new yc(r+s+5*(1+Math.ceil(s/7e3))+i),c=a.subarray(r,a.length-i),l=o.l,u=(o.r||0)&7;if(e){u&&(c[0]=o.r>>3);for(var h=hse[e-1],m=h>>13,g=h&8191,b=(1<<t)-1,I=o.p||new ea(32768),T=o.h||new ea(b+1),N=Math.ceil(t/3),Y=2*N,j=function(ot){return(n[ot]^n[ot+1]<<N^n[ot+2]<<Y)&b},W=new jP(25e3),oe=new ea(288),he=new ea(32),z=0,M=0,S=o.i||0,V=0,x=o.w||0,A=0;S+2<s;++S){var D=j(S),te=S&32767,_e=T[D];if(I[te]=_e,T[D]=te,x<=S){var Te=s-S;if((z>7e3||V>24576)&&(Te>423||!l)){u=CU(n,c,0,W,oe,he,M,V,A,S-A,u),V=z=M=0,A=S;for(var Ce=0;Ce<286;++Ce)oe[Ce]=0;for(var Ce=0;Ce<30;++Ce)he[Ce]=0}var fe=2,Ae=0,Be=g,Fe=te-_e&32767;if(Te>2&&D==j(S-Fe))for(var O=Math.min(m,Te)-1,G=Math.min(32767,S),J=Math.min(258,Te);Fe<=G&&--Be&&te!=_e;){if(n[S+fe]==n[S+fe-Fe]){for(var ie=0;ie<J&&n[S+ie]==n[S+ie-Fe];++ie);if(ie>fe){if(fe=ie,Ae=Fe,ie>O)break;for(var ae=Math.min(Fe,ie-2),pe=0,Ce=0;Ce<ae;++Ce){var Se=S-Fe+Ce&32767,ye=I[Se],Me=Se-ye&32767;Me>pe&&(pe=Me,_e=Se)}}}te=_e,_e=I[te],Fe+=te-_e&32767}if(Ae){W[V++]=268435456|FP[fe]<<18|bU[Ae];var Ue=FP[fe]&31,et=bU[Ae]&31;M+=BP[Ue]+UP[et],++oe[257+Ue],++he[et],x=S+fe,++z}else W[V++]=n[S],++oe[n[S]]}}for(S=Math.max(S,x);S<s;++S)W[V++]=n[S],++oe[n[S]];u=CU(n,c,l,W,oe,he,M,V,A,S-A,u),l||(o.r=u&7|c[u/8|0]<<3,u-=7,o.h=T,o.p=I,o.i=S,o.w=x)}else{for(var S=o.w||0;S<s+l;S+=65535){var We=S+65535;We>=s&&(c[u/8|0]=l,We=s),u=DU(c,u+1,n.subarray(S,We))}o.i=s}return fse(a,0,r+AU(u)+i)};var MU=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},gse=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new yc(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return pse(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)};var NU=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var mse=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=MU();i.p(e.dictionary),NU(n,2,i.d())}};function _C(n,e){e||(e={});var t=MU();t.p(n);var r=gse(n,e,e.dictionary?6:2,4);return mse(r,e),NU(r,r.length-4,t.d()),r}var vse=typeof TextDecoder<"u"&&new TextDecoder,yse=0;try{vse.decode(TU,{stream:!0}),yse=1}catch{}function PU(n){if(Array.isArray(n))return n}function kU(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function zP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function RU(n,e){if(n){if(typeof n=="string")return zP(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?zP(n,e):void 0}}function OU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qP(n,e){return PU(n)||kU(n,e)||RU(n,e)||OU()}function HP(n,e="utf8"){return new TextDecoder(e).decode(n)}var _se=new TextEncoder;function FU(n){return _se.encode(n)}var wse=1024*8,bse=(()=>{let n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),$P={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},f_=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=wse,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);let i=t.offset?t.offset>>>0:0,o=e.byteLength-i,s=i;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){let r=$P[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===bse&&t!=="uint8"&&t!=="int8"){let a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();let c=new $P[t](a.buffer);return this.offset+=r,c.reverse(),c}let s=new $P[t](o);return this.offset+=r,s}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return HP(this.readBytes(e))}decodeText(e=1,t="utf8"){return HP(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(FU(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function Mm(n){let e=n.length;for(;--e>=0;)n[e]=0}var xse=0,b9=1,Cse=2,Ese=3,Ise=258,gk=29,A_=256,__=A_+1+gk,Am=30,mk=19,x9=2*__+1,Ph=15,GP=16,Sse=7,vk=256,C9=16,E9=17,I9=18,sk=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),IC=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ase=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),S9=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dse=512,wu=new Array((__+2)*2);Mm(wu);var m_=new Array(Am*2);Mm(m_);var w_=new Array(Dse);Mm(w_);var b_=new Array(Ise-Ese+1);Mm(b_);var yk=new Array(gk);Mm(yk);var SC=new Array(Am);Mm(SC);function WP(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var A9,D9,T9;function KP(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var M9=n=>n<256?w_[n]:w_[256+(n>>>7)],x_=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},xs=(n,e,t)=>{n.bi_valid>GP-t?(n.bi_buf|=e<<n.bi_valid&65535,x_(n,n.bi_buf),n.bi_buf=e>>GP-n.bi_valid,n.bi_valid+=t-GP):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},ml=(n,e,t)=>{xs(n,t[e*2],t[e*2+1])},N9=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},Tse=n=>{n.bi_valid===16?(x_(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},Mse=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,u,h,m,g,b,I=0;for(m=0;m<=Ph;m++)n.bl_count[m]=0;for(t[n.heap[n.heap_max]*2+1]=0,l=n.heap_max+1;l<x9;l++)u=n.heap[l],m=t[t[u*2+1]*2+1]+1,m>c&&(m=c,I++),t[u*2+1]=m,!(u>r)&&(n.bl_count[m]++,g=0,u>=a&&(g=s[u-a]),b=t[u*2],n.opt_len+=b*(m+g),o&&(n.static_len+=b*(i[u*2+1]+g)));if(I!==0){do{for(m=c-1;n.bl_count[m]===0;)m--;n.bl_count[m]--,n.bl_count[m+1]+=2,n.bl_count[c]--,I-=2}while(I>0);for(m=c;m!==0;m--)for(u=n.bl_count[m];u!==0;)h=n.heap[--l],!(h>r)&&(t[h*2+1]!==m&&(n.opt_len+=(m-t[h*2+1])*t[h*2],t[h*2+1]=m),u--)}},P9=(n,e,t)=>{let r=new Array(Ph+1),i=0,o,s;for(o=1;o<=Ph;o++)i=i+t[o-1]<<1,r[o]=i;for(s=0;s<=e;s++){let a=n[s*2+1];a!==0&&(n[s*2]=N9(r[a]++,a))}},Nse=()=>{let n,e,t,r,i,o=new Array(Ph+1);for(t=0,r=0;r<gk-1;r++)for(yk[r]=t,n=0;n<1<<sk[r];n++)b_[t++]=r;for(b_[t-1]=r,i=0,r=0;r<16;r++)for(SC[r]=i,n=0;n<1<<IC[r];n++)w_[i++]=r;for(i>>=7;r<Am;r++)for(SC[r]=i<<7,n=0;n<1<<IC[r]-7;n++)w_[256+i++]=r;for(e=0;e<=Ph;e++)o[e]=0;for(n=0;n<=143;)wu[n*2+1]=8,n++,o[8]++;for(;n<=255;)wu[n*2+1]=9,n++,o[9]++;for(;n<=279;)wu[n*2+1]=7,n++,o[7]++;for(;n<=287;)wu[n*2+1]=8,n++,o[8]++;for(P9(wu,__+1,o),n=0;n<Am;n++)m_[n*2+1]=5,m_[n*2]=N9(n,5);A9=new WP(wu,sk,A_+1,__,Ph),D9=new WP(m_,IC,0,Am,Ph),T9=new WP(new Array(0),Ase,0,mk,Sse)},k9=n=>{let e;for(e=0;e<__;e++)n.dyn_ltree[e*2]=0;for(e=0;e<Am;e++)n.dyn_dtree[e*2]=0;for(e=0;e<mk;e++)n.bl_tree[e*2]=0;n.dyn_ltree[vk*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},R9=n=>{n.bi_valid>8?x_(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},LU=(n,e,t,r)=>{let i=e*2,o=t*2;return n[i]<n[o]||n[i]===n[o]&&r[e]<=r[t]},YP=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&LU(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!LU(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},VU=(n,e,t)=>{let r,i,o=0,s,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+o++]&255,r+=(n.pending_buf[n.sym_buf+o++]&255)<<8,i=n.pending_buf[n.sym_buf+o++],r===0?ml(n,i,e):(s=b_[i],ml(n,s+A_+1,e),a=sk[s],a!==0&&(i-=yk[s],xs(n,i,a)),r--,s=M9(r),ml(n,s,t),a=IC[s],a!==0&&(r-=SC[s],xs(n,r,a)));while(o<n.sym_next);ml(n,vk,e)},ak=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,c=-1,l;for(n.heap_len=0,n.heap_max=x9,s=0;s<o;s++)t[s*2]!==0?(n.heap[++n.heap_len]=c=s,n.depth[s]=0):t[s*2+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,t[l*2]=1,n.depth[l]=0,n.opt_len--,i&&(n.static_len-=r[l*2+1]);for(e.max_code=c,s=n.heap_len>>1;s>=1;s--)YP(n,t,s);l=o;do s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],YP(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=a,t[l*2]=t[s*2]+t[a*2],n.depth[l]=(n.depth[s]>=n.depth[a]?n.depth[s]:n.depth[a])+1,t[s*2+1]=t[a*2+1]=l,n.heap[1]=l++,YP(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],Mse(n,e),P9(t,c,n.bl_count)},jU=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)&&(a<l?n.bl_tree[o*2]+=a:o!==0?(o!==i&&n.bl_tree[o*2]++,n.bl_tree[C9*2]++):a<=10?n.bl_tree[E9*2]++:n.bl_tree[I9*2]++,a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},BU=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),r=0;r<=t;r++)if(o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)){if(a<l)do ml(n,o,n.bl_tree);while(--a!==0);else o!==0?(o!==i&&(ml(n,o,n.bl_tree),a--),ml(n,C9,n.bl_tree),xs(n,a-3,2)):a<=10?(ml(n,E9,n.bl_tree),xs(n,a-3,3)):(ml(n,I9,n.bl_tree),xs(n,a-11,7));a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}},Pse=n=>{let e;for(jU(n,n.dyn_ltree,n.l_desc.max_code),jU(n,n.dyn_dtree,n.d_desc.max_code),ak(n,n.bl_desc),e=mk-1;e>=3&&n.bl_tree[S9[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},kse=(n,e,t,r)=>{let i;for(xs(n,e-257,5),xs(n,t-1,5),xs(n,r-4,4),i=0;i<r;i++)xs(n,n.bl_tree[S9[i]*2+1],3);BU(n,n.dyn_ltree,e-1),BU(n,n.dyn_dtree,t-1)},Rse=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<A_;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},UU=!1,Ose=n=>{UU||(Nse(),UU=!0),n.l_desc=new KP(n.dyn_ltree,A9),n.d_desc=new KP(n.dyn_dtree,D9),n.bl_desc=new KP(n.bl_tree,T9),n.bi_buf=0,n.bi_valid=0,k9(n)},O9=(n,e,t,r)=>{xs(n,(xse<<1)+(r?1:0),3),R9(n),x_(n,t),x_(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},Fse=n=>{xs(n,b9<<1,3),ml(n,vk,wu),Tse(n)},Lse=(n,e,t,r)=>{let i,o,s=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=Rse(n)),ak(n,n.l_desc),ak(n,n.d_desc),s=Pse(n),i=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?O9(n,e,t,r):n.strategy===4||o===i?(xs(n,(b9<<1)+(r?1:0),3),VU(n,wu,m_)):(xs(n,(Cse<<1)+(r?1:0),3),kse(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),VU(n,n.dyn_ltree,n.dyn_dtree)),k9(n),r&&R9(n)},Vse=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(b_[t]+A_+1)*2]++,n.dyn_dtree[M9(e)*2]++),n.sym_next===n.sym_end),jse=Ose,Bse=O9,Use=Lse,zse=Vse,qse=Fse,Hse={_tr_init:jse,_tr_stored_block:Bse,_tr_flush_block:Use,_tr_tally:zse,_tr_align:qse},$se=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0},C_=$se,Gse=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},Wse=new Uint32Array(Gse()),Kse=(n,e,t,r)=>{let i=Wse,o=r+t;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1},Hi=Kse,Oh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Nm={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Yse,_tr_stored_block:ck,_tr_flush_block:Qse,_tr_tally:Zd,_tr_align:Zse}=Hse,{Z_NO_FLUSH:Xd,Z_PARTIAL_FLUSH:Xse,Z_FULL_FLUSH:Jse,Z_FINISH:Pa,Z_BLOCK:zU,Z_OK:lo,Z_STREAM_END:qU,Z_STREAM_ERROR:vl,Z_DATA_ERROR:eae,Z_BUF_ERROR:QP,Z_DEFAULT_COMPRESSION:tae,Z_FILTERED:nae,Z_HUFFMAN_ONLY:wC,Z_RLE:rae,Z_FIXED:iae,Z_DEFAULT_STRATEGY:oae,Z_UNKNOWN:sae,Z_DEFLATED:TC}=Nm,aae=9,cae=15,lae=8,uae=29,dae=256,lk=dae+1+uae,fae=30,hae=19,pae=2*lk+1,gae=15,In=3,Qd=258,yl=Qd+In+1,mae=32,Dm=42,_k=57,uk=69,dk=73,fk=91,hk=103,kh=113,p_=666,Jo=1,Pm=2,Fh=3,km=4,vae=3,Rh=(n,e)=>(n.msg=Oh[e],e),HU=n=>n*2-(n>4?9:0),Yd=n=>{let e=n.length;for(;--e>=0;)n[e]=0},yae=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},_ae=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,Jd=_ae,ta=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},na=(n,e)=>{Qse(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,ta(n.strm)},Ln=(n,e)=>{n.pending_buf[n.pending++]=e},h_=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},pk=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=C_(n.adler,e,i,t):n.state.wrap===2&&(n.adler=Hi(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},F9=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,o,s=n.prev_length,a=n.nice_match,c=n.strstart>n.w_size-yl?n.strstart-(n.w_size-yl):0,l=n.window,u=n.w_mask,h=n.prev,m=n.strstart+Qd,g=l[r+s-1],b=l[r+s];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(l[i+s]!==b||l[i+s-1]!==g||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<m);if(o=Qd-(m-r),r=m-Qd,o>s){if(n.match_start=e,s=o,o>=a)break;g=l[r+s-1],b=l[r+s]}}while((e=h[e&u])>c&&--t!==0);return s<=n.lookahead?s:n.lookahead},Tm=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-yl)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),yae(n),r+=e),n.strm.avail_in===0)break;if(t=pk(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=In)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=Jd(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=Jd(n,n.ins_h,n.window[i+In-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<In)););}while(n.lookahead<yl&&n.strm.avail_in!==0)},L9=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,o,s=0,a=n.strm.avail_in;do{if(r=65535,o=n.bi_valid+42>>3,n.strm.avail_out<o||(o=n.strm.avail_out-o,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>o&&(r=o),r<t&&(r===0&&e!==Pa||e===Xd||r!==i+n.strm.avail_in)))break;s=e===Pa&&r===i+n.strm.avail_in?1:0,ck(n,0,0,s),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,ta(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(pk(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(s===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),s?km:e!==Xd&&e!==Pa&&n.strm.avail_in===0&&n.strstart===n.block_start?Pm:(o=n.window_size-n.strstart,n.strm.avail_in>o&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,o+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),o>n.strm.avail_in&&(o=n.strm.avail_in),o&&(pk(n.strm,n.window,n.strstart,o),n.strstart+=o,n.insert+=o>n.w_size-n.insert?n.w_size-n.insert:o),n.high_water<n.strstart&&(n.high_water=n.strstart),o=n.bi_valid+42>>3,o=n.pending_buf_size-o>65535?65535:n.pending_buf_size-o,t=o>n.w_size?n.w_size:o,i=n.strstart-n.block_start,(i>=t||(i||e===Pa)&&e!==Xd&&n.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,s=e===Pa&&n.strm.avail_in===0&&r===i?1:0,ck(n,n.block_start,r,s),n.block_start+=r,ta(n.strm)),s?Fh:Jo)},ZP=(n,e)=>{let t,r;for(;;){if(n.lookahead<yl){if(Tm(n),n.lookahead<yl&&e===Xd)return Jo;if(n.lookahead===0)break}if(t=0,n.lookahead>=In&&(n.ins_h=Jd(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-yl&&(n.match_length=F9(n,t)),n.match_length>=In)if(r=Zd(n,n.strstart-n.match_start,n.match_length-In),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=In){n.match_length--;do n.strstart++,n.ins_h=Jd(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=Jd(n,n.ins_h,n.window[n.strstart+1]);else r=Zd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(na(n,!1),n.strm.avail_out===0))return Jo}return n.insert=n.strstart<In-1?n.strstart:In-1,e===Pa?(na(n,!0),n.strm.avail_out===0?Fh:km):n.sym_next&&(na(n,!1),n.strm.avail_out===0)?Jo:Pm},Im=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<yl){if(Tm(n),n.lookahead<yl&&e===Xd)return Jo;if(n.lookahead===0)break}if(t=0,n.lookahead>=In&&(n.ins_h=Jd(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=In-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-yl&&(n.match_length=F9(n,t),n.match_length<=5&&(n.strategy===nae||n.match_length===In&&n.strstart-n.match_start>4096)&&(n.match_length=In-1)),n.prev_length>=In&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-In,r=Zd(n,n.strstart-1-n.prev_match,n.prev_length-In),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=Jd(n,n.ins_h,n.window[n.strstart+In-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=In-1,n.strstart++,r&&(na(n,!1),n.strm.avail_out===0))return Jo}else if(n.match_available){if(r=Zd(n,0,n.window[n.strstart-1]),r&&na(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return Jo}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=Zd(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<In-1?n.strstart:In-1,e===Pa?(na(n,!0),n.strm.avail_out===0?Fh:km):n.sym_next&&(na(n,!1),n.strm.avail_out===0)?Jo:Pm},wae=(n,e)=>{let t,r,i,o,s=n.window;for(;;){if(n.lookahead<=Qd){if(Tm(n),n.lookahead<=Qd&&e===Xd)return Jo;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=In&&n.strstart>0&&(i=n.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=n.strstart+Qd;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);n.match_length=Qd-(o-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=In?(t=Zd(n,1,n.match_length-In),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=Zd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(na(n,!1),n.strm.avail_out===0))return Jo}return n.insert=0,e===Pa?(na(n,!0),n.strm.avail_out===0?Fh:km):n.sym_next&&(na(n,!1),n.strm.avail_out===0)?Jo:Pm},bae=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(Tm(n),n.lookahead===0)){if(e===Xd)return Jo;break}if(n.match_length=0,t=Zd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(na(n,!1),n.strm.avail_out===0))return Jo}return n.insert=0,e===Pa?(na(n,!0),n.strm.avail_out===0?Fh:km):n.sym_next&&(na(n,!1),n.strm.avail_out===0)?Jo:Pm};function gl(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var g_=[new gl(0,0,0,0,L9),new gl(4,4,8,4,ZP),new gl(4,5,16,8,ZP),new gl(4,6,32,32,ZP),new gl(4,4,16,16,Im),new gl(8,16,32,32,Im),new gl(8,16,128,128,Im),new gl(8,32,128,256,Im),new gl(32,128,258,1024,Im),new gl(32,258,258,4096,Im)],xae=n=>{n.window_size=2*n.w_size,Yd(n.head),n.max_lazy_match=g_[n.level].max_lazy,n.good_match=g_[n.level].good_length,n.nice_match=g_[n.level].nice_length,n.max_chain_length=g_[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=In-1,n.match_available=0,n.ins_h=0};function Cae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=TC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(pae*2),this.dyn_dtree=new Uint16Array((2*fae+1)*2),this.bl_tree=new Uint16Array((2*hae+1)*2),Yd(this.dyn_ltree),Yd(this.dyn_dtree),Yd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(gae+1),this.heap=new Uint16Array(2*lk+1),Yd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*lk+1),Yd(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var D_=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==Dm&&e.status!==_k&&e.status!==uk&&e.status!==dk&&e.status!==fk&&e.status!==hk&&e.status!==kh&&e.status!==p_?1:0},V9=n=>{if(D_(n))return Rh(n,vl);n.total_in=n.total_out=0,n.data_type=sae;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?_k:e.wrap?Dm:kh,n.adler=e.wrap===2?0:1,e.last_flush=-2,Yse(e),lo},j9=n=>{let e=V9(n);return e===lo&&xae(n.state),e},Eae=(n,e)=>D_(n)||n.state.wrap!==2?vl:(n.state.gzhead=e,lo),B9=(n,e,t,r,i,o)=>{if(!n)return vl;let s=1;if(e===tae&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>aae||t!==TC||r<8||r>15||e<0||e>9||o<0||o>iae||r===8&&s!==1)return Rh(n,vl);r===8&&(r=9);let a=new Cae;return n.state=a,a.strm=n,a.status=Dm,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+In-1)/In),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=t,j9(n)},Iae=(n,e)=>B9(n,e,TC,cae,lae,oae),Sae=(n,e)=>{if(D_(n)||e>zU||e<0)return n?Rh(n,vl):vl;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===p_&&e!==Pa)return Rh(n,n.avail_out===0?QP:vl);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(ta(n),n.avail_out===0)return t.last_flush=-1,lo}else if(n.avail_in===0&&HU(e)<=HU(r)&&e!==Pa)return Rh(n,QP);if(t.status===p_&&n.avail_in!==0)return Rh(n,QP);if(t.status===Dm&&t.wrap===0&&(t.status=kh),t.status===Dm){let i=TC+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=wC||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,i|=o<<6,t.strstart!==0&&(i|=mae),i+=31-i%31,h_(t,i),t.strstart!==0&&(h_(t,n.adler>>>16),h_(t,n.adler&65535)),n.adler=1,t.status=kh,ta(n),t.pending!==0)return t.last_flush=-1,lo}if(t.status===_k){if(n.adler=0,Ln(t,31),Ln(t,139),Ln(t,8),t.gzhead)Ln(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Ln(t,t.gzhead.time&255),Ln(t,t.gzhead.time>>8&255),Ln(t,t.gzhead.time>>16&255),Ln(t,t.gzhead.time>>24&255),Ln(t,t.level===9?2:t.strategy>=wC||t.level<2?4:0),Ln(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Ln(t,t.gzhead.extra.length&255),Ln(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=Hi(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=uk;else if(Ln(t,0),Ln(t,0),Ln(t,0),Ln(t,0),Ln(t,0),Ln(t,t.level===9?2:t.strategy>=wC||t.level<2?4:0),Ln(t,vae),t.status=kh,ta(n),t.pending!==0)return t.last_flush=-1,lo}if(t.status===uk){if(t.gzhead.extra){let i=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=Hi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,ta(n),t.pending!==0)return t.last_flush=-1,lo;i=0,o-=a}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>i&&(n.adler=Hi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=dk}if(t.status===dk){if(t.gzhead.name){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Hi(n.adler,t.pending_buf,t.pending-i,i)),ta(n),t.pending!==0)return t.last_flush=-1,lo;i=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,Ln(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Hi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=fk}if(t.status===fk){if(t.gzhead.comment){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Hi(n.adler,t.pending_buf,t.pending-i,i)),ta(n),t.pending!==0)return t.last_flush=-1,lo;i=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,Ln(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Hi(n.adler,t.pending_buf,t.pending-i,i))}t.status=hk}if(t.status===hk){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(ta(n),t.pending!==0))return t.last_flush=-1,lo;Ln(t,n.adler&255),Ln(t,n.adler>>8&255),n.adler=0}if(t.status=kh,ta(n),t.pending!==0)return t.last_flush=-1,lo}if(n.avail_in!==0||t.lookahead!==0||e!==Xd&&t.status!==p_){let i=t.level===0?L9(t,e):t.strategy===wC?bae(t,e):t.strategy===rae?wae(t,e):g_[t.level].func(t,e);if((i===Fh||i===km)&&(t.status=p_),i===Jo||i===Fh)return n.avail_out===0&&(t.last_flush=-1),lo;if(i===Pm&&(e===Xse?Zse(t):e!==zU&&(ck(t,0,0,!1),e===Jse&&(Yd(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),ta(n),n.avail_out===0))return t.last_flush=-1,lo}return e!==Pa?lo:t.wrap<=0?qU:(t.wrap===2?(Ln(t,n.adler&255),Ln(t,n.adler>>8&255),Ln(t,n.adler>>16&255),Ln(t,n.adler>>24&255),Ln(t,n.total_in&255),Ln(t,n.total_in>>8&255),Ln(t,n.total_in>>16&255),Ln(t,n.total_in>>24&255)):(h_(t,n.adler>>>16),h_(t,n.adler&65535)),ta(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?lo:qU)},Aae=n=>{if(D_(n))return vl;let e=n.state.status;return n.state=null,e===kh?Rh(n,eae):lo},Dae=(n,e)=>{let t=e.length;if(D_(n))return vl;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==Dm||r.lookahead)return vl;if(i===1&&(n.adler=C_(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Yd(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(t-r.w_size,t),0),e=c,t=r.w_size}let o=n.avail_in,s=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,Tm(r);r.lookahead>=In;){let c=r.strstart,l=r.lookahead-(In-1);do r.ins_h=Jd(r,r.ins_h,r.window[c+In-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=In-1,Tm(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=In-1,r.match_available=0,n.next_in=s,n.input=a,n.avail_in=o,r.wrap=i,lo},Tae=Iae,Mae=B9,Nae=j9,Pae=V9,kae=Eae,Rae=Sae,Oae=Aae,Fae=Dae,Lae="pako deflate (from Nodeca project)",v_={deflateInit:Tae,deflateInit2:Mae,deflateReset:Nae,deflateResetKeep:Pae,deflateSetHeader:kae,deflate:Rae,deflateEnd:Oae,deflateSetDictionary:Fae,deflateInfo:Lae},Vae=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),jae=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)Vae(t,r)&&(n[r]=t[r])}}return n},Bae=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];t.set(s,i),i+=s.length}return t},MC={assign:jae,flattenChunks:Bae},U9=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{U9=!1}var E_=new Uint8Array(256);for(let n=0;n<256;n++)E_[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;E_[254]=E_[254]=1;var Uae=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},zae=(n,e)=>{if(e<65534&&n.subarray&&U9)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},qae=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,o=new Array(t*2);for(i=0,r=0;r<t;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=E_[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<t;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return zae(o,i)},Hae=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+E_[n[t]]>e?t:e},I_={string2buf:Uae,buf2string:qae,utf8border:Hae};function $ae(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var z9=$ae,q9=Object.prototype.toString,{Z_NO_FLUSH:Gae,Z_SYNC_FLUSH:Wae,Z_FULL_FLUSH:Kae,Z_FINISH:Yae,Z_OK:AC,Z_STREAM_END:Qae,Z_DEFAULT_COMPRESSION:Zae,Z_DEFAULT_STRATEGY:Xae,Z_DEFLATED:Jae}=Nm;function T_(n){this.options=MC.assign({level:Zae,method:Jae,chunkSize:16384,windowBits:15,memLevel:8,strategy:Xae},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z9,this.strm.avail_out=0;let t=v_.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==AC)throw new Error(Oh[t]);if(e.header&&v_.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=I_.string2buf(e.dictionary):q9.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=v_.deflateSetDictionary(this.strm,r),t!==AC)throw new Error(Oh[t]);this._dict_set=!0}}T_.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?Yae:Gae,typeof n=="string"?t.input=I_.string2buf(n):q9.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(o===Wae||o===Kae)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=v_.deflate(t,o),i===Qae)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=v_.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===AC;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};T_.prototype.onData=function(n){this.chunks.push(n)};T_.prototype.onEnd=function(n){n===AC&&(this.result=MC.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function wk(n,e){let t=new T_(e);if(t.push(n,!0),t.err)throw t.msg||Oh[t.err];return t.result}function ece(n,e){return e=e||{},e.raw=!0,wk(n,e)}function tce(n,e){return e=e||{},e.gzip=!0,wk(n,e)}var nce=T_,rce=wk,ice=ece,oce=tce,sce=Nm,ace={Deflate:nce,deflate:rce,deflateRaw:ice,gzip:oce,constants:sce},bC=16209,cce=16191,lce=function(e,t){let r,i,o,s,a,c,l,u,h,m,g,b,I,T,N,Y,j,W,oe,he,z,M,S,V,x=e.state;r=e.next_in,S=e.input,i=r+(e.avail_in-5),o=e.next_out,V=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=x.dmax,l=x.wsize,u=x.whave,h=x.wnext,m=x.window,g=x.hold,b=x.bits,I=x.lencode,T=x.distcode,N=(1<<x.lenbits)-1,Y=(1<<x.distbits)-1;e:do{b<15&&(g+=S[r++]<<b,b+=8,g+=S[r++]<<b,b+=8),j=I[g&N];t:for(;;){if(W=j>>>24,g>>>=W,b-=W,W=j>>>16&255,W===0)V[o++]=j&65535;else if(W&16){oe=j&65535,W&=15,W&&(b<W&&(g+=S[r++]<<b,b+=8),oe+=g&(1<<W)-1,g>>>=W,b-=W),b<15&&(g+=S[r++]<<b,b+=8,g+=S[r++]<<b,b+=8),j=T[g&Y];n:for(;;){if(W=j>>>24,g>>>=W,b-=W,W=j>>>16&255,W&16){if(he=j&65535,W&=15,b<W&&(g+=S[r++]<<b,b+=8,b<W&&(g+=S[r++]<<b,b+=8)),he+=g&(1<<W)-1,he>c){e.msg="invalid distance too far back",x.mode=bC;break e}if(g>>>=W,b-=W,W=o-s,he>W){if(W=he-W,W>u&&x.sane){e.msg="invalid distance too far back",x.mode=bC;break e}if(z=0,M=m,h===0){if(z+=l-W,W<oe){oe-=W;do V[o++]=m[z++];while(--W);z=o-he,M=V}}else if(h<W){if(z+=l+h-W,W-=h,W<oe){oe-=W;do V[o++]=m[z++];while(--W);if(z=0,h<oe){W=h,oe-=W;do V[o++]=m[z++];while(--W);z=o-he,M=V}}}else if(z+=h-W,W<oe){oe-=W;do V[o++]=m[z++];while(--W);z=o-he,M=V}for(;oe>2;)V[o++]=M[z++],V[o++]=M[z++],V[o++]=M[z++],oe-=3;oe&&(V[o++]=M[z++],oe>1&&(V[o++]=M[z++]))}else{z=o-he;do V[o++]=V[z++],V[o++]=V[z++],V[o++]=V[z++],oe-=3;while(oe>2);oe&&(V[o++]=V[z++],oe>1&&(V[o++]=V[z++]))}}else if((W&64)===0){j=T[(j&65535)+(g&(1<<W)-1)];continue n}else{e.msg="invalid distance code",x.mode=bC;break e}break}}else if((W&64)===0){j=I[(j&65535)+(g&(1<<W)-1)];continue t}else if(W&32){x.mode=cce;break e}else{e.msg="invalid literal/length code",x.mode=bC;break e}break}}while(r<i&&o<a);oe=b>>3,r-=oe,b-=oe<<3,g&=(1<<b)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),x.hold=g,x.bits=b},Sm=15,$U=852,GU=592,WU=0,XP=1,KU=2,uce=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),dce=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fce=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),hce=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),pce=(n,e,t,r,i,o,s,a)=>{let c=a.bits,l=0,u=0,h=0,m=0,g=0,b=0,I=0,T=0,N=0,Y=0,j,W,oe,he,z,M=null,S,V=new Uint16Array(Sm+1),x=new Uint16Array(Sm+1),A=null,D,te,_e;for(l=0;l<=Sm;l++)V[l]=0;for(u=0;u<r;u++)V[e[t+u]]++;for(g=c,m=Sm;m>=1&&V[m]===0;m--);if(g>m&&(g=m),m===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(h=1;h<m&&V[h]===0;h++);for(g<h&&(g=h),T=1,l=1;l<=Sm;l++)if(T<<=1,T-=V[l],T<0)return-1;if(T>0&&(n===WU||m!==1))return-1;for(x[1]=0,l=1;l<Sm;l++)x[l+1]=x[l]+V[l];for(u=0;u<r;u++)e[t+u]!==0&&(s[x[e[t+u]]++]=u);if(n===WU?(M=A=s,S=20):n===XP?(M=uce,A=dce,S=257):(M=fce,A=hce,S=0),Y=0,u=0,l=h,z=o,b=g,I=0,oe=-1,N=1<<g,he=N-1,n===XP&&N>$U||n===KU&&N>GU)return 1;for(;;){D=l-I,s[u]+1<S?(te=0,_e=s[u]):s[u]>=S?(te=A[s[u]-S],_e=M[s[u]-S]):(te=96,_e=0),j=1<<l-I,W=1<<b,h=W;do W-=j,i[z+(Y>>I)+W]=D<<24|te<<16|_e|0;while(W!==0);for(j=1<<l-1;Y&j;)j>>=1;if(j!==0?(Y&=j-1,Y+=j):Y=0,u++,--V[l]===0){if(l===m)break;l=e[t+s[u]]}if(l>g&&(Y&he)!==oe){for(I===0&&(I=g),z+=h,b=l-I,T=1<<b;b+I<m&&(T-=V[b+I],!(T<=0));)b++,T<<=1;if(N+=1<<b,n===XP&&N>$U||n===KU&&N>GU)return 1;oe=Y&he,i[oe]=g<<24|b<<16|z-o|0}}return Y!==0&&(i[z+Y]=l-I<<24|64<<16|0),a.bits=g,0},y_=pce,gce=0,H9=1,$9=2,{Z_FINISH:YU,Z_BLOCK:mce,Z_TREES:xC,Z_OK:Lh,Z_STREAM_END:vce,Z_NEED_DICT:yce,Z_STREAM_ERROR:ka,Z_DATA_ERROR:G9,Z_MEM_ERROR:W9,Z_BUF_ERROR:_ce,Z_DEFLATED:QU}=Nm,NC=16180,ZU=16181,XU=16182,JU=16183,e9=16184,t9=16185,n9=16186,r9=16187,i9=16188,o9=16189,DC=16190,_u=16191,JP=16192,s9=16193,ek=16194,a9=16195,c9=16196,l9=16197,u9=16198,CC=16199,EC=16200,d9=16201,f9=16202,h9=16203,p9=16204,g9=16205,tk=16206,m9=16207,v9=16208,Mr=16209,K9=16210,Y9=16211,wce=852,bce=592,xce=15,Cce=xce,y9=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Ece(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Vh=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<NC||e.mode>Y9?1:0},Q9=n=>{if(Vh(n))return ka;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=NC,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(wce),e.distcode=e.distdyn=new Int32Array(bce),e.sane=1,e.back=-1,Lh},Z9=n=>{if(Vh(n))return ka;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,Q9(n)},X9=(n,e)=>{let t;if(Vh(n))return ka;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ka:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,Z9(n))},J9=(n,e)=>{if(!n)return ka;let t=new Ece;n.state=t,t.strm=n,t.window=null,t.mode=NC;let r=X9(n,e);return r!==Lh&&(n.state=null),r},Ice=n=>J9(n,Cce),_9=!0,nk,rk,Sce=n=>{if(_9){nk=new Int32Array(512),rk=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(y_(H9,n.lens,0,288,nk,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;y_($9,n.lens,0,32,rk,0,n.work,{bits:5}),_9=!1}n.lencode=nk,n.lenbits=9,n.distcode=rk,n.distbits=5},ez=(n,e,t,r)=>{let i,o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Ace=(n,e)=>{let t,r,i,o,s,a,c,l,u,h,m,g,b,I,T=0,N,Y,j,W,oe,he,z,M,S=new Uint8Array(4),V,x,A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Vh(n)||!n.output||!n.input&&n.avail_in!==0)return ka;t=n.state,t.mode===_u&&(t.mode=JP),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,h=a,m=c,M=Lh;e:for(;;)switch(t.mode){case NC:if(t.wrap===0){t.mode=JP;break}for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,S[0]=l&255,S[1]=l>>>8&255,t.check=Hi(t.check,S,2,0),l=0,u=0,t.mode=ZU;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){n.msg="incorrect header check",t.mode=Mr;break}if((l&15)!==QU){n.msg="unknown compression method",t.mode=Mr;break}if(l>>>=4,u-=4,z=(l&15)+8,t.wbits===0&&(t.wbits=z),z>15||z>t.wbits){n.msg="invalid window size",t.mode=Mr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=l&512?o9:_u,l=0,u=0;break;case ZU:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==QU){n.msg="unknown compression method",t.mode=Mr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Mr;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,t.check=Hi(t.check,S,2,0)),l=0,u=0,t.mode=XU;case XU:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,S[2]=l>>>16&255,S[3]=l>>>24&255,t.check=Hi(t.check,S,4,0)),l=0,u=0,t.mode=JU;case JU:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,t.check=Hi(t.check,S,2,0)),l=0,u=0,t.mode=e9;case e9:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(S[0]=l&255,S[1]=l>>>8&255,t.check=Hi(t.check,S,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=t9;case t9:if(t.flags&1024&&(g=t.length,g>a&&(g=a),g&&(t.head&&(z=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+g),z)),t.flags&512&&t.wrap&4&&(t.check=Hi(t.check,r,g,o)),a-=g,o+=g,t.length-=g),t.length))break e;t.length=0,t.mode=n9;case n9:if(t.flags&2048){if(a===0)break e;g=0;do z=r[o+g++],t.head&&z&&t.length<65536&&(t.head.name+=String.fromCharCode(z));while(z&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Hi(t.check,r,g,o)),a-=g,o+=g,z)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=r9;case r9:if(t.flags&4096){if(a===0)break e;g=0;do z=r[o+g++],t.head&&z&&t.length<65536&&(t.head.comment+=String.fromCharCode(z));while(z&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Hi(t.check,r,g,o)),a-=g,o+=g,z)break e}else t.head&&(t.head.comment=null);t.mode=i9;case i9:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Mr;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=_u;break;case o9:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}n.adler=t.check=y9(l),l=0,u=0,t.mode=DC;case DC:if(t.havedict===0)return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,yce;n.adler=t.check=1,t.mode=_u;case _u:if(e===mce||e===xC)break e;case JP:if(t.last){l>>>=u&7,u-=u&7,t.mode=tk;break}for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=s9;break;case 1:if(Sce(t),t.mode=CC,e===xC){l>>>=2,u-=2;break e}break;case 2:t.mode=c9;break;case 3:n.msg="invalid block type",t.mode=Mr}l>>>=2,u-=2;break;case s9:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Mr;break}if(t.length=l&65535,l=0,u=0,t.mode=ek,e===xC)break e;case ek:t.mode=a9;case a9:if(g=t.length,g){if(g>a&&(g=a),g>c&&(g=c),g===0)break e;i.set(r.subarray(o,o+g),s),a-=g,o+=g,c-=g,s+=g,t.length-=g;break}t.mode=_u;break;case c9:for(;u<14;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Mr;break}t.have=0,t.mode=l9;case l9:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.lens[A[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[A[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},M=y_(gce,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,M){n.msg="invalid code lengths set",t.mode=Mr;break}t.have=0,t.mode=u9;case u9:for(;t.have<t.nlen+t.ndist;){for(;T=t.lencode[l&(1<<t.lenbits)-1],N=T>>>24,Y=T>>>16&255,j=T&65535,!(N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(j<16)l>>>=N,u-=N,t.lens[t.have++]=j;else{if(j===16){for(x=N+2;u<x;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=N,u-=N,t.have===0){n.msg="invalid bit length repeat",t.mode=Mr;break}z=t.lens[t.have-1],g=3+(l&3),l>>>=2,u-=2}else if(j===17){for(x=N+3;u<x;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=N,u-=N,z=0,g=3+(l&7),l>>>=3,u-=3}else{for(x=N+7;u<x;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=N,u-=N,z=0,g=11+(l&127),l>>>=7,u-=7}if(t.have+g>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Mr;break}for(;g--;)t.lens[t.have++]=z}}if(t.mode===Mr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Mr;break}if(t.lenbits=9,V={bits:t.lenbits},M=y_(H9,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,M){n.msg="invalid literal/lengths set",t.mode=Mr;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},M=y_($9,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,M){n.msg="invalid distances set",t.mode=Mr;break}if(t.mode=CC,e===xC)break e;case CC:t.mode=EC;case EC:if(a>=6&&c>=258){n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,lce(n,m),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,t.mode===_u&&(t.back=-1);break}for(t.back=0;T=t.lencode[l&(1<<t.lenbits)-1],N=T>>>24,Y=T>>>16&255,j=T&65535,!(N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(Y&&(Y&240)===0){for(W=N,oe=Y,he=j;T=t.lencode[he+((l&(1<<W+oe)-1)>>W)],N=T>>>24,Y=T>>>16&255,j=T&65535,!(W+N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=W,u-=W,t.back+=W}if(l>>>=N,u-=N,t.back+=N,t.length=j,Y===0){t.mode=g9;break}if(Y&32){t.back=-1,t.mode=_u;break}if(Y&64){n.msg="invalid literal/length code",t.mode=Mr;break}t.extra=Y&15,t.mode=d9;case d9:if(t.extra){for(x=t.extra;u<x;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=f9;case f9:for(;T=t.distcode[l&(1<<t.distbits)-1],N=T>>>24,Y=T>>>16&255,j=T&65535,!(N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((Y&240)===0){for(W=N,oe=Y,he=j;T=t.distcode[he+((l&(1<<W+oe)-1)>>W)],N=T>>>24,Y=T>>>16&255,j=T&65535,!(W+N<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=W,u-=W,t.back+=W}if(l>>>=N,u-=N,t.back+=N,Y&64){n.msg="invalid distance code",t.mode=Mr;break}t.offset=j,t.extra=Y&15,t.mode=h9;case h9:if(t.extra){for(x=t.extra;u<x;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Mr;break}t.mode=p9;case p9:if(c===0)break e;if(g=m-c,t.offset>g){if(g=t.offset-g,g>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Mr;break}g>t.wnext?(g-=t.wnext,b=t.wsize-g):b=t.wnext-g,g>t.length&&(g=t.length),I=t.window}else I=i,b=s-t.offset,g=t.length;g>c&&(g=c),c-=g,t.length-=g;do i[s++]=I[b++];while(--g);t.length===0&&(t.mode=EC);break;case g9:if(c===0)break e;i[s++]=t.length,c--,t.mode=EC;break;case tk:if(t.wrap){for(;u<32;){if(a===0)break e;a--,l|=r[o++]<<u,u+=8}if(m-=c,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?Hi(t.check,i,m,s-m):C_(t.check,i,m,s-m)),m=c,t.wrap&4&&(t.flags?l:y9(l))!==t.check){n.msg="incorrect data check",t.mode=Mr;break}l=0,u=0}t.mode=m9;case m9:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Mr;break}l=0,u=0}t.mode=v9;case v9:M=vce;break e;case Mr:M=G9;break e;case K9:return W9;case Y9:default:return ka}return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,(t.wsize||m!==n.avail_out&&t.mode<Mr&&(t.mode<tk||e!==YU))&&ez(n,n.output,n.next_out,m-n.avail_out),h-=n.avail_in,m-=n.avail_out,n.total_in+=h,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?Hi(t.check,i,m,n.next_out-m):C_(t.check,i,m,n.next_out-m)),n.data_type=t.bits+(t.last?64:0)+(t.mode===_u?128:0)+(t.mode===CC||t.mode===ek?256:0),(h===0&&m===0||e===YU)&&M===Lh&&(M=_ce),M},Dce=n=>{if(Vh(n))return ka;let e=n.state;return e.window&&(e.window=null),n.state=null,Lh},Tce=(n,e)=>{if(Vh(n))return ka;let t=n.state;return(t.wrap&2)===0?ka:(t.head=e,e.done=!1,Lh)},Mce=(n,e)=>{let t=e.length,r,i,o;return Vh(n)||(r=n.state,r.wrap!==0&&r.mode!==DC)?ka:r.mode===DC&&(i=1,i=C_(i,e,t,0),i!==r.check)?G9:(o=ez(n,e,t,t),o?(r.mode=K9,W9):(r.havedict=1,Lh))},Nce=Z9,Pce=X9,kce=Q9,Rce=Ice,Oce=J9,Fce=Ace,Lce=Dce,Vce=Tce,jce=Mce,Bce="pako inflate (from Nodeca project)",bu={inflateReset:Nce,inflateReset2:Pce,inflateResetKeep:kce,inflateInit:Rce,inflateInit2:Oce,inflate:Fce,inflateEnd:Lce,inflateGetHeader:Vce,inflateSetDictionary:jce,inflateInfo:Bce};function Uce(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var zce=Uce,tz=Object.prototype.toString,{Z_NO_FLUSH:qce,Z_FINISH:Hce,Z_OK:S_,Z_STREAM_END:ik,Z_NEED_DICT:ok,Z_STREAM_ERROR:$ce,Z_DATA_ERROR:w9,Z_MEM_ERROR:Gce}=Nm;function M_(n){this.options=MC.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z9,this.strm.avail_out=0;let t=bu.inflateInit2(this.strm,e.windowBits);if(t!==S_)throw new Error(Oh[t]);if(this.header=new zce,bu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=I_.string2buf(e.dictionary):tz.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=bu.inflateSetDictionary(this.strm,e.dictionary),t!==S_)))throw new Error(Oh[t])}M_.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?Hce:qce,tz.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=bu.inflate(t,s),o===ok&&i&&(o=bu.inflateSetDictionary(t,i),o===S_?o=bu.inflate(t,s):o===w9&&(o=ok));t.avail_in>0&&o===ik&&t.state.wrap>0&&n[t.next_in]!==0;)bu.inflateReset(t),o=bu.inflate(t,s);switch(o){case $ce:case w9:case ok:case Gce:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===ik))if(this.options.to==="string"){let c=I_.utf8border(t.output,t.next_out),l=t.next_out-c,u=I_.buf2string(t.output,c);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===S_&&a===0)){if(o===ik)return o=bu.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};M_.prototype.onData=function(n){this.chunks.push(n)};M_.prototype.onEnd=function(n){n===S_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=MC.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function bk(n,e){let t=new M_(e);if(t.push(n),t.err)throw t.msg||Oh[t.err];return t.result}function Wce(n,e){return e=e||{},e.raw=!0,bk(n,e)}var Kce=M_,Yce=bk,Qce=Wce,Zce=bk,Xce=Nm,Jce={Inflate:Kce,inflate:Yce,inflateRaw:Qce,ungzip:Zce,constants:Xce},{Deflate:tRe,deflate:nRe,deflateRaw:rRe,gzip:iRe}=ace,{Inflate:ele,inflate:tle,inflateRaw:oRe,ungzip:sRe}=Jce;var xk=ele,nz=tle;var iz=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;iz[n]=e}var rz=4294967295;function nle(n,e,t){let r=n;for(let i=0;i<t;i++)r=iz[(r^e[i])&255]^r>>>8;return r}function rle(n,e){return(nle(rz,n,e)^rz)>>>0}function Ck(n,e,t){let r=n.readUint32(),i=rle(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function PC(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function kC(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function RC(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function OC(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function FC(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+ile(e[o-i],t[o],t[o-i])&255}}function ile(n,e,t){let r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),s=Math.abs(r-t);return i<=o&&i<=s?n:o<=s?e:t}function oz(n,e,t,r,i,o){switch(n){case 0:PC(e,t,i);break;case 1:kC(e,t,i,o);break;case 2:RC(e,t,r,i);break;case 3:OC(e,t,r,i,o);break;case 4:FC(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}var ole=new Uint16Array([255]),sle=new Uint8Array(ole.buffer),ale=sle[0]===255;function sz(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,c=new Uint8Array(r*t*a),l=0;for(let u=0;u<7;u++){let h=s[u],m=Math.ceil((t-h.x)/h.xStep),g=Math.ceil((r-h.y)/h.yStep);if(m<=0||g<=0)continue;let b=m*a,I=new Uint8Array(b);for(let T=0;T<g;T++){let N=e[l++],Y=e.subarray(l,l+b);l+=b;let j=new Uint8Array(b);oz(N,Y,j,I,b,a),I.set(j);for(let W=0;W<m;W++){let oe=h.x+W*h.xStep,he=h.y+T*h.yStep;if(!(oe>=t||he>=r))for(let z=0;z<a;z++)c[(he*t+oe)*a+z]=j[W*a+z]}}}if(o===16){let u=new Uint16Array(c.buffer);if(ale)for(let h=0;h<u.length;h++)u[h]=cle(u[h]);return u}else return c}function cle(n){return(n&255)<<8|n>>8&255}var lle=new Uint16Array([255]),ule=new Uint8Array(lle.buffer),dle=ule[0]===255,fle=new Uint8Array(0);function Ek(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*t),c=new Uint8Array(r*a),l=fle,u=0,h,m;for(let g=0;g<r;g++){switch(h=e.subarray(u+1,u+1+a),m=c.subarray(g*a,(g+1)*a),e[u]){case 0:PC(h,m,a);break;case 1:kC(h,m,a,s);break;case 2:RC(h,m,l,a);break;case 3:OC(h,m,l,a,s);break;case 4:FC(h,m,l,a,s);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}l=m,u+=a+1}if(o===16){let g=new Uint16Array(c.buffer);if(dle)for(let b=0;b<g.length;b++)g[b]=hle(g[b]);return g}else return c}function hle(n){return(n&255)<<8|n>>8&255}var LC=Uint8Array.of(137,80,78,71,13,10,26,10);function Ik(n){if(!az(n.readBytes(LC.length)))throw new Error("wrong PNG signature")}function az(n){if(n.length<LC.length)return!1;for(let e=0;e<LC.length;e++)if(n[e]!==LC[e])return!1;return!0}var cz="tEXt",gle=0,lz=new TextDecoder("latin1");function mle(n){if(yle(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var vle=/^[\u0000-\u00FF]*$/;function yle(n){if(!vle.test(n))throw new Error("invalid latin1 text")}function uz(n,e,t){let r=Sk(e);n[r]=_le(e,t-r.length-1)}function Sk(n){for(n.mark();n.readByte()!==gle;);let e=n.offset;n.reset();let t=lz.decode(n.readBytes(e-n.offset-1));return n.skip(1),mle(t),t}function _le(n,e){return lz.decode(n.readBytes(e))}var es={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},N_={UNKNOWN:-1,DEFLATE:0},VC={UNKNOWN:-1,ADAPTIVE:0},P_={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},k_={NONE:0,BACKGROUND:1,PREVIOUS:2},jC={SOURCE:0,OVER:1};var BC=class extends f_{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);let{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new xk,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=N_.UNKNOWN,this._filterMethod=VC.UNKNOWN,this._interlaceMethod=P_.UNKNOWN,this._colorType=es.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Ik(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(Ik(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){let r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case cz:uz(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Ck(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){let r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Ck(this,e+4,t):this.skip(4)}decodeIHDR(){let e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=wle(this.readUint8());let t=this.readUint8();this._colorType=t;let r;switch(t){case es.GREYSCALE:r=1;break;case es.TRUECOLOUR:r=3;break;case es.INDEXED_COLOUR:r=1;break;case es.GREYSCALE_ALPHA:r=2;break;case es.TRUECOLOUR_ALPHA:r=4;break;case es.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==N_.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);let t=e/3;this._hasPalette=!0;let r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case es.GREYSCALE:case es.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case es.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){let r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case es.UNKNOWN:case es.GREYSCALE_ALPHA:case es.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t=Sk(this),r=this.readUint8();if(r!==N_.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);let i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:nz(i)}}decodepHYs(){let e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){let t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=Ek({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{let i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case k_.NONE:break;case k_.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){let s=(i*e.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[s+a]=0}break;case k_.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){let r=1<<this._png.depth,i=(o,s)=>{let a=((o+t.yOffset)*this._png.width+t.xOffset+s)*this._png.channels,c=(o*t.width+s)*this._png.channels;return{index:a,frameIndex:c}};switch(t.blendOp){case jC.SOURCE:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++)e.data[a+l]=t.data[c+l]}break;case jC.OVER:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++){let u=t.data[c+this._png.channels-1]/r,h=l%(this._png.channels-1)===0?1:t.data[c+l],m=Math.floor(u*h+(1-u)*e.data[a+l]);e.data[a+l]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==VC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===P_.NO_INTERLACE)this._png.data=Ek({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===P_.ADAM7)this._png.data=sz({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:k_.NONE,blendOp:jC.SOURCE,data:e}),this._inflator=new xk,this._writingDataChunks=!1}};function wle(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function dz(n,e){return new BC(n,e).decode()}var Yt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Ak(){Yt.console&&typeof Yt.console.log=="function"&&Yt.console.log.apply(Yt.console,arguments)}var dr={log:Ak,warn:function(n){Yt.console&&(typeof Yt.console.warn=="function"?Yt.console.warn.apply(Yt.console,arguments):Ak.call(null,arguments))},error:function(n){Yt.console&&(typeof Yt.console.error=="function"?Yt.console.error.apply(Yt.console,arguments):Ak(n))}};function Dk(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){jh(r.response,e,t)},r.onerror=function(){dr.error("could not download file")},r.send()}function fz(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function UC(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var jh=Yt.saveAs||((typeof window>"u"?"undefined":Un(window))!=="object"||window!==Yt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Yt.URL||Yt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?fz(i.href)?Dk(n,e,t):UC(i,i.target="_blank"):UC(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){UC(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(fz(n))Dk(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){UC(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Un(o)!=="object"&&(dr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Dk(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(Yt.HTMLElement)||Yt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Un(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(n)}else{var c=Yt.URL||Yt.webkitURL,l=c.createObjectURL(n);r?r.location=l:location.href=l,r=null,setTimeout(function(){c.revokeObjectURL(l)},4e4)}});function Fz(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),l=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),"#"+a+c+l}}var $C=Yt.atob.bind(Yt),hz=Yt.btoa.bind(Yt);function Tk(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=So(t,r,i,o,e[0],7,-680876936),o=So(o,t,r,i,e[1],12,-389564586),i=So(i,o,t,r,e[2],17,606105819),r=So(r,i,o,t,e[3],22,-1044525330),t=So(t,r,i,o,e[4],7,-176418897),o=So(o,t,r,i,e[5],12,1200080426),i=So(i,o,t,r,e[6],17,-1473231341),r=So(r,i,o,t,e[7],22,-45705983),t=So(t,r,i,o,e[8],7,1770035416),o=So(o,t,r,i,e[9],12,-1958414417),i=So(i,o,t,r,e[10],17,-42063),r=So(r,i,o,t,e[11],22,-1990404162),t=So(t,r,i,o,e[12],7,1804603682),o=So(o,t,r,i,e[13],12,-40341101),i=So(i,o,t,r,e[14],17,-1502002290),t=Ao(t,r=So(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Ao(o,t,r,i,e[6],9,-1069501632),i=Ao(i,o,t,r,e[11],14,643717713),r=Ao(r,i,o,t,e[0],20,-373897302),t=Ao(t,r,i,o,e[5],5,-701558691),o=Ao(o,t,r,i,e[10],9,38016083),i=Ao(i,o,t,r,e[15],14,-660478335),r=Ao(r,i,o,t,e[4],20,-405537848),t=Ao(t,r,i,o,e[9],5,568446438),o=Ao(o,t,r,i,e[14],9,-1019803690),i=Ao(i,o,t,r,e[3],14,-187363961),r=Ao(r,i,o,t,e[8],20,1163531501),t=Ao(t,r,i,o,e[13],5,-1444681467),o=Ao(o,t,r,i,e[2],9,-51403784),i=Ao(i,o,t,r,e[7],14,1735328473),t=Do(t,r=Ao(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=Do(o,t,r,i,e[8],11,-2022574463),i=Do(i,o,t,r,e[11],16,1839030562),r=Do(r,i,o,t,e[14],23,-35309556),t=Do(t,r,i,o,e[1],4,-1530992060),o=Do(o,t,r,i,e[4],11,1272893353),i=Do(i,o,t,r,e[7],16,-155497632),r=Do(r,i,o,t,e[10],23,-1094730640),t=Do(t,r,i,o,e[13],4,681279174),o=Do(o,t,r,i,e[0],11,-358537222),i=Do(i,o,t,r,e[3],16,-722521979),r=Do(r,i,o,t,e[6],23,76029189),t=Do(t,r,i,o,e[9],4,-640364487),o=Do(o,t,r,i,e[12],11,-421815835),i=Do(i,o,t,r,e[15],16,530742520),t=To(t,r=Do(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=To(o,t,r,i,e[7],10,1126891415),i=To(i,o,t,r,e[14],15,-1416354905),r=To(r,i,o,t,e[5],21,-57434055),t=To(t,r,i,o,e[12],6,1700485571),o=To(o,t,r,i,e[3],10,-1894986606),i=To(i,o,t,r,e[10],15,-1051523),r=To(r,i,o,t,e[1],21,-2054922799),t=To(t,r,i,o,e[8],6,1873313359),o=To(o,t,r,i,e[15],10,-30611744),i=To(i,o,t,r,e[6],15,-1560198380),r=To(r,i,o,t,e[13],21,1309151649),t=To(t,r,i,o,e[4],6,-145523070),o=To(o,t,r,i,e[11],10,-1120210379),i=To(i,o,t,r,e[2],15,718787259),r=To(r,i,o,t,e[9],21,-343485551),n[0]=tf(t,n[0]),n[1]=tf(r,n[1]),n[2]=tf(i,n[2]),n[3]=tf(o,n[3])}function XC(n,e,t,r,i,o){return e=tf(tf(e,n),tf(r,o)),tf(e<<i|e>>>32-i,t)}function So(n,e,t,r,i,o,s){return XC(e&t|~e&r,n,e,i,o,s)}function Ao(n,e,t,r,i,o,s){return XC(e&r|t&~r,n,e,i,o,s)}function Do(n,e,t,r,i,o,s){return XC(e^t^r,n,e,i,o,s)}function To(n,e,t,r,i,o,s){return XC(t^(e|~r),n,e,i,o,s)}function Lz(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Tk(r,ble(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Tk(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Tk(r,i),r}function ble(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var pz="0123456789abcdef".split("");function xle(n){for(var e="",t=0;t<4;t++)e+=pz[n>>8*t+4&15]+pz[n>>8*t&15];return e}function Cle(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Ok(n){return Lz(n).map(Cle).join("")}var Ele=(function(n){for(var e=0;e<n.length;e++)n[e]=xle(n[e]);return n.join("")})(Lz("hello"))!="5d41402abc4b2a76b9719d911017c592";function tf(n,e){if(Ele){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function Fk(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var l=0;for(c=0;c<256;c++){var u=a[c];l=(l+u+s.charCodeAt(c))%256,a[c]=a[l],a[l]=u}t=n,r=a}else a=r;var h=e.length,m=0,g=0,b="";for(c=0;c<h;c++)g=(g+(u=a[m=(m+1)%256]))%256,a[m]=a[g],a[g]=u,s=a[(a[m]+a[g])%256],b+=String.fromCharCode(e.charCodeAt(c)^s);return b}var gz={print:4,modify:8,copy:16,"annot-forms":32};function Fm(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(gz.perm!==void 0)throw new Error("Invalid permission: "+a);i+=gz[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=Ok(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Fk(this.encryptionKey,this.padding)}function Lm(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function mz(n){if(Un(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){Yt.console&&dr.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function QC(n){if(!(this instanceof QC))return new QC(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Vz(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Bh(n,e,t,r,i){if(!(this instanceof Bh))return new Bh(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Vz.call(this,r,i)}function Vm(n,e,t,r,i){if(!(this instanceof Vm))return new Vm(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Vz.call(this,r,i)}function St(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,c=16,l="S",u=null;Un(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),l=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var h=n.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=mz;var b="1.3",I=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(v){b=v};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return T};var N=g.__private__.getPageFormat=function(v){return T[v]};i=i||"a4";var Y="compat",j="advanced",W=Y;function oe(){this.saveGraphicsState(),$(new Pt(Xt,0,0,-Xt,0,ja()*Xt).toString()+" cm"),this.setFontSize(this.getFontSize()/Xt),l="n",W=j}function he(){this.restoreGraphicsState(),l="S",W=Y}var z=g.__private__.combineFontStyleAndFontWeight=function(v,k){if(v=="bold"&&k=="normal"||v=="bold"&&k==400||v=="normal"&&k=="italic"||v=="bold"&&k=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return k&&(v=k==400||k==="normal"?v==="italic"?"italic":"normal":k!=700&&k!=="bold"||v!=="normal"?(k==700?"bold":k)+""+v:"bold"),v};g.advancedAPI=function(v){var k=W===Y;return k&&oe.call(this),typeof v!="function"||(v(this),k&&he.call(this)),this},g.compatAPI=function(v){var k=W===j;return k&&he.call(this),typeof v!="function"||(v(this),k&&oe.call(this)),this},g.isAdvancedAPI=function(){return W===j};var M,S=function(v){if(W!==j)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=g.roundToPrecision=g.__private__.roundToPrecision=function(v,k){var Q=e||k;if(isNaN(v)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Q).replace(/0+$/,"")};M=g.hpf=g.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,16)};var x=g.f2=g.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return V(v,2)},A=g.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return V(v,3)},D=g.scale=g.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return W===Y?v*Xt:W===j?v:void 0},te=function(v){return D((function(k){return W===Y?ja()-k:W===j?k:void 0})(v))};g.__private__.setPrecision=g.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var _e,Te="00000000000000000000000000000000",Ce=g.__private__.getFileId=function(){return Te},fe=g.__private__.setFileId=function(v){return Te=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():Te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Yr=new Fm(u.userPermissions,u.userPassword,u.ownerPassword,Te)),Te};g.setFileId=function(v){return fe(v),this},g.getFileId=function(){return Ce()};var Ae=g.__private__.convertDateToPDFDate=function(v){var k=v.getTimezoneOffset(),Q=k<0?"+":"-",re=Math.floor(Math.abs(k/60)),ue=Math.abs(k%60),ke=[Q,J(re),"'",J(ue),"'"].join("");return["D:",v.getFullYear(),J(v.getMonth()+1),J(v.getDate()),J(v.getHours()),J(v.getMinutes()),J(v.getSeconds()),ke].join("")},Be=g.__private__.convertPDFDateToDate=function(v){var k=parseInt(v.substr(2,4),10),Q=parseInt(v.substr(6,2),10)-1,re=parseInt(v.substr(8,2),10),ue=parseInt(v.substr(10,2),10),ke=parseInt(v.substr(12,2),10),ze=parseInt(v.substr(14,2),10);return new Date(k,Q,re,ue,ke,ze,0)},Fe=g.__private__.setCreationDate=function(v){var k;if(v===void 0&&(v=new Date),v instanceof Date)k=Ae(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");k=v}return _e=k},O=g.__private__.getCreationDate=function(v){var k=_e;return v==="jsDate"&&(k=Be(_e)),k};g.setCreationDate=function(v){return Fe(v),this},g.getCreationDate=function(v){return O(v)};var G,J=g.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},ie=g.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},ae=0,pe=[],Se=[],ye=0,Me=[],Ue=[],et=!1,We=Se;g.__private__.setCustomOutputDestination=function(v){et=!0,We=v};var ot=function(v){et||(We=v)};g.__private__.resetCustomOutputDestination=function(){et=!1,We=Se};var $=g.__private__.out=function(v){return v=v.toString(),ye+=v.length+1,We.push(v),We},Ke=g.__private__.write=function(v){return $(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Ft=g.__private__.getArrayBuffer=function(v){for(var k=v.length,Q=new ArrayBuffer(k),re=new Uint8Array(Q);k--;)re[k]=v.charCodeAt(k);return Q},Ct=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Ct};var qe=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(v){return qe=W===j?v/Xt:v,this};var At,st=g.__private__.getFontSize=g.getFontSize=function(){return W===Y?qe:qe*Xt},yt=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(v){return yt=v,this},g.__private__.getR2L=g.getR2L=function(){return yt};var Et,vn=g.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))At=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');At=v}else At=parseInt(v,10)};g.__private__.getZoomMode=function(){return At};var Qt,zt=g.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Et=v};g.__private__.getPageMode=function(){return Et};var Lt=g.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Qt=v};g.__private__.getLayoutMode=function(){return Qt},g.__private__.setDisplayMode=g.setDisplayMode=function(v,k,Q){return vn(v),Lt(k),zt(Q),this};var Vt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(v){if(Object.keys(Vt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vt[v]},g.__private__.getDocumentProperties=function(){return Vt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(v){for(var k in Vt)Vt.hasOwnProperty(k)&&v[k]&&(Vt[k]=v[k]);return this},g.__private__.setDocumentProperty=function(v,k){if(Object.keys(Vt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vt[v]=k};var mt,Xt,It,Pr,yn,an={},cn={},Xn=[],kt={},Jn={},Bt={},Zt={},sr=null,tn=0,jt=[],Sn=new mz(g),No=n.hotfixes||[],xi={},rs={},Is=[],Pt=function v(k,Q,re,ue,ke,ze){if(!(this instanceof v))return new v(k,Q,re,ue,ke,ze);isNaN(k)&&(k=1),isNaN(Q)&&(Q=0),isNaN(re)&&(re=0),isNaN(ue)&&(ue=1),isNaN(ke)&&(ke=0),isNaN(ze)&&(ze=0),this._matrix=[k,Q,re,ue,ke,ze]};Object.defineProperty(Pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(v)},Pt.prototype.multiply=function(v){var k=v.sx*this.sx+v.shy*this.shx,Q=v.sx*this.shy+v.shy*this.sy,re=v.shx*this.sx+v.sy*this.shx,ue=v.shx*this.shy+v.sy*this.sy,ke=v.tx*this.sx+v.ty*this.shx+this.tx,ze=v.tx*this.shy+v.ty*this.sy+this.ty;return new Pt(k,Q,re,ue,ke,ze)},Pt.prototype.decompose=function(){var v=this.sx,k=this.shy,Q=this.shx,re=this.sy,ue=this.tx,ke=this.ty,ze=Math.sqrt(v*v+k*k),ht=(v/=ze)*Q+(k/=ze)*re;Q-=v*ht,re-=k*ht;var _t=Math.sqrt(Q*Q+re*re);return ht/=_t,v*(re/=_t)<k*(Q/=_t)&&(v=-v,k=-k,ht=-ht,ze=-ze),{scale:new Pt(ze,0,0,_t,0,0),translate:new Pt(1,0,0,1,ue,ke),rotate:new Pt(v,k,-k,v,0,0),skew:new Pt(1,0,ht,1,0,0)}},Pt.prototype.toString=function(v){return this.join(" ")},Pt.prototype.inversed=function(){var v=this.sx,k=this.shy,Q=this.shx,re=this.sy,ue=this.tx,ke=this.ty,ze=1/(v*re-k*Q),ht=re*ze,_t=-k*ze,qt=-Q*ze,Kt=v*ze;return new Pt(ht,_t,qt,Kt,-ht*ue-qt*ke,-_t*ue-Kt*ke)},Pt.prototype.applyToPoint=function(v){var k=v.x*this.sx+v.y*this.shx+this.tx,Q=v.x*this.shy+v.y*this.sy+this.ty;return new La(k,Q)},Pt.prototype.applyToRectangle=function(v){var k=this.applyToPoint(v),Q=this.applyToPoint(new La(v.x+v.w,v.y+v.h));return new Du(k.x,k.y,Q.x-k.x,Q.y-k.y)},Pt.prototype.clone=function(){var v=this.sx,k=this.shy,Q=this.shx,re=this.sy,ue=this.tx,ke=this.ty;return new Pt(v,k,Q,re,ue,ke)},g.Matrix=Pt;var oa=g.matrixMult=function(v,k){return k.multiply(v)},vr=new Pt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=vr;var Po=function(v,k){if(!Jn[v]){var Q=(k instanceof Bh?"Sh":"P")+(Object.keys(kt).length+1).toString(10);k.id=Q,Jn[v]=Q,kt[Q]=k,Sn.publish("addPattern",k)}};g.ShadingPattern=Bh,g.TilingPattern=Vm,g.addShadingPattern=function(v,k){return S("addShadingPattern()"),Po(v,k),this},g.beginTilingPattern=function(v){S("beginTilingPattern()"),Tu(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},g.endTilingPattern=function(v,k){S("endTilingPattern()"),k.stream=Ue[G].join(`
`),Po(v,k),Sn.publish("endTilingPattern",k),Is.pop().restore()};var Vi,er=g.__private__.newObject=function(){var v=di();return Ci(v,!0),v},di=g.__private__.newObjectDeferred=function(){return ae++,pe[ae]=function(){return ye},ae},Ci=function(v,k){return k=typeof k=="boolean"&&k,pe[v]=ye,k&&$(v+" 0 obj"),v},is=g.__private__.newAdditionalObject=function(){var v={objId:di(),content:""};return Me.push(v),v},Cc=di(),Ss=di(),ko=g.__private__.decodeColorString=function(v){var k=v.split(" ");if(k.length!==2||k[1]!=="g"&&k[1]!=="G")k.length!==5||k[4]!=="k"&&k[4]!=="K"||(k=[(1-k[0])*(1-k[3]),(1-k[1])*(1-k[3]),(1-k[2])*(1-k[3]),"r"]);else{var Q=parseFloat(k[0]);k=[Q,Q,Q,"r"]}for(var re="#",ue=0;ue<3;ue++)re+=("0"+Math.floor(255*parseFloat(k[ue])).toString(16)).slice(-2);return re},os=g.__private__.encodeColorString=function(v){var k;typeof v=="string"&&(v={ch1:v});var Q=v.ch1,re=v.ch2,ue=v.ch3,ke=v.ch4,ze=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var ht=new Fz(Q);if(ht.ok)Q=ht.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var _t=parseInt(Q.substr(1),16);Q=_t>>16&255,re=_t>>8&255,ue=255&_t}if(re===void 0||ke===void 0&&Q===re&&re===ue)k=typeof Q=="string"?Q+" "+ze[0]:v.precision===2?x(Q/255)+" "+ze[0]:A(Q/255)+" "+ze[0];else if(ke===void 0||Un(ke)==="object"){if(ke&&!isNaN(ke.a)&&ke.a===0)return["1.","1.","1.",ze[1]].join(" ");k=typeof Q=="string"?[Q,re,ue,ze[1]].join(" "):v.precision===2?[x(Q/255),x(re/255),x(ue/255),ze[1]].join(" "):[A(Q/255),A(re/255),A(ue/255),ze[1]].join(" ")}else k=typeof Q=="string"?[Q,re,ue,ke,ze[2]].join(" "):v.precision===2?[x(Q),x(re),x(ue),x(ke),ze[2]].join(" "):[A(Q),A(re),A(ue),A(ke),ze[2]].join(" ");return k},Ro=g.__private__.getFilters=function(){return s},Gi=g.__private__.putStream=function(v){var k=(v=v||{}).data||"",Q=v.filters||Ro(),re=v.alreadyAppliedFilters||[],ue=v.addLength1||!1,ke=k.length,ze=v.objectId,ht=function(zr){return zr};if(u!==null&&ze===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ht=Yr.encryptor(ze,0));var _t={};Q===!0&&(Q=["FlateEncode"]);var qt=v.additionalKeyValues||[],Kt=(_t=St.API.processDataByFilters!==void 0?St.API.processDataByFilters(k,Q):{data:k,reverseChain:[]}).reverseChain+(Array.isArray(re)?re.join(" "):re.toString());if(_t.data.length!==0&&(qt.push({key:"Length",value:_t.data.length}),ue===!0&&qt.push({key:"Length1",value:ke})),Kt.length!=0)if(Kt.split("/").length-1==1)qt.push({key:"Filter",value:Kt});else{qt.push({key:"Filter",value:"["+Kt+"]"});for(var wn=0;wn<qt.length;wn+=1)if(qt[wn].key==="DecodeParms"){for(var fr=[],nr=0;nr<_t.reverseChain.split("/").length-1;nr+=1)fr.push("null");fr.push(qt[wn].value),qt[wn].value="["+fr.join(" ")+"]"}}$("<<");for(var qn=0;qn<qt.length;qn++)$("/"+qt[qn].key+" "+qt[qn].value);$(">>"),_t.data.length!==0&&($("stream"),$(ht(_t.data)),$("endstream"))},fo=g.__private__.putPage=function(v){var k=v.number,Q=v.data,re=v.objId,ue=v.contentsObjId;Ci(re,!0),$("<</Type /Page"),$("/Parent "+v.rootDictionaryObjId+" 0 R"),$("/Resources "+v.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(M(v.mediaBox.bottomLeftX))+" "+parseFloat(M(v.mediaBox.bottomLeftY))+" "+M(v.mediaBox.topRightX)+" "+M(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&$("/CropBox ["+M(v.cropBox.bottomLeftX)+" "+M(v.cropBox.bottomLeftY)+" "+M(v.cropBox.topRightX)+" "+M(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&$("/BleedBox ["+M(v.bleedBox.bottomLeftX)+" "+M(v.bleedBox.bottomLeftY)+" "+M(v.bleedBox.topRightX)+" "+M(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&$("/TrimBox ["+M(v.trimBox.bottomLeftX)+" "+M(v.trimBox.bottomLeftY)+" "+M(v.trimBox.topRightX)+" "+M(v.trimBox.topRightY)+"]"),v.artBox!==null&&$("/ArtBox ["+M(v.artBox.bottomLeftX)+" "+M(v.artBox.bottomLeftY)+" "+M(v.artBox.topRightX)+" "+M(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&$("/UserUnit "+v.userUnit),Sn.publish("putPage",{objId:re,pageContext:jt[k],pageNumber:k,page:Q}),$("/Contents "+ue+" 0 R"),$(">>"),$("endobj");var ke=Q.join(`
`);return W===j&&(ke+=`
Q`),Ci(ue,!0),Gi({data:ke,filters:Ro(),objectId:ue}),$("endobj"),re},As=g.__private__.putPages=function(){var v,k,Q=[];for(v=1;v<=tn;v++)jt[v].objId=di(),jt[v].contentsObjId=di();for(v=1;v<=tn;v++)Q.push(fo({number:v,data:Ue[v],objId:jt[v].objId,contentsObjId:jt[v].contentsObjId,mediaBox:jt[v].mediaBox,cropBox:jt[v].cropBox,bleedBox:jt[v].bleedBox,trimBox:jt[v].trimBox,artBox:jt[v].artBox,userUnit:jt[v].userUnit,rootDictionaryObjId:Cc,resourceDictionaryObjId:Ss}));Ci(Cc,!0),$("<</Type /Pages");var re="/Kids [";for(k=0;k<tn;k++)re+=Q[k]+" 0 R ";$(re+"]"),$("/Count "+tn),$(">>"),$("endobj"),Sn.publish("postPutPages")},Ec=function(v){Sn.publish("putFont",{font:v,out:$,newObject:er,putStream:Gi}),v.isAlreadyPutted!==!0&&(v.objectNumber=er(),$("<<"),$("/Type /Font"),$("/BaseFont /"+Lm(v.postScriptName)),$("/Subtype /Type1"),typeof v.encoding=="string"&&$("/Encoding /"+v.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},Ic=function(v){v.objectNumber=er();var k=[];k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Form"}),k.push({key:"BBox",value:"["+[M(v.x),M(v.y),M(v.x+v.width),M(v.y+v.height)].join(" ")+"]"}),k.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Q=v.pages[1].join(`
`);Gi({data:Q,additionalKeyValues:k,objectId:v.objectNumber}),$("endobj")},Sc=function(v,k){k||(k=21);var Q=er(),re=(function(ze,ht){var _t,qt=[],Kt=1/(ht-1);for(_t=0;_t<1;_t+=Kt)qt.push(_t);if(qt.push(1),ze[0].offset!=0){var wn={offset:0,color:ze[0].color};ze.unshift(wn)}if(ze[ze.length-1].offset!=1){var fr={offset:1,color:ze[ze.length-1].color};ze.push(fr)}for(var nr="",qn=0,zr=0;zr<qt.length;zr++){for(_t=qt[zr];_t>ze[qn+1].offset;)qn++;var Rr=ze[qn].offset,fi=(_t-Rr)/(ze[qn+1].offset-Rr),cs=ze[qn].color,yr=ze[qn+1].color;nr+=ie(Math.round((1-fi)*cs[0]+fi*yr[0]).toString(16))+ie(Math.round((1-fi)*cs[1]+fi*yr[1]).toString(16))+ie(Math.round((1-fi)*cs[2]+fi*yr[2]).toString(16))}return nr.trim()})(v.colors,k),ue=[];ue.push({key:"FunctionType",value:"0"}),ue.push({key:"Domain",value:"[0.0 1.0]"}),ue.push({key:"Size",value:"["+k+"]"}),ue.push({key:"BitsPerSample",value:"8"}),ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Gi({data:re,additionalKeyValues:ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),$("endobj"),v.objectNumber=er(),$("<< /ShadingType "+v.type),$("/ColorSpace /DeviceRGB");var ke="/Coords ["+M(parseFloat(v.coords[0]))+" "+M(parseFloat(v.coords[1]))+" ";v.type===2?ke+=M(parseFloat(v.coords[2]))+" "+M(parseFloat(v.coords[3])):ke+=M(parseFloat(v.coords[2]))+" "+M(parseFloat(v.coords[3]))+" "+M(parseFloat(v.coords[4]))+" "+M(parseFloat(v.coords[5])),$(ke+="]"),v.matrix&&$("/Matrix ["+v.matrix.toString()+"]"),$("/Function "+Q+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},Il=function(v,k){var Q=di(),re=er();k.push({resourcesOid:Q,objectOid:re}),v.objectNumber=re;var ue=[];ue.push({key:"Type",value:"/Pattern"}),ue.push({key:"PatternType",value:"1"}),ue.push({key:"PaintType",value:"1"}),ue.push({key:"TilingType",value:"1"}),ue.push({key:"BBox",value:"["+v.boundingBox.map(M).join(" ")+"]"}),ue.push({key:"XStep",value:M(v.xStep)}),ue.push({key:"YStep",value:M(v.yStep)}),ue.push({key:"Resources",value:Q+" 0 R"}),v.matrix&&ue.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Gi({data:v.stream,additionalKeyValues:ue,objectId:v.objectNumber}),$("endobj")},np=function(v){for(var k in v.objectNumber=er(),$("<<"),v)switch(k){case"opacity":$("/ca "+x(v[k]));break;case"stroke-opacity":$("/CA "+x(v[k]))}$(">>"),$("endobj")},lf=function(v){Ci(v.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var k in $("/Font <<"),an)an.hasOwnProperty(k)&&(h===!1||h===!0&&m.hasOwnProperty(k))&&$("/"+k+" "+an[k].objectNumber+" 0 R");$(">>")})(),(function(){if(Object.keys(kt).length>0){for(var k in $("/Shading <<"),kt)kt.hasOwnProperty(k)&&kt[k]instanceof Bh&&kt[k].objectNumber>=0&&$("/"+k+" "+kt[k].objectNumber+" 0 R");Sn.publish("putShadingPatternDict"),$(">>")}})(),(function(k){if(Object.keys(kt).length>0){for(var Q in $("/Pattern <<"),kt)kt.hasOwnProperty(Q)&&kt[Q]instanceof g.TilingPattern&&kt[Q].objectNumber>=0&&kt[Q].objectNumber<k&&$("/"+Q+" "+kt[Q].objectNumber+" 0 R");Sn.publish("putTilingPatternDict"),$(">>")}})(v.objectOid),(function(){if(Object.keys(Bt).length>0){var k;for(k in $("/ExtGState <<"),Bt)Bt.hasOwnProperty(k)&&Bt[k].objectNumber>=0&&$("/"+k+" "+Bt[k].objectNumber+" 0 R");Sn.publish("putGStateDict"),$(">>")}})(),(function(){for(var k in $("/XObject <<"),xi)xi.hasOwnProperty(k)&&xi[k].objectNumber>=0&&$("/"+k+" "+xi[k].objectNumber+" 0 R");Sn.publish("putXobjectDict"),$(">>")})(),$(">>"),$("endobj")},Sl=function(v){cn[v.fontName]=cn[v.fontName]||{},cn[v.fontName][v.fontStyle]=v.id},uf=function(v,k,Q,re,ue){var ke={id:"F"+(Object.keys(an).length+1).toString(10),postScriptName:v,fontName:k,fontStyle:Q,encoding:re,isStandardFont:ue||!1,metadata:{}};return Sn.publish("addFont",{font:ke,instance:this}),an[ke.id]=ke,Sl(ke),ke.id},ho=g.__private__.pdfEscape=g.pdfEscape=function(v,k){return(function(Q,re){var ue,ke,ze,ht,_t,qt,Kt,wn,fr;if(ze=(re=re||{}).sourceEncoding||"Unicode",_t=re.outputEncoding,(re.autoencode||_t)&&an[mt].metadata&&an[mt].metadata[ze]&&an[mt].metadata[ze].encoding&&(ht=an[mt].metadata[ze].encoding,!_t&&an[mt].encoding&&(_t=an[mt].encoding),!_t&&ht.codePages&&(_t=ht.codePages[0]),typeof _t=="string"&&(_t=ht[_t]),_t)){for(Kt=!1,qt=[],ue=0,ke=Q.length;ue<ke;ue++)(wn=_t[Q.charCodeAt(ue)])?qt.push(String.fromCharCode(wn)):qt.push(Q[ue]),qt[ue].charCodeAt(0)>>8&&(Kt=!0);Q=qt.join("")}for(ue=Q.length;Kt===void 0&&ue!==0;)Q.charCodeAt(ue-1)>>8&&(Kt=!0),ue--;if(!Kt)return Q;for(qt=re.noBOM?[]:[254,255],ue=0,ke=Q.length;ue<ke;ue++){if((fr=(wn=Q.charCodeAt(ue))>>8)>>8)throw new Error("Character at position "+ue+" of string '"+Q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(fr),qt.push(wn-(fr<<8))}return String.fromCharCode.apply(void 0,qt)})(v,k).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Oa=g.__private__.beginPage=function(v){Ue[++tn]=[],jt[tn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},rp(tn),ot(Ue[G])},sa=function(v,k){var Q,re,ue;switch(t=k||t,typeof v=="string"&&(Q=N(v.toLowerCase()),Array.isArray(Q)&&(re=Q[0],ue=Q[1])),Array.isArray(v)&&(re=v[0]*Xt,ue=v[1]*Xt),isNaN(re)&&(re=i[0],ue=i[1]),(re>14400||ue>14400)&&(dr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),re=Math.min(14400,re),ue=Math.min(14400,ue)),i=[re,ue],t.substr(0,1)){case"l":ue>re&&(i=[ue,re]);break;case"p":re>ue&&(i=[ue,re])}Oa(i),Gt(Au),$(la),Nl!==0&&$(Nl+" J"),tr!==0&&$(tr+" j"),Sn.publish("addPage",{pageNumber:tn})},Al=function(v){v>0&&v<=tn&&(Ue.splice(v,1),jt.splice(v,1),tn--,G>tn&&(G=tn),this.setPage(G))},rp=function(v){v>0&&v<=tn&&(G=v)},df=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Ue.length-1},ff=function(v,k,Q){var re,ue=void 0;return Q=Q||{},v=v!==void 0?v:an[mt].fontName,k=k!==void 0?k:an[mt].fontStyle,re=v.toLowerCase(),cn[re]!==void 0&&cn[re][k]!==void 0?ue=cn[re][k]:cn[v]!==void 0&&cn[v][k]!==void 0?ue=cn[v][k]:Q.disableWarning===!1&&dr.warn("Unable to look up font label for font '"+v+"', '"+k+"'. Refer to getFontList() for available fonts."),ue||Q.noFallback||(ue=cn.times[k])==null&&(ue=cn.times.normal),ue},Ds=g.__private__.putInfo=function(){var v=er(),k=function(re){return re};for(var Q in u!==null&&(k=Yr.encryptor(v,0)),$("<<"),$("/Producer ("+ho(k("jsPDF "+St.version))+")"),Vt)Vt.hasOwnProperty(Q)&&Vt[Q]&&$("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+ho(k(Vt[Q]))+")");$("/CreationDate ("+ho(k(_e))+")"),$(">>"),$("endobj")},Ac=g.__private__.putCatalog=function(v){var k=(v=v||{}).rootDictionaryObjId||Cc;switch(er(),$("<<"),$("/Type /Catalog"),$("/Pages "+k+" 0 R"),At||(At="fullwidth"),At){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+At;Q.substr(Q.length-1)==="%"&&(At=parseInt(At)/100),typeof At=="number"&&$("/OpenAction [3 0 R /XYZ null null "+x(At)+"]")}switch(Qt||(Qt="continuous"),Qt){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}Et&&$("/PageMode /"+Et),Sn.publish("putCatalog"),$(">>"),$("endobj")},hf=g.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(ae+1)),$("/Root "+ae+" 0 R"),$("/Info "+(ae-1)+" 0 R"),u!==null&&$("/Encrypt "+Yr.oid+" 0 R"),$("/ID [ <"+Te+"> <"+Te+"> ]"),$(">>")},kr=g.__private__.putHeader=function(){$("%PDF-"+b),$("%\xBA\xDF\xAC\xE0")},pf=g.__private__.putXRef=function(){var v="0000000000";$("xref"),$("0 "+(ae+1)),$("0000000000 65535 f ");for(var k=1;k<=ae;k++)typeof pe[k]=="function"?$((v+pe[k]()).slice(-10)+" 00000 n "):pe[k]!==void 0?$((v+pe[k]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},aa=g.__private__.buildDocument=function(){var v;ae=0,ye=0,Se=[],pe=[],Me=[],Cc=di(),Ss=di(),ot(Se),Sn.publish("buildDocument"),kr(),As(),(function(){Sn.publish("putAdditionalObjects");for(var Q=0;Q<Me.length;Q++){var re=Me[Q];Ci(re.objId,!0),$(re.content),$("endobj")}Sn.publish("postPutAdditionalObjects")})(),v=[],(function(){for(var Q in an)an.hasOwnProperty(Q)&&(h===!1||h===!0&&m.hasOwnProperty(Q))&&Ec(an[Q])})(),(function(){var Q;for(Q in Bt)Bt.hasOwnProperty(Q)&&np(Bt[Q])})(),(function(){for(var Q in xi)xi.hasOwnProperty(Q)&&Ic(xi[Q])})(),(function(Q){var re;for(re in kt)kt.hasOwnProperty(re)&&(kt[re]instanceof Bh?Sc(kt[re]):kt[re]instanceof Vm&&Il(kt[re],Q))})(v),Sn.publish("putResources"),v.forEach(lf),lf({resourcesOid:Ss,objectOid:Number.MAX_SAFE_INTEGER}),Sn.publish("postPutResources"),u!==null&&(Yr.oid=er(),$("<<"),$("/Filter /Standard"),$("/V "+Yr.v),$("/R "+Yr.r),$("/U <"+Yr.toHexString(Yr.U)+">"),$("/O <"+Yr.toHexString(Yr.O)+">"),$("/P "+Yr.P),$(">>"),$("endobj")),Ds(),Ac();var k=ye;return pf(),hf(),$("startxref"),$(""+k),$("%%EOF"),ot(Ue[G]),Se.join(`
`)},Eu=g.__private__.getBlob=function(v){return new Blob([Ft(v)],{type:"application/pdf"})},gf=g.output=g.__private__.output=(Vi=function(v,k){switch(typeof(k=k||{})=="string"?k={filename:k}:k.filename=k.filename||"generated.pdf",v){case void 0:return aa();case"save":g.save(k.filename);break;case"arraybuffer":return Ft(aa());case"blob":return Eu(aa());case"bloburi":case"bloburl":if(Yt.URL!==void 0&&typeof Yt.URL.createObjectURL=="function")return Yt.URL&&Yt.URL.createObjectURL(Eu(aa()))||void 0;dr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",re=aa();try{Q=hz(re)}catch{Q=hz(unescape(encodeURIComponent(re)))}return"data:application/pdf;filename="+k.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Yt)==="[object Window]"){var ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';k.pdfObjectUrl&&(ue=k.pdfObjectUrl,ke="");var ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ue+'"'+ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(k)+");<\/script></body></html>",ht=Yt.open();return ht!==null&&ht.document.write(ze),ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Yt)==="[object Window]"){var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(k.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+k.filename+'" width="500px" height="400px" /></body></html>',qt=Yt.open();if(qt!==null){qt.document.write(_t);var Kt=this;qt.document.documentElement.querySelector("#pdfViewer").onload=function(){qt.document.title=k.filename,qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Kt.output("bloburl"))}}return qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Yt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",k)+'"></iframe></body></html>',fr=Yt.open();if(fr!==null&&(fr.document.write(wn),fr.document.title=k.filename),fr||typeof safari>"u")return fr;break;case"datauri":case"dataurl":return Yt.document.location.href=this.output("datauristring",k);default:return null}},Vi.foo=function(){try{return Vi.apply(this,arguments)}catch(Q){var v=Q.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var k="Error in function "+v.split(`
`)[0].split("<")[0]+": "+Q.message;if(!Yt.console)throw new Error(k);Yt.console.error(k,Q),Yt.alert&&alert(k)}},Vi.foo.bar=Vi,Vi.foo),Oo=function(v){return Array.isArray(No)===!0&&No.indexOf(v)>-1};switch(r){case"pt":Xt=1;break;case"mm":Xt=72/25.4;break;case"cm":Xt=72/2.54;break;case"in":Xt=72;break;case"px":Xt=Oo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xt=12;break;case"ex":Xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Xt=r}var Yr=null;Fe(),fe();var Wi=g.__private__.getPageInfo=g.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:jt[v].objId,pageNumber:v,pageContext:jt[v]}},ss=g.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var k in jt)if(jt[k].objId===v)break;return Wi(k)},Iu=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:jt[G].objId,pageNumber:G,pageContext:jt[G]}};g.addPage=function(){return sa.apply(this,arguments),this},g.setPage=function(){return rp.apply(this,arguments),ot.call(this,Ue[G]),this},g.insertPage=function(v){return this.addPage(),this.movePage(G,v),this},g.movePage=function(v,k){var Q,re;if(v>k){Q=Ue[v],re=jt[v];for(var ue=v;ue>k;ue--)Ue[ue]=Ue[ue-1],jt[ue]=jt[ue-1];Ue[k]=Q,jt[k]=re,this.setPage(k)}else if(v<k){Q=Ue[v],re=jt[v];for(var ke=v;ke<k;ke++)Ue[ke]=Ue[ke+1],jt[ke]=jt[ke+1];Ue[k]=Q,jt[k]=re,this.setPage(k)}return this},g.deletePage=function(){return Al.apply(this,arguments),this},g.__private__.text=g.text=function(v,k,Q,re,ue){var ke,ze,ht,_t,qt,Kt,wn,fr,nr,qn=(re=re||{}).scope||this;if(typeof v=="number"&&typeof k=="number"&&(typeof Q=="string"||Array.isArray(Q))){var zr=Q;Q=k,k=v,v=zr}if(arguments[3]instanceof Pt==0?(ht=arguments[4],_t=arguments[5],Un(wn=arguments[3])==="object"&&wn!==null||(typeof ht=="string"&&(_t=ht,ht=null),typeof wn=="string"&&(_t=wn,wn=null),typeof wn=="number"&&(ht=wn,wn=null),re={flags:wn,angle:ht,align:_t})):(S("The transform parameter of text() with a Matrix value"),nr=ue),isNaN(k)||isNaN(Q)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return qn;var Rr,fi="",cs=typeof re.lineHeightFactor=="number"?re.lineHeightFactor:po,yr=qn.internal.scaleFactor;function da(jn){return jn=jn.split("	").join(Array(re.TabLen||9).join(" ")),ho(jn,wn)}function Nu(jn){for(var ar,Zr=jn.concat(),Ei=[],Fl=Zr.length;Fl--;)typeof(ar=Zr.shift())=="string"?Ei.push(ar):Array.isArray(jn)&&(ar.length===1||ar[1]===void 0&&ar[2]===void 0)?Ei.push(ar[0]):Ei.push([ar[0],ar[1],ar[2]]);return Ei}function Ps(jn,ar){var Zr;if(typeof jn=="string")Zr=ar(jn)[0];else if(Array.isArray(jn)){for(var Ei,Fl,_0=jn.concat(),up=[],J_=_0.length;J_--;)typeof(Ei=_0.shift())=="string"?up.push(ar(Ei)[0]):Array.isArray(Ei)&&typeof Ei[0]=="string"&&(Fl=ar(Ei[0],Ei[1],Ei[2]),up.push([Fl[0],Fl[1],Fl[2]]));Zr=up}return Zr}var f=!1,_=!0;if(typeof v=="string")f=!0;else if(Array.isArray(v)){var E=v.concat();ze=[];for(var B,le=E.length;le--;)(typeof(B=E.shift())!="string"||Array.isArray(B)&&typeof B[0]!="string")&&(_=!1);f=_}if(f===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Ee=qe/qn.internal.scaleFactor,Ze=Ee*(cs-1);switch(re.baseline){case"bottom":Q-=Ze;break;case"top":Q+=Ee-Ze;break;case"hanging":Q+=Ee-2*Ze;break;case"middle":Q+=Ee/2-Ze}if((Kt=re.maxWidth||0)>0&&(typeof v=="string"?v=qn.splitTextToSize(v,Kt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(jn,ar){return jn.concat(qn.splitTextToSize(ar,Kt))},[]))),ke={text:v,x:k,y:Q,options:re,mutex:{pdfEscape:ho,activeFontKey:mt,fonts:an,activeFontSize:qe}},Sn.publish("preProcessText",ke),v=ke.text,ht=(re=ke.options).angle,nr instanceof Pt==0&&ht&&typeof ht=="number"){ht*=Math.PI/180,re.rotationDirection===0&&(ht=-ht),W===j&&(ht=-ht);var Tn=Math.cos(ht),Or=Math.sin(ht);nr=new Pt(Tn,Or,-Or,Tn,0,0)}else ht&&ht instanceof Pt&&(nr=ht);W!==j||nr||(nr=vr),(qt=re.charSpace||Fo)!==void 0&&(fi+=M(D(qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(fr=re.horizontalScale)!==void 0&&(fi+=M(100*fr)+` Tz
`),re.lang;var Wt=-1,hr=re.renderingMode!==void 0?re.renderingMode:re.stroke,Fr=qn.internal.getCurrentPageInfo().pageContext;switch(hr){case 0:case!1:case"fill":Wt=0;break;case 1:case!0:case"stroke":Wt=1;break;case 2:case"fillThenStroke":Wt=2;break;case 3:case"invisible":Wt=3;break;case 4:case"fillAndAddForClipping":Wt=4;break;case 5:case"strokeAndAddPathForClipping":Wt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wt=6;break;case 7:case"addToPathForClipping":Wt=7}var Ba=Fr.usedRenderingMode!==void 0?Fr.usedRenderingMode:-1;Wt!==-1?fi+=Wt+` Tr
`:Ba!==-1&&(fi+=`0 Tr
`),Wt!==-1&&(Fr.usedRenderingMode=Wt),_t=re.align||"left";var Er,fa=qe*cs,Rl=qn.internal.pageSize.getWidth(),h0=an[mt];qt=re.charSpace||Fo,Kt=re.maxWidth||0,wn=Object.assign({autoencode:!0,noBOM:!0},re.flags);var Pu=[],_f=function(jn){return qn.getStringUnitWidth(jn,{font:h0,charSpace:qt,fontSize:qe,doKerning:!1})*qe/yr};if(Object.prototype.toString.call(v)==="[object Array]"){var ks;ze=Nu(v),_t!=="left"&&(Er=ze.map(_f));var Rs,ku=0;if(_t==="right"){k-=Er[0],v=[],le=ze.length;for(var Ol=0;Ol<le;Ol++)Ol===0?(Rs=Fa(k),ks=ji(Q)):(Rs=D(ku-Er[Ol]),ks=-fa),v.push([ze[Ol],Rs,ks]),ku=Er[Ol]}else if(_t==="center"){k-=Er[0]/2,v=[],le=ze.length;for(var Ru=0;Ru<le;Ru++)Ru===0?(Rs=Fa(k),ks=ji(Q)):(Rs=D((ku-Er[Ru])/2),ks=-fa),v.push([ze[Ru],Rs,ks]),ku=Er[Ru]}else if(_t==="left"){v=[],le=ze.length;for(var p0=0;p0<le;p0++)v.push(ze[p0])}else if(_t==="justify"&&h0.encoding==="Identity-H"){v=[],le=ze.length,Kt=Kt!==0?Kt:Rl;for(var lp=0,Qr=0;Qr<le;Qr++)if(ks=Qr===0?ji(Q):-fa,Rs=Qr===0?Fa(k):lp,Qr<le-1){var X_=D((Kt-Er[Qr])/(ze[Qr].split(" ").length-1)),Nc=ze[Qr].split(" ");v.push([Nc[0]+" ",Rs,ks]),lp=0;for(var Pc=1;Pc<Nc.length;Pc++){var g0=(_f(Nc[Pc-1]+" "+Nc[Pc])-_f(Nc[Pc]))*yr+X_;Pc==Nc.length-1?v.push([Nc[Pc],g0,0]):v.push([Nc[Pc]+" ",g0,0]),lp-=g0}}else v.push([ze[Qr],Rs,ks]);v.push(["",lp,0])}else{if(_t!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],le=ze.length,Kt=Kt!==0?Kt:Rl,Qr=0;Qr<le;Qr++){ks=Qr===0?ji(Q):-fa,Rs=Qr===0?Fa(k):0;var m0=ze[Qr].split(" ").length-1,v0=m0>0?(Kt-Er[Qr])/m0:0;Qr<le-1?Pu.push(M(D(v0))):Pu.push(0),v.push([ze[Qr],Rs,ks])}}}(typeof re.R2L=="boolean"?re.R2L:yt)===!0&&(v=Ps(v,function(jn,ar,Zr){return[jn.split("").reverse().join(""),ar,Zr]})),ke={text:v,x:k,y:Q,options:re,mutex:{pdfEscape:ho,activeFontKey:mt,fonts:an,activeFontSize:qe}},Sn.publish("postProcessText",ke),v=ke.text,Rr=ke.mutex.isHex||!1;var y0=an[mt].encoding;y0!=="WinAnsiEncoding"&&y0!=="StandardEncoding"||(v=Ps(v,function(jn,ar,Zr){return[da(jn),ar,Zr]})),ze=Nu(v),v=[];for(var Ou,Fu,Lu,wf=Array.isArray(ze[0])?1:0,Vu="",bf=function(jn,ar,Zr){var Ei="";return Zr instanceof Pt?(Zr=typeof re.angle=="number"?oa(Zr,new Pt(1,0,0,1,jn,ar)):oa(new Pt(1,0,0,1,jn,ar),Zr),W===j&&(Zr=oa(new Pt(1,0,0,-1,0,0),Zr)),Ei=Zr.join(" ")+` Tm
`):Ei=M(jn)+" "+M(ar)+` Td
`,Ei},ha=0;ha<ze.length;ha++){switch(Vu="",wf){case 1:Lu=(Rr?"<":"(")+ze[ha][0]+(Rr?">":")"),Ou=parseFloat(ze[ha][1]),Fu=parseFloat(ze[ha][2]);break;case 0:Lu=(Rr?"<":"(")+ze[ha]+(Rr?">":")"),Ou=Fa(k),Fu=ji(Q)}Pu!==void 0&&Pu[ha]!==void 0&&(Vu=Pu[ha]+` Tw
`),ha===0?v.push(Vu+bf(Ou,Fu,nr)+Lu):wf===0?v.push(Vu+Lu):wf===1&&v.push(Vu+bf(Ou,Fu,nr)+Lu)}v=wf===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var kc=`BT
/`;return kc+=mt+" "+qe+` Tf
`,kc+=M(qe*cs)+` TL
`,kc+=Mc+`
`,kc+=fi,kc+=v,$(kc+="ET"),m[mt]=!0,qn};var Su=g.__private__.clip=g.clip=function(v){return $(v==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Su("evenodd")},g.__private__.discardPath=g.discardPath=function(){return $("n"),this};var Ts=g.__private__.isValidStyle=function(v){var k=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(k=!0),k};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(v){return Ts(v)&&(l=v),this};var Vn=g.__private__.getStyle=g.getStyle=function(v){var k=l;switch(v){case"D":case"S":k="S";break;case"F":k="f";break;case"FD":case"DF":k="B";break;case"f":case"f*":case"B":case"B*":k=v}return k},Dl=g.close=function(){return $("h"),this};g.stroke=function(){return $("S"),this},g.fill=function(v){return ca("f",v),this},g.fillEvenOdd=function(v){return ca("f*",v),this},g.fillStroke=function(v){return ca("B",v),this},g.fillStrokeEvenOdd=function(v){return ca("B*",v),this};var ca=function(v,k){Un(k)==="object"?ip(k,v):$(v)},Ms=function(v){v===null||W===j&&v===void 0||(v=Vn(v),$(v))};function a0(v,k,Q,re,ue){var ke=new Vm(k||this.boundingBox,Q||this.xStep,re||this.yStep,this.gState,ue||this.matrix);ke.stream=this.stream;var ze=v+"$$"+this.cloneIndex+++"$$";return Po(ze,ke),ke}var ip=function(v,k){var Q=Jn[v.key],re=kt[Q];if(re instanceof Bh)$("q"),$(c0(k)),re.gState&&g.setGState(re.gState),$(v.matrix.toString()+" cm"),$("/"+Q+" sh"),$("Q");else if(re instanceof Vm){var ue=new Pt(1,0,0,-1,0,ja());v.matrix&&(ue=ue.multiply(v.matrix||vr),Q=a0.call(re,v.key,v.boundingBox,v.xStep,v.yStep,ue).id),$("q"),$("/Pattern cs"),$("/"+Q+" scn"),re.gState&&g.setGState(re.gState),$(k),$("Q")}},c0=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},mf=g.moveTo=function(v,k){return $(M(D(v))+" "+M(te(k))+" m"),this},op=g.lineTo=function(v,k){return $(M(D(v))+" "+M(te(k))+" l"),this},Ns=g.curveTo=function(v,k,Q,re,ue,ke){return $([M(D(v)),M(te(k)),M(D(Q)),M(te(re)),M(D(ue)),M(te(ke)),"c"].join(" ")),this};g.__private__.line=g.line=function(v,k,Q,re,ue){if(isNaN(v)||isNaN(k)||isNaN(Q)||isNaN(re)||!Ts(ue))throw new Error("Invalid arguments passed to jsPDF.line");return W===Y?this.lines([[Q-v,re-k]],v,k,[1,1],ue||"S"):this.lines([[Q-v,re-k]],v,k,[1,1]).stroke()},g.__private__.lines=g.lines=function(v,k,Q,re,ue,ke){var ze,ht,_t,qt,Kt,wn,fr,nr,qn,zr,Rr,fi;if(typeof v=="number"&&(fi=Q,Q=k,k=v,v=fi),re=re||[1,1],ke=ke||!1,isNaN(k)||isNaN(Q)||!Array.isArray(v)||!Array.isArray(re)||!Ts(ue)||typeof ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mf(k,Q),ze=re[0],ht=re[1],qt=v.length,zr=k,Rr=Q,_t=0;_t<qt;_t++)(Kt=v[_t]).length===2?(zr=Kt[0]*ze+zr,Rr=Kt[1]*ht+Rr,op(zr,Rr)):(wn=Kt[0]*ze+zr,fr=Kt[1]*ht+Rr,nr=Kt[2]*ze+zr,qn=Kt[3]*ht+Rr,zr=Kt[4]*ze+zr,Rr=Kt[5]*ht+Rr,Ns(wn,fr,nr,qn,zr,Rr));return ke&&Dl(),Ms(ue),this},g.path=function(v){for(var k=0;k<v.length;k++){var Q=v[k],re=Q.c;switch(Q.op){case"m":mf(re[0],re[1]);break;case"l":op(re[0],re[1]);break;case"c":Ns.apply(this,re);break;case"h":Dl()}}return this},g.__private__.rect=g.rect=function(v,k,Q,re,ue){if(isNaN(v)||isNaN(k)||isNaN(Q)||isNaN(re)||!Ts(ue))throw new Error("Invalid arguments passed to jsPDF.rect");return W===Y&&(re=-re),$([M(D(v)),M(te(k)),M(D(Q)),M(D(re)),"re"].join(" ")),Ms(ue),this},g.__private__.triangle=g.triangle=function(v,k,Q,re,ue,ke,ze){if(isNaN(v)||isNaN(k)||isNaN(Q)||isNaN(re)||isNaN(ue)||isNaN(ke)||!Ts(ze))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-v,re-k],[ue-Q,ke-re],[v-ue,k-ke]],v,k,[1,1],ze,!0),this},g.__private__.roundedRect=g.roundedRect=function(v,k,Q,re,ue,ke,ze){if(isNaN(v)||isNaN(k)||isNaN(Q)||isNaN(re)||isNaN(ue)||isNaN(ke)||!Ts(ze))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ht=4/3*(Math.SQRT2-1);return ue=Math.min(ue,.5*Q),ke=Math.min(ke,.5*re),this.lines([[Q-2*ue,0],[ue*ht,0,ue,ke-ke*ht,ue,ke],[0,re-2*ke],[0,ke*ht,-ue*ht,ke,-ue,ke],[2*ue-Q,0],[-ue*ht,0,-ue,-ke*ht,-ue,-ke],[0,2*ke-re],[0,-ke*ht,ue*ht,-ke,ue,-ke]],v+ue,k,[1,1],ze,!0),this},g.__private__.ellipse=g.ellipse=function(v,k,Q,re,ue){if(isNaN(v)||isNaN(k)||isNaN(Q)||isNaN(re)||!Ts(ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ke=4/3*(Math.SQRT2-1)*Q,ze=4/3*(Math.SQRT2-1)*re;return mf(v+Q,k),Ns(v+Q,k-ze,v+ke,k-re,v,k-re),Ns(v-ke,k-re,v-Q,k-ze,v-Q,k),Ns(v-Q,k+ze,v-ke,k+re,v,k+re),Ns(v+ke,k+re,v+Q,k+ze,v+Q,k),Ms(ue),this},g.__private__.circle=g.circle=function(v,k,Q,re){if(isNaN(v)||isNaN(k)||isNaN(Q)||!Ts(re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,k,Q,Q,re)},g.setFont=function(v,k,Q){return Q&&(k=z(k,Q)),mt=ff(v,k,{disableWarning:!1}),this};var Tl=g.__private__.getFont=g.getFont=function(){return an[ff.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var v,k,Q={};for(v in cn)if(cn.hasOwnProperty(v))for(k in Q[v]=[],cn[v])cn[v].hasOwnProperty(k)&&Q[v].push(k);return Q},g.addFont=function(v,k,Q,re,ue){var ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ke.indexOf(arguments[3])!==-1?ue=arguments[3]:arguments[3]&&ke.indexOf(arguments[3])==-1&&(Q=z(Q,re)),uf.call(this,v,k,Q,ue=ue||"Identity-H")};var po,Au=n.lineWidth||.200025,sp=g.__private__.getLineWidth=g.getLineWidth=function(){return Au},Gt=g.__private__.setLineWidth=g.setLineWidth=function(v){return Au=v,$(M(D(v))+" w"),this};g.__private__.setLineDash=St.API.setLineDash=St.API.setLineDashPattern=function(v,k){if(v=v||[],k=k||0,isNaN(k)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Q){return M(D(Q))}).join(" "),k=M(D(k)),$("["+v+"] "+k+" d"),this};var Dc=g.__private__.getLineHeight=g.getLineHeight=function(){return qe*po};g.__private__.getLineHeight=g.getLineHeight=function(){return qe*po};var l0=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(po=v),this},u0=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return po};l0(n.lineHeight);var Fa=g.__private__.getHorizontalCoordinate=function(v){return D(v)},ji=g.__private__.getVerticalCoordinate=function(v){return W===j?v:jt[G].mediaBox.topRightY-jt[G].mediaBox.bottomLeftY-D(v)},d0=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(v){return M(Fa(v))},f0=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(v){return M(ji(v))},la=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ko(la)},g.__private__.setStrokeColor=g.setDrawColor=function(v,k,Q,re){return la=os({ch1:v,ch2:k,ch3:Q,ch4:re,pdfColorType:"draw",precision:2}),$(la),this};var Tc=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ko(Tc)},g.__private__.setFillColor=g.setFillColor=function(v,k,Q,re){return Tc=os({ch1:v,ch2:k,ch3:Q,ch4:re,pdfColorType:"fill",precision:2}),$(Tc),this};var Mc=n.textColor||"0 g",Ml=g.__private__.getTextColor=g.getTextColor=function(){return ko(Mc)};g.__private__.setTextColor=g.setTextColor=function(v,k,Q,re){return Mc=os({ch1:v,ch2:k,ch3:Q,ch4:re,pdfColorType:"text",precision:3}),this};var Fo=n.charSpace,ap=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Fo||0)};g.__private__.setCharSpace=g.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fo=v,this};var Nl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(v){var k=g.CapJoinStyles[v];if(k===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nl=k,$(k+" J"),this};var tr=0;g.__private__.setLineJoin=g.setLineJoin=function(v){var k=g.CapJoinStyles[v];if(k===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tr=k,$(k+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(M(D(v))+" M"),this},g.GState=QC,g.setGState=function(v){(v=typeof v=="string"?Bt[Zt[v]]:cp(null,v)).equals(sr)||($("/"+v.id+" gs"),sr=v)};var cp=function(v,k){if(!v||!Zt[v]){var Q=!1;for(var re in Bt)if(Bt.hasOwnProperty(re)&&Bt[re].equals(k)){Q=!0;break}if(Q)k=Bt[re];else{var ue="GS"+(Object.keys(Bt).length+1).toString(10);Bt[ue]=k,k.id=ue}return v&&(Zt[v]=k.id),Sn.publish("addGState",k),k}};g.addGState=function(v,k){return cp(v,k),this},g.saveGraphicsState=function(){return $("q"),Xn.push({key:mt,size:qe,color:Mc}),this},g.restoreGraphicsState=function(){$("Q");var v=Xn.pop();return mt=v.key,qe=v.size,Mc=v.color,sr=null,this},g.setCurrentTransformationMatrix=function(v){return $(v.toString()+" cm"),this},g.comment=function(v){return $("#"+v),this};var La=function(v,k){var Q=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(ke){isNaN(ke)||(Q=parseFloat(ke))}});var re=k||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return re},set:function(ke){isNaN(ke)||(re=parseFloat(ke))}});var ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ue},set:function(ke){ue=ke.toString()}}),this},Du=function(v,k,Q,re){La.call(this,v,k),this.type="rect";var ue=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ue},set:function(ze){isNaN(ze)||(ue=parseFloat(ze))}});var ke=re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ke},set:function(ze){isNaN(ze)||(ke=parseFloat(ze))}}),this},Pl=function(){this.page=tn,this.currentPage=G,this.pages=Ue.slice(0),this.pagesContext=jt.slice(0),this.x=It,this.y=Pr,this.matrix=yn,this.width=Mu(G),this.height=vf(G),this.outputDestination=We,this.id="",this.objectNumber=-1};Pl.prototype.restore=function(){tn=this.page,G=this.currentPage,jt=this.pagesContext,Ue=this.pages,It=this.x,Pr=this.y,yn=this.matrix,as(G,this.width),Va(G,this.height),We=this.outputDestination};var Tu=function(v,k,Q,re,ue){Is.push(new Pl),tn=G=0,Ue=[],It=v,Pr=k,yn=ue,Oa([Q,re])};for(var ua in g.beginFormObject=function(v,k,Q,re,ue){return Tu(v,k,Q,re,ue),this},g.endFormObject=function(v){return(function(k){if(rs[k])Is.pop().restore();else{var Q=new Pl,re="Xo"+(Object.keys(xi).length+1).toString(10);Q.id=re,rs[k]=re,xi[re]=Q,Sn.publish("addFormObject",Q),Is.pop().restore()}})(v),this},g.doFormObject=function(v,k){var Q=xi[rs[v]];return $("q"),$(k.toString()+" cm"),$("/"+Q.id+" Do"),$("Q"),this},g.getFormObject=function(v){var k=xi[rs[v]];return{x:k.x,y:k.y,width:k.width,height:k.height,matrix:k.matrix}},g.save=function(v,k){return v=v||"generated.pdf",(k=k||{}).returnPromise=k.returnPromise||!1,k.returnPromise===!1?(jh(Eu(aa()),v),typeof jh.unload=="function"&&Yt.setTimeout&&setTimeout(jh.unload,911),this):new Promise(function(Q,re){try{var ue=jh(Eu(aa()),v);typeof jh.unload=="function"&&Yt.setTimeout&&setTimeout(jh.unload,911),Q(ue)}catch(ke){re(ke.message)}})},St.API)St.API.hasOwnProperty(ua)&&(ua==="events"&&St.API.events.length?(function(v,k){var Q,re,ue;for(ue=k.length-1;ue!==-1;ue--)Q=k[ue][0],re=k[ue][1],v.subscribe.apply(v,[Q].concat(typeof re=="function"?[re]:re))})(Sn,St.API.events):g[ua]=St.API[ua]);function Mu(v){return jt[v].mediaBox.topRightX-jt[v].mediaBox.bottomLeftX}function as(v,k){jt[v].mediaBox.topRightX=k+jt[v].mediaBox.bottomLeftX}function vf(v){return jt[v].mediaBox.topRightY-jt[v].mediaBox.bottomLeftY}function Va(v,k){jt[v].mediaBox.topRightY=k+jt[v].mediaBox.bottomLeftY}var Lo=g.getPageWidth=function(v){return Mu(v=v||G)/Xt},yf=g.setPageWidth=function(v,k){as(v,k*Xt)},ja=g.getPageHeight=function(v){return vf(v=v||G)/Xt},kl=g.setPageHeight=function(v,k){Va(v,k*Xt)};return g.internal={pdfEscape:ho,getStyle:Vn,getFont:Tl,getFontSize:st,getCharSpace:ap,getTextColor:Ml,getLineHeight:Dc,getLineHeightFactor:u0,getLineWidth:sp,write:Ke,getHorizontalCoordinate:Fa,getVerticalCoordinate:ji,getCoordinateString:d0,getVerticalCoordinateString:f0,collections:{},newObject:er,newAdditionalObject:is,newObjectDeferred:di,newObjectDeferredBegin:Ci,getFilters:Ro,putStream:Gi,events:Sn,scaleFactor:Xt,pageSize:{getWidth:function(){return Lo(G)},setWidth:function(v){yf(G,v)},getHeight:function(){return ja(G)},setHeight:function(v){kl(G,v)}},encryptionOptions:u,encryption:Yr,getEncryptor:function(v){return u!==null?Yr.encryptor(v,0):function(k){return k}},output:gf,getNumberOfPages:df,get pages(){return Ue},out:$,f2:x,f3:A,getPageInfo:Wi,getPageInfoByObjId:ss,getCurrentPageInfo:Iu,getPDFVersion:I,Point:La,Rectangle:Du,Matrix:Pt,hasHotfix:Oo},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Lo(G)},set:function(v){yf(G,v)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return ja(G)},set:function(v){kl(G,v)},enumerable:!0,configurable:!0}),(function(v){for(var k=0,Q=Ct.length;k<Q;k++){var re=uf.call(this,v[k][0],v[k][1],v[k][2],Ct[k][3],!0);h===!1&&(m[re]=!0);var ue=v[k][0].split("-");Sl({id:re,fontName:ue[0],fontStyle:ue[1]||""})}Sn.publish("addFonts",{fonts:an,dictionary:cn})}).call(g,Ct),mt="F1",sa(i,t),Sn.publish("initialized"),g}Fm.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Fm.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Fm.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Fm.prototype.processOwnerPassword=function(n,e){return Fk(Ok(e).substr(0,5),n)},Fm.prototype.encryptor=function(n,e){var t=Ok(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Fk(t,r)}},QC.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Un(n)!==Un(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},St.API={events:[]},St.version="3.0.4";var Kr=St.API,jk=1,zh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rm=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rn=function(n){return n.toFixed(2)},ef=function(n){return n.toFixed(5)};Kr.__acroform__={};var Cs=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},vz=function(n){return n*jk},_l=function(n){var e=new Bz,t=vt.internal.getHeight(n)||0,r=vt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(rn(r)),Number(rn(t))],e},Ile=Kr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},Sle=Kr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},Ale=Kr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ci=Kr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ale(n,e-1)},li=Kr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Ile(n,e-1)},ui=Kr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Sle(n,e-1)},Dle=Kr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(o+a)||0,c.upperRight_X=t(i+s)||0,c.upperRight_Y=r(o)||0,[Number(rn(c.lowerLeft_X)),Number(rn(c.lowerLeft_Y)),Number(rn(c.upperRight_X)),Number(rn(c.upperRight_Y))]},Tle=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Lk(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+rn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=_l(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},Lk=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(x){return x.split(`
`)}):i.map(function(x){return[x]});var o=t,s=vt.internal.getHeight(n)||0;s=s<0?-s:s;var a=vt.internal.getWidth(n)||0;a=a<0?-a:a;var c=function(x,A,D){if(x+1<i.length){var te=A+" "+i[x+1][0];return zC(te,n,D).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var l,u,h=zC("3",n,o).height,m=n.multiline?s-o:(s-h)/2,g=m+=2,b=0,I=0,T=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+zC(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var N="",Y=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var W=!1;if(i[j].length!==1&&T!==i[j].length-1){if((h+2)*(Y+2)+2>s)continue e;N+=i[j][T],W=!0,I=j,j--}else{N=(N+=i[j][T]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var oe=parseInt(j),he=c(oe,N,o),z=j>=i.length-1;if(he&&!z){N+=" ",T=0;continue}if(he||z){if(z)I=oe;else if(n.multiline&&(h+2)*(Y+2)+2>s)continue e}else{if(!n.multiline||(h+2)*(Y+2)+2>s)continue e;I=oe}}for(var M="",S=b;S<=I;S++){var V=i[S];if(n.multiline){if(S===I){M+=V[T]+" ",T=(T+1)%V.length;continue}if(S===b){M+=V[V.length-1]+" ";continue}}M+=V[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,u=zC(M,n,o).width,n.textAlign){case"right":l=a-u-2;break;case"center":l=(a-u)/2;break;default:l=2}e+=rn(l)+" "+rn(g)+` Td
`,e+="("+zh(M)+`) Tj
`,e+=-rn(l)+` 0 Td
`,g=-(o+2),u=0,b=W?I:I+1,Y++,N=""}break}return r.text=e,r.fontSize=o,r},zC=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},Mle={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Nle=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Ple=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(wc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Mle)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");jk=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Uz,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Nle(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],c=[],l=a.Rect;if(a.Rect&&(a.Rect=Dle(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=vt.createDefaultAppearanceStream(a),Un(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=l,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=Tle(a);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var h="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var g=a.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var s in g)if(g.hasOwnProperty(s)){var b=g[s];typeof b=="function"&&(b=b.call(i,a)),h+="/"+s+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(i,a)),h+="/"+s+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}o&&(function(I,T){for(var N in I)if(I.hasOwnProperty(N)){var Y=N,j=I[N];T.internal.newObjectDeferredBegin(j.objId,!0),Un(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete I[Y]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},jz=Kr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Un(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+zh(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Mk=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+zh(r(n))+")"},wl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wl.prototype.toString=function(){return this.objId+" 0 R"},wl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},wl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:jz(i,this.objId,this.scope)}):i instanceof wl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var Bz=function(){wl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Cs(Bz,wl);var Uz=function(){wl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+zh(t(n))+")"}},set:function(t){n=t}})};Cs(Uz,wl);var wc=function n(){wl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ci(e,3)},set:function(N){N?this.F=li(e,3):this.F=ui(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');t=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof ZC)return;o="FieldObject"+n.FieldNum++}var N=function(Y){return Y};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+zh(N(o))+")"},set:function(N){o=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(N){o=N}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(N){s=N}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(N){a=N}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/jk:l},set:function(N){l=N}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(N){u=N}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof ZC||this instanceof Uh))return Mk(h,this.objId,this.scope)},set:function(N){N=N.toString(),h=N}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof $i==0?Mk(m,this.objId,this.scope):m},set:function(N){N=N.toString(),m=this instanceof $i==0?N.substr(0,1)==="("?Rm(N.substr(1,N.length-2)):Rm(N):N}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i==1?Rm(m.substr(1,m.length-1)):m},set:function(N){N=N.toString(),m=this instanceof $i==1?"/"+N:N}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof $i==0?Mk(g,this.objId,this.scope):g},set:function(N){N=N.toString(),g=this instanceof $i==0?N.substr(0,1)==="("?Rm(N.substr(1,N.length-2)):Rm(N):N}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i==1?Rm(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof $i==1?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(N){N=!!N,I=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(N){b=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,1)},set:function(N){N?this.Ff=li(this.Ff,1):this.Ff=ui(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,2)},set:function(N){N?this.Ff=li(this.Ff,2):this.Ff=ui(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,3)},set:function(N){N?this.Ff=li(this.Ff,3):this.Ff=ui(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');T=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(T){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:T=2;break;case"center":case 1:T=1;break;default:T=0}}})};Cs(wc,wl);var jm=function(){wc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return jz(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,s,a){a||(a=1);for(var c,l=[];c=s.exec(o);)l.push(c[a]);return l})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,18)},set:function(t){t?this.Ff=li(this.Ff,18):this.Ff=ui(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=li(this.Ff,19):this.Ff=ui(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,20)},set:function(t){t?(this.Ff=li(this.Ff,20),e.sort()):this.Ff=ui(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,22)},set:function(t){t?this.Ff=li(this.Ff,22):this.Ff=ui(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,23)},set:function(t){t?this.Ff=li(this.Ff,23):this.Ff=ui(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,27)},set:function(t){t?this.Ff=li(this.Ff,27):this.Ff=ui(this.Ff,27)}}),this.hasAppearanceStream=!1};Cs(jm,wc);var Bm=function(){jm.call(this),this.fontName="helvetica",this.combo=!1};Cs(Bm,jm);var Um=function(){Bm.call(this),this.combo=!0};Cs(Um,Bm);var GC=function(){Um.call(this),this.edit=!0};Cs(GC,Um);var $i=function(){wc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,15)},set:function(t){t?this.Ff=li(this.Ff,15):this.Ff=ui(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,16)},set:function(t){t?this.Ff=li(this.Ff,16):this.Ff=ui(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,17)},set:function(t){t?this.Ff=li(this.Ff,17):this.Ff=ui(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,26)},set:function(t){t?this.Ff=li(this.Ff,26):this.Ff=ui(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+zh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Un(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Cs($i,wc);var WC=function(){$i.call(this),this.pushButton=!0};Cs(WC,$i);var zm=function(){$i.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Cs(zm,$i);var ZC=function(){var n,e;wc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+zh(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Un(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Cs(ZC,wc),zm.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},zm.prototype.createOption=function(n){var e=new ZC;return e.Parent=this,e.optionName=n,this.Kids.push(e),kle.call(this.scope,e),e};var KC=function(){$i.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};Cs(KC,$i);var Uh=function(){wc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,13)},set:function(e){e?this.Ff=li(this.Ff,13):this.Ff=ui(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,21)},set:function(e){e?this.Ff=li(this.Ff,21):this.Ff=ui(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,23)},set:function(e){e?this.Ff=li(this.Ff,23):this.Ff=ui(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,24)},set:function(e){e?this.Ff=li(this.Ff,24):this.Ff=ui(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,25)},set:function(e){e?this.Ff=li(this.Ff,25):this.Ff=ui(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,26)},set:function(e){e?this.Ff=li(this.Ff,26):this.Ff=ui(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Cs(Uh,wc);var YC=function(){Uh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,14)},set:function(n){n?this.Ff=li(this.Ff,14):this.Ff=ui(this.Ff,14)}}),this.password=!0};Cs(YC,Uh);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=_l(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=Lk(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+rn(vt.internal.getWidth(n))+" "+rn(vt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+rn(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=_l(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=vt.internal.getHeight(n),s=vt.internal.getWidth(n),a=Lk(n,n.caption);return i.push("1 g"),i.push("0 0 "+rn(s)+" "+rn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+rn(s-1)+" "+rn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+rn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=_l(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(vt.internal.getWidth(n))+" "+rn(vt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=vt.RadioButton.Circle.YesNormal,e.D[n]=vt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=_l(n);e.scope=n.scope;var t=[],r=vt.internal.getWidth(n)<=vt.internal.getHeight(n)?vt.internal.getWidth(n)/4:vt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=vt.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+ef(vt.internal.getWidth(n)/2)+" "+ef(vt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=_l(n);e.scope=n.scope;var t=[],r=vt.internal.getWidth(n)<=vt.internal.getHeight(n)?vt.internal.getWidth(n)/4:vt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*vt.internal.Bezier_C).toFixed(5)),s=Number((r*vt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ef(vt.internal.getWidth(n)/2)+" "+ef(vt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+ef(vt.internal.getWidth(n)/2)+" "+ef(vt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=_l(n);e.scope=n.scope;var t=[],r=vt.internal.getWidth(n)<=vt.internal.getHeight(n)?vt.internal.getWidth(n)/4:vt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*vt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ef(vt.internal.getWidth(n)/2)+" "+ef(vt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=vt.RadioButton.Cross.YesNormal,e.D[n]=vt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=_l(n);e.scope=n.scope;var t=[],r=vt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+rn(vt.internal.getWidth(n)-2)+" "+rn(vt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(rn(r.x1.x)+" "+rn(r.x1.y)+" m"),t.push(rn(r.x2.x)+" "+rn(r.x2.y)+" l"),t.push(rn(r.x4.x)+" "+rn(r.x4.y)+" m"),t.push(rn(r.x3.x)+" "+rn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=_l(n);e.scope=n.scope;var t=vt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+rn(vt.internal.getWidth(n))+" "+rn(vt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+rn(vt.internal.getWidth(n)-2)+" "+rn(vt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(rn(t.x1.x)+" "+rn(t.x1.y)+" m"),r.push(rn(t.x2.x)+" "+rn(t.x2.y)+" l"),r.push(rn(t.x4.x)+" "+rn(t.x4.y)+" m"),r.push(rn(t.x3.x)+" "+rn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=_l(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(vt.internal.getWidth(n))+" "+rn(vt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};vt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=vt.internal.getWidth(n),t=vt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},vt.internal.getWidth=function(n){var e=0;return Un(n)==="object"&&(e=vz(n.Rect[2])),e},vt.internal.getHeight=function(n){var e=0;return Un(n)==="object"&&(e=vz(n.Rect[3])),e};var kle=Kr.addField=function(n){if(Ple(this,n),!(n instanceof wc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Kr.AcroFormChoiceField=jm,Kr.AcroFormListBox=Bm,Kr.AcroFormComboBox=Um,Kr.AcroFormEditBox=GC,Kr.AcroFormButton=$i,Kr.AcroFormPushButton=WC,Kr.AcroFormRadioButton=zm,Kr.AcroFormCheckBox=KC,Kr.AcroFormTextField=Uh,Kr.AcroFormPasswordField=YC,Kr.AcroFormAppearance=vt,Kr.AcroForm={ChoiceField:jm,ListBox:Bm,ComboBox:Um,EditBox:GC,Button:$i,PushButton:WC,RadioButton:zm,CheckBox:KC,TextField:Uh,PasswordField:YC,Appearance:vt},St.AcroForm={ChoiceField:jm,ListBox:Bm,ComboBox:Um,EditBox:GC,Button:$i,PushButton:WC,RadioButton:zm,CheckBox:KC,TextField:Uh,PasswordField:YC,Appearance:vt};var eOe=St.AcroForm;function zz(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(x,A){var D,te,_e,Te,Ce,fe=t;if((A=A||t)==="RGBA"||x.data!==void 0&&x.data instanceof Uint8ClampedArray&&"height"in x&&"width"in x)return"RGBA";if(he(x))for(Ce in r)for(_e=r[Ce],D=0;D<_e.length;D+=1){for(Te=!0,te=0;te<_e[D].length;te+=1)if(_e[D][te]!==void 0&&_e[D][te]!==x[te]){Te=!1;break}if(Te===!0){fe=Ce;break}}else for(Ce in r)for(_e=r[Ce],D=0;D<_e.length;D+=1){for(Te=!0,te=0;te<_e[D].length;te+=1)if(_e[D][te]!==void 0&&_e[D][te]!==x.charCodeAt(te)){Te=!1;break}if(Te===!0){fe=Ce;break}}return fe===t&&A!==t&&(fe=A),fe},o=function x(A){for(var D=this.internal.write,te=this.internal.putStream,_e=(0,this.internal.getFilters)();_e.indexOf("FlateEncode")!==-1;)_e.splice(_e.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var Te=[];if(Te.push({key:"Type",value:"/XObject"}),Te.push({key:"Subtype",value:"/Image"}),Te.push({key:"Width",value:A.width}),Te.push({key:"Height",value:A.height}),A.colorSpace===N.INDEXED?Te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(Te.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===N.DEVICE_CMYK&&Te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Te.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&Te.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)&&A.transparency.length>0){for(var Ce="",fe=0,Ae=A.transparency.length;fe<Ae;fe++)Ce+=A.transparency[fe]+" "+A.transparency[fe]+" ";Te.push({key:"Mask",value:"["+Ce+"]"})}A.sMask!==void 0&&Te.push({key:"SMask",value:A.objectId+1+" 0 R"});var Be=A.filter!==void 0?["/"+A.filter]:void 0;if(te({data:A.data,additionalKeyValues:Te,alreadyAppliedFilters:Be,objectId:A.objectId}),D("endobj"),"sMask"in A&&A.sMask!==void 0){var Fe,O=(Fe=A.sMaskBitsPerComponent)!==null&&Fe!==void 0?Fe:A.bitsPerComponent,G={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:A.sMask};"filter"in A&&(G.decodeParameters="/Predictor ".concat(A.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(A.width),G.filter=A.filter),x.call(this,G)}if(A.colorSpace===N.INDEXED){var J=this.internal.newObject();te({data:M(new Uint8Array(A.palette)),objectId:J}),D("endobj")}},s=function(){var x=this.internal.collections[e+"images"];for(var A in x)o.call(this,x[A])},a=function(){var x,A=this.internal.collections[e+"images"],D=this.internal.write;for(var te in A)D("/I"+(x=A[te]).index,x.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var x=this.internal.collections[e+"images"];return c.call(this),x},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},h=function(x){return typeof n["process"+x.toUpperCase()]=="function"},m=function(x){return Un(x)==="object"&&x.nodeType===1},g=function(x,A){if(x.nodeName==="IMG"&&x.hasAttribute("src")){var D=""+x.getAttribute("src");if(D.indexOf("data:image/")===0)return $C(unescape(D).split("base64,").pop());var te=n.loadFile(D,!0);if(te!==void 0)return te}if(x.nodeName==="CANVAS"){if(x.width===0||x.height===0)throw new Error("Given canvas must have data. Canvas width: "+x.width+", height: "+x.height);var _e;switch(A){case"PNG":_e="image/png";break;case"WEBP":_e="image/webp";break;default:_e="image/jpeg"}return $C(x.toDataURL(_e,1).split("base64,").pop())}},b=function(x){var A=this.internal.collections[e+"images"];if(A){for(var D in A)if(x===A[D].alias)return A[D]}},I=function(x,A,D){return x||A||(x=-96,A=-96),x<0&&(x=-1*D.width*72/x/this.internal.scaleFactor),A<0&&(A=-1*D.height*72/A/this.internal.scaleFactor),x===0&&(x=A*D.width/D.height),A===0&&(A=x*D.height/D.width),[x,A]},T=function(x,A,D,te,_e,Te){var Ce=I.call(this,D,te,_e),fe=this.internal.getCoordinateString,Ae=this.internal.getVerticalCoordinateString,Be=l.call(this);if(D=Ce[0],te=Ce[1],Be[_e.index]=_e,Te){Te*=Math.PI/180;var Fe=Math.cos(Te),O=Math.sin(Te),G=function(ie){return ie.toFixed(4)},J=[G(Fe),G(O),G(-1*O),G(Fe),0,0,"cm"]}this.internal.write("q"),Te?(this.internal.write([1,"0","0",1,fe(x),Ae(A+te),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([fe(D),"0","0",fe(te),"0","0","cm"].join(" "))):this.internal.write([fe(D),"0","0",fe(te),fe(x),Ae(A+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+_e.index+" Do"),this.internal.write("Q")},N=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Y=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=n.__addimage__.sHashCode=function(x){var A,D,te=0;if(typeof x=="string")for(D=x.length,A=0;A<D;A++)te=(te<<5)-te+x.charCodeAt(A),te|=0;else if(he(x))for(D=x.byteLength/2,A=0;A<D;A++)te=(te<<5)-te+x[A],te|=0;return te},W=n.__addimage__.validateStringAsBase64=function(x){(x=x||"").toString().trim();var A=!0;return x.length===0&&(A=!1),x.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(x.substr(0,x.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(x.substr(-2))===!1&&(A=!1),A},oe=n.__addimage__.extractImageFromDataUrl=function(x){if(x==null||!(x=x.trim()).startsWith("data:"))return null;var A=x.indexOf(",");return A<0?null:x.substring(0,A).trim().endsWith("base64")?x.substring(A+1):null};n.__addimage__.isArrayBuffer=function(x){return x instanceof ArrayBuffer};var he=n.__addimage__.isArrayBufferView=function(x){return x instanceof Int8Array||x instanceof Uint8Array||x instanceof Uint8ClampedArray||x instanceof Int16Array||x instanceof Uint16Array||x instanceof Int32Array||x instanceof Uint32Array||x instanceof Float32Array||x instanceof Float64Array},z=n.__addimage__.binaryStringToUint8Array=function(x){for(var A=x.length,D=new Uint8Array(A),te=0;te<A;te++)D[te]=x.charCodeAt(te);return D},M=n.__addimage__.arrayBufferToBinaryString=function(x){for(var A="",D=he(x)?x:new Uint8Array(x),te=0;te<D.length;te+=8192)A+=String.fromCharCode.apply(null,D.subarray(te,te+8192));return A};n.addImage=function(){var x,A,D,te,_e,Te,Ce,fe,Ae;if(typeof arguments[1]=="number"?(A=t,D=arguments[1],te=arguments[2],_e=arguments[3],Te=arguments[4],Ce=arguments[5],fe=arguments[6],Ae=arguments[7]):(A=arguments[1],D=arguments[2],te=arguments[3],_e=arguments[4],Te=arguments[5],Ce=arguments[6],fe=arguments[7],Ae=arguments[8]),Un(x=arguments[0])==="object"&&!m(x)&&"imageData"in x){var Be=x;x=Be.imageData,A=Be.format||A||t,D=Be.x||D||0,te=Be.y||te||0,_e=Be.w||Be.width||_e,Te=Be.h||Be.height||Te,Ce=Be.alias||Ce,fe=Be.compression||fe,Ae=Be.rotation||Be.angle||Ae}var Fe=this.internal.getFilters();if(fe===void 0&&Fe.indexOf("FlateEncode")!==-1&&(fe="SLOW"),isNaN(D)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var O=S.call(this,x,A,Ce,fe);return T.call(this,D,te,_e,Te,O,Ae),this};var S=function(x,A,D,te){var _e,Te,Ce;if(typeof x=="string"&&i(x)===t){x=unescape(x);var fe=V(x,!1);(fe!==""||(fe=n.loadFile(x,!0))!==void 0)&&(x=fe)}if(m(x)&&(x=g(x,A)),A=i(x,A),!h(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((Ce=D)==null||Ce.length===0)&&(D=(function(Ae){return typeof Ae=="string"||he(Ae)?j(Ae):he(Ae.data)?j(Ae.data):null})(x)),(_e=b.call(this,D))||(x instanceof Uint8Array||A==="RGBA"||(Te=x,x=z(x)),_e=this["process"+A.toUpperCase()](x,u.call(this),D,(function(Ae){return Ae&&typeof Ae=="string"&&(Ae=Ae.toUpperCase()),Ae in n.image_compression?Ae:Y.NONE})(te),Te)),!_e)throw new Error("An unknown error occurred whilst processing the image.");return _e},V=n.__addimage__.convertBase64ToBinaryString=function(x,A){A=typeof A!="boolean"||A;var D,te="";if(typeof x=="string"){var _e;D=(_e=oe(x))!==null&&_e!==void 0?_e:x;try{te=$C(D)}catch(Te){if(A)throw W(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};n.getImageProperties=function(x){var A,D,te="";if(m(x)&&(x=g(x)),typeof x=="string"&&i(x)===t&&((te=V(x,!1))===""&&(te=n.loadFile(x)||""),x=te),D=i(x),!h(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(x instanceof Uint8Array||(x=z(x)),!(A=this["process"+D.toUpperCase()](x)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=D,A}})(St.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};St.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,u=!1,h=0;h<l.length&&!u;h++)switch((r=l[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<l.length;m++){r=l[m];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(I.objId),Y=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(N(r.contents))+")",o+=" /Popup "+T.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+g(N(Y))+") >>",I.content=o;var j=I.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(o+=" /Open true"),o+=" >>",T.content=o,this.internal.write(I.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var W=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(b(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var oe=this.annotations._nameMap[r.options.name];r.options.pageNumber=oe.page,r.options.top=oe.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var he=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+he+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(t),y:l(r),w:c(t+i),h:l(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,c=this.getTextWidth(t),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var u=this.splitTextToSize(t,a).length;s=Math.ceil(l*u)}else a=c,s=l;return this.text(t,r,i,o),i+=.2*l,o.align==="center"&&(r-=c/2),o.align==="right"&&(r-=c),this.link(r,i-l,a,s,o),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(St.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(I){return e[I.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},a=n.__arabicParser__.isArabicEndLetter=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(I){return s(I)&&i.indexOf(I.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length>=1};var l=n.__arabicParser__.arabicLetterHasFinalForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(I){return s(I)&&o(I)&&e[I.charCodeAt(0)].length==4},h=n.__arabicParser__.resolveLigatures=function(I){var T=0,N=t,Y="",j=0;for(T=0;T<I.length;T+=1)N[I.charCodeAt(T)]!==void 0?(j++,typeof(N=N[I.charCodeAt(T)])=="number"&&(Y+=String.fromCharCode(N),N=t,j=0),T===I.length-1&&(N=t,Y+=I.charAt(T-(j-1)),T-=j-1,j=0)):(N=t,Y+=I.charAt(T-j),T-=j,j=0);return Y};n.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&r[I.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(I,T,N){return s(I)?o(I)===!1?-1:!l(I)||!s(T)&&!s(N)||!s(N)&&a(T)||a(I)&&!s(T)||a(I)&&c(T)||a(I)&&a(T)?0:u(I)&&s(T)&&!a(T)&&s(N)&&l(N)?3:a(I)||!s(N)?1:2:-1},g=function(I){var T=0,N=0,Y=0,j="",W="",oe="",he=(I=I||"").split("\\s+"),z=[];for(T=0;T<he.length;T+=1){for(z.push(""),N=0;N<he[T].length;N+=1)j=he[T][N],W=he[T][N-1],oe=he[T][N+1],s(j)?(Y=m(j,W,oe),z[T]+=Y!==-1?String.fromCharCode(e[j.charCodeAt(0)][Y]):j):z[T]+=j;z[T]=h(z[T])}return z.join(" ")},b=n.__arabicParser__.processArabic=n.processArabic=function(){var I,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(T)){var Y=0;for(N=[],Y=0;Y<T.length;Y+=1)Array.isArray(T[Y])?N.push([g(T[Y][0]),T[Y][1],T[Y][2]]):N.push([g(T[Y])]);I=N}else I=g(T);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};n.events.push(["preProcessText",b])})(St.API),St.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(St.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(I){c=I}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(I){l=I}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(I){u=I}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(I){h=I}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(I){m=I}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(I){g=I}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(I){b=I}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,l){r.call(this);var u=(l=l||{}).fontSize||this.getFontSize(),h=l.font||this.getFont(),m=l.scaleFactor||this.internal.scaleFactor,g=0,b=0,I=0,T=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var N=l.maxWidth;N>0?typeof c=="string"?c=this.splitTextToSize(c,N):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,W){return j.concat(T.splitTextToSize(W,N))},[])):c=Array.isArray(c)?c:[c];for(var Y=0;Y<c.length;Y++)g<(I=this.getStringUnitWidth(c[Y],{font:h})*u)&&(g=I);return g!==0&&(b=c.length),{w:g/=m,h:Math.max((b*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var l=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===c.lineNumber?(c.x=(l.x||0)+(l.width||0),c.y=l.y||0):l.y+l.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,g&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=l.y+l.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};n.table=function(c,l,u,h,m){if(r.call(this),!u)throw new Error("No data for PDF table.");var g,b,I,T,N=[],Y=[],j=[],W={},oe={},he=[],z=[],M=(m=m||{}).autoSize||!1,S=m.printHeaders!==!1,V=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,x=m.margins||Object.assign({width:this.getPageWidth()},e),A=typeof m.padding=="number"?m.padding:3,D=m.headerBackgroundColor||"#c8c8c8",te=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=x,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=te,this.setFontSize(V),h==null)Y=N=Object.keys(u[0]),j=N.map(function(){return"left"});else if(Array.isArray(h)&&Un(h[0])==="object")for(N=h.map(function(Be){return Be.name}),Y=h.map(function(Be){return Be.prompt||Be.name||""}),j=h.map(function(Be){return Be.align||"left"}),g=0;g<h.length;g+=1)oe[h[g].name]=.7499990551181103*h[g].width;else Array.isArray(h)&&typeof h[0]=="string"&&(Y=N=h,j=N.map(function(){return"left"}));if(M||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<N.length;g+=1){for(W[T=N[g]]=u.map(function(Be){return Be[T]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(Y[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=W[T],this.setFont(void 0,"normal"),I=0;I<b.length;I+=1)he.push(this.getTextDimensions(b[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);oe[T]=Math.max.apply(null,he)+A+A,he=[]}if(S){var _e={};for(g=0;g<N.length;g+=1)_e[N[g]]={},_e[N[g]].text=Y[g],_e[N[g]].align=j[g];var Te=a.call(this,_e,oe);z=N.map(function(Be){return new o(c,l,oe[Be],Te,_e[Be].text,void 0,_e[Be].align)}),this.setTableHeaderRow(z),this.printHeaderRow(1,!1)}var Ce=h.reduce(function(Be,Fe){return Be[Fe.name]=Fe.align,Be},{});for(g=0;g<u.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:u[g]},this);var fe=a.call(this,u[g],oe);for(I=0;I<N.length;I+=1){var Ae=u[g][N[I]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:I,data:Ae},this),s.call(this,new o(c,l,oe[N[I]],fe,Ae,g+2,Ce[N[I]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=l,this};var a=function(c,l){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(g){var b=c[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,l[g]-u-u)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/m+u+u},this).reduce(function(g,b){return Math.max(g,b)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,l){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){u=this.internal.__cell__.tableHeaderRow[g].clone(),l&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}})(St.API);var qz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Hz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Vk=zz(Hz),$z=[100,200,300,400,500,600,700,800,900],Rle=zz($z);function Nk(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return qz[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof Vk[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function yz(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Ole={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_z={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function wz(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function bz(n){return n.trimLeft()}function Fle(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Lle(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var qC,xz,Cz,Om,HC,Ez,Iz,Sz,Pk=["times"];function Az(n,e,t,r,i){var o=4,s=Tz;switch(i){case St.API.image_compression.FAST:o=1,s=Dz;break;case St.API.image_compression.MEDIUM:o=6,s=Mz;break;case St.API.image_compression.SLOW:o=9,s=Nz}n=(function(c,l,u,h){for(var m,g=c.length/l,b=new Uint8Array(c.length+g),I=[Vle,Dz,Tz,Mz,Nz],T=0;T<g;T+=1){var N=T*l,Y=c.subarray(N,N+l);if(h)b.set(h(Y,u,m),N+T);else{for(var j=I.length,W=[],oe=0;oe<j;oe+=1)W[oe]=I[oe](Y,u,m);var he=Ble(W.concat());b.set(W[he],N+T)}m=Y}return b})(n,e,Math.ceil(t*r/8),s);var a=_C(n,{level:o});return St.API.__addimage__.arrayBufferToBinaryString(a)}function Vle(n){var e=Array.apply([],n);return e.unshift(0),e}function Dz(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function Tz(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var s=t&&t[o]||0;i[o+1]=n[o]-s+256&255}return i}function Mz(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var s=n[o-e]||0,a=t&&t[o]||0;i[o+1]=n[o]+256-(s+a>>>1)&255}return i}function Nz(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var s=jle(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-s+256&255}return i}function jle(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function Ble(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function kk(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),s=(1<<t)-1;return Gz(n,i)>>o&s}function Pz(n,e,t,r){var i=t*r,o=Math.floor(i/8),s=16-(i-8*o+r),a=(1<<r)-1,c=(e&a)<<s;(function(l,u,h){if(u+1<l.byteLength)l.setUint16(u,h,!1);else{var m=h>>8&255;l.setUint8(u,m)}})(n,o,Gz(n,o)&~(a<<s)&65535|c)}function Gz(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function Ule(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<1+(7&i);n[e++],n[e++];var a=null,c=null;o&&(a=e,c=s,e+=3*s);var l=!0,u=[],h=0,m=null,g=0,b=null;for(this.width=t,this.height=r;l&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,b=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((x=n[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var I=n[e++];h=n[e++]|n[e++]<<8,m=n[e++],1&I||(m=null),g=I>>2&7,e++;break;case 254:for(;;){if(!((x=n[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var T=n[e++]|n[e++]<<8,N=n[e++]|n[e++]<<8,Y=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,W=n[e++],oe=W>>6&1,he=1<<1+(7&W),z=a,M=c,S=!1;W>>7&&(S=!0,z=e,M=he,e+=3*he);var V=e;for(e++;;){var x;if(!((x=n[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}u.push({x:T,y:N,width:Y,height:j,has_local_palette:S,palette_offset:z,palette_size:M,data_offset:V,data_length:e-V,transparent_index:m,interlaced:!!oe,delay:h,disposal:g});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return b},this.frameInfo=function(A){if(A<0||A>=u.length)throw new Error("Frame index out of range.");return u[A]},this.decodeAndBlitFrameBGRA=function(A,D){var te=this.frameInfo(A),_e=te.width*te.height,Te=new Uint8Array(_e);kz(n,te.data_offset,Te,_e);var Ce=te.palette_offset,fe=te.transparent_index;fe===null&&(fe=256);var Ae=te.width,Be=t-Ae,Fe=Ae,O=4*(te.y*t+te.x),G=4*((te.y+te.height)*t+te.x),J=O,ie=4*Be;te.interlaced===!0&&(ie+=4*t*7);for(var ae=8,pe=0,Se=Te.length;pe<Se;++pe){var ye=Te[pe];if(Fe===0&&(Fe=Ae,(J+=ie)>=G&&(ie=4*Be+4*t*(ae-1),J=O+(Ae+Be)*(ae<<1),ae>>=1)),ye===fe)J+=4;else{var Me=n[Ce+3*ye],Ue=n[Ce+3*ye+1],et=n[Ce+3*ye+2];D[J++]=et,D[J++]=Ue,D[J++]=Me,D[J++]=255}--Fe}},this.decodeAndBlitFrameRGBA=function(A,D){var te=this.frameInfo(A),_e=te.width*te.height,Te=new Uint8Array(_e);kz(n,te.data_offset,Te,_e);var Ce=te.palette_offset,fe=te.transparent_index;fe===null&&(fe=256);var Ae=te.width,Be=t-Ae,Fe=Ae,O=4*(te.y*t+te.x),G=4*((te.y+te.height)*t+te.x),J=O,ie=4*Be;te.interlaced===!0&&(ie+=4*t*7);for(var ae=8,pe=0,Se=Te.length;pe<Se;++pe){var ye=Te[pe];if(Fe===0&&(Fe=Ae,(J+=ie)>=G&&(ie=4*Be+4*t*(ae-1),J=O+(Ae+Be)*(ae<<1),ae>>=1)),ye===fe)J+=4;else{var Me=n[Ce+3*ye],Ue=n[Ce+3*ye+1],et=n[Ce+3*ye+2];D[J++]=Me,D[J++]=Ue,D[J++]=et,D[J++]=255}--Fe}}}function kz(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,c=i+1,l=(1<<c)-1,u=0,h=0,m=0,g=n[e++],b=new Int32Array(4096),I=null;;){for(;u<16&&g!==0;)h|=n[e++]<<u,u+=8,g===1?g=n[e++]:--g;if(u<c)break;var T=h&l;if(h>>=c,u-=c,T!==o){if(T===s)break;for(var N=T<a?T:I,Y=0,j=N;j>o;)j=b[j]>>8,++Y;var W=j;if(m+Y+(N!==T?1:0)>r)return void dr.log("Warning, gif stream longer than expected.");t[m++]=W;var oe=m+=Y;for(N!==T&&(t[m++]=W),j=N;Y--;)j=b[j],t[--oe]=255&j,j>>=8;I!==null&&a<4096&&(b[a++]=I<<8|W,a>=l+1&&c<12&&(++c,l=l<<1|1)),I=T}else a=s+1,l=(1<<(c=i+1))-1,I=null}return m!==r&&dr.log("Warning, gif stream shorter than expected."),t}function Rk(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),g=new Array(64),b=new Array(64),I=[],T=0,N=7,Y=new Array(64),j=new Array(64),W=new Array(64),oe=new Array(256),he=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],x=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],_e=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Te(O,G){for(var J=0,ie=0,ae=new Array,pe=1;pe<=16;pe++){for(var Se=1;Se<=O[pe];Se++)ae[G[ie]]=[],ae[G[ie]][0]=J,ae[G[ie]][1]=pe,ie++,J++;J*=2}return ae}function Ce(O){for(var G=O[0],J=O[1]-1;J>=0;)G&1<<J&&(T|=1<<N),J--,--N<0&&(T==255?(fe(255),fe(0)):fe(T),N=7,T=0)}function fe(O){I.push(O)}function Ae(O){fe(O>>8&255),fe(255&O)}function Be(O,G,J,ie,ae){for(var pe,Se=ae[0],ye=ae[240],Me=(function(qe,At){var st,yt,Et,vn,Qt,zt,Lt,Vt,mt,Xt,It=0;for(mt=0;mt<8;++mt){st=qe[It],yt=qe[It+1],Et=qe[It+2],vn=qe[It+3],Qt=qe[It+4],zt=qe[It+5],Lt=qe[It+6];var Pr=st+(Vt=qe[It+7]),yn=st-Vt,an=yt+Lt,cn=yt-Lt,Xn=Et+zt,kt=Et-zt,Jn=vn+Qt,Bt=vn-Qt,Zt=Pr+Jn,sr=Pr-Jn,tn=an+Xn,jt=an-Xn;qe[It]=Zt+tn,qe[It+4]=Zt-tn;var Sn=.707106781*(jt+sr);qe[It+2]=sr+Sn,qe[It+6]=sr-Sn;var No=.382683433*((Zt=Bt+kt)-(jt=cn+yn)),xi=.5411961*Zt+No,rs=1.306562965*jt+No,Is=.707106781*(tn=kt+cn),Pt=yn+Is,oa=yn-Is;qe[It+5]=oa+xi,qe[It+3]=oa-xi,qe[It+1]=Pt+rs,qe[It+7]=Pt-rs,It+=8}for(It=0,mt=0;mt<8;++mt){st=qe[It],yt=qe[It+8],Et=qe[It+16],vn=qe[It+24],Qt=qe[It+32],zt=qe[It+40],Lt=qe[It+48];var vr=st+(Vt=qe[It+56]),Po=st-Vt,Vi=yt+Lt,er=yt-Lt,di=Et+zt,Ci=Et-zt,is=vn+Qt,Cc=vn-Qt,Ss=vr+is,ko=vr-is,os=Vi+di,Ro=Vi-di;qe[It]=Ss+os,qe[It+32]=Ss-os;var Gi=.707106781*(Ro+ko);qe[It+16]=ko+Gi,qe[It+48]=ko-Gi;var fo=.382683433*((Ss=Cc+Ci)-(Ro=er+Po)),As=.5411961*Ss+fo,Ec=1.306562965*Ro+fo,Ic=.707106781*(os=Ci+er),Sc=Po+Ic,Il=Po-Ic;qe[It+40]=Il+As,qe[It+24]=Il-As,qe[It+8]=Sc+Ec,qe[It+56]=Sc-Ec,It++}for(mt=0;mt<64;++mt)Xt=qe[mt]*At[mt],g[mt]=Xt>0?Xt+.5|0:Xt-.5|0;return g})(O,G),Ue=0;Ue<64;++Ue)b[z[Ue]]=Me[Ue];var et=b[0]-J;J=b[0],et==0?Ce(ie[0]):(Ce(ie[m[pe=32767+et]]),Ce(h[pe]));for(var We=63;We>0&&b[We]==0;)We--;if(We==0)return Ce(Se),J;for(var ot,$=1;$<=We;){for(var Ke=$;b[$]==0&&$<=We;)++$;var Ft=$-Ke;if(Ft>=16){ot=Ft>>4;for(var Ct=1;Ct<=ot;++Ct)Ce(ye);Ft&=15}pe=32767+b[$],Ce(ae[(Ft<<4)+m[pe]]),Ce(h[pe]),$++}return We!=63&&Ce(Se),J}function Fe(O){O=Math.min(Math.max(O,1),100),o!=O&&((function(G){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var ae=s((J[ie]*G+50)/100);ae=Math.min(Math.max(ae,1),255),a[z[ie]]=ae}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Se=0;Se<64;Se++){var ye=s((pe[Se]*G+50)/100);ye=Math.min(Math.max(ye,1),255),c[z[Se]]=ye}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ue=0,et=0;et<8;et++)for(var We=0;We<8;We++)l[Ue]=1/(a[z[Ue]]*Me[et]*Me[We]*8),u[Ue]=1/(c[z[Ue]]*Me[et]*Me[We]*8),Ue++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),o=O)}this.encode=function(O,G){G&&Fe(G),I=new Array,T=0,N=7,Ae(65496),Ae(65504),Ae(16),fe(74),fe(70),fe(73),fe(70),fe(0),fe(1),fe(1),fe(0),Ae(1),Ae(1),fe(0),fe(0),(function(){Ae(65499),Ae(132),fe(0);for(var yt=0;yt<64;yt++)fe(a[yt]);fe(1);for(var Et=0;Et<64;Et++)fe(c[Et])})(),(function(yt,Et){Ae(65472),Ae(17),fe(8),Ae(Et),Ae(yt),fe(3),fe(1),fe(17),fe(0),fe(2),fe(17),fe(1),fe(3),fe(17),fe(1)})(O.width,O.height),(function(){Ae(65476),Ae(418),fe(0);for(var yt=0;yt<16;yt++)fe(M[yt+1]);for(var Et=0;Et<=11;Et++)fe(S[Et]);fe(16);for(var vn=0;vn<16;vn++)fe(V[vn+1]);for(var Qt=0;Qt<=161;Qt++)fe(x[Qt]);fe(1);for(var zt=0;zt<16;zt++)fe(A[zt+1]);for(var Lt=0;Lt<=11;Lt++)fe(D[Lt]);fe(17);for(var Vt=0;Vt<16;Vt++)fe(te[Vt+1]);for(var mt=0;mt<=161;mt++)fe(_e[mt])})(),Ae(65498),Ae(12),fe(3),fe(1),fe(0),fe(2),fe(17),fe(3),fe(17),fe(0),fe(63),fe(0);var J=0,ie=0,ae=0;T=0,N=7,this.encode.displayName="_encode_";for(var pe,Se,ye,Me,Ue,et,We,ot,$,Ke=O.data,Ft=O.width,Ct=O.height,qe=4*Ft,At=0;At<Ct;){for(pe=0;pe<qe;){for(Ue=qe*At+pe,We=-1,ot=0,$=0;$<64;$++)et=Ue+(ot=$>>3)*qe+(We=4*(7&$)),At+ot>=Ct&&(et-=qe*(At+1+ot-Ct)),pe+We>=qe&&(et-=pe+We-qe+4),Se=Ke[et++],ye=Ke[et++],Me=Ke[et++],Y[$]=(he[Se]+he[ye+256|0]+he[Me+512|0]>>16)-128,j[$]=(he[Se+768|0]+he[ye+1024|0]+he[Me+1280|0]>>16)-128,W[$]=(he[Se+1280|0]+he[ye+1536|0]+he[Me+1792|0]>>16)-128;J=Be(Y,l,J,e,r),ie=Be(j,u,ie,t,i),ae=Be(W,u,ae,t,i),pe+=32}At+=8}if(N>=0){var st=[];st[1]=N+1,st[0]=(1<<N+1)-1,Ce(st)}return Ae(65497),new Uint8Array(I)},n=n||50,(function(){for(var O=String.fromCharCode,G=0;G<256;G++)oe[G]=O(G)})(),e=Te(M,S),t=Te(A,D),r=Te(V,x),i=Te(te,_e),(function(){for(var O=1,G=2,J=1;J<=15;J++){for(var ie=O;ie<G;ie++)m[32767+ie]=J,h[32767+ie]=[],h[32767+ie][1]=J,h[32767+ie][0]=ie;for(var ae=-(G-1);ae<=-O;ae++)m[32767+ae]=J,h[32767+ae]=[],h[32767+ae][1]=J,h[32767+ae][0]=G-1+ae;O<<=1,G<<=1}})(),(function(){for(var O=0;O<256;O++)he[O]=19595*O,he[O+256|0]=38470*O,he[O+512|0]=7471*O+32768,he[O+768|0]=-11059*O,he[O+1024|0]=-21709*O,he[O+1280|0]=32768*O+8421375,he[O+1536|0]=-27439*O,he[O+1792|0]=-5329*O})(),Fe(n)}function _c(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Rz(n){function e(S){if(!S)throw Error("assert :P")}function t(S,V,x){for(var A=0;4>A;A++)if(S[V+A]!=x.charCodeAt(A))return!0;return!1}function r(S,V,x,A,D){for(var te=0;te<D;te++)S[V+te]=x[A+te]}function i(S,V,x,A){for(var D=0;D<A;D++)S[V+D]=x}function o(S){return new Int32Array(S)}function s(S,V){for(var x=[],A=0;A<S;A++)x.push(new V);return x}function a(S,V){var x=[];return(function A(D,te,_e){for(var Te=_e[te],Ce=0;Ce<Te&&(D.push(_e.length>te+1?[]:new V),!(_e.length<te+1));Ce++)A(D[Ce],te+1,_e)})(x,0,S),x}var c=function(){var S=this;function V(d,p){for(var y=1<<p-1>>>0;d&y;)y>>>=1;return y?(d&y-1)+y:d}function x(d,p,y,w,R){e(!(w%y));do d[p+(w-=y)]=R;while(0<w)}function A(d,p,y,w,R){if(e(2328>=R),512>=R)var F=o(512);else if((F=o(R))==null)return 0;return(function(L,U,H,Z,se,ve){var X,ce,ge=U,Pe=1<<H,me=o(16),Re=o(16);for(e(se!=0),e(Z!=null),e(L!=null),e(0<H),ce=0;ce<se;++ce){if(15<Z[ce])return 0;++me[Z[ce]]}if(me[0]==se)return 0;for(Re[1]=0,X=1;15>X;++X){if(me[X]>1<<X)return 0;Re[X+1]=Re[X]+me[X]}for(ce=0;ce<se;++ce)X=Z[ce],0<Z[ce]&&(ve[Re[X]++]=ce);if(Re[15]==1)return(Z=new D).g=0,Z.value=ve[0],x(L,ge,1,Pe,Z),Pe;var Le,Ge=-1,He=Pe-1,Dt=0,pt=1,hn=1,bt=1<<H;for(ce=0,X=1,se=2;X<=H;++X,se<<=1){if(pt+=hn<<=1,0>(hn-=me[X]))return 0;for(;0<me[X];--me[X])(Z=new D).g=X,Z.value=ve[ce++],x(L,ge+Dt,se,bt,Z),Dt=V(Dt,X)}for(X=H+1,se=2;15>=X;++X,se<<=1){if(pt+=hn<<=1,0>(hn-=me[X]))return 0;for(;0<me[X];--me[X]){if(Z=new D,(Dt&He)!=Ge){for(ge+=bt,Le=1<<(Ge=X)-H;15>Ge&&!(0>=(Le-=me[Ge]));)++Ge,Le<<=1;Pe+=bt=1<<(Le=Ge-H),L[U+(Ge=Dt&He)].g=Le+H,L[U+Ge].value=ge-U-Ge}Z.g=X-H,Z.value=ve[ce++],x(L,ge+(Dt>>H),se,bt,Z),Dt=V(Dt,X)}}return pt!=2*Re[15]-1?0:Pe})(d,p,y,w,R,F)}function D(){this.value=this.g=0}function te(){this.value=this.g=0}function _e(){this.G=s(5,D),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(_f,te)}function Te(d,p,y,w){e(d!=null),e(p!=null),e(2147483648>w),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=p,d.pa=y,d.Jd=p,d.Yc=y+w,d.Zc=4<=w?y+w-4+1:y,Se(d)}function Ce(d,p){for(var y=0;0<p--;)y|=Me(d,128)<<p;return y}function fe(d,p){var y=Ce(d,p);return ye(d)?-y:y}function Ae(d,p,y,w){var R,F=0;for(e(d!=null),e(p!=null),e(4294967288>w),d.Sb=w,d.Ra=0,d.u=0,d.h=0,4<w&&(w=4),R=0;R<w;++R)F+=p[y+R]<<8*R;d.Ra=F,d.bb=w,d.oa=p,d.pa=y}function Be(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<ku-8>>>0,++d.bb,d.u-=8;ie(d)&&(d.h=1,d.u=0)}function Fe(d,p){if(e(0<=p),!d.h&&p<=Rs){var y=J(d)&ks[p];return d.u+=p,Be(d),y}return d.h=1,d.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(d){return d.Ra>>>(d.u&ku-1)>>>0}function ie(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>ku}function ae(d,p){d.u=p,d.h=ie(d)}function pe(d){d.u>=Ol&&(e(d.u>=Ol),Be(d))}function Se(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function ye(d){return Ce(d,1)}function Me(d,p){var y=d.Ca;0>d.b&&Se(d);var w=d.b,R=y*p>>>8,F=(d.I>>>w>R)+0;for(F?(y-=R,d.I-=R+1<<w>>>0):y=R+1,w=y,R=0;256<=w;)R+=8,w>>=8;return w=7^R+Ru[w],d.b-=w,d.Ca=(y<<w)-1,F}function Ue(d,p,y){d[p+0]=y>>24&255,d[p+1]=y>>16&255,d[p+2]=y>>8&255,d[p+3]=255&y}function et(d,p){return d[p+0]|d[p+1]<<8}function We(d,p){return et(d,p)|d[p+2]<<16}function ot(d,p){return et(d,p)|et(d,p+2)<<16}function $(d,p){var y=1<<p;return e(d!=null),e(0<p),d.X=o(y),d.X==null?0:(d.Mb=32-p,d.Xa=p,1)}function Ke(d,p){e(d!=null),e(p!=null),e(d.Xa==p.Xa),r(p.X,0,d.X,0,1<<p.Xa)}function Ft(){this.X=[],this.Xa=this.Mb=0}function Ct(d,p,y,w){e(y!=null),e(w!=null);var R=y[0],F=w[0];return R==0&&(R=(d*F+p/2)/p),F==0&&(F=(p*R+d/2)/d),0>=R||0>=F?0:(y[0]=R,w[0]=F,1)}function qe(d,p){return d+(1<<p)-1>>>p}function At(d,p){return((4278255360&d)+(4278255360&p)>>>0&4278255360)+((16711935&d)+(16711935&p)>>>0&16711935)>>>0}function st(d,p){S[p]=function(y,w,R,F,L,U,H){var Z;for(Z=0;Z<L;++Z){var se=S[d](U[H+Z-1],R,F+Z);U[H+Z]=At(y[w+Z],se)}}}function yt(){this.ud=this.hd=this.jd=0}function Et(d,p){return((4278124286&(d^p))>>>1)+(d&p)>>>0}function vn(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Qt(d,p){return vn(d+(d-p+.5>>1))}function zt(d,p,y){return Math.abs(p-y)-Math.abs(d-y)}function Lt(d,p,y,w,R,F,L){for(w=F[L-1],y=0;y<R;++y)F[L+y]=w=At(d[p+y],w)}function Vt(d,p,y,w,R){var F;for(F=0;F<y;++F){var L=d[p+F],U=L>>8&255,H=16711935&(H=(H=16711935&L)+((U<<16)+U));w[R+F]=(4278255360&L)+H>>>0}}function mt(d,p){p.jd=255&d,p.hd=d>>8&255,p.ud=d>>16&255}function Xt(d,p,y,w,R,F){var L;for(L=0;L<w;++L){var U=p[y+L],H=U>>>8,Z=U,se=255&(se=(se=U>>>16)+((d.jd<<24>>24)*(H<<24>>24)>>>5));Z=255&(Z=(Z+=(d.hd<<24>>24)*(H<<24>>24)>>>5)+((d.ud<<24>>24)*(se<<24>>24)>>>5)),R[F+L]=(4278255360&U)+(se<<16)+Z}}function It(d,p,y,w,R){S[p]=function(F,L,U,H,Z,se,ve,X,ce){for(H=ve;H<X;++H)for(ve=0;ve<ce;++ve)Z[se++]=R(U[w(F[L++])])},S[d]=function(F,L,U,H,Z,se,ve){var X=8>>F.b,ce=F.Ea,ge=F.K[0],Pe=F.w;if(8>X)for(F=(1<<F.b)-1,Pe=(1<<X)-1;L<U;++L){var me,Re=0;for(me=0;me<ce;++me)me&F||(Re=w(H[Z++])),se[ve++]=R(ge[Re&Pe]),Re>>=X}else S["VP8LMapColor"+y](H,Z,ge,Pe,se,ve,L,U,ce)}}function Pr(d,p,y,w,R){for(y=p+y;p<y;){var F=d[p++];w[R++]=F>>16&255,w[R++]=F>>8&255,w[R++]=255&F}}function yn(d,p,y,w,R){for(y=p+y;p<y;){var F=d[p++];w[R++]=F>>16&255,w[R++]=F>>8&255,w[R++]=255&F,w[R++]=F>>24&255}}function an(d,p,y,w,R){for(y=p+y;p<y;){var F=(L=d[p++])>>16&240|L>>12&15,L=240&L|L>>28&15;w[R++]=F,w[R++]=L}}function cn(d,p,y,w,R){for(y=p+y;p<y;){var F=(L=d[p++])>>16&248|L>>13&7,L=L>>5&224|L>>3&31;w[R++]=F,w[R++]=L}}function Xn(d,p,y,w,R){for(y=p+y;p<y;){var F=d[p++];w[R++]=255&F,w[R++]=F>>8&255,w[R++]=F>>16&255}}function kt(d,p,y,w,R,F){if(F==0)for(y=p+y;p<y;)Ue(w,((F=d[p++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),R+=32;else r(w,R,d,p,y)}function Jn(d,p){S[p][0]=S[d+"0"],S[p][1]=S[d+"1"],S[p][2]=S[d+"2"],S[p][3]=S[d+"3"],S[p][4]=S[d+"4"],S[p][5]=S[d+"5"],S[p][6]=S[d+"6"],S[p][7]=S[d+"7"],S[p][8]=S[d+"8"],S[p][9]=S[d+"9"],S[p][10]=S[d+"10"],S[p][11]=S[d+"11"],S[p][12]=S[d+"12"],S[p][13]=S[d+"13"],S[p][14]=S[d+"0"],S[p][15]=S[d+"0"]}function Bt(d){return d==FE||d==LE||d==o1||d==VE}function Zt(){this.eb=[],this.size=this.A=this.fb=0}function sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function tn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zt,this.f.kb=new sr,this.sd=null}function jt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Sn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function No(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function xi(d,p){var y=d.T,w=p.ba.f.RGBA,R=w.eb,F=w.fb+d.ka*w.A,L=ga[p.ba.S],U=d.y,H=d.O,Z=d.f,se=d.N,ve=d.ea,X=d.W,ce=p.cc,ge=p.dc,Pe=p.Mc,me=p.Nc,Re=d.ka,Le=d.ka+d.T,Ge=d.U,He=Ge+1>>1;for(Re==0?L(U,H,null,null,Z,se,ve,X,Z,se,ve,X,R,F,null,null,Ge):(L(p.ec,p.fc,U,H,ce,ge,Pe,me,Z,se,ve,X,R,F-w.A,R,F,Ge),++y);Re+2<Le;Re+=2)ce=Z,ge=se,Pe=ve,me=X,se+=d.Rc,X+=d.Rc,F+=2*w.A,L(U,(H+=2*d.fa)-d.fa,U,H,ce,ge,Pe,me,Z,se,ve,X,R,F-w.A,R,F,Ge);return H+=d.fa,d.j+Le<d.o?(r(p.ec,p.fc,U,H,Ge),r(p.cc,p.dc,Z,se,He),r(p.Mc,p.Nc,ve,X,He),y--):1&Le||L(U,H,null,null,Z,se,ve,X,Z,se,ve,X,R,F+w.A,null,null,Ge),y}function rs(d,p,y){var w=d.F,R=[d.J];if(w!=null){var F=d.U,L=p.ba.S,U=L==i1||L==o1;p=p.ba.f.RGBA;var H=[0],Z=d.ka;H[0]=d.T,d.Kb&&(Z==0?--H[0]:(--Z,R[0]-=d.width),d.j+d.ka+d.T==d.o&&(H[0]=d.o-d.j-Z));var se=p.eb;Z=p.fb+Z*p.A,d=pO(w,R[0],d.width,F,H,se,Z+(U?0:3),p.A),e(y==H),d&&Bt(L)&&w0(se,Z,U,F,H,p.A)}return 0}function Is(d){var p=d.ma,y=p.ba.S,w=11>y,R=y==n1||y==r1||y==i1||y==OE||y==12||Bt(y);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!Rl(p.Oa,d,R?11:12))return 0;if(R&&Bt(y)&&Nu(),d.da)alert("todo:use_scaling");else{if(w){if(p.Ib=No,d.Kb){if(y=d.U+1>>1,p.memory=o(d.U+2*y),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+d.U,p.Mc=p.cc,p.Nc=p.dc+y,p.Ib=xi,Nu()}}else alert("todo:EmitYUV");R&&(p.Jb=rs,w&&yr())}if(w&&!NO){for(d=0;256>d;++d)oG[d]=89858*(d-128)+a1>>s1,cG[d]=-22014*(d-128)+a1,aG[d]=-45773*(d-128),sG[d]=113618*(d-128)+a1>>s1;for(d=x0;d<UE;++d)p=76283*(d-16)+a1>>s1,lG[d-x0]=Ds(p,255),uG[d-x0]=Ds(p+8>>4,15);NO=1}return 1}function Pt(d){var p=d.ma,y=d.U,w=d.T;return e(!(1&d.ka)),0>=y||0>=w?0:(y=p.Ib(d,p),p.Jb!=null&&p.Jb(d,p,y),p.Dc+=y,1)}function oa(d){d.ma.memory=null}function vr(d,p,y,w){return Fe(d,8)!=47?0:(p[0]=Fe(d,14)+1,y[0]=Fe(d,14)+1,w[0]=Fe(d,1),Fe(d,3)!=0?0:!d.h)}function Po(d,p){if(4>d)return d+1;var y=d-2>>1;return(2+(1&d)<<y)+Fe(p,y)+1}function Vi(d,p){return 120<p?p-120:1<=(y=((y=$$[p-1])>>4)*d+(8-(15&y)))?y:1;var y}function er(d,p,y){var w=J(y),R=d[p+=255&w].g-8;return 0<R&&(ae(y,y.u+8),w=J(y),p+=d[p].value,p+=w&(1<<R)-1),ae(y,y.u+d[p].g),d[p].value}function di(d,p,y){return y.g+=d.g,y.value+=d.value<<p>>>0,e(8>=y.g),d.g}function Ci(d,p,y){var w=d.xc;return e((p=w==0?0:d.vc[d.md*(y>>w)+(p>>w)])<d.Wb),d.Ya[p]}function is(d,p,y,w){var R=d.ab,F=d.c*p,L=d.C;p=L+p;var U=y,H=w;for(w=d.Ta,y=d.Ua;0<R--;){var Z=d.gc[R],se=L,ve=p,X=U,ce=H,ge=(H=w,U=y,Z.Ea);switch(e(se<ve),e(ve<=Z.nc),Z.hc){case 2:Qr(X,ce,(ve-se)*ge,H,U);break;case 0:var Pe=se,me=ve,Re=H,Le=U,Ge=(bt=Z).Ea;Pe==0&&(p0(X,ce,null,null,1,Re,Le),Lt(X,ce+1,0,0,Ge-1,Re,Le+1),ce+=Ge,Le+=Ge,++Pe);for(var He=1<<bt.b,Dt=He-1,pt=qe(Ge,bt.b),hn=bt.K,bt=bt.w+(Pe>>bt.b)*pt;Pe<me;){var Cn=hn,Ii=bt,pn=1;for(lp(X,ce,Re,Le-Ge,1,Re,Le);pn<Ge;){var xt=(pn&~Dt)+He;xt>Ge&&(xt=Ge),(0,m0[Cn[Ii++]>>8&15])(X,ce+ +pn,Re,Le+pn-Ge,xt-pn,Re,Le+pn),pn=xt}ce+=Ge,Le+=Ge,++Pe&Dt||(bt+=pt)}ve!=Z.nc&&r(H,U-ge,H,U+(ve-se-1)*ge,ge);break;case 1:for(ge=X,me=ce,Ge=(X=Z.Ea)-(Le=X&~(Re=(ce=1<<Z.b)-1)),Pe=qe(X,Z.b),He=Z.K,Z=Z.w+(se>>Z.b)*Pe;se<ve;){for(Dt=He,pt=Z,hn=new yt,bt=me+Le,Cn=me+X;me<bt;)mt(Dt[pt++],hn),v0(hn,ge,me,ce,H,U),me+=ce,U+=ce;me<Cn&&(mt(Dt[pt++],hn),v0(hn,ge,me,Ge,H,U),me+=Ge,U+=Ge),++se&Re||(Z+=Pe)}break;case 3:if(X==H&&ce==U&&0<Z.b){for(me=H,X=ge=U+(ve-se)*ge-(Le=(ve-se)*qe(Z.Ea,Z.b)),ce=H,Re=U,Pe=[],Le=(Ge=Le)-1;0<=Le;--Le)Pe[Le]=ce[Re+Le];for(Le=Ge-1;0<=Le;--Le)me[X+Le]=Pe[Le];X_(Z,se,ve,H,ge,H,U)}else X_(Z,se,ve,X,ce,H,U)}U=w,H=y}H!=y&&r(w,y,U,H,F)}function Cc(d,p){var y=d.V,w=d.Ba+d.c*d.C,R=p-d.C;if(e(p<=d.l.o),e(16>=R),0<R){var F=d.l,L=d.Ta,U=d.Ua,H=F.width;if(is(d,R,y,w),R=U=[U],e((y=d.C)<(w=p)),e(F.v<F.va),w>F.o&&(w=F.o),y<F.j){var Z=F.j-y;y=F.j,R[0]+=Z*H}if(y>=w?y=0:(R[0]+=4*F.v,F.ka=y-F.j,F.U=F.va-F.v,F.T=w-y,y=1),y){if(U=U[0],11>(y=d.ca).S){var se=y.f.RGBA,ve=(w=y.S,R=F.U,F=F.T,Z=se.eb,se.A),X=F;for(se=se.fb+d.Ma*se.A;0<X--;){var ce=L,ge=U,Pe=R,me=Z,Re=se;switch(w){case t1:y0(ce,ge,Pe,me,Re);break;case n1:Ou(ce,ge,Pe,me,Re);break;case FE:Ou(ce,ge,Pe,me,Re),w0(me,Re,0,Pe,1,0);break;case bO:wf(ce,ge,Pe,me,Re);break;case r1:kt(ce,ge,Pe,me,Re,1);break;case LE:kt(ce,ge,Pe,me,Re,1),w0(me,Re,0,Pe,1,0);break;case i1:kt(ce,ge,Pe,me,Re,0);break;case o1:kt(ce,ge,Pe,me,Re,0),w0(me,Re,1,Pe,1,0);break;case OE:Fu(ce,ge,Pe,me,Re);break;case VE:Fu(ce,ge,Pe,me,Re),hO(me,Re,Pe,1,0);break;case xO:Lu(ce,ge,Pe,me,Re);break;default:e(0)}U+=H,se+=ve}d.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=y.height)}}d.C=p,e(d.C<=d.i)}function Ss(d){var p;if(0<d.ua)return 0;for(p=0;p<d.Wb;++p){var y=d.Ya[p].G,w=d.Ya[p].H;if(0<y[1][w[1]+0].g||0<y[2][w[2]+0].g||0<y[3][w[3]+0].g)return 0}return 1}function ko(d,p,y,w,R,F){if(d.Z!=0){var L=d.qd,U=d.rd;for(e(Bu[d.Z]!=null);p<y;++p)Bu[d.Z](L,U,w,R,w,R,F),L=w,U=R,R+=F;d.qd=L,d.rd=U}}function os(d,p){var y=d.l.ma,w=y.Z==0||y.Z==1?d.l.j:d.C;if(w=d.C<w?w:d.C,e(p<=d.l.o),p>w){var R=d.l.width,F=y.ca,L=y.tb+R*w,U=d.V,H=d.Ba+d.c*w,Z=d.gc;e(d.ab==1),e(Z[0].hc==3),Pc(Z[0],w,p,U,H,F,L),ko(y,w,p,F,L,R)}d.C=d.Ma=p}function Ro(d,p,y,w,R,F,L){var U=d.$/w,H=d.$%w,Z=d.m,se=d.s,ve=y+d.$,X=ve;R=y+w*R;var ce=y+w*F,ge=280+se.ua,Pe=d.Pb?U:16777216,me=0<se.ua?se.Wa:null,Re=se.wc,Le=ve<ce?Ci(se,H,U):null;e(d.C<F),e(ce<=R);var Ge=!1;e:for(;;){for(;Ge||ve<ce;){var He=0;if(U>=Pe){var Dt=ve-y;e((Pe=d).Pb),Pe.wd=Pe.m,Pe.xd=Dt,0<Pe.s.ua&&Ke(Pe.s.Wa,Pe.s.vb),Pe=U+W$}if(H&Re||(Le=Ci(se,H,U)),e(Le!=null),Le.Qb&&(p[ve]=Le.qb,Ge=!0),!Ge)if(pe(Z),Le.jc){He=Z,Dt=p;var pt=ve,hn=Le.pd[J(He)&_f-1];e(Le.jc),256>hn.g?(ae(He,He.u+hn.g),Dt[pt]=hn.value,He=0):(ae(He,He.u+hn.g-256),e(256<=hn.value),He=hn.value),He==0&&(Ge=!0)}else He=er(Le.G[0],Le.H[0],Z);if(Z.h)break;if(Ge||256>He){if(!Ge)if(Le.nd)p[ve]=(Le.qb|He<<8)>>>0;else{if(pe(Z),Ge=er(Le.G[1],Le.H[1],Z),pe(Z),Dt=er(Le.G[2],Le.H[2],Z),pt=er(Le.G[3],Le.H[3],Z),Z.h)break;p[ve]=(pt<<24|Ge<<16|He<<8|Dt)>>>0}if(Ge=!1,++ve,++H>=w&&(H=0,++U,L!=null&&U<=F&&!(U%16)&&L(d,U),me!=null))for(;X<ve;)He=p[X++],me.X[(506832829*He&4294967295)>>>me.Mb]=He}else if(280>He){if(He=Po(He-256,Z),Dt=er(Le.G[4],Le.H[4],Z),pe(Z),Dt=Vi(w,Dt=Po(Dt,Z)),Z.h)break;if(ve-y<Dt||R-ve<He)break e;for(pt=0;pt<He;++pt)p[ve+pt]=p[ve+pt-Dt];for(ve+=He,H+=He;H>=w;)H-=w,++U,L!=null&&U<=F&&!(U%16)&&L(d,U);if(e(ve<=R),H&Re&&(Le=Ci(se,H,U)),me!=null)for(;X<ve;)He=p[X++],me.X[(506832829*He&4294967295)>>>me.Mb]=He}else{if(!(He<ge))break e;for(Ge=He-280,e(me!=null);X<ve;)He=p[X++],me.X[(506832829*He&4294967295)>>>me.Mb]=He;He=ve,e(!(Ge>>>(Dt=me).Xa)),p[He]=Dt.X[Ge],Ge=!0}Ge||e(Z.h==ie(Z))}if(d.Pb&&Z.h&&ve<R)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Ke(d.s.vb,d.s.Wa);else{if(Z.h)break e;L?.(d,U>F?F:U),d.a=0,d.$=ve-y}return 1}return d.a=3,0}function Gi(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var p=d.Wa;p!=null&&(p.X=null),d.vb=null,e(d!=null)}function fo(){var d=new qt;return d==null?null:(d.a=0,d.xb=IO,Jn("Predictor","VP8LPredictors"),Jn("Predictor","VP8LPredictors_C"),Jn("PredictorAdd","VP8LPredictorsAdd"),Jn("PredictorAdd","VP8LPredictorsAdd_C"),Qr=Vt,v0=Xt,y0=Pr,Ou=yn,Fu=an,Lu=cn,wf=Xn,S.VP8LMapColor32b=Nc,S.VP8LMapColor8b=g0,d)}function As(d,p,y,w,R){var F=1,L=[d],U=[p],H=w.m,Z=w.s,se=null,ve=0;e:for(;;){if(y)for(;F&&Fe(H,1);){var X=L,ce=U,ge=w,Pe=1,me=ge.m,Re=ge.gc[ge.ab],Le=Fe(me,2);if(ge.Oc&1<<Le)F=0;else{switch(ge.Oc|=1<<Le,Re.hc=Le,Re.Ea=X[0],Re.nc=ce[0],Re.K=[null],++ge.ab,e(4>=ge.ab),Le){case 0:case 1:Re.b=Fe(me,3)+2,Pe=As(qe(Re.Ea,Re.b),qe(Re.nc,Re.b),0,ge,Re.K),Re.K=Re.K[0];break;case 3:var Ge,He=Fe(me,8)+1,Dt=16<He?0:4<He?1:2<He?2:3;if(X[0]=qe(Re.Ea,Dt),Re.b=Dt,Ge=Pe=As(He,1,0,ge,Re.K)){var pt,hn=He,bt=Re,Cn=1<<(8>>bt.b),Ii=o(Cn);if(Ii==null)Ge=0;else{var pn=bt.K[0],xt=bt.w;for(Ii[0]=bt.K[0][0],pt=1;pt<1*hn;++pt)Ii[pt]=At(pn[xt+pt],Ii[pt-1]);for(;pt<4*Cn;++pt)Ii[pt]=0;bt.K[0]=null,bt.K[0]=Ii,Ge=1}}Pe=Ge;break;case 2:break;default:e(0)}F=Pe}}if(L=L[0],U=U[0],F&&Fe(H,1)&&!(F=1<=(ve=Fe(H,4))&&11>=ve)){w.a=3;break e}var rt;if(rt=F)t:{var Xr,on,An,_r=w,Ki=L,Vo=U,qr=ve,go=y,jo=_r.m,Si=_r.s,Mn=[null],Hn=1,Hr=0,$n=G$[qr];n:for(;;){if(go&&Fe(jo,1)){var Yi=Fe(jo,3)+2,za=qe(Ki,Yi),Jr=qe(Vo,Yi),ls=za*Jr;if(!As(za,Jr,0,_r,Mn))break n;for(Mn=Mn[0],Si.xc=Yi,Xr=0;Xr<ls;++Xr){var cr=Mn[Xr]>>8&65535;Mn[Xr]=cr,cr>=Hn&&(Hn=cr+1)}}if(jo.h)break n;for(on=0;5>on;++on){var Ai=CO[on];!on&&0<qr&&(Ai+=1<<qr),Hr<Ai&&(Hr=Ai)}var Fs=s(Hn*$n,D),Bo=Hn,Ls=s(Bo,_e);if(Ls==null)var Vs=null;else e(65536>=Bo),Vs=Ls;var us=o(Hr);if(Vs==null||us==null||Fs==null){_r.a=1;break n}var js=Fs;for(Xr=An=0;Xr<Hn;++Xr){var pr=Vs[Xr],Bs=pr.G,qa=pr.H,xf=0,Vl=1,Qi=0;for(on=0;5>on;++on){Ai=CO[on],Bs[on]=js,qa[on]=An,!on&&0<qr&&(Ai+=1<<qr);i:{var l1,zE=Ai,u1=_r,C0=us,hG=js,pG=An,qE=0,Uu=u1.m,gG=Fe(Uu,1);if(i(C0,0,0,zE),gG){var mG=Fe(Uu,1)+1,vG=Fe(Uu,1),RO=Fe(Uu,vG==0?1:8);C0[RO]=1,mG==2&&(C0[RO=Fe(Uu,8)]=1);var d1=1}else{var OO=o(19),FO=Fe(Uu,4)+4;if(19<FO){u1.a=3;var f1=0;break i}for(l1=0;l1<FO;++l1)OO[H$[l1]]=Fe(Uu,3);var HE=void 0,E0=void 0,LO=u1,yG=OO,h1=zE,VO=C0,$E=0,zu=LO.m,jO=8,BO=s(128,D);r:for(;A(BO,0,7,yG,19);){if(Fe(zu,1)){var _G=2+2*Fe(zu,3);if((HE=2+Fe(zu,_G))>h1)break r}else HE=h1;for(E0=0;E0<h1&&HE--;){pe(zu);var UO=BO[0+(127&J(zu))];ae(zu,zu.u+UO.g);var dp=UO.value;if(16>dp)VO[E0++]=dp,dp!=0&&(jO=dp);else{var wG=dp==16,zO=dp-16,bG=z$[zO],qO=Fe(zu,U$[zO])+bG;if(E0+qO>h1)break r;for(var xG=wG?jO:0;0<qO--;)VO[E0++]=xG}}$E=1;break r}$E||(LO.a=3),d1=$E}(d1=d1&&!Uu.h)&&(qE=A(hG,pG,8,C0,zE)),d1&&qE!=0?f1=qE:(u1.a=3,f1=0)}if(f1==0)break n;if(Vl&&q$[on]==1&&(Vl=js[An].g==0),xf+=js[An].g,An+=f1,3>=on){var I0,GE=us[0];for(I0=1;I0<Ai;++I0)us[I0]>GE&&(GE=us[I0]);Qi+=GE}}if(pr.nd=Vl,pr.Qb=0,Vl&&(pr.qb=(Bs[3][qa[3]+0].value<<24|Bs[1][qa[1]+0].value<<16|Bs[2][qa[2]+0].value)>>>0,xf==0&&256>Bs[0][qa[0]+0].value&&(pr.Qb=1,pr.qb+=Bs[0][qa[0]+0].value<<8)),pr.jc=!pr.Qb&&6>Qi,pr.jc){var p1,jl=pr;for(p1=0;p1<_f;++p1){var qu=p1,Hu=jl.pd[qu],g1=jl.G[0][jl.H[0]+qu];256<=g1.value?(Hu.g=g1.g+256,Hu.value=g1.value):(Hu.g=0,Hu.value=0,qu>>=di(g1,8,Hu),qu>>=di(jl.G[1][jl.H[1]+qu],16,Hu),qu>>=di(jl.G[2][jl.H[2]+qu],0,Hu),di(jl.G[3][jl.H[3]+qu],24,Hu))}}}Si.vc=Mn,Si.Wb=Hn,Si.Ya=Vs,Si.yc=Fs,rt=1;break t}rt=0}if(!(F=rt)){w.a=3;break e}if(0<ve){if(Z.ua=1<<ve,!$(Z.Wa,ve)){w.a=1,F=0;break e}}else Z.ua=0;var WE=w,HO=L,CG=U,KE=WE.s,YE=KE.xc;if(WE.c=HO,WE.i=CG,KE.md=qe(HO,YE),KE.wc=YE==0?-1:(1<<YE)-1,y){w.xb=eG;break e}if((se=o(L*U))==null){w.a=1,F=0;break e}F=(F=Ro(w,se,0,L,U,U,null))&&!H.h;break e}return F?(R!=null?R[0]=se:(e(se==null),e(y)),w.$=0,y||Gi(Z)):Gi(Z),F}function Ec(d,p){var y=d.c*d.i,w=y+p+16*p;return e(d.c<=p),d.V=o(w),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+y+p,1)}function Ic(d,p){var y=d.C,w=p-y,R=d.V,F=d.Ba+d.c*y;for(e(p<=d.l.o);0<w;){var L=16<w?16:w,U=d.l.ma,H=d.l.width,Z=H*L,se=U.ca,ve=U.tb+H*y,X=d.Ta,ce=d.Ua;is(d,L,R,F),gO(X,ce,se,ve,Z),ko(U,y,y+L,se,ve,H),w-=L,R+=L*d.c,y+=L}e(y==p),d.C=d.Ma=p}function Sc(){this.ub=this.yd=this.td=this.Rb=0}function Il(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function np(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function lf(){this.Yb=(function(){var d=[];return(function p(y,w,R){for(var F=R[w],L=0;L<F&&(y.push(R.length>w+1?[]:0),!(R.length<w+1));L++)p(y[L],w+1,R)})(d,0,[3,11]),d})()}function Sl(){this.jb=o(3),this.Wc=a([4,8],lf),this.Xc=a([4,17],lf)}function uf(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function ho(){this.ld=this.La=this.dd=this.tc=0}function Oa(){this.Na=this.la=0}function sa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Al(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function rp(){this.uc=this.M=this.Nb=0,this.wa=Array(new ho),this.Y=0,this.ya=Array(new Al),this.aa=0,this.l=new Ac}function df(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ff(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new Sc,this.Kc=new Il,this.ed=new uf,this.Qa=new np,this.Ic=this.$c=this.Aa=0,this.D=new rp,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,O),this.ia=0,this.pb=s(4,sa),this.Pa=new Sl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new df),this.Hd=0,this.rb=Array(new Oa),this.sb=0,this.wa=Array(new ho),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Al),this.L=this.aa=0,this.gd=a([4,2],ho),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ds(d,p){return 0>d?0:d>p?p:d}function Ac(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function hf(){var d=new ff;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,b0||(b0=Eu)),d}function kr(d,p,y){return d.a==0&&(d.a=p,d.sc=y,d.cb=0),0}function pf(d,p,y){return 3<=y&&d[p+0]==157&&d[p+1]==1&&d[p+2]==42}function aa(d,p){if(d==null)return 0;if(d.a=0,d.sc="OK",p==null)return kr(d,2,"null VP8Io passed to VP8GetHeaders()");var y=p.data,w=p.w,R=p.ha;if(4>R)return kr(d,7,"Truncated header.");var F=y[w+0]|y[w+1]<<8|y[w+2]<<16,L=d.Od;if(L.Rb=!(1&F),L.td=F>>1&7,L.yd=F>>4&1,L.ub=F>>5,3<L.td)return kr(d,3,"Incorrect keyframe parameters.");if(!L.yd)return kr(d,4,"Frame not displayable.");w+=3,R-=3;var U=d.Kc;if(L.Rb){if(7>R)return kr(d,7,"cannot parse picture header");if(!pf(y,w,R))return kr(d,3,"Bad code word");U.c=16383&(y[w+4]<<8|y[w+3]),U.Td=y[w+4]>>6,U.i=16383&(y[w+6]<<8|y[w+5]),U.Ud=y[w+6]>>6,w+=7,R-=7,d.za=U.c+15>>4,d.Ub=U.i+15>>4,p.width=U.c,p.height=U.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,i((F=d.Pa).jb,0,255,F.jb.length),e((F=d.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,i(F.Zb,0,0,F.Zb.length),i(F.Lb,0,0,F.Lb)}if(L.ub>R)return kr(d,7,"bad partition length");Te(F=d.m,y,w,L.ub),w+=L.ub,R-=L.ub,L.Rb&&(U.Ld=ye(F),U.Kd=ye(F)),U=d.Qa;var H,Z=d.Pa;if(e(F!=null),e(U!=null),U.Cb=ye(F),U.Cb){if(U.Bb=ye(F),ye(F)){for(U.Fb=ye(F),H=0;4>H;++H)U.Zb[H]=ye(F)?fe(F,7):0;for(H=0;4>H;++H)U.Lb[H]=ye(F)?fe(F,6):0}if(U.Bb)for(H=0;3>H;++H)Z.jb[H]=ye(F)?Ce(F,8):255}else U.Bb=0;if(F.Ka)return kr(d,3,"cannot parse segment header");if((U=d.ed).zd=ye(F),U.Tb=Ce(F,6),U.wb=Ce(F,3),U.Pc=ye(F),U.Pc&&ye(F)){for(Z=0;4>Z;++Z)ye(F)&&(U.vd[Z]=fe(F,6));for(Z=0;4>Z;++Z)ye(F)&&(U.od[Z]=fe(F,6))}if(d.L=U.Tb==0?0:U.zd?1:2,F.Ka)return kr(d,3,"cannot parse filter header");var se=R;if(R=H=w,w=H+se,U=se,d.Xb=(1<<Ce(d.m,2))-1,se<3*(Z=d.Xb))y=7;else{for(H+=3*Z,U-=3*Z,se=0;se<Z;++se){var ve=y[R+0]|y[R+1]<<8|y[R+2]<<16;ve>U&&(ve=U),Te(d.Jc[+se],y,H,ve),H+=ve,U-=ve,R+=3}Te(d.Jc[+Z],y,H,U),y=H<w?0:5}if(y!=0)return kr(d,y,"cannot parse partitions");for(y=Ce(H=d.m,7),R=ye(H)?fe(H,4):0,w=ye(H)?fe(H,4):0,U=ye(H)?fe(H,4):0,Z=ye(H)?fe(H,4):0,H=ye(H)?fe(H,4):0,se=d.Qa,ve=0;4>ve;++ve){if(se.Cb){var X=se.Zb[ve];se.Fb||(X+=y)}else{if(0<ve){d.pb[ve]=d.pb[0];continue}X=y}var ce=d.pb[ve];ce.Sc[0]=jE[Ds(X+R,127)],ce.Sc[1]=BE[Ds(X+0,127)],ce.Eb[0]=2*jE[Ds(X+w,127)],ce.Eb[1]=101581*BE[Ds(X+U,127)]>>16,8>ce.Eb[1]&&(ce.Eb[1]=8),ce.Qc[0]=jE[Ds(X+Z,117)],ce.Qc[1]=BE[Ds(X+H,127)],ce.lc=X+H}if(!L.Rb)return kr(d,4,"Not a key frame.");for(ye(F),L=d.Pa,y=0;4>y;++y){for(R=0;8>R;++R)for(w=0;3>w;++w)for(U=0;11>U;++U)Z=Me(F,X$[y][R][w][U])?Ce(F,8):Q$[y][R][w][U],L.Wc[y][R].Yb[w][U]=Z;for(R=0;17>R;++R)L.Xc[y][R]=L.Wc[y][J$[R]]}return d.kc=ye(F),d.kc&&(d.Bd=Ce(F,8)),d.cb=1}function Eu(d,p,y,w,R,F,L){var U=p[R].Yb[y];for(y=0;16>R;++R){if(!Me(d,U[y+0]))return R;for(;!Me(d,U[y+1]);)if(U=p[++R].Yb[0],y=0,R==16)return 16;var H=p[R+1].Yb;if(Me(d,U[y+2])){var Z=d,se=0;if(Me(Z,(X=U)[(ve=y)+3]))if(Me(Z,X[ve+6])){for(U=0,ve=2*(se=Me(Z,X[ve+8]))+(X=Me(Z,X[ve+9+se])),se=0,X=K$[ve];X[U];++U)se+=se+Me(Z,X[U]);se+=3+(8<<ve)}else Me(Z,X[ve+7])?(se=7+2*Me(Z,165),se+=Me(Z,145)):se=5+Me(Z,159);else se=Me(Z,X[ve+4])?3+Me(Z,X[ve+5]):2;U=H[2]}else se=1,U=H[1];H=L+Y$[R],0>(Z=d).b&&Se(Z);var ve,X=Z.b,ce=(ve=Z.Ca>>1)-(Z.I>>X)>>31;--Z.b,Z.Ca+=ce,Z.Ca|=1,Z.I-=(ve+1&ce)<<X,F[H]=((se^ce)-ce)*w[(0<R)+0]}return 16}function gf(d){var p=d.rb[d.sb-1];p.la=0,p.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Oo(d,p,y,w,R){R=d[p+y+32*w]+(R>>3),d[p+y+32*w]=-256&R?0>R?0:255:R}function Yr(d,p,y,w,R,F){Oo(d,p,0,y,w+R),Oo(d,p,1,y,w+F),Oo(d,p,2,y,w-F),Oo(d,p,3,y,w-R)}function Wi(d){return(20091*d>>16)+d}function ss(d,p,y,w){var R,F=0,L=o(16);for(R=0;4>R;++R){var U=d[p+0]+d[p+8],H=d[p+0]-d[p+8],Z=(35468*d[p+4]>>16)-Wi(d[p+12]),se=Wi(d[p+4])+(35468*d[p+12]>>16);L[F+0]=U+se,L[F+1]=H+Z,L[F+2]=H-Z,L[F+3]=U-se,F+=4,p++}for(R=F=0;4>R;++R)U=(d=L[F+0]+4)+L[F+8],H=d-L[F+8],Z=(35468*L[F+4]>>16)-Wi(L[F+12]),Oo(y,w,0,0,U+(se=Wi(L[F+4])+(35468*L[F+12]>>16))),Oo(y,w,1,0,H+Z),Oo(y,w,2,0,H-Z),Oo(y,w,3,0,U-se),F++,w+=32}function Iu(d,p,y,w){var R=d[p+0]+4,F=35468*d[p+4]>>16,L=Wi(d[p+4]),U=35468*d[p+1]>>16;Yr(y,w,0,R+L,d=Wi(d[p+1]),U),Yr(y,w,1,R+F,d,U),Yr(y,w,2,R-F,d,U),Yr(y,w,3,R-L,d,U)}function Su(d,p,y,w,R){ss(d,p,y,w),R&&ss(d,p+16,y,w+4)}function Ts(d,p,y,w){bf(d,p+0,y,w,1),bf(d,p+32,y,w+128,1)}function Vn(d,p,y,w){var R;for(d=d[p+0]+4,R=0;4>R;++R)for(p=0;4>p;++p)Oo(y,w,p,R,d)}function Dl(d,p,y,w){d[p+0]&&jn(d,p+0,y,w),d[p+16]&&jn(d,p+16,y,w+4),d[p+32]&&jn(d,p+32,y,w+128),d[p+48]&&jn(d,p+48,y,w+128+4)}function ca(d,p,y,w){var R,F=o(16);for(R=0;4>R;++R){var L=d[p+0+R]+d[p+12+R],U=d[p+4+R]+d[p+8+R],H=d[p+4+R]-d[p+8+R],Z=d[p+0+R]-d[p+12+R];F[0+R]=L+U,F[8+R]=L-U,F[4+R]=Z+H,F[12+R]=Z-H}for(R=0;4>R;++R)L=(d=F[0+4*R]+3)+F[3+4*R],U=F[1+4*R]+F[2+4*R],H=F[1+4*R]-F[2+4*R],Z=d-F[3+4*R],y[w+0]=L+U>>3,y[w+16]=Z+H>>3,y[w+32]=L-U>>3,y[w+48]=Z-H>>3,w+=64}function Ms(d,p,y){var w,R=p-32,F=Os,L=255-d[R-1];for(w=0;w<y;++w){var U,H=F,Z=L+d[p-1];for(U=0;U<y;++U)d[p+U]=H[Z+d[R+U]];p+=32}}function a0(d,p){Ms(d,p,4)}function ip(d,p){Ms(d,p,8)}function c0(d,p){Ms(d,p,16)}function mf(d,p){var y;for(y=0;16>y;++y)r(d,p+32*y,d,p-32,16)}function op(d,p){var y;for(y=16;0<y;--y)i(d,p,d[p-1],16),p+=32}function Ns(d,p,y){var w;for(w=0;16>w;++w)i(p,y+32*w,d,16)}function Tl(d,p){var y,w=16;for(y=0;16>y;++y)w+=d[p-1+32*y]+d[p+y-32];Ns(w>>5,d,p)}function po(d,p){var y,w=8;for(y=0;16>y;++y)w+=d[p-1+32*y];Ns(w>>4,d,p)}function Au(d,p){var y,w=8;for(y=0;16>y;++y)w+=d[p+y-32];Ns(w>>4,d,p)}function sp(d,p){Ns(128,d,p)}function Gt(d,p,y){return d+2*p+y+2>>2}function Dc(d,p){var y,w=p-32;for(w=new Uint8Array([Gt(d[w-1],d[w+0],d[w+1]),Gt(d[w+0],d[w+1],d[w+2]),Gt(d[w+1],d[w+2],d[w+3]),Gt(d[w+2],d[w+3],d[w+4])]),y=0;4>y;++y)r(d,p+32*y,w,0,w.length)}function l0(d,p){var y=d[p-1],w=d[p-1+32],R=d[p-1+64],F=d[p-1+96];Ue(d,p+0,16843009*Gt(d[p-1-32],y,w)),Ue(d,p+32,16843009*Gt(y,w,R)),Ue(d,p+64,16843009*Gt(w,R,F)),Ue(d,p+96,16843009*Gt(R,F,F))}function u0(d,p){var y,w=4;for(y=0;4>y;++y)w+=d[p+y-32]+d[p-1+32*y];for(w>>=3,y=0;4>y;++y)i(d,p+32*y,w,4)}function Fa(d,p){var y=d[p-1+0],w=d[p-1+32],R=d[p-1+64],F=d[p-1-32],L=d[p+0-32],U=d[p+1-32],H=d[p+2-32],Z=d[p+3-32];d[p+0+96]=Gt(w,R,d[p-1+96]),d[p+1+96]=d[p+0+64]=Gt(y,w,R),d[p+2+96]=d[p+1+64]=d[p+0+32]=Gt(F,y,w),d[p+3+96]=d[p+2+64]=d[p+1+32]=d[p+0+0]=Gt(L,F,y),d[p+3+64]=d[p+2+32]=d[p+1+0]=Gt(U,L,F),d[p+3+32]=d[p+2+0]=Gt(H,U,L),d[p+3+0]=Gt(Z,H,U)}function ji(d,p){var y=d[p+1-32],w=d[p+2-32],R=d[p+3-32],F=d[p+4-32],L=d[p+5-32],U=d[p+6-32],H=d[p+7-32];d[p+0+0]=Gt(d[p+0-32],y,w),d[p+1+0]=d[p+0+32]=Gt(y,w,R),d[p+2+0]=d[p+1+32]=d[p+0+64]=Gt(w,R,F),d[p+3+0]=d[p+2+32]=d[p+1+64]=d[p+0+96]=Gt(R,F,L),d[p+3+32]=d[p+2+64]=d[p+1+96]=Gt(F,L,U),d[p+3+64]=d[p+2+96]=Gt(L,U,H),d[p+3+96]=Gt(U,H,H)}function d0(d,p){var y=d[p-1+0],w=d[p-1+32],R=d[p-1+64],F=d[p-1-32],L=d[p+0-32],U=d[p+1-32],H=d[p+2-32],Z=d[p+3-32];d[p+0+0]=d[p+1+64]=F+L+1>>1,d[p+1+0]=d[p+2+64]=L+U+1>>1,d[p+2+0]=d[p+3+64]=U+H+1>>1,d[p+3+0]=H+Z+1>>1,d[p+0+96]=Gt(R,w,y),d[p+0+64]=Gt(w,y,F),d[p+0+32]=d[p+1+96]=Gt(y,F,L),d[p+1+32]=d[p+2+96]=Gt(F,L,U),d[p+2+32]=d[p+3+96]=Gt(L,U,H),d[p+3+32]=Gt(U,H,Z)}function f0(d,p){var y=d[p+0-32],w=d[p+1-32],R=d[p+2-32],F=d[p+3-32],L=d[p+4-32],U=d[p+5-32],H=d[p+6-32],Z=d[p+7-32];d[p+0+0]=y+w+1>>1,d[p+1+0]=d[p+0+64]=w+R+1>>1,d[p+2+0]=d[p+1+64]=R+F+1>>1,d[p+3+0]=d[p+2+64]=F+L+1>>1,d[p+0+32]=Gt(y,w,R),d[p+1+32]=d[p+0+96]=Gt(w,R,F),d[p+2+32]=d[p+1+96]=Gt(R,F,L),d[p+3+32]=d[p+2+96]=Gt(F,L,U),d[p+3+64]=Gt(L,U,H),d[p+3+96]=Gt(U,H,Z)}function la(d,p){var y=d[p-1+0],w=d[p-1+32],R=d[p-1+64],F=d[p-1+96];d[p+0+0]=y+w+1>>1,d[p+2+0]=d[p+0+32]=w+R+1>>1,d[p+2+32]=d[p+0+64]=R+F+1>>1,d[p+1+0]=Gt(y,w,R),d[p+3+0]=d[p+1+32]=Gt(w,R,F),d[p+3+32]=d[p+1+64]=Gt(R,F,F),d[p+3+64]=d[p+2+64]=d[p+0+96]=d[p+1+96]=d[p+2+96]=d[p+3+96]=F}function Tc(d,p){var y=d[p-1+0],w=d[p-1+32],R=d[p-1+64],F=d[p-1+96],L=d[p-1-32],U=d[p+0-32],H=d[p+1-32],Z=d[p+2-32];d[p+0+0]=d[p+2+32]=y+L+1>>1,d[p+0+32]=d[p+2+64]=w+y+1>>1,d[p+0+64]=d[p+2+96]=R+w+1>>1,d[p+0+96]=F+R+1>>1,d[p+3+0]=Gt(U,H,Z),d[p+2+0]=Gt(L,U,H),d[p+1+0]=d[p+3+32]=Gt(y,L,U),d[p+1+32]=d[p+3+64]=Gt(w,y,L),d[p+1+64]=d[p+3+96]=Gt(R,w,y),d[p+1+96]=Gt(F,R,w)}function Mc(d,p){var y;for(y=0;8>y;++y)r(d,p+32*y,d,p-32,8)}function Ml(d,p){var y;for(y=0;8>y;++y)i(d,p,d[p-1],8),p+=32}function Fo(d,p,y){var w;for(w=0;8>w;++w)i(p,y+32*w,d,8)}function ap(d,p){var y,w=8;for(y=0;8>y;++y)w+=d[p+y-32]+d[p-1+32*y];Fo(w>>4,d,p)}function Nl(d,p){var y,w=4;for(y=0;8>y;++y)w+=d[p+y-32];Fo(w>>3,d,p)}function tr(d,p){var y,w=4;for(y=0;8>y;++y)w+=d[p-1+32*y];Fo(w>>3,d,p)}function cp(d,p){Fo(128,d,p)}function La(d,p,y){var w=d[p-y],R=d[p+0],F=3*(R-w)+RE[1020+d[p-2*y]-d[p+y]],L=e1[112+(F+4>>3)];d[p-y]=Os[255+w+e1[112+(F+3>>3)]],d[p+0]=Os[255+R-L]}function Du(d,p,y,w){var R=d[p+0],F=d[p+y];return pa[255+d[p-2*y]-d[p-y]]>w||pa[255+F-R]>w}function Pl(d,p,y,w){return 4*pa[255+d[p-y]-d[p+0]]+pa[255+d[p-2*y]-d[p+y]]<=w}function Tu(d,p,y,w,R){var F=d[p-3*y],L=d[p-2*y],U=d[p-y],H=d[p+0],Z=d[p+y],se=d[p+2*y],ve=d[p+3*y];return 4*pa[255+U-H]+pa[255+L-Z]>w?0:pa[255+d[p-4*y]-F]<=R&&pa[255+F-L]<=R&&pa[255+L-U]<=R&&pa[255+ve-se]<=R&&pa[255+se-Z]<=R&&pa[255+Z-H]<=R}function ua(d,p,y,w){var R=2*w+1;for(w=0;16>w;++w)Pl(d,p+w,y,R)&&La(d,p+w,y)}function Mu(d,p,y,w){var R=2*w+1;for(w=0;16>w;++w)Pl(d,p+w*y,1,R)&&La(d,p+w*y,1)}function as(d,p,y,w){var R;for(R=3;0<R;--R)ua(d,p+=4*y,y,w)}function vf(d,p,y,w){var R;for(R=3;0<R;--R)Mu(d,p+=4,y,w)}function Va(d,p,y,w,R,F,L,U){for(F=2*F+1;0<R--;){if(Tu(d,p,y,F,L))if(Du(d,p,y,U))La(d,p,y);else{var H=d,Z=p,se=y,ve=H[Z-2*se],X=H[Z-se],ce=H[Z+0],ge=H[Z+se],Pe=H[Z+2*se],me=27*(Le=RE[1020+3*(ce-X)+RE[1020+ve-ge]])+63>>7,Re=18*Le+63>>7,Le=9*Le+63>>7;H[Z-3*se]=Os[255+H[Z-3*se]+Le],H[Z-2*se]=Os[255+ve+Re],H[Z-se]=Os[255+X+me],H[Z+0]=Os[255+ce-me],H[Z+se]=Os[255+ge-Re],H[Z+2*se]=Os[255+Pe-Le]}p+=w}}function Lo(d,p,y,w,R,F,L,U){for(F=2*F+1;0<R--;){if(Tu(d,p,y,F,L))if(Du(d,p,y,U))La(d,p,y);else{var H=d,Z=p,se=y,ve=H[Z-se],X=H[Z+0],ce=H[Z+se],ge=e1[112+(4+(Pe=3*(X-ve))>>3)],Pe=e1[112+(Pe+3>>3)],me=ge+1>>1;H[Z-2*se]=Os[255+H[Z-2*se]+me],H[Z-se]=Os[255+ve+Pe],H[Z+0]=Os[255+X-ge],H[Z+se]=Os[255+ce-me]}p+=w}}function yf(d,p,y,w,R,F){Va(d,p,y,1,16,w,R,F)}function ja(d,p,y,w,R,F){Va(d,p,1,y,16,w,R,F)}function kl(d,p,y,w,R,F){var L;for(L=3;0<L;--L)Lo(d,p+=4*y,y,1,16,w,R,F)}function v(d,p,y,w,R,F){var L;for(L=3;0<L;--L)Lo(d,p+=4,1,y,16,w,R,F)}function k(d,p,y,w,R,F,L,U){Va(d,p,R,1,8,F,L,U),Va(y,w,R,1,8,F,L,U)}function Q(d,p,y,w,R,F,L,U){Va(d,p,1,R,8,F,L,U),Va(y,w,1,R,8,F,L,U)}function re(d,p,y,w,R,F,L,U){Lo(d,p+4*R,R,1,8,F,L,U),Lo(y,w+4*R,R,1,8,F,L,U)}function ue(d,p,y,w,R,F,L,U){Lo(d,p+4,1,R,8,F,L,U),Lo(y,w+4,1,R,8,F,L,U)}function ke(){this.ba=new tn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Sn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ze(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ht(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function _t(){this.ua=0,this.Wa=new Ft,this.vb=new Ft,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new _e,this.yc=new D}function qt(){this.xb=this.a=0,this.l=new Ac,this.ca=new tn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new _t,this.ab=0,this.gc=s(4,ht),this.Oc=0}function Kt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ac,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wn(d,p,y,w,R,F,L){for(d=d==null?0:d[p+0],p=0;p<L;++p)R[F+p]=d+y[w+p]&255,d=R[F+p]}function fr(d,p,y,w,R,F,L){var U;if(d==null)wn(null,null,y,w,R,F,L);else for(U=0;U<L;++U)R[F+U]=d[p+U]+y[w+U]&255}function nr(d,p,y,w,R,F,L){if(d==null)wn(null,null,y,w,R,F,L);else{var U,H=d[p+0],Z=H,se=H;for(U=0;U<L;++U)Z=se+(H=d[p+U])-Z,se=y[w+U]+(-256&Z?0>Z?0:255:Z)&255,Z=H,R[F+U]=se}}function qn(d,p,y,w){var R=p.width,F=p.o;if(e(d!=null&&p!=null),0>y||0>=w||y+w>F)return null;if(!d.Cc){if(d.ga==null){var L;if(d.ga=new Kt,(L=d.ga==null)||(L=p.width*p.o,e(d.Gb.length==0),d.Gb=o(L),d.Uc=0,d.Gb==null?L=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,L=1),L=!L),!L){L=d.ga;var U=d.Fa,H=d.P,Z=d.qc,se=d.mb,ve=d.nb,X=H+1,ce=Z-1,ge=L.l;if(e(U!=null&&se!=null&&p!=null),Bu[0]=null,Bu[1]=wn,Bu[2]=fr,Bu[3]=nr,L.ca=se,L.tb=ve,L.c=p.width,L.i=p.height,e(0<L.c&&0<L.i),1>=Z)p=0;else if(L.$a=3&U[H+0],L.Z=U[H+0]>>2&3,L.Lc=U[H+0]>>4&3,H=U[H+0]>>6&3,0>L.$a||1<L.$a||4<=L.Z||1<L.Lc||H)p=0;else if(ge.put=Pt,ge.ac=Is,ge.bc=oa,ge.ma=L,ge.width=p.width,ge.height=p.height,ge.Da=p.Da,ge.v=p.v,ge.va=p.va,ge.j=p.j,ge.o=p.o,L.$a)e:{e(L.$a==1),p=fo();t:for(;;){if(p==null){p=0;break e}if(e(L!=null),L.mc=p,p.c=L.c,p.i=L.i,p.l=L.l,p.l.ma=L,p.l.width=L.c,p.l.height=L.i,p.a=0,Ae(p.m,U,X,ce),!As(L.c,L.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&Ss(p.s)?(L.ic=1,U=p.c*p.i,p.Ta=null,p.Ua=0,p.V=o(U),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(L.ic=0,p=Ec(p,L.c)),!p))break t;p=1;break e}L.mc=null,p=0}else p=ce>=L.c*L.i;L=!p}if(L)return null;d.ga.Lc!=1?d.Ga=0:w=F-y}e(d.ga!=null),e(y+w<=F);e:{if(p=(U=d.ga).c,F=U.l.o,U.$a==0){if(X=d.rc,ce=d.Vc,ge=d.Fa,H=d.P+1+y*p,Z=d.mb,se=d.nb+y*p,e(H<=d.P+d.qc),U.Z!=0)for(e(Bu[U.Z]!=null),L=0;L<w;++L)Bu[U.Z](X,ce,ge,H,Z,se,p),X=Z,ce=se,se+=p,H+=p;else for(L=0;L<w;++L)r(Z,se,ge,H,p),X=Z,ce=se,se+=p,H+=p;d.rc=X,d.Vc=ce}else{if(e(U.mc!=null),p=y+w,e((L=U.mc)!=null),e(p<=L.i),L.C>=p)p=1;else if(U.ic||yr(),U.ic){U=L.V,X=L.Ba,ce=L.c;var Pe=L.i,me=(ge=1,H=L.$/ce,Z=L.$%ce,se=L.m,ve=L.s,L.$),Re=ce*Pe,Le=ce*p,Ge=ve.wc,He=me<Le?Ci(ve,Z,H):null;e(me<=Re),e(p<=Pe),e(Ss(ve));t:for(;;){for(;!se.h&&me<Le;){if(Z&Ge||(He=Ci(ve,Z,H)),e(He!=null),pe(se),256>(Pe=er(He.G[0],He.H[0],se)))U[X+me]=Pe,++me,++Z>=ce&&(Z=0,++H<=p&&!(H%16)&&os(L,H));else{if(!(280>Pe)){ge=0;break t}Pe=Po(Pe-256,se);var Dt,pt=er(He.G[4],He.H[4],se);if(pe(se),!(me>=(pt=Vi(ce,pt=Po(pt,se)))&&Re-me>=Pe)){ge=0;break t}for(Dt=0;Dt<Pe;++Dt)U[X+me+Dt]=U[X+me+Dt-pt];for(me+=Pe,Z+=Pe;Z>=ce;)Z-=ce,++H<=p&&!(H%16)&&os(L,H);me<Le&&Z&Ge&&(He=Ci(ve,Z,H))}e(se.h==ie(se))}os(L,H>p?p:H);break t}!ge||se.h&&me<Re?(ge=0,L.a=se.h?5:3):L.$=me,p=ge}else p=Ro(L,L.V,L.Ba,L.c,L.i,p,Ic);if(!p){w=0;break e}}y+w>=F&&(d.Cc=1),w=1}if(!w)return null;if(d.Cc&&((w=d.ga)!=null&&(w.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+y*R}function zr(d,p,y,w,R,F){for(;0<R--;){var L,U=d,H=p+(y?1:0),Z=d,se=p+(y?0:3);for(L=0;L<w;++L){var ve=Z[se+4*L];ve!=255&&(ve*=32897,U[H+4*L+0]=U[H+4*L+0]*ve>>23,U[H+4*L+1]=U[H+4*L+1]*ve>>23,U[H+4*L+2]=U[H+4*L+2]*ve>>23)}p+=F}}function Rr(d,p,y,w,R){for(;0<w--;){var F;for(F=0;F<y;++F){var L=d[p+2*F+0],U=15&(Z=d[p+2*F+1]),H=4369*U,Z=(240&Z|Z>>4)*H>>16;d[p+2*F+0]=(240&L|L>>4)*H>>16&240|(15&L|L<<4)*H>>16>>4&15,d[p+2*F+1]=240&Z|U}p+=R}}function fi(d,p,y,w,R,F,L,U){var H,Z,se=255;for(Z=0;Z<R;++Z){for(H=0;H<w;++H){var ve=d[p+H];F[L+4*H]=ve,se&=ve}p+=y,L+=U}return se!=255}function cs(d,p,y,w,R){var F;for(F=0;F<R;++F)y[w+F]=d[p+F]>>8}function yr(){w0=zr,hO=Rr,pO=fi,gO=cs}function da(d,p,y){S[d]=function(w,R,F,L,U,H,Z,se,ve,X,ce,ge,Pe,me,Re,Le,Ge){var He,Dt=Ge-1>>1,pt=U[H+0]|Z[se+0]<<16,hn=ve[X+0]|ce[ge+0]<<16;e(w!=null);var bt=3*pt+hn+131074>>2;for(p(w[R+0],255&bt,bt>>16,Pe,me),F!=null&&(bt=3*hn+pt+131074>>2,p(F[L+0],255&bt,bt>>16,Re,Le)),He=1;He<=Dt;++He){var Cn=U[H+He]|Z[se+He]<<16,Ii=ve[X+He]|ce[ge+He]<<16,pn=pt+Cn+hn+Ii+524296,xt=pn+2*(Cn+hn)>>3;bt=xt+pt>>1,pt=(pn=pn+2*(pt+Ii)>>3)+Cn>>1,p(w[R+2*He-1],255&bt,bt>>16,Pe,me+(2*He-1)*y),p(w[R+2*He-0],255&pt,pt>>16,Pe,me+(2*He-0)*y),F!=null&&(bt=pn+hn>>1,pt=xt+Ii>>1,p(F[L+2*He-1],255&bt,bt>>16,Re,Le+(2*He-1)*y),p(F[L+2*He+0],255&pt,pt>>16,Re,Le+(2*He+0)*y)),pt=Cn,hn=Ii}1&Ge||(bt=3*pt+hn+131074>>2,p(w[R+Ge-1],255&bt,bt>>16,Pe,me+(Ge-1)*y),F!=null&&(bt=3*hn+pt+131074>>2,p(F[L+Ge-1],255&bt,bt>>16,Re,Le+(Ge-1)*y)))}}function Nu(){ga[t1]=tG,ga[n1]=SO,ga[bO]=nG,ga[r1]=AO,ga[i1]=DO,ga[OE]=TO,ga[xO]=rG,ga[FE]=SO,ga[LE]=AO,ga[o1]=DO,ga[VE]=TO}function Ps(d){return d&~iG?0>d?0:255:d>>MO}function f(d,p){return Ps((19077*d>>8)+(26149*p>>8)-14234)}function _(d,p,y){return Ps((19077*d>>8)-(6419*p>>8)-(13320*y>>8)+8708)}function E(d,p){return Ps((19077*d>>8)+(33050*p>>8)-17685)}function B(d,p,y,w,R){w[R+0]=f(d,y),w[R+1]=_(d,p,y),w[R+2]=E(d,p)}function le(d,p,y,w,R){w[R+0]=E(d,p),w[R+1]=_(d,p,y),w[R+2]=f(d,y)}function Ee(d,p,y,w,R){var F=_(d,p,y);p=F<<3&224|E(d,p)>>3,w[R+0]=248&f(d,y)|F>>5,w[R+1]=p}function Ze(d,p,y,w,R){var F=240&E(d,p)|15;w[R+0]=240&f(d,y)|_(d,p,y)>>4,w[R+1]=F}function Tn(d,p,y,w,R){w[R+0]=255,B(d,p,y,w,R+1)}function Or(d,p,y,w,R){le(d,p,y,w,R),w[R+3]=255}function Wt(d,p,y,w,R){B(d,p,y,w,R),w[R+3]=255}function hr(d,p,y){S[d]=function(w,R,F,L,U,H,Z,se,ve){for(var X=se+(-2&ve)*y;se!=X;)p(w[R+0],F[L+0],U[H+0],Z,se),p(w[R+1],F[L+0],U[H+0],Z,se+y),R+=2,++L,++H,se+=2*y;1&ve&&p(w[R+0],F[L+0],U[H+0],Z,se)}}function Fr(d,p,y){return y==0?d==0?p==0?6:5:p==0?4:0:y}function Ba(d,p,y,w,R){switch(d>>>30){case 3:bf(p,y,w,R,0);break;case 2:ha(p,y,w,R);break;case 1:jn(p,y,w,R)}}function Er(d,p){var y,w,R=p.M,F=p.Nb,L=d.oc,U=d.pc+40,H=d.oc,Z=d.pc+584,se=d.oc,ve=d.pc+600;for(y=0;16>y;++y)L[U+32*y-1]=129;for(y=0;8>y;++y)H[Z+32*y-1]=129,se[ve+32*y-1]=129;for(0<R?L[U-1-32]=H[Z-1-32]=se[ve-1-32]=129:(i(L,U-32-1,127,21),i(H,Z-32-1,127,9),i(se,ve-32-1,127,9)),w=0;w<d.za;++w){var X=p.ya[p.aa+w];if(0<w){for(y=-1;16>y;++y)r(L,U+32*y-4,L,U+32*y+12,4);for(y=-1;8>y;++y)r(H,Z+32*y-4,H,Z+32*y+4,4),r(se,ve+32*y-4,se,ve+32*y+4,4)}var ce=d.Gd,ge=d.Hd+w,Pe=X.ad,me=X.Hc;if(0<R&&(r(L,U-32,ce[ge].y,0,16),r(H,Z-32,ce[ge].f,0,8),r(se,ve-32,ce[ge].ea,0,8)),X.Za){var Re=L,Le=U-32+16;for(0<R&&(w>=d.za-1?i(Re,Le,ce[ge].y[15],4):r(Re,Le,ce[ge+1].y,0,4)),y=0;4>y;y++)Re[Le+128+y]=Re[Le+256+y]=Re[Le+384+y]=Re[Le+0+y];for(y=0;16>y;++y,me<<=2)Re=L,Le=U+PO[y],Ua[X.Ob[y]](Re,Le),Ba(me,Pe,16*+y,Re,Le)}else if(Re=Fr(w,R,X.Ob[0]),ju[Re](L,U),me!=0)for(y=0;16>y;++y,me<<=2)Ba(me,Pe,16*+y,L,U+PO[y]);for(y=X.Gc,Re=Fr(w,R,X.Dd),Ll[Re](H,Z),Ll[Re](se,ve),me=Pe,Re=H,Le=Z,255&(X=0|y)&&(170&X?kc(me,256,Re,Le):ar(me,256,Re,Le)),X=se,me=ve,255&(y>>=8)&&(170&y?kc(Pe,320,X,me):ar(Pe,320,X,me)),R<d.Ub-1&&(r(ce[ge].y,0,L,U+480,16),r(ce[ge].f,0,H,Z+224,8),r(ce[ge].ea,0,se,ve+224,8)),y=8*F*d.B,ce=d.sa,ge=d.ta+16*w+16*F*d.R,Pe=d.qa,X=d.ra+8*w+y,me=d.Ha,Re=d.Ia+8*w+y,y=0;16>y;++y)r(ce,ge+y*d.R,L,U+32*y,16);for(y=0;8>y;++y)r(Pe,X+y*d.B,H,Z+32*y,8),r(me,Re+y*d.B,se,ve+32*y,8)}}function fa(d,p,y,w,R,F,L,U,H){var Z=[0],se=[0],ve=0,X=H!=null?H.kd:0,ce=H??new ze;if(d==null||12>y)return 7;ce.data=d,ce.w=p,ce.ha=y,p=[p],y=[y],ce.gb=[ce.gb];e:{var ge=p,Pe=y,me=ce.gb;if(e(d!=null),e(Pe!=null),e(me!=null),me[0]=0,12<=Pe[0]&&!t(d,ge[0],"RIFF")){if(t(d,ge[0]+8,"WEBP")){me=3;break e}var Re=ot(d,ge[0]+4);if(12>Re||4294967286<Re){me=3;break e}if(X&&Re>Pe[0]-8){me=7;break e}me[0]=Re,ge[0]+=12,Pe[0]-=12}me=0}if(me!=0)return me;for(Re=0<ce.gb[0],y=y[0];;){e:{var Le=d;Pe=p,me=y;var Ge=Z,He=se,Dt=ge=[0];if((bt=ve=[ve])[0]=0,8>me[0])me=7;else{if(!t(Le,Pe[0],"VP8X")){if(ot(Le,Pe[0]+4)!=10){me=3;break e}if(18>me[0]){me=7;break e}var pt=ot(Le,Pe[0]+8),hn=1+We(Le,Pe[0]+12);if(2147483648<=hn*(Le=1+We(Le,Pe[0]+15))){me=3;break e}Dt!=null&&(Dt[0]=pt),Ge!=null&&(Ge[0]=hn),He!=null&&(He[0]=Le),Pe[0]+=18,me[0]-=18,bt[0]=1}me=0}}if(ve=ve[0],ge=ge[0],me!=0)return me;if(Pe=!!(2&ge),!Re&&ve)return 3;if(F!=null&&(F[0]=!!(16&ge)),L!=null&&(L[0]=Pe),U!=null&&(U[0]=0),L=Z[0],ge=se[0],ve&&Pe&&H==null){me=0;break}if(4>y){me=7;break}if(Re&&ve||!Re&&!ve&&!t(d,p[0],"ALPH")){y=[y],ce.na=[ce.na],ce.P=[ce.P],ce.Sa=[ce.Sa];e:{pt=d,me=p,Re=y;var bt=ce.gb;Ge=ce.na,He=ce.P,Dt=ce.Sa,hn=22,e(pt!=null),e(Re!=null),Le=me[0];var Cn=Re[0];for(e(Ge!=null),e(Dt!=null),Ge[0]=null,He[0]=null,Dt[0]=0;;){if(me[0]=Le,Re[0]=Cn,8>Cn){me=7;break e}var Ii=ot(pt,Le+4);if(4294967286<Ii){me=3;break e}var pn=8+Ii+1&-2;if(hn+=pn,0<bt&&hn>bt){me=3;break e}if(!t(pt,Le,"VP8 ")||!t(pt,Le,"VP8L")){me=0;break e}if(Cn[0]<pn){me=7;break e}t(pt,Le,"ALPH")||(Ge[0]=pt,He[0]=Le+8,Dt[0]=Ii),Le+=pn,Cn-=pn}}if(y=y[0],ce.na=ce.na[0],ce.P=ce.P[0],ce.Sa=ce.Sa[0],me!=0)break}y=[y],ce.Ja=[ce.Ja],ce.xa=[ce.xa];e:if(bt=d,me=p,Re=y,Ge=ce.gb[0],He=ce.Ja,Dt=ce.xa,pt=me[0],Le=!t(bt,pt,"VP8 "),hn=!t(bt,pt,"VP8L"),e(bt!=null),e(Re!=null),e(He!=null),e(Dt!=null),8>Re[0])me=7;else{if(Le||hn){if(bt=ot(bt,pt+4),12<=Ge&&bt>Ge-12){me=3;break e}if(X&&bt>Re[0]-8){me=7;break e}He[0]=bt,me[0]+=8,Re[0]-=8,Dt[0]=hn}else Dt[0]=5<=Re[0]&&bt[pt+0]==47&&!(bt[pt+4]>>5),He[0]=Re[0];me=0}if(y=y[0],ce.Ja=ce.Ja[0],ce.xa=ce.xa[0],p=p[0],me!=0)break;if(4294967286<ce.Ja)return 3;if(U==null||Pe||(U[0]=ce.xa?2:1),L=[L],ge=[ge],ce.xa){if(5>y){me=7;break}U=L,X=ge,Pe=F,d==null||5>y?d=0:5<=y&&d[p+0]==47&&!(d[p+4]>>5)?(Re=[0],bt=[0],Ge=[0],Ae(He=new G,d,p,y),vr(He,Re,bt,Ge)?(U!=null&&(U[0]=Re[0]),X!=null&&(X[0]=bt[0]),Pe!=null&&(Pe[0]=Ge[0]),d=1):d=0):d=0}else{if(10>y){me=7;break}U=ge,d==null||10>y||!pf(d,p+3,y-3)?d=0:(X=d[p+0]|d[p+1]<<8|d[p+2]<<16,Pe=16383&(d[p+7]<<8|d[p+6]),d=16383&(d[p+9]<<8|d[p+8]),1&X||3<(X>>1&7)||!(X>>4&1)||X>>5>=ce.Ja||!Pe||!d?d=0:(L&&(L[0]=Pe),U&&(U[0]=d),d=1))}if(!d||(L=L[0],ge=ge[0],ve&&(Z[0]!=L||se[0]!=ge)))return 3;H!=null&&(H[0]=ce,H.offset=p-H.w,e(4294967286>p-H.w),e(H.offset==H.ha-y));break}return me==0||me==7&&ve&&H==null?(F!=null&&(F[0]|=ce.na!=null&&0<ce.na.length),w!=null&&(w[0]=L),R!=null&&(R[0]=ge),0):me}function Rl(d,p,y){var w=p.width,R=p.height,F=0,L=0,U=w,H=R;if(p.Da=d!=null&&0<d.Da,p.Da&&(U=d.cd,H=d.bd,F=d.v,L=d.j,11>y||(F&=-2,L&=-2),0>F||0>L||0>=U||0>=H||F+U>w||L+H>R))return 0;if(p.v=F,p.j=L,p.va=F+U,p.o=L+H,p.U=U,p.T=H,p.da=d!=null&&0<d.da,p.da){if(!Ct(U,H,y=[d.ib],F=[d.hb]))return 0;p.ib=y[0],p.hb=F[0]}return p.ob=d!=null&&d.ob,p.Kb=d==null||!d.Sd,p.da&&(p.ob=p.ib<3*w/4&&p.hb<3*R/4,p.Kb=0),1}function h0(d){if(d==null)return 2;if(11>d.S){var p=d.f.RGBA;p.fb+=(d.height-1)*p.A,p.A=-p.A}else p=d.f.kb,d=d.height,p.O+=(d-1)*p.fa,p.fa=-p.fa,p.N+=(d-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(d-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(d-1)*p.lb,p.lb=-p.lb);return 0}function Pu(d,p,y,w){if(w==null||0>=d||0>=p)return 2;if(y!=null){if(y.Da){var R=y.cd,F=y.bd,L=-2&y.v,U=-2&y.j;if(0>L||0>U||0>=R||0>=F||L+R>d||U+F>p)return 2;d=R,p=F}if(y.da){if(!Ct(d,p,R=[y.ib],F=[y.hb]))return 2;d=R[0],p=F[0]}}w.width=d,w.height=p;e:{var H=w.width,Z=w.height;if(d=w.S,0>=H||0>=Z||!(d>=t1&&13>d))d=2;else{if(0>=w.Rd&&w.sd==null){L=F=R=p=0;var se=(U=H*kO[d])*Z;if(11>d||(F=(Z+1)/2*(p=(H+1)/2),d==12&&(L=(R=H)*Z)),(Z=o(se+2*F+L))==null){d=1;break e}w.sd=Z,11>d?((H=w.f.RGBA).eb=Z,H.fb=0,H.A=U,H.size=se):((H=w.f.kb).y=Z,H.O=0,H.fa=U,H.Fd=se,H.f=Z,H.N=0+se,H.Ab=p,H.Cd=F,H.ea=Z,H.W=0+se+F,H.Db=p,H.Ed=F,d==12&&(H.F=Z,H.J=0+se+2*F),H.Tc=L,H.lb=R)}if(p=1,R=w.S,F=w.width,L=w.height,R>=t1&&13>R)if(11>R)d=w.f.RGBA,p&=(U=Math.abs(d.A))*(L-1)+F<=d.size,p&=U>=F*kO[R],p&=d.eb!=null;else{d=w.f.kb,U=(F+1)/2,se=(L+1)/2,H=Math.abs(d.fa),Z=Math.abs(d.Ab);var ve=Math.abs(d.Db),X=Math.abs(d.lb),ce=X*(L-1)+F;p&=H*(L-1)+F<=d.Fd,p&=Z*(se-1)+U<=d.Cd,p=(p&=ve*(se-1)+U<=d.Ed)&H>=F&Z>=U&ve>=U,p&=d.y!=null,p&=d.f!=null,p&=d.ea!=null,R==12&&(p&=X>=F,p&=ce<=d.Tc,p&=d.F!=null)}else p=0;d=p?0:2}}return d!=0||y!=null&&y.fd&&(d=h0(w)),d}var _f=64,ks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Rs=24,ku=32,Ol=8,Ru=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(d){return d},S.Predictor2=function(d,p,y){return p[y+0]},S.Predictor3=function(d,p,y){return p[y+1]},S.Predictor4=function(d,p,y){return p[y-1]},S.Predictor5=function(d,p,y){return Et(Et(d,p[y+1]),p[y+0])},S.Predictor6=function(d,p,y){return Et(d,p[y-1])},S.Predictor7=function(d,p,y){return Et(d,p[y+0])},S.Predictor8=function(d,p,y){return Et(p[y-1],p[y+0])},S.Predictor9=function(d,p,y){return Et(p[y+0],p[y+1])},S.Predictor10=function(d,p,y){return Et(Et(d,p[y-1]),Et(p[y+0],p[y+1]))},S.Predictor11=function(d,p,y){var w=p[y+0];return 0>=zt(w>>24&255,d>>24&255,(p=p[y-1])>>24&255)+zt(w>>16&255,d>>16&255,p>>16&255)+zt(w>>8&255,d>>8&255,p>>8&255)+zt(255&w,255&d,255&p)?w:d},S.Predictor12=function(d,p,y){var w=p[y+0];return(vn((d>>24&255)+(w>>24&255)-((p=p[y-1])>>24&255))<<24|vn((d>>16&255)+(w>>16&255)-(p>>16&255))<<16|vn((d>>8&255)+(w>>8&255)-(p>>8&255))<<8|vn((255&d)+(255&w)-(255&p)))>>>0},S.Predictor13=function(d,p,y){var w=p[y-1];return(Qt((d=Et(d,p[y+0]))>>24&255,w>>24&255)<<24|Qt(d>>16&255,w>>16&255)<<16|Qt(d>>8&255,w>>8&255)<<8|Qt(255&d,255&w))>>>0};var p0=S.PredictorAdd0;S.PredictorAdd1=Lt,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var lp=S.PredictorAdd2;It("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),It("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Qr,X_=S.ColorIndexInverseTransform,Nc=S.MapARGB,Pc=S.VP8LColorIndexInverseTransformAlpha,g0=S.MapAlpha,m0=S.VP8LPredictorsAdd=[];m0.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var v0,y0,Ou,Fu,Lu,wf,Vu,bf,ha,kc,jn,ar,Zr,Ei,Fl,_0,up,J_,aO,cO,lO,uO,dO,fO,w0,hO,pO,gO,mO=o(511),vO=o(2041),yO=o(225),_O=o(767),wO=0,RE=vO,e1=yO,Os=_O,pa=mO,t1=0,n1=1,bO=2,r1=3,i1=4,OE=5,xO=6,FE=7,LE=8,o1=9,VE=10,U$=[2,3,7],z$=[3,3,11],CO=[280,256,256,256,40],q$=[0,1,1,1,0],H$=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$$=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],G$=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],W$=8,jE=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],BE=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],b0=null,K$=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Y$=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],EO=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Q$=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Z$=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],X$=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],J$=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ju=[],Ua=[],Ll=[],eG=1,IO=2,Bu=[],ga=[];da("UpsampleRgbLinePair",B,3),da("UpsampleBgrLinePair",le,3),da("UpsampleRgbaLinePair",Wt,4),da("UpsampleBgraLinePair",Or,4),da("UpsampleArgbLinePair",Tn,4),da("UpsampleRgba4444LinePair",Ze,2),da("UpsampleRgb565LinePair",Ee,2);var tG=S.UpsampleRgbLinePair,nG=S.UpsampleBgrLinePair,SO=S.UpsampleRgbaLinePair,AO=S.UpsampleBgraLinePair,DO=S.UpsampleArgbLinePair,TO=S.UpsampleRgba4444LinePair,rG=S.UpsampleRgb565LinePair,s1=16,a1=1<<s1-1,x0=-227,UE=482,MO=6,iG=(256<<MO)-1,NO=0,oG=o(256),sG=o(256),aG=o(256),cG=o(256),lG=o(UE-x0),uG=o(UE-x0);hr("YuvToRgbRow",B,3),hr("YuvToBgrRow",le,3),hr("YuvToRgbaRow",Wt,4),hr("YuvToBgraRow",Or,4),hr("YuvToArgbRow",Tn,4),hr("YuvToRgba4444Row",Ze,2),hr("YuvToRgb565Row",Ee,2);var PO=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],c1=[0,2,8],dG=[8,7,6,4,4,2,2,2,1,1,1,1],fG=1;this.WebPDecodeRGBA=function(d,p,y,w,R){var F=n1,L=new ke,U=new tn;L.ba=U,U.S=F,U.width=[U.width],U.height=[U.height];var H=U.width,Z=U.height,se=new jt;if(se==null||d==null)var ve=2;else e(se!=null),ve=fa(d,p,y,se.width,se.height,se.Pd,se.Qd,se.format,null);if(ve!=0?H=0:(H!=null&&(H[0]=se.width[0]),Z!=null&&(Z[0]=se.height[0]),H=1),H){U.width=U.width[0],U.height=U.height[0],w!=null&&(w[0]=U.width),R!=null&&(R[0]=U.height);e:{if(w=new Ac,(R=new ze).data=d,R.w=p,R.ha=y,R.kd=1,p=[0],e(R!=null),((d=fa(R.data,R.w,R.ha,null,null,null,p,null,R))==0||d==7)&&p[0]&&(d=4),(p=d)==0){if(e(L!=null),w.data=R.data,w.w=R.w+R.offset,w.ha=R.ha-R.offset,w.put=Pt,w.ac=Is,w.bc=oa,w.ma=L,R.xa){if((d=fo())==null){L=1;break e}if((function(X,ce){var ge=[0],Pe=[0],me=[0];t:for(;;){if(X==null)return 0;if(ce==null)return X.a=2,0;if(X.l=ce,X.a=0,Ae(X.m,ce.data,ce.w,ce.ha),!vr(X.m,ge,Pe,me)){X.a=3;break t}if(X.xb=IO,ce.width=ge[0],ce.height=Pe[0],!As(ge[0],Pe[0],1,X,null))break t;return 1}return e(X.a!=0),0})(d,w)){if(w=(p=Pu(w.width,w.height,L.Oa,L.ba))==0){t:{w=d;n:for(;;){if(w==null){w=0;break t}if(e(w.s.yc!=null),e(w.s.Ya!=null),e(0<w.s.Wb),e((y=w.l)!=null),e((R=y.ma)!=null),w.xb!=0){if(w.ca=R.ba,w.tb=R.tb,e(w.ca!=null),!Rl(R.Oa,y,r1)){w.a=2;break n}if(!Ec(w,y.width)||y.da)break n;if((y.da||Bt(w.ca.S))&&yr(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&yr()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!$(w.s.vb,w.s.Wa.Xa)){w.a=1;break n}w.xb=0}if(!Ro(w,w.V,w.Ba,w.c,w.i,y.o,Cc))break n;R.Dc=w.Ma,w=1;break t}e(w.a!=0),w=0}w=!w}w&&(p=d.a)}else p=d.a}else{if((d=new hf)==null){L=1;break e}if(d.Fa=R.na,d.P=R.P,d.qc=R.Sa,aa(d,w)){if((p=Pu(w.width,w.height,L.Oa,L.ba))==0){if(d.Aa=0,y=L.Oa,e((R=d)!=null),y!=null){if(0<(H=0>(H=y.Md)?0:100<H?255:255*H/100)){for(Z=se=0;4>Z;++Z)12>(ve=R.pb[Z]).lc&&(ve.ia=H*dG[0>ve.lc?0:ve.lc]>>3),se|=ve.ia;se&&(alert("todo:VP8InitRandom"),R.ia=1)}R.Ga=y.Id,100<R.Ga?R.Ga=100:0>R.Ga&&(R.Ga=0)}(function(X,ce){if(X==null)return 0;if(ce==null)return kr(X,2,"NULL VP8Io parameter in VP8Decode().");if(!X.cb&&!aa(X,ce))return 0;if(e(X.cb),ce.ac==null||ce.ac(ce)){ce.ob&&(X.L=0);var ge=c1[X.L];if(X.L==2?(X.yb=0,X.zb=0):(X.yb=ce.v-ge>>4,X.zb=ce.j-ge>>4,0>X.yb&&(X.yb=0),0>X.zb&&(X.zb=0)),X.Va=ce.o+15+ge>>4,X.Hb=ce.va+15+ge>>4,X.Hb>X.za&&(X.Hb=X.za),X.Va>X.Ub&&(X.Va=X.Ub),0<X.L){var Pe=X.ed;for(ge=0;4>ge;++ge){var me;if(X.Qa.Cb){var Re=X.Qa.Lb[ge];X.Qa.Fb||(Re+=Pe.Tb)}else Re=Pe.Tb;for(me=0;1>=me;++me){var Le=X.gd[ge][me],Ge=Re;if(Pe.Pc&&(Ge+=Pe.vd[0],me&&(Ge+=Pe.od[0])),0<(Ge=0>Ge?0:63<Ge?63:Ge)){var He=Ge;0<Pe.wb&&(He=4<Pe.wb?He>>2:He>>1)>9-Pe.wb&&(He=9-Pe.wb),1>He&&(He=1),Le.dd=He,Le.tc=2*Ge+He,Le.ld=40<=Ge?2:15<=Ge?1:0}else Le.tc=0;Le.La=me}}}ge=0}else kr(X,6,"Frame setup failed"),ge=X.a;if(ge=ge==0){if(ge){X.$c=0,0<X.Aa||(X.Ic=fG);t:{ge=X.Ic,Pe=4*(He=X.za);var Dt=32*He,pt=He+1,hn=0<X.L?He*(0<X.Aa?2:1):0,bt=(X.Aa==2?2:1)*He;if((Le=Pe+832+(me=3*(16*ge+c1[X.L])/2*Dt)+(Re=X.Fa!=null&&0<X.Fa.length?X.Kc.c*X.Kc.i:0))!=Le)ge=0;else{if(Le>X.Vb){if(X.Vb=0,X.Ec=o(Le),X.Fc=0,X.Ec==null){ge=kr(X,1,"no memory during frame initialization.");break t}X.Vb=Le}Le=X.Ec,Ge=X.Fc,X.Ac=Le,X.Bc=Ge,Ge+=Pe,X.Gd=s(Dt,df),X.Hd=0,X.rb=s(pt+1,Oa),X.sb=1,X.wa=hn?s(hn,ho):null,X.Y=0,X.D.Nb=0,X.D.wa=X.wa,X.D.Y=X.Y,0<X.Aa&&(X.D.Y+=He),e(!0),X.oc=Le,X.pc=Ge,Ge+=832,X.ya=s(bt,Al),X.aa=0,X.D.ya=X.ya,X.D.aa=X.aa,X.Aa==2&&(X.D.aa+=He),X.R=16*He,X.B=8*He,He=(Dt=c1[X.L])*X.R,Dt=Dt/2*X.B,X.sa=Le,X.ta=Ge+He,X.qa=X.sa,X.ra=X.ta+16*ge*X.R+Dt,X.Ha=X.qa,X.Ia=X.ra+8*ge*X.B+Dt,X.$c=0,Ge+=me,X.mb=Re?Le:null,X.nb=Re?Ge:null,e(Ge+Re<=X.Fc+X.Vb),gf(X),i(X.Ac,X.Bc,0,Pe),ge=1}}if(ge){if(ce.ka=0,ce.y=X.sa,ce.O=X.ta,ce.f=X.qa,ce.N=X.ra,ce.ea=X.Ha,ce.Vd=X.Ia,ce.fa=X.R,ce.Rc=X.B,ce.F=null,ce.J=0,!wO){for(ge=-255;255>=ge;++ge)mO[255+ge]=0>ge?-ge:ge;for(ge=-1020;1020>=ge;++ge)vO[1020+ge]=-128>ge?-128:127<ge?127:ge;for(ge=-112;112>=ge;++ge)yO[112+ge]=-16>ge?-16:15<ge?15:ge;for(ge=-255;510>=ge;++ge)_O[255+ge]=0>ge?0:255<ge?255:ge;wO=1}Vu=ca,bf=Su,kc=Ts,jn=Vn,ar=Dl,ha=Iu,Zr=yf,Ei=ja,Fl=k,_0=Q,up=kl,J_=v,aO=re,cO=ue,lO=ua,uO=Mu,dO=as,fO=vf,Ua[0]=u0,Ua[1]=a0,Ua[2]=Dc,Ua[3]=l0,Ua[4]=Fa,Ua[5]=d0,Ua[6]=ji,Ua[7]=f0,Ua[8]=Tc,Ua[9]=la,ju[0]=Tl,ju[1]=c0,ju[2]=mf,ju[3]=op,ju[4]=po,ju[5]=Au,ju[6]=sp,Ll[0]=ap,Ll[1]=ip,Ll[2]=Mc,Ll[3]=Ml,Ll[4]=tr,Ll[5]=Nl,Ll[6]=cp,ge=1}else ge=0}ge&&(ge=(function(Cn,Ii){for(Cn.M=0;Cn.M<Cn.Va;++Cn.M){var pn,xt=Cn.Jc[Cn.M&Cn.Xb],rt=Cn.m,Xr=Cn;for(pn=0;pn<Xr.za;++pn){var on=rt,An=Xr,_r=An.Ac,Ki=An.Bc+4*pn,Vo=An.zc,qr=An.ya[An.aa+pn];if(An.Qa.Bb?qr.$b=Me(on,An.Pa.jb[0])?2+Me(on,An.Pa.jb[2]):Me(on,An.Pa.jb[1]):qr.$b=0,An.kc&&(qr.Ad=Me(on,An.Bd)),qr.Za=!Me(on,145)+0,qr.Za){var go=qr.Ob,jo=0;for(An=0;4>An;++An){var Si,Mn=Vo[0+An];for(Si=0;4>Si;++Si){Mn=Z$[_r[Ki+Si]][Mn];for(var Hn=EO[Me(on,Mn[0])];0<Hn;)Hn=EO[2*Hn+Me(on,Mn[Hn])];Mn=-Hn,_r[Ki+Si]=Mn}r(go,jo,_r,Ki,4),jo+=4,Vo[0+An]=Mn}}else Mn=Me(on,156)?Me(on,128)?1:3:Me(on,163)?2:0,qr.Ob[0]=Mn,i(_r,Ki,Mn,4),i(Vo,0,Mn,4);qr.Dd=Me(on,142)?Me(on,114)?Me(on,183)?1:3:2:0}if(Xr.m.Ka)return kr(Cn,7,"Premature end-of-partition0 encountered.");for(;Cn.ja<Cn.za;++Cn.ja){if(Xr=xt,on=(rt=Cn).rb[rt.sb-1],_r=rt.rb[rt.sb+rt.ja],pn=rt.ya[rt.aa+rt.ja],Ki=rt.kc?pn.Ad:0)on.la=_r.la=0,pn.Za||(on.Na=_r.Na=0),pn.Hc=0,pn.Gc=0,pn.ia=0;else{var Hr,$n;if(on=_r,_r=Xr,Ki=rt.Pa.Xc,Vo=rt.ya[rt.aa+rt.ja],qr=rt.pb[Vo.$b],An=Vo.ad,go=0,jo=rt.rb[rt.sb-1],Mn=Si=0,i(An,go,0,384),Vo.Za)var Yi=0,za=Ki[3];else{Hn=o(16);var Jr=on.Na+jo.Na;if(Jr=b0(_r,Ki[1],Jr,qr.Eb,0,Hn,0),on.Na=jo.Na=(0<Jr)+0,1<Jr)Vu(Hn,0,An,go);else{var ls=Hn[0]+3>>3;for(Hn=0;256>Hn;Hn+=16)An[go+Hn]=ls}Yi=1,za=Ki[0]}var cr=15&on.la,Ai=15&jo.la;for(Hn=0;4>Hn;++Hn){var Fs=1&Ai;for(ls=$n=0;4>ls;++ls)cr=cr>>1|(Fs=(Jr=b0(_r,za,Jr=Fs+(1&cr),qr.Sc,Yi,An,go))>Yi)<<7,$n=$n<<2|(3<Jr?3:1<Jr?2:An[go+0]!=0),go+=16;cr>>=4,Ai=Ai>>1|Fs<<7,Si=(Si<<8|$n)>>>0}for(za=cr,Yi=Ai>>4,Hr=0;4>Hr;Hr+=2){for($n=0,cr=on.la>>4+Hr,Ai=jo.la>>4+Hr,Hn=0;2>Hn;++Hn){for(Fs=1&Ai,ls=0;2>ls;++ls)Jr=Fs+(1&cr),cr=cr>>1|(Fs=0<(Jr=b0(_r,Ki[2],Jr,qr.Qc,0,An,go)))<<3,$n=$n<<2|(3<Jr?3:1<Jr?2:An[go+0]!=0),go+=16;cr>>=2,Ai=Ai>>1|Fs<<5}Mn|=$n<<4*Hr,za|=cr<<4<<Hr,Yi|=(240&Ai)<<Hr}on.la=za,jo.la=Yi,Vo.Hc=Si,Vo.Gc=Mn,Vo.ia=43690&Mn?0:qr.ia,Ki=!(Si|Mn)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[pn.$b][pn.Za],rt.wa[rt.Y+rt.ja].La|=!Ki),Xr.Ka)return kr(Cn,7,"Premature end-of-file encountered.")}if(gf(Cn),rt=Ii,Xr=1,pn=(xt=Cn).D,on=0<xt.L&&xt.M>=xt.zb&&xt.M<=xt.Va,xt.Aa==0)t:{if(pn.M=xt.M,pn.uc=on,Er(xt,pn),Xr=1,pn=($n=xt.D).Nb,on=(Mn=c1[xt.L])*xt.R,_r=Mn/2*xt.B,Hn=16*pn*xt.R,ls=8*pn*xt.B,Ki=xt.sa,Vo=xt.ta-on+Hn,qr=xt.qa,An=xt.ra-_r+ls,go=xt.Ha,jo=xt.Ia-_r+ls,Ai=(cr=$n.M)==0,Si=cr>=xt.Va-1,xt.Aa==2&&Er(xt,$n),$n.uc)for(Fs=(Jr=xt).D.M,e(Jr.D.uc),$n=Jr.yb;$n<Jr.Hb;++$n){Yi=$n,za=Fs;var Bo=(Ls=(Qi=Jr).D).Nb;Hr=Qi.R;var Ls=Ls.wa[Ls.Y+Yi],Vs=Qi.sa,us=Qi.ta+16*Bo*Hr+16*Yi,js=Ls.dd,pr=Ls.tc;if(pr!=0)if(e(3<=pr),Qi.L==1)0<Yi&&uO(Vs,us,Hr,pr+4),Ls.La&&fO(Vs,us,Hr,pr),0<za&&lO(Vs,us,Hr,pr+4),Ls.La&&dO(Vs,us,Hr,pr);else{var Bs=Qi.B,qa=Qi.qa,xf=Qi.ra+8*Bo*Bs+8*Yi,Vl=Qi.Ha,Qi=Qi.Ia+8*Bo*Bs+8*Yi;Bo=Ls.ld,0<Yi&&(Ei(Vs,us,Hr,pr+4,js,Bo),_0(qa,xf,Vl,Qi,Bs,pr+4,js,Bo)),Ls.La&&(J_(Vs,us,Hr,pr,js,Bo),cO(qa,xf,Vl,Qi,Bs,pr,js,Bo)),0<za&&(Zr(Vs,us,Hr,pr+4,js,Bo),Fl(qa,xf,Vl,Qi,Bs,pr+4,js,Bo)),Ls.La&&(up(Vs,us,Hr,pr,js,Bo),aO(qa,xf,Vl,Qi,Bs,pr,js,Bo))}}if(xt.ia&&alert("todo:DitherRow"),rt.put!=null){if($n=16*cr,cr=16*(cr+1),Ai?(rt.y=xt.sa,rt.O=xt.ta+Hn,rt.f=xt.qa,rt.N=xt.ra+ls,rt.ea=xt.Ha,rt.W=xt.Ia+ls):($n-=Mn,rt.y=Ki,rt.O=Vo,rt.f=qr,rt.N=An,rt.ea=go,rt.W=jo),Si||(cr-=Mn),cr>rt.o&&(cr=rt.o),rt.F=null,rt.J=null,xt.Fa!=null&&0<xt.Fa.length&&$n<cr&&(rt.J=qn(xt,rt,$n,cr-$n),rt.F=xt.mb,rt.F==null&&rt.F.length==0)){Xr=kr(xt,3,"Could not decode alpha data.");break t}$n<rt.j&&(Mn=rt.j-$n,$n=rt.j,e(!(1&Mn)),rt.O+=xt.R*Mn,rt.N+=xt.B*(Mn>>1),rt.W+=xt.B*(Mn>>1),rt.F!=null&&(rt.J+=rt.width*Mn)),$n<cr&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=$n-rt.j,rt.U=rt.va-rt.v,rt.T=cr-$n,Xr=rt.put(rt))}pn+1!=xt.Ic||Si||(r(xt.sa,xt.ta-on,Ki,Vo+16*xt.R,on),r(xt.qa,xt.ra-_r,qr,An+8*xt.B,_r),r(xt.Ha,xt.Ia-_r,go,jo+8*xt.B,_r))}if(!Xr)return kr(Cn,6,"Output aborted.")}return 1})(X,ce)),ce.bc!=null&&ce.bc(ce),ge&=1}return ge?(X.cb=0,ge):0})(d,w)||(p=d.a)}}else p=d.a}p==0&&L.Oa!=null&&L.Oa.fd&&(p=h0(L.ba))}L=p}F=L!=0?null:11>F?U.f.RGBA.eb:U.f.kb.y}else F=null;return F};var kO=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(S,V){for(var x="",A=0;A<4;A++)x+=String.fromCharCode(S[V++]);return x}function u(S,V){return S[V+0]|S[V+1]<<8}function h(S,V){return(S[V+0]|S[V+1]<<8|S[V+2]<<16)>>>0}function m(S,V){return(S[V+0]|S[V+1]<<8|S[V+2]<<16|S[V+3]<<24)>>>0}new c;var g=[0],b=[0],I=[],T=new c,N=n,Y=(function(S,V){var x={},A=0,D=!1,te=0,_e=0;if(x.frames=[],!(function(O,G){for(var J=0;J<4;J++)if(O[G+J]!="RIFF".charCodeAt(J))return!0;return!1})(S,V)){for(m(S,V+=4),V+=8;V<S.length;){var Te=l(S,V),Ce=m(S,V+=4);V+=4;var fe=Ce+(1&Ce);switch(Te){case"VP8 ":case"VP8L":x.frames[A]===void 0&&(x.frames[A]={}),(Fe=x.frames[A]).src_off=D?_e:V-8,Fe.src_size=te+Ce+8,A++,D&&(D=!1,te=0,_e=0);break;case"VP8X":(Fe=x.header={}).feature_flags=S[V];var Ae=V+4;Fe.canvas_width=1+h(S,Ae),Ae+=3,Fe.canvas_height=1+h(S,Ae),Ae+=3;break;case"ALPH":D=!0,te=fe+8,_e=V-8;break;case"ANIM":(Fe=x.header).bgcolor=m(S,V),Ae=V+4,Fe.loop_count=u(S,Ae),Ae+=2;break;case"ANMF":var Be,Fe;(Fe=x.frames[A]={}).offset_x=2*h(S,V),V+=3,Fe.offset_y=2*h(S,V),V+=3,Fe.width=1+h(S,V),V+=3,Fe.height=1+h(S,V),V+=3,Fe.duration=h(S,V),V+=3,Be=S[V++],Fe.dispose=1&Be,Fe.blend=Be>>1&1}Te!="ANMF"&&(V+=fe)}return x}})(N,0);Y.response=N,Y.rgbaoutput=!0,Y.dataurl=!1;var j=Y.header?Y.header:null,W=Y.frames?Y.frames:null;if(j){j.loop_counter=j.loop_count,g=[j.canvas_height],b=[j.canvas_width];for(var oe=0;oe<W.length&&W[oe].blend!=0;oe++);}var he=W[0],z=T.WebPDecodeRGBA(N,he.src_off,he.src_size,b,g);he.rgba=z,he.imgwidth=b[0],he.imgheight=g[0];for(var M=0;M<b[0]*g[0]*4;M++)I[M]=z[M];return this.width=b,this.height=g,this.data=I,this}(function(n){var e,t,r,i,o,s,a,c,l,u=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new s,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new s,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,l=new u}]);var h=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=O;Object.defineProperty(this,"pdf",{get:function(){return G}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function($){J=!!$}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function($){ie=!!$}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function($){isNaN($)||(ae=$)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function($){isNaN($)||(pe=$)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function($){var Ke;typeof $=="number"?Ke=[$,$,$,$]:((Ke=new Array(4))[0]=$[0],Ke[1]=$.length>=2?$[1]:Ke[0],Ke[2]=$.length>=3?$[2]:Ke[0],Ke[3]=$.length>=4?$[3]:Ke[1]),l.margin=Ke}});var Se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Se},set:function($){Se=$}});var ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return ye},set:function($){ye=$}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function($){Me=$}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function($){$ instanceof u&&(l=$)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function($){l.path=$}});var Ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ue},set:function($){Ue=$}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function($){var Ke;Ke=m($),this.ctx.fillStyle=Ke.style,this.ctx.isFillTransparent=Ke.a===0,this.ctx.fillOpacity=Ke.a,this.pdf.setFillColor(Ke.r,Ke.g,Ke.b,{a:Ke.a}),this.pdf.setTextColor(Ke.r,Ke.g,Ke.b,{a:Ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function($){var Ke=m($);this.ctx.strokeStyle=Ke.style,this.ctx.isStrokeTransparent=Ke.a===0,this.ctx.strokeOpacity=Ke.a,Ke.a===0?this.pdf.setDrawColor(255,255,255):(Ke.a,this.pdf.setDrawColor(Ke.r,Ke.g,Ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function($){["butt","round","square"].indexOf($)!==-1&&(this.ctx.lineCap=$,this.pdf.setLineCap($))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function($){isNaN($)||(this.ctx.lineWidth=$,this.pdf.setLineWidth($))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function($){["bevel","round","miter"].indexOf($)!==-1&&(this.ctx.lineJoin=$,this.pdf.setLineJoin($))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function($){isNaN($)||(this.ctx.miterLimit=$,this.pdf.setMiterLimit($))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function($){this.ctx.textBaseline=$}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function($){["right","end","center","left","start"].indexOf($)!==-1&&(this.ctx.textAlign=$)}});var et=null,We=null,ot=null;Object.defineProperty(this,"fontFaces",{get:function(){return ot},set:function($){et=null,We=null,ot=$}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function($){var Ke;if(this.ctx.font=$,(Ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec($))!==null){var Ft=Ke[1];Ke[2];var Ct=Ke[3],qe=Ke[4];Ke[5];var At=Ke[6],st=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(qe)[2];qe=Math.floor(st==="px"?parseFloat(qe)*this.pdf.internal.scaleFactor:st==="em"?parseFloat(qe)*this.pdf.getFontSize():parseFloat(qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(qe);var yt=(function(It){var Pr,yn,an=[],cn=It.trim();if(cn==="")return Pk;if(cn in _z)return[_z[cn]];for(;cn!=="";){switch(yn=null,Pr=(cn=bz(cn)).charAt(0)){case'"':case"'":yn=Fle(cn.substring(1),Pr);break;default:yn=Lle(cn)}if(yn===null||(an.push(yn[0]),(cn=bz(yn[1]))!==""&&cn.charAt(0)!==","))return Pk;cn=cn.replace(/^,/,"")}return an})(At);if(this.fontFaces){var Et=(function(It,Pr){var yn=It.getFontList(),an=JSON.stringify(yn);if(et===null||We!==an){var cn=(function(Xn){var kt=[];return Object.keys(Xn).forEach(function(Jn){Xn[Jn].forEach(function(Bt){var Zt=null;switch(Bt){case"bold":Zt={family:Jn,weight:"bold"};break;case"italic":Zt={family:Jn,style:"italic"};break;case"bolditalic":Zt={family:Jn,weight:"bold",style:"italic"};break;case"":case"normal":Zt={family:Jn}}Zt!==null&&(Zt.ref={name:Jn,style:Bt},kt.push(Zt))})}),kt})(yn);et=(function(Xn){for(var kt={},Jn=0;Jn<Xn.length;++Jn){var Bt=Nk(Xn[Jn]),Zt=Bt.family,sr=Bt.stretch,tn=Bt.style,jt=Bt.weight;kt[Zt]=kt[Zt]||{},kt[Zt][sr]=kt[Zt][sr]||{},kt[Zt][sr][tn]=kt[Zt][sr][tn]||{},kt[Zt][sr][tn][jt]=Bt}return kt})(cn.concat(Pr)),We=an}return et})(this.pdf,this.fontFaces),vn=yt.map(function(It){return{family:It,stretch:"normal",weight:Ct,style:Ft}}),Qt=(function(It,Pr,yn){for(var an=(yn=yn||{}).defaultFontFamily||"times",cn=Object.assign({},Ole,yn.genericFontFamilies||{}),Xn=null,kt=null,Jn=0;Jn<Pr.length;++Jn)if(cn[(Xn=Nk(Pr[Jn])).family]&&(Xn.family=cn[Xn.family]),It.hasOwnProperty(Xn.family)){kt=It[Xn.family];break}if(!(kt=kt||It[an]))throw new Error("Could not find a font-family for the rule '"+wz(Xn)+"' and default family '"+an+"'.");if(kt=(function(Bt,Zt){if(Zt[Bt])return Zt[Bt];var sr=Vk[Bt],tn=sr<=Vk.normal?-1:1,jt=yz(Zt,Hz,sr,tn);if(!jt)throw new Error("Could not find a matching font-stretch value for "+Bt);return jt})(Xn.stretch,kt),kt=(function(Bt,Zt){if(Zt[Bt])return Zt[Bt];for(var sr=qz[Bt],tn=0;tn<sr.length;++tn)if(Zt[sr[tn]])return Zt[sr[tn]];throw new Error("Could not find a matching font-style for "+Bt)})(Xn.style,kt),!(kt=(function(Bt,Zt){if(Zt[Bt])return Zt[Bt];if(Bt===400&&Zt[500])return Zt[500];if(Bt===500&&Zt[400])return Zt[400];var sr=Rle[Bt],tn=yz(Zt,$z,sr,Bt<400?-1:1);if(!tn)throw new Error("Could not find a matching font-weight for value "+Bt);return tn})(Xn.weight,kt)))throw new Error("Failed to resolve a font for the rule '"+wz(Xn)+"'.");return kt})(Et,vn);this.pdf.setFont(Qt.ref.name,Qt.ref.style)}else{var zt="";(Ct==="bold"||parseInt(Ct,10)>=700||Ft==="bold")&&(zt="bold"),Ft==="italic"&&(zt+="italic"),zt.length===0&&(zt="normal");for(var Lt="",Vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},mt=0;mt<yt.length;mt++){if(this.pdf.internal.getFont(yt[mt],zt,{noFallback:!0,disableWarning:!0})!==void 0){Lt=yt[mt];break}if(zt==="bolditalic"&&this.pdf.internal.getFont(yt[mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Lt=yt[mt],zt="bold";else if(this.pdf.internal.getFont(yt[mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Lt=yt[mt],zt="normal";break}}if(Lt===""){for(var Xt=0;Xt<yt.length;Xt++)if(Vt[yt[Xt]]){Lt=Vt[yt[Xt]];break}}Lt=Lt===""?"Times":Lt,this.pdf.setFont(Lt,zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function($){this.ctx.globalCompositeOperation=$}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function($){this.ctx.globalAlpha=$}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function($){this.ctx.lineDashOffset=$,Fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function($){this.ctx.lineDash=$,Fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function($){this.ctx.ignoreClearRect=!!$}})};h.prototype.setLineDash=function(O){this.lineDash=O},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){W.call(this,"fill",!1)},h.prototype.stroke=function(){W.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(O,G){if(isNaN(O)||isNaN(G))throw dr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new s(O,G));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(O,G)},h.prototype.closePath=function(){var O=new s(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&Un(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){O=new s(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(O.x,O.y)},h.prototype.lineTo=function(O,G){if(isNaN(O)||isNaN(G))throw dr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new s(O,G));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(J.x,J.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},h.prototype.quadraticCurveTo=function(O,G,J,ie){if(isNaN(J)||isNaN(ie)||isNaN(O)||isNaN(G))throw dr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new s(J,ie)),pe=this.ctx.transform.applyToPoint(new s(O,G));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new s(ae.x,ae.y)},h.prototype.bezierCurveTo=function(O,G,J,ie,ae,pe){if(isNaN(ae)||isNaN(pe)||isNaN(O)||isNaN(G)||isNaN(J)||isNaN(ie))throw dr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Se=this.ctx.transform.applyToPoint(new s(ae,pe)),ye=this.ctx.transform.applyToPoint(new s(O,G)),Me=this.ctx.transform.applyToPoint(new s(J,ie));this.path.push({type:"bct",x1:ye.x,y1:ye.y,x2:Me.x,y2:Me.y,x:Se.x,y:Se.y}),this.ctx.lastPoint=new s(Se.x,Se.y)},h.prototype.arc=function(O,G,J,ie,ae,pe){if(isNaN(O)||isNaN(G)||isNaN(J)||isNaN(ie)||isNaN(ae))throw dr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var Se=this.ctx.transform.applyToPoint(new s(O,G));O=Se.x,G=Se.y;var ye=this.ctx.transform.applyToPoint(new s(0,J)),Me=this.ctx.transform.applyToPoint(new s(0,0));J=Math.sqrt(Math.pow(ye.x-Me.x,2)+Math.pow(ye.y-Me.y,2))}Math.abs(ae-ie)>=2*Math.PI&&(ie=0,ae=2*Math.PI),this.path.push({type:"arc",x:O,y:G,radius:J,startAngle:ie,endAngle:ae,counterclockwise:pe})},h.prototype.arcTo=function(O,G,J,ie,ae){throw new Error("arcTo not implemented.")},h.prototype.rect=function(O,G,J,ie){if(isNaN(O)||isNaN(G)||isNaN(J)||isNaN(ie))throw dr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,G),this.lineTo(O+J,G),this.lineTo(O+J,G+ie),this.lineTo(O,G+ie),this.lineTo(O,G),this.lineTo(O+J,G),this.lineTo(O,G)},h.prototype.fillRect=function(O,G,J,ie){if(isNaN(O)||isNaN(G)||isNaN(J)||isNaN(ie))throw dr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,G,J,ie),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},h.prototype.strokeRect=function(O,G,J,ie){if(isNaN(O)||isNaN(G)||isNaN(J)||isNaN(ie))throw dr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(O,G,J,ie),this.stroke())},h.prototype.clearRect=function(O,G,J,ie){if(isNaN(O)||isNaN(G)||isNaN(J)||isNaN(ie))throw dr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,G,J,ie))},h.prototype.save=function(O){O=typeof O!="boolean"||O;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},h.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(G),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(O){var G,J,ie,ae;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))G=0,J=0,ie=0,ae=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(pe!==null)G=parseInt(pe[1]),J=parseInt(pe[2]),ie=parseInt(pe[3]),ae=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)G=parseInt(pe[1]),J=parseInt(pe[2]),ie=parseInt(pe[3]),ae=parseFloat(pe[4]);else{if(ae=1,typeof O=="string"&&O.charAt(0)!=="#"){var Se=new Fz(O);O=Se.ok?Se.toHex():"#000000"}O.length===4?(G=O.substring(1,2),G+=G,J=O.substring(2,3),J+=J,ie=O.substring(3,4),ie+=ie):(G=O.substring(1,3),J=O.substring(3,5),ie=O.substring(5,7)),G=parseInt(G,16),J=parseInt(J,16),ie=parseInt(ie,16)}}return{r:G,g:J,b:ie,a:ae,style:O}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(O,G,J,ie){if(isNaN(G)||isNaN(J)||typeof O!="string")throw dr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!g.call(this)){var ae=fe(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;A.call(this,{text:O,x:G,y:J,scale:pe,angle:ae,align:this.textAlign,maxWidth:ie})}},h.prototype.strokeText=function(O,G,J,ie){if(isNaN(G)||isNaN(J)||typeof O!="string")throw dr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){ie=isNaN(ie)?void 0:ie;var ae=fe(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;A.call(this,{text:O,x:G,y:J,scale:pe,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:ie})}},h.prototype.measureText=function(O){if(typeof O!="string")throw dr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,J=this.pdf.internal.scaleFactor,ie=G.internal.getFontSize(),ae=G.getStringUnitWidth(O)*ie/G.internal.scaleFactor;return new function(pe){var Se=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Se}}),this}({width:ae*=Math.round(96*J/72*1e4)/1e4})},h.prototype.scale=function(O,G){if(isNaN(O)||isNaN(G))throw dr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(O,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.rotate=function(O){if(isNaN(O))throw dr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},h.prototype.translate=function(O,G){if(isNaN(O)||isNaN(G))throw dr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,O,G);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.transform=function(O,G,J,ie,ae,pe){if(isNaN(O)||isNaN(G)||isNaN(J)||isNaN(ie)||isNaN(ae)||isNaN(pe))throw dr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Se=new c(O,G,J,ie,ae,pe);this.ctx.transform=this.ctx.transform.multiply(Se)},h.prototype.setTransform=function(O,G,J,ie,ae,pe){O=isNaN(O)?1:O,G=isNaN(G)?0:G,J=isNaN(J)?0:J,ie=isNaN(ie)?1:ie,ae=isNaN(ae)?0:ae,pe=isNaN(pe)?0:pe,this.ctx.transform=new c(O,G,J,ie,ae,pe)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(O,G,J,ie,ae,pe,Se,ye,Me){var Ue=this.pdf.getImageProperties(O),et=1,We=1,ot=1,$=1;ie!==void 0&&ye!==void 0&&(ot=ye/ie,$=Me/ae,et=Ue.width/ie*ye/ie,We=Ue.height/ae*Me/ae),pe===void 0&&(pe=G,Se=J,G=0,J=0),ie!==void 0&&ye===void 0&&(ye=ie,Me=ae),ie===void 0&&ye===void 0&&(ye=Ue.width,Me=Ue.height);var Ke=this.ctx.transform.decompose(),Ft=fe(Ke.rotate.shx),Ct=new c,qe=(Ct=(Ct=(Ct=Ct.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new a(pe-G*ot,Se-J*$,ie*et,ae*We));if(this.autoPaging){for(var At,st=T.call(this,qe),yt=[],Et=0;Et<st.length;Et+=1)yt.indexOf(st[Et])===-1&&yt.push(st[Et]);j(yt);for(var vn=yt[0],Qt=yt[yt.length-1],zt=vn;zt<Qt+1;zt++){this.pdf.setPage(zt);var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=zt===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=zt===1?0:mt+(zt-2)*Xt;if(this.ctx.clip_path.length!==0){var Pr=this.path;At=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(At,this.posX+this.margin[3],-It+Vt+this.ctx.prevPageLastElemOffset),oe.call(this,"fill",!0),this.path=Pr}var yn=JSON.parse(JSON.stringify(qe));yn=Y([yn],this.posX+this.margin[3],-It+Vt+this.ctx.prevPageLastElemOffset)[0];var an=(zt>vn||zt<Qt)&&I.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,Xt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",yn.x,yn.y,yn.w,yn.h,null,null,Ft),an&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",qe.x,qe.y,qe.w,qe.h,null,null,Ft)};var T=function(O,G,J){var ie=[];G=G||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":ie.push(Math.floor((O.y+ae)/J)+1);break;case"arc":ie.push(Math.floor((O.y+ae-O.radius)/J)+1),ie.push(Math.floor((O.y+ae+O.radius)/J)+1);break;case"qct":var pe=Ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);ie.push(Math.floor((pe.y+ae)/J)+1),ie.push(Math.floor((pe.y+pe.h+ae)/J)+1);break;case"bct":var Se=Be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);ie.push(Math.floor((Se.y+ae)/J)+1),ie.push(Math.floor((Se.y+Se.h+ae)/J)+1);break;case"rect":ie.push(Math.floor((O.y+ae)/J)+1),ie.push(Math.floor((O.y+O.h+ae)/J)+1)}for(var ye=0;ye<ie.length;ye+=1)for(;this.pdf.internal.getNumberOfPages()<ie[ye];)N.call(this);return ie},N=function(){var O=this.fillStyle,G=this.strokeStyle,J=this.font,ie=this.lineCap,ae=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=G,this.font=J,this.lineCap=ie,this.lineWidth=ae,this.lineJoin=pe},Y=function(O,G,J){for(var ie=0;ie<O.length;ie++)switch(O[ie].type){case"bct":O[ie].x2+=G,O[ie].y2+=J;case"qct":O[ie].x1+=G,O[ie].y1+=J;default:O[ie].x+=G,O[ie].y+=J}return O},j=function(O){return O.sort(function(G,J){return G-J})},W=function(O,G){var J=this.fillStyle,ie=this.strokeStyle,ae=this.lineCap,pe=this.lineWidth,Se=Math.abs(pe*this.ctx.transform.scaleX),ye=this.lineJoin;if(this.autoPaging){for(var Me,Ue,et=JSON.parse(JSON.stringify(this.path)),We=JSON.parse(JSON.stringify(this.path)),ot=[],$=0;$<We.length;$++)if(We[$].x!==void 0)for(var Ke=T.call(this,We[$]),Ft=0;Ft<Ke.length;Ft+=1)ot.indexOf(Ke[Ft])===-1&&ot.push(Ke[Ft]);for(var Ct=0;Ct<ot.length;Ct++)for(;this.pdf.internal.getNumberOfPages()<ot[Ct];)N.call(this);j(ot);for(var qe=ot[0],At=ot[ot.length-1],st=qe;st<At+1;st++){this.pdf.setPage(st),this.fillStyle=J,this.strokeStyle=ie,this.lineCap=ae,this.lineWidth=Se,this.lineJoin=ye;var yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=st===1?this.posY+this.margin[0]:this.margin[0],vn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],zt=st===1?0:vn+(st-2)*Qt;if(this.ctx.clip_path.length!==0){var Lt=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(Me,this.posX+this.margin[3],-zt+Et+this.ctx.prevPageLastElemOffset),oe.call(this,O,!0),this.path=Lt}if(Ue=JSON.parse(JSON.stringify(et)),this.path=Y(Ue,this.posX+this.margin[3],-zt+Et+this.ctx.prevPageLastElemOffset),G===!1||st===0){var Vt=(st>qe||st<At)&&I.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,Qt,null).clip().discardPath()),oe.call(this,O,G),Vt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}this.path=et}else this.lineWidth=Se,oe.call(this,O,G),this.lineWidth=pe},oe=function(O,G){if((O!=="stroke"||G||!b.call(this))&&(O==="stroke"||G||!g.call(this))){for(var J,ie,ae=[],pe=this.path,Se=0;Se<pe.length;Se++){var ye=pe[Se];switch(ye.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ye,deltas:[],abs:[]});break;case"lt":var Me=ae.length;if(pe[Se-1]&&!isNaN(pe[Se-1].x)&&(J=[ye.x-pe[Se-1].x,ye.y-pe[Se-1].y],Me>0)){for(;Me>=0;Me--)if(ae[Me-1].close!==!0&&ae[Me-1].begin!==!0){ae[Me-1].deltas.push(J),ae[Me-1].abs.push(ye);break}}break;case"bct":J=[ye.x1-pe[Se-1].x,ye.y1-pe[Se-1].y,ye.x2-pe[Se-1].x,ye.y2-pe[Se-1].y,ye.x-pe[Se-1].x,ye.y-pe[Se-1].y],ae[ae.length-1].deltas.push(J);break;case"qct":var Ue=pe[Se-1].x+2/3*(ye.x1-pe[Se-1].x),et=pe[Se-1].y+2/3*(ye.y1-pe[Se-1].y),We=ye.x+2/3*(ye.x1-ye.x),ot=ye.y+2/3*(ye.y1-ye.y),$=ye.x,Ke=ye.y;J=[Ue-pe[Se-1].x,et-pe[Se-1].y,We-pe[Se-1].x,ot-pe[Se-1].y,$-pe[Se-1].x,Ke-pe[Se-1].y],ae[ae.length-1].deltas.push(J);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ye)}}ie=G?null:O==="stroke"?"stroke":"fill";for(var Ft=!1,Ct=0;Ct<ae.length;Ct++)if(ae[Ct].arc)for(var qe=ae[Ct].abs,At=0;At<qe.length;At++){var st=qe[At];st.type==="arc"?M.call(this,st.x,st.y,st.radius,st.startAngle,st.endAngle,st.counterclockwise,void 0,G,!Ft):D.call(this,st.x,st.y),Ft=!0}else if(ae[Ct].close===!0)this.pdf.internal.out("h"),Ft=!1;else if(ae[Ct].begin!==!0){var yt=ae[Ct].start.x,Et=ae[Ct].start.y;te.call(this,ae[Ct].deltas,yt,Et),Ft=!0}ie&&S.call(this,ie),G&&V.call(this)}},he=function(O){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-J;case"top":return O+G-J;case"hanging":return O+G-2*J;case"middle":return O+G/2-J;default:return O}},z=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(G,J){this.colorStops.push([G,J])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(O,G,J,ie,ae,pe,Se,ye,Me){for(var Ue=Te.call(this,J,ie,ae,pe),et=0;et<Ue.length;et++){var We=Ue[et];et===0&&(Me?x.call(this,We.x1+O,We.y1+G):D.call(this,We.x1+O,We.y1+G)),_e.call(this,O,G,We.x2,We.y2,We.x3,We.y3,We.x4,We.y4)}ye?V.call(this):S.call(this,Se)},S=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},x=function(O,G){this.pdf.internal.out(t(O)+" "+r(G)+" m")},A=function(O){var G;switch(O.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var J,ie,ae,pe=this.pdf.getTextDimensions(O.text),Se=he.call(this,O.y),ye=z.call(this,Se)-pe.h,Me=this.ctx.transform.applyToPoint(new s(O.x,Se));if(this.autoPaging){var Ue=this.ctx.transform.decompose(),et=new c;et=(et=(et=et.multiply(Ue.translate)).multiply(Ue.skew)).multiply(Ue.scale);for(var We=this.ctx.transform.applyToRectangle(new a(O.x,Se,pe.w,pe.h)),ot=et.applyToRectangle(new a(O.x,ye,pe.w,pe.h)),$=T.call(this,ot),Ke=[],Ft=0;Ft<$.length;Ft+=1)Ke.indexOf($[Ft])===-1&&Ke.push($[Ft]);j(Ke);for(var Ct=Ke[0],qe=Ke[Ke.length-1],At=Ct;At<qe+1;At++){this.pdf.setPage(At);var st=At===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[2],vn=Et-this.margin[0],Qt=this.pdf.internal.pageSize.width-this.margin[1],zt=Qt-this.margin[3],Lt=At===1?0:yt+(At-2)*vn;if(this.ctx.clip_path.length!==0){var Vt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(J,this.posX+this.margin[3],-1*Lt+st),oe.call(this,"fill",!0),this.path=Vt}var mt=Y([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-Lt+st+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*O.scale),ae=this.lineWidth,this.lineWidth=ae*O.scale);var Xt=this.autoPaging!=="text";if(Xt||mt.y+mt.h<=Et){if(Xt||mt.y>=st&&mt.x<=Qt){var It=Xt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Qt-mt.x)[0],Pr=Y([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-Lt+st+this.ctx.prevPageLastElemOffset)[0],yn=Xt&&(At>Ct||At<qe)&&I.call(this);yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,vn,null).clip().discardPath()),this.pdf.text(It,Pr.x,Pr.y,{angle:O.angle,align:G,renderingMode:O.renderingMode}),yn&&this.pdf.restoreGraphicsState()}}else mt.y<Et&&(this.ctx.prevPageLastElemOffset+=Et-mt.y);O.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ae)}}else O.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*O.scale),ae=this.lineWidth,this.lineWidth=ae*O.scale),this.pdf.text(O.text,Me.x+this.posX,Me.y+this.posY,{angle:O.angle,align:G,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ae)},D=function(O,G,J,ie){J=J||0,ie=ie||0,this.pdf.internal.out(t(O+J)+" "+r(G+ie)+" l")},te=function(O,G,J){return this.pdf.lines(O,G,J,null,null)},_e=function(O,G,J,ie,ae,pe,Se,ye){this.pdf.internal.out([e(i(J+O)),e(o(ie+G)),e(i(ae+O)),e(o(pe+G)),e(i(Se+O)),e(o(ye+G)),"c"].join(" "))},Te=function(O,G,J,ie){for(var ae=2*Math.PI,pe=Math.PI/2;G>J;)G-=ae;var Se=Math.abs(J-G);Se<ae&&ie&&(Se=ae-Se);for(var ye=[],Me=ie?-1:1,Ue=G;Se>1e-5;){var et=Ue+Me*Math.min(Se,pe);ye.push(Ce.call(this,O,Ue,et)),Se-=Math.abs(et-Ue),Ue=et}return ye},Ce=function(O,G,J){var ie=(J-G)/2,ae=O*Math.cos(ie),pe=O*Math.sin(ie),Se=ae,ye=-pe,Me=Se*Se+ye*ye,Ue=Me+Se*ae+ye*pe,et=4/3*(Math.sqrt(2*Me*Ue)-Ue)/(Se*pe-ye*ae),We=Se-et*ye,ot=ye+et*Se,$=We,Ke=-ot,Ft=ie+G,Ct=Math.cos(Ft),qe=Math.sin(Ft);return{x1:O*Math.cos(G),y1:O*Math.sin(G),x2:We*Ct-ot*qe,y2:We*qe+ot*Ct,x3:$*Ct-Ke*qe,y3:$*qe+Ke*Ct,x4:O*Math.cos(J),y4:O*Math.sin(J)}},fe=function(O){return 180*O/Math.PI},Ae=function(O,G,J,ie,ae,pe){var Se=O+.5*(J-O),ye=G+.5*(ie-G),Me=ae+.5*(J-ae),Ue=pe+.5*(ie-pe),et=Math.min(O,ae,Se,Me),We=Math.max(O,ae,Se,Me),ot=Math.min(G,pe,ye,Ue),$=Math.max(G,pe,ye,Ue);return new a(et,ot,We-et,$-ot)},Be=function(O,G,J,ie,ae,pe,Se,ye){var Me,Ue,et,We,ot,$,Ke,Ft,Ct,qe,At,st,yt,Et,vn=J-O,Qt=ie-G,zt=ae-J,Lt=pe-ie,Vt=Se-ae,mt=ye-pe;for(Ue=0;Ue<41;Ue++)Ct=(Ke=(et=O+(Me=Ue/40)*vn)+Me*((ot=J+Me*zt)-et))+Me*(ot+Me*(ae+Me*Vt-ot)-Ke),qe=(Ft=(We=G+Me*Qt)+Me*(($=ie+Me*Lt)-We))+Me*($+Me*(pe+Me*mt-$)-Ft),Ue==0?(At=Ct,st=qe,yt=Ct,Et=qe):(At=Math.min(At,Ct),st=Math.min(st,qe),yt=Math.max(yt,Ct),Et=Math.max(Et,qe));return new a(Math.round(At),Math.round(st),Math.round(yt-At),Math.round(Et-st))},Fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,G,J=(O=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:G}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(St.API),(function(n){var e=function(s){var a,c,l,u,h,m,g,b,I,T;for(/[^\x00-\xFF]/.test(s),c=[],l=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(m=(h=((h=((h=((h=(h-(T=h%85))/85)-(I=h%85))/85)-(b=h%85))/85)-(g=h%85))/85)%85,c.push(m+33,g+33,b+33,I+33,T+33)):c.push(122);return(function(N,Y){for(var j=Y;j>0;j--)N.pop()})(c,a.length),String.fromCharCode.apply(String,c)+"~>"},t=function(s){var a,c,l,u,h,m=String,g="length",b=255,I="charCodeAt",T="slice",N="replace";for(s[T](-2),s=s[T](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),l=[],u=0,h=(s+=a="uuuuu"[T](s[g]%5||5))[g];h>u;u+=5)c=52200625*(s[I](u)-33)+614125*(s[I](u+1)-33)+7225*(s[I](u+2)-33)+85*(s[I](u+3)-33)+(s[I](u+4)-33),l.push(b&c>>24,b&c>>16,b&c>>8,b&c);return(function(Y,j){for(var W=j;W>0;W--)Y.pop()})(l,a[g]),m.fromCharCode.apply(m,l)},r=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",l=0;l<s.length;l+=2)c+=String.fromCharCode("0x"+(s[l]+s[l+1]));return c},o=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return(a=_C(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var c=0,l=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=o(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}})(St.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(c,l,u){var h=new XMLHttpRequest,m=0,g=function(b){var I=b.length,T=[],N=String.fromCharCode;for(m=0;m<I;m+=1)T.push(N(255&b.charCodeAt(m)));return T.join("")};if(h.open("GET",c,!l),h.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(h.onload=function(){h.status===200?u(g(this.responseText)):u(void 0)}),h.send(null),l&&h.status===200)return g(h.responseText)})(i,o,s)}catch{}return a})(e,t,r)},n.loadImageFile=n.loadFile})(St.API),(function(n){function e(){return(Yt.html2canvas?Promise.resolve(Yt.html2canvas):import("./chunk-3DX2HYX3.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Yt.DOMPurify?Promise.resolve(Yt.DOMPurify):import("./chunk-5XEYTCIL.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var c=Un(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var l=document.createElement(a);for(var u in c.className&&(l.className=c.className),c.innerHTML&&c.dompurify&&(l.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)l.style[u]=c.style[u];return l},o=function a(c,l){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)l!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(a(h,l));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},s=function a(c){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return(u=u.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),c){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,c(this.prop.container,l)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var b=u[g],I=b.src.find(function(T){return T.format==="truetype"});I&&l.addFont(I.url,b.ref.name,b.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var c=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||St.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,l,u){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,l,u){return this.setProgress(a?this.progress.val+a:null,c||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,c){var l=this;return this.thenCore(a,c,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return l.updateProgress(null,u),m}).then(u,h).then(function(m){return l.updateProgress(1),m})})},s.prototype.thenCore=function(a,c,l){l=l||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),c&&(c=c.bind(u));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:s.convert(Object.assign({},u),Promise.prototype),m=l.call(h,a,c);return s.convert(m,u.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(l){c=c.thenCore(l)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,St.getPageSize=function(a,c,l){if(Un(a)==="object"){var u=a;a=u.orientation,c=u.unit||c,l=u.format||l}c=c||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var h,m=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var b,I=0,T=0;if(g.hasOwnProperty(m))I=g[m][1]/h,T=g[m][0]/h;else try{I=l[1],T=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",T>I&&(b=T,T=I,I=b);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",I>T&&(b=T,T=I,I=b)}return{width:T,height:I,unit:c,k:h,orientation:a}},n.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Nk):null;var l=new s(c);return c.worker?l:l.from(a).doCallback()}})(St.API),St.API.addJS=function(n){return Cz=n,this.internal.events.subscribe("postPutResources",function(){qC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(qC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),xz=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Cz+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){qC!==void 0&&xz!==void 0&&this.internal.out("/Names <</JavaScript "+qC+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var c=a[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(o=0;o<l;o++){var h=t.internal.newObject();u.push(h);var m=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<u.length;o++)t.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var c=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<r.children.length;l++)this.renderItems(r.children[l])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(St.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var c,l=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(h){for(var m,g=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,I={width:0,height:0,numcomponents:1},T=4;T<b;T+=2){if(T+=g,e.indexOf(h.charCodeAt(T+1))!==-1){m=256*h.charCodeAt(T+5)+h.charCodeAt(T+6),I={width:256*h.charCodeAt(T+7)+h.charCodeAt(T+8),height:m,numcomponents:h.charCodeAt(T+9)};break}g=256*h.charCodeAt(T+2)+h.charCodeAt(T+3)}return I})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:t,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:l,index:r,alias:i}}return u}})(St.API),St.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=dz(n,{checkCrc:!0}),s=o.width,a=o.height,c=o.channels,l=o.palette,u=o.depth;i=l&&c===1?(function(M){for(var S=M.width,V=M.height,x=M.data,A=M.palette,D=M.depth,te=!1,_e=[],Te=[],Ce=void 0,fe=!1,Ae=0,Be=0;Be<A.length;Be++){var Fe=qP(A[Be],4),O=Fe[0],G=Fe[1],J=Fe[2],ie=Fe[3];_e.push(O,G,J),ie!=null&&(ie===0?(Ae++,Te.length<1&&Te.push(Be)):ie<255&&(fe=!0))}if(fe||Ae>1){te=!0,Te=void 0;var ae=S*V;Ce=new Uint8Array(ae);for(var pe=new DataView(x.buffer),Se=0;Se<ae;Se++){var ye=kk(pe,Se,D),Me=qP(A[ye],4)[3];Ce[Se]=Me}}else Ae===0&&(Te=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:te?8:void 0,colorBytes:x,alphaBytes:Ce,needSMask:te,palette:_e,mask:Te}})(o):c===2||c===4?(function(M){for(var S=M.data,V=M.width,x=M.height,A=M.channels,D=M.depth,te=A===2?"DeviceGray":"DeviceRGB",_e=A-1,Te=V*x,Ce=_e,fe=Te*Ce,Ae=1*Te,Be=Math.ceil(fe*D/8),Fe=Math.ceil(Ae*D/8),O=new Uint8Array(Be),G=new Uint8Array(Fe),J=new DataView(S.buffer),ie=new DataView(O.buffer),ae=new DataView(G.buffer),pe=!1,Se=0;Se<Te;Se++){for(var ye=Se*A,Me=0;Me<Ce;Me++)Pz(ie,kk(J,ye+Me,D),Se*Ce+Me,D);var Ue=kk(J,ye+Ce,D);Ue<(1<<D)-1&&(pe=!0),Pz(ae,Ue,1*Se,D)}return{colorSpace:te,colorsPerPixel:_e,sMaskBitsPerComponent:pe?D:void 0,colorBytes:O,alphaBytes:G,needSMask:pe}})(o):(function(M){var S=M.data,V=M.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:S instanceof Uint16Array?(function(x){for(var A=x.length,D=new Uint8Array(2*A),te=new DataView(D.buffer,D.byteOffset,D.byteLength),_e=0;_e<A;_e++)te.setUint16(2*_e,x[_e],!1);return D})(S):S,needSMask:!1}})(o);var h,m,g,b=i,I=b.colorSpace,T=b.colorsPerPixel,N=b.sMaskBitsPerComponent,Y=b.colorBytes,j=b.alphaBytes,W=b.needSMask,oe=b.palette,he=b.mask,z=null;return r!==St.API.image_compression.NONE&&typeof _C=="function"?(z=(function(M){var S;switch(M){case St.API.image_compression.FAST:S=11;break;case St.API.image_compression.MEDIUM:S=13;break;case St.API.image_compression.SLOW:S=14;break;default:S=12}return S})(r),h=this.decode.FLATE_DECODE,m="/Predictor ".concat(z," /Colors ").concat(T," /BitsPerComponent ").concat(u," /Columns ").concat(s),n=Az(Y,Math.ceil(s*T*u/8),T,u,r),W&&(g=Az(j,Math.ceil(s*N/8),1,N,r))):(h=void 0,m=void 0,n=Y,W&&(g=j)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:t,data:n,index:e,filter:h,decodeParameters:m,transparency:he,palette:oe,sMask:g,predictor:z,width:s,height:a,bitsPerComponent:u,sMaskBitsPerComponent:N,colorSpace:I}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new Ule(e),s=o.width,a=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:s,height:a},u=new Rk(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)},n.processGIF87A=n.processGIF89A})(St.API),_c.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_c.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){dr.log("bit decode error:"+t)}},_c.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[o>>7-a&1];this.data[s+4*a]=c.blue,this.data[s+4*a+1]=c.green,this.data[s+4*a+2]=c.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},_c.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,c=15&o,l=this.palette[a];if(this.data[s]=l.blue,this.data[s+1]=l.green,this.data[s+2]=l.red,this.data[s+3]=255,2*i+1>=this.width)break;l=this.palette[c],this.data[s+4]=l.blue,this.data[s+4+1]=l.green,this.data[s+4+2]=l.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},_c.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},_c.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,c=(o>>10&e)/e*255|0,l=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=c,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=l}this.pos+=n}},_c.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&t)/t*255|0,l=(s>>11)/e*255|0,u=i*this.width*4+4*o;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=a,this.data[u+3]=255}this.pos+=n}},_c.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},_c.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},_c.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new _c(e,!1),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new Rk(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(St.API),Rz.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new Rz(e),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new Rk(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(St.API),St.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,c=0,l=0;l<i;l+=4){var u=r[l],h=r[l+1],m=r[l+2],g=r[l+3];o[a++]=u,o[a++]=h,o[a++]=m,s[c++]=g}var b=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:b,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},St.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Om=St.API,HC=Om.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=l.fof?l.fof:1,h=e.doKerning!==!1,m=0,g=n.length,b=0,I=a[0]||c,T=[];for(t=0;t<g;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(m=h&&Un(l[r])==="object"&&!isNaN(parseInt(l[r][b],10))?l[r][b]/u:0,T.push((a[r]||I)/c+m)),b=r;return T},Ez=Om.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Om.processArabic&&(n=Om.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:HC.apply(this,arguments).reduce(function(o,s){return o+s},0)},Iz=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var c=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(c,o)),a=0,c=o),a+=e[o],o++;return c!==o&&i.push(n.slice(c,o)),i},Sz=function(n,e,t){t||(t={});var r,i,o,s,a,c,l,u=[],h=[u],m=t.textIndent||0,g=0,b=0,I=n.split(" "),T=HC.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?I[0].length+2:t.lineIndent||0){var N=Array(c).join(" "),Y=[];I.map(function(W){(W=W.split(/\s*\n/)).length>1?Y=Y.concat(W.map(function(oe,he){return(he&&oe.length?`
`:"")+oe})):Y.push(W[0])}),I=Y,c=Ez.apply(this,[N,t])}for(o=0,s=I.length;o<s;o++){var j=0;if(r=I[o],c&&r[0]==`
`&&(r=r.substr(1),j=1),m+g+(b=(i=HC.apply(this,[r,t])).reduce(function(W,oe){return W+oe},0))>e||j){if(b>e){for(a=Iz.apply(this,[r,i,e-(m+g),e]),u.push(a.shift()),u=[a.pop()];a.length;)h.push([a.shift()]);b=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(W,oe){return W+oe},0)}else u=[r];h.push(u),m=b+c,g=T}else u.push(r),m+=g+b,g=T}return l=c?function(W,oe){return(oe?N:"")+W.join(" ")}:function(W){return W.join(" ")},h.map(l)},Om.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle),m="Unicode";return h.metadata[m]?{widths:h.metadata[m].widths||{0:1},kerning:h.metadata[m].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,c,l=[];for(a=0,c=r.length;a<c;a++)l=l.concat(Sz.apply(this,[r[a],s,o]));return l},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=n.__fontmetrics__.compress=function(m){var g,b,I,T,N=["{"];for(var Y in m){if(g=m[Y],isNaN(parseInt(Y,10))?b="'"+Y+"'":(Y=parseInt(Y,10),b=(b=s(Y).slice(2)).slice(0,-1)+i[b.slice(-1)]),typeof g=="number")g<0?(I=s(g).slice(3),T="-"):(I=s(g).slice(2),T=""),I=T+I.slice(0,-1)+i[I.slice(-1)];else{if(Un(g)!=="object")throw new Error("Don't know what to do with value type "+Un(g)+".");I=a(g)}N.push(b+I)}return N.push("}"),N.join("")},c=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,b,I,T,N={},Y=1,j=N,W=[],oe="",he="",z=m.length-1,M=1;M<z;M+=1)(T=m[M])=="'"?g?(I=g.join(""),g=void 0):g=[]:g?g.push(T):T=="{"?(W.push([j,I]),j={},I=void 0):T=="}"?((b=W.pop())[0][b[1]]=j,I=void 0,j=b[0]):T=="-"?Y=-1:I===void 0?r.hasOwnProperty(T)?(oe+=r[T],I=parseInt(oe,16)*Y,Y=1,oe=""):oe+=T:r.hasOwnProperty(T)?(he+=r[T],j[I]=parseInt(he,16)*Y,Y=1,I=void 0,he=""):he+=T;return N},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var g=m.font,b=h.Unicode[g.postScriptName];b&&(g.metadata.Unicode={},g.metadata.Unicode.widths=b.widths,g.metadata.Unicode.kerning=b.kerning);var I=u.Unicode[g.postScriptName];I&&(g.metadata.Unicode.encoding=I,g.encoding=I.codePages[0])}])})(St.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e($C(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(St),St.API.addSvgAsImage=function(n,e,t,r,i,o,s,a){if(isNaN(e)||isNaN(t))throw dr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw dr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var l=c.getContext("2d");l.fillStyle="#fff",l.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(Yt.canvg?Promise.resolve(Yt.canvg):import("./chunk-3MQJB5HQ.js")).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(l,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,s,a)})},St.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},St.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),c=[],l=0,u=0,h=0;function m(b,I){var T,N=!1;for(T=0;T<b.length;T+=1)b[T]===I&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var g=a.length;for(h=0;h<g;h+=1)t[a[h]].value=t[a[h]].defaultValue,t[a[h]].explicitSet=!1}if(Un(n)==="object"){for(i in n)if(o=n[i],m(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&m(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(l=0;l<o.length;l+=1)if(r=!0,o[l].length===1&&typeof o[l][0]=="number")c.push(String(o[l]-1));else if(o[l].length>1){for(u=0;u<o[l].length;u+=1)typeof o[l][u]!="number"&&(r=!1);r===!0&&c.push([o[l][0]-1,o[l][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,I=[];for(b in t)t[b].explicitSet===!0&&(t[b].type==="name"?I.push("/"+b+" /"+t[b].value):I.push("/"+b+" "+t[b].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),l=o.length+s.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(St.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,c=s.metadata.Unicode.widths,l=["","0","00","000","0000"],u=[""],h=0,m=o.length;h<m;++h){if(a=s.metadata.characterToGlyph(o.charCodeAt(h)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(h),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(l[4-a.length],a)}return u.join("")},r=function(o){var s,a,c,l,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(a=Object.keys(o).sort(function(g,b){return g-b})).length;h<m;h++)s=a[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(l=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+l+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",b=0;b<m.length;b++)g+=String.fromCharCode(m[b]);var I=l();u({data:g,addLength1:!0,objectId:I}),c("endobj");var T=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:T}),c("endobj");var N=l();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Lm(a.fontName)),c("/FontFile2 "+I+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var Y=l();c("<<"),c("/Type /Font"),c("/BaseFont /"+Lm(a.fontName)),c("/FontDescriptor "+N+" 0 R"),c("/W "+n.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=l(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+T+" 0 R"),c("/BaseFont /"+Lm(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+Y+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var b=l();u({data:m,addLength1:!0,objectId:b}),c("endobj");var I=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:I}),c("endobj");var T=l();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+Lm(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=l();for(var N=0;N<a.metadata.hmtx.widths.length;N++)a.metadata.hmtx.widths[N]=parseInt(a.metadata.hmtx.widths[N]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+Lm(a.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",c=o.x,l=o.y,u=o.options||{},h=o.mutex||{},m=h.pdfEscape,g=h.activeFontKey,b=h.fonts,I=g,T="",N=0,Y="",j=b[I].encoding;if(b[I].encoding!=="Identity-H")return{text:a,x:c,y:l,options:u,mutex:h};for(Y=a,I=g,Array.isArray(a)&&(Y=a[0]),N=0;N<Y.length;N+=1)b[I].metadata.hasOwnProperty("cmap")&&(s=b[I].metadata.cmap.unicode.codeMap[Y[N].charCodeAt(0)]),s||Y[N].charCodeAt(0)<256&&b[I].metadata.hasOwnProperty("Unicode")?T+=Y[N]:T+="";var W="";return parseInt(I.slice(1))<14||j==="WinAnsiEncoding"?W=m(T,I).split("").map(function(oe){return oe.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(W=t(T,b[I])),h.isHex=!0,{text:W,x:c,y:l,options:u,mutex:h}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],c={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var l=0;for(l=0;l<s.length;l+=1)Array.isArray(s[l])&&s[l].length===3?a.push([i(Object.assign({},c,{text:s[l][0]})).text,s[l][1],s[l][2]]):a.push(i(Object.assign({},c,{text:s[l]})).text);o.text=a}else o.text=i(Object.assign({},c,{text:s})).text}])})(St),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(St.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,c,l,u,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Y=!1,j=0;this.__bidiEngine__={};var W=function(x){var A=x.charCodeAt(),D=A>>8,te=I[D];return te!==void 0?h[256*te+(255&A)]:D===252||D===253?"AL":N.test(D)?"L":D===8?"R":"N"},oe=function(x){for(var A,D=0;D<x.length;D++){if((A=W(x.charAt(D)))==="L")return!1;if(A==="R")return!0}return!1},he=function(x,A,D,te){var _e,Te,Ce,fe,Ae=A[te];switch(Ae){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Y=!1;break;case"N":case"AN":break;case"EN":Y&&(Ae="AN");break;case"AL":Y=!0,Ae="R";break;case"WS":case"BN":Ae="N";break;case"CS":te<1||te+1>=A.length||(_e=D[te-1])!=="EN"&&_e!=="AN"||(Te=A[te+1])!=="EN"&&Te!=="AN"?Ae="N":Y&&(Te="AN"),Ae=Te===_e?Te:"N";break;case"ES":Ae=(_e=te>0?D[te-1]:"B")==="EN"&&te+1<A.length&&A[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&D[te-1]==="EN"){Ae="EN";break}if(Y){Ae="N";break}for(Ce=te+1,fe=A.length;Ce<fe&&A[Ce]==="ET";)Ce++;Ae=Ce<fe&&A[Ce]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(fe=A.length,Ce=te+1;Ce<fe&&A[Ce]==="NSM";)Ce++;if(Ce<fe){var Be=x[te],Fe=Be>=1425&&Be<=2303||Be===64286;if(_e=A[Ce],Fe&&(_e==="R"||_e==="AL")){Ae="R";break}}}Ae=te<1||(_e=A[te-1])==="B"?"N":D[te-1];break;case"B":Y=!1,i=!0,Ae=j;break;case"S":o=!0,Ae="N"}return Ae},z=function(x,A,D){var te=x.split("");return D&&M(te,D,{hiLevel:j}),te.reverse(),A&&A.reverse(),te.join("")},M=function(x,A,D){var te,_e,Te,Ce,fe,Ae=-1,Be=x.length,Fe=0,O=[],G=j?g:m,J=[];for(Y=!1,i=!1,o=!1,_e=0;_e<Be;_e++)J[_e]=W(x[_e]);for(Te=0;Te<Be;Te++){if(fe=Fe,O[Te]=he(x,J,O,Te),te=240&(Fe=G[fe][b[O[Te]]]),Fe&=15,A[Te]=Ce=G[Fe][5],te>0)if(te===16){for(_e=Ae;_e<Te;_e++)A[_e]=1;Ae=-1}else Ae=-1;if(G[Fe][6])Ae===-1&&(Ae=Te);else if(Ae>-1){for(_e=Ae;_e<Te;_e++)A[_e]=Ce;Ae=-1}J[Te]==="B"&&(A[Te]=0),D.hiLevel|=Ce}o&&(function(ie,ae,pe){for(var Se=0;Se<pe;Se++)if(ie[Se]==="S"){ae[Se]=j;for(var ye=Se-1;ye>=0&&ie[ye]==="WS";ye--)ae[ye]=j}})(J,A,Be)},S=function(x,A,D,te,_e){if(!(_e.hiLevel<x)){if(x===1&&j===1&&!i)return A.reverse(),void(D&&D.reverse());for(var Te,Ce,fe,Ae,Be=A.length,Fe=0;Fe<Be;){if(te[Fe]>=x){for(fe=Fe+1;fe<Be&&te[fe]>=x;)fe++;for(Ae=Fe,Ce=fe-1;Ae<Ce;Ae++,Ce--)Te=A[Ae],A[Ae]=A[Ce],A[Ce]=Te,D&&(Te=D[Ae],D[Ae]=D[Ce],D[Ce]=Te);Fe=fe}Fe++}}},V=function(x,A,D){var te=x.split(""),_e={hiLevel:j};return D||(D=[]),M(te,D,_e),(function(Te,Ce,fe){if(fe.hiLevel!==0&&u)for(var Ae,Be=0;Be<Te.length;Be++)Ce[Be]===1&&(Ae=T.indexOf(Te[Be]))>=0&&(Te[Be]=T[Ae+1])})(te,D,_e),S(2,te,A,D,_e),S(1,te,A,D,_e),te.join("")};return this.__bidiEngine__.doBidiReorder=function(x,A,D){if((function(_e,Te){if(Te)for(var Ce=0;Ce<_e.length;Ce++)Te[Ce]=Ce;a===void 0&&(a=oe(_e)),l===void 0&&(l=oe(_e))})(x,A),s||!c||l)if(s&&c&&a^l)j=a?1:0,x=z(x,A,D);else if(!s&&c&&l)j=a?1:0,x=V(x,A,D),x=z(x,A);else if(!s||a||c||l){if(s&&!c&&a^l)x=z(x,A),a?(j=0,x=V(x,A,D)):(j=1,x=V(x,A,D),x=z(x,A));else if(s&&a&&!c&&l)j=1,x=V(x,A,D),x=z(x,A);else if(!s&&!c&&a^l){var te=u;a?(j=1,x=V(x,A,D),j=0,u=!1,x=V(x,A,D),u=te):(j=0,x=V(x,A,D),x=z(x,A),j=1,u=!1,x=V(x,A,D),u=te,x=z(x,A))}}else j=0,x=V(x,A,D);else j=a?1:0,x=V(x,A,D);return x},this.__bidiEngine__.setOptions=function(x){x&&(s=x.isInputVisual,c=x.isOutputVisual,a=x.isInputRtl,l=x.isOutputRtl,u=x.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(St),St.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new nf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new nue(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new zle(this.contents),this.head=new Hle(this),this.name=new Yle(this),this.cmap=new Wz(this),this.toUnicode={},this.hhea=new $le(this),this.maxp=new Qle(this),this.hmtx=new Zle(this),this.post=new Wle(this),this.os2=new Gle(this),this.loca=new tue(this),this.glyf=new Xle(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,c,l;for(l=[],s=0,a=(c=this.bbox).length;s<a;s++)e=c[s],l.push(Math.round(e*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var bc,nf=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),zle=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,c,l,u,h,m,g,b,I;for(I in g=Object.keys(t).length,c=Math.log(2),h=16*Math.floor(Math.log(g)/c),s=Math.floor(h/c),u=16*g-h,(i=new nf).writeInt(this.scalarType),i.writeShort(g),i.writeShort(h),i.writeShort(s),i.writeShort(u),o=16*g,l=i.pos+o,a=null,b=[],t)for(m=t[I],i.writeString(I),i.writeInt(n(m)),i.writeInt(l),i.writeInt(m.length),b=b.concat(m),I==="head"&&(a=l),l+=m.length;l%4;)b.push(0),l++;return i.write(b),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=Kz.call(t);t.length%4;)t.push(0);for(o=new nf(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),qle={}.hasOwnProperty,bl=function(n,e){for(var t in e)qle.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};bc=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var Hle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return bl(n,bc),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new nf).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),Oz=(function(){function n(e,t){var r,i,o,s,a,c,l,u,h,m,g,b,I,T,N,Y,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,o=(function(){var W,oe;for(oe=[],c=W=0;0<=m?W<m:W>m;c=0<=m?++W:--W)oe.push(e.readUInt16());return oe})(),e.pos+=2,I=(function(){var W,oe;for(oe=[],c=W=0;0<=m?W<m:W>m;c=0<=m?++W:--W)oe.push(e.readUInt16());return oe})(),l=(function(){var W,oe;for(oe=[],c=W=0;0<=m?W<m:W>m;c=0<=m?++W:--W)oe.push(e.readUInt16());return oe})(),u=(function(){var W,oe;for(oe=[],c=W=0;0<=m?W<m:W>m;c=0<=m?++W:--W)oe.push(e.readUInt16());return oe})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var W,oe;for(oe=[],c=W=0;0<=i?W<i:W>i;c=0<=i?++W:--W)oe.push(e.readUInt16());return oe})(),c=N=0,j=o.length;N<j;c=++N)for(T=o[c],r=Y=b=I[c];b<=T?Y<=T:Y>=T;r=b<=T?++Y:--Y)u[c]===0?s=r+l[c]:(s=a[u[c]/2+(r-b)-(m-c)]||0)!==0&&(s+=l[c]),this.codeMap[r]=65535&s}e.pos=h}return n.encode=function(e,t){var r,i,o,s,a,c,l,u,h,m,g,b,I,T,N,Y,j,W,oe,he,z,M,S,V,x,A,D,te,_e,Te,Ce,fe,Ae,Be,Fe,O,G,J,ie,ae,pe,Se,ye,Me,Ue,et;switch(te=new nf,s=Object.keys(e).sort(function(We,ot){return We-ot}),t){case"macroman":for(I=0,T=(function(){var We=[];for(b=0;b<256;++b)We.push(0);return We})(),Y={0:0},o={},_e=0,Ae=s.length;_e<Ae;_e++)Y[ye=e[i=s[_e]]]==null&&(Y[ye]=++I),o[i]={old:e[i],new:Y[e[i]]},T[i]=Y[e[i]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(T),{charMap:o,subtable:te.data,maxGlyphID:I+1};case"unicode":for(A=[],h=[],j=0,Y={},r={},N=l=null,Te=0,Be=s.length;Te<Be;Te++)Y[oe=e[i=s[Te]]]==null&&(Y[oe]=++j),r[i]={old:oe,new:Y[oe]},a=Y[oe]-i,N!=null&&a===l||(N&&h.push(N),A.push(i),l=a),N=i;for(N&&h.push(N),h.push(65535),A.push(65535),V=2*(S=A.length),M=2*Math.pow(Math.log(S)/Math.LN2,2),m=Math.log(M/2)/Math.LN2,z=2*S-M,c=[],he=[],g=[],b=Ce=0,Fe=A.length;Ce<Fe;b=++Ce){if(x=A[b],u=h[b],x===65535){c.push(0),he.push(0);break}if(x-(D=r[x].new)>=32768)for(c.push(0),he.push(2*(g.length+S-b)),i=fe=x;x<=u?fe<=u:fe>=u;i=x<=u?++fe:--fe)g.push(r[i].new);else c.push(D-x),he.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*S+2*g.length),te.writeUInt16(0),te.writeUInt16(V),te.writeUInt16(M),te.writeUInt16(m),te.writeUInt16(z),pe=0,O=h.length;pe<O;pe++)i=h[pe],te.writeUInt16(i);for(te.writeUInt16(0),Se=0,G=A.length;Se<G;Se++)i=A[Se],te.writeUInt16(i);for(Me=0,J=c.length;Me<J;Me++)a=c[Me],te.writeUInt16(a);for(Ue=0,ie=he.length;Ue<ie;Ue++)W=he[Ue],te.writeUInt16(W);for(et=0,ae=g.length;et<ae;et++)I=g[et],te.writeUInt16(I);return{charMap:r,subtable:te.data,maxGlyphID:j+1}}},n})(),Wz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return bl(n,bc),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new Oz(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=Oz.encode(e,t),(i=new nf).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),$le=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return bl(n,bc),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),Gle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return bl(n,bc),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),Wle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return bl(n,bc),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,a,c;for(c=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)c.push(e.readUInt32());return c}).call(this)}},n})(),Kle=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Yle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return bl(n,bc),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,s,a,c,l,u,h,m;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(c={},o=u=0,h=r.length;u<h;o=++u)i=r[o],e.pos=i.offset,l=e.readString(i.length),s=new Kle(l,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),Qle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return bl(n,bc),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),Zle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return bl(n,bc),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,s,a,c;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var l,u;for(u=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)u.push(e.readInt16());return u})(),this.widths=(function(){var l,u,h,m;for(m=[],l=0,u=(h=this.metrics).length;l<u;l++)o=h[l],m.push(o.advance);return m}).call(this),r=this.widths[this.widths.length-1],c=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),Kz=[].slice,Xle=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return bl(n,bc),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,s,a,c,l,u,h;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,s=(a=new nf(t.read(i))).readShort(),l=a.readShort(),h=a.readShort(),c=a.readShort(),u=a.readShort(),this.cache[e]=s===-1?new eue(a,l,h,c,u):new Jle(a,s,l,h,c,u),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,s,a,c;for(s=[],o=[],a=0,c=t.length;a<c;a++)i=e[t[a]],o.push(s.length),i&&(s=s.concat(i.encode(r)));return o.push(s.length),{table:s,offsets:o}},n})(),Jle=(function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),eue=(function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new nf(Kz.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),tue=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return bl(n,bc),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<r.length;++s)if(r[s]=i,o<t.length&&t[o]==s){++o,r[s]=i;var a=this.offsets[s],c=this.offsets[s+1]-a;c>0&&(i+=c)}for(var l=new Array(4*r.length),u=0;u<r.length;++u)l[4*u+3]=255&r[u],l[4*u+2]=(65280&r[u])>>8,l[4*u+1]=(16711680&r[u])>>16,l[4*u]=(4278190080&r[u])>>24;return l},n})(),nue=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,c;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in c=this.glyphsFor(t))r=c[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,c,l,u,h,m,g,b,I,T,N;for(i in r=Wz.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),g={0:0},N=r.charMap)g[(c=N[i]).old]=c.new;for(b in m=r.maxGlyphID,s)b in g||(g[b]=m++);return u=(function(Y){var j,W;for(j in W={},Y)W[Y[j]]=j;return W})(g),h=Object.keys(u).sort(function(Y,j){return Y-j}),I=(function(){var Y,j,W;for(W=[],Y=0,j=h.length;Y<j;Y++)a=h[Y],W.push(u[a]);return W})(),o=this.font.glyf.encode(s,I,g),l=this.font.loca.encode(o.offsets,I),T={cmap:this.font.cmap.raw(),glyf:o.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},n})();St.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+(function(){var a,c,l;for(l=[],a=0,c=t.length;a<c;a++)r=t[a],l.push(e.convert(r));return l})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e})();var JC=(()=>{let e=class e{buildDoc(r,i,o=null){return ee(this,null,function*(){return r?.templateType==="profghizztemplate"?this.buildAthletePdf(r,i,o):this.buildGymPdf(r,i,o)})}buildGymPdf(r,i,o=null){return ee(this,null,function*(){let s=new St({unit:"mm",format:"a4",hotfixes:["px_scaling"]}),a=[26,35,126],c=[233,186,0],l=[44,122,70],u=10,h=8.5,m=12,g=s.internal.pageSize.getWidth(),b=s.internal.pageSize.getHeight(),I=14,T=16,N=g-I*2,Y=15;s.setFillColor("#0b4fa3"),s.rect(0,0,g,Y,"F"),s.setFont("Helvetica","bold"),s.setFontSize(15),s.setTextColor("#ffffff"),s.text("fitness&dance",g-I,Y/1.6,{align:"right"}),s.setTextColor("#000000");let j=Y+6,W=38,oe=38,he=0,z=i?.name||"";if(o)try{let ye=yield new Promise((We,ot)=>{let $=new Image;$.onload=()=>We({w:$.width,h:$.height}),$.onerror=ot,$.src=o}),Me=W,Ue=oe,et=ye.w/ye.h;et>1?(Ue=oe,Me=Math.min(W,Ue*et)):(Me=W,Ue=Math.min(oe,Me/et)),s.addImage(o,"PNG",I,j,Me,Ue,void 0,"FAST"),he=Ue}catch{}let M=I+W+12,S=j+6,V=M,x=M+16,A=S;s.setFont("Helvetica","bold"),s.setFontSize(15),s.text(z,M,A),A+=10;let D="-";if(r?.dataInizio&&/^\d{4}-\d{2}-\d{2}$/.test(r.dataInizio)){let[ye,Me,Ue]=r.dataInizio.split("-");D=`${Ue}/${Me}/${ye}`}let te=[{label:"Livello:",value:r?.livello??"-"},{label:"Durata:",value:r?.durata??"-"},{label:"Inizio:",value:D}];s.setFontSize(12);for(let ye of te)s.setFont("Helvetica","bold"),s.text(ye.label,V,A),s.setFont("Helvetica","normal"),s.text(String(ye.value),x,A),A+=8;let _e=Math.max(he,A-j)+2;j+=_e+m;let Te=3,Ce=50,fe=27,Ae=N/Te,Be=14,Fe=10,O=N/Be,G=11,J="bold";for(let ye of r?.giorni||[]){if(!ye?.esercizi?.length)continue;let Me=[];for(let We=0;We<ye.esercizi.length;We+=Te)Me.push(ye.esercizi.slice(We,We+Te));let Ue=Me.map(()=>fe+20);b-T-j<u+Ue[0]+3&&(s.addPage(),j=18),s.setFillColor(...c),s.rect(I,j,N,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text(String(ye?.nome||""),I+N/2,j+u/1.7,{align:"center"}),s.setTextColor("#000000"),j+=u+3;for(let We=0;We<Me.length;We++){let ot=Me[We],$=Ue[We];j+$>b-T&&(s.addPage(),j=18);for(let Ke=0;Ke<ot.length;Ke++){let Ft=ot[Ke],Ct=I+Ke*Ae,qe=Ct+(Ae-Ce)/2,At=j;try{if(Ft?.image){let Vt=Ft.image.startsWith("data:image/jpeg")||Ft.image.toLowerCase().endsWith(".jpg")||Ft.image.toLowerCase().endsWith(".jpeg")?"JPEG":"PNG";s.addImage(Ft.image,Vt,qe,At,Ce,fe,void 0,"FAST")}}catch{}let st=At+fe+5;s.setFont("Helvetica",J),s.setFontSize(G),s.setTextColor("#183047"),s.text(String(Ft?.nome||""),Ct+Ae/2,st,{align:"center"}),st+=6;let yt=Ft?.settimaneValori?.[0]||{},Et=Number(yt.serie)||0,vn=Number(yt.ripetizioni)||0,Qt=Number(yt.minuti)||0,zt=Number(yt.secondi)||0;s.setFont("Helvetica",J),s.setFontSize(G),s.setTextColor("#000000");let Lt=`${Et}x${vn} - ${Qt}' ${zt}"`;s.text(Lt,Ct+Ae/2,st,{align:"center"})}j+=$}j+=6,j+u+ye.esercizi.length*Fe>b-T&&(s.addPage(),j=18),s.setFillColor(...a),s.rect(I,j,N,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text("Tracking pesi",I+2.5,j+u/1.7,{align:"left"}),s.setTextColor("#000000"),j+=u+2;let et=j;for(let We=0;We<ye.esercizi.length;We++){et+Fe>b-T&&(s.addPage(),et=18);for(let ot=0;ot<Be;ot++)s.rect(I+ot*O,et,O,Fe,"S");et+=Fe}j=et+6}j+u+126>b-T&&(s.addPage(),j=18),s.setFillColor(...a),s.rect(I,j,N,u,"F"),s.setFont("Helvetica","bold"),s.setFontSize(13.2),s.setTextColor("#ffffff"),s.text("Note personali",I+2.5,j+u/1.7,{align:"left"}),s.setTextColor("#000000"),j+=u+2;let ie=i?.personalNotes??r?.personalNotes??"",ae=typeof ie=="string"&&ie.trim()?ie.split(`
`):[],pe=18;s.setFont("Helvetica","normal"),s.setFontSize(11);let Se=7;for(let ye=0;ye<pe;ye++)j+Se>b-T&&(s.addPage(),j=18),s.line(I,j,I+N,j),ae[ye]&&s.text(ae[ye],I+2.5,j+Se*.68,{align:"left"}),j+=Se;return s.line(I,j,I+N,j),s})}buildAthletePdf(r,i,o=null){return ee(this,null,function*(){let s=new St({unit:"mm",format:"a4",hotfixes:["px_scaling"]}),a=[233,186,0],c=[245,245,210],l=[255,255,255],u=s.internal.pageSize.getWidth(),h=s.internal.pageSize.getHeight(),m=10,g=u-m*2,b=15,I=16;s.setFillColor("#0b4fa3"),s.rect(0,0,u,b,"F"),s.setFont("Helvetica","bold"),s.setFontSize(15),s.setTextColor("#ffffff"),s.text("Prof Ghizz",u-m,b/1.6,{align:"right"}),s.setTextColor("#000000");let T=b+6,N=38,Y=38,j=0,W=i?.name||"";if(o)try{let Ce=yield new Promise((Fe,O)=>{let G=new Image;G.onload=()=>Fe({w:G.width,h:G.height}),G.onerror=O,G.src=o}),fe=N,Ae=Y,Be=Ce.w/Ce.h;Be>1?(Ae=Y,fe=Math.min(N,Ae*Be)):(fe=N,Ae=Math.min(Y,fe/Be)),s.addImage(o,"PNG",m,T,fe,Ae,void 0,"FAST"),j=Ae}catch{}let oe=m+N+12,he=T+6,z=oe,M=oe+16,S=he;s.setFont("Helvetica","bold"),s.setFontSize(15),s.text(W,oe,S),S+=10;let V="-";if(r?.dataInizio&&/^\d{4}-\d{2}-\d{2}$/.test(r.dataInizio)){let[Ce,fe,Ae]=r.dataInizio.split("-");V=`${Ae}/${fe}/${Ce}`}let x=[{label:"Livello:",value:r?.livello??"-"},{label:"Durata:",value:r?.durata??"-"},{label:"Inizio:",value:V}];s.setFontSize(12);for(let Ce of x)s.setFont("Helvetica","bold"),s.text(Ce.label,z,S),s.setFont("Helvetica","normal"),s.text(String(Ce.value),M,S),S+=8;let A=Math.max(j,S-T)+6;T+=A;let D=32,te=26,_e=9,Te=26;s.setDrawColor(0,0,0),s.setLineWidth(.3);for(let Ce of r?.giorni||[]){let fe=Array.isArray(Ce?.settimane)&&Ce.settimane.length?Ce.settimane:Array.from({length:10},(G,J)=>({nome:`Settim. ${J+1}`}));T+10+_e+Te>h-I&&(s.addPage(),T=18),s.setFillColor(...a),s.rect(m,T,g,10,"F"),s.setFont("Helvetica","bold"),s.setFontSize(14),s.setTextColor("#000000"),s.text(String(Ce?.nome||""),m+g/2,T+7,{align:"center"}),T+=12;let Be=(g-D)/fe.length,Fe=m,O=T;for(let G=0;G<fe.length;G++){let J=Fe+D+G*Be;s.setFillColor(...c),s.rect(J,O,Be,_e,"F"),s.rect(J,O,Be,_e,"S"),s.setFont("Helvetica","bold"),s.setFontSize(10.2),s.setTextColor(0,0,0);let ie=(fe[G]?.nome||`Settim. ${G+1}`).replace("Settimana","Settim.");s.text(ie,J+Be/2,O+5.6,{align:"center"})}s.rect(Fe,O,D,_e,"S"),O+=_e;for(let G of Ce?.esercizi||[]){let J=Te,ie=s.splitTextToSize(String(G?.nome||""),D-2),ae=te-13,pe=0,Se=ie.length*4.7+2;G?.didascalia&&(pe=4.5);let ye=2+ae+2+pe+2+Se;ye>J&&(J=ye+2),O+J>h-I&&(s.addPage(),O=18),s.rect(Fe,O,D,J,"S");let Me=O+2,Ue=Fe+2,et=D-4;try{if(G?.image){let ot=G.image.startsWith("data:image/jpeg")||G.image.toLowerCase().endsWith(".jpg")||G.image.toLowerCase().endsWith(".jpeg")?"JPEG":"PNG";s.addImage(G.image,ot,Ue,Me,et,ae,void 0,"FAST")}}catch{}let We=Me+ae+2;G?.didascalia&&(s.setFont("Helvetica","italic"),s.setFontSize(8),s.setTextColor(0,0,0),s.text(String(G.didascalia),Fe+D/2,We,{align:"center",maxWidth:D-2}),We+=pe),s.setFont("Helvetica","normal"),s.setFontSize(8.6),s.setTextColor(0,0,0),s.text(ie,Fe+D/2,We+2,{align:"center",maxWidth:D-2});for(let ot=0;ot<fe.length;ot++){let $=Fe+D+ot*Be;s.setFillColor(...l),s.rect($,O,Be,J,"F"),s.rect($,O,Be,J,"S");let Ke=G?.settimaneValori&&G.settimaneValori[ot]?G.settimaneValori[ot]:null,Ft=Ke&&Number(Ke.serie)||0,Ct=Ke&&Number(Ke.ripetizioni)||0,qe=Ke&&Number(Ke.caricoKg)||0;s.setFont("Helvetica","bold"),s.setFontSize(10.3),s.setTextColor(0,0,0);let At=Ft||Ct||qe?`${Ft}*${Ct} @ ${qe} kg`:"__*__ @ __ kg";s.text(At,$+Be/2,O+8.5,{align:"center"}),s.setDrawColor(0,0,0),s.setLineWidth(.2),s.line($+1,O+11,$+Be-1,O+11),s.setLineWidth(.3);let st=Ke&&Number(Ke.minuti)||0,yt=Ke&&Number(Ke.secondi)||0;s.setFont("Helvetica","normal"),s.setFontSize(9.2);let Et=st||yt?`rec. ${st}' ${yt}"`:"rec. __";s.text(Et,$+Be/2,O+15.5,{align:"center"}),s.setDrawColor(0,0,0),s.setLineWidth(.2),s.line($+1,O+18,$+Be-1,O+18),s.setLineWidth(.3);let vn=Ke?.note||"";if(vn){s.setFont("Helvetica","italic"),s.setFontSize(8.2);let Qt=s.splitTextToSize(String(vn),Be-4),zt=Array.isArray(Qt)?Qt[0]:Qt;s.text(zt,$+Be/2,O+21.2,{align:"center"})}}O+=J}T=O+6}return s})}buildProfGhizzDoc(r,i,o=null){return ee(this,null,function*(){return this.buildAthletePdf(r,i,o)})}buildAndSavePdf(r,i,o=null){return ee(this,null,function*(){let s=yield this.buildDoc(r,i,o),a=(i?.name||"Cliente").replace(/\s+/g,""),c=r?.dataInizio||"",l=`scheda-${a}-${c}.pdf`;s.save(l)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var rue=(n,e)=>({active:n,inactive:e});function iue(n,e){if(n&1&&Tt(0,"img",35),n&2){let t=ne(2);de("src",t.user.avatarUrl,Vr)("alt",t.user.name)}}function oue(n,e){n&1&&(ro(0),C(1,"span",36),q(2,"person"),P(),io())}function sue(n,e){n&1&&(C(0,"span",37),q(1," Tessera scaduta! "),P())}function aue(n,e){if(n&1&&(C(0,"div",38),q(1),P()),n&2){let t=ne(2);K(),Sr("Totale: ",t.filteredCards.length)}}function cue(n,e){if(n&1&&(ro(0),q(1),io()),n&2){let t=ne().$implicit;K(),Sr(" - ",t.time)}}function lue(n,e){if(n&1){let t=Mt();C(0,"div",40)(1,"div",41)(2,"span",42),q(3,"assignment"),P(),C(4,"span",43),q(5),Je(6,cue,2,1,"ng-container",9),P()(),C(7,"div",44)(8,"button",45),Ne("click",function(){let i=be(t).index,o=ne(3);return xe(o.printCard(i))}),C(9,"span",46),q(10,"print"),P()(),C(11,"button",47),Ne("click",function(){let i=be(t).index,o=ne(3);return xe(o.deleteCard(i))}),C(12,"span",46),q(13,"delete"),P()()()()}if(n&2){let t=e.$implicit;K(5),Sr(" ",t.date),K(),de("ngIf",t.time)}}function uue(n,e){if(n&1&&(ro(0),Je(1,lue,14,2,"div",39),io()),n&2){let t=ne(2);K(),de("ngForOf",t.filteredCards)}}function due(n,e){n&1&&(C(0,"div",48),q(1," Nessuna scheda associata. "),P())}function fue(n,e){if(n&1){let t=Mt();C(0,"div",49),Ne("click",function(){be(t);let i=ne(2);return xe(i.closeDeleteModal())}),P()}}function hue(n,e){if(n&1){let t=Mt();C(0,"div",50)(1,"div",51),Ne("click",function(i){return be(t),xe(i.stopPropagation())}),C(2,"p"),q(3,"Sei sicuro di voler eliminare questo cliente in modo definitivo?"),P(),C(4,"div",52)(5,"button",53),Ne("click",function(){be(t);let i=ne(2);return xe(i.deleteUserCustom())}),q(6,"Elimina"),P(),C(7,"button",21),Ne("click",function(){be(t);let i=ne(2);return xe(i.closeDeleteModal())}),q(8,"Annulla"),P()()()()}}function pue(n,e){if(n&1){let t=Mt();C(0,"div",49),Ne("click",function(){be(t);let i=ne(2);return xe(i.closeEditModal())}),P()}}function gue(n,e){if(n&1&&(ro(0),Tt(1,"img",84),io()),n&2){let t=ne(3);K(),de("src",t.editForm.avatarUrl||(t.user==null?null:t.user.avatarUrl),Vr)}}function mue(n,e){n&1&&(C(0,"span",85),q(1,"person"),P())}function vue(n,e){n&1&&(C(0,"div",86),q(1,"Caricamento..."),P())}function yue(n,e){if(n&1){let t=Mt();C(0,"div",54)(1,"form",55),Ne("ngSubmit",function(){be(t);let i=ne(2);return xe(i.saveEditModal())})("click",function(i){return be(t),xe(i.stopPropagation())}),C(2,"h2"),q(3,"Profilo Cliente"),P(),C(4,"div",56)(5,"div",57),Ne("click",function(){be(t);let i=bo(10),o=ne(2);return xe(o.triggerAvatarInput(i))}),Je(6,gue,2,1,"ng-container",5)(7,mue,2,0,"ng-template",null,2,qs),C(9,"input",58,3),Ne("change",function(i){be(t);let o=ne(2);return xe(o.onAvatarChange(i))}),P()(),Je(11,vue,2,0,"div",59),C(12,"div",60)(13,"div",61)(14,"label"),q(15,"Nome "),C(16,"input",62),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.nome,i)||(o.nome=i),xe(i)}),P()(),C(17,"label"),q(18,"Cognome "),C(19,"input",63),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.cognome,i)||(o.cognome=i),xe(i)}),P()(),C(20,"label"),q(21,"Email "),C(22,"input",64),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.email,i)||(o.editForm.email=i),xe(i)}),P()(),C(23,"label"),q(24,"Telefono "),C(25,"input",65),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.phone,i)||(o.editForm.phone=i),xe(i)}),P()(),C(26,"label"),q(27,"Data di nascita "),C(28,"input",66),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.birthDate,i)||(o.editForm.birthDate=i),xe(i)}),P()(),C(29,"label"),q(30,"Genere "),C(31,"select",67),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.gender,i)||(o.editForm.gender=i),xe(i)}),C(32,"option",68),q(33,"Seleziona..."),P(),C(34,"option",69),q(35,"Maschio"),P(),C(36,"option",70),q(37,"Femmina"),P(),C(38,"option",71),q(39,"Altro"),P()()(),C(40,"label"),q(41,"Indirizzo "),C(42,"input",72),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.address,i)||(o.editForm.address=i),xe(i)}),P()(),C(43,"label"),q(44,"Citt\xE0 "),C(45,"input",73),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.city,i)||(o.editForm.city=i),xe(i)}),P()(),C(46,"label"),q(47,"Provincia "),C(48,"input",74),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.provincia,i)||(o.editForm.provincia=i),xe(i)}),P()(),C(49,"label"),q(50,"CAP "),C(51,"input",75),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.cap,i)||(o.editForm.cap=i),xe(i)}),P()(),C(52,"label"),q(53,"Stato "),C(54,"select",76),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.status,i)||(o.editForm.status=i),xe(i)}),C(55,"option",77),q(56,"Attivo"),P(),C(57,"option",78),q(58,"Inattivo"),P()()()(),C(59,"div",79)(60,"label"),q(61,"Note personali "),C(62,"textarea",80),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.personalNotes,i)||(o.editForm.personalNotes=i),xe(i)}),P()()()()(),C(63,"div",81)(64,"button",82),q(65,"Salva"),P(),C(66,"button",83),Ne("click",function(){be(t);let i=ne(2);return xe(i.closeEditModal())}),q(67,"Annulla"),P()()()()}if(n&2){let t=bo(8),r=ne(2);K(6),de("ngIf",r.editForm.avatarUrl||(r.user==null?null:r.user.avatarUrl))("ngIfElse",t),K(5),de("ngIf",r.avatarLoading),K(5),ct("ngModel",r.nome),K(3),ct("ngModel",r.cognome),K(3),ct("ngModel",r.editForm.email),K(3),ct("ngModel",r.editForm.phone),K(3),ct("ngModel",r.editForm.birthDate),K(3),ct("ngModel",r.editForm.gender),K(11),ct("ngModel",r.editForm.address),K(3),ct("ngModel",r.editForm.city),K(3),ct("ngModel",r.editForm.provincia),K(3),ct("ngModel",r.editForm.cap),K(3),ct("ngModel",r.editForm.status),K(8),ct("ngModel",r.editForm.personalNotes)}}function _ue(n,e){if(n&1){let t=Mt();ro(0),C(1,"div",6)(2,"div",7),Je(3,iue,1,2,"img",8)(4,oue,3,0,"ng-container",9),P(),C(5,"div",10)(6,"div",11)(7,"div")(8,"div",12),q(9),P(),C(10,"div",13),q(11),P(),C(12,"div",14),q(13),Je(14,sue,2,0,"span",15),P()(),C(15,"div",16)(16,"span",17),q(17),P(),C(18,"div",18),q(19),P()()(),C(20,"div",19)(21,"button",20),Ne("click",function(){be(t);let i=ne();return xe(i.openEditModal())}),q(22,"Modifica Profilo"),P(),C(23,"button",21),Ne("click",function(){be(t);let i=ne();return xe(i.openDeleteModal())}),q(24,"Elimina Cliente"),P()()()(),C(25,"div",22)(26,"div",23)(27,"div",24)(28,"h3"),q(29,"Dettagli Cliente"),P(),C(30,"div",25)(31,"span"),q(32,"Nome"),P(),C(33,"span"),q(34),P()(),C(35,"div",25)(36,"span"),q(37,"Cognome"),P(),C(38,"span"),q(39),P()(),C(40,"div",25)(41,"span"),q(42,"Data di nascita"),P(),C(43,"span"),q(44),P()(),C(45,"div",25)(46,"span"),q(47,"Genere"),P(),C(48,"span"),q(49),P()(),C(50,"div",25)(51,"span"),q(52,"Indirizzo"),P(),C(53,"span"),q(54),P()(),C(55,"div",25)(56,"span"),q(57,"Citt\xE0"),P(),C(58,"span"),q(59),P()(),C(60,"div",25)(61,"span"),q(62,"Provincia"),P(),C(63,"span"),q(64),P()(),C(65,"div",25)(66,"span"),q(67,"CAP"),P(),C(68,"span"),q(69),P()()(),C(70,"div",24)(71,"h3"),q(72,"Tessera"),P(),C(73,"div",25)(74,"span"),q(75,"Scadenza"),P(),C(76,"span")(77,"input",26),Ne("change",function(i){be(t);let o=ne();return xe(o.updateSubscriptionEnd(i.target.value))}),P()()()(),C(78,"div",24)(79,"h3"),q(80,"Note Personali"),P(),C(81,"div",27),q(82),P()()(),C(83,"div",28)(84,"div",24)(85,"div",29)(86,"h3"),q(87,"Schede di Allenamento"),P(),Je(88,aue,2,1,"div",30),P(),C(89,"div",31),Je(90,uue,2,1,"ng-container",5)(91,due,2,0,"ng-template",null,1,qs),P()()()(),Je(93,fue,1,0,"div",32)(94,hue,9,0,"div",33)(95,pue,1,0,"div",32)(96,yue,68,15,"div",34),io()}if(n&2){let t=bo(92),r=ne();K(3),de("ngIf",r.user.avatarUrl),K(),de("ngIf",!r.user.avatarUrl),K(5),ft(r.user.name),K(2),ft(r.user.email),K(2),Sr(" Tel: ",r.user.phone||"-"," "),K(),de("ngIf",r.isExpired(r.user.subscriptionEnd)),K(2),de("ngClass",xv(26,rue,r.user.status==="Attivo",r.user.status!=="Attivo")),K(),Sr(" ",r.user.status," "),K(2),Sr("Data iscrizione: ",r.user.signupDate),K(15),ft(r.user.name.split(" ")[0]),K(5),ft(r.user.name.split(" ").slice(1).join(" ")||"-"),K(5),ft(r.user.birthDate||"-"),K(5),ft(r.user.gender||"-"),K(5),ft(r.user.address||"-"),K(5),ft(r.user.city||"-"),K(5),ft(r.user.provincia||"-"),K(5),ft(r.user.cap||"-"),K(8),de("value",r.user.subscriptionEnd||""),K(5),ft(r.user.personalNotes||""),K(6),de("ngIf",r.filteredCards.length),K(2),de("ngIf",r.filteredCards.length>0)("ngIfElse",t),K(3),de("ngIf",r.showDeleteModal),K(),de("ngIf",r.showDeleteModal),K(),de("ngIf",r.showEditModal),K(),de("ngIf",r.showEditModal)}}function wue(n,e){n&1&&(C(0,"p"),q(1,"Utente non trovato"),P())}var Qz=(()=>{let e=class e{constructor(r,i,o,s){this.route=r,this.router=i,this.pdfSchedaService=o,this.authService=s,this.firestore=De(co),this.imageService=De(Em),this.userId="",this.nome="",this.cognome="",this.showEditModal=!1,this.showDeleteModal=!1,this.editForm={},this.avatarLoading=!1,this.today=new Date().toISOString().substring(0,10),this.filterExpiredOnly=!1,this.showShareMenu=!1,this.publicShareUrl="",this.selectedCardIndex=null}ngOnInit(){this.route.paramMap.subscribe(r=>{let i=r.get("id");i&&(this.userId=i,this.getUser())})}ngOnDestroy(){this.userSub?.unsubscribe()}getUser(){if(!this.userId)return;let r=Br(this.firestore,`users/${this.userId}`);this.userSub?.unsubscribe(),this.userSub=aU(r).subscribe(i=>{if(!i)return;let o=Rt(Oe({},i),{id:this.userId});Array.isArray(o.cards)&&(o.cards=o.cards.sort((s,a)=>{let c=this.parseItDateTime(s.date,s.time);return(this.parseItDateTime(a.date,a.time)?.getTime()||0)-(c?.getTime()||0)})),this.user=o})}parseItDateTime(r,i){if(!r)return;let o=r.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!o)return;let s=Number(o[1]),a=Number(o[2])-1,c=Number(o[3]),l=0,u=0;if(i){let h=i.match(/^(\d{2}):(\d{2})/);h&&(l=Number(h[1]),u=Number(h[2]))}return new Date(c,a,s,l,u)}isExpired(r){return r?r<=this.today:!1}updateSubscriptionEnd(r){return ee(this,null,function*(){if(this.user?.id)try{yield this.authService.ensureSignedIn();let i=Br(this.firestore,`users/${this.user.id}`);yield pl(i,{subscriptionEnd:r||""})}catch{alert("Errore durante l\u2019aggiornamento.")}})}deleteCard(r){return ee(this,null,function*(){if(!this.user||!this.user.id)return;let i=[...this.user.cards||[]];i.splice(r,1);let o=Br(this.firestore,`users/${this.user.id}`);try{yield this.authService.ensureSignedIn(),yield pl(o,{cards:i})}catch{}})}openEditModal(){if(!this.user)return;this.editForm=Oe({},this.user);let r=(this.user.name||"").trim().split(" ");this.nome=r[0]||"",this.cognome=r.slice(1).join(" ")||"",this.showEditModal=!0}closeEditModal(){this.showEditModal=!1}onAvatarChange(r){return ee(this,null,function*(){let i=r.target.files?.[0];if(!i)return;this.avatarLoading=!0;let o=yield this.imageService.compressAndConvertToBase64(i,1e3,256);this.editForm.avatarUrl=o,this.avatarLoading=!1})}triggerAvatarInput(r){r.click()}saveEditModal(){return ee(this,null,function*(){if(!this.user?.id)return;let r=`${this.nome} ${this.cognome}`.trim(),i=Rt(Oe({},this.editForm),{name:r});delete i.avatarFile;try{yield this.authService.ensureSignedIn(),yield pl(Br(this.firestore,`users/${this.user.id}`),i),this.closeEditModal()}catch{alert("Errore aggiornamento.")}})}printCard(r){return ee(this,null,function*(){if(!this.user?.cards?.[r])return;let i=this.user.cards[r];if(i.pdfBase64){let o=atob(i.pdfBase64),s=new Array(o.length);for(let c=0;c<o.length;c++)s[c]=o.charCodeAt(c);let a=new Blob([new Uint8Array(s)],{type:"application/pdf"});window.open(URL.createObjectURL(a),"_blank");return}try{yield this.pdfSchedaService.buildAndSavePdf(i,this.user)}catch{alert("Errore stampa PDF")}})}get filteredCards(){return this.user?.cards||[]}deleteUserCustom(){return ee(this,null,function*(){if(this.user?.id)try{yield this.authService.ensureSignedIn(),yield Kd(Br(this.firestore,`users/${this.user.id}`)),this.router.navigate(["/anagrafica/list"])}catch{}})}openDeleteModal(){this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1}};e.\u0275fac=function(i){return new(i||e)(tt(Ws),tt(Ar),tt(JC),tt(Tg))},e.\u0275cmp=Kn({type:e,selectors:[["app-anagrafica-detail"]],standalone:!1,decls:6,vars:2,consts:[["notfound",""],["schedeVuote",""],["emptyAvatar",""],["avatarInput",""],[1,"page","anagrafica-detail"],[4,"ngIf","ngIfElse"],[1,"user-detail-header"],[1,"user-avatar-big"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"user-basic-info"],[1,"user-row-top"],[1,"user-detail-name"],[1,"user-detail-email"],[1,"user-detail-phone"],["class","badge badge-danger","style","margin-left:8px; background:#ffdede; color:#d32f2f; border-radius:6px; padding:0 8px;",4,"ngIf"],[1,"status-date"],[1,"user-status-label",3,"ngClass"],[1,"user-detail-signup-date"],[1,"user-detail-actions"],[1,"btn",3,"click"],[1,"btn","outline",3,"click"],[1,"user-detail-content"],[1,"user-detail-col"],[1,"user-detail-section"],[1,"personal-info-row"],["type","date",1,"gestabbonamento-date",2,"background","#fff","border","none","outline","none","font-size","1rem","color","#195089",3,"change","value"],[1,"note-box"],[1,"user-detail-col","user-detail-col-wide"],[1,"schede-header"],["class","schede-count",4,"ngIf"],[1,"scheda-box"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-confirm-delete",4,"ngIf"],["class","modal-edit-profilo",4,"ngIf"],[3,"src","alt"],[1,"material-icons","avatar-placeholder-big",2,"font-size","72px","border-radius","50%","background","#f4f4f4","color","#bbb"],[1,"badge","badge-danger",2,"margin-left","8px","background","#ffdede","color","#d32f2f","border-radius","6px","padding","0 8px"],[1,"schede-count"],["class","scheda-row",4,"ngFor","ngForOf"],[1,"scheda-row"],[1,"scheda-info-flex","scheda-info",2,"flex-direction","row","align-items","center","gap","10px"],[1,"material-icons","scheda-icon"],[1,"scheda-date",2,"font-weight","600"],[1,"scheda-actions-inline"],["title","Stampa PDF",1,"btn","small",3,"click"],[1,"material-icons","small-icon"],["title","Elimina",1,"btn","small","outline",3,"click"],[1,"scheda-empty"],[1,"modal-backdrop",3,"click"],[1,"modal-confirm-delete"],[1,"modal-confirm-content",3,"click"],[1,"modal-confirm-actions"],[1,"btn","danger",3,"click"],[1,"modal-edit-profilo"],["autocomplete","off",3,"ngSubmit","click"],[1,"modal-edit-flex"],[1,"modal-avatar-box",3,"click"],["type","file","accept","image/*","hidden","",3,"change"],["class","avatar-loader","style","margin-left:15px;color:#888;",4,"ngIf"],[1,"modal-fields-note-wrap"],[1,"modal-fields-grid"],["type","text","name","nome","required","",3,"ngModelChange","ngModel"],["type","text","name","cognome","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","name","phone",3,"ngModelChange","ngModel"],["type","date","name","birthDate",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Maschio"],["value","Femmina"],["value","Altro"],["type","text","name","address",3,"ngModelChange","ngModel"],["type","text","name","city",3,"ngModelChange","ngModel"],["type","text","name","provincia",3,"ngModelChange","ngModel"],["type","text","name","cap",3,"ngModelChange","ngModel"],["name","status",3,"ngModelChange","ngModel"],["value","Attivo"],["value","Inattivo"],[1,"modal-field-note-row"],["name","personalNotes","rows","4",3,"ngModelChange","ngModel"],[1,"modal-edit-actions"],["type","submit",1,"btn"],["type","button",1,"btn","outline",3,"click"],["alt","Avatar",1,"avatar-img-preview",2,"width","72px","height","72px","border-radius","50%","object-fit","cover","cursor","pointer","box-shadow","0 0 8px #eee",3,"src"],[1,"material-icons",2,"font-size","60px","width","72px","height","72px","border-radius","50%","background","#f4f4f4","color","#9b9b9b","display","inline-flex","align-items","center","justify-content","center","cursor","pointer"],[1,"avatar-loader",2,"margin-left","15px","color","#888"]],template:function(i,o){if(i&1&&(C(0,"div",4)(1,"h2"),q(2,"Cliente"),P(),Je(3,_ue,97,29,"ng-container",5)(4,wue,2,0,"ng-template",null,0,qs),P()),i&2){let s=bo(5);K(3),de("ngIf",o.user)("ngIfElse",s)}},dependencies:[Tv,qi,ki,dg,Qc,Zc,xo,Ta,ms,ug,Zf,Ko,Qf],styles:[".page.anagrafica-detail[_ngcontent-%COMP%]{max-width:1160px;margin:32px auto;padding:24px 20px 32px;background:#f8fafc;border-radius:16px;box-shadow:0 5px 35px #d3dbe925}h2[_ngcontent-%COMP%]{font-size:1.54rem;font-weight:600;margin-bottom:28px}.user-detail-header[_ngcontent-%COMP%]{display:flex;gap:26px;align-items:flex-start;background:#fff;border-radius:14px;margin-bottom:28px;box-shadow:0 2px 12px #c7d5e12a;padding:22px 28px 15px 22px}.user-avatar-big[_ngcontent-%COMP%], .modal-avatar-box[_ngcontent-%COMP%]{width:96px;height:96px;border-radius:50%;background:#e9f2fb;display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;cursor:pointer}.user-avatar-big[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .modal-avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:94px;height:94px;border-radius:50%;object-fit:cover}.avatar-placeholder-big[_ngcontent-%COMP%]{font-size:58px;color:#bdcbe1}.user-basic-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:flex-start}.user-row-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:15px}.user-detail-name[_ngcontent-%COMP%]{font-size:1.19rem;font-weight:700;color:#132c4c}.user-detail-email[_ngcontent-%COMP%]{color:#577296;font-size:1rem;margin-top:7px}.user-detail-phone[_ngcontent-%COMP%]{font-size:.98rem;color:#3f4760;margin-top:6px}.status-date[_ngcontent-%COMP%]{text-align:right}.user-status-label[_ngcontent-%COMP%]{display:inline-block;background:#e8faee;color:#1cb164;font-weight:600;border-radius:7px;padding:6px 22px;font-size:1.06rem;min-width:74px;text-align:center;margin-bottom:5px}.user-status-label.inactive[_ngcontent-%COMP%]{color:#e76c6c;background:#fde8e8}.user-detail-signup-date[_ngcontent-%COMP%]{color:#7b90ad;font-size:.96rem;margin-top:7px}.user-detail-actions[_ngcontent-%COMP%]{margin-top:14px}.btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;padding:8px 14px;border-radius:6px;margin-right:9px;font-size:1rem;font-weight:500;cursor:pointer;transition:background .18s;box-shadow:0 2px 6px #365fd214}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{background:#1742b0}.btn.outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #cbd8e6;color:#2563eb}.btn.small[_ngcontent-%COMP%]{font-size:.97rem;padding:7px 10px;margin:0;display:flex;align-items:center;justify-content:center;min-width:38px;height:38px}.btn.tiny[_ngcontent-%COMP%]{font-size:.82rem;padding:6px 10px;margin:0}.btn.danger[_ngcontent-%COMP%]{background:#ee4555;color:#fff;border:none}.btn.danger[_ngcontent-%COMP%]:hover, .btn.danger[_ngcontent-%COMP%]:focus{background:#ad1125}.btn.share[_ngcontent-%COMP%]{background:#e6f0ff;color:#1742b0;border:1px solid #bed1f5}.btn.share[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.user-detail-content[_ngcontent-%COMP%]{display:flex;gap:30px;margin-top:16px}.user-detail-col[_ngcontent-%COMP%]{flex:1.1;min-width:270px;display:flex;flex-direction:column;gap:28px}.user-detail-col-wide[_ngcontent-%COMP%]{flex:2}.user-detail-section[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 1.5px 6px #d7dbe333;padding:18px 20px 19px 22px;margin-bottom:4px}.user-detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.09rem;font-weight:600;margin-bottom:18px}.personal-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.01rem;padding:2.5px 0;color:#495879;border-bottom:1px solid #f1f5fa}.personal-info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.personal-info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#253157;font-weight:500}.note-box[_ngcontent-%COMP%]{background:#f6fbff;border:1px solid #e1e8ee;border-radius:7px;color:#6d7c96;font-size:.99rem;padding:11px 15px;min-height:54px;margin-bottom:2px}.schede-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:8px}.schede-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.schede-count[_ngcontent-%COMP%]{color:#607997;font-size:.95rem}.scheda-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:13px}.scheda-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:15px;background:#fafdfe;border:1px solid #c8e8fd;border-radius:10px;padding:12px 16px}.scheda-info-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.scheda-icon[_ngcontent-%COMP%]{color:#2563eb;font-size:28px;flex-shrink:0}.scheda-date[_ngcontent-%COMP%]{font-size:.97rem;color:#195089;font-weight:600}.scheda-actions-inline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-left:auto}.scheda-empty[_ngcontent-%COMP%]{background:#f6fbff;border:1px dashed #cbd8e6;border-radius:8px;padding:14px 12px;color:#607997;text-align:center}.share-inline[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:14px;background:#f4f9ff;border:1px solid #cfe2ff;border-radius:10px;padding:12px}.share-inline-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.share-url-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.share-url-input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;border-radius:8px;border:1px solid #cfe2ff;font-size:.92rem;color:#15375e;background:#fff}.share-buttons-row[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.share-inline-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:#17334b44}.modal-confirm-delete[_ngcontent-%COMP%]{position:fixed;z-index:1050;top:50%;left:50%;transform:translate(-50%,-50%);min-width:340px;max-width:95vw;background:#fff;border-radius:14px;box-shadow:0 8px 44px #0d1d3325;padding:32px 34px 22px;display:flex;flex-direction:column;align-items:stretch}.modal-confirm-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.modal-confirm-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.12rem;margin-bottom:22px;text-align:center;color:#18325a}.modal-confirm-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:22px}.modal-edit-profilo[_ngcontent-%COMP%]{position:fixed;z-index:1010;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:18px;box-shadow:0 10px 40px #1d2c4522;min-width:650px;max-width:980px;padding:32px 34px 22px 32px;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalpop .18s cubic-bezier(.32,1.56,.66,1) 1}@keyframes _ngcontent-%COMP%_modalpop{0%{transform:translate(-50%,-56%) scale(.98)}to{transform:translate(-50%,-50%) scale(1)}}.modal-edit-profilo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;margin-bottom:18px}.modal-edit-flex[_ngcontent-%COMP%]{display:flex;gap:32px;align-items:flex-start}.modal-avatar-box[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;margin-right:32px;margin-top:7px;cursor:pointer;width:88px;height:88px;border-radius:50%;box-shadow:0 2px 9px #2463eb0f;background:#f8fafc}.modal-avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2.5px solid #e0e5f7}.modal-fields-note-wrap[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.modal-fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px 20px}.modal-fields-grid[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.97rem;color:#143349;gap:5px}.modal-fields-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-fields-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 10px;border-radius:7px;border:1.3px solid #dce1eb;background:#f8fafc;color:#102039;font-size:1rem}.modal-fields-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-fields-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .modal-field-note-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:1.3px solid #2563eb;background:#f6faff}.modal-field-note-row[_ngcontent-%COMP%]{grid-column:1/-1;margin-top:18px;display:flex;flex-direction:column}.modal-field-note-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.99rem;color:#143349}.modal-field-note-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:92px;resize:vertical;padding:10px;border-radius:8px;border:1.2px solid #dce1eb;background:#f8fafc;color:#102039;font-size:1rem}.modal-edit-actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end;gap:14px}.small-icon[_ngcontent-%COMP%]{font-size:20px!important;vertical-align:middle;margin-right:0!important}@media (max-width: 900px){.modal-edit-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.modal-avatar-box[_ngcontent-%COMP%]{margin:0 auto 20px}.modal-fields-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pdf-preview[_ngcontent-%COMP%]{width:100%;height:360px;border:1px solid #ddd;border-radius:6px}.attach-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-start;margin-bottom:8px}.attach-area[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{color:#586b7a;font-size:.86rem}.error[_ngcontent-%COMP%]{color:#c62828;margin-bottom:6px}.share-btn[_ngcontent-%COMP%]{background:#eef2ff!important;color:#4f46e5!important;border:1px solid #c7d2fe!important}.share-btn[_ngcontent-%COMP%]:hover{background:#4f46e5!important;color:#fff!important}.modal-share[_ngcontent-%COMP%]{position:fixed;z-index:1100;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:18px;padding:24px;width:90%;max-width:380px;box-shadow:0 10px 40px #00000026;animation:_ngcontent-%COMP%_modalpop .2s ease-out}.modal-share-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.modal-share[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.modal-share[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.92rem;color:#64748b;margin-bottom:20px}.share-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px}.share-opt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:15px;border-radius:12px;border:1px solid #f1f5f9;background:#f8fafc;cursor:pointer;transition:all .2s}.share-opt[_ngcontent-%COMP%]:hover{background:#f1f5f9;transform:translateY(-2px)}.share-opt[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:28px}.whatsapp[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#22c55e}.telegram[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#0ea5e9}.email[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#f43f5e}.native[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#6366f1}.share-link-copy[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#f1f5f9;padding:8px 12px;border-radius:8px;margin-bottom:20px}.share-link-copy[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;font-size:.85rem;color:#475569;outline:none}.full-width[_ngcontent-%COMP%]{width:100%}.close-icon[_ngcontent-%COMP%]{cursor:pointer;color:#94a3b8}"]});let n=e;return n})();function bue(n,e){if(n&1&&(C(0,"div",46),q(1),P()),n&2){let t=ne();K(),Sr(" ",t.savedMsgText,`
`)}}function xue(n,e){if(n&1&&Tt(0,"img",47),n&2){let t=ne();de("src",t.cliente==null?null:t.cliente.avatarUrl,Vr)}}function Cue(n,e){n&1&&(C(0,"div",48),q(1,"\u{1F464}"),P())}function Eue(n,e){n&1&&(ro(0),Pi(),C(1,"svg",49),Tt(2,"rect",50),C(3,"g"),Tt(4,"rect",51)(5,"circle",52)(6,"path",53),P()(),io())}function Iue(n,e){if(n&1&&Tt(0,"img",54),n&2){let t=ne();de("src",t.logoPreviewUrl,Vr)}}function Sue(n,e){if(n&1){let t=Mt();C(0,"div",58),Ne("click",function(){be(t);let i=ne().index,o=ne();return xe(o.setGiorno(i))})("dblclick",function(){be(t);let i=ne().$implicit,o=ne();return xe(o.enableTabEdit(i))}),q(1),P()}if(n&2){let t=ne().$implicit;K(),ft(t.nome)}}function Aue(n,e){if(n&1){let t=Mt();C(0,"input",59),lt("ngModelChange",function(i){be(t);let o=ne().$implicit;return ut(o.nome,i)||(o.nome=i),xe(i)}),Ne("blur",function(){be(t);let i=ne().$implicit,o=ne();return xe(o.disableTabEdit(i))})("keydown.enter",function(){be(t);let i=ne().$implicit,o=ne();return xe(o.disableTabEdit(i))}),P()}if(n&2){let t=ne().$implicit;ct("ngModel",t.nome)}}function Due(n,e){if(n&1&&(C(0,"div",55),Je(1,Sue,2,1,"div",56)(2,Aue,1,1,"input",57),P()),n&2){let t=e.$implicit,r=e.index,i=ne();oo("active",r===i.giornoAttivoIndex),K(),de("ngIf",!t.editing),K(),de("ngIf",t.editing)}}function Tue(n,e){if(n&1){let t=Mt();C(0,"div",63),Ne("click",function(){let i=be(t).index,o=ne(2);return xe(o.setSettimana(i))}),q(1),P()}if(n&2){let t=e.$implicit,r=e.index,i=ne(2);oo("active",r===i.settimanaAttivaIndex),K(),Sr(" ",t.nome," ")}}function Mue(n,e){if(n&1){let t=Mt();C(0,"div",60),Je(1,Tue,2,3,"div",61),C(2,"button",29),Ne("click",function(){be(t);let i=ne();return xe(i.aggiungiSettimanaGiorno())}),q(3,"+ Settimana"),P(),C(4,"button",62),Ne("click",function(){be(t);let i=ne();return xe(i.rimuoviSettimanaGiorno())}),q(5,"\u2013 Settimana"),P()()}if(n&2){let t=ne();K(),de("ngForOf",t.scheda.giorni[t.giornoAttivoIndex].settimane),K(3),de("disabled",(t.scheda.giorni[t.giornoAttivoIndex].settimane==null?null:t.scheda.giorni[t.giornoAttivoIndex].settimane.length)===1)}}function Nue(n,e){n&1&&(C(0,"div",64),q(1," Aggiungi un esercizio dalla colonna destra "),P())}function Pue(n,e){if(n&1&&Tt(0,"img",80),n&2){let t=ne().$implicit;de("alt",Yf(t.nome))("src",t.image,Vr)}}function kue(n,e){n&1&&(C(0,"div",81),q(1,"\u{1F3CB}\uFE0F"),P())}function Rue(n,e){if(n&1){let t=Mt();C(0,"div",82)(1,"label"),q(2,"Serie "),C(3,"input",83),lt("ngModelChange",function(i){be(t);let o=ne().$implicit,s=ne(2);return ut(o.settimaneValori[s.settimanaAttivaIndex].serie,i)||(o.settimaneValori[s.settimanaAttivaIndex].serie=i),xe(i)}),P()(),C(4,"label"),q(5,"Ripetizioni "),C(6,"input",83),lt("ngModelChange",function(i){be(t);let o=ne().$implicit,s=ne(2);return ut(o.settimaneValori[s.settimanaAttivaIndex].ripetizioni,i)||(o.settimaneValori[s.settimanaAttivaIndex].ripetizioni=i),xe(i)}),P()(),C(7,"label"),q(8,"Min "),C(9,"input",83),lt("ngModelChange",function(i){be(t);let o=ne().$implicit,s=ne(2);return ut(o.settimaneValori[s.settimanaAttivaIndex].minuti,i)||(o.settimaneValori[s.settimanaAttivaIndex].minuti=i),xe(i)}),P()(),C(10,"label"),q(11,"Sec "),C(12,"input",83),lt("ngModelChange",function(i){be(t);let o=ne().$implicit,s=ne(2);return ut(o.settimaneValori[s.settimanaAttivaIndex].secondi,i)||(o.settimaneValori[s.settimanaAttivaIndex].secondi=i),xe(i)}),P()(),C(13,"label"),q(14,"Kg "),C(15,"input",84),lt("ngModelChange",function(i){be(t);let o=ne().$implicit,s=ne(2);return ut(o.settimaneValori[s.settimanaAttivaIndex].caricoKg,i)||(o.settimaneValori[s.settimanaAttivaIndex].caricoKg=i),xe(i)}),P()()()}if(n&2){let t=ne().$implicit,r=ne(2);K(3),ct("ngModel",t.settimaneValori[r.settimanaAttivaIndex].serie),K(3),ct("ngModel",t.settimaneValori[r.settimanaAttivaIndex].ripetizioni),K(3),ct("ngModel",t.settimaneValori[r.settimanaAttivaIndex].minuti),K(3),ct("ngModel",t.settimaneValori[r.settimanaAttivaIndex].secondi),K(3),ct("ngModel",t.settimaneValori[r.settimanaAttivaIndex].caricoKg)}}function Oue(n,e){if(n&1){let t=Mt();C(0,"div",82)(1,"label"),q(2,"Serie "),C(3,"input",83),lt("ngModelChange",function(i){be(t);let o=ne().$implicit;return ut(o.settimaneValori[0].serie,i)||(o.settimaneValori[0].serie=i),xe(i)}),P()(),C(4,"label"),q(5,"Ripetizioni "),C(6,"input",83),lt("ngModelChange",function(i){be(t);let o=ne().$implicit;return ut(o.settimaneValori[0].ripetizioni,i)||(o.settimaneValori[0].ripetizioni=i),xe(i)}),P()(),C(7,"label"),q(8,"Min "),C(9,"input",83),lt("ngModelChange",function(i){be(t);let o=ne().$implicit;return ut(o.settimaneValori[0].minuti,i)||(o.settimaneValori[0].minuti=i),xe(i)}),P()(),C(10,"label"),q(11,"Sec "),C(12,"input",83),lt("ngModelChange",function(i){be(t);let o=ne().$implicit;return ut(o.settimaneValori[0].secondi,i)||(o.settimaneValori[0].secondi=i),xe(i)}),P()()()}if(n&2){let t=ne().$implicit;K(3),ct("ngModel",t.settimaneValori[0].serie),K(3),ct("ngModel",t.settimaneValori[0].ripetizioni),K(3),ct("ngModel",t.settimaneValori[0].minuti),K(3),ct("ngModel",t.settimaneValori[0].secondi)}}function Fue(n,e){if(n&1){let t=Mt();C(0,"textarea",85),lt("ngModelChange",function(i){be(t);let o=ne().$implicit,s=ne(2);return ut(o.settimaneValori[s.settimanaAttivaIndex].note,i)||(o.settimaneValori[s.settimanaAttivaIndex].note=i),xe(i)}),Ne("blur",function(){be(t);let i=ne(3);return xe(i.persistSchedule())}),P()}if(n&2){let t=ne().$implicit,r=ne(2);ct("ngModel",t.settimaneValori[r.settimanaAttivaIndex].note)}}function Lue(n,e){if(n&1){let t=Mt();C(0,"textarea",85),lt("ngModelChange",function(i){be(t);let o=ne().$implicit;return ut(o.settimaneValori[0].note,i)||(o.settimaneValori[0].note=i),xe(i)}),Ne("blur",function(){be(t);let i=ne(3);return xe(i.persistSchedule())}),P()}if(n&2){let t=ne().$implicit;ct("ngModel",t.settimaneValori[0].note)}}function Vue(n,e){if(n&1){let t=Mt();C(0,"div",67)(1,"div",68)(2,"div",69),Je(3,Pue,1,3,"img",70)(4,kue,2,0,"div",71),P(),C(5,"div",72),q(6),P(),C(7,"div",73)(8,"button",74),Ne("click",function(){let i=be(t).index,o=ne(2);return xe(o.moveExerciseUp(i))}),q(9,"\u2191"),P(),C(10,"button",75),Ne("click",function(){let i=be(t).index,o=ne(2);return xe(o.moveExerciseDown(i))}),q(11,"\u2193"),P(),C(12,"button",76),Ne("click",function(){let i=be(t).index,o=ne(2);return xe(o.resetExercise(i))}),q(13,"\u27F3"),P(),C(14,"button",77),Ne("click",function(){let i=be(t).index,o=ne(2);return xe(o.rimuoviEsercizio(i))}),q(15,"\xD7"),P()()(),Je(16,Rue,16,5,"div",78)(17,Oue,13,4,"div",78)(18,Fue,1,1,"textarea",79)(19,Lue,1,1,"textarea",79),P()}if(n&2){let t=e.$implicit,r=e.index,i=ne(2);K(3),de("ngIf",t.image),K(),de("ngIf",!t.image),K(2),ft(t.nome),K(2),de("disabled",i.currentExercisePage*i.pageSize+r===0),K(2),de("disabled",i.currentExercisePage*i.pageSize+r===i.scheda.giorni[i.giornoAttivoIndex].esercizi.length-1),K(6),de("ngIf",i.templateType==="profghizztemplate"),K(),de("ngIf",i.templateType!=="profghizztemplate"),K(),de("ngIf",i.templateType==="profghizztemplate"),K(),de("ngIf",i.templateType!=="profghizztemplate")}}function jue(n,e){if(n&1&&(C(0,"div",65),Je(1,Vue,20,9,"div",66),P()),n&2){let t=ne();K(),de("ngForOf",t.pagedExercises)}}function Bue(n,e){if(n&1){let t=Mt();C(0,"div",86)(1,"button",87),Ne("click",function(){be(t);let i=ne();return xe(i.goToPrevExercisePage())}),Pi(),C(2,"svg",88),Tt(3,"circle",89)(4,"path",90),P()(),hs(),C(5,"span",91),q(6),P(),C(7,"button",87),Ne("click",function(){be(t);let i=ne();return xe(i.goToNextExercisePage())}),Pi(),C(8,"svg",88),Tt(9,"circle",89)(10,"path",92),P()()()}if(n&2){let t=ne();K(),de("disabled",t.currentExercisePage<=0),K(5),Gc("",t.currentExercisePage+1," / ",t.totalExercisePages||1),K(),de("disabled",t.currentExercisePage>=t.totalExercisePages-1)}}function Uue(n,e){if(n&1&&(C(0,"option",93),q(1),P()),n&2){let t=e.$implicit;de("value",t.name),K(),ft(t.name)}}function zue(n,e){if(n&1&&Tt(0,"img",80),n&2){let t=ne().$implicit;de("alt",Yf(t.name))("src",t.image,Vr)}}function que(n,e){n&1&&(C(0,"div",100),q(1,"\u{1F3CB}\uFE0F"),P())}function Hue(n,e){if(n&1){let t=Mt();C(0,"div",94),Ne("click",function(){let i=be(t).$implicit,o=ne();return xe(o.aggiungiEsercizioAlGiorno(i))}),C(1,"div",95),Je(2,zue,1,3,"img",70)(3,que,2,0,"div",96),P(),C(4,"div",97)(5,"div",98),q(6),P(),C(7,"div",99),q(8),P()()()}if(n&2){let t=e.$implicit;K(2),de("ngIf",t.image),K(),de("ngIf",!t.image),K(3),ft(t.name),K(2),ft(t.category)}}function $ue(n,e){n&1&&(C(0,"div",101),q(1,"Nessun esercizio"),P())}function Gue(n,e){if(n&1&&Tt(0,"img",80),n&2){let t=ne().$implicit;de("alt",Yf(t.name))("src",t.avatarUrl,Vr)}}function Wue(n,e){n&1&&(C(0,"span"),q(1,"\u{1F464}"),P())}function Kue(n,e){if(n&1&&(C(0,"div",117),q(1),P()),n&2){let t=ne().$implicit;K(),ft(t.email)}}function Yue(n,e){if(n&1){let t=Mt();C(0,"div",111),Ne("click",function(){let i=be(t).$implicit,o=ne(2);return xe(o.selectUser(i))}),C(1,"div",112),Je(2,Gue,1,3,"img",70)(3,Wue,2,0,"span",15),P(),C(4,"div",113)(5,"div",114),q(6),P(),Je(7,Kue,2,1,"div",115),C(8,"div",116),q(9),P()()()}if(n&2){let t=e.$implicit;K(2),de("ngIf",t.avatarUrl),K(),de("ngIf",!t.avatarUrl),K(3),ft(t.name),K(),de("ngIf",t.email),K(),oo("inactive",t.status!=="Attivo"),K(),ft(t.status)}}function Que(n,e){n&1&&(C(0,"div",118),q(1,"Nessun utente"),P())}function Zue(n,e){if(n&1){let t=Mt();C(0,"div",102)(1,"div",103)(2,"div",104)(3,"div",105),q(4,"Seleziona Cliente"),P(),C(5,"button",106),Ne("click",function(){be(t);let i=ne();return xe(i.closeUserPicker())}),q(6,"\xD7"),P()(),C(7,"input",107),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.userSearch,i)||(o.userSearch=i),xe(i)}),Ne("input",function(){be(t);let i=ne();return xe(i.filterUsers())}),P(),C(8,"div",108),Je(9,Yue,10,7,"div",109),Wc(10,"slice"),Je(11,Que,2,0,"div",110),P()()()}if(n&2){let t=ne();K(7),ct("ngModel",t.userSearch),K(2),de("ngForOf",Cv(10,3,t.filteredUserList,0,3)),K(2),de("ngIf",t.filteredUserList.length===0)}}var Zz=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.pdfSchedaService=i,this.authService=o,this.firestore=De(co),this.cliente=null,this.scheda={stato:"In preparazione",livello:"Intermedio",durata:"4 Settimane",dataInizio:"",orario:"",giorni:[{nome:"Giorno 1",esercizi:[],settimane:[{nome:"Settimana 1"}]}],templateType:"fitnessanddance"},this.logoPreviewUrl=null,this.tempLogoFile=null,this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0,this.esercizi=[],this.categorie=[],this.eserciziFiltrati=[],this.searchTerm="",this.filterCategoria="",this.allUsers=[],this.filteredUserList=[],this.userSearch="",this.showUserPicker=!1,this.oggi=new Date().toISOString().split("T")[0],this.pdfBlobUrl=null,this.currentExercisePage=0,this.pageSize=3,this.showSavedMsg=!1,this.savedMsgText="Scheda salvata",this.templateType="fitnessanddance"}get pagedExercises(){let r=this.scheda.giorni[this.giornoAttivoIndex].esercizi,i=this.currentExercisePage*this.pageSize;return r.slice(i,i+this.pageSize)}get totalExercisePages(){let r=this.scheda.giorni[this.giornoAttivoIndex].esercizi;return Math.max(1,Math.ceil(r.length/this.pageSize))}goToPrevExercisePage(){this.currentExercisePage>0&&this.currentExercisePage--}goToNextExercisePage(){this.currentExercisePage<this.totalExercisePages-1&&this.currentExercisePage++}ngOnInit(){this.initStandard()}initStandard(){return ee(this,null,function*(){yield this.loadUsers(),yield this.loadSelectedUser(),yield this.loadExercises(),yield this.loadCategories(),yield this.loadExistingSchedule(),this.filtraEsercizi(),this.filterUsers(),this.scheda.dataInizio||(this.scheda.dataInizio=this.oggi),this.scheda.orario||(this.scheda.orario=this.normalizeTimeToHMS(new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))),this.scheda.templateType=this.templateType,this.scheda.giorni.forEach(r=>{this.templateType==="profghizztemplate"?(!r.settimane||r.settimane.length===0)&&(r.settimane=[{nome:"Settimana 1"}]):delete r.settimane,r.esercizi.forEach(i=>{(!i.settimaneValori||i.settimaneValori.length===0)&&(i.settimaneValori=[this.zeroValues()])})}),this.templateType==="profghizztemplate"&&(this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0)})}onTemplateTypeChange(r){this.templateType=r,this.scheda.templateType=r,r==="profghizztemplate"?(this.scheda.giorni=[{nome:"Giorno 1",esercizi:[],settimane:[{nome:"Settimana 1"}]}],this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0):(this.scheda.giorni=[{nome:"Giorno 1",esercizi:[]}],this.giornoAttivoIndex=0,this.settimanaAttivaIndex=0),this.persistSchedule()}setGiorno(r){this.giornoAttivoIndex=r,this.settimanaAttivaIndex=0,this.currentExercisePage=0}setSettimana(r){let i=this.scheda.giorni[this.giornoAttivoIndex];this.templateType==="profghizztemplate"&&i.settimane&&i.esercizi.forEach(o=>{for(o.settimaneValori=o.settimaneValori||[];o.settimaneValori.length<=r;)o.settimaneValori.push(this.zeroValues())}),this.settimanaAttivaIndex=r}aggiungiGiorno(){let r=this.scheda.giorni.length+1;this.templateType==="profghizztemplate"?this.scheda.giorni.push({nome:"Giorno "+r,esercizi:[],settimane:[{nome:"Settimana 1"}]}):this.scheda.giorni.push({nome:"Giorno "+r,esercizi:[]}),this.giornoAttivoIndex=this.scheda.giorni.length-1,this.settimanaAttivaIndex=0,this.currentExercisePage=0,this.persistSchedule()}rimuoviGiorno(){this.scheda.giorni.length!==1&&(this.scheda.giorni.splice(this.giornoAttivoIndex,1),this.giornoAttivoIndex>=this.scheda.giorni.length&&(this.giornoAttivoIndex=this.scheda.giorni.length-1),this.settimanaAttivaIndex=0,this.currentExercisePage=0,this.persistSchedule())}aggiungiSettimanaGiorno(){if(this.templateType!=="profghizztemplate")return;let r=this.scheda.giorni[this.giornoAttivoIndex].settimane||[];r.push({nome:"Settimana "+(r.length+1)}),this.scheda.giorni[this.giornoAttivoIndex].settimane=r,this.scheda.giorni[this.giornoAttivoIndex].esercizi.forEach(o=>{o.settimaneValori=o.settimaneValori||[],o.settimaneValori.push(this.zeroValues())}),this.settimanaAttivaIndex=r.length-1,this.persistSchedule()}rimuoviSettimanaGiorno(){if(this.templateType!=="profghizztemplate")return;let r=this.scheda.giorni[this.giornoAttivoIndex],i=r.settimane||[];i.length!==1&&(i.splice(this.settimanaAttivaIndex,1),r.esercizi.forEach(o=>{o.settimaneValori?.length>this.settimanaAttivaIndex&&o.settimaneValori.splice(this.settimanaAttivaIndex,1)}),this.settimanaAttivaIndex>=i.length&&(this.settimanaAttivaIndex=i.length-1),r.settimane=i,this.persistSchedule())}loadUsers(){return ee(this,null,function*(){let r=Wr(this.firestore,"users"),i=yield fl(r);this.allUsers=i.docs.map(o=>Oe({id:o.id},o.data()))})}loadSelectedUser(){return ee(this,null,function*(){this.cliente=this.allUsers[0]||null,this.cliente&&(this.scheda.userId=this.cliente.id)})}loadExercises(){return ee(this,null,function*(){let r=Wr(this.firestore,"exercises"),i=yield fl(r);this.esercizi=i.docs.map(o=>Oe({id:o.id},o.data()))})}loadCategories(){return ee(this,null,function*(){let r=Wr(this.firestore,"categories"),i=yield fl(r);this.categorie=i.docs.map(o=>Oe({id:o.id,selected:!1},o.data()))})}loadExistingSchedule(){return ee(this,null,function*(){if(!this.cliente)return;let r=Wr(this.firestore,"schede"),i=uU(r,dU("userId","==",this.cliente.id),lU("createdAt","asc")),s=(yield fl(i)).docs.map(a=>Oe({id:a.id},a.data()));s.length>0&&(this.scheda=s[s.length-1],this.scheda.giorni.forEach(a=>{this.templateType==="profghizztemplate"?(!a.settimane||a.settimane.length===0)&&(a.settimane=[{nome:"Settimana 1"}]):delete a.settimane,a.esercizi.forEach(c=>{(!c.settimaneValori||c.settimaneValori.length===0)&&(c.settimaneValori=[this.zeroValues()])})}),this.scheda.templateType=this.scheda.templateType||"fitnessanddance",this.templateType=this.scheda.templateType)})}filterUsers(){let r=this.userSearch.toLowerCase().trim();this.filteredUserList=this.allUsers.filter(i=>(i.name||"").toLowerCase().includes(r)||(i.email||"").toLowerCase().includes(r))}openUserPicker(){this.showUserPicker=!0,this.userSearch="",this.filterUsers()}closeUserPicker(){this.showUserPicker=!1}selectUser(r){return ee(this,null,function*(){this.cliente=r,this.scheda.userId=r.id,this.closeUserPicker(),yield this.loadExistingSchedule(),this.currentExercisePage=0})}enableTabEdit(r){r.editing=!0,setTimeout(()=>{let i=document.querySelectorAll(".tab-edit"),o=i[i.length-1];o?.focus(),o?.select()},0)}disableTabEdit(r){r.editing=!1,this.persistSchedule()}aggiungiEsercizioAlGiorno(r){let i=this.scheda.giorni[this.giornoAttivoIndex];if(this.templateType==="profghizztemplate"){let o=i.settimane?.length||1;i.esercizi.push({id:r.id,nome:r.name,image:r.image,categoria:r.category,settimaneValori:Array.from({length:o},()=>this.zeroValues())})}else i.esercizi.push({id:r.id,nome:r.name,image:r.image,categoria:r.category,settimaneValori:[this.zeroValues()]});this.persistSchedule()}rimuoviEsercizio(r){this.scheda.giorni[this.giornoAttivoIndex].esercizi.splice(r+this.currentExercisePage*this.pageSize,1),this.currentExercisePage>0&&this.pagedExercises.length===0&&this.goToPrevExercisePage(),this.persistSchedule()}filtraEsercizi(){let r=this.searchTerm.toLowerCase().trim();this.eserciziFiltrati=this.esercizi.filter(i=>{let o=(i.name||"").toLowerCase().includes(r),s=this.filterCategoria?i.category===this.filterCategoria:!0;return o&&s})}salvaScheda(){return ee(this,null,function*(){yield this.authService.ensureSignedIn();let r=new Date;this.scheda.orario=this.normalizeTimeToHMS(r.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"})),this.scheda.dataInizio=r.toISOString().split("T")[0],this.scheda.templateType=this.templateType,yield this.persistSchedule();let i=yield this.buildPdfBase64();yield this.appendCardToUser(this.scheda.dataInizio,this.scheda.orario,i),this.showSavedMsg=!0,this.savedMsgText="Scheda salvata",setTimeout(()=>{this.showSavedMsg=!1},2500)})}normalizeTimeToHMS(r){if(!r)return"";let i=r.match(/^(\d{2}):(\d{2})(?::(\d{2}))?$/);if(!i)return r;let o=i[3]??"00";return`${i[1]}:${i[2]}:${o}`}zeroValues(){return{serie:0,ripetizioni:0,minuti:0,secondi:0,caricoKg:0,note:""}}buildPdfBase64(){return ee(this,null,function*(){try{return(this.scheda.templateType==="profghizztemplate"?yield this.pdfSchedaService.buildProfGhizzDoc(this.scheda,this.cliente,this.logoPreviewUrl):yield this.pdfSchedaService.buildDoc(this.scheda,this.cliente,this.logoPreviewUrl)).output("datauristring").split(",")[1]||""}catch{return""}})}appendCardToUser(r,i,o){return ee(this,null,function*(){if(!this.cliente||!this.scheda)return;yield this.authService.ensureSignedIn();let s=this.computeScheduleTitle(),a=this.formatDateIT(r),c=this.normalizeTimeToHMS(i),l=85e4,u={title:s,date:a||"",time:c};o&&o.length<=l&&(u.pdfBase64=o);let h=Br(this.firestore,`users/${this.cliente.id}`);try{let m=yield mC(h),b=[...m.exists()&&Array.isArray(m.data().cards)?m.data().cards:[],u];yield pl(h,{cards:b}),this.cliente&&(this.cliente.cards=b)}catch(m){console.error("Error appending card to user",m)}})}computeScheduleTitle(){let r=this.scheda.giorni?.[this.giornoAttivoIndex]?.nome||"Scheda allenamento",i=this.scheda.livello||"",o=this.scheda.stato||"",s=i?`${r} \u2022 ${i}`:r;return o?`${s} \u2022 ${o}`:s}formatDateIT(r){if(!r)return null;let i=r.match(/^(\d{4})-(\d{2})-(\d{2})$/);return i?`${i[3]}/${i[2]}/${i[1]}`:null}persistSchedule(){return ee(this,null,function*(){if(!this.cliente)return;yield this.authService.ensureSignedIn();let r=Rt(Oe({},this.scheda),{userId:this.cliente.id,createdAt:Date.now(),templateType:this.templateType});if(this.scheda.id){let i=Br(this.firestore,`schede/${this.scheda.id}`);try{yield hl(i,r,{merge:!0})}catch(o){console.error("Error updating schedule",o)}}else{let i=Wr(this.firestore,"schede");try{let o=yield c_(i,r);this.scheda.id=o.id}catch(o){console.error("Error creating schedule",o)}}})}apriSchedaPerUser(r){this.router.navigate(["/gestione-schede"],{state:{selectedUserId:r}})}anteprimaPdf(){return ee(this,null,function*(){let r;this.scheda.templateType==="profghizztemplate"?r=yield this.pdfSchedaService.buildProfGhizzDoc(this.scheda,this.cliente,this.logoPreviewUrl):r=yield this.pdfSchedaService.buildDoc(this.scheda,this.cliente,this.logoPreviewUrl);let i=r.output("blob");if(this.pdfBlobUrl)try{URL.revokeObjectURL(this.pdfBlobUrl)}catch{}this.pdfBlobUrl=URL.createObjectURL(i),window.open(this.pdfBlobUrl,"_blank")})}moveExerciseUp(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;o!==0&&([i[o-1],i[o]]=[i[o],i[o-1]],this.persistSchedule())}moveExerciseDown(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;o!==i.length-1&&([i[o+1],i[o]]=[i[o],i[o+1]],this.persistSchedule())}resetExercise(r){let i=this.scheda.giorni[this.giornoAttivoIndex].esercizi,o=r+this.currentExercisePage*this.pageSize;if(!i[o]?.settimaneValori)return;let s=this.templateType==="profghizztemplate"?this.settimanaAttivaIndex:0;i[o].settimaneValori[s]=this.zeroValues(),this.persistSchedule()}onLogoSelect(r){let i=r.target;if(!i.files||!i.files[0])return;let o=i.files[0];this.tempLogoFile=o;let s=new FileReader;s.onload=()=>{this.logoPreviewUrl=s.result},s.readAsDataURL(o)}};e.\u0275fac=function(i){return new(i||e)(tt(Ar),tt(JC),tt(Tg))},e.\u0275cmp=Kn({type:e,selectors:[["app-gestione-schede"]],standalone:!1,decls:82,vars:31,consts:[["class","save-toast",4,"ngIf"],[1,"schede-page"],[1,"col-left","section-box"],[1,"avatar-block",3,"click"],["alt","Cliente",3,"src",4,"ngIf"],["class","avatar-placeholder",4,"ngIf"],[1,"cliente-name"],[1,"cliente-info"],[1,"info-row"],[1,"label"],[3,"ngModelChange","ngModel"],["type","text","placeholder","es. 8 Settimane",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"logo-uploader"],["for","logoInput",1,"logo-upload-box"],[4,"ngIf"],["alt","Logo anteprima","class","logo-preview-img",3,"src",4,"ngIf"],["type","file","id","logoInput","accept","image/*","hidden","",3,"change"],[1,"left-actions"],[1,"btn","primary",3,"click"],[1,"btn","outline",3,"click"],[1,"col-center","section-box"],[1,"row-template-select-compact","small"],["for","templateTypeSel",1,"label-template-type-compact"],["id","templateTypeSel",1,"select-template-type-compact",3,"ngModelChange","change","ngModel"],["value","fitnessanddance"],["value","profghizztemplate"],[1,"giorni-tabs"],["class","tab-item",3,"active",4,"ngFor","ngForOf"],[1,"tab-add",3,"click"],["title","Rimuovi giorno",1,"tab-remove",3,"click","disabled"],["class","settimane-tabs",4,"ngIf"],[1,"giorno-contenuto"],["class","empty-drop",4,"ngIf"],["class","exercise-list",4,"ngIf"],["class","exercise-pagination-mini",4,"ngIf"],[1,"col-right","section-box"],[1,"search-box"],["type","text","placeholder","Cerca esercizi...",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"esercizi-scroll"],["class","big-ex-card",3,"click",4,"ngFor","ngForOf"],["class","empty-right",4,"ngIf"],["class","user-picker-backdrop",4,"ngIf"],[1,"save-toast"],["alt","Cliente",3,"src"],[1,"avatar-placeholder"],["width","75","height","75","viewBox","0 0 75 75","fill","none"],["x","3","y","3","width","69","height","69","rx","16","fill","#F4F8FB","stroke","#b9cddd","stroke-width","2.3"],["x","17","y","23","width","41","height","30","rx","5","fill","#E8F0FA","stroke","#b9cddd","stroke-width","1.6"],["cx","29","cy","37","r","5.5","fill","#b9cddd"],["d","M19 53l12-12c2-2 5.6-2 7.6 0l15 15c1.9 1.9 5 1.6 6.8-.4l8-10.5","stroke","#2563eb","stroke-width","2","fill","none"],["alt","Logo anteprima",1,"logo-preview-img",3,"src"],[1,"tab-item"],["class","tab-label",3,"click","dblclick",4,"ngIf"],["class","tab-edit",3,"ngModel","ngModelChange","blur","keydown.enter",4,"ngIf"],[1,"tab-label",3,"click","dblclick"],[1,"tab-edit",3,"ngModelChange","blur","keydown.enter","ngModel"],[1,"settimane-tabs"],["class","tab-item",3,"active","click",4,"ngFor","ngForOf"],["title","Rimuovi settimana",1,"tab-remove",3,"click","disabled"],[1,"tab-item",3,"click"],[1,"empty-drop"],[1,"exercise-list"],["class","exercise-card",4,"ngFor","ngForOf"],[1,"exercise-card"],[1,"ex-top"],[1,"ex-img"],[3,"src","alt",4,"ngIf"],["class","ex-placeholder",4,"ngIf"],[1,"ex-title"],[1,"ex-controls"],["title","Sposta su",1,"btn-icon","move",3,"click","disabled"],["title","Sposta gi\xF9",1,"btn-icon","move",3,"click","disabled"],["title","Reset valori",1,"btn-icon","reset",3,"click"],[1,"btn-icon","remove",3,"click"],["class","ex-fields",4,"ngIf"],["class","ex-note","rows","2","placeholder","Note",3,"ngModel","ngModelChange","blur",4,"ngIf"],[3,"src","alt"],[1,"ex-placeholder"],[1,"ex-fields"],["type","number","min","0",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.1",3,"ngModelChange","ngModel"],["rows","2","placeholder","Note",1,"ex-note",3,"ngModelChange","blur","ngModel"],[1,"exercise-pagination-mini"],[1,"page-arrow-mini",3,"click","disabled"],["viewBox","0 0 24 24"],["cx","12","cy","12","r","12","fill","transparent"],["d","M15.5 19 9.5 12l6-7","fill","none","stroke","white","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[1,"page-indicator-mini"],["d","M8.5 5 14.5 12l-6 7","fill","none","stroke","white","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[3,"value"],[1,"big-ex-card",3,"click"],[1,"big-img"],["class","big-placeholder",4,"ngIf"],[1,"big-info"],[1,"big-name"],[1,"big-cat"],[1,"big-placeholder"],[1,"empty-right"],[1,"user-picker-backdrop"],[1,"user-picker-modal"],[1,"picker-header"],[1,"picker-title"],[1,"picker-close",3,"click"],["type","text","placeholder","Cerca nome o email...",1,"picker-search",3,"ngModelChange","input","ngModel"],[1,"picker-list"],["class","picker-item",3,"click",4,"ngFor","ngForOf"],["class","picker-empty",4,"ngIf"],[1,"picker-item",3,"click"],[1,"pi-avatar"],[1,"pi-data"],[1,"pi-name"],["class","pi-email",4,"ngIf"],[1,"pi-status"],[1,"pi-email"],[1,"picker-empty"]],template:function(i,o){i&1&&(Je(0,bue,2,1,"div",0),C(1,"div",1)(2,"aside",2)(3,"div",3),Ne("click",function(){return o.openUserPicker()}),Je(4,xue,1,1,"img",4)(5,Cue,2,0,"div",5),P(),C(6,"div",6),q(7),P(),C(8,"div",7)(9,"div",8)(10,"span",9),q(11,"Stato"),P(),C(12,"select",10),lt("ngModelChange",function(a){return ut(o.scheda.stato,a)||(o.scheda.stato=a),a}),C(13,"option"),q(14,"In preparazione"),P(),C(15,"option"),q(16,"Attiva"),P(),C(17,"option"),q(18,"Completata"),P(),C(19,"option"),q(20,"Sospesa"),P()()(),C(21,"div",8)(22,"span",9),q(23,"Livello"),P(),C(24,"select",10),lt("ngModelChange",function(a){return ut(o.scheda.livello,a)||(o.scheda.livello=a),a}),C(25,"option"),q(26,"Principiante"),P(),C(27,"option"),q(28,"Intermedio"),P(),C(29,"option"),q(30,"Avanzato"),P()()(),C(31,"div",8)(32,"span",9),q(33,"Durata"),P(),C(34,"input",11),lt("ngModelChange",function(a){return ut(o.scheda.durata,a)||(o.scheda.durata=a),a}),P()(),C(35,"div",8)(36,"span",9),q(37,"Inizio"),P(),C(38,"input",12),lt("ngModelChange",function(a){return ut(o.scheda.dataInizio,a)||(o.scheda.dataInizio=a),a}),P()()(),C(39,"div",13)(40,"label",14),Je(41,Eue,7,0,"ng-container",15)(42,Iue,1,1,"img",16),C(43,"input",17),Ne("change",function(a){return o.onLogoSelect(a)}),P()()(),C(44,"div",18)(45,"button",19),Ne("click",function(){return o.salvaScheda()}),q(46,"Salva Scheda"),P(),C(47,"button",20),Ne("click",function(){return o.anteprimaPdf()}),q(48,"Stampa PDF"),P()()(),C(49,"section",21)(50,"div",22)(51,"label",23),q(52,"Template"),P(),C(53,"select",24),lt("ngModelChange",function(a){return ut(o.templateType,a)||(o.templateType=a),a}),Ne("change",function(){return o.onTemplateTypeChange(o.templateType)}),C(54,"option",25),q(55,"Palestra"),P(),C(56,"option",26),q(57,"Atleta"),P()()(),C(58,"div",27),Je(59,Due,3,4,"div",28),C(60,"button",29),Ne("click",function(){return o.aggiungiGiorno()}),q(61,"+ Giorno"),P(),C(62,"button",30),Ne("click",function(){return o.rimuoviGiorno()}),q(63,"\u2013 Giorno"),P()(),Je(64,Mue,6,2,"div",31),C(65,"div",32),Je(66,Nue,2,0,"div",33)(67,jue,2,1,"div",34)(68,Bue,11,4,"div",35),P()(),C(69,"aside",36)(70,"div",37)(71,"input",38),lt("ngModelChange",function(a){return ut(o.searchTerm,a)||(o.searchTerm=a),a}),Ne("input",function(){return o.filtraEsercizi()}),P(),C(72,"select",39),lt("ngModelChange",function(a){return ut(o.filterCategoria,a)||(o.filterCategoria=a),a}),Ne("change",function(){return o.filtraEsercizi()}),C(73,"option",40),q(74,"Tutte le categorie"),P(),Je(75,Uue,2,2,"option",41),Wc(76,"slice"),P()(),C(77,"div",42),Je(78,Hue,9,4,"div",43),Wc(79,"slice"),Je(80,$ue,2,0,"div",44),P()()(),Je(81,Zue,12,7,"div",45)),i&2&&(de("ngIf",o.showSavedMsg),K(4),de("ngIf",o.cliente==null?null:o.cliente.avatarUrl),K(),de("ngIf",!(o.cliente!=null&&o.cliente.avatarUrl)),K(2),ft((o.cliente==null?null:o.cliente.name)||"Seleziona cliente"),K(5),ct("ngModel",o.scheda.stato),K(12),ct("ngModel",o.scheda.livello),K(10),ct("ngModel",o.scheda.durata),K(4),ct("ngModel",o.scheda.dataInizio),K(3),de("ngIf",!o.logoPreviewUrl),K(),de("ngIf",o.logoPreviewUrl),K(11),ct("ngModel",o.templateType),K(6),de("ngForOf",o.scheda.giorni),K(3),de("disabled",o.scheda.giorni.length===1),K(2),de("ngIf",o.templateType==="profghizztemplate"&&(o.scheda.giorni[o.giornoAttivoIndex]==null?null:o.scheda.giorni[o.giornoAttivoIndex].settimane)),K(2),de("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length===0),K(),de("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length>0),K(),de("ngIf",o.scheda.giorni[o.giornoAttivoIndex].esercizi.length>0),K(3),ct("ngModel",o.searchTerm),K(),ct("ngModel",o.filterCategoria),K(3),de("ngForOf",Cv(76,23,o.categorie,0,3)),K(3),de("ngForOf",Cv(79,27,o.eserciziFiltrati,0,3)),K(2),de("ngIf",o.eserciziFiltrati.length===0),K(),de("ngIf",o.showUserPicker))},dependencies:[qi,ki,Qc,Zc,xo,iD,Ta,ms,oD,Ko,R5],styles:["body[_ngcontent-%COMP%]{background:#f5f8fc;color:#173453;font-family:Segoe UI,Arial,sans-serif}.schede-page[_ngcontent-%COMP%]{display:grid;grid-template-columns:280px 1fr 320px;gap:26px;padding:26px 30px 40px;background:#f5f8fc;min-height:100vh;box-sizing:border-box}.save-toast[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:24px;background:#1cb164;color:#fff;font-weight:700;border-radius:10px;padding:10px 14px;box-shadow:0 6px 18px #1cb16447;z-index:3000;letter-spacing:.02em}.section-box[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:18px 16px 20px;box-shadow:0 3px 14px #193c6e14;display:flex;flex-direction:column;gap:18px}.bordered[_ngcontent-%COMP%]{border-radius:8px;background:#f9fbfe}.col-left[_ngcontent-%COMP%], .col-center[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.col-left[_ngcontent-%COMP%]{align-items:center;background:#183d81;border-radius:14px}.col-left[_ngcontent-%COMP%]   .section-box[_ngcontent-%COMP%], .col-left.section-box[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.col-left[_ngcontent-%COMP%]   .cliente-name[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .bordered[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{background:#f5f9ff;color:#183d81;border:none}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]:hover{background:#1d4fb8;color:#fff}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#194065}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.outline[_ngcontent-%COMP%]:hover{background:#dbe9fb}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.share[_ngcontent-%COMP%]{background:#fbf7ef;color:#965d00;border:1px solid #e9d7b2}.col-left[_ngcontent-%COMP%]   .left-actions[_ngcontent-%COMP%]   .btn.share[_ngcontent-%COMP%]:hover{background:#f6e9cf}.col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .col-left[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;background:#eef6ff}.avatar-block[_ngcontent-%COMP%]{width:92px;height:92px;border-radius:20px;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer;background:#eef3fb;border:none;transition:box-shadow .15s,transform .15s,border-color .15s;margin-left:auto;margin-right:auto}.avatar-block[_ngcontent-%COMP%]:hover{box-shadow:0 4px 14px #2563eb59;transform:translateY(-3px)}.avatar-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.avatar-placeholder[_ngcontent-%COMP%]{font-size:40px;opacity:.55}.cliente-name[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem;font-weight:800;letter-spacing:.03em;margin-left:auto;margin-right:auto;text-align:center;display:block;border:none}.cliente-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:14px 12px;border:none}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:70px;font-size:.68rem;font-weight:700;color:#173453}.info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{flex:1;padding:6px 8px;font-size:.7rem;background:#f1f6fb;font-weight:600;color:#173453;outline:none;transition:background-color .15s;border:none}.info-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;box-sizing:border-box}.logo-uploader[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:18px}.logo-upload-box[_ngcontent-%COMP%]{width:110px;height:110px;border:2px dashed #b9cddd;border-radius:18px;background:#f8fafc;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:border-color .15s,background .15s;text-align:center}.logo-upload-box[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#f1faff}.logo-upload-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.logo-preview-img[_ngcontent-%COMP%]{width:104px;height:104px;object-fit:contain;border-radius:12px;display:block}.left-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.btn[_ngcontent-%COMP%]{border:none;padding:12px 18px;border-radius:12px;font-size:.72rem;font-weight:800;letter-spacing:.05em;cursor:pointer;transition:background .16s,box-shadow .16s,transform .12s;display:inline-flex;align-items:center;justify-content:center}.btn.primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none}.btn.primary[_ngcontent-%COMP%]:hover{background:#1d4fb8;color:#fff}.btn.primary[disabled][_ngcontent-%COMP%], .btn.primary[_ngcontent-%COMP%]:disabled{background:#e3e9f8;color:#173453;cursor:not-allowed;box-shadow:none;opacity:1}.btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#194065}.btn.outline[_ngcontent-%COMP%]:hover{background:#dbe9fb}.btn.share[_ngcontent-%COMP%]{background:#fbf7ef;color:#965d00;border:1px solid #e9d7b2}.btn.share[_ngcontent-%COMP%]:hover{background:#f6e9cf}.btn.mini[_ngcontent-%COMP%]{background:#eef3fb;color:#173453;padding:6px 10px;font-size:.6rem}.btn.mini[_ngcontent-%COMP%]:hover{background:#dbe9fb}.row-template-select-compact.small[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px;gap:5px;padding:0}.label-template-type-compact[_ngcontent-%COMP%]{font-size:.69rem;font-weight:900;color:#1c355d;margin-right:0;min-width:0;display:inline-block;letter-spacing:.01em}.select-template-type-compact[_ngcontent-%COMP%]{font-size:.74rem;height:24px;padding:0 10px;border-radius:8px;border:1.5px solid #2563eb;font-weight:800;color:#1742b0;background:#f7faff;outline:none;transition:border-color .14s;min-width:86px;box-shadow:none}.select-template-type-compact[_ngcontent-%COMP%]:focus{border-color:#1d6ceb;background:#eaf3ff}.giorni-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px;flex-wrap:wrap;border:none}.tab-remove[_ngcontent-%COMP%]{background:#fbefee;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;margin-left:0;cursor:pointer;transition:background .15s;border:none}.tab-remove[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.tab-remove[_ngcontent-%COMP%]:hover:not([disabled]){background:#ffe3e3}.tab-item[_ngcontent-%COMP%]{background:#eef3fb;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;letter-spacing:.05em;cursor:pointer;transition:background .15s,color .15s;border:none}.tab-item.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.tab-item[_ngcontent-%COMP%]:hover:not(.active){background:#dbe9fb}.tab-label[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.tab-edit[_ngcontent-%COMP%]{width:100px;padding:6px 8px;font-size:.66rem;border-radius:8px;outline:none;border:none}.tab-edit[_ngcontent-%COMP%]:focus{background:#eef6ff}.tab-add[_ngcontent-%COMP%]{background:#f2fbf7;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;transition:background .15s;border:none;color:#067a45}.tab-add[_ngcontent-%COMP%]:hover{background:#e4f9ee}.settimane-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:8px 14px;flex-wrap:wrap;margin-bottom:12px;margin-top:-10px}.settimane-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{background:#eef3fb;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;letter-spacing:.05em;cursor:pointer;border:none;transition:background .15s,color .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.settimane-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]:hover:not(.active){background:#dbe9fb}.settimane-tabs[_ngcontent-%COMP%]   .tab-add[_ngcontent-%COMP%]{background:#f2fbf7;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;color:#067a45;border:none;transition:background .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-add[_ngcontent-%COMP%]:hover{background:#e4f9ee}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[_ngcontent-%COMP%]{background:#fbefee;border-radius:10px;padding:8px 14px;font-size:.66rem;font-weight:800;cursor:pointer;color:#cb1b2b;border:none;margin-left:0;transition:background .15s}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.settimane-tabs[_ngcontent-%COMP%]   .tab-remove[_ngcontent-%COMP%]:hover:not([disabled]){background:#ffe3e3}.giorno-contenuto[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:20px;border:none}.empty-drop[_ngcontent-%COMP%]{padding:26px 22px;text-align:center;font-size:.7rem;font-weight:700;color:#4b647d;border:none}.exercise-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;border:none}.exercise-card[_ngcontent-%COMP%]{background:#fff;padding:18px 16px 16px;border-radius:16px;display:flex;flex-direction:column;gap:14px;box-shadow:0 3px 12px #193c6e0f;transition:box-shadow .15s,transform .12s;border:none}.exercise-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #193c6e24;transform:translateY(-2px)}.ex-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,minmax(110px,1fr));gap:12px;max-width:100%}@media (max-width: 700px){.ex-fields[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.ex-fields[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:.58rem;font-weight:700;letter-spacing:.05em;color:#173453;min-width:110px}.ex-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;border-radius:10px;font-size:.66rem;font-weight:600;background:#f7fafc;color:#102f4d;outline:none;transition:background-color .15s;height:32px;box-sizing:border-box;border:none}.ex-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#eef6ff}.ex-note[_ngcontent-%COMP%]{width:80%;padding:10px 12px;border-radius:12px;font-size:.66rem;font-weight:600;background:#f8fbff;color:#173453;resize:vertical;outline:none;transition:background-color .15s;display:block;border:none}.ex-note[_ngcontent-%COMP%]:focus{background:#eef6ff}.exercise-pagination-mini[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;margin-top:10px;margin-bottom:4px}.page-arrow-mini[_ngcontent-%COMP%]{background:#2563eb;border:none;border-radius:50%;width:28px;height:28px;color:#fff;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 8px #2563eb1a;transition:background .14s,box-shadow .14s,transform .11s;outline:none;padding:0}.page-arrow-mini[disabled][_ngcontent-%COMP%]{background:#eaf0fa;color:#bed2f6;cursor:not-allowed;box-shadow:none}.page-arrow-mini[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:13px;height:13px;display:block;margin:auto}.page-indicator-mini[_ngcontent-%COMP%]{font-size:.93rem;font-weight:700;color:#2563eb;min-width:38px;text-align:center;letter-spacing:.01em}.ex-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;border:none}.ex-img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:18px;background:#f1f5fa;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;border:none}.ex-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.ex-placeholder[_ngcontent-%COMP%]{font-size:28px;opacity:.55}.ex-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:800;color:#173453;flex:1;letter-spacing:.03em;border:none}.ex-controls[_ngcontent-%COMP%]{display:flex;gap:4px;border:none}.btn-icon.move[_ngcontent-%COMP%], .btn-icon.reset[_ngcontent-%COMP%], .btn-icon.remove[_ngcontent-%COMP%]{background:#fff;color:#2563eb;width:32px;height:32px;font-size:1rem;font-weight:700;border-radius:12px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;transition:background .15s,color .15s;padding:0;border:none}.btn-icon.remove[_ngcontent-%COMP%]{color:#dc2626}.btn-icon.remove[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.btn-icon.move[disabled][_ngcontent-%COMP%], .btn-icon.reset[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.btn-icon.move[_ngcontent-%COMP%]:hover:not([disabled]){background:#eef6ff}.btn-icon.reset[_ngcontent-%COMP%]:hover:not([disabled]){background:#e0f0ff}.search-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:14px;border:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border-radius:12px;background:#f7fbff;font-size:.7rem;font-weight:600;color:#173453;outline:none;transition:background-color .15s;border:none}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{background:#eef6ff}.esercizi-scroll[_ngcontent-%COMP%]{flex:1;overflow:auto;display:flex;flex-direction:column;gap:14px;padding:14px;border:none}.big-ex-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px 18px;display:flex;align-items:center;gap:18px;cursor:pointer;transition:box-shadow .15s,transform .12s,background .15s;min-height:96px;border:none}.big-ex-card[_ngcontent-%COMP%]:hover{background:#f0f6ff;box-shadow:0 4px 14px #2563eb38;transform:translateY(-3px)}.big-img[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:16px;background:#f0f4fa;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;border:none}.big-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.big-placeholder[_ngcontent-%COMP%]{font-size:30px;opacity:.55}.big-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.big-name[_ngcontent-%COMP%]{font-size:.76rem;font-weight:800;color:#173453;letter-spacing:.03em}.big-cat[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#2563eb;opacity:.85;letter-spacing:.05em}.empty-right[_ngcontent-%COMP%]{background:#f1f6fb;border-radius:16px;padding:18px 16px;text-align:center;font-size:.68rem;font-weight:600;color:#516b87;border:none}.user-picker-backdrop[_ngcontent-%COMP%], .share-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f234173;display:flex;align-items:center;justify-content:center;z-index:3000;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.user-picker-modal[_ngcontent-%COMP%], .share-modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;border:2px solid #d9e5f1;box-shadow:0 18px 50px #0f23414d;padding:24px 24px 26px;max-width:420px;width:100%;max-height:85vh;display:flex;flex-direction:column;gap:14px;overflow:auto}.user-picker-modal[_ngcontent-%COMP%]{width:380px}.share-modal[_ngcontent-%COMP%]{width:420px}.picker-header[_ngcontent-%COMP%], .share-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.picker-title[_ngcontent-%COMP%], .share-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:800;color:#173453}.picker-close[_ngcontent-%COMP%], .share-close[_ngcontent-%COMP%]{background:#f0f5fa;border:1px solid #d9e5f1;width:36px;height:36px;font-size:18px;font-weight:700;border-radius:12px;cursor:pointer;transition:background .15s,color .15s}.picker-close[_ngcontent-%COMP%]:hover, .share-close[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.picker-search[_ngcontent-%COMP%]{padding:10px 12px;border:1.8px solid #b9cddd;border-radius:12px;background:#f7fbff;font-size:.68rem;font-weight:600;color:#173453;outline:none;margin-bottom:8px}.picker-list[_ngcontent-%COMP%]{overflow:auto;flex:1;display:flex;flex-direction:column;gap:10px}.picker-item[_ngcontent-%COMP%]{display:flex;gap:14px;background:#f8fbff;border:1px solid #d9e5f1;border-radius:14px;padding:12px 14px;cursor:pointer;transition:background .15s,box-shadow .15s,transform .12s}.picker-item[_ngcontent-%COMP%]:hover{background:#edf5ff;box-shadow:0 3px 12px #2563eb38;transform:translateY(-2px)}.pi-avatar[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:14px;background:#eef3fb;border:1px solid #d9e5f1;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}.pi-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.pi-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.pi-name[_ngcontent-%COMP%]{font-size:.68rem;font-weight:800;color:#173453}.pi-email[_ngcontent-%COMP%]{font-size:.58rem;font-weight:600;color:#375d80}.pi-status[_ngcontent-%COMP%]{font-size:.56rem;font-weight:700;color:#16a34a}.pi-status.inactive[_ngcontent-%COMP%]{color:#dc2626}.picker-empty[_ngcontent-%COMP%]{text-align:center;font-size:.62rem;font-weight:700;color:#4b647d;padding:16px 10px;border:1px dashed #b9cddd;border-radius:12px}.share-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.share-options[_ngcontent-%COMP%]{display:flex;gap:14px;flex-wrap:wrap}.share-option[_ngcontent-%COMP%]{flex:1 1 110px;background:#f8fbff;border:1.6px solid #b9cddd;border-radius:16px;padding:14px 12px;display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer;transition:background .15s,box-shadow .15s,transform .12s;font-size:.62rem;font-weight:700;color:#173453}.share-option[_ngcontent-%COMP%]:hover{background:#edf5ff;box-shadow:0 3px 12px #2563eb38;transform:translateY(-2px)}.share-icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:800}.share-icon.gmail[_ngcontent-%COMP%]{background:#ffebe6;color:#d93025}.share-icon.outlook[_ngcontent-%COMP%]{background:#e6f0ff;color:#2563eb}.share-icon.link[_ngcontent-%COMP%]{background:#e9f7ff;color:#0d5f8c}.share-link-box[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.share-link-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1.6px solid #b9cddd;border-radius:12px;background:#f7fbff;font-size:.64rem;font-weight:600;color:#173453;outline:none}@media (max-width:1180px){.schede-page[_ngcontent-%COMP%]{grid-template-columns:260px 1fr 300px}}@media (max-width:980px){.schede-page[_ngcontent-%COMP%]{grid-template-columns:1fr}.col-left[_ngcontent-%COMP%], .col-center[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{width:100%}}@media (max-width:560px){.schede-page[_ngcontent-%COMP%]{padding:20px 16px 34px}.exercise-card[_ngcontent-%COMP%]{padding:16px 14px 14px}.big-ex-card[_ngcontent-%COMP%]{padding:14px 16px;min-height:88px}.avatar-block[_ngcontent-%COMP%]{width:78px;height:78px}.giorni-tabs[_ngcontent-%COMP%]{gap:8px}.tab-item[_ngcontent-%COMP%], .tab-add[_ngcontent-%COMP%]{padding:7px 12px;font-size:.6rem}}"]});let n=e;return n})();var Xue=["fileInput"];function Jue(n,e){if(n&1&&Tt(0,"img",35),n&2){let t=ne(2);de("src",t.editForm.media||t.editForm.image,Vr)}}function ede(n,e){n&1&&(C(0,"div",36),Tt(1,"span",37),P())}function tde(n,e){if(n&1){let t=Mt();C(0,"button",38),Ne("click",function(){be(t);let i=ne(2);return xe(i.enableEdit())}),q(1,"Modifica"),P()}}function nde(n,e){if(n&1){let t=Mt();C(0,"button",39),Ne("click",function(){be(t);let i=ne(2);return xe(i.openDeleteModal())}),q(1,"Elimina esercizio"),P()}}function rde(n,e){if(n&1){let t=Mt();C(0,"button",38),Ne("click",function(){be(t);let i=ne(2);return xe(i.saveExercise())}),q(1,"Salva Esercizio"),P()}}function ide(n,e){if(n&1){let t=Mt();C(0,"button",15),Ne("click",function(){be(t);let i=ne(2);return xe(i.cancelEdit())}),q(1,"Annulla"),P()}}function ode(n,e){if(n&1){let t=Mt();C(0,"button",42),Ne("click",function(){be(t);let i=ne().index,o=ne(2);return xe(o.removeMuscle(i))}),q(1,"\xD7"),P()}}function sde(n,e){if(n&1&&(C(0,"span",40),q(1),Je(2,ode,2,0,"button",41),P()),n&2){let t=e.$implicit,r=ne(2);K(),Sr(" ",t," "),K(),de("ngIf",r.editMode)}}function ade(n,e){if(n&1){let t=Mt();C(0,"div",43)(1,"input",44),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.newMuscle,i)||(o.newMuscle=i),xe(i)}),Ne("keydown.enter",function(){be(t);let i=ne(2);return xe(i.addMuscle())}),P(),C(2,"button",45),Ne("click",function(){be(t);let i=ne(2);return xe(i.addMuscle())}),q(3,"Aggiungi"),P()()}if(n&2){let t=ne(2);K(),ct("ngModel",t.newMuscle)}}function cde(n,e){if(n&1&&(C(0,"div",46),q(1),P()),n&2){let t=ne(2);K(),ft(t.editForm.notes||"Nessuna nota")}}function lde(n,e){if(n&1){let t=Mt();C(0,"textarea",47),lt("ngModelChange",function(i){be(t);let o=ne(2);return ut(o.editForm.notes,i)||(o.editForm.notes=i),xe(i)}),P()}if(n&2){let t=ne(2);ct("ngModel",t.editForm.notes)}}function ude(n,e){if(n&1){let t=Mt();C(0,"div",4)(1,"div",5)(2,"div",6),Ne("click",function(){be(t);let i=ne();return xe(i.onMediaBoxClick())}),Je(3,Jue,1,1,"img",7)(4,ede,2,0,"div",8),C(5,"input",9,1),Ne("change",function(i){be(t);let o=ne();return xe(o.onMediaChange(i))}),P()()(),C(7,"div",10)(8,"div",11),Je(9,tde,2,0,"button",12)(10,nde,2,0,"button",13)(11,rde,2,0,"button",12)(12,ide,2,0,"button",14),C(13,"button",15),Ne("click",function(){be(t);let i=ne();return xe(i.backToList())}),q(14,"Indietro"),P()(),C(15,"h2"),q(16,"Esercizio"),P(),C(17,"div",16)(18,"label"),q(19,"Nome"),P(),C(20,"input",17),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.editForm.name,i)||(o.editForm.name=i),xe(i)}),P()(),C(21,"div",16)(22,"label"),q(23,"Categoria"),P(),C(24,"input",17),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.editForm.category,i)||(o.editForm.category=i),xe(i)}),P()(),C(25,"div",16)(26,"label"),q(27,"Posizionamento"),P(),C(28,"textarea",18),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.editForm.posizionamento,i)||(o.editForm.posizionamento=i),xe(i)}),P()(),C(29,"div",16)(30,"label"),q(31,"Esecuzione"),P(),C(32,"textarea",19),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.editForm.esecuzione,i)||(o.editForm.esecuzione=i),xe(i)}),P()(),C(33,"div",16)(34,"label"),q(35,"Ritorno"),P(),C(36,"textarea",20),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.editForm.ritorno,i)||(o.editForm.ritorno=i),xe(i)}),P()(),C(37,"div",16)(38,"label"),q(39,"Accorgimenti tecnici"),P(),C(40,"textarea",21),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.editForm.accorgimenti,i)||(o.editForm.accorgimenti=i),xe(i)}),P()(),C(41,"div",16)(42,"label"),q(43,"Obiettivo"),P(),C(44,"textarea",22),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.editForm.obiettivo,i)||(o.editForm.obiettivo=i),xe(i)}),P()(),C(45,"div",23)(46,"label"),q(47,"Muscoli Coinvolti"),P(),C(48,"div",24),Je(49,sde,3,2,"span",25),P(),Je(50,ade,4,1,"div",26),P(),C(51,"div",16)(52,"label"),q(53,"Difficolt\xE0"),P(),C(54,"select",27),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.editForm.difficulty,i)||(o.editForm.difficulty=i),xe(i)}),C(55,"option",28),q(56,"Facile"),P(),C(57,"option",29),q(58,"Intermedio"),P(),C(59,"option",30),q(60,"Difficile"),P()()()(),C(61,"aside",31)(62,"div",32)(63,"h4"),q(64,"Note Personali"),P(),Je(65,cde,2,1,"div",33)(66,lde,1,1,"textarea",34),P()()()}if(n&2){let t=ne();K(2),oo("clickable",t.editMode),K(),de("ngIf",t.editForm.media||t.editForm.image),K(),de("ngIf",!(t.editForm.media||t.editForm.image)),K(5),de("ngIf",!t.editMode),K(),de("ngIf",t.editMode),K(),de("ngIf",t.editMode),K(),de("ngIf",t.editMode),K(8),ct("ngModel",t.editForm.name),de("readonly",!t.editMode),K(4),ct("ngModel",t.editForm.category),de("readonly",!t.editMode),K(4),ct("ngModel",t.editForm.posizionamento),de("readonly",!t.editMode),K(4),ct("ngModel",t.editForm.esecuzione),de("readonly",!t.editMode),K(4),ct("ngModel",t.editForm.ritorno),de("readonly",!t.editMode),K(4),ct("ngModel",t.editForm.accorgimenti),de("readonly",!t.editMode),K(4),ct("ngModel",t.editForm.obiettivo),de("readonly",!t.editMode),K(5),de("ngForOf",t.editForm.muscles),K(),de("ngIf",t.editMode),K(4),ct("ngModel",t.editForm.difficulty),de("disabled",!t.editMode),K(11),de("ngIf",!t.editMode),K(),de("ngIf",t.editMode)}}function dde(n,e){if(n&1){let t=Mt();C(0,"div",48)(1,"div",49)(2,"h3"),q(3,"Conferma Eliminazione"),P(),C(4,"p"),q(5,"Sei sicuro di voler eliminare questo esercizio?"),Tt(6,"br"),C(7,"strong"),q(8,"Questa azione \xE8 irreversibile."),P()(),C(9,"div",50)(10,"button",39),Ne("click",function(){be(t);let i=ne();return xe(i.deleteExercise())}),q(11,"Elimina"),P(),C(12,"button",15),Ne("click",function(){be(t);let i=ne();return xe(i.closeDeleteModal())}),q(13,"Annulla"),P()()()()}}function fde(n,e){if(n&1){let t=Mt();C(0,"div",10)(1,"h2"),q(2,"Esercizio"),P(),C(3,"p"),q(4,"Elemento non trovato."),P(),C(5,"button",15),Ne("click",function(){be(t);let i=ne();return xe(i.backToList())}),q(6,"Indietro"),P()()}}var Xz=(()=>{let e=class e{constructor(r,i,o){this.route=r,this.router=i,this.eserciziService=o,this.exerciseId=null,this.exercise=null,this.editMode=!1,this.showDeleteModal=!1,this.editForm={name:"",category:"",posizionamento:"",esecuzione:"",ritorno:"",accorgimenti:"",obiettivo:"",description:"",muscles:[],difficulty:"Intermedio",image:void 0,media:null,notes:""},this.newMuscle="",this.loading=!0,this.notFound=!1}ngOnInit(){return ee(this,null,function*(){if(this.exerciseId=this.route.snapshot.paramMap.get("id"),!this.exerciseId){this.exercise=null,this.notFound=!0,this.loading=!1;return}try{let i=(yield this.eserciziService.getAll()).find(o=>o.id===this.exerciseId);i?(this.exercise=i,this.populateForm(i)):(this.exercise=null,this.notFound=!0)}catch{this.exercise=null,this.notFound=!0}this.loading=!1})}populateForm(r){this.editForm={name:r.name,category:r.category,posizionamento:r.posizionamento??"",esecuzione:r.esecuzione??"",ritorno:r.ritorno??"",accorgimenti:r.accorgimenti??"",obiettivo:r.obiettivo??"",description:r.description??"",muscles:r.muscles??[],difficulty:r.difficulty??"Intermedio",image:r.image??void 0,media:null,notes:r.notes??""}}backToList(){this.router.navigate(["/esercizi"])}enableEdit(){this.editMode=!0}cancelEdit(){this.exercise&&this.populateForm(this.exercise),this.editMode=!1}saveExercise(){return ee(this,null,function*(){if(!this.exercise)return;let r={name:this.editForm.name,category:this.editForm.category,posizionamento:this.editForm.posizionamento??"",esecuzione:this.editForm.esecuzione??"",ritorno:this.editForm.ritorno??"",accorgimenti:this.editForm.accorgimenti??"",obiettivo:this.editForm.obiettivo??"",description:this.editForm.description,muscles:this.editForm.muscles,difficulty:this.editForm.difficulty,image:this.editForm.image??void 0,notes:this.editForm.notes??""};yield this.eserciziService.update(this.exercise.id,r),this.exercise=Oe(Oe({},this.exercise),r),this.editMode=!1})}addMuscle(){let r=this.newMuscle.trim();r&&(this.editForm.muscles.push(r),this.newMuscle="")}removeMuscle(r){this.editForm.muscles.splice(r,1)}onMediaBoxClick(){this.editMode&&this.fileInputRef?.nativeElement?.click()}onMediaChange(r){let i=r.target.files?.[0]||null;if(!i)return;let o=new FileReader;o.onload=()=>{this.editForm.media=o.result},o.readAsDataURL(i)}openDeleteModal(){this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1}deleteExercise(){return ee(this,null,function*(){this.exercise&&(yield this.eserciziService.delete(this.exercise.id),this.closeDeleteModal(),this.backToList())})}};e.\u0275fac=function(i){return new(i||e)(tt(Ws),tt(Ar),tt(vC))},e.\u0275cmp=Kn({type:e,selectors:[["app-dettaglio-esercizi"]],viewQuery:function(i,o){if(i&1&&wv(Xue,5),i&2){let s;Wf(s=Kf())&&(o.fileInputRef=s.first)}},decls:4,vars:3,consts:[["notFound",""],["fileInput",""],["class","dettaglio-esercizi-layout",4,"ngIf","ngIfElse"],["class","modal-overlay",4,"ngIf"],[1,"dettaglio-esercizi-layout"],[1,"left-media"],[1,"media-box",3,"click"],["alt","Immagine esercizio",3,"src",4,"ngIf"],["class","media-placeholder",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],[1,"center-form"],[1,"top-actions"],["type","button","class","btn",3,"click",4,"ngIf"],["type","button","class","btn danger",3,"click",4,"ngIf"],["type","button","class","btn outline",3,"click",4,"ngIf"],["type","button",1,"btn","outline",3,"click"],[1,"form-row"],["type","text",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come posizionarsi per l'esercizio",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come eseguire correttamente l'esercizio",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Come tornare alla posizione iniziale",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Consigli tecnici e correzioni",3,"ngModelChange","ngModel","readonly"],["rows","2","placeholder","Scopo o obiettivo dell'esercizio",3,"ngModelChange","ngModel","readonly"],[1,"form-row","small-tags"],[1,"tags"],["class","tag",4,"ngFor","ngForOf"],["class","tag-add",4,"ngIf"],[3,"ngModelChange","ngModel","disabled"],["value","Facile"],["value","Intermedio"],["value","Difficile"],[1,"right-side"],[1,"notes"],["class","note-card",4,"ngIf"],["class","note-textarea","rows","6","placeholder","Scrivi le tue note...",3,"ngModel","ngModelChange",4,"ngIf"],["alt","Immagine esercizio",3,"src"],[1,"media-placeholder"],[1,"placeholder-icon"],["type","button",1,"btn",3,"click"],["type","button",1,"btn","danger",3,"click"],[1,"tag"],["type","button","class","tag-remove","aria-label","Rimuovi",3,"click",4,"ngIf"],["type","button","aria-label","Rimuovi",1,"tag-remove",3,"click"],[1,"tag-add"],["type","text","placeholder","Aggiungi muscolo...",3,"ngModelChange","keydown.enter","ngModel"],["type","button",1,"btn","small",3,"click"],[1,"note-card"],["rows","6","placeholder","Scrivi le tue note...",1,"note-textarea",3,"ngModelChange","ngModel"],[1,"modal-overlay"],[1,"modal"],[1,"modal-actions"]],template:function(i,o){if(i&1&&Je(0,ude,67,28,"div",2)(1,dde,14,0,"div",3)(2,fde,7,0,"ng-template",null,0,qs),i&2){let s=bo(3);de("ngIf",o.exercise)("ngIfElse",s),K(),de("ngIf",o.showDeleteModal)}},dependencies:[sc,qi,ki,fd,Qc,Zc,xo,Ta,ms,Ko,yd],styles:["[_ngcontent-%COMP%]:root{--primary: #2563eb;--panel: #fff;--panel-border: #e7ecf9;--bg: #f5f8fc;--text: #193455}.dettaglio-esercizi-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr 260px;gap:22px;padding:18px 30px;background:var(--bg)}.left-media[_ngcontent-%COMP%]{background:var(--panel);border-radius:12px;padding:14px;border:1px solid var(--panel-border)}.media-box[_ngcontent-%COMP%]{height:220px;display:flex;align-items:center;justify-content:center;background:#fafbfd;border-radius:12px;margin-bottom:10px;overflow:hidden;position:relative;transition:box-shadow .15s,transform .12s}.media-box.clickable[_ngcontent-%COMP%]{cursor:pointer}.media-box.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 2px 10px #2563eb2e;transform:translateY(-1px)}.media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;display:block}.media-placeholder[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:14px;background:#eef3fb;border:1px solid #d7e4f6;position:relative}.placeholder-icon[_ngcontent-%COMP%]{width:100%;height:100%;display:inline-block;background:linear-gradient(#9bb8e0,#9bb8e0) center 40%/36% 14% no-repeat,linear-gradient(#9bb8e0,#9bb8e0) center 60%/60% 28% no-repeat;border-radius:12px}.center-form[_ngcontent-%COMP%]{background:var(--panel);padding:18px;border-radius:12px;border:1px solid var(--panel-border)}.center-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:var(--text)}.top-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-bottom:12px}.form-row[_ngcontent-%COMP%]{margin-bottom:12px;display:flex;flex-direction:column}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#294860;margin-bottom:6px}.form-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:9px 11px;border-radius:8px;border:1px solid #dbe9fb;font-size:.98rem}.tags[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.tag[_ngcontent-%COMP%]{background:#e6f2ff;padding:6px 8px;border-radius:20px;color:#1b355b;font-weight:700;display:inline-flex;align-items:center;gap:6px}.tag-remove[_ngcontent-%COMP%]{background:#fff;border:1px solid #cfe0fb;color:#274162;width:18px;height:18px;border-radius:50%;font-size:12px;line-height:1;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.tag-remove[_ngcontent-%COMP%]:hover{background:var(--primary);color:#fff;border-color:#1f56c7}.tag-add[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:8px}.tag-add[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;border-radius:8px;border:1px solid #dbe9fb}.right-side[_ngcontent-%COMP%]{background:var(--panel);border-radius:12px;padding:14px;border:1px solid var(--panel-border)}.notes[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#294860}.note-card[_ngcontent-%COMP%]{padding:10px;background:#fbfbfd;border-radius:8px;border:1px solid #e7ecf9;color:#193455}.note-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:8px;border:1px solid #dbe9fb}.btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 14px;border-radius:10px;font-size:.95rem;font-weight:700;cursor:pointer;transition:background .16s}.btn[_ngcontent-%COMP%]:hover{background:#194fd6}.btn.outline[_ngcontent-%COMP%]{background:#eef3fb;color:#1e3a8a;border:1px solid #d7e4f6}.btn.outline[_ngcontent-%COMP%]:hover{background:#e1ebfb}.btn.small[_ngcontent-%COMP%]{padding:6px 12px;font-size:.85rem}@media (max-width: 980px){.dettaglio-esercizi-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}.btn.danger[_ngcontent-%COMP%]{background:#ff5151;color:#fff;border:none}.btn.danger[_ngcontent-%COMP%]:hover{background:#dc2626}.modal-overlay[_ngcontent-%COMP%]{position:fixed;z-index:99;inset:0;background:#1934552b;display:flex;align-items:center;justify-content:center}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 8px 32px #2563eb38;min-width:340px;max-width:90vw;padding:34px 28px 22px;text-align:center}.modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#dc2626;margin-bottom:8px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-top:20px}"]});let n=e;return n})();function hde(n,e){if(n&1&&(C(0,"div",17)(1,"span",18),q(2,"error"),P(),C(3,"span"),q(4),P()()),n&2){let t=ne();K(4),ft(t.error)}}function pde(n,e){n&1&&(C(0,"span"),q(1,"Accedi"),P())}function gde(n,e){n&1&&(C(0,"span",19),Tt(1,"span",20),q(2," Accesso in corso... "),P())}var Jz=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i,this.email="",this.password="",this.loading=!1,this.error="",this.showPassword=!1}ngOnInit(){this.afAuth.currentUser.then(r=>{r&&this.router.navigate(["/"])})}togglePasswordVisibility(){this.showPassword=!this.showPassword}login(){return ee(this,null,function*(){if(!this.email.trim()||!this.password.trim()){this.error="Email e password sono obbligatori";return}this.loading=!0,this.error="";try{(yield this.afAuth.signInWithEmailAndPassword(this.email.trim(),this.password.trim())).user&&this.router.navigate(["/"])}catch(r){this.loading=!1;let i=r.code,o=r.message;switch(i){case"auth/invalid-email":this.error="Email non valida";break;case"auth/user-disabled":this.error="Questo account \xE8 stato disabilitato";break;case"auth/user-not-found":this.error="Email non trovata";break;case"auth/wrong-password":this.error="Password non corretta";break;case"auth/too-many-requests":this.error="Troppi tentativi di accesso. Riprova pi\xF9 tardi";break;default:this.error="Errore di accesso: "+o}}})}onKeyPress(r){r.key==="Enter"&&this.login()}};e.\u0275fac=function(i){return new(i||e)(tt(Ys),tt(Ar))},e.\u0275cmp=Kn({type:e,selectors:[["app-login"]],standalone:!1,decls:27,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],["autocomplete","off",1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["id","email","type","email","name","email","placeholder","Inserisci la tua email","required","","autocomplete","off",3,"ngModelChange","ngModel","disabled"],["for","password"],[1,"password-input-wrapper"],["id","password","name","password","placeholder","Inserisci la tua password","required","","autocomplete","off",3,"ngModelChange","keypress","type","ngModel","disabled"],["type","button","title","Mostra/nascondi password",1,"toggle-password-btn",3,"click","disabled"],[1,"material-icons"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"login-footer"],[1,"error-message"],[1,"material-icons","error-icon"],[1,"loading-spinner"],[1,"spinner"]],template:function(i,o){i&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),q(4,"Prof Ghizz"),P(),C(5,"p"),q(6,"Sistema di Gestione Fitness"),P()(),C(7,"form",3),Ne("ngSubmit",function(){return o.login()}),C(8,"div",4)(9,"label",5),q(10,"Email"),P(),C(11,"input",6),lt("ngModelChange",function(a){return ut(o.email,a)||(o.email=a),a}),P()(),C(12,"div",4)(13,"label",7),q(14,"Password"),P(),C(15,"div",8)(16,"input",9),lt("ngModelChange",function(a){return ut(o.password,a)||(o.password=a),a}),Ne("keypress",function(a){return o.onKeyPress(a)}),P(),C(17,"button",10),Ne("click",function(){return o.togglePasswordVisibility()}),C(18,"span",11),q(19),P()()()(),Je(20,hde,5,1,"div",12),C(21,"button",13),Je(22,pde,2,0,"span",14)(23,gde,3,0,"span",15),P()(),C(24,"div",16)(25,"p"),q(26,"\xA9 2026 Prof Ghizz - Tutti i diritti riservati"),P()()()()),i&2&&(K(11),ct("ngModel",o.email),de("disabled",o.loading),K(5),de("type",o.showPassword?"text":"password"),ct("ngModel",o.password),de("disabled",o.loading),K(),de("disabled",o.loading),K(2),ft(o.showPassword?"visibility_off":"visibility"),K(),de("ngIf",o.error),K(),de("disabled",o.loading),K(),de("ngIf",!o.loading),K(),de("ngIf",o.loading))},dependencies:[ki,dg,xo,ms,ug,Zf,Ko,Qf],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background-color:#0f172a;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Helvetica Neue,sans-serif;padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;width:100%;max-width:420px;padding:40px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#667eea;margin:0 0 8px;letter-spacing:-.5px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#999;margin:0;font-weight:500}.login-form[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#333;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 14px;font-size:14px;border:2px solid #e0e0e0;border-radius:8px;transition:all .3s ease;background:#f9f9f9;box-sizing:border-box;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;background:#f5f5f5}.password-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding-right:45px}.toggle-password-btn[_ngcontent-%COMP%]{position:absolute;right:12px;background:none;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#999;transition:color .3s ease;padding:4px;width:32px;height:32px}.toggle-password-btn[_ngcontent-%COMP%]:hover:not(:disabled){color:#667eea}.toggle-password-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.toggle-password-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 14px;background:#ffebee;border:1px solid #f48fb1;border-radius:8px;color:#c2185b;font-size:13px;margin-bottom:16px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.error-icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.btn-login[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background-color:#1d4ed8;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 12px #1d4ed84d}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1e40af;transform:translateY(-2px);box-shadow:0 6px 20px #1d4ed866}.btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;justify-content:center}.spinner[_ngcontent-%COMP%]{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#999;margin:0}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:30px 20px;border-radius:8px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px;font-size:16px}}"]});let n=e;return n})();var xu=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i}canActivate(){return this.afAuth.authState.pipe(Ji(1),at(r=>r?!0:(this.router.navigate(["/login"]),!1)))}};e.\u0275fac=function(i){return new(i||e)(Ve(Ys),Ve(Ar))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function mde(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===1&&r===0?1:i===0&&t!==0&&t%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var eq=["it",[["m.","p."],["AM","PM"]],void 0,[["D","L","M","M","G","V","S"],["dom","lun","mar","mer","gio","ven","sab"],["domenica","luned\xEC","marted\xEC","mercoled\xEC","gioved\xEC","venerd\xEC","sabato"],["dom","lun","mar","mer","gio","ven","sab"]],void 0,[["G","F","M","A","M","G","L","A","S","O","N","D"],["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]],void 0,[["aC","dC"],["a.C.","d.C."],["avanti Cristo","dopo Cristo"]],1,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{BRL:[void 0,"R$"],BYN:[void 0,"Br"],EGP:[void 0,"\xA3E"],HKD:[void 0,"$"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NOK:[void 0,"NKr"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VND:[void 0,"\u20AB"]},"ltr",mde];function vde(n,e){if(n&1&&Tt(0,"img",24),n&2){let t=ne();de("src",t.cliente==null?null:t.cliente.avatarUrl,Vr)("alt",(t.cliente==null?null:t.cliente.name)||"?")}}function yde(n,e){if(n&1&&(C(0,"span"),q(1),P()),n&2){let t=ne();K(),ft((t.cliente==null||t.cliente.name==null?null:t.cliente.name.charAt(0))||"?")}}function _de(n,e){if(n&1){let t=Mt();C(0,"button",25),Ne("click",function(){be(t);let i=ne();return xe(i.selectUser(null))}),q(1," \xD7 "),P()}}function wde(n,e){if(n&1&&(C(0,"div",26)(1,"span"),q(2),P()()),n&2){let t=e.$implicit;K(2),ft(t)}}function bde(n,e){if(n&1){let t=Mt();C(0,"div",34),Ne("click",function(){let i=be(t).$implicit,o=ne().$implicit,s=ne();return xe(s.openActivityPicker(o.dataIso,i))}),P()}}function xde(n,e){if(n&1){let t=Mt();C(0,"div",36),Ne("click",function(i){be(t);let o=ne().$implicit,s=ne(2);return xe(s.openEventDetail(o,i))}),C(1,"div",37),q(2),P(),C(3,"div",38),q(4),P(),C(5,"div",39),q(6),P()()}if(n&2){let t=ne().$implicit,r=ne(2);de("ngStyle",r.getEventStyle(t)),K(2),Gc("",t.oraInizio," - ",t.oraFine),K(2),ft(t.userName),K(2),ft(t.titolo)}}function Cde(n,e){if(n&1&&(ro(0),Je(1,xde,7,5,"div",35),io()),n&2){let t=e.$implicit,r=ne().$implicit;K(),de("ngIf",t.dataIso===r.dataIso)}}function Ede(n,e){if(n&1){let t=Mt();C(0,"div",27),Ne("click",function(){let i=be(t).$implicit,o=ne();return xe(o.selectDay(i.dataIso))}),C(1,"div",28)(2,"span",29),q(3),P(),C(4,"span",30),q(5),P()(),C(6,"div",31),Je(7,bde,1,0,"div",32)(8,Cde,2,1,"ng-container",33),P()()}if(n&2){let t=e.$implicit,r=ne();oo("is-today",t.isToday)("today-selected",t.dataIso===r.selectedIso),nu("data-date",t.dataIso),K(3),ft(t.nome),K(2),ft(t.dataDisplay),K(),bv("min-height",r.hours.length*r.HOUR_HEIGHT,"px"),K(),de("ngForOf",r.hours),K(),de("ngForOf",r.activities)}}function Ide(n,e){if(n&1&&Tt(0,"img",24),n&2){let t=ne().$implicit;de("src",t.avatarUrl,Vr)("alt",t.name)}}function Sde(n,e){if(n&1&&(C(0,"span"),q(1),P()),n&2){let t=ne().$implicit;K(),ft(t.name==null?null:t.name.charAt(0))}}function Ade(n,e){if(n&1){let t=Mt();C(0,"div",53),Ne("click",function(){let i=be(t).$implicit,o=ne(2);return xe(o.selectUser(i))}),C(1,"div",4),Je(2,Ide,1,2,"img",5)(3,Sde,2,1,"span",6),P(),C(4,"div",49)(5,"span",50),q(6),P(),C(7,"span",51),q(8),P()()()}if(n&2){let t=e.$implicit;K(2),de("ngIf",t.avatarUrl),K(),de("ngIf",!t.avatarUrl),K(3),ft(t.name),K(2),ft(t.email)}}function Dde(n,e){if(n&1){let t=Mt();C(0,"div",40),Ne("click",function(){be(t);let i=ne();return xe(i.showUserPicker=!1)}),C(1,"div",41),Ne("click",function(i){return be(t),xe(i.stopPropagation())}),C(2,"div",42)(3,"h3"),q(4,"Seleziona Cliente"),P(),C(5,"button",43),Ne("click",function(){be(t);let i=ne();return xe(i.showUserPicker=!1)}),q(6,"\xD7"),P()(),C(7,"div",44)(8,"input",45),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.userSearch,i)||(o.userSearch=i),xe(i)}),Ne("input",function(){be(t);let i=ne();return xe(i.filterUsers())}),P(),C(9,"div",46)(10,"div",47),Ne("click",function(){be(t);let i=ne();return xe(i.selectUser(null))}),C(11,"div",48)(12,"span"),q(13,"-"),P()(),C(14,"div",49)(15,"span",50),q(16,"Nessun Cliente"),P(),C(17,"span",51),q(18,"Crea appuntamento generico"),P()()(),Je(19,Ade,9,4,"div",52),P()()()()}if(n&2){let t=ne();K(8),ct("ngModel",t.userSearch),K(11),de("ngForOf",t.filteredUserList)}}function Tde(n,e){if(n&1&&(C(0,"option",66),q(1),Wc(2,"number"),P()),n&2){let t=e.$implicit;de("value",t),K(),ft(rg(2,2,t,"2.0"))}}function Mde(n,e){if(n&1&&(C(0,"option",66),q(1),Wc(2,"number"),P()),n&2){let t=e.$implicit;de("value",t),K(),ft(rg(2,2,t,"2.0"))}}function Nde(n,e){if(n&1&&(C(0,"option",66),q(1),Wc(2,"number"),P()),n&2){let t=e.$implicit;de("value",t),K(),ft(rg(2,2,t,"2.0"))}}function Pde(n,e){if(n&1&&(C(0,"option",66),q(1),Wc(2,"number"),P()),n&2){let t=e.$implicit;de("value",t),K(),ft(rg(2,2,t,"2.0"))}}function kde(n,e){if(n&1){let t=Mt();C(0,"div",40),Ne("click",function(){be(t);let i=ne();return xe(i.showActivityPicker=!1)}),C(1,"div",54),Ne("click",function(i){return be(t),xe(i.stopPropagation())}),C(2,"div",42)(3,"h3"),q(4,"Nuovo Appuntamento"),P(),C(5,"button",43),Ne("click",function(){be(t);let i=ne();return xe(i.showActivityPicker=!1)}),q(6,"\xD7"),P()(),C(7,"div",44)(8,"div",55),q(9," Pianificazione per: "),C(10,"b"),q(11),P()(),C(12,"div",56)(13,"label"),q(14,"Descrizione / Attivit\xE0"),P(),C(15,"input",57),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.tempActivity.titolo,i)||(o.tempActivity.titolo=i),xe(i)}),P()(),C(16,"div",58)(17,"div",59)(18,"label"),q(19,"Inizio"),P(),C(20,"div",60)(21,"select",61),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.tempActivity.oraInizio.ore,i)||(o.tempActivity.oraInizio.ore=i),xe(i)}),Je(22,Tde,3,5,"option",62),P(),C(23,"span"),q(24,":"),P(),C(25,"select",61),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.tempActivity.oraInizio.minuti,i)||(o.tempActivity.oraInizio.minuti=i),xe(i)}),Je(26,Mde,3,5,"option",62),P()()(),C(27,"div",63),q(28,"\u2192"),P(),C(29,"div",59)(30,"label"),q(31,"Fine"),P(),C(32,"div",60)(33,"select",61),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.tempActivity.oraFine.ore,i)||(o.tempActivity.oraFine.ore=i),xe(i)}),Je(34,Nde,3,5,"option",62),P(),C(35,"span"),q(36,":"),P(),C(37,"select",61),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.tempActivity.oraFine.minuti,i)||(o.tempActivity.oraFine.minuti=i),xe(i)}),Je(38,Pde,3,5,"option",62),P()()()(),C(39,"div",56)(40,"label"),q(41,"Note (opzionale)"),P(),C(42,"textarea",64),lt("ngModelChange",function(i){be(t);let o=ne();return ut(o.tempActivity.note,i)||(o.tempActivity.note=i),xe(i)}),P()(),C(43,"button",65),Ne("click",function(){be(t);let i=ne();return xe(i.salvaAttivita())}),q(44,"Salva Appuntamento"),P()()()()}if(n&2){let t=ne();K(8),oo("generic",!t.cliente),K(3),ft(t.cliente?t.cliente.name:"Generico"),K(4),ct("ngModel",t.tempActivity.titolo),K(6),ct("ngModel",t.tempActivity.oraInizio.ore),K(),de("ngForOf",t.oreOptions),K(3),ct("ngModel",t.tempActivity.oraInizio.minuti),K(),de("ngForOf",t.minutiOptions),K(7),ct("ngModel",t.tempActivity.oraFine.ore),K(),de("ngForOf",t.oreOptions),K(3),ct("ngModel",t.tempActivity.oraFine.minuti),K(),de("ngForOf",t.minutiOptions),K(4),ct("ngModel",t.tempActivity.note)}}function Rde(n,e){if(n&1&&(C(0,"div",69)(1,"label"),q(2,"Note:"),P(),C(3,"p"),q(4),P()()),n&2){let t=ne(3);K(4),ft(t.selectedEvent.note)}}function Ode(n,e){if(n&1){let t=Mt();C(0,"div",44)(1,"div",69)(2,"label"),q(3,"Chi:"),P(),C(4,"span"),q(5),P()(),C(6,"div",69)(7,"label"),q(8,"Cosa:"),P(),C(9,"span"),q(10),P()(),C(11,"div",69)(12,"label"),q(13,"Quando:"),P(),C(14,"span"),q(15),P()(),Je(16,Rde,5,1,"div",70),C(17,"div",71)(18,"button",72),Ne("click",function(){be(t);let i=ne(2);return xe(i.editEvent())}),q(19,"Modifica"),P(),C(20,"button",73),Ne("click",function(){be(t);let i=ne(2);return xe(i.eliminaEvento())}),q(21,"Elimina Appuntamento"),P()()()}if(n&2){let t=ne(2);K(5),ft(t.selectedEvent.userName),K(5),ft(t.selectedEvent.titolo),K(5),Gc("",t.selectedEvent.oraInizio," - ",t.selectedEvent.oraFine),K(),de("ngIf",t.selectedEvent.note)}}function Fde(n,e){if(n&1){let t=Mt();C(0,"div",40),Ne("click",function(){be(t);let i=ne();return xe(i.showEventDetail=!1)}),C(1,"div",67),Ne("click",function(i){return be(t),xe(i.stopPropagation())}),C(2,"div",42)(3,"h3"),q(4,"Dettaglio"),P(),C(5,"button",43),Ne("click",function(){be(t);let i=ne();return xe(i.showEventDetail=!1)}),q(6,"\xD7"),P()(),Je(7,Ode,22,5,"div",68),P()()}if(n&2){let t=ne();K(7),de("ngIf",t.selectedEvent)}}S6(eq);var tq=(()=>{let e=class e{constructor(){this.firestore=De(co),this.START_HOUR=7,this.END_HOUR=22,this.HOUR_HEIGHT=65,this.hours=Array.from({length:1+this.END_HOUR-this.START_HOUR},(r,i)=>`${(this.START_HOUR+i).toString().padStart(2,"0")}:00`),this.viewMode="day",this.mesi=[{value:0,label:"GENNAIO"},{value:1,label:"FEBBRAIO"},{value:2,label:"MARZO"},{value:3,label:"APRILE"},{value:4,label:"MAGGIO"},{value:5,label:"GIUGNO"},{value:6,label:"LUGLIO"},{value:7,label:"AGOSTO"},{value:8,label:"SETTEMBRE"},{value:9,label:"OTTOBRE"},{value:10,label:"NOVEMBRE"},{value:11,label:"DICEMBRE"}],this.anni=Array.from({length:10},(r,i)=>new Date().getFullYear()-5+i),this.currentDate=new Date,this.selectedMonth=this.currentDate.getMonth(),this.selectedYear=this.currentDate.getFullYear(),this.giorniSettimana=[],this.giorniMese=[],this.activities=[],this.selectedIso=null,this.STORAGE_KEY="calendar_activities_v1",this.cliente=null,this.allUsers=[],this.filteredUserList=[],this.showUserPicker=!1,this.userSearch="",this.showActivityPicker=!1,this.tempActivity={},this.oreOptions=Array.from({length:24},(r,i)=>i),this.minutiOptions=Array.from({length:60},(r,i)=>i),this.showEventDetail=!1,this.selectedEvent=null}ngOnInit(){this.loadUsers(),this.loadActivities(),this.loadActivitiesFromFirestore(),this.updateView(),this.resetTempActivity()}loadUsers(){return ee(this,null,function*(){try{let r=Wr(this.firestore,"users"),i=yield fl(r);this.allUsers=i.docs.map(o=>Oe({id:o.id},o.data())),this.filterUsers()}catch(r){console.error("Errore nel caricamento utenti:",r)}})}filterUsers(){let r=this.userSearch.toLowerCase().trim();this.filteredUserList=this.allUsers.filter(i=>(i.name||"").toLowerCase().includes(r)||(i.email||"").toLowerCase().includes(r))}openUserPicker(){this.showUserPicker=!0,this.userSearch="",this.filterUsers()}selectUser(r){this.cliente=r,this.showUserPicker=!1}setViewMode(r){this.viewMode=r,this.updateView()}updateView(){this.viewMode==="day"?((this.currentDate.getMonth()!==this.selectedMonth||this.currentDate.getFullYear()!==this.selectedYear)&&(this.currentDate=new Date(this.selectedYear,this.selectedMonth,1)),this.generateWeek()):(this.currentDate=new Date(this.selectedYear,this.selectedMonth,1),this.generateMonth())}changeMonth(){this.updateView()}changeYear(){this.updateView()}generateWeek(){let r=new Date(this.currentDate),i=r.getDay()||7,o=new Date(r);o.setDate(r.getDate()-i+1),this.giorniSettimana=[];for(let s=0;s<7;s++){let a=new Date(o);a.setDate(o.getDate()+s),this.giorniSettimana.push({nome:["LUN","MAR","MER","GIO","VEN","SAB","DOM"][s],dataDisplay:a.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit"}),dataIso:a.toISOString().split("T")[0],isToday:a.toDateString()===new Date().toDateString()})}}generateMonth(){let r=this.selectedYear,i=this.selectedMonth,o=new Date(r,i,1),s=new Date(r,i+1,0),a=new Date(o);a.setDate(o.getDate()-(o.getDay()?o.getDay()-1:6)),this.giorniMese=[];for(let c=new Date(a);c<=s||this.giorniMese.length<42;c.setDate(c.getDate()+1))this.giorniMese.push({nome:["LUN","MAR","MER","GIO","VEN","SAB","DOM"][(c.getDay()||7)-1],dataDisplay:c.getDate().toString(),dataIso:c.toISOString().split("T")[0],isToday:c.toDateString()===new Date().toDateString(),isCurrentMonth:c.getMonth()===i})}getEventsForDay(r){return this.activities.filter(i=>i.dataIso===r)}scrollWeek(r){this.viewMode==="day"?(this.currentDate.setDate(this.currentDate.getDate()+r*7),this.selectedMonth=this.currentDate.getMonth(),this.selectedYear=this.currentDate.getFullYear(),this.generateWeek()):(this.selectedMonth+=r,this.selectedMonth<0?(this.selectedMonth=11,this.selectedYear--):this.selectedMonth>11&&(this.selectedMonth=0,this.selectedYear++),this.updateView())}goToToday(){this.currentDate=new Date,this.selectedMonth=this.currentDate.getMonth(),this.selectedYear=this.currentDate.getFullYear(),this.viewMode="day",this.updateView(),this.selectedIso=this.currentDate.toISOString().split("T")[0],setTimeout(()=>{let r=document.querySelector(`.day-column[data-date="${this.selectedIso}"]`);r&&r.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}),r&&(r.classList.add("today-pulse"),setTimeout(()=>r.classList.remove("today-pulse"),1400))},240)}openActivityPicker(r,i){let[o,s]=i.split(":").map(Number),a=o??this.START_HOUR,c=Math.min(a+1,this.END_HOUR);this.tempActivity={titolo:"",note:"",dataIso:r,oraInizio:{ore:a,minuti:s??0,secondi:0},oraFine:{ore:c,minuti:s??0,secondi:0}},this.showActivityPicker=!0}resetTempActivity(){this.tempActivity={titolo:"",note:"",dataIso:"",oraInizio:{ore:9,minuti:0,secondi:0},oraFine:{ore:10,minuti:0,secondi:0},userName:"",_editingEvent:null}}loadActivities(){try{let r=localStorage.getItem(this.STORAGE_KEY);this.activities=r?JSON.parse(r):[]}catch(r){console.error("Errore caricamento appuntamenti:",r),this.activities=[]}}saveActivities(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.activities))}catch(r){console.error("Errore salvataggio appuntamenti:",r)}}loadActivitiesFromFirestore(){return ee(this,null,function*(){try{let r=Wr(this.firestore,"appointments"),o=(yield fl(r)).docs.map(c=>Oe({id:c.id},c.data())),s=Array.isArray(this.activities)?[...this.activities]:[],a=new Map(s.filter(c=>c.id).map(c=>[c.id,c]));for(let c of o)if(a.has(c.id)){let l=s.findIndex(u=>u.id===c.id);l!==-1&&(s[l]=Oe(Oe({},s[l]),c))}else s.push(c);for(let c of s)if(!c.id)try{let l=yield c_(Wr(this.firestore,"appointments"),c);c.id=l.id}catch(l){console.error("Errore invio a Firestore:",l)}this.activities=s,this.saveActivities()}catch(r){console.error("Errore caricamento Firestore appuntamenti:",r)}})}saveActivityToFirestore(r){return ee(this,null,function*(){try{if(r.id)yield hl(Br(this.firestore,`appointments/${r.id}`),r);else{let i=yield c_(Wr(this.firestore,"appointments"),r);r.id=i.id}}catch(i){console.error("Errore salvataggio su Firestore:",i)}})}deleteActivityFromFirestore(r){return ee(this,null,function*(){try{yield Kd(Br(this.firestore,`appointments/${r}`))}catch(i){console.error("Errore eliminazione Firestore:",i)}})}salvaAttivita(){return ee(this,null,function*(){(this.tempActivity.oraFine.ore>this.END_HOUR||this.tempActivity.oraFine.ore===this.END_HOUR&&this.tempActivity.oraFine.minuti>0)&&(this.tempActivity.oraFine.ore=this.END_HOUR,this.tempActivity.oraFine.minuti=0);let r=`${this.tempActivity.oraInizio.ore.toString().padStart(2,"0")}:${this.tempActivity.oraInizio.minuti.toString().padStart(2,"0")}:00`,i=`${this.tempActivity.oraFine.ore.toString().padStart(2,"0")}:${this.tempActivity.oraFine.minuti.toString().padStart(2,"0")}:00`,o=Rt(Oe({},this.tempActivity),{oraInizio:r,oraFine:i,userName:this.cliente?this.cliente.name:this.tempActivity.userName||"Generico"});if(this.tempActivity._editingEvent&&this.tempActivity._editingEvent.id){o.id=this.tempActivity._editingEvent.id;let s=this.activities.findIndex(a=>a.id===o.id);s!==-1?(this.activities[s]=Oe(Oe({},this.activities[s]),o),this.selectedEvent&&this.selectedEvent.id===o.id&&(this.selectedEvent=this.activities[s])):this.activities.push(o),this.tempActivity._editingEvent=null}else o.id=Date.now().toString(),this.activities.push(o);this.saveActivities(),this.saveActivityToFirestore(o),this.showActivityPicker=!1,this.resetTempActivity()})}getEventStyle(r){let i=h=>{let m=(h||"00:00:00").split(":").map(Number);return(m[0]||0)+(m[1]||0)/60},o=i(r.oraInizio),s=i(r.oraFine);if(isNaN(o)||isNaN(s)||s<=o)return{display:"none"};let a=this.START_HOUR,c=this.END_HOUR;if(o=Math.max(o,a),s=Math.min(s,c),s<=o)return{display:"none"};let l=(o-a)*this.HOUR_HEIGHT,u=(s-o)*this.HOUR_HEIGHT;return{position:"absolute",top:`${l}px`,height:`${u}px`,display:"block",zIndex:10}}openEventDetail(r,i){i.stopPropagation(),this.selectedEvent=r,this.showEventDetail=!0}editEvent(){if(!this.selectedEvent)return;let r=this.selectedEvent,i=o=>{let[s,a]=o.substring(0,5).split(":").map(Number);return{ore:s,minuti:a,secondi:0}};this.tempActivity={titolo:r.titolo||"",note:r.note||"",dataIso:r.dataIso,oraInizio:i(r.oraInizio),oraFine:i(r.oraFine),userName:r.userName||"",_editingEvent:r},this.showEventDetail=!1,this.showActivityPicker=!0}selectDay(r){this.selectedIso=r}eliminaEvento(){return ee(this,null,function*(){if(this.selectedEvent){let r=this.selectedEvent.id;this.activities=this.activities.filter(i=>i.id!==r),this.selectedEvent=null,this.showEventDetail=!1,this.saveActivities(),r&&(yield this.deleteActivityFromFirestore(r))}})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Kn({type:e,selectors:[["app-calendar-planning"]],decls:32,vars:13,consts:[[1,"planning-header"],[1,"header-left"],[1,"user-selector-wrapper"],[1,"user-selector",3,"click"],[1,"avatar-small"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"user-info"],[1,"label"],[1,"value"],["class","clear-user-btn","title","Rimuovi cliente","aria-label","Rimuovi cliente",3,"click",4,"ngIf"],[1,"date-navigation"],["aria-label","Settimana prima",1,"nav-arrow",3,"click"],[1,"current-month-display"],["aria-label","Settimana dopo",1,"nav-arrow",3,"click"],[1,"header-right"],[1,"today-btn",3,"click"],[1,"planning-main"],[1,"time-column"],[1,"spacer"],["class","hour-cell",4,"ngFor","ngForOf"],[1,"days-grid"],["class","day-column",3,"is-today","today-selected","click",4,"ngFor","ngForOf"],["class","modal-backdrop",3,"click",4,"ngIf"],[3,"src","alt"],["title","Rimuovi cliente","aria-label","Rimuovi cliente",1,"clear-user-btn",3,"click"],[1,"hour-cell"],[1,"day-column",3,"click"],[1,"day-header"],[1,"day-name"],[1,"day-date"],[1,"slots-container"],["class","slot",3,"click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"slot",3,"click"],["class","event-card",3,"ngStyle","click",4,"ngIf"],[1,"event-card",3,"click","ngStyle"],[1,"ev-time"],[1,"ev-user"],[1,"ev-title"],[1,"modal-backdrop",3,"click"],[1,"modal-window","search-window",3,"click"],[1,"modal-header"],["aria-label","Chiudi",1,"close-x",3,"click"],[1,"modal-body"],["type","text","placeholder","Cerca nome...","autofocus","",1,"search-bar",3,"ngModelChange","input","ngModel"],[1,"user-list"],[1,"user-item","generic-item",3,"click"],[1,"avatar-small","generic-avatar"],[1,"u-info"],[1,"u-name"],[1,"u-sub"],["class","user-item",3,"click",4,"ngFor","ngForOf"],[1,"user-item",3,"click"],[1,"modal-window",3,"click"],[1,"info-tag"],[1,"form-group"],["type","text","placeholder","Es. Check-up, Allenamento...",3,"ngModelChange","ngModel"],[1,"time-inputs-row"],[1,"time-block"],[1,"select-wrapper"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"arrow"],["rows","2",3,"ngModelChange","ngModel"],[1,"confirm-btn",3,"click"],[3,"value"],[1,"modal-window","detail-window",3,"click"],["class","modal-body",4,"ngIf"],[1,"detail-row"],["class","detail-row",4,"ngIf"],[1,"actions-footer"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"]],template:function(i,o){i&1&&(C(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3),Ne("click",function(){return o.openUserPicker()}),C(4,"div",4),Je(5,vde,1,2,"img",5)(6,yde,2,1,"span",6),P(),C(7,"div",7)(8,"span",8),q(9,"Pianifica per"),P(),C(10,"span",9),q(11),P()()(),Je(12,_de,2,0,"button",10),P(),C(13,"div",11)(14,"button",12),Ne("click",function(){return o.scrollWeek(-1)}),q(15,"\u2039"),P(),C(16,"span",13),q(17),P(),C(18,"button",14),Ne("click",function(){return o.scrollWeek(1)}),q(19,"\u203A"),P()()(),C(20,"div",15)(21,"button",16),Ne("click",function(){return o.goToToday()}),q(22,"Oggi"),P()()(),C(23,"main",17)(24,"div",18),Tt(25,"div",19),Je(26,wde,3,1,"div",20),P(),C(27,"div",21),Je(28,Ede,9,11,"div",22),P()(),Je(29,Dde,20,2,"div",23)(30,kde,45,13,"div",23)(31,Fde,8,1,"div",23)),i&2&&(K(5),de("ngIf",o.cliente==null?null:o.cliente.avatarUrl),K(),de("ngIf",!(o.cliente!=null&&o.cliente.avatarUrl)),K(5),ft(o.cliente?o.cliente.name:"Nessuno (Generico)"),K(),de("ngIf",o.cliente),K(5),Gc("",o.mesi[o.selectedMonth]==null?null:o.mesi[o.selectedMonth].label," ",o.selectedYear),K(6),bv("--hour-height",o.HOUR_HEIGHT,"px"),K(3),de("ngForOf",o.hours),K(2),de("ngForOf",o.giorniSettimana),K(),de("ngIf",o.showUserPicker),K(),de("ngIf",o.showActivityPicker),K(),de("ngIf",o.showEventDetail))},dependencies:[sc,qi,ki,P5,fd,Qc,Zc,xo,Ta,ms,Ko,k5],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Inter,sans-serif;overflow:hidden;background-color:#f4f7f9}.planning-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.planning-header[_ngcontent-%COMP%]{background-color:#004a87;color:#fff;height:70px;display:flex;justify-content:space-between;align-items:center;padding:0 20px;flex-shrink:0;box-shadow:0 2px 5px #00000014}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.user-selector-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.user-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background:#ffffff26;padding:5px 15px 5px 5px;border-radius:30px;cursor:pointer;transition:background .2s}.user-selector[_ngcontent-%COMP%]:hover{background:#ffffff40}.avatar-small[_ngcontent-%COMP%]{width:32px;height:32px;background:#fff;color:#004a87;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;overflow:hidden;font-size:18px}.avatar-small[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;line-height:1.1}.user-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:10px;opacity:.8;text-transform:uppercase}.user-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.clear-user-btn[_ngcontent-%COMP%]{background:#f44c;border:none;color:#fff;width:24px;height:24px;border-radius:50%;cursor:pointer;font-weight:700;display:flex;align-items:center;justify-content:center}.clear-user-btn[_ngcontent-%COMP%]:hover{background:#f44}.date-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-weight:600;font-size:18px}.nav-arrow[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:0 10px}.today-btn[_ngcontent-%COMP%]{background:#fc0;border:none;padding:6px 14px;border-radius:6px;font-weight:700;cursor:pointer;color:#004a87;box-shadow:0 2px 8px #0000000a}.today-btn[_ngcontent-%COMP%]:hover{background:#ffe066}.planning-main[_ngcontent-%COMP%]{display:flex;flex:1;overflow-y:auto;background:#fff;position:relative}.time-column[_ngcontent-%COMP%]{width:60px;border-right:1px solid #eee;flex-shrink:0;position:sticky;left:0;background:#fff;z-index:20}.time-column[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{height:60px}.hour-cell[_ngcontent-%COMP%]{height:var(--hour-height, 65px);text-align:center;font-size:11px;color:#888;position:relative}.hour-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:-8px;left:10px;background:#fff;padding:0 2px}.days-grid[_ngcontent-%COMP%]{display:flex;flex:1;min-width:0}.day-column[_ngcontent-%COMP%]{flex:1;min-width:140px;border-right:1px solid #eee;display:flex;flex-direction:column;position:relative;transition:background .15s ease}.day-column.is-today[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fff4e0f2,#fff9f0d9);border-left:4px solid #ffcc00;transition:background .15s ease,border-left-color .15s ease}.day-column.today-selected[_ngcontent-%COMP%]{outline:3px solid rgba(255,204,0,.15);box-shadow:inset 0 0 0 2px #ffcc0014;transform:translateY(-1px)}.day-column.today-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_todayPulse 1.4s ease-in-out}@keyframes _ngcontent-%COMP%_todayPulse{0%{box-shadow:0 0 #ffcc0040}50%{box-shadow:0 0 0 14px #ffcc000f}to{box-shadow:0 0 #fc00}}.day-header[_ngcontent-%COMP%]{height:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;border-bottom:2px solid #eee;position:sticky;top:0;background:#fff;z-index:10}.is-today[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]{color:#b07a00;border-bottom:2px solid rgba(255,204,0,.35)}.day-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;text-transform:uppercase}.day-date[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.slots-container[_ngcontent-%COMP%]{position:relative;height:100%}.slot[_ngcontent-%COMP%]{height:var(--hour-height, 65px);border-bottom:1px solid #f4f4f4;cursor:pointer;background:transparent;transition:background .1s}.slot[_ngcontent-%COMP%]:hover{background-color:#f2f7fd}.event-card[_ngcontent-%COMP%]{position:absolute;left:4px;right:4px;padding:5px 7px;border-radius:4px;color:#fff;font-size:11px;cursor:pointer;overflow:hidden;box-shadow:0 2px 4px #00000026;border-left:3px solid rgba(255,255,255,.35);background:linear-gradient(90deg,#006fc2 90%,#004a87);transition:transform .1s}.event-card[_ngcontent-%COMP%]:hover{transform:scale(1.03);z-index:50}.ev-time[_ngcontent-%COMP%]{font-size:9px;opacity:.9;margin-bottom:2px}.ev-user[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;font-size:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ev-title[_ngcontent-%COMP%]{font-style:italic;opacity:.92;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000073;z-index:1000;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.modal-window[_ngcontent-%COMP%]{background:#fff;width:90vw;max-width:420px;border-radius:10px;overflow:hidden;box-shadow:0 8px 32px #00000040}.modal-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:17px}.close-x[_ngcontent-%COMP%]{border:none;background:none;font-size:24px;cursor:pointer;color:#666}.modal-body[_ngcontent-%COMP%]{padding:20px}.search-bar[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:6px;margin-bottom:10px;font-size:15px;box-sizing:border-box}.user-list[_ngcontent-%COMP%]{max-height:250px;overflow-y:auto;border:1px solid #eee;border-radius:6px}.user-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;gap:10px;cursor:pointer;border-bottom:1px solid #f9f9f9;background:#fff;transition:background .1s}.user-item[_ngcontent-%COMP%]:hover{background:#e2eeff}.generic-item[_ngcontent-%COMP%]{background:#fdfdfd;font-style:italic;color:#555}.generic-avatar[_ngcontent-%COMP%]{background:#ddd;color:#666}.u-sub[_ngcontent-%COMP%]{display:block;font-size:11px;color:#888}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#666;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;box-sizing:border-box}.info-tag[_ngcontent-%COMP%]{padding:8px 12px;background:#e3f2fd;color:#0d47a1;border-radius:6px;font-size:13px;margin-bottom:15px}.info-tag.generic[_ngcontent-%COMP%]{background:#eceff1;color:#455a64}.time-inputs-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;background:#f9f9f9;padding:10px;border-radius:8px}.time-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:2px;font-weight:500;font-size:11px}.select-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:3px}.select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc;border-radius:4px;font-size:14px;min-width:42px}.arrow[_ngcontent-%COMP%]{color:#999;font-weight:700;font-size:19px}.confirm-btn[_ngcontent-%COMP%]{width:100%;padding:12px;background:#004a87;color:#fff;border:none;border-radius:6px;font-weight:700;font-size:15px;cursor:pointer}.confirm-btn[_ngcontent-%COMP%]:hover{background:#003865}.detail-row[_ngcontent-%COMP%]{margin-bottom:10px;border-bottom:1px dashed #eee;padding-bottom:5px}.edit-btn[_ngcontent-%COMP%]{margin-right:8px;background:#fff8e1;color:#b07a00;border:1px solid rgba(176,122,0,.15);padding:8px 12px;border-radius:6px;cursor:pointer;font-weight:700}.edit-btn[_ngcontent-%COMP%]:hover{background:#fff2cc}.detail-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#666;display:block}.detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .detail-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#222;margin:2px 0 0}.actions-footer[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end}.delete-btn[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;border:1px solid #ffcdd2;padding:8px 16px;border-radius:6px;font-weight:600;cursor:pointer;transition:.2s}.delete-btn[_ngcontent-%COMP%]:hover{background:#c62828;color:#fff}"]});let n=e;return n})();var Lde=[{path:"login",component:Jz},{path:"",component:fU,canActivate:[xu]},{path:"esercizi",component:vU,canActivate:[xu]},{path:"esercizi/:id",component:Xz,canActivate:[xu]},{path:"anagrafica",component:yU,canActivate:[xu]},{path:"anagrafica/list",component:_U,canActivate:[xu]},{path:"anagrafica/:id",component:Qz,canActivate:[xu]},{path:"gestione-schede",component:Zz,canActivate:[xu]},{path:"calendar-planning",component:tq,canActivate:[xu]},{path:"**",redirectTo:"login"}],nq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ur({type:e}),e.\u0275inj=ir({imports:[yd.forRoot(Lde,{useHash:!0}),yd]});let n=e;return n})();var Vde="@firebase/firestore-compat",jde="0.3.53";function $k(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rq(){if(typeof Uint8Array>"u")throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function iq(){if(!hj())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}var eE=class n{constructor(e){this._delegate=e}static fromBase64String(e){return iq(),new n(Js.fromBase64String(e))}static fromUint8Array(e){return rq(),new n(Js.fromUint8Array(e))}toBase64(){return iq(),this._delegate.toBase64()}toUint8Array(){return rq(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Bk(n){return Bde(n,["next","error","complete"])}function Bde(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var Uk=class{enableIndexedDbPersistence(e,t){return nP(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return rP(e._delegate)}clearIndexedDbPersistence(e){return iP(e._delegate)}},tE=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof kd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){rC(this._delegate,e,t,r)}enableNetwork(){return sP(this._delegate)}disableNetwork(){return aP(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return oP(this._delegate)}onSnapshotsInSync(e){return EP(this._delegate,e)}get app(){if(!this._appCompat)throw new je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $m(this,i_(this._delegate,e))}catch(t){throw ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new xl(this,Dh(this._delegate,e))}catch(t){throw ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gh(this,tP(this._delegate,e))}catch(t){throw ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return SP(this._delegate,t=>e(new nE(this,t)))}batch(){return ao(this._delegate),new rE(new Gx(this._delegate,e=>xm(this._delegate,e)))}loadBundle(e){return cP(this._delegate,e)}namedQuery(e){return lP(this._delegate,e).then(t=>t?new Gh(this,t):null)}},qm=class extends pm{constructor(e){super(),this.firestore=e}convertBytes(e){return new eE(new Js(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return xl.forKey(t,this.firestore,null)}};function Ude(n){vN(n)}var nE=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qm(e)}get(e){let t=qh(e);return this._delegate.get(t).then(r=>new Hh(this._firestore,new Xo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=qh(e);return r?($k("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=qh(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=qh(e);return this._delegate.delete(t),this}},rE=class{constructor(e){this._delegate=e}set(e,t,r){let i=qh(e);return r?($k("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=qh(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=qh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Hm=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Md(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $h(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new qm(e),t),i.set(t,o)),o}};Hm.INSTANCES=new WeakMap;var xl=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qm(e)}static forPath(e,t,r){if(e.length%2!==0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Zn(t._delegate,r,new nt(e)))}static forKey(e,t,r){return new n(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $m(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $m(this.firestore,i_(this._delegate,e))}catch(t){throw ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=bn(e),e instanceof Zn?o_(this._delegate,e):!1}set(e,t){t=$k("DocumentReference.set",t);try{return t?s_(this._delegate,e,t):s_(this._delegate,e)}catch(r){throw ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?a_(this._delegate,e):a_(this._delegate,e,t,...r)}catch(i){throw ts(i,"updateDoc()","DocumentReference.update()")}}delete(){return hC(this._delegate)}onSnapshot(...e){let t=oq(e),r=sq(e,i=>new Hh(this.firestore,new Xo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return bm(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=wP(this._delegate):e?.source==="server"?t=bP(this._delegate):t=dC(this._delegate),t.then(r=>new Hh(this.firestore,new Xo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Hm.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ts(n,e,t){return n.message=n.message.replace(e,t),n}function oq(n){for(let e of n)if(typeof e=="object"&&!Bk(e))return e;return{}}function sq(n,e){var t,r;let i;return Bk(n[0])?i=n[0]:Bk(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Hh=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uC(this._delegate,e._delegate)}},$h=class extends Hh{data(e){let t=this._delegate.data(e);return this._delegate._converter||W7(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Gh=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qm(e)}where(e,t,r){try{return new n(this.firestore,vc(this._delegate,aC(e,t,r)))}catch(i){throw ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,vc(this._delegate,cC(e,t)))}catch(r){throw ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,vc(this._delegate,pP(e)))}catch(t){throw ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,vc(this._delegate,gP(e)))}catch(t){throw ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,vc(this._delegate,mP(...e)))}catch(t){throw ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,vc(this._delegate,vP(...e)))}catch(t){throw ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,vc(this._delegate,yP(...e)))}catch(t){throw ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,vc(this._delegate,_P(...e)))}catch(t){throw ts(t,"endAt()","Query.endAt()")}}isEqual(e){return iC(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=xP(this._delegate):e?.source==="server"?t=CP(this._delegate):t=fC(this._delegate),t.then(r=>new R_(this.firestore,new ws(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=oq(e),r=sq(e,i=>new R_(this.firestore,new ws(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return bm(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Hm.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},zk=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $h(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},R_=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Gh(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $h(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new zk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $h(this._firestore,r))})}isEqual(e){return uC(this._delegate,e._delegate)}},$m=class n extends Gh{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new xl(this.firestore,e):null}doc(e){try{return e===void 0?new xl(this.firestore,Dh(this._delegate)):new xl(this.firestore,Dh(this._delegate,e))}catch(t){throw ts(t,"doc()","CollectionReference.doc()")}}add(e){return pC(this._delegate,e).then(t=>new xl(this.firestore,t))}isEqual(e){return o_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Hm.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function qh(n){return Pn(n,Zn)}var qk=class n{constructor(...e){this._delegate=new mc(...e)}static documentId(){return new n(oi.keyField().canonicalString())}isEqual(e){return e=bn(e),e instanceof mc?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Hk=class n{static serverTimestamp(){let e=XB();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=AP();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=JB(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=eU(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=DP(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var zde={Firestore:tE,GeoPoint:ll,Timestamp:gr,Blob:eE,Transaction:nE,WriteBatch:rE,DocumentReference:xl,DocumentSnapshot:Hh,Query:Gh,QueryDocumentSnapshot:$h,QuerySnapshot:R_,CollectionReference:$m,FieldPath:qk,FieldValue:Hk,setLogLevel:Ude,CACHE_SIZE_UNLIMITED:jB};function qde(n,e){n.INTERNAL.registerComponent(new Zi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},zde)))}function Hde(n){qde(n,(e,t)=>new tE(e,t,new Uk)),n.registerVersion(Vde,jde)}Hde(Di);function $de(n,e=Af){return new Ot(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function aq(n,e){return $de(n,e)}function Gde(n,e){return aq(n,e).pipe(Yu(void 0),Op(),at(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Kk(n,e){return aq(n,e).pipe(at(t=>({payload:t,type:"query"})))}var iE=class{ref;afs;injector=De(Wn);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=fq(r,t);return new sE(i,o,this.afs)}snapshotChanges(){return Gde(this.ref,this.afs.schedulers.outsideAngular).pipe(Oi(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(at(({payload:t})=>e.idField?Rt(Oe({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return mn(this.ref.get(e)).pipe(Oi(this.injector))}};function oE(n,e){return Kk(n,e).pipe(Yu(void 0),Op(),at(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(h=>h.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function cq(n,e,t){return oE(n,t).pipe(Ku((r,i)=>Wde(r,i.map(o=>o.payload),e),[]),ow(),at(r=>r.map(i=>({type:i.type,payload:i}))))}function Wde(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=Kde(n,r))}),n}function Gk(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function Kde(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return Gk(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Gk(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return Gk(n,e.oldIndex,1);break}return n}function lq(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var sE=class{ref;query;afs;injector=De(Wn);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=oE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(at(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Yu(void 0),Op(),br(([r,i])=>i.length>0||!r),at(([,r])=>r),Oi(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Ku((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=lq(e);return cq(this.query,t,this.afs.schedulers.outsideAngular).pipe(Oi(this.injector))}valueChanges(e={}){return Kk(this.query,this.afs.schedulers.outsideAngular).pipe(at(t=>t.payload.docs.map(r=>e.idField?Rt(Oe({},r.data()),{[e.idField]:r.id}):r.data())),Oi(this.injector))}get(e){return mn(this.query.get(e)).pipe(Oi(this.injector))}add(e){return this.ref.add(e)}doc(e){return new iE(this.ref.doc(e),this.afs)}},Wk=class{query;afs;injector=De(Wn);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?oE(this.query,this.afs.schedulers.outsideAngular).pipe(Oi(this.injector)):oE(this.query,this.afs.schedulers.outsideAngular).pipe(at(t=>t.filter(r=>e.indexOf(r.type)>-1)),br(t=>t.length>0),Oi(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Ku((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=lq(e);return cq(this.query,t,this.afs.schedulers.outsideAngular).pipe(Oi(this.injector))}valueChanges(e={}){return Kk(this.query,this.afs.schedulers.outsideAngular).pipe(at(r=>r.payload.docs.map(i=>e.idField?Oe({[e.idField]:i.id},i.data()):i.data())),Oi(this.injector))}get(e){return mn(this.query.get(e)).pipe(Oi(this.injector))}},uq=new Ye("angularfire2.enableFirestorePersistence"),dq=new Ye("angularfire2.firestore.persistenceSettings"),Yde=new Ye("angularfire2.firestore.settings"),Qde=new Ye("angularfire2.firestore.use-emulator");function fq(n,e=t=>t){return{query:e(n),ref:n}}var Yk=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=De(Ut);constructor(t,r,i,o,s,a,c,l,u,h,m,g,b,I,T,N,Y){this.schedulers=c;let j=oh(t,a,r),W=u;h&&QD(j,a,m,b,I,T,g,N),[this.firestore,this.persistenceEnabled$]=Ag(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let oe=a.runOutsideAngular(()=>j.firestore());if(o&&oe.settings(o),W&&oe.useEmulator(...W),i&&!Lb(s)){let he=()=>{try{return mn(oe.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(z){return typeof console<"u"&&console.warn(z),gt(!1)}};return[oe,a.runOutsideAngular(he)]}else return[oe,gt(!1)]},[o,W,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=fq(i,r),a=this.ngZone.run(()=>o);return new sE(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new Wk(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new iE(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Ve(wd),Ve(bd,8),Ve(uq,8),Ve(Yde,8),Ve(Ui),Ve(Ut),Ve(ri),Ve(dq,8),Ve(Qde,8),Ve(Ys,8),Ve(HD,8),Ve($D,8),Ve(GD,8),Ve(WD,8),Ve(KD,8),Ve(YD,8),Ve(vs,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),hq=(()=>{class n{constructor(){Di.registerVersion("angularfire",ni.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:uq,useValue:!0},{provide:dq,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=ir({providers:[Yk]})}return n})();var xq="firebasestorage.googleapis.com",Cq="storageBucket",Xde=120*1e3,Jde=600*1e3,efe=1e3;var Ur=class n extends $u{constructor(e,t,r=0){super(Qk(e),`Firebase Storage: ${t} (${Qk(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Nr=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(Nr||{});function Qk(n){return"storage/"+n}function iR(){let n="An unknown error occurred, please check the error payload for server response.";return new Ur(Nr.UNKNOWN,n)}function tfe(n){return new Ur(Nr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function nfe(n){return new Ur(Nr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rfe(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ur(Nr.UNAUTHENTICATED,n)}function ife(){return new Ur(Nr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ofe(n){return new Ur(Nr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Eq(){return new Ur(Nr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Iq(){return new Ur(Nr.CANCELED,"User canceled the upload/download.")}function sfe(n){return new Ur(Nr.INVALID_URL,"Invalid URL '"+n+"'.")}function afe(n){return new Ur(Nr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function cfe(){return new Ur(Nr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Cq+"' property when initializing the app?")}function Sq(){return new Ur(Nr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lfe(){return new Ur(Nr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function ufe(){return new Ur(Nr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dfe(n){return new Ur(Nr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Wh(n){return new Ur(Nr.INVALID_ARGUMENT,n)}function Aq(){return new Ur(Nr.APP_DELETED,"The Firebase app was deleted.")}function oR(n){return new Ur(Nr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function F_(n,e){return new Ur(Nr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function O_(n){throw new Ur(Nr.INTERNAL_ERROR,"Internal error: "+n)}var ns=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw afe(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function l(W){W.path_=decodeURIComponent(W.path)}let u="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${u}/b/${i}/o${m}`,"i"),b={bucket:1,path:3},I=t===xq?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",N=new RegExp(`^https?://${I}/${i}/${T}`,"i"),j=[{regex:a,indices:c,postModify:o},{regex:g,indices:b,postModify:l},{regex:N,indices:{bucket:1,path:2},postModify:l}];for(let W=0;W<j.length;W++){let oe=j[W],he=oe.regex.exec(e);if(he){let z=he[oe.indices.bucket],M=he[oe.indices.path];M||(M=""),r=new n(z,M),oe.postModify(r);break}}if(r==null)throw sfe(e);return r}},Xk=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function ffe(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let l=!1;function u(...T){l||(l=!0,e.apply(null,T))}function h(T){i=setTimeout(()=>{i=null,n(g,c())},T)}function m(){o&&clearTimeout(o)}function g(T,...N){if(l){m();return}if(T){m(),u.call(null,T,...N);return}if(c()||s){m(),u.call(null,T,...N);return}r<64&&(r*=2);let j;a===1?(a=2,j=0):j=(r+Math.random())*1e3,h(j)}let b=!1;function I(T){b||(b=!0,m(),!l&&(i!==null?(T||(a=2),clearTimeout(i),h(0)):T||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,I(!0)},t),I}function hfe(n){n(!1)}function pfe(n){return n!==void 0}function gfe(n){return typeof n=="function"}function mfe(n){return typeof n=="object"&&!Array.isArray(n)}function lE(n){return typeof n=="string"||n instanceof String}function pq(n){return sR()&&n instanceof Blob}function sR(){return typeof Blob<"u"}function Jk(n,e,t,r){if(r<e)throw Wh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Wh(`Invalid value for '${n}'. Expected ${t} or less.`)}function rf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Dq(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Km=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(Km||{});function Tq(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var eR=class{constructor(e,t,r,i,o,s,a,c,l,u,h,m=!0,g=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.retry=m,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,I)=>{this.resolve_=b,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Wm(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Km.NO_ERROR,c=o.getStatus();if(!a||Tq(c,this.additionalRetryCodes_)&&this.retry){let u=o.getErrorCode()===Km.ABORT;r(!1,new Wm(!1,null,u));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Wm(l,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());pfe(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=iR();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?Aq():Iq();s(c)}else{let c=Eq();s(c)}};this.canceled_?t(!1,new Wm(!1,null,!0)):this.backoffId_=ffe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hfe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Wm=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function vfe(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function yfe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _fe(n,e){e&&(n["X-Firebase-GMPID"]=e)}function wfe(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function bfe(n,e,t,r,i,o,s=!0,a=!1){let c=Dq(n.urlParams),l=n.url+c,u=Object.assign({},n.headers);return _fe(u,e),vfe(u,t),yfe(u,o),wfe(u,r),new eR(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function xfe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Cfe(...n){let e=xfe();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(sR())return new Blob(n);throw new Ur(Nr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Efe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Ife(n){if(typeof atob>"u")throw dfe("base-64");return atob(n)}var ra={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},L_=class{constructor(e,t){this.data=e,this.contentType=t||null}};function aR(n,e){switch(n){case ra.RAW:return new L_(Mq(e));case ra.BASE64:case ra.BASE64URL:return new L_(Nq(n,e));case ra.DATA_URL:return new L_(Afe(e),Dfe(e))}throw iR()}function Mq(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Sfe(n){let e;try{e=decodeURIComponent(n)}catch{throw F_(ra.DATA_URL,"Malformed data URL.")}return Mq(e)}function Nq(n,e){switch(n){case ra.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw F_(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ra.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw F_(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Ife(e)}catch(i){throw i.message.includes("polyfill")?i:F_(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var cE=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw F_(ra.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=Tfe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Afe(n){let e=new cE(n);return e.base64?Nq(ra.BASE64,e.rest):Sfe(e.rest)}function Dfe(n){return new cE(n).contentType}function Tfe(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Ym=class n{constructor(e,t){let r=0,i="";pq(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(pq(this.data_)){let r=this.data_,i=Efe(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(sR()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Cfe.apply(null,t))}else{let t=e.map(s=>lE(s)?aR(ra.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function cR(n){let e;try{e=JSON.parse(n)}catch{return null}return mfe(e)?e:null}function Mfe(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Nfe(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Pq(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Pfe(n,e){return e}var uo=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Pfe}},aE=null;function kfe(n){return!lE(n)||n.length<2?n:Pq(n)}function uE(){if(aE)return aE;let n=[];n.push(new uo("bucket")),n.push(new uo("generation")),n.push(new uo("metageneration")),n.push(new uo("name","fullPath",!0));function e(o,s){return kfe(s)}let t=new uo("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new uo("size");return i.xform=r,n.push(i),n.push(new uo("timeCreated")),n.push(new uo("updated")),n.push(new uo("md5Hash",null,!0)),n.push(new uo("cacheControl",null,!0)),n.push(new uo("contentDisposition",null,!0)),n.push(new uo("contentEncoding",null,!0)),n.push(new uo("contentLanguage",null,!0)),n.push(new uo("contentType",null,!0)),n.push(new uo("metadata","customMetadata",!0)),aE=n,aE}function Rfe(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new ns(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function Ofe(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return Rfe(r,n),r}function kq(n,e,t){let r=cR(e);return r===null?null:Ofe(n,r,t)}function Ffe(n,e,t,r){let i=cR(e);if(i===null||!lE(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let u=n.bucket,h=n.fullPath,m="/b/"+s(u)+"/o/"+s(h),g=rf(m,t,r),b=Dq({alt:"media",token:l});return g+b})[0]}function lR(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var gq="prefixes",mq="items";function Lfe(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[gq])for(let i of t[gq]){let o=i.replace(/\/$/,""),s=n._makeStorageReference(new ns(e,o));r.prefixes.push(s)}if(t[mq])for(let i of t[mq]){let o=n._makeStorageReference(new ns(e,i.name));r.items.push(o)}return r}function Vfe(n,e,t){let r=cR(t);return r===null?null:Lfe(n,e,r)}var xc=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function El(n){if(!n)throw iR()}function dE(n,e){function t(r,i){let o=kq(n,i,e);return El(o!==null),o}return t}function jfe(n,e){function t(r,i){let o=Vfe(n,e,i);return El(o!==null),o}return t}function Bfe(n,e){function t(r,i){let o=kq(n,i,e);return El(o!==null),Ffe(o,i,n.host,n._protocol)}return t}function Xm(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=ife():i=rfe():t.getStatus()===402?i=nfe(n.bucket):t.getStatus()===403?i=ofe(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function fE(n){let e=Xm(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=tfe(n.path)),o.serverResponse=i.serverResponse,o}return t}function Rq(n,e,t){let r=e.fullServerUrl(),i=rf(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new xc(i,o,dE(n,t),s);return a.errorHandler=fE(e),a}function Ufe(n,e,t,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=rf(s,n.host,n._protocol),c="GET",l=n.maxOperationRetryTime,u=new xc(a,c,jfe(n,e.bucket),l);return u.urlParams=o,u.errorHandler=Xm(e),u}function zfe(n,e,t){let r=e.fullServerUrl(),i=rf(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new xc(i,o,Bfe(n,t),s);return a.errorHandler=fE(e),a}function qfe(n,e,t,r){let i=e.fullServerUrl(),o=rf(i,n.host,n._protocol),s="PATCH",a=lR(t,r),c={"Content-Type":"application/json; charset=utf-8"},l=n.maxOperationRetryTime,u=new xc(o,s,dE(n,r),l);return u.headers=c,u.body=a,u.errorHandler=fE(e),u}function Hfe(n,e){let t=e.fullServerUrl(),r=rf(t,n.host,n._protocol),i="DELETE",o=n.maxOperationRetryTime;function s(c,l){}let a=new xc(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=fE(e),a}function $fe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Oq(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=$fe(null,e)),r}function Gfe(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let j="";for(let W=0;W<2;W++)j=j+Math.random().toString().slice(2);return j}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let l=Oq(e,r,i),u=lR(l,t),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+c+"--",g=Ym.getBlob(h,r,m);if(g===null)throw Sq();let b={name:l.fullPath},I=rf(o,n.host,n._protocol),T="POST",N=n.maxUploadRetryTime,Y=new xc(I,T,dE(n,t),N);return Y.urlParams=b,Y.headers=s,Y.body=g.uploadData(),Y.errorHandler=Xm(e),Y}var Qm=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function uR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{El(!1)}return El(!!t&&(e||["active"]).indexOf(t)!==-1),t}function Wfe(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s=Oq(e,r,i),a={name:s.fullPath},c=rf(o,n.host,n._protocol),l="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=lR(s,t),m=n.maxUploadRetryTime;function g(I){uR(I);let T;try{T=I.getResponseHeader("X-Goog-Upload-URL")}catch{El(!1)}return El(lE(T)),T}let b=new xc(c,l,g,m);return b.urlParams=a,b.headers=u,b.body=h,b.errorHandler=Xm(e),b}function Kfe(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function o(l){let u=uR(l,["active","final"]),h=null;try{h=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{El(!1)}h||El(!1);let m=Number(h);return El(!isNaN(m)),new Qm(m,r.size(),u==="final")}let s="POST",a=n.maxUploadRetryTime,c=new xc(t,s,o,a);return c.headers=i,c.errorHandler=Xm(e),c}var vq=256*1024;function Yfe(n,e,t,r,i,o,s,a){let c=new Qm(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw lfe();let l=c.total-c.current,u=l;i>0&&(u=Math.min(u,i));let h=c.current,m=h+u,g="";u===0?g="finalize":l===u?g="upload, finalize":g="upload";let b={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${c.current}`},I=r.slice(h,m);if(I===null)throw Sq();function T(W,oe){let he=uR(W,["active","final"]),z=c.current+u,M=r.size(),S;return he==="final"?S=dE(e,o)(W,oe):S=null,new Qm(z,M,he==="final",S)}let N="POST",Y=e.maxUploadRetryTime,j=new xc(t,N,T,Y);return j.headers=b,j.body=I.uploadData(),j.progressCallback=a||null,j.errorHandler=Xm(n),j}var Fq={STATE_CHANGED:"state_changed"},Mo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Zk(n){switch(n){case"running":case"pausing":case"canceling":return Mo.RUNNING;case"paused":return Mo.PAUSED;case"success":return Mo.SUCCESS;case"canceled":return Mo.CANCELED;case"error":return Mo.ERROR;default:return Mo.ERROR}}var tR=class{constructor(e,t,r){if(gfe(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function Gm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var yq=null,nR=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Km.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Km.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Km.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw O_("cannot .send() more than once");if(fp(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw O_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw O_("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw O_("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw O_("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},rR=class extends nR{initXhr(){this.xhr_.responseType="text"}};function Cl(){return yq?yq():new rR}var V_=class{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=uE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Nr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(Tq(i.status,[]))if(o)i=Eq();else{this.sleepTime=Math.max(this.sleepTime*2,efe),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Nr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=Wfe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=Kfe(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Cl,t,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=vq*this._chunkMultiplier,t=new Qm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=Yfe(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,Cl,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){vq*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=Rq(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Cl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=Gfe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Iq(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=Zk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let o=new tR(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Zk(this._state)){case Mo.SUCCESS:Gm(this._resolve.bind(null,this.snapshot))();break;case Mo.CANCELED:case Mo.ERROR:let t=this._reject;Gm(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Zk(this._state)){case Mo.RUNNING:case Mo.PAUSED:e.next&&Gm(e.next.bind(e,this.snapshot))();break;case Mo.SUCCESS:e.complete&&Gm(e.complete.bind(e))();break;case Mo.CANCELED:case Mo.ERROR:e.error&&Gm(e.error.bind(e,this._error))();break;default:e.error&&Gm(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Zm=class n{constructor(e,t){this._service=e,t instanceof ns?this._location=t:this._location=ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pq(this._location.path)}get storage(){return this._service}get parent(){let e=Mfe(this._location.path);if(e===null)return null;let t=new ns(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw oR(e)}};function Qfe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new V_(n,new Ym(e),t)}function Zfe(n){let e={prefixes:[],items:[]};return Lq(n,e).then(()=>e)}function Lq(n,e,t){return ee(this,null,function*(){let i=yield Vq(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield Lq(n,e,i.nextPageToken))})}function Vq(n,e){e!=null&&typeof e.maxResults=="number"&&Jk("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=Ufe(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Cl)}function Xfe(n){n._throwIfRoot("getMetadata");let e=Rq(n.storage,n._location,uE());return n.storage.makeRequestWithTokens(e,Cl)}function Jfe(n,e){n._throwIfRoot("updateMetadata");let t=qfe(n.storage,n._location,e,uE());return n.storage.makeRequestWithTokens(t,Cl)}function ehe(n){n._throwIfRoot("getDownloadURL");let e=zfe(n.storage,n._location,uE());return n.storage.makeRequestWithTokens(e,Cl).then(t=>{if(t===null)throw ufe();return t})}function the(n){n._throwIfRoot("deleteObject");let e=Hfe(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Cl)}function jq(n,e){let t=Nfe(n._location.path,e),r=new ns(n._location.bucket,t);return new Zm(n.storage,r)}function nhe(n){return/^[A-Za-z]+:\/\//.test(n)}function rhe(n,e){return new Zm(n,e)}function Bq(n,e){if(n instanceof j_){let t=n;if(t._bucket==null)throw cfe();let r=new Zm(t,t._bucket);return e!=null?Bq(r,e):r}else return e!==void 0?jq(n,e):n}function ihe(n,e){if(e&&nhe(e)){if(n instanceof j_)return rhe(n,e);throw Wh("To use ref(service, url), the first argument must be a Storage instance.")}else return Bq(n,e)}function _q(n,e){let t=e?.[Cq];return t==null?null:ns.makeFromBucketSpec(t,n)}function ohe(n,e,t,r={}){n.host=`${e}:${t}`;let i=fp(e);i&&(y1(`https://${n.host}/b`),w1("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:_1(o,n.app.options.projectId))}var j_=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=xq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Xde,this._maxUploadRetryTime=Jde,this._requests=new Set,i!=null?this._bucket=ns.makeFromBucketSpec(i,this._host):this._bucket=_q(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ns.makeFromBucketSpec(this._url,e):this._bucket=_q(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return ee(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return ee(this,null,function*(){if(x1(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zm(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Xk(Aq());{let s=bfe(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return ee(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},wq="@firebase/storage",bq="0.13.14";var Uq="storage";function dR(n,e,t){return n=bn(n),Qfe(n,e,t)}function fR(n){return n=bn(n),Xfe(n)}function hR(n,e){return n=bn(n),Jfe(n,e)}function pR(n,e){return n=bn(n),Vq(n,e)}function gR(n){return n=bn(n),Zfe(n)}function mR(n){return n=bn(n),ehe(n)}function vR(n){return n=bn(n),the(n)}function hE(n,e){return n=bn(n),ihe(n,e)}function zq(n,e){return jq(n,e)}function qq(n=Oc(),e){n=bn(n);let r=Ha(n,Uq).getImmediate({identifier:e}),i=v1("storage");return i&&pE(r,...i),r}function pE(n,e,t,r={}){ohe(n,e,t,r)}function she(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new j_(t,r,i,e,C1)}function ahe(){Us(new Zi(Uq,she,"PUBLIC").setMultipleInstances(!0)),Gn(wq,bq,""),Gn(wq,bq,"esm2017")}ahe();var Jm=class{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var gE=class{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Jm(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Jm(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(typeof t=="function"?o=s=>t(new Jm(s,this,this._ref)):o={next:t.next?s=>t.next(new Jm(s,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},mE=class{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Kh(e,this._service))}get items(){return this._delegate.items.map(e=>new Kh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Kh=class n{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let t=zq(this._delegate,e);return new n(t,this.storage)}get root(){return new n(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new n(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new gE(dR(this._delegate,e,t),this)}putString(e,t=ra.RAW,r){this._throwIfRoot("putString");let i=aR(t,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new gE(new V_(this._delegate,new Ym(i.data,!0),o),this)}listAll(){return gR(this._delegate).then(e=>new mE(e,this.storage))}list(e){return pR(this._delegate,e||void 0).then(t=>new mE(t,this.storage))}getMetadata(){return fR(this._delegate)}updateMetadata(e){return hR(this._delegate,e)}getDownloadURL(){return mR(this._delegate)}delete(){return this._throwIfRoot("delete"),vR(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw oR(e)}};var vE=class{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Hq(e))throw Wh("ref() expected a child path but got a URL, use refFromURL instead.");return new Kh(hE(this._delegate,e),this)}refFromURL(e){if(!Hq(e))throw Wh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ns.makeFromUrl(e,this._delegate.host)}catch{throw Wh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Kh(hE(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){pE(this._delegate,e,t,r)}};function Hq(n){return/^[A-Za-z]+:\/\//.test(n)}var che="@firebase/storage-compat",lhe="0.3.24";var uhe="storage-compat";function dhe(n,{instanceIdentifier:e}){let t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new vE(t,r)}function fhe(n){let e={TaskState:Mo,TaskEvent:Fq,StringFormat:ra,Storage:vE,Reference:Kh};n.INTERNAL.registerComponent(new Zi(uhe,dhe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(che,lhe)}fhe(Di);function hhe(n){return new Ot(e=>{let t=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();t(n.snapshot);let o=n.on("state_changed",t);return n.then(s=>{t(s),i()},s=>{t(n.snapshot),r(s)}),function(){o()}}).pipe(EI(0))}function $q(n){let e=hhe(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(at(t=>t.bytesTransferred/t.totalBytes*100))}}function yE(n,e){return{getDownloadURL:()=>gt(void 0).pipe(_o(e.get(ri).outsideAngular),Nn(()=>n.getDownloadURL()),Oi(e)),getMetadata:()=>gt(void 0).pipe(_o(e.get(ri).outsideAngular),Nn(()=>n.getMetadata()),Oi(e)),delete:()=>mn(n.delete()),child:t=>yE(n.child(t),e),updateMetadata:t=>mn(n.updateMetadata(t)),put:(t,r)=>{let i=n.put(t,r);return $q(i)},putString:(t,r,i)=>{let o=n.putString(t,r,i);return $q(o)},list:t=>mn(n.list(t)),listAll:()=>mn(n.listAll())}}var phe=new Ye("angularfire2.storageBucket"),ghe=new Ye("angularfire2.storage.maxUploadRetryTime"),mhe=new Ye("angularfire2.storage.maxOperationRetryTime"),vhe=new Ye("angularfire2.storage.use-emulator"),yR=(()=>{class n{storage;injector=De(Wn);constructor(t,r,i,o,s,a,c,l,u,h){let m=oh(t,s,r);this.storage=Ag(`${m.name}.storage.${i}`,"AngularFireStorage",m.name,()=>{let g=s.runOutsideAngular(()=>m.storage(i||void 0)),b=u;return b&&g.useEmulator(...b),c&&g.setMaxUploadRetryTime(c),l&&g.setMaxOperationRetryTime(l),g},[c,l])}ref(t){return yE(this.storage.ref(t),this.injector)}refFromURL(t){return yE(this.storage.refFromURL(t),this.injector)}upload(t,r,i){let o=this.storage.ref(t);return yE(o,this.injector).put(r,i)}static \u0275fac=function(r){return new(r||n)(Ve(wd),Ve(bd,8),Ve(phe,8),Ve(Ui),Ve(Ut),Ve(ri),Ve(ghe,8),Ve(mhe,8),Ve(vhe,8),Ve(vs,8))};static \u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Gq=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=ir({})}return n})(),Wq=(()=>{class n{constructor(){Di.registerVersion("angularfire",ni.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=ir({providers:[yR],imports:[Gq,Gq]})}return n})();var Kq=(()=>{let e=class e{constructor(r,i,o){this.firestore=r,this.auth=i,this.storage=o,this.schedeCollection=this.firestore.collection("schede")}testWrite(){return ee(this,null,function*(){try{try{(yield this.auth.currentUser)||(yield this.auth.signInAnonymously())}catch{}return{ok:!0,id:(yield this.schedeCollection.add({nome:"debug-"+Date.now(),dataCreazione:new Date,idCliente:"debug",esercizi:[]})).id}}catch(r){return console.error("FirebaseService.testWrite error",r),{ok:!1,error:r}}})}getSchede(){return this.schedeCollection.snapshotChanges().pipe(at(r=>r.map(i=>{let o=i.payload.doc.data(),s=i.payload.doc.id;return Oe({id:s},o)})))}getScheda(r){return this.schedeCollection.doc(r).valueChanges().pipe(at(i=>i?Rt(Oe({},i),{id:r}):void 0))}addScheda(r){return this.schedeCollection.add(r)}updateScheda(r,i){return this.schedeCollection.doc(r).update(i)}deleteScheda(r){return this.schedeCollection.doc(r).delete()}};e.\u0275fac=function(i){return new(i||e)(Ve(Yk),Ve(Ys),Ve(yR))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var B_=class{constructor(e){return e}},Yq="storage",_R=class{constructor(){return nl(Yq)}};var wR=new Ye("angularfire2.storage-instances");function _he(n,e){let t=ou(Yq,n,e);return t&&new B_(t)}function whe(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new B_(r)}}var bhe={provide:_R,deps:[[new Ir,wR]]},xhe={provide:B_,useFactory:_he,deps:[[new Ir,wR],Ks]};function Qq(n,...e){return Gn("angularfire",ni.full,"gcs"),to([xhe,bhe,{provide:wR,useFactory:whe(n),multi:!0,deps:[Ut,Rn,ri,uc,[new Ir,sh],[new Ir,vs],...e]}])}var Zq=Dr(qq,!0);var eH="@firebase/installations",ER="0.6.18";var tH=1e4,nH=`w:${ER}`,rH="FIS_v2",Che="https://firebaseinstallations.googleapis.com/v1",Ehe=3600*1e3,Ihe="installations",She="Installations";var Ahe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Qh=new pp(Ihe,She,Ahe);function iH(n){return n instanceof $u&&n.code.includes("request-failed")}function oH({projectId:n}){return`${Che}/projects/${n}/installations`}function sH(n){return{token:n.token,requestStatus:2,expiresIn:The(n.expiresIn),creationTime:Date.now()}}function aH(n,e){return ee(this,null,function*(){let r=(yield e.json()).error;return Qh.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function cH({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Dhe(n,{refreshToken:e}){let t=cH(n);return t.append("Authorization",Mhe(e)),t}function lH(n){return ee(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function The(n){return Number(n.replace("s","000"))}function Mhe(n){return`${rH} ${n}`}function Nhe(r,i){return ee(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=oH(n),s=cH(n),a=e.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}let c={fid:t,authVersion:rH,appId:n.appId,sdkVersion:nH},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield lH(()=>fetch(o,l));if(u.ok){let h=yield u.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:sH(h.authToken)}}else throw yield aH("Create Installation",u)})}function uH(n){return new Promise(e=>{setTimeout(e,n)})}function Phe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var khe=/^[cdef][\w-]{21}$/,CR="";function Rhe(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=Ohe(n);return khe.test(t)?t:CR}catch{return CR}}function Ohe(n){return Phe(n).substr(0,22)}function wE(n){return`${n.appName}!${n.appId}`}var dH=new Map;function fH(n,e){let t=wE(n);hH(t,e),Fhe(t,e)}function hH(n,e){let t=dH.get(n);if(t)for(let r of t)r(e)}function Fhe(n,e){let t=Lhe();t&&t.postMessage({key:n,fid:e}),Vhe()}var Yh=null;function Lhe(){return!Yh&&"BroadcastChannel"in self&&(Yh=new BroadcastChannel("[Firebase] FID Change"),Yh.onmessage=n=>{hH(n.data.key,n.data.fid)}),Yh}function Vhe(){dH.size===0&&Yh&&(Yh.close(),Yh=null)}var jhe="firebase-installations-database",Bhe=1,Zh="firebase-installations-store",bR=null;function IR(){return bR||(bR=XO(jhe,Bhe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Zh)}}})),bR}function _E(n,e){return ee(this,null,function*(){let t=wE(n),i=(yield IR()).transaction(Zh,"readwrite"),o=i.objectStore(Zh),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&fH(n,e.fid),e})}function pH(n){return ee(this,null,function*(){let e=wE(n),r=(yield IR()).transaction(Zh,"readwrite");yield r.objectStore(Zh).delete(e),yield r.done})}function bE(n,e){return ee(this,null,function*(){let t=wE(n),i=(yield IR()).transaction(Zh,"readwrite"),o=i.objectStore(Zh),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&fH(n,a.fid),a})}function SR(n){return ee(this,null,function*(){let e,t=yield bE(n.appConfig,r=>{let i=Uhe(r),o=zhe(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===CR?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function Uhe(n){let e=n||{fid:Rhe(),registrationStatus:0};return gH(e)}function zhe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Qh.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=qhe(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Hhe(n)}:{installationEntry:e}}function qhe(n,e){return ee(this,null,function*(){try{let t=yield Nhe(n,e);return _E(n.appConfig,t)}catch(t){throw iH(t)&&t.customData.serverCode===409?yield pH(n.appConfig):yield _E(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function Hhe(n){return ee(this,null,function*(){let e=yield Xq(n.appConfig);for(;e.registrationStatus===1;)yield uH(100),e=yield Xq(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield SR(n);return r||t}return e})}function Xq(n){return bE(n,e=>{if(!e)throw Qh.create("installation-not-found");return gH(e)})}function gH(n){return $he(n)?{fid:n.fid,registrationStatus:0}:n}function $he(n){return n.registrationStatus===1&&n.registrationTime+tH<Date.now()}function Ghe(r,i){return ee(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=Whe(n,t),s=Dhe(n,t),a=e.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}let c={installation:{sdkVersion:nH,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield lH(()=>fetch(o,l));if(u.ok){let h=yield u.json();return sH(h)}else throw yield aH("Generate Auth Token",u)})}function Whe(n,{fid:e}){return`${oH(n)}/${e}/authTokens:generate`}function AR(n,e=!1){return ee(this,null,function*(){let t,r=yield bE(n.appConfig,o=>{if(!mH(o))throw Qh.create("not-registered");let s=o.authToken;if(!e&&Qhe(s))return o;if(s.requestStatus===1)return t=Khe(n,e),o;{if(!navigator.onLine)throw Qh.create("app-offline");let a=Xhe(o);return t=Yhe(n,a),a}});return t?yield t:r.authToken})}function Khe(n,e){return ee(this,null,function*(){let t=yield Jq(n.appConfig);for(;t.authToken.requestStatus===1;)yield uH(100),t=yield Jq(n.appConfig);let r=t.authToken;return r.requestStatus===0?AR(n,e):r})}function Jq(n){return bE(n,e=>{if(!mH(e))throw Qh.create("not-registered");let t=e.authToken;return Jhe(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Yhe(n,e){return ee(this,null,function*(){try{let t=yield Ghe(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield _E(n.appConfig,r),t}catch(t){if(iH(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield pH(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield _E(n.appConfig,r)}throw t}})}function mH(n){return n!==void 0&&n.registrationStatus===2}function Qhe(n){return n.requestStatus===2&&!Zhe(n)}function Zhe(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Ehe}function Xhe(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Jhe(n){return n.requestStatus===1&&n.requestTime+tH<Date.now()}function epe(n){return ee(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield SR(e);return r?r.catch(console.error):AR(e).catch(console.error),t.fid})}function tpe(n,e=!1){return ee(this,null,function*(){let t=n;return yield npe(t),(yield AR(t,e)).token})}function npe(n){return ee(this,null,function*(){let{registrationPromise:e}=yield SR(n);e&&(yield e)})}function rpe(n){if(!n||!n.options)throw xR("App Configuration");if(!n.name)throw xR("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw xR(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function xR(n){return Qh.create("missing-app-config-values",{valueName:n})}var vH="installations",ipe="installations-internal",ope=n=>{let e=n.getProvider("app").getImmediate(),t=rpe(e),r=Ha(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},spe=n=>{let e=n.getProvider("app").getImmediate(),t=Ha(e,vH).getImmediate();return{getId:()=>epe(t),getToken:i=>tpe(t,i)}};function ape(){Us(new Zi(vH,ope,"PUBLIC")),Us(new Zi(ipe,spe,"PRIVATE"))}ape();Gn(eH,ER);Gn(eH,ER,"esm2017");var xE="analytics",cpe="firebase_id",lpe="origin",upe=60*1e3,dpe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",RR="https://www.googletagmanager.com/gtag/js";var Es=new mp("@firebase/analytics");var fpe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ia=new pp("analytics","Analytics",fpe);function hpe(n){if(!n.startsWith(RR)){let e=ia.create("invalid-gtag-resource",{gtagURL:n});return Es.warn(e.message),""}return n}function EH(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function ppe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function gpe(n,e){let t=ppe("firebase-js-sdk-policy",{createScriptURL:hpe}),r=document.createElement("script"),i=`${RR}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function mpe(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function vpe(n,e,t,r,i,o){return ee(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield EH(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){Es.error(a)}n("config",i,o)})}function ype(n,e,t,r,i){return ee(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield EH(t);for(let c of s){let l=a.find(h=>h.measurementId===c),u=l&&e[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Es.error(o)}})}function _pe(n,e,t,r){function i(o,...s){return ee(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield ype(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield vpe(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,l]=s;n("get",a,c,l)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){Es.error(a)}})}return i}function wpe(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=_pe(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function bpe(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(RR)&&t.src.includes(n))return t;return null}var xpe=30,Cpe=1e3,TR=class{constructor(e={},t=Cpe){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},IH=new TR;function Epe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Ipe(n){return ee(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:Epe(r)},o=dpe.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw ia.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function Spe(r){return ee(this,arguments,function*(n,e=IH,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw ia.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw ia.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new MR;return setTimeout(()=>ee(null,null,function*(){c.abort()}),t!==void 0?t:upe),SH({appId:i,apiKey:o,measurementId:s},a,c,e)})}function SH(o,s,a){return ee(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=IH){var c;let{appId:l,measurementId:u}=n;try{yield Ape(r,e)}catch(h){if(u)return Es.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:l,measurementId:u};throw h}try{let h=yield Ipe(n);return i.deleteThrottleMetadata(l),h}catch(h){let m=h;if(!Dpe(m)){if(i.deleteThrottleMetadata(l),u)return Es.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:u};throw h}let g=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?b1(t,i.intervalMillis,xpe):b1(t,i.intervalMillis),b={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return i.setThrottleMetadata(l,b),Es.debug(`Calling attemptFetch again in ${g} millis`),SH(n,b,r,i)}})}function Ape(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(ia.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Dpe(n){if(!(n instanceof $u)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var MR=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var NR;function Tpe(n,e,t,r,i){return ee(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}var PR;function Mpe(n){PR=n}function Npe(n){NR=n}function Ppe(){return ee(this,null,function*(){if(hp())try{yield QO()}catch(n){return Es.warn(ia.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Es.warn(ia.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function kpe(n,e,t,r,i,o,s){return ee(this,null,function*(){var a;let c=Spe(n);c.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&Es.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Es.error(g)),e.push(c);let l=Ppe().then(g=>{if(g)return r.getId()}),[u,h]=yield Promise.all([c,l]);bpe(o)||gpe(o,u.measurementId),PR&&(i("consent","default",PR),Mpe(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[lpe]="firebase",m.update=!0,h!=null&&(m[cpe]=h),i("config",u.measurementId,m),NR&&(i("set",NR),Npe(void 0)),u.measurementId})}var kR=class{constructor(e){this.app=e}_delete(){return delete U_[this.app.options.appId],Promise.resolve()}},U_={},yH=[],_H={},DR="dataLayer",Rpe="gtag",wH,AH,bH=!1;function Ope(){let n=[];if(YO()&&n.push("This is a browser extension environment."),ZO()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ia.create("invalid-analytics-context",{errorInfo:e});Es.warn(t.message)}}function Fpe(n,e,t){Ope();let r=n.options.appId;if(!r)throw ia.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Es.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ia.create("no-api-key");if(U_[r]!=null)throw ia.create("already-exists",{id:r});if(!bH){mpe(DR);let{wrappedGtag:o,gtagCore:s}=wpe(U_,yH,_H,DR,Rpe);AH=o,wH=s,bH=!0}return U_[r]=kpe(n,yH,_H,e,wH,DR,t),new kR(n)}function DH(n=Oc()){n=bn(n);let e=Ha(n,xE);return e.isInitialized()?e.getImmediate():TH(n)}function TH(n,e={}){let t=Ha(n,xE);if(t.isInitialized()){let i=t.getImmediate();if(gp(e,t.getOptions()))return i;throw ia.create("already-initialized")}return t.initialize({options:e})}function MH(n,e,t,r){n=bn(n),Tpe(AH,U_[n.app.options.appId],e,t,r).catch(i=>Es.error(i))}var xH="@firebase/analytics",CH="0.10.17";function Lpe(){Us(new Zi(xE,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Fpe(r,i,t)},"PUBLIC")),Us(new Zi("analytics-internal",n,"PRIVATE")),Gn(xH,CH),Gn(xH,CH,"esm2017");function n(e){try{let t=e.getProvider(xE).getImmediate();return{logEvent:(r,i,o)=>MH(t,r,i,o)}}catch(t){throw ia.create("interop-component-reg-failed",{reason:t})}}}Lpe();var z_=class{constructor(e){return e}},NH="analytics",OR=class{constructor(){return nl(NH)}};var PH=Dr(DH,!0);var W4e=Math.floor(Math.random()*(2**32-1))-2**31;var FR=new Ye("angularfire2.analytics-instances");function Vpe(n,e,t){if(!V5(t))return null;let r=ou(NH,n,e);return r&&new z_(r)}function jpe(n){return(e,t,r)=>{if(!V5(r))return null;let i=e.runOutsideAngular(()=>n(t));return new z_(i)}}var Bpe={provide:OR,deps:[[new Ir,FR]]},Upe={provide:z_,useFactory:Vpe,deps:[[new Ir,FR],Ks,Ui]};function kH(n,...e){return Gn("angularfire",ni.full,"analytics"),to([Upe,Bpe,{provide:FR,useFactory:jpe(n),multi:!0,deps:[Ut,Rn,Ui,ri,uc,...e]}])}var LR="Service workers are disabled or not supported by this browser",e0=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Ot(r=>r.error(new Xe(5601,!1)));else{let r=null,i=new kn;this.worker=new Ot(l=>(r!==null&&l.next(r),i.subscribe(u=>l.next(u))));let o=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Nn(()=>e.getRegistration().then(l=>{if(!l)throw new Xe(5601,!1);return l})));let s=new kn;this.events=s.asObservable();let a=l=>{let{data:u}=l;u?.type&&s.next(u)};e.addEventListener("message",a),t?.get(Wo,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(Ji(1)).subscribe(i=>{i.postMessage(Oe({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(br(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Ji(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(br(i=>i.nonce===e),Ji(1),at(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},OH=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new kn;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Bl,this.notificationClicks=Bl,this.notificationCloses=Bl,this.pushSubscriptionChanges=Bl,this.subscription=Bl;return}this.messages=this.sw.eventsOfType("PUSH").pipe(at(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(at(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(at(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(at(i=>i.data)),this.pushManager=this.sw.registration.pipe(at(i=>i.pushManager));let r=this.pushManager.pipe(Nn(i=>i.getSubscription()));this.subscription=new Ot(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(LR));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Nn(c=>c.subscribe(r)),Ji(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(LR));let t=r=>{if(r===null)throw new Xe(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new Xe(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(Ji(1),Nn(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(Ve(e0))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})(),FH=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Bl,this.unrecoverable=Bl;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(LR));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Xe(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(Ve(e0))};static \u0275prov=Qe({token:n,factory:n.\u0275fac})}return n})();var LH=new Ye("");function zpe(){let n=De(q_);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=De(LH),t=De(Ut),r=De(Wo);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=RH(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),RH(+a[0])]);break;default:throw new Xe(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error(Qa(5604,!1)))})})}function RH(n){return new Promise(e=>setTimeout(e,n))}function qpe(n,e){return new e0(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var q_=class{enabled;updateViaCache;type;scope;registrationStrategy};function Hpe(n,e={}){return to([OH,FH,{provide:LH,useValue:n},{provide:q_,useValue:e},{provide:e0,useFactory:qpe,deps:[q_,Rn]},ng(zpe)])}var VH=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[Hpe(t,r)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ur({type:n});static \u0275inj=ir({providers:[OH,FH]})}return n})();var s0=EG(V$(),1);var Vge=["qrcElement"],j$=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.sanitizer=i,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Lr,this.context=null}ngOnChanges(){return ee(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(r){return this.allowEmptyString===!1?!(typeof r>"u"||r===""||r==="null"||r===null):!(typeof r>"u")}toDataURL(r){return new Promise((i,o)=>{(0,s0.toDataURL)(this.qrdata,r,(s,a)=>{s?o(s):i(a)})})}toCanvas(r,i){return new Promise((o,s)=>{(0,s0.toCanvas)(r,this.qrdata,i,a=>{a?s(a):o("success")})})}toSVG(r){return new Promise((i,o)=>{(0,s0.toString)(this.qrdata,r,(s,a)=>{s?o(s):i(a)})})}renderElement(r){for(let i of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,i);this.renderer.appendChild(this.qrcElement.nativeElement,r)}createQRCode(){return ee(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let r={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},i=this.imageSrc,o=this.imageHeight||40,s=this.imageWidth||40;switch(this.elementType){case"canvas":{let a=this.renderer.createElement("canvas");this.context=a.getContext("2d"),this.toCanvas(a,r).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(a,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(a,"title",`${this.title}`),i&&this.context){this.centerImage=new Image(s,o),i!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=i),o!==this.centerImage.height&&(this.centerImage.height=o),s!==this.centerImage.width&&(this.centerImage.width=s);let c=this.centerImage;c&&(c.onload=()=>{this.context?.drawImage(c,a.width/2-s/2,a.height/2-o/2,s,o)})}this.renderElement(a),this.emitQRCodeURL(a)}).catch(c=>{console.error("[angularx-qrcode] canvas error:",c)});break}case"svg":{let a=this.renderer.createElement("div");this.toSVG(r).then(c=>{this.renderer.setProperty(a,"innerHTML",c);let l=a.firstChild;this.renderer.setAttribute(l,"height",`${this.width}`),this.renderer.setAttribute(l,"width",`${this.width}`),this.renderElement(l),this.emitQRCodeURL(l)}).catch(c=>{console.error("[angularx-qrcode] svg error:",c)});break}case"url":case"img":default:{let a=this.renderer.createElement("img");this.toDataURL(r).then(c=>{this.alt&&a.setAttribute("alt",this.alt),this.ariaLabel&&a.setAttribute("aria-label",this.ariaLabel),a.setAttribute("src",c),this.title&&a.setAttribute("title",this.title),this.renderElement(a),this.emitQRCodeURL(a)}).catch(c=>{console.error("[angularx-qrcode] img/url error:",c)})}}}catch(r){console.error("[angularx-qrcode] Error generating QR Code:",r.message)}})}convertBase64ImageUrlToBlob(r){let i=r.split(";base64,"),o=i[0].split(":")[1],s=atob(i[1]),a=new Uint8Array(s.length);for(let c=0;c<s.length;++c)a[c]=s.charCodeAt(c);return new Blob([a],{type:o})}emitQRCodeURL(r){let i=r.constructor.name;if(i===SVGSVGElement.name){let l=r.outerHTML,u=new Blob([l],{type:"image/svg+xml"}),h=URL.createObjectURL(u),m=this.sanitizer.bypassSecurityTrustUrl(h);this.qrCodeURL.emit(m);return}let o="";i===HTMLCanvasElement.name&&(o=r.toDataURL("image/png")),i===HTMLImageElement.name&&(o=r.src);let s=this.convertBase64ImageUrlToBlob(o),a=URL.createObjectURL(s),c=this.sanitizer.bypassSecurityTrustUrl(a);this.qrCodeURL.emit(c)}};e.\u0275fac=function(i){return new(i||e)(tt($o),tt(Y5))},e.\u0275cmp=Kn({type:e,selectors:[["qrcode"]],viewQuery:function(i,o){if(i&1&&wv(Vge,7),i&2){let s;Wf(s=Kf())&&(o.qrcElement=s.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[Sa],decls:2,vars:2,consts:[["qrcElement",""]],template:function(i,o){i&1&&Sb(0,"div",null,0),i&2&&l5(o.cssClass)},encapsulation:2,changeDetection:0});let n=e;return n})();var B$=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ur({type:e,bootstrap:[EV]}),e.\u0275inj=ir({providers:[Kq,sV(()=>aV(cy.firebase)),SV(()=>AV()),sU(()=>cU()),Qq(()=>Zq()),kH(()=>PH())],imports:[K5,sc,fd,nq,j$,wV.initializeApp(cy.firebase),bV,hq,Wq,VH.register("ngsw-worker.js",{enabled:!cd(),registrationStrategy:"registerWhenStable:30000"})]});let n=e;return n})();W5().bootstrapModule(B$).catch(n=>console.error(n));
